const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-DG1fRI-Q.js","./iframe-Dg-JxBca.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-B2OHM1gV.js"])))=>i.map(i=>d[i]);
import{R as N1,r as R,g as rl,a as qe,c as vd,b as i2,d as FJ}from"./iframe-Dg-JxBca.js";import{_ as A5}from"./preload-helper-D9Z9MdNV.js";import{r as NJ}from"./index-B2OHM1gV.js";var T5={exports:{}},sv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD;function BJ(){if(lD)return sv;lD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var u=null;if(s!==void 0&&(u=""+s),i.key!==void 0&&(u=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:u,ref:i!==void 0?i:null,props:s}}return sv.Fragment=t,sv.jsx=r,sv.jsxs=r,sv}var uD;function jJ(){return uD||(uD=1,T5.exports=BJ()),T5.exports}var Ue=jJ(),l1={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.16.0/LICENSE.txt
 */var zJ=l1.exports,cD;function $J(){return cD||(cD=1,(function(e,t){(function(r,n){e.exports=n()})(zJ,(function(){var r={},n={};function i(u,a,p){if(n[u]=p,u==="index"){var d="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",g={};return n.shared(g),n.index(r,g),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(u){function a(f,o,c,m){return new(c||(c=Promise))((function(v,x){function w(z){try{L(m.next(z))}catch(W){x(W)}}function T(z){try{L(m.throw(z))}catch(W){x(W)}}function L(z){var W;z.done?v(z.value):(W=z.value,W instanceof c?W:new c((function(Q){Q(W)}))).then(w,T)}L((m=m.apply(f,o||[])).next())}))}function p(f,o){this.x=f,this.y=o}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,_;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,o){return this.clone()._rotateAround(f,o)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const o=f.x-this.x,c=f.y-this.y;return o*o+c*c},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,o){return Math.atan2(this.x*o-this.y*f,this.x*f+this.y*o)},_matMult(f){const o=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=o,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const o=Math.cos(f),c=Math.sin(f),m=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=m,this},_rotateAround(f,o){const c=Math.cos(f),m=Math.sin(f),v=o.y+m*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-m*(this.y-o.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(f){if(f instanceof p)return f;if(Array.isArray(f))return new p(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new p(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var C=(function(){if(_)return g;function f(o,c,m,v){this.cx=3*o,this.bx=3*(m-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(v-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=c,this.p2x=m,this.p2y=v}return _=1,g=f,f.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,c){if(c===void 0&&(c=1e-6),o<0)return 0;if(o>1)return 1;for(var m=o,v=0;v<8;v++){var x=this.sampleCurveX(m)-o;if(Math.abs(x)<c)return m;var w=this.sampleCurveDerivativeX(m);if(Math.abs(w)<1e-6)break;m-=x/w}var T=0,L=1;for(m=o,v=0;v<20&&(x=this.sampleCurveX(m),!(Math.abs(x-o)<c));v++)o>x?T=m:L=m,m=.5*(L-T)+T;return m},solve:function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))}},g})(),S=d(C);let I,O;function P(){return I==null&&(I=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),I}function k(){if(O==null&&(O=!1,P())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let m=0;m<25;m++){const v=4*m;o.fillStyle=`rgb(${v},${v+1},${v+2})`,o.fillRect(m%5,Math.floor(m/5),1,1)}const c=o.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&c[m]!==m){O=!0;break}}}return O||!1}var F=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function N(){var f=new B(9);return B!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function G(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function $(){var f=new B(3);return B!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function X(f){var o=f[0],c=f[1],m=f[2];return Math.sqrt(o*o+c*c+m*m)}function ee(f,o,c){var m=new B(3);return m[0]=f,m[1]=o,m[2]=c,m}function J(f,o,c){return f[0]=o[0]+c[0],f[1]=o[1]+c[1],f[2]=o[2]+c[2],f}function le(f,o,c){return f[0]=o[0]*c,f[1]=o[1]*c,f[2]=o[2]*c,f}function Z(f,o,c){var m=o[0],v=o[1],x=o[2],w=c[0],T=c[1],L=c[2];return f[0]=v*L-x*T,f[1]=x*w-m*L,f[2]=m*T-v*w,f}var H,oe=X;function ue(f,o,c){var m=o[0],v=o[1],x=o[2],w=o[3];return f[0]=c[0]*m+c[4]*v+c[8]*x+c[12]*w,f[1]=c[1]*m+c[5]*v+c[9]*x+c[13]*w,f[2]=c[2]*m+c[6]*v+c[10]*x+c[14]*w,f[3]=c[3]*m+c[7]*v+c[11]*x+c[15]*w,f}function ce(){var f=new B(4);return B!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function be(f,o,c,m){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;o*=x,m*=x,c*=x;var w=Math.sin(o),T=Math.cos(o),L=Math.sin(c),z=Math.cos(c),W=Math.sin(m),Q=Math.cos(m);switch(v){case"xyz":f[0]=w*z*Q+T*L*W,f[1]=T*L*Q-w*z*W,f[2]=T*z*W+w*L*Q,f[3]=T*z*Q-w*L*W;break;case"xzy":f[0]=w*z*Q-T*L*W,f[1]=T*L*Q-w*z*W,f[2]=T*z*W+w*L*Q,f[3]=T*z*Q+w*L*W;break;case"yxz":f[0]=w*z*Q+T*L*W,f[1]=T*L*Q-w*z*W,f[2]=T*z*W-w*L*Q,f[3]=T*z*Q+w*L*W;break;case"yzx":f[0]=w*z*Q+T*L*W,f[1]=T*L*Q+w*z*W,f[2]=T*z*W-w*L*Q,f[3]=T*z*Q-w*L*W;break;case"zxy":f[0]=w*z*Q-T*L*W,f[1]=T*L*Q+w*z*W,f[2]=T*z*W+w*L*Q,f[3]=T*z*Q-w*L*W;break;case"zyx":f[0]=w*z*Q-T*L*W,f[1]=T*L*Q+w*z*W,f[2]=T*z*W-w*L*Q,f[3]=T*z*Q+w*L*W;break;default:throw new Error("Unknown angle order "+v)}return f}function Te(){var f=new B(2);return B!=Float32Array&&(f[0]=0,f[1]=0),f}function ve(f,o){var c=new B(2);return c[0]=f,c[1]=o,c}$(),H=new B(4),B!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0,H[3]=0),$(),ee(1,0,0),ee(0,1,0),ce(),ce(),N(),Te();const Ce=8192;function $e(f,o,c){return o*(Ce/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}function Je(f,o){return(f%o+o)%o}function ge(f,o,c){return f*(1-c)+o*c}function Ee(f){if(f<=0)return 0;if(f>=1)return 1;const o=f*f,c=o*f;return 4*(f<.5?c:3*(f-o)+c-.75)}function Ie(f,o,c,m){const v=new S(f,o,c,m);return x=>v.solve(x)}const Le=Ie(.25,.1,.25,1);function Ve(f,o,c){return Math.min(c,Math.max(o,f))}function ht(f,o,c){const m=c-o,v=((f-o)%m+m)%m+o;return v===o?c:v}function It(f,...o){for(const c of o)for(const m in c)f[m]=c[m];return f}let xt=1;function rt(f,o,c){const m={};for(const v in f)m[v]=o.call(this,f[v],v,f);return m}function zt(f,o,c){const m={};for(const v in f)o.call(this,f[v],v,f)&&(m[v]=f[v]);return m}function Lt(f){return Array.isArray(f)?f.map(Lt):typeof f=="object"&&f?rt(f,Lt):f}const Ft={};function dt(f){Ft[f]||(typeof console<"u"&&console.warn(f),Ft[f]=!0)}function ke(f,o,c){return(c.y-f.y)*(o.x-f.x)>(o.y-f.y)*(c.x-f.x)}function fr(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let sr=null;function xr(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const tr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ge(f,o,c,m,v){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(f,{timestamp:0});try{const w=x?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const T=w.startsWith("BGR"),L=new Uint8ClampedArray(m*v*4);if(yield x.copyTo(L,(function(z,W,Q,ae,se){const ye=4*Math.max(-W,0),xe=(Math.max(0,Q)-Q)*ae*4+ye,Se=4*ae,Fe=Math.max(0,W),ct=Math.max(0,Q);return{rect:{x:Fe,y:ct,width:Math.min(z.width,W+ae)-Fe,height:Math.min(z.height,Q+se)-ct},layout:[{offset:xe,stride:Se}]}})(f,o,c,m,v)),T)for(let z=0;z<L.length;z+=4){const W=L[z];L[z]=L[z+2],L[z+2]=W}return L}finally{x.close()}}))}let nt,ut;function Nt(f,o,c,m){return f.addEventListener(o,c,m),{unsubscribe:()=>{f.removeEventListener(o,c,m)}}}function Kt(f){return f*Math.PI/180}function Vt(f){return f/Math.PI*180}const Ke={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},me={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},pe="AbortError";class Ae extends Error{constructor(o=pe){super(o instanceof Error?o.message:o),this.name=pe,o instanceof Error&&o.stack&&(this.stack=o.stack)}}function Be(f){return f.name===pe}const Ne={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Tt(f){return Ne.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const bt="global-dispatcher";class tt extends Error{constructor(o,c,m,v){super(`AJAXError: ${c} (${o}): ${m}`),this.status=o,this.statusText=c,this.url=m,this.body=v}}const gt=()=>fr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$t=function(f,o){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const m=Tt(f.url);if(m)return m(f,o);if(fr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:bt},o)}if(!(/^file:/.test(c=f.url)||/^file:/.test(gt())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(m,v){return a(this,void 0,void 0,(function*(){const x=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:gt(),signal:v.signal});let w,T;m.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(z){throw Be(z)?z:new tt(0,z.message,m.url,new Blob)}if(!w.ok){const z=yield w.blob();throw new tt(w.status,w.statusText,m.url,z)}T=m.type==="arrayBuffer"||m.type==="image"?w.arrayBuffer():m.type==="json"?w.json():w.text();const L=yield T;return v.signal.throwIfAborted(),{data:L,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}}))})(f,o);if(fr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:bt},o)}var c;return(function(m,v){return new Promise(((x,w)=>{var T;const L=new XMLHttpRequest;L.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(L.responseType="arraybuffer");for(const z in m.headers)L.setRequestHeader(z,m.headers[z]);m.type==="json"&&(L.responseType="text",!((T=m.headers)===null||T===void 0)&&T.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=m.credentials==="include",L.onerror=()=>{w(new Error(L.statusText))},L.onload=()=>{if(!v.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let z=L.response;if(m.type==="json")try{z=JSON.parse(L.response)}catch(W){return void w(W)}x({data:z,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const z=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});w(new tt(L.status,L.statusText,m.url,z))}},v.signal.addEventListener("abort",(()=>{L.abort(),w(new Ae(v.signal.reason))})),L.send(m.body)}))})(f,o)};function kt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const o=new URL(f),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function cr(f,o,c){c[f]&&c[f].indexOf(o)!==-1||(c[f]=c[f]||[],c[f].push(o))}function mr(f,o,c){if(c&&c[f]){const m=c[f].indexOf(o);m!==-1&&c[f].splice(m,1)}}class Zr{constructor(o,c={}){It(this,c),this.type=o}}class mn extends Zr{constructor(o,c={}){super("error",It({error:o},c))}}class Kr{on(o,c){return this._listeners=this._listeners||{},cr(o,c,this._listeners),{unsubscribe:()=>{this.off(o,c)}}}off(o,c){return mr(o,c,this._listeners),mr(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},cr(o,c,this._oneTimeListeners),this):new Promise((m=>this.once(o,m)))}fire(o,c){typeof o=="string"&&(o=new Zr(o,c||{}));const m=o.type;if(this.listens(m)){o.target=this;const v=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const T of v)T.call(this,o);const x=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const T of x)mr(m,T,this._oneTimeListeners),T.call(this,o);const w=this._eventedParent;w&&(It(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof mn&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var Rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fn(f,o){const c={};for(const m in f)m!=="ref"&&(c[m]=f[m]);return Ur.forEach((m=>{m in o&&(c[m]=o[m])})),c}function Jr(f,o){if(Array.isArray(f)){if(!Array.isArray(o)||f.length!==o.length)return!1;for(let c=0;c<f.length;c++)if(!Jr(f[c],o[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&o!==null){if(typeof o!="object"||Object.keys(f).length!==Object.keys(o).length)return!1;for(const c in f)if(!Jr(f[c],o[c]))return!1;return!0}return f===o}function jr(f,o){f.push(o)}function wt(f,o,c){jr(c,{command:"addSource",args:[f,o[f]]})}function Ct(f,o,c){jr(o,{command:"removeSource",args:[f]}),c[f]=!0}function Wt(f,o,c,m){Ct(f,c,m),wt(f,o,c)}function ie(f,o,c){let m;for(m in f[c])if(Object.prototype.hasOwnProperty.call(f[c],m)&&m!=="data"&&!Jr(f[c][m],o[c][m]))return!1;for(m in o[c])if(Object.prototype.hasOwnProperty.call(o[c],m)&&m!=="data"&&!Jr(f[c][m],o[c][m]))return!1;return!0}function _e(f,o,c,m,v,x){f=f||{},o=o||{};for(const w in f)Object.prototype.hasOwnProperty.call(f,w)&&(Jr(f[w],o[w])||c.push({command:x,args:[m,w,o[w],v]}));for(const w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(f,w)&&(Jr(f[w],o[w])||c.push({command:x,args:[m,w,o[w],v]}))}function Ze(f){return f.id}function _t(f,o){return f[o.id]=o,f}class lt{constructor(o,c,m,v){this.message=(o?`${o}: `:"")+m,v&&(this.identifier=v),c!=null&&c.__line__&&(this.line=c.__line__)}}function or(f,...o){for(const c of o)for(const m in c)f[m]=c[m];return f}class Ar extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class Vr{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[m,v]of c)this.bindings[m]=v}concat(o){return new Vr(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Rr={kind:"null"},lr={kind:"number"},kr={kind:"string"},Yr={kind:"boolean"},dn={kind:"color"},Bn={kind:"projectionDefinition"},Pn={kind:"object"},un={kind:"value"},Wi={kind:"collator"},Zi={kind:"formatted"},Ui={kind:"padding"},Ri={kind:"colorArray"},Pa={kind:"numberArray"},Vi={kind:"resolvedImage"},Ro={kind:"variableAnchorOffsetCollection"};function Dn(f,o){return{kind:"array",itemType:f,N:o}}function cn(f){if(f.kind==="array"){const o=cn(f.itemType);return typeof f.N=="number"?`array<${o}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${o}>`}return f.kind}const Xi=[Rr,lr,kr,Yr,dn,Bn,Zi,Pn,Dn(un),Ui,Pa,Ri,Vi,Ro];function ia(f,o){if(o.kind==="error")return null;if(f.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!ia(f.itemType,o.itemType))&&(typeof f.N!="number"||f.N===o.N))return null}else{if(f.kind===o.kind)return null;if(f.kind==="value"){for(const c of Xi)if(!ia(c,o))return null}}return`Expected ${cn(f)} but found ${cn(o)} instead.`}function Ki(f,o){return o.some((c=>c.kind===f.kind))}function vi(f,o){return o.some((c=>c==="null"?f===null:c==="array"?Array.isArray(f):c==="object"?f&&!Array.isArray(f)&&typeof f=="object":c===typeof f))}function Yi(f,o){return f.kind==="array"&&o.kind==="array"?f.itemType.kind===o.itemType.kind&&typeof f.N=="number":f.kind===o.kind}const mo=.96422,xs=.82521,fa=4/29,Gi=6/29,Cc=3*Gi*Gi,$s=Gi*Gi*Gi,as=Math.PI/180,os=180/Math.PI;function Tl(f){return(f%=360)<0&&(f+=360),f}function ba([f,o,c,m]){let v,x;const w=Ac((.2225045*(f=Wl(f))+.7168786*(o=Wl(o))+.0606169*(c=Wl(c)))/1);f===o&&o===c?v=x=w:(v=Ac((.4360747*f+.3850649*o+.1430804*c)/mo),x=Ac((.0139322*f+.0971045*o+.7141733*c)/xs));const T=116*w-16;return[T<0?0:T,500*(v-w),200*(w-x),m]}function Wl(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Ac(f){return f>$s?Math.pow(f,1/3):f/Cc+fa}function Zl([f,o,c,m]){let v=(f+16)/116,x=isNaN(o)?v:v+o/500,w=isNaN(c)?v:v-c/200;return v=1*ne(v),x=mo*ne(x),w=xs*ne(w),[U(3.1338561*x-1.6168667*v-.4906146*w),U(-.9787684*x+1.9161415*v+.033454*w),U(.0719453*x-.2289914*v+1.4052427*w),m]}function U(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function ne(f){return f>Gi?f*f*f:Cc*(f-fa)}const De=Object.hasOwn||function(f,o){return Object.prototype.hasOwnProperty.call(f,o)};function mt(f,o){return De(f,o)?f[o]:void 0}function Mt(f){return parseInt(f.padEnd(2,f),16)/255}function Dt(f,o){return Ut(o?f/100:f,0,1)}function Ut(f,o,c){return Math.min(Math.max(o,f),c)}function Tr(f){return!f.some(Number.isNaN)}const Mr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Fr(f,o,c){return f+c*(o-f)}function Nr(f,o,c){return f.map(((m,v)=>Fr(m,o[v],c)))}class hr{constructor(o,c,m,v=1,x=!0){this.r=o,this.g=c,this.b=m,this.a=v,x||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[o,c,m,v]))}static parse(o){if(o instanceof hr)return o;if(typeof o!="string")return;const c=(function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=mt(Mr,m);if(v){const[w,T,L]=v;return[w/255,T/255,L/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const w=m.length<6?1:2;let T=1;return[Mt(m.slice(T,T+=w)),Mt(m.slice(T,T+=w)),Mt(m.slice(T,T+=w)),Mt(m.slice(T,T+w)||"ff")]}if(m.startsWith("rgb")){const w=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[T,L,z,W,Q,ae,se,ye,xe,Se,Fe,ct]=w,je=[W||" ",se||" ",Se].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){const We=[z,ae,xe].join(""),yt=We==="%%%"?100:We===""?255:0;if(yt){const At=[Ut(+L/yt,0,1),Ut(+Q/yt,0,1),Ut(+ye/yt,0,1),Fe?Dt(+Fe,ct):1];if(Tr(At))return At}}return}}const x=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,L,z,W,Q,ae,se,ye]=x,xe=[L||" ",W||" ",ae].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Se=[+T,Ut(+z,0,100),Ut(+Q,0,100),se?Dt(+se,ye):1];if(Tr(Se))return(function([Fe,ct,je,We]){function yt(At){const Zt=(At+Fe/30)%12,gr=ct*Math.min(je,1-je);return je-gr*Math.max(-1,Math.min(Zt-3,9-Zt,1))}return Fe=Tl(Fe),ct/=100,je/=100,[yt(0),yt(8),yt(4),We]})(Se)}}})(o);return c?new hr(...c,!1):void 0}get rgb(){const{r:o,g:c,b:m,a:v}=this,x=v||1/0;return this.overwriteGetter("rgb",[o/x,c/x,m/x,v])}get hcl(){return this.overwriteGetter("hcl",(function(o){const[c,m,v,x]=ba(o),w=Math.sqrt(m*m+v*v);return[Math.round(1e4*w)?Tl(Math.atan2(v,m)*os):NaN,w,c,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ba(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){const[o,c,m,v]=this.rgb;return`rgba(${[o,c,m].map((x=>Math.round(255*x))).join(",")},${v})`}static interpolate(o,c,m,v="rgb"){switch(v){case"rgb":{const[x,w,T,L]=Nr(o.rgb,c.rgb,m);return new hr(x,w,T,L,!1)}case"hcl":{const[x,w,T,L]=o.hcl,[z,W,Q,ae]=c.hcl;let se,ye;if(isNaN(x)||isNaN(z))isNaN(x)?isNaN(z)?se=NaN:(se=z,T!==1&&T!==0||(ye=W)):(se=x,Q!==1&&Q!==0||(ye=w));else{let je=z-x;z>x&&je>180?je-=360:z<x&&x-z>180&&(je+=360),se=x+m*je}const[xe,Se,Fe,ct]=(function([je,We,yt,At]){return je=isNaN(je)?0:je*as,Zl([yt,Math.cos(je)*We,Math.sin(je)*We,At])})([se,ye??Fr(w,W,m),Fr(T,Q,m),Fr(L,ae,m)]);return new hr(xe,Se,Fe,ct,!1)}case"lab":{const[x,w,T,L]=Zl(Nr(o.lab,c.lab,m));return new hr(x,w,T,L,!1)}}}}hr.black=new hr(0,0,0,1),hr.white=new hr(1,1,1,1),hr.transparent=new hr(0,0,0,0),hr.red=new hr(1,0,0,1);class In{constructor(o,c,m){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Li=["bottom","center","top"];class Rn{constructor(o,c,m,v,x,w){this.text=o,this.image=c,this.scale=m,this.fontStack=v,this.textColor=x,this.verticalAlign=w}}class tn{constructor(o){this.sections=o}static fromString(o){return new tn([new Rn(o,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof tn?o:tn.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}}class pr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof pr)return o;if(typeof o=="number")return new pr([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const c of o)if(typeof c!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new pr(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,m){return new pr(Nr(o.values,c.values,m))}}class $r{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof $r)return o;if(typeof o=="number")return new $r([o]);if(Array.isArray(o)){for(const c of o)if(typeof c!="number")return;return new $r(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,m){return new $r(Nr(o.values,c.values,m))}}class Wr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Wr)return o;if(typeof o=="string"){const m=hr.parse(o);return m?new Wr([m]):void 0}if(!Array.isArray(o))return;const c=[];for(const m of o){if(typeof m!="string")return;const v=hr.parse(m);if(!v)return;c.push(v)}return new Wr(c)}toString(){return JSON.stringify(this.values)}static interpolate(o,c,m,v="rgb"){const x=[];if(o.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${o.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let w=0;w<o.values.length;w++)x.push(hr.interpolate(o.values[w],c.values[w],m,v));return new Wr(x)}}class jn extends Error{constructor(o){super(o),this.name="RuntimeError"}toJSON(){return this.message}}const di=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ji{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Ji)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){const m=o[c],v=o[c+1];if(typeof m!="string"||!di.has(m)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Ji(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,m){const v=o.values,x=c.values;if(v.length!==x.length)throw new jn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${c.toString()}`);const w=[];for(let T=0;T<v.length;T+=2){if(v[T]!==x[T])throw new jn(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${v[T]}, to[${T}]: ${x[T]}`);w.push(v[T]);const[L,z]=v[T+1],[W,Q]=x[T+1];w.push([Fr(L,W,m),Fr(z,Q,m)])}return new Ji(w)}}class Lo{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Lo({name:o,available:!1}):null}}class Jn{constructor(o,c,m){this.from=o,this.to=c,this.transition=m}static interpolate(o,c,m){return new Jn(o,c,m)}static parse(o){return o instanceof Jn?o:Array.isArray(o)&&o.length===3&&typeof o[0]=="string"&&typeof o[1]=="string"&&typeof o[2]=="number"?new Jn(o[0],o[1],o[2]):typeof o=="object"&&typeof o.from=="string"&&typeof o.to=="string"&&typeof o.transition=="number"?new Jn(o.from,o.to,o.transition):typeof o=="string"?new Jn(o,o,1):void 0}}function ws(f,o,c,m){return typeof f=="number"&&f>=0&&f<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[f,o,c,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[f,o,c,m]:[f,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ss(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Jn||f instanceof hr||f instanceof In||f instanceof tn||f instanceof pr||f instanceof $r||f instanceof Wr||f instanceof Ji||f instanceof Lo)return!0;if(Array.isArray(f)){for(const o of f)if(!Ss(o))return!1;return!0}if(typeof f=="object"){for(const o in f)if(!Ss(f[o]))return!1;return!0}return!1}function ui(f){if(f===null)return Rr;if(typeof f=="string")return kr;if(typeof f=="boolean")return Yr;if(typeof f=="number")return lr;if(f instanceof hr)return dn;if(f instanceof Jn)return Bn;if(f instanceof In)return Wi;if(f instanceof tn)return Zi;if(f instanceof pr)return Ui;if(f instanceof $r)return Pa;if(f instanceof Wr)return Ri;if(f instanceof Ji)return Ro;if(f instanceof Lo)return Vi;if(Array.isArray(f)){const o=f.length;let c;for(const m of f){const v=ui(m);if(c){if(c===v)continue;c=un;break}c=v}return Dn(c||un,o)}return Pn}function ss(f){const o=typeof f;return f===null?"":o==="string"||o==="number"||o==="boolean"?String(f):f instanceof hr||f instanceof Jn||f instanceof tn||f instanceof pr||f instanceof $r||f instanceof Wr||f instanceof Ji||f instanceof Lo?f.toString():JSON.stringify(f)}class go{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(o.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Ss(o[1]))return c.error("invalid value");const m=o[1];let v=ui(m);const x=c.expectedType;return v.kind!=="array"||v.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(v=x),new go(v,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const xu={string:kr,number:lr,boolean:Yr,object:Pn};class Na{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let m,v=1;const x=o[0];if(x==="array"){let T,L;if(o.length>2){const z=o[1];if(typeof z!="string"||!(z in xu)||z==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);T=xu[z],v++}else T=un;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);L=o[2],v++}m=Dn(T,L)}else{if(!xu[x])throw new Error(`Types doesn't contain name = ${x}`);m=xu[x]}const w=[];for(;v<o.length;v++){const T=c.parse(o[v],v,un);if(!T)return null;w.push(T)}return new Na(m,w)}evaluate(o){for(let c=0;c<this.args.length;c++){const m=this.args[c].evaluate(o);if(!ia(this.type,ui(m)))return m;if(c===this.args.length-1)throw new jn(`Expected value to be of type ${cn(this.type)}, but found ${cn(ui(m))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const Es={"to-boolean":Yr,"to-color":dn,"to-number":lr,"to-string":kr};class yo{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const m=o[0];if(!Es[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&o.length!==2)return c.error("Expected one argument.");const v=Es[m],x=[];for(let w=1;w<o.length;w++){const T=c.parse(o[w],w,un);if(!T)return null;x.push(T)}return new yo(v,x)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,m;for(const v of this.args){if(c=v.evaluate(o),m=null,c instanceof hr)return c;if(typeof c=="string"){const x=o.parseColor(c);if(x)return x}else if(Array.isArray(c)&&(m=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:ws(c[0],c[1],c[2],c[3]),!m))return new hr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new jn(m||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const m of this.args){c=m.evaluate(o);const v=pr.parse(c);if(v)return v}throw new jn(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const m of this.args){c=m.evaluate(o);const v=$r.parse(c);if(v)return v}throw new jn(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const m of this.args){c=m.evaluate(o);const v=Wr.parse(c);if(v)return v}throw new jn(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const m of this.args){c=m.evaluate(o);const v=Ji.parse(c);if(v)return v}throw new jn(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const m of this.args){if(c=m.evaluate(o),c===null)return 0;const v=Number(c);if(!isNaN(v))return v}throw new jn(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return tn.fromString(ss(this.args[0].evaluate(o)));case"resolvedImage":return Lo.fromString(ss(this.args[0].evaluate(o)));case"projectionDefinition":return this.args[0].evaluate(o);default:return ss(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const Xl=["Unknown","Point","LineString","Polygon"];class wu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache.get(o);return c||(c=hr.parse(o),this._parseColorCache.set(o,c)),c}}class Cs{constructor(o,c,m=[],v,x=new Vr,w=[]){this.registry=o,this.path=m,this.key=m.map((T=>`[${T}]`)).join(""),this.scope=x,this.errors=w,this.expectedType=v,this._isConstant=c}parse(o,c,m,v,x={}){return c?this.concat(c,m,v)._parse(o,x):this._parse(o,x)}_parse(o,c){function m(v,x,w){return w==="assert"?new Na(x,[v]):w==="coerce"?new yo(x,[v]):v}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=o[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[v];if(x){let w=x.parse(o,this);if(!w)return null;if(this.expectedType){const T=this.expectedType,L=w.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||L.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(L.kind)||T.kind==="colorArray"&&["value","string","array"].includes(L.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))w=m(w,T,c.typeAnnotation||"coerce");else if(this.checkSubtype(T,L))return null}else w=m(w,T,c.typeAnnotation||"assert")}if(!(w instanceof go)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const T=new wu;try{w=new go(w.type,w.evaluate(T))}catch(L){return this.error(L.message),null}}return w}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,m){const v=typeof o=="number"?this.path.concat(o):this.path,x=m?this.scope.concat(m):this.scope;return new Cs(this.registry,this._isConstant,v,c||null,x,this.errors)}error(o,...c){const m=`${this.key}${c.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Ar(m,o))}checkSubtype(o,c){const m=ia(o,c);return m&&this.error(m),m}}class bi{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const m=[];for(let x=1;x<o.length-1;x+=2){const w=o[x];if(typeof w!="string")return c.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",x);const T=c.parse(o[x+1],x+1);if(!T)return null;m.push([w,T])}const v=c.parse(o[o.length-1],o.length-1,c.expectedType,m);return v?new bi(m,v):null}outputDefined(){return this.result.outputDefined()}}class ls{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const m=o[1];return c.scope.has(m)?new ls(m,c.scope.get(m)):c.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Xn{constructor(o,c,m){this.type=o,this.index=c,this.input=m}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const m=c.parse(o[1],1,lr),v=c.parse(o[2],2,Dn(c.expectedType||un));return m&&v?new Xn(v.type.itemType,m,v):null}evaluate(o){const c=this.index.evaluate(o),m=this.input.evaluate(o);if(c<0)throw new jn(`Array index out of bounds: ${c} < 0.`);if(c>=m.length)throw new jn(`Array index out of bounds: ${c} > ${m.length-1}.`);if(c!==Math.floor(c))throw new jn(`Array index must be an integer, but found ${c} instead.`);return m[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class kn{constructor(o,c){this.type=Yr,this.needle=o,this.haystack=c}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const m=c.parse(o[1],1,un),v=c.parse(o[2],2,un);return m&&v?Ki(m.type,[Yr,kr,lr,Rr,un])?new kn(m,v):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${cn(m.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),m=this.haystack.evaluate(o);if(!m)return!1;if(!vi(c,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${cn(ui(c))} instead.`);if(!vi(m,["string","array"]))throw new jn(`Expected second argument to be of type array or string, but found ${cn(ui(m))} instead.`);return m.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class eo{constructor(o,c,m){this.type=lr,this.needle=o,this.haystack=c,this.fromIndex=m}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 2 or 3 arguments, but found ${o.length-1} instead.`);const m=c.parse(o[1],1,un),v=c.parse(o[2],2,un);if(!m||!v)return null;if(!Ki(m.type,[Yr,kr,lr,Rr,un]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${cn(m.type)} instead`);if(o.length===4){const x=c.parse(o[3],3,lr);return x?new eo(m,v,x):null}return new eo(m,v)}evaluate(o){const c=this.needle.evaluate(o),m=this.haystack.evaluate(o);if(!vi(c,["boolean","string","number","null"]))throw new jn(`Expected first argument to be of type boolean, string, number or null, but found ${cn(ui(c))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(o)),vi(m,["string"])){const x=m.indexOf(c,v);return x===-1?-1:[...m.slice(0,x)].length}if(vi(m,["array"]))return m.indexOf(c,v);throw new jn(`Expected second argument to be of type array or string, but found ${cn(ui(m))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Nn{constructor(o,c,m,v,x,w){this.inputType=o,this.type=c,this.input=m,this.cases=v,this.outputs=x,this.otherwise=w}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let m,v;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);const x={},w=[];for(let z=2;z<o.length-1;z+=2){let W=o[z];const Q=o[z+1];Array.isArray(W)||(W=[W]);const ae=c.concat(z);if(W.length===0)return ae.error("Expected at least one branch label.");for(const ye of W){if(typeof ye!="number"&&typeof ye!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return ae.error("Numeric branch labels must be integer values.");if(m){if(ae.checkSubtype(m,ui(ye)))return null}else m=ui(ye);if(x[String(ye)]!==void 0)return ae.error("Branch labels must be unique.");x[String(ye)]=w.length}const se=c.parse(Q,z,v);if(!se)return null;v=v||se.type,w.push(se)}const T=c.parse(o[1],1,un);if(!T)return null;const L=c.parse(o[o.length-1],o.length-1,v);return L?T.type.kind!=="value"&&c.concat(1).checkSubtype(m,T.type)?null:new Nn(m,v,T,x,w,L):null}evaluate(o){const c=this.input.evaluate(o);return(ui(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}}class Y{constructor(o,c,m){this.type=o,this.branches=c,this.otherwise=m}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);const v=[];for(let w=1;w<o.length-1;w+=2){const T=c.parse(o[w],w,Yr);if(!T)return null;const L=c.parse(o[w+1],w+1,m);if(!L)return null;v.push([T,L]),m=m||L.type}const x=c.parse(o[o.length-1],o.length-1,m);if(!x)return null;if(!m)throw new Error("Can't infer output type");return new Y(m,v,x)}evaluate(o){for(const[c,m]of this.branches)if(c.evaluate(o))return m.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,m]of this.branches)o(c),o(m);o(this.otherwise)}outputDefined(){return this.branches.every((([o,c])=>c.outputDefined()))&&this.otherwise.outputDefined()}}class Pe{constructor(o,c,m,v){this.type=o,this.input=c,this.beginIndex=m,this.endIndex=v}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 2 or 3 arguments, but found ${o.length-1} instead.`);const m=c.parse(o[1],1,un),v=c.parse(o[2],2,lr);if(!m||!v)return null;if(!Ki(m.type,[Dn(un),kr,un]))return c.error(`Expected first argument to be of type array or string, but found ${cn(m.type)} instead`);if(o.length===4){const x=c.parse(o[3],3,lr);return x?new Pe(m.type,m,v,x):null}return new Pe(m.type,m,v)}evaluate(o){const c=this.input.evaluate(o),m=this.beginIndex.evaluate(o);let v;if(this.endIndex&&(v=this.endIndex.evaluate(o)),vi(c,["string"]))return[...c].slice(m,v).join("");if(vi(c,["array"]))return c.slice(m,v);throw new jn(`Expected first argument to be of type array or string, but found ${cn(ui(c))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function it(f,o){const c=f.length-1;let m,v,x=0,w=c,T=0;for(;x<=w;)if(T=Math.floor((x+w)/2),m=f[T],v=f[T+1],m<=o){if(T===c||o<v)return T;x=T+1}else{if(!(m>o))throw new jn("Input is not a number.");w=T-1}return 0}class Ot{constructor(o,c,m){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[v,x]of m)this.labels.push(v),this.outputs.push(x)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const m=c.parse(o[1],1,lr);if(!m)return null;const v=[];let x=null;c.expectedType&&c.expectedType.kind!=="value"&&(x=c.expectedType);for(let w=1;w<o.length;w+=2){const T=w===1?-1/0:o[w],L=o[w+1],z=w,W=w+1;if(typeof T!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(v.length&&v[v.length-1][0]>=T)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const Q=c.parse(L,W,x);if(!Q)return null;x=x||Q.type,v.push([T,Q])}return new Ot(x,m,v)}evaluate(o){const c=this.labels,m=this.outputs;if(c.length===1)return m[0].evaluate(o);const v=this.input.evaluate(o);if(v<=c[0])return m[0].evaluate(o);const x=c.length;return v>=c[x-1]?m[x-1].evaluate(o):m[it(c,v)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function Gt(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var br,Pr,hn=(function(){if(Pr)return br;function f(o,c,m,v){this.cx=3*o,this.bx=3*(m-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(v-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=c,this.p2x=m,this.p2y=v}return Pr=1,br=f,f.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,c){if(c===void 0&&(c=1e-6),o<0)return 0;if(o>1)return 1;for(var m=o,v=0;v<8;v++){var x=this.sampleCurveX(m)-o;if(Math.abs(x)<c)return m;var w=this.sampleCurveDerivativeX(m);if(Math.abs(w)<1e-6)break;m-=x/w}var T=0,L=1;for(m=o,v=0;v<20&&(x=this.sampleCurveX(m),!(Math.abs(x-o)<c));v++)o>x?T=m:L=m,m=.5*(L-T)+T;return m},solve:function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))}},br})(),bn=Gt(hn);class yn{constructor(o,c,m,v,x){this.type=o,this.operator=c,this.interpolation=m,this.input=v,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static interpolationFactor(o,c,m,v){let x=0;if(o.name==="exponential")x=Mn(c,o.base,m,v);else if(o.name==="linear")x=Mn(c,1,m,v);else if(o.name==="cubic-bezier"){const w=o.controlPoints;x=new bn(w[0],w[1],w[2],w[3]).solve(Mn(c,1,m,v))}return x}static parse(o,c){let[m,v,x,...w]=o;if(!Array.isArray(v)||v.length===0)return c.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const z=v[1];if(typeof z!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:z}}else{if(v[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const z=v.slice(1);if(z.length!==4||z.some((W=>typeof W!="number"||W<0||W>1)))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:z}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(x=c.parse(x,2,lr),!x)return null;const T=[];let L=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||c.expectedType==Ri?c.expectedType&&c.expectedType.kind!=="value"&&(L=c.expectedType):L=dn;for(let z=0;z<w.length;z+=2){const W=w[z],Q=w[z+1],ae=z+3,se=z+4;if(typeof W!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(T.length&&T[T.length-1][0]>=W)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const ye=c.parse(Q,se,L);if(!ye)return null;L=L||ye.type,T.push([W,ye])}return Yi(L,lr)||Yi(L,Bn)||Yi(L,dn)||Yi(L,Ui)||Yi(L,Pa)||Yi(L,Ri)||Yi(L,Ro)||Yi(L,Dn(lr))?new yn(L,m,v,x,T):c.error(`Type ${cn(L)} is not interpolatable.`)}evaluate(o){const c=this.labels,m=this.outputs;if(c.length===1)return m[0].evaluate(o);const v=this.input.evaluate(o);if(v<=c[0])return m[0].evaluate(o);const x=c.length;if(v>=c[x-1])return m[x-1].evaluate(o);const w=it(c,v),T=yn.interpolationFactor(this.interpolation,v,c[w],c[w+1]),L=m[w].evaluate(o),z=m[w+1].evaluate(o);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Fr(L,z,T);case"color":return hr.interpolate(L,z,T);case"padding":return pr.interpolate(L,z,T);case"colorArray":return Wr.interpolate(L,z,T);case"numberArray":return $r.interpolate(L,z,T);case"variableAnchorOffsetCollection":return Ji.interpolate(L,z,T);case"array":return Nr(L,z,T);case"projectionDefinition":return Jn.interpolate(L,z,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return hr.interpolate(L,z,T,"hcl");case"colorArray":return Wr.interpolate(L,z,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return hr.interpolate(L,z,T,"lab");case"colorArray":return Wr.interpolate(L,z,T,"lab")}}}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function Mn(f,o,c,m){const v=m-c,x=f-c;return v===0?0:o===1?x/v:(Math.pow(o,x)-1)/(Math.pow(o,v)-1)}const _n={color:hr.interpolate,number:Fr,padding:pr.interpolate,numberArray:$r.interpolate,colorArray:Wr.interpolate,variableAnchorOffsetCollection:Ji.interpolate,array:Nr};class Pi{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let m=null;const v=c.expectedType;v&&v.kind!=="value"&&(m=v);const x=[];for(const T of o.slice(1)){const L=c.parse(T,1+x.length,m,void 0,{typeAnnotation:"omit"});if(!L)return null;m=m||L.type,x.push(L)}if(!m)throw new Error("No output type");const w=v&&x.some((T=>ia(v,T.type)));return new Pi(w?un:m,x)}evaluate(o){let c,m=null,v=0;for(const x of this.args)if(v++,m=x.evaluate(o),m&&m instanceof Lo&&!m.available&&(c||(c=m.name),m=null,v===this.args.length&&(m=c)),m!==null)break;return m}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}function _a(f,o){return f==="=="||f==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Ei(f,o,c,m){return m.compare(o,c)===0}function Vn(f,o,c){const m=f!=="=="&&f!=="!=";return class tq{constructor(x,w,T){this.type=Yr,this.lhs=x,this.rhs=w,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const T=x[0];let L=w.parse(x[1],1,un);if(!L)return null;if(!_a(T,L.type))return w.concat(1).error(`"${T}" comparisons are not supported for type '${cn(L.type)}'.`);let z=w.parse(x[2],2,un);if(!z)return null;if(!_a(T,z.type))return w.concat(2).error(`"${T}" comparisons are not supported for type '${cn(z.type)}'.`);if(L.type.kind!==z.type.kind&&L.type.kind!=="value"&&z.type.kind!=="value")return w.error(`Cannot compare types '${cn(L.type)}' and '${cn(z.type)}'.`);m&&(L.type.kind==="value"&&z.type.kind!=="value"?L=new Na(z.type,[L]):L.type.kind!=="value"&&z.type.kind==="value"&&(z=new Na(L.type,[z])));let W=null;if(x.length===4){if(L.type.kind!=="string"&&z.type.kind!=="string"&&L.type.kind!=="value"&&z.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(W=w.parse(x[3],3,Wi),!W)return null}return new tq(L,z,W)}evaluate(x){const w=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(m&&this.hasUntypedArgument){const L=ui(w),z=ui(T);if(L.kind!==z.kind||L.kind!=="string"&&L.kind!=="number")throw new jn(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${L.kind}, ${z.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const L=ui(w),z=ui(T);if(L.kind!=="string"||z.kind!=="string")return o(x,w,T)}return this.collator?c(x,w,T,this.collator.evaluate(x)):o(x,w,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Qi=Vn("==",(function(f,o,c){return o===c}),Ei),Ia=Vn("!=",(function(f,o,c){return o!==c}),(function(f,o,c,m){return!Ei(0,o,c,m)})),As=Vn("<",(function(f,o,c){return o<c}),(function(f,o,c,m){return m.compare(o,c)<0})),ol=Vn(">",(function(f,o,c){return o>c}),(function(f,o,c,m){return m.compare(o,c)>0})),Ts=Vn("<=",(function(f,o,c){return o<=c}),(function(f,o,c,m){return m.compare(o,c)<=0})),Su=Vn(">=",(function(f,o,c){return o>=c}),(function(f,o,c,m){return m.compare(o,c)>=0}));class Ps{constructor(o,c,m){this.type=Wi,this.locale=m,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(o.length!==2)return c.error("Expected one argument.");const m=o[1];if(typeof m!="object"||Array.isArray(m))return c.error("Collator options argument must be an object.");const v=c.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Yr);if(!v)return null;const x=c.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Yr);if(!x)return null;let w=null;return m.locale&&(w=c.parse(m.locale,1,kr),!w)?null:new Ps(v,x,w)}evaluate(o){return new In(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class us{constructor(o,c,m,v,x){this.type=kr,this.number=o,this.locale=c,this.currency=m,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(o,c){if(o.length!==3)return c.error("Expected two arguments.");const m=c.parse(o[1],1,lr);if(!m)return null;const v=o[2];if(typeof v!="object"||Array.isArray(v))return c.error("NumberFormat options argument must be an object.");let x=null;if(v.locale&&(x=c.parse(v.locale,1,kr),!x))return null;let w=null;if(v.currency&&(w=c.parse(v.currency,1,kr),!w))return null;let T=null;if(v["min-fraction-digits"]&&(T=c.parse(v["min-fraction-digits"],1,lr),!T))return null;let L=null;return v["max-fraction-digits"]&&(L=c.parse(v["max-fraction-digits"],1,lr),!L)?null:new us(m,x,w,T,L)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Pl{constructor(o){this.type=Zi,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const m=o[1];if(!Array.isArray(m)&&typeof m=="object")return c.error("First argument must be an image or text section.");const v=[];let x=!1;for(let w=1;w<=o.length-1;++w){const T=o[w];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let L=null;if(T["font-scale"]&&(L=c.parse(T["font-scale"],1,lr),!L))return null;let z=null;if(T["text-font"]&&(z=c.parse(T["text-font"],1,Dn(kr)),!z))return null;let W=null;if(T["text-color"]&&(W=c.parse(T["text-color"],1,dn),!W))return null;let Q=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!Li.includes(T["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if(Q=c.parse(T["vertical-align"],1,kr),!Q)return null}const ae=v[v.length-1];ae.scale=L,ae.font=z,ae.textColor=W,ae.verticalAlign=Q}else{const L=c.parse(o[w],1,un);if(!L)return null;const z=L.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,v.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Pl(v)}evaluate(o){return new tn(this.sections.map((c=>{const m=c.content.evaluate(o);return ui(m)===Vi?new Rn("",m,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(o):null):new Rn(ss(m),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null,c.verticalAlign?c.verticalAlign.evaluate(o):null)})))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor),c.verticalAlign&&o(c.verticalAlign)}outputDefined(){return!1}}class qs{constructor(o){this.type=Vi,this.input=o}static parse(o,c){if(o.length!==2)return c.error("Expected two arguments.");const m=c.parse(o[1],1,kr);return m?new qs(m):c.error("No image name provided.")}evaluate(o){const c=this.input.evaluate(o),m=Lo.fromString(c);return m&&o.availableImages&&(m.available=o.availableImages.indexOf(c)>-1),m}eachChild(o){o(this.input)}outputDefined(){return!1}}class Go{constructor(o){this.type=lr,this.input=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const m=c.parse(o[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${cn(m.type)} instead.`):new Go(m):null}evaluate(o){const c=this.input.evaluate(o);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new jn(`Expected value to be of type string or array, but found ${cn(ui(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const ni=8192;function vo(f,o){const c=(180+f[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,v=Math.pow(2,o.z);return[Math.round(c*v*ni),Math.round(m*v*ni)]}function xa(f,o){const c=Math.pow(2,o.z);return[(v=(f[0]/ni+o.x)/c,360*v-180),(m=(f[1]/ni+o.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,v}function bo(f,o){f[0]=Math.min(f[0],o[0]),f[1]=Math.min(f[1],o[1]),f[2]=Math.max(f[2],o[0]),f[3]=Math.max(f[3],o[1])}function Ho(f,o){return!(f[0]<=o[0]||f[2]>=o[2]||f[1]<=o[1]||f[3]>=o[3])}function wa(f,o,c){const m=f[0]-o[0],v=f[1]-o[1],x=f[0]-c[0],w=f[1]-c[1];return m*w-x*v==0&&m*x<=0&&v*w<=0}function Eu(f,o,c,m){return(v=[m[0]-c[0],m[1]-c[1]])[0]*(x=[o[0]-f[0],o[1]-f[1]])[1]-v[1]*x[0]!=0&&!(!Cu(f,o,c,m)||!Cu(c,m,f,o));var v,x}function Il(f,o,c){for(const m of c)for(let v=0;v<m.length-1;++v)if(Eu(f,o,m[v],m[v+1]))return!0;return!1}function cs(f,o,c=!1){let m=!1;for(const T of o)for(let L=0;L<T.length-1;L++){if(wa(f,T[L],T[L+1]))return c;(x=T[L])[1]>(v=f)[1]!=(w=T[L+1])[1]>v[1]&&v[0]<(w[0]-x[0])*(v[1]-x[1])/(w[1]-x[1])+x[0]&&(m=!m)}var v,x,w;return m}function ha(f,o){for(const c of o)if(cs(f,c))return!0;return!1}function Wo(f,o){for(const c of f)if(!cs(c,o))return!1;for(let c=0;c<f.length-1;++c)if(Il(f[c],f[c+1],o))return!1;return!0}function Ku(f,o){for(const c of o)if(Wo(f,c))return!0;return!1}function Cu(f,o,c,m){const v=m[0]-c[0],x=m[1]-c[1],w=(f[0]-c[0])*x-v*(f[1]-c[1]),T=(o[0]-c[0])*x-v*(o[1]-c[1]);return w>0&&T<0||w<0&&T>0}function Us(f,o,c){const m=[];for(let v=0;v<f.length;v++){const x=[];for(let w=0;w<f[v].length;w++){const T=vo(f[v][w],c);bo(o,T),x.push(T)}m.push(x)}return m}function Ml(f,o,c){const m=[];for(let v=0;v<f.length;v++){const x=Us(f[v],o,c);m.push(x)}return m}function to(f,o,c,m){if(f[0]<c[0]||f[0]>c[2]){const v=.5*m;let x=f[0]-c[0]>v?-m:c[0]-f[0]>v?m:0;x===0&&(x=f[0]-c[2]>v?-m:c[2]-f[0]>v?m:0),f[0]+=x}bo(o,f)}function Ba(f,o,c,m){const v=Math.pow(2,m.z)*ni,x=[m.x*ni,m.y*ni],w=[];for(const T of f)for(const L of T){const z=[L.x+x[0],L.y+x[1]];to(z,o,c,v),w.push(z)}return w}function Kl(f,o,c,m){const v=Math.pow(2,m.z)*ni,x=[m.x*ni,m.y*ni],w=[];for(const L of f){const z=[];for(const W of L){const Q=[W.x+x[0],W.y+x[1]];bo(o,Q),z.push(Q)}w.push(z)}if(o[2]-o[0]<=v/2){(T=o)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const L of w)for(const z of L)to(z,o,c,v)}var T;return w}class da{constructor(o,c){this.type=Yr,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ss(o[1])){const m=o[1];if(m.type==="FeatureCollection"){const v=[];for(const x of m.features){const{type:w,coordinates:T}=x.geometry;w==="Polygon"&&v.push(T),w==="MultiPolygon"&&v.push(...T)}if(v.length)return new da(m,{type:"MultiPolygon",coordinates:v})}else if(m.type==="Feature"){const v=m.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new da(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new da(m,m)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(c,m){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(m.type==="Polygon"){const T=Us(m.coordinates,x,w),L=Ba(c.geometry(),v,x,w);if(!Ho(v,x))return!1;for(const z of L)if(!cs(z,T))return!1}if(m.type==="MultiPolygon"){const T=Ml(m.coordinates,x,w),L=Ba(c.geometry(),v,x,w);if(!Ho(v,x))return!1;for(const z of L)if(!ha(z,T))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(c,m){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(m.type==="Polygon"){const T=Us(m.coordinates,x,w),L=Kl(c.geometry(),v,x,w);if(!Ho(v,x))return!1;for(const z of L)if(!Wo(z,T))return!1}if(m.type==="MultiPolygon"){const T=Ml(m.coordinates,x,w),L=Kl(c.geometry(),v,x,w);if(!Ho(v,x))return!1;for(const z of L)if(!Ku(z,T))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ol=class{constructor(f=[],o=(c,m)=>c<m?-1:c>m?1:0){if(this.data=f,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:o,compare:c}=this,m=o[f];for(;f>0;){const v=f-1>>1,x=o[v];if(c(m,x)>=0)break;o[f]=x,f=v}o[f]=m}_down(f){const{data:o,compare:c}=this,m=this.length>>1,v=o[f];for(;f<m;){let x=1+(f<<1);const w=x+1;if(w<this.length&&c(o[w],o[x])<0&&(x=w),c(o[x],v)>=0)break;o[f]=o[x],f=x}o[f]=v}};function fs(f,o,c=0,m=f.length-1,v=Sa){for(;m>c;){if(m-c>600){const L=m-c+1,z=o-c+1,W=Math.log(L),Q=.5*Math.exp(2*W/3),ae=.5*Math.sqrt(W*Q*(L-Q)/L)*(z-L/2<0?-1:1);fs(f,o,Math.max(c,Math.floor(o-z*Q/L+ae)),Math.min(m,Math.floor(o+(L-z)*Q/L+ae)),v)}const x=f[o];let w=c,T=m;for(Zo(f,c,o),v(f[m],x)>0&&Zo(f,c,m);w<T;){for(Zo(f,w,T),w++,T--;v(f[w],x)<0;)w++;for(;v(f[T],x)>0;)T--}v(f[c],x)===0?Zo(f,c,T):(T++,Zo(f,T,m)),T<=o&&(c=T+1),o<=T&&(m=T-1)}}function Zo(f,o,c){const m=f[o];f[o]=f[c],f[c]=m}function Sa(f,o){return f<o?-1:f>o?1:0}function Rl(f,o){if(f.length<=1)return[f];const c=[];let m,v;for(const x of f){const w=Vs(x);w!==0&&(x.area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(m&&c.push(m),m=[x]):m.push(x))}if(m&&c.push(m),o>1)for(let x=0;x<c.length;x++)c[x].length<=o||(fs(c[x],o,1,c[x].length-1,Is),c[x]=c[x].slice(0,o));return c}function Is(f,o){return o.area-f.area}function Vs(f){let o=0;for(let c,m,v=0,x=f.length,w=x-1;v<x;w=v++)c=f[v],m=f[w],o+=(m.x-c.x)*(c.y+m.y);return o}const Yl=1/298.257223563,sl=Yl*(2-Yl),Gs=Math.PI/180;class Ll{constructor(o){const c=6378.137*Gs*1e3,m=Math.cos(o*Gs),v=1/(1-sl*(1-m*m)),x=Math.sqrt(v);this.kx=c*x*m,this.ky=c*x*v*(1-sl)}distance(o,c){const m=this.wrap(o[0]-c[0])*this.kx,v=(o[1]-c[1])*this.ky;return Math.sqrt(m*m+v*v)}pointOnLine(o,c){let m,v,x,w,T=1/0;for(let L=0;L<o.length-1;L++){let z=o[L][0],W=o[L][1],Q=this.wrap(o[L+1][0]-z)*this.kx,ae=(o[L+1][1]-W)*this.ky,se=0;Q===0&&ae===0||(se=(this.wrap(c[0]-z)*this.kx*Q+(c[1]-W)*this.ky*ae)/(Q*Q+ae*ae),se>1?(z=o[L+1][0],W=o[L+1][1]):se>0&&(z+=Q/this.kx*se,W+=ae/this.ky*se)),Q=this.wrap(c[0]-z)*this.kx,ae=(c[1]-W)*this.ky;const ye=Q*Q+ae*ae;ye<T&&(T=ye,m=z,v=W,x=L,w=se)}return{point:[m,v],index:x,t:Math.max(0,Math.min(1,w))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Jl(f,o){return o[0]-f[0]}function qt(f){return f[1]-f[0]+1}function ar(f,o){return f[1]>=f[0]&&f[1]<o}function qr(f,o){if(f[0]>f[1])return[null,null];const c=qt(f);if(o){if(c===2)return[f,null];const v=Math.floor(c/2);return[[f[0],f[0]+v],[f[0]+v,f[1]]]}if(c===1)return[f,null];const m=Math.floor(c/2)-1;return[[f[0],f[0]+m],[f[0]+m+1,f[1]]]}function sn(f,o){if(!ar(o,f.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let m=o[0];m<=o[1];++m)bo(c,f[m]);return c}function ci(f){const o=[1/0,1/0,-1/0,-1/0];for(const c of f)for(const m of c)bo(o,m);return o}function gn(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Ln(f,o,c){if(!gn(f)||!gn(o))return NaN;let m=0,v=0;return f[2]<o[0]&&(m=o[0]-f[2]),f[0]>o[2]&&(m=f[0]-o[2]),f[1]>o[3]&&(v=f[1]-o[3]),f[3]<o[1]&&(v=o[1]-f[3]),c.distance([0,0],[m,v])}function zn(f,o,c){const m=c.pointOnLine(o,f);return c.distance(f,m.point)}function _i(f,o,c,m,v){const x=Math.min(zn(f,[c,m],v),zn(o,[c,m],v)),w=Math.min(zn(c,[f,o],v),zn(m,[f,o],v));return Math.min(x,w)}function $i(f,o,c,m,v){if(!ar(o,f.length)||!ar(m,c.length))return 1/0;let x=1/0;for(let w=o[0];w<o[1];++w){const T=f[w],L=f[w+1];for(let z=m[0];z<m[1];++z){const W=c[z],Q=c[z+1];if(Eu(T,L,W,Q))return 0;x=Math.min(x,_i(T,L,W,Q,v))}}return x}function ea(f,o,c,m,v){if(!ar(o,f.length)||!ar(m,c.length))return NaN;let x=1/0;for(let w=o[0];w<=o[1];++w)for(let T=m[0];T<=m[1];++T)if(x=Math.min(x,v.distance(f[w],c[T])),x===0)return x;return x}function Va(f,o,c){if(cs(f,o,!0))return 0;let m=1/0;for(const v of o){const x=v[0],w=v[v.length-1];if(x!==w&&(m=Math.min(m,zn(f,[w,x],c)),m===0))return m;const T=c.pointOnLine(v,f);if(m=Math.min(m,c.distance(f,T.point)),m===0)return m}return m}function hs(f,o,c,m){if(!ar(o,f.length))return NaN;for(let x=o[0];x<=o[1];++x)if(cs(f[x],c,!0))return 0;let v=1/0;for(let x=o[0];x<o[1];++x){const w=f[x],T=f[x+1];for(const L of c)for(let z=0,W=L.length,Q=W-1;z<W;Q=z++){const ae=L[Q],se=L[z];if(Eu(w,T,ae,se))return 0;v=Math.min(v,_i(w,T,ae,se,m))}}return v}function uo(f,o){for(const c of f)for(const m of c)if(cs(m,o,!0))return!0;return!1}function ll(f,o,c,m=1/0){const v=ci(f),x=ci(o);if(m!==1/0&&Ln(v,x,c)>=m)return m;if(Ho(v,x)){if(uo(f,o))return 0}else if(uo(o,f))return 0;let w=1/0;for(const T of f)for(let L=0,z=T.length,W=z-1;L<z;W=L++){const Q=T[W],ae=T[L];for(const se of o)for(let ye=0,xe=se.length,Se=xe-1;ye<xe;Se=ye++){const Fe=se[Se],ct=se[ye];if(Eu(Q,ae,Fe,ct))return 0;w=Math.min(w,_i(Q,ae,Fe,ct,c))}}return w}function ii(f,o,c,m,v,x){if(!x)return;const w=Ln(sn(m,x),v,c);w<o&&f.push([w,x,[0,0]])}function Ql(f,o,c,m,v,x,w){if(!x||!w)return;const T=Ln(sn(m,x),sn(v,w),c);T<o&&f.push([T,x,w])}function ul(f,o,c,m,v=1/0){let x=Math.min(m.distance(f[0],c[0][0]),v);if(x===0)return x;const w=new Ol([[0,[0,f.length-1],[0,0]]],Jl),T=ci(c);for(;w.length>0;){const L=w.pop();if(L[0]>=x)continue;const z=L[1],W=o?50:100;if(qt(z)<=W){if(!ar(z,f.length))return NaN;if(o){const Q=hs(f,z,c,m);if(isNaN(Q)||Q===0)return Q;x=Math.min(x,Q)}else for(let Q=z[0];Q<=z[1];++Q){const ae=Va(f[Q],c,m);if(x=Math.min(x,ae),x===0)return 0}}else{const Q=qr(z,o);ii(w,x,m,f,T,Q[0]),ii(w,x,m,f,T,Q[1])}}return x}function Dl(f,o,c,m,v,x=1/0){let w=Math.min(x,v.distance(f[0],c[0]));if(w===0)return w;const T=new Ol([[0,[0,f.length-1],[0,c.length-1]]],Jl);for(;T.length>0;){const L=T.pop();if(L[0]>=w)continue;const z=L[1],W=L[2],Q=o?50:100,ae=m?50:100;if(qt(z)<=Q&&qt(W)<=ae){if(!ar(z,f.length)&&ar(W,c.length))return NaN;let se;if(o&&m)se=$i(f,z,c,W,v),w=Math.min(w,se);else if(o&&!m){const ye=f.slice(z[0],z[1]+1);for(let xe=W[0];xe<=W[1];++xe)if(se=zn(c[xe],ye,v),w=Math.min(w,se),w===0)return w}else if(!o&&m){const ye=c.slice(W[0],W[1]+1);for(let xe=z[0];xe<=z[1];++xe)if(se=zn(f[xe],ye,v),w=Math.min(w,se),w===0)return w}else se=ea(f,z,c,W,v),w=Math.min(w,se)}else{const se=qr(z,o),ye=qr(W,m);Ql(T,w,v,f,c,se[0],ye[0]),Ql(T,w,v,f,c,se[0],ye[1]),Ql(T,w,v,f,c,se[1],ye[0]),Ql(T,w,v,f,c,se[1],ye[1])}}return w}function Tc(f){return f.type==="MultiPolygon"?f.coordinates.map((o=>({type:"Polygon",coordinates:o}))):f.type==="MultiLineString"?f.coordinates.map((o=>({type:"LineString",coordinates:o}))):f.type==="MultiPoint"?f.coordinates.map((o=>({type:"Point",coordinates:o}))):[f]}class eu{constructor(o,c){this.type=lr,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ss(o[1])){const m=o[1];if(m.type==="FeatureCollection")return new eu(m,m.features.map((v=>Tc(v.geometry))).flat());if(m.type==="Feature")return new eu(m,Tc(m.geometry));if("type"in m&&"coordinates"in m)return new eu(m,Tc(m))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(c,m){const v=c.geometry(),x=v.flat().map((L=>xa([L.x,L.y],c.canonical)));if(v.length===0)return NaN;const w=new Ll(x[0][1]);let T=1/0;for(const L of m){switch(L.type){case"Point":T=Math.min(T,Dl(x,!1,[L.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,Dl(x,!1,L.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,ul(x,!1,L.coordinates,w,T))}if(T===0)return T}return T})(o,this.geometries);if(o.geometryType()==="LineString")return(function(c,m){const v=c.geometry(),x=v.flat().map((L=>xa([L.x,L.y],c.canonical)));if(v.length===0)return NaN;const w=new Ll(x[0][1]);let T=1/0;for(const L of m){switch(L.type){case"Point":T=Math.min(T,Dl(x,!0,[L.coordinates],!1,w,T));break;case"LineString":T=Math.min(T,Dl(x,!0,L.coordinates,!0,w,T));break;case"Polygon":T=Math.min(T,ul(x,!0,L.coordinates,w,T))}if(T===0)return T}return T})(o,this.geometries);if(o.geometryType()==="Polygon")return(function(c,m){const v=c.geometry();if(v.length===0||v[0].length===0)return NaN;const x=Rl(v,0).map((L=>L.map((z=>z.map((W=>xa([W.x,W.y],c.canonical))))))),w=new Ll(x[0][0][0][1]);let T=1/0;for(const L of m)for(const z of x){switch(L.type){case"Point":T=Math.min(T,ul([L.coordinates],!1,z,w,T));break;case"LineString":T=Math.min(T,ul(L.coordinates,!0,z,w,T));break;case"Polygon":T=Math.min(T,ll(z,L.coordinates,w,T))}if(T===0)return T}return T})(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Yu{constructor(o){this.type=un,this.key=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const m=o[1];return m==null?c.error("Global state property must be defined."):typeof m!="string"?c.error(`Global state property must be string, but found ${typeof o[1]} instead.`):new Yu(m)}evaluate(o){var c;const m=(c=o.globals)===null||c===void 0?void 0:c.globalState;return m&&Object.keys(m).length!==0?mt(m,this.key):null}eachChild(){}outputDefined(){return!1}}const xi={"==":Qi,"!=":Ia,">":ol,"<":As,">=":Su,"<=":Ts,array:Na,at:Xn,boolean:Na,case:Y,coalesce:Pi,collator:Ps,format:Pl,image:qs,in:kn,"index-of":eo,interpolate:yn,"interpolate-hcl":yn,"interpolate-lab":yn,length:Go,let:bi,literal:go,match:Nn,number:Na,"number-format":us,object:Na,slice:Pe,step:Ot,string:Na,"to-boolean":yo,"to-color":yo,"to-number":yo,"to-string":yo,var:ls,within:da,distance:eu,"global-state":Yu};class Qn{constructor(o,c,m,v){this.name=o,this.type=c,this._evaluate=m,this.args=v}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){const m=o[0],v=Qn.definitions[m];if(!v)return c.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(v)?v[0]:v.type,w=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,T=w.filter((([z])=>!Array.isArray(z)||z.length===o.length-1));let L=null;for(const[z,W]of T){L=new Cs(c.registry,ps,c.path,null,c.scope);const Q=[];let ae=!1;for(let se=1;se<o.length;se++){const ye=o[se],xe=Array.isArray(z)?z[se-1]:z.type,Se=L.parse(ye,1+Q.length,xe);if(!Se){ae=!0;break}Q.push(Se)}if(!ae)if(Array.isArray(z)&&z.length!==Q.length)L.error(`Expected ${z.length} arguments, but found ${Q.length} instead.`);else{for(let se=0;se<Q.length;se++){const ye=Array.isArray(z)?z[se]:z.type,xe=Q[se];L.concat(se+1).checkSubtype(ye,xe.type)}if(L.errors.length===0)return new Qn(m,x,W,Q)}}if(T.length===1)c.errors.push(...L.errors);else{const z=(T.length?T:w).map((([Q])=>{return ae=Q,Array.isArray(ae)?`(${ae.map(cn).join(", ")})`:`(${cn(ae.type)}...)`;var ae})).join(" | "),W=[];for(let Q=1;Q<o.length;Q++){const ae=c.parse(o[Q],1+W.length);if(!ae)return null;W.push(cn(ae.type))}c.error(`Expected arguments of type ${z}, but found (${W.join(", ")}) instead.`)}return null}static register(o,c){Qn.definitions=c;for(const m in c)o[m]=Qn}}function Ju(f,[o,c,m,v]){o=o.evaluate(f),c=c.evaluate(f),m=m.evaluate(f);const x=v?v.evaluate(f):1,w=ws(o,c,m,x);if(w)throw new jn(w);return new hr(o/255,c/255,m/255,x,!1)}function ds(f,o){return f in o}function Qu(f,o){const c=o[f];return c===void 0?null:c}function Ga(f){return{type:f}}function ps(f){if(f instanceof ls)return ps(f.boundExpression);if(f instanceof Qn&&f.name==="error"||f instanceof Ps||f instanceof da||f instanceof eu||f instanceof Yu)return!1;const o=f instanceof yo||f instanceof Na;let c=!0;return f.eachChild((m=>{c=o?c&&ps(m):c&&m instanceof go})),!!c&&Ms(f)&&tu(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ms(f){if(f instanceof Qn&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof da||f instanceof eu)return!1;let o=!0;return f.eachChild((c=>{o&&!Ms(c)&&(o=!1)})),o}function cl(f){if(f instanceof Qn&&f.name==="feature-state")return!1;let o=!0;return f.eachChild((c=>{o&&!cl(c)&&(o=!1)})),o}function tu(f,o){if(f instanceof Qn&&o.indexOf(f.name)>=0)return!1;let c=!0;return f.eachChild((m=>{c&&!tu(m,o)&&(c=!1)})),c}function ru(f){return{result:"success",value:f}}function ms(f){return{result:"error",value:f}}function kl(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function nu(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function co(f){return!!f.expression&&f.expression.interpolated}function Cn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function fl(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&ui(f)===Pn}function Pc(f){return f}function ec(f,o){const c=f.stops&&typeof f.stops[0][0]=="object",m=c||!(c||f.property!==void 0),v=f.type||(co(o)?"exponential":"interval"),x=(function(W){switch(W.type){case"color":return hr.parse;case"padding":return pr.parse;case"numberArray":return $r.parse;case"colorArray":return Wr.parse;default:return null}})(o);if(x&&((f=or({},f)).stops&&(f.stops=f.stops.map((W=>[W[0],x(W[1])]))),f.default=x(f.default?f.default:o.default)),f.colorSpace&&(w=f.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var w;const T=(function(W){switch(W){case"exponential":return Gd;case"interval":return Vd;case"categorical":return Uh;case"identity":return Hd;default:throw new Error(`Unknown function type "${W}"`)}})(v);let L,z;if(v==="categorical"){L=Object.create(null);for(const W of f.stops)L[W[0]]=W[1];z=typeof f.stops[0][0]}if(c){const W={},Q=[];for(let ye=0;ye<f.stops.length;ye++){const xe=f.stops[ye],Se=xe[0].zoom;W[Se]===void 0&&(W[Se]={zoom:Se,type:f.type,property:f.property,default:f.default,stops:[]},Q.push(Se)),W[Se].stops.push([xe[0].value,xe[1]])}const ae=[];for(const ye of Q)ae.push([W[ye].zoom,ec(W[ye],o)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:yn.interpolationFactor.bind(void 0,se),zoomStops:ae.map((ye=>ye[0])),evaluate:({zoom:ye},xe)=>Gd({stops:ae,base:f.base},o,ye).evaluate(ye,xe)}}if(m){const W=v==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:yn.interpolationFactor.bind(void 0,W),zoomStops:f.stops.map((Q=>Q[0])),evaluate:({zoom:Q})=>T(f,o,Q,L,z)}}return{kind:"source",evaluate(W,Q){const ae=Q&&Q.properties?Q.properties[f.property]:void 0;return ae===void 0?Hs(f.default,o.default):T(f,o,ae,L,z)}}}function Hs(f,o,c){return f!==void 0?f:o!==void 0?o:c!==void 0?c:void 0}function Uh(f,o,c,m,v){return Hs(typeof c===v?m[c]:void 0,f.default,o.default)}function Vd(f,o,c){if(Cn(c)!=="number")return Hs(f.default,o.default);const m=f.stops.length;if(m===1||c<=f.stops[0][0])return f.stops[0][1];if(c>=f.stops[m-1][0])return f.stops[m-1][1];const v=it(f.stops.map((x=>x[0])),c);return f.stops[v][1]}function Gd(f,o,c){const m=f.base!==void 0?f.base:1;if(Cn(c)!=="number")return Hs(f.default,o.default);const v=f.stops.length;if(v===1||c<=f.stops[0][0])return f.stops[0][1];if(c>=f.stops[v-1][0])return f.stops[v-1][1];const x=it(f.stops.map((W=>W[0])),c),w=(function(W,Q,ae,se){const ye=se-ae,xe=W-ae;return ye===0?0:Q===1?xe/ye:(Math.pow(Q,xe)-1)/(Math.pow(Q,ye)-1)})(c,m,f.stops[x][0],f.stops[x+1][0]),T=f.stops[x][1],L=f.stops[x+1][1],z=_n[o.type]||Pc;return typeof T.evaluate=="function"?{evaluate(...W){const Q=T.evaluate.apply(void 0,W),ae=L.evaluate.apply(void 0,W);if(Q!==void 0&&ae!==void 0)return z(Q,ae,w,f.colorSpace)}}:z(T,L,w,f.colorSpace)}function Hd(f,o,c){switch(o.type){case"color":c=hr.parse(c);break;case"formatted":c=tn.fromString(c.toString());break;case"resolvedImage":c=Lo.fromString(c.toString());break;case"padding":c=pr.parse(c);break;case"colorArray":c=Wr.parse(c);break;case"numberArray":c=$r.parse(c);break;default:Cn(c)===o.type||o.type==="enum"&&o.values[c]||(c=void 0)}return Hs(c,f.default,o.default)}Qn.register(xi,{error:[{kind:"error"},[kr],(f,[o])=>{throw new jn(o.evaluate(f))}],typeof:[kr,[un],(f,[o])=>cn(ui(o.evaluate(f)))],"to-rgba":[Dn(lr,4),[dn],(f,[o])=>{const[c,m,v,x]=o.evaluate(f).rgb;return[255*c,255*m,255*v,x]}],rgb:[dn,[lr,lr,lr],Ju],rgba:[dn,[lr,lr,lr,lr],Ju],has:{type:Yr,overloads:[[[kr],(f,[o])=>ds(o.evaluate(f),f.properties())],[[kr,Pn],(f,[o,c])=>ds(o.evaluate(f),c.evaluate(f))]]},get:{type:un,overloads:[[[kr],(f,[o])=>Qu(o.evaluate(f),f.properties())],[[kr,Pn],(f,[o,c])=>Qu(o.evaluate(f),c.evaluate(f))]]},"feature-state":[un,[kr],(f,[o])=>Qu(o.evaluate(f),f.featureState||{})],properties:[Pn,[],f=>f.properties()],"geometry-type":[kr,[],f=>f.geometryType()],id:[un,[],f=>f.id()],zoom:[lr,[],f=>f.globals.zoom],"heatmap-density":[lr,[],f=>f.globals.heatmapDensity||0],elevation:[lr,[],f=>f.globals.elevation||0],"line-progress":[lr,[],f=>f.globals.lineProgress||0],accumulated:[un,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[lr,Ga(lr),(f,o)=>{let c=0;for(const m of o)c+=m.evaluate(f);return c}],"*":[lr,Ga(lr),(f,o)=>{let c=1;for(const m of o)c*=m.evaluate(f);return c}],"-":{type:lr,overloads:[[[lr,lr],(f,[o,c])=>o.evaluate(f)-c.evaluate(f)],[[lr],(f,[o])=>-o.evaluate(f)]]},"/":[lr,[lr,lr],(f,[o,c])=>o.evaluate(f)/c.evaluate(f)],"%":[lr,[lr,lr],(f,[o,c])=>o.evaluate(f)%c.evaluate(f)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],(f,[o,c])=>Math.pow(o.evaluate(f),c.evaluate(f))],sqrt:[lr,[lr],(f,[o])=>Math.sqrt(o.evaluate(f))],log10:[lr,[lr],(f,[o])=>Math.log(o.evaluate(f))/Math.LN10],ln:[lr,[lr],(f,[o])=>Math.log(o.evaluate(f))],log2:[lr,[lr],(f,[o])=>Math.log(o.evaluate(f))/Math.LN2],sin:[lr,[lr],(f,[o])=>Math.sin(o.evaluate(f))],cos:[lr,[lr],(f,[o])=>Math.cos(o.evaluate(f))],tan:[lr,[lr],(f,[o])=>Math.tan(o.evaluate(f))],asin:[lr,[lr],(f,[o])=>Math.asin(o.evaluate(f))],acos:[lr,[lr],(f,[o])=>Math.acos(o.evaluate(f))],atan:[lr,[lr],(f,[o])=>Math.atan(o.evaluate(f))],min:[lr,Ga(lr),(f,o)=>Math.min(...o.map((c=>c.evaluate(f))))],max:[lr,Ga(lr),(f,o)=>Math.max(...o.map((c=>c.evaluate(f))))],abs:[lr,[lr],(f,[o])=>Math.abs(o.evaluate(f))],round:[lr,[lr],(f,[o])=>{const c=o.evaluate(f);return c<0?-Math.round(-c):Math.round(c)}],floor:[lr,[lr],(f,[o])=>Math.floor(o.evaluate(f))],ceil:[lr,[lr],(f,[o])=>Math.ceil(o.evaluate(f))],"filter-==":[Yr,[kr,un],(f,[o,c])=>f.properties()[o.value]===c.value],"filter-id-==":[Yr,[un],(f,[o])=>f.id()===o.value],"filter-type-==":[Yr,[kr],(f,[o])=>f.geometryType()===o.value],"filter-<":[Yr,[kr,un],(f,[o,c])=>{const m=f.properties()[o.value],v=c.value;return typeof m==typeof v&&m<v}],"filter-id-<":[Yr,[un],(f,[o])=>{const c=f.id(),m=o.value;return typeof c==typeof m&&c<m}],"filter->":[Yr,[kr,un],(f,[o,c])=>{const m=f.properties()[o.value],v=c.value;return typeof m==typeof v&&m>v}],"filter-id->":[Yr,[un],(f,[o])=>{const c=f.id(),m=o.value;return typeof c==typeof m&&c>m}],"filter-<=":[Yr,[kr,un],(f,[o,c])=>{const m=f.properties()[o.value],v=c.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[Yr,[un],(f,[o])=>{const c=f.id(),m=o.value;return typeof c==typeof m&&c<=m}],"filter->=":[Yr,[kr,un],(f,[o,c])=>{const m=f.properties()[o.value],v=c.value;return typeof m==typeof v&&m>=v}],"filter-id->=":[Yr,[un],(f,[o])=>{const c=f.id(),m=o.value;return typeof c==typeof m&&c>=m}],"filter-has":[Yr,[un],(f,[o])=>o.value in f.properties()],"filter-has-id":[Yr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Yr,[Dn(kr)],(f,[o])=>o.value.indexOf(f.geometryType())>=0],"filter-id-in":[Yr,[Dn(un)],(f,[o])=>o.value.indexOf(f.id())>=0],"filter-in-small":[Yr,[kr,Dn(un)],(f,[o,c])=>c.value.indexOf(f.properties()[o.value])>=0],"filter-in-large":[Yr,[kr,Dn(un)],(f,[o,c])=>(function(m,v,x,w){for(;x<=w;){const T=x+w>>1;if(v[T]===m)return!0;v[T]>m?w=T-1:x=T+1}return!1})(f.properties()[o.value],c.value,0,c.value.length-1)],all:{type:Yr,overloads:[[[Yr,Yr],(f,[o,c])=>o.evaluate(f)&&c.evaluate(f)],[Ga(Yr),(f,o)=>{for(const c of o)if(!c.evaluate(f))return!1;return!0}]]},any:{type:Yr,overloads:[[[Yr,Yr],(f,[o,c])=>o.evaluate(f)||c.evaluate(f)],[Ga(Yr),(f,o)=>{for(const c of o)if(c.evaluate(f))return!0;return!1}]]},"!":[Yr,[Yr],(f,[o])=>!o.evaluate(f)],"is-supported-script":[Yr,[kr],(f,[o])=>{const c=f.globals&&f.globals.isSupportedScript;return!c||c(o.evaluate(f))}],upcase:[kr,[kr],(f,[o])=>o.evaluate(f).toUpperCase()],downcase:[kr,[kr],(f,[o])=>o.evaluate(f).toLowerCase()],concat:[kr,Ga(un),(f,o)=>o.map((c=>ss(c.evaluate(f)))).join("")],"resolved-locale":[kr,[Wi],(f,[o])=>o.evaluate(f).resolvedLocale()]});class Qf{constructor(o,c,m){this.expression=o,this._warningHistory={},this._evaluator=new wu,this._defaultValue=c?(function(v){if(v.type==="color"&&fl(v.default))return new hr(0,0,0,0);switch(v.type){case"color":return hr.parse(v.default)||null;case"padding":return pr.parse(v.default)||null;case"numberArray":return $r.parse(v.default)||null;case"colorArray":return Wr.parse(v.default)||null;case"variableAnchorOffsetCollection":return Ji.parse(v.default)||null;case"projectionDefinition":return Jn.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(c):null,this._enumValues=c&&c.type==="enum"?c.values:null,this._globalState=m}evaluateWithoutErrorHandling(o,c,m,v,x,w){return this._globalState&&(o=Mc(o,this._globalState)),this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=m,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,c,m,v,x,w){this._globalState&&(o=Mc(o,this._globalState)),this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=m||null,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new jn(`Expected value to be one of ${Object.keys(this._enumValues).map((L=>JSON.stringify(L))).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function Au(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in xi}function Ic(f,o,c){const m=new Cs(xi,ps,[],o?(function(x){const w={color:dn,string:kr,number:lr,enum:kr,boolean:Yr,formatted:Zi,padding:Ui,numberArray:Pa,colorArray:Ri,projectionDefinition:Bn,resolvedImage:Vi,variableAnchorOffsetCollection:Ro};return x.type==="array"?Dn(w[x.value]||un,x.length):w[x.type]})(o):void 0),v=m.parse(f,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?ru(new Qf(v,o,c)):ms(m.errors)}class Vh{constructor(o,c,m){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!cl(c.expression),this.globalStateRefs=tc(c.expression),this._globalState=m}evaluateWithoutErrorHandling(o,c,m,v,x,w){return this._globalState&&(o=Mc(o,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(o,c,m,v,x,w)}evaluate(o,c,m,v,x,w){return this._globalState&&(o=Mc(o,this._globalState)),this._styleExpression.evaluate(o,c,m,v,x,w)}}class Wd{constructor(o,c,m,v,x){this.kind=o,this.zoomStops=m,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!cl(c.expression),this.globalStateRefs=tc(c.expression),this.interpolationType=v,this._globalState=x}evaluateWithoutErrorHandling(o,c,m,v,x,w){return this._globalState&&(o=Mc(o,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(o,c,m,v,x,w)}evaluate(o,c,m,v,x,w){return this._globalState&&(o=Mc(o,this._globalState)),this._styleExpression.evaluate(o,c,m,v,x,w)}interpolationFactor(o,c,m){return this.interpolationType?yn.interpolationFactor(this.interpolationType,o,c,m):0}}function Gh(f,o,c){const m=Ic(f,o,c);if(m.result==="error")return m;const v=m.value.expression,x=Ms(v);if(!x&&!kl(o))return ms([new Ar("","data expressions not supported")]);const w=tu(v,["zoom"]);if(!w&&!nu(o))return ms([new Ar("","zoom expressions not supported")]);const T=Wh(v);return T||w?T instanceof Ar?ms([T]):T instanceof yn&&!co(o)?ms([new Ar("",'"interpolate" expressions cannot be used with this property')]):ru(T?new Wd(x?"camera":"composite",m.value,T.labels,T instanceof yn?T.interpolation:void 0,c):new Vh(x?"constant":"source",m.value,c)):ms([new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Hh{constructor(o,c){this._parameters=o,this._specification=c,or(this,ec(this._parameters,this._specification))}static deserialize(o){return new Hh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Wh(f){let o=null;if(f instanceof bi)o=Wh(f.result);else if(f instanceof Pi){for(const c of f.args)if(o=Wh(c),o)break}else(f instanceof Ot||f instanceof yn)&&f.input instanceof Qn&&f.input.name==="zoom"&&(o=f);return o instanceof Ar||f.eachChild((c=>{const m=Wh(c);m instanceof Ar?o=m:!o&&m?o=new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&m&&o!==m&&(o=new Ar("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}function tc(f,o=new Set){return f instanceof Yu&&o.add(f.key),f.eachChild((c=>{tc(c,o)})),o}function Mc(f,o){const{zoom:c,heatmapDensity:m,elevation:v,lineProgress:x,isSupportedScript:w,accumulated:T}=f??{};return{zoom:c,heatmapDensity:m,elevation:v,lineProgress:x,isSupportedScript:w,accumulated:T,globalState:o}}function Zd(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const o of f.slice(1))if(!Zd(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Xd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Oc(f,o){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Zd(f)||(f=th(f));const c=Ic(f,Xd,o);if(c.result==="error")throw new Error(c.value.map((m=>`${m.key}: ${m.message}`)).join(", "));return{filter:(m,v,x)=>c.value.evaluate(m,v,{},x),needGeometry:mm(f),getGlobalStateRefs:()=>tc(c.value.expression)}}function eh(f,o){return f<o?-1:f>o?1:0}function mm(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let o=1;o<f.length;o++)if(mm(f[o]))return!0;return!1}function th(f){if(!f)return!0;const o=f[0];return f.length<=1?o!=="any":o==="=="?rh(f[1],f[2],"=="):o==="!="?nh(rh(f[1],f[2],"==")):o==="<"||o===">"||o==="<="||o===">="?rh(f[1],f[2],o):o==="any"?(c=f.slice(1),["any"].concat(c.map(th))):o==="all"?["all"].concat(f.slice(1).map(th)):o==="none"?["all"].concat(f.slice(1).map(th).map(nh)):o==="in"?gm(f[1],f.slice(2)):o==="!in"?nh(gm(f[1],f.slice(2))):o==="has"?ym(f[1]):o!=="!has"||nh(ym(f[1]));var c}function rh(f,o,c){switch(f){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,f,o]}}function gm(f,o){if(o.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((c=>typeof c!=typeof o[0]))?["filter-in-large",f,["literal",o.sort(eh)]]:["filter-in-small",f,["literal",o]]}}function ym(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function nh(f){return["!",f]}function Zh(f){const o=typeof f;if(o==="number"||o==="boolean"||o==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let v="[";for(const x of f)v+=`${Zh(x)},`;return`${v}]`}const c=Object.keys(f).sort();let m="{";for(let v=0;v<c.length;v++)m+=`${JSON.stringify(c[v])}:${Zh(f[c[v]])},`;return`${m}}`}function Tu(f){let o="";for(const c of Ur)o+=`/${Zh(f[c])}`;return o}function hl(f){const o=f.value;return o?[new lt(f.key,o,"constants have been deprecated as of v8")]:[]}function Fi(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Rc(f){if(Array.isArray(f))return f.map(Rc);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const o={};for(const c in f)o[c]=Rc(f[c]);return o}return Fi(f)}function Os(f){const o=f.key,c=f.value,m=f.valueSpec||{},v=f.objectElementValidators||{},x=f.style,w=f.styleSpec,T=f.validateSpec;let L=[];const z=Cn(c);if(z!=="object")return[new lt(o,c,`object expected, ${z} found`)];for(const W in c){const Q=W.split(".")[0],ae=mt(m,Q)||m["*"];let se;if(mt(v,Q))se=v[Q];else if(mt(m,Q)){if(c[W]===void 0)continue;se=T}else if(v["*"])se=v["*"];else{if(!m["*"]){L.push(new lt(o,c[W],`unknown property "${W}"`));continue}se=T}L=L.concat(se({key:(o&&`${o}.`)+W,value:c[W],valueSpec:ae,style:x,styleSpec:w,object:c,objectKey:W,validateSpec:T},c))}for(const W in m)v[W]||m[W].required&&m[W].default===void 0&&c[W]===void 0&&L.push(new lt(o,c,`missing required property "${W}"`));return L}function Fl(f){const o=f.value,c=f.valueSpec,m=f.style,v=f.styleSpec,x=f.key,w=f.arrayElementValidator||f.validateSpec;if(Cn(o)!=="array")return[new lt(x,o,`array expected, ${Cn(o)} found`)];if(c.length&&o.length!==c.length)return[new lt(x,o,`array length ${c.length} expected, length ${o.length} found`)];let T={type:c.value,values:c.values};v.$version<7&&(T.function=c.function),Cn(c.value)==="object"&&(T=c.value);let L=[];for(let z=0;z<o.length;z++)L=L.concat(w({array:o,arrayIndex:z,value:o[z],valueSpec:T,validateSpec:f.validateSpec,style:m,styleSpec:v,key:`${x}[${z}]`}));return L}function Xo(f){const o=f.key,c=f.value,m=f.valueSpec;let v=Cn(c);return v==="number"&&c!=c&&(v="NaN"),v!=="number"?[new lt(o,c,`number expected, ${v} found`)]:"minimum"in m&&c<m.minimum?[new lt(o,c,`${c} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&c>m.maximum?[new lt(o,c,`${c} is greater than the maximum value ${m.maximum}`)]:[]}function Xh(f){const o=f.valueSpec,c=Fi(f.value.type);let m,v,x,w={};const T=c!=="categorical"&&f.value.property===void 0,L=!T,z=Cn(f.value.stops)==="array"&&Cn(f.value.stops[0])==="array"&&Cn(f.value.stops[0][0])==="object",W=Os({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(se){if(c==="identity")return[new lt(se.key,se.value,'identity function may not have a "stops" property')];let ye=[];const xe=se.value;return ye=ye.concat(Fl({key:se.key,value:xe,valueSpec:se.valueSpec,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,arrayElementValidator:Q})),Cn(xe)==="array"&&xe.length===0&&ye.push(new lt(se.key,xe,"array must have at least one stop")),ye},default:function(se){return se.validateSpec({key:se.key,value:se.value,valueSpec:o,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec})}}});return c==="identity"&&T&&W.push(new lt(f.key,f.value,'missing required property "property"')),c==="identity"||f.value.stops||W.push(new lt(f.key,f.value,'missing required property "stops"')),c==="exponential"&&f.valueSpec.expression&&!co(f.valueSpec)&&W.push(new lt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(L&&!kl(f.valueSpec)?W.push(new lt(f.key,f.value,"property functions not supported")):T&&!nu(f.valueSpec)&&W.push(new lt(f.key,f.value,"zoom functions not supported"))),c!=="categorical"&&!z||f.value.property!==void 0||W.push(new lt(f.key,f.value,'"property" property is required')),W;function Q(se){let ye=[];const xe=se.value,Se=se.key;if(Cn(xe)!=="array")return[new lt(Se,xe,`array expected, ${Cn(xe)} found`)];if(xe.length!==2)return[new lt(Se,xe,`array length 2 expected, length ${xe.length} found`)];if(z){if(Cn(xe[0])!=="object")return[new lt(Se,xe,`object expected, ${Cn(xe[0])} found`)];if(xe[0].zoom===void 0)return[new lt(Se,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new lt(Se,xe,"object stop key must have value")];if(x&&x>Fi(xe[0].zoom))return[new lt(Se,xe[0].zoom,"stop zoom values must appear in ascending order")];Fi(xe[0].zoom)!==x&&(x=Fi(xe[0].zoom),v=void 0,w={}),ye=ye.concat(Os({key:`${Se}[0]`,value:xe[0],valueSpec:{zoom:{}},validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{zoom:Xo,value:ae}}))}else ye=ye.concat(ae({key:`${Se}[0]`,value:xe[0],validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec},xe));return Au(Rc(xe[1]))?ye.concat([new lt(`${Se}[1]`,xe[1],"expressions are not allowed in function stops.")]):ye.concat(se.validateSpec({key:`${Se}[1]`,value:xe[1],valueSpec:o,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec}))}function ae(se,ye){const xe=Cn(se.value),Se=Fi(se.value),Fe=se.value!==null?se.value:ye;if(m){if(xe!==m)return[new lt(se.key,Fe,`${xe} stop domain type must match previous stop domain type ${m}`)]}else m=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean")return[new lt(se.key,Fe,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&c!=="categorical"){let ct=`number expected, ${xe} found`;return kl(o)&&c===void 0&&(ct+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lt(se.key,Fe,ct)]}return c!=="categorical"||xe!=="number"||isFinite(Se)&&Math.floor(Se)===Se?c!=="categorical"&&xe==="number"&&v!==void 0&&Se<v?[new lt(se.key,Fe,"stop domain values must appear in ascending order")]:(v=Se,c==="categorical"&&Se in w?[new lt(se.key,Fe,"stop domain values must be unique")]:(w[Se]=!0,[])):[new lt(se.key,Fe,`integer expected, found ${Se}`)]}}function rc(f){const o=(f.expressionContext==="property"?Gh:Ic)(Rc(f.value),f.valueSpec);if(o.result==="error")return o.value.map((m=>new lt(`${f.key}${m.key}`,f.value,m.message)));const c=o.value.expression||o.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!c.outputDefined())return[new lt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!cl(c))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!cl(c))return[new lt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!tu(c,["zoom","feature-state"]))return[new lt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Ms(c))return[new lt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uf(f){const o=f.key,c=f.value,m=Cn(c);return m!=="string"?[new lt(o,c,`color expected, ${m} found`)]:hr.parse(String(c))?[]:[new lt(o,c,`color expected, "${c}" found`)]}function nc(f){const o=f.key,c=f.value,m=f.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(Fi(c))===-1&&v.push(new lt(o,c,`expected one of [${m.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(m.values).indexOf(Fi(c))===-1&&v.push(new lt(o,c,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(c)} found`)),v}function Lc(f){return Zd(Rc(f.value))?rc(or({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kd(f)}function Kd(f){const o=f.value,c=f.key;if(Cn(o)!=="array")return[new lt(c,o,`array expected, ${Cn(o)} found`)];const m=f.styleSpec;let v,x=[];if(o.length<1)return[new lt(c,o,"filter array must have at least 1 element")];switch(x=x.concat(nc({key:`${c}[0]`,value:o[0],valueSpec:m.filter_operator,style:f.style,styleSpec:f.styleSpec})),Fi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Fi(o[1])==="$type"&&x.push(new lt(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&x.push(new lt(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(v=Cn(o[1]),v!=="string"&&x.push(new lt(`${c}[1]`,o[1],`string expected, ${v} found`)));for(let w=2;w<o.length;w++)v=Cn(o[w]),Fi(o[1])==="$type"?x=x.concat(nc({key:`${c}[${w}]`,value:o[w],valueSpec:m.geometry_type,style:f.style,styleSpec:f.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new lt(`${c}[${w}]`,o[w],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)x=x.concat(Kd({key:`${c}[${w}]`,value:o[w],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":v=Cn(o[1]),o.length!==2?x.push(new lt(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new lt(`${c}[1]`,o[1],`string expected, ${v} found`))}return x}function vm(f,o){const c=f.key,m=f.validateSpec,v=f.style,x=f.styleSpec,w=f.value,T=f.objectKey,L=x[`${o}_${f.layerType}`];if(!L)return[];const z=T.match(/^(.*)-transition$/);if(o==="paint"&&z&&L[z[1]]&&L[z[1]].transition)return m({key:c,value:w,valueSpec:x.transition,style:v,styleSpec:x});const W=f.valueSpec||L[T];if(!W)return[new lt(c,w,`unknown property "${T}"`)];let Q;if(Cn(w)==="string"&&kl(W)&&!W.tokens&&(Q=/^{([^}]+)}$/.exec(w)))return[new lt(c,w,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Q[1])} }\`.`)];const ae=[];return f.layerType==="symbol"&&T==="text-font"&&fl(Rc(w))&&Fi(w.type)==="identity"&&ae.push(new lt(c,w,'"text-font" does not support identity functions')),ae.concat(m({key:f.key,value:w,valueSpec:W,style:v,styleSpec:x,expressionContext:"property",propertyType:o,propertyKey:T}))}function ih(f){return vm(f,"paint")}function ah(f){return vm(f,"layout")}function cf(f){let o=[];const c=f.value,m=f.key,v=f.style,x=f.styleSpec;if(Cn(c)!=="object")return[new lt(m,c,`object expected, ${Cn(c)} found`)];c.type||c.ref||o.push(new lt(m,c,'either "type" or "ref" is required'));let w=Fi(c.type);const T=Fi(c.ref);if(c.id){const L=Fi(c.id);for(let z=0;z<f.arrayIndex;z++){const W=v.layers[z];Fi(W.id)===L&&o.push(new lt(m,c.id,`duplicate layer id "${c.id}", previously used at line ${W.id.__line__}`))}}if("ref"in c){let L;["type","source","source-layer","filter","layout"].forEach((z=>{z in c&&o.push(new lt(m,c[z],`"${z}" is prohibited for ref layers`))})),v.layers.forEach((z=>{Fi(z.id)===T&&(L=z)})),L?L.ref?o.push(new lt(m,c.ref,"ref cannot reference another ref layer")):w=Fi(L.type):o.push(new lt(m,c.ref,`ref layer "${T}" not found`))}else if(w!=="background")if(c.source){const L=v.sources&&v.sources[c.source],z=L&&Fi(L.type);L?z==="vector"&&w==="raster"?o.push(new lt(m,c.source,`layer "${c.id}" requires a raster source`)):z!=="raster-dem"&&w==="hillshade"||z!=="raster-dem"&&w==="color-relief"?o.push(new lt(m,c.source,`layer "${c.id}" requires a raster-dem source`)):z==="raster"&&w!=="raster"?o.push(new lt(m,c.source,`layer "${c.id}" requires a vector source`)):z!=="vector"||c["source-layer"]?z==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?o.push(new lt(m,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!c.paint||!c.paint["line-gradient"]||z==="geojson"&&L.lineMetrics||o.push(new lt(m,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new lt(m,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new lt(m,c.source,`source "${c.source}" not found`))}else o.push(new lt(m,c,'missing required property "source"'));return o=o.concat(Os({key:m,value:c,valueSpec:x.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${m}.type`,value:c.type,valueSpec:x.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:c,objectKey:"type"}),filter:Lc,layout:L=>Os({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":z=>ah(or({layerType:w},z))}}),paint:L=>Os({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":z=>ih(or({layerType:w},z))}})}})),o}function iu(f){const o=f.value,c=f.key,m=Cn(o);return m!=="string"?[new lt(c,o,`string expected, ${m} found`)]:[]}const Yd={promoteId:function({key:f,value:o}){if(Cn(o)==="string")return iu({key:f,value:o});{const c=[];for(const m in o)c.push(...iu({key:`${f}.${m}`,value:o[m]}));return c}}};function Kh(f){const o=f.value,c=f.key,m=f.styleSpec,v=f.style,x=f.validateSpec;if(!o.type)return[new lt(c,o,'"type" is required')];const w=Fi(o.type);let T;switch(w){case"vector":case"raster":return T=Os({key:c,value:o,valueSpec:m[`source_${w.replace("-","_")}`],style:f.style,styleSpec:m,objectElementValidators:Yd,validateSpec:x}),T;case"raster-dem":return T=(function(L){var z;const W=(z=L.sourceName)!==null&&z!==void 0?z:"",Q=L.value,ae=L.styleSpec,se=ae.source_raster_dem,ye=L.style;let xe=[];const Se=Cn(Q);if(Q===void 0)return xe;if(Se!=="object")return xe.push(new lt("source_raster_dem",Q,`object expected, ${Se} found`)),xe;const Fe=Fi(Q.encoding)==="custom",ct=["redFactor","greenFactor","blueFactor","baseShift"],je=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const We in Q)!Fe&&ct.includes(We)?xe.push(new lt(We,Q[We],`In "${W}": "${We}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):se[We]?xe=xe.concat(L.validateSpec({key:We,value:Q[We],valueSpec:se[We],validateSpec:L.validateSpec,style:ye,styleSpec:ae})):xe.push(new lt(We,Q[We],`unknown property "${We}"`));return xe})({sourceName:c,value:o,style:f.style,styleSpec:m,validateSpec:x}),T;case"geojson":if(T=Os({key:c,value:o,valueSpec:m.source_geojson,style:v,styleSpec:m,validateSpec:x,objectElementValidators:Yd}),o.cluster)for(const L in o.clusterProperties){const[z,W]=o.clusterProperties[L],Q=typeof z=="string"?[z,["accumulated"],["get",L]]:z;T.push(...rc({key:`${c}.${L}.map`,value:W,expressionContext:"cluster-map"})),T.push(...rc({key:`${c}.${L}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return T;case"video":return Os({key:c,value:o,valueSpec:m.source_video,style:v,validateSpec:x,styleSpec:m});case"image":return Os({key:c,value:o,valueSpec:m.source_image,style:v,validateSpec:x,styleSpec:m});case"canvas":return[new lt(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nc({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function oh(f){const o=f.value,c=f.styleSpec,m=c.light,v=f.style;let x=[];const w=Cn(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new lt("light",o,`object expected, ${w} found`)]),x;for(const T in o){const L=T.match(/^(.*)-transition$/);x=x.concat(L&&m[L[1]]&&m[L[1]].transition?f.validateSpec({key:T,value:o[T],valueSpec:c.transition,validateSpec:f.validateSpec,style:v,styleSpec:c}):m[T]?f.validateSpec({key:T,value:o[T],valueSpec:m[T],validateSpec:f.validateSpec,style:v,styleSpec:c}):[new lt(T,o[T],`unknown property "${T}"`)])}return x}function bm(f){const o=f.value,c=f.styleSpec,m=c.sky,v=f.style,x=Cn(o);if(o===void 0)return[];if(x!=="object")return[new lt("sky",o,`object expected, ${x} found`)];let w=[];for(const T in o)w=w.concat(m[T]?f.validateSpec({key:T,value:o[T],valueSpec:m[T],style:v,styleSpec:c}):[new lt(T,o[T],`unknown property "${T}"`)]);return w}function Jd(f){const o=f.value,c=f.styleSpec,m=c.terrain,v=f.style;let x=[];const w=Cn(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new lt("terrain",o,`object expected, ${w} found`)]),x;for(const T in o)x=x.concat(m[T]?f.validateSpec({key:T,value:o[T],valueSpec:m[T],validateSpec:f.validateSpec,style:v,styleSpec:c}):[new lt(T,o[T],`unknown property "${T}"`)]);return x}function Qd(f){let o=[];const c=f.value,m=f.key;if(Array.isArray(c)){const v=[],x=[];for(const w in c)c[w].id&&v.includes(c[w].id)&&o.push(new lt(m,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),v.push(c[w].id),c[w].url&&x.includes(c[w].url)&&o.push(new lt(m,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),x.push(c[w].url),o=o.concat(Os({key:`${m}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return o}return iu({key:m,value:c})}function _m(f){return!!f&&f.constructor===Object}function ep(f){return _m(f.value)?[]:[new lt(f.key,f.value,`object expected, ${Cn(f.value)} found`)]}const Yh={"*":()=>[],array:Fl,boolean:function(f){const o=f.value,c=f.key,m=Cn(o);return m!=="boolean"?[new lt(c,o,`boolean expected, ${m} found`)]:[]},number:Xo,color:uf,constants:hl,enum:nc,filter:Lc,function:Xh,layer:cf,object:Os,source:Kh,light:oh,sky:bm,terrain:Jd,projection:function(f){const o=f.value,c=f.styleSpec,m=c.projection,v=f.style,x=Cn(o);if(o===void 0)return[];if(x!=="object")return[new lt("projection",o,`object expected, ${x} found`)];let w=[];for(const T in o)w=w.concat(m[T]?f.validateSpec({key:T,value:o[T],valueSpec:m[T],style:v,styleSpec:c}):[new lt(T,o[T],`unknown property "${T}"`)]);return w},projectionDefinition:function(f){const o=f.key;let c=f.value;c=c instanceof String?c.valueOf():c;const m=Cn(c);return m!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(c)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(c)?["array","string"].includes(m)?[]:[new lt(o,c,`projection expected, invalid type "${m}" found`)]:[new lt(o,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:iu,formatted:function(f){return iu(f).length===0?[]:rc(f)},resolvedImage:function(f){return iu(f).length===0?[]:rc(f)},padding:function(f){const o=f.key,c=f.value;if(Cn(c)==="array"){if(c.length<1||c.length>4)return[new lt(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];const m={type:"number"};let v=[];for(let x=0;x<c.length;x++)v=v.concat(f.validateSpec({key:`${o}[${x}]`,value:c[x],validateSpec:f.validateSpec,valueSpec:m}));return v}return Xo({key:o,value:c,valueSpec:{}})},numberArray:function(f){const o=f.key,c=f.value;if(Cn(c)==="array"){const m={type:"number"};if(c.length<1)return[new lt(o,c,"array length at least 1 expected, length 0 found")];let v=[];for(let x=0;x<c.length;x++)v=v.concat(f.validateSpec({key:`${o}[${x}]`,value:c[x],validateSpec:f.validateSpec,valueSpec:m}));return v}return Xo({key:o,value:c,valueSpec:{}})},colorArray:function(f){const o=f.key,c=f.value;if(Cn(c)==="array"){if(c.length<1)return[new lt(o,c,"array length at least 1 expected, length 0 found")];let m=[];for(let v=0;v<c.length;v++)m=m.concat(uf({key:`${o}[${v}]`,value:c[v]}));return m}return uf({key:o,value:c})},variableAnchorOffsetCollection:function(f){const o=f.key,c=f.value,m=Cn(c),v=f.styleSpec;if(m!=="array"||c.length<1||c.length%2!=0)return[new lt(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<c.length;w+=2)x=x.concat(nc({key:`${o}[${w}]`,value:c[w],valueSpec:v.layout_symbol["text-anchor"]})),x=x.concat(Fl({key:`${o}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:v}));return x},sprite:Qd,state:ep,fontFaces:function(f){const o=f.key,c=f.value,m=f.validateSpec,v=f.styleSpec,x=f.style;if(!_m(c))return[new lt(o,c,`object expected, ${Cn(c)} found`)];const w=[];for(const T in c){const L=c[T],z=Cn(L);if(z==="string")w.push(...iu({key:`${o}.${T}`,value:L}));else if(z==="array"){const W={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[Q,ae]of L.entries())w.push(...Os({key:`${o}.${T}[${Q}]`,value:ae,valueSpec:W,styleSpec:v,style:x,validateSpec:m}))}else w.push(new lt(`${o}.${T}`,L,`string or array expected, ${z} found`))}return w}};function Nl(f){const o=f.value,c=f.valueSpec,m=f.styleSpec;return f.validateSpec=Nl,c.expression&&fl(Fi(o))?Xh(f):c.expression&&Au(Rc(o))?rc(f):c.type&&Yh[c.type]?Yh[c.type](f):Os(or({},f,{valueSpec:c.type?m[c.type]:c}))}function xm(f){const o=f.value,c=f.key,m=iu(f);return m.length||(o.indexOf("{fontstack}")===-1&&m.push(new lt(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&m.push(new lt(c,o,'"glyphs" url must include a "{range}" token'))),m}function dl(f,o=Rt){let c=[];return c=c.concat(Nl({key:"",value:f,valueSpec:o.$root,styleSpec:o,style:f,validateSpec:Nl,objectElementValidators:{glyphs:xm,"*":()=>[]}})),f.constants&&(c=c.concat(hl({key:"constants",value:f.constants}))),D(c)}function pl(f){return function(o){return f(Object.assign({},o,{validateSpec:Nl}))}}function D(f){return[].concat(f).sort(((o,c)=>o.line-c.line))}function q(f){return function(...o){return D(f.apply(this,o))}}dl.source=q(pl(Kh)),dl.sprite=q(pl(Qd)),dl.glyphs=q(pl(xm)),dl.light=q(pl(oh)),dl.sky=q(pl(bm)),dl.terrain=q(pl(Jd)),dl.state=q(pl(ep)),dl.layer=q(pl(cf)),dl.filter=q(pl(Lc)),dl.paintProperty=q(pl(ih)),dl.layoutProperty=q(pl(ah));const re={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class de{constructor(o,c){this._globalState=c,this.setValue(o)}evaluate(){var o;return(o=this._literalValue)!==null&&o!==void 0?o:this._compiledValue.evaluate({})}setValue(o){if(o==null||o==="visible"||o==="none")return this._literalValue=o==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const c=Ic(o,re,this._globalState);if(c.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(c.value.map((m=>`${m.key}: ${m.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=c.value,this._globalStateRefs=tc(c.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Me=Rt,Re=dl,ze=Re.light,He=Re.sky,et=Re.paintProperty,ft=Re.layoutProperty;function Bt(f,o){let c=!1;if(o&&o.length)for(const m of o)f.fire(new mn(new Error(m.message))),c=!0;return c}class er{constructor(o,c,m){const v=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(c=w[1])+2*(m=w[2]);for(let L=0;L<this.d*this.d;L++){const z=w[3+L],W=w[3+L+1];v.push(z===W?null:w.subarray(z,W))}const T=w[3+v.length+1];this.keys=w.subarray(w[3+v.length],T),this.bboxes=w.subarray(T),this.insert=this._insertReadonly}else{this.d=c+2*m;for(let w=0;w<this.d*this.d;w++)v.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=m,this.scale=c/o,this.uid=0;const x=m/c*o;this.min=-x,this.max=o+x}insert(o,c,m,v,x){this._forEachCell(c,m,v,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,m,v,x,w){this.cells[x].push(w)}query(o,c,m,v,x){const w=this.min,T=this.max;if(o<=w&&c<=w&&T<=m&&T<=v&&!x)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(o,c,m,v,this._queryCell,L,{},x),L}}_queryCell(o,c,m,v,x,w,T,L){const z=this.cells[x];if(z!==null){const W=this.keys,Q=this.bboxes;for(let ae=0;ae<z.length;ae++){const se=z[ae];if(T[se]===void 0){const ye=4*se;(L?L(Q[ye+0],Q[ye+1],Q[ye+2],Q[ye+3]):o<=Q[ye+2]&&c<=Q[ye+3]&&m>=Q[ye+0]&&v>=Q[ye+1])?(T[se]=!0,w.push(W[se])):T[se]=!1}}}}_forEachCell(o,c,m,v,x,w,T,L){const z=this._convertToCellCoord(o),W=this._convertToCellCoord(c),Q=this._convertToCellCoord(m),ae=this._convertToCellCoord(v);for(let se=z;se<=Q;se++)for(let ye=W;ye<=ae;ye++){const xe=this.d*ye+se;if((!L||L(this._convertFromCellCoord(se),this._convertFromCellCoord(ye),this._convertFromCellCoord(se+1),this._convertFromCellCoord(ye+1)))&&x.call(this,o,c,m,v,xe,w,T,L))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,c=3+this.cells.length+1+1;let m=0;for(let w=0;w<this.cells.length;w++)m+=this.cells[w].length;const v=new Int32Array(c+m+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let x=c;for(let w=0;w<o.length;w++){const T=o[w];v[3+w]=x,v.set(T,x),x+=T.length}return v[3+o.length]=x,v.set(this.keys,x),x+=this.keys.length,v[3+o.length+1]=x,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer}static serialize(o,c){const m=o.toArrayBuffer();return c&&c.push(m),{buffer:m}}static deserialize(o){return new er(o.buffer)}}const st={};function pt(f,o,c={}){if(st[f])throw new Error(`${f} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:f,writeable:!1}),st[f]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}pt("Object",Object),pt("Set",Set),pt("TransferableGridIndex",er),pt("Color",hr),pt("Error",Error),pt("AJAXError",tt),pt("ResolvedImage",Lo),pt("StylePropertyFunction",Hh),pt("StyleExpression",Qf,{omit:["_evaluator"]}),pt("ZoomDependentExpression",Wd),pt("ZoomConstantExpression",Vh),pt("CompoundExpression",Qn,{omit:["_evaluate"]});for(const f in xi)xi[f]._classRegistryKey||pt(`Expression_${f}`,xi[f]);function Ht(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function yr(f){return f.$name||f.constructor._classRegistryKey}function Yt(f){return!(function(o){if(o===null||typeof o!="object")return!1;const c=yr(o);return!(!c||c==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Ht(f)||xr(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function vr(f,o){if(Yt(f))return(Ht(f)||xr(f))&&o&&o.push(f),ArrayBuffer.isView(f)&&o&&o.push(f.buffer),f instanceof ImageData&&o&&o.push(f.data.buffer),f;if(Array.isArray(f)){const x=[];for(const w of f)x.push(vr(w,o));return x}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const c=yr(f);if(!c)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!st[c])throw new Error(`${c} is not registered.`);const{klass:m}=st[c],v=m.serialize?m.serialize(f,o):{};if(m.serialize){if(o&&v===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in f){if(!f.hasOwnProperty(x)||st[c].omit.indexOf(x)>=0)continue;const w=f[x];v[x]=st[c].shallow.indexOf(x)>=0?w:vr(w,o)}f instanceof Error&&(v.message=f.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(v.$name=c),v}function _r(f){if(Yt(f))return f;if(Array.isArray(f))return f.map(_r);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const o=yr(f)||"Object";if(!st[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:c}=st[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(f);const m=Object.create(c.prototype);for(const v of Object.keys(f)){if(v==="$name")continue;const x=f[v];m[v]=st[o].shallow.indexOf(v)>=0?x:_r(x)}return m}class Lr{constructor(){this.first=!0}update(o,c){const m=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=m,!0))}}function Ir(f){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))}function Sn(f){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))}function pn(f){return/\s/u.test(String.fromCodePoint(f))}function Un(f){for(const o of f)if(Sn(o.codePointAt(0)))return!0;return!1}function wn(f){for(const o of f)if(!ti(o.codePointAt(0)))return!1;return!0}function fi(f){const o=f.map((c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}})).filter((c=>c));return new RegExp(o.join("|"),"u")}const ja=fi(["Arab","Dupl","Mong","Ougr","Syrc"]);function ti(f){return!ja.test(String.fromCodePoint(f))}function xn(f){return!(Sn(f)||(o=f,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(o))));var o}const Qr=fi(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ma(f){return Qr.test(String.fromCodePoint(f))}function Gn(f,o){return!(!o&&Ma(f)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(f)))}function wi(f){for(const o of f)if(Ma(o.codePointAt(0)))return!0;return!1}const Ii=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Ii.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,o){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const c=f.pluginURL,m=new Promise((x=>{this.loadScriptResolve=x}));o(c);const v=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([m,v]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:c};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)}))}};class Hn{constructor(o,c){this.isSupportedScript=gs,this.zoom=o,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new Lr,this.transition=c.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lr,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,c=o-Math.floor(o),m=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*c}}}function gs(f){return(function(o,c){for(const m of o)if(!Gn(m.codePointAt(0),c))return!1;return!0})(f,Ii.getRTLTextPluginStatus()==="loaded")}const aa="-transition";class fo{constructor(o,c,m){this.property=o,this.value=c,this.expression=(function(v,x,w){if(fl(v))return new Hh(v,x);if(Au(v)){const T=Gh(v,x,w);if(T.result==="error")throw new Error(T.value.map((L=>`${L.key}: ${L.message}`)).join(", "));return T.value}{let T=v;return x.type==="color"&&typeof v=="string"?T=hr.parse(v):x.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?x.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?x.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?T=Ji.parse(v):x.type==="projectionDefinition"&&typeof v=="string"&&(T=Jn.parse(v)):T=Wr.parse(v):T=$r.parse(v):T=pr.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>T}}})(c===void 0?o.specification.default:c,o.specification,m)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(o,c,m){return this.property.possiblyEvaluate(this,o,c,m)}}class _o{constructor(o,c){this.property=o,this.value=new fo(o,void 0,c)}transitioned(o,c){return new Ci(this.property,this.value,c,It({},o.transition,this.transition),o.now)}untransitioned(){return new Ci(this.property,this.value,null,{},0)}}class Ha{constructor(o,c){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._globalState=c}getValue(o){return Lt(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new _o(this._values[o].property,this._globalState)),this._values[o].value=new fo(this._values[o].property,c===null?void 0:Lt(c),this._globalState)}getTransition(o){return Lt(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new _o(this._values[o].property,this._globalState)),this._values[o].transition=Lt(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const m=this.getValue(c);m!==void 0&&(o[c]=m);const v=this.getTransition(c);v!==void 0&&(o[`${c}${aa}`]=v)}return o}transitioned(o,c){const m=new Ni(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].transitioned(o,c._values[v]);return m}untransitioned(){const o=new Ni(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class Ci{constructor(o,c,m,v,x){this.property=o,this.value=c,this.begin=x+v.delay||0,this.end=this.begin+v.duration||0,o.specification.transition&&(v.delay||v.duration)&&(this.prior=m)}possiblyEvaluate(o,c,m){const v=o.now||0,x=this.value.possiblyEvaluate(o,c,m),w=this.prior;if(w){if(v>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(v<this.begin)return w.possiblyEvaluate(o,c,m);{const T=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,c,m),x,Ee(T))}}return x}}class Ni{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,m){const v=new Wa(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(o,c,m);return v}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Oa{constructor(o,c){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._globalState=c}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Lt(this._values[o].value)}setValue(o,c){this._values[o]=new fo(this._values[o].property,c===null?void 0:Lt(c),this._globalState)}serialize(){const o={};for(const c of Object.keys(this._values)){const m=this.getValue(c);m!==void 0&&(o[c]=m)}return o}possiblyEvaluate(o,c,m){const v=new Wa(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(o,c,m);return v}}class oi{constructor(o,c,m){this.property=o,this.value=c,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,c,m,v){return this.property.evaluate(this.value,this.parameters,o,c,m,v)}}class Wa{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class rn{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,m){const v=_n[this.specification.type];return v?v(o,c,m):o}}class en{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,m,v){return new oi(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},m,v)}:o.expression,c)}interpolate(o,c,m){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new oi(this,{kind:"constant",value:void 0},o.parameters);const v=_n[this.specification.type];if(v){const x=v(o.value.value,c.value.value,m);return new oi(this,{kind:"constant",value:x},o.parameters)}return o}evaluate(o,c,m,v,x,w){return o.kind==="constant"?o.value:o.evaluate(c,m,v,x,w)}}class xo extends en{possiblyEvaluate(o,c,m,v){if(o.value===void 0)return new oi(this,{kind:"constant",value:void 0},c);if(o.expression.kind==="constant"){const x=o.expression.evaluate(c,null,{},m,v),w=o.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(w,w,w,c);return new oi(this,{kind:"constant",value:T},c)}if(o.expression.kind==="camera"){const x=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new oi(this,{kind:"constant",value:x},c)}return new oi(this,o.expression,c)}evaluate(o,c,m,v,x,w){if(o.kind==="source"){const T=o.evaluate(c,m,v,x,w);return this._calculate(T,T,T,c)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},m,v),o.evaluate({zoom:Math.floor(c.zoom)},m,v),o.evaluate({zoom:Math.floor(c.zoom)+1},m,v),c):o.value}_calculate(o,c,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:m,to:c}}interpolate(o){return o}}class Bi{constructor(o){this.specification=o}possiblyEvaluate(o,c,m,v){if(o.value!==void 0){if(o.expression.kind==="constant"){const x=o.expression.evaluate(c,null,{},m,v);return this._calculate(x,x,x,c)}return this._calculate(o.expression.evaluate(new Hn(Math.floor(c.zoom-1),c)),o.expression.evaluate(new Hn(Math.floor(c.zoom),c)),o.expression.evaluate(new Hn(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:m,to:c}}interpolate(o){return o}}class za{constructor(o){this.specification=o}possiblyEvaluate(o,c,m,v){return!!o.expression.evaluate(c,null,{},m,v)}interpolate(){return!1}}class ta{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in o){const m=o[c];m.specification.overridable&&this.overridableProperties.push(c);const v=this.defaultPropertyValues[c]=new fo(m,void 0,void 0),x=this.defaultTransitionablePropertyValues[c]=new _o(m,void 0);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=v.possiblyEvaluate({})}}}pt("DataDrivenProperty",en),pt("DataConstantProperty",rn),pt("CrossFadedDataDrivenProperty",xo),pt("CrossFadedProperty",Bi),pt("ColorRampProperty",za);class oa extends Kr{constructor(o,c,m){if(super(),this.id=o.id,this.type=o.type,this._globalState=m,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(v,x){return new de(v,x)})(this.visibility,m),o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter,this._featureFilter=Oc(o.filter,m)),c.layout&&(this._unevaluatedLayout=new Oa(c.layout,m)),c.paint)){this._transitionablePaint=new Ha(c.paint,m);for(const v in o.paint)this.setPaintProperty(v,o.paint[v],{validate:!1});for(const v in o.layout)this.setLayoutProperty(v,o.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wa(c.paint)}}setFilter(o){this.filter=o,this._featureFilter=Oc(o,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}getLayoutAffectingGlobalStateRefs(){const o=new Set;for(const c of this._visibilityExpression.getGlobalStateRefs())o.add(c);if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const m=this._unevaluatedLayout._values[c];for(const v of m.getGlobalStateRefs())o.add(v)}for(const c of this._featureFilter.getGlobalStateRefs())o.add(c);return o}getPaintAffectingGlobalStateRefs(){var o;const c=new globalThis.Map;if(this._transitionablePaint)for(const m in this._transitionablePaint._values){const v=this._transitionablePaint._values[m].value;for(const x of v.getGlobalStateRefs()){const w=(o=c.get(x))!==null&&o!==void 0?o:[];w.push({name:m,value:v.value}),c.set(x,w)}}return c}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(o,c,m={}){if(c==null||!this._validate(ft,`layers.${this.id}.layout.${o}`,o,c,m))return o==="visibility"?(this.visibility=c,this._visibilityExpression.setValue(c),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(o,c)}getPaintProperty(o){return o.endsWith(aa)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,m={}){if(c!=null&&this._validate(et,`layers.${this.id}.paint.${o}`,o,c,m))return!1;if(o.endsWith(aa))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{const v=this._transitionablePaint._values[o],x=v.property.specification["property-type"]==="cross-faded-data-driven",w=v.value.isDataDriven(),T=v.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);const L=this._transitionablePaint._values[o].value;return L.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(o,T,L)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,m){return!1}isHidden(o=this.minzoom,c=!1){return!!(this.minzoom&&o<(c?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&o>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),zt(o,((c,m)=>!(c===void 0||m==="layout"&&!Object.keys(c).length||m==="paint"&&!Object.keys(c).length)))}_validate(o,c,m,v,x={}){return(!x||x.validate!==!1)&&Bt(this,o.call(Re,{key:c,layerType:this.type,objectKey:m,value:v,styleSpec:Rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof oi&&kl(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let ys;var Rs={get paint(){return ys=ys||new ta({"raster-opacity":new rn(Rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new rn(Rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rn(Rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rn(Rt.paint_raster["raster-brightness-max"]),"raster-saturation":new rn(Rt.paint_raster["raster-saturation"]),"raster-contrast":new rn(Rt.paint_raster["raster-contrast"]),"raster-resampling":new rn(Rt.paint_raster["raster-resampling"]),"raster-fade-duration":new rn(Rt.paint_raster["raster-fade-duration"])})}};class Ls extends oa{constructor(o,c){super(o,Rs,c)}}const Ws={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ji{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Mi(f,o=1){let c=0,m=0;return{members:f.map((v=>{const x=Ws[v.type].BYTES_PER_ELEMENT,w=c=Zs(c,Math.max(o,x)),T=v.components||1;return m=Math.max(m,x),c+=x*T,{name:v.name,type:v.type,components:T,offset:w}})),size:Zs(c,Math.max(m,o)),alignment:o}}function Zs(f,o){return Math.ceil(f/o)*o}class Xs extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const m=this.length;return this.resize(m+1),this.emplace(m,o,c)}emplace(o,c,m){const v=2*o;return this.int16[v+0]=c,this.int16[v+1]=m,o}}Xs.prototype.bytesPerElement=4,pt("StructArrayLayout2i4",Xs);class ro extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,m)}emplace(o,c,m,v){const x=3*o;return this.int16[x+0]=c,this.int16[x+1]=m,this.int16[x+2]=v,o}}ro.prototype.bytesPerElement=6,pt("StructArrayLayout3i6",ro);class ff extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,c,m,v)}emplace(o,c,m,v,x){const w=4*o;return this.int16[w+0]=c,this.int16[w+1]=m,this.int16[w+2]=v,this.int16[w+3]=x,o}}ff.prototype.bytesPerElement=8,pt("StructArrayLayout4i8",ff);class hf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,c,m,v,x,w)}emplace(o,c,m,v,x,w,T){const L=6*o;return this.int16[L+0]=c,this.int16[L+1]=m,this.int16[L+2]=v,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=T,o}}hf.prototype.bytesPerElement=12,pt("StructArrayLayout2i4i12",hf);class df extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,c,m,v,x,w)}emplace(o,c,m,v,x,w,T){const L=4*o,z=8*o;return this.int16[L+0]=c,this.int16[L+1]=m,this.uint8[z+4]=v,this.uint8[z+5]=x,this.uint8[z+6]=w,this.uint8[z+7]=T,o}}df.prototype.bytesPerElement=8,pt("StructArrayLayout2i4ub8",df);class Pu extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const m=this.length;return this.resize(m+1),this.emplace(m,o,c)}emplace(o,c,m){const v=2*o;return this.float32[v+0]=c,this.float32[v+1]=m,o}}Pu.prototype.bytesPerElement=8,pt("StructArrayLayout2f8",Pu);class Iu extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L,z,W){const Q=this.length;return this.resize(Q+1),this.emplace(Q,o,c,m,v,x,w,T,L,z,W)}emplace(o,c,m,v,x,w,T,L,z,W,Q){const ae=10*o;return this.uint16[ae+0]=c,this.uint16[ae+1]=m,this.uint16[ae+2]=v,this.uint16[ae+3]=x,this.uint16[ae+4]=w,this.uint16[ae+5]=T,this.uint16[ae+6]=L,this.uint16[ae+7]=z,this.uint16[ae+8]=W,this.uint16[ae+9]=Q,o}}Iu.prototype.bytesPerElement=20,pt("StructArrayLayout10ui20",Iu);class Jh extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L){const z=this.length;return this.resize(z+1),this.emplace(z,o,c,m,v,x,w,T,L)}emplace(o,c,m,v,x,w,T,L,z){const W=8*o;return this.uint16[W+0]=c,this.uint16[W+1]=m,this.uint16[W+2]=v,this.uint16[W+3]=x,this.uint16[W+4]=w,this.uint16[W+5]=T,this.uint16[W+6]=L,this.uint16[W+7]=z,o}}Jh.prototype.bytesPerElement=16,pt("StructArrayLayout8ui16",Jh);class Dc extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L,z,W,Q,ae){const se=this.length;return this.resize(se+1),this.emplace(se,o,c,m,v,x,w,T,L,z,W,Q,ae)}emplace(o,c,m,v,x,w,T,L,z,W,Q,ae,se){const ye=12*o;return this.int16[ye+0]=c,this.int16[ye+1]=m,this.int16[ye+2]=v,this.int16[ye+3]=x,this.uint16[ye+4]=w,this.uint16[ye+5]=T,this.uint16[ye+6]=L,this.uint16[ye+7]=z,this.int16[ye+8]=W,this.int16[ye+9]=Q,this.int16[ye+10]=ae,this.int16[ye+11]=se,o}}Dc.prototype.bytesPerElement=24,pt("StructArrayLayout4i4ui4i24",Dc);class Bl extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,m)}emplace(o,c,m,v){const x=3*o;return this.float32[x+0]=c,this.float32[x+1]=m,this.float32[x+2]=v,o}}Bl.prototype.bytesPerElement=12,pt("StructArrayLayout3f12",Bl);class sh extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}sh.prototype.bytesPerElement=4,pt("StructArrayLayout1ul4",sh);class tp extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L,z){const W=this.length;return this.resize(W+1),this.emplace(W,o,c,m,v,x,w,T,L,z)}emplace(o,c,m,v,x,w,T,L,z,W){const Q=10*o,ae=5*o;return this.int16[Q+0]=c,this.int16[Q+1]=m,this.int16[Q+2]=v,this.int16[Q+3]=x,this.int16[Q+4]=w,this.int16[Q+5]=T,this.uint32[ae+3]=L,this.uint16[Q+8]=z,this.uint16[Q+9]=W,o}}tp.prototype.bytesPerElement=20,pt("StructArrayLayout6i1ul2ui20",tp);class pf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,c,m,v,x,w)}emplace(o,c,m,v,x,w,T){const L=6*o;return this.int16[L+0]=c,this.int16[L+1]=m,this.int16[L+2]=v,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=T,o}}pf.prototype.bytesPerElement=12,pt("StructArrayLayout2i2i2i12",pf);class ic extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,c,m,v,x)}emplace(o,c,m,v,x,w){const T=4*o,L=8*o;return this.float32[T+0]=c,this.float32[T+1]=m,this.float32[T+2]=v,this.int16[L+6]=x,this.int16[L+7]=w,o}}ic.prototype.bytesPerElement=16,pt("StructArrayLayout2f1f2i16",ic);class mf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,o,c,m,v,x,w)}emplace(o,c,m,v,x,w,T){const L=16*o,z=4*o,W=8*o;return this.uint8[L+0]=c,this.uint8[L+1]=m,this.float32[z+1]=v,this.float32[z+2]=x,this.int16[W+6]=w,this.int16[W+7]=T,o}}mf.prototype.bytesPerElement=16,pt("StructArrayLayout2ub2f2i16",mf);class gf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,m)}emplace(o,c,m,v){const x=3*o;return this.uint16[x+0]=c,this.uint16[x+1]=m,this.uint16[x+2]=v,o}}gf.prototype.bytesPerElement=6,pt("StructArrayLayout3ui6",gf);class ac extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe){const ct=this.length;return this.resize(ct+1),this.emplace(ct,o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe)}emplace(o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe,ct){const je=24*o,We=12*o,yt=48*o;return this.int16[je+0]=c,this.int16[je+1]=m,this.uint16[je+2]=v,this.uint16[je+3]=x,this.uint32[We+2]=w,this.uint32[We+3]=T,this.uint32[We+4]=L,this.uint16[je+10]=z,this.uint16[je+11]=W,this.uint16[je+12]=Q,this.float32[We+7]=ae,this.float32[We+8]=se,this.uint8[yt+36]=ye,this.uint8[yt+37]=xe,this.uint8[yt+38]=Se,this.uint32[We+10]=Fe,this.int16[je+22]=ct,o}}ac.prototype.bytesPerElement=48,pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ac);class yf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe,ct,je,We,yt,At,Zt,gr,ur,Sr,zr,Cr){const dr=this.length;return this.resize(dr+1),this.emplace(dr,o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe,ct,je,We,yt,At,Zt,gr,ur,Sr,zr,Cr)}emplace(o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye,xe,Se,Fe,ct,je,We,yt,At,Zt,gr,ur,Sr,zr,Cr,dr){const ir=32*o,nn=16*o;return this.int16[ir+0]=c,this.int16[ir+1]=m,this.int16[ir+2]=v,this.int16[ir+3]=x,this.int16[ir+4]=w,this.int16[ir+5]=T,this.int16[ir+6]=L,this.int16[ir+7]=z,this.uint16[ir+8]=W,this.uint16[ir+9]=Q,this.uint16[ir+10]=ae,this.uint16[ir+11]=se,this.uint16[ir+12]=ye,this.uint16[ir+13]=xe,this.uint16[ir+14]=Se,this.uint16[ir+15]=Fe,this.uint16[ir+16]=ct,this.uint16[ir+17]=je,this.uint16[ir+18]=We,this.uint16[ir+19]=yt,this.uint16[ir+20]=At,this.uint16[ir+21]=Zt,this.uint16[ir+22]=gr,this.uint32[nn+12]=ur,this.float32[nn+13]=Sr,this.float32[nn+14]=zr,this.uint16[ir+30]=Cr,this.uint16[ir+31]=dr,o}}yf.prototype.bytesPerElement=64,pt("StructArrayLayout8i15ui1ul2f2ui64",yf);class vf extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}vf.prototype.bytesPerElement=4,pt("StructArrayLayout1f4",vf);class oc extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,m)}emplace(o,c,m,v){const x=3*o;return this.uint16[6*o+0]=c,this.float32[x+1]=m,this.float32[x+2]=v,o}}oc.prototype.bytesPerElement=12,pt("StructArrayLayout1ui2f12",oc);class Qh extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,m){const v=this.length;return this.resize(v+1),this.emplace(v,o,c,m)}emplace(o,c,m,v){const x=4*o;return this.uint32[2*o+0]=c,this.uint16[x+2]=m,this.uint16[x+3]=v,o}}Qh.prototype.bytesPerElement=8,pt("StructArrayLayout1ul2ui8",Qh);class E extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const m=this.length;return this.resize(m+1),this.emplace(m,o,c)}emplace(o,c,m){const v=2*o;return this.uint16[v+0]=c,this.uint16[v+1]=m,o}}E.prototype.bytesPerElement=4,pt("StructArrayLayout2ui4",E);class l extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}l.prototype.bytesPerElement=2,pt("StructArrayLayout1ui2",l);class h extends gi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,c,m,v)}emplace(o,c,m,v,x){const w=4*o;return this.float32[w+0]=c,this.float32[w+1]=m,this.float32[w+2]=v,this.float32[w+3]=x,o}}h.prototype.bytesPerElement=16,pt("StructArrayLayout4f16",h);class y extends ji{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class b extends tp{get(o){return new y(this,o)}}pt("CollisionBoxArray",b);class A extends ji{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}A.prototype.size=48;class M extends ac{get(o){return new A(this,o)}}pt("PlacedSymbolArray",M);class j extends ji{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}j.prototype.size=64;class V extends yf{get(o){return new j(this,o)}}pt("SymbolInstanceArray",V);class K extends vf{getoffsetX(o){return this.float32[1*o+0]}}pt("GlyphOffsetArray",K);class te extends ro{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}pt("SymbolLineVertexArray",te);class he extends ji{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}he.prototype.size=12;class fe extends oc{get(o){return new he(this,o)}}pt("TextAnchorOffsetArray",fe);class we extends ji{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}we.prototype.size=8;class Oe extends Qh{get(o){return new we(this,o)}}pt("FeatureIndexArray",Oe);class Xe extends Xs{}class Qe extends Xs{}class Ye extends Xs{}class at extends hf{}class St extends df{}class ot extends Pu{}class Et extends Iu{}class Pt extends Jh{}class vt extends Dc{}class jt extends Bl{}class nr extends sh{}class Xt extends pf{}class Jt extends mf{}class rr extends gf{}class Or extends E{}const Dr=Mi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Er}=Dr;class Gr{constructor(o=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=o}prepareSegment(o,c,m,v){const x=this.segments[this.segments.length-1];return o>Gr.MAX_VERTEX_ARRAY_LENGTH&&dt(`Max vertices per segment is ${Gr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Gr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+o>Gr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==v?this.createNewSegment(c,m,v):x}createNewSegment(o,c,m){const v={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(v.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(o,c,m){return this.prepareSegment(0,o,c,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,m,v){return new Gr([{vertexOffset:o,primitiveOffset:c,vertexLength:m,primitiveLength:v,vaos:{},sortKey:0}])}}function qn(f,o){return 256*(f=Ve(Math.floor(f),0,255))+Ve(Math.floor(o),0,255)}Gr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,pt("SegmentVector",Gr);const qi=Mi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ea=Mi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var sa,Ra,la,Za={exports:{}},La={exports:{}},Ko={exports:{}},ho=(function(){if(la)return Za.exports;la=1;var f=(sa||(sa=1,La.exports=function(c,m){var v,x,w,T,L,z,W,Q;for(x=c.length-(v=3&c.length),w=m,L=3432918353,z=461845907,Q=0;Q<x;)W=255&c.charCodeAt(Q)|(255&c.charCodeAt(++Q))<<8|(255&c.charCodeAt(++Q))<<16|(255&c.charCodeAt(++Q))<<24,++Q,w=27492+(65535&(T=5*(65535&(w=(w^=W=(65535&(W=(W=(65535&W)*L+(((W>>>16)*L&65535)<<16)&4294967295)<<15|W>>>17))*z+(((W>>>16)*z&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(W=0,v){case 3:W^=(255&c.charCodeAt(Q+2))<<16;case 2:W^=(255&c.charCodeAt(Q+1))<<8;case 1:w^=W=(65535&(W=(W=(65535&(W^=255&c.charCodeAt(Q)))*L+(((W>>>16)*L&65535)<<16)&4294967295)<<15|W>>>17))*z+(((W>>>16)*z&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),La.exports),o=(Ra||(Ra=1,Ko.exports=function(c,m){for(var v,x=c.length,w=m^x,T=0;x>=4;)v=1540483477*(65535&(v=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(v>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),x-=4,++T;switch(x){case 3:w^=(255&c.charCodeAt(T+2))<<16;case 2:w^=(255&c.charCodeAt(T+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(T)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Ko.exports);return Za.exports=f,Za.exports.murmur3=f,Za.exports.murmur2=o,Za.exports})(),no=d(ho);class vs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,m,v){this.ids.push(bf(o)),this.positions.push(c,m,v)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=bf(o);let m=0,v=this.ids.length-1;for(;m<v;){const w=m+v>>1;this.ids[w]>=c?v=w:m=w+1}const x=[];for(;this.ids[m]===c;)x.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return x}static serialize(o,c){const m=new Float64Array(o.ids),v=new Uint32Array(o.positions);return kc(m,v,0,m.length-1),c&&c.push(m.buffer,v.buffer),{ids:m,positions:v}}static deserialize(o){const c=new vs;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function bf(f){const o=+f;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:no(String(f))}function kc(f,o,c,m){for(;c<m;){const v=f[c+m>>1];let x=c-1,w=m+1;for(;;){do x++;while(f[x]<v);do w--;while(f[w]>v);if(x>=w)break;sc(f,x,w),sc(o,3*x,3*w),sc(o,3*x+1,3*w+1),sc(o,3*x+2,3*w+2)}w-c<m-w?(kc(f,o,c,w),c=w+1):(kc(f,o,w+1,m),m=w)}}function sc(f,o,c){const m=f[o];f[o]=f[c],f[c]=m}pt("FeaturePositionMap",vs);class ml{constructor(o,c){this.gl=o.gl,this.location=c}}class lh extends ml{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class rp extends ml{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class uh extends ml{constructor(o,c){super(o,c),this.current=hr.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const au=new Float32Array(16);function lc(f){return[qn(255*f.r,255*f.g),qn(255*f.b,255*f.a)]}class Mu{constructor(o,c,m){this.value=o,this.uniformNames=c.map((v=>`u_${v}`)),this.type=m}setUniform(o,c,m){o.set(m.constantOr(this.value))}getBinding(o,c,m){return this.type==="color"?new uh(o,c):new lh(o,c)}}class Ou{constructor(o,c){this.uniformNames=c.map((m=>`u_${m}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setConstantDashPositions(o,c){this.dashTo=[0,o.y,o.height,o.width],this.dashFrom=[0,c.y,c.height,c.width]}setUniform(o,c,m,v){let x=null;v==="u_pattern_to"?x=this.patternTo:v==="u_pattern_from"?x=this.patternFrom:v==="u_dasharray_to"?x=this.dashTo:v==="u_dasharray_from"?x=this.dashFrom:v==="u_pixel_ratio_to"?x=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&o.set(x)}getBinding(o,c,m){return m.substr(0,9)==="u_pattern"||m.substr(0,12)==="u_dasharray_"?new rp(o,c):new lh(o,c)}}class pa{constructor(o,c,m,v){this.expression=o,this.type=m,this.maxValue=0,this.paintVertexAttributes=c.map((x=>({name:`a_${x}`,type:"Float32",components:m==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(o,c,m){const v=this.paintVertexArray.length,x=this.expression.evaluate(new Hn(0,m),c,{},m.canonical,[],m.formattedSection);this.paintVertexArray.resize(o),this._setPaintValue(v,o,x)}updatePaintArray(o,c,m,v,x){const w=this.expression.evaluate(new Hn(0,x),m,v);this._setPaintValue(o,c,w)}_setPaintValue(o,c,m){if(this.type==="color"){const v=lc(m);for(let x=o;x<c;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=o;v<c;v++)this.paintVertexArray.emplace(v,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ua{constructor(o,c,m,v,x,w){this.expression=o,this.uniformNames=c.map((T=>`u_${T}_t`)),this.type=m,this.useIntegerZoom=v,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map((T=>({name:`a_${T}`,type:"Float32",components:m==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(o,c,m){const v=this.expression.evaluate(new Hn(this.zoom,m),c,{},m.canonical,[],m.formattedSection),x=this.expression.evaluate(new Hn(this.zoom+1,m),c,{},m.canonical,[],m.formattedSection),w=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(w,o,v,x)}updatePaintArray(o,c,m,v,x){const w=this.expression.evaluate(new Hn(this.zoom,x),m,v),T=this.expression.evaluate(new Hn(this.zoom+1,x),m,v);this._setPaintValue(o,c,w,T)}_setPaintValue(o,c,m,v){if(this.type==="color"){const x=lc(m),w=lc(v);for(let T=o;T<c;T++)this.paintVertexArray.emplace(T,x[0],x[1],w[0],w[1])}else{for(let x=o;x<c;x++)this.paintVertexArray.emplace(x,m,v);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(v))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){const m=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,v=Ve(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);o.set(v)}getBinding(o,c,m){return new lh(o,c)}}class Do{constructor(o,c,m,v,x,w){this.expression=o,this.type=c,this.useIntegerZoom=m,this.zoom=v,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(o,c,m){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(v,o,this.getPositionIds(c),m)}updatePaintArray(o,c,m,v,x){this._setPaintValues(o,c,this.getPositionIds(m),x)}_setPaintValues(o,c,m,v){const x=this.getPositions(v);if(!x||!m)return;const w=x[m.min],T=x[m.mid],L=x[m.max];if(w&&T&&L)for(let z=o;z<c;z++)this.emplace(this.zoomInPaintVertexArray,z,T,w),this.emplace(this.zoomOutPaintVertexArray,z,T,L)}upload(o){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const c=this.getVertexAttributes();this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,c,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,c,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ko extends Do{getPositions(o){return o.imagePositions}getPositionIds(o){return o.patterns&&o.patterns[this.layerId]}getVertexAttributes(){return qi.members}emplace(o,c,m,v){o.emplace(c,m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],m.pixelRatio,v.pixelRatio)}}class qb extends Do{getPositions(o){return o.dashPositions}getPositionIds(o){return o.dashes&&o.dashes[this.layerId]}getVertexAttributes(){return Ea.members}emplace(o,c,m,v){o.emplace(c,0,m.y,m.height,m.width,0,v.y,v.height,v.width)}}class Ub{constructor(o,c,m){this.binders={},this._buffers=[];const v=[];for(const x in o.paint._values){if(!m(x))continue;const w=o.paint.get(x);if(!(w instanceof oi&&kl(w.property.specification)))continue;const T=Tw(x,o.type),L=w.value,z=w.property.specification.type,W=w.property.useIntegerZoom,Q=w.property.specification["property-type"],ae=Q==="cross-faded"||Q==="cross-faded-data-driven";if(L.kind==="constant")this.binders[x]=ae?new Ou(L.value,T):new Mu(L.value,T,z),v.push(`/u_${x}`);else if(L.kind==="source"||ae){const se=Vb(x,z,"source");this.binders[x]=ae?x==="line-dasharray"?new qb(L,z,W,c,se,o.id):new ko(L,z,W,c,se,o.id):new pa(L,T,z,se),v.push(`/a_${x}`)}else{const se=Vb(x,z,"composite");this.binders[x]=new ua(L,T,z,W,c,se),v.push(`/z_${x}`)}}this.cacheKey=v.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof pa||c instanceof ua?c.maxValue:0}populatePaintArrays(o,c,m){for(const v in this.binders){const x=this.binders[v];(x instanceof pa||x instanceof ua||x instanceof Do)&&x.populatePaintArray(o,c,m)}}setConstantPatternPositions(o,c){for(const m in this.binders){const v=this.binders[m];v instanceof Ou&&v.setConstantPatternPositions(o,c)}}setConstantDashPositions(o,c){for(const m in this.binders){const v=this.binders[m];v instanceof Ou&&v.setConstantDashPositions(o,c)}}updatePaintArrays(o,c,m,v,x){let w=!1;for(const T in o){const L=c.getPositions(T);for(const z of L){const W=m.feature(z.index);for(const Q in this.binders){const ae=this.binders[Q];if((ae instanceof pa||ae instanceof ua||ae instanceof Do)&&ae.expression.isStateDependent===!0){const se=v.paint.get(Q);ae.expression=se.value,ae.updatePaintArray(z.start,z.end,W,o[T],x),w=!0}}}}return w}defines(){const o=[];for(const c in this.binders){const m=this.binders[c];(m instanceof Mu||m instanceof Ou)&&o.push(...m.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const m=this.binders[c];if(m instanceof pa||m instanceof ua)for(let v=0;v<m.paintVertexAttributes.length;v++)o.push(m.paintVertexAttributes[v].name);else if(m instanceof Do){const v=m.getVertexAttributes();for(const x of v)o.push(x.name)}}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const m=this.binders[c];if(m instanceof Mu||m instanceof Ou||m instanceof ua)for(const v of m.uniformNames)o.push(v)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){const m=[];for(const v in this.binders){const x=this.binders[v];if(x instanceof Mu||x instanceof Ou||x instanceof ua){for(const w of x.uniformNames)if(c[w]){const T=x.getBinding(o,c[w],w);m.push({name:w,property:v,binding:T})}}}return m}setUniforms(o,c,m,v){for(const{name:x,property:w,binding:T}of c)this.binders[w].setUniform(T,v,m.get(w),x)}updatePaintBuffers(o){this._buffers=[];for(const c in this.binders){const m=this.binders[c];if(o&&m instanceof Do){const v=o.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(m instanceof pa||m instanceof ua)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(o){for(const c in this.binders){const m=this.binders[c];(m instanceof pa||m instanceof ua||m instanceof Do)&&m.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof pa||c instanceof ua||c instanceof Do)&&c.destroy()}}}class ch{constructor(o,c,m=()=>!0){this.programConfigurations={};for(const v of o)this.programConfigurations[v.id]=new Ub(v,c,m);this.needsUpload=!1,this._featureMap=new vs,this._bufferOffset=0}populatePaintArrays(o,c,m,v){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(o,c,v);c.id!==void 0&&this._featureMap.add(c.id,m,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,m,v){for(const x of m)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(o,this._featureMap,c,x,v)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function Tw(f,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${o}-`,"").replace(/-/g,"_")]}function Vb(f,o,c){const m={color:{source:Pu,composite:h},number:{source:vf,composite:Pu}},v=(function(x){return{"line-pattern":{source:Et,composite:Et},"fill-pattern":{source:Et,composite:Et},"fill-extrusion-pattern":{source:Et,composite:Et},"line-dasharray":{source:Pt,composite:Pt}}[x]})(f);return v&&v[c]||m[o][c]}pt("ConstantBinder",Mu),pt("CrossFadedConstantBinder",Ou),pt("SourceExpressionBinder",pa),pt("CrossFadedPatternBinder",ko),pt("CrossFadedDasharrayBinder",qb),pt("CompositeExpressionBinder",ua),pt("ProgramConfiguration",Ub,{omit:["_buffers"]}),pt("ProgramConfigurationSet",ch);const zy=Math.pow(2,14)-1,_f=-zy-1;function xf(f){const o=Ce/f.extent,c=f.loadGeometry();for(let m=0;m<c.length;m++){const v=c[m];for(let x=0;x<v.length;x++){const w=v[x],T=Math.round(w.x*o),L=Math.round(w.y*o);w.x=Ve(T,_f,zy),w.y=Ve(L,_f,zy),(T<w.x||T>w.x+1||L<w.y||L>w.y+1)&&dt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function wf(f,o){return{type:f.type,id:f.id,properties:f.properties,geometry:o?xf(f):[]}}const $y=-32768;function qy(f,o,c,m,v){f.emplaceBack($y+8*o+m,$y+8*c+v)}class wm{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=o.index,this.hasDependencies=!1,this.layoutVertexArray=new Qe,this.indexArray=new rr,this.segments=new Gr,this.programConfigurations=new ch(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(o,c,m){const v=this.layers[0],x=[];let w=null,T=!1,L=v.type==="heatmap";if(v.type==="circle"){const W=v;w=W.layout.get("circle-sort-key"),T=!w.isConstant(),L=L||W.paint.get("circle-pitch-alignment")==="map"}const z=L?c.subdivisionGranularity.circle:1;for(const{feature:W,id:Q,index:ae,sourceLayerIndex:se}of o){const ye=this.layers[0]._featureFilter.needGeometry,xe=wf(W,ye);if(!this.layers[0]._featureFilter.filter(new Hn(this.zoom),xe,m))continue;const Se=T?w.evaluate(xe,{},m):void 0,Fe={id:Q,properties:W.properties,type:W.type,sourceLayerIndex:se,index:ae,geometry:ye?xe.geometry:xf(W),patterns:{},sortKey:Se};x.push(Fe)}T&&x.sort(((W,Q)=>W.sortKey-Q.sortKey));for(const W of x){const{geometry:Q,index:ae,sourceLayerIndex:se}=W,ye=o[ae].feature;this.addFeature(W,Q,ae,m,z),c.featureIndex.insert(ye,Q,ae,se,this.index)}}update(o,c,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Er),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,m,v,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const T=w.length;for(const L of c)for(const z of L){const W=z.x,Q=z.y;if(W<0||W>=Ce||Q<0||Q>=Ce)continue;const ae=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,o.sortKey),se=ae.vertexLength;for(let ye=0;ye<T;ye++)for(let xe=0;xe<T;xe++)qy(this.layoutVertexArray,W,Q,w[xe],w[ye]);for(let ye=0;ye<T-1;ye++)for(let xe=0;xe<T-1;xe++){const Se=se+ye*T+xe,Fe=se+(ye+1)*T+xe;this.indexArray.emplaceBack(Se,Fe+1,Se+1),this.indexArray.emplaceBack(Se,Fe,Fe+1)}ae.vertexLength+=T*T,ae.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,{imagePositions:{},canonical:v})}}function Sm(f,o){for(let c=0;c<f.length;c++)if(Em(o,f[c]))return!0;for(let c=0;c<o.length;c++)if(Em(f,o[c]))return!0;return!!Pw(f,o)}function Gb(f,o,c){return!!Em(f,o)||!!Iw(o,f,c)}function YR(f,o){if(f.length===1)return QR(o,f[0]);for(let c=0;c<o.length;c++){const m=o[c];for(let v=0;v<m.length;v++)if(Em(f,m[v]))return!0}for(let c=0;c<f.length;c++)if(QR(o,f[c]))return!0;for(let c=0;c<o.length;c++)if(Pw(f,o[c]))return!0;return!1}function hK(f,o,c){if(f.length>1){if(Pw(f,o))return!0;for(let m=0;m<o.length;m++)if(Iw(o[m],f,c))return!0}for(let m=0;m<f.length;m++)if(Iw(f[m],o,c))return!0;return!1}function Pw(f,o){if(f.length===0||o.length===0)return!1;for(let c=0;c<f.length-1;c++){const m=f[c],v=f[c+1];for(let x=0;x<o.length-1;x++)if(dK(m,v,o[x],o[x+1]))return!0}return!1}function dK(f,o,c,m){return ke(f,c,m)!==ke(o,c,m)&&ke(f,o,c)!==ke(f,o,m)}function Iw(f,o,c){const m=c*c;if(o.length===1)return f.distSqr(o[0])<m;for(let v=1;v<o.length;v++)if(JR(f,o[v-1],o[v])<m)return!0;return!1}function JR(f,o,c){const m=o.distSqr(c);if(m===0)return f.distSqr(o);const v=((f.x-o.x)*(c.x-o.x)+(f.y-o.y)*(c.y-o.y))/m;return f.distSqr(v<0?o:v>1?c:c.sub(o)._mult(v)._add(o))}function QR(f,o){let c,m,v,x=!1;for(let w=0;w<f.length;w++){c=f[w];for(let T=0,L=c.length-1;T<c.length;L=T++)m=c[T],v=c[L],m.y>o.y!=v.y>o.y&&o.x<(v.x-m.x)*(o.y-m.y)/(v.y-m.y)+m.x&&(x=!x)}return x}function Em(f,o){let c=!1;for(let m=0,v=f.length-1;m<f.length;v=m++){const x=f[m],w=f[v];x.y>o.y!=w.y>o.y&&o.x<(w.x-x.x)*(o.y-x.y)/(w.y-x.y)+x.x&&(c=!c)}return c}function pK(f,o,c){const m=c[0],v=c[2];if(f.x<m.x&&o.x<m.x||f.x>v.x&&o.x>v.x||f.y<m.y&&o.y<m.y||f.y>v.y&&o.y>v.y)return!1;const x=ke(f,o,c[0]);return x!==ke(f,o,c[1])||x!==ke(f,o,c[2])||x!==ke(f,o,c[3])}function Cm(f,o,c){const m=o.paint.get(f).value;return m.kind==="constant"?m.value:c.programConfigurations.get(o.id).getMaxValue(f)}function Hb(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Wb(f,o,c,m,v){if(!o[0]&&!o[1])return f;const x=p.convert(o)._mult(v);c==="viewport"&&x._rotate(-m);const w=[];for(let T=0;T<f.length;T++)w.push(f[T].sub(x));return w}function mK(f){const o=[];for(let c=0;c<f.length;c++){const m=f[c],v=o.at(-1);(c===0||v&&!m.equals(v))&&o.push(m)}return o}function gK({queryGeometry:f,size:o},c){return Gb(f,c,o)}function yK({queryGeometry:f,size:o,transform:c,unwrappedTileID:m,getElevation:v},x){return Gb(f,x,o*(c.projectTileCoordinates(x.x,x.y,m,v).signedDistanceFromCamera/c.cameraToCenterDistance))}function vK({queryGeometry:f,size:o,transform:c,unwrappedTileID:m,getElevation:v},x){const w=c.projectTileCoordinates(x.x,x.y,m,v).signedDistanceFromCamera,T=o*(c.cameraToCenterDistance/w);return Gb(f,Mw(x,c,m,v),T)}function bK({queryGeometry:f,size:o,transform:c,unwrappedTileID:m,getElevation:v},x){return Gb(f,Mw(x,c,m,v),o)}function eL({queryGeometry:f,size:o,transform:c,unwrappedTileID:m,getElevation:v,pitchAlignment:x="map",pitchScale:w="map"},T){const L=x==="map"?w==="map"?gK:yK:w==="map"?vK:bK,z={queryGeometry:f,size:o,transform:c,unwrappedTileID:m,getElevation:v};for(const W of T)for(const Q of W)if(L(z,Q))return!0;return!1}function Mw(f,o,c,m){const v=o.projectTileCoordinates(f.x,f.y,c,m).point;return new p((.5*v.x+.5)*o.width,(.5*-v.y+.5)*o.height)}let tL,rL;pt("CircleBucket",wm,{omit:["layers"]});var _K={get paint(){return rL=rL||new ta({"circle-radius":new en(Rt.paint_circle["circle-radius"]),"circle-color":new en(Rt.paint_circle["circle-color"]),"circle-blur":new en(Rt.paint_circle["circle-blur"]),"circle-opacity":new en(Rt.paint_circle["circle-opacity"]),"circle-translate":new rn(Rt.paint_circle["circle-translate"]),"circle-translate-anchor":new rn(Rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rn(Rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rn(Rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new en(Rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new en(Rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new en(Rt.paint_circle["circle-stroke-opacity"])})},get layout(){return tL=tL||new ta({"circle-sort-key":new en(Rt.layout_circle["circle-sort-key"])})}};class xK extends oa{constructor(o,c){super(o,_K,c)}createBucket(o){return new wm(o)}queryRadius(o){const c=o;return Cm("circle-radius",this,c)+Cm("circle-stroke-width",this,c)+Hb(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:m,geometry:v,transform:x,pixelsToTileUnits:w,unwrappedTileID:T,getElevation:L}){const z=Wb(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),W=this.paint.get("circle-radius").evaluate(c,m)+this.paint.get("circle-stroke-width").evaluate(c,m),Q=this.paint.get("circle-pitch-scale"),ae=this.paint.get("circle-pitch-alignment");let se,ye;return ae==="map"?(se=z,ye=W*w):(se=(function(xe,Se,Fe,ct){return xe.map((je=>Mw(je,Se,Fe,ct)))})(z,x,T,L),ye=W),eL({queryGeometry:se,size:ye,transform:x,unwrappedTileID:T,getElevation:L,pitchAlignment:ae,pitchScale:Q},v)}}class nL extends wm{}let iL;pt("HeatmapBucket",nL,{omit:["layers"]});var wK={get paint(){return iL=iL||new ta({"heatmap-radius":new en(Rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new en(Rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rn(Rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new za(Rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rn(Rt.paint_heatmap["heatmap-opacity"])})}};function Ow(f,{width:o,height:c},m,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==o*c*m)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${o*c*m}`)}else v=new Uint8Array(o*c*m);return f.width=o,f.height=c,f.data=v,f}function aL(f,{width:o,height:c},m){if(o===f.width&&c===f.height)return;const v=Ow({},{width:o,height:c},m);Rw(f,v,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,o),height:Math.min(f.height,c)},m),f.width=o,f.height=c,f.data=v.data}function Rw(f,o,c,m,v,x){if(v.width===0||v.height===0)return o;if(v.width>f.width||v.height>f.height||c.x>f.width-v.width||c.y>f.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>o.width||v.height>o.height||m.x>o.width-v.width||m.y>o.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const w=f.data,T=o.data;if(w===T)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<v.height;L++){const z=((c.y+L)*f.width+c.x)*x,W=((m.y+L)*o.width+m.x)*x;for(let Q=0;Q<v.width*x;Q++)T[W+Q]=w[z+Q]}return o}class Uy{constructor(o,c){Ow(this,o,1,c)}resize(o){aL(this,o,1)}clone(){return new Uy({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,m,v,x){Rw(o,c,m,v,x,1)}}class jl{constructor(o,c){Ow(this,o,4,c)}resize(o){aL(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,m,v,x){Rw(o,c,m,v,x,4)}setPixel(o,c,m){const v=4*(o*this.width+c);this.data[v+0]=Math.round(255*m.r/m.a),this.data[v+1]=Math.round(255*m.g/m.a),this.data[v+2]=Math.round(255*m.b/m.a),this.data[v+3]=Math.round(255*m.a)}}function oL(f){const o={},c=f.resolution||256,m=f.clips?f.clips.length:1,v=f.image||new jl({width:c,height:m});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const x=(w,T,L)=>{o[f.evaluationKey]=L;const z=f.expression.evaluate(o);v.setPixel(w/4/c,T/4,z)};if(f.clips)for(let w=0,T=0;w<m;++w,T+=4*c)for(let L=0,z=0;L<c;L++,z+=4){const W=L/(c-1),{start:Q,end:ae}=f.clips[w];x(T,z,Q*(1-W)+ae*W)}else for(let w=0,T=0;w<c;w++,T+=4)x(0,T,w/(c-1));return v}pt("AlphaImage",Uy),pt("RGBAImage",jl);const Lw="big-fb";class SK extends oa{createBucket(o){return new nL(o)}constructor(o,c){super(o,wK,c),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=oL({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Lw)&&this.heatmapFbos.delete(Lw)}queryRadius(o){return Cm("heatmap-radius",this,o)}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:m,geometry:v,transform:x,pixelsToTileUnits:w,unwrappedTileID:T,getElevation:L}){return eL({queryGeometry:o,size:this.paint.get("heatmap-radius").evaluate(c,m)*w,transform:x,unwrappedTileID:T,getElevation:L},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let sL;var EK={get paint(){return sL=sL||new ta({"hillshade-illumination-direction":new rn(Rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new rn(Rt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new rn(Rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rn(Rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rn(Rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rn(Rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rn(Rt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new rn(Rt.paint_hillshade["hillshade-method"])})}};class CK extends oa{constructor(o,c){super(o,EK,c),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let o=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const x=Math.max(o.length,c.length,m.length,v.length);o=o.concat(Array(x-o.length).fill(o.at(-1))),c=c.concat(Array(x-c.length).fill(c.at(-1))),m=m.concat(Array(x-m.length).fill(m.at(-1))),v=v.concat(Array(x-v.length).fill(v.at(-1)));const w=c.map(Kt);return{directionRadians:o.map(Kt),altitudeRadians:w,shadowColor:v,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let lL;var AK={get paint(){return lL=lL||new ta({"color-relief-opacity":new rn(Rt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new za(Rt["paint_color-relief"]["color-relief-color"])})}};class Dw{constructor(o,c,m,v){this.context=o,this.format=m,this.texture=o.gl.createTexture(),this.update(c,v)}update(o,c,m){const{width:v,height:x}=o,w=!(this.size&&this.size[0]===v&&this.size[1]===x||m),{context:T}=this,{gl:L}=T;if(this.useMipmap=!!(c&&c.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!c||c.premultiply!==!1)),w)this.size=[v,x],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||xr(o)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,o):L.texImage2D(L.TEXTURE_2D,0,this.format,v,x,0,this.format,L.UNSIGNED_BYTE,o.data);else{const{x:z,y:W}=m||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||xr(o)?L.texSubImage2D(L.TEXTURE_2D,0,z,W,L.RGBA,L.UNSIGNED_BYTE,o):L.texSubImage2D(L.TEXTURE_2D,0,z,W,v,x,L.RGBA,L.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(o,c,m){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),m!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=x.LINEAR),o!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,m||o),this.filter=o),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class uL{constructor(o,c,m,v=1,x=1,w=1,T=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void dt(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const L=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=x,this.blueFactor=w,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<L;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(L,z)]=this.data[this._idx(L-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,L)]=this.data[this._idx(z,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<L;z++)for(let W=0;W<L;W++){const Q=this.get(z,W);Q>this.max&&(this.max=Q),Q<this.min&&(this.min=Q)}}get(o,c){const m=new Uint8Array(this.data.buffer),v=4*this._idx(o,c);return this.unpack(m[v],m[v+1],m[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${o}, y: ${c}, dim: ${this.dim}`);return(c+1)*this.stride+(o+1)}unpack(o,c,m){return o*this.redFactor+c*this.greenFactor+m*this.blueFactor-this.baseShift}pack(o){return cL(o,this.getUnpackVector())}getPixels(){return new jl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,m){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let v=c*this.dim,x=c*this.dim+this.dim,w=m*this.dim,T=m*this.dim+this.dim;switch(c){case-1:v=x-1;break;case 1:x=v+1}switch(m){case-1:w=T-1;break;case 1:T=w+1}const L=-c*this.dim,z=-m*this.dim;for(let W=w;W<T;W++)for(let Q=v;Q<x;Q++)this.data[this._idx(Q,W)]=o.data[this._idx(Q+L,W+z)]}}function cL(f,o){const c=o[0],m=o[1],v=o[2],x=o[3],w=Math.min(c,m,v),T=Math.round((f+x)/w);return{r:Math.floor(T*w/c)%256,g:Math.floor(T*w/m)%256,b:Math.floor(T*w/v)%256}}pt("DEMData",uL);class TK extends oa{constructor(o,c){super(o,AK,c)}_createColorRamp(o){const c={elevationStops:[],colorStops:[]},m=this._transitionablePaint._values["color-relief-color"].value.expression;if(m instanceof Vh&&m._styleExpression.expression instanceof yn){this.colorRampExpression=m;const w=m._styleExpression.expression;c.elevationStops=w.labels,c.colorStops=[];for(const T of c.elevationStops)c.colorStops.push(w.evaluate({globals:{elevation:T}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[hr.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=o)return c;const v={elevationStops:[],colorStops:[]},x=(c.elevationStops.length-1)/(o-1);for(let w=0;w<c.elevationStops.length-.5;w+=x)v.elevationStops.push(c.elevationStops[Math.round(w)]),v.colorStops.push(c.colorStops[Math.round(w)]);return dt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${o}, provided: ${c.elevationStops.length}`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(o,c,m){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(c),x=new jl({width:v.colorStops.length,height:1}),w=new jl({width:v.colorStops.length,height:1});for(let T=0;T<v.elevationStops.length;T++){const L=cL(v.elevationStops[T],m);w.setPixel(0,T,new hr(L.r/255,L.g/255,L.b/255,1)),x.setPixel(0,T,v.colorStops[T])}return this.colorRampTextures={elevationTexture:new Dw(o,w,o.gl.RGBA),colorTexture:new Dw(o,x,o.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const PK=Mi([{name:"a_pos",components:2,type:"Int16"}],4),{members:IK}=PK;function Zb(f,o,c){const m=c.patternDependencies;let v=!1;for(const x of o){const w=x.paint.get(`${f}-pattern`);w.isConstant()||(v=!0);const T=w.constantOr(null);T&&(v=!0,m[T.to]=!0,m[T.from]=!0)}return v}function kw(f,o,c,m,v){const{zoom:x}=m,w=v.patternDependencies;for(const T of o){const L=T.paint.get(`${f}-pattern`).value;if(L.kind!=="constant"){let z=L.evaluate({zoom:x-1},c,{},v.availableImages),W=L.evaluate({zoom:x},c,{},v.availableImages),Q=L.evaluate({zoom:x+1},c,{},v.availableImages);z=z&&z.name?z.name:z,W=W&&W.name?W.name:W,Q=Q&&Q.name?Q.name:Q,w[z]=!0,w[W]=!0,w[Q]=!0,c.patterns[T.id]={min:z,mid:W,max:Q}}}return c}function fL(f,o,c,m,v){let x;if(v===(function(w,T,L,z){let W=0;for(let Q=T,ae=L-z;Q<L;Q+=z)W+=(w[ae]-w[Q])*(w[Q+1]+w[ae+1]),ae=Q;return W})(f,o,c,m)>0)for(let w=o;w<c;w+=m)x=mL(w/m|0,f[w],f[w+1],x);else for(let w=c-m;w>=o;w-=m)x=mL(w/m|0,f[w],f[w+1],x);return x&&Am(x,x.next)&&(Wy(x),x=x.next),x}function np(f,o){if(!f)return f;o||(o=f);let c,m=f;do if(c=!1,m.steiner||!Am(m,m.next)&&po(m.prev,m,m.next)!==0)m=m.next;else{if(Wy(m),m=o=m.prev,m===m.next)break;c=!0}while(c||m!==o);return o}function Vy(f,o,c,m,v,x,w){if(!f)return;!w&&x&&(function(L,z,W,Q){let ae=L;do ae.z===0&&(ae.z=Fw(ae.x,ae.y,z,W,Q)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==L);ae.prevZ.nextZ=null,ae.prevZ=null,(function(se){let ye,xe=1;do{let Se,Fe=se;se=null;let ct=null;for(ye=0;Fe;){ye++;let je=Fe,We=0;for(let At=0;At<xe&&(We++,je=je.nextZ,je);At++);let yt=xe;for(;We>0||yt>0&&je;)We!==0&&(yt===0||!je||Fe.z<=je.z)?(Se=Fe,Fe=Fe.nextZ,We--):(Se=je,je=je.nextZ,yt--),ct?ct.nextZ=Se:se=Se,Se.prevZ=ct,ct=Se;Fe=je}ct.nextZ=null,xe*=2}while(ye>1)})(ae)})(f,m,v,x);let T=f;for(;f.prev!==f.next;){const L=f.prev,z=f.next;if(x?OK(f,m,v,x):MK(f))o.push(L.i,f.i,z.i),Wy(f),f=z.next,T=z.next;else if((f=z)===T){w?w===1?Vy(f=RK(np(f),o),o,c,m,v,x,2):w===2&&LK(f,o,c,m,v,x):Vy(np(f),o,c,m,v,x,1);break}}}function MK(f){const o=f.prev,c=f,m=f.next;if(po(o,c,m)>=0)return!1;const v=o.x,x=c.x,w=m.x,T=o.y,L=c.y,z=m.y,W=Math.min(v,x,w),Q=Math.min(T,L,z),ae=Math.max(v,x,w),se=Math.max(T,L,z);let ye=m.next;for(;ye!==o;){if(ye.x>=W&&ye.x<=ae&&ye.y>=Q&&ye.y<=se&&Gy(v,T,x,L,w,z,ye.x,ye.y)&&po(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function OK(f,o,c,m){const v=f.prev,x=f,w=f.next;if(po(v,x,w)>=0)return!1;const T=v.x,L=x.x,z=w.x,W=v.y,Q=x.y,ae=w.y,se=Math.min(T,L,z),ye=Math.min(W,Q,ae),xe=Math.max(T,L,z),Se=Math.max(W,Q,ae),Fe=Fw(se,ye,o,c,m),ct=Fw(xe,Se,o,c,m);let je=f.prevZ,We=f.nextZ;for(;je&&je.z>=Fe&&We&&We.z<=ct;){if(je.x>=se&&je.x<=xe&&je.y>=ye&&je.y<=Se&&je!==v&&je!==w&&Gy(T,W,L,Q,z,ae,je.x,je.y)&&po(je.prev,je,je.next)>=0||(je=je.prevZ,We.x>=se&&We.x<=xe&&We.y>=ye&&We.y<=Se&&We!==v&&We!==w&&Gy(T,W,L,Q,z,ae,We.x,We.y)&&po(We.prev,We,We.next)>=0))return!1;We=We.nextZ}for(;je&&je.z>=Fe;){if(je.x>=se&&je.x<=xe&&je.y>=ye&&je.y<=Se&&je!==v&&je!==w&&Gy(T,W,L,Q,z,ae,je.x,je.y)&&po(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;We&&We.z<=ct;){if(We.x>=se&&We.x<=xe&&We.y>=ye&&We.y<=Se&&We!==v&&We!==w&&Gy(T,W,L,Q,z,ae,We.x,We.y)&&po(We.prev,We,We.next)>=0)return!1;We=We.nextZ}return!0}function RK(f,o){let c=f;do{const m=c.prev,v=c.next.next;!Am(m,v)&&dL(m,c,c.next,v)&&Hy(m,v)&&Hy(v,m)&&(o.push(m.i,c.i,v.i),Wy(c),Wy(c.next),c=f=v),c=c.next}while(c!==f);return np(c)}function LK(f,o,c,m,v,x){let w=f;do{let T=w.next.next;for(;T!==w.prev;){if(w.i!==T.i&&BK(w,T)){let L=pL(w,T);return w=np(w,w.next),L=np(L,L.next),Vy(w,o,c,m,v,x,0),void Vy(L,o,c,m,v,x,0)}T=T.next}w=w.next}while(w!==f)}function DK(f,o){let c=f.x-o.x;return c===0&&(c=f.y-o.y,c===0)&&(c=(f.next.y-f.y)/(f.next.x-f.x)-(o.next.y-o.y)/(o.next.x-o.x)),c}function kK(f,o){const c=(function(v,x){let w=x;const T=v.x,L=v.y;let z,W=-1/0;if(Am(v,w))return w;do{if(Am(v,w.next))return w.next;if(L<=w.y&&L>=w.next.y&&w.next.y!==w.y){const xe=w.x+(L-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(xe<=T&&xe>W&&(W=xe,z=w.x<w.next.x?w:w.next,xe===T))return z}w=w.next}while(w!==x);if(!z)return null;const Q=z,ae=z.x,se=z.y;let ye=1/0;w=z;do{if(T>=w.x&&w.x>=ae&&T!==w.x&&hL(L<se?T:W,L,ae,se,L<se?W:T,L,w.x,w.y)){const xe=Math.abs(L-w.y)/(T-w.x);Hy(w,v)&&(xe<ye||xe===ye&&(w.x>z.x||w.x===z.x&&FK(z,w)))&&(z=w,ye=xe)}w=w.next}while(w!==Q);return z})(f,o);if(!c)return o;const m=pL(c,f);return np(m,m.next),np(c,c.next)}function FK(f,o){return po(f.prev,f,o.prev)<0&&po(o.next,f,f.next)<0}function Fw(f,o,c,m,v){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-c)*v|0)|f<<8))|f<<4))|f<<2))|f<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-m)*v|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function NK(f){let o=f,c=f;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==f);return c}function hL(f,o,c,m,v,x,w,T){return(v-w)*(o-T)>=(f-w)*(x-T)&&(f-w)*(m-T)>=(c-w)*(o-T)&&(c-w)*(x-T)>=(v-w)*(m-T)}function Gy(f,o,c,m,v,x,w,T){return!(f===w&&o===T)&&hL(f,o,c,m,v,x,w,T)}function BK(f,o){return f.next.i!==o.i&&f.prev.i!==o.i&&!(function(c,m){let v=c;do{if(v.i!==c.i&&v.next.i!==c.i&&v.i!==m.i&&v.next.i!==m.i&&dL(v,v.next,c,m))return!0;v=v.next}while(v!==c);return!1})(f,o)&&(Hy(f,o)&&Hy(o,f)&&(function(c,m){let v=c,x=!1;const w=(c.x+m.x)/2,T=(c.y+m.y)/2;do v.y>T!=v.next.y>T&&v.next.y!==v.y&&w<(v.next.x-v.x)*(T-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==c);return x})(f,o)&&(po(f.prev,f,o.prev)||po(f,o.prev,o))||Am(f,o)&&po(f.prev,f,f.next)>0&&po(o.prev,o,o.next)>0)}function po(f,o,c){return(o.y-f.y)*(c.x-o.x)-(o.x-f.x)*(c.y-o.y)}function Am(f,o){return f.x===o.x&&f.y===o.y}function dL(f,o,c,m){const v=Kb(po(f,o,c)),x=Kb(po(f,o,m)),w=Kb(po(c,m,f)),T=Kb(po(c,m,o));return v!==x&&w!==T||!(v!==0||!Xb(f,c,o))||!(x!==0||!Xb(f,m,o))||!(w!==0||!Xb(c,f,m))||!(T!==0||!Xb(c,o,m))}function Xb(f,o,c){return o.x<=Math.max(f.x,c.x)&&o.x>=Math.min(f.x,c.x)&&o.y<=Math.max(f.y,c.y)&&o.y>=Math.min(f.y,c.y)}function Kb(f){return f>0?1:f<0?-1:0}function Hy(f,o){return po(f.prev,f,f.next)<0?po(f,o,f.next)>=0&&po(f,f.prev,o)>=0:po(f,o,f.prev)<0||po(f,f.next,o)<0}function pL(f,o){const c=Nw(f.i,f.x,f.y),m=Nw(o.i,o.x,o.y),v=f.next,x=o.prev;return f.next=o,o.prev=f,c.next=v,v.prev=c,m.next=c,c.prev=m,x.next=m,m.prev=x,m}function mL(f,o,c,m){const v=Nw(f,o,c);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function Wy(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Nw(f,o,c){return{i:f,x:o,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Tm{constructor(o,c){if(c>o)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=o,this._minGranularity=c}getGranularityForZoomLevel(o){return Math.max(Math.floor(this._baseZoomGranularity/(1<<o)),this._minGranularity,1)}}class Yb{constructor(o){this.fill=o.fill,this.line=o.line,this.tile=o.tile,this.stencil=o.stencil,this.circle=o.circle}}Yb.noSubdivision=new Yb({fill:new Tm(0,0),line:new Tm(0,0),tile:new Tm(0,0),stencil:new Tm(0,0),circle:1}),pt("SubdivisionGranularityExpression",Tm),pt("SubdivisionGranularitySetting",Yb);const Pm=-32768,Zy=32767;class jK{constructor(o,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=o,this._granularityCellSize=Ce/o,this._canonical=c}_getKey(o,c){return(o+=32768)<<16|c+32768}_vertexToIndex(o,c){if(o<-32768||c<-32768||o>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const m=0|Math.round(o),v=0|Math.round(c),x=this._getKey(m,v);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(m,v),w}_subdivideTrianglesScanline(o){if(this._granularity<2)return(function(v,x){const w=[];for(let T=0;T<x.length;T+=3){const L=x[T],z=x[T+1],W=x[T+2],Q=v[2*L],ae=v[2*L+1];(v[2*z]-Q)*(v[2*W+1]-ae)-(v[2*z+1]-ae)*(v[2*W]-Q)>0?(w.push(L),w.push(W),w.push(z)):(w.push(L),w.push(z),w.push(W))}return w})(this._vertexBuffer,o);const c=[],m=o.length;for(let v=0;v<m;v+=3){const x=[o[v+0],o[v+1],o[v+2]],w=[this._vertexBuffer[2*o[v+0]+0],this._vertexBuffer[2*o[v+0]+1],this._vertexBuffer[2*o[v+1]+0],this._vertexBuffer[2*o[v+1]+1],this._vertexBuffer[2*o[v+2]+0],this._vertexBuffer[2*o[v+2]+1]];let T=1/0,L=1/0,z=-1/0,W=-1/0;for(let xe=0;xe<3;xe++){const Se=w[2*xe],Fe=w[2*xe+1];T=Math.min(T,Se),z=Math.max(z,Se),L=Math.min(L,Fe),W=Math.max(W,Fe)}if(T===z||L===W)continue;const Q=Math.floor(T/this._granularityCellSize),ae=Math.ceil(z/this._granularityCellSize),se=Math.floor(L/this._granularityCellSize),ye=Math.ceil(W/this._granularityCellSize);if(Q!==ae||se!==ye)for(let xe=se;xe<ye;xe++){const Se=this._scanlineGenerateVertexRingForCellRow(xe,w,x);zK(this._vertexBuffer,Se,c)}else c.push(...x)}return c}_scanlineGenerateVertexRingForCellRow(o,c,m){const v=o*this._granularityCellSize,x=v+this._granularityCellSize,w=[];for(let T=0;T<3;T++){const L=c[2*T],z=c[2*T+1],W=c[2*(T+1)%6],Q=c[(2*(T+1)+1)%6],ae=c[2*(T+2)%6],se=c[(2*(T+2)+1)%6],ye=W-L,xe=Q-z,Se=ye===0,Fe=xe===0,ct=(v-z)/xe,je=(x-z)/xe,We=Math.min(ct,je),yt=Math.max(ct,je);if(!Fe&&(We>=1||yt<=0)||Fe&&(z<v||z>x)){Q>=v&&Q<=x&&w.push(m[(T+1)%3]);continue}!Fe&&We>0&&w.push(this._vertexToIndex(L+ye*We,z+xe*We));const At=L+ye*Math.max(We,0),Zt=L+ye*Math.min(yt,1);Se||this._generateIntraEdgeVertices(w,L,z,W,Q,At,Zt),!Fe&&yt<1&&w.push(this._vertexToIndex(L+ye*yt,z+xe*yt)),(Fe||Q>=v&&Q<=x)&&w.push(m[(T+1)%3]),!Fe&&(Q<=v||Q>=x)&&this._generateInterEdgeVertices(w,L,z,W,Q,ae,se,Zt,v,x)}return w}_generateIntraEdgeVertices(o,c,m,v,x,w,T){const L=v-c,z=x-m,W=z===0,Q=W?Math.min(c,v):Math.min(w,T),ae=W?Math.max(c,v):Math.max(w,T),se=Math.floor(Q/this._granularityCellSize)+1,ye=Math.ceil(ae/this._granularityCellSize)-1;if(W?c<v:w<T)for(let xe=se;xe<=ye;xe++){const Se=xe*this._granularityCellSize;o.push(this._vertexToIndex(Se,m+z*(Se-c)/L))}else for(let xe=ye;xe>=se;xe--){const Se=xe*this._granularityCellSize;o.push(this._vertexToIndex(Se,m+z*(Se-c)/L))}}_generateInterEdgeVertices(o,c,m,v,x,w,T,L,z,W){const Q=x-m,ae=w-v,se=T-x,ye=(z-x)/se,xe=(W-x)/se,Se=Math.min(ye,xe),Fe=Math.max(ye,xe),ct=v+ae*Se;let je=Math.floor(Math.min(ct,L)/this._granularityCellSize)+1,We=Math.ceil(Math.max(ct,L)/this._granularityCellSize)-1,yt=L<ct;const At=se===0;if(At&&(T===z||T===W))return;if(At||Se>=1||Fe<=0){const gr=m-T,ur=w+(c-w)*Math.min((z-T)/gr,(W-T)/gr);je=Math.floor(Math.min(ur,L)/this._granularityCellSize)+1,We=Math.ceil(Math.max(ur,L)/this._granularityCellSize)-1,yt=L<ur}const Zt=Q>0?W:z;if(yt)for(let gr=je;gr<=We;gr++)o.push(this._vertexToIndex(gr*this._granularityCellSize,Zt));else for(let gr=We;gr>=je;gr--)o.push(this._vertexToIndex(gr*this._granularityCellSize,Zt))}_generateOutline(o){const c=[];for(const m of o){const v=ip(m,this._granularity,!0),x=this._pointArrayToIndices(v),w=[];for(let T=1;T<x.length;T++)w.push(x[T-1]),w.push(x[T]);c.push(w)}return c}_handlePoles(o){let c=!1,m=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(c||m)&&this._fillPoles(o,c,m)}_ensureNoPoleVertices(){const o=this._vertexBuffer;for(let c=0;c<o.length;c+=2){const m=o[c+1];m===Pm&&(o[c+1]=-32767),m===Zy&&(o[c+1]=32766)}}_generatePoleQuad(o,c,m,v,x,w){v>x!=(w===Pm)?(o.push(c),o.push(m),o.push(this._vertexToIndex(v,w)),o.push(m),o.push(this._vertexToIndex(x,w)),o.push(this._vertexToIndex(v,w))):(o.push(m),o.push(c),o.push(this._vertexToIndex(v,w)),o.push(this._vertexToIndex(x,w)),o.push(m),o.push(this._vertexToIndex(v,w)))}_fillPoles(o,c,m){const v=this._vertexBuffer,x=Ce,w=o.length;for(let T=2;T<w;T+=3){const L=o[T-2],z=o[T-1],W=o[T],Q=v[2*L],ae=v[2*L+1],se=v[2*z],ye=v[2*z+1],xe=v[2*W],Se=v[2*W+1];c&&(ae===0&&ye===0&&this._generatePoleQuad(o,L,z,Q,se,Pm),ye===0&&Se===0&&this._generatePoleQuad(o,z,W,se,xe,Pm),Se===0&&ae===0&&this._generatePoleQuad(o,W,L,xe,Q,Pm)),m&&(ae===x&&ye===x&&this._generatePoleQuad(o,L,z,Q,se,Zy),ye===x&&Se===x&&this._generatePoleQuad(o,z,W,se,xe,Zy),Se===x&&ae===x&&this._generatePoleQuad(o,W,L,xe,Q,Zy))}}_initializeVertices(o){for(let c=0;c<o.length;c+=2)this._vertexToIndex(o[c],o[c+1])}subdividePolygonInternal(o,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:m,holeIndices:v}=(function(T){const L=[],z=[];for(const W of T)if(W.length!==0){W!==T[0]&&L.push(z.length/2);for(let Q=0;Q<W.length;Q++)z.push(W[Q].x),z.push(W[Q].y)}return{flattened:z,holeIndices:L}})(o);let x;this._initializeVertices(m);try{const T=(function(z,W,Q=2){const ae=W&&W.length,se=ae?W[0]*Q:z.length;let ye=fL(z,0,se,Q,!0);const xe=[];if(!ye||ye.next===ye.prev)return xe;let Se,Fe,ct;if(ae&&(ye=(function(je,We,yt,At){const Zt=[];for(let gr=0,ur=We.length;gr<ur;gr++){const Sr=fL(je,We[gr]*At,gr<ur-1?We[gr+1]*At:je.length,At,!1);Sr===Sr.next&&(Sr.steiner=!0),Zt.push(NK(Sr))}Zt.sort(DK);for(let gr=0;gr<Zt.length;gr++)yt=kK(Zt[gr],yt);return yt})(z,W,ye,Q)),z.length>80*Q){Se=z[0],Fe=z[1];let je=Se,We=Fe;for(let yt=Q;yt<se;yt+=Q){const At=z[yt],Zt=z[yt+1];At<Se&&(Se=At),Zt<Fe&&(Fe=Zt),At>je&&(je=At),Zt>We&&(We=Zt)}ct=Math.max(je-Se,We-Fe),ct=ct!==0?32767/ct:0}return Vy(ye,xe,Q,Se,Fe,ct,0),xe})(m,v),L=this._convertIndices(m,T);x=this._subdivideTrianglesScanline(L)}catch(T){console.error(T)}let w=[];return c&&(w=this._generateOutline(o)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(o,c){const m=[];for(let v=0;v<c.length;v++)m.push(this._vertexToIndex(o[2*c[v]],o[2*c[v]+1]));return m}_pointArrayToIndices(o){const c=[];for(let m=0;m<o.length;m++){const v=o[m];c.push(this._vertexToIndex(v.x,v.y))}return c}}function gL(f,o,c,m=!0){return new jK(c,o).subdividePolygonInternal(f,m)}function ip(f,o,c=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const m=f[0],v=f[f.length-1],x=c&&(m.x!==v.x||m.y!==v.y);if(o<2)return x?[...f,f[0]]:[...f];const w=Math.floor(Ce/o),T=[];T.push(new p(f[0].x,f[0].y));const L=f.length,z=x?L:L-1;for(let W=0;W<z;W++){const Q=f[W],ae=W<L-1?f[W+1]:f[0],se=Q.x,ye=Q.y,xe=ae.x,Se=ae.y,Fe=se!==xe,ct=ye!==Se;if(!Fe&&!ct)continue;const je=xe-se,We=Se-ye,yt=Math.abs(je),At=Math.abs(We);let Zt=se,gr=ye;for(;;){const Sr=je>0?(Math.floor(Zt/w)+1)*w:(Math.ceil(Zt/w)-1)*w,zr=We>0?(Math.floor(gr/w)+1)*w:(Math.ceil(gr/w)-1)*w,Cr=Math.abs(Zt-Sr),dr=Math.abs(gr-zr),ir=Math.abs(Zt-xe),nn=Math.abs(gr-Se),Xr=Fe?Cr/yt:Number.POSITIVE_INFINITY,an=ct?dr/At:Number.POSITIVE_INFINITY;if((ir<=Cr||!Fe)&&(nn<=dr||!ct))break;if(Xr<an&&Fe||!ct){Zt=Sr,gr+=We*Xr;const Hr=new p(Zt,Math.round(gr));T[T.length-1].x===Hr.x&&T[T.length-1].y===Hr.y||T.push(Hr)}else{Zt+=je*an,gr=zr;const Hr=new p(Math.round(Zt),gr);T[T.length-1].x===Hr.x&&T[T.length-1].y===Hr.y||T.push(Hr)}}const ur=new p(xe,Se);T[T.length-1].x===ur.x&&T[T.length-1].y===ur.y||T.push(ur)}return T}function zK(f,o,c){if(o.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,v=f[2*o[0]];for(let L=1;L<o.length;L++){const z=f[2*o[L]];z<v&&(v=z,m=L)}const x=o.length;let w=m,T=(w+1)%x;for(;;){const L=w-1>=0?w-1:x-1,z=(T+1)%x,W=f[2*o[L]],Q=f[2*o[z]],ae=f[2*o[w]],se=f[2*o[w]+1],ye=f[2*o[T]+1];let xe=!1;if(W<Q)xe=!0;else if(W>Q)xe=!1;else{const Se=ye-se,Fe=-(f[2*o[T]]-ae),ct=se<ye?1:-1;((W-ae)*Se+(f[2*o[L]+1]-se)*Fe)*ct>((Q-ae)*Se+(f[2*o[z]+1]-se)*Fe)*ct&&(xe=!0)}if(xe){const Se=o[L],Fe=o[w],ct=o[T];Se!==Fe&&Se!==ct&&Fe!==ct&&c.push(ct,Fe,Se),w--,w<0&&(w=x-1)}else{const Se=o[z],Fe=o[w],ct=o[T];Se!==Fe&&Se!==ct&&Fe!==ct&&c.push(ct,Fe,Se),T++,T>=x&&(T=0)}if(L===z)break}}function yL(f,o,c,m,v,x,w,T,L){const z=v.length/2,W=w&&T&&L;if(z<Gr.MAX_VERTEX_ARRAY_LENGTH){const Q=o.prepareSegment(z,c,m),ae=Q.vertexLength;for(let xe=0;xe<x.length;xe+=3)m.emplaceBack(ae+x[xe],ae+x[xe+1],ae+x[xe+2]);let se,ye;Q.vertexLength+=z,Q.primitiveLength+=x.length/3,W&&(ye=w.prepareSegment(z,c,T),se=ye.vertexLength,ye.vertexLength+=z);for(let xe=0;xe<v.length;xe+=2)f(v[xe],v[xe+1]);if(W)for(let xe=0;xe<L.length;xe++){const Se=L[xe];for(let Fe=1;Fe<Se.length;Fe+=2)T.emplaceBack(se+Se[Fe-1],se+Se[Fe]);ye.primitiveLength+=Se.length/2}}else(function(Q,ae,se,ye,xe,Se){const Fe=[];for(let At=0;At<ye.length/2;At++)Fe.push(-1);const ct={count:0};let je=0,We=Q.getOrCreateLatestSegment(ae,se),yt=We.vertexLength;for(let At=2;At<xe.length;At+=3){const Zt=xe[At-2],gr=xe[At-1],ur=xe[At];let Sr=Fe[Zt]<je,zr=Fe[gr]<je,Cr=Fe[ur]<je;We.vertexLength+((Sr?1:0)+(zr?1:0)+(Cr?1:0))>Gr.MAX_VERTEX_ARRAY_LENGTH&&(We=Q.createNewSegment(ae,se),je=ct.count,Sr=!0,zr=!0,Cr=!0,yt=0);const dr=Xy(Fe,ye,Se,ct,Zt,Sr,We),ir=Xy(Fe,ye,Se,ct,gr,zr,We),nn=Xy(Fe,ye,Se,ct,ur,Cr,We);se.emplaceBack(yt+dr-je,yt+ir-je,yt+nn-je),We.primitiveLength++}})(o,c,m,v,x,f),W&&(function(Q,ae,se,ye,xe,Se){const Fe=[];for(let At=0;At<ye.length/2;At++)Fe.push(-1);const ct={count:0};let je=0,We=Q.getOrCreateLatestSegment(ae,se),yt=We.vertexLength;for(let At=0;At<xe.length;At++){const Zt=xe[At];for(let gr=1;gr<xe[At].length;gr+=2){const ur=Zt[gr-1],Sr=Zt[gr];let zr=Fe[ur]<je,Cr=Fe[Sr]<je;We.vertexLength+((zr?1:0)+(Cr?1:0))>Gr.MAX_VERTEX_ARRAY_LENGTH&&(We=Q.createNewSegment(ae,se),je=ct.count,zr=!0,Cr=!0,yt=0);const dr=Xy(Fe,ye,Se,ct,ur,zr,We),ir=Xy(Fe,ye,Se,ct,Sr,Cr,We);se.emplaceBack(yt+dr-je,yt+ir-je),We.primitiveLength++}}})(w,c,T,v,L,f),o.forceNewSegmentOnNextPrepare(),w?.forceNewSegmentOnNextPrepare()}function Xy(f,o,c,m,v,x,w){if(x){const T=m.count;return c(o[2*v],o[2*v+1]),f[v]=m.count,m.count++,w.vertexLength++,T}return f[v]}class Bw{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=o.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ye,this.indexArray=new rr,this.indexArray2=new Or,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Gr,this.segments2=new Gr,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(o,c,m){this.hasDependencies=Zb("fill",this.layers,c);const v=this.layers[0].layout.get("fill-sort-key"),x=!v.isConstant(),w=[];for(const{feature:T,id:L,index:z,sourceLayerIndex:W}of o){const Q=this.layers[0]._featureFilter.needGeometry,ae=wf(T,Q);if(!this.layers[0]._featureFilter.filter(new Hn(this.zoom),ae,m))continue;const se=x?v.evaluate(ae,{},m,c.availableImages):void 0,ye={id:L,properties:T.properties,type:T.type,sourceLayerIndex:W,index:z,geometry:Q?ae.geometry:xf(T),patterns:{},sortKey:se};w.push(ye)}x&&w.sort(((T,L)=>T.sortKey-L.sortKey));for(const T of w){const{geometry:L,index:z,sourceLayerIndex:W}=T;if(this.hasDependencies){const Q=kw("fill",this.layers,T,{zoom:this.zoom},c);this.patternFeatures.push(Q)}else this.addFeature(T,L,z,m,{},c.subdivisionGranularity);c.featureIndex.insert(o[z].feature,L,z,W,this.index)}}update(o,c,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,{imagePositions:m})}addFeatures(o,c,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,c,m,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,IK),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,m,v,x,w){for(const T of Rl(c,500)){const L=gL(T,v,w.fill.getGranularityForZoomLevel(v.z)),z=this.layoutVertexArray;yL(((W,Q)=>{z.emplaceBack(W,Q)}),this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,{imagePositions:x,canonical:v})}}let vL,bL;pt("FillBucket",Bw,{omit:["layers","patternFeatures"]});var $K={get paint(){return bL=bL||new ta({"fill-antialias":new rn(Rt.paint_fill["fill-antialias"]),"fill-opacity":new en(Rt.paint_fill["fill-opacity"]),"fill-color":new en(Rt.paint_fill["fill-color"]),"fill-outline-color":new en(Rt.paint_fill["fill-outline-color"]),"fill-translate":new rn(Rt.paint_fill["fill-translate"]),"fill-translate-anchor":new rn(Rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new xo(Rt.paint_fill["fill-pattern"])})},get layout(){return vL=vL||new ta({"fill-sort-key":new en(Rt.layout_fill["fill-sort-key"])})}};class qK extends oa{constructor(o,c){super(o,$K,c)}recalculate(o,c){super.recalculate(o,c);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Bw(o)}queryRadius(){return Hb(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:o,geometry:c,transform:m,pixelsToTileUnits:v}){return YR(Wb(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,v),c)}isTileClipped(){return!0}}const UK=Mi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),VK=Mi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:GK}=UK;class Ky{constructor(o,c,m,v,x){this.properties={},this.extent=m,this.type=0,this.id=void 0,this._pbf=o,this._geometry=-1,this._keys=v,this._values=x,o.readFields(HK,this,c)}loadGeometry(){const o=this._pbf;o.pos=this._geometry;const c=o.readVarint()+o.pos,m=[];let v,x=1,w=0,T=0,L=0;for(;o.pos<c;){if(w<=0){const z=o.readVarint();x=7&z,w=z>>3}if(w--,x===1||x===2)T+=o.readSVarint(),L+=o.readSVarint(),x===1&&(v&&m.push(v),v=[]),v&&v.push(new p(T,L));else{if(x!==7)throw new Error(`unknown command ${x}`);v&&v.push(v[0].clone())}}return v&&m.push(v),m}bbox(){const o=this._pbf;o.pos=this._geometry;const c=o.readVarint()+o.pos;let m=1,v=0,x=0,w=0,T=1/0,L=-1/0,z=1/0,W=-1/0;for(;o.pos<c;){if(v<=0){const Q=o.readVarint();m=7&Q,v=Q>>3}if(v--,m===1||m===2)x+=o.readSVarint(),w+=o.readSVarint(),x<T&&(T=x),x>L&&(L=x),w<z&&(z=w),w>W&&(W=w);else if(m!==7)throw new Error(`unknown command ${m}`)}return[T,z,L,W]}toGeoJSON(o,c,m){const v=this.extent*Math.pow(2,m),x=this.extent*o,w=this.extent*c,T=this.loadGeometry();function L(ae){return[360*(ae.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(ae.y+w)/v)*Math.PI))-90]}function z(ae){return ae.map(L)}let W;if(this.type===1){const ae=[];for(const ye of T)ae.push(ye[0]);const se=z(ae);W=ae.length===1?{type:"Point",coordinates:se[0]}:{type:"MultiPoint",coordinates:se}}else if(this.type===2){const ae=T.map(z);W=ae.length===1?{type:"LineString",coordinates:ae[0]}:{type:"MultiLineString",coordinates:ae}}else{if(this.type!==3)throw new Error("unknown feature type");{const ae=_L(T),se=[];for(const ye of ae)se.push(ye.map(z));W=se.length===1?{type:"Polygon",coordinates:se[0]}:{type:"MultiPolygon",coordinates:se}}}const Q={type:"Feature",geometry:W,properties:this.properties};return this.id!=null&&(Q.id=this.id),Q}}function HK(f,o,c){f===1?o.id=c.readVarint():f===2?(function(m,v){const x=m.readVarint()+m.pos;for(;m.pos<x;){const w=v._keys[m.readVarint()],T=v._values[m.readVarint()];v.properties[w]=T}})(c,o):f===3?o.type=c.readVarint():f===4&&(o._geometry=c.pos)}function _L(f){const o=f.length;if(o<=1)return[f];const c=[];let m,v;for(let x=0;x<o;x++){const w=WK(f[x]);w!==0&&(v===void 0&&(v=w<0),v===w<0?(m&&c.push(m),m=[f[x]]):m&&m.push(f[x]))}return m&&c.push(m),c}function WK(f){let o=0;for(let c,m,v=0,x=f.length,w=x-1;v<x;w=v++)c=f[v],m=f[w],o+=(m.x-c.x)*(c.y+m.y);return o}Ky.types=["Unknown","Point","LineString","Polygon"];class ZK{constructor(o,c){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(XK,this,c),this.length=this._features.length}feature(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];const c=this._pbf.readVarint()+this._pbf.pos;return new Ky(this._pbf,c,this.extent,this._keys,this._values)}}function XK(f,o,c){f===15?o.version=c.readVarint():f===1?o.name=c.readString():f===5?o.extent=c.readVarint():f===2?o._features.push(c.pos):f===3?o._keys.push(c.readString()):f===4&&o._values.push((function(m){let v=null;const x=m.readVarint()+m.pos;for(;m.pos<x;){const w=m.readVarint()>>3;v=w===1?m.readString():w===2?m.readFloat():w===3?m.readDouble():w===4?m.readVarint64():w===5?m.readVarint():w===6?m.readSVarint():w===7?m.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(c))}class xL{constructor(o,c){this.layers=o.readFields(KK,{},c)}}function KK(f,o,c){if(f===3){const m=new ZK(c,c.readVarint()+c.pos);m.length&&(o[m.name]=m)}}const jw=Math.pow(2,13);function Yy(f,o,c,m,v,x,w,T){f.emplaceBack(o,c,2*Math.floor(m*jw)+w,v*jw*2,x*jw*2,Math.round(T))}class zw{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=o.index,this.hasDependencies=!1,this.layoutVertexArray=new at,this.centroidVertexArray=new Xe,this.indexArray=new rr,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Gr,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(o,c,m){this.features=[],this.hasDependencies=Zb("fill-extrusion",this.layers,c);for(const{feature:v,id:x,index:w,sourceLayerIndex:T}of o){const L=this.layers[0]._featureFilter.needGeometry,z=wf(v,L);if(!this.layers[0]._featureFilter.filter(new Hn(this.zoom),z,m))continue;const W={id:x,sourceLayerIndex:T,index:w,geometry:L?z.geometry:xf(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(kw("fill-extrusion",this.layers,W,{zoom:this.zoom},c)):this.addFeature(W,W.geometry,w,m,{},c.subdivisionGranularity),c.featureIndex.insert(v,W.geometry,w,T,this.index,!0)}}addFeatures(o,c,m){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,c,m,o.subdivisionGranularity)}}update(o,c,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,{imagePositions:m})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,GK),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,VK.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,m,v,x,w){for(const T of Rl(c,500)){const L={x:0,y:0,sampleCount:0},z=this.layoutVertexArray.length;this.processPolygon(L,v,o,T,w);const W=this.layoutVertexArray.length-z,Q=Math.floor(L.x/L.sampleCount),ae=Math.floor(L.y/L.sampleCount);for(let se=0;se<W;se++)this.centroidVertexArray.emplaceBack(Q,ae)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,{imagePositions:x,canonical:v})}processPolygon(o,c,m,v,x){if(v.length<1||wL(v[0]))return;for(const Q of v)Q.length!==0&&YK(o,Q);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=x.fill.getGranularityForZoomLevel(c.z),L=Ky.types[m.type]==="Polygon";for(const Q of v){if(Q.length===0||wL(Q))continue;const ae=ip(Q,T,L);this._generateSideFaces(ae,w)}if(!L)return;const z=gL(v,c,T,!1),W=this.layoutVertexArray;yL(((Q,ae)=>{Yy(W,Q,ae,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles)}_generateSideFaces(o,c){let m=0;for(let v=1;v<o.length;v++){const x=o[v],w=o[v-1];if(JK(x,w))continue;c.segment.vertexLength+4>Gr.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const T=x.sub(w)._perp()._unit(),L=w.dist(x);m+L>32768&&(m=0),Yy(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,0,m),Yy(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,1,m),m+=L,Yy(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,0,m),Yy(this.layoutVertexArray,w.x,w.y,T.x,T.y,0,1,m);const z=c.segment.vertexLength;this.indexArray.emplaceBack(z,z+2,z+1),this.indexArray.emplaceBack(z+1,z+2,z+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function YK(f,o){for(let c=0;c<o.length;c++){const m=o[c];c===o.length-1&&o[0].x===m.x&&o[0].y===m.y||(f.x+=m.x,f.y+=m.y,f.sampleCount++)}}function JK(f,o){return f.x===o.x&&(f.x<0||f.x>Ce)||f.y===o.y&&(f.y<0||f.y>Ce)}function wL(f){return f.every((o=>o.x<0))||f.every((o=>o.x>Ce))||f.every((o=>o.y<0))||f.every((o=>o.y>Ce))}let SL;pt("FillExtrusionBucket",zw,{omit:["layers","features"]});var QK={get paint(){return SL=SL||new ta({"fill-extrusion-opacity":new rn(Rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new en(Rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rn(Rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rn(Rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xo(Rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new en(Rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new en(Rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rn(Rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class eY extends oa{constructor(o,c){super(o,QK,c)}createBucket(o){return new zw(o)}queryRadius(){return Hb(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:m,geometry:v,transform:x,pixelsToTileUnits:w,pixelPosMatrix:T}){const L=Wb(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),z=this.paint.get("fill-extrusion-height").evaluate(c,m),W=this.paint.get("fill-extrusion-base").evaluate(c,m),Q=(function(se,ye){const xe=[];for(const Se of se){const Fe=[Se.x,Se.y,0,1];ue(Fe,Fe,ye),xe.push(new p(Fe[0]/Fe[3],Fe[1]/Fe[3]))}return xe})(L,T),ae=(function(se,ye,xe,Se){const Fe=[],ct=[],je=Se[8]*ye,We=Se[9]*ye,yt=Se[10]*ye,At=Se[11]*ye,Zt=Se[8]*xe,gr=Se[9]*xe,ur=Se[10]*xe,Sr=Se[11]*xe;for(const zr of se){const Cr=[],dr=[];for(const ir of zr){const nn=ir.x,Xr=ir.y,an=Se[0]*nn+Se[4]*Xr+Se[12],Hr=Se[1]*nn+Se[5]*Xr+Se[13],vn=Se[2]*nn+Se[6]*Xr+Se[14],Ai=Se[3]*nn+Se[7]*Xr+Se[15],si=vn+yt,Da=Ai+At,Fs=an+Zt,wo=Hr+gr,ka=vn+ur,Ca=Ai+Sr,zi=new p((an+je)/Da,(Hr+We)/Da);zi.z=si/Da,Cr.push(zi);const Xa=new p(Fs/Ca,wo/Ca);Xa.z=ka/Ca,dr.push(Xa)}Fe.push(Cr),ct.push(dr)}return[Fe,ct]})(v,W,z,T);return(function(se,ye,xe){let Se=1/0;YR(xe,ye)&&(Se=EL(xe,ye[0]));for(let Fe=0;Fe<ye.length;Fe++){const ct=ye[Fe],je=se[Fe];for(let We=0;We<ct.length-1;We++){const yt=ct[We],At=[yt,ct[We+1],je[We+1],je[We],yt];Sm(xe,At)&&(Se=Math.min(Se,EL(xe,At)))}}return Se!==1/0&&Se})(ae[0],ae[1],Q)}}function Jy(f,o){return f.x*o.x+f.y*o.y}function EL(f,o){if(f.length===1){let c=0;const m=o[c++];let v;for(;!v||m.equals(v);)if(v=o[c++],!v)return 1/0;for(;c<o.length;c++){const x=o[c],w=f[0],T=v.sub(m),L=x.sub(m),z=w.sub(m),W=Jy(T,T),Q=Jy(T,L),ae=Jy(L,L),se=Jy(z,T),ye=Jy(z,L),xe=W*ae-Q*Q,Se=(ae*se-Q*ye)/xe,Fe=(W*ye-Q*se)/xe,ct=m.z*(1-Se-Fe)+v.z*Se+x.z*Fe;if(isFinite(ct))return ct}return 1/0}{let c=1/0;for(const m of o)c=Math.min(c,m.z);return c}}const tY=Mi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rY}=tY,nY=Mi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:iY}=nY,aY=Math.cos(Math.PI/180*37.5),CL=Math.pow(2,14)/.5;class $w{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=o.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((c=>{this.gradients[c.id]={}})),this.layoutVertexArray=new St,this.layoutVertexArray2=new ot,this.indexArray=new rr,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Gr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(o,c,m){this.hasDependencies=Zb("line",this.layers,c)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),x=!v.isConstant(),w=[];for(const{feature:T,id:L,index:z,sourceLayerIndex:W}of o){const Q=this.layers[0]._featureFilter.needGeometry,ae=wf(T,Q);if(!this.layers[0]._featureFilter.filter(new Hn(this.zoom),ae,m))continue;const se=x?v.evaluate(ae,{},m):void 0,ye={id:L,properties:T.properties,type:T.type,sourceLayerIndex:W,index:z,geometry:Q?ae.geometry:xf(T),patterns:{},dashes:{},sortKey:se};w.push(ye)}x&&w.sort(((T,L)=>T.sortKey-L.sortKey));for(const T of w){const{geometry:L,index:z,sourceLayerIndex:W}=T;this.hasDependencies?(Zb("line",this.layers,c)?kw("line",this.layers,T,{zoom:this.zoom},c):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,T,this.zoom,c),this.patternFeatures.push(T)):this.addFeature(T,L,z,m,{},{},c.subdivisionGranularity),c.featureIndex.insert(o[z].feature,L,z,W,this.index)}}update(o,c,m,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,{imagePositions:m,dashPositions:v})}addFeatures(o,c,m,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,c,m,v,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,iY)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,rY),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,m,v,x,w,T){const L=this.layers[0].layout,z=L.get("line-join").evaluate(o,{}),W=L.get("line-cap"),Q=L.get("line-miter-limit"),ae=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const se of c)this.addLine(se,o,z,W,Q,ae,v,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,m,{imagePositions:x,dashPositions:w,canonical:v})}addLine(o,c,m,v,x,w,T,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o=ip(o,T?L.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let je=0;je<o.length-1;je++)this.totalDistance+=o[je].dist(o[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=Ky.types[c.type]==="Polygon";let W=o.length;for(;W>=2&&o[W-1].equals(o[W-2]);)W--;let Q=0;for(;Q<W-1&&o[Q].equals(o[Q+1]);)Q++;if(W<(z?3:2))return;m==="bevel"&&(x=1.05);const ae=this.overscaling<=16?122880/(512*this.overscaling):0,se=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray);let ye,xe,Se,Fe,ct;this.e1=this.e2=-1,z&&(ye=o[W-2],ct=o[Q].sub(ye)._unit()._perp());for(let je=Q;je<W;je++){if(Se=je===W-1?z?o[Q+1]:void 0:o[je+1],Se&&o[je].equals(Se))continue;ct&&(Fe=ct),ye&&(xe=ye),ye=o[je],ct=Se?Se.sub(ye)._unit()._perp():Fe,Fe=Fe||ct;let We=Fe.add(ct);We.x===0&&We.y===0||We._unit();const yt=Fe.x*ct.x+Fe.y*ct.y,At=We.x*ct.x+We.y*ct.y,Zt=At!==0?1/At:1/0,gr=2*Math.sqrt(2-2*At),ur=At<aY&&xe&&Se,Sr=Fe.x*ct.y-Fe.y*ct.x>0;if(ur&&je>Q){const dr=ye.dist(xe);if(dr>2*ae){const ir=ye.sub(ye.sub(xe)._mult(ae/dr)._round());this.updateDistance(xe,ir),this.addCurrentVertex(ir,Fe,0,0,se),xe=ir}}const zr=xe&&Se;let Cr=zr?m:z?"butt":v;if(zr&&Cr==="round"&&(Zt<w?Cr="miter":Zt<=2&&(Cr="fakeround")),Cr==="miter"&&Zt>x&&(Cr="bevel"),Cr==="bevel"&&(Zt>2&&(Cr="flipbevel"),Zt<x&&(Cr="miter")),xe&&this.updateDistance(xe,ye),Cr==="miter")We._mult(Zt),this.addCurrentVertex(ye,We,0,0,se);else if(Cr==="flipbevel"){if(Zt>100)We=ct.mult(-1);else{const dr=Zt*Fe.add(ct).mag()/Fe.sub(ct).mag();We._perp()._mult(dr*(Sr?-1:1))}this.addCurrentVertex(ye,We,0,0,se),this.addCurrentVertex(ye,We.mult(-1),0,0,se)}else if(Cr==="bevel"||Cr==="fakeround"){const dr=-Math.sqrt(Zt*Zt-1),ir=Sr?dr:0,nn=Sr?0:dr;if(xe&&this.addCurrentVertex(ye,Fe,ir,nn,se),Cr==="fakeround"){const Xr=Math.round(180*gr/Math.PI/20);for(let an=1;an<Xr;an++){let Hr=an/Xr;if(Hr!==.5){const Ai=Hr-.5;Hr+=Hr*Ai*(Hr-1)*((1.0904+yt*(yt*(3.55645-1.43519*yt)-3.2452))*Ai*Ai+(.848013+yt*(.215638*yt-1.06021)))}const vn=ct.sub(Fe)._mult(Hr)._add(Fe)._unit()._mult(Sr?-1:1);this.addHalfVertex(ye,vn.x,vn.y,!1,Sr,0,se)}}Se&&this.addCurrentVertex(ye,ct,-ir,-nn,se)}else if(Cr==="butt")this.addCurrentVertex(ye,We,0,0,se);else if(Cr==="square"){const dr=xe?1:-1;this.addCurrentVertex(ye,We,dr,dr,se)}else Cr==="round"&&(xe&&(this.addCurrentVertex(ye,Fe,0,0,se),this.addCurrentVertex(ye,Fe,1,1,se,!0)),Se&&(this.addCurrentVertex(ye,ct,-1,-1,se,!0),this.addCurrentVertex(ye,ct,0,0,se)));if(ur&&je<W-1){const dr=ye.dist(Se);if(dr>2*ae){const ir=ye.add(Se.sub(ye)._mult(ae/dr)._round());this.updateDistance(ye,ir),this.addCurrentVertex(ir,ct,0,0,se),ye=ir}}}}addCurrentVertex(o,c,m,v,x,w=!1){const T=c.y*v-c.x,L=-c.y-c.x*v;this.addHalfVertex(o,c.x+c.y*m,c.y-c.x*m,w,!1,m,x),this.addHalfVertex(o,T,L,w,!0,-v,x),this.distance>CL/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,m,v,x,w))}addHalfVertex({x:o,y:c},m,v,x,w,T,L){const z=.5*(this.lineClips?this.scaledDistance*(CL-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(c<<1)+(w?1:0),Math.round(63*m)+128,Math.round(63*v)+128,1+(T===0?0:T<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,W,this.e2),L.primitiveLength++),w?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}hasLineDasharray(o){for(const c of o){const m=c.paint.get("line-dasharray");if(m&&!m.isConstant())return!0}return!1}addLineDashDependencies(o,c,m,v){for(const x of o){const w=x.paint.get("line-dasharray");if(!w||w.value.kind==="constant")continue;const T=x.layout.get("line-cap")==="round",L={dasharray:w.value.evaluate({zoom:m-1},c,{}),round:T},z={dasharray:w.value.evaluate({zoom:m},c,{}),round:T},W={dasharray:w.value.evaluate({zoom:m+1},c,{}),round:T},Q=`${L.dasharray.join(",")},${L.round}`,ae=`${z.dasharray.join(",")},${z.round}`,se=`${W.dasharray.join(",")},${W.round}`;v.dashDependencies[Q]=L,v.dashDependencies[ae]=z,v.dashDependencies[se]=W,c.dashes[x.id]={min:Q,mid:ae,max:se}}}}let AL,TL;pt("LineBucket",$w,{omit:["layers","patternFeatures"]});var PL={get paint(){return TL=TL||new ta({"line-opacity":new en(Rt.paint_line["line-opacity"]),"line-color":new en(Rt.paint_line["line-color"]),"line-translate":new rn(Rt.paint_line["line-translate"]),"line-translate-anchor":new rn(Rt.paint_line["line-translate-anchor"]),"line-width":new en(Rt.paint_line["line-width"]),"line-gap-width":new en(Rt.paint_line["line-gap-width"]),"line-offset":new en(Rt.paint_line["line-offset"]),"line-blur":new en(Rt.paint_line["line-blur"]),"line-dasharray":new xo(Rt.paint_line["line-dasharray"]),"line-pattern":new xo(Rt.paint_line["line-pattern"]),"line-gradient":new za(Rt.paint_line["line-gradient"])})},get layout(){return AL=AL||new ta({"line-cap":new rn(Rt.layout_line["line-cap"]),"line-join":new en(Rt.layout_line["line-join"]),"line-miter-limit":new rn(Rt.layout_line["line-miter-limit"]),"line-round-limit":new rn(Rt.layout_line["line-round-limit"]),"line-sort-key":new en(Rt.layout_line["line-sort-key"])})}};class oY extends en{possiblyEvaluate(o,c){return c=new Hn(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,m,v){return c=It({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,m,v)}}let Jb;class sY extends oa{constructor(o,c){super(o,PL,c),this.gradientVersion=0,Jb||(Jb=new oY(PL.paint.properties["line-width"].specification),Jb.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!(function(m){return m._styleExpression!==void 0})(c)&&c._styleExpression.expression instanceof Ot,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=Jb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new $w(o)}queryRadius(o){const c=o,m=IL(Cm("line-width",this,c),Cm("line-gap-width",this,c)),v=Cm("line-offset",this,c);return m/2+Math.abs(v)+Hb(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:m,geometry:v,transform:x,pixelsToTileUnits:w}){const T=Wb(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),L=w/2*IL(this.paint.get("line-width").evaluate(c,m),this.paint.get("line-gap-width").evaluate(c,m)),z=this.paint.get("line-offset").evaluate(c,m);return z&&(v=(function(W,Q){const ae=[];for(let se=0;se<W.length;se++){const ye=mK(W[se]),xe=[];for(let Se=0;Se<ye.length;Se++){const Fe=ye[Se],ct=ye[Se-1],je=ye[Se+1],We=Se===0?new p(0,0):Fe.sub(ct)._unit()._perp(),yt=Se===ye.length-1?new p(0,0):je.sub(Fe)._unit()._perp(),At=We._add(yt)._unit(),Zt=At.x*yt.x+At.y*yt.y;Zt!==0&&At._mult(1/Zt),xe.push(At._mult(Q)._add(Fe))}ae.push(xe)}return ae})(v,z*w)),(function(W,Q,ae){for(let se=0;se<Q.length;se++){const ye=Q[se];if(W.length>=3){for(let xe=0;xe<ye.length;xe++)if(Em(W,ye[xe]))return!0}if(hK(W,ye,ae))return!0}return!1})(T,v,L)}isTileClipped(){return!0}}function IL(f,o){return o>0?o+2*f:f}const lY=Mi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uY=Mi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Mi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cY=Mi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Mi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ML=Mi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),fY=Mi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function hY(f,o,c){return f.sections.forEach((m=>{m.text=(function(v,x,w){const T=x.layout.get("text-transform").evaluate(w,{});return T==="uppercase"?v=v.toLocaleUpperCase():T==="lowercase"&&(v=v.toLocaleLowerCase()),Ii.applyArabicShaping&&(v=Ii.applyArabicShaping(v)),v})(m.text,o,c)})),f}Mi([{name:"triangle",components:3,type:"Uint16"}]),Mi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Mi([{type:"Float32",name:"offsetX"}]),Mi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Mi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Yo=24;const Qy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},dY={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},pY={40:!0};function OL(f,o,c,m,v,x){if("fontStack"in o){const w=c[o.fontStack],T=w&&w[f];return T?T.metrics.advance*o.scale+v:0}{const w=m[o.imageName];return w?w.displaySize[0]*o.scale*Yo/x+v:0}}function RL(f,o,c,m){const v=Math.pow(f-o,2);return m?f<o?v/2:2*v:v+Math.abs(c)*c}function mY(f,o,c){let m=0;return f===10&&(m-=1e4),c&&(m+=150),f!==40&&f!==65288||(m+=50),o!==41&&o!==65289||(m+=50),m}function LL(f,o,c,m,v,x){let w=null,T=RL(o,c,v,x);for(const L of m){const z=RL(o-L.x,c,v,x)+L.badness;z<=T&&(w=L,T=z)}return{index:f,x:o,priorBreak:w,badness:T}}function DL(f){return f?DL(f.priorBreak).concat(f.index):[]}class Im{constructor(o="",c=[],m=[]){this.text=o,this.sections=c,this.sectionIndex=m,this.imageSectionID=null}static fromFeature(o,c){const m=new Im;for(let v=0;v<o.sections.length;v++){const x=o.sections[v];x.image?m.addImageSection(x):m.addTextSection(x,c)}return m}length(){return[...this.text].length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}verticalizePunctuation(){this.text=(function(o){let c="",m={premature:!0,value:void 0};const v=o[Symbol.iterator]();let x=v.next();const w=o[Symbol.iterator]();w.next();let T=w.next();for(;!x.done;)c+=!T.done&&xn(T.value.codePointAt(0))&&!Qy[T.value]||!m.premature&&xn(m.value.codePointAt(0))&&!Qy[m.value]||!Qy[x.value]?x.value:Qy[x.value],m={value:x.value,premature:!1},x=v.next(),T=w.next();return c})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const o=this.text.match(/^\s*/),c=o?o[0].length:0,m=this.text.match(/\S\s*$/),v=m?m[0].length-1:0;this.text=this.text.substring(c,this.text.length-v),this.sectionIndex=this.sectionIndex.slice(c,this.sectionIndex.length-v)}substring(o,c){const m=[...this.text].slice(o,c).join(""),v=this.sectionIndex.slice(o,c);return new Im(m,this.sections,v)}toCodeUnitIndex(o){return[...this.text].slice(0,o).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,c)=>Math.max(o,this.sections[c].scale)),0)}getMaxImageSize(o){let c=0,m=0;for(let v=0;v<this.length();v++){const x=this.getSection(v);if("imageName"in x){const w=o[x.imageName];if(!w)continue;const T=w.displaySize;c=Math.max(c,T[0]),m=Math.max(m,T[1])}}return{maxImageWidth:c,maxImageHeight:m}}addTextSection(o,c){this.text+=o.text,this.sections.push({scale:o.scale||1,verticalAlign:o.verticalAlign||"bottom",fontStack:o.fontStack||c});const m=this.sections.length-1;this.sectionIndex.push(...[...o.text].map((()=>m)))}addImageSection(o){const c=o.image?o.image.name:"";if(c.length===0)return void dt("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push({scale:1,verticalAlign:o.verticalAlign||"bottom",imageName:c}),this.sectionIndex.push(this.sections.length-1)):dt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(o,c,m,v,x){const w=[],T=this.determineAverageLineWidth(o,c,m,v,x),L=this.hasZeroWidthSpaces();let z=0,W=0;const Q=this.text[Symbol.iterator]();let ae=Q.next();const se=this.text[Symbol.iterator]();se.next();let ye=se.next();const xe=this.text[Symbol.iterator]();xe.next(),xe.next();let Se=xe.next();for(;!ae.done;){const Fe=this.getSection(W),ct=ae.value.codePointAt(0);if(pn(ct)||(z+=OL(ct,Fe,m,v,o,x)),!ye.done){const je=Ir(ct),We=ye.value.codePointAt(0);(dY[ct]||je||"imageName"in Fe||!Se.done&&pY[We])&&w.push(LL(W+1,z,T,w,mY(ct,We,je&&L),!1))}W++,ae=Q.next(),ye=se.next(),Se=xe.next()}return DL(LL(this.length(),z,T,w,0,!0))}determineAverageLineWidth(o,c,m,v,x){let w=0,T=0;for(const L of this.text){const z=this.getSection(T);w+=OL(L.codePointAt(0),z,m,v,o,x),T++}return w/Math.max(1,Math.ceil(w/c))}}const qw=4294967296,kL=1/qw,FL=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Qb{constructor(o=new Uint8Array(16)){this.buf=ArrayBuffer.isView(o)?o:new Uint8Array(o),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(o,c,m=this.length){for(;this.pos<m;){const v=this.readVarint(),x=v>>3,w=this.pos;this.type=7&v,o(x,c,this),this.pos===w&&this.skip(v)}return c}readMessage(o,c){return this.readFields(o,c,this.readVarint()+this.pos)}readFixed32(){const o=this.dataView.getUint32(this.pos,!0);return this.pos+=4,o}readSFixed32(){const o=this.dataView.getInt32(this.pos,!0);return this.pos+=4,o}readFixed64(){const o=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*qw;return this.pos+=8,o}readSFixed64(){const o=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*qw;return this.pos+=8,o}readFloat(){const o=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,o}readDouble(){const o=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,o}readVarint(o){const c=this.buf;let m,v;return v=c[this.pos++],m=127&v,v<128?m:(v=c[this.pos++],m|=(127&v)<<7,v<128?m:(v=c[this.pos++],m|=(127&v)<<14,v<128?m:(v=c[this.pos++],m|=(127&v)<<21,v<128?m:(v=c[this.pos],m|=(15&v)<<28,(function(x,w,T){const L=T.buf;let z,W;if(W=L[T.pos++],z=(112&W)>>4,W<128||(W=L[T.pos++],z|=(127&W)<<3,W<128)||(W=L[T.pos++],z|=(127&W)<<10,W<128)||(W=L[T.pos++],z|=(127&W)<<17,W<128)||(W=L[T.pos++],z|=(127&W)<<24,W<128)||(W=L[T.pos++],z|=(1&W)<<31,W<128))return Mm(x,z,w);throw new Error("Expected varint not more than 10 bytes")})(m,o,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const o=this.readVarint();return o%2==1?(o+1)/-2:o/2}readBoolean(){return!!this.readVarint()}readString(){const o=this.readVarint()+this.pos,c=this.pos;return this.pos=o,o-c>=12&&FL?FL.decode(this.buf.subarray(c,o)):(function(m,v,x){let w="",T=v;for(;T<x;){const L=m[T];let z,W,Q,ae=null,se=L>239?4:L>223?3:L>191?2:1;if(T+se>x)break;se===1?L<128&&(ae=L):se===2?(z=m[T+1],(192&z)==128&&(ae=(31&L)<<6|63&z,ae<=127&&(ae=null))):se===3?(z=m[T+1],W=m[T+2],(192&z)==128&&(192&W)==128&&(ae=(15&L)<<12|(63&z)<<6|63&W,(ae<=2047||ae>=55296&&ae<=57343)&&(ae=null))):se===4&&(z=m[T+1],W=m[T+2],Q=m[T+3],(192&z)==128&&(192&W)==128&&(192&Q)==128&&(ae=(15&L)<<18|(63&z)<<12|(63&W)<<6|63&Q,(ae<=65535||ae>=1114112)&&(ae=null))),ae===null?(ae=65533,se=1):ae>65535&&(ae-=65536,w+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),w+=String.fromCharCode(ae),T+=se}return w})(this.buf,c,o)}readBytes(){const o=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,o);return this.pos=o,c}readPackedVarint(o=[],c){const m=this.readPackedEnd();for(;this.pos<m;)o.push(this.readVarint(c));return o}readPackedSVarint(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readSVarint());return o}readPackedBoolean(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readBoolean());return o}readPackedFloat(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readFloat());return o}readPackedDouble(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readDouble());return o}readPackedFixed32(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readFixed32());return o}readPackedSFixed32(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readSFixed32());return o}readPackedFixed64(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readFixed64());return o}readPackedSFixed64(o=[]){const c=this.readPackedEnd();for(;this.pos<c;)o.push(this.readSFixed64());return o}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(o){const c=7&o;if(c===0)for(;this.buf[this.pos++]>127;);else if(c===2)this.pos=this.readVarint()+this.pos;else if(c===5)this.pos+=4;else{if(c!==1)throw new Error(`Unimplemented type: ${c}`);this.pos+=8}}writeTag(o,c){this.writeVarint(o<<3|c)}realloc(o){let c=this.length||16;for(;c<this.pos+o;)c*=2;if(c!==this.length){const m=new Uint8Array(c);m.set(this.buf),this.buf=m,this.dataView=new DataView(m.buffer),this.length=c}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(o){this.realloc(4),this.dataView.setInt32(this.pos,o,!0),this.pos+=4}writeSFixed32(o){this.realloc(4),this.dataView.setInt32(this.pos,o,!0),this.pos+=4}writeFixed64(o){this.realloc(8),this.dataView.setInt32(this.pos,-1&o,!0),this.dataView.setInt32(this.pos+4,Math.floor(o*kL),!0),this.pos+=8}writeSFixed64(o){this.realloc(8),this.dataView.setInt32(this.pos,-1&o,!0),this.dataView.setInt32(this.pos+4,Math.floor(o*kL),!0),this.pos+=8}writeVarint(o){(o=+o||0)>268435455||o<0?(function(c,m){let v,x;if(c>=0?(v=c%4294967296|0,x=c/4294967296|0):(v=~(-c%4294967296),x=~(-c/4294967296),4294967295^v?v=v+1|0:(v=0,x=x+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),(function(w,T,L){L.buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,w>>>=7,L.buf[L.pos++]=127&w|128,L.buf[L.pos]=127&(w>>>=7)})(v,0,m),(function(w,T){const L=(7&w)<<4;T.buf[T.pos++]|=L|((w>>>=3)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w|((w>>>=7)?128:0),w&&(T.buf[T.pos++]=127&w)))))})(x,m)})(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))}writeSVarint(o){this.writeVarint(o<0?2*-o-1:2*o)}writeBoolean(o){this.writeVarint(+o)}writeString(o){o=String(o),this.realloc(4*o.length),this.pos++;const c=this.pos;this.pos=(function(v,x,w){for(let T,L,z=0;z<x.length;z++){if(T=x.charCodeAt(z),T>55295&&T<57344){if(!L){T>56319||z+1===x.length?(v[w++]=239,v[w++]=191,v[w++]=189):L=T;continue}if(T<56320){v[w++]=239,v[w++]=191,v[w++]=189,L=T;continue}T=L-55296<<10|T-56320|65536,L=null}else L&&(v[w++]=239,v[w++]=191,v[w++]=189,L=null);T<128?v[w++]=T:(T<2048?v[w++]=T>>6|192:(T<65536?v[w++]=T>>12|224:(v[w++]=T>>18|240,v[w++]=T>>12&63|128),v[w++]=T>>6&63|128),v[w++]=63&T|128)}return w})(this.buf,o,this.pos);const m=this.pos-c;m>=128&&NL(c,m,this),this.pos=c-1,this.writeVarint(m),this.pos+=m}writeFloat(o){this.realloc(4),this.dataView.setFloat32(this.pos,o,!0),this.pos+=4}writeDouble(o){this.realloc(8),this.dataView.setFloat64(this.pos,o,!0),this.pos+=8}writeBytes(o){const c=o.length;this.writeVarint(c),this.realloc(c);for(let m=0;m<c;m++)this.buf[this.pos++]=o[m]}writeRawMessage(o,c){this.pos++;const m=this.pos;o(c,this);const v=this.pos-m;v>=128&&NL(m,v,this),this.pos=m-1,this.writeVarint(v),this.pos+=v}writeMessage(o,c,m){this.writeTag(o,2),this.writeRawMessage(c,m)}writePackedVarint(o,c){c.length&&this.writeMessage(o,gY,c)}writePackedSVarint(o,c){c.length&&this.writeMessage(o,yY,c)}writePackedBoolean(o,c){c.length&&this.writeMessage(o,_Y,c)}writePackedFloat(o,c){c.length&&this.writeMessage(o,vY,c)}writePackedDouble(o,c){c.length&&this.writeMessage(o,bY,c)}writePackedFixed32(o,c){c.length&&this.writeMessage(o,xY,c)}writePackedSFixed32(o,c){c.length&&this.writeMessage(o,wY,c)}writePackedFixed64(o,c){c.length&&this.writeMessage(o,SY,c)}writePackedSFixed64(o,c){c.length&&this.writeMessage(o,EY,c)}writeBytesField(o,c){this.writeTag(o,2),this.writeBytes(c)}writeFixed32Field(o,c){this.writeTag(o,5),this.writeFixed32(c)}writeSFixed32Field(o,c){this.writeTag(o,5),this.writeSFixed32(c)}writeFixed64Field(o,c){this.writeTag(o,1),this.writeFixed64(c)}writeSFixed64Field(o,c){this.writeTag(o,1),this.writeSFixed64(c)}writeVarintField(o,c){this.writeTag(o,0),this.writeVarint(c)}writeSVarintField(o,c){this.writeTag(o,0),this.writeSVarint(c)}writeStringField(o,c){this.writeTag(o,2),this.writeString(c)}writeFloatField(o,c){this.writeTag(o,5),this.writeFloat(c)}writeDoubleField(o,c){this.writeTag(o,1),this.writeDouble(c)}writeBooleanField(o,c){this.writeVarintField(o,+c)}}function Mm(f,o,c){return c?4294967296*o+(f>>>0):4294967296*(o>>>0)+(f>>>0)}function NL(f,o,c){const m=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(m);for(let v=c.pos-1;v>=f;v--)c.buf[v+m]=c.buf[v]}function gY(f,o){for(let c=0;c<f.length;c++)o.writeVarint(f[c])}function yY(f,o){for(let c=0;c<f.length;c++)o.writeSVarint(f[c])}function vY(f,o){for(let c=0;c<f.length;c++)o.writeFloat(f[c])}function bY(f,o){for(let c=0;c<f.length;c++)o.writeDouble(f[c])}function _Y(f,o){for(let c=0;c<f.length;c++)o.writeBoolean(f[c])}function xY(f,o){for(let c=0;c<f.length;c++)o.writeFixed32(f[c])}function wY(f,o){for(let c=0;c<f.length;c++)o.writeSFixed32(f[c])}function SY(f,o){for(let c=0;c<f.length;c++)o.writeFixed64(f[c])}function EY(f,o){for(let c=0;c<f.length;c++)o.writeSFixed64(f[c])}function CY(f,o,c){f===1&&c.readMessage(AY,o)}function AY(f,o,c){if(f===3){const{id:m,bitmap:v,width:x,height:w,left:T,top:L,advance:z}=c.readMessage(TY,{});o.push({id:m,bitmap:new Uy({width:x+6,height:w+6},v),metrics:{width:x,height:w,left:T,top:L,advance:z}})}}function TY(f,o,c){f===1?o.id=c.readVarint():f===2?o.bitmap=c.readBytes():f===3?o.width=c.readVarint():f===4?o.height=c.readVarint():f===5?o.left=c.readSVarint():f===6?o.top=c.readSVarint():f===7&&(o.advance=c.readVarint())}function BL(f){let o=0,c=0;for(const w of f)o+=w.w*w.h,c=Math.max(c,w.w);f.sort(((w,T)=>T.h-w.h));const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let v=0,x=0;for(const w of f)for(let T=m.length-1;T>=0;T--){const L=m[T];if(!(w.w>L.w||w.h>L.h)){if(w.x=L.x,w.y=L.y,x=Math.max(x,w.y+w.h),v=Math.max(v,w.x+w.w),w.w===L.w&&w.h===L.h){const z=m.pop();z&&T<m.length&&(m[T]=z)}else w.h===L.h?(L.x+=w.w,L.w-=w.w):w.w===L.w?(L.y+=w.h,L.h-=w.h):(m.push({x:L.x+w.w,y:L.y,w:L.w-w.w,h:w.h}),L.y+=w.h,L.h-=w.h);break}}return{w:v,h:x,fill:o/(v*x)||0}}class Uw{constructor(o,{pixelRatio:c,version:m,stretchX:v,stretchY:x,content:w,textFitWidth:T,textFitHeight:L}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=v,this.stretchY=x,this.content=w,this.version=m,this.textFitWidth=T,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class jL{constructor(o,c){const m={},v={};this.haveRenderCallbacks=[];const x=[];this.addImages(o,m,x),this.addImages(c,v,x);const{w,h:T}=BL(x),L=new jl({width:w||1,height:T||1});for(const z in o){const W=o[z],Q=m[z].paddedRect;jl.copy(W.data,L,{x:0,y:0},{x:Q.x+1,y:Q.y+1},W.data)}for(const z in c){const W=c[z],Q=v[z].paddedRect,ae=Q.x+1,se=Q.y+1,ye=W.data.width,xe=W.data.height;jl.copy(W.data,L,{x:0,y:0},{x:ae,y:se},W.data),jl.copy(W.data,L,{x:0,y:xe-1},{x:ae,y:se-1},{width:ye,height:1}),jl.copy(W.data,L,{x:0,y:0},{x:ae,y:se+xe},{width:ye,height:1}),jl.copy(W.data,L,{x:ye-1,y:0},{x:ae-1,y:se},{width:1,height:xe}),jl.copy(W.data,L,{x:0,y:0},{x:ae+ye,y:se},{width:1,height:xe})}this.image=L,this.iconPositions=m,this.patternPositions=v}addImages(o,c,m){for(const v in o){const x=o[v],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};m.push(w),c[v]=new Uw(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in o.updatedImages)this.patchUpdatedImage(this.iconPositions[m],o.getImage(m),c),this.patchUpdatedImage(this.patternPositions[m],o.getImage(m),c)}patchUpdatedImage(o,c,m){if(!o||!c||o.version===c.version)return;o.version=c.version;const[v,x]=o.tl;m.update(c.data,void 0,{x:v,y:x})}}var ed;function e_(f,o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye){const xe=Im.fromFeature(f,v);let Se;Q===u.az.vertical&&xe.verticalizePunctuation();let Fe=xe.determineLineBreaks(z,x,o,m,se);const{processBidirectionalText:ct,processStyledBidirectionalText:je}=Ii;if(ct&&xe.sections.length===1){Se=[],Fe=Fe.map((Zt=>xe.toCodeUnitIndex(Zt)));const At=ct(xe.toString(),Fe);for(const Zt of At){const gr=[...Zt].map((()=>0));Se.push(new Im(Zt,xe.sections,gr))}}else if(je){Se=[],Fe=Fe.map((ur=>xe.toCodeUnitIndex(ur)));let At=0;const Zt=[];for(const ur of xe.text)Zt.push(...Array(ur.length).fill(xe.sectionIndex[At])),At++;const gr=je(xe.text,Zt,Fe);for(const ur of gr){const Sr=[];let zr="";for(const Cr of ur[0])Sr.push(ur[1][zr.length]),zr+=Cr;Se.push(new Im(ur[0],xe.sections,Sr))}}else Se=(function(At,Zt){const gr=[];let ur=0;for(const Sr of Zt)gr.push(At.substring(ur,Sr)),ur=Sr;return ur<At.length()&&gr.push(At.substring(ur,At.length())),gr})(xe,Fe);const We=[],yt={positionedLines:We,text:xe.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:Q,iconsInText:!1,verticalizable:!1};return(function(At,Zt,gr,ur,Sr,zr,Cr,dr,ir,nn,Xr,an){let Hr=0,vn=0,Ai=0,si=0;const Da=dr==="right"?1:dr==="left"?0:.5,Fs=Yo/an;let wo=0;for(const zi of Sr){zi.trim();const Xa=zi.getMaxScale(),io={positionedGlyphs:[],lineOffset:0};At.positionedLines[wo]=io;const ma=io.positionedGlyphs;let zl=0;if(!zi.length()){vn+=zr,++wo;continue}const Ns=PY(ur,zi,Fs);let $l=0;for(const es of zi.text){const $a=zi.getSection($l),So=es.codePointAt(0),Ka=IY(ir,Xr,So),ts={glyph:So,imageName:null,x:Hr,y:vn+-17,vertical:Ka,scale:1,fontStack:"",sectionIndex:zi.getSectionIndex($l),metrics:null,rect:null};let dh;if("fontStack"in $a){if(dh=MY($a,So,Ka,Ns,Zt,gr),!dh)continue;ts.fontStack=$a.fontStack}else{if(At.iconsInText=!0,$a.scale*=Fs,dh=OY($a,Ka,Xa,Ns,ur),!dh)continue;zl=Math.max(zl,dh.imageOffset),ts.imageName=$a.imageName}const{rect:Bc,metrics:ov,baselineOffset:ad}=dh;ts.y+=ad,ts.scale=$a.scale,ts.metrics=ov,ts.rect=Bc,ma.push(ts),Ka?(At.verticalizable=!0,Hr+=("imageName"in $a?ov.advance:Yo)*$a.scale+nn):Hr+=ov.advance*$a.scale+nn,$l++}ma.length!==0&&(Ai=Math.max(Hr-nn,Ai),RY(ma,0,ma.length-1,Da)),Hr=0,io.lineOffset=Math.max(zl,(Xa-1)*Yo);const uc=zr*Xa+zl;vn+=uc,si=Math.max(uc,si),++wo}const{horizontalAlign:ka,verticalAlign:Ca}=Vw(Cr);(function(zi,Xa,io,ma,zl,Ns,$l,uc,es){const $a=(Xa-io)*zl;let So=0;So=Ns!==$l?-uc*ma- -17:-ma*es*$l+.5*$l;for(const Ka of zi)for(const ts of Ka.positionedGlyphs)ts.x+=$a,ts.y+=So})(At.positionedLines,Da,ka,Ca,Ai,si,zr,vn,Sr.length),At.top+=-Ca*vn,At.bottom=At.top+vn,At.left+=-ka*Ai,At.right=At.left+Ai})(yt,o,c,m,Se,w,T,L,Q,z,ae,ye),!(function(At){for(const Zt of At)if(Zt.positionedGlyphs.length!==0)return!1;return!0})(We)&&yt}function Vw(f){let o=.5,c=.5;switch(f){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function PY(f,o,c){const m=o.getMaxScale()*Yo,{maxImageWidth:v,maxImageHeight:x}=o.getMaxImageSize(f),w=Math.max(m,x*c);return{verticalLineContentWidth:Math.max(m,v*c),horizontalLineContentHeight:w}}function zL(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function IY(f,o,c){return!(f===u.az.horizontal||!o&&!Sn(c)||o&&(pn(c)||(m=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function MY(f,o,c,m,v,x){const w=x[f.fontStack],T=(function(z,W,Q,ae){if(z&&z.rect)return z;const se=W[Q.fontStack],ye=se&&se[ae];return ye?{rect:null,metrics:ye.metrics}:null})(w&&w[o],v,f,o);if(T===null)return null;let L;if(c)L=m.verticalLineContentWidth-f.scale*Yo;else{const z=zL(f.verticalAlign);L=(m.horizontalLineContentHeight-f.scale*Yo)*z}return{rect:T.rect,metrics:T.metrics,baselineOffset:L}}function OY(f,o,c,m,v){const x=v[f.imageName];if(!x)return null;const w=x.paddedRect,T=x.displaySize,L={width:T[0],height:T[1],left:1,top:-3,advance:o?T[1]:T[0]};let z;if(o)z=m.verticalLineContentWidth-T[1]*f.scale;else{const W=zL(f.verticalAlign);z=(m.horizontalLineContentHeight-T[1]*f.scale)*W}return{rect:w,metrics:L,baselineOffset:z,imageOffset:(o?T[0]:T[1])*f.scale-Yo*c}}function RY(f,o,c,m){if(m===0)return;const v=f[c],x=(f[c].x+v.metrics.advance*v.scale)*m;for(let w=o;w<=c;w++)f[w].x-=x}function LY(f,o,c){const{horizontalAlign:m,verticalAlign:v}=Vw(c),x=o[0]-f.displaySize[0]*m,w=o[1]-f.displaySize[1]*v;return{image:f,top:w,bottom:w+f.displaySize[1],left:x,right:x+f.displaySize[0]}}function $L(f){var o,c;let m=f.left,v=f.top,x=f.right-m,w=f.bottom-v;const T=(o=f.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",L=(c=f.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",z=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(L==="proportional"){if(T==="stretchOnly"&&x/w<z||T==="proportional"){const W=Math.ceil(w*z);m*=W/x,x=W}}else if(T==="proportional"&&L==="stretchOnly"&&z!==0&&x/w>z){const W=Math.ceil(x/z);v*=W/w,w=W}return{x1:m,y1:v,x2:m+x,y2:v+w}}function qL(f,o,c,m,v,x){const w=f.image;let T;if(w.content){const Se=w.content,Fe=w.pixelRatio||1;T=[Se[0]/Fe,Se[1]/Fe,w.displaySize[0]-Se[2]/Fe,w.displaySize[1]-Se[3]/Fe]}const L=o.left*x,z=o.right*x;let W,Q,ae,se;c==="width"||c==="both"?(se=v[0]+L-m[3],Q=v[0]+z+m[1]):(se=v[0]+(L+z-w.displaySize[0])/2,Q=se+w.displaySize[0]);const ye=o.top*x,xe=o.bottom*x;return c==="height"||c==="both"?(W=v[1]+ye-m[0],ae=v[1]+xe+m[2]):(W=v[1]+(ye+xe-w.displaySize[1])/2,ae=W+w.displaySize[1]),{image:w,top:W,right:Q,bottom:ae,left:se,collisionPadding:T}}pt("ImagePosition",Uw),pt("ImageAtlas",jL),u.az=void 0,(ed=u.az||(u.az={}))[ed.none=0]="none",ed[ed.horizontal=1]="horizontal",ed[ed.vertical=2]="vertical",ed[ed.horizontalOnly=3]="horizontalOnly";const fh=128,td=32640;function UL(f,o){const{expression:c}=o;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Hn(f+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:v}=c;let x=0;for(;x<m.length&&m[x]<=f;)x++;x=Math.max(0,x-1);let w=x;for(;w<m.length&&m[w]<f+1;)w++;w=Math.min(m.length-1,w);const T=m[x],L=m[w];return c.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:L,interpolationType:v}:{kind:"camera",minZoom:T,maxZoom:L,minSize:c.evaluate(new Hn(T)),maxSize:c.evaluate(new Hn(L)),interpolationType:v}}}function Gw(f,o,c){let m="never";const v=f.get(o);return v?m=v:f.get(c)&&(m="always"),m}const DY=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function t_(f,o,c,m,v,x,w,T,L,z,W,Q,ae){const se=T?Math.min(td,Math.round(T[0])):0,ye=T?Math.min(td,Math.round(T[1])):0;f.emplaceBack(o,c,Math.round(32*m),Math.round(32*v),x,w,(se<<1)+(L?1:0),ye,16*z,16*W,256*Q,256*ae)}function Hw(f,o,c){f.emplaceBack(o.x,o.y,c),f.emplaceBack(o.x,o.y,c),f.emplaceBack(o.x,o.y,c),f.emplaceBack(o.x,o.y,c)}function kY(f){for(const o of f.sections)if(wi(o.text))return!0;return!1}class Ww{constructor(o){this.layoutVertexArray=new vt,this.indexArray=new rr,this.programConfigurations=o,this.segments=new Gr,this.dynamicLayoutVertexArray=new jt,this.opacityVertexArray=new nr,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,c,m,v){this.isEmpty()||(m&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,lY.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,uY.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,DY,!0),this.opacityVertexBuffer.itemSize=1),(m||v)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}pt("SymbolBuffers",Ww);class Zw{constructor(o,c,m){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new m,this.segments=new Gr,this.collisionVertexArray=new Jt}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,cY.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}pt("CollisionBuffers",Zw);class Om{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=UL(this.zoom,c["text-size"]),this.iconSizeData=UL(this.zoom,c["icon-size"]);const m=this.layers[0].layout,v=m.get("symbol-sort-key"),x=m.get("symbol-z-order");this.canOverlap=Gw(m,"text-overlap","text-allow-overlap")!=="never"||Gw(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map((w=>u.az[w]))),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=o.sourceID}createArrays(){this.text=new Ww(new ch(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new Ww(new ch(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new K,this.lineVertexArray=new te,this.symbolInstances=new V,this.textAnchorOffsets=new fe}calculateGlyphDependencies(o,c,m,v,x){for(const w of o)if(c[w.codePointAt(0)]=!0,(m||v)&&x){const T=Qy[w];T&&(c[T.codePointAt(0)]=!0)}}populate(o,c,m){const v=this.layers[0],x=v.layout,w=x.get("text-font"),T=x.get("text-field"),L=x.get("icon-image"),z=(T.value.kind!=="constant"||T.value.value instanceof tn&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),W=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,Q=x.get("symbol-sort-key");if(this.features=[],!z&&!W)return;const ae=c.iconDependencies,se=c.glyphDependencies,ye=c.availableImages,xe=new Hn(this.zoom);for(const{feature:Se,id:Fe,index:ct,sourceLayerIndex:je}of o){const We=v._featureFilter.needGeometry,yt=wf(Se,We);if(!v._featureFilter.filter(xe,yt,m))continue;let At,Zt;if(We||(yt.geometry=xf(Se)),z){const ur=v.getValueAndResolveTokens("text-field",yt,m,ye),Sr=tn.factory(ur),zr=this.hasRTLText=this.hasRTLText||kY(Sr);(!zr||Ii.getRTLTextPluginStatus()==="unavailable"||zr&&Ii.isParsed())&&(At=hY(Sr,v,yt))}if(W){const ur=v.getValueAndResolveTokens("icon-image",yt,m,ye);Zt=ur instanceof Lo?ur:Lo.fromString(ur)}if(!At&&!Zt)continue;const gr=this.sortFeaturesByKey?Q.evaluate(yt,{},m):void 0;if(this.features.push({id:Fe,text:At,icon:Zt,index:ct,sourceLayerIndex:je,geometry:yt.geometry,properties:Se.properties,type:Ky.types[Se.type],sortKey:gr}),Zt&&(ae[Zt.name]=!0),At){const ur=w.evaluate(yt,{},m).join(","),Sr=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.az.vertical)>=0;for(const zr of At.sections)if(zr.image)ae[zr.image.name]=!0;else{const Cr=Un(At.toString()),dr=zr.fontStack||ur,ir=se[dr]=se[dr]||{};this.calculateGlyphDependencies(zr.text,ir,Sr,this.allowVerticalPlacement,Cr)}}}x.get("symbol-placement")==="line"&&(this.features=(function(Se){const Fe={},ct={},je=[];let We=0;function yt(ur){je.push(Se[ur]),We++}function At(ur,Sr,zr){const Cr=ct[ur];return delete ct[ur],ct[Sr]=Cr,je[Cr].geometry[0].pop(),je[Cr].geometry[0]=je[Cr].geometry[0].concat(zr[0]),Cr}function Zt(ur,Sr,zr){const Cr=Fe[Sr];return delete Fe[Sr],Fe[ur]=Cr,je[Cr].geometry[0].shift(),je[Cr].geometry[0]=zr[0].concat(je[Cr].geometry[0]),Cr}function gr(ur,Sr,zr){const Cr=zr?Sr[0][Sr[0].length-1]:Sr[0][0];return`${ur}:${Cr.x}:${Cr.y}`}for(let ur=0;ur<Se.length;ur++){const Sr=Se[ur],zr=Sr.geometry,Cr=Sr.text?Sr.text.toString():null;if(!Cr){yt(ur);continue}const dr=gr(Cr,zr),ir=gr(Cr,zr,!0);if(dr in ct&&ir in Fe&&ct[dr]!==Fe[ir]){const nn=Zt(dr,ir,zr),Xr=At(dr,ir,je[nn].geometry);delete Fe[dr],delete ct[ir],ct[gr(Cr,je[Xr].geometry,!0)]=Xr,je[nn].geometry=null}else dr in ct?At(dr,ir,zr):ir in Fe?Zt(dr,ir,zr):(yt(ur),Fe[dr]=We-1,ct[ir]=We-1)}return je.filter((ur=>ur.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Se,Fe)=>Se.sortKey-Fe.sortKey))}update(o,c,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,{imagePositions:m}),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,{imagePositions:m}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const m=this.lineVertexArray.length;if(o.segment!==void 0){let v=o.dist(c[o.segment+1]),x=o.dist(c[o.segment]);const w={};for(let T=o.segment+1;T<c.length;T++)w[T]={x:c[T].x,y:c[T].y,tileUnitDistanceFromAnchor:v},T<c.length-1&&(v+=c[T+1].dist(c[T]));for(let T=o.segment||0;T>=0;T--)w[T]={x:c[T].x,y:c[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=c[T-1].dist(c[T]));for(let T=0;T<c.length;T++){const L=w[T];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(o,c,m,v,x,w,T,L,z,W,Q,ae){const se=o.indexArray,ye=o.layoutVertexArray,xe=o.segments.prepareSegment(4*c.length,ye,se,this.canOverlap?w.sortKey:void 0),Se=this.glyphOffsetArray.length,Fe=xe.vertexLength,ct=this.allowVerticalPlacement&&T===u.az.vertical?Math.PI/2:0,je=w.text&&w.text.sections;for(let We=0;We<c.length;We++){const{tl:yt,tr:At,bl:Zt,br:gr,tex:ur,pixelOffsetTL:Sr,pixelOffsetBR:zr,minFontScaleX:Cr,minFontScaleY:dr,glyphOffset:ir,isSDF:nn,sectionIndex:Xr}=c[We],an=xe.vertexLength,Hr=ir[1];t_(ye,L.x,L.y,yt.x,Hr+yt.y,ur.x,ur.y,m,nn,Sr.x,Sr.y,Cr,dr),t_(ye,L.x,L.y,At.x,Hr+At.y,ur.x+ur.w,ur.y,m,nn,zr.x,Sr.y,Cr,dr),t_(ye,L.x,L.y,Zt.x,Hr+Zt.y,ur.x,ur.y+ur.h,m,nn,Sr.x,zr.y,Cr,dr),t_(ye,L.x,L.y,gr.x,Hr+gr.y,ur.x+ur.w,ur.y+ur.h,m,nn,zr.x,zr.y,Cr,dr),Hw(o.dynamicLayoutVertexArray,L,ct),se.emplaceBack(an,an+2,an+1),se.emplaceBack(an+1,an+2,an+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ir[0]),We!==c.length-1&&Xr===c[We+1].sectionIndex||o.programConfigurations.populatePaintArrays(ye.length,w,w.index,{imagePositions:{},canonical:ae,formattedSection:je&&je[Xr]})}o.placedSymbolArray.emplaceBack(L.x,L.y,Se,this.glyphOffsetArray.length-Se,Fe,z,W,L.segment,m?m[0]:0,m?m[1]:0,v[0],v[1],T,0,!1,0,Q)}_addCollisionDebugVertex(o,c,m,v,x,w){return c.emplaceBack(0,0),o.emplaceBack(m.x,m.y,v,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,c,m,v,x,w,T){const L=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),z=L.vertexLength,W=x.layoutVertexArray,Q=x.collisionVertexArray,ae=T.anchorX,se=T.anchorY;this._addCollisionDebugVertex(W,Q,w,ae,se,new p(o,c)),this._addCollisionDebugVertex(W,Q,w,ae,se,new p(m,c)),this._addCollisionDebugVertex(W,Q,w,ae,se,new p(m,v)),this._addCollisionDebugVertex(W,Q,w,ae,se,new p(o,v)),L.vertexLength+=4;const ye=x.indexArray;ye.emplaceBack(z,z+1),ye.emplaceBack(z+1,z+2),ye.emplaceBack(z+2,z+3),ye.emplaceBack(z+3,z),L.primitiveLength+=4}addDebugCollisionBoxes(o,c,m,v){for(let x=o;x<c;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,v?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zw(Xt,ML.members,Or),this.iconCollisionBox=new Zw(Xt,ML.members,Or);for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,m,v,x,w,T,L,z){const W={};for(let Q=c;Q<m;Q++){const ae=o.get(Q);W.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.textFeatureIndex=ae.featureIndex;break}for(let Q=v;Q<x;Q++){const ae=o.get(Q);W.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalTextFeatureIndex=ae.featureIndex;break}for(let Q=w;Q<T;Q++){const ae=o.get(Q);W.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.iconFeatureIndex=ae.featureIndex;break}for(let Q=L;Q<z;Q++){const ae=o.get(Q);W.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},W.verticalIconFeatureIndex=ae.featureIndex;break}return W}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const m=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){const m=o.placedSymbolArray.get(c),v=m.vertexStartIndex+4*m.numGlyphs;for(let x=m.vertexStartIndex;x<v;x+=4)o.indexArray.emplaceBack(x,x+2,x+1),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(o),m=Math.cos(o),v=[],x=[],w=[];for(let T=0;T<this.symbolInstances.length;++T){w.push(T);const L=this.symbolInstances.get(T);v.push(0|Math.round(c*L.anchorX+m*L.anchorY)),x.push(L.featureIndex)}return w.sort(((T,L)=>v[T]-v[L]||x[L]-x[T])),w}addToSortKeyRanges(o,c){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===c?m.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const m=this.symbolInstances.get(c);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(((v,x,w)=>{v>=0&&w.indexOf(v)===x&&this.addIndicesForPlacedSymbol(this.text,v)})),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let VL,GL;pt("SymbolBucket",Om,{omit:["layers","collisionBoxArray","features","compareText"]}),Om.MAX_GLYPHS=65535,Om.addDynamicAttributes=Hw;var Xw={get paint(){return GL=GL||new ta({"icon-opacity":new en(Rt.paint_symbol["icon-opacity"]),"icon-color":new en(Rt.paint_symbol["icon-color"]),"icon-halo-color":new en(Rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new en(Rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new en(Rt.paint_symbol["icon-halo-blur"]),"icon-translate":new rn(Rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new rn(Rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new en(Rt.paint_symbol["text-opacity"]),"text-color":new en(Rt.paint_symbol["text-color"],{runtimeType:dn,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new en(Rt.paint_symbol["text-halo-color"]),"text-halo-width":new en(Rt.paint_symbol["text-halo-width"]),"text-halo-blur":new en(Rt.paint_symbol["text-halo-blur"]),"text-translate":new rn(Rt.paint_symbol["text-translate"]),"text-translate-anchor":new rn(Rt.paint_symbol["text-translate-anchor"])})},get layout(){return VL=VL||new ta({"symbol-placement":new rn(Rt.layout_symbol["symbol-placement"]),"symbol-spacing":new rn(Rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rn(Rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new en(Rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rn(Rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rn(Rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new rn(Rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new rn(Rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new rn(Rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rn(Rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new en(Rt.layout_symbol["icon-size"]),"icon-text-fit":new rn(Rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rn(Rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new en(Rt.layout_symbol["icon-image"]),"icon-rotate":new en(Rt.layout_symbol["icon-rotate"]),"icon-padding":new en(Rt.layout_symbol["icon-padding"]),"icon-keep-upright":new rn(Rt.layout_symbol["icon-keep-upright"]),"icon-offset":new en(Rt.layout_symbol["icon-offset"]),"icon-anchor":new en(Rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rn(Rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rn(Rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rn(Rt.layout_symbol["text-rotation-alignment"]),"text-field":new en(Rt.layout_symbol["text-field"]),"text-font":new en(Rt.layout_symbol["text-font"]),"text-size":new en(Rt.layout_symbol["text-size"]),"text-max-width":new en(Rt.layout_symbol["text-max-width"]),"text-line-height":new rn(Rt.layout_symbol["text-line-height"]),"text-letter-spacing":new en(Rt.layout_symbol["text-letter-spacing"]),"text-justify":new en(Rt.layout_symbol["text-justify"]),"text-radial-offset":new en(Rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rn(Rt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new en(Rt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new en(Rt.layout_symbol["text-anchor"]),"text-max-angle":new rn(Rt.layout_symbol["text-max-angle"]),"text-writing-mode":new rn(Rt.layout_symbol["text-writing-mode"]),"text-rotate":new en(Rt.layout_symbol["text-rotate"]),"text-padding":new rn(Rt.layout_symbol["text-padding"]),"text-keep-upright":new rn(Rt.layout_symbol["text-keep-upright"]),"text-transform":new en(Rt.layout_symbol["text-transform"]),"text-offset":new en(Rt.layout_symbol["text-offset"]),"text-allow-overlap":new rn(Rt.layout_symbol["text-allow-overlap"]),"text-overlap":new rn(Rt.layout_symbol["text-overlap"]),"text-ignore-placement":new rn(Rt.layout_symbol["text-ignore-placement"]),"text-optional":new rn(Rt.layout_symbol["text-optional"])})}};class HL{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Rr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}pt("FormatSectionOverride",HL,{omit:["defaultValue"]});class r_ extends oa{constructor(o,c){super(o,Xw,c)}recalculate(o,c){if(super.recalculate(o,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const v=[];for(const x of m)v.indexOf(x)<0&&v.push(x);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,m,v){const x=this.layout.get(o).evaluate(c,{},m,v),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Au(w.value)||!x?x:(function(T,L){return L.replace(/{([^{}]+)}/g,((z,W)=>T&&W in T?String(T[W]):""))})(c.properties,x)}createBucket(o){return new Om(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Xw.paint.overridableProperties){if(!r_.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),m=new HL(c),v=new Qf(m,c.property.specification);let x=null;x=c.value.kind==="constant"||c.value.kind==="source"?new Vh("source",v):new Wd("composite",v,c.value.zoomStops),this.paint._values[o]=new oi(c.property,x,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,m){return!(!this.layout||c.isDataDriven()||m.isDataDriven())&&r_.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const m=o.get("text-field"),v=Xw.paint.properties[c];let x=!1;const w=T=>{for(const L of T)if(v.overrides&&v.overrides.hasOverride(L))return void(x=!0)};if(m.value.kind==="constant"&&m.value.value instanceof tn)w(m.value.value.sections);else if(m.value.kind==="source"||m.value.kind==="composite"){const T=z=>{x||(z instanceof go&&ui(z.value)===Zi?w(z.value.sections):z instanceof Pl?w(z.sections):z.eachChild(T))},L=m.value;L._styleExpression&&T(L._styleExpression.expression)}return x}}let WL;var FY={get paint(){return WL=WL||new ta({"background-color":new rn(Rt.paint_background["background-color"]),"background-pattern":new Bi(Rt.paint_background["background-pattern"]),"background-opacity":new rn(Rt.paint_background["background-opacity"])})}};class NY extends oa{constructor(o,c){super(o,FY,c)}}class BY extends oa{constructor(o,c){super(o,{},c),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class jY{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const zY={once:!0},Kw=63710088e-1;class rd{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new rd(ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,m=this.lat*c,v=o.lat*c,x=Math.sin(m)*Math.sin(v)+Math.cos(m)*Math.cos(v)*Math.cos((o.lng-this.lng)*c);return Kw*Math.acos(Math.min(x,1))}static convert(o){if(o instanceof rd)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new rd(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new rd(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ZL=2*Math.PI*Kw;function XL(f){return ZL*Math.cos(f*Math.PI/180)}function KL(f){return(180+f)/360}function YL(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function JL(f,o){return f/XL(o)}function QL(f){return 360*f-180}function n_(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function e4(f,o){return f*XL(n_(o))}class ev{constructor(o,c,m=0){this.x=+o,this.y=+c,this.z=+m}static fromLngLat(o,c=0){const m=rd.convert(o);return new ev(KL(m.lng),YL(m.lat),JL(c,m.lat))}toLngLat(){return new rd(QL(this.x),n_(this.y))}toAltitude(){return e4(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ZL*(o=n_(this.y),1/Math.cos(o*Math.PI/180));var o}}function t4(f,o,c){var m=2*Math.PI*6378137/256/Math.pow(2,c);return[f*m-2*Math.PI*6378137/2,o*m-2*Math.PI*6378137/2]}class Yw{constructor(o,c,m){if(!(function(v,x,w){return!(v<0||v>25||w<0||w>=Math.pow(2,v)||x<0||x>=Math.pow(2,v))})(o,c,m))throw new Error(`x=${c}, y=${m}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=m,this.key=Rm(0,o,o,c,m)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,m){const v=(function(w,T,L){var z=t4(256*w,256*(T=Math.pow(2,L)-T-1),L),W=t4(256*(w+1),256*(T+1),L);return z[0]+","+z[1]+","+W[0]+","+W[1]})(this.x,this.y,this.z),x=(function(w,T,L){let z,W="";for(let Q=w;Q>0;Q--)z=1<<Q-1,W+=(T&z?1:0)+(L&z?2:0);return W})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,v)}isChildOf(o){const c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){const c=Math.pow(2,this.z);return new p((o.x*c-this.x)*Ce,(o.y*c-this.y)*Ce)}toString(){return`${this.z}/${this.x}/${this.y}`}}class r4{constructor(o,c){this.wrap=o,this.canonical=c,this.key=Rm(o,c.z,c.z,c.x,c.y)}}class Ru{constructor(o,c,m,v,x){if(this.terrainRttPosMatrix32f=null,o<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${m}`);this.overscaledZ=o,this.wrap=c,this.canonical=new Yw(m,+v,+x),this.key=Rm(c,o,m,v,x)}clone(){return new Ru(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-o;return o>this.canonical.z?new Ru(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ru(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-o;return o>this.canonical.z?Rm(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):Rm(this.wrap*+c,o,o,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(o){if(o.wrap!==this.wrap||this.overscaledZ-o.overscaledZ<=0)return!1;if(o.overscaledZ===0)return this.overscaledZ>0;const c=this.canonical.z-o.canonical.z;return!(c<0)&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new Ru(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,m=2*this.canonical.x,v=2*this.canonical.y;return[new Ru(c,this.wrap,c,m,v),new Ru(c,this.wrap,c,m+1,v),new Ru(c,this.wrap,c,m,v+1),new Ru(c,this.wrap,c,m+1,v+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Ru(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Ru(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new r4(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new ev(o.x-this.wrap,o.y))}}function Rm(f,o,c,m,v){(f*=2)<0&&(f=-1*f-1);const x=1<<c;return(x*x*f+x*v+m).toString(36)+c.toString(36)+o.toString(36)}function Jw(f,o){return o?f.properties[o]:f.id}function $Y(f,o){const c={id:f.id};if(o.removeAllProperties&&(delete f.removeProperties,delete f.addOrUpdateProperties,delete o.removeProperties),o.removeProperties)for(const m of o.removeProperties){const v=f.addOrUpdateProperties.findIndex((x=>x.key===m));v>-1&&f.addOrUpdateProperties.splice(v,1)}return(f.removeAllProperties||o.removeAllProperties)&&(c.removeAllProperties=!0),(f.removeProperties||o.removeProperties)&&(c.removeProperties=[...f.removeProperties||[],...o.removeProperties||[]]),(f.addOrUpdateProperties||o.addOrUpdateProperties)&&(c.addOrUpdateProperties=[...f.addOrUpdateProperties||[],...o.addOrUpdateProperties||[]]),(f.newGeometry||o.newGeometry)&&(c.newGeometry=o.newGeometry||f.newGeometry),c}function n4(f){var o,c;if(!f)return{};const m={};return m.removeAll=f.removeAll,m.remove=new Set(f.remove||[]),m.add=new Map((o=f.add)===null||o===void 0?void 0:o.map((v=>[v.id,v]))),m.update=new Map((c=f.update)===null||c===void 0?void 0:c.map((v=>[v.id,v]))),m}pt("CanonicalTileID",Yw),pt("OverscaledTileID",Ru,{omit:["terrainRttPosMatrix32f"]});class ap{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(o){return this.minX=Math.min(this.minX,o.x),this.minY=Math.min(this.minY,o.y),this.maxX=Math.max(this.maxX,o.x),this.maxY=Math.max(this.maxY,o.y),this}expandBy(o){return this.minX-=o,this.minY-=o,this.maxX+=o,this.maxY+=o,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(o){return this.expandBy(-o)}map(o){const c=new ap;return c.extend(o(new p(this.minX,this.minY))),c.extend(o(new p(this.maxX,this.minY))),c.extend(o(new p(this.minX,this.maxY))),c.extend(o(new p(this.maxX,this.maxY))),c}static fromPoints(o){const c=new ap;for(const m of o)c.extend(m);return c}contains(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(o){return!this.empty()&&!o.empty()&&o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY}intersects(o){return!this.empty()&&!o.empty()&&o.minX<=this.maxX&&o.maxX>=this.minX&&o.minY<=this.maxY&&o.maxY>=this.minY}}class i4{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const m=o[c];this._stringToNumber[m]=c,this._numberToString[c]=m}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class a4{constructor(o,c,m,v,x){this.type="Feature",this._vectorTileFeature=o,this._x=m,this._y=v,this._z=c,this.properties=o.properties,this.id=x}projectPoint(o,c,m,v){return[360*(o.x+c)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(o.y+m)/v)*Math.PI))-90]}projectLine(o,c,m,v){return o.map((x=>this.projectPoint(x,c,m,v)))}get geometry(){if(this._geometry)return this._geometry;const o=this._vectorTileFeature,c=o.extent*Math.pow(2,this._z),m=o.extent*this._x,v=o.extent*this._y,x=o.loadGeometry();switch(o.type){case 1:{const w=[];for(const L of x)w.push(L[0]);const T=this.projectLine(w,m,v,c);this._geometry=w.length===1?{type:"Point",coordinates:T[0]}:{type:"MultiPoint",coordinates:T};break}case 2:{const w=x.map((T=>this.projectLine(T,m,v,c)));this._geometry=w.length===1?{type:"LineString",coordinates:w[0]}:{type:"MultiLineString",coordinates:w};break}case 3:{const w=_L(x),T=[];for(const L of w)T.push(L.map((z=>this.projectLine(z,m,v,c))));this._geometry=T.length===1?{type:"Polygon",coordinates:T[0]}:{type:"MultiPolygon",coordinates:T};break}default:throw new Error(`unknown feature type: ${o.type}`)}return this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&c!=="_x"&&c!=="_y"&&c!=="_z"&&(o[c]=this[c]);return o}}class Lm{_name;dataBuffer;nullabilityBuffer;_size;constructor(o,c,m){this._name=o,this.dataBuffer=c,typeof m=="number"?this._size=m:(this.nullabilityBuffer=m,this._size=m.size())}getValue(o){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(o)?null:this.getValueFromBuffer(o)}has(o){return this.nullabilityBuffer&&this.nullabilityBuffer.get(o)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class i_ extends Lm{}class Qw extends i_{getValueFromBuffer(o){return this.dataBuffer[o]}}class e5 extends i_{getValueFromBuffer(o){return this.dataBuffer[o]}}class o4 extends Lm{delta;constructor(o,c,m,v){super(o,c,v),this.delta=m}}class t5 extends o4{constructor(o,c,m,v){super(o,Int32Array.of(c),m,v)}getValueFromBuffer(o){return this.dataBuffer[0]+o*this.delta}}class r5 extends Lm{constructor(o,c,m){super(o,Int32Array.of(c),m)}getValueFromBuffer(o){return this.dataBuffer[0]}}class qY{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(o,c,m,v,x=4096){this._name=o,this._geometryVector=c,this._idVector=m,this._propertyVectors=v,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(o){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((c=>[c.name,c])))),this.propertyVectorsMap.get(o)}*[Symbol.iterator](){const o=this.geometryVector[Symbol.iterator]();let c=0;for(;c<this.numFeatures;){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(c)):this.idVector.getValue(c));const v=o?.next().value,x={};for(const w of this.propertyVectors){if(!w)continue;const T=w.name,L=w.getValue(c);L!==null&&(x[T]=L)}c++,yield{id:m,geometry:v,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const o=[],c=this.geometryVector.getGeometries();for(let m=0;m<this.numFeatures;m++){let v;this.idVector&&(v=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(m)):this.idVector.getValue(m));const x={coordinates:c[m],type:this.geometryVector.geometryType(m)},w={};for(const T of this.propertyVectors){if(!T)continue;const L=T.name,z=T.getValue(m);z!==null&&(w[L]=z)}o.push({id:v,geometry:x,properties:w})}return o}containsMaxSaveIntegerValues(o){return o instanceof Qw||o instanceof r5&&o instanceof t5||o instanceof e5}}class UY{value;constructor(o){this.value=o}get(){return this.value}set(o){this.value=o}increment(){return this.value++}add(o){this.value+=o}}var hi,hh,Ds,Fc,op,ou,Jo,Qo,s4,Lu;function bs(f,o,c){const m=new Int32Array(c);let v=0,x=o.get();for(let w=0;w<m.length;w++){let T=f[x++],L=127&T;T<128||(T=f[x++],L|=(127&T)<<7,T<128||(T=f[x++],L|=(127&T)<<14,T<128||(T=f[x++],L|=(127&T)<<21,T<128||(T=f[x++],L|=(15&T)<<28)))),m[v++]=L}return o.set(x),m}function a_(f,o,c){const m=new BigInt64Array(c);for(let v=0;v<m.length;v++)m[v]=GY(f,o);return m}function VY(f,o){let c,m;return m=f[o.get()],o.increment(),c=127&m,m<128?c:(m=f[o.get()],o.increment(),c|=(127&m)<<7,m<128?c:(m=f[o.get()],o.increment(),c|=(127&m)<<14,m<128?c:(m=f[o.get()],o.increment(),c|=(127&m)<<21,m<128?c:(m=f[o.get()],c|=(15&m)<<28,(function(v,x,w){let T,L;if(L=x[w.get()],w.increment(),T=(112&L)>>4,L<128||(L=x[w.get()],w.increment(),T|=(127&L)<<3,L<128)||(L=x[w.get()],w.increment(),T|=(127&L)<<10,L<128)||(L=x[w.get()],w.increment(),T|=(127&L)<<17,L<128)||(L=x[w.get()],w.increment(),T|=(127&L)<<24,L<128)||(L=x[w.get()],w.increment(),T|=(1&L)<<31,L<128))return 4294967296*T+(v>>>0);throw new Error("Expected varint not more than 10 bytes")})(c,f,o)))))}function l4(f,o,c,m){throw new Error("FastPFor is not implemented yet.")}function sp(f){return f>>>1^-(1&f)}function Dm(f){return f>>1n^-(1n&f)}function GY(f,o){let c=0n,m=0,v=o.get();for(;v<f.length;){const x=f[v++];if(c|=BigInt(127&x)<<BigInt(m),!(128&x))break;if(m+=7,m>=64)throw new Error("Varint too long")}return o.set(v),c}function u4(f,o,c){const m=new Int32Array(c);let v=0;for(let x=0;x<o;x++){const w=f[x];m.fill(f[x+o],v,v+w),v+=w}return m}function c4(f,o,c){const m=new BigInt64Array(c);let v=0;for(let x=0;x<o;x++){const w=Number(f[x]);m.fill(f[x+o],v,v+w),v+=w}return m}function f4(f,o,c){const m=new Float64Array(c);let v=0;for(let x=0;x<o;x++){const w=f[x];m.fill(f[x+o],v,v+w),v+=w}return m}function n5(f){const o=f.length/4*4;let c=1;if(o>=4)for(let m=f[0];c<o-4;c+=4)m=f[c]+=m,m=f[c+1]+=m,m=f[c+2]+=m,m=f[c+3]+=m;for(;c!=f.length;)f[c]+=f[c-1],++c}function h4(f){f[0]=f[0]>>>1^-(1&f[0]),f[1]=f[1]>>>1^-(1&f[1]);const o=f.length/4*4;let c=2;if(o>=4)for(;c<o-4;c+=4){const m=f[c],v=f[c+1],x=f[c+2],w=f[c+3];f[c]=(m>>>1^-(1&m))+f[c-2],f[c+1]=(v>>>1^-(1&v))+f[c-1],f[c+2]=(x>>>1^-(1&x))+f[c],f[c+3]=(w>>>1^-(1&w))+f[c+1]}for(;c!=f.length;c+=2)f[c]=(f[c]>>>1^-(1&f[c]))+f[c-2],f[c+1]=(f[c+1]>>>1^-(1&f[c+1]))+f[c-1]}(function(f){f.NONE="NONE",f.DELTA="DELTA",f.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",f.RLE="RLE",f.MORTON="MORTON",f.PDE="PDE"})(hi||(hi={})),(function(f){f.NONE="NONE",f.FAST_PFOR="FAST_PFOR",f.VARINT="VARINT",f.ALP="ALP"})(hh||(hh={})),(function(f){f.PRESENT="PRESENT",f.DATA="DATA",f.OFFSET="OFFSET",f.LENGTH="LENGTH"})(Ds||(Ds={}));class i5{_dictionaryType;_offsetType;_lengthType;constructor(o,c,m){this._dictionaryType=o,this._offsetType=c,this._lengthType=m}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function gl(f,o){const c=(function(m,v){const x=m[v.get()],w=Object.values(Ds)[x>>4];let T=null;switch(w){case Ds.DATA:T=new i5(Object.values(Fc)[15&x]);break;case Ds.OFFSET:T=new i5(null,Object.values(op)[15&x]);break;case Ds.LENGTH:T=new i5(null,null,Object.values(ou)[15&x])}v.increment();const L=m[v.get()],z=Object.values(hi)[L>>5],W=Object.values(hi)[L>>2&7],Q=Object.values(hh)[3&L];v.increment();const ae=bs(m,v,2),se=ae[0];return{physicalStreamType:w,logicalStreamType:T,logicalLevelTechnique1:z,logicalLevelTechnique2:W,physicalLevelTechnique:Q,numValues:se,byteLength:ae[1],decompressedCount:se}})(f,o);return c.logicalLevelTechnique1===hi.MORTON?(function(m,v,x){const w=bs(v,x,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:m.decompressedCount,numBits:w[0],coordinateShift:w[1]}})(c,f,o):hi.RLE!==c.logicalLevelTechnique1&&hi.RLE!==c.logicalLevelTechnique2||hh.NONE===c.physicalLevelTechnique?c:(function(m,v,x){const w=bs(v,x,2);return{physicalStreamType:m.physicalStreamType,logicalStreamType:m.logicalStreamType,logicalLevelTechnique1:m.logicalLevelTechnique1,logicalLevelTechnique2:m.logicalLevelTechnique2,physicalLevelTechnique:m.physicalLevelTechnique,numValues:m.numValues,byteLength:m.byteLength,decompressedCount:w[1],runs:w[0],numRleValues:w[1]}})(c,f,o)}(function(f){f.NONE="NONE",f.SINGLE="SINGLE",f.SHARED="SHARED",f.VERTEX="VERTEX",f.MORTON="MORTON",f.FSST="FSST"})(Fc||(Fc={})),(function(f){f.VERTEX="VERTEX",f.INDEX="INDEX",f.STRING="STRING",f.KEY="KEY"})(op||(op={})),(function(f){f.VAR_BINARY="VAR_BINARY",f.GEOMETRIES="GEOMETRIES",f.PARTS="PARTS",f.RINGS="RINGS",f.TRIANGLES="TRIANGLES",f.SYMBOL="SYMBOL",f.DICTIONARY="DICTIONARY"})(ou||(ou={})),(function(f){f[f.FLAT=0]="FLAT",f[f.CONST=1]="CONST",f[f.SEQUENCE=2]="SEQUENCE",f[f.DICTIONARY=3]="DICTIONARY",f[f.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Jo||(Jo={}));class Nc{values;_size;constructor(o,c){this.values=o,this._size=c}get(o){const c=Math.floor(o/8);return(this.values[c]>>o%8&1)==1}set(o,c){const m=Math.floor(o/8);this.values[m]=this.values[m]|(c?1:0)<<o%8}getInt(o){const c=Math.floor(o/8);return this.values[c]>>o%8&1}size(){return this._size}getBuffer(){return this.values}}function yl(f,o,c,m,v){return(function(x,w,T){switch(w.logicalLevelTechnique1){case hi.DELTA:return w.logicalLevelTechnique2===hi.RLE?(function(L,z,W){const Q=new Int32Array(W);let ae=0,se=0;for(let ye=0;ye<z;ye++){const xe=L[ye],Se=sp(L[ye+z]);for(let Fe=0;Fe<xe;Fe++)se+=Se,Q[ae++]=se}return Q})(x,w.runs,w.numRleValues):((function(L){L[0]=L[0]>>>1^-(1&L[0]);const z=L.length/4*4;let W=1;if(z>=4)for(;W<z-4;W+=4){const Q=L[W],ae=L[W+1],se=L[W+2],ye=L[W+3];L[W]=(Q>>>1^-(1&Q))+L[W-1],L[W+1]=(ae>>>1^-(1&ae))+L[W],L[W+2]=(se>>>1^-(1&se))+L[W+1],L[W+3]=(ye>>>1^-(1&ye))+L[W+2]}for(;W!=L.length;++W)L[W]=(L[W]>>>1^-(1&L[W]))+L[W-1]})(x),x);case hi.RLE:return(function(L,z,W){return W?(function(Q,ae,se){const ye=new Int32Array(se);let xe=0;for(let Se=0;Se<ae;Se++){const Fe=Q[Se];let ct=Q[Se+ae];ct=ct>>>1^-(1&ct),ye.fill(ct,xe,xe+Fe),xe+=Fe}return ye})(L,z.runs,z.numRleValues):u4(L,z.runs,z.numRleValues)})(x,w,T);case hi.MORTON:return n5(x),x;case hi.COMPONENTWISE_DELTA:return h4(x),x;case hi.NONE:return T&&(function(L){for(let z=0;z<L.length;z++){const W=L[z];L[z]=W>>>1^-(1&W)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${w.logicalLevelTechnique1}`)}})(o_(f,o,c),c,m)}function nd(f,o,c){return(function(m,v){if(v.logicalLevelTechnique1===hi.DELTA&&v.logicalLevelTechnique2===hi.NONE)return(function(w){const T=new Int32Array(w.length+1);T[0]=0,T[1]=sp(w[0]);let L=T[1],z=2;for(;z!=T.length;++z){const W=w[z-1];L+=W>>>1^-(1&W),T[z]=T[z-1]+L}return T})(m);if(v.logicalLevelTechnique1===hi.RLE&&v.logicalLevelTechnique2===hi.NONE)return(function(w,T,L){const z=new Int32Array(L+1);z[0]=0;let W=1,Q=z[0];for(let ae=0;ae<T;ae++){const se=w[ae],ye=w[ae+T];for(let xe=W;xe<W+se;xe++)z[xe]=ye+Q,Q=z[xe];W+=se}return z})(m,v.runs,v.numRleValues);if(v.logicalLevelTechnique1===hi.NONE&&v.logicalLevelTechnique2===hi.NONE){(function(w){let T=0;for(let L=0;L<w.length;L++)w[L]+=T,T=w[L]})(m);const x=new Int32Array(v.numValues+1);return x[0]=0,x.set(m,1),x}if(v.logicalLevelTechnique1===hi.DELTA&&v.logicalLevelTechnique2===hi.RLE){const x=(function(w,T,L){const z=new Int32Array(L+1);z[0]=0;let W=1,Q=z[0];for(let ae=0;ae<T;ae++){const se=w[ae];let ye=w[ae+T];ye=ye>>>1^-(1&ye);for(let xe=W;xe<W+se;xe++)z[xe]=ye+Q,Q=z[xe];W+=se}return z})(m,v.runs,v.numRleValues);return n5(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(o_(f,o,c),c)}function o_(f,o,c){const m=c.physicalLevelTechnique;if(m===hh.FAST_PFOR)return l4();if(m===hh.VARINT)return bs(f,o,c.numValues);if(m===hh.NONE){const v=o.get();o.add(c.byteLength);const x=f.subarray(v,o.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function a5(f,o,c,m){const v=o_(f,o,c);if(v.length===1){const x=v[0];return m?sp(x):x}return m?(function(x){return sp(x[1])})(v):(function(x){return x[1]})(v)}function d4(f,o,c){return(function(m){if(m.length==2){const v=sp(m[1]);return[v,v]}return[sp(m[2]),sp(m[3])]})(o_(f,o,c))}function p4(f,o,c){return(function(m){if(m.length==2){const v=Dm(m[1]);return[v,v]}return[Dm(m[2]),Dm(m[3])]})(a_(f,o,c.numValues))}function m4(f,o,c,m){return(function(v,x,w){switch(x.logicalLevelTechnique1){case hi.DELTA:return x.logicalLevelTechnique2===hi.RLE?(function(T,L,z){const W=new BigInt64Array(z);let Q=0,ae=0n;for(let se=0;se<L;se++){const ye=Number(T[se]),xe=Dm(T[se+L]);for(let Se=0;Se<ye;Se++)ae+=xe,W[Q++]=ae}return W})(v,x.runs,x.numRleValues):((function(T){T[0]=T[0]>>1n^-(1n&T[0]);const L=T.length/4*4;let z=1;if(L>=4)for(;z<L-4;z+=4){const W=T[z],Q=T[z+1],ae=T[z+2],se=T[z+3];T[z]=(W>>1n^-(1n&W))+T[z-1],T[z+1]=(Q>>1n^-(1n&Q))+T[z],T[z+2]=(ae>>1n^-(1n&ae))+T[z+1],T[z+3]=(se>>1n^-(1n&se))+T[z+2]}for(;z!=T.length;++z)T[z]=(T[z]>>1n^-(1n&T[z]))+T[z-1]})(v),v);case hi.RLE:return(function(T,L,z){return z?(function(W,Q,ae){const se=new BigInt64Array(ae);let ye=0;for(let xe=0;xe<Q;xe++){const Se=Number(W[xe]);let Fe=W[xe+Q];Fe=Fe>>1n^-(1n&Fe),se.fill(Fe,ye,ye+Se),ye+=Se}return se})(T,L.runs,L.numRleValues):c4(T,L.runs,L.numRleValues)})(v,x,w);case hi.NONE:return w&&(function(T){for(let L=0;L<T.length;L++){const z=T[L];T[L]=z>>1n^-(1n&z)}})(v),v;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(a_(f,o,c.numValues),c,m)}function g4(f,o,c,m){const v=a_(f,o,c.numValues);if(v.length===1){const x=v[0];return m?Dm(x):x}return m?(function(x){return Dm(x[1])})(v):(function(x){return x[1]})(v)}function o5(f,o,c,m,v){return(function(x,w,T,L){switch(w.logicalLevelTechnique1){case hi.DELTA:return w.logicalLevelTechnique2===hi.RLE&&(x=u4(x,w.runs,w.numRleValues)),(function(z,W){const Q=new Int32Array(z.size());let ae=0;z.get(0)?(Q[0]=z.get(0)?W[0]>>>1^-(1&W[0]):0,ae=1):Q[0]=0;let se=1;for(;se!=Q.length;++se)Q[se]=z.get(se)?Q[se-1]+(W[ae]>>>1^-(1&W[ae++])):Q[se-1];return Q})(L,x);case hi.RLE:return(function(z,W,Q,ae){const se=W;return Q?(function(ye,xe,Se){const Fe=new Int32Array(ye.size());let ct=0;for(let je=0;je<Se;je++){const We=xe[je];let yt=xe[je+Se];yt=yt>>>1^-(1&yt);for(let At=ct;At<ct+We;At++)ye.get(At)?Fe[At]=yt:(Fe[At]=0,ct++);ct+=We}return Fe})(ae,z,se.runs):(function(ye,xe,Se){const Fe=new Int32Array(ye.size());let ct=0;for(let je=0;je<Se;je++){const We=xe[je],yt=xe[je+Se];for(let At=ct;At<ct+We;At++)ye.get(At)?Fe[At]=yt:(Fe[At]=0,ct++);ct+=We}return Fe})(ae,z,se.runs)})(x,w,T,L);case hi.MORTON:return n5(x),x;case hi.COMPONENTWISE_DELTA:return h4(x),x;case hi.NONE:return x=T?(function(z,W){const Q=new Int32Array(z.size());let ae=0,se=0;for(;se!=Q.length;++se)if(z.get(se)){const ye=W[ae++];Q[se]=ye>>>1^-(1&ye)}else Q[se]=0;return Q})(L,x):(function(z,W){const Q=new Int32Array(z.size());let ae=0,se=0;for(;se!=Q.length;++se)Q[se]=z.get(se)?W[ae++]:0;return Q})(L,x),x;default:throw new Error("The specified Logical level technique is not supported")}})(c.physicalLevelTechnique===hh.FAST_PFOR?l4():bs(f,o,c.numValues),c,m,v)}function s_(f,o,c,m){const v=f.logicalLevelTechnique1;if(v===hi.RLE)return f.runs===1?Jo.CONST:Jo.FLAT;const x=o instanceof Nc?o.size():o;if(v===hi.DELTA&&f.logicalLevelTechnique2===hi.RLE){const w=f.runs,T=2;if(f.numRleValues!==x)return Jo.FLAT;if(w===1)return Jo.SEQUENCE;if(w===2){const L=m.get();let z;if(f.physicalLevelTechnique===hh.VARINT)z=bs(c,m,4);else{const W=m.get();z=new Int32Array(c.buffer,c.byteOffset+W,4)}if(m.set(L),z[2]===T&&z[3]===T)return Jo.SEQUENCE}}return f.numValues===1?Jo.CONST:Jo.FLAT}class y4 extends i_{getValueFromBuffer(o){return this.dataBuffer[o]}}class v4 extends o4{constructor(o,c,m,v){super(o,BigInt64Array.of(c),m,v)}getValueFromBuffer(o){return this.dataBuffer[0]+BigInt(o)*this.delta}}class km{_geometryOffsets;_partOffsets;_ringOffsets;constructor(o,c,m){this._geometryOffsets=o,this._partOffsets=c,this._ringOffsets=m}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function s5(f,o,c){return{x:b4(f,o)-c,y:b4(f>>1,o)-c}}function b4(f,o){let c=0;for(let m=0;m<o;m++)c|=(f&1<<2*m)>>m;return c}(function(f){f[f.POINT=0]="POINT",f[f.LINESTRING=1]="LINESTRING",f[f.POLYGON=2]="POLYGON",f[f.MULTIPOINT=3]="MULTIPOINT",f[f.MULTILINESTRING=4]="MULTILINESTRING",f[f.MULTIPOLYGON=5]="MULTIPOLYGON"})(Qo||(Qo={})),(function(f){f[f.POINT=0]="POINT",f[f.LINESTRING=1]="LINESTRING",f[f.POLYGON=2]="POLYGON"})(s4||(s4={})),(function(f){f[f.MORTON=0]="MORTON",f[f.VEC_2=1]="VEC_2",f[f.VEC_3=2]="VEC_3"})(Lu||(Lu={}));class HY{createPoint(o){return[[o]]}createMultiPoint(o){return o.map((c=>[c]))}createLineString(o){return[o]}createMultiLineString(o){return o}createPolygon(o,c){return[o].concat(c)}createMultiPolygon(o){return o.flat()}}function _4(f){const o=new Array(f.numGeometries);let c=1,m=1,v=1,x=0;const w=new HY;let T=0,L=0;const z=f.mortonSettings,W=f.topologyVector,Q=W.geometryOffsets,ae=W.partOffsets,se=W.ringOffsets,ye=f.vertexOffsets,xe=f.containsPolygonGeometry(),Se=f.vertexBuffer;for(let Fe=0;Fe<f.numGeometries;Fe++){const ct=f.geometryType(Fe);if(ct===Qo.POINT){if(ye&&ye.length!==0)if(f.vertexBufferType===Lu.VEC_2){const je=2*ye[L++],We=new p(Se[je],Se[je+1]);o[x++]=w.createPoint(We)}else{const je=s5(Se[ye[L++]],z.numBits,z.coordinateShift),We=new p(je.x,je.y);o[x++]=w.createPoint(We)}else{const je=new p(Se[T++],Se[T++]);o[x++]=w.createPoint(je)}Q&&v++,ae&&c++,se&&m++}else if(ct===Qo.MULTIPOINT){const je=Q[v]-Q[v-1];v++;const We=new Array(je);if(ye&&ye.length!==0){for(let yt=0;yt<je;yt++){const At=2*ye[L++];We[yt]=new p(Se[At],Se[At+1])}o[x++]=w.createMultiPoint(We)}else{for(let yt=0;yt<je;yt++){const At=Se[T++],Zt=Se[T++];We[yt]=new p(At,Zt)}o[x++]=w.createMultiPoint(We)}}else if(ct===Qo.LINESTRING){let je,We=0;xe?(We=se[m]-se[m-1],m++):We=ae[c]-ae[c-1],c++,ye&&ye.length!==0?(je=f.vertexBufferType===Lu.VEC_2?u5(Se,ye,L,We,!1):c5(Se,ye,L,We,!1,z),L+=We):(je=l5(Se,T,We,!1),T+=2*We),o[x++]=w.createLineString(je),Q&&v++}else if(ct===Qo.POLYGON){const je=ae[c]-ae[c-1];c++;const We=new Array(je-1);let yt=se[m]-se[m-1];if(m++,ye&&ye.length!==0){const At=f.vertexBufferType===Lu.VEC_2?u_(Se,ye,L,yt):c_(Se,ye,L,yt,0,z);L+=yt;for(let Zt=0;Zt<We.length;Zt++)yt=se[m]-se[m-1],m++,We[Zt]=f.vertexBufferType===Lu.VEC_2?u_(Se,ye,L,yt):c_(Se,ye,L,yt,0,z),L+=yt;o[x++]=w.createPolygon(At,We)}else{const At=l_(Se,T,yt);T+=2*yt;for(let Zt=0;Zt<We.length;Zt++)yt=se[m]-se[m-1],m++,We[Zt]=l_(Se,T,yt),T+=2*yt;o[x++]=w.createPolygon(At,We)}Q&&v++}else if(ct===Qo.MULTILINESTRING){const je=Q[v]-Q[v-1];v++;const We=new Array(je);if(ye&&ye.length!==0){for(let yt=0;yt<je;yt++){let At=0;xe?(At=se[m]-se[m-1],m++):At=ae[c]-ae[c-1],c++;const Zt=f.vertexBufferType===Lu.VEC_2?u5(Se,ye,L,At,!1):c5(Se,ye,L,At,!1,z);We[yt]=Zt,L+=At}o[x++]=w.createMultiLineString(We)}else{for(let yt=0;yt<je;yt++){let At=0;xe?(At=se[m]-se[m-1],m++):At=ae[c]-ae[c-1],c++,We[yt]=l5(Se,T,At,!1),T+=2*At}o[x++]=w.createMultiLineString(We)}}else{if(ct!==Qo.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const je=Q[v]-Q[v-1];v++;const We=new Array(je);let yt=0;if(ye&&ye.length!==0){for(let At=0;At<je;At++){const Zt=ae[c]-ae[c-1];c++;const gr=new Array(Zt-1);yt=se[m]-se[m-1],m++;const ur=f.vertexBufferType===Lu.VEC_2?u_(Se,ye,L,yt):c_(Se,ye,L,yt,0,z);L+=yt;for(let Sr=0;Sr<gr.length;Sr++)yt=se[m]-se[m-1],m++,gr[Sr]=f.vertexBufferType===Lu.VEC_2?u_(Se,ye,L,yt):c_(Se,ye,L,yt,0,z),L+=yt;We[At]=w.createPolygon(ur,gr)}o[x++]=w.createMultiPolygon(We)}else{for(let At=0;At<je;At++){const Zt=ae[c]-ae[c-1];c++;const gr=new Array(Zt-1);yt=se[m]-se[m-1],m++;const ur=l_(Se,T,yt);T+=2*yt;for(let Sr=0;Sr<gr.length;Sr++){const zr=se[m]-se[m-1];m++,gr[Sr]=l_(Se,T,zr),T+=2*zr}We[At]=w.createPolygon(ur,gr)}o[x++]=w.createMultiPolygon(We)}}}}return o}function l_(f,o,c){return l5(f,o,c,!0)}function u_(f,o,c,m){return u5(f,o,c,m,!0)}function c_(f,o,c,m,v,x){return c5(f,o,c,m,!0,x)}function l5(f,o,c,m){const v=new Array(m?c+1:c);for(let x=0;x<2*c;x+=2)v[x/2]=new p(f[o+x],f[o+x+1]);return m&&(v[v.length-1]=v[0]),v}function u5(f,o,c,m,v){const x=new Array(v?m+1:m);for(let w=0;w<2*m;w+=2){const T=2*o[c+w/2];x[w/2]=new p(f[T],f[T+1])}return v&&(x[x.length-1]=x[0]),x}function c5(f,o,c,m,v,x){const w=new Array(v?m+1:m);for(let T=0;T<m;T++){const L=s5(f[o[c+T]],x.numBits,x.coordinateShift);w[T]=new p(L.x,L.y)}return v&&(w[w.length-1]=w[0]),w}class x4{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(o,c,m,v,x){this._vertexBufferType=o,this._topologyVector=c,this._vertexOffsets=m,this._vertexBuffer=v,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const o=_4(this);let c=0;for(;c<this.numGeometries;)yield{coordinates:o[c],type:this.geometryType(c)},c++}getSimpleEncodedVertex(o){const c=this.vertexOffsets?2*this.vertexOffsets[o]:2*o;return[this.vertexBuffer[c],this.vertexBuffer[c+1]]}getVertex(o){if(this.vertexOffsets&&this.mortonSettings){const m=s5(this.vertexBuffer[this.vertexOffsets[o]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[m.x,m.y]}const c=this.vertexOffsets?2*this.vertexOffsets[o]:2*o;return[this.vertexBuffer[c],this.vertexBuffer[c+1]]}getGeometries(){return _4(this)}get mortonSettings(){return this._mortonSettings}}class w4 extends x4{_numGeometries;_geometryType;constructor(o,c,m,v,x,w,T){super(m,v,x,w,T),this._numGeometries=o,this._geometryType=c}geometryType(o){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Qo.POLYGON||this._geometryType===Qo.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class S4 extends x4{_geometryTypes;constructor(o,c,m,v,x,w){super(o,m,v,x,w),this._geometryTypes=c}geometryType(o){return this._geometryTypes[o]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let o=0;o<this.numGeometries;o++)if(this.geometryType(o)===Qo.POLYGON||this.geometryType(o)===Qo.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class E4{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(o,c,m,v){this._triangleOffsets=o,this._indexBuffer=c,this._vertexBuffer=m,this._topologyVector=v}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const o=new Array(this.numGeometries),c=this._topologyVector,m=c.partOffsets,v=c.ringOffsets,x=c.geometryOffsets;let w=0,T=1,L=1,z=1;for(let W=0;W<this.numGeometries;W++)switch(this.geometryType(W)){case Qo.POLYGON:{const Q=m[T]-m[T-1];T++;const ae=[];for(let se=0;se<Q;se++){const ye=v[L]-v[L-1];L++;const xe=[];for(let Se=0;Se<ye;Se++){const Fe=this._vertexBuffer[w++],ct=this._vertexBuffer[w++];xe.push(new p(Fe,ct))}xe.length>0&&xe.push(xe[0]),ae.push(xe)}o[W]=ae,x&&z++}break;case Qo.MULTIPOLYGON:{const Q=x[z]-x[z-1];z++;const ae=[];for(let se=0;se<Q;se++){const ye=m[T]-m[T-1];T++;for(let xe=0;xe<ye;xe++){const Se=v[L]-v[L-1];L++;const Fe=[];for(let ct=0;ct<Se;ct++){const je=this._vertexBuffer[w++],We=this._vertexBuffer[w++];Fe.push(new p(je,We))}Fe.length>0&&Fe.push(Fe[0]),ae.push(Fe)}}o[W]=ae}}return o}[Symbol.iterator](){return null}}function C4(f,o,c,m,v,x){return new WY(f,o,c,m,v,x)}class WY extends E4{_numGeometries;_geometryType;constructor(o,c,m,v,x,w){super(m,v,x,w),this._numGeometries=o,this._geometryType=c}geometryType(o){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function A4(f,o,c,m,v){return new ZY(f,o,c,m,v)}class ZY extends E4{_geometryTypes;constructor(o,c,m,v,x){super(c,m,v,x),this._geometryTypes=o}geometryType(o){return this._geometryTypes[o]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function XY(f,o,c,m,v){const x=gl(f,c);let w=null,T=null,L=null,z=null,W=null,Q=null,ae=null,se=null;if(s_(x,m,f,c)===Jo.CONST){const xe=a5(f,c,x,!1);for(let Se=0;Se<o-1;Se++){const Fe=gl(f,c);switch(Fe.physicalStreamType){case Ds.LENGTH:switch(Fe.logicalStreamType.lengthType){case ou.GEOMETRIES:w=nd(f,c,Fe);break;case ou.PARTS:T=nd(f,c,Fe);break;case ou.RINGS:L=nd(f,c,Fe);break;case ou.TRIANGLES:ae=nd(f,c,Fe)}break;case Ds.OFFSET:switch(Fe.logicalStreamType.offsetType){case op.VERTEX:z=yl(f,c,Fe,!1);break;case op.INDEX:se=yl(f,c,Fe,!1)}break;case Ds.DATA:Fc.VERTEX===Fe.logicalStreamType.dictionaryType?W=yl(f,c,Fe,!0):(Q={numBits:Fe.numBits,coordinateShift:Fe.coordinateShift},W=yl(f,c,Fe,!1))}}return se!==null?w!=null||T!=null?C4(m,xe,ae,se,W,new km(w,T,L)):C4(m,xe,ae,se,W):Q===null?(function(Se,Fe,ct,je,We){return new w4(Se,Fe,Lu.VEC_2,ct,je,We)})(m,xe,new km(w,T,L),z,W):(function(Se,Fe,ct,je,We,yt){return new w4(Se,Fe,Lu.MORTON,ct,je,We,yt)})(m,xe,new km(w,T,L),z,W,Q)}const ye=yl(f,c,x,!1);for(let xe=0;xe<o-1;xe++){const Se=gl(f,c);switch(Se.physicalStreamType){case Ds.LENGTH:switch(Se.logicalStreamType.lengthType){case ou.GEOMETRIES:w=yl(f,c,Se,!1);break;case ou.PARTS:T=yl(f,c,Se,!1);break;case ou.RINGS:L=yl(f,c,Se,!1);break;case ou.TRIANGLES:ae=nd(f,c,Se)}break;case Ds.OFFSET:switch(Se.logicalStreamType.offsetType){case op.VERTEX:z=yl(f,c,Se,!1);break;case op.INDEX:se=yl(f,c,Se,!1)}break;case Ds.DATA:Fc.VERTEX===Se.logicalStreamType.dictionaryType?W=yl(f,c,Se,!0):(Q={numBits:Se.numBits,coordinateShift:Se.coordinateShift},W=yl(f,c,Se,!1))}}return se!==null&&T===null?A4(ye,ae,se,W):(w!==null?(w=f5(ye,w,2),T!==null&&L!==null?(T=T4(ye,w,T,!1),L=(function(xe,Se,Fe,ct){const je=new Int32Array(Fe[Fe.length-1]+1);let We=0;je[0]=We;let yt=1,At=1,Zt=0;for(let gr=0;gr<xe.length;gr++){const ur=xe[gr],Sr=Se[gr+1]-Se[gr];if(ur!==0&&ur!==3)for(let zr=0;zr<Sr;zr++){const Cr=Fe[yt]-Fe[yt-1];yt++;for(let dr=0;dr<Cr;dr++)We=je[At++]=We+ct[Zt++]}else for(let zr=0;zr<Sr;zr++)je[At++]=++We,yt++}return je})(ye,w,T,L)):T!==null&&(T=(function(xe,Se,Fe){const ct=new Int32Array(Se[Se.length-1]+1);let je=0;ct[0]=je;let We=1,yt=0;for(let At=0;At<xe.length;At++){const Zt=xe[At],gr=Se[At+1]-Se[At];if(Zt===4||Zt===1)for(let ur=0;ur<gr;ur++)je=ct[We++]=je+Fe[yt++];else for(let ur=0;ur<gr;ur++)ct[We++]=++je}return ct})(ye,w,T))):T!==null&&L!==null?(T=f5(ye,T,1),L=T4(ye,T,L,!0)):T!==null&&(T=f5(ye,T,0)),se!==null?A4(ye,ae,se,W,new km(w,T,L)):Q===null?(function(xe,Se,Fe,ct){return new S4(Lu.VEC_2,xe,Se,Fe,ct)})(ye,new km(w,T,L),z,W):(function(xe,Se,Fe,ct,je){return new S4(Lu.MORTON,xe,Se,Fe,ct,je)})(ye,new km(w,T,L),z,W,Q))}function f5(f,o,c){const m=new Int32Array(f.length+1);let v=0;m[0]=v;let x=0;for(let w=0;w<f.length;w++)v=m[w+1]=v+(f[w]>c?o[x++]:1);return m}function T4(f,o,c,m){const v=new Int32Array(o[o.length-1]+1);let x=0;v[0]=x;let w=1,T=0;for(let L=0;L<f.length;L++){const z=f[L],W=o[L+1]-o[L];if(z===5||z===2||m&&(z===4||z===1))for(let Q=0;Q<W;Q++)x=v[w++]=x+c[T++];else for(let Q=0;Q<W;Q++)v[w++]=++x}return v}class KY extends Lm{dataVector;constructor(o,c,m){super(o,c.getBuffer(),m),this.dataVector=c}getValueFromBuffer(o){return this.dataVector.get(o)}}class YY extends i_{getValueFromBuffer(o){return this.dataBuffer[o]}}class P4 extends Lm{constructor(o,c,m){super(o,BigInt64Array.of(c),m)}getValueFromBuffer(o){return this.dataBuffer[0]}}function tv(f,o,c){return I4(f,Math.ceil(o/8),c)}function I4(f,o,c){const m=new Uint8Array(o);let v=0;for(;v<o;){const x=f[c.increment()];if(x<=127){const w=x+3,T=f[c.increment()],L=v+w;m.fill(T,v,L),v=L}else{const w=256-x;for(let T=0;T<w;T++)m[v++]=f[c.increment()]}}return m}const JY=new TextDecoder;function h5(f,o,c){return c-o>=12?JY.decode(f.subarray(o,c)):(function(m,v,x){let w="",T=v;for(;T<x;){const L=m[T];let z,W,Q,ae=null,se=L>239?4:L>223?3:L>191?2:1;if(T+se>x)break;se===1?L<128&&(ae=L):se===2?(z=m[T+1],(192&z)==128&&(ae=(31&L)<<6|63&z,ae<=127&&(ae=null))):se===3?(z=m[T+1],W=m[T+2],(192&z)==128&&(192&W)==128&&(ae=(15&L)<<12|(63&z)<<6|63&W,(ae<=2047||ae>=55296&&ae<=57343)&&(ae=null))):se===4&&(z=m[T+1],W=m[T+2],Q=m[T+3],(192&z)==128&&(192&W)==128&&(192&Q)==128&&(ae=(15&L)<<18|(63&z)<<12|(63&W)<<6|63&Q,(ae<=65535||ae>=1114112)&&(ae=null))),ae===null?(ae=65533,se=1):ae>65535&&(ae-=65536,w+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),w+=String.fromCharCode(ae),T+=se}return w})(f,o,c)}class d5 extends Lm{offsetBuffer;constructor(o,c,m,v){super(o,m,v),this.offsetBuffer=c}}class M4 extends d5{textEncoder;constructor(o,c,m,v){super(o,c,m,v??c.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(o){return h5(this.dataBuffer,this.offsetBuffer[o],this.offsetBuffer[o+1])}}class Fm extends d5{indexBuffer;textEncoder;constructor(o,c,m,v,x){super(o,m,v,x??c.length),this.indexBuffer=c,this.indexBuffer=c,this.textEncoder=new TextEncoder}getValueFromBuffer(o){const c=this.indexBuffer[o];return h5(this.dataBuffer,this.offsetBuffer[c],this.offsetBuffer[c+1])}}class O4 extends d5{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(o,c,m,v,x,w,T){super(o,m,v,T),this.indexBuffer=c,this.symbolOffsetBuffer=x,this.symbolTableBuffer=w,this.textEncoder=new TextEncoder}getValueFromBuffer(o){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(m,v,x){const w=[],T=new Array(v.length).fill(0);for(let L=1;L<v.length;L++)T[L]=T[L-1]+v[L-1];for(let L=0;L<x.length;L++)if(x[L]===255)w.push(x[++L]);else{const z=v[x[L]],W=T[x[L]];for(let Q=0;Q<z;Q++)w.push(m[W+Q])}return new Uint8Array(w)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const c=this.indexBuffer[o];return h5(this.decodedDictionary,this.offsetBuffer[c],this.offsetBuffer[c+1])}offsetToLengthBuffer(o){const c=new Uint32Array(o.length-1);let m=o[0];for(let v=1;v<o.length;v++){const x=o[v];c[v-1]=x-m,m=x}return c}}function QY(f,o,c,m,v,x){return c.type==="scalarType"?(function(w,T,L,z,W,Q){let ae=null,se=0;if(w===0)return null;if(Q.nullable){const xe=gl(T,L);se=xe.numValues;const Se=L.get(),Fe=tv(T,se,L);L.set(Se+xe.byteLength),ae=new Nc(Fe,xe.numValues)}const ye=ae??z;switch(W.physicalType){case 4:case 3:return(function(xe,Se,Fe,ct,je){const We=gl(xe,Se),yt=s_(We,je,xe,Se),At=ct.physicalType===3;if(yt===Jo.FLAT){const Zt=rv(je)?o5(xe,Se,We,At,je):yl(xe,Se,We,At);return new Qw(Fe.name,Zt,je)}if(yt===Jo.SEQUENCE){const Zt=d4(xe,Se,We);return new t5(Fe.name,Zt[0],Zt[1],We.numRleValues)}{const Zt=a5(xe,Se,We,At);return new r5(Fe.name,Zt,je)}})(T,L,Q,W,ye);case 9:return(function(xe,Se,Fe,ct,je){let We=null,yt=null,At=null,Zt=null,gr=null,ur=null,Sr=null,zr=null;for(let Cr=0;Cr<ct;Cr++){const dr=gl(Se,Fe);if(dr.byteLength!==0)switch(dr.physicalStreamType){case Ds.PRESENT:{const ir=tv(Se,dr.numValues,Fe);ur=new Nc(ir,dr.numValues);break}case Ds.OFFSET:yt=je!=null||ur!=null?o5(Se,Fe,dr,!1,je??ur):yl(Se,Fe,dr,!1);break;case Ds.LENGTH:{const ir=nd(Se,Fe,dr);ou.DICTIONARY===dr.logicalStreamType.lengthType?We=ir:ou.SYMBOL===dr.logicalStreamType.lengthType?Zt=ir:Sr=ir;break}case Ds.DATA:{const ir=Se.subarray(Fe.get(),Fe.get()+dr.byteLength);Fe.add(dr.byteLength);const nn=dr.logicalStreamType.dictionaryType;Fc.FSST===nn?gr=ir:Fc.SINGLE===nn||Fc.SHARED===nn?At=ir:Fc.NONE===nn&&(zr=ir);break}}}return(function(Cr,dr,ir,nn,Xr,an,Hr){return dr?new O4(Cr,ir,nn,Xr,an,dr,Hr):null})(xe,gr,yt,We,At,Zt,je??ur)??(function(Cr,dr,ir,nn,Xr){return dr?Xr?new Fm(Cr,ir,nn,dr,Xr):new Fm(Cr,ir,nn,dr):null})(xe,At,yt,We,je??ur)??(function(Cr,dr,ir,nn,Xr){if(!dr||!ir)return null;if(nn)return Xr?new Fm(Cr,nn,dr,ir,Xr):new Fm(Cr,nn,dr,ir);if(Xr&&Xr.size()!==dr.length-1){const an=new Int32Array(Xr.size());let Hr=0;for(let vn=0;vn<Xr.size();vn++)an[vn]=Xr.get(vn)?Hr++:0;return new Fm(Cr,an,dr,ir,Xr)}return Xr?new M4(Cr,dr,ir,Xr):new M4(Cr,dr,ir)})(xe,Sr,zr,yt,je??ur)})(Q.name,T,L,Q.nullable?w-1:w,ae);case 0:return(function(xe,Se,Fe,ct,je){const We=gl(xe,Se),yt=We.numValues,At=Se.get(),Zt=rv(je)?(function(ur,Sr,zr,Cr){const dr=I4(ur,Math.ceil(Sr/8),zr),ir=new Nc(dr,Sr),nn=Cr.size(),Xr=new Nc(new Uint8Array(nn),nn);let an=0;for(let Hr=0;Hr<Cr.size();Hr++){const vn=!!Cr.get(Hr)&&ir.get(an++);Xr.set(Hr,vn)}return Xr.getBuffer()})(xe,yt,Se,je):tv(xe,yt,Se);Se.set(At+We.byteLength);const gr=new Nc(Zt,yt);return new KY(Fe.name,gr,je)})(T,L,Q,0,ye);case 6:case 5:return(function(xe,Se,Fe,ct,je){const We=gl(xe,Se),yt=s_(We,ct,xe,Se),At=je.physicalType===5;if(yt===Jo.FLAT){const Zt=rv(ct)?(function(gr,ur,Sr,zr,Cr){return(function(dr,ir,nn,Xr){switch(ir.logicalLevelTechnique1){case hi.DELTA:return ir.logicalLevelTechnique2===hi.RLE&&(dr=c4(dr,ir.runs,ir.numRleValues)),(function(an,Hr){const vn=new BigInt64Array(an.size());let Ai=0;an.get(0)?(vn[0]=an.get(0)?Hr[0]>>1n^-(1n&Hr[0]):0n,Ai=1):vn[0]=0n;let si=1;for(;si!=vn.length;++si)vn[si]=an.get(si)?vn[si-1]+(Hr[Ai]>>1n^-(1n&Hr[Ai++])):vn[si-1];return vn})(Xr,dr);case hi.RLE:return(function(an,Hr,vn,Ai){const si=Hr;return vn?(function(Da,Fs,wo){const ka=new BigInt64Array(Da.size());let Ca=0;for(let zi=0;zi<wo;zi++){const Xa=Number(Fs[zi]);let io=Fs[zi+wo];io=io>>1n^-(1n&io);for(let ma=Ca;ma<Ca+Xa;ma++)Da.get(ma)?ka[ma]=io:(ka[ma]=0n,Ca++);Ca+=Xa}return ka})(Ai,an,si.runs):(function(Da,Fs,wo){const ka=new BigInt64Array(Da.size());let Ca=0;for(let zi=0;zi<wo;zi++){const Xa=Number(Fs[zi]),io=Fs[zi+wo];for(let ma=Ca;ma<Ca+Xa;ma++)Da.get(ma)?ka[ma]=io:(ka[ma]=0n,Ca++);Ca+=Xa}return ka})(Ai,an,si.runs)})(dr,ir,nn,Xr);case hi.NONE:return dr=nn?(function(an,Hr){const vn=new BigInt64Array(an.size());let Ai=0,si=0;for(;si!=vn.length;++si)if(an.get(si)){const Da=Hr[Ai++];vn[si]=Da>>1n^-(1n&Da)}else vn[si]=0n;return vn})(Xr,dr):(function(an,Hr){const vn=new BigInt64Array(an.size());let Ai=0,si=0;for(;si!=vn.length;++si)vn[si]=an.get(si)?Hr[Ai++]:0n;return vn})(Xr,dr),dr;default:throw new Error("The specified Logical level technique is not supported")}})(a_(gr,ur,Sr.numValues),Sr,zr,Cr)})(xe,Se,We,At,ct):m4(xe,Se,We,At);return new y4(Fe.name,Zt,ct)}if(yt===Jo.SEQUENCE){const Zt=p4(xe,Se,We);return new v4(Fe.name,Zt[0],Zt[1],We.numRleValues)}{const Zt=g4(xe,Se,We,At);return new P4(Fe.name,Zt,ct)}})(T,L,Q,ye,W);case 7:return(function(xe,Se,Fe,ct){const je=gl(xe,Se),We=rv(ct)?(function(yt,At,Zt,gr){const ur=At.get(),Sr=ur+gr*Float32Array.BYTES_PER_ELEMENT,zr=new Uint8Array(yt.subarray(ur,Sr)).buffer,Cr=new Float32Array(zr);At.set(Sr);const dr=Zt.size(),ir=new Float32Array(dr);let nn=0;for(let Xr=0;Xr<dr;Xr++)ir[Xr]=Zt.get(Xr)?Cr[nn++]:0;return ir})(xe,Se,ct,je.numValues):(function(yt,At,Zt){const gr=At.get(),ur=gr+Zt*Float32Array.BYTES_PER_ELEMENT,Sr=new Uint8Array(yt.subarray(gr,ur)).buffer,zr=new Float32Array(Sr);return At.set(ur),zr})(xe,Se,je.numValues);return new YY(Fe.name,We,ct)})(T,L,Q,ye);case 8:return(function(xe,Se,Fe,ct){const je=gl(xe,Se),We=rv(ct)?(function(yt,At,Zt,gr){const ur=At.get(),Sr=ur+gr*Float64Array.BYTES_PER_ELEMENT,zr=new Uint8Array(yt.subarray(ur,Sr)).buffer,Cr=new Float64Array(zr);At.set(Sr);const dr=Zt.size(),ir=new Float64Array(dr);let nn=0;for(let Xr=0;Xr<dr;Xr++)ir[Xr]=Zt.get(Xr)?Cr[nn++]:0;return ir})(xe,Se,ct,je.numValues):(function(yt,At,Zt){const gr=At.get(),ur=gr+Zt*Float64Array.BYTES_PER_ELEMENT,Sr=new Uint8Array(yt.subarray(gr,ur)).buffer,zr=new Float64Array(Sr);return At.set(ur),zr})(xe,Se,je.numValues);return new e5(Fe.name,We,ct)})(T,L,Q,ye);default:throw new Error(`The specified data type for the field is currently not supported: ${W}`)}})(m,f,o,v,c.scalarType,c):m!=1?null:(function(w,T,L,z){let W=null,Q=null,ae=null,se=null,ye=!1;for(;!ye;){const ct=gl(w,T);switch(ct.physicalStreamType){case Ds.LENGTH:ou.DICTIONARY===ct.logicalStreamType.lengthType?W=nd(w,T,ct):ae=nd(w,T,ct);break;case Ds.DATA:Fc.SINGLE===ct.logicalStreamType.dictionaryType||Fc.SHARED===ct.logicalStreamType.dictionaryType?(Q=w.subarray(T.get(),T.get()+ct.byteLength),ye=!0):se=w.subarray(T.get(),T.get()+ct.byteLength),T.add(ct.byteLength)}}const xe=L.complexType.children,Se=[];let Fe=0;for(const ct of xe){const je=bs(w,T,1)[0];if(je==0)continue;const We=`${L.name}${ct.name==="default"?"":":"+ct.name}`;if(je!==2||ct.type!=="scalarField"||ct.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const yt=gl(w,T),At=tv(w,yt.numValues,T),Zt=gl(w,T),gr=Zt.decompressedCount!==z?o5(w,T,Zt,!1,new Nc(At,yt.numValues)):yl(w,T,Zt,!1);Se[Fe++]=se?new O4(We,gr,W,Q,ae,se,new Nc(At,yt.numValues)):new Fm(We,gr,W,Q,new Nc(At,yt.numValues))}return Se})(f,o,c,v)}function rv(f){return f instanceof Nc}function eJ(f){if(f.name==="id")return!1;if(f.type==="scalarType"){const o=f.scalarType;if(o.type==="physicalType")switch(o.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(o.type==="logicalType")return!1}else if(f.type==="complexType"){const o=f.complexType;if(o.type==="physicalType")switch(o.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",f),!1}const tJ=new TextDecoder;function R4(f,o){const c=bs(f,o,1)[0];if(c===0)return"";const m=o.get(),v=f.subarray(m,m+c);return o.add(c),tJ.decode(v)}function L4(f,o){const c=bs(f,o,1)[0]>>>0,m=!!(4&c),v=!!(2&c),x=bs(f,o,1)[0]>>>0,w={};if(1&c&&(w.nullable=!0),v){const T={};if(m?(T.type="logicalType",T.logicalType=x):(T.type="physicalType",T.physicalType=x),8&c){const L=bs(f,o,1)[0]>>>0;T.children=new Array(L);for(let z=0;z<L;z++)T.children[z]=L4(f,o)}w.type="complexField",w.complexField=T}else{const T={};m?(T.type="logicalType",T.logicalType=x):(T.type="physicalType",T.physicalType=x),w.type="scalarField",w.scalarField=T}return w}function rJ(f,o){const c=bs(f,o,1)[0]>>>0,m=(function(v){switch(v){case 0:case 1:case 2:case 3:{const x={};x.nullable=!!(1&v),x.columnScope=0;const w={};return w.physicalType=v>1?6:4,w.type="physicalType",x.scalarType=w,x.type="scalarType",x}case 4:{const x={nullable:!1,columnScope:0},w={type:"physicalType",physicalType:0};return x.type="complexType",x.complexType=w,x}case 30:{const x={nullable:!1,columnScope:0},w={type:"physicalType",physicalType:1};return x.type="complexType",x.complexType=w,x}default:return(function(x){let w=null;switch(x){case 10:case 11:w=0;break;case 12:case 13:w=1;break;case 14:case 15:w=2;break;case 16:case 17:w=3;break;case 18:case 19:w=4;break;case 20:case 21:w=5;break;case 22:case 23:w=6;break;case 24:case 25:w=7;break;case 26:case 27:w=8;break;case 28:case 29:w=9;break;default:return null}const T={};T.nullable=!!(1&x),T.columnScope=0;const L={type:"physicalType"};return L.physicalType=w,T.type="scalarType",T.scalarType=L,T})(v)}})(c);if(!m)throw new Error(`Unsupported column type code: ${c}`);if((function(v){return v>=10})(c)?m.name=R4(f,o):c>=0&&c<=3?m.name="id":c===4&&(m.name="geometry"),(function(v){return v===30})(c)){const v=bs(f,o,1)[0]>>>0,x=m.complexType;x.children=new Array(v);for(let w=0;w<v;w++)x.children[w]=L4(f,o)}return m}function nJ(f,o){const c={featureTables:[]},m={};m.name=R4(f,o);const v=bs(f,o,1)[0]>>>0,x=bs(f,o,1)[0]>>>0;m.columns=new Array(x);for(let w=0;w<x;w++)m.columns[w]=rJ(f,o);return c.featureTables.push(m),[c,v]}function iJ(f,o,c,m,v,x,w=!1){const T=o.scalarType.physicalType,L=s_(v,x,f,c);if(T===4)switch(L){case Jo.FLAT:{const z=yl(f,c,v,!1);return new Qw(m,z,x)}case Jo.SEQUENCE:{const z=d4(f,c,v);return new t5(m,z[0],z[1],v.numRleValues)}case Jo.CONST:{const z=a5(f,c,v,!1);return new r5(m,z,x)}}else switch(L){case Jo.FLAT:{if(w){const W=(function(Q,ae,se,ye){const xe=(function(Se,Fe,ct){const je=new Float64Array(Fe);for(let We=0;We<Fe;We++)je[We]=VY(Se,ct);return je})(Q,se.numValues,ae);return(function(Se,Fe,ct){switch(Fe.logicalLevelTechnique1){case hi.DELTA:return Fe.logicalLevelTechnique2===hi.RLE&&(Se=f4(Se,Fe.runs,Fe.numRleValues)),(function(je){je[0]=je[0]%2==1?(je[0]+1)/-2:je[0]/2;const We=je.length/4*4;let yt=1;if(We>=4)for(;yt<We-4;yt+=4){const At=je[yt],Zt=je[yt+1],gr=je[yt+2],ur=je[yt+3];je[yt]=(At%2==1?(At+1)/-2:At/2)+je[yt-1],je[yt+1]=(Zt%2==1?(Zt+1)/-2:Zt/2)+je[yt],je[yt+2]=(gr%2==1?(gr+1)/-2:gr/2)+je[yt+1],je[yt+3]=(ur%2==1?(ur+1)/-2:ur/2)+je[yt+2]}for(;yt!=je.length;++yt)je[yt]=(je[yt]%2==1?(je[yt]+1)/-2:je[yt]/2)+je[yt-1]})(Se),Se;case hi.RLE:return(function(je,We,yt){return f4(je,We.runs,We.numRleValues)})(Se,Fe);case hi.NONE:return Se;default:throw new Error(`The specified Logical level technique is not supported: ${Fe.logicalLevelTechnique1}`)}})(xe,se)})(f,c,v);return new e5(m,W,x)}const z=m4(f,c,v,!1);return new y4(m,z,x)}case Jo.SEQUENCE:{const z=p4(f,c,v);return new v4(m,z[0],z[1],v.numRleValues)}case Jo.CONST:{const z=g4(f,c,v,!1);return new P4(m,z,x)}}throw new Error("Vector type not supported for id column.")}class aJ{constructor(o,c){var m;switch(this._featureData=o,this.properties=this._featureData.properties||{},(m=this._featureData.geometry)===null||m===void 0?void 0:m.type){case Qo.POINT:case Qo.MULTIPOINT:this.type=1;break;case Qo.LINESTRING:case Qo.MULTILINESTRING:this.type=2;break;case Qo.POLYGON:case Qo.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=c,this.id=Number(this._featureData.id)}loadGeometry(){const o=[];for(const c of this._featureData.geometry.coordinates){const m=[];for(const v of c)m.push(new p(v.x,v.y));o.push(m)}return o}}class oJ{constructor(o){this.features=[],this.featureTable=o,this.name=o.name,this.extent=o.extent,this.version=2,this.features=o.getFeatures(),this.length=this.features.length}feature(o){return new aJ(this.features[o],this.extent)}}class D4{constructor(o){this.layers={};const c=(function(m,v,x=!0){const w=new UY(0),T=[];for(;w.get()<m.length;){const L=bs(m,w,1)[0]>>>0,z=w.get()+L;if(z>m.length)throw new Error(`Block overruns tile: ${z} > ${m.length}`);if(bs(m,w,1)[0]>>>0!=1){w.set(z);continue}const W=nJ(m,w),Q=W[1],ae=W[0].featureTables[0];let se=null,ye=null;const xe=[];let Se=0;for(const ct of ae.columns){const je=ct.name;if(je==="id"){let We=null;if(ct.nullable){const At=gl(m,w),Zt=w.get(),gr=tv(m,At.numValues,w);w.set(Zt+At.byteLength),We=new Nc(gr,At.numValues)}const yt=gl(m,w);Se=yt.decompressedCount,se=iJ(m,ct,w,je,yt,We??Se,x)}else if(je==="geometry"){const We=bs(m,w,1)[0];if(Se===0){const yt=w.get();Se=gl(m,w).decompressedCount,w.set(yt)}ye=XY(m,We,w,Se)}else{const We=eJ(ct)?bs(m,w,1)[0]:1;if(We===0&&ct.type==="scalarType")continue;const yt=QY(m,w,ct,We,Se);if(yt)if(Array.isArray(yt))for(const At of yt)xe.push(At);else xe.push(yt)}}const Fe=new qY(ae.name,ye,se,xe,Q);T.push(Fe),w.set(z)}return T})(new Uint8Array(o));this.layers=c.reduce(((m,v)=>Object.assign(Object.assign({},m),{[v.name]:new oJ(v)})),{})}}class sJ{constructor(o,c){this.feature=o,this.type=o.type,this.properties=o.tags?o.tags:{},this.extent=c,"id"in o&&(typeof o.id=="string"?this.id=parseInt(o.id,10):typeof o.id!="number"||isNaN(o.id)||(this.id=o.id))}loadGeometry(){const o=[],c=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const m of c){const v=[];for(const x of m)v.push(new p(x[0],x[1]));o.push(v)}return o}}const nv="_geojsonTileLayer";function lJ(f,o){o.writeVarintField(15,f.version||1),o.writeStringField(1,f.name||""),o.writeVarintField(5,f.extent||4096);const c={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<f.length;x++)c.feature=f.feature(x),o.writeMessage(2,uJ,c);const m=c.keys;for(const x of m)o.writeStringField(3,x);const v=c.values;for(const x of v)o.writeMessage(4,hJ,x)}function uJ(f,o){if(!f.feature)return;const c=f.feature;c.id!==void 0&&o.writeVarintField(1,c.id),o.writeMessage(2,cJ,f),o.writeVarintField(3,c.type),o.writeMessage(4,fJ,c)}function cJ(f,o){for(const c in f.feature?.properties){let m=f.feature.properties[c],v=f.keycache[c];if(m==null)continue;v===void 0&&(f.keys.push(c),v=f.keys.length-1,f.keycache[c]=v),o.writeVarint(v),typeof m!="string"&&typeof m!="boolean"&&typeof m!="number"&&(m=JSON.stringify(m));const x=typeof m+":"+m;let w=f.valuecache[x];w===void 0&&(f.values.push(m),w=f.values.length-1,f.valuecache[x]=w),o.writeVarint(w)}}function p5(f,o){return(o<<3)+(7&f)}function k4(f){return f<<1^f>>31}function fJ(f,o){const c=f.loadGeometry(),m=f.type;let v=0,x=0;for(const w of c){let T=1;m===1&&(T=w.length),o.writeVarint(p5(1,T));const L=m===3?w.length-1:w.length;for(let z=0;z<L;z++){z===1&&m!==1&&o.writeVarint(p5(2,L-1));const W=w[z].x-v,Q=w[z].y-x;o.writeVarint(k4(W)),o.writeVarint(k4(Q)),v+=W,x+=Q}f.type===3&&o.writeVarint(p5(7,1))}}function hJ(f,o){const c=typeof f;c==="string"?o.writeStringField(1,f):c==="boolean"?o.writeBooleanField(7,f):c==="number"&&(f%1!=0?o.writeDoubleField(3,f):f<0?o.writeSVarintField(6,f):o.writeVarintField(5,f))}class F4{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new er(Ce,16,0),this.grid3D=new er(Ce,16,0),this.featureIndexArray=new Oe,this.promoteId=c}insert(o,c,m,v,x,w){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,v,x);const L=w?this.grid3D:this.grid;for(let z=0;z<c.length;z++){const W=c[z],Q=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<W.length;ae++){const se=W[ae];Q[0]=Math.min(Q[0],se.x),Q[1]=Math.min(Q[1],se.y),Q[2]=Math.max(Q[2],se.x),Q[3]=Math.max(Q[3],se.y)}Q[0]<Ce&&Q[1]<Ce&&Q[2]>=0&&Q[3]>=0&&L.insert(T,Q[0],Q[1],Q[2],Q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new xL(new Qb(this.rawTileData)).layers:new D4(this.rawTileData).layers,this.sourceLayerCoder=new i4(this.vtLayers?Object.keys(this.vtLayers).sort():[nv])),this.vtLayers}query(o,c,m,v){this.loadVTLayers();const x=o.params,w=Ce/o.tileSize/o.scale,T=Oc(x.filter,x.globalState),L=o.queryGeometry,z=o.queryPadding*w,W=ap.fromPoints(L),Q=this.grid.query(W.minX-z,W.minY-z,W.maxX+z,W.maxY+z),ae=ap.fromPoints(o.cameraQueryGeometry).expandBy(z),se=this.grid3D.query(ae.minX,ae.minY,ae.maxX,ae.maxY,((Se,Fe,ct,je)=>(function(We,yt,At,Zt,gr){for(const Sr of We)if(yt<=Sr.x&&At<=Sr.y&&Zt>=Sr.x&&gr>=Sr.y)return!0;const ur=[new p(yt,At),new p(yt,gr),new p(Zt,gr),new p(Zt,At)];if(We.length>2){for(const Sr of ur)if(Em(We,Sr))return!0}for(let Sr=0;Sr<We.length-1;Sr++)if(pK(We[Sr],We[Sr+1],ur))return!0;return!1})(o.cameraQueryGeometry,Se-z,Fe-z,ct+z,je+z)));for(const Se of se)Q.push(Se);Q.sort(dJ);const ye={};let xe;for(let Se=0;Se<Q.length;Se++){const Fe=Q[Se];if(Fe===xe)continue;xe=Fe;const ct=this.featureIndexArray.get(Fe);let je=null;this.loadMatchingFeature(ye,ct.bucketIndex,ct.sourceLayerIndex,ct.featureIndex,T,x.layers,x.availableImages,c,m,v,((We,yt,At)=>(je||(je=xf(We)),yt.queryIntersectsFeature({queryGeometry:L,feature:We,featureState:At,geometry:je,zoom:this.z,transform:o.transform,pixelsToTileUnits:w,pixelPosMatrix:o.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:o.getElevation}))))}return ye}loadMatchingFeature(o,c,m,v,x,w,T,L,z,W,Q){const ae=this.bucketLayerIDs[c];if(w&&!ae.some((Se=>w.has(Se))))return;const se=this.sourceLayerCoder.decode(m),ye=this.vtLayers[se].feature(v);if(x.needGeometry){const Se=wf(ye,!0);if(!x.filter(new Hn(this.tileID.overscaledZ),Se,this.tileID.canonical))return}else if(!x.filter(new Hn(this.tileID.overscaledZ),ye))return;const xe=this.getId(ye,se);for(let Se=0;Se<ae.length;Se++){const Fe=ae[Se];if(w&&!w.has(Fe))continue;const ct=L[Fe];if(!ct)continue;let je={};xe&&W&&(je=W.getState(ct.sourceLayer||nv,xe));const We=It({},z[Fe]);We.paint=N4(We.paint,ct.paint,ye,je,T),We.layout=N4(We.layout,ct.layout,ye,je,T);const yt=!Q||Q(ye,ct,je);if(!yt)continue;const At=new a4(ye,this.z,this.x,this.y,xe);At.layer=We;let Zt=o[Fe];Zt===void 0&&(Zt=o[Fe]=[]),Zt.push({featureIndex:v,feature:At,intersectionZ:yt})}}lookupSymbolFeatures(o,c,m,v,x,w,T,L){const z={};this.loadVTLayers();const W=Oc(x.filterSpec,x.globalState);for(const Q of o)this.loadMatchingFeature(z,m,v,Q,W,w,T,L,c);return z}hasLayer(o){for(const c of this.bucketLayerIDs)for(const m of c)if(o===m)return!0;return!1}getId(o,c){var m;let v=o.id;return this.promoteId&&(v=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((m=o.properties)===null||m===void 0)&&m.cluster)&&this.promoteId&&(v=Number(o.properties.cluster_id))),v}}function N4(f,o,c,m,v){return rt(f,((x,w)=>{const T=o instanceof Wa?o.get(w):null;return T&&T.evaluate?T.evaluate(c,m,v):T}))}function dJ(f,o){return o-f}function B4(f,o,c,m,v){const x=[];for(let w=0;w<f.length;w++){const T=f[w];let L;for(let z=0;z<T.length-1;z++){let W=T[z],Q=T[z+1];W.x<o&&Q.x<o||(W.x<o?W=new p(o,W.y+(o-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x<o&&(Q=new p(o,W.y+(o-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y<c&&Q.y<c||(W.y<c?W=new p(W.x+(c-W.y)/(Q.y-W.y)*(Q.x-W.x),c)._round():Q.y<c&&(Q=new p(W.x+(c-W.y)/(Q.y-W.y)*(Q.x-W.x),c)._round()),W.x>=m&&Q.x>=m||(W.x>=m?W=new p(m,W.y+(m-W.x)/(Q.x-W.x)*(Q.y-W.y))._round():Q.x>=m&&(Q=new p(m,W.y+(m-W.x)/(Q.x-W.x)*(Q.y-W.y))._round()),W.y>=v&&Q.y>=v||(W.y>=v?W=new p(W.x+(v-W.y)/(Q.y-W.y)*(Q.x-W.x),v)._round():Q.y>=v&&(Q=new p(W.x+(v-W.y)/(Q.y-W.y)*(Q.x-W.x),v)._round()),L&&W.equals(L[L.length-1])||(L=[W],x.push(L)),L.push(Q)))))}}return x}function j4(f,o,c,m,v){switch(o){case 1:return(function(x,w,T,L){const z=[];for(const W of x)for(const Q of W){const ae=L===0?Q.x:Q.y;ae>=w&&ae<=T&&z.push([Q])}return z})(f,c,m,v);case 2:return z4(f,c,m,v,!1);case 3:return z4(f,c,m,v,!0)}return[]}function pJ(f,o,c,m,v){const x=m===0?mJ:gJ;let w=[];const T=[];for(let W=0;W<f.length-1;W++){const Q=f[W],ae=f[W+1],se=m===0?Q.x:Q.y,ye=m===0?ae.x:ae.y;let xe=!1;se<o?ye>o&&w.push(x(Q,ae,o)):se>c?ye<c&&w.push(x(Q,ae,c)):w.push(Q),ye<o&&se>=o&&(w.push(x(Q,ae,o)),xe=!0),ye>c&&se<=c&&(w.push(x(Q,ae,c)),xe=!0),!v&&xe&&(T.push(w),w=[])}const L=f.length-1,z=m===0?f[L].x:f[L].y;return z>=o&&z<=c&&w.push(f[L]),v&&w.length>0&&!w[0].equals(w[w.length-1])&&w.push(new p(w[0].x,w[0].y)),w.length>0&&T.push(w),T}function z4(f,o,c,m,v){const x=[];for(const w of f){const T=pJ(w,o,c,m,v);T.length>0&&x.push(...T)}return x}function mJ(f,o,c){return new p(c,f.y+(c-f.x)/(o.x-f.x)*(o.y-f.y))}function gJ(f,o,c){return new p(f.x+(c-f.y)/(o.y-f.y)*(o.x-f.x),c)}pt("FeatureIndex",F4,{omit:["rawTileData","sourceLayerCoder"]});class id extends p{constructor(o,c,m,v){super(o,c),this.angle=m,v!==void 0&&(this.segment=v)}clone(){return new id(this.x,this.y,this.angle,this.segment)}}function $4(f,o,c,m,v){if(o.segment===void 0||c===0)return!0;let x=o,w=o.segment+1,T=0;for(;T>-c/2;){if(w--,w<0)return!1;T-=f[w].dist(x),x=f[w]}T+=f[w].dist(f[w+1]),w++;const L=[];let z=0;for(;T<c/2;){const W=f[w],Q=f[w+1];if(!Q)return!1;let ae=f[w-1].angleTo(W)-W.angleTo(Q);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:T,angleDelta:ae}),z+=ae;T-L[0].distance>m;)z-=L.shift().angleDelta;if(z>v)return!1;w++,T+=W.dist(Q)}return!0}function q4(f){let o=0;for(let c=0;c<f.length-1;c++)o+=f[c].dist(f[c+1]);return o}function U4(f,o,c){return f?.6*o*c:0}function V4(f,o){return Math.max(f?f.right-f.left:0,o?o.right-o.left:0)}function yJ(f,o,c,m,v,x){const w=U4(c,v,x),T=V4(c,m)*x;let L=0;const z=q4(f)/2;for(let W=0;W<f.length-1;W++){const Q=f[W],ae=f[W+1],se=Q.dist(ae);if(L+se>z){const ye=(z-L)/se,xe=_n.number(Q.x,ae.x,ye),Se=_n.number(Q.y,ae.y,ye),Fe=new id(xe,Se,ae.angleTo(Q),W);return Fe._round(),!w||$4(f,Fe,T,w,o)?Fe:void 0}L+=se}}function vJ(f,o,c,m,v,x,w,T,L){const z=U4(m,x,w),W=V4(m,v),Q=W*w,ae=f[0].x===0||f[0].x===L||f[0].y===0||f[0].y===L;return o-Q<o/4&&(o=Q+o/4),G4(f,ae?o/2*T%o:(W/2+2*x)*w*T%o,o,z,c,Q,ae,!1,L)}function G4(f,o,c,m,v,x,w,T,L){const z=x/2,W=q4(f);let Q=0,ae=o-c,se=[];for(let ye=0;ye<f.length-1;ye++){const xe=f[ye],Se=f[ye+1],Fe=xe.dist(Se),ct=Se.angleTo(xe);for(;ae+c<Q+Fe;){ae+=c;const je=(ae-Q)/Fe,We=_n.number(xe.x,Se.x,je),yt=_n.number(xe.y,Se.y,je);if(We>=0&&We<L&&yt>=0&&yt<L&&ae-z>=0&&ae+z<=W){const At=new id(We,yt,ct,ye);At._round(),m&&!$4(f,At,x,m,v)||se.push(At)}}Q+=Fe}return T||se.length||w||(se=G4(f,Q/2,c,m,v,x,w,!0,L)),se}function H4(f,o,c,m){const v=[],x=f.image,w=x.pixelRatio,T=x.paddedRect.w-2,L=x.paddedRect.h-2;let z={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const W=x.stretchX||[[0,T]],Q=x.stretchY||[[0,L]],ae=(ir,nn)=>ir+nn[1]-nn[0],se=W.reduce(ae,0),ye=Q.reduce(ae,0),xe=T-se,Se=L-ye;let Fe=0,ct=se,je=0,We=ye,yt=0,At=xe,Zt=0,gr=Se;if(x.content&&m){const ir=x.content,nn=ir[2]-ir[0],Xr=ir[3]-ir[1];(x.textFitWidth||x.textFitHeight)&&(z=$L(f)),Fe=f_(W,0,ir[0]),je=f_(Q,0,ir[1]),ct=f_(W,ir[0],ir[2]),We=f_(Q,ir[1],ir[3]),yt=ir[0]-Fe,Zt=ir[1]-je,At=nn-ct,gr=Xr-We}const ur=z.x1,Sr=z.y1,zr=z.x2-ur,Cr=z.y2-Sr,dr=(ir,nn,Xr,an)=>{const Hr=h_(ir.stretch-Fe,ct,zr,ur),vn=d_(ir.fixed-yt,At,ir.stretch,se),Ai=h_(nn.stretch-je,We,Cr,Sr),si=d_(nn.fixed-Zt,gr,nn.stretch,ye),Da=h_(Xr.stretch-Fe,ct,zr,ur),Fs=d_(Xr.fixed-yt,At,Xr.stretch,se),wo=h_(an.stretch-je,We,Cr,Sr),ka=d_(an.fixed-Zt,gr,an.stretch,ye),Ca=new p(Hr,Ai),zi=new p(Da,Ai),Xa=new p(Da,wo),io=new p(Hr,wo),ma=new p(vn/w,si/w),zl=new p(Fs/w,ka/w),Ns=o*Math.PI/180;if(Ns){const es=Math.sin(Ns),$a=Math.cos(Ns),So=[$a,-es,es,$a];Ca._matMult(So),zi._matMult(So),io._matMult(So),Xa._matMult(So)}const $l=ir.stretch+ir.fixed,uc=nn.stretch+nn.fixed;return{tl:Ca,tr:zi,bl:io,br:Xa,tex:{x:x.paddedRect.x+1+$l,y:x.paddedRect.y+1+uc,w:Xr.stretch+Xr.fixed-$l,h:an.stretch+an.fixed-uc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ma,pixelOffsetBR:zl,minFontScaleX:At/w/zr,minFontScaleY:gr/w/Cr,isSDF:c}};if(m&&(x.stretchX||x.stretchY)){const ir=W4(W,xe,se),nn=W4(Q,Se,ye);for(let Xr=0;Xr<ir.length-1;Xr++){const an=ir[Xr],Hr=ir[Xr+1];for(let vn=0;vn<nn.length-1;vn++)v.push(dr(an,nn[vn],Hr,nn[vn+1]))}}else v.push(dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:L+1}));return v}function f_(f,o,c){let m=0;for(const v of f)m+=Math.max(o,Math.min(c,v[1]))-Math.max(o,Math.min(c,v[0]));return m}function W4(f,o,c){const m=[{fixed:-1,stretch:0}];for(const[v,x]of f){const w=m[m.length-1];m.push({fixed:v-w.stretch,stretch:w.stretch}),m.push({fixed:v-w.stretch,stretch:w.stretch+(x-v)})}return m.push({fixed:o+1,stretch:c}),m}function h_(f,o,c,m){return f/o*c+m}function d_(f,o,c,m){return f-o*c/m}pt("Anchor",id);class p_{constructor(o,c,m,v,x,w,T,L,z,W){var Q;if(this.boxStartIndex=o.length,z){let ae=w.top,se=w.bottom;const ye=w.collisionPadding;ye&&(ae-=ye[1],se+=ye[3]);let xe=se-ae;xe>0&&(xe=Math.max(10,xe),this.circleDiameter=xe)}else{const ae=!((Q=w.image)===null||Q===void 0)&&Q.content&&(w.image.textFitWidth||w.image.textFitHeight)?$L(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};ae.y1=ae.y1*T-L[0],ae.y2=ae.y2*T+L[2],ae.x1=ae.x1*T-L[3],ae.x2=ae.x2*T+L[1];const se=w.collisionPadding;if(se&&(ae.x1-=se[0]*T,ae.y1-=se[1]*T,ae.x2+=se[2]*T,ae.y2+=se[3]*T),W){const ye=new p(ae.x1,ae.y1),xe=new p(ae.x2,ae.y1),Se=new p(ae.x1,ae.y2),Fe=new p(ae.x2,ae.y2),ct=W*Math.PI/180;ye._rotate(ct),xe._rotate(ct),Se._rotate(ct),Fe._rotate(ct),ae.x1=Math.min(ye.x,xe.x,Se.x,Fe.x),ae.x2=Math.max(ye.x,xe.x,Se.x,Fe.x),ae.y1=Math.min(ye.y,xe.y,Se.y,Fe.y),ae.y2=Math.max(ye.y,xe.y,Se.y,Fe.y)}o.emplaceBack(c.x,c.y,ae.x1,ae.y1,ae.x2,ae.y2,m,v,x)}this.boxEndIndex=o.length}}class bJ{constructor(o=[],c=(m,v)=>m<v?-1:m>v?1:0){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:c,compare:m}=this,v=c[o];for(;o>0;){const x=o-1>>1,w=c[x];if(m(v,w)>=0)break;c[o]=w,o=x}c[o]=v}_down(o){const{data:c,compare:m}=this,v=this.length>>1,x=c[o];for(;o<v;){let w=1+(o<<1);const T=w+1;if(T<this.length&&m(c[T],c[w])<0&&(w=T),m(c[w],x)>=0)break;c[o]=c[w],o=w}c[o]=x}}function _J(f,o=1,c=!1){const m=ap.fromPoints(f[0]),v=Math.min(m.width(),m.height());let x=v/2;const w=new bJ([],xJ),{minX:T,minY:L,maxX:z,maxY:W}=m;if(v===0)return new p(T,L);for(let se=T;se<z;se+=v)for(let ye=L;ye<W;ye+=v)w.push(new Nm(se+x,ye+x,x,f));let Q=(function(se){let ye=0,xe=0,Se=0;const Fe=se[0];for(let ct=0,je=Fe.length,We=je-1;ct<je;We=ct++){const yt=Fe[ct],At=Fe[We],Zt=yt.x*At.y-At.x*yt.y;xe+=(yt.x+At.x)*Zt,Se+=(yt.y+At.y)*Zt,ye+=3*Zt}return new Nm(xe/ye,Se/ye,0,se)})(f),ae=w.length;for(;w.length;){const se=w.pop();(se.d>Q.d||!Q.d)&&(Q=se,c&&console.log("found best %d after %d probes",Math.round(1e4*se.d)/1e4,ae)),se.max-Q.d<=o||(x=se.h/2,w.push(new Nm(se.p.x-x,se.p.y-x,x,f)),w.push(new Nm(se.p.x+x,se.p.y-x,x,f)),w.push(new Nm(se.p.x-x,se.p.y+x,x,f)),w.push(new Nm(se.p.x+x,se.p.y+x,x,f)),ae+=4)}return c&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${Q.d}`)),Q.p}function xJ(f,o){return o.max-f.max}function Nm(f,o,c,m){this.p=new p(f,o),this.h=c,this.d=(function(v,x){let w=!1,T=1/0;for(let L=0;L<x.length;L++){const z=x[L];for(let W=0,Q=z.length,ae=Q-1;W<Q;ae=W++){const se=z[W],ye=z[ae];se.y>v.y!=ye.y>v.y&&v.x<(ye.x-se.x)*(v.y-se.y)/(ye.y-se.y)+se.x&&(w=!w),T=Math.min(T,JR(v,se,ye))}}return(w?1:-1)*Math.sqrt(T)})(this.p,m),this.max=this.d+this.h*Math.SQRT2}var ks;u.aP=void 0,(ks=u.aP||(u.aP={}))[ks.center=1]="center",ks[ks.left=2]="left",ks[ks.right=3]="right",ks[ks.top=4]="top",ks[ks.bottom=5]="bottom",ks[ks["top-left"]=6]="top-left",ks[ks["top-right"]=7]="top-right",ks[ks["bottom-left"]=8]="bottom-left",ks[ks["bottom-right"]=9]="bottom-right";const m5=Number.POSITIVE_INFINITY;function Z4(f,o){return o[1]!==m5?(function(c,m,v){let x=0,w=0;switch(m=Math.abs(m),v=Math.abs(v),c){case"top-right":case"top-left":case"top":w=v-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-v}switch(c){case"top-right":case"bottom-right":case"right":x=-m;break;case"top-left":case"bottom-left":case"left":x=m}return[x,w]})(f,o[0],o[1]):(function(c,m){let v=0,x=0;m<0&&(m=0);const w=m/Math.SQRT2;switch(c){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-m;break;case"top":x=m-7}switch(c){case"top-right":case"bottom-right":v=-w;break;case"top-left":case"bottom-left":v=w;break;case"left":v=m;break;case"right":v=-m}return[v,x]})(f,o[0])}function X4(f,o,c){var m;const v=f.layout,x=(m=v.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(o,{},c);if(x){const T=x.values,L=[];for(let z=0;z<T.length;z+=2){const W=L[z]=T[z],Q=T[z+1].map((ae=>ae*Yo));W.startsWith("top")?Q[1]-=7:W.startsWith("bottom")&&(Q[1]+=7),L[z+1]=Q}return new Ji(L)}const w=v.get("text-variable-anchor");if(w){let T;T=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(o,{},c)*Yo,m5]:v.get("text-offset").evaluate(o,{},c).map((z=>z*Yo));const L=[];for(const z of w)L.push(z,Z4(z,T));return new Ji(L)}return null}function g5(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wJ(f,o,c,m,v,x,w,T,L,z,W,Q){let ae=x.textMaxSize.evaluate(o,{});ae===void 0&&(ae=w);const se=f.layers[0].layout,ye=se.get("icon-offset").evaluate(o,{},W),xe=Y4(c.horizontal),Se=w/24,Fe=f.tilePixelRatio*Se,ct=f.tilePixelRatio*ae/24,je=f.tilePixelRatio*T,We=f.tilePixelRatio*se.get("symbol-spacing"),yt=se.get("text-padding")*f.tilePixelRatio,At=(function(Xr,an,Hr,vn=1){const Ai=Xr.get("icon-padding").evaluate(an,{},Hr),si=Ai&&Ai.values;return[si[0]*vn,si[1]*vn,si[2]*vn,si[3]*vn]})(se,o,W,f.tilePixelRatio),Zt=se.get("text-max-angle")/180*Math.PI,gr=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",ur=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",Sr=se.get("symbol-placement"),zr=We/2,Cr=se.get("icon-text-fit");let dr;m&&Cr!=="none"&&(f.allowVerticalPlacement&&c.vertical&&(dr=qL(m,c.vertical,Cr,se.get("icon-text-fit-padding"),ye,Se)),xe&&(m=qL(m,xe,Cr,se.get("icon-text-fit-padding"),ye,Se)));const ir=W?Q.line.getGranularityForZoomLevel(W.z):1,nn=(Xr,an)=>{an.x<0||an.x>=Ce||an.y<0||an.y>=Ce||(function(Hr,vn,Ai,si,Da,Fs,wo,ka,Ca,zi,Xa,io,ma,zl,Ns,$l,uc,es,$a,So,Ka,ts,dh,Bc,ov){const ad=Hr.addToLineVertexArray(vn,Ai);let lp,Bm,jm,zm,tD=0,rD=0,nD=0,iD=0,E5=-1,C5=-1;const ph={};let aD=no("");if(Hr.allowVerticalPlacement&&si.vertical){const Ks=ka.layout.get("text-rotate").evaluate(Ka,{},Bc)+90;jm=new p_(Ca,vn,zi,Xa,io,si.vertical,ma,zl,Ns,Ks),wo&&(zm=new p_(Ca,vn,zi,Xa,io,wo,uc,es,Ns,Ks))}if(Da){const Ks=ka.layout.get("icon-rotate").evaluate(Ka,{}),Du=ka.layout.get("icon-text-fit")!=="none",up=H4(Da,Ks,dh,Du),zc=wo?H4(wo,Ks,dh,Du):void 0;Bm=new p_(Ca,vn,zi,Xa,io,Da,uc,es,!1,Ks),tD=4*up.length;const cp=Hr.iconSizeData;let Sf=null;cp.kind==="source"?(Sf=[fh*ka.layout.get("icon-size").evaluate(Ka,{})],Sf[0]>td&&dt(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):cp.kind==="composite"&&(Sf=[fh*ts.compositeIconSizes[0].evaluate(Ka,{},Bc),fh*ts.compositeIconSizes[1].evaluate(Ka,{},Bc)],(Sf[0]>td||Sf[1]>td)&&dt(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Hr.addSymbols(Hr.icon,up,Sf,So,$a,Ka,u.az.none,vn,ad.lineStartIndex,ad.lineLength,-1,Bc),E5=Hr.icon.placedSymbolArray.length-1,zc&&(rD=4*zc.length,Hr.addSymbols(Hr.icon,zc,Sf,So,$a,Ka,u.az.vertical,vn,ad.lineStartIndex,ad.lineLength,-1,Bc),C5=Hr.icon.placedSymbolArray.length-1)}const oD=Object.keys(si.horizontal);for(const Ks of oD){const Du=si.horizontal[Ks];if(!lp){aD=no(Du.text);const zc=ka.layout.get("text-rotate").evaluate(Ka,{},Bc);lp=new p_(Ca,vn,zi,Xa,io,Du,ma,zl,Ns,zc)}const up=Du.positionedLines.length===1;if(nD+=K4(Hr,vn,Du,Fs,ka,Ns,Ka,$l,ad,si.vertical?u.az.horizontal:u.az.horizontalOnly,up?oD:[Ks],ph,E5,ts,Bc),up)break}si.vertical&&(iD+=K4(Hr,vn,si.vertical,Fs,ka,Ns,Ka,$l,ad,u.az.vertical,["vertical"],ph,C5,ts,Bc));const CJ=lp?lp.boxStartIndex:Hr.collisionBoxArray.length,AJ=lp?lp.boxEndIndex:Hr.collisionBoxArray.length,TJ=jm?jm.boxStartIndex:Hr.collisionBoxArray.length,PJ=jm?jm.boxEndIndex:Hr.collisionBoxArray.length,IJ=Bm?Bm.boxStartIndex:Hr.collisionBoxArray.length,MJ=Bm?Bm.boxEndIndex:Hr.collisionBoxArray.length,OJ=zm?zm.boxStartIndex:Hr.collisionBoxArray.length,RJ=zm?zm.boxEndIndex:Hr.collisionBoxArray.length;let jc=-1;const g_=(Ks,Du)=>Ks&&Ks.circleDiameter?Math.max(Ks.circleDiameter,Du):Du;jc=g_(lp,jc),jc=g_(jm,jc),jc=g_(Bm,jc),jc=g_(zm,jc);const sD=jc>-1?1:0;sD&&(jc*=ov/Yo),Hr.glyphOffsetArray.length>=Om.MAX_GLYPHS&&dt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ka.sortKey!==void 0&&Hr.addToSortKeyRanges(Hr.symbolInstances.length,Ka.sortKey);const LJ=X4(ka,Ka,Bc),[DJ,kJ]=(function(Ks,Du){const up=Ks.length,zc=Du?.values;if(zc?.length>0)for(let cp=0;cp<zc.length;cp+=2){const Sf=zc[cp+1];Ks.emplaceBack(u.aP[zc[cp]],Sf[0],Sf[1])}return[up,Ks.length]})(Hr.textAnchorOffsets,LJ);Hr.symbolInstances.emplaceBack(vn.x,vn.y,ph.right>=0?ph.right:-1,ph.center>=0?ph.center:-1,ph.left>=0?ph.left:-1,ph.vertical||-1,E5,C5,aD,CJ,AJ,TJ,PJ,IJ,MJ,OJ,RJ,zi,nD,iD,tD,rD,sD,0,ma,jc,DJ,kJ)})(f,an,Xr,c,m,v,dr,f.layers[0],f.collisionBoxArray,o.index,o.sourceLayerIndex,f.index,Fe,[yt,yt,yt,yt],gr,L,je,At,ur,ye,o,x,z,W,w)};if(Sr==="line")for(const Xr of B4(o.geometry,0,0,Ce,Ce)){const an=ip(Xr,ir),Hr=vJ(an,We,Zt,c.vertical||xe,m,24,ct,f.overscaling,Ce);for(const vn of Hr)xe&&SJ(f,xe.text,zr,vn)||nn(an,vn)}else if(Sr==="line-center"){for(const Xr of o.geometry)if(Xr.length>1){const an=ip(Xr,ir),Hr=yJ(an,Zt,c.vertical||xe,m,24,ct);Hr&&nn(an,Hr)}}else if(o.type==="Polygon")for(const Xr of Rl(o.geometry,0)){const an=_J(Xr,16);nn(ip(Xr[0],ir,!0),new id(an.x,an.y,0))}else if(o.type==="LineString")for(const Xr of o.geometry){const an=ip(Xr,ir);nn(an,new id(an[0].x,an[0].y,0))}else if(o.type==="Point")for(const Xr of o.geometry)for(const an of Xr)nn([an],new id(an.x,an.y,0))}function K4(f,o,c,m,v,x,w,T,L,z,W,Q,ae,se,ye){const xe=(function(ct,je,We,yt,At,Zt,gr,ur){const Sr=yt.layout.get("text-rotate").evaluate(Zt,{})*Math.PI/180,zr=[];for(const Cr of je.positionedLines)for(const dr of Cr.positionedGlyphs){if(!dr.rect)continue;const ir=dr.rect||{};let nn=4,Xr=!0,an=1,Hr=0;const vn=(At||ur)&&dr.vertical,Ai=dr.metrics.advance*dr.scale/2;if(ur&&je.verticalizable&&(Hr=Cr.lineOffset/2-(dr.imageName?-(Yo-dr.metrics.width*dr.scale)/2:(dr.scale-1)*Yo)),dr.imageName){const es=gr[dr.imageName];Xr=es.sdf,an=es.pixelRatio,nn=1/an}const si=At?[dr.x+Ai,dr.y]:[0,0];let Da=At?[0,0]:[dr.x+Ai+We[0],dr.y+We[1]-Hr],Fs=[0,0];vn&&(Fs=Da,Da=[0,0]);const wo=dr.metrics.isDoubleResolution?2:1,ka=(dr.metrics.left-nn)*dr.scale-Ai+Da[0],Ca=(-dr.metrics.top-nn)*dr.scale+Da[1],zi=ka+ir.w/wo*dr.scale/an,Xa=Ca+ir.h/wo*dr.scale/an,io=new p(ka,Ca),ma=new p(zi,Ca),zl=new p(ka,Xa),Ns=new p(zi,Xa);if(vn){const es=new p(-Ai,Ai- -17),$a=-Math.PI/2,So=12-Ai,Ka=new p(22-So,-(dr.imageName?So:0)),ts=new p(...Fs);io._rotateAround($a,es)._add(Ka)._add(ts),ma._rotateAround($a,es)._add(Ka)._add(ts),zl._rotateAround($a,es)._add(Ka)._add(ts),Ns._rotateAround($a,es)._add(Ka)._add(ts)}if(Sr){const es=Math.sin(Sr),$a=Math.cos(Sr),So=[$a,-es,es,$a];io._matMult(So),ma._matMult(So),zl._matMult(So),Ns._matMult(So)}const $l=new p(0,0),uc=new p(0,0);zr.push({tl:io,tr:ma,bl:zl,br:Ns,tex:ir,writingMode:je.writingMode,glyphOffset:si,sectionIndex:dr.sectionIndex,isSDF:Xr,pixelOffsetTL:$l,pixelOffsetBR:uc,minFontScaleX:0,minFontScaleY:0})}return zr})(0,c,T,v,x,w,m,f.allowVerticalPlacement),Se=f.textSizeData;let Fe=null;Se.kind==="source"?(Fe=[fh*v.layout.get("text-size").evaluate(w,{})],Fe[0]>td&&dt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Se.kind==="composite"&&(Fe=[fh*se.compositeTextSizes[0].evaluate(w,{},ye),fh*se.compositeTextSizes[1].evaluate(w,{},ye)],(Fe[0]>td||Fe[1]>td)&&dt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,xe,Fe,T,x,w,z,o,L.lineStartIndex,L.lineLength,ae,ye);for(const ct of W)Q[ct]=f.text.placedSymbolArray.length-1;return 4*xe.length}function Y4(f){for(const o in f)return f[o];return null}function SJ(f,o,c,m){const v=f.compareText;if(o in v){const x=v[o];for(let w=x.length-1;w>=0;w--)if(m.dist(x[w])<c)return!0}else v[o]=[];return v[o].push(m),!1}const J4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class y5{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,m]=new Uint8Array(o,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=m>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const x=J4[15&m];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[T]=new Uint32Array(o,4,1);return new y5(T,w,x,o)}constructor(o,c=64,m=Float64Array,v){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=m,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const x=J4.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,T=o*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${m}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+T+L,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+T+L),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+T+L,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=o,this.coords[this._pos++]=c,m}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return v5(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,m,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:T}=this,L=[0,x.length-1,0],z=[];for(;L.length;){const W=L.pop()||0,Q=L.pop()||0,ae=L.pop()||0;if(Q-ae<=T){for(let Se=ae;Se<=Q;Se++){const Fe=w[2*Se],ct=w[2*Se+1];Fe>=o&&Fe<=m&&ct>=c&&ct<=v&&z.push(x[Se])}continue}const se=ae+Q>>1,ye=w[2*se],xe=w[2*se+1];ye>=o&&ye<=m&&xe>=c&&xe<=v&&z.push(x[se]),(W===0?o<=ye:c<=xe)&&(L.push(ae),L.push(se-1),L.push(1-W)),(W===0?m>=ye:v>=xe)&&(L.push(se+1),L.push(Q),L.push(1-W))}return z}within(o,c,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,T=[0,v.length-1,0],L=[],z=m*m;for(;T.length;){const W=T.pop()||0,Q=T.pop()||0,ae=T.pop()||0;if(Q-ae<=w){for(let Se=ae;Se<=Q;Se++)eD(x[2*Se],x[2*Se+1],o,c)<=z&&L.push(v[Se]);continue}const se=ae+Q>>1,ye=x[2*se],xe=x[2*se+1];eD(ye,xe,o,c)<=z&&L.push(v[se]),(W===0?o-m<=ye:c-m<=xe)&&(T.push(ae),T.push(se-1),T.push(1-W)),(W===0?o+m>=ye:c+m>=xe)&&(T.push(se+1),T.push(Q),T.push(1-W))}return L}}function v5(f,o,c,m,v,x){if(v-m<=c)return;const w=m+v>>1;Q4(f,o,w,m,v,x),v5(f,o,c,m,w-1,1-x),v5(f,o,c,w+1,v,1-x)}function Q4(f,o,c,m,v,x){for(;v>m;){if(v-m>600){const z=v-m+1,W=c-m+1,Q=Math.log(z),ae=.5*Math.exp(2*Q/3),se=.5*Math.sqrt(Q*ae*(z-ae)/z)*(W-z/2<0?-1:1);Q4(f,o,c,Math.max(m,Math.floor(c-W*ae/z+se)),Math.min(v,Math.floor(c+(z-W)*ae/z+se)),x)}const w=o[2*c+x];let T=m,L=v;for(iv(f,o,m,c),o[2*v+x]>w&&iv(f,o,m,v);T<L;){for(iv(f,o,T,L),T++,L--;o[2*T+x]<w;)T++;for(;o[2*L+x]>w;)L--}o[2*m+x]===w?iv(f,o,m,L):(L++,iv(f,o,L,v)),L<=c&&(m=L+1),c<=L&&(v=L-1)}}function iv(f,o,c,m){b5(f,c,m),b5(o,2*c,2*m),b5(o,2*c+1,2*m+1)}function b5(f,o,c){const m=f[o];f[o]=f[c],f[c]=m}function eD(f,o,c,m){const v=f-c,x=o-m;return v*v+x*x}var _5;u.cH=void 0,(_5=u.cH||(u.cH={})).create="create",_5.load="load",_5.fullLoad="fullLoad";let m_=null,av=[];const x5=1e3/60,w5="loadTime",S5="fullLoadTime",EJ={mark(f){performance.mark(f)},frame(f){const o=f;m_!=null&&av.push(o-m_),m_=o},clearMetrics(){m_=null,av=[],performance.clearMeasures(w5),performance.clearMeasures(S5);for(const f in u.cH)performance.clearMarks(u.cH[f])},getPerformanceMetrics(){performance.measure(w5,u.cH.create,u.cH.load),performance.measure(S5,u.cH.create,u.cH.fullLoad);const f=performance.getEntriesByName(w5)[0].duration,o=performance.getEntriesByName(S5)[0].duration,c=av.length,m=1/(av.reduce(((x,w)=>x+w),0)/c/1e3),v=av.filter((x=>x>x5)).reduce(((x,w)=>x+(w-x5)/x5),0);return{loadTime:f,fullLoadTime:o,fps:m,percentDroppedFrames:v/(c+v)*100,totalFrames:c}}};u.$=P,u.A=B,u.B=Bt,u.C=Re,u.D=rn,u.E=Kr,u.F=function([f,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:f*Math.cos(o)*Math.sin(c),y:f*Math.sin(o)*Math.sin(c),z:f*Math.cos(c)}},u.G=_n,u.H=Hn,u.I=Uw,u.J=He,u.K=function(f){if(sr==null){const o=f.navigator?f.navigator.userAgent:null;sr=!!f.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return sr},u.L=class{constructor(f,o){this.target=f,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new jY((()=>this.process())),this.subscription=Nt(this.target,"message",(c=>this.receive(c)),!1),this.globalScope=fr(self)?f:window}registerMessageHandler(f,o){this.messageHandlers[f]=o}unregisterMessageHandler(f){delete this.messageHandlers[f]}sendAsync(f,o){return new Promise(((c,m)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=o?Nt(o.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[v];const L={id:v,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)}),zY):null;this.resolveRejects[v]={resolve:L=>{x?.unsubscribe(),c(L)},reject:L=>{x?.unsubscribe(),m(L)}};const w=[],T=Object.assign(Object.assign({},f),{id:v,sourceMapId:this.mapId,origin:location.origin,data:vr(f.data,w)});this.target.postMessage(T,{transfer:w})}))}receive(f){const o=f.data,c=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[c];const m=this.abortControllers[c];return delete this.abortControllers[c],void(m&&m.abort())}if(fr(self)||o.mustQueue)return this.tasks[c]=o,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,o)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),o=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(f,o)}processTask(f,o){return a(this,void 0,void 0,(function*(){if(o.type==="<response>"){const v=this.resolveRejects[f];return delete this.resolveRejects[f],v?void(o.error?v.reject(_r(o.error)):v.resolve(_r(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=_r(o.data),m=new AbortController;this.abortControllers[f]=m;try{const v=yield this.messageHandlers[o.type](o.sourceMapId,c,m);this.completeTask(f,null,v)}catch(v){this.completeTask(f,v)}}))}completeTask(f,o,c){const m=[];delete this.abortControllers[f];const v={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?vr(o):null,data:vr(c,m)};this.target.postMessage(v,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.M=bt,u.N=function(){var f=new B(16);return B!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},u.O=function(f,o,c){var m,v,x,w,T,L,z,W,Q,ae,se,ye,xe=c[0],Se=c[1],Fe=c[2];return o===f?(f[12]=o[0]*xe+o[4]*Se+o[8]*Fe+o[12],f[13]=o[1]*xe+o[5]*Se+o[9]*Fe+o[13],f[14]=o[2]*xe+o[6]*Se+o[10]*Fe+o[14],f[15]=o[3]*xe+o[7]*Se+o[11]*Fe+o[15]):(v=o[1],x=o[2],w=o[3],T=o[4],L=o[5],z=o[6],W=o[7],Q=o[8],ae=o[9],se=o[10],ye=o[11],f[0]=m=o[0],f[1]=v,f[2]=x,f[3]=w,f[4]=T,f[5]=L,f[6]=z,f[7]=W,f[8]=Q,f[9]=ae,f[10]=se,f[11]=ye,f[12]=m*xe+T*Se+Q*Fe+o[12],f[13]=v*xe+L*Se+ae*Fe+o[13],f[14]=x*xe+z*Se+se*Fe+o[14],f[15]=w*xe+W*Se+ye*Fe+o[15]),f},u.P=p,u.Q=function(f,o,c){var m=c[0],v=c[1],x=c[2];return f[0]=o[0]*m,f[1]=o[1]*m,f[2]=o[2]*m,f[3]=o[3]*m,f[4]=o[4]*v,f[5]=o[5]*v,f[6]=o[6]*v,f[7]=o[7]*v,f[8]=o[8]*x,f[9]=o[9]*x,f[10]=o[10]*x,f[11]=o[11]*x,f[12]=o[12],f[13]=o[13],f[14]=o[14],f[15]=o[15],f},u.R=jl,u.S=function(f,o,c){var m=o[0],v=o[1],x=o[2],w=o[3],T=o[4],L=o[5],z=o[6],W=o[7],Q=o[8],ae=o[9],se=o[10],ye=o[11],xe=o[12],Se=o[13],Fe=o[14],ct=o[15],je=c[0],We=c[1],yt=c[2],At=c[3];return f[0]=je*m+We*T+yt*Q+At*xe,f[1]=je*v+We*L+yt*ae+At*Se,f[2]=je*x+We*z+yt*se+At*Fe,f[3]=je*w+We*W+yt*ye+At*ct,f[4]=(je=c[4])*m+(We=c[5])*T+(yt=c[6])*Q+(At=c[7])*xe,f[5]=je*v+We*L+yt*ae+At*Se,f[6]=je*x+We*z+yt*se+At*Fe,f[7]=je*w+We*W+yt*ye+At*ct,f[8]=(je=c[8])*m+(We=c[9])*T+(yt=c[10])*Q+(At=c[11])*xe,f[9]=je*v+We*L+yt*ae+At*Se,f[10]=je*x+We*z+yt*se+At*Fe,f[11]=je*w+We*W+yt*ye+At*ct,f[12]=(je=c[12])*m+(We=c[13])*T+(yt=c[14])*Q+(At=c[15])*xe,f[13]=je*v+We*L+yt*ae+At*Se,f[14]=je*x+We*z+yt*se+At*Fe,f[15]=je*w+We*W+yt*ye+At*ct,f},u.T=Dw,u.U=function(f,o){const c={};for(let m=0;m<o.length;m++){const v=o[m];v in f&&(c[v]=f[v])}return c},u.V=rd,u.W=ht,u.X=YL,u.Y=KL,u.Z=Be,u._=a,u.a=Ae,u.a$=le,u.a0=k,u.a1=Ge,u.a2=Ru,u.a3=QL,u.a4=n_,u.a5=Ce,u.a6=function(f,o,c){if(!f)return o||{};if(!o)return f||{};const m=n4(f),v=n4(o);(function(w,T){T.removeAll&&(w.add.clear(),w.update.clear(),w.remove.clear(),T.remove.clear());for(const L of T.remove)w.add.delete(L),w.update.delete(L);for(const[L,z]of T.update){const W=w.update.get(L);W&&(T.update.set(L,$Y(W,z)),w.update.delete(L))}})(m,v);const x={};if((m.removeAll||v.removeAll)&&(x.removeAll=!0),x.remove=new Set([...m.remove,...v.remove]),x.add=new Map([...m.add,...v.add]),x.update=new Map([...m.update,...v.update]),x.remove.size&&x.add.size)for(const w of x.add.keys())x.remove.delete(w);return(function(w){const T={};return w.removeAll&&(T.removeAll=w.removeAll),w.remove&&(T.remove=Array.from(w.remove)),w.add&&(T.add=Array.from(w.add.values())),w.update&&(T.update=Array.from(w.update.values())),T})(x)},u.a7=function(f,o){const c=new Map;if(f==null||f.type==null)return c;if(f.type==="Feature"){const m=Jw(f,o);return m==null?void 0:(c.set(m,f),c)}if(f.type==="FeatureCollection"){const m=new Set;for(const v of f.features){const x=Jw(v,o);if(x==null||m.has(x))return;m.add(x),c.set(x,v)}return c}},u.a8=function(f,o,c){var m,v;const x=[];if(o.removeAll)f.clear();else if(o.remove)for(const w of o.remove){const T=f.get(w);T&&(x.push(T.geometry),f.delete(w))}if(o.add)for(const w of o.add){const T=Jw(w,c);if(T==null)continue;const L=f.get(T);L&&x.push(L.geometry),x.push(w.geometry),f.set(T,w)}if(o.update)for(const w of o.update){const T=f.get(w.id);if(!T)continue;const L=!!w.newGeometry,z=w.removeAllProperties||((m=w.removeProperties)===null||m===void 0?void 0:m.length)>0||((v=w.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0;if(!L&&!z)continue;x.push(T.geometry);const W=Object.assign({},T);if(f.set(w.id,W),L&&(x.push(w.newGeometry),W.geometry=w.newGeometry),z){if(W.properties=w.removeAllProperties?{}:Object.assign({},W.properties||{}),w.removeProperties)for(const Q of w.removeProperties)delete W.properties[Q];if(w.addOrUpdateProperties)for(const{key:Q,value:ae}of w.addOrUpdateProperties)W.properties[Q]=ae}}return x},u.a9=ev,u.aA=function(f,{uSize:o,uSizeT:c},{lowerSize:m,upperSize:v}){return f.kind==="source"?m/fh:f.kind==="composite"?_n.number(m/fh,v/fh,c):o},u.aB=function(f,o){var c=o[0],m=o[1],v=o[2],x=o[3],w=o[4],T=o[5],L=o[6],z=o[7],W=o[8],Q=o[9],ae=o[10],se=o[11],ye=o[12],xe=o[13],Se=o[14],Fe=o[15],ct=c*T-m*w,je=c*L-v*w,We=c*z-x*w,yt=m*L-v*T,At=m*z-x*T,Zt=v*z-x*L,gr=W*xe-Q*ye,ur=W*Se-ae*ye,Sr=W*Fe-se*ye,zr=Q*Se-ae*xe,Cr=Q*Fe-se*xe,dr=ae*Fe-se*Se,ir=ct*dr-je*Cr+We*zr+yt*Sr-At*ur+Zt*gr;return ir?(f[0]=(T*dr-L*Cr+z*zr)*(ir=1/ir),f[1]=(v*Cr-m*dr-x*zr)*ir,f[2]=(xe*Zt-Se*At+Fe*yt)*ir,f[3]=(ae*At-Q*Zt-se*yt)*ir,f[4]=(L*Sr-w*dr-z*ur)*ir,f[5]=(c*dr-v*Sr+x*ur)*ir,f[6]=(Se*We-ye*Zt-Fe*je)*ir,f[7]=(W*Zt-ae*We+se*je)*ir,f[8]=(w*Cr-T*Sr+z*gr)*ir,f[9]=(m*Sr-c*Cr-x*gr)*ir,f[10]=(ye*At-xe*We+Fe*ct)*ir,f[11]=(Q*We-W*At-se*ct)*ir,f[12]=(T*ur-w*zr-L*gr)*ir,f[13]=(c*zr-m*ur+v*gr)*ir,f[14]=(xe*je-ye*yt-Se*ct)*ir,f[15]=(W*yt-Q*je+ae*ct)*ir,f):null},u.aC=Te,u.aD=function(f){var o=f[0],c=f[1];return Math.sqrt(o*o+c*c)},u.aE=function(f){return f[0]=0,f[1]=0,f},u.aF=function(f,o,c){return f[0]=o[0]*c,f[1]=o[1]*c,f},u.aG=Hw,u.aH=ue,u.aI=function(f,o,c,m){const v=o.y-f.y,x=o.x-f.x,w=m.y-c.y,T=m.x-c.x,L=w*x-T*v;if(L===0)return null;const z=(T*(f.y-c.y)-w*(f.x-c.x))/L;return new p(f.x+z*x,f.y+z*v)},u.aJ=B4,u.aK=Sm,u.aL=function(f){let o=1/0,c=1/0,m=-1/0,v=-1/0;for(const x of f)o=Math.min(o,x.x),c=Math.min(c,x.y),m=Math.max(m,x.x),v=Math.max(v,x.y);return[o,c,m,v]},u.aM=Yo,u.aN=$e,u.aO=function(f,o,c,m,v=!1){if(!c[0]&&!c[1])return[0,0];const x=v?m==="map"?-f.bearingInRadians:0:m==="viewport"?f.bearingInRadians:0;if(x){const w=Math.sin(x),T=Math.cos(x);c=[c[0]*T-c[1]*w,c[0]*w+c[1]*T]}return[v?c[0]:$e(o,c[0],f.zoom),v?c[1]:$e(o,c[1],f.zoom)]},u.aQ=Gw,u.aR=g5,u.aS=Vw,u.aT=y5,u.aU=Mi,u.aV=Yb,u.aW=Xe,u.aX=Gr,u.aY=rr,u.aZ=Vt,u.a_=e4,u.aa=ap,u.ab=25,u.ac=Yw,u.ad=f=>{const o=window.document.createElement("video");return o.muted=!0,new Promise((c=>{o.onloadstart=()=>{c(o)};for(const m of f){const v=window.document.createElement("source");kt(m)||(o.crossOrigin="Anonymous"),v.src=m,o.appendChild(v)}}))},u.ae=lt,u.af=function(){return xt++},u.ag=b,u.ah=Om,u.ai=nv,u.aj=Oc,u.ak=wf,u.al=a4,u.am=function(f){const o={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((c,m,v,x)=>{const w=v||x;return o[m]=!w||w.toLowerCase(),""})),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},u.an=Ve,u.ao=85.051129,u.ap=Kt,u.aq=function(f){return Math.pow(2,f)},u.ar=G,u.as=JL,u.at=function(f){return Math.log(f)/Math.LN2},u.au=function(f){var o=f[0],c=f[1];return o*o+c*c},u.av=function(f){if(!f.length)return new Set;const o=Math.max(...f.map((L=>L.canonical.z)));let c=1/0,m=-1/0,v=1/0,x=-1/0;const w=[];for(const L of f){const{x:z,y:W,z:Q}=L.canonical,ae=Math.pow(2,o-Q),se=z*ae,ye=W*ae;w.push({id:L,x:se,y:ye}),se<c&&(c=se),se>m&&(m=se),ye<v&&(v=ye),ye>x&&(x=ye)}const T=new Set;for(const L of w)L.x!==c&&L.x!==m&&L.y!==v&&L.y!==x||T.add(L.id);return T},u.aw=function(f,o){const c=Math.abs(2*f.wrap)-+(f.wrap<0),m=Math.abs(2*o.wrap)-+(o.wrap<0);return f.overscaledZ-o.overscaledZ||m-c||o.canonical.y-f.canonical.y||o.canonical.x-f.canonical.x},u.ax=class{constructor(f,o){this.max=f,this.onRemove=o,this.reset()}reset(){for(const f in this.data)for(const o of this.data[f])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(f,o,c){const m=f.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:o,timeout:void 0};if(c!==void 0&&(v.timeout=setTimeout((()=>{this.remove(f,v)}),c)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(f){return f.wrapped().key in this.data}getAndRemove(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null}_getAndRemoveByKey(f){const o=this.data[f].shift();return o.timeout&&clearTimeout(o.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),o.value}getByKey(f){const o=this.data[f];return o?o[0].value:null}get(f){return this.has(f)?this.data[f.wrapped().key][0].value:null}remove(f,o){if(!this.has(f))return this;const c=f.wrapped().key,m=o===void 0?0:this.data[c].indexOf(o),v=this.data[c][m];return this.data[c].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(v.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(f){for(this.max=f;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(f){const o=[];for(const c in this.data)for(const m of this.data[c])f(m.value)||o.push(m);for(const c of o)this.remove(c.value.tileID,c)}},u.ay=function(f,o){let c=0,m=0;if(f.kind==="constant")m=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:v,minZoom:x,maxZoom:w}=f,T=v?Ve(yn.interpolationFactor(v,o,x,w),0,1):0;f.kind==="camera"?m=_n.number(f.minSize,f.maxSize,T):c=T}return{uSizeT:c,uSize:m}},u.b=xr,u.b$=uh,u.b0=J,u.b1=function(f){var o=new B(3);return o[0]=f[0],o[1]=f[1],o[2]=f[2],o},u.b2=function(f,o,c){return f[0]=o[0]-c[0],f[1]=o[1]-c[1],f[2]=o[2]-c[2],f},u.b3=function(f,o){var c=o[0],m=o[1],v=o[2],x=c*c+m*m+v*v;return x>0&&(x=1/Math.sqrt(x)),f[0]=o[0]*x,f[1]=o[1]*x,f[2]=o[2]*x,f},u.b4=Z,u.b5=function(f,o){return f[0]*o[0]+f[1]*o[1]+f[2]*o[2]},u.b6=function(f,o,c){return f[0]=o[0]*c[0],f[1]=o[1]*c[1],f[2]=o[2]*c[2],f[3]=o[3]*c[3],f},u.b7=X,u.b8=function(f,o,c){const m=o[0]*c[0]+o[1]*c[1]+o[2]*c[2];return m===0?null:(-(f[0]*c[0]+f[1]*c[1]+f[2]*c[2])-c[3])/m},u.b9=oe,u.bA=function(f,o,c,m){return f[0]=o[0]+c[0]*m,f[1]=o[1]+c[1]*m,f[2]=o[2]+c[2]*m,f},u.bB=be,u.bC=function(f,o,c){var m=c[0],v=c[1],x=c[2],w=c[3],T=o[0],L=o[1],z=o[2],W=v*z-x*L,Q=x*T-m*z,ae=m*L-v*T;return f[0]=T+w*(W+=W)+v*(ae+=ae)-x*(Q+=Q),f[1]=L+w*Q+x*W-m*ae,f[2]=z+w*ae+m*Q-v*W,f},u.bD=function(f,o,c){const m=(function(L){var z=L[3],W=L[4],Q=L[5],ae=L[6],se=L[7],ye=L[8];return L[0]*(ye*W-Q*se)+L[1]*(-ye*z+Q*ae)+L[2]*(se*z-W*ae)})([f[0],f[1],f[2],o[0],o[1],o[2],c[0],c[1],c[2]]);if(m===0)return null;const v=Z([],[o[0],o[1],o[2]],[c[0],c[1],c[2]]),x=Z([],[c[0],c[1],c[2]],[f[0],f[1],f[2]]),w=Z([],[f[0],f[1],f[2]],[o[0],o[1],o[2]]),T=le([],v,-f[3]);return J(T,T,le([],x,-o[3])),J(T,T,le([],w,-c[3])),le(T,T,1/m),T},u.bE=Kw,u.bF=function(){return new Float64Array(4)},u.bG=function(f,o,c,m){var v=[],x=[];return v[0]=o[0]-c[0],v[1]=o[1]-c[1],v[2]=o[2]-c[2],x[0]=v[0]*Math.cos(m)-v[1]*Math.sin(m),x[1]=v[0]*Math.sin(m)+v[1]*Math.cos(m),x[2]=v[2],f[0]=x[0]+c[0],f[1]=x[1]+c[1],f[2]=x[2]+c[2],f},u.bH=function(f,o,c,m){var v=[],x=[];return v[0]=o[0]-c[0],v[1]=o[1]-c[1],v[2]=o[2]-c[2],x[0]=v[0],x[1]=v[1]*Math.cos(m)-v[2]*Math.sin(m),x[2]=v[1]*Math.sin(m)+v[2]*Math.cos(m),f[0]=x[0]+c[0],f[1]=x[1]+c[1],f[2]=x[2]+c[2],f},u.bI=function(f,o,c,m){var v=[],x=[];return v[0]=o[0]-c[0],v[1]=o[1]-c[1],v[2]=o[2]-c[2],x[0]=v[2]*Math.sin(m)+v[0]*Math.cos(m),x[1]=v[1],x[2]=v[2]*Math.cos(m)-v[0]*Math.sin(m),f[0]=x[0]+c[0],f[1]=x[1]+c[1],f[2]=x[2]+c[2],f},u.bJ=function(f,o,c){var m=Math.sin(c),v=Math.cos(c),x=o[0],w=o[1],T=o[2],L=o[3],z=o[8],W=o[9],Q=o[10],ae=o[11];return o!==f&&(f[4]=o[4],f[5]=o[5],f[6]=o[6],f[7]=o[7],f[12]=o[12],f[13]=o[13],f[14]=o[14],f[15]=o[15]),f[0]=x*v-z*m,f[1]=w*v-W*m,f[2]=T*v-Q*m,f[3]=L*v-ae*m,f[8]=x*m+z*v,f[9]=w*m+W*v,f[10]=T*m+Q*v,f[11]=L*m+ae*v,f},u.bK=function(f,o){const c=Je(f,360),m=Je(o,360),v=m-c,x=m>c?v-360:v+360;return Math.abs(v)<Math.abs(x)?v:x},u.bL=function(f){return f[0]=0,f[1]=0,f[2]=0,f},u.bM=function(f,o,c,m){const v=Math.sqrt(f*f+o*o),x=Math.sqrt(c*c+m*m);f/=v,o/=v,c/=x,m/=x;const w=Math.acos(f*c+o*m);return-o*c+f*m>0?w:-w},u.bN=function(f,o){const c=Je(f,2*Math.PI),m=Je(o,2*Math.PI);return Math.min(Math.abs(c-m),Math.abs(c-m+2*Math.PI),Math.abs(c-m-2*Math.PI))},u.bO=function(){const f={},o=Rt.$version;for(const c in Rt.$root){const m=Rt.$root[c];if(m.required){let v=null;v=c==="version"?o:m.type==="array"?[]:{},v!=null&&(f[c]=v)}}return f},u.bP=gt,u.bQ=Lr,u.bR=function f(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let m=0;m<o.length;m++)if(!f(o[m],c[m]))return!1;return!0}if(typeof o=="object"&&o!==null&&c!==null){if(typeof c!="object"||Object.keys(o).length!==Object.keys(c).length)return!1;for(const m in o)if(!f(o[m],c[m]))return!1;return!0}return o===c},u.bS=function(f){f=f.slice();const o=Object.create(null);for(let c=0;c<f.length;c++)o[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=Fn(f[c],o[f[c].ref]));return f},u.bT=function(f,o){if(f.type==="custom")return new BY(f,o);switch(f.type){case"background":return new NY(f,o);case"circle":return new xK(f,o);case"color-relief":return new TK(f,o);case"fill":return new qK(f,o);case"fill-extrusion":return new eY(f,o);case"heatmap":return new SK(f,o);case"hillshade":return new CK(f,o);case"line":return new sY(f,o);case"raster":return new Ls(f,o);case"symbol":return new r_(f,o)}},u.bU=f=>f.type==="raster",u.bV=Lt,u.bW=function(f,o){if(!f)return[{command:"setStyle",args:[o]}];let c=[];try{if(!Jr(f.version,o.version))return[{command:"setStyle",args:[o]}];Jr(f.center,o.center)||c.push({command:"setCenter",args:[o.center]}),Jr(f.state,o.state)||c.push({command:"setGlobalState",args:[o.state]}),Jr(f.centerAltitude,o.centerAltitude)||c.push({command:"setCenterAltitude",args:[o.centerAltitude]}),Jr(f.zoom,o.zoom)||c.push({command:"setZoom",args:[o.zoom]}),Jr(f.bearing,o.bearing)||c.push({command:"setBearing",args:[o.bearing]}),Jr(f.pitch,o.pitch)||c.push({command:"setPitch",args:[o.pitch]}),Jr(f.roll,o.roll)||c.push({command:"setRoll",args:[o.roll]}),Jr(f.sprite,o.sprite)||c.push({command:"setSprite",args:[o.sprite]}),Jr(f.glyphs,o.glyphs)||c.push({command:"setGlyphs",args:[o.glyphs]}),Jr(f.transition,o.transition)||c.push({command:"setTransition",args:[o.transition]}),Jr(f.light,o.light)||c.push({command:"setLight",args:[o.light]}),Jr(f.terrain,o.terrain)||c.push({command:"setTerrain",args:[o.terrain]}),Jr(f.sky,o.sky)||c.push({command:"setSky",args:[o.sky]}),Jr(f.projection,o.projection)||c.push({command:"setProjection",args:[o.projection]});const m={},v=[];(function(w,T,L,z){let W;for(W in T=T||{},w=w||{})Object.prototype.hasOwnProperty.call(w,W)&&(Object.prototype.hasOwnProperty.call(T,W)||Ct(W,L,z));for(W in T)Object.prototype.hasOwnProperty.call(T,W)&&(Object.prototype.hasOwnProperty.call(w,W)?Jr(w[W],T[W])||(w[W].type==="geojson"&&T[W].type==="geojson"&&ie(w,T,W)?jr(L,{command:"setGeoJSONSourceData",args:[W,T[W].data]}):Wt(W,T,L,z)):wt(W,T,L))})(f.sources,o.sources,v,m);const x=[];f.layers&&f.layers.forEach((w=>{"source"in w&&m[w.source]?c.push({command:"removeLayer",args:[w.id]}):x.push(w)})),c=c.concat(v),(function(w,T,L){T=T||[];const z=(w=w||[]).map(Ze),W=T.map(Ze),Q=w.reduce(_t,{}),ae=T.reduce(_t,{}),se=z.slice(),ye=Object.create(null);let xe,Se,Fe,ct,je;for(let We=0,yt=0;We<z.length;We++)xe=z[We],Object.prototype.hasOwnProperty.call(ae,xe)?yt++:(jr(L,{command:"removeLayer",args:[xe]}),se.splice(se.indexOf(xe,yt),1));for(let We=0,yt=0;We<W.length;We++)xe=W[W.length-1-We],se[se.length-1-We]!==xe&&(Object.prototype.hasOwnProperty.call(Q,xe)?(jr(L,{command:"removeLayer",args:[xe]}),se.splice(se.lastIndexOf(xe,se.length-yt),1)):yt++,ct=se[se.length-We],jr(L,{command:"addLayer",args:[ae[xe],ct]}),se.splice(se.length-We,0,xe),ye[xe]=!0);for(let We=0;We<W.length;We++)if(xe=W[We],Se=Q[xe],Fe=ae[xe],!ye[xe]&&!Jr(Se,Fe))if(Jr(Se.source,Fe.source)&&Jr(Se["source-layer"],Fe["source-layer"])&&Jr(Se.type,Fe.type)){for(je in _e(Se.layout,Fe.layout,L,xe,null,"setLayoutProperty"),_e(Se.paint,Fe.paint,L,xe,null,"setPaintProperty"),Jr(Se.filter,Fe.filter)||jr(L,{command:"setFilter",args:[xe,Fe.filter]}),Jr(Se.minzoom,Fe.minzoom)&&Jr(Se.maxzoom,Fe.maxzoom)||jr(L,{command:"setLayerZoomRange",args:[xe,Fe.minzoom,Fe.maxzoom]}),Se)Object.prototype.hasOwnProperty.call(Se,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?_e(Se[je],Fe[je],L,xe,je.slice(6),"setPaintProperty"):Jr(Se[je],Fe[je])||jr(L,{command:"setLayerProperty",args:[xe,je,Fe[je]]}));for(je in Fe)Object.prototype.hasOwnProperty.call(Fe,je)&&!Object.prototype.hasOwnProperty.call(Se,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?_e(Se[je],Fe[je],L,xe,je.slice(6),"setPaintProperty"):Jr(Se[je],Fe[je])||jr(L,{command:"setLayerProperty",args:[xe,je,Fe[je]]}))}else jr(L,{command:"removeLayer",args:[xe]}),ct=se[se.lastIndexOf(xe)+1],jr(L,{command:"addLayer",args:[Fe,ct]})})(x,o.layers,c)}catch(m){console.warn("Unable to compute style diff:",m),c=[{command:"setStyle",args:[o]}]}return c},u.bX=function(f){const o=[],c=f.id;return c===void 0&&o.push({message:`layers.${c}: missing required property "id"`}),f.render===void 0&&o.push({message:`layers.${c}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},u.bY=rt,u.bZ=zt,u.b_=class extends ml{constructor(f,o){super(f,o),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},u.ba=function(f,o,c){return f[0]=o[0]*c,f[1]=o[1]*c,f[2]=o[2]*c,f[3]=o[3]*c,f},u.bb=function(f,o){return f[0]*o[0]+f[1]*o[1]+f[2]*o[2]+f[3]},u.bc=r4,u.bd=Rm,u.be=function(f,o,c,m,v){var x=1/Math.tan(o/2);if(f[0]=x/c,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=x,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,v!=null&&v!==1/0){var w=1/(m-v);f[10]=(v+m)*w,f[14]=2*v*m*w}else f[10]=-1,f[14]=-2*m;return f},u.bf=function(f){var o=new B(16);return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],o[9]=f[9],o[10]=f[10],o[11]=f[11],o[12]=f[12],o[13]=f[13],o[14]=f[14],o[15]=f[15],o},u.bg=function(f,o,c){var m=Math.sin(c),v=Math.cos(c),x=o[0],w=o[1],T=o[2],L=o[3],z=o[4],W=o[5],Q=o[6],ae=o[7];return o!==f&&(f[8]=o[8],f[9]=o[9],f[10]=o[10],f[11]=o[11],f[12]=o[12],f[13]=o[13],f[14]=o[14],f[15]=o[15]),f[0]=x*v+z*m,f[1]=w*v+W*m,f[2]=T*v+Q*m,f[3]=L*v+ae*m,f[4]=z*v-x*m,f[5]=W*v-w*m,f[6]=Q*v-T*m,f[7]=ae*v-L*m,f},u.bh=function(f,o,c){var m=Math.sin(c),v=Math.cos(c),x=o[4],w=o[5],T=o[6],L=o[7],z=o[8],W=o[9],Q=o[10],ae=o[11];return o!==f&&(f[0]=o[0],f[1]=o[1],f[2]=o[2],f[3]=o[3],f[12]=o[12],f[13]=o[13],f[14]=o[14],f[15]=o[15]),f[4]=x*v+z*m,f[5]=w*v+W*m,f[6]=T*v+Q*m,f[7]=L*v+ae*m,f[8]=z*v-x*m,f[9]=W*v-w*m,f[10]=Q*v-T*m,f[11]=ae*v-L*m,f},u.bi=function(){const f=new Float32Array(16);return G(f),f},u.bj=function(){const f=new Float64Array(16);return G(f),f},u.bk=function(){return new Float64Array(16)},u.bl=function(f,o,c){const m=new Float64Array(4);return be(m,f,o-90,c),m},u.bm=function(f,o,c,m){var v,x,w,T,L,z=o[0],W=o[1],Q=o[2],ae=o[3],se=c[0],ye=c[1],xe=c[2],Se=c[3];return(x=z*se+W*ye+Q*xe+ae*Se)<0&&(x=-x,se=-se,ye=-ye,xe=-xe,Se=-Se),1-x>F?(v=Math.acos(x),w=Math.sin(v),T=Math.sin((1-m)*v)/w,L=Math.sin(m*v)/w):(T=1-m,L=m),f[0]=T*z+L*se,f[1]=T*W+L*ye,f[2]=T*Q+L*xe,f[3]=T*ae+L*Se,f},u.bn=function(f){const o=new Float64Array(9);(function(x,w){var T=w[0],L=w[1],z=w[2],W=w[3],Q=T+T,ae=L+L,se=z+z,ye=T*Q,xe=L*Q,Se=L*ae,Fe=z*Q,ct=z*ae,je=z*se,We=W*Q,yt=W*ae,At=W*se;x[0]=1-Se-je,x[3]=xe-At,x[6]=Fe+yt,x[1]=xe+At,x[4]=1-ye-je,x[7]=ct-We,x[2]=Fe-yt,x[5]=ct+We,x[8]=1-ye-Se})(o,f);const c=Vt(-Math.asin(Ve(o[2],-1,1)));let m,v;return Math.hypot(o[5],o[8])<.001?(m=0,v=-Vt(Math.atan2(o[3],o[4]))):(m=Vt(o[5]===0&&o[8]===0?0:Math.atan2(o[5],o[8])),v=Vt(o[1]===0&&o[0]===0?0:Math.atan2(o[1],o[0]))),{roll:m,pitch:c+90,bearing:v}},u.bo=function(f,o){return f.roll==o.roll&&f.pitch==o.pitch&&f.bearing==o.bearing},u.bp=hr,u.bq=lh,u.br=Pm,u.bs=Zy,u.bt=Tm,u.bu=ge,u.bv=Ee,u.bw=Jn,u.bx=function(f,o,c,m,v){return ge(m,v,Ve((f-o)/(c-o),0,1))},u.by=Je,u.bz=function(){return new Float64Array(3)},u.c=Ne,u.c$=function(f,o,c,m,v){return a(this,void 0,void 0,(function*(){if(k())try{return yield Ge(f,o,c,m,v)}catch{}return(function(x,w,T,L,z){const W=x.width,Q=x.height;nt&&ut||(nt=new OffscreenCanvas(W,Q),ut=nt.getContext("2d",{willReadFrequently:!0})),nt.width=W,nt.height=Q,ut.drawImage(x,0,0,W,Q);const ae=ut.getImageData(w,T,L,z);return ut.clearRect(0,0,W,Q),ae.data})(f,o,c,m,v)}))},u.c0=class extends ml{constructor(f,o){super(f,o),this.current=au}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let o=1;o<16;o++)if(f[o]!==this.current[o]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},u.c1=rp,u.c2=class extends ml{constructor(f,o){super(f,o),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},u.c3=class extends ml{constructor(f,o){super(f,o),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},u.c4=N,u.c5=function(f,o){var c=Math.sin(o),m=Math.cos(o);return f[0]=m,f[1]=c,f[2]=0,f[3]=-c,f[4]=m,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},u.c6=function(f,o,c){var m=o[0],v=o[1],x=o[2];return f[0]=m*c[0]+v*c[3]+x*c[6],f[1]=m*c[1]+v*c[4]+x*c[7],f[2]=m*c[2]+v*c[5]+x*c[8],f},u.c7=function(f,o,c,m,v,x,w){var T=1/(o-c),L=1/(m-v),z=1/(x-w);return f[0]=-2*T,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*L,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*z,f[11]=0,f[12]=(o+c)*T,f[13]=(v+m)*L,f[14]=(w+x)*z,f[15]=1,f},u.c8=class extends ml{constructor(f,o){super(f,o),this.current=new Array}set(f){if(f!=this.current){this.current=f;const o=new Float32Array(4*f.length);for(let c=0;c<f.length;c++)o[4*c]=f[c].r,o[4*c+1]=f[c].g,o[4*c+2]=f[c].b,o[4*c+3]=f[c].a;this.gl.uniform4fv(this.location,o)}}},u.c9=class extends ml{constructor(f,o){super(f,o),this.current=new Array}set(f){if(f!=this.current){this.current=f;const o=new Float32Array(f);this.gl.uniform1fv(this.location,o)}}},u.cA=function(f,o){return Ke[o]&&"touches"in f},u.cB=function(f){return Ke[f]||me[f]},u.cC=function(f,o,c){var m=o[0],v=o[1];return f[0]=c[0]*m+c[4]*v+c[12],f[1]=c[1]*m+c[5]*v+c[13],f},u.cD=function(f,o){const{x:c,y:m}=ev.fromLngLat(o);return!(f<0||f>25||m<0||m>=1||c<0||c>=1)},u.cE=function(f,o){return f[0]=o[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=o[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=o[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},u.cF=class extends ro{},u.cG=EJ,u.cI=tt,u.cJ=function(f,o){Ne.REGISTERED_PROTOCOLS[f]=o},u.cK=function(f){delete Ne.REGISTERED_PROTOCOLS[f]},u.cL=function(f,o){const c={};for(let v=0;v<f.length;v++){const x=o&&o[f[v].id]||Tu(f[v]);o&&(o[f[v].id]=x);let w=c[x];w||(w=c[x]=[]),w.push(f[v])}const m=[];for(const v in c)m.push(c[v]);return m},u.cM=pt,u.cN=i4,u.cO=F4,u.cP=jL,u.cQ=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Ce/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const o=f.bucket.layers[0],c=o.layout,m=o._unevaluatedLayout._values,v={layoutIconSize:m["icon-size"].possiblyEvaluate(new Hn(f.bucket.zoom+1),f.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Hn(f.bucket.zoom+1),f.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Hn(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=f.bucket.textSizeData;v.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Hn(z),f.canonical),m["text-size"].possiblyEvaluate(new Hn(W),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:W}=f.bucket.iconSizeData;v.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Hn(z),f.canonical),m["icon-size"].possiblyEvaluate(new Hn(W),f.canonical)]}const x=c.get("text-line-height")*Yo,w=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",T=c.get("text-keep-upright"),L=c.get("text-size");for(const z of f.bucket.features){const W=c.get("text-font").evaluate(z,{},f.canonical).join(","),Q=L.evaluate(z,{},f.canonical),ae=v.layoutTextSize.evaluate(z,{},f.canonical),se=v.layoutIconSize.evaluate(z,{},f.canonical),ye={horizontal:{},vertical:void 0},xe=z.text;let Se,Fe=[0,0];if(xe){const We=xe.toString(),yt=c.get("text-letter-spacing").evaluate(z,{},f.canonical)*Yo,At=wn(We)?yt:0,Zt=c.get("text-anchor").evaluate(z,{},f.canonical),gr=X4(o,z,f.canonical);if(!gr){const Cr=c.get("text-radial-offset").evaluate(z,{},f.canonical);Fe=Cr?Z4(Zt,[Cr*Yo,m5]):c.get("text-offset").evaluate(z,{},f.canonical).map((dr=>dr*Yo))}let ur=w?"center":c.get("text-justify").evaluate(z,{},f.canonical);const Sr=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(z,{},f.canonical)*Yo:1/0,zr=()=>{f.bucket.allowVerticalPlacement&&Un(We)&&(ye.vertical=e_(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Sr,x,Zt,"left",At,Fe,u.az.vertical,!0,ae,Q))};if(!w&&gr){const Cr=new Set;if(ur==="auto")for(let ir=0;ir<gr.values.length;ir+=2)Cr.add(g5(gr.values[ir]));else Cr.add(ur);let dr=!1;for(const ir of Cr)if(!ye.horizontal[ir])if(dr)ye.horizontal[ir]=ye.horizontal[0];else{const nn=e_(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Sr,x,"center",ir,At,Fe,u.az.horizontal,!1,ae,Q);nn&&(ye.horizontal[ir]=nn,dr=nn.positionedLines.length===1)}zr()}else{ur==="auto"&&(ur=g5(Zt));const Cr=e_(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Sr,x,Zt,ur,At,Fe,u.az.horizontal,!1,ae,Q);Cr&&(ye.horizontal[ur]=Cr),zr(),Un(We)&&w&&T&&(ye.vertical=e_(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Sr,x,Zt,ur,At,Fe,u.az.vertical,!1,ae,Q))}}let ct=!1;if(z.icon&&z.icon.name){const We=f.imageMap[z.icon.name];We&&(Se=LY(f.imagePositions[z.icon.name],c.get("icon-offset").evaluate(z,{},f.canonical),c.get("icon-anchor").evaluate(z,{},f.canonical)),ct=!!We.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=ct:f.bucket.sdfIcons!==ct&&dt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(We.pixelRatio!==f.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const je=Y4(ye.horizontal)||ye.vertical;f.bucket.iconsInText=!!je&&je.iconsInText,(je||Se)&&wJ(f.bucket,z,ye,Se,f.imageMap,v,ae,se,Fe,ct,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},u.cR=Bw,u.cS=zw,u.cT=$w,u.cU=function(f){const o=new Qb;return(function(c,m){for(const v in c.layers)m.writeMessage(3,lJ,c.layers[v])})(f,o),o.finish()},u.cV=function(f,o,c,m,v,x){let w=j4(f,o,c,v,0);return w=j4(w,o,m,x,1),w},u.cW=class{constructor(f){this.maxEntries=f,this.map=new Map}get(f){const o=this.map.get(f);return o!==void 0&&(this.map.delete(f),this.map.set(f,o)),o}set(f,o){if(this.map.has(f))this.map.delete(f);else if(this.map.size>=this.maxEntries){const c=this.map.keys().next().value;this.map.delete(c)}this.map.set(f,o)}clear(){this.map.clear()}},u.cX=xL,u.cY=Qb,u.cZ=D4,u.c_=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},u.ca=class extends ic{},u.cb=fY,u.cc=class extends gf{},u.cd=Lw,u.ce=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},u.cf=oL,u.cg=function(f,o,c){var m=o[0],v=o[1],x=o[2],w=c[3]*m+c[7]*v+c[11]*x+c[15];return f[0]=(c[0]*m+c[4]*v+c[8]*x+c[12])/(w=w||1),f[1]=(c[1]*m+c[5]*v+c[9]*x+c[13])/w,f[2]=(c[2]*m+c[6]*v+c[10]*x+c[14])/w,f},u.ch=class extends ff{},u.ci=class extends l{},u.cj=function(f,o){return f[0]===o[0]&&f[1]===o[1]&&f[2]===o[2]&&f[3]===o[3]&&f[4]===o[4]&&f[5]===o[5]&&f[6]===o[6]&&f[7]===o[7]&&f[8]===o[8]&&f[9]===o[9]&&f[10]===o[10]&&f[11]===o[11]&&f[12]===o[12]&&f[13]===o[13]&&f[14]===o[14]&&f[15]===o[15]},u.ck=function(f,o){var c=f[0],m=f[1],v=f[2],x=f[3],w=f[4],T=f[5],L=f[6],z=f[7],W=f[8],Q=f[9],ae=f[10],se=f[11],ye=f[12],xe=f[13],Se=f[14],Fe=f[15],ct=o[0],je=o[1],We=o[2],yt=o[3],At=o[4],Zt=o[5],gr=o[6],ur=o[7],Sr=o[8],zr=o[9],Cr=o[10],dr=o[11],ir=o[12],nn=o[13],Xr=o[14],an=o[15];return Math.abs(c-ct)<=F*Math.max(1,Math.abs(c),Math.abs(ct))&&Math.abs(m-je)<=F*Math.max(1,Math.abs(m),Math.abs(je))&&Math.abs(v-We)<=F*Math.max(1,Math.abs(v),Math.abs(We))&&Math.abs(x-yt)<=F*Math.max(1,Math.abs(x),Math.abs(yt))&&Math.abs(w-At)<=F*Math.max(1,Math.abs(w),Math.abs(At))&&Math.abs(T-Zt)<=F*Math.max(1,Math.abs(T),Math.abs(Zt))&&Math.abs(L-gr)<=F*Math.max(1,Math.abs(L),Math.abs(gr))&&Math.abs(z-ur)<=F*Math.max(1,Math.abs(z),Math.abs(ur))&&Math.abs(W-Sr)<=F*Math.max(1,Math.abs(W),Math.abs(Sr))&&Math.abs(Q-zr)<=F*Math.max(1,Math.abs(Q),Math.abs(zr))&&Math.abs(ae-Cr)<=F*Math.max(1,Math.abs(ae),Math.abs(Cr))&&Math.abs(se-dr)<=F*Math.max(1,Math.abs(se),Math.abs(dr))&&Math.abs(ye-ir)<=F*Math.max(1,Math.abs(ye),Math.abs(ir))&&Math.abs(xe-nn)<=F*Math.max(1,Math.abs(xe),Math.abs(nn))&&Math.abs(Se-Xr)<=F*Math.max(1,Math.abs(Se),Math.abs(Xr))&&Math.abs(Fe-an)<=F*Math.max(1,Math.abs(Fe),Math.abs(an))},u.cl=function(f,o){return f[0]=o[0],f[1]=o[1],f[2]=o[2],f[3]=o[3],f[4]=o[4],f[5]=o[5],f[6]=o[6],f[7]=o[7],f[8]=o[8],f[9]=o[9],f[10]=o[10],f[11]=o[11],f[12]=o[12],f[13]=o[13],f[14]=o[14],f[15]=o[15],f},u.cm=f=>f.type==="symbol",u.cn=f=>f.type==="circle",u.co=f=>f.type==="heatmap",u.cp=f=>f.type==="line",u.cq=f=>f.type==="fill",u.cr=f=>f.type==="fill-extrusion",u.cs=f=>f.type==="hillshade",u.ct=f=>f.type==="color-relief",u.cu=f=>f.type==="background",u.cv=f=>f.type==="custom",u.cw=Ie,u.cx=function(f,o,c){const m=ve(o.x-c.x,o.y-c.y),v=ve(f.x-c.x,f.y-c.y),x=Math.atan2(m[0]*v[1]-m[1]*v[0],(function(w,T){return w[0]*T[0]+w[1]*T[1]})(m,v));return Vt(x)},u.cy=Le,u.cz=function(f,o){return me[o]&&(f instanceof MouseEvent||f instanceof WheelEvent)},u.d=kt,u.d0=uL,u.d1=d,u.d2=class{constructor(f,o){this.layers={[nv]:this},this.name=nv,this.version=o?o.version:1,this.extent=o?o.extent:4096,this.length=f.length,this.features=f}feature(f){return new sJ(this.features[f],this.extent)}},u.d3=Ic,u.d4=Ii,u.e=It,u.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(o)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),u.g=Tt,u.h=f=>new Promise(((o,c)=>{const m=new Image;m.onload=()=>{o(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame((()=>{m.src=tr}))},m.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(v):tr})),u.i=fr,u.j=(f,o)=>$t(It(f,{type:"json"}),o),u.k=mn,u.l=Zr,u.m=$t,u.n=(f,o)=>$t(It(f,{type:"arrayBuffer"}),o),u.o=function(f){return new Qb(f).readFields(CY,[])},u.p=BL,u.q=function(f){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))},u.r=Uy,u.s=Nt,u.t=ta,u.u=Rt,u.v=Me,u.w=dt,u.x=Ha,u.y=ze,u.z=aa})),i("worker",["./shared"],(function(u){class a{constructor(me,pe){this.keyCache={},me&&this.replace(me,pe)}replace(me,pe){this._layerConfigs={},this._layers={},this.update(me,[],pe)}update(me,pe,Ae){for(const Ne of me){this._layerConfigs[Ne.id]=Ne;const Tt=this._layers[Ne.id]=u.bT(Ne,Ae);Tt._featureFilter=u.aj(Tt.filter,Ae),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of pe)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const Be=u.cL(Object.values(this._layerConfigs),this.keyCache);for(const Ne of Be){const Tt=Ne.map((cr=>this._layers[cr.id])),bt=Tt[0];if(bt.isHidden())continue;const tt=bt.source||"";let gt=this.familiesBySource[tt];gt||(gt=this.familiesBySource[tt]={});const $t=bt.sourceLayer||u.ai;let kt=gt[$t];kt||(kt=gt[$t]=[]),kt.push(Tt)}}}class p{constructor(me){const pe={},Ae=[];for(const bt in me){const tt=me[bt],gt=pe[bt]={};for(const $t in tt){const kt=tt[+$t];if(!kt||kt.bitmap.width===0||kt.bitmap.height===0)continue;const cr={x:0,y:0,w:kt.bitmap.width+2,h:kt.bitmap.height+2};Ae.push(cr),gt[$t]={rect:cr,metrics:kt.metrics}}}const{w:Be,h:Ne}=u.p(Ae),Tt=new u.r({width:Be||1,height:Ne||1});for(const bt in me){const tt=me[bt];for(const gt in tt){const $t=tt[+gt];if(!$t||$t.bitmap.width===0||$t.bitmap.height===0)continue;const kt=pe[bt][gt].rect;u.r.copy($t.bitmap,Tt,{x:0,y:0},{x:kt.x+1,y:kt.y+1},$t.bitmap)}}this.image=Tt,this.positions=pe}}u.cM("GlyphAtlas",p);class d{constructor(me){this.tileID=new u.a2(me.tileID.overscaledZ,me.tileID.wrap,me.tileID.canonical.z,me.tileID.canonical.x,me.tileID.canonical.y),this.uid=me.uid,this.zoom=me.zoom,this.pixelRatio=me.pixelRatio,this.tileSize=me.tileSize,this.source=me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=me.showCollisionBoxes,this.collectResourceTiming=!!me.collectResourceTiming,this.returnDependencies=!!me.returnDependencies,this.promoteId=me.promoteId,this.inFlightDependencies=[]}parse(me,pe,Ae,Be,Ne){return u._(this,void 0,void 0,(function*(){this.status="parsing",this.data=me,this.collisionBoxArray=new u.ag;const Tt=new u.cN(Object.keys(me.layers).sort()),bt=new u.cO(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const tt={},gt={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Ae,subdivisionGranularity:Ne},$t=pe.familiesBySource[this.source];for(const ie in $t){const _e=me.layers[ie];if(!_e)continue;_e.version===1&&u.w(`Vector tile source "${this.source}" layer "${ie}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ze=Tt.encode(ie),_t=[];for(let lt=0;lt<_e.length;lt++){const or=_e.feature(lt),Ar=bt.getId(or,ie);_t.push({feature:or,id:Ar,index:lt,sourceLayerIndex:Ze})}for(const lt of $t[ie]){const or=lt[0];or.source!==this.source&&u.w(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.isHidden(this.zoom,!0)||(g(lt,this.zoom,Ae),(tt[or.id]=or.createBucket({index:bt.bucketLayerIDs.length,layers:lt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ze,sourceID:this.source})).populate(_t,gt,this.tileID.canonical),bt.bucketLayerIDs.push(lt.map((Ar=>Ar.id))))}}const kt=u.bY(gt.glyphDependencies,(ie=>Object.keys(ie).map(Number)));this.inFlightDependencies.forEach((ie=>ie?.abort())),this.inFlightDependencies=[];let cr=Promise.resolve({});if(Object.keys(kt).length){const ie=new AbortController;this.inFlightDependencies.push(ie),cr=Be.sendAsync({type:"GG",data:{stacks:kt,source:this.source,tileID:this.tileID,type:"glyphs"}},ie)}const mr=Object.keys(gt.iconDependencies);let Zr=Promise.resolve({});if(mr.length){const ie=new AbortController;this.inFlightDependencies.push(ie),Zr=Be.sendAsync({type:"GI",data:{icons:mr,source:this.source,tileID:this.tileID,type:"icons"}},ie)}const mn=Object.keys(gt.patternDependencies);let Kr=Promise.resolve({});if(mn.length){const ie=new AbortController;this.inFlightDependencies.push(ie),Kr=Be.sendAsync({type:"GI",data:{icons:mn,source:this.source,tileID:this.tileID,type:"patterns"}},ie)}const Rt=gt.dashDependencies;let Ur=Promise.resolve({});if(Object.keys(Rt).length){const ie=new AbortController;this.inFlightDependencies.push(ie),Ur=Be.sendAsync({type:"GDA",data:{dashes:Rt}},ie)}const[Fn,Jr,jr,wt]=yield Promise.all([cr,Zr,Kr,Ur]),Ct=new p(Fn),Wt=new u.cP(Jr,jr);for(const ie in tt){const _e=tt[ie];_e instanceof u.ah?(g(_e.layers,this.zoom,Ae),u.cQ({bucket:_e,glyphMap:Fn,glyphPositions:Ct.positions,imageMap:Jr,imagePositions:Wt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:gt.subdivisionGranularity})):_e.hasDependencies&&(_e instanceof u.cR||_e instanceof u.cS||_e instanceof u.cT)&&(g(_e.layers,this.zoom,Ae),_e.addFeatures(gt,this.tileID.canonical,Wt.patternPositions,wt))}return this.status="done",{buckets:Object.values(tt).filter((ie=>!ie.isEmpty())),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ct.image,imageAtlas:Wt,dashPositions:wt,glyphMap:this.returnDependencies?Fn:null,iconMap:this.returnDependencies?Jr:null,glyphPositions:this.returnDependencies?Ct.positions:null}}))}}function g(Ke,me,pe){const Ae=new u.H(me);for(const Be of Ke)Be.recalculate(Ae,pe)}class _{constructor(me,pe,Ae,Be,Ne){this.type=me,this.properties=Ae||{},this.extent=Ne,this.pointsArray=pe,this.id=Be}loadGeometry(){return this.pointsArray.map((me=>me.map((pe=>new u.P(pe.x,pe.y)))))}}class C{constructor(me,pe,Ae){this.version=2,this._myFeatures=me,this.name=pe,this.length=me.length,this.extent=Ae}feature(me){return this._myFeatures[me]}}class S{constructor(){this.layers={}}addLayer(me){this.layers[me.name]=me}}function I(Ke){let me=u.cU(Ke);return me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),{vectorTile:Ke,rawData:me.buffer}}function O(Ke,me,pe){const{extent:Ae}=Ke,Be=Math.pow(2,pe.z-me.z),Ne=(pe.x-me.x*Be)*Ae,Tt=(pe.y-me.y*Be)*Ae,bt=[];for(let tt=0;tt<Ke.length;tt++){const gt=Ke.feature(tt);let $t=gt.loadGeometry();for(const cr of $t)for(const mr of cr)mr.x=mr.x*Be-Ne,mr.y=mr.y*Be-Tt;const kt=128;$t=u.cV($t,gt.type,-kt,-kt,Ae+kt,Ae+kt),$t.length!==0&&bt.push(new _(gt.type,$t,gt.properties,gt.id,Ae))}return new C(bt,Ke.name,Ae)}class P{constructor(me,pe,Ae){this.actor=me,this.layerIndex=pe,this.availableImages=Ae,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new u.cW(1e3)}loadVectorTile(me,pe){return u._(this,void 0,void 0,(function*(){const Ae=yield u.n(me.request,pe);try{return{vectorTile:me.encoding!=="mlt"?new u.cX(new u.cY(Ae.data)):new u.cZ(Ae.data),rawData:Ae.data,cacheControl:Ae.cacheControl,expires:Ae.expires}}catch(Be){const Ne=new Uint8Array(Ae.data);let Tt=`Unable to parse the tile at ${me.request.url}, `;throw Tt+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Be.message}`,new Error(Tt)}}))}loadTile(me){return u._(this,void 0,void 0,(function*(){const{uid:pe,overzoomParameters:Ae}=me;Ae&&(me.request=Ae.overzoomRequest);const Be=!!(me&&me.request&&me.request.collectResourceTiming)&&new u.c_(me.request),Ne=new d(me);this.loading[pe]=Ne;const Tt=new AbortController;Ne.abort=Tt;try{const bt=yield this.loadVectorTile(me,Tt);if(delete this.loading[pe],!bt)return null;if(Ae){const cr=this._getOverzoomTile(me,bt.vectorTile);bt.rawData=cr.rawData,bt.vectorTile=cr.vectorTile}const tt=bt.rawData,gt={};bt.expires&&(gt.expires=bt.expires),bt.cacheControl&&(gt.cacheControl=bt.cacheControl);const $t={};if(Be){const cr=Be.finish();cr&&($t.resourceTiming=JSON.parse(JSON.stringify(cr)))}Ne.vectorTile=bt.vectorTile;const kt=Ne.parse(bt.vectorTile,this.layerIndex,this.availableImages,this.actor,me.subdivisionGranularity);this.loaded[pe]=Ne,this.fetching[pe]={rawTileData:tt,cacheControl:gt,resourceTiming:$t};try{const cr=yield kt;return u.e({rawTileData:tt.slice(0),encoding:me.encoding},cr,gt,$t)}finally{delete this.fetching[pe]}}catch(bt){throw delete this.loading[pe],Ne.status="done",this.loaded[pe]=Ne,bt}}))}_getOverzoomTile(me,pe){const{tileID:Ae,source:Be,overzoomParameters:Ne}=me,{maxZoomTileID:Tt}=Ne,bt=`${Tt.key}_${Ae.key}`,tt=this.overzoomedTileResultCache.get(bt);if(tt)return tt;const gt=new S,$t=this.layerIndex.familiesBySource[Be];for(const cr in $t){const mr=pe.layers[cr];if(!mr)continue;const Zr=O(mr,Tt,Ae.canonical);Zr.length>0&&gt.addLayer(Zr)}const kt=I(gt);return this.overzoomedTileResultCache.set(bt,kt),kt}reloadTile(me){return u._(this,void 0,void 0,(function*(){const pe=me.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ae=this.loaded[pe];if(Ae.showCollisionBoxes=me.showCollisionBoxes,Ae.status==="parsing"){const Be=yield Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,me.subdivisionGranularity);let Ne;if(this.fetching[pe]){const{rawTileData:Tt,cacheControl:bt,resourceTiming:tt}=this.fetching[pe];delete this.fetching[pe],Ne=u.e({rawTileData:Tt.slice(0),encoding:me.encoding},Be,bt,tt)}else Ne=Be;return Ne}if(Ae.status==="done"&&Ae.vectorTile)return Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,me.subdivisionGranularity)}))}abortTile(me){return u._(this,void 0,void 0,(function*(){const pe=this.loading,Ae=me.uid;pe&&pe[Ae]&&pe[Ae].abort&&(pe[Ae].abort.abort(),delete pe[Ae])}))}removeTile(me){return u._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[me.uid]&&delete this.loaded[me.uid]}))}}class k{constructor(){this.loaded={}}loadTile(me){return u._(this,void 0,void 0,(function*(){const{uid:pe,encoding:Ae,rawImageData:Be,redFactor:Ne,greenFactor:Tt,blueFactor:bt,baseShift:tt}=me,gt=Be.width+2,$t=Be.height+2,kt=u.b(Be)?new u.R({width:gt,height:$t},yield u.c$(Be,-1,-1,gt,$t)):Be,cr=new u.d0(pe,kt,Ae,Ne,Tt,bt,tt);return this.loaded=this.loaded||{},this.loaded[pe]=cr,cr}))}removeTile(me){const pe=this.loaded,Ae=me.uid;pe&&pe[Ae]&&delete pe[Ae]}}var F,B,N=(function(){if(B)return F;function Ke(pe,Ae){if(pe.length!==0){me(pe[0],Ae);for(var Be=1;Be<pe.length;Be++)me(pe[Be],!Ae)}}function me(pe,Ae){for(var Be=0,Ne=0,Tt=0,bt=pe.length,tt=bt-1;Tt<bt;tt=Tt++){var gt=(pe[Tt][0]-pe[tt][0])*(pe[tt][1]+pe[Tt][1]),$t=Be+gt;Ne+=Math.abs(Be)>=Math.abs(gt)?Be-$t+gt:gt-$t+Be,Be=$t}Be+Ne>=0!=!!Ae&&pe.reverse()}return B=1,F=function pe(Ae,Be){var Ne,Tt=Ae&&Ae.type;if(Tt==="FeatureCollection")for(Ne=0;Ne<Ae.features.length;Ne++)pe(Ae.features[Ne],Be);else if(Tt==="GeometryCollection")for(Ne=0;Ne<Ae.geometries.length;Ne++)pe(Ae.geometries[Ne],Be);else if(Tt==="Feature")pe(Ae.geometry,Be);else if(Tt==="Polygon")Ke(Ae.coordinates,Be);else if(Tt==="MultiPolygon")for(Ne=0;Ne<Ae.coordinates.length;Ne++)Ke(Ae.coordinates[Ne],Be);return Ae}})(),G=u.d1(N);const $={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ke=>Ke},X=Math.fround||(ee=new Float32Array(1),Ke=>(ee[0]=+Ke,ee[0]));var ee;class J{constructor(me){this.options=Object.assign(Object.create($),me),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(me){const{log:pe,minZoom:Ae,maxZoom:Be}=this.options;pe&&console.time("total time");const Ne=`prepare ${me.length} points`;pe&&console.time(Ne),this.points=me;const Tt=[];for(let tt=0;tt<me.length;tt++){const gt=me[tt];if(!gt.geometry)continue;const[$t,kt]=gt.geometry.coordinates,cr=X(H($t)),mr=X(oe(kt));Tt.push(cr,mr,1/0,tt,-1,1),this.options.reduce&&Tt.push(0)}let bt=this.trees[Be+1]=this._createTree(Tt);pe&&console.timeEnd(Ne);for(let tt=Be;tt>=Ae;tt--){const gt=+Date.now();bt=this.trees[tt]=this._createTree(this._cluster(bt,tt)),pe&&console.log("z%d: %d clusters in %dms",tt,bt.numItems,+Date.now()-gt)}return pe&&console.timeEnd("total time"),this}getClusters(me,pe){let Ae=((me[0]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,me[1]));let Ne=me[2]===180?180:((me[2]+180)%360+360)%360-180;const Tt=Math.max(-90,Math.min(90,me[3]));if(me[2]-me[0]>=360)Ae=-180,Ne=180;else if(Ae>Ne){const kt=this.getClusters([Ae,Be,180,Tt],pe),cr=this.getClusters([-180,Be,Ne,Tt],pe);return kt.concat(cr)}const bt=this.trees[this._limitZoom(pe)],tt=bt.range(H(Ae),oe(Tt),H(Ne),oe(Be)),gt=bt.data,$t=[];for(const kt of tt){const cr=this.stride*kt;$t.push(gt[cr+5]>1?le(gt,cr,this.clusterProps):this.points[gt[cr+3]])}return $t}getChildren(me){const pe=this._getOriginId(me),Ae=this._getOriginZoom(me),Be="No cluster with the specified id.",Ne=this.trees[Ae];if(!Ne)throw new Error(Be);const Tt=Ne.data;if(pe*this.stride>=Tt.length)throw new Error(Be);const bt=this.options.radius/(this.options.extent*Math.pow(2,Ae-1)),tt=Ne.within(Tt[pe*this.stride],Tt[pe*this.stride+1],bt),gt=[];for(const $t of tt){const kt=$t*this.stride;Tt[kt+4]===me&&gt.push(Tt[kt+5]>1?le(Tt,kt,this.clusterProps):this.points[Tt[kt+3]])}if(gt.length===0)throw new Error(Be);return gt}getLeaves(me,pe,Ae){const Be=[];return this._appendLeaves(Be,me,pe=pe||10,Ae=Ae||0,0),Be}getTile(me,pe,Ae){const Be=this.trees[this._limitZoom(me)],Ne=Math.pow(2,me),{extent:Tt,radius:bt}=this.options,tt=bt/Tt,gt=(Ae-tt)/Ne,$t=(Ae+1+tt)/Ne,kt={features:[]};return this._addTileFeatures(Be.range((pe-tt)/Ne,gt,(pe+1+tt)/Ne,$t),Be.data,pe,Ae,Ne,kt),pe===0&&this._addTileFeatures(Be.range(1-tt/Ne,gt,1,$t),Be.data,Ne,Ae,Ne,kt),pe===Ne-1&&this._addTileFeatures(Be.range(0,gt,tt/Ne,$t),Be.data,-1,Ae,Ne,kt),kt.features.length?kt:null}getClusterExpansionZoom(me){let pe=this._getOriginZoom(me)-1;for(;pe<=this.options.maxZoom;){const Ae=this.getChildren(me);if(pe++,Ae.length!==1)break;me=Ae[0].properties.cluster_id}return pe}_appendLeaves(me,pe,Ae,Be,Ne){const Tt=this.getChildren(pe);for(const bt of Tt){const tt=bt.properties;if(tt&&tt.cluster?Ne+tt.point_count<=Be?Ne+=tt.point_count:Ne=this._appendLeaves(me,tt.cluster_id,Ae,Be,Ne):Ne<Be?Ne++:me.push(bt),me.length===Ae)break}return Ne}_createTree(me){const pe=new u.aT(me.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ae=0;Ae<me.length;Ae+=this.stride)pe.add(me[Ae],me[Ae+1]);return pe.finish(),pe.data=me,pe}_addTileFeatures(me,pe,Ae,Be,Ne,Tt){for(const bt of me){const tt=bt*this.stride,gt=pe[tt+5]>1;let $t,kt,cr;if(gt)$t=Z(pe,tt,this.clusterProps),kt=pe[tt],cr=pe[tt+1];else{const mn=this.points[pe[tt+3]];$t=mn.properties;const[Kr,Rt]=mn.geometry.coordinates;kt=H(Kr),cr=oe(Rt)}const mr={type:1,geometry:[[Math.round(this.options.extent*(kt*Ne-Ae)),Math.round(this.options.extent*(cr*Ne-Be))]],tags:$t};let Zr;Zr=gt||this.options.generateId?pe[tt+3]:this.points[pe[tt+3]].id,Zr!==void 0&&(mr.id=Zr),Tt.features.push(mr)}}_limitZoom(me){return Math.max(this.options.minZoom,Math.min(Math.floor(+me),this.options.maxZoom+1))}_cluster(me,pe){const{radius:Ae,extent:Be,reduce:Ne,minPoints:Tt}=this.options,bt=Ae/(Be*Math.pow(2,pe)),tt=me.data,gt=[],$t=this.stride;for(let kt=0;kt<tt.length;kt+=$t){if(tt[kt+2]<=pe)continue;tt[kt+2]=pe;const cr=tt[kt],mr=tt[kt+1],Zr=me.within(tt[kt],tt[kt+1],bt),mn=tt[kt+5];let Kr=mn;for(const Rt of Zr){const Ur=Rt*$t;tt[Ur+2]>pe&&(Kr+=tt[Ur+5])}if(Kr>mn&&Kr>=Tt){let Rt,Ur=cr*mn,Fn=mr*mn,Jr=-1;const jr=(kt/$t<<5)+(pe+1)+this.points.length;for(const wt of Zr){const Ct=wt*$t;if(tt[Ct+2]<=pe)continue;tt[Ct+2]=pe;const Wt=tt[Ct+5];Ur+=tt[Ct]*Wt,Fn+=tt[Ct+1]*Wt,tt[Ct+4]=jr,Ne&&(Rt||(Rt=this._map(tt,kt,!0),Jr=this.clusterProps.length,this.clusterProps.push(Rt)),Ne(Rt,this._map(tt,Ct)))}tt[kt+4]=jr,gt.push(Ur/Kr,Fn/Kr,1/0,jr,-1,Kr),Ne&&gt.push(Jr)}else{for(let Rt=0;Rt<$t;Rt++)gt.push(tt[kt+Rt]);if(Kr>1)for(const Rt of Zr){const Ur=Rt*$t;if(!(tt[Ur+2]<=pe)){tt[Ur+2]=pe;for(let Fn=0;Fn<$t;Fn++)gt.push(tt[Ur+Fn])}}}}return gt}_getOriginId(me){return me-this.points.length>>5}_getOriginZoom(me){return(me-this.points.length)%32}_map(me,pe,Ae){if(me[pe+5]>1){const Tt=this.clusterProps[me[pe+6]];return Ae?Object.assign({},Tt):Tt}const Be=this.points[me[pe+3]].properties,Ne=this.options.map(Be);return Ae&&Ne===Be?Object.assign({},Ne):Ne}}function le(Ke,me,pe){return{type:"Feature",id:Ke[me+3],properties:Z(Ke,me,pe),geometry:{type:"Point",coordinates:[(Ae=Ke[me],360*(Ae-.5)),ue(Ke[me+1])]}};var Ae}function Z(Ke,me,pe){const Ae=Ke[me+5],Be=Ae>=1e4?`${Math.round(Ae/1e3)}k`:Ae>=1e3?Math.round(Ae/100)/10+"k":Ae,Ne=Ke[me+6],Tt=Ne===-1?{}:Object.assign({},pe[Ne]);return Object.assign(Tt,{cluster:!0,cluster_id:Ke[me+3],point_count:Ae,point_count_abbreviated:Be})}function H(Ke){return Ke/360+.5}function oe(Ke){const me=Math.sin(Ke*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function ue(Ke){const me=(180-360*Ke)*Math.PI/180;return 360*Math.atan(Math.exp(me))/Math.PI-90}function ce(Ke,me,pe,Ae){let Be=Ae;const Ne=me+(pe-me>>1);let Tt,bt=pe-me;const tt=Ke[me],gt=Ke[me+1],$t=Ke[pe],kt=Ke[pe+1];for(let cr=me+3;cr<pe;cr+=3){const mr=be(Ke[cr],Ke[cr+1],tt,gt,$t,kt);if(mr>Be)Tt=cr,Be=mr;else if(mr===Be){const Zr=Math.abs(cr-Ne);Zr<bt&&(Tt=cr,bt=Zr)}}Be>Ae&&(Tt-me>3&&ce(Ke,me,Tt,Ae),Ke[Tt+2]=Be,pe-Tt>3&&ce(Ke,Tt,pe,Ae))}function be(Ke,me,pe,Ae,Be,Ne){let Tt=Be-pe,bt=Ne-Ae;if(Tt!==0||bt!==0){const tt=((Ke-pe)*Tt+(me-Ae)*bt)/(Tt*Tt+bt*bt);tt>1?(pe=Be,Ae=Ne):tt>0&&(pe+=Tt*tt,Ae+=bt*tt)}return Tt=Ke-pe,bt=me-Ae,Tt*Tt+bt*bt}function Te(Ke,me,pe,Ae){const Be={id:Ke??null,type:me,geometry:pe,tags:Ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(me==="Point"||me==="MultiPoint"||me==="LineString")ve(Be,pe);else if(me==="Polygon")ve(Be,pe[0]);else if(me==="MultiLineString")for(const Ne of pe)ve(Be,Ne);else if(me==="MultiPolygon")for(const Ne of pe)ve(Be,Ne[0]);return Be}function ve(Ke,me){for(let pe=0;pe<me.length;pe+=3)Ke.minX=Math.min(Ke.minX,me[pe]),Ke.minY=Math.min(Ke.minY,me[pe+1]),Ke.maxX=Math.max(Ke.maxX,me[pe]),Ke.maxY=Math.max(Ke.maxY,me[pe+1])}function Ce(Ke,me,pe,Ae){if(!me.geometry)return;const Be=me.geometry.coordinates;if(Be&&Be.length===0)return;const Ne=me.geometry.type,Tt=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let bt=[],tt=me.id;if(pe.promoteId?tt=me.properties[pe.promoteId]:pe.generateId&&(tt=Ae||0),Ne==="Point")$e(Be,bt);else if(Ne==="MultiPoint")for(const gt of Be)$e(gt,bt);else if(Ne==="LineString")Je(Be,bt,Tt,!1);else if(Ne==="MultiLineString"){if(pe.lineMetrics){for(const gt of Be)bt=[],Je(gt,bt,Tt,!1),Ke.push(Te(tt,"LineString",bt,me.properties));return}ge(Be,bt,Tt,!1)}else if(Ne==="Polygon")ge(Be,bt,Tt,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(const gt of me.geometry.geometries)Ce(Ke,{id:tt,geometry:gt,properties:me.properties},pe,Ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const gt of Be){const $t=[];ge(gt,$t,Tt,!0),bt.push($t)}}Ke.push(Te(tt,Ne,bt,me.properties))}function $e(Ke,me){me.push(Ee(Ke[0]),Ie(Ke[1]),0)}function Je(Ke,me,pe,Ae){let Be,Ne,Tt=0;for(let tt=0;tt<Ke.length;tt++){const gt=Ee(Ke[tt][0]),$t=Ie(Ke[tt][1]);me.push(gt,$t,0),tt>0&&(Tt+=Ae?(Be*$t-gt*Ne)/2:Math.sqrt(Math.pow(gt-Be,2)+Math.pow($t-Ne,2))),Be=gt,Ne=$t}const bt=me.length-3;me[2]=1,ce(me,0,bt,pe),me[bt+2]=1,me.size=Math.abs(Tt),me.start=0,me.end=me.size}function ge(Ke,me,pe,Ae){for(let Be=0;Be<Ke.length;Be++){const Ne=[];Je(Ke[Be],Ne,pe,Ae),me.push(Ne)}}function Ee(Ke){return Ke/360+.5}function Ie(Ke){const me=Math.sin(Ke*Math.PI/180),pe=.5-.25*Math.log((1+me)/(1-me))/Math.PI;return pe<0?0:pe>1?1:pe}function Le(Ke,me,pe,Ae,Be,Ne,Tt,bt){if(Ae/=me,Ne>=(pe/=me)&&Tt<Ae)return Ke;if(Tt<pe||Ne>=Ae)return null;const tt=[];for(const gt of Ke){const $t=gt.geometry;let kt=gt.type;const cr=Be===0?gt.minX:gt.minY,mr=Be===0?gt.maxX:gt.maxY;if(cr>=pe&&mr<Ae){tt.push(gt);continue}if(mr<pe||cr>=Ae)continue;let Zr=[];if(kt==="Point"||kt==="MultiPoint")Ve($t,Zr,pe,Ae,Be);else if(kt==="LineString")ht($t,Zr,pe,Ae,Be,!1,bt.lineMetrics);else if(kt==="MultiLineString")xt($t,Zr,pe,Ae,Be,!1);else if(kt==="Polygon")xt($t,Zr,pe,Ae,Be,!0);else if(kt==="MultiPolygon")for(const mn of $t){const Kr=[];xt(mn,Kr,pe,Ae,Be,!0),Kr.length&&Zr.push(Kr)}if(Zr.length){if(bt.lineMetrics&&kt==="LineString"){for(const mn of Zr)tt.push(Te(gt.id,kt,mn,gt.tags));continue}kt!=="LineString"&&kt!=="MultiLineString"||(Zr.length===1?(kt="LineString",Zr=Zr[0]):kt="MultiLineString"),kt!=="Point"&&kt!=="MultiPoint"||(kt=Zr.length===3?"Point":"MultiPoint"),tt.push(Te(gt.id,kt,Zr,gt.tags))}}return tt.length?tt:null}function Ve(Ke,me,pe,Ae,Be){for(let Ne=0;Ne<Ke.length;Ne+=3){const Tt=Ke[Ne+Be];Tt>=pe&&Tt<=Ae&&rt(me,Ke[Ne],Ke[Ne+1],Ke[Ne+2])}}function ht(Ke,me,pe,Ae,Be,Ne,Tt){let bt=It(Ke);const tt=Be===0?zt:Lt;let gt,$t,kt=Ke.start;for(let Kr=0;Kr<Ke.length-3;Kr+=3){const Rt=Ke[Kr],Ur=Ke[Kr+1],Fn=Ke[Kr+2],Jr=Ke[Kr+3],jr=Ke[Kr+4],wt=Be===0?Rt:Ur,Ct=Be===0?Jr:jr;let Wt=!1;Tt&&(gt=Math.sqrt(Math.pow(Rt-Jr,2)+Math.pow(Ur-jr,2))),wt<pe?Ct>pe&&($t=tt(bt,Rt,Ur,Jr,jr,pe),Tt&&(bt.start=kt+gt*$t)):wt>Ae?Ct<Ae&&($t=tt(bt,Rt,Ur,Jr,jr,Ae),Tt&&(bt.start=kt+gt*$t)):rt(bt,Rt,Ur,Fn),Ct<pe&&wt>=pe&&($t=tt(bt,Rt,Ur,Jr,jr,pe),Wt=!0),Ct>Ae&&wt<=Ae&&($t=tt(bt,Rt,Ur,Jr,jr,Ae),Wt=!0),!Ne&&Wt&&(Tt&&(bt.end=kt+gt*$t),me.push(bt),bt=It(Ke)),Tt&&(kt+=gt)}let cr=Ke.length-3;const mr=Ke[cr],Zr=Ke[cr+1],mn=Be===0?mr:Zr;mn>=pe&&mn<=Ae&&rt(bt,mr,Zr,Ke[cr+2]),cr=bt.length-3,Ne&&cr>=3&&(bt[cr]!==bt[0]||bt[cr+1]!==bt[1])&&rt(bt,bt[0],bt[1],bt[2]),bt.length&&me.push(bt)}function It(Ke){const me=[];return me.size=Ke.size,me.start=Ke.start,me.end=Ke.end,me}function xt(Ke,me,pe,Ae,Be,Ne){for(const Tt of Ke)ht(Tt,me,pe,Ae,Be,Ne,!1)}function rt(Ke,me,pe,Ae){Ke.push(me,pe,Ae)}function zt(Ke,me,pe,Ae,Be,Ne){const Tt=(Ne-me)/(Ae-me);return rt(Ke,Ne,pe+(Be-pe)*Tt,1),Tt}function Lt(Ke,me,pe,Ae,Be,Ne){const Tt=(Ne-pe)/(Be-pe);return rt(Ke,me+(Ae-me)*Tt,Ne,1),Tt}function Ft(Ke,me){const pe=[];for(let Ae=0;Ae<Ke.length;Ae++){const Be=Ke[Ae],Ne=Be.type;let Tt;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Tt=dt(Be.geometry,me);else if(Ne==="MultiLineString"||Ne==="Polygon"){Tt=[];for(const bt of Be.geometry)Tt.push(dt(bt,me))}else if(Ne==="MultiPolygon"){Tt=[];for(const bt of Be.geometry){const tt=[];for(const gt of bt)tt.push(dt(gt,me));Tt.push(tt)}}pe.push(Te(Be.id,Ne,Tt,Be.tags))}return pe}function dt(Ke,me){const pe=[];pe.size=Ke.size,Ke.start!==void 0&&(pe.start=Ke.start,pe.end=Ke.end);for(let Ae=0;Ae<Ke.length;Ae+=3)pe.push(Ke[Ae]+me,Ke[Ae+1],Ke[Ae+2]);return pe}function ke(Ke,me){if(Ke.transformed)return Ke;const pe=1<<Ke.z,Ae=Ke.x,Be=Ke.y;for(const Ne of Ke.features){const Tt=Ne.geometry,bt=Ne.type;if(Ne.geometry=[],bt===1)for(let tt=0;tt<Tt.length;tt+=2)Ne.geometry.push(fr(Tt[tt],Tt[tt+1],me,pe,Ae,Be));else for(let tt=0;tt<Tt.length;tt++){const gt=[];for(let $t=0;$t<Tt[tt].length;$t+=2)gt.push(fr(Tt[tt][$t],Tt[tt][$t+1],me,pe,Ae,Be));Ne.geometry.push(gt)}}return Ke.transformed=!0,Ke}function fr(Ke,me,pe,Ae,Be,Ne){return[Math.round(pe*(Ke*Ae-Be)),Math.round(pe*(me*Ae-Ne))]}function sr(Ke,me,pe,Ae,Be){const Ne=me===Be.maxZoom?0:Be.tolerance/((1<<me)*Be.extent),Tt={features:[],numPoints:0,numSimplified:0,numFeatures:Ke.length,source:null,x:pe,y:Ae,z:me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const bt of Ke)xr(Tt,bt,Ne,Be);return Tt}function xr(Ke,me,pe,Ae){const Be=me.geometry,Ne=me.type,Tt=[];if(Ke.minX=Math.min(Ke.minX,me.minX),Ke.minY=Math.min(Ke.minY,me.minY),Ke.maxX=Math.max(Ke.maxX,me.maxX),Ke.maxY=Math.max(Ke.maxY,me.maxY),Ne==="Point"||Ne==="MultiPoint")for(let bt=0;bt<Be.length;bt+=3)Tt.push(Be[bt],Be[bt+1]),Ke.numPoints++,Ke.numSimplified++;else if(Ne==="LineString")tr(Tt,Be,Ke,pe,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(let bt=0;bt<Be.length;bt++)tr(Tt,Be[bt],Ke,pe,Ne==="Polygon",bt===0);else if(Ne==="MultiPolygon")for(let bt=0;bt<Be.length;bt++){const tt=Be[bt];for(let gt=0;gt<tt.length;gt++)tr(Tt,tt[gt],Ke,pe,!0,gt===0)}if(Tt.length){let bt=me.tags||null;if(Ne==="LineString"&&Ae.lineMetrics){bt={};for(const gt in me.tags)bt[gt]=me.tags[gt];bt.mapbox_clip_start=Be.start/Be.size,bt.mapbox_clip_end=Be.end/Be.size}const tt={geometry:Tt,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:bt};me.id!==null&&(tt.id=me.id),Ke.features.push(tt)}}function tr(Ke,me,pe,Ae,Be,Ne){const Tt=Ae*Ae;if(Ae>0&&me.size<(Be?Tt:Ae))return void(pe.numPoints+=me.length/3);const bt=[];for(let tt=0;tt<me.length;tt+=3)(Ae===0||me[tt+2]>Tt)&&(pe.numSimplified++,bt.push(me[tt],me[tt+1])),pe.numPoints++;Be&&(function(tt,gt){let $t=0;for(let kt=0,cr=tt.length,mr=cr-2;kt<cr;mr=kt,kt+=2)$t+=(tt[kt]-tt[mr])*(tt[kt+1]+tt[mr+1]);if($t>0===gt)for(let kt=0,cr=tt.length;kt<cr/2;kt+=2){const mr=tt[kt],Zr=tt[kt+1];tt[kt]=tt[cr-2-kt],tt[kt+1]=tt[cr-1-kt],tt[cr-2-kt]=mr,tt[cr-1-kt]=Zr}})(bt,Ne),Ke.push(bt)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class nt{constructor(me,pe){const Ae=(pe=this.options=(function(Ne,Tt){for(const bt in Tt)Ne[bt]=Tt[bt];return Ne})(Object.create(Ge),pe)).debug;if(Ae&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Be=(function(Ne,Tt){const bt=[];if(Ne.type==="FeatureCollection")for(let tt=0;tt<Ne.features.length;tt++)Ce(bt,Ne.features[tt],Tt,tt);else Ce(bt,Ne.type==="Feature"?Ne:{geometry:Ne},Tt);return bt})(me,pe);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Be=(function(Ne,Tt){const bt=Tt.buffer/Tt.extent;let tt=Ne;const gt=Le(Ne,1,-1-bt,bt,0,-1,2,Tt),$t=Le(Ne,1,1-bt,2+bt,0,-1,2,Tt);return(gt||$t)&&(tt=Le(Ne,1,-bt,1+bt,0,-1,2,Tt)||[],gt&&(tt=Ft(gt,1).concat(tt)),$t&&(tt=tt.concat(Ft($t,-1)))),tt})(Be,pe),Be.length&&this.splitTile(Be,0,0,0),Ae&&(Be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(me,pe,Ae,Be,Ne,Tt,bt){const tt=[me,pe,Ae,Be],gt=this.options,$t=gt.debug;for(;tt.length;){Be=tt.pop(),Ae=tt.pop(),pe=tt.pop(),me=tt.pop();const kt=1<<pe,cr=ut(pe,Ae,Be);let mr=this.tiles[cr];if(!mr&&($t>1&&console.time("creation"),mr=this.tiles[cr]=sr(me,pe,Ae,Be,gt),this.tileCoords.push({z:pe,x:Ae,y:Be}),$t)){$t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,Ae,Be,mr.numFeatures,mr.numPoints,mr.numSimplified),console.timeEnd("creation"));const Wt=`z${pe}`;this.stats[Wt]=(this.stats[Wt]||0)+1,this.total++}if(mr.source=me,Ne==null){if(pe===gt.indexMaxZoom||mr.numPoints<=gt.indexMaxPoints)continue}else{if(pe===gt.maxZoom||pe===Ne)continue;if(Ne!=null){const Wt=Ne-pe;if(Ae!==Tt>>Wt||Be!==bt>>Wt)continue}}if(mr.source=null,me.length===0)continue;$t>1&&console.time("clipping");const Zr=.5*gt.buffer/gt.extent,mn=.5-Zr,Kr=.5+Zr,Rt=1+Zr;let Ur=null,Fn=null,Jr=null,jr=null,wt=Le(me,kt,Ae-Zr,Ae+Kr,0,mr.minX,mr.maxX,gt),Ct=Le(me,kt,Ae+mn,Ae+Rt,0,mr.minX,mr.maxX,gt);me=null,wt&&(Ur=Le(wt,kt,Be-Zr,Be+Kr,1,mr.minY,mr.maxY,gt),Fn=Le(wt,kt,Be+mn,Be+Rt,1,mr.minY,mr.maxY,gt),wt=null),Ct&&(Jr=Le(Ct,kt,Be-Zr,Be+Kr,1,mr.minY,mr.maxY,gt),jr=Le(Ct,kt,Be+mn,Be+Rt,1,mr.minY,mr.maxY,gt),Ct=null),$t>1&&console.timeEnd("clipping"),tt.push(Ur||[],pe+1,2*Ae,2*Be),tt.push(Fn||[],pe+1,2*Ae,2*Be+1),tt.push(Jr||[],pe+1,2*Ae+1,2*Be),tt.push(jr||[],pe+1,2*Ae+1,2*Be+1)}}getTile(me,pe,Ae){me=+me,pe=+pe,Ae=+Ae;const Be=this.options,{extent:Ne,debug:Tt}=Be;if(me<0||me>24)return null;const bt=1<<me,tt=ut(me,pe=pe+bt&bt-1,Ae);if(this.tiles[tt])return ke(this.tiles[tt],Ne);Tt>1&&console.log("drilling down to z%d-%d-%d",me,pe,Ae);let gt,$t=me,kt=pe,cr=Ae;for(;!gt&&$t>0;)$t--,kt>>=1,cr>>=1,gt=this.tiles[ut($t,kt,cr)];return gt&&gt.source?(Tt>1&&(console.log("found parent tile z%d-%d-%d",$t,kt,cr),console.time("drilling down")),this.splitTile(gt.source,$t,kt,cr,me,pe,Ae),Tt>1&&console.timeEnd("drilling down"),this.tiles[tt]?ke(this.tiles[tt],Ne):null):null}}function ut(Ke,me,pe){return 32*((1<<Ke)*pe+me)+Ke}class Nt extends P{constructor(me,pe,Ae,Be=Kt){super(me,pe,Ae),this._dataUpdateable=new Map,this._createGeoJSONIndex=Be}loadVectorTile(me,pe){return u._(this,void 0,void 0,(function*(){const Ae=me.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Be=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);return Be?I(new u.d2(Be.features,{version:2,extent:u.a5})):null}))}loadData(me){return u._(this,void 0,void 0,(function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const Ae=this._startPerformance(me);this._pendingRequest=new AbortController;try{(!this._pendingData||me.request||me.data||me.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(me,this._pendingRequest));const Be=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Be,me),this.loaded={};const Ne={};return me.request&&(Ne.data=Be),this._finishPerformance(Ae,me,Ne),Ne}catch(Be){if(delete this._pendingRequest,u.Z(Be))return{abandoned:!0};throw Be}}))}_startPerformance(me){var pe;if(!((pe=me?.request)===null||pe===void 0)&&pe.collectResourceTiming)return new u.c_(me.request)}_finishPerformance(me,pe,Ae){if(!me)return;const Be=me.finish();Be&&(Ae.resourceTiming={},Ae.resourceTiming[pe.source]=JSON.parse(JSON.stringify(Be)))}getData(){return u._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(me){const pe=this.loaded;return pe&&pe[me.uid]?super.reloadTile(me):this.loadTile(me)}loadAndProcessGeoJSON(me,pe){return u._(this,void 0,void 0,(function*(){let Ae;if(me.request?Ae=yield this.loadGeoJSONFromUrl(me.request,me.promoteId,pe):me.data?Ae=this._loadGeoJSONFromObject(me.data,me.promoteId):me.dataDiff&&(Ae=this._loadGeoJSONFromDiff(me.dataDiff,me.promoteId,me.source)),delete this._pendingRequest,typeof Ae!="object")throw new Error(`Input data given to '${me.source}' is not a valid GeoJSON object.`);return G(Ae,!0),me.filter&&(Ae=this._filterGeoJSON(Ae,me.filter)),Ae}))}loadGeoJSONFromUrl(me,pe,Ae){return u._(this,void 0,void 0,(function*(){const Be=yield u.j(me,Ae);return this._dataUpdateable=u.a7(Be.data,pe),Be.data}))}_loadGeoJSONFromObject(me,pe){return this._dataUpdateable=u.a7(me,pe),me}_loadGeoJSONFromDiff(me,pe,Ae){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Ae}`);u.a8(this._dataUpdateable,me,pe);const Be=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Be)}_filterGeoJSON(me,pe){const Ae=u.d3(pe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map((Ne=>`${Ne.key}: ${Ne.message}`)).join(", "));const Be=me.features.filter((Ne=>Ae.value.evaluate({zoom:0},Ne)));return this._toFeatureCollection(Be)}_toFeatureCollection(me){return{type:"FeatureCollection",features:me}}removeSource(me){return u._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(me){return this._geoJSONIndex.getClusterExpansionZoom(me.clusterId)}getClusterChildren(me){return this._geoJSONIndex.getChildren(me.clusterId)}getClusterLeaves(me){return this._geoJSONIndex.getLeaves(me.clusterId,me.limit,me.offset)}}function Kt(Ke,me){return me.cluster?new J((function({superclusterOptions:pe,clusterProperties:Ae}){if(!Ae||!pe)return pe;const Be={},Ne={},Tt={accumulated:null,zoom:0},bt={properties:null},tt=Object.keys(Ae);for(const gt of tt){const[$t,kt]=Ae[gt],cr=u.d3(kt),mr=u.d3(typeof $t=="string"?[$t,["accumulated"],["get",gt]]:$t);Be[gt]=cr.value,Ne[gt]=mr.value}return pe.map=gt=>{bt.properties=gt;const $t={};for(const kt of tt)$t[kt]=Be[kt].evaluate(Tt,bt);return $t},pe.reduce=(gt,$t)=>{bt.properties=$t;for(const kt of tt)Tt.accumulated=gt[kt],gt[kt]=Ne[kt].evaluate(Tt,bt)},pe})(me)).load(Ke.features):(function(pe,Ae){return new nt(pe,Ae)})(Ke,me.geojsonVtOptions)}class Vt{constructor(me){this.self=me,this.actor=new u.L(me),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(pe,Ae)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=Ae},this.self.addProtocol=u.cJ,this.self.removeProtocol=u.cK,this.self.registerRTLTextPlugin=pe=>{u.d4.setMethods(pe)},this.actor.registerMessageHandler("LDT",((pe,Ae)=>this._getDEMWorkerSource(pe,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RDT",((pe,Ae)=>u._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(pe,Ae.source).removeTile(Ae)})))),this.actor.registerMessageHandler("GCEZ",((pe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,Ae.type,Ae.source).getClusterExpansionZoom(Ae)})))),this.actor.registerMessageHandler("GCC",((pe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,Ae.type,Ae.source).getClusterChildren(Ae)})))),this.actor.registerMessageHandler("GCL",((pe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,Ae.type,Ae.source).getClusterLeaves(Ae)})))),this.actor.registerMessageHandler("LD",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).loadData(Ae))),this.actor.registerMessageHandler("GD",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).getData())),this.actor.registerMessageHandler("LT",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RT",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).reloadTile(Ae))),this.actor.registerMessageHandler("AT",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).abortTile(Ae))),this.actor.registerMessageHandler("RMT",((pe,Ae)=>this._getWorkerSource(pe,Ae.type,Ae.source).removeTile(Ae))),this.actor.registerMessageHandler("RS",((pe,Ae)=>u._(this,void 0,void 0,(function*(){if(!this.workerSources[pe]||!this.workerSources[pe][Ae.type]||!this.workerSources[pe][Ae.type][Ae.source])return;const Be=this.workerSources[pe][Ae.type][Ae.source];delete this.workerSources[pe][Ae.type][Ae.source],Be.removeSource!==void 0&&Be.removeSource(Ae)})))),this.actor.registerMessageHandler("RM",(pe=>u._(this,void 0,void 0,(function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],this.globalStates.delete(pe)})))),this.actor.registerMessageHandler("SR",((pe,Ae)=>u._(this,void 0,void 0,(function*(){this.referrer=Ae})))),this.actor.registerMessageHandler("SRPS",((pe,Ae)=>this._syncRTLPluginState(pe,Ae))),this.actor.registerMessageHandler("IS",((pe,Ae)=>u._(this,void 0,void 0,(function*(){this.self.importScripts(Ae)})))),this.actor.registerMessageHandler("SI",((pe,Ae)=>this._setImages(pe,Ae))),this.actor.registerMessageHandler("UL",((pe,Ae)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).update(Ae.layers,Ae.removedIds,this._getGlobalState(pe))})))),this.actor.registerMessageHandler("UGS",((pe,Ae)=>u._(this,void 0,void 0,(function*(){const Be=this._getGlobalState(pe);for(const Ne in Ae)Be[Ne]=Ae[Ne]})))),this.actor.registerMessageHandler("SL",((pe,Ae)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).replace(Ae,this._getGlobalState(pe))}))))}_getGlobalState(me){let pe=this.globalStates.get(me);return pe||(pe={},this.globalStates.set(me,pe)),pe}_setImages(me,pe){return u._(this,void 0,void 0,(function*(){this.availableImages[me]=pe;for(const Ae in this.workerSources[me]){const Be=this.workerSources[me][Ae];for(const Ne in Be)Be[Ne].availableImages=pe}}))}_syncRTLPluginState(me,pe){return u._(this,void 0,void 0,(function*(){return yield u.d4.syncState(pe,this.self.importScripts)}))}_getAvailableImages(me){let pe=this.availableImages[me];return pe||(pe=[]),pe}_getLayerIndex(me){let pe=this.layerIndexes[me];return pe||(pe=this.layerIndexes[me]=new a),pe}_getWorkerSource(me,pe,Ae){if(this.workerSources[me]||(this.workerSources[me]={}),this.workerSources[me][pe]||(this.workerSources[me][pe]={}),!this.workerSources[me][pe][Ae]){const Be={sendAsync:(Ne,Tt)=>(Ne.targetMapId=me,this.actor.sendAsync(Ne,Tt))};switch(pe){case"vector":this.workerSources[me][pe][Ae]=new P(Be,this._getLayerIndex(me),this._getAvailableImages(me));break;case"geojson":this.workerSources[me][pe][Ae]=new Nt(Be,this._getLayerIndex(me),this._getAvailableImages(me));break;default:this.workerSources[me][pe][Ae]=new this.externalWorkerSourceTypes[pe](Be,this._getLayerIndex(me),this._getAvailableImages(me))}}return this.workerSources[me][pe][Ae]}_getDEMWorkerSource(me,pe){return this.demWorkerSources[me]||(this.demWorkerSources[me]={}),this.demWorkerSources[me][pe]||(this.demWorkerSources[me][pe]=new k),this.demWorkerSources[me][pe]}}return u.i(self)&&(self.worker=new Vt(self)),Vt})),i("index",["exports","./shared"],(function(u,a){var p="5.16.0";function d(){var E=new a.A(4);return a.A!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}let g,_,C;const S={frame(E,l,h){const y=requestAnimationFrame((A=>{b(),l(A)})),{unsubscribe:b}=a.s(E.signal,"abort",(()=>{b(),cancelAnimationFrame(y),h(new a.a(E.signal.reason))}),!1)},frameAsync(E){return new Promise(((l,h)=>{this.frame(E,l,h)}))},getImageData(E,l=0){return this.getImageCanvasContext(E).getImageData(-l,-l,E.width+2*l,E.height+2*l)},getImageCanvasContext(E){const l=window.document.createElement("canvas"),h=l.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return l.width=E.width,l.height=E.height,h.drawImage(E,0,0,E.width,E.height),h},resolveURL:E=>(g||(g=document.createElement("a")),g.href=E,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return C!==void 0?C:!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)},set prefersReducedMotion(E){C=E}},I=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(E){this._frozenAt=E}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function O(){return I.getCurrentTime()}class P{static testProp(l){if(!P.docStyle)return l[0];for(let h=0;h<l.length;h++)if(l[h]in P.docStyle)return l[h];return l[0]}static create(l,h,y){const b=window.document.createElement(l);return h!==void 0&&(b.className=h),y&&y.appendChild(b),b}static createNS(l,h){return window.document.createElementNS(l,h)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(l,h){l.style[P.transformProp]=h}static addEventListener(l,h,y,b={}){l.addEventListener(h,y,"passive"in b?b:b.capture)}static removeEventListener(l,h,y,b={}){l.removeEventListener(h,y,"passive"in b?b:b.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",P.suppressClickInternal,!0)}),0)}static getScale(l){const h=l.getBoundingClientRect();return{x:h.width/l.offsetWidth||1,y:h.height/l.offsetHeight||1,boundingClientRect:h}}static getPoint(l,h,y){const b=h.boundingClientRect;return new a.P((y.clientX-b.left)/h.x-l.clientLeft,(y.clientY-b.top)/h.y-l.clientTop)}static mousePos(l,h){const y=P.getScale(l);return P.getPoint(l,y,h)}static touchPos(l,h){const y=[],b=P.getScale(l);for(let A=0;A<h.length;A++)y.push(P.getPoint(l,b,h[A]));return y}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}static sanitize(l){const h=new DOMParser().parseFromString(l,"text/html").body||document.createElement("body"),y=h.querySelectorAll("script");for(const b of y)b.remove();return P.clean(h),h.innerHTML}static isPossiblyDangerous(l,h){const y=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(l)||!y.includes("javascript:")&&!y.includes("data:"))||!!l.startsWith("on")||void 0}static clean(l){const h=l.children;for(const y of h)P.removeAttributes(y),P.clean(y)}static removeAttributes(l){for(const{name:h,value:y}of l.attributes)P.isPossiblyDangerous(h,y)&&l.removeAttribute(h)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(E){!N&&B&&(G?$(E):F=E)}};let F,B,N=!1,G=!1;function $(E){const l=E.createTexture();E.bindTexture(E.TEXTURE_2D,l);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,B),E.isContextLost())return;k.supported=!0}catch{}E.deleteTexture(l),N=!0}var X;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{F&&$(F),F=null,G=!0},B.onerror=()=>{N=!0,F=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(E){let l,h,y,b;E.resetRequestQueue=()=>{l=[],h=0,y=0,b={}},E.addThrottleControl=V=>{const K=y++;return b[K]=V,K},E.removeThrottleControl=V=>{delete b[V],M()},E.getImage=(V,K,te=!0)=>new Promise(((he,fe)=>{k.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*"),a.e(V,{type:"image"}),l.push({abortController:K,requestParameters:V,supportImageRefresh:te,state:"queued",onError:we=>{fe(we)},onSuccess:we=>{he(we)}}),M()}));const A=V=>a._(this,void 0,void 0,(function*(){V.state="running";const{requestParameters:K,supportImageRefresh:te,onError:he,onSuccess:fe,abortController:we}=V,Oe=te===!1&&!a.i(self)&&!a.g(K.url)&&(!K.headers||Object.keys(K.headers).reduce(((Ye,at)=>Ye&&at==="accept"),!0));h++;const Xe=Oe?j(K,we):a.m(K,we);try{const Ye=yield Xe;delete V.abortController,V.state="completed",Ye.data instanceof HTMLImageElement||a.b(Ye.data)?fe(Ye):Ye.data&&fe({data:yield(Qe=Ye.data,typeof createImageBitmap=="function"?a.f(Qe):a.h(Qe)),cacheControl:Ye.cacheControl,expires:Ye.expires})}catch(Ye){delete V.abortController,he(Ye)}finally{h--,M()}var Qe})),M=()=>{const V=(()=>{for(const K of Object.keys(b))if(b[K]())return!0;return!1})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let K=h;K<V&&l.length>0;K++){const te=l.shift();te.abortController.signal.aborted?K--:A(te)}},j=(V,K)=>new Promise(((te,he)=>{const fe=new Image,we=V.url,Oe=V.credentials;Oe&&Oe==="include"?fe.crossOrigin="use-credentials":(Oe&&Oe==="same-origin"||!a.d(we))&&(fe.crossOrigin="anonymous"),K.signal.addEventListener("abort",(()=>{fe.src="",he(new a.a(K.signal.reason))})),fe.fetchPriority="high",fe.onload=()=>{fe.onerror=fe.onload=null,te({data:fe})},fe.onerror=()=>{fe.onerror=fe.onload=null,K.signal.aborted||he(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},fe.src=we}))})(X||(X={})),X.resetRequestQueue();class ee{constructor(l){this._transformRequestFn=l??null}transformRequest(l,h){return this._transformRequestFn&&this._transformRequestFn(l,h)||{url:l}}setTransformRequest(l){this._transformRequestFn=l}}function J(E){const l=[];if(typeof E=="string")l.push({id:"default",url:E});else if(E&&E.length>0){const h=[];for(const{id:y,url:b}of E){const A=`${y}${b}`;h.indexOf(A)===-1&&(h.push(A),l.push({id:y,url:b}))}}return l}function le(E,l,h){try{const y=new URL(E);return y.pathname+=`${l}${h}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${E}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Z(E){const{userImage:l}=E;return!!(l&&l.render&&l.render())&&(E.data.replace(new Uint8Array(l.data.buffer)),!0)}class H extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const l of Object.keys(this.images))this.removeImage(l);this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,promiseResolve:y}of this.requestors)y(this._getImagesForIds(h));this.requestors=[]}}getImage(l){const h=this.images[l];if(h&&!h.data&&h.spriteData){const y=h.spriteData;h.data=new a.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),h.spriteData=null}return h}addImage(l,h){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let y=!0;const b=h.data||h.spriteData;return this._validateStretch(h.stretchX,b&&b.width)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,b&&b.height)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new a.k(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,h){if(!l)return!0;let y=0;for(const b of l){if(b[0]<y||b[1]<b[0]||h<b[1])return!1;y=b[1]}return!0}_validateContent(l,h){if(!l)return!0;if(l.length!==4)return!1;const y=h.spriteData,b=y&&y.width||h.data.width,A=y&&y.height||h.data.height;return!(l[0]<0||b<l[0]||l[1]<0||A<l[1]||l[2]<0||b<l[2]||l[3]<0||A<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,h,y=!0){const b=this.getImage(l);if(y&&(b.data.width!==h.data.width||b.data.height!==h.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=b.version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l){return new Promise(((h,y)=>{let b=!0;if(!this.isLoaded())for(const A of l)this.images[A]||(b=!1);this.isLoaded()||b?h(this._getImagesForIds(l)):this.requestors.push({ids:l,promiseResolve:h})}))}_getImagesForIds(l){const h={};for(const y of l){let b=this.getImage(y);b||(this.fire(new a.l("styleimagemissing",{id:y})),b=this.getImage(y)),b?h[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],y=this.getImage(l);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const b={w:y.data.width+2,h:y.data.height+2,x:0,y:0},A=new a.I(b,y);this.patterns[l]={bin:b,position:A}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(l,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const A in this.patterns)l.push(this.patterns[A].bin);const{w:h,h:y}=a.p(l),b=this.atlasImage;b.resize({width:h||1,height:y||1});for(const A in this.patterns){const{bin:M}=this.patterns[A],j=M.x+1,V=M.y+1,K=this.getImage(A).data,te=K.width,he=K.height;a.R.copy(K,b,{x:0,y:0},{x:j,y:V},{width:te,height:he}),a.R.copy(K,b,{x:0,y:he-1},{x:j,y:V-1},{width:te,height:1}),a.R.copy(K,b,{x:0,y:0},{x:j,y:V+he},{width:te,height:1}),a.R.copy(K,b,{x:te-1,y:0},{x:j-1,y:V},{width:1,height:he}),a.R.copy(K,b,{x:0,y:0},{x:j+te,y:V},{width:1,height:he})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.getImage(h);y||a.w(`Image with ID: "${h}" was not found`),Z(y)&&this.updateImage(h,y)}}cloneImages(){const l={};for(const h in this.images){const y=this.images[h];l[h]=Object.assign(Object.assign({},y),{data:y.data?y.data.clone():null})}return l}}const oe=1e20;function ue(E,l,h,y,b,A,M,j,V){for(let K=l;K<l+y;K++)ce(E,h*A+K,A,b,M,j,V);for(let K=h;K<h+b;K++)ce(E,K*A+l,1,y,M,j,V)}function ce(E,l,h,y,b,A,M){A[0]=0,M[0]=-oe,M[1]=oe,b[0]=E[l];for(let j=1,V=0,K=0;j<y;j++){b[j]=E[l+j*h];const te=j*j;do{const he=A[V];K=(b[j]-b[he]+te-he*he)/(j-he)/2}while(K<=M[V]&&--V>-1);V++,A[V]=j,M[V]=K,M[V+1]=oe}for(let j=0,V=0;j<y;j++){for(;M[V+1]<j;)V++;const K=A[V],te=j-K;E[l+j*h]=b[K]+te*te}}const be=a.v.layout_symbol["text-font"].default.join(",");class Te{constructor(l,h,y){this.requestManager=l,this.localIdeographFontFamily=h,this.entries={},this.lang=y}setURL(l){this.url=l}getGlyphs(l){return a._(this,void 0,void 0,(function*(){const h=[];for(const A in l)for(const M of l[A])h.push(this._getAndCacheGlyphsPromise(A,M));const y=yield Promise.all(h),b={};for(const{stack:A,id:M,glyph:j}of y)b[A]||(b[A]={}),b[A][M]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return b}))}_getAndCacheGlyphsPromise(l,h){return a._(this,void 0,void 0,(function*(){let y=this.entries[l];y||(y=this.entries[l]={glyphs:{},requests:{},ranges:{}});let b=y.glyphs[h];return b!==void 0?{stack:l,id:h,glyph:b}:!this.url||this._charUsesLocalIdeographFontFamily(h)?(b=y.glyphs[h]=this._drawGlyph(y,l,h),{stack:l,id:h,glyph:b}):yield this._downloadAndCacheRangePromise(l,h)}))}_downloadAndCacheRangePromise(l,h){return a._(this,void 0,void 0,(function*(){const y=this.entries[l],b=Math.floor(h/256);if(y.ranges[b])return{stack:l,id:h,glyph:null};if(!y.requests[b]){const A=Te.loadGlyphRange(l,b,this.url,this.requestManager);y.requests[b]=A}try{const A=yield y.requests[b];for(const M in A)y.glyphs[+M]=A[+M];return y.ranges[b]=!0,{stack:l,id:h,glyph:A[h]||null}}catch(A){const M=y.glyphs[h]=this._drawGlyph(y,l,h);return this._warnOnMissingGlyphRange(M,b,h,A),{stack:l,id:h,glyph:M}}}))}_warnOnMissingGlyphRange(l,h,y,b){const A=256*h,M=A+255,j=y.toString(16).padStart(4,"0").toUpperCase();a.w(`Unable to load glyph range ${h}, ${A}-${M}. Rendering codepoint U+${j} locally instead. ${b}`)}_charUsesLocalIdeographFontFamily(l){return!!this.localIdeographFontFamily&&a.q(l)}_drawGlyph(l,h,y){const b=h===be&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(y),A=b?"ideographTinySDF":"tinySDF";l[A]||(l[A]=this._createTinySDF(b?this.localIdeographFontFamily:h));const M=l[A].draw(String.fromCodePoint(y)),j=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(y));return{id:y,bitmap:new a.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:j?0:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:j?0:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(l){const h=l?l.split(","):[];h.push("sans-serif");const y=h.map((b=>/[-\w]+/.test(b)?b:`'${CSS.escape(b)}'`)).join(",");return new Te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:this._fontWeight(h[0]),fontStyle:this._fontStyle(h[0]),lang:this.lang})}_fontStyle(l){return/italic/i.test(l)?"italic":/oblique/i.test(l)?"oblique":"normal"}_fontWeight(l){const h={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let y;for(const[b,A]of Object.entries(h))new RegExp(`\\b${b}\\b`,"i").test(l)&&(y=`${A}`);return y}destroy(){for(const l in this.entries){const h=this.entries[l];h.tinySDF&&(h.tinySDF=null),h.ideographTinySDF&&(h.ideographTinySDF=null),h.glyphs={},h.requests={},h.ranges={}}this.entries={}}}Te.loadGlyphRange=function(E,l,h,y){return a._(this,void 0,void 0,(function*(){const b=256*l,A=b+255,M=y.transformRequest(h.replace("{fontstack}",E).replace("{range}",`${b}-${A}`),"Glyphs"),j=yield a.n(M,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${l}, ${b}-${A}`);const V={};for(const K of a.o(j.data))V[K.id]=K;return V}))},Te.TinySDF=class{constructor({fontSize:E=24,buffer:l=3,radius:h=8,cutoff:y=.25,fontFamily:b="sans-serif",fontWeight:A="normal",fontStyle:M="normal",lang:j=null}={}){this.buffer=l,this.cutoff=y,this.radius=h,this.lang=j;const V=this.size=E+4*l,K=this._createCanvas(V),te=this.ctx=K.getContext("2d",{willReadFrequently:!0});te.font=`${M} ${A} ${E}px ${b}`,te.textBaseline="alphabetic",te.textAlign="left",te.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Uint16Array(V)}_createCanvas(E){const l=document.createElement("canvas");return l.width=l.height=E,l}draw(E){const{width:l,actualBoundingBoxAscent:h,actualBoundingBoxDescent:y,actualBoundingBoxLeft:b,actualBoundingBoxRight:A}=this.ctx.measureText(E),M=Math.ceil(h),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-b))),V=Math.min(this.size-this.buffer,M+Math.ceil(y)),K=j+2*this.buffer,te=V+2*this.buffer,he=Math.max(K*te,0),fe=new Uint8ClampedArray(he),we={data:fe,width:K,height:te,glyphWidth:j,glyphHeight:V,glyphTop:M,glyphLeft:0,glyphAdvance:l};if(j===0||V===0)return we;const{ctx:Oe,buffer:Xe,gridInner:Qe,gridOuter:Ye}=this;this.lang&&(Oe.lang=this.lang),Oe.clearRect(Xe,Xe,j,V),Oe.fillText(E,Xe,Xe+M);const at=Oe.getImageData(Xe,Xe,j,V);Ye.fill(oe,0,he),Qe.fill(0,0,he);for(let St=0;St<V;St++)for(let ot=0;ot<j;ot++){const Et=at.data[4*(St*j+ot)+3]/255;if(Et===0)continue;const Pt=(St+Xe)*K+ot+Xe;if(Et===1)Ye[Pt]=0,Qe[Pt]=oe;else{const vt=.5-Et;Ye[Pt]=vt>0?vt*vt:0,Qe[Pt]=vt<0?vt*vt:0}}ue(Ye,0,0,K,te,K,this.f,this.v,this.z),ue(Qe,Xe,Xe,j,V,K,this.f,this.v,this.z);for(let St=0;St<he;St++){const ot=Math.sqrt(Ye[St])-Math.sqrt(Qe[St]);fe[St]=Math.round(255-255*(ot/this.radius+this.cutoff))}return we}};class ve{constructor(){this.specification=a.u.light.position}possiblyEvaluate(l,h){return a.F(l.expression.evaluate(h))}interpolate(l,h,y){return{x:a.G.number(l.x,h.x,y),y:a.G.number(l.y,h.y,y),z:a.G.number(l.z,h.z,y)}}}let Ce;class $e extends a.E{constructor(l){super(),Ce=Ce||new a.t({anchor:new a.D(a.u.light.anchor),position:new ve,color:new a.D(a.u.light.color),intensity:new a.D(a.u.light.intensity)}),this._transitionable=new a.x(Ce,void 0),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(a.y,l,h))for(const y in l){const b=l[y];y.endsWith(a.z)?this._transitionable.setTransition(y.slice(0,-a.z.length),b):this._transitionable.setValue(y,b)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&a.B(this,l.call(a.C,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.u}))}}const Je=new a.t({"sky-color":new a.D(a.u.sky["sky-color"]),"horizon-color":new a.D(a.u.sky["horizon-color"]),"fog-color":new a.D(a.u.sky["fog-color"]),"fog-ground-blend":new a.D(a.u.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.u.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.u.sky["atmosphere-blend"])});class ge extends a.E{constructor(l){super(),this._transitionable=new a.x(Je,void 0),this.setSky(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0))}setSky(l,h={}){if(!this._validate(a.J,l,h)){l||(l={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in l){const b=l[y];y.endsWith(a.z)?this._transitionable.setTransition(y.slice(0,-a.z.length),b):this._transitionable.setValue(y,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y={}){return y?.validate!==!1&&a.B(this,l.call(a.C,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.u})))}calculateFogBlendOpacity(l){return l<60?0:l<70?(l-60)/10:1}}class Ee{constructor(l,h){this.width=l,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,h){const y=l.join(",")+String(h);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(l,h)),this.dashEntry[y]}getDashRanges(l,h,y){const b=[];let A=l.length%2==1?-l[l.length-1]*y:0,M=l[0]*y,j=!0;b.push({left:A,right:M,isDash:j,zeroLength:l[0]===0});let V=l[0];for(let K=1;K<l.length;K++){j=!j;const te=l[K];A=V*y,V+=te,M=V*y,b.push({left:A,right:M,isDash:j,zeroLength:te===0})}return b}addRoundDash(l,h,y){const b=h/2;for(let A=-y;A<=y;A++){const M=this.width*(this.nextRow+y+A);let j=0,V=l[j];for(let K=0;K<this.width;K++){K/V.right>1&&(V=l[++j]);const te=Math.abs(K-V.left),he=Math.abs(K-V.right),fe=Math.min(te,he);let we;const Oe=A/y*(b+1);if(V.isDash){const Xe=b-Math.abs(Oe);we=Math.sqrt(fe*fe+Xe*Xe)}else we=b-Math.sqrt(fe*fe+Oe*Oe);this.data[M+K]=Math.max(0,Math.min(255,we+128))}}}addRegularDash(l){for(let j=l.length-1;j>=0;--j){const V=l[j],K=l[j+1];V.zeroLength?l.splice(j,1):K&&K.isDash===V.isDash&&(K.left=V.left,l.splice(j,1))}const h=l[0],y=l[l.length-1];h.isDash===y.isDash&&(h.left=y.left-this.width,y.right=h.right+this.width);const b=this.width*this.nextRow;let A=0,M=l[A];for(let j=0;j<this.width;j++){j/M.right>1&&(M=l[++A]);const V=Math.abs(j-M.left),K=Math.abs(j-M.right),te=Math.min(V,K);this.data[b+j]=Math.max(0,Math.min(255,(M.isDash?te:-te)+128))}}addDash(l,h){const y=h?7:0,b=2*y+1;if(this.nextRow+b>this.height)return a.w("LineAtlas out of space"),null;let A=0;for(let j=0;j<l.length;j++)A+=l[j];if(A!==0){const j=this.width/A,V=this.getDashRanges(l,this.width,j);h?this.addRoundDash(V,j,y):this.addRegularDash(V)}const M={y:this.nextRow+y,height:2*y,width:A};return this.nextRow+=b,this.dirty=!0,M}bind(l){const h=l.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const Ie="maplibre_preloaded_worker_pool";class Le{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Le.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach((h=>{h.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ie]}numActive(){return Object.keys(this.active).length}}const Ve=Math.floor(S.hardwareConcurrency/2);let ht,It;function xt(){return ht||(ht=new Le),ht}Le.workerCount=a.K(globalThis)?Math.max(Math.min(Ve,3),1):1;class rt{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=h;const y=this.workerPool.acquire(h);for(let b=0;b<y.length;b++){const A=new a.L(y[b],h);A.name=`Worker ${b}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,h){const y=[];for(const b of this.actors)y.push(b.sendAsync({type:l,data:h}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach((h=>{h.remove()})),this.actors=[],l&&this.workerPool.release(this.id)}registerMessageHandler(l,h){for(const y of this.actors)y.registerMessageHandler(l,h)}unregisterMessageHandler(l){for(const h of this.actors)h.unregisterMessageHandler(l)}}function zt(){return It||(It=new rt(xt(),a.M),It.registerMessageHandler("GR",((E,l,h)=>a.m(l,h)))),It}function Lt(E,l){const h=a.N();return a.O(h,h,[1,1,0]),a.Q(h,h,[.5*E.width,.5*E.height,1]),E.calculatePosMatrix?a.S(h,h,E.calculatePosMatrix(l.toUnwrapped())):h}function Ft(E,l,h,y,b,A,M){var j;const V=(function(fe,we,Oe){if(fe)for(const Xe of fe){const Qe=we[Xe];if(Qe&&Qe.source===Oe&&Qe.type==="fill-extrusion")return!0}else for(const Xe in we){const Qe=we[Xe];if(Qe.source===Oe&&Qe.type==="fill-extrusion")return!0}return!1})((j=b?.layers)!==null&&j!==void 0?j:null,l,E.id),K=A.maxPitchScaleFactor(),te=E.tilesIn(y,K,V);te.sort(dt);const he=[];for(const fe of te)he.push({wrappedTileID:fe.tileID.wrapped().key,queryResults:fe.tile.queryRenderedFeatures(l,h,E.getState(),fe.queryGeometry,fe.cameraQueryGeometry,fe.scale,b,A,K,Lt(A,fe.tileID),M?(we,Oe)=>M(fe.tileID,we,Oe):void 0)});return(function(fe,we){for(const Oe in fe)for(const Xe of fe[Oe])ke(Xe,we);return fe})((function(fe){const we={},Oe={};for(const Xe of fe){const Qe=Xe.queryResults,Ye=Xe.wrappedTileID,at=Oe[Ye]=Oe[Ye]||{};for(const St in Qe){const ot=Qe[St],Et=at[St]=at[St]||{},Pt=we[St]=we[St]||[];for(const vt of ot)Et[vt.featureIndex]||(Et[vt.featureIndex]=!0,Pt.push(vt))}}return we})(he),E)}function dt(E,l){const h=E.tileID,y=l.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function ke(E,l){const h=E.feature,y=l.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=y}function fr(E,l,h){return a._(this,void 0,void 0,(function*(){let y=E;if(E.url?y=(yield a.j(l.transformRequest(E.url,"Source"),h)).data:yield S.frameAsync(h),!y)return null;const b=a.U(a.e(y,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(b.vectorLayerIds=y.vector_layers.map((A=>A.id))),b}))}class sr{constructor(l,h){l&&(h?this.setSouthWest(l).setNorthEast(h):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.V?new a.V(l.lng,l.lat):a.V.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.V?new a.V(l.lng,l.lat):a.V.convert(l),this}extend(l){const h=this._sw,y=this._ne;let b,A;if(l instanceof a.V)b=l,A=l;else{if(!(l instanceof sr))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(sr.convert(l)):this.extend(a.V.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.V.convert(l)):this;if(b=l._sw,A=l._ne,!b||!A)return this}return h||y?(h.lng=Math.min(b.lng,h.lng),h.lat=Math.min(b.lat,h.lat),y.lng=Math.max(A.lng,y.lng),y.lat=Math.max(A.lat,y.lat)):(this._sw=new a.V(b.lng,b.lat),this._ne=new a.V(A.lng,A.lat)),this}getCenter(){return new a.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.V(this.getWest(),this.getNorth())}getSouthEast(){return new a.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:h,lat:y}=a.V.convert(l);let b=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&b}intersects(l){if(!((l=sr.convert(l)).getNorth()>=this.getSouth()&&l.getSouth()<=this.getNorth()))return!1;const h=Math.abs(this.getEast()-this.getWest()),y=Math.abs(l.getEast()-l.getWest());if(h>=360||y>=360)return!0;const b=a.W(this.getWest(),-180,180),A=a.W(this.getEast(),-180,180),M=a.W(l.getWest(),-180,180),j=a.W(l.getEast(),-180,180),V=b>=A,K=M>=j;return!(!V||!K)||(V?j>=b||M<=A:K?A>=M||b<=j:M<=A&&j>=b)}static convert(l){return l instanceof sr?l:l&&new sr(l)}static fromLngLat(l,h=0){const y=360*h/40075017,b=y/Math.cos(Math.PI/180*l.lat);return new sr(new a.V(l.lng-b,l.lat-y),new a.V(l.lng+b,l.lat+y))}adjustAntiMeridian(){const l=new a.V(this._sw.lng,this._sw.lat),h=new a.V(this._ne.lng,this._ne.lat);return new sr(l,l.lng>h.lng?new a.V(h.lng+360,h.lat):h)}}class xr{constructor(l,h,y){this.bounds=sr.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),y=Math.floor(a.Y(this.bounds.getWest())*h),b=Math.floor(a.X(this.bounds.getNorth())*h),A=Math.ceil(a.Y(this.bounds.getEast())*h),M=Math.ceil(a.X(this.bounds.getSouth())*h);return l.x>=y&&l.x<A&&l.y>=b&&l.y<M}}class tr extends a.E{constructor(l,h,y,b){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.U(h,["url","scheme","tileSize","promoteId","encoding"])),this._options=a.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield fr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),l&&(a.e(this,l),l.bounds&&(this.tileBounds=new xr(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,a.Z(l)||this.fire(new a.k(l))}}))}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.abort(),l(),this.load()}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(h,"Tile"),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(l)};y.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(l.actor&&l.state!=="expired"){if(l.state==="loading")return new Promise(((A,M)=>{l.reloadPromise={resolve:A,reject:M}}))}else l.actor=this.dispatcher.getActor(),b="LT";l.abortController=new AbortController;try{const A=yield l.actor.sendAsync({type:b,data:y},l.abortController);if(delete l.abortController,l.aborted)return;this._afterTileLoadWorkerResponse(l,A)}catch(A){if(delete l.abortController,l.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(l,null)}}))}_getOverzoomParameters(l){if(l.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const h=l.tileID.scaledTo(this.maxzoom).canonical,y=h.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:h,overzoomRequest:this.map._requestManager.transformRequest(y,"Tile")}}_afterTileLoadWorkerResponse(l,h){if(h&&h.resourceTiming&&(l.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&l.setExpiryData(h),l.loadVectorData(h,this.map.painter),l.reloadPromise){const y=l.reloadPromise;l.reloadPromise=null,this.loadTile(l).then(y.resolve).catch(y.reject)}}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.actor&&(yield l.actor.sendAsync({type:"AT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),l.actor&&(yield l.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ge extends a.E{constructor(l,h,y,b){super(),this.id=l,this.dispatcher=y,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},h),a.e(this,a.U(h,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(l=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const h=yield fr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(a.e(this,h),h.bounds&&(this.tileBounds=new xr(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:l})))}catch(h){this._tileJSONRequest=null,this._loaded=!0,a.Z(h)||this.fire(new a.k(h))}}))}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),l(),this.load(!0)}setTiles(l){return this.setSourceProperty((()=>{this._options.tiles=l})),this}setUrl(l){return this.setSourceProperty((()=>{this.url=l,this._options.url=l})),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.abortController=new AbortController;try{const y=yield X.getImage(this.map._requestManager.transformRequest(h,"Tile"),l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&l.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const b=this.map.painter.context,A=b.gl,M=y.data;l.texture=this.map.painter.getTileTexture(M.width),l.texture?l.texture.update(M,{useMipmap:!0}):(l.texture=new a.T(b,M,A.RGBA,{useMipmap:!0}),l.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),l.state="loaded"}}catch(y){if(delete l.abortController,l.aborted)l.state="unloaded";else if(y)throw l.state="errored",y}}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController)}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.texture&&this.map.painter.saveTileTexture(l.texture)}))}hasTransition(){return!1}}class nt extends Ge{constructor(l,h,y,b){super(l,h,y,b),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(h,"Tile");l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.abortController=new AbortController;try{const b=yield X.getImage(y,l.abortController,this.map._refreshExpiredTiles);if(delete l.abortController,l.aborted)return void(l.state="unloaded");if(b&&b.data){const A=b.data;this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&l.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const M=a.b(A)&&a.$()?A:yield this.readImageNow(A),j={type:this.type,uid:l.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!l.actor||l.state==="expired"){l.actor=this.dispatcher.getActor();const V=yield l.actor.sendAsync({type:"LDT",data:j});l.dem=V,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded"}}}catch(b){if(delete l.abortController,l.aborted)l.state="unloaded";else if(b)throw l.state="errored",b}}))}readImageNow(l){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.a0()){const h=l.width+2,y=l.height+2;try{return new a.R({width:h,height:y},yield a.a1(l,-1,-1,h,y))}catch{}}return S.getImageData(l,1)}))}_getNeighboringTiles(l){const h=l.canonical,y=Math.pow(2,h.z),b=(h.x-1+y)%y,A=h.x===0?l.wrap-1:l.wrap,M=(h.x+1+y)%y,j=h.x+1===y?l.wrap+1:l.wrap,V={};return V[new a.a2(l.overscaledZ,A,h.z,b,h.y).key]={backfilled:!1},V[new a.a2(l.overscaledZ,j,h.z,M,h.y).key]={backfilled:!1},h.y>0&&(V[new a.a2(l.overscaledZ,A,h.z,b,h.y-1).key]={backfilled:!1},V[new a.a2(l.overscaledZ,l.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},V[new a.a2(l.overscaledZ,j,h.z,M,h.y-1).key]={backfilled:!1}),h.y+1<y&&(V[new a.a2(l.overscaledZ,A,h.z,b,h.y+1).key]={backfilled:!1},V[new a.a2(l.overscaledZ,l.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},V[new a.a2(l.overscaledZ,j,h.z,M,h.y+1).key]={backfilled:!1}),V}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&(yield l.actor.sendAsync({type:"RDT",data:{type:this.type,uid:l.uid,source:this.id}}))}))}}function ut(E){return E.type==="GeometryCollection"?E.geometries.map((l=>l.coordinates)).flat(1/0):E.coordinates.flat(1/0)}function Nt(E){const l=new sr;let h;switch(E.type){case"FeatureCollection":h=E.features.map((y=>ut(y.geometry))).flat(1/0);break;case"Feature":h=ut(E.geometry);break;default:h=ut(E)}if(h.length==0)return l;for(let y=0;y<h.length-1;y+=2)l.extend([h[y],h[y+1]]);return l}class Kt extends a.E{constructor(l,h,y,b){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=y.getActor(),this.setEventedParent(b),this._data=typeof h.data=="string"?{url:h.data}:{geojson:h.data},this._options=a.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:a.a5,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.a5,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(l){return l*(a.a5/this.tileSize)}_getClusterMaxZoom(l){const h=l?Math.round(l):this.maxzoom-1;return Number.isInteger(l)||l===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${l}" rounded to "${h}"`),h}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(l){this.map=l,this.load()}setData(l,h){this._data=typeof l=="string"?{url:l}:{geojson:l},this._pendingWorkerUpdate={data:l};const y=this._updateWorkerData();return h?y:this}updateData(l,h){this._pendingWorkerUpdate.diff=a.a6(this._pendingWorkerUpdate.diff,l);const y=this._updateWorkerData();return h?y:this}getData(){return a._(this,void 0,void 0,(function*(){const l=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:l})}))}getBounds(){return a._(this,void 0,void 0,(function*(){return Nt(yield this.getData())}))}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(l.clusterRadius)),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(l.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(l){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:l,source:this.id}})}getClusterChildren(l){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:l,source:this.id}})}getClusterLeaves(l,h,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:l,limit:h,offset:y}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void a.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:l,diff:h}=this._pendingWorkerUpdate,y=a.e({type:this.type},this.workerOptions);l!==void 0?(typeof l=="string"?(y.request=this.map._requestManager.transformRequest(S.resolveURL(l),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=l,this._pendingWorkerUpdate.data=void 0):h&&(y.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const b=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||b.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));b.data&&(this._data={geojson:b.data});const A=this._applyDiffToSource(h),M=this._getShouldReloadTileOptions(A);let j=null;b.resourceTiming&&b.resourceTiming[this.id]&&(j=b.resourceTiming[this.id].slice(0));const V={dataType:"source"};this._collectResourceTiming&&j&&j.length>0&&a.e(V,{resourceTiming:j}),this.fire(new a.l("data",Object.assign(Object.assign({},V),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},V),{sourceDataType:"content",shouldReloadTileOptions:M})))}catch(b){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(b))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(l){if(!l)return;const h=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const b=a.a7(this._data.geojson,h);if(!b)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:b}}if(!this._data.updateable)return;const y=a.a8(this._data.updateable,l,h);return l.removeAll||this._options.cluster?void 0:y}_getShouldReloadTileOptions(l){if(l)return{affectedBounds:l.filter(Boolean).map((h=>Nt(h)))}}shouldReloadTile(l,{affectedBounds:h}){if(l.state==="loading")return!0;if(l.state==="unloaded")return!1;const{buffer:y,extent:b}=this.workerOptions.geojsonVtOptions,A=(function({x:M,y:j,z:V},K=0){const te=a.a3((M-K)/Math.pow(2,V)),he=a.a4((j+1+K)/Math.pow(2,V)),fe=a.a3((M+1+K)/Math.pow(2,V)),we=a.a4((j-K)/Math.pow(2,V));return new sr([te,he],[fe,we])})(l.tileID.canonical,y/b);for(const M of h)if(A.intersects(M))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(l){return a._(this,void 0,void 0,(function*(){const h=l.actor?"RT":"LT";l.actor=this.actor;const y={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};l.abortController=new AbortController;const b=yield this.actor.sendAsync({type:h,data:y},l.abortController);delete l.abortController,l.unloadVectorData(),l.aborted||l.loadVectorData(b,this.map.painter,h==="RT")}))}abortTile(l){return a._(this,void 0,void 0,(function*(){l.abortController&&(l.abortController.abort(),delete l.abortController),l.aborted=!0}))}unloadTile(l){return a._(this,void 0,void 0,(function*(){l.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:l.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Vt extends a.E{constructor(l,h,y,b){super(),this.flippedWindingOrder=!1,this.id=l,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=h}load(l){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,l&&(this.coordinates=l),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,a.Z(h)||this.fire(new a.k(h))}}))}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=l.url,this.load(l.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(l){this.coordinates=l;const h=l.map(a.a9.fromLngLat);var y;return this.tileID=(function(b){const A=a.aa.fromPoints(b),M=A.width(),j=A.height(),V=Math.max(M,j),K=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),te=Math.pow(2,K);return new a.ac(K,Math.floor((A.minX+A.maxX)/2*te),Math.floor((A.minY+A.maxY)/2*te))})(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map((b=>this.tileID.getTilePoint(b)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this.texture||(this.texture=new a.T(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const A=this.tiles[b];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(l){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={}):l.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(l){const{minX:h,minY:y,maxX:b,maxY:A}=a.aa.fromPoints(l),M={};for(let j=0;j<=a.ab;j++){const V=Math.pow(2,j),K=Math.floor(h*V),te=Math.floor(y*V),he=Math.floor(b*V),fe=Math.floor(A*V),we=(K%V+V)%V,Oe=he%V,Xe=Math.floor(K/V),Qe=Math.floor(he/V);M[j]={minWrap:Xe,maxWrap:Qe,minTileXWrapped:we,maxTileXWrapped:Oe,minTileY:te,maxTileY:fe}}return M}}class Ke extends Vt{constructor(l,h,y,b){super(l,h,y,b),this.roundZoom=!0,this.type="video",this.options=h}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const l=this.options;this.urls=[];for(const h of l.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield a.ad(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new a.k(h))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const h=this.video.seekable;l<h.start(0)||l>h.end(0)?this.fire(new a.k(new a.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,h=l.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(l,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const A=this.tiles[b];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class me extends Vt{constructor(l,h,y,b){super(l,h,y,b),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some((A=>!Array.isArray(A)||A.length!==2||A.some((M=>typeof M!="number"))))||this.fire(new a.k(new a.ae(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.ae(`sources.${l}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.k(new a.ae(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.ae(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.ae(`sources.${l}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,y=h.gl;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new a.T(h,this.canvas,y.RGBA,{premultiply:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let b=!1;for(const A in this.tiles){const M=this.tiles[A];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,b=!0)}b&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const pe={},Ae=E=>{switch(E){case"geojson":return Kt;case"image":return Vt;case"raster":return Ge;case"raster-dem":return nt;case"vector":return tr;case"video":return Ke;case"canvas":return me}return pe[E]},Be="RTLPluginLoaded";class Ne extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=zt()}_syncState(l){return this.status=l,this.dispatcher.broadcast("SRPS",{pluginStatus:l,pluginURL:this.url}).catch((h=>{throw this.status="error",h}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(l){return a._(this,arguments,void 0,(function*(h,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Be))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Tt=null;function bt(){return Tt||(Tt=new Ne),Tt}var tt,gt;(function(E){E[E.Base=0]="Base",E[E.Parent=1]="Parent"})(tt||(tt={})),(function(E){E[E.Departing=0]="Departing",E[E.Incoming=1]="Incoming"})(gt||(gt={}));class $t{constructor(l,h){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=l,this.uid=a.af(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(l){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(l||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:l,fadingDirection:h,fadingParentID:y,fadeEndTime:b}){this.resetFadeLogic(),this.fadingRole=l,this.fadingDirection=h,this.fadingParentID=y,this.fadeEndTime=b}setSelfFadeLogic(l){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=l}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=O(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,h,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData,this.latestFeatureIndex.encoding=l.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=(function(b,A){const M={};if(!A)return M;for(const j of b){const V=j.layerIds.map((K=>A.getLayer(K))).filter(Boolean);if(V.length!==0){j.layers=V,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((K=>V.filter((te=>te.id===K))[0])));for(const K of V)M[K.id]=j}}return M})(l.buckets,h?.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const A=this.buckets[b];if(A instanceof a.ah){if(this.hasSymbolBuckets=!0,!y)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const A=this.buckets[b];if(A instanceof a.ah&&A.hasRTLText){this.hasRTLText=!0,bt().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const A=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(b).queryRadius(A))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),this.dashPositions=l.dashPositions}else this.collisionBoxArray=new a.ag}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const y in this.buckets){const b=this.buckets[y];b.uploadPending()&&b.upload(l)}const h=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(l,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(l,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,h,y,b,A,M,j,V,K,te,he){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:A,scale:M,tileSize:this.tileSize,pixelPosMatrix:te,transform:V,params:j,queryPadding:this.queryPadding*K,getElevation:he},l,h,y):{}}querySourceFeatures(l,h){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const b=y.loadVTLayers(),A=h&&h.sourceLayer?h.sourceLayer:"",M=b[a.ai]||b[A];if(!M)return;const j=a.aj(h?.filter,h?.globalState),{z:V,x:K,y:te}=this.tileID.canonical,he={z:V,x:K,y:te};for(let fe=0;fe<M.length;fe++){const we=M.feature(fe);if(j.needGeometry){const Qe=a.ak(we,!0);if(!j.filter(new a.H(this.tileID.overscaledZ),Qe,this.tileID.canonical))continue}else if(!j.filter(new a.H(this.tileID.overscaledZ),we))continue;const Oe=y.getId(we,A),Xe=new a.al(we,V,K,te,Oe);Xe.tile=he,l.push(Xe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const h=this.expirationTime;if(l.cacheControl){const y=a.am(l.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const y=Date.now();let b=!1;if(this.expirationTime>y)b=!1;else if(h)if(this.expirationTime<h)b=!0;else{const A=this.expirationTime-h;A?this.expirationTime=y+Math.max(A,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!h.style.hasLayer(b))continue;const A=this.buckets[b],M=A.layers[0].sourceLayer||a.ai,j=y[M],V=l[M];if(!j||!V||Object.keys(V).length===0)continue;A.update(V,j,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const K=h&&h.style&&h.style.getLayer(b);K&&(this.queryPadding=Math.max(this.queryPadding,K.queryRadius(A)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(l){this.symbolFadeHoldUntil=O()+l}setDependencies(l,h){const y={};for(const b of h)y[b]=!0;this.dependencies[l]=y}hasDependency(l,h){for(const y of l){const b=this.dependencies[y];if(b){for(const A of h)if(b[A])return!0}}return!1}}class kt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,h,y){const b=String(h);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][b]=this.stateChanges[l][b]||{},a.e(this.stateChanges[l][b],y),this.deletedStates[l]===null){this.deletedStates[l]={};for(const A in this.state[l])A!==b&&(this.deletedStates[l][A]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][b]===null){this.deletedStates[l][b]={};for(const A in this.state[l][b])y[A]||(this.deletedStates[l][b][A]=null)}else for(const A in y)this.deletedStates[l]&&this.deletedStates[l][b]&&this.deletedStates[l][b][A]===null&&delete this.deletedStates[l][b][A]}removeFeatureState(l,h,y){if(this.deletedStates[l]===null)return;const b=String(h);if(this.deletedStates[l]=this.deletedStates[l]||{},y&&h!==void 0)this.deletedStates[l][b]!==null&&(this.deletedStates[l][b]=this.deletedStates[l][b]||{},this.deletedStates[l][b][y]=null);else if(h!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][b])for(y in this.deletedStates[l][b]={},this.stateChanges[l][b])this.deletedStates[l][b][y]=null;else this.deletedStates[l][b]=null;else this.deletedStates[l]=null}getState(l,h){const y=String(h),b=a.e({},(this.state[l]||{})[y],(this.stateChanges[l]||{})[y]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const A=this.deletedStates[l][h];if(A===null)return{};for(const M in A)delete b[M]}return b}initializeTileState(l,h){l.setFeatureState(this.state,h)}coalesceChanges(l,h){const y={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const A={};for(const M in this.stateChanges[b])this.state[b][M]||(this.state[b][M]={}),a.e(this.state[b][M],this.stateChanges[b][M]),A[M]=this.state[b][M];y[b]=A}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const A={};if(this.deletedStates[b]===null)for(const M in this.state[b])A[M]={},this.state[b][M]={};else for(const M in this.deletedStates[b]){if(this.deletedStates[b][M]===null)this.state[b][M]={};else for(const j of Object.keys(this.deletedStates[b][M]))delete this.state[b][M][j];A[M]=this.state[b][M]}y[b]=y[b]||{},a.e(y[b],A)}this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0&&l.setFeatureState(y,h)}}const cr=89.25;function mr(E,l){const h=a.an(l.lat,-a.ao,a.ao);return new a.P(a.Y(l.lng)*E,a.X(h)*E)}function Zr(E,l){return new a.a9(l.x/E,l.y/E).toLngLat()}function mn(E){return E.cameraToCenterDistance*Math.min(.85*Math.tan(a.ap(90-E.pitch)),Math.tan(a.ap(cr-E.pitch)))}function Kr(E,l){const h=E.canonical,y=l/a.aq(h.z),b=h.x+Math.pow(2,h.z)*E.wrap,A=a.ar(new Float64Array(16));return a.O(A,A,[b*y,h.y*y,0]),a.Q(A,A,[y/a.a5,y/a.a5,1]),A}function Rt(E,l,h,y,b){const A=a.a9.fromLngLat(E,l),M=b*a.as(1,E.lat),{x:j,y:V,z:K}=Ur(h,y);return new a.a9(A.x+M*-j,A.y+M*-V,A.z+M*-K)}function Ur(E,l){const h=a.ap(E),y=a.ap(l),b=Math.cos(-h),A=Math.sin(h);return{x:A*Math.sin(y),y:-A*Math.cos(y),z:b}}function Fn(E,l,h){const y=l.intersectsFrustum(E);if(!h||y===0)return y;const b=l.intersectsPlane(h);return b===0?0:y===2&&b===2?2:1}function Jr(E,l,h){let y=0;const b=(h-l)/10;for(let A=0;A<10;A++)y+=b*Math.pow(Math.cos(l+(A+.5)/10*(h-l)),E);return y}function jr(E,l){return function(h,y,b,A,M){const j=2*((E-1)/a.at(Math.cos(a.ap(cr-M))/Math.cos(a.ap(cr)))-1),V=Math.acos(b/A),K=2*Jr(j-1,0,a.ap(M/2)),te=Math.min(a.ap(cr),V+a.ap(M/2)),he=Jr(j-1,Math.min(te,V-a.ap(M/2)),te),fe=Math.atan(y/b),we=Math.hypot(y,b);let Oe=h;return Oe+=a.at(A/we/Math.max(.5,Math.cos(a.ap(M/2)))),Oe+=j*a.at(Math.cos(fe))/2,Oe-=a.at(Math.max(1,he/K/l))/2,Oe}}const wt=jr(9.314,3);function Ct(E,l){const h=(l.roundZoom?Math.round:Math.floor)(E.zoom+a.at(E.tileSize/l.tileSize));return Math.max(0,h)}function Wt(E,l){const h=E.getCameraFrustum(),y=E.getClippingPlane(),b=E.screenPointToMercatorCoordinate(E.getCameraPoint()),A=a.a9.fromLngLat(E.center,E.elevation);b.z=A.z+Math.cos(E.pitchInRadians)*E.cameraToCenterDistance/E.worldSize;const M=E.getCoveringTilesDetailsProvider(),j=M.allowVariableZoom(E,l),V=Ct(E,l),K=l.minzoom||0,te=l.maxzoom!==void 0?l.maxzoom:E.maxZoom,he=Math.min(Math.max(0,V),te),fe=Math.pow(2,he),we=[fe*b.x,fe*b.y,0],Oe=[fe*A.x,fe*A.y,0],Xe=Math.hypot(A.x-b.x,A.y-b.y),Qe=Math.abs(A.z-b.z),Ye=Math.hypot(Xe,Qe),at=Et=>({zoom:0,x:0,y:0,wrap:Et,fullyVisible:!1}),St=[],ot=[];if(E.renderWorldCopies&&M.allowWorldCopies())for(let Et=1;Et<=3;Et++)St.push(at(-Et)),St.push(at(Et));for(St.push(at(0));St.length>0;){const Et=St.pop(),Pt=Et.x,vt=Et.y;let jt=Et.fullyVisible;const nr={x:Pt,y:vt,z:Et.zoom},Xt=M.getTileBoundingVolume(nr,Et.wrap,E.elevation,l);if(!jt){const Dr=Fn(h,Xt,y);if(Dr===0)continue;jt=Dr===2}const Jt=M.distanceToTile2d(b.x,b.y,nr,Xt);let rr=V;j&&(rr=(l.calculateTileZoom||wt)(E.zoom+a.at(E.tileSize/l.tileSize),Jt,Qe,Ye,E.fov)),rr=(l.roundZoom?Math.round:Math.floor)(rr),rr=Math.max(0,rr);const Or=Math.min(rr,te);if(Et.wrap=M.getWrap(A,nr,Et.wrap),Et.zoom>=Or){if(Et.zoom<K)continue;const Dr=he-Et.zoom,Er=we[0]-.5-(Pt<<Dr),Gr=we[1]-.5-(vt<<Dr),qn=l.reparseOverscaled?Math.max(Et.zoom,rr):Et.zoom;ot.push({tileID:new a.a2(Et.zoom===te?qn:Et.zoom,Et.wrap,Et.zoom,Pt,vt),distanceSq:a.au([Oe[0]-.5-Pt,Oe[1]-.5-vt]),tileDistanceToCamera:Math.sqrt(Er*Er+Gr*Gr)})}else for(let Dr=0;Dr<4;Dr++)St.push({zoom:Et.zoom+1,x:(Pt<<1)+Dr%2,y:(vt<<1)+(Dr>>1),wrap:Et.wrap,fullyVisible:jt})}return ot.sort(((Et,Pt)=>Et.distanceSq-Pt.distanceSq)).map((Et=>Et.tileID))}const ie=a.aa.fromPoints([new a.P(0,0),new a.P(a.a5,a.a5)]);function _e(E){return E==="raster"||E==="image"||E==="video"}function Ze(E,l,h,y,b,A,M){if(!l.hasData())return!1;const{tileID:j,fadingRole:V,fadingDirection:K,fadingParentID:te}=l;if(V===tt.Base&&K===gt.Incoming&&te)return h[te.key]=te,!0;const he=Math.max(j.overscaledZ-b,A);for(let fe=j.overscaledZ-1;fe>=he;fe--){const we=j.scaledTo(fe),Oe=E.getLoadedTile(we);if(Oe)return l.setCrossFadeLogic({fadingRole:tt.Base,fadingDirection:gt.Incoming,fadingParentID:Oe.tileID,fadeEndTime:y+M}),Oe.setCrossFadeLogic({fadingRole:tt.Parent,fadingDirection:gt.Departing,fadeEndTime:y+M}),h[we.key]=we,!0}return!1}function _t(E,l,h,y,b,A){if(!l.hasData())return!1;const M=l.tileID.children(b);let j=lt(E,l,M,h,y,b,A);if(j)return!0;for(const V of M)lt(E,l,V.children(b),h,y,b,A)&&(j=!0);return j}function lt(E,l,h,y,b,A,M){if(h[0].overscaledZ>=A)return!1;let j=!1;for(const V of h){const K=E.getLoadedTile(V);if(!K)continue;const{fadingRole:te,fadingDirection:he,fadingParentID:fe}=K;te===tt.Base&&he===gt.Departing&&fe||(K.setCrossFadeLogic({fadingRole:tt.Base,fadingDirection:gt.Departing,fadingParentID:l.tileID,fadeEndTime:b+M}),l.setCrossFadeLogic({fadingRole:tt.Parent,fadingDirection:gt.Incoming,fadeEndTime:b+M})),y[V.key]=V,j=!0}return j}function or(E,l,h,y){const b=E.tileID;return!!E.selfFading||!E.hasData()&&!!l.has(b)&&(E.setSelfFadeLogic(h+y),!0)}function Ar(E,l){var h;E.needsHillshadePrepare=!0,E.needsTerrainPrepare=!0;let y=l.tileID.canonical.x-E.tileID.canonical.x;const b=l.tileID.canonical.y-E.tileID.canonical.y,A=Math.pow(2,E.tileID.canonical.z),M=l.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+A)===1?y+=A:Math.abs(y-A)===1&&(y-=A)),l.dem&&E.dem&&(E.dem.backfillBorder(l.dem,y,b),!((h=E.neighboringTiles)===null||h===void 0)&&h[M]&&(E.neighboringTiles[M].backfilled=!0)))}class Vr{constructor(){this._tiles={}}handleWrapJump(l){const h={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+l),h[b.tileID.key]=b}this._tiles=h}setFeatureState(l,h){for(const y in this._tiles)this._tiles[y].setFeatureState(l,h)}getAllTiles(){return Object.values(this._tiles)}getAllIds(l=!1){return l?Object.values(this._tiles).map((h=>h.tileID)).sort(a.aw).map((h=>h.key)):Object.keys(this._tiles)}getTileById(l){return this._tiles[l]}setTile(l,h){this._tiles[l]=h}deleteTileById(l){delete this._tiles[l]}getLoadedTile(l){const h=this.getTileById(l.key);return h?.hasData()?h:null}isIdRenderable(l,h=!1){var y;return(y=this.getTileById(l))===null||y===void 0?void 0:y.isRenderable(h)}getRenderableIds(l=0,h){const y=[];for(const b of this.getAllIds())this.isIdRenderable(b,h)&&y.push(this.getTileById(b));return h?y.sort(((b,A)=>{const M=b.tileID,j=A.tileID,V=new a.P(M.canonical.x,M.canonical.y)._rotate(-l),K=new a.P(j.canonical.x,j.canonical.y)._rotate(-l);return M.overscaledZ-j.overscaledZ||K.y-V.y||K.x-V.x})).map((b=>b.tileID.key)):y.map((b=>b.tileID)).sort(a.aw).map((b=>b.key))}}class Rr extends a.E{constructor(l,h,y){super(),this.id=l,this.dispatcher=y,this.on("data",(b=>this._dataHandler(b))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((b,A,M,j)=>{const V=new(Ae(A.type))(b,A,M,j);if(V.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${V.id}`);return V})(l,h,y,this),this._inViewTiles=new Vr,this._outOfViewCache=new a.ax(0,(b=>this._unloadTile(b))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new kt,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){for(const h of this._inViewTiles.getAllTiles())h.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l),this._inViewTiles=new Vr}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l of this._inViewTiles.getAllTiles())if(l.state!=="loaded"&&l.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,h,y){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(l),this._tileLoaded(l,h,y)}catch(b){l.state="errored",b.status!==404?this._source.fire(new a.k(b,{tile:l})):this.update(this.transform,this.terrain)}}))}_unloadTile(l){this._source.unloadTile&&this._source.unloadTile(l)}_abortTile(l){this._source.abortTile&&this._source.abortTile(l),this._source.fire(new a.l("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const h of this._inViewTiles.getAllTiles())h.upload(l),h.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(l){var h;return this._inViewTiles.getRenderableIds((h=this.transform)===null||h===void 0?void 0:h.bearingInRadians,l)}hasRenderableParent(l){const h=l.overscaledZ-1;if(h>=this._source.minzoom){const y=this.getLoadedTile(l.scaledTo(h));if(y)return this._inViewTiles.isIdRenderable(y.tileID.key)}return!1}reload(l,h=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const y of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(y);h&&!this._source.shouldReloadTile(b,h)||(l?this._reloadTile(y,"expired"):b.state!=="errored"&&this._reloadTile(y,"reloading"))}}}_reloadTile(l,h){return a._(this,void 0,void 0,(function*(){const y=this._inViewTiles.getTileById(l);y&&(y.state!=="loading"&&(y.state=h),yield this._loadTile(y,l,h))}))}_tileLoaded(l,h,y){l.timeAdded=O(),l.selfFading&&(l.fadeEndTime=l.timeAdded+this._rasterFadeDuration),y==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(h,l),this.getSource().type==="raster-dem"&&l.dem&&(function(b,A){var M,j;const V=A.getRenderableIds();for(const K of V){if(!b.neighboringTiles||!b.neighboringTiles[K])continue;const te=A.getTileById(K);b.neighboringTiles[K].backfilled||Ar(b,te),!((j=(M=te.neighboringTiles)===null||M===void 0?void 0:M[b.tileID.key])===null||j===void 0)&&j.backfilled||Ar(te,b)}})(l,this._inViewTiles),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:l,coord:l.tileID}))}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._inViewTiles.getTileById(l)}_retainLoadedChildren(l,h){const y=this._getLoadedDescendents(h),b=new Set;for(const A of h){const M=y[A.key];if(!M?.length){b.add(A);continue}const j=A.overscaledZ+Rr.maxOverzooming,V=M.filter((he=>he.tileID.overscaledZ<=j));if(!V.length){b.add(A);continue}const K=Math.min(...V.map((he=>he.tileID.overscaledZ))),te=V.filter((he=>he.tileID.overscaledZ===K)).map((he=>he.tileID));for(const he of te)l[he.key]=he;this._areDescendentsComplete(te,K,A.overscaledZ)||b.add(A)}return b}_getLoadedDescendents(l){var h;const y={};for(const b of this._inViewTiles.getAllTiles().filter((A=>A.hasData())))for(const A of l)b.tileID.isChildOf(A)&&(y[h=A.key]||(y[h]=[])).push(b);return y}_areDescendentsComplete(l,h,y){return l.length===1&&l[0].isOverscaled()?l[0].overscaledZ===h:Math.pow(4,h-y)===l.length}getLoadedTile(l){return this._inViewTiles.getLoadedTile(l)}updateCacheSize(l){const h=Math.ceil(l.width/this._source.tileSize)+1,y=Math.ceil(l.height/this._source.tileSize)+1,b=Math.floor(h*y*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._outOfViewCache.setMaxSize(A)}handleWrapJump(l){const h=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);this._prevLng=l,h&&(this._inViewTiles.handleWrapJump(h),this._resetTileReloadTimers())}update(l,h){if(!this._sourceLoaded||this._paused)return;let y;this.transform=l,this.terrain=h,this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=l.getVisibleUnwrappedCoordinates(this._source.tileID).map((V=>new a.a2(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y))):(y=Wt(l,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?l.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((V=>this._source.hasTile(V))))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const b=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,b&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=Ct(l,this._source),M=this._updateRetainedTiles(y,A),j=_e(this._source.type);j&&this._rasterFadeDuration>0&&!h&&(function(V,K,te,he,fe,we,Oe){const Xe=O(),Qe=a.av(K);for(const Ye of K){const at=V.getTileById(Ye.key);at.fadingDirection!==gt.Departing&&at.fadeOpacity!==0||at.resetFadeLogic(),Ze(V,at,te,Xe,he,fe,Oe)||_t(V,at,te,Xe,we,Oe)||or(at,Qe,Xe,Oe)||at.resetFadeLogic()}})(this._inViewTiles,y,M,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),j?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(l){for(const h of this._inViewTiles.getAllIds())l[h]||this._removeTile(h)}_cleanUpVectorTiles(l){for(const h of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(h);l[h]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(h):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(h)}}_addTerrainIdealTiles(l){const h=[];for(const y of l)if(y.canonical.z>this._source.minzoom){const b=y.scaledTo(y.canonical.z-1);h.push(b);const A=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));h.push(A)}return l.concat(h)}releaseSymbolFadeTiles(){for(const l of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(l).holdingForSymbolFade()&&this._removeTile(l)}_updateRetainedTiles(l,h){var y;const b=new Set;for(const K of l)this._addTile(K).hasData()||b.add(K);const A=l.reduce(((K,te)=>(K[te.key]=te,K)),{}),M=this._retainLoadedChildren(A,b),j={},V=Math.max(h-Rr.maxUnderzooming,this._source.minzoom);for(const K of M){let te=this._inViewTiles.getTileById(K.key),he=te?.wasRequested();for(let fe=K.overscaledZ-1;fe>=V;--fe){const we=K.scaledTo(fe);if(j[we.key])break;if(j[we.key]=!0,te=this.getTile(we),!te&&he&&(te=this._addTile(we)),te){const Oe=te.hasData();if((Oe||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||he)&&(A[we.key]=we),he=te.wasRequested(),Oe)break}}}return A}_addTile(l){let h=this._inViewTiles.getTileById(l.key);if(h)return h;h=this._outOfViewCache.getAndRemove(l),h&&(h.resetFadeLogic(),this._setTileReloadTimer(l.key,h),h.tileID=l,this._state.initializeTileState(h,this.map?this.map.painter:null));const y=h;return h||(h=new $t(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(h,l.key,h.state)),h.uses++,this._inViewTiles.setTile(l.key,h),y||this._source.fire(new a.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(l,h){this._clearTileReloadTimer(l);const y=h.getExpiryTimeout();y&&(this._timers[l]=setTimeout((()=>{this._reloadTile(l,"expired"),delete this._timers[l]}),y))}_clearTileReloadTimer(l){const h=this._timers[l];h&&(clearTimeout(h),delete this._timers[l])}_resetTileReloadTimers(){for(const l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(const l of this._inViewTiles.getAllIds()){const h=this._inViewTiles.getTileById(l);this._setTileReloadTimer(l,h)}}refreshTiles(l){for(const h of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(h);(this._inViewTiles.isIdRenderable(h)||y.state=="errored")&&l.some((b=>b.equals(y.tileID.canonical)))&&this._reloadTile(h,"expired")}}_removeTile(l){const h=this._inViewTiles.getTileById(l);h&&(h.uses--,this._inViewTiles.deleteTileById(l),this._clearTileReloadTimer(l),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._outOfViewCache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(l){l.dataType==="source"&&(l.sourceDataType!=="metadata"?l.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(l.sourceDataChanged,l.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l of this._inViewTiles.getAllIds())this._removeTile(l);this._outOfViewCache.reset()}tilesIn(l,h,y){const b=[],A=this.transform;if(!A)return b;const M=A.getCoveringTilesDetailsProvider().allowWorldCopies(),j=y?A.getCameraQueryGeometry(l):l,V=we=>A.screenPointToMercatorCoordinate(we,this.terrain),K=this.transformBbox(l,V,!M),te=this.transformBbox(j,V,!M),he=this.getIds(),fe=a.aa.fromPoints(te);for(let we=0;we<he.length;we++){const Oe=this._inViewTiles.getTileById(he[we]);if(Oe.holdingForSymbolFade())continue;const Xe=M?[Oe.tileID]:[Oe.tileID.unwrapTo(-1),Oe.tileID.unwrapTo(0)],Qe=Math.pow(2,A.zoom-Oe.tileID.overscaledZ),Ye=h*Oe.queryPadding*a.a5/Oe.tileSize/Qe;for(const at of Xe){const St=fe.map((ot=>at.getTilePoint(new a.a9(ot.x,ot.y))));if(St.expandBy(Ye),St.intersects(ie)){const ot=K.map((Pt=>at.getTilePoint(Pt))),Et=te.map((Pt=>at.getTilePoint(Pt)));b.push({tile:Oe,tileID:M?at:at.unwrapTo(0),queryGeometry:ot,cameraQueryGeometry:Et,scale:Qe})}}}return b}transformBbox(l,h,y){let b=l.map(h);if(y){const A=a.aa.fromPoints(l);A.shrinkBy(.001*Math.min(A.width(),A.height()));const M=A.map(h);a.aa.fromPoints(b).covers(M)||(b=b.map((j=>j.x>.5?new a.a9(j.x-1,j.y,j.z):j)))}return b}getVisibleCoordinates(l){const h=this.getRenderableIds(l).map((y=>this._inViewTiles.getTileById(y).tileID));return this.transform&&this.transform.populateCache(h),h}hasTransition(){return!!this._source.hasTransition()||!(!_e(this._source.type)||!(function(l,h){if(h<=0)return!1;const y=O();for(const b of l.getAllTiles())if(b.fadeEndTime>=y)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(l){this._rasterFadeDuration=l}setFeatureState(l,h,y){this._state.updateState(l=l||a.ai,h,y)}removeFeatureState(l,h,y){this._state.removeFeatureState(l=l||a.ai,h,y)}getFeatureState(l,h){return this._state.getState(l=l||a.ai,h)}setDependencies(l,h,y){const b=this._inViewTiles.getTileById(l);b&&b.setDependencies(h,y)}reloadTilesForDependencies(l,h){for(const y of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(y).hasDependency(l,h)&&this._reloadTile(y,"reloading");this._outOfViewCache.filter((y=>!y.hasDependency(l,h)))}areTilesLoaded(){for(const l of this._inViewTiles.getAllTiles())if(l.state!=="loaded"&&l.state!=="errored")return!1;return!0}}Rr.maxUnderzooming=10,Rr.maxOverzooming=3;class lr{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.an(l,0,1);let h=1,y=this._distances[h];const b=l*this.paddedLength+this.padding;for(;y<b&&h<this._distances.length;)y=this._distances[++h];const A=h-1,M=this._distances[A],j=y-M,V=j>0?(b-M)/j:0;return this.points[A].mult(1-V).add(this.points[h].mult(V))}}function kr(E,l){let h=!0;return E==="always"||E!=="never"&&l!=="never"||(h=!1),h}class Yr{constructor(l,h,y){const b=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(h/y);for(let M=0;M<this.xCellCount*this.yCellCount;M++)b.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,y,b,A){this._forEachCell(h,y,b,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(b),this.bboxes.push(A)}insertCircle(l,h,y,b){this._forEachCell(h-b,y-b,h+b,y+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(y),this.circles.push(b)}_insertBoxCell(l,h,y,b,A,M){this.boxCells[A].push(M)}_insertCircleCell(l,h,y,b,A,M){this.circleCells[A].push(M)}_query(l,h,y,b,A,M,j){if(y<0||l>this.width||b<0||h>this.height)return[];const V=[];if(l<=0&&h<=0&&this.width<=y&&this.height<=b){if(A)return[{key:null,x1:l,y1:h,x2:y,y2:b}];for(let K=0;K<this.boxKeys.length;K++)V.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const te=this.circles[3*K],he=this.circles[3*K+1],fe=this.circles[3*K+2];V.push({key:this.circleKeys[K],x1:te-fe,y1:he-fe,x2:te+fe,y2:he+fe})}}else this._forEachCell(l,h,y,b,this._queryCell,V,{hitTest:A,overlapMode:M,seenUids:{box:{},circle:{}}},j);return V}query(l,h,y,b){return this._query(l,h,y,b,!1,null)}hitTest(l,h,y,b,A,M){return this._query(l,h,y,b,!0,A,M).length>0}hitTestCircle(l,h,y,b,A){const M=l-y,j=l+y,V=h-y,K=h+y;if(j<0||M>this.width||K<0||V>this.height)return!1;const te=[];return this._forEachCell(M,V,j,K,this._queryCellCircle,te,{hitTest:!0,overlapMode:b,circle:{x:l,y:h,radius:y},seenUids:{box:{},circle:{}}},A),te.length>0}_queryCell(l,h,y,b,A,M,j,V){const{seenUids:K,hitTest:te,overlapMode:he}=j,fe=this.boxCells[A];if(fe!==null){const Oe=this.bboxes;for(const Xe of fe)if(!K.box[Xe]){K.box[Xe]=!0;const Qe=4*Xe,Ye=this.boxKeys[Xe];if(l<=Oe[Qe+2]&&h<=Oe[Qe+3]&&y>=Oe[Qe+0]&&b>=Oe[Qe+1]&&(!V||V(Ye))&&(!te||!kr(he,Ye.overlapMode))&&(M.push({key:Ye,x1:Oe[Qe],y1:Oe[Qe+1],x2:Oe[Qe+2],y2:Oe[Qe+3]}),te))return!0}}const we=this.circleCells[A];if(we!==null){const Oe=this.circles;for(const Xe of we)if(!K.circle[Xe]){K.circle[Xe]=!0;const Qe=3*Xe,Ye=this.circleKeys[Xe];if(this._circleAndRectCollide(Oe[Qe],Oe[Qe+1],Oe[Qe+2],l,h,y,b)&&(!V||V(Ye))&&(!te||!kr(he,Ye.overlapMode))){const at=Oe[Qe],St=Oe[Qe+1],ot=Oe[Qe+2];if(M.push({key:Ye,x1:at-ot,y1:St-ot,x2:at+ot,y2:St+ot}),te)return!0}}}return!1}_queryCellCircle(l,h,y,b,A,M,j,V){const{circle:K,seenUids:te,overlapMode:he}=j,fe=this.boxCells[A];if(fe!==null){const Oe=this.bboxes;for(const Xe of fe)if(!te.box[Xe]){te.box[Xe]=!0;const Qe=4*Xe,Ye=this.boxKeys[Xe];if(this._circleAndRectCollide(K.x,K.y,K.radius,Oe[Qe+0],Oe[Qe+1],Oe[Qe+2],Oe[Qe+3])&&(!V||V(Ye))&&!kr(he,Ye.overlapMode))return M.push(!0),!0}}const we=this.circleCells[A];if(we!==null){const Oe=this.circles;for(const Xe of we)if(!te.circle[Xe]){te.circle[Xe]=!0;const Qe=3*Xe,Ye=this.circleKeys[Xe];if(this._circlesCollide(Oe[Qe],Oe[Qe+1],Oe[Qe+2],K.x,K.y,K.radius)&&(!V||V(Ye))&&!kr(he,Ye.overlapMode))return M.push(!0),!0}}}_forEachCell(l,h,y,b,A,M,j,V){const K=this._convertToXCellCoord(l),te=this._convertToYCellCoord(h),he=this._convertToXCellCoord(y),fe=this._convertToYCellCoord(b);for(let we=K;we<=he;we++)for(let Oe=te;Oe<=fe;Oe++)if(A.call(this,l,h,y,b,this.xCellCount*Oe+we,M,j,V))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,y,b,A,M){const j=b-l,V=A-h,K=y+M;return K*K>j*j+V*V}_circleAndRectCollide(l,h,y,b,A,M,j){const V=(M-b)/2,K=Math.abs(l-(b+V));if(K>V+y)return!1;const te=(j-A)/2,he=Math.abs(h-(A+te));if(he>te+y)return!1;if(K<=V||he<=te)return!0;const fe=K-V,we=he-te;return fe*fe+we*we<=y*y}}function dn(E,l,h){const y=a.N();if(!E){const{vecSouth:he,vecEast:fe}=Pn(l),we=d();we[0]=fe[0],we[1]=fe[1],we[2]=he[0],we[3]=he[1],b=we,(te=(M=(A=we)[0])*(K=A[3])-(V=A[2])*(j=A[1]))&&(b[0]=K*(te=1/te),b[1]=-j*te,b[2]=-V*te,b[3]=M*te),y[0]=we[0],y[1]=we[1],y[4]=we[2],y[5]=we[3]}var b,A,M,j,V,K,te;return a.Q(y,y,[1/h,1/h,1]),y}function Bn(E,l,h,y){if(E){const b=a.N();if(!l){const{vecSouth:A,vecEast:M}=Pn(h);b[0]=M[0],b[1]=M[1],b[4]=A[0],b[5]=A[1]}return a.Q(b,b,[y,y,1]),b}return h.pixelsToClipSpaceMatrix}function Pn(E){const l=Math.cos(E.rollInRadians),h=Math.sin(E.rollInRadians),y=Math.cos(E.pitchInRadians),b=Math.cos(E.bearingInRadians),A=Math.sin(E.bearingInRadians),M=a.aC();M[0]=-b*y*h-A*l,M[1]=-A*y*h+b*l;const j=a.aD(M);j<1e-9?a.aE(M):a.aF(M,M,1/j);const V=a.aC();V[0]=b*y*l-A*h,V[1]=A*y*l+b*h;const K=a.aD(V);return K<1e-9?a.aE(V):a.aF(V,V,1/K),{vecEast:V,vecSouth:M}}function un(E,l,h,y){let b;y?(b=[E,l,y(E,l),1],a.aH(b,b,h)):(b=[E,l,0,1],fa(b,b,h));const A=b[3];return{point:new a.P(b[0]/A,b[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function Wi(E,l){return .5+E/l*.5}function Zi(E,l){return E.x>=-l[0]&&E.x<=l[0]&&E.y>=-l[1]&&E.y<=l[1]}function Ui(E,l,h,y,b,A,M,j,V,K,te,he,fe){const we=h?E.textSizeData:E.iconSizeData,Oe=a.ay(we,l.transform.zoom),Xe=[256/l.width*2+1,256/l.height*2+1],Qe=h?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Qe.clear();const Ye=E.lineVertexArray,at=h?E.text.placedSymbolArray:E.icon.placedSymbolArray,St=l.transform.width/l.transform.height;let ot=!1;for(let Et=0;Et<at.length;Et++){const Pt=at.get(Et);if(Pt.hidden||Pt.writingMode===a.az.vertical&&!ot){xs(Pt.numGlyphs,Qe);continue}ot=!1;const vt=new a.P(Pt.anchorX,Pt.anchorY),jt={getElevation:fe,pitchedLabelPlaneMatrix:y,lineVertexArray:Ye,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:l.transform,tileAnchorPoint:vt,unwrappedTileID:V,width:K,height:te,translation:he},nr=ia(Pt.anchorX,Pt.anchorY,jt);if(!Zi(nr.point,Xe)){xs(Pt.numGlyphs,Qe);continue}const Xt=Wi(l.transform.cameraToCenterDistance,nr.signedDistanceFromCamera),Jt=a.aA(we,Oe,Pt),rr=A?Jt*l.transform.getPitchedTextCorrection(Pt.anchorX,Pt.anchorY,V)/Xt:Jt*Xt,Or=Vi({projectionContext:jt,pitchedLabelPlaneMatrixInverse:b,symbol:Pt,fontSize:rr,flip:!1,keepUpright:M,glyphOffsetArray:E.glyphOffsetArray,dynamicLayoutVertexArray:Qe,aspectRatio:St,rotateToLine:j});ot=Or.useVertical,(Or.notEnoughRoom||ot||Or.needsFlipping&&Vi({projectionContext:jt,pitchedLabelPlaneMatrixInverse:b,symbol:Pt,fontSize:rr,flip:!0,keepUpright:M,glyphOffsetArray:E.glyphOffsetArray,dynamicLayoutVertexArray:Qe,aspectRatio:St,rotateToLine:j}).notEnoughRoom)&&xs(Pt.numGlyphs,Qe)}h?E.text.dynamicLayoutVertexBuffer.updateData(Qe):E.icon.dynamicLayoutVertexBuffer.updateData(Qe)}function Ri(E,l,h,y,b,A,M,j){const V=A.glyphStartIndex+A.numGlyphs,K=A.lineStartIndex,te=A.lineStartIndex+A.lineLength,he=l.getoffsetX(A.glyphStartIndex),fe=l.getoffsetX(V-1),we=Yi(E*he,h,y,b,A.segment,K,te,j,M);if(!we)return null;const Oe=Yi(E*fe,h,y,b,A.segment,K,te,j,M);return Oe?j.projectionCache.anyProjectionOccluded?null:{first:we,last:Oe}:null}function Pa(E,l,h,y){return E===a.az.horizontal&&Math.abs(h.y-l.y)>Math.abs(h.x-l.x)*y?{useVertical:!0}:(E===a.az.vertical?l.y<h.y:l.x>h.x)?{needsFlipping:!0}:null}function Vi(E){const{projectionContext:l,pitchedLabelPlaneMatrixInverse:h,symbol:y,fontSize:b,flip:A,keepUpright:M,glyphOffsetArray:j,dynamicLayoutVertexArray:V,aspectRatio:K,rotateToLine:te}=E,he=b/24,fe=y.lineOffsetX*he,we=y.lineOffsetY*he;let Oe;if(y.numGlyphs>1){const Xe=y.glyphStartIndex+y.numGlyphs,Qe=y.lineStartIndex,Ye=y.lineStartIndex+y.lineLength,at=Ri(he,j,fe,we,A,y,te,l);if(!at)return{notEnoughRoom:!0};const St=Xi(at.first.point.x,at.first.point.y,l,h),ot=Xi(at.last.point.x,at.last.point.y,l,h);if(M&&!A){const Et=Pa(y.writingMode,St,ot,K);if(Et)return Et}Oe=[at.first];for(let Et=y.glyphStartIndex+1;Et<Xe-1;Et++){const Pt=Yi(he*j.getoffsetX(Et),fe,we,A,y.segment,Qe,Ye,l,te);if(!Pt)return{notEnoughRoom:!0};Oe.push(Pt)}Oe.push(at.last)}else{if(M&&!A){const Qe=cn(l.tileAnchorPoint.x,l.tileAnchorPoint.y,l).point,Ye=y.lineStartIndex+y.segment+1,at=new a.P(l.lineVertexArray.getx(Ye),l.lineVertexArray.gety(Ye)),St=cn(at.x,at.y,l),ot=St.signedDistanceFromCamera>0?St.point:Ro(l.tileAnchorPoint,at,Qe,1,l),Et=Xi(Qe.x,Qe.y,l,h),Pt=Xi(ot.x,ot.y,l,h),vt=Pa(y.writingMode,Et,Pt,K);if(vt)return vt}const Xe=Yi(he*j.getoffsetX(y.glyphStartIndex),fe,we,A,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,l,te);if(!Xe||l.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Oe=[Xe]}for(const Xe of Oe)a.aG(V,Xe.point,Xe.angle);return{}}function Ro(E,l,h,y,b){const A=E.add(E.sub(l)._unit()),M=cn(A.x,A.y,b).point,j=h.sub(M);return h.add(j._mult(y/j.mag()))}function Dn(E,l,h){const y=l.projectionCache;if(y.projections[E])return y.projections[E];const b=new a.P(l.lineVertexArray.getx(E),l.lineVertexArray.gety(E)),A=cn(b.x,b.y,l);if(A.signedDistanceFromCamera>0)return y.projections[E]=A.point,y.anyProjectionOccluded=y.anyProjectionOccluded||A.isOccluded,A.point;const M=E-h.direction;return Ro(h.distanceFromAnchor===0?l.tileAnchorPoint:new a.P(l.lineVertexArray.getx(M),l.lineVertexArray.gety(M)),b,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,l)}function cn(E,l,h){const y=E+h.translation[0],b=l+h.translation[1];let A;return h.pitchWithMap?(A=un(y,b,h.pitchedLabelPlaneMatrix,h.getElevation),A.isOccluded=!1):(A=h.transform.projectTileCoordinates(y,b,h.unwrappedTileID,h.getElevation),A.point.x=(.5*A.point.x+.5)*h.width,A.point.y=(.5*-A.point.y+.5)*h.height),A}function Xi(E,l,h,y){if(h.pitchWithMap){const b=[E,l,0,1];return a.aH(b,b,y),h.transform.projectTileCoordinates(b[0]/b[3],b[1]/b[3],h.unwrappedTileID,h.getElevation).point}return{x:E/h.width*2-1,y:1-l/h.height*2}}function ia(E,l,h){return h.transform.projectTileCoordinates(E,l,h.unwrappedTileID,h.getElevation)}function Ki(E,l,h){return E._unit()._perp()._mult(l*h)}function vi(E,l,h,y,b,A,M,j,V){if(j.projectionCache.offsets[E])return j.projectionCache.offsets[E];const K=h.add(l);if(E+V.direction<y||E+V.direction>=b)return j.projectionCache.offsets[E]=K,K;const te=Dn(E+V.direction,j,V),he=Ki(te.sub(h),M,V.direction),fe=h.add(he),we=te.add(he);return j.projectionCache.offsets[E]=a.aI(A,K,fe,we)||K,j.projectionCache.offsets[E]}function Yi(E,l,h,y,b,A,M,j,V){const K=y?E-l:E+l;let te=K>0?1:-1,he=0;y&&(te*=-1,he=Math.PI),te<0&&(he+=Math.PI);let fe,we=te>0?A+b:A+b+1;j.projectionCache.cachedAnchorPoint?fe=j.projectionCache.cachedAnchorPoint:(fe=cn(j.tileAnchorPoint.x,j.tileAnchorPoint.y,j).point,j.projectionCache.cachedAnchorPoint=fe);let Oe,Xe,Qe=fe,Ye=fe,at=0,St=0;const ot=Math.abs(K),Et=[];let Pt;for(;at+St<=ot;){if(we+=te,we<A||we>=M)return null;at+=St,Ye=Qe,Xe=Oe;const nr={absOffsetX:ot,direction:te,distanceFromAnchor:at,previousVertex:Ye};if(Qe=Dn(we,j,nr),h===0)Et.push(Ye),Pt=Qe.sub(Ye);else{let Xt;const Jt=Qe.sub(Ye);Xt=Jt.mag()===0?Ki(Dn(we+te,j,nr).sub(Qe),h,te):Ki(Jt,h,te),Xe||(Xe=Ye.add(Xt)),Oe=vi(we,Xt,Qe,A,M,Xe,h,j,nr),Et.push(Xe),Pt=Oe.sub(Xe)}St=Pt.mag()}const vt=Pt._mult((ot-at)/St)._add(Xe||Ye),jt=he+Math.atan2(Qe.y-Ye.y,Qe.x-Ye.x);return Et.push(vt),{point:vt,angle:V?jt:0,path:Et}}const mo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function xs(E,l){for(let h=0;h<E;h++){const y=l.length;l.resize(y+4),l.float32.set(mo,3*y)}}function fa(E,l,h){const y=l[0],b=l[1];return E[0]=h[0]*y+h[4]*b+h[12],E[1]=h[1]*y+h[5]*b+h[13],E[3]=h[3]*y+h[7]*b+h[15],E}const Gi=100;class Cc{constructor(l,h=new Yr(l.width+200,l.height+200,25),y=new Yr(l.width+200,l.height+200,25)){this.transform=l,this.grid=h,this.ignoredGrid=y,this.pitchFactor=Math.cos(l.pitch*Math.PI/180)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Gi,this.screenBottomBoundary=l.height+Gi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,h,y,b,A,M,j,V,K,te,he,fe){const we=this.projectAndGetPerspectiveRatio(l.anchorPointX+V[0],l.anchorPointY+V[1],A,te,fe),Oe=y*we.perspectiveRatio;let Xe;if(M||j)Xe=this._projectCollisionBox(l,Oe,b,A,M,j,V,we,te,he,fe);else{const Pt=we.x+(he?he.x*Oe:0),vt=we.y+(he?he.y*Oe:0);Xe={allPointsOccluded:!1,box:[Pt+l.x1*Oe,vt+l.y1*Oe,Pt+l.x2*Oe,vt+l.y2*Oe]}}const[Qe,Ye,at,St]=Xe.box,ot=M?Xe.allPointsOccluded:we.isOccluded;let Et=ot;return Et||(Et=we.perspectiveRatio<this.perspectiveRatioCutoff),Et||(Et=!this.isInsideGrid(Qe,Ye,at,St)),Et||h!=="always"&&this.grid.hitTest(Qe,Ye,at,St,h,K)?{box:[Qe,Ye,at,St],placeable:!1,offscreen:!1,occluded:ot}:{box:[Qe,Ye,at,St],placeable:!0,offscreen:this.isOffscreen(Qe,Ye,at,St),occluded:ot}}placeCollisionCircles(l,h,y,b,A,M,j,V,K,te,he,fe,we,Oe){const Xe=[],Qe=new a.P(h.anchorX,h.anchorY),Ye=this.getPerspectiveRatio(Qe.x,Qe.y,M,Oe),at=(K?A*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,M)/Ye:A*Ye)/a.aM,St={getElevation:Oe,pitchedLabelPlaneMatrix:j,lineVertexArray:y,pitchWithMap:K,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Qe,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:we},ot=Ri(at,b,h.lineOffsetX*at,h.lineOffsetY*at,!1,h,!1,St);let Et=!1,Pt=!1,vt=!0;if(ot){const jt=.5*he*Ye+fe,nr=new a.P(-100,-100),Xt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Jt=new lr,rr=ot.first,Or=ot.last;let Dr=[];for(let qn=rr.path.length-1;qn>=1;qn--)Dr.push(rr.path[qn]);for(let qn=1;qn<Or.path.length;qn++)Dr.push(Or.path[qn]);const Er=2.5*jt;if(K){const qn=this.projectPathToScreenSpace(Dr,St);Dr=qn.some((qi=>qi.signedDistanceFromCamera<=0))?[]:qn.map((qi=>qi.point))}let Gr=[];if(Dr.length>0){const qn=Dr[0].clone(),qi=Dr[0].clone();for(let Ea=1;Ea<Dr.length;Ea++)qn.x=Math.min(qn.x,Dr[Ea].x),qn.y=Math.min(qn.y,Dr[Ea].y),qi.x=Math.max(qi.x,Dr[Ea].x),qi.y=Math.max(qi.y,Dr[Ea].y);Gr=qn.x>=nr.x&&qi.x<=Xt.x&&qn.y>=nr.y&&qi.y<=Xt.y?[Dr]:qi.x<nr.x||qn.x>Xt.x||qi.y<nr.y||qn.y>Xt.y?[]:a.aJ([Dr],nr.x,nr.y,Xt.x,Xt.y)}for(const qn of Gr){Jt.reset(qn,.25*jt);let qi=0;qi=Jt.length<=.5*jt?1:Math.ceil(Jt.paddedLength/Er)+1;for(let Ea=0;Ea<qi;Ea++){const sa=Ea/Math.max(qi-1,1),Ra=Jt.lerp(sa),la=Ra.x+Gi,Za=Ra.y+Gi;Xe.push(la,Za,jt,0);const La=la-jt,Ko=Za-jt,ho=la+jt,no=Za+jt;if(vt=vt&&this.isOffscreen(La,Ko,ho,no),Pt=Pt||this.isInsideGrid(La,Ko,ho,no),l!=="always"&&this.grid.hitTestCircle(la,Za,jt,l,te)&&(Et=!0,!V))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!V&&Et||!Pt||Ye<this.perspectiveRatioCutoff?[]:Xe,offscreen:vt,collisionDetected:Et}}projectPathToScreenSpace(l,h){const y=(function(b,A){const M=a.N();return a.aB(M,A.pitchedLabelPlaneMatrix),b.map((j=>{const V=un(j.x,j.y,M,A.getElevation),K=A.transform.projectTileCoordinates(V.point.x,V.point.y,A.unwrappedTileID,A.getElevation);return K.point.x=(.5*K.point.x+.5)*A.width,K.point.y=(.5*-K.point.y+.5)*A.height,K}))})(l,h);return(function(b){let A=0,M=0,j=0,V=0;for(let K=0;K<b.length;K++)b[K].isOccluded?(j=K+1,V=0):(V++,V>M&&(M=V,A=j));return b.slice(A,A+M)})(y)}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[],y=new a.aa;for(const he of l){const fe=new a.P(he.x+Gi,he.y+Gi);y.extend(fe),h.push(fe)}const{minX:b,minY:A,maxX:M,maxY:j}=y,V=this.grid.query(b,A,M,j).concat(this.ignoredGrid.query(b,A,M,j)),K={},te={};for(const he of V){const fe=he.key;if(K[fe.bucketInstanceId]===void 0&&(K[fe.bucketInstanceId]={}),K[fe.bucketInstanceId][fe.featureIndex])continue;const we=[new a.P(he.x1,he.y1),new a.P(he.x2,he.y1),new a.P(he.x2,he.y2),new a.P(he.x1,he.y2)];a.aK(h,we)&&(K[fe.bucketInstanceId][fe.featureIndex]=!0,te[fe.bucketInstanceId]===void 0&&(te[fe.bucketInstanceId]=[]),te[fe.bucketInstanceId].push(fe.featureIndex))}return te}insertCollisionBox(l,h,y,b,A,M){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:A,collisionGroupID:M,overlapMode:h},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,y,b,A,M){const j=y?this.ignoredGrid:this.grid,V={bucketInstanceId:b,featureIndex:A,collisionGroupID:M,overlapMode:h};for(let K=0;K<l.length;K+=4)j.insertCircle(V,l[K],l[K+1],l[K+2])}projectAndGetPerspectiveRatio(l,h,y,b,A){if(A){let M;b?(M=[l,h,b(l,h),1],a.aH(M,M,A)):(M=[l,h,0,1],fa(M,M,A));const j=M[3];return{x:(M[0]/j+1)/2*this.transform.width+Gi,y:(-M[1]/j+1)/2*this.transform.height+Gi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j*.5,isOccluded:!1,signedDistanceFromCamera:j}}{const M=this.transform.projectTileCoordinates(l,h,y,b);return{x:(M.point.x+1)/2*this.transform.width+Gi,y:(1-M.point.y)/2*this.transform.height+Gi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(l,h,y,b){const A=this.transform.projectTileCoordinates(l,h,y,b);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(l,h,y,b){return y<Gi||l>=this.screenRightBoundary||b<Gi||h>this.screenBottomBoundary}isInsideGrid(l,h,y,b){return y>=0&&l<this.gridRightBoundary&&b>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=a.ar([]);return a.O(l,l,[-100,-100,0]),l}_projectCollisionBox(l,h,y,b,A,M,j,V,K,te,he){let fe=1,we=0,Oe=0,Xe=1;const Qe=l.anchorPointX+j[0],Ye=l.anchorPointY+j[1];if(M&&!A){const Dr=this.projectAndGetPerspectiveRatio(Qe+1,Ye,b,K,he),Er=Dr.x-V.x,Gr=Math.atan((Dr.y-V.y)/Er)+(Er<0?Math.PI:0),qn=Math.sin(Gr),qi=Math.cos(Gr);fe=qi,we=qn,Oe=-qn,Xe=qi}else if(!M&&A){const Dr=Pn(this.transform);fe=Dr.vecEast[0],we=Dr.vecEast[1],Oe=Dr.vecSouth[0],Xe=Dr.vecSouth[1]}let at=V.x,St=V.y,ot=h;A&&(at=Qe,St=Ye,ot=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),ot*=this.transform.getPitchedTextCorrection(Qe,Ye,b),te||(ot*=a.an(.5+V.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),te&&(at+=fe*te.x*ot+Oe*te.y*ot,St+=we*te.x*ot+Xe*te.y*ot);const Et=l.x1*ot,Pt=l.x2*ot,vt=(Et+Pt)/2,jt=l.y1*ot,nr=l.y2*ot,Xt=(jt+nr)/2,Jt=[{offsetX:Et,offsetY:jt},{offsetX:vt,offsetY:jt},{offsetX:Pt,offsetY:jt},{offsetX:Pt,offsetY:Xt},{offsetX:Pt,offsetY:nr},{offsetX:vt,offsetY:nr},{offsetX:Et,offsetY:nr},{offsetX:Et,offsetY:Xt}];let rr=[];for(const{offsetX:Dr,offsetY:Er}of Jt)rr.push(new a.P(at+fe*Dr+Oe*Er,St+we*Dr+Xe*Er));let Or=!1;if(A){const Dr=rr.map((Er=>this.projectAndGetPerspectiveRatio(Er.x,Er.y,b,K,he)));Or=Dr.some((Er=>!Er.isOccluded)),rr=Dr.map((Er=>new a.P(Er.x,Er.y)))}else Or=!0;return{box:a.aL(rr),allPointsOccluded:!Or}}}class $s{constructor(l,h,y,b){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):b&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class as{constructor(l,h,y,b,A){this.text=new $s(l?l.text:null,h,y,A),this.icon=new $s(l?l.icon:null,h,b,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class os{constructor(l,h,y){this.text=l,this.icon=h,this.skipFade=y}}class Tl{constructor(l,h,y,b,A){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=b,this.tileID=A}}class ba{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[l]}}function Wl(E,l,h,y,b){const{horizontalAlign:A,verticalAlign:M}=a.aS(E);return new a.P(-(A-.5)*l+y[0]*b,-(M-.5)*h+y[1]*b)}class Ac{constructor(l,h,y,b,A){this.transform=l.clone(),this.terrain=h,this.collisionIndex=new Cc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ba(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(l){const h=this.terrain;return h?(y,b)=>h.getElevation(l,y,b):null}getBucketParts(l,h,y,b){const A=y.getBucket(h),M=y.latestFeatureIndex;if(!A||!M||h.id!==A.layerIds[0])return;const j=y.collisionBoxArray,V=A.layers[0].layout,K=A.layers[0].paint,te=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),he=y.tileSize/a.a5,fe=y.tileID.toUnwrapped(),we=V.get("text-rotation-alignment")==="map",Oe=a.aN(y,1,this.transform.zoom),Xe=a.aO(this.collisionIndex.transform,y,K.get("text-translate"),K.get("text-translate-anchor")),Qe=a.aO(this.collisionIndex.transform,y,K.get("icon-translate"),K.get("icon-translate-anchor")),Ye=dn(we,this.transform,Oe);this.retainedQueryData[A.bucketInstanceId]=new Tl(A.bucketInstanceId,M,A.sourceLayerIndex,A.index,y.tileID);const at={bucket:A,layout:V,translationText:Xe,translationIcon:Qe,unwrappedTileID:fe,pitchedLabelPlaneMatrix:Ye,scale:te,textPixelRatio:he,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.ay(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(b)for(const St of A.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:Et,symbolInstanceEnd:Pt}=St;l.push({sortKey:ot,symbolInstanceStart:Et,symbolInstanceEnd:Pt,parameters:at})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:at})}attemptAnchorPlacement(l,h,y,b,A,M,j,V,K,te,he,fe,we,Oe,Xe,Qe,Ye,at,St,ot){const Et=a.aP[l.textAnchor],Pt=[l.textOffset0,l.textOffset1],vt=Wl(Et,y,b,Pt,A),jt=this.collisionIndex.placeCollisionBox(h,fe,V,K,te,j,M,Qe,he.predicate,St,vt,ot);if((!at||this.collisionIndex.placeCollisionBox(at,fe,V,K,te,j,M,Ye,he.predicate,St,vt,ot).placeable)&&jt.placeable){let nr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(nr=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:Pt,width:y,height:b,anchor:Et,textBoxScale:A,prevAnchor:nr},this.markUsedJustification(Oe,Et,we,Xe),Oe.allowVerticalPlacement&&(this.markUsedOrientation(Oe,Xe,we),this.placedOrientations[we.crossTileID]=Xe),{shift:vt,placedGlyphBoxes:jt}}}placeLayerBucketPart(l,h,y){const{bucket:b,layout:A,translationText:M,translationIcon:j,unwrappedTileID:V,pitchedLabelPlaneMatrix:K,textPixelRatio:te,holdingForFade:he,collisionBoxArray:fe,partiallyEvaluatedTextSize:we,collisionGroup:Oe}=l.parameters,Xe=A.get("text-optional"),Qe=A.get("icon-optional"),Ye=a.aQ(A,"text-overlap","text-allow-overlap"),at=Ye==="always",St=a.aQ(A,"icon-overlap","icon-allow-overlap"),ot=St==="always",Et=A.get("text-rotation-alignment")==="map",Pt=A.get("text-pitch-alignment")==="map",vt=A.get("icon-text-fit")!=="none",jt=A.get("symbol-z-order")==="viewport-y",nr=at&&(ot||!b.hasIconData()||Qe),Xt=ot&&(at||!b.hasTextData()||Xe);!b.collisionArrays&&fe&&b.deserializeCollisionBoxes(fe);const Jt=this.retainedQueryData[b.bucketInstanceId].tileID,rr=this._getTerrainElevationFunc(Jt),Or=this.transform.getFastPathSimpleProjectionMatrix(Jt),Dr=(Er,Gr,qn)=>{var qi,Ea;if(h[Er.crossTileID])return;if(he)return void(this.placements[Er.crossTileID]=new os(!1,!1,!1));let sa=!1,Ra=!1,la=!0,Za=null,La={box:null,placeable:!1,offscreen:null,occluded:!1},Ko={placeable:!1},ho=null,no=null,vs=null,bf=0,kc=0,sc=0;Gr.textFeatureIndex?bf=Gr.textFeatureIndex:Er.useRuntimeCollisionCircles&&(bf=Er.featureIndex),Gr.verticalTextFeatureIndex&&(kc=Gr.verticalTextFeatureIndex);const ml=Gr.textBox;if(ml){const au=pa=>{let ua=a.az.horizontal;if(b.allowVerticalPlacement&&!pa&&this.prevPlacement){const Do=this.prevPlacement.placedOrientations[Er.crossTileID];Do&&(this.placedOrientations[Er.crossTileID]=Do,ua=Do,this.markUsedOrientation(b,ua,Er))}return ua},lc=(pa,ua)=>{if(b.allowVerticalPlacement&&Er.numVerticalGlyphVertices>0&&Gr.verticalTextBox){for(const Do of b.writingModes)if(Do===a.az.vertical?(La=ua(),Ko=La):La=pa(),La&&La.placeable)break}else La=pa()},Mu=Er.textAnchorOffsetStartIndex,Ou=Er.textAnchorOffsetEndIndex;if(Ou===Mu){const pa=(ua,Do)=>{const ko=this.collisionIndex.placeCollisionBox(ua,Ye,te,Jt,V,Pt,Et,M,Oe.predicate,rr,void 0,Or);return ko&&ko.placeable&&(this.markUsedOrientation(b,Do,Er),this.placedOrientations[Er.crossTileID]=Do),ko};lc((()=>pa(ml,a.az.horizontal)),(()=>{const ua=Gr.verticalTextBox;return b.allowVerticalPlacement&&Er.numVerticalGlyphVertices>0&&ua?pa(ua,a.az.vertical):{box:null,offscreen:null}})),au(La&&La.placeable)}else{let pa=a.aP[(Ea=(qi=this.prevPlacement)===null||qi===void 0?void 0:qi.variableOffsets[Er.crossTileID])===null||Ea===void 0?void 0:Ea.anchor];const ua=(ko,qb,Ub)=>{const ch=ko.x2-ko.x1,Tw=ko.y2-ko.y1,Vb=Er.textBoxScale,zy=vt&&St==="never"?qb:null;let _f=null,xf=Ye==="never"?1:2,wf="never";pa&&xf++;for(let $y=0;$y<xf;$y++){for(let qy=Mu;qy<Ou;qy++){const wm=b.textAnchorOffsets.get(qy);if(pa&&wm.textAnchor!==pa)continue;const Sm=this.attemptAnchorPlacement(wm,ko,ch,Tw,Vb,Et,Pt,te,Jt,V,Oe,wf,Er,b,Ub,M,j,zy,rr);if(Sm&&(_f=Sm.placedGlyphBoxes,_f&&_f.placeable))return sa=!0,Za=Sm.shift,_f}pa?pa=null:wf=Ye}return y&&!_f&&(_f={box:this.collisionIndex.placeCollisionBox(ml,"always",te,Jt,V,Pt,Et,M,Oe.predicate,rr,void 0,Or).box,offscreen:!1,placeable:!1,occluded:!1}),_f};lc((()=>ua(ml,Gr.iconBox,a.az.horizontal)),(()=>{const ko=Gr.verticalTextBox;return b.allowVerticalPlacement&&(!La||!La.placeable)&&Er.numVerticalGlyphVertices>0&&ko?ua(ko,Gr.verticalIconBox,a.az.vertical):{box:null,occluded:!0,offscreen:null}})),La&&(sa=La.placeable,la=La.offscreen);const Do=au(La&&La.placeable);if(!sa&&this.prevPlacement){const ko=this.prevPlacement.variableOffsets[Er.crossTileID];ko&&(this.variableOffsets[Er.crossTileID]=ko,this.markUsedJustification(b,ko.anchor,Er,Do))}}}if(ho=La,sa=ho&&ho.placeable,la=ho&&ho.offscreen,Er.useRuntimeCollisionCircles&&Er.centerJustifiedTextSymbolIndex>=0){const au=b.text.placedSymbolArray.get(Er.centerJustifiedTextSymbolIndex),lc=a.aA(b.textSizeData,we,au),Mu=A.get("text-padding");no=this.collisionIndex.placeCollisionCircles(Ye,au,b.lineVertexArray,b.glyphOffsetArray,lc,V,K,y,Pt,Oe.predicate,Er.collisionCircleDiameter,Mu,M,rr),no.circles.length&&no.collisionDetected&&!y&&a.w("Collisions detected, but collision boxes are not shown"),sa=at||no.circles.length>0&&!no.collisionDetected,la=la&&no.offscreen}if(Gr.iconFeatureIndex&&(sc=Gr.iconFeatureIndex),Gr.iconBox){const au=lc=>this.collisionIndex.placeCollisionBox(lc,St,te,Jt,V,Pt,Et,j,Oe.predicate,rr,vt&&Za?Za:void 0,Or);Ko&&Ko.placeable&&Gr.verticalIconBox?(vs=au(Gr.verticalIconBox),Ra=vs.placeable):(vs=au(Gr.iconBox),Ra=vs.placeable),la=la&&vs.offscreen}const lh=Xe||Er.numHorizontalGlyphVertices===0&&Er.numVerticalGlyphVertices===0,rp=Qe||Er.numIconVertices===0;lh||rp?rp?lh||(Ra=Ra&&sa):sa=Ra&&sa:Ra=sa=Ra&&sa;const uh=Ra&&vs.placeable;if(sa&&ho.placeable&&this.collisionIndex.insertCollisionBox(ho.box,Ye,A.get("text-ignore-placement"),b.bucketInstanceId,Ko&&Ko.placeable&&kc?kc:bf,Oe.ID),uh&&this.collisionIndex.insertCollisionBox(vs.box,St,A.get("icon-ignore-placement"),b.bucketInstanceId,sc,Oe.ID),no&&sa&&this.collisionIndex.insertCollisionCircles(no.circles,Ye,A.get("text-ignore-placement"),b.bucketInstanceId,bf,Oe.ID),y&&this.storeCollisionData(b.bucketInstanceId,qn,Gr,ho,vs,no),Er.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Er.crossTileID]=new os((sa||nr)&&!ho?.occluded,(Ra||Xt)&&!vs?.occluded,la||b.justReloaded),h[Er.crossTileID]=!0};if(jt){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Er=b.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Gr=Er.length-1;Gr>=0;--Gr){const qn=Er[Gr];Dr(b.symbolInstances.get(qn),b.collisionArrays[qn],qn)}}else for(let Er=l.symbolInstanceStart;Er<l.symbolInstanceEnd;Er++)Dr(b.symbolInstances.get(Er),b.collisionArrays[Er],Er);b.justReloaded=!1}storeCollisionData(l,h,y,b,A,M){if(y.textBox||y.iconBox){let j,V;this.collisionBoxArrays.has(l)?j=this.collisionBoxArrays.get(l):(j=new Map,this.collisionBoxArrays.set(l,j)),j.has(h)?V=j.get(h):(V={text:null,icon:null},j.set(h,V)),y.textBox&&(V.text=b.box),y.iconBox&&(V.icon=A.box)}if(M){let j=this.collisionCircleArrays[l];j===void 0&&(j=this.collisionCircleArrays[l]=[]);for(let V=0;V<M.circles.length;V+=4)j.push(M.circles[V+0]-Gi),j.push(M.circles[V+1]-Gi),j.push(M.circles[V+2]),j.push(M.collisionDetected?1:0)}}markUsedJustification(l,h,y,b){let A;A=b===a.az.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.aR(h)];const M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const j of M)j>=0&&(l.text.placedSymbolArray.get(j).crossTileID=A>=0&&j!==A?0:y.crossTileID)}markUsedOrientation(l,h,y){const b=h===a.az.horizontal||h===a.az.horizontalOnly?h:0,A=h===a.az.vertical?h:0,M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const j of M)l.text.placedSymbolArray.get(j).placedOrientation=b;y.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const b=h?h.symbolFadeChange(l):1,A=h?h.opacities:{},M=h?h.variableOffsets:{},j=h?h.placedOrientations:{};for(const V in this.placements){const K=this.placements[V],te=A[V];te?(this.opacities[V]=new as(te,b,K.text,K.icon),y=y||K.text!==te.text.placed||K.icon!==te.icon.placed):(this.opacities[V]=new as(null,b,K.text,K.icon,K.skipFade),y=y||K.text||K.icon)}for(const V in A){const K=A[V];if(!this.opacities[V]){const te=new as(K,b,!1,!1);te.isHidden()||(this.opacities[V]=te,y=y||K.text.placed||K.icon.placed)}}for(const V in M)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=M[V]);for(const V in j)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=j[V]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const y={};for(const b of h){const A=b.getBucket(l);A&&b.latestFeatureIndex&&l.id===A.layerIds[0]&&this.updateBucketOpacities(A,b.tileID,y,b.collisionBoxArray)}}updateBucketOpacities(l,h,y,b){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const A=l.layers[0],M=A.layout,j=new as(null,0,!1,!1,!0),V=M.get("text-allow-overlap"),K=M.get("icon-allow-overlap"),te=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),he=M.get("text-rotation-alignment")==="map",fe=M.get("text-pitch-alignment")==="map",we=M.get("icon-text-fit")!=="none",Oe=new as(null,0,V&&(K||!l.hasIconData()||M.get("icon-optional")),K&&(V||!l.hasTextData()||M.get("text-optional")),!0);!l.collisionArrays&&b&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(b);const Xe=(Ye,at,St)=>{for(let ot=0;ot<at/4;ot++)Ye.opacityVertexArray.emplaceBack(St);Ye.hasVisibleVertices=Ye.hasVisibleVertices||St!==Mr},Qe=this.collisionBoxArrays.get(l.bucketInstanceId);for(let Ye=0;Ye<l.symbolInstances.length;Ye++){const at=l.symbolInstances.get(Ye),{numHorizontalGlyphVertices:St,numVerticalGlyphVertices:ot,crossTileID:Et}=at;let Pt=this.opacities[Et];y[Et]?Pt=j:Pt||(Pt=Oe,this.opacities[Et]=Pt),y[Et]=!0;const vt=at.numIconVertices>0,jt=this.placedOrientations[at.crossTileID],nr=jt===a.az.vertical,Xt=jt===a.az.horizontal||jt===a.az.horizontalOnly;if(St>0||ot>0){const rr=Tr(Pt.text);Xe(l.text,St,nr?Mr:rr),Xe(l.text,ot,Xt?Mr:rr);const Or=Pt.text.isHidden();[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach((Gr=>{Gr>=0&&(l.text.placedSymbolArray.get(Gr).hidden=Or||nr?1:0)})),at.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(at.verticalPlacedTextSymbolIndex).hidden=Or||Xt?1:0);const Dr=this.variableOffsets[at.crossTileID];Dr&&this.markUsedJustification(l,Dr.anchor,at,jt);const Er=this.placedOrientations[at.crossTileID];Er&&(this.markUsedJustification(l,"left",at,Er),this.markUsedOrientation(l,Er,at))}if(vt){const rr=Tr(Pt.icon),Or=!(we&&at.verticalPlacedIconSymbolIndex&&nr);at.placedIconSymbolIndex>=0&&(Xe(l.icon,at.numIconVertices,Or?rr:Mr),l.icon.placedSymbolArray.get(at.placedIconSymbolIndex).hidden=Pt.icon.isHidden()),at.verticalPlacedIconSymbolIndex>=0&&(Xe(l.icon,at.numVerticalIconVertices,Or?Mr:rr),l.icon.placedSymbolArray.get(at.verticalPlacedIconSymbolIndex).hidden=Pt.icon.isHidden())}const Jt=Qe&&Qe.has(Ye)?Qe.get(Ye):{text:null,icon:null};if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const rr=l.collisionArrays[Ye];if(rr){let Or=new a.P(0,0);if(rr.textBox||rr.verticalTextBox){let Dr=!0;if(te){const Er=this.variableOffsets[Et];Er?(Or=Wl(Er.anchor,Er.width,Er.height,Er.textOffset,Er.textBoxScale),he&&Or._rotate(fe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Dr=!1}if(rr.textBox||rr.verticalTextBox){let Er;rr.textBox&&(Er=nr),rr.verticalTextBox&&(Er=Xt),Zl(l.textCollisionBox.collisionVertexArray,Pt.text.placed,!Dr||Er,Jt.text,Or.x,Or.y)}}if(rr.iconBox||rr.verticalIconBox){const Dr=!!(!Xt&&rr.verticalIconBox);let Er;rr.iconBox&&(Er=Dr),rr.verticalIconBox&&(Er=!Dr),Zl(l.iconCollisionBox.collisionVertexArray,Pt.icon.placed,Er,Jt.icon,we?Or.x:0,we?Or.y:0)}}}}if(l.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);l.bucketInstanceId in this.collisionCircleArrays&&(l.collisionCircleArray=this.collisionCircleArrays[l.bucketInstanceId],delete this.collisionCircleArrays[l.bucketInstanceId])}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function Zl(E,l,h,y,b,A){y&&y.length!==0||(y=[0,0,0,0]);const M=y[0]-Gi,j=y[1]-Gi,V=y[2]-Gi,K=y[3]-Gi;E.emplaceBack(l?1:0,h?1:0,b||0,A||0,M,j),E.emplaceBack(l?1:0,h?1:0,b||0,A||0,V,j),E.emplaceBack(l?1:0,h?1:0,b||0,A||0,V,K),E.emplaceBack(l?1:0,h?1:0,b||0,A||0,M,K)}const U=Math.pow(2,25),ne=Math.pow(2,24),De=Math.pow(2,17),mt=Math.pow(2,16),Mt=Math.pow(2,9),Dt=Math.pow(2,8),Ut=Math.pow(2,1);function Tr(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const l=E.placed?1:0,h=Math.floor(127*E.opacity);return h*U+l*ne+h*De+l*mt+h*Mt+l*Dt+h*Ut+l}const Mr=0;class Fr{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,h,y,b,A){const M=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(M,b,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(((j,V)=>j.sortKey-V.sortKey)));this._currentPartIndex<M.length;)if(h.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,A())return!0;return!1}}class Nr{constructor(l,h,y,b,A,M,j,V){this.placement=new Ac(l,h,M,j,V),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(l,h,y){const b=O(),A=()=>!this._forceFullPlacement&&O()-b>2;for(;this._currentPlacementIndex>=0;){const M=h[l[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=j)&&(!M.maxzoom||M.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new Fr(M)),this._inProgressLayer.continuePlacement(y[M.source],this.placement,this._showCollisionBoxes,M,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const hr=512/a.a5/2;class In{constructor(l,h,y){this.tileID=l,this.bucketInstanceId=y,this._symbolsByKey={};const b=new Map;for(let A=0;A<h.length;A++){const M=h.get(A),j=M.key,V=b.get(j);V?V.push(M):b.set(j,[M])}for(const[A,M]of b){const j={positions:M.map((V=>({x:Math.floor(V.anchorX*hr),y:Math.floor(V.anchorY*hr)}))),crossTileIDs:M.map((V=>V.crossTileID))};if(j.positions.length>128){const V=new a.aT(j.positions.length,16,Uint16Array);for(const{x:K,y:te}of j.positions)V.add(K,te);V.finish(),delete j.positions,j.index=V}this._symbolsByKey[A]=j}}getScaledCoordinates(l,h){const{x:y,y:b,z:A}=this.tileID.canonical,{x:M,y:j,z:V}=h.canonical,K=hr/Math.pow(2,V-A),te=(j*a.a5+l.anchorY)*K,he=b*a.a5*hr;return{x:Math.floor((M*a.a5+l.anchorX)*K-y*a.a5*hr),y:Math.floor(te-he)}}findMatches(l,h,y){const b=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let A=0;A<l.length;A++){const M=l.get(A);if(M.crossTileID)continue;const j=this._symbolsByKey[M.key];if(!j)continue;const V=this.getScaledCoordinates(M,h);if(j.index){const K=j.index.range(V.x-b,V.y-b,V.x+b,V.y+b).sort();for(const te of K){const he=j.crossTileIDs[te];if(!y[he]){y[he]=!0,M.crossTileID=he;break}}}else if(j.positions)for(let K=0;K<j.positions.length;K++){const te=j.positions[K],he=j.crossTileIDs[K];if(Math.abs(te.x-V.x)<=b&&Math.abs(te.y-V.y)<=b&&!y[he]){y[he]=!0,M.crossTileID=he;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:l})=>l))}}class Li{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const y in this.indexes){const b=this.indexes[y],A={};for(const M in b){const j=b[M];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+h),A[j.tileID.key]=j}this.indexes[y]=A}this.lng=l}addBucket(l,h,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let A=0;A<h.symbolInstances.length;A++)h.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const b=this.usedCrossTileIDs[l.overscaledZ];for(const A in this.indexes){const M=this.indexes[A];if(Number(A)>l.overscaledZ)for(const j in M){const V=M[j];V.tileID.isChildOf(l)&&V.findMatches(h.symbolInstances,l,b)}else{const j=M[l.scaledTo(Number(A)).key];j&&j.findMatches(h.symbolInstances,l,b)}}for(let A=0;A<h.symbolInstances.length;A++){const M=h.symbolInstances.get(A);M.crossTileID||(M.crossTileID=y.generate(),b[M.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new In(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const y of h.getCrossTileIDsLists())for(const b of y)delete this.usedCrossTileIDs[l][b]}removeStaleBuckets(l){let h=!1;for(const y in this.indexes){const b=this.indexes[y];for(const A in b)l[b[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,b[A]),delete b[A],h=!0)}return h}}class tn{constructor(){this.layerIndexes={},this.crossTileIDs=new Li,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,y){let b=this.layerIndexes[l.id];b===void 0&&(b=this.layerIndexes[l.id]=new Rn);let A=!1;const M={};b.handleWrapJump(y);for(const j of h){const V=j.getBucket(l);V&&l.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(j.tileID,V,this.crossTileIDs)&&(A=!0),M[V.bucketInstanceId]=!0)}return b.removeStaleBuckets(M)&&(A=!0),A}pruneUnusedLayers(l){const h={};l.forEach((y=>{h[y]=!0}));for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}var pr="void main() {fragColor=vec4(1.0);}";const $r={prelude:Wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Wr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Wr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Wr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wr(pr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Wr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Wr(pr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Wr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Wr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Wr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Wr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Wr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Wr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Wr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Wr(E,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/in ([\w]+) ([\w]+)/g),b=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=A?A.concat(b):b,j={};return{fragmentSource:E=E.replace(h,((V,K,te,he,fe)=>(j[fe]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
in ${te} ${he} ${fe};
#else
uniform ${te} ${he} u_${fe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${fe}
    ${te} ${he} ${fe} = u_${fe};
#endif
`))),vertexSource:l=l.replace(h,((V,K,te,he,fe)=>{const we=he==="float"?"vec2":"vec4",Oe=fe.match(/color/)?"color":we;return j[fe]?K==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
in ${te} ${we} a_${fe};
out ${te} ${he} ${fe};
#else
uniform ${te} ${he} u_${fe};
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = a_${fe};
#else
    ${te} ${he} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${fe} = unpack_mix_${Oe}(a_${fe}, u_${fe}_t);
#else
    ${te} ${he} ${fe} = u_${fe};
#endif
`:K==="define"?`
#ifndef HAS_UNIFORM_u_${fe}
uniform lowp float u_${fe}_t;
in ${te} ${we} a_${fe};
#else
uniform ${te} ${he} u_${fe};
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${fe}
    ${te} ${he} ${fe} = a_${fe};
#else
    ${te} ${he} ${fe} = u_${fe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${fe}
    ${te} ${he} ${fe} = unpack_mix_${Oe}(a_${fe}, u_${fe}_t);
#else
    ${te} ${he} ${fe} = u_${fe};
#endif
`})),staticAttributes:y,staticUniforms:M}}class jn{constructor(l,h,y){this.vertexBuffer=l,this.indexBuffer=h,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var di=a.aU([{name:"a_pos",type:"Int16",components:2}]);const Ji="#define PROJECTION_MERCATOR",Lo="mercator";class Jn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Lo}get shaderDefine(){return Ji}get shaderPreludeCode(){return $r.projectionMercator}get vertexShaderPreludeCode(){return $r.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(l){}getMeshFromTileID(l,h,y,b,A){if(this._cachedMesh)return this._cachedMesh;const M=new a.aW;M.emplaceBack(0,0),M.emplaceBack(a.a5,0),M.emplaceBack(0,a.a5),M.emplaceBack(a.a5,a.a5);const j=l.createVertexBuffer(M,di.members),V=a.aX.simpleSegment(0,0,4,2),K=new a.aY;K.emplaceBack(1,0,2),K.emplaceBack(1,2,3);const te=l.createIndexBuffer(K);return this._cachedMesh=new jn(j,te,V),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(l){}}class ws{constructor(l=0,h=0,y=0,b=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=y,this.right=b}interpolate(l,h,y){return h.top!=null&&l.top!=null&&(this.top=a.G.number(l.top,h.top,y)),h.bottom!=null&&l.bottom!=null&&(this.bottom=a.G.number(l.bottom,h.bottom,y)),h.left!=null&&l.left!=null&&(this.left=a.G.number(l.left,h.left,y)),h.right!=null&&l.right!=null&&(this.right=a.G.number(l.right,h.right,y)),this}getCenter(l,h){const y=a.an((this.left+l-this.right)/2,0,l),b=a.an((this.top+h-this.bottom)/2,0,h);return new a.P(y,b)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ss(E,l){if(!E.renderWorldCopies||E.lngRange)return;const h=l.lng-E.center.lng;l.lng+=h>180?-360:h<-180?360:0}function ui(E){return Math.max(0,Math.floor(E))}class ss{constructor(l,h){var y;this.applyConstrain=(b,A)=>this._constrainOverride!==null?this._constrainOverride(b,A):this._callbacks.defaultConstrain(b,A),this._callbacks=l,this._tileSize=512,this._renderWorldCopies=h?.renderWorldCopies===void 0||!!h?.renderWorldCopies,this._minZoom=h?.minZoom||0,this._maxZoom=h?.maxZoom||22,this._minPitch=h?.minPitch==null?0:h?.minPitch,this._maxPitch=h?.maxPitch==null?60:h?.maxPitch,this._constrainOverride=(y=h?.constrainOverride)!==null&&y!==void 0?y:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ui(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ws,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(l,h,y){this._constrainOverride=l.constrainOverride,this._latRange=l.latRange,this._lngRange=l.lngRange,this._width=l.width,this._height=l.height,this._center=l.center,this._elevation=l.elevation,this._minElevationForCurrentTile=l.minElevationForCurrentTile,this._zoom=l.zoom,this._tileZoom=ui(this._zoom),this._scale=a.aq(this._zoom),this._bearingInRadians=l.bearingInRadians,this._fovInRadians=l.fovInRadians,this._pitchInRadians=l.pitchInRadians,this._rollInRadians=l.rollInRadians,this._unmodified=l.unmodified,this._edgeInsets=new ws(l.padding.top,l.padding.bottom,l.padding.left,l.padding.right),this._minZoom=l.minZoom,this._maxZoom=l.maxZoom,this._minPitch=l.minPitch,this._maxPitch=l.maxPitch,this._renderWorldCopies=l.renderWorldCopies,this._cameraToCenterDistance=l.cameraToCenterDistance,this._nearZ=l.nearZ,this._farZ=l.farZ,this._autoCalculateNearFarZ=!y&&l.autoCalculateNearFarZ,h&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(l){this._minElevationForCurrentTile=l}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(l){this._minZoom!==l&&(this._minZoom=l,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(l){this._minPitch!==l&&(this._minPitch=l,this.setPitch(Math.max(this.pitch,l)))}get maxPitch(){return this._maxPitch}setMaxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.setPitch(Math.min(this.pitch,l)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get constrainOverride(){return this._constrainOverride}setConstrainOverride(l){l===void 0&&(l=null),this._constrainOverride!==l&&(this._constrainOverride=l,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(l){const h=a.W(l,-180,180)*Math.PI/180;var y,b,A,M,j,V,K,te,he;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=d(),y=this._rotationMatrix,A=-this._bearingInRadians,M=(b=this._rotationMatrix)[0],j=b[1],V=b[2],K=b[3],te=Math.sin(A),he=Math.cos(A),y[0]=M*he+V*te,y[1]=j*he+K*te,y[2]=M*-te+V*he,y[3]=j*-te+K*he)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(l){const h=a.an(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(l){const h=l/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aZ(this._fovInRadians)}setFov(l){l=a.an(l,.1,150),this.fov!==l&&(this._unmodified=!1,this._fovInRadians=a.ap(l),this._calcMatrices())}get zoom(){return this._zoom}setZoom(l){const h=this.applyConstrain(this._center,l).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=a.aq(h),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(l){l!==this._elevation&&(this._elevation=l,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(l,h){this._autoCalculateNearFarZ=!1,this._nearZ=l,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,y){this._unmodified=!1,this._edgeInsets.interpolate(l,h,y),this.constrainInternal(),this._calcMatrices()}resize(l,h,y=!0){this._width=l,this._height=h,y&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new sr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(l){l?(this._lngRange=[l.getWest(),l.getEast()],this._latRange=[l.getSouth(),l.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-a.ao,a.ao])}getCameraQueryGeometry(l,h){if(h.length===1)return[h[0],l];{const{minX:y,minY:b,maxX:A,maxY:M}=a.aa.fromPoints(h).extend(l);return[new a.P(y,b),new a.P(A,b),new a.P(A,M),new a.P(y,M),new a.P(y,b)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const l=this._unmodified,{center:h,zoom:y}=this.applyConstrain(this.center,this.zoom);this.setCenter(h),this.setZoom(y),this._unmodified=l,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let l=a.ar(new Float64Array(16));a.Q(l,l,[this._width/2,-this._height/2,1]),a.O(l,l,[1,-1,0]),this._clipSpaceToPixelsMatrix=l,l=a.ar(new Float64Array(16)),a.Q(l,l,[1,-1,1]),a.O(l,l,[-1,-1,0]),a.Q(l,l,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=l,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(l,h,y,b){const A=y!==void 0?y:this.bearing,M=b=b!==void 0?b:this.pitch,{distanceToCenter:j,clampedElevation:V}=this._distanceToCenterFromAltElevationPitch(h,this.elevation,M),{x:K,y:te}=Ur(M,A),he=a.a9.fromLngLat(l,h);let fe,we,Oe=a.a_(1,he.y),Xe=0;do{if(Xe+=1,Xe>10)break;we=j/Oe,fe=new a.a9(he.x+K*we,he.y+te*we),Oe=1/fe.meterInMercatorCoordinateUnits()}while(Math.abs(j-we*Oe)>1e-12);return{center:fe.toLngLat(),elevation:V,zoom:a.at(this.height/2/Math.tan(this.fovInRadians/2)/we/this.tileSize)}}recalculateZoomAndCenter(l){if(this.elevation-l==0)return;const h=1/this.worldSize,y=a.as(1,this.center.lat)*this.worldSize,b=a.a9.fromLngLat(this.center,this.elevation),A=b.x/h,M=b.y/h,j=b.z/h,V=this.pitch,K=this.bearing,{x:te,y:he,z:fe}=Ur(V,K),we=this.cameraToCenterDistance,Oe=A+we*-te,Xe=M+we*-he,Qe=j+we*fe,{distanceToCenter:Ye,clampedElevation:at}=this._distanceToCenterFromAltElevationPitch(Qe/y,l,V),St=Ye*y,ot=new a.a9((Oe+te*St)*h,(Xe+he*St)*h,0).toLngLat(),Et=a.as(1,ot.lat),Pt=a.at(this.height/2/Math.tan(this.fovInRadians/2)/Ye/Et/this.tileSize);this._elevation=at,this._center=ot,this.setZoom(Pt)}_distanceToCenterFromAltElevationPitch(l,h,y){const b=-Math.cos(a.ap(y)),A=l-h;let M,j=h;return b*A>=0||Math.abs(b)<.1?(M=1e4,j=l+M*b):M=-A/b,{distanceToCenter:M,clampedElevation:j}}getCameraPoint(){const l=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(l*Math.sin(this.rollInRadians),l*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const l=a.as(1,this.center.lat)*this.worldSize;return Rt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/l).toLngLat()}getMercatorTileCoordinates(l){if(!l)return[0,0,1,1];const h=l.canonical.z>=0?1<<l.canonical.z:Math.pow(2,l.canonical.z);return[l.canonical.x/h,l.canonical.y/h,1/h/a.a5,1/h/a.a5]}}class go{constructor(l,h){this.min=l,this.max=h,this.center=a.a$([],a.b0([],this.min,this.max),.5)}quadrant(l){const h=[l%2==0,l<2],y=a.b1(this.min),b=a.b1(this.max);for(let A=0;A<h.length;A++)y[A]=h[A]?this.min[A]:this.center[A],b[A]=h[A]?this.center[A]:this.max[A];return b[2]=this.max[2],new go(y,b)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersectsFrustum(l){let h=!0;for(let y=0;y<l.planes.length;y++){const b=this.intersectsPlane(l.planes[y]);if(b===0)return 0;b===1&&(h=!1)}return h?2:l.aabb.min[0]>this.max[0]||l.aabb.min[1]>this.max[1]||l.aabb.min[2]>this.max[2]||l.aabb.max[0]<this.min[0]||l.aabb.max[1]<this.min[1]||l.aabb.max[2]<this.min[2]?0:1}intersectsPlane(l){let h=l[3],y=l[3];for(let b=0;b<3;b++)l[b]>0?(h+=l[b]*this.min[b],y+=l[b]*this.max[b]):(y+=l[b]*this.min[b],h+=l[b]*this.max[b]);return h>=0?2:y<0?0:1}}class xu{distanceToTile2d(l,h,y,b){const A=b.distanceX([l,h]),M=b.distanceY([l,h]);return Math.hypot(A,M)}getWrap(l,h,y){return y}getTileBoundingVolume(l,h,y,b){var A,M;let j=0,V=0;if(b?.terrain){const te=new a.a2(l.z,h,l.z,l.x,l.y),he=b.terrain.getMinMaxElevation(te);j=(A=he.minElevation)!==null&&A!==void 0?A:Math.min(0,y),V=(M=he.maxElevation)!==null&&M!==void 0?M:Math.max(0,y)}const K=1<<l.z;return new go([h+l.x/K,l.y/K,j],[h+(l.x+1)/K,(l.y+1)/K,V])}allowVariableZoom(l,h){const y=l.fov*(Math.abs(Math.cos(l.rollInRadians))*l.height+Math.abs(Math.sin(l.rollInRadians))*l.width)/l.height,b=a.an(78.5-y/2,0,60);return!!h.terrain||l.pitch>b}allowWorldCopies(){return!0}prepareNextFrame(){}}class Na{constructor(l,h,y){this.points=l,this.planes=h,this.aabb=y}static fromInvProjectionMatrix(l,h=1,y=0,b,A){const M=A?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],j=Math.pow(2,y),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((fe=>(function(we,Oe,Xe,Qe){const Ye=a.aH([],we,Oe),at=1/Ye[3]/Xe*Qe;return a.b6(Ye,Ye,[at,at,1/Ye[3],at])})(fe,l,h,j)));b&&(function(fe,we,Oe,Xe){const Qe=Xe?4:0,Ye=Xe?0:4;let at=0;const St=[],ot=[];for(let vt=0;vt<4;vt++){const jt=a.b2([],fe[vt+Ye],fe[vt+Qe]),nr=a.b7(jt);a.a$(jt,jt,1/nr),St.push(nr),ot.push(jt)}for(let vt=0;vt<4;vt++){const jt=a.b8(fe[vt+Qe],ot[vt],Oe);at=jt!==null&&jt>=0?Math.max(at,jt):Math.max(at,St[vt])}const Et=(function(vt,jt){const nr=a.b2([],vt[jt[0]],vt[jt[1]]),Xt=a.b2([],vt[jt[2]],vt[jt[1]]),Jt=[0,0,0,0];return a.b3(Jt,a.b4([],nr,Xt)),Jt[3]=-a.b5(Jt,vt[jt[0]]),Jt})(fe,we),Pt=(function(vt,jt){const nr=a.b9(vt),Xt=a.ba([],vt,1/nr),Jt=a.b2([],jt,a.a$([],Xt,a.b5(jt,Xt))),rr=a.b9(Jt);if(rr>0){const Or=Math.sqrt(1-Xt[3]*Xt[3]),Dr=a.a$([],Xt,-Xt[3]),Er=a.b0([],Dr,a.a$([],Jt,Or/rr));return a.bb(jt,Er)}return null})(Oe,Et);if(Pt!==null){const vt=Pt/a.b5(ot[0],Et);at=Math.min(at,vt)}for(let vt=0;vt<4;vt++){const jt=Math.min(at,St[vt]);fe[vt+Ye]=[fe[vt+Qe][0]+ot[vt][0]*jt,fe[vt+Qe][1]+ot[vt][1]*jt,fe[vt+Qe][2]+ot[vt][2]*jt,1]}})(V,M[0],b,A);const K=M.map((fe=>{const we=a.b2([],V[fe[0]],V[fe[1]]),Oe=a.b2([],V[fe[2]],V[fe[1]]),Xe=a.b3([],a.b4([],we,Oe)),Qe=-a.b5(Xe,V[fe[1]]);return Xe.concat(Qe)})),te=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],he=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const fe of V)for(let we=0;we<3;we++)te[we]=Math.min(te[we],fe[we]),he[we]=Math.max(he[we],fe[we]);return new Na(V,K,new go(te,he))}}class Es{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,y){return this._helper.interpolatePadding(l,h,y)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h,y=!0){this._helper.resize(l,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l,h){}constructor(l){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(h,y)=>{y=a.an(+y,this.minZoom,this.maxZoom);const b={center:new a.V(h.lng,h.lat),zoom:y};let A=this._helper._lngRange;if(!this._helper._renderWorldCopies&&A===null){const ot=179.9999999999;A=[-ot,ot]}const M=this.tileSize*a.aq(b.zoom);let j=0,V=M,K=0,te=M,he=0,fe=0;const{x:we,y:Oe}=this.size;if(this._helper._latRange){const ot=this._helper._latRange;j=a.X(ot[1])*M,V=a.X(ot[0])*M,V-j<Oe&&(he=Oe/(V-j))}A&&(K=a.W(a.Y(A[0])*M,0,M),te=a.W(a.Y(A[1])*M,0,M),te<K&&(te+=M),te-K<we&&(fe=we/(te-K)));const{x:Xe,y:Qe}=mr(M,h);let Ye,at;const St=Math.max(fe||0,he||0);if(St){const ot=new a.P(fe?(te+K)/2:Xe,he?(V+j)/2:Qe);return b.center=Zr(M,ot).wrap(),b.zoom+=a.at(St),b}if(this._helper._latRange){const ot=Oe/2;Qe-ot<j&&(at=j+ot),Qe+ot>V&&(at=V-ot)}if(A){const ot=(K+te)/2;let Et=Xe;this._helper._renderWorldCopies&&(Et=a.W(Xe,ot-M/2,ot+M/2));const Pt=we/2;Et-Pt<K&&(Ye=K+Pt),Et+Pt>te&&(Ye=te-Pt)}if(Ye!==void 0||at!==void 0){const ot=new a.P(Ye??Xe,at??Qe);b.center=Zr(M,ot).wrap()}return b},this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},l),this._coveringTilesDetailsProvider=new xu}clone(){const l=new Es;return l.apply(this,!1),l}apply(l,h,y){this._helper.apply(l,h,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(l){const h=[new a.bc(0,l)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new a.P(0,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),A=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),j=Math.floor(Math.min(y.x,b.x,A.x,M.x)),V=Math.floor(Math.max(y.x,b.x,A.x,M.x)),K=1;for(let te=j-K;te<=V+K;te++)te!==0&&h.push(new a.bc(te,l))}return h}getCameraFrustum(){return Na.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){const h=this.screenPointToLocation(this.centerPoint,l),y=l?l.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(l,h){const y=a.as(this.elevation,this.center.lat),b=this.screenPointToMercatorCoordinateAtZ(h,y),A=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),M=a.a9.fromLngLat(l),j=new a.a9(M.x-(b.x-A.x),M.y-(b.y-A.y));this.setCenter(j?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(l,h){return h?this.coordinatePoint(a.a9.fromLngLat(l),h.getElevationForLngLat(l,this),this._pixelMatrix3D):this.coordinatePoint(a.a9.fromLngLat(l))}screenPointToLocation(l,h){var y;return(y=this.screenPointToMercatorCoordinate(l,h))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(l,h){if(h){const y=h.pointCoordinate(l);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(l)}screenPointToMercatorCoordinateAtZ(l,h){const y=h||0,b=[l.x,l.y,0,1],A=[l.x,l.y,1,1];a.aH(b,b,this._pixelMatrixInverse),a.aH(A,A,this._pixelMatrixInverse);const M=b[3],j=A[3],V=b[1]/M,K=A[1]/j,te=b[2]/M,he=A[2]/j,fe=te===he?0:(y-te)/(he-te);return new a.a9(a.G.number(b[0]/M,A[0]/j,fe)/this.worldSize,a.G.number(V,K,fe)/this.worldSize,y)}coordinatePoint(l,h=0,y=this._pixelMatrix){const b=[l.x*this.worldSize,l.y*this.worldSize,h,1];return a.aH(b,b,y),new a.P(b[0]/b[3],b[1]/b[3])}getBounds(){const l=Math.max(0,this._helper._height/2-mn(this));return new sr().extend(this.screenPointToLocation(new a.P(0,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,l))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(l,h){return h?h.pointCoordinate(l)!=null:l.y>this.height/2-mn(this)}calculatePosMatrix(l,h=!1,y){var b;const A=(b=l.key)!==null&&b!==void 0?b:a.bd(l.wrap,l.canonical.z,l.canonical.z,l.canonical.x,l.canonical.y),M=h?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(A)){const K=M.get(A);return y?K.f32:K.f64}const j=Kr(l,this.worldSize);a.S(j,h?this._alignedProjMatrix:this._viewProjMatrix,j);const V={f64:j,f32:new Float32Array(j)};return M.set(A,V),y?V.f32:V.f64}calculateFogMatrix(l){const h=l.key,y=this._fogMatrixCacheF32;if(y.has(h))return y.get(h);const b=Kr(l,this.worldSize);return a.S(b,this._fogMatrix,b),y.set(h,new Float32Array(b)),y.get(h)}calculateCenterFromCameraLngLatAlt(l,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,y,b)}_calculateNearFarZIfNeeded(l,h,y){if(!this._helper.autoCalculateNearFarZ)return;const b=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),A=l-b*this._helper._pixelPerMeter/Math.cos(h),M=b<0?A:l,j=Math.PI/2+this.pitchInRadians,V=a.ap(this.fov)*(Math.abs(Math.cos(a.ap(this.roll)))*this.height+Math.abs(Math.sin(a.ap(this.roll)))*this.width)/this.height*(.5+y.y/this.height),K=Math.sin(V)*M/Math.sin(a.an(Math.PI-j-V,.01,Math.PI-.01)),te=mn(this),he=Math.atan(te/this._helper.cameraToCenterDistance),fe=a.ap(.75),we=he>fe?2*he*(.5+y.y/(2*te)):fe,Oe=Math.sin(we)*M/Math.sin(a.an(Math.PI-j-we,.01,Math.PI-.01)),Xe=Math.min(K,Oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*Xe+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const l=this.centerOffset,h=mr(this.worldSize,this.center),y=h.x,b=h.y;this._helper._pixelPerMeter=a.as(1,this.center.lat)*this.worldSize;const A=a.ap(Math.min(this.pitch,cr)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(A));let j;this._calculateNearFarZIfNeeded(M,A,l),j=new Float64Array(16),a.be(j,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aB(this._invProjMatrix,j),j[8]=2*-l.x/this._helper._width,j[9]=2*l.y/this._helper._height,this._projectionMatrix=a.bf(j),a.Q(j,j,[1,-1,1]),a.O(j,j,[0,0,-this._helper.cameraToCenterDistance]),a.bg(j,j,-this.rollInRadians),a.bh(j,j,this.pitchInRadians),a.bg(j,j,-this.bearingInRadians),a.O(j,j,[-y,-b,0]),this._mercatorMatrix=a.Q([],j,[this.worldSize,this.worldSize,this.worldSize]),a.Q(j,j,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,j),a.O(j,j,[0,0,-this.elevation]),this._viewProjMatrix=j,this._invViewProjMatrix=a.aB([],j);const V=[0,0,-1,1];a.aH(V,V,this._invViewProjMatrix),this._cameraPosition=[V[0]/V[3],V[1]/V[3],V[2]/V[3]],this._fogMatrix=new Float64Array(16),a.be(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-l.x/this.width,this._fogMatrix[9]=2*l.y/this.height,a.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.O(this._fogMatrix,this._fogMatrix,[-y,-b,0]),a.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,j);const K=this._helper._width%2/2,te=this._helper._height%2/2,he=Math.cos(this.bearingInRadians),fe=Math.sin(-this.bearingInRadians),we=y-Math.round(y)+he*K+fe*te,Oe=b-Math.round(b)+he*te+fe*K,Xe=new Float64Array(j);if(a.O(Xe,Xe,[we>.5?we-1:we,Oe>.5?Oe-1:Oe,0]),this._alignedProjMatrix=Xe,j=a.aB(new Float64Array(16),this._pixelMatrix),!j)throw new Error("failed to invert matrix");this._pixelMatrixInverse=j,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const l=this.screenPointToMercatorCoordinate(new a.P(0,0)),h=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.aH(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const l=a.as(1,this.center.lat)*this.worldSize;return Rt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/l).toLngLat()}lngLatToCameraDepth(l,h){const y=a.a9.fromLngLat(l),b=[y.x*this.worldSize,y.y*this.worldSize,h,1];return a.aH(b,b,this._viewProjMatrix),b[2]/b[3]}getProjectionData(l){const{overscaledTileID:h,aligned:y,applyTerrainMatrix:b}=l,A=this._helper.getMercatorTileCoordinates(h),M=h?this.calculatePosMatrix(h,y,!0):null;let j;return j=h&&h.terrainRttPosMatrix32f&&b?h.terrainRttPosMatrix32f:M||a.bi(),{mainMatrix:j,tileMercatorCoords:A,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:j}}isLocationOccluded(l){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(l,h,y){return 1}transformLightDirection(l){return a.b1(l)}getRayDirectionFromPixel(l){throw new Error("Not implemented.")}projectTileCoordinates(l,h,y,b){const A=this.calculatePosMatrix(y);let M;b?(M=[l,h,b(l,h),1],a.aH(M,M,A)):(M=[l,h,0,1],fa(M,M,A));const j=M[3];return{point:new a.P(M[0]/j,M[1]/j),signedDistanceFromCamera:j,isOccluded:!1}}populateCache(l){for(const h of l)this.calculatePosMatrix(h)}getMatrixForModel(l,h){const y=a.a9.fromLngLat(l,h),b=y.meterInMercatorCoordinateUnits(),A=a.bj();return a.O(A,A,[y.x,y.y,y.z]),a.bg(A,A,Math.PI),a.bh(A,A,Math.PI/2),a.Q(A,A,[-b,b,b]),A}getProjectionDataForCustomLayer(l=!0){const h=new a.a2(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:l}),b=Kr(h,this.worldSize);a.S(b,this._viewProjMatrix,b),y.tileMercatorCoords=[0,0,1,1];const A=[a.a5,a.a5,this.worldSize/this._helper.pixelsPerMeter],M=a.bk();return a.Q(M,b,A),y.fallbackMatrix=M,y.mainMatrix=M,y}getFastPathSimpleProjectionMatrix(l){return this.calculatePosMatrix(l)}}function yo(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Xl(E){if(E.useSlerp)if(E.k<1){const l=a.bl(E.startEulerAngles.roll,E.startEulerAngles.pitch,E.startEulerAngles.bearing),h=a.bl(E.endEulerAngles.roll,E.endEulerAngles.pitch,E.endEulerAngles.bearing),y=new Float64Array(4);a.bm(y,l,h,E.k);const b=a.bn(y);E.tr.setRoll(b.roll),E.tr.setPitch(b.pitch),E.tr.setBearing(b.bearing)}else E.tr.setRoll(E.endEulerAngles.roll),E.tr.setPitch(E.endEulerAngles.pitch),E.tr.setBearing(E.endEulerAngles.bearing);else E.tr.setRoll(a.G.number(E.startEulerAngles.roll,E.endEulerAngles.roll,E.k)),E.tr.setPitch(a.G.number(E.startEulerAngles.pitch,E.endEulerAngles.pitch,E.k)),E.tr.setBearing(a.G.number(E.startEulerAngles.bearing,E.endEulerAngles.bearing,E.k))}function wu(E,l,h,y,b){const A=b.padding,M=mr(b.worldSize,h.getNorthWest()),j=mr(b.worldSize,h.getNorthEast()),V=mr(b.worldSize,h.getSouthEast()),K=mr(b.worldSize,h.getSouthWest()),te=a.ap(-y),he=M.rotate(te),fe=j.rotate(te),we=V.rotate(te),Oe=K.rotate(te),Xe=new a.P(Math.max(he.x,fe.x,Oe.x,we.x),Math.max(he.y,fe.y,Oe.y,we.y)),Qe=new a.P(Math.min(he.x,fe.x,Oe.x,we.x),Math.min(he.y,fe.y,Oe.y,we.y)),Ye=Xe.sub(Qe),at=(b.width-(A.left+A.right+l.left+l.right))/Ye.x,St=(b.height-(A.top+A.bottom+l.top+l.bottom))/Ye.y;if(St<0||at<0)return void yo();const ot=Math.min(a.at(b.scale*Math.min(at,St)),E.maxZoom),Et=a.P.convert(E.offset),Pt=new a.P((l.left-l.right)/2,(l.top-l.bottom)/2).rotate(a.ap(y)),vt=Et.add(Pt).mult(b.scale/a.aq(ot));return{center:Zr(b.worldSize,M.add(V).div(2).sub(vt)),zoom:ot,bearing:y}}class Cs{get useGlobeControls(){return!1}handlePanInertia(l,h){const y=l.mag(),b=Math.abs(mn(h));return{easingOffset:l.mult(Math.min(.75*b/y,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(l,h){l.bearingDelta&&h.setBearing(h.bearing+l.bearingDelta),l.pitchDelta&&h.setPitch(h.pitch+l.pitchDelta),l.rollDelta&&h.setRoll(h.roll+l.rollDelta),l.zoomDelta&&h.setZoom(h.zoom+l.zoomDelta)}handleMapControlsPan(l,h,y){l.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(y,l.around)}cameraForBoxAndBearing(l,h,y,b,A){return wu(l,h,y,b,A)}handleJumpToCenterZoom(l,h){l.zoom!==(h.zoom!==void 0?+h.zoom:l.zoom)&&l.setZoom(+h.zoom),h.center!==void 0&&l.setCenter(a.V.convert(h.center))}handleEaseTo(l,h){const y=l.zoom,b=l.padding,A={roll:l.roll,pitch:l.pitch,bearing:l.bearing},M={roll:h.roll===void 0?l.roll:h.roll,pitch:h.pitch===void 0?l.pitch:h.pitch,bearing:h.bearing===void 0?l.bearing:h.bearing},j=h.zoom!==void 0,V=!l.isPaddingEqual(h.padding);let K=!1;const te=j?+h.zoom:l.zoom;let he=l.centerPoint.add(h.offsetAsPoint);const fe=l.screenPointToLocation(he),{center:we,zoom:Oe}=l.applyConstrain(a.V.convert(h.center||fe),te??y);Ss(l,we);const Xe=mr(l.worldSize,fe),Qe=mr(l.worldSize,we).sub(Xe),Ye=a.aq(Oe-y);return K=Oe!==y,{easeFunc:at=>{if(K&&l.setZoom(a.G.number(y,Oe,at)),a.bo(A,M)||Xl({startEulerAngles:A,endEulerAngles:M,tr:l,k:at,useSlerp:A.roll!=M.roll}),V&&(l.interpolatePadding(b,h.padding,at),he=l.centerPoint.add(h.offsetAsPoint)),h.around)l.setLocationAtPoint(h.around,h.aroundPoint);else{const St=a.aq(l.zoom-y),ot=Oe>y?Math.min(2,Ye):Math.max(.5,Ye),Et=Math.pow(ot,1-at),Pt=Zr(l.worldSize,Xe.add(Qe.mult(at*Et)).mult(St));l.setLocationAtPoint(l.renderWorldCopies?Pt.wrap():Pt,he)}},isZooming:K,elevationCenter:we}}handleFlyTo(l,h){const y=h.zoom!==void 0,b=l.zoom,A=l.applyConstrain(a.V.convert(h.center||h.locationAtOffset),y?+h.zoom:b),M=A.center,j=A.zoom;Ss(l,M);const V=mr(l.worldSize,h.locationAtOffset),K=mr(l.worldSize,M).sub(V),te=K.mag(),he=a.aq(j-b);let fe;if(h.minZoom!==void 0){const we=Math.min(+h.minZoom,b,j),Oe=l.applyConstrain(M,we).zoom;fe=a.aq(Oe-b)}return{easeFunc:(we,Oe,Xe,Qe)=>{l.setZoom(we===1?j:b+a.at(Oe));const Ye=we===1?M:Zr(l.worldSize,V.add(K.mult(Xe)).mult(Oe));l.setLocationAtPoint(l.renderWorldCopies?Ye.wrap():Ye,Qe)},scaleOfZoom:he,targetCenter:M,scaleOfMinZoom:fe,pixelPathLength:te}}}class bi{constructor(l,h,y){this.blendFunction=l,this.blendColor=h,this.mask=y}}bi.Replace=[1,0],bi.disabled=new bi(bi.Replace,a.bp.transparent,[!1,!1,!1,!1]),bi.unblended=new bi(bi.Replace,a.bp.transparent,[!0,!0,!0,!0]),bi.alphaBlended=new bi([1,771],a.bp.transparent,[!0,!0,!0,!0]);const ls=2305;class Xn{constructor(l,h,y){this.enable=l,this.mode=h,this.frontFace=y}}Xn.disabled=new Xn(!1,1029,ls),Xn.backCCW=new Xn(!0,1029,ls),Xn.frontCCW=new Xn(!0,1028,ls);class kn{constructor(l,h,y){this.func=l,this.mask=h,this.range=y}}kn.ReadOnly=!1,kn.ReadWrite=!0,kn.disabled=new kn(519,kn.ReadOnly,[0,1]);const eo=7680;class Nn{constructor(l,h,y,b,A,M){this.test=l,this.ref=h,this.mask=y,this.fail=b,this.depthFail=A,this.pass=M}}Nn.disabled=new Nn({func:519,mask:0},0,0,eo,eo,eo);const Y=new WeakMap;function Pe(E){var l;if(Y.has(E))return Y.get(E);{const h=(l=E.getParameter(E.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Y.set(E,h),h}}class it{get awaitingQuery(){return!!this._readbackQueue}constructor(l){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=l;const h=l.context,y=h.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const b=new a.aW;b.emplaceBack(-1,-1),b.emplaceBack(2,-1),b.emplaceBack(-1,2);const A=new a.aY;A.emplaceBack(0,1,2),this._fullscreenTriangle=new jn(h.createVertexBuffer(b,di.members),h.createIndexBuffer(A),a.aX.simpleSegment(0,0,b.length,A.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(y.TEXTURE1);const M=y.createTexture();y.bindTexture(y.TEXTURE_2D,M),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),Pe(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const l=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),l.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(l,h){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(l,h),this._updateCount++,this._measuredError}_bindFramebuffer(){const l=this._cachedRenderContext.context,h=l.gl;l.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),l.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(l,h){const y=this._cachedRenderContext.context,b=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:a.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,b.TRIANGLES,kn.disabled,Nn.disabled,bi.unblended,Xn.disabled,((A,M)=>({u_input:A,u_output_expected:M}))(l,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Pe(b)){b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.readBuffer(b.COLOR_ATTACHMENT0),b.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),b.bindBuffer(b.PIXEL_PACK_BUFFER,null);const A=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:A}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const l=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Pe(l)){const h=l.clientWaitSync(this._readbackQueue.sync,0,0);if(h===l.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===l.TIMEOUT_EXPIRED)return;l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),l.bindBuffer(l.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=it._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(l){let h=0;return h+=l[0]/256,h+=l[1]/65536,h+=l[2]/16777216,l[3]<127&&(h=-h),h/128}}const Ot=a.a5/128;function Gt(E,l){const h=E.granularity!==void 0?Math.max(E.granularity,1):1,y=h+(E.generateBorders?2:0),b=h+(E.extendToNorthPole||E.generateBorders?1:0)+(E.extendToSouthPole||E.generateBorders?1:0),A=y+1,M=b+1,j=E.generateBorders?-1:0,V=E.generateBorders||E.extendToNorthPole?-1:0,K=h+(E.generateBorders?1:0),te=h+(E.generateBorders||E.extendToSouthPole?1:0),he=A*M,fe=y*b*6,we=A*M>65536;if(we&&l==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Oe=we||l==="32bit",Xe=new Int16Array(2*he);let Qe=0;for(let St=V;St<=te;St++)for(let ot=j;ot<=K;ot++){let Et=ot/h*a.a5;ot===-1&&(Et=-Ot),ot===h+1&&(Et=a.a5+Ot);let Pt=St/h*a.a5;St===-1&&(Pt=E.extendToNorthPole?a.br:-Ot),St===h+1&&(Pt=E.extendToSouthPole?a.bs:a.a5+Ot),Xe[Qe++]=Et,Xe[Qe++]=Pt}const Ye=Oe?new Uint32Array(fe):new Uint16Array(fe);let at=0;for(let St=0;St<b;St++)for(let ot=0;ot<y;ot++){const Et=ot+1+St*A,Pt=ot+(St+1)*A,vt=ot+1+(St+1)*A;Ye[at++]=ot+St*A,Ye[at++]=Pt,Ye[at++]=Et,Ye[at++]=Et,Ye[at++]=Pt,Ye[at++]=vt}return{vertices:Xe.buffer.slice(0),indices:Ye.buffer.slice(0),uses32bitIndices:Oe}}const br=new a.aV({fill:new a.bt(128,2),line:new a.bt(512,0),tile:new a.bt(128,32),stencil:new a.bt(128,1),circle:3});class Pr{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return $r.projectionGlobe}get vertexShaderPreludeCode(){return $r.projectionMercator.vertexSource}get subdivisionGranularity(){return br}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(l){this._errorMeasurement||(this._errorMeasurement=new it(l));const h=a.X(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,b=this._errorMeasurement.updateErrorLoop(h,y),A=O();b!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=b,this._errorMeasurementLastChangeTime=A);const M=Math.min(Math.max((A-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bv(M))}_getMeshKey(l){return`${l.granularity.toString(36)}_${l.generateBorders?"b":""}${l.extendToNorthPole?"n":""}${l.extendToSouthPole?"s":""}`}getMeshFromTileID(l,h,y,b,A){const M=(A==="stencil"?br.stencil:br.tile).getGranularityForZoomLevel(h.z);return this._getMesh(l,{granularity:M,generateBorders:y,extendToNorthPole:h.y===0&&b,extendToSouthPole:h.y===(1<<h.z)-1&&b})}_getMesh(l,h){const y=this._getMeshKey(h);if(y in this._tileMeshCache)return this._tileMeshCache[y];const b=(function(A,M){const j=Gt(M,"16bit"),V=a.aW.deserialize({arrayBuffer:j.vertices,length:j.vertices.byteLength/2/2}),K=a.aY.deserialize({arrayBuffer:j.indices,length:j.indices.byteLength/2/3});return new jn(A.createVertexBuffer(V,di.members),A.createIndexBuffer(K),a.aX.simpleSegment(0,0,V.length,K.length))})(l,h);return this._tileMeshCache[y]=b,b}recalculate(l){}hasTransition(){const l=O();let h=!1;return h=h||(l-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(l){this._errorQueryLatitudeDegrees=l}}const hn=new a.t({type:new a.D(a.u.projection.type)});class bn extends a.E{constructor(l){super(),this._transitionable=new a.x(hn,void 0),this.setProjection(l),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.H(0)),this._mercatorProjection=new Jn,this._verticalPerspectiveProjection=new Pr}get transitionState(){const l=this.properties.get("type");if(typeof l=="string"&&l==="mercator")return 0;if(typeof l=="string"&&l==="vertical-perspective")return 1;if(l instanceof a.bw){if(l.from==="vertical-perspective"&&l.to==="mercator")return 1-l.transition;if(l.from==="mercator"&&l.to==="vertical-perspective")return l.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(l){this._mercatorProjection.updateGPUdependent(l),this._verticalPerspectiveProjection.updateGPUdependent(l)}getMeshFromTileID(l,h,y,b,A){return this.currentProjection.getMeshFromTileID(l,h,y,b,A)}setProjection(l){this._transitionable.setValue("type",l?.type||"mercator")}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}setErrorQueryLatitudeDegrees(l){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(l),this._mercatorProjection.setErrorQueryLatitudeDegrees(l)}}function yn(E){const l=Pi(E.worldSize,E.center.lat);return 2*Math.PI*l}function Mn(E,l,h,y,b){const A=1/(1<<b),M=l/a.a5*A+y*A,j=a.by((E/a.a5*A+h*A)*Math.PI*2+Math.PI,2*Math.PI),V=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,K=Math.cos(V),te=new Float64Array(3);return te[0]=Math.sin(j)*K,te[1]=Math.sin(V),te[2]=Math.cos(j)*K,te}function _n(E){return(function(l,h){const y=Math.cos(h),b=new Float64Array(3);return b[0]=Math.sin(l)*y,b[1]=Math.sin(h),b[2]=Math.cos(l)*y,b})(E.lng*Math.PI/180,E.lat*Math.PI/180)}function Pi(E,l){return E/(2*Math.PI)/Math.cos(l*Math.PI/180)}function _a(E){const l=Math.asin(E[1])/Math.PI*180,h=Math.sqrt(E[0]*E[0]+E[2]*E[2]);if(h>1e-6){const y=E[0]/h,b=Math.acos(E[2]/h),A=(y>0?b:-b)/Math.PI*180;return new a.V(a.W(A,-180,180),l)}return new a.V(0,l)}function Ei(E){return Math.cos(E*Math.PI/180)}function Vn(E,l){const h=Ei(E),y=Ei(l);return a.at(y/h)}function Qi(E,l){const h=E.rotate(l.bearingInRadians),y=l.zoom+Vn(l.center.lat,0),b=a.bu(1/Ei(l.center.lat),1/Ei(Math.min(Math.abs(l.center.lat),60)),a.bx(y,7,3,0,1)),A=360/yn({worldSize:l.worldSize,center:{lat:l.center.lat}});return new a.V(l.center.lng-h.x*A*b,a.an(l.center.lat+h.y*A,-a.ao,a.ao))}function Ia(E){const l=.5*E,h=Math.sin(l),y=Math.cos(l);return Math.log(h+y)-Math.log(y-h)}function As(E,l,h,y){const b=E.lat+h*y;if(Math.abs(h)>1){const A=(Math.sign(E.lat+h)!==Math.sign(E.lat)?-Math.abs(E.lat):Math.abs(E.lat))*Math.PI/180,M=Math.abs(E.lat+h)*Math.PI/180,j=Ia(A+y*(M-A)),V=Ia(A),K=Ia(M);return new a.V(E.lng+l*((j-V)/(K-V)),b)}return new a.V(E.lng+l*y,b)}class ol{constructor(l){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=l}swapBuffers(){if(!this._hadAnyChanges)return;const l=this._cachePrevious;this._cachePrevious=this._cache,this._cache=l,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(l,h,y,b){const A=`${l.z}_${l.x}_${l.y}_${b?.terrain?"t":""}`,M=this._cache.get(A);if(M)return M;const j=this._cachePrevious.get(A);if(j)return this._cache.set(A,j),j;const V=this._boundingVolumeFactory(l,h,y,b);return this._cache.set(A,V),this._hadAnyChanges=!0,V}}class Ts{constructor(l,h,y,b){this.min=y,this.max=b,this.points=l,this.planes=h}static fromAabb(l,h){const y=[];for(let b=0;b<8;b++)y.push([1&~b?l[0]:h[0],(b>>1&1)==1?h[1]:l[1],(b>>2&1)==1?h[2]:l[2]]);return new Ts(y,[[-1,0,0,h[0]],[1,0,0,-l[0]],[0,-1,0,h[1]],[0,1,0,-l[1]],[0,0,-1,h[2]],[0,0,1,-l[2]]],l,h)}static fromCenterSizeAngles(l,h,y){const b=a.bB([],y[0],y[1],y[2]),A=a.bC([],[h[0],0,0],b),M=a.bC([],[0,h[1],0],b),j=a.bC([],[0,0,h[2]],b),V=[...l],K=[...l];for(let he=0;he<8;he++)for(let fe=0;fe<3;fe++){const we=l[fe]+A[fe]*(1&~he?-1:1)+M[fe]*((he>>1&1)==1?1:-1)+j[fe]*((he>>2&1)==1?1:-1);V[fe]=Math.min(V[fe],we),K[fe]=Math.max(K[fe],we)}const te=[];for(let he=0;he<8;he++){const fe=[...l];a.b0(fe,fe,a.a$([],A,1&~he?-1:1)),a.b0(fe,fe,a.a$([],M,(he>>1&1)==1?1:-1)),a.b0(fe,fe,a.a$([],j,(he>>2&1)==1?1:-1)),te.push(fe)}return new Ts(te,[[...A,-a.b5(A,te[0])],[...M,-a.b5(M,te[0])],[...j,-a.b5(j,te[0])],[-A[0],-A[1],-A[2],-a.b5(A,te[7])],[-M[0],-M[1],-M[2],-a.b5(M,te[7])],[-j[0],-j[1],-j[2],-a.b5(j,te[7])]],V,K)}intersectsFrustum(l){let h=!0;const y=this.points.length,b=this.planes.length,A=l.planes.length,M=l.points.length;for(let j=0;j<A;j++){const V=l.planes[j];let K=0;for(let te=0;te<y;te++){const he=this.points[te];V[0]*he[0]+V[1]*he[1]+V[2]*he[2]+V[3]>=0&&K++}if(K===0)return 0;K<y&&(h=!1)}if(h)return 2;for(let j=0;j<b;j++){const V=this.planes[j];let K=0;for(let te=0;te<M;te++){const he=l.points[te];V[0]*he[0]+V[1]*he[1]+V[2]*he[2]+V[3]>=0&&K++}if(K===0)return 0}return 1}intersectsPlane(l){const h=this.points.length;let y=0;for(let b=0;b<h;b++){const A=this.points[b];l[0]*A[0]+l[1]*A[1]+l[2]*A[2]+l[3]>=0&&y++}return y===h?2:y===0?0:1}}function Su(E,l,h){const y=E-l;return y<0?-y:Math.max(0,y-h)}function Ps(E,l,h,y,b){const A=E-h;let M;return M=A<0?Math.min(-A,1+A-b):A>1?Math.min(Math.max(A-b,0),1-A):0,Math.max(M,Su(l,y,b))}class us{constructor(){this._boundingVolumeCache=new ol(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(l,h,y,b){const A=1<<y.z,M=1/A,j=y.x/A,V=y.y/A;let K=2;return K=Math.min(K,Ps(l,h,j,V,M)),K=Math.min(K,Ps(l,h,j+.5,-V-M,M)),K=Math.min(K,Ps(l,h,j+.5,2-V-M,M)),K}getWrap(l,h,y){const b=1<<h.z,A=1/b,M=h.x/b,j=Su(l.x,M,A),V=Su(l.x,M-1,A),K=Su(l.x,M+1,A),te=Math.min(j,V,K);return te===K?1:te===V?-1:0}allowVariableZoom(l,h){return Ct(l,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(l,h,y,b){return this._boundingVolumeCache.getTileBoundingVolume(l,h,y,b)}_computeTileBoundingVolume(l,h,y,b){var A,M;let j=0,V=0;if(b?.terrain){const K=new a.a2(l.z,h,l.z,l.x,l.y),te=b.terrain.getMinMaxElevation(K);j=(A=te.minElevation)!==null&&A!==void 0?A:Math.min(0,y),V=(M=te.maxElevation)!==null&&M!==void 0?M:Math.max(0,y)}if(j/=a.bE,V/=a.bE,j+=1,V+=1,l.z<=0)return Ts.fromAabb([-V,-V,-V],[V,V,V]);if(l.z===1)return Ts.fromAabb([l.x===0?-V:0,l.y===0?0:-V,-V],[l.x===0?0:V,l.y===0?V:0,V]);{const K=[Mn(0,0,l.x,l.y,l.z),Mn(a.a5,0,l.x,l.y,l.z),Mn(a.a5,a.a5,l.x,l.y,l.z),Mn(0,a.a5,l.x,l.y,l.z)],te=[];for(const Jt of K)te.push(a.a$([],Jt,V));if(V!==j)for(const Jt of K)te.push(a.a$([],Jt,j));l.y===0&&te.push([0,1,0]),l.y===(1<<l.z)-1&&te.push([0,-1,0]);const he=[1,1,1],fe=[-1,-1,-1];for(const Jt of te)for(let rr=0;rr<3;rr++)he[rr]=Math.min(he[rr],Jt[rr]),fe[rr]=Math.max(fe[rr],Jt[rr]);const we=Mn(a.a5/2,a.a5/2,l.x,l.y,l.z),Oe=a.b4([],[0,1,0],we);a.b3(Oe,Oe);const Xe=a.b4([],we,Oe);a.b3(Xe,Xe);const Qe=a.b4([],K[2],K[1]);a.b3(Qe,Qe);const Ye=a.b4([],K[0],K[3]);a.b3(Ye,Ye),te.push(a.a$([],we,V)),l.y>=(1<<l.z)/2&&te.push(a.a$([],Mn(a.a5/2,0,l.x,l.y,l.z),V)),l.y<(1<<l.z)/2&&te.push(a.a$([],Mn(a.a5/2,a.a5,l.x,l.y,l.z),V));const at=Pl(we,te),St=Pl(Xe,te),ot=[-we[0],-we[1],-we[2],at.max],Et=[we[0],we[1],we[2],-at.min],Pt=[-Xe[0],-Xe[1],-Xe[2],St.max],vt=[Xe[0],Xe[1],Xe[2],-St.min],jt=[...Qe,0],nr=[...Ye,0],Xt=[];return l.y===0?Xt.push(a.bD(nr,jt,ot),a.bD(nr,jt,Et)):Xt.push(a.bD(Pt,jt,ot),a.bD(Pt,jt,Et),a.bD(Pt,nr,ot),a.bD(Pt,nr,Et)),l.y===(1<<l.z)-1?Xt.push(a.bD(nr,jt,ot),a.bD(nr,jt,Et)):Xt.push(a.bD(vt,jt,ot),a.bD(vt,jt,Et),a.bD(vt,nr,ot),a.bD(vt,nr,Et)),new Ts(Xt,[ot,Et,Pt,vt,jt,nr],he,fe)}}}function Pl(E,l){let h=1/0,y=-1/0;for(const b of l){const A=a.b5(E,b);h=Math.min(h,A),y=Math.max(y,A)}return{min:h,max:y}}class qs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,y){return this._helper.interpolatePadding(l,h,y)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h){this._helper.resize(l,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(l){}constructor(l){this._cachedClippingPlane=a.bF(),this._projectionMatrix=a.bj(),this._globeViewProjMatrix32f=a.bi(),this._globeViewProjMatrixNoCorrection=a.bj(),this._globeViewProjMatrixNoCorrectionInverted=a.bj(),this._globeProjMatrixInverted=a.bj(),this._cameraPosition=a.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(h,y)=>{const b=a.an(h.lat,-a.ao,a.ao),A=a.an(+y,this.minZoom+Vn(0,b),this.maxZoom);return{center:new a.V(h.lng,b),zoom:A}},this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},l),this._coveringTilesDetailsProvider=new us}clone(){const l=new qs;return l.apply(this,!1),l}apply(l,h,y){this._globeLatitudeErrorCorrectionRadians=y||0,this._helper.apply(l,h)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const l=a.bz();return l[0]=this._cameraPosition[0],l[1]=this._cameraPosition[1],l[2]=this._cameraPosition[2],l}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(l){const{overscaledTileID:h,applyGlobeMatrix:y}=l,b=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:b,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(l){const h=this.pitchInRadians,y=this.cameraToCenterDistance/l,b=Math.sin(h)*y,A=Math.cos(h)*y+1,M=1/Math.sqrt(b*b+A*A)*1;let j=-b,V=A;const K=Math.sqrt(j*j+V*V);j/=K,V/=K;const te=[0,j,V];a.bG(te,te,[0,0,0],-this.bearingInRadians),a.bH(te,te,[0,0,0],-1*this.center.lat*Math.PI/180),a.bI(te,te,[0,0,0],this.center.lng*Math.PI/180);const he=1/a.b7(te);return a.a$(te,te,he),[...te,-M*he]}isLocationOccluded(l){return!this.isSurfacePointVisible(_n(l))}transformLightDirection(l){const h=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,b=Math.cos(y),A=[Math.sin(h)*b,Math.sin(y),Math.cos(h)*b],M=[A[2],0,-A[0]],j=[0,0,0];a.b4(j,M,A),a.b3(M,M),a.b3(j,j);const V=[0,0,0];return a.b3(V,[M[0]*l[0]+j[0]*l[1]+A[0]*l[2],M[1]*l[0]+j[1]*l[1]+A[1]*l[2],M[2]*l[0]+j[2]*l[1]+A[2]*l[2]]),V}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(l,h,y){const b=(function(j,V,K){const te=1/(1<<K.z);return new a.a9(j/a.a5*te+K.x*te,V/a.a5*te+K.y*te)})(l,h,y.canonical),A=(M=b.y,[a.by(b.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(A[1])}projectTileCoordinates(l,h,y,b){const A=y.canonical,M=Mn(l,h,A.x,A.y,A.z),j=1+(b?b(l,h):0)/a.bE,V=[M[0]*j,M[1]*j,M[2]*j,1];a.aH(V,V,this._globeViewProjMatrixNoCorrection);const K=this._cachedClippingPlane,te=K[0]*M[0]+K[1]*M[1]+K[2]*M[2]+K[3]<0;return{point:new a.P(V[0]/V[3],V[1]/V[3]),signedDistanceFromCamera:V[3],isOccluded:te}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const l=Pi(this.worldSize,this.center.lat),h=a.bk(),y=a.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*l),a.be(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const b=this.centerOffset;h[8]=2*-b.x/this._helper._width,h[9]=2*b.y/this._helper._height,this._projectionMatrix=a.bf(h),this._globeProjMatrixInverted=a.bk(),a.aB(this._globeProjMatrixInverted,h),a.O(h,h,[0,0,-this.cameraToCenterDistance]),a.bg(h,h,this.rollInRadians),a.bh(h,h,-this.pitchInRadians),a.bg(h,h,this.bearingInRadians),a.O(h,h,[0,0,-l]);const A=a.bz();A[0]=l,A[1]=l,A[2]=l,a.bh(y,h,this.center.lat*Math.PI/180),a.bJ(y,y,-this.center.lng*Math.PI/180),a.Q(y,y,A),this._globeViewProjMatrixNoCorrection=y,a.bh(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bJ(h,h,-this.center.lng*Math.PI/180),a.Q(h,h,A),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=a.bk(),a.aB(this._globeViewProjMatrixNoCorrectionInverted,y);const M=a.bz();this._cameraPosition=a.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/l,a.bG(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),a.bH(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),a.bG(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),a.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bH(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),a.bI(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(l);const j=a.bf(this._globeViewProjMatrixNoCorrectionInverted);a.Q(j,j,[1,1,-1]),this._cachedFrustum=Na.fromInvProjectionMatrix(j,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(l){a.w("calculateFogMatrix is not supported on globe projection.");const h=a.bk();return a.ar(h),h}getVisibleUnwrappedCoordinates(l){return[new a.bc(0,l)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(l){l&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,h){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=_n(l);a.a$(y,y,1+h/a.bE);const b=a.bF();return a.aH(b,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),b[2]/b[3]}populateCache(l){}getBounds(){const l=.5*this.width,h=.5*this.height,y=[new a.P(0,0),new a.P(l,0),new a.P(this.width,0),new a.P(this.width,h),new a.P(this.width,this.height),new a.P(l,this.height),new a.P(0,this.height),new a.P(0,h)],b=[];for(const he of y)b.push(this.unprojectScreenPoint(he));let A=0,M=0,j=0,V=0;const K=this.center;for(const he of b){const fe=a.bK(K.lng,he.lng),we=a.bK(K.lat,he.lat);fe<M&&(M=fe),fe>A&&(A=fe),we<V&&(V=we),we>j&&(j=we)}const te=[K.lng+M,K.lat+V,K.lng+A,K.lat+j];return this.isSurfacePointOnScreen([0,1,0])&&(te[3]=90,te[0]=-180,te[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(te[1]=-90,te[0]=-180,te[2]=180),new sr(te)}calculateCenterFromCameraLngLatAlt(l,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,y,b)}setLocationAtPoint(l,h){const y=_n(this.unprojectScreenPoint(h)),b=_n(l),A=a.bz();a.bL(A);const M=a.bz();a.bI(M,y,A,-this.center.lng*Math.PI/180),a.bH(M,M,A,this.center.lat*Math.PI/180);const j=b[0]*b[0]+b[2]*b[2],V=M[0]*M[0];if(j<V)return;const K=Math.sqrt(j-V),te=-K,he=a.bM(b[0],b[2],M[0],K),fe=a.bM(b[0],b[2],M[0],te),we=a.bz();a.bI(we,b,A,-he);const Oe=a.bM(we[1],we[2],M[1],M[2]),Xe=a.bz();a.bI(Xe,b,A,-fe);const Qe=a.bM(Xe[1],Xe[2],M[1],M[2]),Ye=.5*Math.PI,at=Oe>=-Ye&&Oe<=Ye,St=Qe>=-Ye&&Qe<=Ye;let ot,Et;if(at&&St){const nr=this.center.lng*Math.PI/180,Xt=this.center.lat*Math.PI/180;a.bN(he,nr)+a.bN(Oe,Xt)<a.bN(fe,nr)+a.bN(Qe,Xt)?(ot=he,Et=Oe):(ot=fe,Et=Qe)}else if(at)ot=he,Et=Oe;else{if(!St)return;ot=fe,Et=Qe}const Pt=ot/Math.PI*180,vt=Et/Math.PI*180,jt=this.center.lat;this.setCenter(new a.V(Pt,a.an(vt,-90,90))),this.setZoom(this.zoom+Vn(jt,this.center.lat))}locationToScreenPoint(l,h){const y=_n(l);if(h){const b=h.getElevationForLngLatZoom(l,this._helper._tileZoom);a.a$(y,y,1+b/a.bE)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(l){const h=a.bF();return a.aH(h,[...l,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new a.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(l,h){if(h){const y=h.pointCoordinate(l);if(y)return y}return a.a9.fromLngLat(this.unprojectScreenPoint(l))}screenPointToLocation(l,h){var y;return(y=this.screenPointToMercatorCoordinate(l,h))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(l,h){const y=this._cameraPosition,b=this.getRayDirectionFromPixel(l);return!!this.rayPlanetIntersection(y,b)}getRayDirectionFromPixel(l){const h=a.bF();h[0]=l.x/this.width*2-1,h[1]=-1*(l.y/this.height*2-1),h[2]=1,h[3]=1,a.aH(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];const y=a.bz();y[0]=h[0]-this._cameraPosition[0],y[1]=h[1]-this._cameraPosition[1],y[2]=h[2]-this._cameraPosition[2];const b=a.bz();return a.b3(b,y),b}isSurfacePointVisible(l){const h=this._cachedClippingPlane;return h[0]*l[0]+h[1]*l[1]+h[2]*l[2]+h[3]>=0}isSurfacePointOnScreen(l){if(!this.isSurfacePointVisible(l))return!1;const h=a.bF();return a.aH(h,[...l,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(l,h){const y=a.b5(l,h),b=a.bz(),A=a.bz();a.a$(A,h,y),a.b2(b,l,A);const M=1-a.b5(b,b);if(M<0)return null;const j=a.b5(l,l)-1,V=-y+(y<0?1:-1)*Math.sqrt(M),K=j/V,te=V;return{tMin:Math.min(K,te),tMax:Math.max(K,te)}}unprojectScreenPoint(l){const h=this._cameraPosition,y=this.getRayDirectionFromPixel(l),b=this.rayPlanetIntersection(h,y);if(b){const te=a.bz();a.b0(te,h,[y[0]*b.tMin,y[1]*b.tMin,y[2]*b.tMin]);const he=a.bz();return a.b3(he,te),_a(he)}const A=this._cachedClippingPlane,M=A[0]*y[0]+A[1]*y[1]+A[2]*y[2],j=-a.bb(A,h)/M,V=a.bz();if(j>0)a.b0(V,h,[y[0]*j,y[1]*j,y[2]*j]);else{const te=a.bz();a.b0(te,h,[2*y[0],2*y[1],2*y[2]]);const he=a.bb(this._cachedClippingPlane,te);a.b2(V,te,[this._cachedClippingPlane[0]*he,this._cachedClippingPlane[1]*he,this._cachedClippingPlane[2]*he])}const K=(function(te){const he=a.bz();return he[0]=te[0]*-te[3],he[1]=te[1]*-te[3],he[2]=te[2]*-te[3],{center:he,radius:Math.sqrt(1-te[3]*te[3])}})(A);return _a((function(te,he,fe){const we=a.bz();a.b2(we,fe,te);const Oe=a.bz();return a.bA(Oe,te,we,he/a.b9(we)),Oe})(K.center,K.radius,V))}getMatrixForModel(l,h){const y=a.V.convert(l),b=1/a.bE,A=a.bj();return a.bJ(A,A,y.lng/180*Math.PI),a.bh(A,A,-y.lat/180*Math.PI),a.O(A,A,[0,0,1+h/a.bE]),a.bh(A,A,.5*Math.PI),a.Q(A,A,[b,b,b]),A}getProjectionDataForCustomLayer(l=!0){const h=this.getProjectionData({overscaledTileID:new a.a2(0,0,0,0,0),applyGlobeMatrix:l});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(l){}}class Go{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(l){this._helper.setMinZoom(l)}setMaxZoom(l){this._helper.setMaxZoom(l)}setMinPitch(l){this._helper.setMinPitch(l)}setMaxPitch(l){this._helper.setMaxPitch(l)}setRenderWorldCopies(l){this._helper.setRenderWorldCopies(l)}setBearing(l){this._helper.setBearing(l)}setPitch(l){this._helper.setPitch(l)}setRoll(l){this._helper.setRoll(l)}setFov(l){this._helper.setFov(l)}setZoom(l){this._helper.setZoom(l)}setCenter(l){this._helper.setCenter(l)}setElevation(l){this._helper.setElevation(l)}setMinElevationForCurrentTile(l){this._helper.setMinElevationForCurrentTile(l)}setPadding(l){this._helper.setPadding(l)}interpolatePadding(l,h,y){return this._helper.interpolatePadding(l,h,y)}isPaddingEqual(l){return this._helper.isPaddingEqual(l)}resize(l,h,y=!0){this._helper.resize(l,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(l){this._helper.setMaxBounds(l)}setConstrainOverride(l){this._helper.setConstrainOverride(l)}overrideNearFarZ(l,h){this._helper.overrideNearFarZ(l,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(l){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),l)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(l,h){this._globeness=l,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(l){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(h,y)=>this.currentTransform.defaultConstrain(h,y),this.applyConstrain=(h,y)=>this._helper.applyConstrain(h,y),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(h,y)=>this.defaultConstrain(h,y)},l),this._globeness=1,this._mercatorTransform=new Es,this._verticalPerspectiveTransform=new qs}clone(){const l=new Go;return l._globeness=this._globeness,l._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,l.apply(this,!1),l}apply(l,h){this._helper.apply(l,h),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(l){const h=this._mercatorTransform.getProjectionData(l),y=this._verticalPerspectiveTransform.getProjectionData(l);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:h.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:l.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(l){return this.currentTransform.isLocationOccluded(l)}transformLightDirection(l){return this.currentTransform.transformLightDirection(l)}getPixelScale(){return a.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(l,h,y){const b=this._mercatorTransform.getPitchedTextCorrection(l,h,y),A=this._verticalPerspectiveTransform.getPitchedTextCorrection(l,h,y);return a.bu(b,A,this._globeness)}projectTileCoordinates(l,h,y,b){return this.currentTransform.projectTileCoordinates(l,h,y,b)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(l){return this.currentTransform.calculateFogMatrix(l)}getVisibleUnwrappedCoordinates(l){return this.currentTransform.getVisibleUnwrappedCoordinates(l)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(l){this._mercatorTransform.recalculateZoomAndCenter(l),this._verticalPerspectiveTransform.recalculateZoomAndCenter(l)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(l,h){return this.currentTransform.lngLatToCameraDepth(l,h)}populateCache(l){this._mercatorTransform.populateCache(l),this._verticalPerspectiveTransform.populateCache(l)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(l,h,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(l,h,y,b)}setLocationAtPoint(l,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(l,h),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(l,h),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(l,h){return this.currentTransform.locationToScreenPoint(l,h)}screenPointToMercatorCoordinate(l,h){return this.currentTransform.screenPointToMercatorCoordinate(l,h)}screenPointToLocation(l,h){return this.currentTransform.screenPointToLocation(l,h)}isPointOnMapSurface(l,h){return this.currentTransform.isPointOnMapSurface(l,h)}getRayDirectionFromPixel(l){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(l)}getMatrixForModel(l,h){return this.currentTransform.getMatrixForModel(l,h)}getProjectionDataForCustomLayer(l=!0){const h=this._mercatorTransform.getProjectionDataForCustomLayer(l);if(!this.isGlobeRendering)return h;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(l);return y.fallbackMatrix=h.mainMatrix,y}getFastPathSimpleProjectionMatrix(l){return this.currentTransform.getFastPathSimpleProjectionMatrix(l)}}class ni{get useGlobeControls(){return!0}handlePanInertia(l,h){const y=Qi(l,h);return Math.abs(y.lng-h.center.lng)>180&&(y.lng=h.center.lng+179.5*Math.sign(y.lng-h.center.lng)),{easingCenter:y,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(l,h){const y=l.around,b=h.screenPointToLocation(y);l.bearingDelta&&h.setBearing(h.bearing+l.bearingDelta),l.pitchDelta&&h.setPitch(h.pitch+l.pitchDelta),l.rollDelta&&h.setRoll(h.roll+l.rollDelta);const A=h.zoom;l.zoomDelta&&h.setZoom(h.zoom+l.zoomDelta);const M=h.zoom-A;if(M===0)return;const j=a.bK(h.center.lng,b.lng),V=j/(Math.abs(j/180)+1),K=a.bK(h.center.lat,b.lat),te=h.getRayDirectionFromPixel(y),he=h.cameraPosition,fe=-1*a.b5(he,te),we=a.bz();a.b0(we,he,[te[0]*fe,te[1]*fe,te[2]*fe]);const Oe=a.b7(we)-1,Xe=Math.exp(.5*-Math.max(Oe-.3,0)),Qe=Pi(h.worldSize,h.center.lat)/Math.min(h.width,h.height),Ye=a.bx(Qe,.9,.5,1,.25),at=(1-a.aq(-M))*Math.min(Xe,Ye),St=h.center.lat,ot=h.zoom,Et=new a.V(h.center.lng+V*at,a.an(h.center.lat+K*at,-a.ao,a.ao));h.setLocationAtPoint(b,y);const Pt=h.center,vt=a.bx(Math.abs(j),45,85,0,1),jt=a.bx(Qe,.75,.35,0,1),nr=Math.pow(Math.max(vt,jt),.25),Xt=a.bK(Pt.lng,Et.lng),Jt=a.bK(Pt.lat,Et.lat);h.setCenter(new a.V(Pt.lng+Xt*nr,Pt.lat+Jt*nr).wrap()),h.setZoom(ot+Vn(St,h.center.lat))}handleMapControlsPan(l,h,y){if(!l.panDelta)return;const b=h.center.lat,A=h.zoom;h.setCenter(Qi(l.panDelta,h).wrap()),h.setZoom(A+Vn(b,h.center.lat))}cameraForBoxAndBearing(l,h,y,b,A){const M=wu(l,h,y,b,A),j=h.left/A.width*2-1,V=(A.width-h.right)/A.width*2-1,K=h.top/A.height*-2+1,te=(A.height-h.bottom)/A.height*-2+1,he=a.bK(y.getWest(),y.getEast())<0,fe=he?y.getEast():y.getWest(),we=he?y.getWest():y.getEast(),Oe=Math.max(y.getNorth(),y.getSouth()),Xe=Math.min(y.getNorth(),y.getSouth()),Qe=fe+.5*a.bK(fe,we),Ye=Oe+.5*a.bK(Oe,Xe),at=A.clone();at.setCenter(M.center),at.setBearing(M.bearing),at.setPitch(0),at.setRoll(0),at.setZoom(M.zoom);const St=at.modelViewProjectionMatrix,ot=[_n(y.getNorthWest()),_n(y.getNorthEast()),_n(y.getSouthWest()),_n(y.getSouthEast()),_n(new a.V(we,Ye)),_n(new a.V(fe,Ye)),_n(new a.V(Qe,Oe)),_n(new a.V(Qe,Xe))],Et=_n(M.center);let Pt=Number.POSITIVE_INFINITY;for(const vt of ot)j<0&&(Pt=ni.getLesserNonNegativeNonNull(Pt,ni.solveVectorScale(vt,Et,St,"x",j))),V>0&&(Pt=ni.getLesserNonNegativeNonNull(Pt,ni.solveVectorScale(vt,Et,St,"x",V))),K>0&&(Pt=ni.getLesserNonNegativeNonNull(Pt,ni.solveVectorScale(vt,Et,St,"y",K))),te<0&&(Pt=ni.getLesserNonNegativeNonNull(Pt,ni.solveVectorScale(vt,Et,St,"y",te)));if(Number.isFinite(Pt)&&Pt!==0)return M.zoom=at.zoom+a.at(Pt),M;yo()}handleJumpToCenterZoom(l,h){const y=l.center.lat,b=l.applyConstrain(h.center?a.V.convert(h.center):l.center,l.zoom).center;l.setCenter(b.wrap());const A=h.zoom!==void 0?+h.zoom:l.zoom+Vn(y,b.lat);l.zoom!==A&&l.setZoom(A)}handleEaseTo(l,h){const y=l.zoom,b=l.center,A=l.padding,M={roll:l.roll,pitch:l.pitch,bearing:l.bearing},j={roll:h.roll===void 0?l.roll:h.roll,pitch:h.pitch===void 0?l.pitch:h.pitch,bearing:h.bearing===void 0?l.bearing:h.bearing},V=h.zoom!==void 0,K=!l.isPaddingEqual(h.padding);let te=!1;const he=h.center?a.V.convert(h.center):b,fe=l.applyConstrain(he,y).center;Ss(l,fe);const we=l.clone();we.setCenter(fe),we.setZoom(V?+h.zoom:y+Vn(b.lat,he.lat)),we.setBearing(h.bearing);const Oe=new a.P(a.an(l.centerPoint.x+h.offsetAsPoint.x,0,l.width),a.an(l.centerPoint.y+h.offsetAsPoint.y,0,l.height));we.setLocationAtPoint(fe,Oe);const Xe=(h.offset&&h.offsetAsPoint.mag())>0?we.center:fe,Qe=V?+h.zoom:y+Vn(b.lat,Xe.lat),Ye=y+Vn(b.lat,0),at=Qe+Vn(Xe.lat,0),St=a.bK(b.lng,Xe.lng),ot=a.bK(b.lat,Xe.lat),Et=a.aq(at-Ye);return te=Qe!==y,{easeFunc:Pt=>{if(a.bo(M,j)||Xl({startEulerAngles:M,endEulerAngles:j,tr:l,k:Pt,useSlerp:M.roll!=j.roll}),K&&l.interpolatePadding(A,h.padding,Pt),h.around)a.w("Easing around a point is not supported under globe projection."),l.setLocationAtPoint(h.around,h.aroundPoint);else{const vt=at>Ye?Math.min(2,Et):Math.max(.5,Et),jt=Math.pow(vt,1-Pt),nr=As(b,St,ot,Pt*jt);l.setCenter(nr.wrap())}if(te){const vt=a.G.number(Ye,at,Pt)+Vn(0,l.center.lat);l.setZoom(vt)}},isZooming:te,elevationCenter:Xe}}handleFlyTo(l,h){const y=h.zoom!==void 0,b=l.center,A=l.zoom,M=l.padding,j=!l.isPaddingEqual(h.padding),V=l.applyConstrain(a.V.convert(h.center||h.locationAtOffset),A).center,K=y?+h.zoom:l.zoom+Vn(l.center.lat,V.lat),te=l.clone();te.setCenter(V),te.setZoom(K),te.setBearing(h.bearing);const he=new a.P(a.an(l.centerPoint.x+h.offsetAsPoint.x,0,l.width),a.an(l.centerPoint.y+h.offsetAsPoint.y,0,l.height));te.setLocationAtPoint(V,he);const fe=te.center;Ss(l,fe);const we=(function(ot,Et,Pt){const vt=_n(Et),jt=_n(Pt),nr=a.b5(vt,jt),Xt=Math.acos(nr),Jt=yn(ot);return Xt/(2*Math.PI)*Jt})(l,b,fe),Oe=A+Vn(b.lat,0),Xe=K+Vn(fe.lat,0),Qe=a.aq(Xe-Oe);let Ye;if(typeof h.minZoom=="number"){const ot=+h.minZoom+Vn(fe.lat,0),Et=Math.min(ot,Oe,Xe)+Vn(0,fe.lat),Pt=l.applyConstrain(fe,Et).zoom+Vn(fe.lat,0);Ye=a.aq(Pt-Oe)}const at=a.bK(b.lng,fe.lng),St=a.bK(b.lat,fe.lat);return{easeFunc:(ot,Et,Pt,vt)=>{const jt=As(b,at,St,Pt);j&&l.interpolatePadding(M,h.padding,ot);const nr=ot===1?fe:jt;l.setCenter(nr.wrap());const Xt=Oe+a.at(Et);l.setZoom(ot===1?K:Xt+Vn(0,nr.lat))},scaleOfZoom:Qe,targetCenter:fe,scaleOfMinZoom:Ye,pixelPathLength:we}}static solveVectorScale(l,h,y,b,A){const M=b==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],j=[y[3],y[7],y[11],y[15]],V=l[0]*M[0]+l[1]*M[1]+l[2]*M[2],K=l[0]*j[0]+l[1]*j[1]+l[2]*j[2],te=h[0]*M[0]+h[1]*M[1]+h[2]*M[2],he=h[0]*j[0]+h[1]*j[1]+h[2]*j[2];return te+A*K===V+A*he||j[3]*(V-te)+M[3]*(he-K)+V*he==te*K?null:(te+M[3]-A*he-A*j[3])/(te-V-A*he+A*K)}static getLesserNonNegativeNonNull(l,h){return h!==null&&h>=0&&h<l?h:l}}class vo{constructor(l){this._globe=l,this._mercatorCameraHelper=new Cs,this._verticalPerspectiveCameraHelper=new ni}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(l,h){return this.currentHelper.handlePanInertia(l,h)}handleMapControlsRollPitchBearingZoom(l,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(l,h)}handleMapControlsPan(l,h,y){this.currentHelper.handleMapControlsPan(l,h,y)}cameraForBoxAndBearing(l,h,y,b,A){return this.currentHelper.cameraForBoxAndBearing(l,h,y,b,A)}handleJumpToCenterZoom(l,h){this.currentHelper.handleJumpToCenterZoom(l,h)}handleEaseTo(l,h){return this.currentHelper.handleEaseTo(l,h)}handleFlyTo(l,h){return this.currentHelper.handleFlyTo(l,h)}}const xa=(E,l)=>a.B(E,l&&l.filter((h=>h.identifier!=="source.canvas"))),bo=a.bO();class Ho extends a.E{constructor(l,h={}){var y,b;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const j=this.tileManagers[M].getSource().type;j!=="vector"&&j!=="geojson"||this.tileManagers[M].reload()}},this.map=l,this.dispatcher=new rt(xt(),l._getMapId()),this.dispatcher.registerMessageHandler("GG",((M,j)=>this.getGlyphs(M,j))),this.dispatcher.registerMessageHandler("GI",((M,j)=>this.getImages(M,j))),this.dispatcher.registerMessageHandler("GDA",((M,j)=>this.getDashes(M,j))),this.imageManager=new H,this.imageManager.setEventedParent(this);const A=((y=l._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((b=document.documentElement)===null||b===void 0?void 0:b.lang)||void 0;this.glyphManager=new Te(l._requestManager,h.localIdeographFontFamily,A),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new tn,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",a.bP()),bt().on(Be,this._rtlPluginLoaded),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const j=this.tileManagers[M.sourceId];if(!j)return;const V=j.getSource();if(V&&V.vectorLayerIds)for(const K in this._layers){const te=this._layers[K];te.source===V.id&&this._validateLayer(te)}}))}_setInitialValues(){var l;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new a.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((l=this.crossTileSymbolIndex)===null||l===void 0?void 0:l.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(l,h){var y,b,A;this._checkLoaded();const M=h===null?(A=(b=(y=this.stylesheet.state)===null||y===void 0?void 0:y[l])===null||b===void 0?void 0:b.default)!==null&&A!==void 0?A:null:h;if(a.bR(M,this._globalState[l]))return this;this._globalState[l]=M,this._applyGlobalStateChanges([l])}getGlobalState(){return this._globalState}setGlobalState(l){this._checkLoaded();const h=[];for(const y in l)!a.bR(this._globalState[y],l[y].default)&&(h.push(y),this._globalState[y]=l[y].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(l){if(l.length===0)return;const h=new Set,y={};for(const b of l){y[b]=this._globalState[b];for(const A in this._layers){const M=this._layers[A],j=M.getLayoutAffectingGlobalStateRefs(),V=M.getPaintAffectingGlobalStateRefs(),K=M.getVisibilityAffectingGlobalStateRefs();if(j.has(b)&&h.add(M.source),V.has(b))for(const{name:te,value:he}of V.get(b))this._updatePaintProperty(M,te,he);K?.has(b)&&(M.recalculateVisibility(),this._updateLayer(M))}}this.dispatcher.broadcast("UGS",y);for(const b in this.tileManagers)h.has(b)&&(this._reloadSource(b),this._changed=!0)}loadURL(l,h={},y){this.fire(new a.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const b=this.map._requestManager.transformRequest(l,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;a.j(b,this._loadStyleRequest).then((M=>{this._loadStyleRequest=null,this._load(M.data,h,y)})).catch((M=>{this._loadStyleRequest=null,M&&!A.signal.aborted&&this.fire(new a.k(M))}))}loadJSON(l,h={},y){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(l,h,y)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(bo,{validate:!1})}_load(l,h,y){var b,A;let M=h.transformStyle?h.transformStyle(y,l):l;if(!h.validate||!xa(this,a.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const j in M.sources)this.addSource(j,M.sources[j],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new $e(this.stylesheet.light),this._setProjectionInternal(((b=this.stylesheet.projection)===null||b===void 0?void 0:b.type)||"mercator"),this.sky=new ge(this.stylesheet.sky),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var l,h,y;const b=a.bS(this.stylesheet.layers);this.setGlobalState((l=this.stylesheet.state)!==null&&l!==void 0?l:null),this.dispatcher.broadcast("SL",b),this._order=b.map((A=>A.id)),this._layers={},this._serializedLayers=null;for(const A of b){const M=a.bT(A,this._globalState);if(M.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=M,a.bU(M)&&this.tileManagers[M.source]){const j=(y=(h=A.paint)===null||h===void 0?void 0:h["raster-fade-duration"])!==null&&y!==void 0?y:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(j)}}}_loadSprite(l,h=!1,y=void 0){this.imageManager.setLoaded(!1);const b=new AbortController;let A;this._spriteRequest=b,(function(M,j,V,K){return a._(this,void 0,void 0,(function*(){const te=J(M),he=V>1?"@2x":"",fe={},we={};for(const{id:Oe,url:Xe}of te){const Qe=j.transformRequest(le(Xe,he,".json"),"SpriteJSON");fe[Oe]=a.j(Qe,K);const Ye=j.transformRequest(le(Xe,he,".png"),"SpriteImage");we[Oe]=X.getImage(Ye,K)}return yield Promise.all([...Object.values(fe),...Object.values(we)]),(function(Oe,Xe){return a._(this,void 0,void 0,(function*(){const Qe={};for(const Ye in Oe){Qe[Ye]={};const at=S.getImageCanvasContext((yield Xe[Ye]).data),St=(yield Oe[Ye]).data;for(const ot in St){const{width:Et,height:Pt,x:vt,y:jt,sdf:nr,pixelRatio:Xt,stretchX:Jt,stretchY:rr,content:Or,textFitWidth:Dr,textFitHeight:Er}=St[ot];Qe[Ye][ot]={data:null,pixelRatio:Xt,sdf:nr,stretchX:Jt,stretchY:rr,content:Or,textFitWidth:Dr,textFitHeight:Er,spriteData:{width:Et,height:Pt,x:vt,y:jt,context:at}}}}return Qe}))})(fe,we)}))})(l,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((M=>{if(this._spriteRequest=null,M)for(const j in M){this._spritesImagesIds[j]=[];const V=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter((K=>!(K in M))):[];for(const K of V)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in M[j]){const te=j==="default"?K:`${j}:${K}`;this._spritesImagesIds[j].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,M[j][K],!1):this.imageManager.addImage(te,M[j][K]),h&&(this._changedImages[te]=!0)}}})).catch((M=>{this._spriteRequest=null,A=M,b.signal.aborted||this.fire(new a.k(A))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),y&&y(A)}))}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(l){const h=this.tileManagers[l.source];if(!h)return;const y=l.sourceLayer;if(!y)return;const b=h.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.k(new Error(`Source layer "${y}" does not exist on source "${b.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.tileManagers)if(!this.tileManagers[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l,h=!1){const y=this._serializedAllLayers();if(!l||l.length===0)return Object.values(h?a.bV(y):y);const b=[];for(const A of l)if(y[A]){const M=h?a.bV(y[A]):y[A];b.push(M)}return b}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const h=Object.keys(this._layers);for(const y of h){const b=this._layers[y];b.type!=="custom"&&(l[y]=b.serialize())}return l}hasTransitions(){var l,h,y;if(!((l=this.light)===null||l===void 0)&&l.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const b in this.tileManagers)if(this.tileManagers[b].hasTransition())return!0;for(const b in this._layers)if(this._layers[b].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const h=this._changed;if(h){const b=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(b.length||A.length)&&this._updateWorkerLayers(b,A);for(const M in this._updatedSources){const j=this._updatedSources[M];if(j==="reload")this._reloadSource(M);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(l);this.light.updateTransitions(l),this.sky.updateTransitions(l),this._resetUpdates()}const y={};for(const b in this.tileManagers){const A=this.tileManagers[b];y[b]=A.used,A.used=!1}for(const b of this._order){const A=this._layers[b];A.recalculate(l,this._availableImages),!A.isHidden(l.zoom)&&A.source&&(this.tileManagers[A.source].used=!0)}for(const b in y){const A=this.tileManagers[b];!!y[b]!=!!A.used&&A.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(l),this.sky.recalculate(l),this.projection.recalculate(l),this.z=l.zoom,h&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this.tileManagers)this.tileManagers[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(l,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,h={}){var y;this._checkLoaded();const b=this.serialize();if(l=h.transformStyle?h.transformStyle(b,l):l,((y=h.validate)===null||y===void 0||y)&&xa(this,a.C(l)))return!1;(l=a.bV(l)).layers=a.bS(l.layers);const A=a.bW(b,l),M=this._getOperationsToPerform(A);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const j of M.operations)j();return this.stylesheet=l,this._serializedLayers=null,this.fire(new a.l("style.load",{style:this})),!0}_getOperationsToPerform(l){const h=[],y=[];for(const b of l)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push((()=>this.addLayer.apply(this,b.args)));break;case"removeLayer":h.push((()=>this.removeLayer.apply(this,b.args)));break;case"setPaintProperty":h.push((()=>this.setPaintProperty.apply(this,b.args)));break;case"setLayoutProperty":h.push((()=>this.setLayoutProperty.apply(this,b.args)));break;case"setFilter":h.push((()=>this.setFilter.apply(this,b.args)));break;case"addSource":h.push((()=>this.addSource.apply(this,b.args)));break;case"removeSource":h.push((()=>this.removeSource.apply(this,b.args)));break;case"setLayerZoomRange":h.push((()=>this.setLayerZoomRange.apply(this,b.args)));break;case"setLight":h.push((()=>this.setLight.apply(this,b.args)));break;case"setGeoJSONSourceData":h.push((()=>this.setGeoJSONSourceData.apply(this,b.args)));break;case"setGlyphs":h.push((()=>this.setGlyphs.apply(this,b.args)));break;case"setSprite":h.push((()=>this.setSprite.apply(this,b.args)));break;case"setTerrain":h.push((()=>this.map.setTerrain.apply(this,b.args)));break;case"setSky":h.push((()=>this.setSky.apply(this,b.args)));break;case"setProjection":this.setProjection.apply(this,b.args);break;case"setGlobalState":h.push((()=>this.setGlobalState.apply(this,b.args)));break;case"setTransition":h.push((()=>{}));break;default:y.push(b.command)}return{operations:h,unimplemented:y}}addImage(l,h){if(this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,h),this._afterImageUpdated(l)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.k(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,h,y={}){if(this._checkLoaded(),this.tileManagers[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.C.source,`sources.${l}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const b=this.tileManagers[l]=new Rr(l,h,this.dispatcher);b.style=this,b.setEventedParent(this,(()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:l}))),b.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===l)return this.fire(new a.k(new Error(`Source "${l}" cannot be removed while layer "${y}" is using it.`)));const h=this.tileManagers[l];delete this.tileManagers[l],delete this._updatedSources[l],h.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,h){if(this._checkLoaded(),this.tileManagers[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const y=this.tileManagers[l].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(h),this._changed=!0}getSource(l){return this.tileManagers[l]&&this.tileManagers[l].getSource()}addLayer(l,h,y={}){this._checkLoaded();const b=l.id;if(this.getLayer(b))return void this.fire(new a.k(new Error(`Layer "${b}" already exists on this map.`)));let A;if(l.type==="custom"){if(xa(this,a.bX(l)))return;A=a.bT(l,this._globalState)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(b,l.source),l=a.bV(l),l=a.e(l,{source:b})),this._validate(a.C.layer,`layers.${b}`,l,{arrayIndex:-1},y))return;A=a.bT(l,this._globalState),this._validateLayer(A),A.setEventedParent(this,{layer:{id:b}})}const M=h?this._order.indexOf(h):this._order.length;if(h&&M===-1)this.fire(new a.k(new Error(`Cannot add layer "${b}" before non-existing layer "${h}".`)));else{if(this._order.splice(M,0,b),this._layerOrderChanged=!0,this._layers[b]=A,this._removedLayers[b]&&A.source&&A.type!=="custom"){const j=this._removedLayers[b];delete this._removedLayers[b],j.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.tileManagers[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.k(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const y=this._order.indexOf(l);this._order.splice(y,1);const b=h?this._order.indexOf(h):this._order.length;h&&b===-1?this.fire(new a.k(new Error(`Cannot move layer "${l}" before non-existing layer "${h}".`))):(this._order.splice(b,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${l}".`)));h.setEventedParent(null);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,h,y){this._checkLoaded();const b=this.getLayer(l);b?b.minzoom===h&&b.maxzoom===y||(h!=null&&(b.minzoom=h),y!=null&&(b.maxzoom=y),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,h,y={}){this._checkLoaded();const b=this.getLayer(l);if(b){if(!a.bR(b.filter,h))return h==null?(b.setFilter(void 0),void this._updateLayer(b)):void(this._validate(a.C.filter,`layers.${b.id}.filter`,h,null,y)||(b.setFilter(a.bV(h)),this._updateLayer(b)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.bV(this.getLayer(l).filter)}setLayoutProperty(l,h,y,b={}){this._checkLoaded();const A=this.getLayer(l);A?a.bR(A.getLayoutProperty(h),y)||(A.setLayoutProperty(h,y,b),this._updateLayer(A)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,h){const y=this.getLayer(l);if(y)return y.getLayoutProperty(h);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,h,y,b={}){this._checkLoaded();const A=this.getLayer(l);A?a.bR(A.getPaintProperty(h),y)||this._updatePaintProperty(A,h,y,b):this.fire(new a.k(new Error(`Cannot style non-existing layer "${l}".`)))}_updatePaintProperty(l,h,y,b={}){l.setPaintProperty(h,y,b)&&this._updateLayer(l),a.bU(l)&&h==="raster-fade-duration"&&this.tileManagers[l.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[l.id]=!0,this._serializedLayers=null}getPaintProperty(l,h){return this.getLayer(l).getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const y=l.source,b=l.sourceLayer,A=this.tileManagers[y];if(A===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const M=A.getSource().type;M==="geojson"&&b?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||b?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),A.setFeatureState(b,l.id,h)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,h){this._checkLoaded();const y=l.source,b=this.tileManagers[y];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const A=b.getSource().type,M=A==="vector"?l.sourceLayer:void 0;A!=="vector"||M?h&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(M,l.id,h):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const h=l.source,y=l.sourceLayer,b=this.tileManagers[h];if(b!==void 0)return b.getSource().type!=="vector"||y?(l.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.getFeatureState(y,l.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.bY(this.tileManagers,(A=>A.serialize())),h=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,b=this.stylesheet;return a.bZ({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,projection:b.projection,sources:l,layers:h,terrain:y},(A=>A!==void 0))}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.tileManagers[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.tileManagers[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const h=M=>this._layers[M].type==="fill-extrusion",y={},b=[];for(let M=this._order.length-1;M>=0;M--){const j=this._order[M];if(h(j)){y[j]=M;for(const V of l){const K=V[j];if(K)for(const te of K)b.push(te)}}}b.sort(((M,j)=>j.intersectionZ-M.intersectionZ));const A=[];for(let M=this._order.length-1;M>=0;M--){const j=this._order[M];if(h(j))for(let V=b.length-1;V>=0;V--){const K=b[V].feature;if(y[K.layer.id]<M)break;A.push(K),b.pop()}else for(const V of l){const K=V[j];if(K)for(const te of K)A.push(te.feature)}}return A}queryRenderedFeatures(l,h,y){h&&h.filter&&this._validate(a.C.filter,"queryRenderedFeatures.filter",h.filter,null,h);const b={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const K of h.layers){const te=this._layers[K];if(!te)return this.fire(new a.k(new Error(`The layer '${K}' does not exist in the map's style and cannot be queried for features.`))),[];b[te.source]=!0}}const A=[];h.availableImages=this._availableImages;const M=this._serializedAllLayers(),j=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,V=Object.assign(Object.assign({},h),{layers:j,globalState:this._globalState});for(const K in this.tileManagers)h.layers&&!b[K]||A.push(Ft(this.tileManagers[K],this._layers,M,l,V,y,this.map.terrain?(te,he,fe)=>this.map.terrain.getElevation(te,he,fe):void 0));return this.placement&&A.push((function(K,te,he,fe,we,Oe,Xe){const Qe={},Ye=Oe.queryRenderedSymbols(fe),at=[];for(const St of Object.keys(Ye).map(Number))at.push(Xe[St]);at.sort(dt);for(const St of at){const ot=St.featureIndex.lookupSymbolFeatures(Ye[St.bucketInstanceId],te,St.bucketIndex,St.sourceLayerIndex,{filterSpec:we.filter,globalState:we.globalState},we.layers,we.availableImages,K);for(const Et in ot){const Pt=Qe[Et]=Qe[Et]||[],vt=ot[Et];vt.sort(((jt,nr)=>{const Xt=St.featureSortOrder;if(Xt){const Jt=Xt.indexOf(jt.featureIndex);return Xt.indexOf(nr.featureIndex)-Jt}return nr.featureIndex-jt.featureIndex}));for(const jt of vt)Pt.push(jt)}}return(function(St,ot,Et){for(const Pt in St)for(const vt of St[Pt])ke(vt,Et[ot[Pt].source]);return St})(Qe,K,he)})(this._layers,M,this.tileManagers,l,V,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(l,h){h?.filter&&this._validate(a.C.filter,"querySourceFeatures.filter",h.filter,null,h);const y=this.tileManagers[l];return y?(function(b,A){const M=b.getRenderableIds().map((K=>b.getTileByID(K))),j=[],V={};for(let K=0;K<M.length;K++){const te=M[K],he=te.tileID.canonical.key;V[he]||(V[he]=!0,te.querySourceFeatures(j,A))}return j})(y,h?Object.assign(Object.assign({},h),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const y=this.light.getLight();let b=!1;for(const M in l)if(!a.bR(l[M],y[M])){b=!0;break}if(!b)return;const A={now:O(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,h),this.light.updateTransitions(A)}getProjection(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.projection}setProjection(l){if(this._checkLoaded(),this.projection){if(this.projection.name===l.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=l,this._setProjectionInternal(l.type)}getSky(){var l;return(l=this.stylesheet)===null||l===void 0?void 0:l.sky}setSky(l,h={}){this._checkLoaded();const y=this.getSky();let b=!1;if(!l&&!y)return;if(l&&!y)b=!0;else if(!l&&y)b=!0;else for(const M in l)if(!a.bR(l[M],y[M])){b=!0;break}if(!b)return;const A={now:O(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=l,this.sky.setSky(l,h),this.sky.updateTransitions(A)}_setProjectionInternal(l){const h=(function(y,b){const A={constrainOverride:b};if(Array.isArray(y)){const M=new bn({type:y});return{projection:M,transform:new Go(A),cameraHelper:new vo(M)}}switch(y){case"mercator":return{projection:new Jn,transform:new Es(A),cameraHelper:new Cs};case"globe":{const M=new bn({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new Go(A),cameraHelper:new vo(M)}}case"vertical-perspective":return{projection:new Pr,transform:new qs(A),cameraHelper:new ni};default:return a.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new Jn,transform:new Es(A),cameraHelper:new Cs}}})(l,this.map.transformConstrain);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(const y in this.tileManagers)this.tileManagers[y].reload()}_validate(l,h,y,b,A={}){return(!A||A.validate!==!1)&&xa(this,l.call(a.C,a.e({key:h,style:this.serialize(),value:y,styleSpec:a.u},b)))}_remove(l=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),bt().off(Be,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.tileManagers){const y=this.tileManagers[h];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),l&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(l)}_clearSource(l){this.tileManagers[l].clearTiles()}_reloadSource(l){this.tileManagers[l].resume(),this.tileManagers[l].reload()}_updateSources(l){for(const h in this.tileManagers)this.tileManagers[h].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.tileManagers)this._reloadSource(l)}_updatePlacement(l,h,y,b,A=!1){let M=!1,j=!1;const V={};for(const K of this._order){const te=this._layers[K];if(te.type!=="symbol")continue;if(!V[te.source]){const fe=this.tileManagers[te.source];V[te.source]=fe.getRenderableIds(!0).map((we=>fe.getTileByID(we))).sort(((we,Oe)=>Oe.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Oe.tileID)?-1:1)))}const he=this.crossTileSymbolIndex.addLayer(te,V[te.source],l.center.lng);M=M||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O(),l.zoom))&&(this.pauseablePlacement=new Nr(l,this.map.terrain,this._order,A,h,y,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O()),j=!0),M&&this.pauseablePlacement.placement.setStale()),j||M)for(const K of this._order){const te=this._layers[K];te.type==="symbol"&&this.placement.updateLayerOpacities(te,V[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O())}_releaseSymbolFadeTiles(){for(const l in this.tileManagers)this.tileManagers[l].releaseSymbolFadeTiles()}getImages(l,h){return a._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const b=this.tileManagers[h.source];return b&&b.setDependencies(h.tileID.key,h.type,h.icons),y}))}getGlyphs(l,h){return a._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(h.stacks),b=this.tileManagers[h.source];return b&&b.setDependencies(h.tileID.key,h.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,h={}){this._checkLoaded(),l&&this._validate(a.C.glyphs,"glyphs",l,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}getDashes(l,h){return a._(this,void 0,void 0,(function*(){const y={};for(const[b,A]of Object.entries(h.dashes))y[b]=this.lineAtlas.getDash(A.dasharray,A.round);return y}))}addSprite(l,h,y={},b){this._checkLoaded();const A=[{id:l,url:h}],M=[...J(this.stylesheet.sprite),...A];this._validate(a.C.sprite,"sprite",M,null,y)||(this.stylesheet.sprite=M,this._loadSprite(A,!0,b))}removeSprite(l){this._checkLoaded();const h=J(this.stylesheet.sprite);if(h.find((y=>y.id===l))){if(this._spritesImagesIds[l])for(const y of this._spritesImagesIds[l])this.imageManager.removeImage(y),this._changedImages[y]=!0;h.splice(h.findIndex((y=>y.id===l)),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return J(this.stylesheet.sprite)}setSprite(l,h={},y){this._checkLoaded(),l&&this._validate(a.C.sprite,"sprite",l,null,h)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,y):(this._unloadSprite(),y&&y(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const l in this.tileManagers){const h=this.tileManagers[l];h.setEventedParent(null),h.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const l in this._layers){const h=this._layers[l];h.setEventedParent(null),h.onRemove&&h.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var wa=a.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Eu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,h,y,b,A,M,j,V,K){this.context=l;let te=this.boundPaintVertexBuffers.length!==b.length;for(let he=0;!te&&he<b.length;he++)this.boundPaintVertexBuffers[he]!==b[he]&&(te=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||te||this.boundIndexBuffer!==A||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==V||this.boundDynamicVertexBuffer3!==K?this.freshBind(h,y,b,A,M,j,V,K):(l.bindVertexArray.set(this.vao),j&&j.bind(),A&&A.dynamicDraw&&A.bind(),V&&V.bind(),K&&K.bind())}freshBind(l,h,y,b,A,M,j,V){const K=l.numAttributes,te=this.context,he=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=b,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=V,h.enableAttributes(he,l);for(const fe of y)fe.enableAttributes(he,l);M&&M.enableAttributes(he,l),j&&j.enableAttributes(he,l),V&&V.enableAttributes(he,l),h.bind(),h.setVertexAttribPointers(he,l,A);for(const fe of y)fe.bind(),fe.setVertexAttribPointers(he,l,A);M&&(M.bind(),M.setVertexAttribPointers(he,l,A)),b&&b.bind(),j&&(j.bind(),j.setVertexAttribPointers(he,l,A)),V&&(V.bind(),V.setVertexAttribPointers(he,l,A)),te.currentNumAttributes=K}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Il=(E,l,h,y,b)=>({u_texture:0,u_ele_delta:E,u_fog_matrix:l,u_fog_color:h?h.properties.get("fog-color"):a.bp.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:b?0:h?h.calculateFogBlendOpacity(y):0,u_horizon_color:h?h.properties.get("horizon-color"):a.bp.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:b?1:0}),cs={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ha(E){const l=[];for(let h=0;h<E.length;h++){if(E[h]===null)continue;const y=E[h].split(" ");l.push(y.pop())}return l}class Wo{constructor(l,h,y,b,A,M,j,V,K=[]){const te=l.gl;this.program=te.createProgram();const he=ha(h.staticAttributes),fe=y?y.getBinderAttributes():[],we=he.concat(fe),Oe=$r.prelude.staticUniforms?ha($r.prelude.staticUniforms):[],Xe=j.staticUniforms?ha(j.staticUniforms):[],Qe=h.staticUniforms?ha(h.staticUniforms):[],Ye=y?y.getBinderUniforms():[],at=Oe.concat(Xe).concat(Qe).concat(Ye),St=[];for(const Xt of at)St.indexOf(Xt)<0&&St.push(Xt);const ot=y?y.defines():[];Pe(te)&&ot.unshift("#version 300 es"),A&&ot.push("#define OVERDRAW_INSPECTOR;"),M&&ot.push("#define TERRAIN3D;"),V&&ot.push(V),K&&ot.push(...K);let Et=ot.concat($r.prelude.fragmentSource,j.fragmentSource,h.fragmentSource).join(`
`),Pt=ot.concat($r.prelude.vertexSource,j.vertexSource,h.vertexSource).join(`
`);Pe(te)||(Et=(function(Xt){return Xt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Et),Pt=(function(Xt){return Xt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Pt));const vt=te.createShader(te.FRAGMENT_SHADER);if(te.isContextLost())return void(this.failedToCreate=!0);if(te.shaderSource(vt,Et),te.compileShader(vt),!te.getShaderParameter(vt,te.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${te.getShaderInfoLog(vt)}`);te.attachShader(this.program,vt);const jt=te.createShader(te.VERTEX_SHADER);if(te.isContextLost())return void(this.failedToCreate=!0);if(te.shaderSource(jt,Pt),te.compileShader(jt),!te.getShaderParameter(jt,te.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${te.getShaderInfoLog(jt)}`);te.attachShader(this.program,jt),this.attributes={};const nr={};this.numAttributes=we.length;for(let Xt=0;Xt<this.numAttributes;Xt++)we[Xt]&&(te.bindAttribLocation(this.program,Xt,we[Xt]),this.attributes[we[Xt]]=Xt);if(te.linkProgram(this.program),!te.getProgramParameter(this.program,te.LINK_STATUS))throw new Error(`Program failed to link: ${te.getProgramInfoLog(this.program)}`);te.deleteShader(jt),te.deleteShader(vt);for(let Xt=0;Xt<St.length;Xt++){const Jt=St[Xt];if(Jt&&!nr[Jt]){const rr=te.getUniformLocation(this.program,Jt);rr&&(nr[Jt]=rr)}}this.fixedUniforms=b(l,nr),this.terrainUniforms=((Xt,Jt)=>({u_depth:new a.b_(Xt,Jt.u_depth),u_terrain:new a.b_(Xt,Jt.u_terrain),u_terrain_dim:new a.bq(Xt,Jt.u_terrain_dim),u_terrain_matrix:new a.c0(Xt,Jt.u_terrain_matrix),u_terrain_unpack:new a.c1(Xt,Jt.u_terrain_unpack),u_terrain_exaggeration:new a.bq(Xt,Jt.u_terrain_exaggeration)}))(l,nr),this.projectionUniforms=((Xt,Jt)=>({u_projection_matrix:new a.c0(Xt,Jt.u_projection_matrix),u_projection_tile_mercator_coords:new a.c1(Xt,Jt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.c1(Xt,Jt.u_projection_clipping_plane),u_projection_transition:new a.bq(Xt,Jt.u_projection_transition),u_projection_fallback_matrix:new a.c0(Xt,Jt.u_projection_fallback_matrix)}))(l,nr),this.binderUniforms=y?y.getUniforms(l,nr):[]}draw(l,h,y,b,A,M,j,V,K,te,he,fe,we,Oe,Xe,Qe,Ye,at,St){const ot=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(b),l.setColorMode(A),l.setCullFace(M),V){l.activeTexture.set(ot.TEXTURE2),ot.bindTexture(ot.TEXTURE_2D,V.depthTexture),l.activeTexture.set(ot.TEXTURE3),ot.bindTexture(ot.TEXTURE_2D,V.texture);for(const Pt in this.terrainUniforms)this.terrainUniforms[Pt].set(V[Pt])}if(K)for(const Pt in K)this.projectionUniforms[cs[Pt]].set(K[Pt]);if(j)for(const Pt in this.fixedUniforms)this.fixedUniforms[Pt].set(j[Pt]);Qe&&Qe.setUniforms(l,this.binderUniforms,Oe,{zoom:Xe});let Et=0;switch(h){case ot.LINES:Et=2;break;case ot.TRIANGLES:Et=3;break;case ot.LINE_STRIP:Et=1}for(const Pt of we.get()){const vt=Pt.vaos||(Pt.vaos={});(vt[te]||(vt[te]=new Eu)).bind(l,this,he,Qe?Qe.getPaintVertexBuffers():[],fe,Pt.vertexOffset,Ye,at,St),ot.drawElements(h,Pt.primitiveLength*Et,ot.UNSIGNED_SHORT,Pt.primitiveOffset*Et*2)}}}function Ku(E,l,h){const y=1/a.aN(h,1,l.transform.tileZoom),b=Math.pow(2,h.tileID.overscaledZ),A=h.tileSize*Math.pow(2,l.transform.tileZoom)/b,M=A*(h.tileID.canonical.x+h.tileID.wrap*b),j=A*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[y,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[M>>16,j>>16],u_pixel_coord_lower:[65535&M,65535&j]}}const Cu=(E,l,h,y)=>{const b=E.style.light,A=b.properties.get("position"),M=[A.x,A.y,A.z],j=a.c4();b.properties.get("anchor")==="viewport"&&a.c5(j,E.transform.bearingInRadians),a.c6(M,M,j);const V=E.transform.transformLightDirection(M),K=b.properties.get("color");return{u_lightpos:M,u_lightpos_globe:V,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+l,u_opacity:h,u_fill_translate:y}},Us=(E,l,h,y,b,A,M)=>a.e(Cu(E,l,h,y),Ku(A,E,M),{u_height_factor:-Math.pow(2,b.overscaledZ)/M.tileSize/8}),Ml=(E,l,h,y)=>a.e(Ku(l,E,h),{u_fill_translate:y}),to=(E,l)=>({u_world:E,u_fill_translate:l}),Ba=(E,l,h,y,b)=>a.e(Ml(E,l,h,b),{u_world:y}),Kl=(E,l,h,y,b)=>{const A=E.transform;let M,j,V=0;if(h.paint.get("circle-pitch-alignment")==="map"){const K=a.aN(l,1,A.zoom);M=!0,j=[K,K],V=K/(a.a5*Math.pow(2,l.tileID.overscaledZ))*2*Math.PI*b}else M=!1,j=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:j,u_globe_extrude_scale:V,u_translate:y}},da=E=>({u_pixel_extrude_scale:[1/E.width,1/E.height]}),Ol=E=>({u_viewport_size:[E.width,E.height]}),fs=(E,l=1)=>({u_color:E,u_overlay:0,u_overlay_scale:l}),Zo=(E,l,h,y)=>{const b=a.aN(E,1,l)/(a.a5*Math.pow(2,E.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:a.aN(E,1,l),u_intensity:h,u_globe_extrude_scale:b}},Sa=(E,l,h,y)=>{const b=a.N();a.c7(b,0,E.width,E.height,0,0,1);const A=E.context.gl;return{u_matrix:b,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:h,u_color_ramp:y,u_opacity:l.paint.get("heatmap-opacity")}},Rl=(E,l,h)=>{const y=h.paint.get("hillshade-accent-color");let b;switch(h.paint.get("hillshade-method")){case"basic":b=4;break;case"combined":b=1;break;case"igor":b=2;break;case"multidirectional":b=3;break;default:b=0}const A=h.getIlluminationProperties();for(let M=0;M<A.directionRadians.length;M++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(A.directionRadians[M]+=E.transform.bearingInRadians);return{u_image:0,u_latrange:Vs(0,l.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:A.altitudeRadians,u_azimuths:A.directionRadians,u_accent:y,u_method:b,u_highlights:A.highlightColor,u_shadows:A.shadowColor}},Is=(E,l)=>{const h=l.stride,y=a.N();return a.c7(y,0,a.a5,-a.a5,0,0,1),a.O(y,y,[0,-a.a5,0]),{u_matrix:y,u_image:1,u_dimension:[h,h],u_zoom:E.overscaledZ,u_unpack:l.getUnpackVector()}};function Vs(E,l){const h=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new a.a9(0,y/h).toLngLat().lat,new a.a9(0,(y+1)/h).toLngLat().lat]}const Yl=(E,l,h=0)=>({u_image:0,u_unpack:l.getUnpackVector(),u_dimension:[l.stride,l.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:E.paint.get("color-relief-opacity")}),sl=(E,l,h,y)=>{const b=E.transform;return{u_translation:qr(E,l,h),u_ratio:y/a.aN(l,1,b.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Gs=(E,l,h,y,b)=>a.e(sl(E,l,h,y),{u_image:0,u_image_height:b}),Ll=(E,l,h,y,b)=>{const A=E.transform,M=ar(l,A);return{u_translation:qr(E,l,h),u_texsize:l.imageAtlasTexture.size,u_ratio:y/a.aN(l,1,A.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[M,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},Jl=(E,l,h,y,b)=>{const A=ar(l,E.transform);return a.e(sl(E,l,h,y),{u_tileratio:A,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image:0,u_mix:b.t,u_lineatlas_width:E.lineAtlas.width,u_lineatlas_height:E.lineAtlas.height})},qt=(E,l,h,y,b,A)=>{const M=ar(l,E.transform);return a.e(sl(E,l,h,y),{u_image:0,u_image_height:A,u_tileratio:M,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image_dash:1,u_mix:b.t,u_lineatlas_width:E.lineAtlas.width,u_lineatlas_height:E.lineAtlas.height})};function ar(E,l){return 1/a.aN(E,1,l.tileZoom)}function qr(E,l,h){return a.aO(E.transform,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const sn=(E,l,h,y,b)=>{return{u_tl_parent:E,u_scale_parent:l,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(A=y.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:ci(y.paint.get("raster-hue-rotate")),u_coords_top:[b[0].x,b[0].y,b[1].x,b[1].y],u_coords_bottom:[b[3].x,b[3].y,b[2].x,b[2].y]};var A,M};function ci(E){E*=Math.PI/180;const l=Math.sin(E),h=Math.cos(E);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const gn=(E,l,h,y,b,A,M,j,V,K,te,he,fe)=>{const we=M.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:we.cameraToCenterDistance,u_pitch:we.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:we.width/we.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:j,u_coord_matrix:V,u_is_text:+te,u_pitch_with_map:+y,u_is_along_line:b,u_is_variable_anchor:A,u_texsize:he,u_texture:0,u_translation:K,u_pitched_scale:fe}},Ln=(E,l,h,y,b,A,M,j,V,K,te,he,fe,we)=>{const Oe=M.transform;return a.e(gn(E,l,h,y,b,A,M,j,V,K,te,he,we),{u_gamma_scale:y?Math.cos(Oe.pitch*Math.PI/180)*Oe.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},zn=(E,l,h,y,b,A,M,j,V,K,te,he,fe)=>a.e(Ln(E,l,h,y,b,A,M,j,V,K,!0,te,0,fe),{u_texsize_icon:he,u_texture_icon:1}),_i=(E,l)=>({u_opacity:E,u_color:l}),$i=(E,l,h,y,b)=>a.e((function(A,M,j,V){const K=j.imageManager.getPattern(A.from.toString()),te=j.imageManager.getPattern(A.to.toString()),{width:he,height:fe}=j.imageManager.getPixelSize(),we=Math.pow(2,V.tileID.overscaledZ),Oe=V.tileSize*Math.pow(2,j.transform.tileZoom)/we,Xe=Oe*(V.tileID.canonical.x+V.tileID.wrap*we),Qe=Oe*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[he,fe],u_mix:M.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/a.aN(V,1,j.transform.tileZoom),u_pixel_coord_upper:[Xe>>16,Qe>>16],u_pixel_coord_lower:[65535&Xe,65535&Qe]}})(h,b,l,y),{u_opacity:E}),ea=(E,l)=>{},Va={fillExtrusion:(E,l)=>({u_lightpos:new a.c2(E,l.u_lightpos),u_lightpos_globe:new a.c2(E,l.u_lightpos_globe),u_lightintensity:new a.bq(E,l.u_lightintensity),u_lightcolor:new a.c2(E,l.u_lightcolor),u_vertical_gradient:new a.bq(E,l.u_vertical_gradient),u_opacity:new a.bq(E,l.u_opacity),u_fill_translate:new a.c3(E,l.u_fill_translate)}),fillExtrusionPattern:(E,l)=>({u_lightpos:new a.c2(E,l.u_lightpos),u_lightpos_globe:new a.c2(E,l.u_lightpos_globe),u_lightintensity:new a.bq(E,l.u_lightintensity),u_lightcolor:new a.c2(E,l.u_lightcolor),u_vertical_gradient:new a.bq(E,l.u_vertical_gradient),u_height_factor:new a.bq(E,l.u_height_factor),u_opacity:new a.bq(E,l.u_opacity),u_fill_translate:new a.c3(E,l.u_fill_translate),u_image:new a.b_(E,l.u_image),u_texsize:new a.c3(E,l.u_texsize),u_pixel_coord_upper:new a.c3(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(E,l.u_pixel_coord_lower),u_scale:new a.c2(E,l.u_scale),u_fade:new a.bq(E,l.u_fade)}),fill:(E,l)=>({u_fill_translate:new a.c3(E,l.u_fill_translate)}),fillPattern:(E,l)=>({u_image:new a.b_(E,l.u_image),u_texsize:new a.c3(E,l.u_texsize),u_pixel_coord_upper:new a.c3(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(E,l.u_pixel_coord_lower),u_scale:new a.c2(E,l.u_scale),u_fade:new a.bq(E,l.u_fade),u_fill_translate:new a.c3(E,l.u_fill_translate)}),fillOutline:(E,l)=>({u_world:new a.c3(E,l.u_world),u_fill_translate:new a.c3(E,l.u_fill_translate)}),fillOutlinePattern:(E,l)=>({u_world:new a.c3(E,l.u_world),u_image:new a.b_(E,l.u_image),u_texsize:new a.c3(E,l.u_texsize),u_pixel_coord_upper:new a.c3(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(E,l.u_pixel_coord_lower),u_scale:new a.c2(E,l.u_scale),u_fade:new a.bq(E,l.u_fade),u_fill_translate:new a.c3(E,l.u_fill_translate)}),circle:(E,l)=>({u_camera_to_center_distance:new a.bq(E,l.u_camera_to_center_distance),u_scale_with_map:new a.b_(E,l.u_scale_with_map),u_pitch_with_map:new a.b_(E,l.u_pitch_with_map),u_extrude_scale:new a.c3(E,l.u_extrude_scale),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_globe_extrude_scale:new a.bq(E,l.u_globe_extrude_scale),u_translate:new a.c3(E,l.u_translate)}),collisionBox:(E,l)=>({u_pixel_extrude_scale:new a.c3(E,l.u_pixel_extrude_scale)}),collisionCircle:(E,l)=>({u_viewport_size:new a.c3(E,l.u_viewport_size)}),debug:(E,l)=>({u_color:new a.b$(E,l.u_color),u_overlay:new a.b_(E,l.u_overlay),u_overlay_scale:new a.bq(E,l.u_overlay_scale)}),depth:ea,clippingMask:ea,heatmap:(E,l)=>({u_extrude_scale:new a.bq(E,l.u_extrude_scale),u_intensity:new a.bq(E,l.u_intensity),u_globe_extrude_scale:new a.bq(E,l.u_globe_extrude_scale)}),heatmapTexture:(E,l)=>({u_matrix:new a.c0(E,l.u_matrix),u_world:new a.c3(E,l.u_world),u_image:new a.b_(E,l.u_image),u_color_ramp:new a.b_(E,l.u_color_ramp),u_opacity:new a.bq(E,l.u_opacity)}),hillshade:(E,l)=>({u_image:new a.b_(E,l.u_image),u_latrange:new a.c3(E,l.u_latrange),u_exaggeration:new a.bq(E,l.u_exaggeration),u_altitudes:new a.c9(E,l.u_altitudes),u_azimuths:new a.c9(E,l.u_azimuths),u_accent:new a.b$(E,l.u_accent),u_method:new a.b_(E,l.u_method),u_shadows:new a.c8(E,l.u_shadows),u_highlights:new a.c8(E,l.u_highlights)}),hillshadePrepare:(E,l)=>({u_matrix:new a.c0(E,l.u_matrix),u_image:new a.b_(E,l.u_image),u_dimension:new a.c3(E,l.u_dimension),u_zoom:new a.bq(E,l.u_zoom),u_unpack:new a.c1(E,l.u_unpack)}),colorRelief:(E,l)=>({u_image:new a.b_(E,l.u_image),u_unpack:new a.c1(E,l.u_unpack),u_dimension:new a.c3(E,l.u_dimension),u_elevation_stops:new a.b_(E,l.u_elevation_stops),u_color_stops:new a.b_(E,l.u_color_stops),u_color_ramp_size:new a.b_(E,l.u_color_ramp_size),u_opacity:new a.bq(E,l.u_opacity)}),line:(E,l)=>({u_translation:new a.c3(E,l.u_translation),u_ratio:new a.bq(E,l.u_ratio),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(E,l.u_units_to_pixels)}),lineGradient:(E,l)=>({u_translation:new a.c3(E,l.u_translation),u_ratio:new a.bq(E,l.u_ratio),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(E,l.u_units_to_pixels),u_image:new a.b_(E,l.u_image),u_image_height:new a.bq(E,l.u_image_height)}),linePattern:(E,l)=>({u_translation:new a.c3(E,l.u_translation),u_texsize:new a.c3(E,l.u_texsize),u_ratio:new a.bq(E,l.u_ratio),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_image:new a.b_(E,l.u_image),u_units_to_pixels:new a.c3(E,l.u_units_to_pixels),u_scale:new a.c2(E,l.u_scale),u_fade:new a.bq(E,l.u_fade)}),lineSDF:(E,l)=>({u_translation:new a.c3(E,l.u_translation),u_ratio:new a.bq(E,l.u_ratio),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(E,l.u_units_to_pixels),u_image:new a.b_(E,l.u_image),u_mix:new a.bq(E,l.u_mix),u_tileratio:new a.bq(E,l.u_tileratio),u_crossfade_from:new a.bq(E,l.u_crossfade_from),u_crossfade_to:new a.bq(E,l.u_crossfade_to),u_lineatlas_width:new a.bq(E,l.u_lineatlas_width),u_lineatlas_height:new a.bq(E,l.u_lineatlas_height)}),lineGradientSDF:(E,l)=>({u_translation:new a.c3(E,l.u_translation),u_ratio:new a.bq(E,l.u_ratio),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_units_to_pixels:new a.c3(E,l.u_units_to_pixels),u_image:new a.b_(E,l.u_image),u_image_height:new a.bq(E,l.u_image_height),u_tileratio:new a.bq(E,l.u_tileratio),u_crossfade_from:new a.bq(E,l.u_crossfade_from),u_crossfade_to:new a.bq(E,l.u_crossfade_to),u_image_dash:new a.b_(E,l.u_image_dash),u_mix:new a.bq(E,l.u_mix),u_lineatlas_width:new a.bq(E,l.u_lineatlas_width),u_lineatlas_height:new a.bq(E,l.u_lineatlas_height)}),raster:(E,l)=>({u_tl_parent:new a.c3(E,l.u_tl_parent),u_scale_parent:new a.bq(E,l.u_scale_parent),u_buffer_scale:new a.bq(E,l.u_buffer_scale),u_fade_t:new a.bq(E,l.u_fade_t),u_opacity:new a.bq(E,l.u_opacity),u_image0:new a.b_(E,l.u_image0),u_image1:new a.b_(E,l.u_image1),u_brightness_low:new a.bq(E,l.u_brightness_low),u_brightness_high:new a.bq(E,l.u_brightness_high),u_saturation_factor:new a.bq(E,l.u_saturation_factor),u_contrast_factor:new a.bq(E,l.u_contrast_factor),u_spin_weights:new a.c2(E,l.u_spin_weights),u_coords_top:new a.c1(E,l.u_coords_top),u_coords_bottom:new a.c1(E,l.u_coords_bottom)}),symbolIcon:(E,l)=>({u_is_size_zoom_constant:new a.b_(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(E,l.u_is_size_feature_constant),u_size_t:new a.bq(E,l.u_size_t),u_size:new a.bq(E,l.u_size),u_camera_to_center_distance:new a.bq(E,l.u_camera_to_center_distance),u_pitch:new a.bq(E,l.u_pitch),u_rotate_symbol:new a.b_(E,l.u_rotate_symbol),u_aspect_ratio:new a.bq(E,l.u_aspect_ratio),u_fade_change:new a.bq(E,l.u_fade_change),u_label_plane_matrix:new a.c0(E,l.u_label_plane_matrix),u_coord_matrix:new a.c0(E,l.u_coord_matrix),u_is_text:new a.b_(E,l.u_is_text),u_pitch_with_map:new a.b_(E,l.u_pitch_with_map),u_is_along_line:new a.b_(E,l.u_is_along_line),u_is_variable_anchor:new a.b_(E,l.u_is_variable_anchor),u_texsize:new a.c3(E,l.u_texsize),u_texture:new a.b_(E,l.u_texture),u_translation:new a.c3(E,l.u_translation),u_pitched_scale:new a.bq(E,l.u_pitched_scale)}),symbolSDF:(E,l)=>({u_is_size_zoom_constant:new a.b_(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(E,l.u_is_size_feature_constant),u_size_t:new a.bq(E,l.u_size_t),u_size:new a.bq(E,l.u_size),u_camera_to_center_distance:new a.bq(E,l.u_camera_to_center_distance),u_pitch:new a.bq(E,l.u_pitch),u_rotate_symbol:new a.b_(E,l.u_rotate_symbol),u_aspect_ratio:new a.bq(E,l.u_aspect_ratio),u_fade_change:new a.bq(E,l.u_fade_change),u_label_plane_matrix:new a.c0(E,l.u_label_plane_matrix),u_coord_matrix:new a.c0(E,l.u_coord_matrix),u_is_text:new a.b_(E,l.u_is_text),u_pitch_with_map:new a.b_(E,l.u_pitch_with_map),u_is_along_line:new a.b_(E,l.u_is_along_line),u_is_variable_anchor:new a.b_(E,l.u_is_variable_anchor),u_texsize:new a.c3(E,l.u_texsize),u_texture:new a.b_(E,l.u_texture),u_gamma_scale:new a.bq(E,l.u_gamma_scale),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_is_halo:new a.b_(E,l.u_is_halo),u_translation:new a.c3(E,l.u_translation),u_pitched_scale:new a.bq(E,l.u_pitched_scale)}),symbolTextAndIcon:(E,l)=>({u_is_size_zoom_constant:new a.b_(E,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.b_(E,l.u_is_size_feature_constant),u_size_t:new a.bq(E,l.u_size_t),u_size:new a.bq(E,l.u_size),u_camera_to_center_distance:new a.bq(E,l.u_camera_to_center_distance),u_pitch:new a.bq(E,l.u_pitch),u_rotate_symbol:new a.b_(E,l.u_rotate_symbol),u_aspect_ratio:new a.bq(E,l.u_aspect_ratio),u_fade_change:new a.bq(E,l.u_fade_change),u_label_plane_matrix:new a.c0(E,l.u_label_plane_matrix),u_coord_matrix:new a.c0(E,l.u_coord_matrix),u_is_text:new a.b_(E,l.u_is_text),u_pitch_with_map:new a.b_(E,l.u_pitch_with_map),u_is_along_line:new a.b_(E,l.u_is_along_line),u_is_variable_anchor:new a.b_(E,l.u_is_variable_anchor),u_texsize:new a.c3(E,l.u_texsize),u_texsize_icon:new a.c3(E,l.u_texsize_icon),u_texture:new a.b_(E,l.u_texture),u_texture_icon:new a.b_(E,l.u_texture_icon),u_gamma_scale:new a.bq(E,l.u_gamma_scale),u_device_pixel_ratio:new a.bq(E,l.u_device_pixel_ratio),u_is_halo:new a.b_(E,l.u_is_halo),u_translation:new a.c3(E,l.u_translation),u_pitched_scale:new a.bq(E,l.u_pitched_scale)}),background:(E,l)=>({u_opacity:new a.bq(E,l.u_opacity),u_color:new a.b$(E,l.u_color)}),backgroundPattern:(E,l)=>({u_opacity:new a.bq(E,l.u_opacity),u_image:new a.b_(E,l.u_image),u_pattern_tl_a:new a.c3(E,l.u_pattern_tl_a),u_pattern_br_a:new a.c3(E,l.u_pattern_br_a),u_pattern_tl_b:new a.c3(E,l.u_pattern_tl_b),u_pattern_br_b:new a.c3(E,l.u_pattern_br_b),u_texsize:new a.c3(E,l.u_texsize),u_mix:new a.bq(E,l.u_mix),u_pattern_size_a:new a.c3(E,l.u_pattern_size_a),u_pattern_size_b:new a.c3(E,l.u_pattern_size_b),u_scale_a:new a.bq(E,l.u_scale_a),u_scale_b:new a.bq(E,l.u_scale_b),u_pixel_coord_upper:new a.c3(E,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.c3(E,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bq(E,l.u_tile_units_to_pixels)}),terrain:(E,l)=>({u_texture:new a.b_(E,l.u_texture),u_ele_delta:new a.bq(E,l.u_ele_delta),u_fog_matrix:new a.c0(E,l.u_fog_matrix),u_fog_color:new a.b$(E,l.u_fog_color),u_fog_ground_blend:new a.bq(E,l.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bq(E,l.u_fog_ground_blend_opacity),u_horizon_color:new a.b$(E,l.u_horizon_color),u_horizon_fog_blend:new a.bq(E,l.u_horizon_fog_blend),u_is_globe_mode:new a.bq(E,l.u_is_globe_mode)}),terrainDepth:(E,l)=>({u_ele_delta:new a.bq(E,l.u_ele_delta)}),terrainCoords:(E,l)=>({u_texture:new a.b_(E,l.u_texture),u_terrain_coords_id:new a.bq(E,l.u_terrain_coords_id),u_ele_delta:new a.bq(E,l.u_ele_delta)}),projectionErrorMeasurement:(E,l)=>({u_input:new a.bq(E,l.u_input),u_output_expected:new a.bq(E,l.u_output_expected)}),atmosphere:(E,l)=>({u_sun_pos:new a.c2(E,l.u_sun_pos),u_atmosphere_blend:new a.bq(E,l.u_atmosphere_blend),u_globe_position:new a.c2(E,l.u_globe_position),u_globe_radius:new a.bq(E,l.u_globe_radius),u_inv_proj_matrix:new a.c0(E,l.u_inv_proj_matrix)}),sky:(E,l)=>({u_sky_color:new a.b$(E,l.u_sky_color),u_horizon_color:new a.b$(E,l.u_horizon_color),u_horizon:new a.c3(E,l.u_horizon),u_horizon_normal:new a.c3(E,l.u_horizon_normal),u_sky_horizon_blend:new a.bq(E,l.u_sky_horizon_blend),u_sky_blend:new a.bq(E,l.u_sky_blend)})};class hs{constructor(l,h,y){this.context=l;const b=l.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ll{constructor(l,h,y,b){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=b,this.context=l;const A=l.gl;this.buffer=A.createBuffer(),l.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let y=0;y<this.attributes.length;y++){const b=h.attributes[this.attributes[y].name];b!==void 0&&l.enableVertexAttribArray(b)}}setVertexAttribPointers(l,h,y){for(let b=0;b<this.attributes.length;b++){const A=this.attributes[b],M=h.attributes[A.name];M!==void 0&&l.vertexAttribPointer(M,A.components,l[uo[A.type]],!1,this.itemSize,A.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ii{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ql extends ii{getDefault(){return a.bp.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class ul extends ii{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Dl extends ii{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Tc extends ii{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class eu extends ii{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Yu extends ii{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class xi extends ii{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Qn extends ii{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ju extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class ds extends ii{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Qu extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class Ga extends ii{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class ps extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class Ms extends ii{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class cl extends ii{getDefault(){return a.bp.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class tu extends ii{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ru extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class ms extends ii{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class kl extends ii{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class nu extends ii{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class co extends ii{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Cn extends ii{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class fl extends ii{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Pc extends ii{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class ec extends ii{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Hs extends ii{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Uh extends ii{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Vd extends ii{getDefault(){return null}set(l){var h;if(l===this.current&&!this.dirty)return;const y=this.gl;Pe(y)?y.bindVertexArray(l):(h=y.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class Gd extends ii{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Hd extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Qf extends ii{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Au extends ii{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class Ic extends Au{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Vh extends Au{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Wd extends Au{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}const Gh="Framebuffer is not complete";class Hh{constructor(l,h,y,b,A){this.context=l,this.width=h,this.height=y;const M=l.gl,j=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Ic(l,j),b)this.depthAttachment=A?new Wd(l,j):new Vh(l,j);else if(A)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(Gh)}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class Wh{constructor(l){var h,y;if(this.gl=l,this.clearColor=new Ql(this),this.clearDepth=new ul(this),this.clearStencil=new Dl(this),this.colorMask=new Tc(this),this.depthMask=new eu(this),this.stencilMask=new Yu(this),this.stencilFunc=new xi(this),this.stencilOp=new Qn(this),this.stencilTest=new Ju(this),this.depthRange=new ds(this),this.depthTest=new Qu(this),this.depthFunc=new Ga(this),this.blend=new ps(this),this.blendFunc=new Ms(this),this.blendColor=new cl(this),this.blendEquation=new tu(this),this.cullFace=new ru(this),this.cullFaceSide=new ms(this),this.frontFace=new kl(this),this.program=new nu(this),this.activeTexture=new co(this),this.viewport=new Cn(this),this.bindFramebuffer=new fl(this),this.bindRenderbuffer=new Pc(this),this.bindTexture=new ec(this),this.bindVertexBuffer=new Hs(this),this.bindElementBuffer=new Uh(this),this.bindVertexArray=new Vd(this),this.pixelStoreUnpack=new Gd(this),this.pixelStoreUnpackPremultiplyAlpha=new Hd(this),this.pixelStoreUnpackFlipY=new Qf(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),Pe(l)){this.HALF_FLOAT=l.HALF_FLOAT;const b=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=l.RGBA16F)!==null&&h!==void 0?h:b?.RGBA16F_EXT,this.RGB16F=(y=l.RGB16F)!==null&&y!==void 0?y:b?.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const b=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=b?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new hs(this,l,h)}createVertexBuffer(l,h,y){return new ll(this,l,h,y)}createRenderbuffer(l,h,y){const b=this.gl,A=b.createRenderbuffer();return this.bindRenderbuffer.set(A),b.renderbufferStorage(b.RENDERBUFFER,l,h,y),this.bindRenderbuffer.set(null),A}createFramebuffer(l,h,y,b){return new Hh(this,l,h,y,b)}clear({color:l,depth:h,stencil:y}){const b=this.gl;let A=0;l&&(A|=b.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(A|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(A|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(A)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.bR(l.blendFunction,bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return Pe(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var h;return Pe(this.gl)?this.gl.deleteVertexArray(l):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}let tc;function Mc(E,l,h,y,b){const A=E.context,M=E.transform,j=A.gl,V=E.useProgram("collisionBox"),K=[];let te=0,he=0;for(let Ye=0;Ye<y.length;Ye++){const at=y[Ye],St=l.getTile(at).getBucket(h);if(!St)continue;const ot=b?St.textCollisionBox:St.iconCollisionBox,Et=St.collisionCircleArray;Et.length>0&&(K.push({circleArray:Et,circleOffset:he,coord:at}),te+=Et.length/4,he=te),ot&&V.draw(A,j.LINES,kn.disabled,Nn.disabled,E.colorModeForRenderPass(),Xn.disabled,da(E.transform),E.style.map.terrain&&E.style.map.terrain.getTerrainData(at),M.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,null,E.transform.zoom,null,null,ot.collisionVertexBuffer)}if(!b||!K.length)return;const fe=E.useProgram("collisionCircle"),we=new a.ca;we.resize(4*te),we._trim();let Oe=0;for(const Ye of K)for(let at=0;at<Ye.circleArray.length/4;at++){const St=4*at,ot=Ye.circleArray[St+0],Et=Ye.circleArray[St+1],Pt=Ye.circleArray[St+2],vt=Ye.circleArray[St+3];we.emplace(Oe++,ot,Et,Pt,vt,0),we.emplace(Oe++,ot,Et,Pt,vt,1),we.emplace(Oe++,ot,Et,Pt,vt,2),we.emplace(Oe++,ot,Et,Pt,vt,3)}(!tc||tc.length<2*te)&&(tc=(function(Ye){const at=2*Ye,St=new a.cc;St.resize(at),St._trim();for(let ot=0;ot<at;ot++){const Et=6*ot;St.uint16[Et+0]=4*ot+0,St.uint16[Et+1]=4*ot+1,St.uint16[Et+2]=4*ot+2,St.uint16[Et+3]=4*ot+2,St.uint16[Et+4]=4*ot+3,St.uint16[Et+5]=4*ot+0}return St})(te));const Xe=A.createIndexBuffer(tc,!0),Qe=A.createVertexBuffer(we,a.cb.members,!0);for(const Ye of K){const at=Ol(E.transform);fe.draw(A,j.TRIANGLES,kn.disabled,Nn.disabled,E.colorModeForRenderPass(),Xn.disabled,at,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ye.coord),null,h.id,Qe,Xe,a.aX.simpleSegment(0,2*Ye.circleOffset,Ye.circleArray.length,Ye.circleArray.length/2),null,E.transform.zoom,null,null,null)}Qe.destroy(),Xe.destroy()}const Zd=a.ar(new Float32Array(16));function Xd(E,l,h,y,b,A){const{horizontalAlign:M,verticalAlign:j}=a.aS(E);return new a.P((-(M-.5)*l/b+y[0])*A,(-(j-.5)*h/b+y[1])*A)}function Oc(E,l,h,y,b,A){const M=l.tileAnchorPoint.add(new a.P(l.translation[0],l.translation[1]));if(l.pitchWithMap){let j=y.mult(A);h||(j=j.rotate(-b));const V=M.add(j);return un(V.x,V.y,l.pitchedLabelPlaneMatrix,l.getElevation).point}if(h){const j=cn(l.tileAnchorPoint.x+1,l.tileAnchorPoint.y,l).point.sub(E),V=Math.atan(j.y/j.x)+(j.x<0?Math.PI:0);return E.add(y.rotate(V))}return E.add(y)}function eh(E,l,h,y,b,A,M,j,V,K,te,he){const fe=E.text.placedSymbolArray,we=E.text.dynamicLayoutVertexArray,Oe=E.icon.dynamicLayoutVertexArray,Xe={};we.clear();for(let Qe=0;Qe<fe.length;Qe++){const Ye=fe.get(Qe),at=Ye.hidden||!Ye.crossTileID||E.allowVerticalPlacement&&!Ye.placedOrientation?null:y[Ye.crossTileID];if(at){const St=new a.P(Ye.anchorX,Ye.anchorY),ot={getElevation:he,width:b.width,height:b.height,pitchedLabelPlaneMatrix:A,pitchWithMap:h,transform:b,tileAnchorPoint:St,translation:K,unwrappedTileID:te},Et=h?ia(St.x,St.y,ot):cn(St.x,St.y,ot),Pt=Wi(b.cameraToCenterDistance,Et.signedDistanceFromCamera);let vt=a.aA(E.textSizeData,j,Ye)*Pt/a.aM;h&&(vt*=E.tilePixelRatio/M);const{width:jt,height:nr,anchor:Xt,textOffset:Jt,textBoxScale:rr}=at,Or=Xd(Xt,jt,nr,Jt,rr,vt),Dr=b.getPitchedTextCorrection(St.x+K[0],St.y+K[1],te),Er=Oc(Et.point,ot,l,Or,-b.bearingInRadians,Dr),Gr=E.allowVerticalPlacement&&Ye.placedOrientation===a.az.vertical?Math.PI/2:0;for(let qn=0;qn<Ye.numGlyphs;qn++)a.aG(we,Er,Gr);V&&Ye.associatedIconIndex>=0&&(Xe[Ye.associatedIconIndex]={shiftedAnchor:Er,angle:Gr})}else xs(Ye.numGlyphs,we)}if(V){Oe.clear();const Qe=E.icon.placedSymbolArray;for(let Ye=0;Ye<Qe.length;Ye++){const at=Qe.get(Ye);if(at.hidden)xs(at.numGlyphs,Oe);else{const St=Xe[Ye];if(St)for(let ot=0;ot<at.numGlyphs;ot++)a.aG(Oe,St.shiftedAnchor,St.angle);else xs(at.numGlyphs,Oe)}}E.icon.dynamicLayoutVertexBuffer.updateData(Oe)}E.text.dynamicLayoutVertexBuffer.updateData(we)}function mm(E,l,h){return h.iconsInText&&l?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function th(E,l,h,y,b,A,M,j,V,K,te,he,fe){const we=E.context,Oe=we.gl,Xe=E.transform,Qe=j==="map",Ye=V==="map",at=j!=="viewport"&&h.layout.get("symbol-placement")!=="point",St=Qe&&!Ye&&!at,ot=!h.layout.get("symbol-sort-key").isConstant();let Et=!1;const Pt=E.getDepthModeForSublayer(0,kn.ReadOnly),vt=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),jt=[],nr=Xe.getCircleRadiusCorrection();for(const Xt of y){const Jt=l.getTile(Xt),rr=Jt.getBucket(h);if(!rr)continue;const Or=b?rr.text:rr.icon;if(!Or||!Or.segments.get().length||!Or.hasVisibleVertices)continue;const Dr=Or.programConfigurations.get(h.id),Er=b||rr.sdfIcons,Gr=b?rr.textSizeData:rr.iconSizeData,qn=Ye||Xe.pitch!==0,qi=E.useProgram(mm(Er,b,rr),Dr),Ea=a.ay(Gr,Xe.zoom),sa=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Xt);let Ra,la,Za,La,Ko=[0,0],ho=null;if(b)la=Jt.glyphAtlasTexture,Za=Oe.LINEAR,Ra=Jt.glyphAtlasTexture.size,rr.iconsInText&&(Ko=Jt.imageAtlasTexture.size,ho=Jt.imageAtlasTexture,La=qn||E.options.rotating||E.options.zooming||Gr.kind==="composite"||Gr.kind==="camera"?Oe.LINEAR:Oe.NEAREST);else{const pa=h.layout.get("icon-size").constantOr(0)!==1||rr.iconsNeedLinear;la=Jt.imageAtlasTexture,Za=Er||E.options.rotating||E.options.zooming||pa||qn?Oe.LINEAR:Oe.NEAREST,Ra=Jt.imageAtlasTexture.size}const no=a.aN(Jt,1,E.transform.zoom),vs=dn(Qe,E.transform,no),bf=a.N();a.aB(bf,vs);const kc=Bn(Ye,Qe,E.transform,no),sc=a.aO(Xe,Jt,A,M),ml=Xe.getProjectionData({overscaledTileID:Xt,applyGlobeMatrix:!fe,applyTerrainMatrix:!0}),lh=vt&&rr.hasTextData(),rp=h.layout.get("icon-text-fit")!=="none"&&lh&&rr.hasIconData();if(at){const pa=E.style.map.terrain?(Do,ko)=>E.style.map.terrain.getElevation(Xt,Do,ko):null,ua=h.layout.get("text-rotation-alignment")==="map";Ui(rr,E,b,vs,bf,Ye,K,ua,Xt.toUnwrapped(),Xe.width,Xe.height,sc,pa)}const uh=b&&vt||rp,au=at||uh?Zd:Ye?vs:E.transform.clipSpaceToPixelsMatrix,lc=Er&&h.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Mu;Mu=Er?rr.iconsInText?zn(Gr.kind,Ea,St,Ye,at,uh,E,au,kc,sc,Ra,Ko,nr):Ln(Gr.kind,Ea,St,Ye,at,uh,E,au,kc,sc,b,Ra,0,nr):gn(Gr.kind,Ea,St,Ye,at,uh,E,au,kc,sc,b,Ra,nr);const Ou={program:qi,buffers:Or,uniformValues:Mu,projectionData:ml,atlasTexture:la,atlasTextureIcon:ho,atlasInterpolation:Za,atlasInterpolationIcon:La,isSDF:Er,hasHalo:lc};if(ot&&rr.canOverlap){Et=!0;const pa=Or.segments.get();for(const ua of pa)jt.push({segments:new a.aX([ua]),sortKey:ua.sortKey,state:Ou,terrainData:sa})}else jt.push({segments:Or.segments,sortKey:0,state:Ou,terrainData:sa})}Et&&jt.sort(((Xt,Jt)=>Xt.sortKey-Jt.sortKey));for(const Xt of jt){const Jt=Xt.state;if(we.activeTexture.set(Oe.TEXTURE0),Jt.atlasTexture.bind(Jt.atlasInterpolation,Oe.CLAMP_TO_EDGE),Jt.atlasTextureIcon&&(we.activeTexture.set(Oe.TEXTURE1),Jt.atlasTextureIcon&&Jt.atlasTextureIcon.bind(Jt.atlasInterpolationIcon,Oe.CLAMP_TO_EDGE)),Jt.isSDF){const rr=Jt.uniformValues;Jt.hasHalo&&(rr.u_is_halo=1,rh(Jt.buffers,Xt.segments,h,E,Jt.program,Pt,te,he,rr,Jt.projectionData,Xt.terrainData)),rr.u_is_halo=0}rh(Jt.buffers,Xt.segments,h,E,Jt.program,Pt,te,he,Jt.uniformValues,Jt.projectionData,Xt.terrainData)}}function rh(E,l,h,y,b,A,M,j,V,K,te){const he=y.context;b.draw(he,he.gl.TRIANGLES,A,M,j,Xn.backCCW,V,te,K,h.id,E.layoutVertexBuffer,E.indexBuffer,l,h.paint,y.transform.zoom,E.programConfigurations.get(h.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function gm(E,l,h,y,b){const A=E.context,M=A.gl,j=Nn.disabled,V=new bi([M.ONE,M.ONE],a.bp.transparent,[!0,!0,!0,!0]),K=l.getBucket(h);if(!K)return;const te=y.key;let he=h.heatmapFbos.get(te);he||(he=nh(A,l.tileSize,l.tileSize),h.heatmapFbos.set(te,he)),A.bindFramebuffer.set(he.framebuffer),A.viewport.set([0,0,l.tileSize,l.tileSize]),A.clear({color:a.bp.transparent});const fe=K.programConfigurations.get(h.id),we=E.useProgram("heatmap",fe,!b),Oe=E.transform.getProjectionData({overscaledTileID:l.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Xe=E.style.map.terrain.getTerrainData(y);we.draw(A,M.TRIANGLES,kn.disabled,j,V,Xn.disabled,Zo(l,E.transform.zoom,h.paint.get("heatmap-intensity"),1),Xe,Oe,h.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,h.paint,E.transform.zoom,fe)}function ym(E,l,h,y,b){const A=E.context,M=A.gl,j=E.transform;A.setColorMode(E.colorModeForRenderPass());const V=Zh(A,l),K=h.key,te=l.heatmapFbos.get(K);if(!te)return;A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,te.colorAttachment.get()),A.activeTexture.set(M.TEXTURE1),V.bind(M.LINEAR,M.CLAMP_TO_EDGE);const he=j.getProjectionData({overscaledTileID:h,applyTerrainMatrix:b,applyGlobeMatrix:!y});E.useProgram("heatmapTexture").draw(A,M.TRIANGLES,kn.disabled,Nn.disabled,E.colorModeForRenderPass(),Xn.disabled,Sa(E,l,0,1),null,he,l.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments,l.paint,j.zoom),te.destroy(),l.heatmapFbos.delete(K)}function nh(E,l,h){var y,b;const A=E.gl,M=A.createTexture();A.bindTexture(A.TEXTURE_2D,M),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const j=(y=E.HALF_FLOAT)!==null&&y!==void 0?y:A.UNSIGNED_BYTE,V=(b=E.RGBA16F)!==null&&b!==void 0?b:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,V,l,h,0,A.RGBA,j,null);const K=E.createFramebuffer(l,h,!1,!1);return K.colorAttachment.set(M),K}function Zh(E,l){return l.colorRampTexture||(l.colorRampTexture=new a.T(E,l.colorRamp,E.gl.RGBA)),l.colorRampTexture}function Tu(E,l,h,y,b,A,M,j){let V=256;if(b.stepInterpolant){const K=l.getSource().maxzoom,te=M.canonical.z===K?Math.ceil(1<<E.transform.maxZoom-M.canonical.z):1;V=a.an(a.ce(A.maxLineLength/a.a5*1024*te),256,h.maxTextureSize)}return j.gradient=a.cf({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:V,image:j.gradient||void 0,clips:A.lineClipsArray}),j.texture?j.texture.update(j.gradient):j.texture=new a.T(h,j.gradient,y.RGBA),j.version=b.gradientVersion,j.texture}function hl(E,l,h,y,b){E.activeTexture.set(l.TEXTURE0),h.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(b)}function Fi(E,l,h,y,b,A){(b||E.lineAtlas.dirty)&&(l.activeTexture.set(h.TEXTURE0),E.lineAtlas.bind(l)),y.updatePaintBuffers(A)}function Rc(E,l,h,y,b,A,M){const j=A.gradients[b.id];let V=j.texture;b.gradientVersion!==j.version&&(V=Tu(E,l,h,y,b,A,M,j)),h.activeTexture.set(y.TEXTURE0),V.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Os(E,l,h,y,b,A,M,j,V){const K=A.gradients[b.id];let te=K.texture;b.gradientVersion!==K.version&&(te=Tu(E,l,h,y,b,A,M,K)),h.activeTexture.set(y.TEXTURE0),te.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),h.activeTexture.set(y.TEXTURE1),E.lineAtlas.bind(h),j.updatePaintBuffers(V)}function Fl(E,l,h,y,b){if(!h||!y||!y.imageAtlas)return;const A=y.imageAtlas.patternPositions;let M=A[h.to.toString()],j=A[h.from.toString()];if(!M&&j&&(M=j),!j&&M&&(j=M),!M||!j){const V=b.getPaintProperty(l);M=A[V],j=A[V]}M&&j&&E.setConstantPatternPositions(M,j)}function Xo(E,l,h,y,b,A,M,j){const V=E.context.gl,K="fill-pattern",te=h.paint.get(K),he=te&&te.constantOr(1),fe=h.getCrossfadeParameters();let we,Oe,Xe,Qe,Ye;const at=E.transform,St=h.paint.get("fill-translate"),ot=h.paint.get("fill-translate-anchor");M?(Oe=he&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=V.LINES):(Oe=he?"fillPattern":"fill",we=V.TRIANGLES);const Et=te.constantOr(null);for(const Pt of y){const vt=l.getTile(Pt);if(he&&!vt.patternsLoaded())continue;const jt=vt.getBucket(h);if(!jt)continue;const nr=jt.programConfigurations.get(h.id),Xt=E.useProgram(Oe,nr),Jt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Pt);he&&(E.context.activeTexture.set(V.TEXTURE0),vt.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),nr.updatePaintBuffers(fe)),Fl(nr,K,Et,vt,h);const rr=at.getProjectionData({overscaledTileID:Pt,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Or=a.aO(at,vt,St,ot);if(M){Qe=jt.indexBuffer2,Ye=jt.segments2;const Er=[V.drawingBufferWidth,V.drawingBufferHeight];Xe=Oe==="fillOutlinePattern"&&he?Ba(E,fe,vt,Er,Or):to(Er,Or)}else Qe=jt.indexBuffer,Ye=jt.segments,Xe=he?Ml(E,fe,vt,Or):{u_fill_translate:Or};const Dr=E.stencilModeForClipping(Pt);Xt.draw(E.context,we,b,Dr,A,Xn.backCCW,Xe,Jt,rr,h.id,jt.layoutVertexBuffer,Qe,Ye,h.paint,E.transform.zoom,nr)}}function Xh(E,l,h,y,b,A,M,j){const V=E.context,K=V.gl,te="fill-extrusion-pattern",he=h.paint.get(te),fe=he.constantOr(1),we=h.getCrossfadeParameters(),Oe=h.paint.get("fill-extrusion-opacity"),Xe=he.constantOr(null),Qe=E.transform;for(const Ye of y){const at=l.getTile(Ye),St=at.getBucket(h);if(!St)continue;const ot=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ye),Et=St.programConfigurations.get(h.id),Pt=E.useProgram(fe?"fillExtrusionPattern":"fillExtrusion",Et);fe&&(E.context.activeTexture.set(K.TEXTURE0),at.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Et.updatePaintBuffers(we));const vt=Qe.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!j,applyTerrainMatrix:!0});Fl(Et,te,Xe,at,h);const jt=a.aO(Qe,at,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),nr=h.paint.get("fill-extrusion-vertical-gradient"),Xt=fe?Us(E,nr,Oe,jt,Ye,we,at):Cu(E,nr,Oe,jt);Pt.draw(V,V.gl.TRIANGLES,b,A,M,Xn.backCCW,Xt,ot,vt,h.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,h.paint,E.transform.zoom,Et,E.style.map.terrain&&St.centroidVertexBuffer)}}function rc(E,l,h,y,b,A,M,j,V){var K;const te=E.style.projection,he=E.context,fe=E.transform,we=he.gl,Oe=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],Xe=E.useProgram("hillshade",null,!1,Oe),Qe=!E.options.moving;for(const Ye of y){const at=l.getTile(Ye),St=at.fbo;if(!St)continue;const ot=te.getMeshFromTileID(he,Ye.canonical,j,!0,"raster"),Et=(K=E.style.map.terrain)===null||K===void 0?void 0:K.getTerrainData(Ye);he.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,St.colorAttachment.get());const Pt=fe.getProjectionData({overscaledTileID:Ye,aligned:Qe,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Xe.draw(he,we.TRIANGLES,A,b[Ye.overscaledZ],M,Xn.backCCW,Rl(E,at,h),Et,Pt,h.id,ot.vertexBuffer,ot.indexBuffer,ot.segments)}}function uf(E,l,h,y,b,A,M,j,V){var K;const te=E.style.projection,he=E.context,fe=E.transform,we=he.gl,Oe=E.useProgram("colorRelief"),Xe=!E.options.moving;let Qe=!0,Ye=0;for(const at of y){const St=l.getTile(at),ot=St.dem;if(Qe){const Xt=we.getParameter(we.MAX_TEXTURE_SIZE),{elevationTexture:Jt,colorTexture:rr}=h.getColorRampTextures(he,Xt,ot.getUnpackVector());he.activeTexture.set(we.TEXTURE1),Jt.bind(we.NEAREST,we.CLAMP_TO_EDGE),he.activeTexture.set(we.TEXTURE4),rr.bind(we.LINEAR,we.CLAMP_TO_EDGE),Qe=!1,Ye=Jt.size[0]}if(!ot||!ot.data)continue;const Et=ot.stride,Pt=ot.getPixels();if(he.activeTexture.set(we.TEXTURE0),he.pixelStoreUnpackPremultiplyAlpha.set(!1),St.demTexture=St.demTexture||E.getTileTexture(Et),St.demTexture){const Xt=St.demTexture;Xt.update(Pt,{premultiply:!1}),Xt.bind(we.LINEAR,we.CLAMP_TO_EDGE)}else St.demTexture=new a.T(he,Pt,we.RGBA,{premultiply:!1}),St.demTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE);const vt=te.getMeshFromTileID(he,at.canonical,j,!0,"raster"),jt=(K=E.style.map.terrain)===null||K===void 0?void 0:K.getTerrainData(at),nr=fe.getProjectionData({overscaledTileID:at,aligned:Xe,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Oe.draw(he,we.TRIANGLES,A,b[at.overscaledZ],M,Xn.backCCW,Yl(h,St.dem,Ye),jt,nr,h.id,vt.vertexBuffer,vt.indexBuffer,vt.segments)}}const nc=[new a.P(0,0),new a.P(a.a5,0),new a.P(a.a5,a.a5),new a.P(0,a.a5)];function Lc(E,l,h,y,b,A,M,j,V=!1,K=!1){const te=y[y.length-1].overscaledZ,he=E.context,fe=he.gl,we=E.useProgram("raster"),Oe=E.transform,Xe=E.style.projection,Qe=E.colorModeForRenderPass(),Ye=!E.options.moving,at=h.paint.get("raster-opacity"),St=h.paint.get("raster-resampling"),ot=h.paint.get("raster-fade-duration"),Et=!!E.style.map.terrain;for(const Pt of y){const vt=E.getDepthModeForSublayer(Pt.overscaledZ-te,at===1?kn.ReadWrite:kn.ReadOnly,fe.LESS),jt=l.getTile(Pt),nr=St==="nearest"?fe.NEAREST:fe.LINEAR;he.activeTexture.set(fe.TEXTURE0),jt.texture.bind(nr,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),he.activeTexture.set(fe.TEXTURE1);const{parentTile:Xt,parentScaleBy:Jt,parentTopLeft:rr,fadeValues:Or}=Kd(jt,l,ot,Et);jt.fadeOpacity=Or.tileOpacity,Xt?(Xt.fadeOpacity=Or.parentTileOpacity,Xt.texture.bind(nr,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST)):jt.texture.bind(nr,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),jt.texture.useMipmap&&he.extTextureFilterAnisotropic&&E.transform.pitch>20&&fe.texParameterf(fe.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const Dr=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Pt),Er=Oe.getProjectionData({overscaledTileID:Pt,aligned:Ye,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Gr=sn(rr,Jt,Or.fadeMix,h,j),qn=Xe.getMeshFromTileID(he,Pt.canonical,A,M,"raster");we.draw(he,fe.TRIANGLES,vt,b?b[Pt.overscaledZ]:Nn.disabled,Qe,V?Xn.frontCCW:Xn.backCCW,Gr,Dr,Er,h.id,qn.vertexBuffer,qn.indexBuffer,qn.segments)}}function Kd(E,l,h,y){const b={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(h===0||y)return b;if(E.fadingParentID){const A=l.getLoadedTile(E.fadingParentID);if(!A)return b;const M=Math.pow(2,A.tileID.overscaledZ-E.tileID.overscaledZ),j=[E.tileID.canonical.x*M%1,E.tileID.canonical.y*M%1],V=(function(K,te,he){const fe=O(),we=(fe-te.timeAdded)/he,Oe=K.fadingDirection===gt.Incoming,Xe=a.an((fe-K.timeAdded)/he,0,1),Qe=a.an(1-we,0,1),Ye=Oe?Xe:Qe;return{tileOpacity:Ye,parentTileOpacity:Oe?Qe:Xe,fadeMix:{opacity:1,mix:1-Ye}}})(E,A,h);return{parentTile:A,parentScaleBy:M,parentTopLeft:j,fadeValues:V}}if(E.selfFading){const A=(function(M,j){const V=(O()-M.timeAdded)/j,K=a.an(V,0,1);return{tileOpacity:K,fadeMix:{opacity:K,mix:0}}})(E,h);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:A}}return b}const vm=new a.bp(1,0,0,1),ih=new a.bp(0,1,0,1),ah=new a.bp(0,0,1,1),cf=new a.bp(1,0,1,1),iu=new a.bp(0,1,1,1);function Yd(E,l,h,y){oh(E,0,l+h/2,E.transform.width,h,y)}function Kh(E,l,h,y){oh(E,l-h/2,0,h,E.transform.height,y)}function oh(E,l,h,y,b,A){const M=E.context,j=M.gl;j.enable(j.SCISSOR_TEST),j.scissor(l*E.pixelRatio,h*E.pixelRatio,y*E.pixelRatio,b*E.pixelRatio),M.clear({color:A}),j.disable(j.SCISSOR_TEST)}function bm(E,l,h){const y=E.context,b=y.gl,A=E.useProgram("debug"),M=kn.disabled,j=Nn.disabled,V=E.colorModeForRenderPass(),K="$debug",te=E.style.map.terrain&&E.style.map.terrain.getTerrainData(h);y.activeTexture.set(b.TEXTURE0);const he=l.getTileByID(h.key).latestRawTileData,fe=Math.floor((he&&he.byteLength||0)/1024),we=l.getTile(h).tileSize,Oe=512/Math.min(we,512)*(h.overscaledZ/E.transform.zoom)*.5;let Xe=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Xe+=` => ${h.overscaledZ}`),(function(Ye,at){Ye.initDebugOverlayCanvas();const St=Ye.debugOverlayCanvas,ot=Ye.context.gl,Et=Ye.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,St.width,St.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(at,5,5),Et.strokeText(at,5,5),Ye.debugOverlayTexture.update(St),Ye.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)})(E,`${Xe} ${fe}kB`);const Qe=E.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(y,b.TRIANGLES,M,j,bi.alphaBlended,Xn.disabled,fs(a.bp.transparent,Oe),null,Qe,K,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),A.draw(y,b.LINE_STRIP,M,j,V,Xn.disabled,fs(a.bp.red),te,Qe,K,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function Jd(E,l,h,y){const{isRenderingGlobe:b}=y,A=E.context,M=A.gl,j=E.transform,V=E.colorModeForRenderPass(),K=E.getDepthModeFor3D(),te=E.useProgram("terrain");A.bindFramebuffer.set(null),A.viewport.set([0,0,E.width,E.height]);for(const he of h){const fe=l.getTerrainMesh(he.tileID),we=E.renderToTexture.getTexture(he),Oe=l.getTerrainData(he.tileID);A.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,we.texture);const Xe=l.getMeshFrameDelta(j.zoom),Qe=j.calculateFogMatrix(he.tileID.toUnwrapped()),Ye=Il(Xe,Qe,E.style.sky,j.pitch,b),at=j.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});te.draw(A,M.TRIANGLES,K,Nn.disabled,V,Xn.backCCW,Ye,Oe,at,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}}function Qd(E,l){if(!l.mesh){const h=new a.aW;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);const y=new a.aY;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),l.mesh=new jn(E.createVertexBuffer(h,di.members),E.createIndexBuffer(y),a.aX.simpleSegment(0,0,h.length,y.length))}return l.mesh}class _m{constructor(l,h){this.context=new Wh(l),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Rr.maxOverzooming+Rr.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tn}resize(l,h,y){if(this.width=Math.floor(l*y),this.height=Math.floor(h*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const l=this.context,h=new a.aW;h.emplaceBack(0,0),h.emplaceBack(a.a5,0),h.emplaceBack(0,a.a5),h.emplaceBack(a.a5,a.a5),this.tileExtentBuffer=l.createVertexBuffer(h,di.members),this.tileExtentSegments=a.aX.simpleSegment(0,0,4,2);const y=new a.aW;y.emplaceBack(0,0),y.emplaceBack(a.a5,0),y.emplaceBack(0,a.a5),y.emplaceBack(a.a5,a.a5),this.debugBuffer=l.createVertexBuffer(y,di.members),this.debugSegments=a.aX.simpleSegment(0,0,4,5);const b=new a.ch;b.emplaceBack(0,0,0,0),b.emplaceBack(a.a5,0,a.a5,0),b.emplaceBack(0,a.a5,0,a.a5),b.emplaceBack(a.a5,a.a5,a.a5,a.a5),this.rasterBoundsBuffer=l.createVertexBuffer(b,wa.members),this.rasterBoundsSegments=a.aX.simpleSegment(0,0,4,2);const A=new a.aW;A.emplaceBack(0,0),A.emplaceBack(a.a5,0),A.emplaceBack(0,a.a5),A.emplaceBack(a.a5,a.a5),this.rasterBoundsBufferPosOnly=l.createVertexBuffer(A,di.members),this.rasterBoundsSegmentsPosOnly=a.aX.simpleSegment(0,0,4,5);const M=new a.aW;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(M,di.members),this.viewportSegments=a.aX.simpleSegment(0,0,4,2);const j=new a.ci;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(j);const V=new a.aY;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(V);const K=this.context.gl;this.stencilClearMode=new Nn({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO),this.tileExtentMesh=new jn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=a.N();a.c7(y,0,this.width,this.height,0,0,1),a.Q(y,y,[h.drawingBufferWidth,h.drawingBufferHeight,0]);const b={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(l,h.TRIANGLES,kn.disabled,this.stencilClearMode,bi.disabled,Xn.disabled,null,null,b,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,h,y){if(this.currentStencilSource===l.source||!l.isTileClipped()||!h||!h.length)return;this.currentStencilSource=l.source,this.nextStencilID+h.length>256&&this.clearStencil();const b=this.context;b.setColorMode(bi.disabled),b.setDepthMode(kn.disabled);const A={};for(const M of h)A[M.key]=this.nextStencilID++;this._renderTileMasks(A,h,y,!0),this._renderTileMasks(A,h,y,!1),this._tileClippingMaskIDs=A}_renderTileMasks(l,h,y,b){const A=this.context,M=A.gl,j=this.style.projection,V=this.transform,K=this.useProgram("clippingMask");for(const te of h){const he=l[te.key],fe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),we=j.getMeshFromTileID(this.context,te.canonical,b,!0,"stencil"),Oe=V.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!y,applyTerrainMatrix:!0});K.draw(A,M.TRIANGLES,kn.disabled,new Nn({func:M.ALWAYS,mask:0},he,255,M.KEEP,M.KEEP,M.REPLACE),bi.disabled,y?Xn.disabled:Xn.backCCW,null,fe,Oe,"$clipping",we.vertexBuffer,we.indexBuffer,we.segments)}}_renderTilesDepthBuffer(){const l=this.context,h=l.gl,y=this.style.projection,b=this.transform,A=this.useProgram("depth"),M=this.getDepthModeFor3D(),j=Wt(b,{tileSize:b.tileSize});for(const V of j){const K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),te=y.getMeshFromTileID(this.context,V.canonical,!0,!0,"raster"),he=b.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(l,h.TRIANGLES,M,Nn.disabled,bi.disabled,Xn.backCCW,null,K,he,"$clipping",te.vertexBuffer,te.indexBuffer,te.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new Nn({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){const h=this.context.gl;return new Nn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(l){const h=this.context.gl,y=l.sort(((M,j)=>j.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,A=y[0].overscaledZ-b+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const M={};for(let j=0;j<A;j++)M[j+b]=new Nn({func:h.GEQUAL,mask:255},j+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=A,[M,y]}return[{[b]:Nn.disabled},y]}stencilConfigForOverlapTwoPass(l){const h=this.context.gl,y=l.sort(((M,j)=>j.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,A=y[0].overscaledZ-b+1;if(this.clearStencil(),A>1){const M={},j={};for(let V=0;V<A;V++)M[V+b]=new Nn({func:h.GREATER,mask:255},A+1+V,255,h.KEEP,h.KEEP,h.REPLACE),j[V+b]=new Nn({func:h.GREATER,mask:255},1+V,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*A+1,[M,j,y]}return this.nextStencilID=3,[{[b]:new Nn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[b]:new Nn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new bi([l.CONSTANT_COLOR,l.ONE],new a.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?bi.unblended:bi.alphaBlended}getDepthModeForSublayer(l,h,y){if(!this.opaquePassEnabledForLayer())return kn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new kn(y||this.context.gl.LEQUAL,h,[b,b])}getDepthModeFor3D(){return new kn(this.context.gl.LEQUAL,kn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){var y,b;this.style=l,this.options=h,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(O()),this.imageManager.beginFrame();const A=this.style._order,M=this.style.tileManagers,j={},V={},K={},te={isRenderingToTexture:!1,isRenderingGlobe:((y=l.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const fe in M){const we=M[fe];we.used&&we.prepare(this.context),j[fe]=we.getVisibleCoordinates(!1),V[fe]=j[fe].slice().reverse(),K[fe]=we.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let fe=0;fe<A.length;fe++)if(this.style._layers[A[fe]].is3D()){this.opaquePassCutoff=fe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const fe of A){const we=this.style._layers[fe];if(!we.hasOffscreenPass()||we.isHidden(this.transform.zoom))continue;const Oe=V[we.source];(we.type==="custom"||Oe.length)&&this.renderLayer(this,M[we.source],we,Oe,te)}if((b=this.style.projection)===null||b===void 0||b.updateGPUdependent({context:this.context,useProgram:fe=>this.useProgram(fe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.bp.black:a.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(fe,we){const Oe=fe.context,Xe=Oe.gl,Qe=((Pt,vt,jt)=>{const nr=Math.cos(vt.rollInRadians),Xt=Math.sin(vt.rollInRadians),Jt=mn(vt),rr=vt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Pt.properties.get("sky-color"),u_horizon_color:Pt.properties.get("horizon-color"),u_horizon:[(vt.width/2-Jt*Xt)*jt,(vt.height/2+Jt*nr)*jt],u_horizon_normal:[-Xt,nr],u_sky_horizon_blend:Pt.properties.get("sky-horizon-blend")*vt.height/2*jt,u_sky_blend:rr}})(we,fe.style.map.transform,fe.pixelRatio),Ye=new kn(Xe.LEQUAL,kn.ReadWrite,[0,1]),at=Nn.disabled,St=fe.colorModeForRenderPass(),ot=fe.useProgram("sky"),Et=Qd(Oe,we);ot.draw(Oe,Xe.TRIANGLES,Ye,at,St,Xn.disabled,Qe,null,void 0,"sky",Et.vertexBuffer,Et.indexBuffer,Et.segments)})(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const fe=this.style._layers[A[this.currentLayer]],we=M[fe.source],Oe=j[fe.source];this._renderTileClippingMasks(fe,Oe,!1),this.renderLayer(this,we,fe,Oe,te)}this.renderPass="translucent";let he=!1;for(this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const fe=this.style._layers[A[this.currentLayer]],we=M[fe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(fe,te))continue;this.opaquePassEnabledForLayer()||he||(he=!0,te.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Oe=(fe.type==="symbol"?K:V)[fe.source];this._renderTileClippingMasks(fe,j[fe.source],!!this.renderToTexture),this.renderLayer(this,we,fe,Oe,te)}if(te.isRenderingGlobe&&(function(fe,we,Oe){const Xe=fe.context,Qe=Xe.gl,Ye=fe.useProgram("atmosphere"),at=new kn(Qe.LEQUAL,kn.ReadOnly,[0,1]),St=fe.transform,ot=(function(rr,Or){const Dr=rr.properties.get("position"),Er=[-Dr.x,-Dr.y,-Dr.z],Gr=a.ar(new Float64Array(16));return rr.properties.get("anchor")==="map"&&(a.bg(Gr,Gr,Or.rollInRadians),a.bh(Gr,Gr,-Or.pitchInRadians),a.bg(Gr,Gr,Or.bearingInRadians),a.bh(Gr,Gr,Or.center.lat*Math.PI/180),a.bJ(Gr,Gr,-Or.center.lng*Math.PI/180)),a.cg(Er,Er,Gr),Er})(Oe,fe.transform),Et=St.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Pt=we.properties.get("atmosphere-blend")*Et.projectionTransition;if(Pt===0)return;const vt=Pi(St.worldSize,St.center.lat),jt=St.inverseProjectionMatrix,nr=new Float64Array(4);nr[3]=1,a.aH(nr,nr,St.modelViewProjectionMatrix),nr[0]/=nr[3],nr[1]/=nr[3],nr[2]/=nr[3],nr[3]=1,a.aH(nr,nr,jt),nr[0]/=nr[3],nr[1]/=nr[3],nr[2]/=nr[3],nr[3]=1;const Xt=((rr,Or,Dr,Er,Gr)=>({u_sun_pos:rr,u_atmosphere_blend:Or,u_globe_position:Dr,u_globe_radius:Er,u_inv_proj_matrix:Gr}))(ot,Pt,[nr[0],nr[1],nr[2]],vt,jt),Jt=Qd(Xe,we);Ye.draw(Xe,Qe.TRIANGLES,at,Nn.disabled,bi.alphaBlended,Xn.disabled,Xt,null,null,"atmosphere",Jt.vertexBuffer,Jt.indexBuffer,Jt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const fe=(function(we,Oe){let Xe=null;const Qe=Object.values(we._layers).flatMap((ot=>ot.source&&!ot.isHidden(Oe)?[we.tileManagers[ot.source]]:[])),Ye=Qe.filter((ot=>ot.getSource().type==="vector")),at=Qe.filter((ot=>ot.getSource().type!=="vector")),St=ot=>{(!Xe||Xe.getSource().maxzoom<ot.getSource().maxzoom)&&(Xe=ot)};return Ye.forEach((ot=>St(ot))),Xe||at.forEach((ot=>St(ot))),Xe})(this.style,this.transform.zoom);fe&&(function(we,Oe,Xe){for(let Qe=0;Qe<Xe.length;Qe++)bm(we,Oe,Xe[Qe])})(this,fe,fe.getVisibleCoordinates())}this.options.showPadding&&(function(fe){const we=fe.transform.padding;Yd(fe,fe.transform.height-(we.top||0),3,vm),Yd(fe,we.bottom||0,3,ih),Kh(fe,we.left||0,3,ah),Kh(fe,fe.transform.width-(we.right||0),3,cf);const Oe=fe.transform.centerPoint;(function(Xe,Qe,Ye,at){oh(Xe,Qe-1,Ye-10,2,20,at),oh(Xe,Qe-10,Ye-1,20,2,at)})(fe,Oe.x,fe.transform.height-Oe.y,iu)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(l){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=l?!a.cj(h,y):!a.ck(h,y)),b||(b=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),b&&(a.cl(h,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(A,M){const j=A.context,V=j.gl,K=A.transform,te=bi.unblended,he=new kn(V.LEQUAL,kn.ReadWrite,[0,1]),fe=M.tileManager.getRenderableTiles(),we=A.useProgram("terrainDepth");j.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),j.clear({color:a.bp.transparent,depth:1});for(const Oe of fe){const Xe=M.getTerrainMesh(Oe.tileID),Qe=M.getTerrainData(Oe.tileID),Ye=K.getProjectionData({overscaledTileID:Oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),at={u_ele_delta:M.getMeshFrameDelta(K.zoom)};we.draw(j,V.TRIANGLES,he,Nn.disabled,te,Xn.backCCW,at,Qe,Ye,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain),(function(A,M){const j=A.context,V=j.gl,K=A.transform,te=bi.unblended,he=new kn(V.LEQUAL,kn.ReadWrite,[0,1]),fe=M.getCoordsTexture(),we=M.tileManager.getRenderableTiles(),Oe=A.useProgram("terrainCoords");j.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),j.clear({color:a.bp.transparent,depth:1}),M.coordsIndex=[];for(const Xe of we){const Qe=M.getTerrainMesh(Xe.tileID),Ye=M.getTerrainData(Xe.tileID);j.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,fe.texture);const at={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(K.zoom)},St=K.getProjectionData({overscaledTileID:Xe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Oe.draw(j,V.TRIANGLES,he,Nn.disabled,te,Xn.backCCW,at,Ye,St,"terrain",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments),M.coordsIndex.push(Xe.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain))}renderLayer(l,h,y,b,A){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(b||[]).length)&&(this.id=y.id,a.cm(y)?(function(M,j,V,K,te,he){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:fe}=he,we=Nn.disabled,Oe=M.colorModeForRenderPass();(V._unevaluatedLayout.hasValue("text-variable-anchor")||V._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Xe,Qe,Ye,at,St,ot,Et,Pt,vt){const jt=Qe.transform,nr=Qe.style.map.terrain,Xt=St==="map",Jt=ot==="map";for(const rr of Xe){const Or=at.getTile(rr),Dr=Or.getBucket(Ye);if(!Dr||!Dr.text||!Dr.text.segments.get().length)continue;const Er=a.ay(Dr.textSizeData,jt.zoom),Gr=a.aN(Or,1,Qe.transform.zoom),qn=dn(Xt,Qe.transform,Gr),qi=Ye.layout.get("icon-text-fit")!=="none"&&Dr.hasIconData();if(Er){const Ea=Math.pow(2,jt.zoom-Or.tileID.overscaledZ),sa=nr?(Ra,la)=>nr.getElevation(rr,Ra,la):null;eh(Dr,Xt,Jt,vt,jt,qn,Ea,Er,qi,a.aO(jt,Or,Et,Pt),rr.toUnwrapped(),sa)}}})(K,M,V,j,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),te),V.paint.get("icon-opacity").constantOr(1)!==0&&th(M,j,V,K,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),we,Oe,fe),V.paint.get("text-opacity").constantOr(1)!==0&&th(M,j,V,K,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),we,Oe,fe),j.map.showCollisionBoxes&&(Mc(M,j,V,K,!0),Mc(M,j,V,K,!1))})(l,h,y,b,this.style.placement.variableOffsets,A):a.cn(y)?(function(M,j,V,K,te){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,fe=V.paint.get("circle-opacity"),we=V.paint.get("circle-stroke-width"),Oe=V.paint.get("circle-stroke-opacity"),Xe=!V.layout.get("circle-sort-key").isConstant();if(fe.constantOr(1)===0&&(we.constantOr(1)===0||Oe.constantOr(1)===0))return;const Qe=M.context,Ye=Qe.gl,at=M.transform,St=M.getDepthModeForSublayer(0,kn.ReadOnly),ot=Nn.disabled,Et=M.colorModeForRenderPass(),Pt=[],vt=at.getCircleRadiusCorrection();for(let jt=0;jt<K.length;jt++){const nr=K[jt],Xt=j.getTile(nr),Jt=Xt.getBucket(V);if(!Jt)continue;const rr=V.paint.get("circle-translate"),Or=V.paint.get("circle-translate-anchor"),Dr=a.aO(at,Xt,rr,Or),Er=Jt.programConfigurations.get(V.id),Gr=M.useProgram("circle",Er),qn=Jt.layoutVertexBuffer,qi=Jt.indexBuffer,Ea=M.style.map.terrain&&M.style.map.terrain.getTerrainData(nr),sa={programConfiguration:Er,program:Gr,layoutVertexBuffer:qn,indexBuffer:qi,uniformValues:Kl(M,Xt,V,Dr,vt),terrainData:Ea,projectionData:at.getProjectionData({overscaledTileID:nr,applyGlobeMatrix:!he,applyTerrainMatrix:!0})};if(Xe){const Ra=Jt.segments.get();for(const la of Ra)Pt.push({segments:new a.aX([la]),sortKey:la.sortKey,state:sa})}else Pt.push({segments:Jt.segments,sortKey:0,state:sa})}Xe&&Pt.sort(((jt,nr)=>jt.sortKey-nr.sortKey));for(const jt of Pt){const{programConfiguration:nr,program:Xt,layoutVertexBuffer:Jt,indexBuffer:rr,uniformValues:Or,terrainData:Dr,projectionData:Er}=jt.state;Xt.draw(Qe,Ye.TRIANGLES,St,ot,Et,Xn.backCCW,Or,Dr,Er,V.id,Jt,rr,jt.segments,V.paint,M.transform.zoom,nr)}})(l,h,y,b,A):a.co(y)?(function(M,j,V,K,te){if(V.paint.get("heatmap-opacity")===0)return;const he=M.context,{isRenderingToTexture:fe,isRenderingGlobe:we}=te;if(M.style.map.terrain){for(const Oe of K){const Xe=j.getTile(Oe);j.hasRenderableParent(Oe)||(M.renderPass==="offscreen"?gm(M,Xe,V,Oe,we):M.renderPass==="translucent"&&ym(M,V,Oe,fe,we))}he.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?(function(Oe,Xe,Qe,Ye){const at=Oe.context,St=at.gl,ot=Oe.transform,Et=Nn.disabled,Pt=new bi([St.ONE,St.ONE],a.bp.transparent,[!0,!0,!0,!0]);(function(vt,jt,nr){const Xt=vt.gl;vt.activeTexture.set(Xt.TEXTURE1),vt.viewport.set([0,0,jt.width/4,jt.height/4]);let Jt=nr.heatmapFbos.get(a.cd);Jt?(Xt.bindTexture(Xt.TEXTURE_2D,Jt.colorAttachment.get()),vt.bindFramebuffer.set(Jt.framebuffer)):(Jt=nh(vt,jt.width/4,jt.height/4),nr.heatmapFbos.set(a.cd,Jt))})(at,Oe,Qe),at.clear({color:a.bp.transparent});for(let vt=0;vt<Ye.length;vt++){const jt=Ye[vt];if(Xe.hasRenderableParent(jt))continue;const nr=Xe.getTile(jt),Xt=nr.getBucket(Qe);if(!Xt)continue;const Jt=Xt.programConfigurations.get(Qe.id),rr=Oe.useProgram("heatmap",Jt),Or=ot.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Dr=ot.getCircleRadiusCorrection();rr.draw(at,St.TRIANGLES,kn.disabled,Et,Pt,Xn.backCCW,Zo(nr,ot.zoom,Qe.paint.get("heatmap-intensity"),Dr),null,Or,Qe.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,Qe.paint,ot.zoom,Jt)}at.viewport.set([0,0,Oe.width,Oe.height])})(M,j,V,K):M.renderPass==="translucent"&&(function(Oe,Xe){const Qe=Oe.context,Ye=Qe.gl;Qe.setColorMode(Oe.colorModeForRenderPass());const at=Xe.heatmapFbos.get(a.cd);at&&(Qe.activeTexture.set(Ye.TEXTURE0),Ye.bindTexture(Ye.TEXTURE_2D,at.colorAttachment.get()),Qe.activeTexture.set(Ye.TEXTURE1),Zh(Qe,Xe).bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Oe.useProgram("heatmapTexture").draw(Qe,Ye.TRIANGLES,kn.disabled,Nn.disabled,Oe.colorModeForRenderPass(),Xn.disabled,Sa(Oe,Xe,0,1),null,null,Xe.id,Oe.viewportBuffer,Oe.quadTriangleIndexBuffer,Oe.viewportSegments,Xe.paint,Oe.transform.zoom))})(M,V)})(l,h,y,b,A):a.cp(y)?(function(M,j,V,K,te){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,fe=V.paint.get("line-opacity"),we=V.paint.get("line-width");if(fe.constantOr(1)===0||we.constantOr(1)===0)return;const Oe=M.getDepthModeForSublayer(0,kn.ReadOnly),Xe=M.colorModeForRenderPass(),Qe=V.paint.get("line-dasharray"),Ye=Qe.constantOr(1),at=V.paint.get("line-pattern"),St=at.constantOr(1),ot=V.paint.get("line-gradient"),Et=V.getCrossfadeParameters();let Pt;Pt=St?"linePattern":Ye&&ot?"lineGradientSDF":Ye?"lineSDF":ot?"lineGradient":"line";const vt=M.context,jt=vt.gl,nr=M.transform;let Xt=!0;for(const Jt of K){const rr=j.getTile(Jt);if(St&&!rr.patternsLoaded())continue;const Or=rr.getBucket(V);if(!Or)continue;const Dr=Or.programConfigurations.get(V.id),Er=M.context.program.get(),Gr=M.useProgram(Pt,Dr),qn=Xt||Gr.program!==Er,qi=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Jt),Ea=at.constantOr(null),sa=Qe&&Qe.constantOr(null);if(Ea&&rr.imageAtlas){const Ko=rr.imageAtlas,ho=Ko.patternPositions[Ea.to.toString()],no=Ko.patternPositions[Ea.from.toString()];ho&&no&&Dr.setConstantPatternPositions(ho,no)}else if(sa){const Ko=V.layout.get("line-cap")==="round",ho=M.lineAtlas.getDash(sa.to,Ko),no=M.lineAtlas.getDash(sa.from,Ko);Dr.setConstantDashPositions(ho,no)}const Ra=nr.getProjectionData({overscaledTileID:Jt,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),la=nr.getPixelScale();let Za;St?(Za=Ll(M,rr,V,la,Et),hl(vt,jt,rr,Dr,Et)):Ye&&ot?(Za=qt(M,rr,V,la,Et,Or.lineClipsArray.length),Os(M,j,vt,jt,V,Or,Jt,Dr,Et)):Ye?(Za=Jl(M,rr,V,la,Et),Fi(M,vt,jt,Dr,qn,Et)):ot?(Za=Gs(M,rr,V,la,Or.lineClipsArray.length),Rc(M,j,vt,jt,V,Or,Jt)):Za=sl(M,rr,V,la);const La=M.stencilModeForClipping(Jt);Gr.draw(vt,jt.TRIANGLES,Oe,La,Xe,Xn.disabled,Za,qi,Ra,V.id,Or.layoutVertexBuffer,Or.indexBuffer,Or.segments,V.paint,M.transform.zoom,Dr,Or.layoutVertexBuffer2),Xt=!1}})(l,h,y,b,A):a.cq(y)?(function(M,j,V,K,te){const he=V.paint.get("fill-color"),fe=V.paint.get("fill-opacity");if(fe.constantOr(1)===0)return;const{isRenderingToTexture:we}=te,Oe=M.colorModeForRenderPass(),Xe=V.paint.get("fill-pattern"),Qe=M.opaquePassEnabledForLayer()&&!Xe.constantOr(1)&&he.constantOr(a.bp.transparent).a===1&&fe.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===Qe){const Ye=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?kn.ReadWrite:kn.ReadOnly);Xo(M,j,V,K,Ye,Oe,!1,we)}if(M.renderPass==="translucent"&&V.paint.get("fill-antialias")){const Ye=M.getDepthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,kn.ReadOnly);Xo(M,j,V,K,Ye,Oe,!0,we)}})(l,h,y,b,A):a.cr(y)?(function(M,j,V,K,te){const he=V.paint.get("fill-extrusion-opacity");if(he===0)return;const{isRenderingToTexture:fe}=te;if(M.renderPass==="translucent"){const we=new kn(M.context.gl.LEQUAL,kn.ReadWrite,M.depthRangeFor3D);if(he!==1||V.paint.get("fill-extrusion-pattern").constantOr(1))Xh(M,j,V,K,we,Nn.disabled,bi.disabled,fe),Xh(M,j,V,K,we,M.stencilModeFor3D(),M.colorModeForRenderPass(),fe);else{const Oe=M.colorModeForRenderPass();Xh(M,j,V,K,we,Nn.disabled,Oe,fe)}}})(l,h,y,b,A):a.cs(y)?(function(M,j,V,K,te){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,fe=M.context,we=M.style.projection.useSubdivision,Oe=M.getDepthModeForSublayer(0,kn.ReadOnly),Xe=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(Qe,Ye,at,St,ot,Et,Pt){const vt=Qe.context,jt=vt.gl;for(const nr of at){const Xt=Ye.getTile(nr),Jt=Xt.dem;if(!Jt||!Jt.data||!Xt.needsHillshadePrepare)continue;const rr=Jt.dim,Or=Jt.stride,Dr=Jt.getPixels();if(vt.activeTexture.set(jt.TEXTURE1),vt.pixelStoreUnpackPremultiplyAlpha.set(!1),Xt.demTexture=Xt.demTexture||Qe.getTileTexture(Or),Xt.demTexture){const Gr=Xt.demTexture;Gr.update(Dr,{premultiply:!1}),Gr.bind(jt.NEAREST,jt.CLAMP_TO_EDGE)}else Xt.demTexture=new a.T(vt,Dr,jt.RGBA,{premultiply:!1}),Xt.demTexture.bind(jt.NEAREST,jt.CLAMP_TO_EDGE);vt.activeTexture.set(jt.TEXTURE0);let Er=Xt.fbo;if(!Er){const Gr=new a.T(vt,{width:rr,height:rr,data:null},jt.RGBA);Gr.bind(jt.LINEAR,jt.CLAMP_TO_EDGE),Er=Xt.fbo=vt.createFramebuffer(rr,rr,!0,!1),Er.colorAttachment.set(Gr.texture)}vt.bindFramebuffer.set(Er.framebuffer),vt.viewport.set([0,0,rr,rr]),Qe.useProgram("hillshadePrepare").draw(vt,jt.TRIANGLES,ot,Et,Pt,Xn.disabled,Is(Xt.tileID,Jt),null,null,St.id,Qe.rasterBoundsBuffer,Qe.quadTriangleIndexBuffer,Qe.rasterBoundsSegments),Xt.needsHillshadePrepare=!1}})(M,j,K,V,Oe,Nn.disabled,Xe),fe.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(we){const[Qe,Ye,at]=M.stencilConfigForOverlapTwoPass(K);rc(M,j,V,at,Qe,Oe,Xe,!1,he),rc(M,j,V,at,Ye,Oe,Xe,!0,he)}else{const[Qe,Ye]=M.getStencilConfigForOverlapAndUpdateStencilID(K);rc(M,j,V,Ye,Qe,Oe,Xe,!1,he)}})(l,h,y,b,A):a.ct(y)?(function(M,j,V,K,te){if(M.renderPass!=="translucent"||!K.length)return;const{isRenderingToTexture:he}=te,fe=M.style.projection.useSubdivision,we=M.getDepthModeForSublayer(0,kn.ReadOnly),Oe=M.colorModeForRenderPass();if(fe){const[Xe,Qe,Ye]=M.stencilConfigForOverlapTwoPass(K);uf(M,j,V,Ye,Xe,we,Oe,!1,he),uf(M,j,V,Ye,Qe,we,Oe,!0,he)}else{const[Xe,Qe]=M.getStencilConfigForOverlapAndUpdateStencilID(K);uf(M,j,V,Qe,Xe,we,Oe,!1,he)}})(l,h,y,b,A):a.bU(y)?(function(M,j,V,K,te){if(M.renderPass!=="translucent"||V.paint.get("raster-opacity")===0||!K.length)return;const{isRenderingToTexture:he}=te,fe=j.getSource(),we=M.style.projection.useSubdivision;if(fe instanceof Vt)Lc(M,j,V,K,null,!1,!1,fe.tileCoords,fe.flippedWindingOrder,he);else if(we){const[Oe,Xe,Qe]=M.stencilConfigForOverlapTwoPass(K);Lc(M,j,V,Qe,Oe,!1,!0,nc,!1,he),Lc(M,j,V,Qe,Xe,!0,!0,nc,!1,he)}else{const[Oe,Xe]=M.getStencilConfigForOverlapAndUpdateStencilID(K);Lc(M,j,V,Xe,Oe,!1,!0,nc,!1,he)}})(l,h,y,b,A):a.cu(y)?(function(M,j,V,K,te){const he=V.paint.get("background-color"),fe=V.paint.get("background-opacity");if(fe===0)return;const{isRenderingToTexture:we}=te,Oe=M.context,Xe=Oe.gl,Qe=M.style.projection,Ye=M.transform,at=Ye.tileSize,St=V.paint.get("background-pattern");if(M.isPatternMissing(St))return;const ot=!St&&he.a===1&&fe===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==ot)return;const Et=Nn.disabled,Pt=M.getDepthModeForSublayer(0,ot==="opaque"?kn.ReadWrite:kn.ReadOnly),vt=M.colorModeForRenderPass(),jt=M.useProgram(St?"backgroundPattern":"background"),nr=K||Wt(Ye,{tileSize:at,terrain:M.style.map.terrain});St&&(Oe.activeTexture.set(Xe.TEXTURE0),M.imageManager.bind(M.context));const Xt=V.getCrossfadeParameters();for(const Jt of nr){const rr=Ye.getProjectionData({overscaledTileID:Jt,applyGlobeMatrix:!we,applyTerrainMatrix:!0}),Or=St?$i(fe,M,St,{tileID:Jt,tileSize:at},Xt):_i(fe,he),Dr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Jt),Er=Qe.getMeshFromTileID(Oe,Jt.canonical,!1,!0,"raster");jt.draw(Oe,Xe.TRIANGLES,Pt,Et,vt,Xn.backCCW,Or,Dr,rr,V.id,Er.vertexBuffer,Er.indexBuffer,Er.segments)}})(l,0,y,b,A):a.cv(y)&&(function(M,j,V,K){const{isRenderingGlobe:te}=K,he=M.context,fe=V.implementation,we=M.style.projection,Oe=M.transform,Xe=Oe.getProjectionDataForCustomLayer(te),Qe={farZ:Oe.farZ,nearZ:Oe.nearZ,fov:Oe.fov*Math.PI/180,modelViewProjectionMatrix:Oe.modelViewProjectionMatrix,projectionMatrix:Oe.projectionMatrix,shaderData:{variantName:we.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${we.shaderPreludeCode.vertexSource}`,define:we.shaderDefine},defaultProjectionData:Xe},Ye=fe.renderingMode?fe.renderingMode:"2d";if(M.renderPass==="offscreen"){const at=fe.prerender;at&&(M.setCustomLayerDefaults(),he.setColorMode(M.colorModeForRenderPass()),at.call(fe,he.gl,Qe),he.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),he.setColorMode(M.colorModeForRenderPass()),he.setStencilMode(Nn.disabled);const at=Ye==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,kn.ReadOnly);he.setDepthMode(at),fe.render(he.gl,Qe),he.setDirty(),M.setBaseState(),he.bindFramebuffer.set(null)}})(l,0,y,A))}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const h=this.imageManager.getPattern(l.from.toString()),y=this.imageManager.getPattern(l.to.toString());return!h||!y}useProgram(l,h,y=!1,b=[]){this.cache=this.cache||{};const A=!!this.style.map.terrain,M=this.style.projection,j=y?$r.projectionMercator:M.shaderPreludeCode,V=y?Ji:M.shaderDefine,K=l+(h?h.cacheKey:"")+`/${y?Lo:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(A?"/terrain":"")+(b?`/${b.join("/")}`:"");return this.cache[K]||(this.cache[K]=new Wo(this.context,$r[l],h,Va[l],this._showOverdrawInspector,A,j,V,b)),this.cache[K]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var l,h;if(this._tileTextures){for(const y in this._tileTextures){const b=this._tileTextures[y];if(b)for(const A of b)A.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((l=this.tileExtentMesh.vertexBuffer)===null||l===void 0||l.destroy()),this.tileExtentMesh&&((h=this.tileExtentMesh.indexBuffer)===null||h===void 0||h.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const y in this.cache){const b=this.cache[y];b&&b.program&&this.context.gl.deleteProgram(b.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:h}=this.context.gl;return this.width!==l||this.height!==h}}function ep(E,l){let h,y=!1,b=null,A=null;const M=()=>{b=null,y&&(E.apply(A,h),b=setTimeout(M,l),y=!1)};return(...j)=>(y=!0,A=this,h=j,b||M(),b)}class Yh{constructor(l){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let y;return h.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(y=b)})),(y&&y[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(!this._isValidHash(h))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const y=h.join("/");let b=y;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${y}`);let A=window.location.hash.replace(b,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let M=window.location.href.replace(/(#.+)?$/,A);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=ep(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(l){const h=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,b=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,b),M=Math.round(h.lng*A)/A,j=Math.round(h.lat*A)/A,V=this._map.getBearing(),K=this._map.getPitch();let te="";if(te+=l?`/${M}/${j}/${y}`:`${y}/${j}/${M}`,(V||K)&&(te+="/"+Math.round(10*V)/10),K&&(te+=`/${Math.round(K)}`),this._hashName){const he=this._hashName;let fe=!1;const we=window.location.hash.slice(1).split("&").map((Oe=>{const Xe=Oe.split("=")[0];return Xe===he?(fe=!0,`${Xe}=${te}`):Oe})).filter((Oe=>Oe));return fe||we.push(`${he}=${te}`),`#${we.join("&")}`}return`#${te}`}_isValidHash(l){if(l.length<3||l.some(isNaN))return!1;try{new a.V(+l[2],+l[1])}catch{return!1}const h=+l[0],y=+(l[3]||0),b=+(l[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&y>=-180&&y<=180&&b>=this._map.getMinPitch()&&b<=this._map.getMaxPitch()}}const Nl={linearity:.3,easing:a.cw(0,0,.3,1)},xm=a.e({deceleration:2500,maxSpeed:1400},Nl),dl=a.e({deceleration:20,maxSpeed:1400},Nl),pl=a.e({deceleration:1e3,maxSpeed:360},Nl),D=a.e({deceleration:1e3,maxSpeed:90},Nl),q=a.e({deceleration:1e3,maxSpeed:360},Nl);class re{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=O();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)h.zoom+=A.zoomDelta||0,h.bearing+=A.bearingDelta||0,h.pitch+=A.pitchDelta||0,h.roll+=A.rollDelta||0,A.panDelta&&h.pan._add(A.panDelta),A.around&&(h.around=A.around),A.pinchAround&&(h.pinchAround=A.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(h.pan.mag()){const A=Me(h.pan.mag(),y,a.e({},xm,l||{})),M=h.pan.mult(A.amount/h.pan.mag()),j=this._map.cameraHelper.handlePanInertia(M,this._map.transform);b.center=j.easingCenter,b.offset=j.easingOffset,de(b,A)}if(h.zoom){const A=Me(h.zoom,y,dl);b.zoom=this._map.transform.zoom+A.amount,de(b,A)}if(h.bearing){const A=Me(h.bearing,y,pl);b.bearing=this._map.transform.bearing+a.an(A.amount,-179,179),de(b,A)}if(h.pitch){const A=Me(h.pitch,y,D);b.pitch=this._map.transform.pitch+A.amount,de(b,A)}if(h.roll){const A=Me(h.roll,y,q);b.roll=this._map.transform.roll+a.an(A.amount,-179,179),de(b,A)}if(b.zoom||b.bearing){const A=h.pinchAround===void 0?h.around:h.pinchAround;b.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),a.e(b,{noMoveStart:!0})}}function de(E,l){(!E.duration||E.duration<l.duration)&&(E.duration=l.duration,E.easing=l.easing)}function Me(E,l,h){const{maxSpeed:y,linearity:b,deceleration:A}=h,M=a.an(E*b/(l/1e3),-y,y),j=Math.abs(M)/(A*b);return{easing:h.easing,duration:1e3*j,amount:M*(j/2)}}class Re extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y,b={}){y=y instanceof MouseEvent?y:new MouseEvent(l,y);const A=P.mousePos(h.getCanvas(),y),M=h.unproject(A);super(l,a.e({point:A,lngLat:M,originalEvent:y},b)),this._defaultPrevented=!1,this.target=h}}class ze extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){const b=l==="touchend"?y.changedTouches:y.touches,A=P.touchPos(h.getCanvasContainer(),b),M=A.map((V=>h.unproject(V))),j=A.reduce(((V,K,te,he)=>V.add(K.div(he.length))),new a.P(0,0));super(l,{points:A,point:j,lngLats:M,lngLat:h.unproject(j),originalEvent:y}),this._defaultPrevented=!1}}class He extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class et{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new He(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new Re(l.type,this._map,l))}mouseup(l){this._map.fire(new Re(l.type,this._map,l))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Re(l.type,this._map,l))}dblclick(l){return this._firePreventable(new Re(l.type,this._map,l))}mouseover(l){this._map.fire(new Re(l.type,this._map,l))}mouseout(l){this._map.fire(new Re(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ze(l.type,this._map,l))}touchmove(l){this._map.fire(new ze(l.type,this._map,l))}touchend(l){this._map.fire(new ze(l.type,this._map,l))}touchcancel(l){this._map.fire(new ze(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ft{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new Re(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Re("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new Re(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bt{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.screenPointToLocation(a.P.convert(l),this._map.terrain)}}class er{constructor(l,h){this._map=l,this._tr=new Bt(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(P.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const y=h;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=y,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const A=Math.min(b.x,y.x),M=Math.max(b.x,y.x),j=Math.min(b.y,y.y),V=Math.max(b.y,y.y);P.setTransform(this._box,`translate(${A}px,${j}px)`),this._box.style.width=M-A+"px",this._box.style.height=V-j+"px"}mouseupWindow(l,h){if(!this._active||l.button!==0)return;const y=this._startPos,b=h;if(this.reset(),P.suppressClick(),y.x!==b.x||y.y!==b.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:l})),{cameraAnimation:A=>A.fitScreenCoordinates(y,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new a.l(l,{originalEvent:h}))}}function st(E,l){if(E.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${l.length}`);const h={};for(let y=0;y<E.length;y++)h[E[y].identifier]=l[y];return h}class pt{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=(function(b){const A=new a.P(0,0);for(const M of b)A._add(M);return A.div(b.length)})(h),this.touches=st(y,h)))}touchmove(l,h,y){if(this.aborted||!this.centroid)return;const b=st(y,h);for(const A in this.touches){const M=b[A];(!M||M.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(l,h,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Ht{constructor(l){this.singleTap=new pt(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,h,y){this.singleTap.touchstart(l,h,y)}touchmove(l,h,y){this.singleTap.touchmove(l,h,y)}touchend(l,h,y){const b=this.singleTap.touchend(l,h,y);if(b){const A=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(b)<30;if(A&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class yr{constructor(l){this._tr=new Bt(l),this._zoomIn=new Ht({numTouches:1,numTaps:2}),this._zoomOut=new Ht({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,y){this._zoomIn.touchstart(l,h,y),this._zoomOut.touchstart(l,h,y)}touchmove(l,h,y){this._zoomIn.touchmove(l,h,y),this._zoomOut.touchmove(l,h,y)}touchend(l,h,y){const b=this._zoomIn.touchend(l,h,y),A=this._zoomOut.touchend(l,h,y),M=this._tr;return b?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(b)},{originalEvent:l})}):A?(this._active=!0,l.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(A)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yt{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const h=this._moveFunction(...l);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(l,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,h){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const b=Array.isArray(h)?h[0]:h;return!this._moved&&b.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(y,b))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&P.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const vr=0,_r=2,Lr={[vr]:1,[_r]:2};class Ir{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const h=P.mouseButton(l);this._eventButton=h}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!(function(h,y){const b=Lr[y];return h.buttons===void 0||(h.buttons&b)!==b})(l,this._eventButton)}isValidEndEvent(l){return P.mouseButton(l)===this._eventButton}}class Sn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}class pn{constructor(l=new Ir({checkCorrectEvent:()=>!0}),h=new Sn){this.mouseMoveStateManager=l,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(l,h,y){return l instanceof MouseEvent?h(l):typeof TouchEvent<"u"&&l instanceof TouchEvent?y(l):void 0}startMove(l){this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.startMove(h)),(h=>this.oneFingerTouchMoveStateManager.startMove(h)))}endMove(l){this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.endMove(h)),(h=>this.oneFingerTouchMoveStateManager.endMove(h)))}isValidStartEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidStartEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h)))}isValidMoveEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidMoveEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h)))}isValidEndEvent(l){return this._executeRelevantHandler(l,(h=>this.mouseMoveStateManager.isValidEndEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h)))}}const Un=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=l=>{l.preventDefault()}};class wn{constructor(l,h){this._clickTolerance=l.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(l){return l<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(l,h,y){return this._calculateTransform(l,h,y)}touchmove(l,h,y){if(this._active){if(!this._shouldBePrevented(y.length))return l.preventDefault(),this._calculateTransform(l,h,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",l)}}touchend(l,h,y){this._calculateTransform(l,h,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,y){y.length>0&&(this._active=!0);const b=st(y,h),A=new a.P(0,0),M=new a.P(0,0);let j=0;for(const K in b){const te=b[K],he=this._touches[K];he&&(A._add(te),M._add(te.sub(he)),j++,b[K]=te)}if(this._touches=b,this._shouldBePrevented(j)||!M.mag())return;const V=M.div(j);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(j),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,y){if(!this._firstTwoTouches)return;l.preventDefault();const[b,A]=this._firstTwoTouches,M=ja(y,h,b),j=ja(y,h,A);if(!M||!j)return;const V=this._aroundCenter?null:M.add(j).div(2);return this._move([M,j],V,l)}touchend(l,h,y){if(!this._firstTwoTouches)return;const[b,A]=this._firstTwoTouches,M=ja(y,h,b),j=ja(y,h,A);M&&j||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ja(E,l,h){for(let y=0;y<E.length;y++)if(E[y].identifier===h)return l[y]}function ti(E,l){return Math.log(E/l)/Math.LN2}class xn extends fi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(ti(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ti(this._distance,y),pinchAround:h}}}function Qr(E,l){return 180*E.angleWith(l)/Math.PI}class Ma extends fi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h,y){const b=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qr(this._vector,b),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,y=Qr(l,this._startVector);return Math.abs(y)<h}}function Gn(E){return Math.abs(E.y)>Math.abs(E.x)}class wi extends fi{constructor(l){super(),this._currentTouchCount=0,this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,h,y){super.touchstart(l,h,y),this._currentTouchCount=y.length}_start(l){this._lastPoints=l,Gn(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=l[0].sub(this._lastPoints[0]),A=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,A,y.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(b.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(l,h,y){if(this._valid!==void 0)return this._valid;const b=l.mag()>=2,A=h.mag()>=2;if(!b&&!A)return;if(!b||!A)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const M=l.y>0==h.y>0;return Gn(l)&&Gn(h)&&M}}const Ii={panStep:100,bearingStep:15,pitchStep:10};class Hn{constructor(l){this._tr=new Bt(l);const h=Ii;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,y=0,b=0,A=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),A=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),A=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(y=0,b=0),{cameraAnimation:j=>{const V=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:gs,zoom:h?Math.round(V.zoom)+h*(l.shiftKey?2:1):V.zoom,bearing:V.bearing+y*this._bearingStep,pitch:V.pitch+b*this._pitchStep,offset:[-A*this._panStep,-M*this._panStep],center:V.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gs(E){return E*(2-E)}const aa=4.000244140625,fo=1/450;class _o{constructor(l,h){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=l,this._tr=new Bt(l),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=fo}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(l){return!!this._map.cooperativeGestures.isEnabled()&&!(l.ctrlKey||this._map.cooperativeGestures.isBypassed(l))}wheel(l){if(!this.isEnabled())return;if(this._shouldBePrevented(l))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",l);let h=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=O(),b=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%aa==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(b*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=P.mousePos(this._map.getCanvas(),l),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(a.V.convert(y.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const j=l.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=j),typeof this._targetZoom=="number"&&(this._targetZoom+=j)}if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>aa?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&V!==0&&(V=1/V);const K=typeof this._targetZoom!="number"?l.scale:a.aq(this._targetZoom);this._targetZoom=l.applyConstrain(l.getCameraLngLat(),a.at(K*V)).zoom,this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom!="number"?l.zoom:this._targetZoom,y=this._startZoom,b=this._easing;let A,M=!1;if(this._type==="wheel"&&y&&b){const j=O()-this._lastWheelEventTime,V=Math.min((j+5)/200,1),K=b(V);A=a.G.number(y,h,K),V<1?this._frameId||(this._frameId=!0):M=!0}else A=h,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=A,{noInertia:!0,needsRenderFrame:!M,zoomDelta:A-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=a.cy;if(this._prevEase){const y=this._prevEase,b=(O()-y.start)/y.duration,A=y.easing(b+.01)-y.easing(b),M=.27/Math.sqrt(A*A+1e-4)*.01,j=Math.sqrt(.0729-M*M);h=a.cw(M,j,.25,1)}return this._prevEase={start:O(),duration:l,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ha{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ci{constructor(l){this._tr=new Bt(l),this.reset()}reset(){this._active=!1}dblclick(l,h){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ni{constructor(){this._tap=new Ht({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,h,y){if(!this._swipePoint)if(this._tapTime){const b=h[0],A=l.timeStamp-this._tapTime<500,M=this._tapPoint.dist(b)<30;A&&M?y.length>0&&(this._swipePoint=b,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(l,h,y)}touchmove(l,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const b=h[0],A=b.y-this._swipePoint.y;return this._swipePoint=b,l.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(l,h,y)}touchend(l,h,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const b=this._tap.touchend(l,h,y);b&&(this._tapTime=l.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oa{constructor(l,h,y){this._el=l,this._mousePan=h,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class oi{constructor(l,h,y,b){this._pitchWithRotate=l.pitchWithRotate,this._rollEnabled=l.rollEnabled,this._mouseRotate=h,this._mousePitch=y,this._mouseRoll=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Wa{constructor(l,h,y,b){this._el=l,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class rn{constructor(l,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=l,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const l=this._map.getCanvasContainer();l.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",l);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=h,this._container.appendChild(b);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=y,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(l){return l[this._bypassKey]}notifyGestureBlocked(l,h){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:l,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const en=E=>E.zoom||E.drag||E.roll||E.pitch||E.rotate;class xo extends a.l{}function Bi(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta||E.rollDelta}class za{constructor(l,h){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,A)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=b.type==="renderFrame"?void 0:b,j={needsRenderFrame:!1},V={},K={};for(const{handlerName:fe,handler:we,allowed:Oe}of this._handlers){if(!we.isEnabled())continue;let Xe;if(this._blockedByActive(K,Oe,fe))we.reset();else if(we[A||b.type]){if(a.cz(b,A||b.type)){const Qe=P.mousePos(this._map.getCanvas(),b);Xe=we[A||b.type](b,Qe)}else if(a.cA(b,A||b.type)){const Qe=this._getMapTouches(b.touches),Ye=P.touchPos(this._map.getCanvas(),Qe);Xe=we[A||b.type](b,Ye,Qe)}else a.cB(A||b.type)||(Xe=we[A||b.type](b));this.mergeHandlerResult(j,V,Xe,fe,M),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()}(Xe||we.isActive())&&(K[fe]=we)}const te={};for(const fe in this._previousActiveHandlers)K[fe]||(te[fe]=M);this._previousActiveHandlers=K,(Object.keys(te).length||Bi(j))&&(this._changes.push([j,V,te]),this._triggerRenderFrame()),(Object.keys(K).length||Bi(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=j;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new re(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,A,M]of this._listeners)P.addEventListener(b,A,b===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[l,h,y]of this._listeners)P.removeEventListener(l,h,l===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new et(h,l));const b=h.boxZoom=new er(h,l);this._add("boxZoom",b),l.interactive&&l.boxZoom&&b.enable();const A=h.cooperativeGestures=new rn(h,l.cooperativeGestures);this._add("cooperativeGestures",A),l.cooperativeGestures&&A.enable();const M=new yr(h),j=new Ci(h);h.doubleClickZoom=new Ha(j,M),this._add("tapZoom",M),this._add("clickZoom",j),l.interactive&&l.doubleClickZoom&&h.doubleClickZoom.enable();const V=new Ni;this._add("tapDragZoom",V);const K=h.touchPitch=new wi(h);this._add("touchPitch",K),l.interactive&&l.touchPitch&&h.touchPitch.enable(l.touchPitch);const te=()=>h.project(h.getCenter()),he=(function({enable:ot,clickTolerance:Et,aroundCenter:Pt=!0,minPixelCenterThreshold:vt=100,rotateDegreesPerPixelMoved:jt=.8},nr){const Xt=new Ir({checkCorrectEvent:Jt=>P.mouseButton(Jt)===0&&Jt.ctrlKey||P.mouseButton(Jt)===2&&!Jt.ctrlKey});return new Yt({clickTolerance:Et,move:(Jt,rr)=>{const Or=nr();if(Pt&&Math.abs(Or.y-Jt.y)>vt)return{bearingDelta:a.cx(new a.P(Jt.x,rr.y),rr,Or)};let Dr=(rr.x-Jt.x)*jt;return Pt&&rr.y<Or.y&&(Dr=-Dr),{bearingDelta:Dr}},moveStateManager:Xt,enable:ot,assignEvents:Un})})(l,te),fe=(function({enable:ot,clickTolerance:Et,pitchDegreesPerPixelMoved:Pt=-.5}){const vt=new Ir({checkCorrectEvent:jt=>P.mouseButton(jt)===0&&jt.ctrlKey||P.mouseButton(jt)===2});return new Yt({clickTolerance:Et,move:(jt,nr)=>({pitchDelta:(nr.y-jt.y)*Pt}),moveStateManager:vt,enable:ot,assignEvents:Un})})(l),we=(function({enable:ot,clickTolerance:Et,rollDegreesPerPixelMoved:Pt=.3},vt){const jt=new Ir({checkCorrectEvent:nr=>P.mouseButton(nr)===2&&nr.ctrlKey});return new Yt({clickTolerance:Et,move:(nr,Xt)=>{const Jt=vt();let rr=(Xt.x-nr.x)*Pt;return Xt.y<Jt.y&&(rr=-rr),{rollDelta:rr}},moveStateManager:jt,enable:ot,assignEvents:Un})})(l,te);h.dragRotate=new oi(l,he,fe,we),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",fe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",we,["mousePitch"]),l.interactive&&l.dragRotate&&h.dragRotate.enable();const Oe=(function({enable:ot,clickTolerance:Et}){const Pt=new Ir({checkCorrectEvent:vt=>P.mouseButton(vt)===0&&!vt.ctrlKey});return new Yt({clickTolerance:Et,move:(vt,jt)=>({around:jt,panDelta:jt.sub(vt)}),activateOnStart:!0,moveStateManager:Pt,enable:ot,assignEvents:Un})})(l),Xe=new wn(l,h);h.dragPan=new Oa(y,Oe,Xe),this._add("mousePan",Oe),this._add("touchPan",Xe,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&h.dragPan.enable(l.dragPan);const Qe=new Ma,Ye=new xn;h.touchZoomRotate=new Wa(y,Ye,Qe,V),this._add("touchRotate",Qe,["touchPan","touchZoom"]),this._add("touchZoom",Ye,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&h.touchZoomRotate.enable(l.touchZoomRotate),this._add("blockableMapEvent",new ft(h));const at=h.scrollZoom=new _o(h,(()=>this._triggerRenderFrame()));this._add("scrollZoom",at,["mousePan"]),l.interactive&&l.scrollZoom&&h.scrollZoom.enable(l.scrollZoom);const St=h.keyboard=new Hn(h);this._add("keyboard",St),l.interactive&&l.keyboard&&h.keyboard.enable()}_add(l,h,y){this._handlers.push({handlerName:l,handler:h,allowed:y}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!en(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,h,y){for(const b in l)if(b!==y&&(!h||h.indexOf(b)<0))return!0;return!1}_getMapTouches(l){const h=[];for(const y of l)this._el.contains(y.target)&&h.push(y);return h}mergeHandlerResult(l,h,y,b,A){if(!y)return;a.e(l,y);const M={handlerName:b,originalEvent:y.originalEvent||A};y.zoomDelta!==void 0&&(h.zoom=M),y.panDelta!==void 0&&(h.drag=M),y.rollDelta!==void 0&&(h.roll=M),y.pitchDelta!==void 0&&(h.pitch=M),y.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){const l={},h={},y={};for(const[b,A,M]of this._changes)b.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(b.panDelta)),b.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+b.pitchDelta),b.rollDelta&&(l.rollDelta=(l.rollDelta||0)+b.rollDelta),b.around!==void 0&&(l.around=b.around),b.pinchAround!==void 0&&(l.pinchAround=b.pinchAround),b.noInertia&&(l.noInertia=b.noInertia),a.e(h,A),a.e(y,M);this._updateMapTransform(l,h,y),this._changes=[]}_updateMapTransform(l,h,y){const b=this._map,A=b._getTransformForUpdate(),M=b.terrain;if(!(Bi(l)||M&&this._terrainMovement))return this._fireEvents(h,y,!0);b._stop(!0);let{panDelta:j,zoomDelta:V,bearingDelta:K,pitchDelta:te,rollDelta:he,around:fe,pinchAround:we}=l;we!==void 0&&(fe=we),fe=fe||b.transform.centerPoint,M&&!A.isPointOnMapSurface(fe)&&(fe=A.centerPoint);const Oe={panDelta:j,zoomDelta:V,rollDelta:he,pitchDelta:te,bearingDelta:K,around:fe};this._map.cameraHelper.useGlobeControls&&!A.isPointOnMapSurface(fe)&&(fe=A.centerPoint);const Xe=fe.distSqr(A.centerPoint)<.01?A.center:A.screenPointToLocation(j?fe.sub(j):fe);this._handleMapControls({terrain:M,tr:A,deltasForHelper:Oe,preZoomAroundLoc:Xe,combinedEventsInProgress:h,panDelta:j}),b._applyUpdatedTransform(A),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,y,!0)}_handleMapControls({terrain:l,tr:h,deltasForHelper:y,preZoomAroundLoc:b,combinedEventsInProgress:A,panDelta:M}){const j=this._map.cameraHelper;if(j.handleMapControlsRollPitchBearingZoom(y,h),l)return j.useGlobeControls?(this._terrainMovement||!A.drag&&!A.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void j.handleMapControlsPan(y,h,b)):this._terrainMovement||!A.drag&&!A.zoom?void(A.drag&&this._terrainMovement&&M?h.setCenter(h.screenPointToLocation(h.centerPoint.sub(M))):j.handleMapControlsPan(y,h,b)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void j.handleMapControlsPan(y,h,b));j.handleMapControlsPan(y,h,b)}_fireEvents(l,h,y){const b=en(this._eventsInProgress),A=en(l),M={};for(const he in l){const{originalEvent:fe}=l[he];this._eventsInProgress[he]||(M[`${he}start`]=fe),this._eventsInProgress[he]=l[he]}!b&&A&&this._fireEvent("movestart",A.originalEvent);for(const he in M)this._fireEvent(he,M[he]);A&&this._fireEvent("move",A.originalEvent);for(const he in l){const{originalEvent:fe}=l[he];this._fireEvent(he,fe)}const j={};let V;for(const he in this._eventsInProgress){const{handlerName:fe,originalEvent:we}=this._eventsInProgress[he];this._handlersById[fe].isActive()||(delete this._eventsInProgress[he],V=h[fe]||we,j[`${he}end`]=V)}for(const he in j)this._fireEvent(he,j[he]);const K=en(this._eventsInProgress),te=(b||A)&&!K;if(te&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const he=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&he.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(he)}if(y&&te){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),fe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;!he||!he.essential&&S.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:V})),fe(this._map.getBearing())&&this._map.resetNorth()):(fe(he.bearing||this._map.getBearing())&&(he.bearing=0),he.freezeElevation=!0,this._map.easeTo(he,{originalEvent:V})),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new a.l(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((l=>{delete this._frameId,this.handleEvent(new xo("renderFrame",{timeStamp:l})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ta extends a.E{constructor(l,h,y){super(),this._renderFrameCallback=()=>{const b=Math.min((O()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=y.bearingSnap,this.cameraHelper=h,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(l,h){l.apply(this.transform,!0),this.transform=l,this.cameraHelper=h}getCenter(){return new a.V(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(l,h){return this.jumpTo({elevation:l},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(l){this._centerClampedToGround=l}panBy(l,h,y){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},h),y)}panTo(l,h,y){return this.easeTo(a.e({center:l},h),y)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,y){return this.easeTo(a.e({zoom:l},h),y)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(l,h){return l!=this.transform.fov&&(this.transform.setFov(l),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)).fire(new a.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,y){return this.easeTo(a.e({bearing:l},h),y)}resetNorth(l,h){return this.rotateTo(0,a.e({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}getRoll(){return this.transform.roll}setRoll(l,h){return this.jumpTo({roll:l},h),this}cameraForBounds(l,h){l=sr.convert(l).adjustAntiMeridian();const y=h&&h.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),y,h)}_cameraForBoxAndBearing(l,h,y,b){const A={top:0,bottom:0,right:0,left:0};if(typeof(b=a.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const K=b.padding;b.padding={top:K,bottom:K,right:K,left:K}}const M=a.e(A,b.padding);b.padding=M;const j=this.transform,V=new sr(l,h);return this.cameraHelper.cameraForBoxAndBearing(b,M,V,y,j)}fitBounds(l,h,y){return this._fitInternal(this.cameraForBounds(l,h),h,y)}fitScreenCoordinates(l,h,y,b,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(l)),this.transform.screenPointToLocation(a.P.convert(h)),y,b),b,A)}_fitInternal(l,h,y){return l?(delete(h=a.e(l,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(l,h){this.stop();const y=this._getTransformForUpdate();let b=!1,A=!1,M=!1;const j=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,l);const V=y.zoom!==j;return"elevation"in l&&y.elevation!==+l.elevation&&y.setElevation(+l.elevation),"bearing"in l&&y.bearing!==+l.bearing&&(b=!0,y.setBearing(+l.bearing)),"pitch"in l&&y.pitch!==+l.pitch&&(A=!0,y.setPitch(+l.pitch)),"roll"in l&&y.roll!==+l.roll&&(M=!0,y.setRoll(+l.roll)),l.padding==null||y.isPaddingEqual(l.padding)||y.setPadding(l.padding),this._applyUpdatedTransform(y),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)),V&&this.fire(new a.l("zoomstart",h)).fire(new a.l("zoom",h)).fire(new a.l("zoomend",h)),b&&this.fire(new a.l("rotatestart",h)).fire(new a.l("rotate",h)).fire(new a.l("rotateend",h)),A&&this.fire(new a.l("pitchstart",h)).fire(new a.l("pitch",h)).fire(new a.l("pitchend",h)),M&&this.fire(new a.l("rollstart",h)).fire(new a.l("roll",h)).fire(new a.l("rollend",h)),this.fire(new a.l("moveend",h))}calculateCameraOptionsFromTo(l,h,y,b=0){const A=a.a9.fromLngLat(l,h),M=a.a9.fromLngLat(y,b),j=M.x-A.x,V=M.y-A.y,K=M.z-A.z,te=Math.hypot(j,V,K);if(te===0)throw new Error("Can't calculate camera options with same From and To");const he=Math.hypot(j,V),fe=a.at(this.transform.cameraToCenterDistance/te/this.transform.tileSize),we=180*Math.atan2(j,-V)/Math.PI;let Oe=180*Math.acos(he/te)/Math.PI;return Oe=K<0?90-Oe:90+Oe,{center:M.toLngLat(),elevation:b,zoom:fe,pitch:Oe,bearing:we}}calculateCameraOptionsFromCameraLngLatAltRotation(l,h,y,b,A){const M=this.transform.calculateCenterFromCameraLngLatAlt(l,h,y,b);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:y,pitch:b,roll:A}}easeTo(l,h){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.cy},l)).animate===!1||!l.essential&&S.prefersReducedMotion)&&(l.duration=0);const y=this._getTransformForUpdate(),b=this.getBearing(),A=y.pitch,M=y.roll,j="bearing"in l?this._normalizeBearing(l.bearing,b):b,V="pitch"in l?+l.pitch:A,K="roll"in l?this._normalizeBearing(l.roll,M):M,te="padding"in l?l.padding:y.padding,he=a.P.convert(l.offset);let fe,we;l.around&&(fe=a.V.convert(l.around),we=y.locationToScreenPoint(fe));const Oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Xe=this.cameraHelper.handleEaseTo(y,{bearing:j,pitch:V,roll:K,padding:te,around:fe,aroundPoint:we,offsetAsPoint:he,offset:l.offset,zoom:l.zoom,center:l.center});return this._rotating=this._rotating||b!==j,this._pitching=this._pitching||V!==A,this._rolling=this._rolling||K!==M,this._padding=!y.isPaddingEqual(te),this._zooming=this._zooming||Xe.isZooming,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,Oe),this.terrain&&this._prepareElevation(Xe.elevationCenter),this._ease((Qe=>{Xe.easeFunc(Qe),this.terrain&&!l.freezeElevation&&this._updateElevation(Qe),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(Qe=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(h,Qe)}),l),this}_prepareEase(l,h,y={}){this._moving=!0,h||y.moving||this.fire(new a.l("movestart",l)),this._zooming&&!y.zooming&&this.fire(new a.l("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new a.l("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new a.l("pitchstart",l)),this._rolling&&!y.rolling&&this.fire(new a.l("rollstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&h!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(y-(h-(y*l+this._elevationStart))/(1-l)),this._elevationTarget=h}this.transform.setElevation(a.G.number(this._elevationStart,this._elevationTarget,l))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(l){if(!this.terrain&&l.elevation>=0&&l.pitch<=90)return{};const h=l.getCameraLngLat(),y=l.getCameraAltitude(),b=this.terrain?this.terrain.getElevationForLngLatZoom(h,l.zoom):0;if(y<b){const A=this.calculateCameraOptionsFromTo(h,b,l.center,l.elevation);return{pitch:A.pitch,zoom:A.zoom}}return{}}_applyUpdatedTransform(l){const h=[];if(h.push((b=>this._elevateCameraIfInsideTerrain(b))),this.transformCameraUpdate&&h.push((b=>this.transformCameraUpdate(b))),!h.length)return;const y=l.clone();for(const b of h){const A=y.clone(),{center:M,zoom:j,roll:V,pitch:K,bearing:te,elevation:he}=b(A);M&&A.setCenter(M),he!==void 0&&A.setElevation(he),j!==void 0&&A.setZoom(j),V!==void 0&&A.setRoll(V),K!==void 0&&A.setPitch(K),te!==void 0&&A.setBearing(te),y.apply(A,!1)}this.transform.apply(y,!1)}_fireMoveEvents(l){this.fire(new a.l("move",l)),this._zooming&&this.fire(new a.l("zoom",l)),this._rotating&&this.fire(new a.l("rotate",l)),this._pitching&&this.fire(new a.l("pitch",l)),this._rolling&&this.fire(new a.l("roll",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const y=this._zooming,b=this._rotating,A=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new a.l("zoomend",l)),b&&this.fire(new a.l("rotateend",l)),A&&this.fire(new a.l("pitchend",l)),M&&this.fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}flyTo(l,h){if(!l.essential&&S.prefersReducedMotion){const rr=a.U(l,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(rr,h)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cy},l);const y=this._getTransformForUpdate(),b=y.bearing,A=y.pitch,M=y.roll,j=y.padding,V="bearing"in l?this._normalizeBearing(l.bearing,b):b,K="pitch"in l?+l.pitch:A,te="roll"in l?this._normalizeBearing(l.roll,M):M,he="padding"in l?l.padding:y.padding,fe=a.P.convert(l.offset);let we=y.centerPoint.add(fe);const Oe=y.screenPointToLocation(we),Xe=this.cameraHelper.handleFlyTo(y,{bearing:V,pitch:K,roll:te,padding:he,locationAtOffset:Oe,offsetAsPoint:fe,center:l.center,minZoom:l.minZoom,zoom:l.zoom});let Qe=l.curve;const Ye=Math.max(y.width,y.height),at=Ye/Xe.scaleOfZoom,St=Xe.pixelPathLength;typeof Xe.scaleOfMinZoom=="number"&&(Qe=Math.sqrt(Ye/Xe.scaleOfMinZoom/St*2));const ot=Qe*Qe;function Et(rr){const Or=(at*at-Ye*Ye+(rr?-1:1)*ot*ot*St*St)/(2*(rr?at:Ye)*ot*St);return Math.log(Math.sqrt(Or*Or+1)-Or)}function Pt(rr){return(Math.exp(rr)-Math.exp(-rr))/2}function vt(rr){return(Math.exp(rr)+Math.exp(-rr))/2}const jt=Et(!1);let nr=function(rr){return vt(jt)/vt(jt+Qe*rr)},Xt=function(rr){return Ye*((vt(jt)*(Pt(Or=jt+Qe*rr)/vt(Or))-Pt(jt))/ot)/St;var Or},Jt=(Et(!0)-jt)/Qe;if(Math.abs(St)<2e-6||!isFinite(Jt)){if(Math.abs(Ye-at)<1e-6)return this.easeTo(l,h);const rr=at<Ye?-1:1;Jt=Math.abs(Math.log(at/Ye))/Qe,Xt=()=>0,nr=Or=>Math.exp(rr*Qe*Or)}return l.duration="duration"in l?+l.duration:1e3*Jt/("screenSpeed"in l?+l.screenSpeed/Qe:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=b!==V,this._pitching=K!==A,this._rolling=te!==M,this._padding=!y.isPaddingEqual(he),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(Xe.targetCenter),this._ease((rr=>{const Or=rr*Jt,Dr=1/nr(Or),Er=Xt(Or);this._rotating&&y.setBearing(a.G.number(b,V,rr)),this._pitching&&y.setPitch(a.G.number(A,K,rr)),this._rolling&&y.setRoll(a.G.number(M,te,rr)),this._padding&&(y.interpolatePadding(j,he,rr),we=y.centerPoint.add(fe)),Xe.easeFunc(rr,Dr,Er,we),this.terrain&&!l.freezeElevation&&this._updateElevation(rr),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(()=>{this.terrain&&l.freezeElevation&&this._finalizeElevation(),this._afterEase(h)}),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,h)}return l||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(l,h,y){y.animate===!1||y.duration===0?(l(1),h()):(this._easeStart=O(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,h){l=a.W(l,-180,180);const y=Math.abs(l-h);return Math.abs(l-360-h)<y&&(l-=360),Math.abs(l+360-h)<y&&(l+=360),l}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLat(a.V.convert(l),this.transform):null}}const oa={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ys{constructor(l=oa){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const y=this._map._getUIString(`AttributionControl.${h}`);l.title=y,l.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map((b=>typeof b!="string"?"":b))):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const h=this._map.style.tileManagers;for(const b in h){const A=h[b];if(A.used||A.usedForTerrain){const M=A.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l=l.filter((b=>String(b).trim())),l.sort(((b,A)=>b.length-A.length)),l=l.filter(((b,A)=>{for(let M=A+1;M<l.length;M++)if(l[M].indexOf(b)>=0)return!1;return!0}));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=P.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Rs{constructor(l={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const y=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const h=P.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ls{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const b of y)if(b.id===l)return void(b.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ws=a.aU([{name:"a_pos3d",type:"Int16",components:3}]);class ji extends a.E{constructor(l){super(),this._lastTilesetChange=O(),this.tileManager=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=l._source.tileSize*2**this.deltaZoom,l.usedForTerrain=!0,l.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(l,h){this.tileManager.update(l,h),this._renderableTilesKeys=[];const y={};for(const b of Wt(l,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.tileManager._source.calculateTileZoom}))y[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.terrainRttPosMatrix32f=new Float64Array(16),a.c7(b.terrainRttPosMatrix32f,0,a.a5,a.a5,0,0,1),this._tiles[b.key]=new $t(b,this.tileSize),this._lastTilesetChange=O());for(const b in this._tiles)y[b]||delete this._tiles[b]}freeRtt(l){for(const h in this._tiles){const y=this._tiles[h];(!l||y.tileID.equals(l)||y.tileID.isChildOf(l)||l.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((l=>this.getTileByID(l)))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l,h){return h?this._getTerrainCoordsForTileRanges(l,h):this._getTerrainCoordsForRegularTile(l)}_getTerrainCoordsForRegularTile(l){const h={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID,A=l.clone(),M=a.bk();if(b.canonical.equals(l.canonical))a.c7(M,0,a.a5,a.a5,0,0,1);else if(b.canonical.isChildOf(l.canonical)){const j=b.canonical.z-l.canonical.z,V=b.canonical.x-(b.canonical.x>>j<<j),K=b.canonical.y-(b.canonical.y>>j<<j),te=a.a5>>j;a.c7(M,0,te,te,0,0,1),a.O(M,M,[-V*te,-K*te,0])}else{if(!l.canonical.isChildOf(b.canonical))continue;{const j=l.canonical.z-b.canonical.z,V=l.canonical.x-(l.canonical.x>>j<<j),K=l.canonical.y-(l.canonical.y>>j<<j),te=a.a5>>j;a.c7(M,0,a.a5,a.a5,0,0,1),a.O(M,M,[V*te,K*te,0]),a.Q(M,M,[1/2**j,1/2**j,0])}}A.terrainRttPosMatrix32f=new Float32Array(M),h[y]=A}return h}_getTerrainCoordsForTileRanges(l,h){const y={};for(const b of this._renderableTilesKeys){const A=this._tiles[b].tileID;if(!this._isWithinTileRanges(A,h))continue;const M=l.clone(),j=a.bk();if(A.canonical.z===l.canonical.z){const V=l.canonical.x-A.canonical.x+l.wrap*(1<<l.canonical.z),K=l.canonical.y-A.canonical.y;a.c7(j,0,a.a5,a.a5,0,0,1),a.O(j,j,[V*a.a5,K*a.a5,0])}else if(A.canonical.z>l.canonical.z){const V=A.canonical.z-l.canonical.z,K=A.canonical.x-(A.canonical.x>>V<<V)+l.wrap*(1<<A.canonical.z),te=A.canonical.y-(A.canonical.y>>V<<V),he=l.canonical.x-(A.canonical.x>>V),fe=l.canonical.y-(A.canonical.y>>V),we=a.a5>>V;a.c7(j,0,we,we,0,0,1),a.O(j,j,[-K*we+he*a.a5,-te*we+fe*a.a5,0])}else{const V=l.canonical.z-A.canonical.z,K=l.canonical.x-(l.canonical.x>>V<<V)+l.wrap*(1<<l.canonical.z),te=l.canonical.y-(l.canonical.y>>V<<V),he=(l.canonical.x>>V)-A.canonical.x,fe=(l.canonical.y>>V)-A.canonical.y,we=a.a5<<V;a.c7(j,0,we,we,0,0,1),a.O(j,j,[K*a.a5+he*we,te*a.a5+fe*we,0])}M.terrainRttPosMatrix32f=new Float32Array(j),y[b]=M}return y}getSourceTile(l,h){const y=this.tileManager._source;let b=l.overscaledZ-this.deltaZoom;if(b>y.maxzoom&&(b=y.maxzoom),b<y.minzoom)return;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(b).key);let A=this.findTileInCaches(this._sourceTileCache[l.key]);if(!A?.dem&&h)for(;b>=y.minzoom&&!A?.dem;)A=this.findTileInCaches(l.scaledTo(b--).key);return A}findTileInCaches(l){let h=this.tileManager.getTileByID(l);return h||(h=this.tileManager._outOfViewCache.getByKey(l),h)}anyTilesAfterTime(l=Date.now()){return this._lastTilesetChange>=l}_isWithinTileRanges(l,h){const y=h[l.canonical.z];return!!y&&(l.wrap>y.minWrap||l.wrap<y.maxWrap||l.canonical.x>=y.minTileXWrapped&&l.canonical.x<=y.maxTileXWrapped&&l.canonical.y>=y.minTileY&&l.canonical.y<=y.maxTileY)}}class gi{constructor(l,h,y){this._meshCache={},this.painter=l,this.tileManager=new ji(h),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,h,y,b=a.a5){var A;if(!(h>=0&&h<b&&y>=0&&y<b))return 0;const M=this.getTerrainData(l),j=(A=M.tile)===null||A===void 0?void 0:A.dem;if(!j)return 0;const V=a.cC([],[h/b*a.a5,y/b*a.a5],M.u_terrain_matrix),K=[V[0]*j.dim,V[1]*j.dim],te=Math.floor(K[0]),he=Math.floor(K[1]),fe=K[0]-te,we=K[1]-he;return j.get(te,he)*(1-fe)*(1-we)+j.get(te+1,he)*fe*(1-we)+j.get(te,he+1)*(1-fe)*we+j.get(te+1,he+1)*fe*we}getElevationForLngLatZoom(l,h){if(!a.cD(h,l.wrap()))return 0;const{tileID:y,mercatorX:b,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(l,h);return this.getElevation(y,b%a.a5,A%a.a5,a.a5)}getElevationForLngLat(l,h){const y=Wt(h,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let b=0;for(const A of y)A.canonical.z>b&&(b=Math.min(A.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(l,b)}getElevation(l,h,y,b=a.a5){return this.getDEMElevation(l,h,y,b)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const b=this.painter.context,A=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(b,A,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(b,new a.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ar([])}const h=this.tileManager.getSourceTile(l,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const b=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new a.T(b,h.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),h.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const y=h&&h.toString()+h.tileID.key+l.key;if(y&&!this._demMatrixCache[y]){const b=this.tileManager.getSource().maxzoom;let A=l.canonical.z-h.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=b?A=l.canonical.z-b:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=l.canonical.x-(l.canonical.x>>A<<A),j=l.canonical.y-(l.canonical.y>>A<<A),V=a.cE(new Float64Array(16),[1/(a.a5<<A),1/(a.a5<<A),0]);a.O(V,V,[M*a.a5,j*a.a5,0]),this._demMatrixCache[l.key]={matrix:V,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(l){const h=this.painter,y=h.width/devicePixelRatio,b=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(h.context,{width:y,height:b,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(h.context,{width:y,height:b,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(y,b,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,y,b))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,M=0;A<this._coordsTextureSize;A++)for(let j=0;j<this._coordsTextureSize;j++,M+=4)h[M+0]=255&j,h[M+1]=255&A,h[M+2]=j>>8<<4|A>>8,h[M+3]=0;const y=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),b=new a.T(l,y,l.gl.RGBA,{premultiply:!1});return b.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(l){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),y=this.painter.context,b=y.gl,A=Math.round(l.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(l.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(A,j-M-1,1,1,b.RGBA,b.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null);const V=h[0]+(h[2]>>4<<8),K=h[1]+((15&h[2])<<8),te=this.coordsIndex[255-h[3]],he=te&&this.tileManager.getTileByID(te);if(!he)return null;const fe=this._coordsTextureSize,we=(1<<he.tileID.canonical.z)*fe;return new a.a9((he.tileID.canonical.x*fe+V)/we+he.tileID.wrap,(he.tileID.canonical.y*fe+K)/we,this.getElevation(he.tileID,V,K,fe))}depthAtPoint(l){const h=new Uint8Array(4),y=this.painter.context,b=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(l){var h;const y=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,b=y&&l.canonical.y===0,A=y&&l.canonical.y===(1<<l.canonical.z)-1,M=`m_${b?"n":""}_${A?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const j=this.painter.context,V=new a.cF,K=new a.aY,te=this.meshSize,he=a.a5/te,fe=te*te;for(let vt=0;vt<=te;vt++)for(let jt=0;jt<=te;jt++)V.emplaceBack(jt*he,vt*he,0);for(let vt=0;vt<fe;vt+=te+1)for(let jt=0;jt<te;jt++)K.emplaceBack(jt+vt,te+jt+vt+1,te+jt+vt+2),K.emplaceBack(jt+vt,te+jt+vt+2,jt+vt+1);const we=V.length,Oe=we+(te+1),Xe=(te+1)*te,Qe=b?a.br:0,Ye=b?0:1,at=A?a.bs:a.a5,St=A?0:1;for(let vt=0;vt<=te;vt++)V.emplaceBack(vt*he,Qe,Ye);for(let vt=0;vt<=te;vt++)V.emplaceBack(vt*he,at,St);for(let vt=0;vt<te;vt++)K.emplaceBack(Xe+vt,Oe+vt,Oe+vt+1),K.emplaceBack(Xe+vt,Oe+vt+1,Xe+vt+1),K.emplaceBack(0+vt,we+vt+1,we+vt),K.emplaceBack(0+vt,0+vt+1,we+vt+1);const ot=V.length,Et=ot+2*(te+1);for(const vt of[0,1])for(let jt=0;jt<=te;jt++)for(const nr of[0,1])V.emplaceBack(vt*a.a5,jt*he,nr);for(let vt=0;vt<2*te;vt+=2)K.emplaceBack(ot+vt,ot+vt+1,ot+vt+3),K.emplaceBack(ot+vt,ot+vt+3,ot+vt+2),K.emplaceBack(Et+vt,Et+vt+3,Et+vt+1),K.emplaceBack(Et+vt,Et+vt+2,Et+vt+3);const Pt=new jn(j.createVertexBuffer(V,Ws.members),j.createIndexBuffer(K),a.aX.simpleSegment(0,0,V.length,K.length));return this._meshCache[M]=Pt,Pt}getMeshFrameDelta(l){return 2*Math.PI*a.bE/Math.pow(2,Math.max(l,0))/5}getMinTileElevationForLngLatZoom(l,h){var y;if(!a.cD(h,l.wrap()))return 0;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(l,h);return(y=this.getMinMaxElevation(b).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(l){const h=this.getTerrainData(l).tile,y={minElevation:null,maxElevation:null};return h&&h.dem&&(y.minElevation=h.dem.min*this.exaggeration,y.maxElevation=h.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(l,h){const y=a.a9.fromLngLat(l.wrap()),b=(1<<h)*a.a5,A=y.x*b,M=y.y*b,j=Math.floor(A/a.a5),V=Math.floor(M/a.a5);return{tileID:new a.a2(h,0,h,j,V),mercatorX:A,mercatorY:M}}}class Mi{constructor(l,h,y){this._context=l,this._size=h,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(y.texture),{id:l,fbo:h,texture:y,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((h=>l.id!==h)),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((l=>!l.inUse))===!1}}const Zs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Xs{constructor(l,h){this.painter=l,this.terrain=h,this.pool=new Mi(l.context,30,h.tileManager.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=l._order.filter((y=>!l._layers[y].isHidden(h))),this._coordsAscending={};for(const y in l.tileManagers){this._coordsAscending[y]={};const b=l.tileManagers[y].getVisibleCoordinates(),A=l.tileManagers[y].getSource(),M=A instanceof Vt?A.terrainTileRanges:null;for(const j of b){const V=this.terrain.tileManager.getTerrainCoords(j,M);for(const K in V)this._coordsAscending[y][K]||(this._coordsAscending[y][K]=[]),this._coordsAscending[y][K].push(V[K])}}this._coordsAscendingStr={};for(const y of l._order){const b=l._layers[y],A=b.source;if(Zs[b.type]&&!this._coordsAscendingStr[A]){this._coordsAscendingStr[A]={};for(const M in this._coordsAscending[A])this._coordsAscendingStr[A][M]=this._coordsAscending[A][M].map((j=>j.key)).sort().join()}}for(const y of this._renderableTiles)for(const b in this._coordsAscendingStr){const A=this._coordsAscendingStr[b][y.tileID.key];A&&A!==y.rttCoords[b]&&(y.rtt=[])}}renderLayer(l,h){if(l.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),b=l.type,A=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(Zs[b]&&(this._prevType&&Zs[this._prevType]||this._stacks.push([]),this._prevType=b,this._stacks[this._stacks.length-1].push(l.id),!M))return!0;if(Zs[this._prevType]||Zs[b]&&M){this._prevType=b;const j=this._stacks.length-1,V=this._stacks[j]||[];for(const K of this._renderableTiles){if(this.pool.isFull()&&(Jd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(K),K.rtt[j]){const he=this.pool.getObjectForId(K.rtt[j].id);if(he.stamp===K.rtt[j].stamp){this.pool.useObject(he);continue}}const te=this.pool.getOrCreateFreeObject();this.pool.useObject(te),this.pool.stampObject(te),K.rtt[j]={id:te.id,stamp:te.stamp},A.context.bindFramebuffer.set(te.fbo.framebuffer),A.context.clear({color:a.bp.transparent,stencil:0}),A.currentStencilSource=void 0;for(let he=0;he<V.length;he++){const fe=A.style._layers[V[he]],we=fe.source?this._coordsAscending[fe.source][K.tileID.key]:[K.tileID];A.context.viewport.set([0,0,te.fbo.width,te.fbo.height]),A._renderTileClippingMasks(fe,we,!0),A.renderLayer(A,A.style.tileManagers[fe.source],fe,we,y),fe.source&&(K.rttCoords[fe.source]=this._coordsAscendingStr[fe.source][K.tileID.key])}}return Jd(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Zs[b]}return!1}}const ro={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ff=p,hf={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oa,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},df={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Pu{constructor(l,h,y=!1){this.mousedown=A=>{this.startMove(A,P.mousePos(this.element,A)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.move(A,P.mousePos(this.element,A))},this.mouseup=A=>{this._rotatePitchHandler.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,A.targetTouches)[0],this.startMove(A,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,A.targetTouches)[0],this.move(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;const b=new pn;this._rotatePitchHandler=new Yt({clickTolerance:3,move:(A,M)=>{const j=h.getBoundingClientRect(),V=new a.P((j.bottom-j.top)/2,(j.right-j.left)/2);return{bearingDelta:a.cx(new a.P(A.x,M.y),M,V),pitchDelta:y?-.5*(M.y-A.y):void 0}},moveStateManager:b,enable:!0,assignEvents:()=>{}}),this.map=l,P.addEventListener(h,"mousedown",this.mousedown),P.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(h,"touchcancel",this.reset)}startMove(l,h){this._rotatePitchHandler.dragStart(l,h),P.disableDrag()}move(l,h){const y=this.map,{bearingDelta:b,pitchDelta:A}=this._rotatePitchHandler.dragMove(l,h)||{};b&&y.setBearing(y.getBearing()+b),A&&y.setPitch(y.getPitch()+A)}off(){const l=this.element;P.removeEventListener(l,"mousedown",this.mousedown),P.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let Iu;function Jh(E,l,h,y=!1){if(y||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return E?.wrap();const b=new a.V(E.lng,E.lat);if(E=new a.V(E.lng,E.lat),l){const A=new a.V(E.lng-360,E.lat),M=new a.V(E.lng+360,E.lat),j=h.locationToScreenPoint(E).distSqr(l);h.locationToScreenPoint(A).distSqr(l)<j?E=A:h.locationToScreenPoint(M).distSqr(l)<j&&(E=M)}for(;Math.abs(E.lng-h.center.lng)>180;){const A=h.locationToScreenPoint(E);if(A.x>=0&&A.y>=0&&A.x<=h.width&&A.y<=h.height)break;E.lng>h.center.lng?E.lng-=360:E.lng+=360}return E.lng!==b.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(E))?E:b}const Dc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bl(E,l,h){const y=E.classList;for(const b in Dc)y.remove(`maplibregl-${h}-anchor-${b}`);y.add(`maplibregl-${h}-anchor-${l}`)}class sh extends a.E{constructor(l){if(super(),this._onKeyPress=h=>{const y=h.code,b=h.charCode||h.keyCode;y!=="Space"&&y!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=h=>{const y=h.originalEvent.target,b=this._element;this._popup&&(y===b||b.contains(y))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Jh(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Dc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${b}`),S.frameAsync(new AbortController).then((()=>{this._updateOpacity(h&&h.type==="moveend")})).catch((()=>{}))},this._onMove=h=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._subpixelPositioning=l&&l.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,this.setOpacity(l?.opacity,l?.opacityWhenCovered),l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const h=P.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${y}px`),h.setAttributeNS(null,"width",`${b}px`),h.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const A=P.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const M=P.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const j=P.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ye of V){const at=P.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",Ye.rx),at.setAttributeNS(null,"ry",Ye.ry),j.appendChild(at)}const K=P.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const te=P.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(te);const he=P.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000");const fe=P.createNS("http://www.w3.org/2000/svg","path");fe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(fe);const we=P.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"transform","translate(6.0, 7.0)"),we.setAttributeNS(null,"fill","#FFFFFF");const Oe=P.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Xe=P.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#000000"),Xe.setAttributeNS(null,"opacity","0.25"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962");const Qe=P.createNS("http://www.w3.org/2000/svg","circle");Qe.setAttributeNS(null,"fill","#FFFFFF"),Qe.setAttributeNS(null,"cx","5.5"),Qe.setAttributeNS(null,"cy","5.5"),Qe.setAttributeNS(null,"r","5.4999962"),Oe.appendChild(Xe),Oe.appendChild(Qe),M.appendChild(j),M.appendChild(K),M.appendChild(he),M.appendChild(we),M.appendChild(Oe),h.appendChild(M),h.setAttributeNS(null,"height",y*this._scale+"px"),h.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(h),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(h=>{h.preventDefault()})),this._element.addEventListener("mousedown",(h=>{h.preventDefault()})),Bl(this._element,this._anchor,"marker"),l&&l.className)for(const h of l.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(l){return this.remove(),this._map=l,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",l._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),l.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.V.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const b=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(l){return this._subpixelPositioning=l,this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:l?(l.isOpen()?l.remove():(l.setLngLat(this._lngLat),l.addTo(this._map)),this):this}_updateOpacity(l=!1){var h,y;const b=(h=this._map)===null||h===void 0?void 0:h.terrain,A=this._map.transform.isLocationOccluded(this._lngLat);if(!b||A){const we=A?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==we&&(this._element.style.opacity=we))}if(l)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const M=this._map,j=M.terrain.depthAtPoint(this._pos),V=M.terrain.getElevationForLngLat(this._lngLat,M.transform);if(M.transform.lngLatToCameraDepth(this._lngLat,V)-j<.006)return void(this._element.style.opacity=this._opacity);const K=-this._offset.y/M.transform.pixelsPerMeter,te=Math.sin(M.getPitch()*Math.PI/180)*K,he=M.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),fe=M.transform.lngLatToCameraDepth(this._lngLat,V+te)-he>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&fe&&this._popup.remove(),this._element.style.opacity=fe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(l,h){return(this._opacity===void 0||l===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),l!==void 0&&(this._opacity=l),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const tp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let pf=0,ic=!1;const mf={maxWidth:100,unit:"metric"};function gf(E,l,h){const y=h&&h.maxWidth||100,b=E._container.clientHeight/2,A=E._container.clientWidth/2,M=E.unproject([A-y/2,b]),j=E.unproject([A+y/2,b]),V=Math.round(E.project(j).x-E.project(M).x),K=Math.min(y,V,E._container.clientWidth),te=M.distanceTo(j);if(h&&h.unit==="imperial"){const he=3.2808*te;he>5280?ac(l,K,he/5280,E._getUIString("ScaleControl.Miles")):ac(l,K,he,E._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?ac(l,K,te/1852,E._getUIString("ScaleControl.NauticalMiles")):te>=1e3?ac(l,K,te/1e3,E._getUIString("ScaleControl.Kilometers")):ac(l,K,te,E._getUIString("ScaleControl.Meters"))}function ac(E,l,h,y){const b=(function(A){const M=Math.pow(10,`${Math.floor(A)}`.length-1);let j=A/M;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(V){const K=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*K)/K})(j),M*j})(h);E.style.width=l*(b/h)+"px",E.innerHTML=`${b}&nbsp;${y}`}const yf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},vf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oc(E){if(E){if(typeof E=="number"){const l=Math.round(Math.abs(E)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,E),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-E),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(E,0),right:new a.P(-E,0)}}if(E instanceof a.P||Array.isArray(E)){const l=a.P.convert(E);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(E.center||[0,0]),top:a.P.convert(E.top||[0,0]),"top-left":a.P.convert(E["top-left"]||[0,0]),"top-right":a.P.convert(E["top-right"]||[0,0]),bottom:a.P.convert(E.bottom||[0,0]),"bottom-left":a.P.convert(E["bottom-left"]||[0,0]),"bottom-right":a.P.convert(E["bottom-right"]||[0,0]),left:a.P.convert(E.left||[0,0]),right:a.P.convert(E.right||[0,0])}}return oc(new a.P(0,0))}const Qh=p;u.AJAXError=a.cI,u.Event=a.l,u.Evented=a.E,u.LngLat=a.V,u.MercatorCoordinate=a.a9,u.Point=a.P,u.addProtocol=a.cJ,u.config=a.c,u.removeProtocol=a.cK,u.AttributionControl=ys,u.BoxZoomHandler=er,u.CanvasSource=me,u.CooperativeGesturesHandler=rn,u.DoubleClickZoomHandler=Ha,u.DragPanHandler=Oa,u.DragRotateHandler=oi,u.EdgeInsets=ws,u.FullscreenControl=class extends a.E{constructor(E={}){super(),this._onFullscreenChange=()=>{var l;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((l=h?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=Kt,u.GeolocateControl=class extends a.E{constructor(E){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",l)),this._finish()}},this._updateCamera=l=>{const h=new a.V(l.coords.longitude,l.coords.latitude),y=l.coords.accuracy,b=this._map.getBearing(),A=a.e({bearing:b},this.options.fitBoundsOptions),M=sr.fromLngLat(h,y);this._map.fitBounds(M,A,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const h=new a.V(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=l.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=l=>{if(this._map){if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&ic)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=l=>{if(this._map){if(l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new sh({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(h=>{const y=h?.[0]instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},tp,E)}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(l=!1){if(Iu!==void 0&&!l)return Iu;if(window.navigator.permissions===void 0)return Iu=!!window.navigator.geolocation,Iu;try{Iu=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Iu=!!window.navigator.geolocation}return Iu}))})().then((l=>this._finishSetupUI(l))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,pf=0,ic=!1}_isOutOfMapMaxBounds(E){const l=this._map.getMaxBounds(),h=E.coords;return l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const E=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&E))return;const l=this._map.project(E),h=this._map.unproject([l.x+100,l.y]),y=E.distanceTo(h)/100,b=2*this._accuracy/y;this._circleElement.style.width=`${b.toFixed(2)}px`,this._circleElement.style.height=`${b.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pf--,ic=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pf++,pf>1?(E={maximumAge:6e5,timeout:0},ic=!0):(E=this.options.positionOptions,ic=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.GlobeControl=class{constructor(){this._toggleProjection=()=>{var E;const l=(E=this._map.getProjection())===null||E===void 0?void 0:E.type;this._map.setProjection(l!=="mercator"&&l?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var E;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((E=this._map.getProjection())===null||E===void 0?void 0:E.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},u.Hash=Yh,u.ImageSource=Vt,u.KeyboardHandler=Hn,u.LngLatBounds=sr,u.LogoControl=Rs,u.Map=class extends ta{constructor(E){var l,h;a.cG.mark(a.cH.create);const y=Object.assign(Object.assign(Object.assign({},hf),E),{canvasContextAttributes:Object.assign(Object.assign({},hf.canvasContextAttributes),E.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const b=new Es,A=new Cs;if(y.minZoom!==void 0&&b.setMinZoom(y.minZoom),y.maxZoom!==void 0&&b.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&b.setMinPitch(y.minPitch),y.maxPitch!==void 0&&b.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&b.setRenderWorldCopies(y.renderWorldCopies),y.transformConstrain!==null&&b.setConstrainOverride(y.transformConstrain),super(b,A,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ls,this._controls=[],this._mapId=a.af(),this._lostContextStyle={style:null,images:null},this._contextLost=j=>{j.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const V of Object.values(this.style._layers))if(V.type==="custom"&&console.warn(`Custom layer with id '${V.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),V._listeners)for(const[K]of Object.entries(V._listeners))console.warn(`Custom layer with id '${V.id}' had event listeners for event '${K}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new a.l("webglcontextlost",{originalEvent:j}))},this._contextRestored=j=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new a.l("webglcontextrestored",{originalEvent:j}))},this._onMapScroll=j=>{if(j.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ro),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this._zoomLevelsToOverscale=y.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=y.transformCameraUpdate,this.transformConstrain=y.transformConstrain,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,y.reduceMotion!==void 0&&(S.prefersReducedMotion=y.reduceMotion),this._imageQueueHandle=X.addThrottleControl((()=>this.isMoving())),this._requestManager=new ee(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let j=!1;const V=ep((K=>{this._trackResize&&!this._removed&&(this.resize(K),this.redraw())}),50);this._resizeObserver=new ResizeObserver((K=>{j?V(K):j=!0})),this._resizeObserver.observe(this._container)}this.handlers=new za(this,y),this._hash=y.hash&&new Yh(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,a.e({},y.fitBoundsOptions,{duration:0}))));const M=typeof y.style=="string"||((h=(l=y.style)===null||l===void 0?void 0:l.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ys(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Rs,y.logoPosition),this.on("style.load",(()=>{if(M||this._resizeTransform(),this.transform.unmodified){const j=a.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(j)}})),this.on("data",(j=>{this._update(j.dataType==="style"),this.fire(new a.l(`${j.dataType}data`,j))})),this.on("dataloading",(j=>{this.fire(new a.l(`${j.dataType}dataloading`,j))})),this.on("dataabort",(j=>{this.fire(new a.l("sourcedataabort",j))}))}_getMapId(){return this._mapId}setGlobalStateProperty(E,l){return this.style.setGlobalStateProperty(E,l),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(E,l){if(l===void 0&&(l=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=E.onAdd(this);this._controls.push(E);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(E);return l>-1&&this._controls.splice(l,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}coveringTiles(E){return Wt(this.transform,E)}calculateCameraOptionsFromTo(E,l,h,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLat(h,this.transform)),super.calculateCameraOptionsFromTo(E,l,h,y)}resize(E,l=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(l);const h=!this._moving;return h&&(this.stop(),this.fire(new a.l("movestart",E)).fire(new a.l("move",E))),this.fire(new a.l("resize",E)),h&&this.fire(new a.l("moveend",E)),this}_resizeInternal(E=!0){const[l,h]=this._containerDimensions(),y=this._getClampedPixelRatio(l,h);if(this._resizeCanvas(l,h,y),this.painter.resize(l,h,y),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const A=this._getClampedPixelRatio(l,h);this._resizeCanvas(l,h,A),this.painter.resize(l,h,A)}this._resizeTransform(E)}_resizeTransform(E=!0){var l;const[h,y]=this._containerDimensions();this.transform.resize(h,y,E),(l=this._requestedCameraState)===null||l===void 0||l.resize(h,y,E)}_getClampedPixelRatio(E,l){const{0:h,1:y}=this._maxCanvasSize,b=this.getPixelRatio(),A=E*b,M=l*b;return Math.min(A>h?h/A:1,M>y?y/M:1)*b}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(sr.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom){const l=this._getTransformForUpdate();return l.setMinZoom(E),this._applyUpdatedTransform(l),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom){const l=this._getTransformForUpdate();return l.setMaxZoom(E),this._applyUpdatedTransform(l),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.setMinPitch(E),this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(E>=this.transform.minPitch)return this.transform.setMaxPitch(E),this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.setRenderWorldCopies(E),this._update()}setTransformConstrain(E){return this.transform.setConstrainOverride(E),this._update()}project(E){return this.transform.locationToScreenPoint(a.V.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.screenPointToLocation(a.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,l,h){if(E==="mouseenter"||E==="mouseover"){let y=!1;return{layers:l,listener:h,delegates:{mousemove:A=>{const M=l.filter((V=>this.getLayer(V))),j=M.length!==0?this.queryRenderedFeatures(A.point,{layers:M}):[];j.length?y||(y=!0,h.call(this,new Re(E,this,A.originalEvent,{features:j}))):y=!1},mouseout:()=>{y=!1}}}}if(E==="mouseleave"||E==="mouseout"){let y=!1;return{layers:l,listener:h,delegates:{mousemove:M=>{const j=l.filter((V=>this.getLayer(V)));(j.length!==0?this.queryRenderedFeatures(M.point,{layers:j}):[]).length?y=!0:y&&(y=!1,h.call(this,new Re(E,this,M.originalEvent)))},mouseout:M=>{y&&(y=!1,h.call(this,new Re(E,this,M.originalEvent)))}}}}{const y=b=>{const A=l.filter((j=>this.getLayer(j))),M=A.length!==0?this.queryRenderedFeatures(b.point,{layers:A}):[];M.length&&(b.features=M,h.call(this,b),delete b.features)};return{layers:l,listener:h,delegates:{[E]:y}}}}_saveDelegatedListener(E,l){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(l)}_removeDelegatedListener(E,l,h){if(!this._delegatedListeners||!this._delegatedListeners[E])return;const y=this._delegatedListeners[E];for(let b=0;b<y.length;b++){const A=y[b];if(A.listener===h&&A.layers.length===l.length&&A.layers.every((M=>l.includes(M)))){for(const M in A.delegates)this.off(M,A.delegates[M]);return void y.splice(b,1)}}}on(E,l,h){if(h===void 0)return super.on(E,l);const y=typeof l=="string"?[l]:l,b=this._createDelegatedListener(E,y,h);this._saveDelegatedListener(E,b);for(const A in b.delegates)this.on(A,b.delegates[A]);return{unsubscribe:()=>{this._removeDelegatedListener(E,y,h)}}}once(E,l,h){if(h===void 0)return super.once(E,l);const y=typeof l=="string"?[l]:l,b=this._createDelegatedListener(E,y,h);for(const A in b.delegates){const M=b.delegates[A];b.delegates[A]=(...j)=>{this._removeDelegatedListener(E,y,h),M(...j)}}this._saveDelegatedListener(E,b);for(const A in b.delegates)this.once(A,b.delegates[A]);return this}off(E,l,h){return h===void 0?super.off(E,l):(this._removeDelegatedListener(E,typeof l=="string"?[l]:l,h),this)}queryRenderedFeatures(E,l){if(!this.style)return[];let h;const y=E instanceof a.P||Array.isArray(E),b=y?E:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(y?{}:E)||{},b instanceof a.P||typeof b[0]=="number")h=[a.P.convert(b)];else{const A=a.P.convert(b[0]),M=a.P.convert(b[1]);h=[A,new a.P(M.x,A.y),M,new a.P(A.x,M.y),A]}return this.style.queryRenderedFeatures(h,l,this.transform)}querySourceFeatures(E,l){return this.style.querySourceFeatures(E,l)}setStyle(E,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(E,l))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const l=this._locale[E];if(l==null)throw new Error(`Missing UI string '${E}'`);return l}_updateStyle(E,l){var h,y;if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(E,l)));const b=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Ho(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,l,b):this.style.loadJSON(E,l,b),this):((y=(h=this.style)===null||h===void 0?void 0:h.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ho(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,l){if(typeof E=="string"){const h=this._requestManager.transformRequest(E,"Style");a.j(h,new AbortController).then((y=>{this._updateDiff(y.data,l)})).catch((y=>{y&&this.fire(new a.k(y))}))}else typeof E=="object"&&this._updateDiff(E,l)}_updateDiff(E,l){try{this.style.setState(E,l)&&this._update(!0)}catch(h){a.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(E,l)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(E,l){return this._lazyInitEmptyStyle(),this.style.addSource(E,l),this._update(!0)}isSourceLoaded(E){const l=this.style&&this.style.tileManagers[E];if(l!==void 0)return l.loaded();this.fire(new a.k(new Error(`There is no tile manager with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const l=this.style.tileManagers[E.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);this.terrain===null&&l.reload();for(const h in this.style._layers){const y=this.style._layers[h];y.type==="hillshade"&&y.source===E.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===E.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new gi(this.painter,l,E),this.painter.renderToTexture=new Xs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var y;h.dataType==="style"?this.terrain.tileManager.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==E.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=h.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:E})),this}getTerrain(){var E,l;return(l=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const E=this.style&&this.style.tileManagers;for(const l of Object.values(E))if(!l.areTilesLoaded())return!1;return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}setSourceTileLodParams(E,l,h){if(h){const y=this.getSource(h);if(!y)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);y.calculateTileZoom=jr(Math.max(1,E),Math.max(1,l))}else for(const y in this.style.tileManagers)this.style.tileManagers[y].getSource().calculateTileZoom=jr(Math.max(1,E),Math.max(1,l));return this._update(!0),this}refreshTiles(E,l){const h=this.style.tileManagers[E];if(!h)throw new Error(`There is no tile manager with ID "${E}", cannot refresh tile`);l===void 0?h.reload(!0):h.refreshTiles(l.map((y=>new a.ac(y.z,y.x,y.y))))}addImage(E,l,h={}){const{pixelRatio:y=1,sdf:b=!1,stretchX:A,stretchY:M,content:j,textFitWidth:V,textFitHeight:K}=h;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.b(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:he,data:fe}=l,we=l;return this.style.addImage(E,{data:new a.R({width:te,height:he},new Uint8Array(fe)),pixelRatio:y,stretchX:A,stretchY:M,content:j,textFitWidth:V,textFitHeight:K,sdf:b,version:0,userImage:we}),we.onAdd&&we.onAdd(this,E),this}}{const{width:te,height:he,data:fe}=S.getImageData(l);this.style.addImage(E,{data:new a.R({width:te,height:he},fe),pixelRatio:y,stretchX:A,stretchY:M,content:j,textFitWidth:V,textFitHeight:K,sdf:b,version:0})}}updateImage(E,l){const h=this.style.getImage(E);if(!h)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof HTMLImageElement||a.b(l)?S.getImageData(l):l,{width:b,height:A,data:M}=y;if(b===void 0||A===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==h.data.width||A!==h.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(l instanceof HTMLImageElement||a.b(l));return h.data.replace(M,j),this.style.updateImage(E,h),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return X.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,l){return this._lazyInitEmptyStyle(),this.style.addLayer(E,l),this._update(!0)}moveLayer(E,l){return this.style.moveLayer(E,l),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,l,h){return this.style.setLayerZoomRange(E,l,h),this._update(!0)}setFilter(E,l,h={}){return this.style.setFilter(E,l,h),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,l,h,y={}){return this.style.setPaintProperty(E,l,h,y),this._update(!0)}getPaintProperty(E,l){return this.style.getPaintProperty(E,l)}setLayoutProperty(E,l,h,y={}){return this.style.setLayoutProperty(E,l,h,y),this._update(!0)}getLayoutProperty(E,l){return this.style.getLayoutProperty(E,l)}setGlyphs(E,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,l,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,l,h,(y=>{y||this._update(!0)})),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,l,(h=>{h||this._update(!0)})),this}setLight(E,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,l),this._update(!0)}getLight(){return this.style.getLight()}setSky(E,l={}){return this._lazyInitEmptyStyle(),this.style.setSky(E,l),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(E,l){return this.style.setFeatureState(E,l),this._update()}removeFeatureState(E,l){return this.style.removeFeatureState(E,l),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,l=0;return this._container&&(E=this._container.clientWidth||400,l=this._container.clientHeight||300),[E,l]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const l=this._canvasContainer=P.create("div","maplibregl-canvas-container",E);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),y=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],y);const b=this._controlContainer=P.create("div","maplibregl-control-container",E),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((M=>{A[M]=P.create("div",`maplibregl-ctrl-${M} `,b)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,l,h){this._canvas.width=Math.floor(h*E),this._canvas.height=Math.floor(h*l),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const E=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let l=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{l={requestedAttributes:E},y&&(l.statusMessage=y.statusMessage,l.type=y.type)}),{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,E):this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E),!h){const y="Failed to initialize WebGL";throw l?(l.message=y,new Error(JSON.stringify(l))):new Error(y)}this.painter=new _m(h,this.transform),k.testSupport(h)}migrateProjection(E,l){super.migrateProjection(E,l),this.painter.transform=E,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){var l,h,y,b,A;const M=this._idleTriggered?this._fadeDuration:0,j=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let V=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const he=this.transform.zoom,fe=O();this.style.zoomHistory.update(he,fe);const we=new a.H(he,{now:fe,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Oe=we.crossFadingFactor();Oe===1&&Oe===this._crossFadingFactor||(V=!0,this._crossFadingFactor=Oe),this.style.update(we)}const K=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==j;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((b=this.style.projection)===null||b===void 0?void 0:b.transitionState,(A=this.style.projection)===null||A===void 0?void 0:A.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||K)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,K),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cG.mark(a.cH.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||V)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const te=this._sourcesDirty||this._styleDirty||this._placementDirty;return te||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||te||(this._fullyLoaded=!0,a.cG.mark(a.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l?.loseContext&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cG.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frame(this._frameRequest,(E=>{a.cG.frame(E),this._frameRequest=null;try{this._render(E)}catch(l){if(!a.Z(l)&&!(function(h){return h.message===Gh})(l))throw l}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return ff}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(E){return this._lazyInitEmptyStyle(),this.style.setProjection(E),this._update(!0)}},u.MapMouseEvent=Re,u.MapTouchEvent=ze,u.MapWheelEvent=He,u.Marker=sh,u.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const l=this._map.getZoom(),h=l===this._map.getMaxZoom(),y=l===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(l,h)=>{const y=this._map._getUIString(`NavigationControl.${h}`);l.title=y,l.setAttribute("aria-label",y)},this.options=a.e({},df,E),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(l=>l.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(l=>this._map.zoomIn({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(l=>this._map.zoomOut({},{originalEvent:l}))),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})})),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,l){const h=P.create("button",E,this._container);return h.type="button",h.addEventListener("click",l),h}},u.Popup=class extends a.E{constructor(E){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Jh(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!l)return;const h=this._flatPos=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&l?l:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const b=oc(this.options.offset);if(!y){const M=this._container.offsetWidth,j=this._container.offsetHeight,V=(function(te){var he,fe,we,Oe;return te?{top:(he=te.top)!==null&&he!==void 0?he:0,right:(fe=te.right)!==null&&fe!==void 0?fe:0,bottom:(we=te.bottom)!==null&&we!==void 0?we:0,left:(Oe=te.left)!==null&&Oe!==void 0?Oe:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let K;K=h.y+b.bottom.y<j+V.top?["top"]:h.y>this._map.transform.height-j-V.bottom?["bottom"]:[],h.x<M/2+V.left?K.push("left"):h.x>this._map.transform.width-M/2-V.right&&K.push("right"),y=K.length===0?"bottom":K.join("-")}let A=h.add(b[y]);this.options.subpixelPositioning||(A=A.round()),P.setTransform(this._container,`${Dc[y]} translate(${A.x}px,${A.y}px)`),Bl(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(yf),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=a.V.convert(E),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const l=document.createDocumentFragment(),h=document.createElement("body");let y;for(h.innerHTML=E;y=h.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){return this._container&&this._container.classList.add(E),this}removeClassName(E){return this._container&&this._container.classList.remove(E),this}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}setSubpixelPositioning(E){this.options.subpixelPositioning=E}setPadding(E){this.options.padding=E,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(vf);E&&E.focus()}},u.RasterDEMTileSource=nt,u.RasterTileSource=Ge,u.ScaleControl=class{constructor(E){this._onMove=()=>{gf(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,gf(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},mf),E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=_o,u.Style=Ho,u.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=wi,u.TwoFingersTouchRotateHandler=Ma,u.TwoFingersTouchZoomHandler=xn,u.TwoFingersTouchZoomRotateHandler=Wa,u.VectorTileSource=tr,u.VideoSource=Ke,u.addSourceType=(E,l)=>a._(void 0,void 0,void 0,(function*(){if(Ae(E))throw new Error(`A source type called "${E}" already exists.`);((h,y)=>{pe[h]=y})(E,l)})),u.clearPrewarmedResources=function(){const E=ht;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(Ie),ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.createTileMesh=Gt,u.getMaxParallelImageRequests=function(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return bt().getRTLTextPluginStatus()},u.getVersion=function(){return Qh},u.getWorkerCount=function(){return Le.workerCount},u.getWorkerUrl=function(){return a.c.WORKER_URL},u.importScriptInWorkers=function(E){return zt().broadcast("IS",E)},u.isTimeFrozen=function(){return I.isFrozen()},u.now=O,u.prewarm=function(){xt().acquire(Ie)},u.restoreNow=function(){I.restoreNow()},u.setMaxParallelImageRequests=function(E){a.c.MAX_PARALLEL_IMAGE_REQUESTS=E},u.setNow=function(E){I.setNow(E)},u.setRTLTextPlugin=function(E,l){return bt().setRTLTextPlugin(E,l)},u.setWorkerCount=function(E){Le.workerCount=E},u.setWorkerUrl=function(E){a.c.WORKER_URL=E}}));var s=r;return s}))})(l1)),l1.exports}var qJ=$J();class UJ{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,p,d,g)=>{if(!r.eventHandlers[a])return;typeof d=="string"&&(g=d,d={}),r.eventHandlers[a].push({handler:p,options:d});const _=[a,p];g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].wrapperEvents.push(_))},off:(a,p)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(d=>Object.is(d.handler,p)?!1:d))},fire:(a,p)=>{if(!r.eventHandlers[a])return;const d=p||window,g=new Event(a);r.eventHandlers[a].forEach(function(_){_.handler.call(d,g,r,p)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:p})=>({lng:a,lat:p}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,p)=>{(typeof r.registeredElements[a]>"u"||typeof p<"u"&&p)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,p,d)=>r.map.style?(d&&typeof d=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[d].sources.push(a.id)),r.map.addLayer(a,p),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,p,d)=>r.map.style?(d&&typeof d=="string"&&typeof a<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].sources.push(a)),r.map.addSource(a,p),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,p,d,g)=>r.map.style?typeof d=="string"&&typeof g>"u"?r.addImage(a,p,void 0,d):(g&&typeof g=="string"&&typeof a<"u"&&(r.initRegisteredElements(g),r.registeredElements[g].images.push(a)),r.map.addImage(a,p,d),this):this,this.on=(a,p,d,g)=>{if(typeof d=="string"&&typeof p=="function")return r.on.call(r,a,void 0,p,d);let _=[a,p,d];return p||(_=[a,d]),g&&typeof g=="string"&&(r.initRegisteredElements(g),r.registeredElements[g].events.push(_)),r.map.on(..._),this},this.addControl=(a,p,d)=>(d&&typeof d=="string"&&(r.initRegisteredElements(d),r.registeredElements[d].controls.push(a)),r.map.addControl(a,p),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(p=>{r.map.style.getLayer(p)&&r.map.style.removeLayer(p)}),r.registeredElements[a].sources.forEach(p=>{r.map.style.getSource(p)&&r.map.style.removeSource(p)}),r.registeredElements[a].images.forEach(p=>{r.map.hasImage(p)&&r.map.style.removeImage(p)}),r.registeredElements[a].events.forEach(p=>{r.map.off(...p)}),r.registeredElements[a].controls.forEach(p=>{r.map.removeControl(p)}),r.registeredElements[a].wrapperEvents.forEach(p=>{r.wrapper.off(...p)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...p)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...p),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...p)=>r.map&&r.map.style?r.map.style[a](...p):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...p)=>r.map[a](...p))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...p)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...p)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(p=>{r.baseLayers.push(p.id),!r.firstSymbolLayer&&p.type==="symbol"&&(r.firstSymbolLayer=p.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new qJ.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}function kh(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const mc="$$material";function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B1.apply(null,arguments)}function VJ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function GJ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var HJ=(function(){function e(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(GJ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=VJ(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),wl="-ms-",j1="-moz-",ra="-webkit-",rq="comm",VI="rule",GI="decl",WJ="@import",nq="@keyframes",ZJ="@layer",XJ=Math.abs,a2=String.fromCharCode,KJ=Object.assign;function YJ(e,t){return tl(e,0)^45?(((t<<2^tl(e,0))<<2^tl(e,1))<<2^tl(e,2))<<2^tl(e,3):0}function iq(e){return e.trim()}function JJ(e,t){return(e=t.exec(e))?e[0]:e}function na(e,t,r){return e.replace(t,r)}function PP(e,t){return e.indexOf(t)}function tl(e,t){return e.charCodeAt(t)|0}function O0(e,t,r){return e.slice(t,r)}function If(e){return e.length}function HI(e){return e.length}function y_(e,t){return t.push(e),e}function QJ(e,t){return e.map(t).join("")}var o2=1,Wg=1,aq=0,pu=0,ns=0,iy="";function s2(e,t,r,n,i,s,u){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:o2,column:Wg,length:u,return:""}}function lv(e,t){return KJ(s2("",null,null,"",null,null,0),e,{length:-e.length},t)}function eQ(){return ns}function tQ(){return ns=pu>0?tl(iy,--pu):0,Wg--,ns===10&&(Wg=1,o2--),ns}function Uu(){return ns=pu<aq?tl(iy,pu++):0,Wg++,ns===10&&(Wg=1,o2++),ns}function Nf(){return tl(iy,pu)}function u1(){return pu}function ib(e,t){return O0(iy,e,t)}function R0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function oq(e){return o2=Wg=1,aq=If(iy=e),pu=0,[]}function sq(e){return iy="",e}function c1(e){return iq(ib(pu-1,IP(e===91?e+2:e===40?e+1:e)))}function rQ(e){for(;(ns=Nf())&&ns<33;)Uu();return R0(e)>2||R0(ns)>3?"":" "}function nQ(e,t){for(;--t&&Uu()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return ib(e,u1()+(t<6&&Nf()==32&&Uu()==32))}function IP(e){for(;Uu();)switch(ns){case e:return pu;case 34:case 39:e!==34&&e!==39&&IP(ns);break;case 40:e===41&&IP(e);break;case 92:Uu();break}return pu}function iQ(e,t){for(;Uu()&&e+ns!==57;)if(e+ns===84&&Nf()===47)break;return"/*"+ib(t,pu-1)+"*"+a2(e===47?e:Uu())}function aQ(e){for(;!R0(Nf());)Uu();return ib(e,pu)}function oQ(e){return sq(f1("",null,null,null,[""],e=oq(e),0,[0],e))}function f1(e,t,r,n,i,s,u,a,p){for(var d=0,g=0,_=u,C=0,S=0,I=0,O=1,P=1,k=1,F=0,B="",N=i,G=s,$=n,X=B;P;)switch(I=F,F=Uu()){case 40:if(I!=108&&tl(X,_-1)==58){PP(X+=na(c1(F),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:X+=c1(F);break;case 9:case 10:case 13:case 32:X+=rQ(I);break;case 92:X+=nQ(u1()-1,7);continue;case 47:switch(Nf()){case 42:case 47:y_(sQ(iQ(Uu(),u1()),t,r),p);break;default:X+="/"}break;case 123*O:a[d++]=If(X)*k;case 125*O:case 59:case 0:switch(F){case 0:case 125:P=0;case 59+g:k==-1&&(X=na(X,/\f/g,"")),S>0&&If(X)-_&&y_(S>32?hD(X+";",n,r,_-1):hD(na(X," ","")+";",n,r,_-2),p);break;case 59:X+=";";default:if(y_($=fD(X,t,r,d,g,i,a,B,N=[],G=[],_),s),F===123)if(g===0)f1(X,t,$,$,N,s,_,a,G);else switch(C===99&&tl(X,3)===110?100:C){case 100:case 108:case 109:case 115:f1(e,$,$,n&&y_(fD(e,$,$,0,0,i,a,B,i,N=[],_),G),i,G,_,a,n?N:G);break;default:f1(X,$,$,$,[""],G,0,a,G)}}d=g=S=0,O=k=1,B=X="",_=u;break;case 58:_=1+If(X),S=I;default:if(O<1){if(F==123)--O;else if(F==125&&O++==0&&tQ()==125)continue}switch(X+=a2(F),F*O){case 38:k=g>0?1:(X+="\f",-1);break;case 44:a[d++]=(If(X)-1)*k,k=1;break;case 64:Nf()===45&&(X+=c1(Uu())),C=Nf(),g=_=If(B=X+=aQ(u1())),F++;break;case 45:I===45&&If(X)==2&&(O=0)}}return s}function fD(e,t,r,n,i,s,u,a,p,d,g){for(var _=i-1,C=i===0?s:[""],S=HI(C),I=0,O=0,P=0;I<n;++I)for(var k=0,F=O0(e,_+1,_=XJ(O=u[I])),B=e;k<S;++k)(B=iq(O>0?C[k]+" "+F:na(F,/&\f/g,C[k])))&&(p[P++]=B);return s2(e,t,r,i===0?VI:a,p,d,g)}function sQ(e,t,r){return s2(e,t,r,rq,a2(eQ()),O0(e,2,-2),0)}function hD(e,t,r,n){return s2(e,t,r,GI,O0(e,0,n),O0(e,n+1,-1),n)}function Lg(e,t){for(var r="",n=HI(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function lQ(e,t,r,n){switch(e.type){case ZJ:if(e.children.length)break;case WJ:case GI:return e.return=e.return||e.value;case rq:return"";case nq:return e.return=e.value+"{"+Lg(e.children,n)+"}";case VI:e.value=e.props.join(",")}return If(r=Lg(e.children,n))?e.return=e.value+"{"+r+"}":""}function uQ(e){var t=HI(e);return function(r,n,i,s){for(var u="",a=0;a<t;a++)u+=e[a](r,n,i,s)||"";return u}}function cQ(e){return function(t){t.root||(t=t.return)&&e(t)}}function lq(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var fQ=function(t,r,n){for(var i=0,s=0;i=s,s=Nf(),i===38&&s===12&&(r[n]=1),!R0(s);)Uu();return ib(t,pu)},hQ=function(t,r){var n=-1,i=44;do switch(R0(i)){case 0:i===38&&Nf()===12&&(r[n]=1),t[n]+=fQ(pu-1,r,n);break;case 2:t[n]+=c1(i);break;case 4:if(i===44){t[++n]=Nf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=a2(i)}while(i=Uu());return t},dQ=function(t,r){return sq(hQ(oq(t),r))},dD=new WeakMap,pQ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!dD.get(n))&&!i){dD.set(t,!0);for(var s=[],u=dQ(r,s),a=n.props,p=0,d=0;p<u.length;p++)for(var g=0;g<a.length;g++,d++)t.props[d]=s[p]?u[p].replace(/&\f/g,a[g]):a[g]+" "+u[p]}}},mQ=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function uq(e,t){switch(YJ(e,t)){case 5103:return ra+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ra+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ra+e+j1+e+wl+e+e;case 6828:case 4268:return ra+e+wl+e+e;case 6165:return ra+e+wl+"flex-"+e+e;case 5187:return ra+e+na(e,/(\w+).+(:[^]+)/,ra+"box-$1$2"+wl+"flex-$1$2")+e;case 5443:return ra+e+wl+"flex-item-"+na(e,/flex-|-self/,"")+e;case 4675:return ra+e+wl+"flex-line-pack"+na(e,/align-content|flex-|-self/,"")+e;case 5548:return ra+e+wl+na(e,"shrink","negative")+e;case 5292:return ra+e+wl+na(e,"basis","preferred-size")+e;case 6060:return ra+"box-"+na(e,"-grow","")+ra+e+wl+na(e,"grow","positive")+e;case 4554:return ra+na(e,/([^-])(transform)/g,"$1"+ra+"$2")+e;case 6187:return na(na(na(e,/(zoom-|grab)/,ra+"$1"),/(image-set)/,ra+"$1"),e,"")+e;case 5495:case 3959:return na(e,/(image-set\([^]*)/,ra+"$1$`$1");case 4968:return na(na(e,/(.+:)(flex-)?(.*)/,ra+"box-pack:$3"+wl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ra+e+e;case 4095:case 3583:case 4068:case 2532:return na(e,/(.+)-inline(.+)/,ra+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(If(e)-1-t>6)switch(tl(e,t+1)){case 109:if(tl(e,t+4)!==45)break;case 102:return na(e,/(.+:)(.+)-([^]+)/,"$1"+ra+"$2-$3$1"+j1+(tl(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~PP(e,"stretch")?uq(na(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(tl(e,t+1)!==115)break;case 6444:switch(tl(e,If(e)-3-(~PP(e,"!important")&&10))){case 107:return na(e,":",":"+ra)+e;case 101:return na(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ra+(tl(e,14)===45?"inline-":"")+"box$3$1"+ra+"$2$3$1"+wl+"$2box$3")+e}break;case 5936:switch(tl(e,t+11)){case 114:return ra+e+wl+na(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ra+e+wl+na(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ra+e+wl+na(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ra+e+wl+e+e}return e}var gQ=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case GI:t.return=uq(t.value,t.length);break;case nq:return Lg([lv(t,{value:na(t.value,"@","@"+ra)})],i);case VI:if(t.length)return QJ(t.props,function(s){switch(JJ(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lg([lv(t,{props:[na(s,/:(read-\w+)/,":"+j1+"$1")]})],i);case"::placeholder":return Lg([lv(t,{props:[na(s,/:(plac\w+)/,":"+ra+"input-$1")]}),lv(t,{props:[na(s,/:(plac\w+)/,":"+j1+"$1")]}),lv(t,{props:[na(s,/:(plac\w+)/,wl+"input-$1")]})],i)}return""})}},yQ=[gQ],vQ=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(O){var P=O.getAttribute("data-emotion");P.indexOf(" ")!==-1&&(document.head.appendChild(O),O.setAttribute("data-s",""))})}var i=t.stylisPlugins||yQ,s={},u,a=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(O){for(var P=O.getAttribute("data-emotion").split(" "),k=1;k<P.length;k++)s[P[k]]=!0;a.push(O)});var p,d=[pQ,mQ];{var g,_=[lQ,cQ(function(O){g.insert(O)})],C=uQ(d.concat(i,_)),S=function(P){return Lg(oQ(P),C)};p=function(P,k,F,B){g=F,S(P?P+"{"+k.styles+"}":k.styles),B&&(I.inserted[k.name]=!0)}}var I={key:r,sheet:new HJ({key:r,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:p};return I.sheet.hydrate(a),I},P5={exports:{}},ca={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pD;function bQ(){if(pD)return ca;pD=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,_=e?Symbol.for("react.suspense"):60113,C=e?Symbol.for("react.suspense_list"):60120,S=e?Symbol.for("react.memo"):60115,I=e?Symbol.for("react.lazy"):60116,O=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,k=e?Symbol.for("react.responder"):60118,F=e?Symbol.for("react.scope"):60119;function B(G){if(typeof G=="object"&&G!==null){var $=G.$$typeof;switch($){case t:switch(G=G.type,G){case p:case d:case n:case s:case i:case _:return G;default:switch(G=G&&G.$$typeof,G){case a:case g:case I:case S:case u:return G;default:return $}}case r:return $}}}function N(G){return B(G)===d}return ca.AsyncMode=p,ca.ConcurrentMode=d,ca.ContextConsumer=a,ca.ContextProvider=u,ca.Element=t,ca.ForwardRef=g,ca.Fragment=n,ca.Lazy=I,ca.Memo=S,ca.Portal=r,ca.Profiler=s,ca.StrictMode=i,ca.Suspense=_,ca.isAsyncMode=function(G){return N(G)||B(G)===p},ca.isConcurrentMode=N,ca.isContextConsumer=function(G){return B(G)===a},ca.isContextProvider=function(G){return B(G)===u},ca.isElement=function(G){return typeof G=="object"&&G!==null&&G.$$typeof===t},ca.isForwardRef=function(G){return B(G)===g},ca.isFragment=function(G){return B(G)===n},ca.isLazy=function(G){return B(G)===I},ca.isMemo=function(G){return B(G)===S},ca.isPortal=function(G){return B(G)===r},ca.isProfiler=function(G){return B(G)===s},ca.isStrictMode=function(G){return B(G)===i},ca.isSuspense=function(G){return B(G)===_},ca.isValidElementType=function(G){return typeof G=="string"||typeof G=="function"||G===n||G===d||G===s||G===i||G===_||G===C||typeof G=="object"&&G!==null&&(G.$$typeof===I||G.$$typeof===S||G.$$typeof===u||G.$$typeof===a||G.$$typeof===g||G.$$typeof===P||G.$$typeof===k||G.$$typeof===F||G.$$typeof===O)},ca.typeOf=B,ca}var mD;function _Q(){return mD||(mD=1,P5.exports=bQ()),P5.exports}var I5,gD;function xQ(){if(gD)return I5;gD=1;var e=_Q(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=i;function u(I){return e.isMemo(I)?i:s[I.$$typeof]||t}var a=Object.defineProperty,p=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,C=Object.prototype;function S(I,O,P){if(typeof O!="string"){if(C){var k=_(O);k&&k!==C&&S(I,k,P)}var F=p(O);d&&(F=F.concat(d(O)));for(var B=u(I),N=u(O),G=0;G<F.length;++G){var $=F[G];if(!r[$]&&!(P&&P[$])&&!(N&&N[$])&&!(B&&B[$])){var X=g(O,$);try{a(I,$,X)}catch{}}}}return I}return I5=S,I5}xQ();var wQ=!0;function cq(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var WI=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||wQ===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},ZI=function(t,r,n){WI(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function SQ(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var EQ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},CQ=/[A-Z]|^ms/g,AQ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fq=function(t){return t.charCodeAt(1)===45},yD=function(t){return t!=null&&typeof t!="boolean"},M5=lq(function(e){return fq(e)?e:e.replace(CQ,"-$&").toLowerCase()}),vD=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(AQ,function(n,i,s){return Mf={name:i,styles:s,next:Mf},i})}return EQ[t]!==1&&!fq(t)&&typeof r=="number"&&r!==0?r+"px":r};function L0(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Mf={name:i.name,styles:i.styles,next:Mf},i.name;var s=r;if(s.styles!==void 0){var u=s.next;if(u!==void 0)for(;u!==void 0;)Mf={name:u.name,styles:u.styles,next:Mf},u=u.next;var a=s.styles+";";return a}return TQ(e,t,r)}case"function":{if(e!==void 0){var p=Mf,d=r(e);return Mf=p,L0(e,t,d)}break}}var g=r;if(t==null)return g;var _=t[g];return _!==void 0?_:g}function TQ(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=L0(e,t,r[i])+";";else for(var s in r){var u=r[s];if(typeof u!="object"){var a=u;t!=null&&t[a]!==void 0?n+=s+"{"+t[a]+"}":yD(a)&&(n+=M5(s)+":"+vD(s,a)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(t==null||t[u[0]]===void 0))for(var p=0;p<u.length;p++)yD(u[p])&&(n+=M5(s)+":"+vD(s,u[p])+";");else{var d=L0(e,t,u);switch(s){case"animation":case"animationName":{n+=M5(s)+":"+d+";";break}default:n+=s+"{"+d+"}"}}}return n}var bD=/label:\s*([^\s;{]+)\s*(;|$)/g,Mf;function ab(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Mf=void 0;var s=e[0];if(s==null||s.raw===void 0)n=!1,i+=L0(r,t,s);else{var u=s;i+=u[0]}for(var a=1;a<e.length;a++)if(i+=L0(r,t,e[a]),n){var p=s;i+=p[a]}bD.lastIndex=0;for(var d="",g;(g=bD.exec(i))!==null;)d+="-"+g[1];var _=SQ(i)+d;return{name:_,styles:i,next:Mf}}var PQ=function(t){return t()},hq=N1.useInsertionEffect?N1.useInsertionEffect:!1,dq=hq||PQ,_D=hq||R.useLayoutEffect,pq=R.createContext(typeof HTMLElement<"u"?vQ({key:"css"}):null);pq.Provider;var XI=function(t){return R.forwardRef(function(r,n){var i=R.useContext(pq);return t(r,i,n)})},ob=R.createContext({}),KI={}.hasOwnProperty,MP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",IQ=function(t,r){var n={};for(var i in r)KI.call(r,i)&&(n[i]=r[i]);return n[MP]=t,n},MQ=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return WI(r,n,i),dq(function(){return ZI(r,n,i)}),null},OQ=XI(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[MP],s=[n],u="";typeof e.className=="string"?u=cq(t.registered,s,e.className):e.className!=null&&(u=e.className+" ");var a=ab(s,void 0,R.useContext(ob));u+=t.key+"-"+a.name;var p={};for(var d in e)KI.call(e,d)&&d!=="css"&&d!==MP&&(p[d]=e[d]);return p.className=u,r&&(p.ref=r),R.createElement(R.Fragment,null,R.createElement(MQ,{cache:t,serialized:a,isStringTag:typeof i=="string"}),R.createElement(i,p))}),RQ=OQ,xD=function(t,r){var n=arguments;if(r==null||!KI.call(r,"css"))return R.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=RQ,s[1]=IQ(t,r);for(var u=2;u<i;u++)s[u]=n[u];return R.createElement.apply(null,s)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(xD||(xD={}));var LQ=XI(function(e,t){var r=e.styles,n=ab([r],void 0,R.useContext(ob)),i=R.useRef();return _D(function(){var s=t.key+"-global",u=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,p=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return t.sheet.tags.length&&(u.before=t.sheet.tags[0]),p!==null&&(a=!0,p.setAttribute("data-emotion",s),u.hydrate([p])),i.current=[u,a],function(){u.flush()}},[t]),_D(function(){var s=i.current,u=s[0],a=s[1];if(a){s[1]=!1;return}if(n.next!==void 0&&ZI(t,n.next,!0),u.tags.length){var p=u.tags[u.tags.length-1].nextElementSibling;u.before=p,u.flush()}t.insert("",n,u,!1)},[t,n.name]),null});function YI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ab(t)}function sb(){var e=YI.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var DQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kQ=lq(function(e){return DQ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),FQ=kQ,NQ=function(t){return t!=="theme"},wD=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?FQ:NQ},SD=function(t,r,n){var i;if(r){var s=r.shouldForwardProp;i=t.__emotion_forwardProp&&s?function(u){return t.__emotion_forwardProp(u)&&s(u)}:s}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},BQ=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return WI(r,n,i),dq(function(){return ZI(r,n,i)}),null},jQ=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,s,u;r!==void 0&&(s=r.label,u=r.target);var a=SD(t,r,n),p=a||wD(i),d=!p("as");return function(){var g=arguments,_=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&_.push("label:"+s+";"),g[0]==null||g[0].raw===void 0)_.push.apply(_,g);else{var C=g[0];_.push(C[0]);for(var S=g.length,I=1;I<S;I++)_.push(g[I],C[I])}var O=XI(function(P,k,F){var B=d&&P.as||i,N="",G=[],$=P;if(P.theme==null){$={};for(var X in P)$[X]=P[X];$.theme=R.useContext(ob)}typeof P.className=="string"?N=cq(k.registered,G,P.className):P.className!=null&&(N=P.className+" ");var ee=ab(_.concat(G),k.registered,$);N+=k.key+"-"+ee.name,u!==void 0&&(N+=" "+u);var J=d&&a===void 0?wD(B):p,le={};for(var Z in P)d&&Z==="as"||J(Z)&&(le[Z]=P[Z]);return le.className=N,F&&(le.ref=F),R.createElement(R.Fragment,null,R.createElement(BQ,{cache:k,serialized:ee,isStringTag:typeof B=="string"}),R.createElement(B,le))});return O.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",O.defaultProps=t.defaultProps,O.__emotion_real=O,O.__emotion_base=i,O.__emotion_styles=_,O.__emotion_forwardProp=a,Object.defineProperty(O,"toString",{value:function(){return"."+u}}),O.withComponent=function(P,k){var F=e(P,B1({},r,k,{shouldForwardProp:SD(O,k,!0)}));return F.apply(void 0,_)},O}},zQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],OP=jQ.bind(null);zQ.forEach(function(e){OP[e]=OP(e)});var O5={exports:{}},R5,ED;function $Q(){if(ED)return R5;ED=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return R5=e,R5}var L5,CD;function qQ(){if(CD)return L5;CD=1;var e=$Q();function t(){}function r(){}return r.resetWarningCache=t,L5=function(){function n(u,a,p,d,g,_){if(_!==e){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return s.PropTypes=s,s},L5}var AD;function UQ(){return AD||(AD=1,O5.exports=qQ()()),O5.exports}var VQ=UQ();const on=rl(VQ);function GQ(e){return e==null||Object.keys(e).length===0}function mq(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(GQ(i)?r:i):t;return Ue.jsx(LQ,{styles:n})}function gq(e,t){return OP(e,t)}function HQ(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const TD=[];function xd(e){return TD[0]=e,ab(TD)}var D5={exports:{}},Aa={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD;function WQ(){if(PD)return Aa;PD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),u=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.for("react.view_transition"),S=Symbol.for("react.client.reference");function I(O){if(typeof O=="object"&&O!==null){var P=O.$$typeof;switch(P){case e:switch(O=O.type,O){case r:case i:case n:case p:case d:case C:return O;default:switch(O=O&&O.$$typeof,O){case u:case a:case _:case g:return O;case s:return O;default:return P}}case t:return P}}}return Aa.ContextConsumer=s,Aa.ContextProvider=u,Aa.Element=e,Aa.ForwardRef=a,Aa.Fragment=r,Aa.Lazy=_,Aa.Memo=g,Aa.Portal=t,Aa.Profiler=i,Aa.StrictMode=n,Aa.Suspense=p,Aa.SuspenseList=d,Aa.isContextConsumer=function(O){return I(O)===s},Aa.isContextProvider=function(O){return I(O)===u},Aa.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===e},Aa.isForwardRef=function(O){return I(O)===a},Aa.isFragment=function(O){return I(O)===r},Aa.isLazy=function(O){return I(O)===_},Aa.isMemo=function(O){return I(O)===g},Aa.isPortal=function(O){return I(O)===t},Aa.isProfiler=function(O){return I(O)===i},Aa.isStrictMode=function(O){return I(O)===n},Aa.isSuspense=function(O){return I(O)===p},Aa.isSuspenseList=function(O){return I(O)===d},Aa.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===r||O===i||O===n||O===p||O===d||typeof O=="object"&&O!==null&&(O.$$typeof===_||O.$$typeof===g||O.$$typeof===u||O.$$typeof===s||O.$$typeof===a||O.$$typeof===S||O.getModuleId!==void 0)},Aa.typeOf=I,Aa}var ID;function ZQ(){return ID||(ID=1,D5.exports=WQ()),D5.exports}var yq=ZQ();function Lf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vq(e){if(R.isValidElement(e)||yq.isValidElementType(e)||!Lf(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=vq(e[r])}),t}function is(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return Lf(e)&&Lf(t)&&Object.keys(t).forEach(i=>{R.isValidElement(t[i])||yq.isValidElementType(t[i])?n[i]=t[i]:Lf(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Lf(e[i])?n[i]=is(e[i],t[i],r):r.clone?n[i]=Lf(t[i])?vq(t[i]):t[i]:n[i]=t[i]}),n}const XQ=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function KQ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,s=XQ(t),u=Object.keys(s);function a(C){return`@media (min-width:${typeof t[C]=="number"?t[C]:C}${r})`}function p(C){return`@media (max-width:${(typeof t[C]=="number"?t[C]:C)-n/100}${r})`}function d(C,S){const I=u.indexOf(S);return`@media (min-width:${typeof t[C]=="number"?t[C]:C}${r}) and (max-width:${(I!==-1&&typeof t[u[I]]=="number"?t[u[I]]:S)-n/100}${r})`}function g(C){return u.indexOf(C)+1<u.length?d(C,u[u.indexOf(C)+1]):a(C)}function _(C){const S=u.indexOf(C);return S===0?a(u[1]):S===u.length-1?p(u[S]):d(C,u[u.indexOf(C)+1]).replace("@media","@media not all and")}return{keys:u,values:s,up:a,down:p,between:d,only:g,not:_,unit:r,...i}}function MD(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const s=/min-width:\s*([0-9.]+)/;return+(n.match(s)?.[1]||0)-+(i.match(s)?.[1]||0)});return r.length?r.reduce((n,i)=>{const s=t[i];return delete n[i],n[i]=s,n},{...t}):t}function YQ(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function JQ(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,s=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(s)}function QQ(e){const t=(s,u)=>s.replace("@media",u?`@container ${u}`:"@container");function r(s,u){s.up=(...a)=>t(e.breakpoints.up(...a),u),s.down=(...a)=>t(e.breakpoints.down(...a),u),s.between=(...a)=>t(e.breakpoints.between(...a),u),s.only=(...a)=>t(e.breakpoints.only(...a),u),s.not=(...a)=>{const p=t(e.breakpoints.not(...a),u);return p.includes("not all and")?p.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):p}}const n={},i=s=>(r(n,s),n);return r(i),{...e,containerQueries:i}}const eee={borderRadius:4};function t0(e,t){return t?is(e,t,{clone:!1}):e}const l2={xs:0,sm:600,md:900,lg:1200,xl:1536},OD={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${l2[e]}px)`},tee={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:l2[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Xc(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const s=n.breakpoints||OD;return t.reduce((u,a,p)=>(u[s.up(s.keys[p])]=r(t[p]),u),{})}if(typeof t=="object"){const s=n.breakpoints||OD;return Object.keys(t).reduce((u,a)=>{if(YQ(s.keys,a)){const p=JQ(n.containerQueries?n:tee,a);p&&(u[p]=r(t[a],a))}else if(Object.keys(s.values||l2).includes(a)){const p=s.up(a);u[p]=r(t[a],a)}else{const p=a;u[p]=t[p]}return u},{})}return r(t)}function bq(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function RP(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function ree(e,...t){const r=bq(e),n=[r,...t].reduce((i,s)=>is(i,s),{});return RP(Object.keys(r),n)}function nee(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,s)=>{s<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function k5({values:e,breakpoints:t,base:r}){const n=r||nee(e,t),i=Object.keys(n);if(i.length===0)return e;let s;return i.reduce((u,a,p)=>(Array.isArray(e)?(u[a]=e[p]!=null?e[p]:e[s],s=p):typeof e=="object"?(u[a]=e[a]!=null?e[a]:e[s],s=a):u[a]=e,u),{})}function ln(e){if(typeof e!="string")throw new Error(kh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function u2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function z1(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=u2(e,r)||n,t&&(i=t(i,n,e)),i}function Vo(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,s=u=>{if(u[t]==null)return null;const a=u[t],p=u.theme,d=u2(p,n)||{};return Xc(u,a,_=>{let C=z1(d,i,_);return _===C&&typeof _=="string"&&(C=z1(d,i,`${t}${_==="default"?"":ln(_)}`,_)),r===!1?C:{[r]:C}})};return s.propTypes={},s.filterProps=[t],s}function iee(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const aee={m:"margin",p:"padding"},oee={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},RD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},see=iee(e=>{if(e.length>2)if(RD[e])e=RD[e];else return[e];const[t,r]=e.split(""),n=aee[t],i=oee[r]||"";return Array.isArray(i)?i.map(s=>n+s):[n+i]}),JI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],QI=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...JI,...QI];function lb(e,t,r,n){const i=u2(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?i.startsWith("var(")&&s===0?0:i.startsWith("var(")&&s===1?i:`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const u=Math.abs(s),a=i[u];return s>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function c2(e){return lb(e,"spacing",8)}function qp(e,t){return typeof t=="string"||t==null?t:e(t)}function lee(e,t){return r=>e.reduce((n,i)=>(n[i]=qp(t,r),n),{})}function uee(e,t,r,n){if(!t.includes(r))return null;const i=see(r),s=lee(i,n),u=e[r];return Xc(e,u,s)}function _q(e,t){const r=c2(e.theme);return Object.keys(e).map(n=>uee(e,t,n,r)).reduce(t0,{})}function Co(e){return _q(e,JI)}Co.propTypes={};Co.filterProps=JI;function Ao(e){return _q(e,QI)}Ao.propTypes={};Ao.filterProps=QI;function xq(e=8,t=c2({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(s=>{const u=t(s);return typeof u=="number"?`${u}px`:u}).join(" ");return r.mui=!0,r}function f2(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(s=>{n[s]=i}),n),{}),r=n=>Object.keys(n).reduce((i,s)=>t[s]?t0(i,t[s](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function dc(e){return typeof e!="number"?e:`${e}px solid`}function Sc(e,t){return Vo({prop:e,themeKey:"borders",transform:t})}const cee=Sc("border",dc),fee=Sc("borderTop",dc),hee=Sc("borderRight",dc),dee=Sc("borderBottom",dc),pee=Sc("borderLeft",dc),mee=Sc("borderColor"),gee=Sc("borderTopColor"),yee=Sc("borderRightColor"),vee=Sc("borderBottomColor"),bee=Sc("borderLeftColor"),_ee=Sc("outline",dc),xee=Sc("outlineColor"),h2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=lb(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:qp(t,n)});return Xc(e,e.borderRadius,r)}return null};h2.propTypes={};h2.filterProps=["borderRadius"];f2(cee,fee,hee,dee,pee,mee,gee,yee,vee,bee,h2,_ee,xee);const d2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=lb(e.theme,"spacing",8),r=n=>({gap:qp(t,n)});return Xc(e,e.gap,r)}return null};d2.propTypes={};d2.filterProps=["gap"];const p2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=lb(e.theme,"spacing",8),r=n=>({columnGap:qp(t,n)});return Xc(e,e.columnGap,r)}return null};p2.propTypes={};p2.filterProps=["columnGap"];const m2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=lb(e.theme,"spacing",8),r=n=>({rowGap:qp(t,n)});return Xc(e,e.rowGap,r)}return null};m2.propTypes={};m2.filterProps=["rowGap"];const wee=Vo({prop:"gridColumn"}),See=Vo({prop:"gridRow"}),Eee=Vo({prop:"gridAutoFlow"}),Cee=Vo({prop:"gridAutoColumns"}),Aee=Vo({prop:"gridAutoRows"}),Tee=Vo({prop:"gridTemplateColumns"}),Pee=Vo({prop:"gridTemplateRows"}),Iee=Vo({prop:"gridTemplateAreas"}),Mee=Vo({prop:"gridArea"});f2(d2,p2,m2,wee,See,Eee,Cee,Aee,Tee,Pee,Iee,Mee);function Dg(e,t){return t==="grey"?t:e}const Oee=Vo({prop:"color",themeKey:"palette",transform:Dg}),Ree=Vo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Dg}),Lee=Vo({prop:"backgroundColor",themeKey:"palette",transform:Dg});f2(Oee,Ree,Lee);function $u(e){return e<=1&&e!==0?`${e*100}%`:e}const Dee=Vo({prop:"width",transform:$u}),eM=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||l2[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:$u(r)}};return Xc(e,e.maxWidth,t)}return null};eM.filterProps=["maxWidth"];const kee=Vo({prop:"minWidth",transform:$u}),Fee=Vo({prop:"height",transform:$u}),Nee=Vo({prop:"maxHeight",transform:$u}),Bee=Vo({prop:"minHeight",transform:$u});Vo({prop:"size",cssProperty:"width",transform:$u});Vo({prop:"size",cssProperty:"height",transform:$u});const jee=Vo({prop:"boxSizing"});f2(Dee,eM,kee,Fee,Nee,Bee,jee);const ub={border:{themeKey:"borders",transform:dc},borderTop:{themeKey:"borders",transform:dc},borderRight:{themeKey:"borders",transform:dc},borderBottom:{themeKey:"borders",transform:dc},borderLeft:{themeKey:"borders",transform:dc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:dc},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:h2},color:{themeKey:"palette",transform:Dg},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Dg},backgroundColor:{themeKey:"palette",transform:Dg},p:{style:Ao},pt:{style:Ao},pr:{style:Ao},pb:{style:Ao},pl:{style:Ao},px:{style:Ao},py:{style:Ao},padding:{style:Ao},paddingTop:{style:Ao},paddingRight:{style:Ao},paddingBottom:{style:Ao},paddingLeft:{style:Ao},paddingX:{style:Ao},paddingY:{style:Ao},paddingInline:{style:Ao},paddingInlineStart:{style:Ao},paddingInlineEnd:{style:Ao},paddingBlock:{style:Ao},paddingBlockStart:{style:Ao},paddingBlockEnd:{style:Ao},m:{style:Co},mt:{style:Co},mr:{style:Co},mb:{style:Co},ml:{style:Co},mx:{style:Co},my:{style:Co},margin:{style:Co},marginTop:{style:Co},marginRight:{style:Co},marginBottom:{style:Co},marginLeft:{style:Co},marginX:{style:Co},marginY:{style:Co},marginInline:{style:Co},marginInlineStart:{style:Co},marginInlineEnd:{style:Co},marginBlock:{style:Co},marginBlockStart:{style:Co},marginBlockEnd:{style:Co},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:d2},rowGap:{style:m2},columnGap:{style:p2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:$u},maxWidth:{style:eM},minWidth:{transform:$u},height:{transform:$u},maxHeight:{transform:$u},minHeight:{transform:$u},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function zee(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function $ee(e,t){return typeof e=="function"?e(t):e}function qee(){function e(r,n,i,s){const u={[r]:n,theme:i},a=s[r];if(!a)return{[r]:n};const{cssProperty:p=r,themeKey:d,transform:g,style:_}=a;if(n==null)return null;if(d==="typography"&&n==="inherit")return{[r]:n};const C=u2(i,d)||{};return _?_(u):Xc(u,n,I=>{let O=z1(C,g,I);return I===O&&typeof I=="string"&&(O=z1(C,g,`${r}${I==="default"?"":ln(I)}`,I)),p===!1?O:{[p]:O}})}function t(r){const{sx:n,theme:i={},nested:s}=r||{};if(!n)return null;const u=i.unstable_sxConfig??ub;function a(p){let d=p;if(typeof p=="function")d=p(i);else if(typeof p!="object")return p;if(!d)return null;const g=bq(i.breakpoints),_=Object.keys(g);let C=g;return Object.keys(d).forEach(S=>{const I=$ee(d[S],i);if(I!=null)if(typeof I=="object")if(u[S])C=t0(C,e(S,I,i,u));else{const O=Xc({theme:i},I,P=>({[S]:P}));zee(O,I)?C[S]=t({sx:I,theme:i,nested:!0}):C=t0(C,O)}else C=t0(C,e(S,I,i,u))}),!s&&i.modularCssLayers?{"@layer sx":MD(i,RP(_,C))}:MD(i,RP(_,C))}return Array.isArray(n)?n.map(a):a(n)}return t}const Ed=qee();Ed.filterProps=["sx"];function Uee(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function g2(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:s={},...u}=e,a=KQ(r),p=xq(i);let d=is({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:p,shape:{...eee,...s}},u);return d=QQ(d),d.applyStyles=Uee,d=t.reduce((g,_)=>is(g,_),d),d.unstable_sxConfig={...ub,...u?.unstable_sxConfig},d.unstable_sx=function(_){return Ed({sx:_,theme:this})},d}function Vee(e){return Object.keys(e).length===0}function y2(e=null){const t=R.useContext(ob);return!t||Vee(t)?e:t}const Gee=g2();function v2(e=Gee){return y2(e)}function F5(e){const t=xd(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function wq({styles:e,themeId:t,defaultTheme:r={}}){const n=v2(r),i=t&&n[t]||n;let s=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(s)?s=s.map(u=>F5(typeof u=="function"?u(i):u)):s=F5(s)),Ue.jsx(mq,{styles:s})}const Hee=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??ub;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function tM(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=Hee(r);let s;return Array.isArray(t)?s=[n,...t]:typeof t=="function"?s=(...u)=>{const a=t(...u);return Lf(a)?{...n,...a}:n}:s={...n,...t},{...i,sx:s}}const LD=e=>e,Wee=()=>{let e=LD;return{configure(t){e=t},generate(t){return e(t)},reset(){e=LD}}},rM=Wee();function Sq(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Sq(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Br(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Sq(e))&&(n&&(n+=" "),n+=t);return n}function Eq(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,s=gq("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Ed);return R.forwardRef(function(p,d){const g=v2(r),{className:_,component:C="div",...S}=tM(p);return Ue.jsx(s,{as:C,ref:d,className:Br(_,i?i(n):n),theme:t&&g[t]||g,...S})})}const Zee={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Wn(e,t,r="Mui"){const n=Zee[t];return n?`${r}-${n}`:`${rM.generate(e)}-${t}`}function $n(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Wn(e,i,r)}),n}const Xee=$n("MuiBox",["root"]),Kee=Eq({defaultClassName:Xee.root,generateClassName:rM.generate});function Cq(e){const{variants:t,...r}=e,n={variants:t,style:xd(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=xd(i.style))}),n}const Yee=g2();function N5(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Mp(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Jee(e){return e?(t,r)=>r[e]:null}function Qee(e,t,r){e.theme=tte(e.theme)?r:e.theme[t]||e.theme}function h1(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>h1(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?Mp(n.style,r):n.style;else{const{variants:s,...u}=n;i=r?Mp(xd(u),r):u}return Aq(e,n.variants,[i],r)}return n?.isProcessed?r?Mp(xd(n.style),r):n.style:r?Mp(xd(n),r):n}function Aq(e,t,r=[],n=void 0){let i;e:for(let s=0;s<t.length;s+=1){const u=t[s];if(typeof u.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!u.props(i))continue}else for(const a in u.props)if(e[a]!==u.props[a]&&e.ownerState?.[a]!==u.props[a])continue e;typeof u.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?Mp(xd(u.style(i)),n):u.style(i))):r.push(n?Mp(xd(u.style),n):u.style)}return r}function Tq(e={}){const{themeId:t,defaultTheme:r=Yee,rootShouldForwardProp:n=N5,slotShouldForwardProp:i=N5}=e;function s(a){Qee(a,t,r)}return(a,p={})=>{HQ(a,$=>$.filter(X=>X!==Ed));const{name:d,slot:g,skipVariantsResolver:_,skipSx:C,overridesResolver:S=Jee(nte(g)),...I}=p,O=d&&d.startsWith("Mui")||g?"components":"custom",P=_!==void 0?_:g&&g!=="Root"&&g!=="root"||!1,k=C||!1;let F=N5;g==="Root"||g==="root"?F=n:g?F=i:rte(a)&&(F=void 0);const B=gq(a,{shouldForwardProp:F,label:ete(),...I}),N=$=>{if($.__emotion_real===$)return $;if(typeof $=="function")return function(ee){return h1(ee,$,ee.theme.modularCssLayers?O:void 0)};if(Lf($)){const X=Cq($);return function(J){return X.variants?h1(J,X,J.theme.modularCssLayers?O:void 0):J.theme.modularCssLayers?Mp(X.style,O):X.style}}return $},G=(...$)=>{const X=[],ee=$.map(N),J=[];if(X.push(s),d&&S&&J.push(function(oe){const ce=oe.theme.components?.[d]?.styleOverrides;if(!ce)return null;const be={};for(const Te in ce)be[Te]=h1(oe,ce[Te],oe.theme.modularCssLayers?"theme":void 0);return S(oe,be)}),d&&!P&&J.push(function(oe){const ce=oe.theme?.components?.[d]?.variants;return ce?Aq(oe,ce,[],oe.theme.modularCssLayers?"theme":void 0):null}),k||J.push(Ed),Array.isArray(ee[0])){const H=ee.shift(),oe=new Array(X.length).fill(""),ue=new Array(J.length).fill("");let ce;ce=[...oe,...H,...ue],ce.raw=[...oe,...H.raw,...ue],X.unshift(ce)}const le=[...X,...ee,...J],Z=B(...le);return a.muiName&&(Z.muiName=a.muiName),Z};return B.withConfig&&(G.withConfig=B.withConfig),G}}function ete(e,t){return void 0}function tte(e){for(const t in e)return!1;return!0}function rte(e){return typeof e=="string"&&e.charCodeAt(0)>96}function nte(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Qp=Tq();function D0(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const s=i;if(s==="components"||s==="slots")n[s]={...e[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const u=e[s],a=t[s];if(!a)n[s]=u||{};else if(!u)n[s]=a;else{n[s]={...a};for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const d=p;n[s][d]=D0(u[d],a[d],r)}}}else s==="className"&&r&&t.className?n.className=Br(e?.className,t?.className):s==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[s]===void 0&&(n[s]=e[s])}return n}function Pq(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:D0(t.components[r].defaultProps,n)}function nM({props:e,name:t,defaultTheme:r,themeId:n}){let i=v2(r);return n&&(i=i[n]||i),Pq({theme:i,name:t,props:e})}const Vu=typeof window<"u"?R.useLayoutEffect:R.useEffect;function ite(e,t,r,n,i){const[s,u]=R.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return Vu(()=>{if(!r)return;const a=r(e),p=()=>{u(a.matches)};return p(),a.addEventListener("change",p),()=>{a.removeEventListener("change",p)}},[e,r]),s}const ate={...N1},Iq=ate.useSyncExternalStore;function ote(e,t,r,n,i){const s=R.useCallback(()=>t,[t]),u=R.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:g}=n(e);return()=>g}return s},[s,e,n,i,r]),[a,p]=R.useMemo(()=>{if(r===null)return[s,()=>()=>{}];const g=r(e);return[()=>g.matches,_=>(g.addEventListener("change",_),()=>{g.removeEventListener("change",_)})]},[s,r,e]);return Iq(p,a,u)}function Mq(e={}){const{themeId:t}=e;return function(n,i={}){let s=y2();s&&t&&(s=s[t]||s);const u=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:p=u?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:g=!1}=Pq({name:"MuiUseMediaQuery",props:i,theme:s});let _=typeof n=="function"?n(s):n;return _=_.replace(/^@media( ?)/m,""),_.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(Iq!==void 0?ote:ite)(_,a,p,d,g)}}Mq();function ste(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function iM(e,t=0,r=1){return ste(e,t,r)}function lte(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Cd(e){if(e.type)return e;if(e.charAt(0)==="#")return Cd(lte(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(kh(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(kh(10,i))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:r,values:n,colorSpace:i}}const ute=e=>{const t=Cd(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},jv=(e,t)=>{try{return ute(e)}catch{return e}};function b2(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,s)=>s<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function Oq(e){e=Cd(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,s=n*Math.min(i,1-i),u=(d,g=(d+r/30)%12)=>i-s*Math.max(Math.min(g-3,9-g,1),-1);let a="rgb";const p=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return e.type==="hsla"&&(a+="a",p.push(t[3])),b2({type:a,values:p})}function LP(e){e=Cd(e);let t=e.type==="hsl"||e.type==="hsla"?Cd(Oq(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function cte(e,t){const r=LP(e),n=LP(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function $1(e,t){return e=Cd(e),t=iM(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,b2(e)}function fp(e,t,r){try{return $1(e,t)}catch{return e}}function _2(e,t){if(e=Cd(e),t=iM(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return b2(e)}function ga(e,t,r){try{return _2(e,t)}catch{return e}}function x2(e,t){if(e=Cd(e),t=iM(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return b2(e)}function ya(e,t,r){try{return x2(e,t)}catch{return e}}function DP(e,t=.15){return LP(e)>.5?_2(e,t):x2(e,t)}function v_(e,t,r){try{return DP(e,t)}catch{return e}}const Rq=R.createContext(null);function aM(){return R.useContext(Rq)}const fte=typeof Symbol=="function"&&Symbol.for,hte=fte?Symbol.for("mui.nested"):"__THEME_NESTED__";function dte(e,t){return typeof t=="function"?t(e):{...e,...t}}function pte(e){const{children:t,theme:r}=e,n=aM(),i=R.useMemo(()=>{const s=n===null?{...r}:dte(n,r);return s!=null&&(s[hte]=n!==null),s},[r,n]);return Ue.jsx(Rq.Provider,{value:i,children:t})}const Lq=R.createContext();function mte({value:e,...t}){return Ue.jsx(Lq.Provider,{value:e??!0,...t})}const w2=()=>R.useContext(Lq)??!1,Dq=R.createContext(void 0);function gte({value:e,children:t}){return Ue.jsx(Dq.Provider,{value:e,children:t})}function yte(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?D0(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?D0(i,n,t.components.mergeClassNameAndStyle):n}function vte({props:e,name:t}){const r=R.useContext(Dq);return yte({props:e,name:t,theme:{components:r}})}let DD=0;function bte(e){const[t,r]=R.useState(e),n=e||t;return R.useEffect(()=>{t==null&&(DD+=1,r(`mui-${DD}`))},[t]),n}const _te={...N1},kD=_te.useId;function em(e){if(kD!==void 0){const t=kD();return e??t}return bte(e)}function xte(e){const t=y2(),r=em()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Vu(()=>{const s=document.querySelector("head");if(!s)return;const u=s.firstChild;if(i){if(u&&u.hasAttribute?.("data-mui-layer-order")&&u.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,s.prepend(a)}else s.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?Ue.jsx(wq,{styles:i}):null}const FD={};function ND(e,t,r,n=!1){return R.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const s=r(i),u=e?{...t,[e]:s}:s;return n?()=>u:u}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function kq(e){const{children:t,theme:r,themeId:n}=e,i=y2(FD),s=aM()||FD,u=ND(n,i,r),a=ND(n,s,r,!0),p=(n?u[n]:u).direction==="rtl",d=xte(u);return Ue.jsx(pte,{theme:a,children:Ue.jsx(ob.Provider,{value:u,children:Ue.jsx(mte,{value:p,children:Ue.jsxs(gte,{value:n?u[n].components:u.components,children:[d,t]})})})})}const BD={theme:void 0};function wte(e){let t,r;return function(i){let s=t;return(s===void 0||i.theme!==r)&&(BD.theme=i.theme,s=Cq(e(BD)),t=s,r=i.theme),s}}const oM="mode",sM="color-scheme",Ste="data-color-scheme";function Ete(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=oM,colorSchemeStorageKey:s=sM,attribute:u=Ste,colorSchemeNode:a="document.documentElement",nonce:p}=e||{};let d="",g=u;if(u==="class"&&(g=".%s"),u==="data"&&(g="[data-%s]"),g.startsWith(".")){const C=g.substring(1);d+=`${a}.classList.remove('${C}'.replace('%s', light), '${C}'.replace('%s', dark));
      ${a}.classList.add('${C}'.replace('%s', colorScheme));`}const _=g.match(/\[([^[\]]+)\]/);if(_){const[C,S]=_[1].split("=");S||(d+=`${a}.removeAttribute('${C}'.replace('%s', light));
      ${a}.removeAttribute('${C}'.replace('%s', dark));`),d+=`
      ${a}.setAttribute('${C}'.replace('%s', colorScheme), ${S?`${S}.replace('%s', colorScheme)`:'""'});`}else d+=`${a}.setAttribute('${g}', colorScheme);`;return Ue.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${s}-dark') || '${n}';
  const light = localStorage.getItem('${s}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${d}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Cte(){}const Ate=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return Cte;const n=i=>{const s=i.newValue;i.key===e&&r(s)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function B5(){}function jD(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Fq(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function Tte(e){return Fq(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function Pte(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:s=oM,colorSchemeStorageKey:u=sM,storageWindow:a=typeof window>"u"?void 0:window,storageManager:p=Ate,noSsr:d=!1}=e,g=i.join(","),_=i.length>1,C=R.useMemo(()=>p?.({key:s,storageWindow:a}),[p,s,a]),S=R.useMemo(()=>p?.({key:`${u}-light`,storageWindow:a}),[p,u,a]),I=R.useMemo(()=>p?.({key:`${u}-dark`,storageWindow:a}),[p,u,a]),[O,P]=R.useState(()=>{const ee=C?.get(t)||t,J=S?.get(r)||r,le=I?.get(n)||n;return{mode:ee,systemMode:jD(ee),lightColorScheme:J,darkColorScheme:le}}),[k,F]=R.useState(d||!_);R.useEffect(()=>{F(!0)},[]);const B=Tte(O),N=R.useCallback(ee=>{P(J=>{if(ee===J.mode)return J;const le=ee??t;return C?.set(le),{...J,mode:le,systemMode:jD(le)}})},[C,t]),G=R.useCallback(ee=>{ee?typeof ee=="string"?ee&&!g.includes(ee)?console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`):P(J=>{const le={...J};return Fq(J,Z=>{Z==="light"&&(S?.set(ee),le.lightColorScheme=ee),Z==="dark"&&(I?.set(ee),le.darkColorScheme=ee)}),le}):P(J=>{const le={...J},Z=ee.light===null?r:ee.light,H=ee.dark===null?n:ee.dark;return Z&&(g.includes(Z)?(le.lightColorScheme=Z,S?.set(Z)):console.error(`\`${Z}\` does not exist in \`theme.colorSchemes\`.`)),H&&(g.includes(H)?(le.darkColorScheme=H,I?.set(H)):console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`)),le}):P(J=>(S?.set(r),I?.set(n),{...J,lightColorScheme:r,darkColorScheme:n}))},[g,S,I,r,n]),$=R.useCallback(ee=>{O.mode==="system"&&P(J=>{const le=ee?.matches?"dark":"light";return J.systemMode===le?J:{...J,systemMode:le}})},[O.mode]),X=R.useRef($);return X.current=$,R.useEffect(()=>{if(typeof window.matchMedia!="function"||!_)return;const ee=(...le)=>X.current(...le),J=window.matchMedia("(prefers-color-scheme: dark)");return J.addListener(ee),ee(J),()=>{J.removeListener(ee)}},[_]),R.useEffect(()=>{if(_){const ee=C?.subscribe(Z=>{(!Z||["light","dark","system"].includes(Z))&&N(Z||t)})||B5,J=S?.subscribe(Z=>{(!Z||g.match(Z))&&G({light:Z})})||B5,le=I?.subscribe(Z=>{(!Z||g.match(Z))&&G({dark:Z})})||B5;return()=>{ee(),J(),le()}}},[G,N,g,t,a,_,C,S,I]),{...O,mode:k?O.mode:void 0,systemMode:k?O.systemMode:void 0,colorScheme:k?B:void 0,setMode:N,setColorScheme:G}}const Ite="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Mte(e){const{themeId:t,theme:r={},modeStorageKey:n=oM,colorSchemeStorageKey:i=sM,disableTransitionOnChange:s=!1,defaultColorScheme:u,resolveTheme:a}=e,p={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},d=R.createContext(void 0),g=()=>R.useContext(d)||p,_={},C={};function S(k){const{children:F,theme:B,modeStorageKey:N=n,colorSchemeStorageKey:G=i,disableTransitionOnChange:$=s,storageManager:X,storageWindow:ee=typeof window>"u"?void 0:window,documentNode:J=typeof document>"u"?void 0:document,colorSchemeNode:le=typeof document>"u"?void 0:document.documentElement,disableNestedContext:Z=!1,disableStyleSheetGeneration:H=!1,defaultMode:oe="system",forceThemeRerender:ue=!1,noSsr:ce}=k,be=R.useRef(!1),Te=aM(),ve=R.useContext(d),Ce=!!ve&&!Z,$e=R.useMemo(()=>B||(typeof r=="function"?r():r),[B]),Je=$e[t],ge=Je||$e,{colorSchemes:Ee=_,components:Ie=C,cssVarPrefix:Le}=ge,Ve=Object.keys(Ee).filter(Ke=>!!Ee[Ke]).join(","),ht=R.useMemo(()=>Ve.split(","),[Ve]),It=typeof u=="string"?u:u.light,xt=typeof u=="string"?u:u.dark,rt=Ee[It]&&Ee[xt]?oe:Ee[ge.defaultColorScheme]?.palette?.mode||ge.palette?.mode,{mode:zt,setMode:Lt,systemMode:Ft,lightColorScheme:dt,darkColorScheme:ke,colorScheme:fr,setColorScheme:sr}=Pte({supportedColorSchemes:ht,defaultLightColorScheme:It,defaultDarkColorScheme:xt,modeStorageKey:N,colorSchemeStorageKey:G,defaultMode:rt,storageManager:X,storageWindow:ee,noSsr:ce});let xr=zt,tr=fr;Ce&&(xr=ve.mode,tr=ve.colorScheme);let Ge=tr||ge.defaultColorScheme;ge.vars&&!ue&&(Ge=ge.defaultColorScheme);const nt=R.useMemo(()=>{const Ke=ge.generateThemeVars?.()||ge.vars,me={...ge,components:Ie,colorSchemes:Ee,cssVarPrefix:Le,vars:Ke};if(typeof me.generateSpacing=="function"&&(me.spacing=me.generateSpacing()),Ge){const pe=Ee[Ge];pe&&typeof pe=="object"&&Object.keys(pe).forEach(Ae=>{pe[Ae]&&typeof pe[Ae]=="object"?me[Ae]={...me[Ae],...pe[Ae]}:me[Ae]=pe[Ae]})}return a?a(me):me},[ge,Ge,Ie,Ee,Le]),ut=ge.colorSchemeSelector;Vu(()=>{if(tr&&le&&ut&&ut!=="media"){const Ke=ut;let me=ut;if(Ke==="class"&&(me=".%s"),Ke==="data"&&(me="[data-%s]"),Ke?.startsWith("data-")&&!Ke.includes("%s")&&(me=`[${Ke}="%s"]`),me.startsWith("."))le.classList.remove(...ht.map(pe=>me.substring(1).replace("%s",pe))),le.classList.add(me.substring(1).replace("%s",tr));else{const pe=me.replace("%s",tr).match(/\[([^\]]+)\]/);if(pe){const[Ae,Be]=pe[1].split("=");Be||ht.forEach(Ne=>{le.removeAttribute(Ae.replace(tr,Ne))}),le.setAttribute(Ae,Be?Be.replace(/"|'/g,""):"")}else le.setAttribute(me,tr)}}},[tr,ut,le,ht]),R.useEffect(()=>{let Ke;if($&&be.current&&J){const me=J.createElement("style");me.appendChild(J.createTextNode(Ite)),J.head.appendChild(me),window.getComputedStyle(J.body),Ke=setTimeout(()=>{J.head.removeChild(me)},1)}return()=>{clearTimeout(Ke)}},[tr,$,J]),R.useEffect(()=>(be.current=!0,()=>{be.current=!1}),[]);const Nt=R.useMemo(()=>({allColorSchemes:ht,colorScheme:tr,darkColorScheme:ke,lightColorScheme:dt,mode:xr,setColorScheme:sr,setMode:Lt,systemMode:Ft}),[ht,tr,ke,dt,xr,sr,Lt,Ft,nt.colorSchemeSelector]);let Kt=!0;(H||ge.cssVariables===!1||Ce&&Te?.cssVarPrefix===Le)&&(Kt=!1);const Vt=Ue.jsxs(R.Fragment,{children:[Ue.jsx(kq,{themeId:Je?t:void 0,theme:nt,children:F}),Kt&&Ue.jsx(mq,{styles:nt.generateStyleSheets?.()||[]})]});return Ce?Vt:Ue.jsx(d.Provider,{value:Nt,children:Vt})}const I=typeof u=="string"?u:u.light,O=typeof u=="string"?u:u.dark;return{CssVarsProvider:S,useColorScheme:g,getInitColorSchemeScript:k=>Ete({colorSchemeStorageKey:i,defaultLightColorScheme:I,defaultDarkColorScheme:O,modeStorageKey:n,...k})}}function Ote(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const zD=(e,t,r,n=[])=>{let i=e;t.forEach((s,u)=>{u===t.length-1?Array.isArray(i)?i[Number(s)]=r:i&&typeof i=="object"&&(i[s]=r):i&&typeof i=="object"&&(i[s]||(i[s]=n.includes(s)?[]:{}),i=i[s])})},Rte=(e,t,r)=>{function n(i,s=[],u=[]){Object.entries(i).forEach(([a,p])=>{(!r||r&&!r([...s,a]))&&p!=null&&(typeof p=="object"&&Object.keys(p).length>0?n(p,[...s,a],Array.isArray(p)?[...u,a]:u):t([...s,a],p,u))})}n(e)},Lte=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function j5(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},s={},u={};return Rte(e,(a,p,d)=>{if((typeof p=="string"||typeof p=="number")&&(!n||!n(a,p))){const g=`--${r?`${r}-`:""}${a.join("-")}`,_=Lte(a,p);Object.assign(i,{[g]:_}),zD(s,a,`var(${g})`,d),zD(u,a,`var(${g}, ${_})`,d)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:u}}function Dte(e,t={}){const{getSelector:r=k,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:s}=t,{colorSchemes:u={},components:a,defaultColorScheme:p="light",...d}=e,{vars:g,css:_,varsWithDefaults:C}=j5(d,t);let S=C;const I={},{[p]:O,...P}=u;if(Object.entries(P||{}).forEach(([N,G])=>{const{vars:$,css:X,varsWithDefaults:ee}=j5(G,t);S=is(S,ee),I[N]={css:X,vars:$}}),O){const{css:N,vars:G,varsWithDefaults:$}=j5(O,t);S=is(S,$),I[p]={css:N,vars:G}}function k(N,G){let $=i;if(i==="class"&&($=".%s"),i==="data"&&($="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&($=`[${i}="%s"]`),N){if($==="media")return e.defaultColorScheme===N?":root":{[`@media (prefers-color-scheme: ${u[N]?.palette?.mode||N})`]:{":root":G}};if($)return e.defaultColorScheme===N?`:root, ${$.replace("%s",String(N))}`:$.replace("%s",String(N))}return":root"}return{vars:S,generateThemeVars:()=>{let N={...g};return Object.entries(I).forEach(([,{vars:G}])=>{N=is(N,G)}),N},generateStyleSheets:()=>{const N=[],G=e.defaultColorScheme||"light";function $(J,le){Object.keys(le).length&&N.push(typeof J=="string"?{[J]:{...le}}:J)}$(r(void 0,{..._}),_);const{[G]:X,...ee}=I;if(X){const{css:J}=X,le=u[G]?.palette?.mode,Z=!n&&le?{colorScheme:le,...J}:{...J};$(r(G,{...Z}),Z)}return Object.entries(ee).forEach(([J,{css:le}])=>{const Z=u[J]?.palette?.mode,H=!n&&Z?{colorScheme:Z,...le}:{...le};$(r(J,{...H}),H)}),s&&N.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),N}}}function kte(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function Zn(e,t,r=void 0){const n={};for(const i in e){const s=e[i];let u="",a=!0;for(let p=0;p<s.length;p+=1){const d=s[p];d&&(u+=(a===!0?"":" ")+t(d),a=!1,r&&r[d]&&(u+=" "+r[d]))}n[i]=u}return n}function d1(e,t){return R.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const Fte=g2(),Nte=Qp("div",{name:"MuiStack",slot:"Root"});function Bte(e){return nM({props:e,name:"MuiStack",defaultTheme:Fte})}function jte(e,t){const r=R.Children.toArray(e).filter(Boolean);return r.reduce((n,i,s)=>(n.push(i),s<r.length-1&&n.push(R.cloneElement(t,{key:`separator-${s}`})),n),[])}const zte=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],$te=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Xc({theme:t},k5({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n}))};if(e.spacing){const n=c2(t),i=Object.keys(t.breakpoints.values).reduce((p,d)=>((typeof e.spacing=="object"&&e.spacing[d]!=null||typeof e.direction=="object"&&e.direction[d]!=null)&&(p[d]=!0),p),{}),s=k5({values:e.direction,base:i}),u=k5({values:e.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((p,d,g)=>{if(!s[p]){const C=d>0?s[g[d-1]]:"column";s[p]=C}}),r=is(r,Xc({theme:t},u,(p,d)=>e.useFlexGap?{gap:qp(n,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${zte(d?s[d]:e.direction)}`]:qp(n,p)}}))}return r=ree(t.breakpoints,r),r};function qte(e={}){const{createStyledComponent:t=Nte,useThemeProps:r=Bte,componentName:n="MuiStack"}=e,i=()=>Zn({root:["root"]},p=>Wn(n,p),{}),s=t($te);return R.forwardRef(function(p,d){const g=r(p),_=tM(g),{component:C="div",direction:S="column",spacing:I=0,divider:O,children:P,className:k,useFlexGap:F=!1,...B}=_,N={direction:S,spacing:I,useFlexGap:F},G=i();return Ue.jsx(s,{as:C,ownerState:N,ref:d,className:Br(G.root,k),...B,children:O?jte(P,O):P})})}const k0={black:"#000",white:"#fff"},Ute={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$m={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},qm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},uv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Um={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Vm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Gm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Nq(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:k0.white,default:k0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Bq=Nq();function jq(){return{text:{primary:k0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:k0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const kP=jq();function $D(e,t,r,n){const i=n.light||n,s=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=x2(e.main,i):t==="dark"&&(e.dark=_2(e.main,s)))}function qD(e,t,r,n,i){const s=i.light||i,u=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(s*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(u*100).toFixed(0)}%)`))}function Vte(e="light"){return e==="dark"?{main:Um[200],light:Um[50],dark:Um[400]}:{main:Um[700],light:Um[400],dark:Um[800]}}function Gte(e="light"){return e==="dark"?{main:$m[200],light:$m[50],dark:$m[400]}:{main:$m[500],light:$m[300],dark:$m[700]}}function Hte(e="light"){return e==="dark"?{main:qm[500],light:qm[300],dark:qm[700]}:{main:qm[700],light:qm[400],dark:qm[800]}}function Wte(e="light"){return e==="dark"?{main:Vm[400],light:Vm[300],dark:Vm[700]}:{main:Vm[700],light:Vm[500],dark:Vm[900]}}function Zte(e="light"){return e==="dark"?{main:Gm[400],light:Gm[300],dark:Gm[700]}:{main:Gm[800],light:Gm[500],dark:Gm[900]}}function Xte(e="light"){return e==="dark"?{main:uv[400],light:uv[300],dark:uv[700]}:{main:"#ed6c02",light:uv[500],dark:uv[900]}}function Kte(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function lM(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...s}=e,u=e.primary||Vte(t),a=e.secondary||Gte(t),p=e.error||Hte(t),d=e.info||Wte(t),g=e.success||Zte(t),_=e.warning||Xte(t);function C(P){return i?Kte(P):cte(P,kP.text.primary)>=r?kP.text.primary:Bq.text.primary}const S=({color:P,name:k,mainShade:F=500,lightShade:B=300,darkShade:N=700})=>{if(P={...P},!P.main&&P[F]&&(P.main=P[F]),!P.hasOwnProperty("main"))throw new Error(kh(11,k?` (${k})`:"",F));if(typeof P.main!="string")throw new Error(kh(12,k?` (${k})`:"",JSON.stringify(P.main)));return i?(qD(i,P,"light",B,n),qD(i,P,"dark",N,n)):($D(P,"light",B,n),$D(P,"dark",N,n)),P.contrastText||(P.contrastText=C(P.main)),P};let I;return t==="light"?I=Nq():t==="dark"&&(I=jq()),is({common:{...k0},mode:t,primary:S({color:u,name:"primary"}),secondary:S({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:p,name:"error"}),warning:S({color:_,name:"warning"}),info:S({color:d,name:"info"}),success:S({color:g,name:"success"}),grey:Ute,contrastThreshold:r,getContrastText:C,augmentColor:S,tonalOffset:n,...I},s)}function Yte(e){const t={};return Object.entries(e).forEach(n=>{const[i,s]=n;typeof s=="object"&&(t[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),t}function Jte(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Qte(e){return Math.round(e*1e5)/1e5}const UD={textTransform:"uppercase"},VD='"Roboto", "Helvetica", "Arial", sans-serif';function zq(e,t){const{fontFamily:r=VD,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:u=500,fontWeightBold:a=700,htmlFontSize:p=16,allVariants:d,pxToRem:g,..._}=typeof t=="function"?t(e):t,C=n/14,S=g||(P=>`${P/p*C}rem`),I=(P,k,F,B,N)=>({fontFamily:r,fontWeight:P,fontSize:S(k),lineHeight:F,...r===VD?{letterSpacing:`${Qte(B/k)}em`}:{},...N,...d}),O={h1:I(i,96,1.167,-1.5),h2:I(i,60,1.2,-.5),h3:I(s,48,1.167,0),h4:I(s,34,1.235,.25),h5:I(s,24,1.334,0),h6:I(u,20,1.6,.15),subtitle1:I(s,16,1.75,.15),subtitle2:I(u,14,1.57,.1),body1:I(s,16,1.5,.15),body2:I(s,14,1.43,.15),button:I(u,14,1.75,.4,UD),caption:I(s,12,1.66,.4),overline:I(s,12,2.66,1,UD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return is({htmlFontSize:p,pxToRem:S,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:u,fontWeightBold:a,...O},_,{clone:!1})}const ere=.2,tre=.14,rre=.12;function ao(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ere})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${tre})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${rre})`].join(",")}const nre=["none",ao(0,2,1,-1,0,1,1,0,0,1,3,0),ao(0,3,1,-2,0,2,2,0,0,1,5,0),ao(0,3,3,-2,0,3,4,0,0,1,8,0),ao(0,2,4,-1,0,4,5,0,0,1,10,0),ao(0,3,5,-1,0,5,8,0,0,1,14,0),ao(0,3,5,-1,0,6,10,0,0,1,18,0),ao(0,4,5,-2,0,7,10,1,0,2,16,1),ao(0,5,5,-3,0,8,10,1,0,3,14,2),ao(0,5,6,-3,0,9,12,1,0,3,16,2),ao(0,6,6,-3,0,10,14,1,0,4,18,3),ao(0,6,7,-4,0,11,15,1,0,4,20,3),ao(0,7,8,-4,0,12,17,2,0,5,22,4),ao(0,7,8,-4,0,13,19,2,0,5,24,4),ao(0,7,9,-4,0,14,21,2,0,5,26,4),ao(0,8,9,-5,0,15,22,2,0,6,28,5),ao(0,8,10,-5,0,16,24,2,0,6,30,5),ao(0,8,11,-5,0,17,26,2,0,6,32,5),ao(0,9,11,-5,0,18,28,2,0,7,34,6),ao(0,9,12,-6,0,19,29,2,0,7,36,6),ao(0,10,13,-6,0,20,31,3,0,8,38,7),ao(0,10,13,-6,0,21,33,3,0,8,40,7),ao(0,10,14,-6,0,22,35,3,0,8,42,7),ao(0,11,14,-7,0,23,36,3,0,9,44,8),ao(0,11,15,-7,0,24,38,3,0,9,46,8)],ire={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},are={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function GD(e){return`${Math.round(e)}ms`}function ore(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function sre(e){const t={...ire,...e.easing},r={...are,...e.duration};return{getAutoHeightDuration:ore,create:(i=["all"],s={})=>{const{duration:u=r.standard,easing:a=t.easeInOut,delay:p=0,...d}=s;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof u=="string"?u:GD(u)} ${a} ${typeof p=="string"?p:GD(p)}`).join(",")},...e,easing:t,duration:r}}const lre={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ure(e){return Lf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function $q(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let s=0;s<i.length;s++){const[u,a]=i[s];!ure(a)||u.startsWith("unstable_")?delete n[u]:Lf(a)&&(n[u]={...a},r(n[u]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function HD(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const cre=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function fre(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:$1(t,cre(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${HD(r)})`:x2(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${HD(r)})`:_2(t,r)}})}function FP(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:s={},transitions:u={},typography:a={},shape:p,colorSpace:d,...g}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(kh(20));const _=lM({...s,colorSpace:d}),C=g2(e);let S=is(C,{mixins:Jte(C.breakpoints,n),palette:_,shadows:nre.slice(),typography:zq(_,a),transitions:sre(u),zIndex:{...lre}});return S=is(S,g),S=t.reduce((I,O)=>is(I,O),S),S.unstable_sxConfig={...ub,...g?.unstable_sxConfig},S.unstable_sx=function(O){return Ed({sx:O,theme:this})},S.toRuntimeSource=$q,fre(S),S}function NP(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const hre=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=NP(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function qq(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Uq(e){return e==="dark"?hre:[]}function dre(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...s}=e,u=lM({...t,colorSpace:i});return{palette:u,opacity:{...qq(u.mode),...r},overlays:n||Uq(u.mode),...s}}function pre(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const mre=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],gre=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const u={};return mre(e.cssVarPrefix).forEach(a=>{u[a]=r[a],delete r[a]}),s==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:u}}:s?{[s.replace("%s",t)]:u,[`${n}, ${s.replace("%s",t)}`]:r}:{[n]:{...r,...u}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(t))}`}else if(t){if(s==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(s)return s.replace("%s",String(t))}return n};function yre(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function wr(e,t,r){!e[t]&&r&&(e[t]=r)}function zv(e){return typeof e!="string"||!e.startsWith("hsl")?e:Oq(e)}function mh(e,t){`${t}Channel`in e||(e[`${t}Channel`]=jv(zv(e[t])))}function vre(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ef=e=>{try{return e()}catch{}},bre=(e="mui")=>Ote(e);function z5(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const s=i==="dark"?"dark":"light";if(!n){t[i]=dre({...r,palette:{mode:s,...r?.palette},colorSpace:e});return}const{palette:u,...a}=FP({...n,palette:{mode:s,...r?.palette},colorSpace:e});return t[i]={...r,palette:u,opacity:{...qq(s),...r?.opacity},overlays:r?.overlays||Uq(s)},a}function _re(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",nativeColor:u=!1,shouldSkipGeneratingVar:a=pre,colorSchemeSelector:p=r.light&&r.dark?"media":void 0,rootSelector:d=":root",...g}=e,_=Object.keys(r)[0],C=n||(r.light&&_!=="light"?"light":_),S=bre(s),{[C]:I,light:O,dark:P,...k}=r,F={...k};let B=I;if((C==="dark"&&!("dark"in r)||C==="light"&&!("light"in r))&&(B=!0),!B)throw new Error(kh(21,C));let N;u&&(N="oklch");const G=z5(N,F,B,g,C);O&&!F.light&&z5(N,F,O,void 0,"light"),P&&!F.dark&&z5(N,F,P,void 0,"dark");let $={defaultColorScheme:C,...G,cssVarPrefix:s,colorSchemeSelector:p,rootSelector:d,getCssVar:S,colorSchemes:F,font:{...Yte(G.typography),...G.font},spacing:vre(g.spacing)};Object.keys($.colorSchemes).forEach(Z=>{const H=$.colorSchemes[Z].palette,oe=ce=>{const be=ce.split("-"),Te=be[1],ve=be[2];return S(ce,H[Te][ve])};H.mode==="light"&&(wr(H.common,"background","#fff"),wr(H.common,"onBackground","#000")),H.mode==="dark"&&(wr(H.common,"background","#000"),wr(H.common,"onBackground","#fff"));function ue(ce,be,Te){if(N){let ve;return ce===fp&&(ve=`transparent ${((1-Te)*100).toFixed(0)}%`),ce===ga&&(ve=`#000 ${(Te*100).toFixed(0)}%`),ce===ya&&(ve=`#fff ${(Te*100).toFixed(0)}%`),`color-mix(in ${N}, ${be}, ${ve})`}return ce(be,Te)}if(yre(H,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),H.mode==="light"){wr(H.Alert,"errorColor",ue(ga,H.error.light,.6)),wr(H.Alert,"infoColor",ue(ga,H.info.light,.6)),wr(H.Alert,"successColor",ue(ga,H.success.light,.6)),wr(H.Alert,"warningColor",ue(ga,H.warning.light,.6)),wr(H.Alert,"errorFilledBg",oe("palette-error-main")),wr(H.Alert,"infoFilledBg",oe("palette-info-main")),wr(H.Alert,"successFilledBg",oe("palette-success-main")),wr(H.Alert,"warningFilledBg",oe("palette-warning-main")),wr(H.Alert,"errorFilledColor",Ef(()=>H.getContrastText(H.error.main))),wr(H.Alert,"infoFilledColor",Ef(()=>H.getContrastText(H.info.main))),wr(H.Alert,"successFilledColor",Ef(()=>H.getContrastText(H.success.main))),wr(H.Alert,"warningFilledColor",Ef(()=>H.getContrastText(H.warning.main))),wr(H.Alert,"errorStandardBg",ue(ya,H.error.light,.9)),wr(H.Alert,"infoStandardBg",ue(ya,H.info.light,.9)),wr(H.Alert,"successStandardBg",ue(ya,H.success.light,.9)),wr(H.Alert,"warningStandardBg",ue(ya,H.warning.light,.9)),wr(H.Alert,"errorIconColor",oe("palette-error-main")),wr(H.Alert,"infoIconColor",oe("palette-info-main")),wr(H.Alert,"successIconColor",oe("palette-success-main")),wr(H.Alert,"warningIconColor",oe("palette-warning-main")),wr(H.AppBar,"defaultBg",oe("palette-grey-100")),wr(H.Avatar,"defaultBg",oe("palette-grey-400")),wr(H.Button,"inheritContainedBg",oe("palette-grey-300")),wr(H.Button,"inheritContainedHoverBg",oe("palette-grey-A100")),wr(H.Chip,"defaultBorder",oe("palette-grey-400")),wr(H.Chip,"defaultAvatarColor",oe("palette-grey-700")),wr(H.Chip,"defaultIconColor",oe("palette-grey-700")),wr(H.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),wr(H.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),wr(H.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),wr(H.LinearProgress,"primaryBg",ue(ya,H.primary.main,.62)),wr(H.LinearProgress,"secondaryBg",ue(ya,H.secondary.main,.62)),wr(H.LinearProgress,"errorBg",ue(ya,H.error.main,.62)),wr(H.LinearProgress,"infoBg",ue(ya,H.info.main,.62)),wr(H.LinearProgress,"successBg",ue(ya,H.success.main,.62)),wr(H.LinearProgress,"warningBg",ue(ya,H.warning.main,.62)),wr(H.Skeleton,"bg",N?ue(fp,H.text.primary,.11):`rgba(${oe("palette-text-primaryChannel")} / 0.11)`),wr(H.Slider,"primaryTrack",ue(ya,H.primary.main,.62)),wr(H.Slider,"secondaryTrack",ue(ya,H.secondary.main,.62)),wr(H.Slider,"errorTrack",ue(ya,H.error.main,.62)),wr(H.Slider,"infoTrack",ue(ya,H.info.main,.62)),wr(H.Slider,"successTrack",ue(ya,H.success.main,.62)),wr(H.Slider,"warningTrack",ue(ya,H.warning.main,.62));const ce=N?ue(ga,H.background.default,.6825):v_(H.background.default,.8);wr(H.SnackbarContent,"bg",ce),wr(H.SnackbarContent,"color",Ef(()=>N?kP.text.primary:H.getContrastText(ce))),wr(H.SpeedDialAction,"fabHoverBg",v_(H.background.paper,.15)),wr(H.StepConnector,"border",oe("palette-grey-400")),wr(H.StepContent,"border",oe("palette-grey-400")),wr(H.Switch,"defaultColor",oe("palette-common-white")),wr(H.Switch,"defaultDisabledColor",oe("palette-grey-100")),wr(H.Switch,"primaryDisabledColor",ue(ya,H.primary.main,.62)),wr(H.Switch,"secondaryDisabledColor",ue(ya,H.secondary.main,.62)),wr(H.Switch,"errorDisabledColor",ue(ya,H.error.main,.62)),wr(H.Switch,"infoDisabledColor",ue(ya,H.info.main,.62)),wr(H.Switch,"successDisabledColor",ue(ya,H.success.main,.62)),wr(H.Switch,"warningDisabledColor",ue(ya,H.warning.main,.62)),wr(H.TableCell,"border",ue(ya,ue(fp,H.divider,1),.88)),wr(H.Tooltip,"bg",ue(fp,H.grey[700],.92))}if(H.mode==="dark"){wr(H.Alert,"errorColor",ue(ya,H.error.light,.6)),wr(H.Alert,"infoColor",ue(ya,H.info.light,.6)),wr(H.Alert,"successColor",ue(ya,H.success.light,.6)),wr(H.Alert,"warningColor",ue(ya,H.warning.light,.6)),wr(H.Alert,"errorFilledBg",oe("palette-error-dark")),wr(H.Alert,"infoFilledBg",oe("palette-info-dark")),wr(H.Alert,"successFilledBg",oe("palette-success-dark")),wr(H.Alert,"warningFilledBg",oe("palette-warning-dark")),wr(H.Alert,"errorFilledColor",Ef(()=>H.getContrastText(H.error.dark))),wr(H.Alert,"infoFilledColor",Ef(()=>H.getContrastText(H.info.dark))),wr(H.Alert,"successFilledColor",Ef(()=>H.getContrastText(H.success.dark))),wr(H.Alert,"warningFilledColor",Ef(()=>H.getContrastText(H.warning.dark))),wr(H.Alert,"errorStandardBg",ue(ga,H.error.light,.9)),wr(H.Alert,"infoStandardBg",ue(ga,H.info.light,.9)),wr(H.Alert,"successStandardBg",ue(ga,H.success.light,.9)),wr(H.Alert,"warningStandardBg",ue(ga,H.warning.light,.9)),wr(H.Alert,"errorIconColor",oe("palette-error-main")),wr(H.Alert,"infoIconColor",oe("palette-info-main")),wr(H.Alert,"successIconColor",oe("palette-success-main")),wr(H.Alert,"warningIconColor",oe("palette-warning-main")),wr(H.AppBar,"defaultBg",oe("palette-grey-900")),wr(H.AppBar,"darkBg",oe("palette-background-paper")),wr(H.AppBar,"darkColor",oe("palette-text-primary")),wr(H.Avatar,"defaultBg",oe("palette-grey-600")),wr(H.Button,"inheritContainedBg",oe("palette-grey-800")),wr(H.Button,"inheritContainedHoverBg",oe("palette-grey-700")),wr(H.Chip,"defaultBorder",oe("palette-grey-700")),wr(H.Chip,"defaultAvatarColor",oe("palette-grey-300")),wr(H.Chip,"defaultIconColor",oe("palette-grey-300")),wr(H.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),wr(H.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),wr(H.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),wr(H.LinearProgress,"primaryBg",ue(ga,H.primary.main,.5)),wr(H.LinearProgress,"secondaryBg",ue(ga,H.secondary.main,.5)),wr(H.LinearProgress,"errorBg",ue(ga,H.error.main,.5)),wr(H.LinearProgress,"infoBg",ue(ga,H.info.main,.5)),wr(H.LinearProgress,"successBg",ue(ga,H.success.main,.5)),wr(H.LinearProgress,"warningBg",ue(ga,H.warning.main,.5)),wr(H.Skeleton,"bg",N?ue(fp,H.text.primary,.13):`rgba(${oe("palette-text-primaryChannel")} / 0.13)`),wr(H.Slider,"primaryTrack",ue(ga,H.primary.main,.5)),wr(H.Slider,"secondaryTrack",ue(ga,H.secondary.main,.5)),wr(H.Slider,"errorTrack",ue(ga,H.error.main,.5)),wr(H.Slider,"infoTrack",ue(ga,H.info.main,.5)),wr(H.Slider,"successTrack",ue(ga,H.success.main,.5)),wr(H.Slider,"warningTrack",ue(ga,H.warning.main,.5));const ce=N?ue(ya,H.background.default,.985):v_(H.background.default,.98);wr(H.SnackbarContent,"bg",ce),wr(H.SnackbarContent,"color",Ef(()=>N?Bq.text.primary:H.getContrastText(ce))),wr(H.SpeedDialAction,"fabHoverBg",v_(H.background.paper,.15)),wr(H.StepConnector,"border",oe("palette-grey-600")),wr(H.StepContent,"border",oe("palette-grey-600")),wr(H.Switch,"defaultColor",oe("palette-grey-300")),wr(H.Switch,"defaultDisabledColor",oe("palette-grey-600")),wr(H.Switch,"primaryDisabledColor",ue(ga,H.primary.main,.55)),wr(H.Switch,"secondaryDisabledColor",ue(ga,H.secondary.main,.55)),wr(H.Switch,"errorDisabledColor",ue(ga,H.error.main,.55)),wr(H.Switch,"infoDisabledColor",ue(ga,H.info.main,.55)),wr(H.Switch,"successDisabledColor",ue(ga,H.success.main,.55)),wr(H.Switch,"warningDisabledColor",ue(ga,H.warning.main,.55)),wr(H.TableCell,"border",ue(ga,ue(fp,H.divider,1),.68)),wr(H.Tooltip,"bg",ue(fp,H.grey[700],.92))}mh(H.background,"default"),mh(H.background,"paper"),mh(H.common,"background"),mh(H.common,"onBackground"),mh(H,"divider"),Object.keys(H).forEach(ce=>{const be=H[ce];ce!=="tonalOffset"&&be&&typeof be=="object"&&(be.main&&wr(H[ce],"mainChannel",jv(zv(be.main))),be.light&&wr(H[ce],"lightChannel",jv(zv(be.light))),be.dark&&wr(H[ce],"darkChannel",jv(zv(be.dark))),be.contrastText&&wr(H[ce],"contrastTextChannel",jv(zv(be.contrastText))),ce==="text"&&(mh(H[ce],"primary"),mh(H[ce],"secondary")),ce==="action"&&(be.active&&mh(H[ce],"active"),be.selected&&mh(H[ce],"selected")))})}),$=t.reduce((Z,H)=>is(Z,H),$);const X={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:gre($),enableContrastVars:u},{vars:ee,generateThemeVars:J,generateStyleSheets:le}=Dte($,X);return $.vars=ee,Object.entries($.colorSchemes[$.defaultColorScheme]).forEach(([Z,H])=>{$[Z]=H}),$.generateThemeVars=J,$.generateStyleSheets=le,$.generateSpacing=function(){return xq(g.spacing,c2(this))},$.getColorSchemeSelector=kte(p),$.spacing=$.generateSpacing(),$.shouldSkipGeneratingVar=a,$.unstable_sxConfig={...ub,...g?.unstable_sxConfig},$.unstable_sx=function(H){return Ed({sx:H,theme:this})},$.toRuntimeSource=$q,$}function WD(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:lM({...r===!0?{}:r.palette,mode:t})})}function Ad(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:s=r?.mode,...u}=e,a=s||"light",p=i?.[a],d={...i,...r?{[a]:{...typeof p!="boolean"&&p,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return FP(e,...t);let g=r;"palette"in e||d[a]&&(d[a]!==!0?g=d[a].palette:a==="dark"&&(g={mode:"dark"}));const _=FP({...e,palette:g},...t);return _.defaultColorScheme=a,_.colorSchemes=d,_.palette.mode==="light"&&(_.colorSchemes.light={...d.light!==!0&&d.light,palette:_.palette},WD(_,"dark",d.dark)),_.palette.mode==="dark"&&(_.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:_.palette},WD(_,"light",d.light)),_}return!r&&!("light"in d)&&a==="light"&&(d.light=!0),_re({...u,colorSchemes:d,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const S2=Ad();function Uf(){const e=v2(S2);return e[mc]||e}function mi({props:e,name:t}){return nM({props:e,name:t,defaultTheme:S2,themeId:mc})}function Vq(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const El=e=>Vq(e)&&e!=="classes",Qt=Tq({themeId:mc,defaultTheme:S2,rootShouldForwardProp:El});function xre({theme:e,...t}){const r=mc in e?e[mc]:void 0;return Ue.jsx(kq,{...t,themeId:r?mc:void 0,theme:r||e})}const b_={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:wre}=Mte({themeId:mc,theme:()=>Ad({cssVariables:!0}),colorSchemeStorageKey:b_.colorSchemeStorageKey,modeStorageKey:b_.modeStorageKey,defaultColorScheme:{light:b_.defaultLightColorScheme,dark:b_.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:zq(e.palette,e.typography)};return t.unstable_sx=function(n){return Ed({sx:n,theme:this})},t}}),Sre=wre;function Gq({theme:e,...t}){const r=R.useMemo(()=>{if(typeof e=="function")return e;const n=mc in e?e[mc]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?Ue.jsx(xre,{theme:r,...t}):Ue.jsx(Sre,{theme:e,...t})}const Ere=Ad({palette:{mode:"light"}});Ad({palette:{mode:"dark"}});const Cre=e=>({...Ere,palette:{mode:e,primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}),Are=e=>{const t=Cre(["light","dark"].includes(e)?e:"light");return Ad(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})},Tre={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Ys=[];for(let e=0;e<256;++e)Ys.push((e+256).toString(16).slice(1));function Pre(e,t=0){return(Ys[e[t+0]]+Ys[e[t+1]]+Ys[e[t+2]]+Ys[e[t+3]]+"-"+Ys[e[t+4]]+Ys[e[t+5]]+"-"+Ys[e[t+6]]+Ys[e[t+7]]+"-"+Ys[e[t+8]]+Ys[e[t+9]]+"-"+Ys[e[t+10]]+Ys[e[t+11]]+Ys[e[t+12]]+Ys[e[t+13]]+Ys[e[t+14]]+Ys[e[t+15]]).toLowerCase()}let $5;const Ire=new Uint8Array(16);function Mre(){if(!$5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$5=crypto.getRandomValues.bind(crypto)}return $5(Ire)}const Ore=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ZD={randomUUID:Ore};function F0(e,t,r){if(ZD.randomUUID&&!e)return ZD.randomUUID();e=e||{};const n=e.random??e.rng?.()??Mre();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Pre(n)}const Rre=qe.createContext({});function Hq(e){const[t,r]=qe.useState([]),[n,i]=qe.useState([]),[s,u]=qe.useState([]),[a,p]=qe.useState(Tre.sourceOptions_tiles[0]),d=R.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),g=O=>{if(!O)return;const P=[],k=[];O.layers.forEach((F,B)=>{F.type==="symbol"?k.push(F):(B===0&&(F.id=O.name||"background"),P.push(F))}),i(P),u(k)};R.useEffect(()=>{if(t.filter(O=>!O?.id).length){const O=[...t];O.forEach(P=>{P?.id||(P.id=F0())}),r(O)}},[t]);const _=R.useCallback((O,P)=>{const k=t?.filter?.(F=>F.id===O);if(k.length>0){const F=[...t],B=k[0],N=t.indexOf(B),G=P(N);G>=0&&G<=t.length-1&&(F.splice(N,1),F.splice(G,0,B),r(F))}},[t]),C=R.useCallback(O=>{_(O,P=>P+1)},[_]),S=R.useCallback(O=>{_(O,P=>P-1)},[_]),I={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:s,setSymbolLayers:u,updateStyle:g,vtLayerConfig:d,tileUrl:a,setTileUrl:p,moveUp:S,moveDown:C,moveLayer:_};return Ue.jsx(Rre.Provider,{value:I,children:e.children})}Hq.__docgenInfo={description:"",methods:[],displayName:"LayerContextProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const E2=qe.createContext({}),C2=({children:e})=>{const[t,r]=R.useState(void 0),[n,i]=R.useState([]),s=R.useRef([]),u=R.useRef({}),a=g=>{if(g){typeof u.current[g]<"u"&&delete u.current[g];const _=s.current.indexOf(g);_>-1&&s.current.splice(_,1),i([...s.current]),s.current.length===0&&t&&r(void 0)}else a("anonymous_map")},d={map:t,setMap:g=>{if(r(g),n.length===0){const _="anonymous_map";i([...n,_]),u.current[_]=g}},maps:u.current,mapIds:n,registerMap:(g,_)=>{g&&_&&(u.current[g]=_,s.current.push(g),i([...s.current]),(!t||t?.cancelled===!0)&&r(_))},removeMap:a,mapExists:g=>g&&Object.keys(u.current).indexOf(g)===-1?!1:!(!g&&!t),getMap:g=>g&&n.indexOf(g)!==-1?u.current[g]:!g&&t?t:null};return Ue.jsx(E2.Provider,{value:d,children:Ue.jsx(Hq,{children:Ue.jsx(Gq,{theme:Are("light"),children:e})})})};C2.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,methods:[],displayName:"MapComponentsProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const Wq={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},cb=e=>{const t=R.useRef(null),r=R.useRef(null),n=R.useContext(E2),i=R.useRef(e.mapId),s=R.useRef(!1),u=R.useRef(e.options?.style);return R.useEffect(()=>{const a=i.current;return()=>{s.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),R.useEffect(()=>{s.current||r.current&&(s.current=!0,e?.options?.style&&(u.current=JSON.stringify(e.options.style)),t.current=new UJ({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:Wq?.options?.style},container:r.current},onReady:(a,p)=>{a.once("load",()=>{p?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,p):n.setMap(p))})}}))},[e.options,e.mapId]),R.useEffect(()=>{if(t.current?.map&&e?.options?.style){const a=JSON.stringify(e.options.style);u.current!==a&&(u.current=a,t.current.map.setStyle(e.options.style))}},[e?.options?.style]),Ue.jsx("div",{ref:r,className:"mapContainer",style:e.style})};cb.defaultProps=Wq;cb.__docgenInfo={description:`Creates a MapLibreGlWrapper instance and registers it in MapContext
after the MapLibre-gl load event has fired.

MapLibreMap returns the html node that will be used by MapLibre-gl to render the map.
This Component must be kept unaware of any related components that interact with the MapLibre-gl
instance.

@category Map components`,methods:[],displayName:"MapLibreMap",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the MapLibreGl(Wrapper) instance in mapContext",defaultValue:{value:"undefined",computed:!0}},options:{required:!1,tsType:{name:"Partial",elements:[{name:"MapOptionsType"}],raw:"Partial<MapOptionsType>"},description:`Config object that is passed to the MapLibreGl constructor as first parameter.
See https://maplibre.org/maplibre-gl-js-docs/api/map/ for a formal documentation of al
available properties.`,defaultValue:{value:`{
	center: { lng: 8.607, lat: 53.1409349 },
	zoom: 11,
	container: '',
	style: {
		version: 8,
		name: 'blank',
		center: [0, 0],
		zoom: 0,
		sources: {},
		sprite: 'https://wms.wheregroup.com/tileserver/sprites/osm-bright',
		glyphs: 'https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf',
		layers: [
			{
				id: '_background',
				type: 'background',
				paint: {
					'background-color': 'rgba(0,0,0,0)',
				},
			},
		],
	},
}`,computed:!1}},style:{required:!1,tsType:{name:"object"},description:"css style definition passed to the map container DOM element"}}};function Zq(e){const t=R.useContext(E2),r=R.useRef(!1),n=R.useRef(null),[i,s]=R.useState(),u=R.useRef(void 0),[a,p]=R.useState([]),d=R.useRef(""),g=R.useRef(F0()),_=R.useCallback(S=>!e?.filter?.includeBaseLayers&&S?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(S.id):S.id.includes(e.filter.matchLayerIds):!0,[e.filter]),C=R.useCallback(()=>{if(!n.current)return;const S=n.current.wrapper.layerState.filter(_),I=JSON.stringify(S);d.current!==I&&(d.current=I,p(S))},[_]);return R.useEffect(()=>{const S=g.current;return()=>{n.current&&(n.current.cleanup(S),n.current=null),r.current=!1}},[]),R.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(s(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{u.current!==n.current?.wrapper.viewportStateString&&s(n.current?.wrapper.viewportState)},g.current)),e?.watch?.layers&&(C(),n.current.wrapper.on("layerchange",C,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},g.current))}},[t.mapIds,t,e.mapId,C,e]),{layers:a,viewport:i}}Zq.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function fb(e){const t=R.useContext(E2),[r,n]=R.useState({map:void 0,ready:!1}),i=Zq({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),s=R.useRef(null),u=R.useRef(F0()),a=()=>{s.current&&s.current.cleanup(u.current)};return R.useEffect(()=>()=>{a(),s.current=null},[]),R.useEffect(()=>{if(s.current&&s.current.cancelled===!0&&(s.current=null,n({map:void 0,ready:!1})),!(s.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let p=!1;if(i?.layers?.forEach(d=>{d.id===e?.waitForLayer&&(p=!0)}),!p)return}s.current=t.getMap(e?.mapId),n({map:s.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:u.current,layers:i.layers,cleanup:a}}function XD(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function Lre(e){return Ue.jsx(wq,{...e,defaultTheme:S2,themeId:mc})}function uM(e){return function(r){return Ue.jsx(Lre,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function Dre(){return tM}const yi=wte;function Yn(e){return vte(e)}function kre(e){return Wn("MuiSvgIcon",e)}$n("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Fre=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${ln(t)}`,`fontSize${ln(r)}`]};return Zn(i,kre,n)},Nre=Qt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${ln(r.color)}`],t[`fontSize${ln(r.fontSize)}`]]}})(yi(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),BP=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiSvgIcon"}),{children:i,className:s,color:u="inherit",component:a="svg",fontSize:p="medium",htmlColor:d,inheritViewBox:g=!1,titleAccess:_,viewBox:C="0 0 24 24",...S}=n,I=R.isValidElement(i)&&i.type==="svg",O={...n,color:u,component:a,fontSize:p,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:C,hasSvgAsChild:I},P={};g||(P.viewBox=C);const k=Fre(O);return Ue.jsxs(Nre,{as:a,className:Br(k.root,s),focusable:"false",color:d,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:r,...P,...S,...I&&i.props,ownerState:O,children:[I?i.props.children:i,_?Ue.jsx("title",{children:_}):null]})});BP.muiName="SvgIcon";function Si(e,t){function r(n,i){return Ue.jsx(BP,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=BP.muiName,R.memo(R.forwardRef(r))}function cM(e,t=166){let r;function n(...i){const s=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(s,t)}return n.clear=()=>{clearTimeout(r)},n}function Sl(e){return e&&e.ownerDocument||document}function Kc(e){return Sl(e).defaultView||window}function KD(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function q1(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:s}=R.useRef(t!==void 0),[u,a]=R.useState(r),p=s?t:u,d=R.useCallback(g=>{s||a(g)},[]);return[p,d]}function gc(e){const t=R.useRef(e);return Vu(()=>{t.current=e}),R.useRef((...r)=>(0,t.current)(...r)).current}function Oo(...e){const t=R.useRef(void 0),r=R.useCallback(n=>{const i=e.map(s=>{if(s==null)return null;if(typeof s=="function"){const u=s,a=u(n);return typeof a=="function"?a:()=>{u(null)}}return s.current=n,()=>{s.current=null}});return()=>{i.forEach(s=>s?.())}},e);return R.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function Bre(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function fM(e,t){if(!e)return t;function r(u,a){const p={};return Object.keys(a).forEach(d=>{Bre(d,a[d])&&typeof u[d]=="function"&&(p[d]=(...g)=>{u[d](...g),a[d](...g)})}),p}if(typeof e=="function"||typeof t=="function")return u=>{const a=typeof t=="function"?t(u):t,p=typeof e=="function"?e({...u,...a}):e,d=Br(u?.className,a?.className,p?.className),g=r(p,a);return{...a,...p,...g,...!!d&&{className:d},...a?.style&&p?.style&&{style:{...a.style,...p.style}},...a?.sx&&p?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(p.sx)?p.sx:[p.sx]]}}};const n=t,i=r(e,n),s=Br(n?.className,e?.className);return{...t,...e,...i,...!!s&&{className:s},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function Xq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},jP(e,t)}function Kq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jP(e,t)}var A2=NJ();const __=rl(A2),YD={disabled:!1},U1=qe.createContext(null);var jre=function(t){return t.scrollTop},$v="unmounted",vp="exited",bp="entering",ig="entered",zP="exiting",ef=(function(e){Kq(t,e);function t(n,i){var s;s=e.call(this,n,i)||this;var u=i,a=u&&!u.isMounting?n.enter:n.appear,p;return s.appearStatus=null,n.in?a?(p=vp,s.appearStatus=bp):p=ig:n.unmountOnExit||n.mountOnEnter?p=$v:p=vp,s.state={status:p},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var u=i.in;return u&&s.status===$v?{status:vp}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var s=null;if(i!==this.props){var u=this.state.status;this.props.in?u!==bp&&u!==ig&&(s=bp):(u===bp||u===ig)&&(s=zP)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,s,u,a;return s=u=a=i,i!=null&&typeof i!="number"&&(s=i.exit,u=i.enter,a=i.appear!==void 0?i.appear:u),{exit:s,enter:u,appear:a}},r.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===bp){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:__.findDOMNode(this);u&&jre(u)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vp&&this.setState({status:$v})},r.performEnter=function(i){var s=this,u=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[__.findDOMNode(this),a],d=p[0],g=p[1],_=this.getTimeouts(),C=a?_.appear:_.enter;if(!i&&!u||YD.disabled){this.safeSetState({status:ig},function(){s.props.onEntered(d)});return}this.props.onEnter(d,g),this.safeSetState({status:bp},function(){s.props.onEntering(d,g),s.onTransitionEnd(C,function(){s.safeSetState({status:ig},function(){s.props.onEntered(d,g)})})})},r.performExit=function(){var i=this,s=this.props.exit,u=this.getTimeouts(),a=this.props.nodeRef?void 0:__.findDOMNode(this);if(!s||YD.disabled){this.safeSetState({status:vp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:zP},function(){i.props.onExiting(a),i.onTransitionEnd(u.exit,function(){i.safeSetState({status:vp},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},r.setNextCallback=function(i){var s=this,u=!0;return this.nextCallback=function(a){u&&(u=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},r.onTransitionEnd=function(i,s){this.setNextCallback(s);var u=this.props.nodeRef?this.props.nodeRef.current:__.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!u||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=p[0],g=p[1];this.props.addEndListener(d,g)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===$v)return null;var s=this.props,u=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Xq(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qe.createElement(U1.Provider,{value:null},typeof u=="function"?u(i,a):qe.cloneElement(qe.Children.only(u),a))},t})(qe.Component);ef.contextType=U1;ef.propTypes={};function Hm(){}ef.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Hm,onEntering:Hm,onEntered:Hm,onExit:Hm,onExiting:Hm,onExited:Hm};ef.UNMOUNTED=$v;ef.EXITED=vp;ef.ENTERING=bp;ef.ENTERED=ig;ef.EXITING=zP;function zre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hM(e,t){var r=function(s){return t&&R.isValidElement(s)?t(s):s},n=Object.create(null);return e&&R.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function $re(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),i=[];for(var s in e)s in t?i.length&&(n[s]=i,i=[]):i.push(s);var u,a={};for(var p in t){if(n[p])for(u=0;u<n[p].length;u++){var d=n[p][u];a[n[p][u]]=r(d)}a[p]=r(p)}for(u=0;u<i.length;u++)a[i[u]]=r(i[u]);return a}function Op(e,t,r){return r[t]!=null?r[t]:e.props[t]}function qre(e,t){return hM(e.children,function(r){return R.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Op(r,"appear",e),enter:Op(r,"enter",e),exit:Op(r,"exit",e)})})}function Ure(e,t,r){var n=hM(e.children),i=$re(t,n);return Object.keys(i).forEach(function(s){var u=i[s];if(R.isValidElement(u)){var a=s in t,p=s in n,d=t[s],g=R.isValidElement(d)&&!d.props.in;p&&(!a||g)?i[s]=R.cloneElement(u,{onExited:r.bind(null,u),in:!0,exit:Op(u,"exit",e),enter:Op(u,"enter",e)}):!p&&a&&!g?i[s]=R.cloneElement(u,{in:!1}):p&&a&&R.isValidElement(d)&&(i[s]=R.cloneElement(u,{onExited:r.bind(null,u),in:d.props.in,exit:Op(u,"exit",e),enter:Op(u,"enter",e)}))}}),i}var Vre=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Gre={component:"div",childFactory:function(t){return t}},dM=(function(e){Kq(t,e);function t(n,i){var s;s=e.call(this,n,i)||this;var u=s.handleExited.bind(zre(s));return s.state={contextValue:{isMounting:!0},handleExited:u,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var u=s.children,a=s.handleExited,p=s.firstRender;return{children:p?qre(i,a):Ure(i,u,a),firstRender:!1}},r.handleExited=function(i,s){var u=hM(this.props.children);i.key in u||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var p=B1({},a.children);return delete p[i.key],{children:p}}))},r.render=function(){var i=this.props,s=i.component,u=i.childFactory,a=Xq(i,["component","childFactory"]),p=this.state.contextValue,d=Vre(this.state.children).map(u);return delete a.appear,delete a.enter,delete a.exit,s===null?qe.createElement(U1.Provider,{value:p},d):qe.createElement(U1.Provider,{value:p},qe.createElement(s,a,d))},t})(qe.Component);dM.propTypes={};dM.defaultProps=Gre;const JD={};function Yq(e,t){const r=R.useRef(JD);return r.current===JD&&(r.current=e(t)),r}const Hre=[];function Wre(e){R.useEffect(e,Hre)}class T2{static create(){return new T2}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Rp(){const e=Yq(T2.create).current;return Wre(e.disposeEffect),e}const pM=e=>e.scrollTop;function Zg(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function Zre(e){return Wn("MuiPaper",e)}$n("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Xre=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,s={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return Zn(s,Zre,i)},Kre=Qt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(yi(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),tf=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiPaper"}),i=Uf(),{className:s,component:u="div",elevation:a=1,square:p=!1,variant:d="elevation",...g}=n,_={...n,component:u,elevation:a,square:p,variant:d},C=Xre(_);return Ue.jsx(Kre,{as:u,ownerState:_,className:Br(C.root,s),ref:r,...g,style:{...d==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${$1("#fff",NP(a))}, ${$1("#fff",NP(a))})`}},...g.style}})});function Xg(e){return typeof e=="string"}function Jq(e,t,r){return e===void 0||Xg(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function Qq(e,t,r){return typeof e=="function"?e(t,r):e}function V1(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function QD(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function eU(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:s}=e;if(!t){const S=Br(r?.className,s,i?.className,n?.className),I={...r?.style,...i?.style,...n?.style},O={...r,...i,...n};return S.length>0&&(O.className=S),Object.keys(I).length>0&&(O.style=I),{props:O,internalRef:void 0}}const u=V1({...i,...n}),a=QD(n),p=QD(i),d=t(u),g=Br(d?.className,r?.className,s,i?.className,n?.className),_={...d?.style,...r?.style,...i?.style,...n?.style},C={...d,...r,...p,...a};return g.length>0&&(C.className=g),Object.keys(_).length>0&&(C.style=_),{props:C,internalRef:d.ref}}function Kn(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:s,internalForwardedProps:u,shouldForwardComponentProp:a=!1,...p}=t,{component:d,slots:g={[e]:void 0},slotProps:_={[e]:void 0},...C}=s,S=g[e]||n,I=Qq(_[e],i),{props:{component:O,...P},internalRef:k}=eU({className:r,...p,externalForwardedProps:e==="root"?C:void 0,externalSlotProps:I}),F=Oo(k,I?.ref,t.ref),B=e==="root"?O||d:O,N=Jq(S,{...e==="root"&&!d&&!g[e]&&u,...e!=="root"&&!g[e]&&u,...P,...B&&!a&&{as:B},...B&&a&&{component:B},ref:F},i);return[S,N]}function G1(e){try{return e.matches(":focus-visible")}catch{}return!1}class H1{static create(){return new H1}static use(){const t=Yq(H1.create).current,[r,n]=R.useState(!1);return t.shouldMount=r,t.setShouldMount=n,R.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Jre(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Yre(){return H1.use()}function Jre(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function Qre(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:s,rippleSize:u,in:a,onExited:p,timeout:d}=e,[g,_]=R.useState(!1),C=Br(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),S={width:u,height:u,top:-(u/2)+s,left:-(u/2)+i},I=Br(r.child,g&&r.childLeaving,n&&r.childPulsate);return!a&&!g&&_(!0),R.useEffect(()=>{if(!a&&p!=null){const O=setTimeout(p,d);return()=>{clearTimeout(O)}}},[p,a,d]),Ue.jsx("span",{className:C,style:S,children:Ue.jsx("span",{className:I})})}const fc=$n("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),$P=550,ene=80,tne=sb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,rne=sb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,nne=sb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,ine=Qt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ane=Qt(Qre,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${fc.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${tne};
    animation-duration: ${$P}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${fc.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${fc.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${fc.childLeaving} {
    opacity: 0;
    animation-name: ${rne};
    animation-duration: ${$P}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${fc.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${nne};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,one=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:u,...a}=n,[p,d]=R.useState([]),g=R.useRef(0),_=R.useRef(null);R.useEffect(()=>{_.current&&(_.current(),_.current=null)},[p]);const C=R.useRef(!1),S=Rp(),I=R.useRef(null),O=R.useRef(null),P=R.useCallback(N=>{const{pulsate:G,rippleX:$,rippleY:X,rippleSize:ee,cb:J}=N;d(le=>[...le,Ue.jsx(ane,{classes:{ripple:Br(s.ripple,fc.ripple),rippleVisible:Br(s.rippleVisible,fc.rippleVisible),ripplePulsate:Br(s.ripplePulsate,fc.ripplePulsate),child:Br(s.child,fc.child),childLeaving:Br(s.childLeaving,fc.childLeaving),childPulsate:Br(s.childPulsate,fc.childPulsate)},timeout:$P,pulsate:G,rippleX:$,rippleY:X,rippleSize:ee},g.current)]),g.current+=1,_.current=J},[s]),k=R.useCallback((N={},G={},$=()=>{})=>{const{pulsate:X=!1,center:ee=i||G.pulsate,fakeElement:J=!1}=G;if(N?.type==="mousedown"&&C.current){C.current=!1;return}N?.type==="touchstart"&&(C.current=!0);const le=J?null:O.current,Z=le?le.getBoundingClientRect():{width:0,height:0,left:0,top:0};let H,oe,ue;if(ee||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)H=Math.round(Z.width/2),oe=Math.round(Z.height/2);else{const{clientX:ce,clientY:be}=N.touches&&N.touches.length>0?N.touches[0]:N;H=Math.round(ce-Z.left),oe=Math.round(be-Z.top)}if(ee)ue=Math.sqrt((2*Z.width**2+Z.height**2)/3),ue%2===0&&(ue+=1);else{const ce=Math.max(Math.abs((le?le.clientWidth:0)-H),H)*2+2,be=Math.max(Math.abs((le?le.clientHeight:0)-oe),oe)*2+2;ue=Math.sqrt(ce**2+be**2)}N?.touches?I.current===null&&(I.current=()=>{P({pulsate:X,rippleX:H,rippleY:oe,rippleSize:ue,cb:$})},S.start(ene,()=>{I.current&&(I.current(),I.current=null)})):P({pulsate:X,rippleX:H,rippleY:oe,rippleSize:ue,cb:$})},[i,P,S]),F=R.useCallback(()=>{k({},{pulsate:!0})},[k]),B=R.useCallback((N,G)=>{if(S.clear(),N?.type==="touchend"&&I.current){I.current(),I.current=null,S.start(0,()=>{B(N,G)});return}I.current=null,d($=>$.length>0?$.slice(1):$),_.current=G},[S]);return R.useImperativeHandle(r,()=>({pulsate:F,start:k,stop:B}),[F,k,B]),Ue.jsx(ine,{className:Br(fc.root,s.root,u),ref:O,...a,children:Ue.jsx(dM,{component:null,exit:!0,children:p})})});function sne(e){return Wn("MuiButtonBase",e)}const lne=$n("MuiButtonBase",["root","disabled","focusVisible"]),une=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,u=Zn({root:["root",t&&"disabled",r&&"focusVisible"]},sne,i);return r&&n&&(u.root+=` ${n}`),u},cne=Qt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${lne.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),P2=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:u,className:a,component:p="button",disabled:d=!1,disableRipple:g=!1,disableTouchRipple:_=!1,focusRipple:C=!1,focusVisibleClassName:S,LinkComponent:I="a",onBlur:O,onClick:P,onContextMenu:k,onDragLeave:F,onFocus:B,onFocusVisible:N,onKeyDown:G,onKeyUp:$,onMouseDown:X,onMouseLeave:ee,onMouseUp:J,onTouchEnd:le,onTouchMove:Z,onTouchStart:H,tabIndex:oe=0,TouchRippleProps:ue,touchRippleRef:ce,type:be,...Te}=n,ve=R.useRef(null),Ce=Yre(),$e=Oo(Ce.ref,ce),[Je,ge]=R.useState(!1);d&&Je&&ge(!1),R.useImperativeHandle(i,()=>({focusVisible:()=>{ge(!0),ve.current.focus()}}),[]);const Ee=Ce.shouldMount&&!g&&!d;R.useEffect(()=>{Je&&C&&!g&&Ce.pulsate()},[g,C,Je,Ce]);const Ie=gh(Ce,"start",X,_),Le=gh(Ce,"stop",k,_),Ve=gh(Ce,"stop",F,_),ht=gh(Ce,"stop",J,_),It=gh(Ce,"stop",ut=>{Je&&ut.preventDefault(),ee&&ee(ut)},_),xt=gh(Ce,"start",H,_),rt=gh(Ce,"stop",le,_),zt=gh(Ce,"stop",Z,_),Lt=gh(Ce,"stop",ut=>{G1(ut.target)||ge(!1),O&&O(ut)},!1),Ft=gc(ut=>{ve.current||(ve.current=ut.currentTarget),G1(ut.target)&&(ge(!0),N&&N(ut)),B&&B(ut)}),dt=()=>{const ut=ve.current;return p&&p!=="button"&&!(ut.tagName==="A"&&ut.href)},ke=gc(ut=>{C&&!ut.repeat&&Je&&ut.key===" "&&Ce.stop(ut,()=>{Ce.start(ut)}),ut.target===ut.currentTarget&&dt()&&ut.key===" "&&ut.preventDefault(),G&&G(ut),ut.target===ut.currentTarget&&dt()&&ut.key==="Enter"&&!d&&(ut.preventDefault(),P&&P(ut))}),fr=gc(ut=>{C&&ut.key===" "&&Je&&!ut.defaultPrevented&&Ce.stop(ut,()=>{Ce.pulsate(ut)}),$&&$(ut),P&&ut.target===ut.currentTarget&&dt()&&ut.key===" "&&!ut.defaultPrevented&&P(ut)});let sr=p;sr==="button"&&(Te.href||Te.to)&&(sr=I);const xr={};sr==="button"?(xr.type=be===void 0?"button":be,xr.disabled=d):(!Te.href&&!Te.to&&(xr.role="button"),d&&(xr["aria-disabled"]=d));const tr=Oo(r,ve),Ge={...n,centerRipple:s,component:p,disabled:d,disableRipple:g,disableTouchRipple:_,focusRipple:C,tabIndex:oe,focusVisible:Je},nt=une(Ge);return Ue.jsxs(cne,{as:sr,className:Br(nt.root,a),ownerState:Ge,onBlur:Lt,onClick:P,onContextMenu:Le,onFocus:Ft,onKeyDown:ke,onKeyUp:fr,onMouseDown:Ie,onMouseLeave:It,onMouseUp:ht,onDragLeave:Ve,onTouchEnd:rt,onTouchMove:zt,onTouchStart:xt,ref:tr,tabIndex:d?-1:oe,type:be,...xr,...Te,children:[u,Ee?Ue.jsx(one,{ref:$e,center:s,...ue}):null]})});function gh(e,t,r,n=!1){return gc(i=>(r&&r(i),n||e[t](i),!0))}function fne(e){return typeof e.main=="string"}function hne(e,t=[]){if(!fne(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Hl(e=[]){return([,t])=>t&&hne(t,e)}function dne(e){return Wn("MuiAlert",e)}const ek=$n("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function pne(e){return Wn("MuiCircularProgress",e)}$n("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const od=44,qP=sb`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,UP=sb`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,mne=typeof qP!="string"?YI`
        animation: ${qP} 1.4s linear infinite;
      `:null,gne=typeof UP!="string"?YI`
        animation: ${UP} 1.4s ease-in-out infinite;
      `:null,yne=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,s={root:["root",r,`color${ln(n)}`],svg:["svg"],circle:["circle",`circle${ln(r)}`,i&&"circleDisableShrink"]};return Zn(s,pne,t)},vne=Qt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${ln(r.color)}`]]}})(yi(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:mne||{animation:`${qP} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),bne=Qt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),_ne=Qt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${ln(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(yi(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:gne||{animation:`${UP} 1.4s ease-in-out infinite`}}]}))),ay=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:u=!1,size:a=40,style:p,thickness:d=3.6,value:g=0,variant:_="indeterminate",...C}=n,S={...n,color:s,disableShrink:u,size:a,thickness:d,value:g,variant:_},I=yne(S),O={},P={},k={};if(_==="determinate"){const F=2*Math.PI*((od-d)/2);O.strokeDasharray=F.toFixed(3),k["aria-valuenow"]=Math.round(g),O.strokeDashoffset=`${((100-g)/100*F).toFixed(3)}px`,P.transform="rotate(-90deg)"}return Ue.jsx(vne,{className:Br(I.root,i),style:{width:a,height:a,...P,...p},ownerState:S,ref:r,role:"progressbar",...k,...C,children:Ue.jsx(bne,{className:I.svg,ownerState:S,viewBox:`${od/2} ${od/2} ${od} ${od}`,children:Ue.jsx(_ne,{className:I.circle,style:O,ownerState:S,cx:od,cy:od,r:(od-d)/2,fill:"none",strokeWidth:d})})})});function xne(e){return Wn("MuiIconButton",e)}const tk=$n("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),wne=e=>{const{classes:t,disabled:r,color:n,edge:i,size:s,loading:u}=e,a={root:["root",u&&"loading",r&&"disabled",n!=="default"&&`color${ln(n)}`,i&&`edge${ln(i)}`,`size${ln(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Zn(a,xne,t)},Sne=Qt(P2,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${ln(r.color)}`],r.edge&&t[`edge${ln(r.edge)}`],t[`size${ln(r.size)}`]]}})(yi(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),yi(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${tk.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${tk.loading}`]:{color:"transparent"}}))),Ene=Qt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Uo=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiIconButton"}),{edge:i=!1,children:s,className:u,color:a="default",disabled:p=!1,disableFocusRipple:d=!1,size:g="medium",id:_,loading:C=null,loadingIndicator:S,...I}=n,O=em(_),P=S??Ue.jsx(ay,{"aria-labelledby":O,color:"inherit",size:16}),k={...n,edge:i,color:a,disabled:p,disableFocusRipple:d,loading:C,loadingIndicator:P,size:g},F=wne(k);return Ue.jsxs(Sne,{id:C?O:_,className:Br(F.root,u),centerRipple:!0,focusRipple:!d,disabled:p||C,ref:r,...I,ownerState:k,children:[typeof C=="boolean"&&Ue.jsx("span",{className:F.loadingWrapper,style:{display:"contents"},children:Ue.jsx(Ene,{className:F.loadingIndicator,ownerState:k,children:C&&P})}),s]})}),Cne=Si(Ue.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Ane=Si(Ue.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Tne=Si(Ue.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Pne=Si(Ue.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Ine=Si(Ue.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Mne=e=>{const{variant:t,color:r,severity:n,classes:i}=e,s={root:["root",`color${ln(r||n)}`,`${t}${ln(r||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Zn(s,dne,i)},One=Qt(tf,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${ln(r.color||r.severity)}`]]}})(yi(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,r=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Hl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:r(e.palette[n].light,.9),[`& .${ek.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(Hl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${ek.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(Hl(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)}}}))]}})),Rne=Qt("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Lne=Qt("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),Dne=Qt("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),rk={success:Ue.jsx(Cne,{fontSize:"inherit"}),warning:Ue.jsx(Ane,{fontSize:"inherit"}),error:Ue.jsx(Tne,{fontSize:"inherit"}),info:Ue.jsx(Pne,{fontSize:"inherit"})},kne=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiAlert"}),{action:i,children:s,className:u,closeText:a="Close",color:p,components:d={},componentsProps:g={},icon:_,iconMapping:C=rk,onClose:S,role:I="alert",severity:O="success",slotProps:P={},slots:k={},variant:F="standard",...B}=n,N={...n,color:p,severity:O,variant:F,colorSeverity:p||O},G=Mne(N),$={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...k},slotProps:{...g,...P}},[X,ee]=Kn("root",{ref:r,shouldForwardComponentProp:!0,className:Br(G.root,u),elementType:One,externalForwardedProps:{...$,...B},ownerState:N,additionalProps:{role:I,elevation:0}}),[J,le]=Kn("icon",{className:G.icon,elementType:Rne,externalForwardedProps:$,ownerState:N}),[Z,H]=Kn("message",{className:G.message,elementType:Lne,externalForwardedProps:$,ownerState:N}),[oe,ue]=Kn("action",{className:G.action,elementType:Dne,externalForwardedProps:$,ownerState:N}),[ce,be]=Kn("closeButton",{elementType:Uo,externalForwardedProps:$,ownerState:N}),[Te,ve]=Kn("closeIcon",{elementType:Ine,externalForwardedProps:$,ownerState:N});return Ue.jsxs(X,{...ee,children:[_!==!1?Ue.jsx(J,{...le,children:_||C[O]||rk[O]}):null,Ue.jsx(Z,{...H,children:s}),i!=null?Ue.jsx(oe,{...ue,children:i}):null,i==null&&S?Ue.jsx(oe,{...ue,children:Ue.jsx(ce,{size:"small","aria-label":a,title:a,color:"inherit",onClick:S,...be,children:Ue.jsx(Te,{fontSize:"small",...ve})})}):null]})});function Fne(e){return Wn("MuiTypography",e)}const nk=$n("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Nne={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Bne=Dre(),jne=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:s,classes:u}=e,a={root:["root",s,e.align!=="inherit"&&`align${ln(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Zn(a,Fne,u)},zne=Qt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${ln(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(yi(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${ln(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),ik={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},$o=R.forwardRef(function(t,r){const{color:n,...i}=Yn({props:t,name:"MuiTypography"}),s=!Nne[n],u=Bne({...i,...s&&{color:n}}),{align:a="inherit",className:p,component:d,gutterBottom:g=!1,noWrap:_=!1,paragraph:C=!1,variant:S="body1",variantMapping:I=ik,...O}=u,P={...u,align:a,color:n,className:p,component:d,gutterBottom:g,noWrap:_,paragraph:C,variant:S,variantMapping:I},k=d||(C?"p":I[S]||ik[S])||"span",F=jne(P);return Ue.jsx(zne,{as:k,ref:r,className:Br(F.root,p),...O,ownerState:P,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...O.style}})});function $ne(e){return Wn("MuiAppBar",e)}$n("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const qne=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${ln(t)}`,`position${ln(r)}`]};return Zn(i,$ne,n)},ak=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,Une=Qt(tf,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${ln(r.position)}`],t[`color${ln(r.color)}`]]}})(yi(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Hl(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?ak(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?ak(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Vne=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:u=!1,position:a="fixed",...p}=n,d={...n,color:s,position:a,enableColorOnDark:u},g=qne(d);return Ue.jsx(Une,{square:!0,component:"header",ownerState:d,elevation:4,className:Br(g.root,i,a==="fixed"&&"mui-fixed"),ref:r,...p})});var hu="top",vc="bottom",bc="right",du="left",mM="auto",hb=[hu,vc,bc,du],Kg="start",N0="end",Gne="clippingParents",tU="viewport",cv="popper",Hne="reference",ok=hb.reduce(function(e,t){return e.concat([t+"-"+Kg,t+"-"+N0])},[]),rU=[].concat(hb,[mM]).reduce(function(e,t){return e.concat([t,t+"-"+Kg,t+"-"+N0])},[]),Wne="beforeRead",Zne="read",Xne="afterRead",Kne="beforeMain",Yne="main",Jne="afterMain",Qne="beforeWrite",eie="write",tie="afterWrite",rie=[Wne,Zne,Xne,Kne,Yne,Jne,Qne,eie,tie];function qf(e){return e?(e.nodeName||"").toLowerCase():null}function Gu(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Up(e){var t=Gu(e).Element;return e instanceof t||e instanceof Element}function yc(e){var t=Gu(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function gM(e){if(typeof ShadowRoot>"u")return!1;var t=Gu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function nie(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},s=t.elements[r];!yc(s)||!qf(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(u){var a=i[u];a===!1?s.removeAttribute(u):s.setAttribute(u,a===!0?"":a)}))})}function iie(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],s=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=u.reduce(function(p,d){return p[d]="",p},{});!yc(i)||!qf(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(p){i.removeAttribute(p)}))})}}const aie={name:"applyStyles",enabled:!0,phase:"write",fn:nie,effect:iie,requires:["computeStyles"]};function Bf(e){return e.split("-")[0]}var Np=Math.max,W1=Math.min,Yg=Math.round;function VP(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function nU(){return!/^((?!chrome|android).)*safari/i.test(VP())}function Jg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,s=1;t&&yc(e)&&(i=e.offsetWidth>0&&Yg(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Yg(n.height)/e.offsetHeight||1);var u=Up(e)?Gu(e):window,a=u.visualViewport,p=!nU()&&r,d=(n.left+(p&&a?a.offsetLeft:0))/i,g=(n.top+(p&&a?a.offsetTop:0))/s,_=n.width/i,C=n.height/s;return{width:_,height:C,top:g,right:d+_,bottom:g+C,left:d,x:d,y:g}}function yM(e){var t=Jg(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function iU(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&gM(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Fh(e){return Gu(e).getComputedStyle(e)}function oie(e){return["table","td","th"].indexOf(qf(e))>=0}function Od(e){return((Up(e)?e.ownerDocument:e.document)||window.document).documentElement}function I2(e){return qf(e)==="html"?e:e.assignedSlot||e.parentNode||(gM(e)?e.host:null)||Od(e)}function sk(e){return!yc(e)||Fh(e).position==="fixed"?null:e.offsetParent}function sie(e){var t=/firefox/i.test(VP()),r=/Trident/i.test(VP());if(r&&yc(e)){var n=Fh(e);if(n.position==="fixed")return null}var i=I2(e);for(gM(i)&&(i=i.host);yc(i)&&["html","body"].indexOf(qf(i))<0;){var s=Fh(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function db(e){for(var t=Gu(e),r=sk(e);r&&oie(r)&&Fh(r).position==="static";)r=sk(r);return r&&(qf(r)==="html"||qf(r)==="body"&&Fh(r).position==="static")?t:r||sie(e)||t}function vM(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function r0(e,t,r){return Np(e,W1(t,r))}function lie(e,t,r){var n=r0(e,t,r);return n>r?r:n}function aU(){return{top:0,right:0,bottom:0,left:0}}function oU(e){return Object.assign({},aU(),e)}function sU(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var uie=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,oU(typeof t!="number"?t:sU(t,hb))};function cie(e){var t,r=e.state,n=e.name,i=e.options,s=r.elements.arrow,u=r.modifiersData.popperOffsets,a=Bf(r.placement),p=vM(a),d=[du,bc].indexOf(a)>=0,g=d?"height":"width";if(!(!s||!u)){var _=uie(i.padding,r),C=yM(s),S=p==="y"?hu:du,I=p==="y"?vc:bc,O=r.rects.reference[g]+r.rects.reference[p]-u[p]-r.rects.popper[g],P=u[p]-r.rects.reference[p],k=db(s),F=k?p==="y"?k.clientHeight||0:k.clientWidth||0:0,B=O/2-P/2,N=_[S],G=F-C[g]-_[I],$=F/2-C[g]/2+B,X=r0(N,$,G),ee=p;r.modifiersData[n]=(t={},t[ee]=X,t.centerOffset=X-$,t)}}function fie(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||iU(t.elements.popper,i)&&(t.elements.arrow=i))}const hie={name:"arrow",enabled:!0,phase:"main",fn:cie,effect:fie,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qg(e){return e.split("-")[1]}var die={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pie(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Yg(r*i)/i||0,y:Yg(n*i)/i||0}}function lk(e){var t,r=e.popper,n=e.popperRect,i=e.placement,s=e.variation,u=e.offsets,a=e.position,p=e.gpuAcceleration,d=e.adaptive,g=e.roundOffsets,_=e.isFixed,C=u.x,S=C===void 0?0:C,I=u.y,O=I===void 0?0:I,P=typeof g=="function"?g({x:S,y:O}):{x:S,y:O};S=P.x,O=P.y;var k=u.hasOwnProperty("x"),F=u.hasOwnProperty("y"),B=du,N=hu,G=window;if(d){var $=db(r),X="clientHeight",ee="clientWidth";if($===Gu(r)&&($=Od(r),Fh($).position!=="static"&&a==="absolute"&&(X="scrollHeight",ee="scrollWidth")),$=$,i===hu||(i===du||i===bc)&&s===N0){N=vc;var J=_&&$===G&&G.visualViewport?G.visualViewport.height:$[X];O-=J-n.height,O*=p?1:-1}if(i===du||(i===hu||i===vc)&&s===N0){B=bc;var le=_&&$===G&&G.visualViewport?G.visualViewport.width:$[ee];S-=le-n.width,S*=p?1:-1}}var Z=Object.assign({position:a},d&&die),H=g===!0?pie({x:S,y:O},Gu(r)):{x:S,y:O};if(S=H.x,O=H.y,p){var oe;return Object.assign({},Z,(oe={},oe[N]=F?"0":"",oe[B]=k?"0":"",oe.transform=(G.devicePixelRatio||1)<=1?"translate("+S+"px, "+O+"px)":"translate3d("+S+"px, "+O+"px, 0)",oe))}return Object.assign({},Z,(t={},t[N]=F?O+"px":"",t[B]=k?S+"px":"",t.transform="",t))}function mie(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,u=s===void 0?!0:s,a=r.roundOffsets,p=a===void 0?!0:a,d={placement:Bf(t.placement),variation:Qg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,lk(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,lk(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const gie={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mie,data:{}};var x_={passive:!0};function yie(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,s=i===void 0?!0:i,u=n.resize,a=u===void 0?!0:u,p=Gu(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&d.forEach(function(g){g.addEventListener("scroll",r.update,x_)}),a&&p.addEventListener("resize",r.update,x_),function(){s&&d.forEach(function(g){g.removeEventListener("scroll",r.update,x_)}),a&&p.removeEventListener("resize",r.update,x_)}}const vie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yie,data:{}};var bie={left:"right",right:"left",bottom:"top",top:"bottom"};function p1(e){return e.replace(/left|right|bottom|top/g,function(t){return bie[t]})}var _ie={start:"end",end:"start"};function uk(e){return e.replace(/start|end/g,function(t){return _ie[t]})}function bM(e){var t=Gu(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function _M(e){return Jg(Od(e)).left+bM(e).scrollLeft}function xie(e,t){var r=Gu(e),n=Od(e),i=r.visualViewport,s=n.clientWidth,u=n.clientHeight,a=0,p=0;if(i){s=i.width,u=i.height;var d=nU();(d||!d&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:s,height:u,x:a+_M(e),y:p}}function wie(e){var t,r=Od(e),n=bM(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=Np(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=Np(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+_M(e),p=-n.scrollTop;return Fh(i||r).direction==="rtl"&&(a+=Np(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:u,x:a,y:p}}function xM(e){var t=Fh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function lU(e){return["html","body","#document"].indexOf(qf(e))>=0?e.ownerDocument.body:yc(e)&&xM(e)?e:lU(I2(e))}function n0(e,t){var r;t===void 0&&(t=[]);var n=lU(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),s=Gu(n),u=i?[s].concat(s.visualViewport||[],xM(n)?n:[]):n,a=t.concat(u);return i?a:a.concat(n0(I2(u)))}function GP(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Sie(e,t){var r=Jg(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function ck(e,t,r){return t===tU?GP(xie(e,r)):Up(t)?Sie(t,r):GP(wie(Od(e)))}function Eie(e){var t=n0(I2(e)),r=["absolute","fixed"].indexOf(Fh(e).position)>=0,n=r&&yc(e)?db(e):e;return Up(n)?t.filter(function(i){return Up(i)&&iU(i,n)&&qf(i)!=="body"}):[]}function Cie(e,t,r,n){var i=t==="clippingParents"?Eie(e):[].concat(t),s=[].concat(i,[r]),u=s[0],a=s.reduce(function(p,d){var g=ck(e,d,n);return p.top=Np(g.top,p.top),p.right=W1(g.right,p.right),p.bottom=W1(g.bottom,p.bottom),p.left=Np(g.left,p.left),p},ck(e,u,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function uU(e){var t=e.reference,r=e.element,n=e.placement,i=n?Bf(n):null,s=n?Qg(n):null,u=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,p;switch(i){case hu:p={x:u,y:t.y-r.height};break;case vc:p={x:u,y:t.y+t.height};break;case bc:p={x:t.x+t.width,y:a};break;case du:p={x:t.x-r.width,y:a};break;default:p={x:t.x,y:t.y}}var d=i?vM(i):null;if(d!=null){var g=d==="y"?"height":"width";switch(s){case Kg:p[d]=p[d]-(t[g]/2-r[g]/2);break;case N0:p[d]=p[d]+(t[g]/2-r[g]/2);break}}return p}function B0(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,s=r.strategy,u=s===void 0?e.strategy:s,a=r.boundary,p=a===void 0?Gne:a,d=r.rootBoundary,g=d===void 0?tU:d,_=r.elementContext,C=_===void 0?cv:_,S=r.altBoundary,I=S===void 0?!1:S,O=r.padding,P=O===void 0?0:O,k=oU(typeof P!="number"?P:sU(P,hb)),F=C===cv?Hne:cv,B=e.rects.popper,N=e.elements[I?F:C],G=Cie(Up(N)?N:N.contextElement||Od(e.elements.popper),p,g,u),$=Jg(e.elements.reference),X=uU({reference:$,element:B,placement:i}),ee=GP(Object.assign({},B,X)),J=C===cv?ee:$,le={top:G.top-J.top+k.top,bottom:J.bottom-G.bottom+k.bottom,left:G.left-J.left+k.left,right:J.right-G.right+k.right},Z=e.modifiersData.offset;if(C===cv&&Z){var H=Z[i];Object.keys(le).forEach(function(oe){var ue=[bc,vc].indexOf(oe)>=0?1:-1,ce=[hu,vc].indexOf(oe)>=0?"y":"x";le[oe]+=H[ce]*ue})}return le}function Aie(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,s=r.rootBoundary,u=r.padding,a=r.flipVariations,p=r.allowedAutoPlacements,d=p===void 0?rU:p,g=Qg(n),_=g?a?ok:ok.filter(function(I){return Qg(I)===g}):hb,C=_.filter(function(I){return d.indexOf(I)>=0});C.length===0&&(C=_);var S=C.reduce(function(I,O){return I[O]=B0(e,{placement:O,boundary:i,rootBoundary:s,padding:u})[Bf(O)],I},{});return Object.keys(S).sort(function(I,O){return S[I]-S[O]})}function Tie(e){if(Bf(e)===mM)return[];var t=p1(e);return[uk(e),t,uk(t)]}function Pie(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!0:u,p=r.fallbackPlacements,d=r.padding,g=r.boundary,_=r.rootBoundary,C=r.altBoundary,S=r.flipVariations,I=S===void 0?!0:S,O=r.allowedAutoPlacements,P=t.options.placement,k=Bf(P),F=k===P,B=p||(F||!I?[p1(P)]:Tie(P)),N=[P].concat(B).reduce(function(Ie,Le){return Ie.concat(Bf(Le)===mM?Aie(t,{placement:Le,boundary:g,rootBoundary:_,padding:d,flipVariations:I,allowedAutoPlacements:O}):Le)},[]),G=t.rects.reference,$=t.rects.popper,X=new Map,ee=!0,J=N[0],le=0;le<N.length;le++){var Z=N[le],H=Bf(Z),oe=Qg(Z)===Kg,ue=[hu,vc].indexOf(H)>=0,ce=ue?"width":"height",be=B0(t,{placement:Z,boundary:g,rootBoundary:_,altBoundary:C,padding:d}),Te=ue?oe?bc:du:oe?vc:hu;G[ce]>$[ce]&&(Te=p1(Te));var ve=p1(Te),Ce=[];if(s&&Ce.push(be[H]<=0),a&&Ce.push(be[Te]<=0,be[ve]<=0),Ce.every(function(Ie){return Ie})){J=Z,ee=!1;break}X.set(Z,Ce)}if(ee)for(var $e=I?3:1,Je=function(Le){var Ve=N.find(function(ht){var It=X.get(ht);if(It)return It.slice(0,Le).every(function(xt){return xt})});if(Ve)return J=Ve,"break"},ge=$e;ge>0;ge--){var Ee=Je(ge);if(Ee==="break")break}t.placement!==J&&(t.modifiersData[n]._skip=!0,t.placement=J,t.reset=!0)}}const Iie={name:"flip",enabled:!0,phase:"main",fn:Pie,requiresIfExists:["offset"],data:{_skip:!1}};function fk(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function hk(e){return[hu,bc,vc,du].some(function(t){return e[t]>=0})}function Mie(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,u=B0(t,{elementContext:"reference"}),a=B0(t,{altBoundary:!0}),p=fk(u,n),d=fk(a,i,s),g=hk(p),_=hk(d);t.modifiersData[r]={referenceClippingOffsets:p,popperEscapeOffsets:d,isReferenceHidden:g,hasPopperEscaped:_},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":_})}const Oie={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Mie};function Rie(e,t,r){var n=Bf(e),i=[du,hu].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=s[0],a=s[1];return u=u||0,a=(a||0)*i,[du,bc].indexOf(n)>=0?{x:a,y:u}:{x:u,y:a}}function Lie(e){var t=e.state,r=e.options,n=e.name,i=r.offset,s=i===void 0?[0,0]:i,u=rU.reduce(function(g,_){return g[_]=Rie(_,t.rects,s),g},{}),a=u[t.placement],p=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=u}const Die={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lie};function kie(e){var t=e.state,r=e.name;t.modifiersData[r]=uU({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Fie={name:"popperOffsets",enabled:!0,phase:"read",fn:kie,data:{}};function Nie(e){return e==="x"?"y":"x"}function Bie(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,s=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!1:u,p=r.boundary,d=r.rootBoundary,g=r.altBoundary,_=r.padding,C=r.tether,S=C===void 0?!0:C,I=r.tetherOffset,O=I===void 0?0:I,P=B0(t,{boundary:p,rootBoundary:d,padding:_,altBoundary:g}),k=Bf(t.placement),F=Qg(t.placement),B=!F,N=vM(k),G=Nie(N),$=t.modifiersData.popperOffsets,X=t.rects.reference,ee=t.rects.popper,J=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,le=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),Z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if($){if(s){var oe,ue=N==="y"?hu:du,ce=N==="y"?vc:bc,be=N==="y"?"height":"width",Te=$[N],ve=Te+P[ue],Ce=Te-P[ce],$e=S?-ee[be]/2:0,Je=F===Kg?X[be]:ee[be],ge=F===Kg?-ee[be]:-X[be],Ee=t.elements.arrow,Ie=S&&Ee?yM(Ee):{width:0,height:0},Le=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aU(),Ve=Le[ue],ht=Le[ce],It=r0(0,X[be],Ie[be]),xt=B?X[be]/2-$e-It-Ve-le.mainAxis:Je-It-Ve-le.mainAxis,rt=B?-X[be]/2+$e+It+ht+le.mainAxis:ge+It+ht+le.mainAxis,zt=t.elements.arrow&&db(t.elements.arrow),Lt=zt?N==="y"?zt.clientTop||0:zt.clientLeft||0:0,Ft=(oe=Z?.[N])!=null?oe:0,dt=Te+xt-Ft-Lt,ke=Te+rt-Ft,fr=r0(S?W1(ve,dt):ve,Te,S?Np(Ce,ke):Ce);$[N]=fr,H[N]=fr-Te}if(a){var sr,xr=N==="x"?hu:du,tr=N==="x"?vc:bc,Ge=$[G],nt=G==="y"?"height":"width",ut=Ge+P[xr],Nt=Ge-P[tr],Kt=[hu,du].indexOf(k)!==-1,Vt=(sr=Z?.[G])!=null?sr:0,Ke=Kt?ut:Ge-X[nt]-ee[nt]-Vt+le.altAxis,me=Kt?Ge+X[nt]+ee[nt]-Vt-le.altAxis:Nt,pe=S&&Kt?lie(Ke,Ge,me):r0(S?Ke:ut,Ge,S?me:Nt);$[G]=pe,H[G]=pe-Ge}t.modifiersData[n]=H}}const jie={name:"preventOverflow",enabled:!0,phase:"main",fn:Bie,requiresIfExists:["offset"]};function zie(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function $ie(e){return e===Gu(e)||!yc(e)?bM(e):zie(e)}function qie(e){var t=e.getBoundingClientRect(),r=Yg(t.width)/e.offsetWidth||1,n=Yg(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Uie(e,t,r){r===void 0&&(r=!1);var n=yc(t),i=yc(t)&&qie(t),s=Od(t),u=Jg(e,i,r),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(n||!n&&!r)&&((qf(t)!=="body"||xM(s))&&(a=$ie(t)),yc(t)?(p=Jg(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):s&&(p.x=_M(s))),{x:u.left+a.scrollLeft-p.x,y:u.top+a.scrollTop-p.y,width:u.width,height:u.height}}function Vie(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function i(s){r.add(s.name);var u=[].concat(s.requires||[],s.requiresIfExists||[]);u.forEach(function(a){if(!r.has(a)){var p=t.get(a);p&&i(p)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||i(s)}),n}function Gie(e){var t=Vie(e);return rie.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function Hie(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Wie(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var dk={placement:"bottom",modifiers:[],strategy:"absolute"};function pk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Zie(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,s=i===void 0?dk:i;return function(a,p,d){d===void 0&&(d=s);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},dk,s),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},_=[],C=!1,S={state:g,setOptions:function(k){var F=typeof k=="function"?k(g.options):k;O(),g.options=Object.assign({},s,g.options,F),g.scrollParents={reference:Up(a)?n0(a):a.contextElement?n0(a.contextElement):[],popper:n0(p)};var B=Gie(Wie([].concat(n,g.options.modifiers)));return g.orderedModifiers=B.filter(function(N){return N.enabled}),I(),S.update()},forceUpdate:function(){if(!C){var k=g.elements,F=k.reference,B=k.popper;if(pk(F,B)){g.rects={reference:Uie(F,db(B),g.options.strategy==="fixed"),popper:yM(B)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(le){return g.modifiersData[le.name]=Object.assign({},le.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var G=g.orderedModifiers[N],$=G.fn,X=G.options,ee=X===void 0?{}:X,J=G.name;typeof $=="function"&&(g=$({state:g,options:ee,name:J,instance:S})||g)}}}},update:Hie(function(){return new Promise(function(P){S.forceUpdate(),P(g)})}),destroy:function(){O(),C=!0}};if(!pk(a,p))return S;S.setOptions(d).then(function(P){!C&&d.onFirstUpdate&&d.onFirstUpdate(P)});function I(){g.orderedModifiers.forEach(function(P){var k=P.name,F=P.options,B=F===void 0?{}:F,N=P.effect;if(typeof N=="function"){var G=N({state:g,name:k,instance:S,options:B}),$=function(){};_.push(G||$)}})}function O(){_.forEach(function(P){return P()}),_=[]}return S}}var Xie=[vie,Fie,gie,aie,Die,Iie,jie,hie,Oie],Kie=Zie({defaultModifiers:Xie});function cU(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...s}=e,u=i?{}:Qq(r,n),{props:a,internalRef:p}=eU({...s,externalSlotProps:u}),d=Oo(p,u?.ref,e.additionalProps?.ref);return Jq(t,{...a,ref:d},n)}function Rd(e){return parseInt(R.version,10)>=19?e?.props?.ref||null:e?.ref||null}function Yie(e){return typeof e=="function"?e():e}const fU=R.forwardRef(function(t,r){const{children:n,container:i,disablePortal:s=!1}=t,[u,a]=R.useState(null),p=Oo(R.isValidElement(n)?Rd(n):null,r);if(Vu(()=>{s||a(Yie(i)||document.body)},[i,s]),Vu(()=>{if(u&&!s)return KD(r,u),()=>{KD(r,null)}},[r,u,s]),s){if(R.isValidElement(n)){const d={ref:p};return R.cloneElement(n,d)}return n}return u&&A2.createPortal(n,u)});function Jie(e){return Wn("MuiPopper",e)}$n("MuiPopper",["root"]);function Qie(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function HP(e){return typeof e=="function"?e():e}function eae(e){return e.nodeType!==void 0}const tae=e=>{const{classes:t}=e;return Zn({root:["root"]},Jie,t)},rae={},nae=R.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:s,disablePortal:u,modifiers:a,open:p,placement:d,popperOptions:g,popperRef:_,slotProps:C={},slots:S={},TransitionProps:I,ownerState:O,...P}=t,k=R.useRef(null),F=Oo(k,r),B=R.useRef(null),N=Oo(B,_),G=R.useRef(N);Vu(()=>{G.current=N},[N]),R.useImperativeHandle(_,()=>B.current,[]);const $=Qie(d,s),[X,ee]=R.useState($),[J,le]=R.useState(HP(n));R.useEffect(()=>{B.current&&B.current.forceUpdate()}),R.useEffect(()=>{n&&le(HP(n))},[n]),Vu(()=>{if(!J||!p)return;const ce=ve=>{ee(ve.placement)};let be=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ve})=>{ce(ve)}}];a!=null&&(be=be.concat(a)),g&&g.modifiers!=null&&(be=be.concat(g.modifiers));const Te=Kie(J,k.current,{placement:$,...g,modifiers:be});return G.current(Te),()=>{Te.destroy(),G.current(null)}},[J,u,a,p,g,$]);const Z={placement:X};I!==null&&(Z.TransitionProps=I);const H=tae(t),oe=S.root??"div",ue=cU({elementType:oe,externalSlotProps:C.root,externalForwardedProps:P,additionalProps:{role:"tooltip",ref:F},ownerState:t,className:H.root});return Ue.jsx(oe,{...ue,children:typeof i=="function"?i(Z):i})}),iae=R.forwardRef(function(t,r){const{anchorEl:n,children:i,container:s,direction:u="ltr",disablePortal:a=!1,keepMounted:p=!1,modifiers:d,open:g,placement:_="bottom",popperOptions:C=rae,popperRef:S,style:I,transition:O=!1,slotProps:P={},slots:k={},...F}=t,[B,N]=R.useState(!0),G=()=>{N(!1)},$=()=>{N(!0)};if(!p&&!g&&(!O||B))return null;let X;if(s)X=s;else if(n){const le=HP(n);X=le&&eae(le)?Sl(le).body:Sl(null).body}const ee=!g&&p&&(!O||B)?"none":void 0,J=O?{in:g,onEnter:G,onExited:$}:void 0;return Ue.jsx(fU,{disablePortal:a,container:X,children:Ue.jsx(nae,{anchorEl:n,direction:u,disablePortal:a,modifiers:d,ref:r,open:O?!B:g,placement:_,popperOptions:C,popperRef:S,slotProps:P,slots:k,...F,style:{position:"fixed",top:0,left:0,display:ee,...I},TransitionProps:J,children:i})})}),aae=Qt(iae,{name:"MuiPopper",slot:"Root"})({}),hU=R.forwardRef(function(t,r){const n=w2(),i=Yn({props:t,name:"MuiPopper"}),{anchorEl:s,component:u,components:a,componentsProps:p,container:d,disablePortal:g,keepMounted:_,modifiers:C,open:S,placement:I,popperOptions:O,popperRef:P,transition:k,slots:F,slotProps:B,...N}=i,G=F?.root??a?.Root,$={anchorEl:s,container:d,disablePortal:g,keepMounted:_,modifiers:C,open:S,placement:I,popperOptions:O,popperRef:P,transition:k,...N};return Ue.jsx(aae,{as:u,direction:n?"rtl":"ltr",slots:{root:G},slotProps:B??p,...$,ref:r})});function w_(e){return parseInt(e,10)||0}const oae={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function sae(e){for(const t in e)return!1;return!0}function mk(e){return sae(e)||e.outerHeightStyle===0&&!e.overflowing}const lae=R.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:s=1,style:u,value:a,...p}=t,{current:d}=R.useRef(a!=null),g=R.useRef(null),_=Oo(r,g),C=R.useRef(null),S=R.useRef(null),I=R.useCallback(()=>{const B=g.current,N=S.current;if(!B||!N)return;const $=Kc(B).getComputedStyle(B);if($.width==="0px")return{outerHeightStyle:0,overflowing:!1};N.style.width=$.width,N.value=B.value||t.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const X=$.boxSizing,ee=w_($.paddingBottom)+w_($.paddingTop),J=w_($.borderBottomWidth)+w_($.borderTopWidth),le=N.scrollHeight;N.value="x";const Z=N.scrollHeight;let H=le;s&&(H=Math.max(Number(s)*Z,H)),i&&(H=Math.min(Number(i)*Z,H)),H=Math.max(H,Z);const oe=H+(X==="border-box"?ee+J:0),ue=Math.abs(H-le)<=1;return{outerHeightStyle:oe,overflowing:ue}},[i,s,t.placeholder]),O=gc(()=>{const B=g.current,N=I();if(!B||!N||mk(N))return!1;const G=N.outerHeightStyle;return C.current!=null&&C.current!==G}),P=R.useCallback(()=>{const B=g.current,N=I();if(!B||!N||mk(N))return;const G=N.outerHeightStyle;C.current!==G&&(C.current=G,B.style.height=`${G}px`),B.style.overflow=N.overflowing?"hidden":""},[I]),k=R.useRef(-1);Vu(()=>{const B=cM(P),N=g?.current;if(!N)return;const G=Kc(N);G.addEventListener("resize",B);let $;return typeof ResizeObserver<"u"&&($=new ResizeObserver(()=>{O()&&($.unobserve(N),cancelAnimationFrame(k.current),P(),k.current=requestAnimationFrame(()=>{$.observe(N)}))}),$.observe(N)),()=>{B.clear(),cancelAnimationFrame(k.current),G.removeEventListener("resize",B),$&&$.disconnect()}},[I,P,O]),Vu(()=>{P()});const F=B=>{d||P();const N=B.target,G=N.value.length,$=N.value.endsWith(`
`),X=N.selectionStart===G;$&&X&&N.setSelectionRange(G,G),n&&n(B)};return Ue.jsxs(R.Fragment,{children:[Ue.jsx("textarea",{value:a,onChange:F,ref:_,rows:s,style:u,...p}),Ue.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:S,tabIndex:-1,style:{...oae.shadow,...u,paddingTop:0,paddingBottom:0}})]})});function oy({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const M2=R.createContext(void 0);function Ld(){return R.useContext(M2)}function gk(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Z1(e,t=!1){return e&&(gk(e.value)&&e.value!==""||t&&gk(e.defaultValue)&&e.defaultValue!=="")}function uae(e){return e.startAdornment}function cae(e){return Wn("MuiInputBase",e)}const ey=$n("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var yk;const O2=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${ln(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},R2=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},fae=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:s,focused:u,formControl:a,fullWidth:p,hiddenLabel:d,multiline:g,readOnly:_,size:C,startAdornment:S,type:I}=e,O={root:["root",`color${ln(r)}`,n&&"disabled",i&&"error",p&&"fullWidth",u&&"focused",a&&"formControl",C&&C!=="medium"&&`size${ln(C)}`,g&&"multiline",S&&"adornedStart",s&&"adornedEnd",d&&"hiddenLabel",_&&"readOnly"],input:["input",n&&"disabled",I==="search"&&"inputTypeSearch",g&&"inputMultiline",C==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",S&&"inputAdornedStart",s&&"inputAdornedEnd",_&&"readOnly"]};return Zn(O,cae,t)},L2=Qt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:O2})(yi(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ey.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),D2=Qt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:R2})(yi(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ey.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${ey.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),vk=uM({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),wM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:u,className:a,color:p,components:d={},componentsProps:g={},defaultValue:_,disabled:C,disableInjectingGlobalStyles:S,endAdornment:I,error:O,fullWidth:P=!1,id:k,inputComponent:F="input",inputProps:B={},inputRef:N,margin:G,maxRows:$,minRows:X,multiline:ee=!1,name:J,onBlur:le,onChange:Z,onClick:H,onFocus:oe,onKeyDown:ue,onKeyUp:ce,placeholder:be,readOnly:Te,renderSuffix:ve,rows:Ce,size:$e,slotProps:Je={},slots:ge={},startAdornment:Ee,type:Ie="text",value:Le,...Ve}=n,ht=B.value!=null?B.value:Le,{current:It}=R.useRef(ht!=null),xt=R.useRef(),rt=R.useCallback(Ne=>{},[]),zt=Oo(xt,N,B.ref,rt),[Lt,Ft]=R.useState(!1),dt=Ld(),ke=oy({props:n,muiFormControl:dt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ke.focused=dt?dt.focused:Lt,R.useEffect(()=>{!dt&&C&&Lt&&(Ft(!1),le&&le())},[dt,C,Lt,le]);const fr=dt&&dt.onFilled,sr=dt&&dt.onEmpty,xr=R.useCallback(Ne=>{Z1(Ne)?fr&&fr():sr&&sr()},[fr,sr]);Vu(()=>{It&&xr({value:ht})},[ht,xr,It]);const tr=Ne=>{oe&&oe(Ne),B.onFocus&&B.onFocus(Ne),dt&&dt.onFocus?dt.onFocus(Ne):Ft(!0)},Ge=Ne=>{le&&le(Ne),B.onBlur&&B.onBlur(Ne),dt&&dt.onBlur?dt.onBlur(Ne):Ft(!1)},nt=(Ne,...Tt)=>{if(!It){const bt=Ne.target||xt.current;if(bt==null)throw new Error(kh(1));xr({value:bt.value})}B.onChange&&B.onChange(Ne,...Tt),Z&&Z(Ne,...Tt)};R.useEffect(()=>{xr(xt.current)},[]);const ut=Ne=>{xt.current&&Ne.currentTarget===Ne.target&&xt.current.focus(),H&&H(Ne)};let Nt=F,Kt=B;ee&&Nt==="input"&&(Ce?Kt={type:void 0,minRows:Ce,maxRows:Ce,...Kt}:Kt={type:void 0,maxRows:$,minRows:X,...Kt},Nt=lae);const Vt=Ne=>{xr(Ne.animationName==="mui-auto-fill-cancel"?xt.current:{value:"x"})};R.useEffect(()=>{dt&&dt.setAdornedStart(!!Ee)},[dt,Ee]);const Ke={...n,color:ke.color||"primary",disabled:ke.disabled,endAdornment:I,error:ke.error,focused:ke.focused,formControl:dt,fullWidth:P,hiddenLabel:ke.hiddenLabel,multiline:ee,size:ke.size,startAdornment:Ee,type:Ie},me=fae(Ke),pe=ge.root||d.Root||L2,Ae=Je.root||g.root||{},Be=ge.input||d.Input||D2;return Kt={...Kt,...Je.input??g.input},Ue.jsxs(R.Fragment,{children:[!S&&typeof vk=="function"&&(yk||(yk=Ue.jsx(vk,{}))),Ue.jsxs(pe,{...Ae,ref:r,onClick:ut,...Ve,...!Xg(pe)&&{ownerState:{...Ke,...Ae.ownerState}},className:Br(me.root,Ae.className,a,Te&&"MuiInputBase-readOnly"),children:[Ee,Ue.jsx(M2.Provider,{value:null,children:Ue.jsx(Be,{"aria-invalid":ke.error,"aria-describedby":i,autoComplete:s,autoFocus:u,defaultValue:_,disabled:ke.disabled,id:k,onAnimationStart:Vt,name:J,placeholder:be,readOnly:Te,required:ke.required,rows:Ce,value:ht,onKeyDown:ue,onKeyUp:ce,type:Ie,...Kt,...!Xg(Be)&&{as:Nt,ownerState:{...Ke,...Kt.ownerState}},ref:zt,className:Br(me.input,Kt.className,Te&&"MuiInputBase-readOnly"),onBlur:Ge,onChange:nt,onFocus:tr})}),I,ve?ve({...ke,startAdornment:Ee}):null]})]})});function hae(e){return Wn("MuiInput",e)}const fv={...ey,...$n("MuiInput",["root","underline","input"])};function dae(e){return Wn("MuiOutlinedInput",e)}const Cf={...ey,...$n("MuiOutlinedInput",["root","notchedOutline","input"])};function pae(e){return Wn("MuiFilledInput",e)}const hp={...ey,...$n("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},mae=Si(Ue.jsx("path",{d:"M7 10l5 5 5-5z"})),gae=Si(Ue.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function yae(e){return Wn("MuiAvatar",e)}$n("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const vae=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Zn({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},yae,t)},bae=Qt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(yi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),_ae=Qt("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),xae=Qt(gae,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function wae({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,s]=R.useState(!1);return R.useEffect(()=>{if(!r&&!n)return;s(!1);let u=!0;const a=new Image;return a.onload=()=>{u&&s("loaded")},a.onerror=()=>{u&&s("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{u=!1}},[e,t,r,n]),i}const WP=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiAvatar"}),{alt:i,children:s,className:u,component:a="div",slots:p={},slotProps:d={},imgProps:g,sizes:_,src:C,srcSet:S,variant:I="circular",...O}=n;let P=null;const k={...n,component:a,variant:I},F=wae({...g,...typeof d.img=="function"?d.img(k):d.img,src:C,srcSet:S}),B=C||S,N=B&&F!=="error";k.colorDefault=!N,delete k.ownerState;const G=vae(k),[$,X]=Kn("root",{ref:r,className:Br(G.root,u),elementType:bae,externalForwardedProps:{slots:p,slotProps:d,component:a,...O},ownerState:k}),[ee,J]=Kn("img",{className:G.img,elementType:_ae,externalForwardedProps:{slots:p,slotProps:{img:{...g,...d.img}}},additionalProps:{alt:i,src:C,srcSet:S,sizes:_},ownerState:k}),[le,Z]=Kn("fallback",{className:G.fallback,elementType:xae,externalForwardedProps:{slots:p,slotProps:d},shouldForwardComponentProp:!0,ownerState:k});return N?P=Ue.jsx(ee,{...J}):s||s===0?P=s:B&&i?P=i[0]:P=Ue.jsx(le,{...Z}),Ue.jsx($,{...X,children:P})}),Sae={entering:{opacity:1},entered:{opacity:1}},ZP=R.forwardRef(function(t,r){const n=Uf(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:u=!0,children:a,easing:p,in:d,onEnter:g,onEntered:_,onEntering:C,onExit:S,onExited:I,onExiting:O,style:P,timeout:k=i,TransitionComponent:F=ef,...B}=t,N=R.useRef(null),G=Oo(N,Rd(a),r),$=ue=>ce=>{if(ue){const be=N.current;ce===void 0?ue(be):ue(be,ce)}},X=$(C),ee=$((ue,ce)=>{pM(ue);const be=Zg({style:P,timeout:k,easing:p},{mode:"enter"});ue.style.webkitTransition=n.transitions.create("opacity",be),ue.style.transition=n.transitions.create("opacity",be),g&&g(ue,ce)}),J=$(_),le=$(O),Z=$(ue=>{const ce=Zg({style:P,timeout:k,easing:p},{mode:"exit"});ue.style.webkitTransition=n.transitions.create("opacity",ce),ue.style.transition=n.transitions.create("opacity",ce),S&&S(ue)}),H=$(I),oe=ue=>{s&&s(N.current,ue)};return Ue.jsx(F,{appear:u,in:d,nodeRef:N,onEnter:ee,onEntered:J,onEntering:X,onExit:Z,onExited:H,onExiting:le,addEndListener:oe,timeout:k,...B,children:(ue,{ownerState:ce,...be})=>R.cloneElement(a,{style:{opacity:0,visibility:ue==="exited"&&!d?"hidden":void 0,...Sae[ue],...P,...a.props.style},ref:G,...be})})});function Eae(e){return Wn("MuiBackdrop",e)}$n("MuiBackdrop",["root","invisible"]);const Cae=e=>{const{classes:t,invisible:r}=e;return Zn({root:["root",r&&"invisible"]},Eae,t)},Aae=Qt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),dU=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiBackdrop"}),{children:i,className:s,component:u="div",invisible:a=!1,open:p,components:d={},componentsProps:g={},slotProps:_={},slots:C={},TransitionComponent:S,transitionDuration:I,...O}=n,P={...n,component:u,invisible:a},k=Cae(P),F={transition:S,root:d.Root,...C},B={...g,..._},N={component:u,slots:F,slotProps:B},[G,$]=Kn("root",{elementType:Aae,externalForwardedProps:N,className:Br(k.root,s),ownerState:P}),[X,ee]=Kn("transition",{elementType:ZP,externalForwardedProps:N,ownerState:P});return Ue.jsx(X,{in:p,timeout:I,...O,...ee,children:Ue.jsx(G,{"aria-hidden":!0,...$,classes:k,ref:r,children:i})})}),Tae=$n("MuiBox",["root"]),Pae=Ad(),Dd=Eq({themeId:mc,defaultTheme:Pae,defaultClassName:Tae.root,generateClassName:rM.generate});function Iae(e){return Wn("MuiButton",e)}const dp=$n("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Mae=R.createContext({}),Oae=R.createContext(void 0),Rae=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:s,loading:u,loadingPosition:a,classes:p}=e,d={root:["root",u&&"loading",s,`${s}${ln(t)}`,`size${ln(i)}`,`${s}Size${ln(i)}`,`color${ln(t)}`,r&&"disableElevation",n&&"fullWidth",u&&`loadingPosition${ln(a)}`],startIcon:["icon","startIcon",`iconSize${ln(i)}`],endIcon:["icon","endIcon",`iconSize${ln(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},g=Zn(d,Iae,p);return{...p,...g}},pU=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Lae=Qt(P2,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${ln(r.color)}`],t[`size${ln(r.size)}`],t[`${r.variant}Size${ln(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(yi(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${dp.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${dp.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${dp.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${dp.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Hl()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${dp.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${dp.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${dp.loading}`]:{color:"transparent"}}}]}})),Dae=Qt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${ln(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...pU]})),kae=Qt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${ln(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...pU]})),Fae=Qt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),bk=Qt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Yc=R.forwardRef(function(t,r){const n=R.useContext(Mae),i=R.useContext(Oae),s=D0(n,t),u=Yn({props:s,name:"MuiButton"}),{children:a,color:p="primary",component:d="button",className:g,disabled:_=!1,disableElevation:C=!1,disableFocusRipple:S=!1,endIcon:I,focusVisibleClassName:O,fullWidth:P=!1,id:k,loading:F=null,loadingIndicator:B,loadingPosition:N="center",size:G="medium",startIcon:$,type:X,variant:ee="text",...J}=u,le=em(k),Z=B??Ue.jsx(ay,{"aria-labelledby":le,color:"inherit",size:16}),H={...u,color:p,component:d,disabled:_,disableElevation:C,disableFocusRipple:S,fullWidth:P,loading:F,loadingIndicator:Z,loadingPosition:N,size:G,type:X,variant:ee},oe=Rae(H),ue=($||F&&N==="start")&&Ue.jsx(Dae,{className:oe.startIcon,ownerState:H,children:$||Ue.jsx(bk,{className:oe.loadingIconPlaceholder,ownerState:H})}),ce=(I||F&&N==="end")&&Ue.jsx(kae,{className:oe.endIcon,ownerState:H,children:I||Ue.jsx(bk,{className:oe.loadingIconPlaceholder,ownerState:H})}),be=i||"",Te=typeof F=="boolean"?Ue.jsx("span",{className:oe.loadingWrapper,style:{display:"contents"},children:F&&Ue.jsx(Fae,{className:oe.loadingIndicator,ownerState:H,children:Z})}):null;return Ue.jsxs(Lae,{ownerState:H,className:Br(n.className,oe.root,g,be),component:d,disabled:_||F,focusRipple:!S,focusVisibleClassName:Br(oe.focusVisible,O),ref:r,type:X,id:F?le:k,...J,classes:oe,children:[ue,N!=="end"&&Te,a,N==="end"&&Te,ce]})});function Nae(e){return Wn("MuiCard",e)}$n("MuiCard",["root"]);const Bae=e=>{const{classes:t}=e;return Zn({root:["root"]},Nae,t)},jae=Qt(tf,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),SM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiCard"}),{className:i,raised:s=!1,...u}=n,a={...n,raised:s},p=Bae(a);return Ue.jsx(jae,{className:Br(p.root,i),elevation:s?8:void 0,ref:r,ownerState:a,...u})});function zae(e){return Wn("MuiCardContent",e)}$n("MuiCardContent",["root"]);const $ae=e=>{const{classes:t}=e;return Zn({root:["root"]},zae,t)},qae=Qt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),EM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiCardContent"}),{className:i,component:s="div",...u}=n,a={...n,component:s},p=$ae(a);return Ue.jsx(qae,{as:s,className:Br(p.root,i),ownerState:a,ref:r,...u})});function Uae(e){return Wn("PrivateSwitchBase",e)}$n("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Vae=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,s={root:["root",r&&"checked",n&&"disabled",i&&`edge${ln(i)}`],input:["input"]};return Zn(s,Uae,t)},Gae=Qt(P2,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Hae=Qt("input",{name:"MuiSwitchBase",shouldForwardProp:El})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Wae=R.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:s,defaultChecked:u,disabled:a,disableFocusRipple:p=!1,edge:d=!1,icon:g,id:_,inputProps:C,inputRef:S,name:I,onBlur:O,onChange:P,onFocus:k,readOnly:F,required:B=!1,tabIndex:N,type:G,value:$,slots:X={},slotProps:ee={},...J}=t,[le,Z]=q1({controlled:i,default:!!u,name:"SwitchBase",state:"checked"}),H=Ld(),oe=Le=>{k&&k(Le),H&&H.onFocus&&H.onFocus(Le)},ue=Le=>{O&&O(Le),H&&H.onBlur&&H.onBlur(Le)},ce=Le=>{if(Le.nativeEvent.defaultPrevented)return;const Ve=Le.target.checked;Z(Ve),P&&P(Le,Ve)};let be=a;H&&typeof be>"u"&&(be=H.disabled);const Te=G==="checkbox"||G==="radio",ve={...t,checked:le,disabled:be,disableFocusRipple:p,edge:d},Ce=Vae(ve),$e={slots:X,slotProps:{input:C,...ee}},[Je,ge]=Kn("root",{ref:r,elementType:Gae,className:Ce.root,shouldForwardComponentProp:!0,externalForwardedProps:{...$e,component:"span",...J},getSlotProps:Le=>({...Le,onFocus:Ve=>{Le.onFocus?.(Ve),oe(Ve)},onBlur:Ve=>{Le.onBlur?.(Ve),ue(Ve)}}),ownerState:ve,additionalProps:{centerRipple:!0,focusRipple:!p,disabled:be,role:void 0,tabIndex:null}}),[Ee,Ie]=Kn("input",{ref:S,elementType:Hae,className:Ce.input,externalForwardedProps:$e,getSlotProps:Le=>({...Le,onChange:Ve=>{Le.onChange?.(Ve),ce(Ve)}}),ownerState:ve,additionalProps:{autoFocus:n,checked:i,defaultChecked:u,disabled:be,id:Te?_:void 0,name:I,readOnly:F,required:B,tabIndex:N,type:G,...G==="checkbox"&&$===void 0?{}:{value:$}}});return Ue.jsxs(Je,{...ge,children:[Ue.jsx(Ee,{...Ie}),le?s:g]})}),Zae=Si(Ue.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Xae=Si(Ue.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Kae=Si(Ue.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Yae(e){return Wn("MuiCheckbox",e)}const q5=$n("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Jae=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,s={root:["root",r&&"indeterminate",`color${ln(n)}`,`size${ln(i)}`]},u=Zn(s,Yae,t);return{...t,...u}},Qae=Qt(Wae,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${ln(r.size)}`],r.color!=="default"&&t[`color${ln(r.color)}`]]}})(yi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{[`&.${q5.checked}, &.${q5.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${q5.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),eoe=Ue.jsx(Xae,{}),toe=Ue.jsx(Zae,{}),roe=Ue.jsx(Kae,{}),mU=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiCheckbox"}),{checkedIcon:i=eoe,color:s="primary",icon:u=toe,indeterminate:a=!1,indeterminateIcon:p=roe,inputProps:d,size:g="medium",disableRipple:_=!1,className:C,slots:S={},slotProps:I={},...O}=n,P=a?p:u,k=a?p:i,F={...n,disableRipple:_,color:s,indeterminate:a,size:g},B=Jae(F),N=I.input??d,[G,$]=Kn("root",{ref:r,elementType:Qae,className:Br(B.root,C),shouldForwardComponentProp:!0,externalForwardedProps:{slots:S,slotProps:I,...O},ownerState:F,additionalProps:{type:"checkbox",icon:R.cloneElement(P,{fontSize:P.props.fontSize??g}),checkedIcon:R.cloneElement(k,{fontSize:k.props.fontSize??g}),disableRipple:_,slots:S,slotProps:{input:fM(typeof N=="function"?N(F):N,{"data-indeterminate":a})}}});return Ue.jsx(G,{...$,classes:B})});function _k(e){return e.substring(2).toLowerCase()}function noe(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function ioe(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=e,u=R.useRef(!1),a=R.useRef(null),p=R.useRef(!1),d=R.useRef(!1);R.useEffect(()=>(setTimeout(()=>{p.current=!0},0),()=>{p.current=!1}),[]);const g=Oo(Rd(t),a),_=gc(I=>{const O=d.current;d.current=!1;const P=Sl(a.current);if(!p.current||!a.current||"clientX"in I&&noe(I,P))return;if(u.current){u.current=!1;return}let k;I.composedPath?k=I.composedPath().includes(a.current):k=!P.documentElement.contains(I.target)||a.current.contains(I.target),!k&&(r||!O)&&i(I)}),C=I=>O=>{d.current=!0;const P=t.props[I];P&&P(O)},S={ref:g};return s!==!1&&(S[s]=C(s)),R.useEffect(()=>{if(s!==!1){const I=_k(s),O=Sl(a.current),P=()=>{u.current=!0};return O.addEventListener(I,_),O.addEventListener("touchmove",P),()=>{O.removeEventListener(I,_),O.removeEventListener("touchmove",P)}}},[_,s]),n!==!1&&(S[n]=C(n)),R.useEffect(()=>{if(n!==!1){const I=_k(n),O=Sl(a.current);return O.addEventListener(I,_),()=>{O.removeEventListener(I,_)}}},[_,n]),R.cloneElement(t,S)}const XP=typeof uM({})=="function",aoe=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),ooe=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),gU=(e,t=!1)=>{const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([s,u])=>{const a=e.getColorSchemeSelector(s);a.startsWith("@")?r[a]={":root":{colorScheme:u.palette?.mode}}:r[a.replace(/\s*&/,"")]={colorScheme:u.palette?.mode}});let n={html:aoe(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...ooe(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const i=e.components?.MuiCssBaseline?.styleOverrides;return i&&(n=[n,i]),n},m1="mui-ecs",soe=e=>{const t=gU(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${m1})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([n,i])=>{const s=e.getColorSchemeSelector(n);s.startsWith("@")?r[s]={[`:root:not(:has(.${m1}))`]:{colorScheme:i.palette?.mode}}:r[s.replace(/\s*&/,"")]={[`&:not(:has(.${m1}))`]:{colorScheme:i.palette?.mode}}}),t},loe=uM(XP?({theme:e,enableColorScheme:t})=>gU(e,t):({theme:e})=>soe(e));function uoe(e){const t=Yn({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return Ue.jsxs(R.Fragment,{children:[XP&&Ue.jsx(loe,{enableColorScheme:n}),!XP&&!n&&Ue.jsx("span",{className:m1,style:{display:"none"}}),r]})}function yU(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function coe(e){const t=Sl(e);return t.body===e?Kc(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function i0(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function xk(e){return parseInt(Kc(e).getComputedStyle(e).paddingRight,10)||0}function foe(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function wk(e,t,r,n,i){const s=[t,r,...n];[].forEach.call(e.children,u=>{const a=!s.includes(u),p=!foe(u);a&&p&&i0(u,i)})}function U5(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function hoe(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(coe(n)){const u=yU(Kc(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${xk(n)+u}px`;const a=Sl(n).querySelectorAll(".mui-fixed");[].forEach.call(a,p=>{r.push({value:p.style.paddingRight,property:"padding-right",el:p}),p.style.paddingRight=`${xk(p)+u}px`})}let s;if(n.parentNode instanceof DocumentFragment)s=Sl(n).body;else{const u=n.parentElement,a=Kc(n);s=u?.nodeName==="HTML"&&a.getComputedStyle(u).overflowY==="scroll"?u:n}r.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{r.forEach(({value:s,el:u,property:a})=>{s?u.style.setProperty(a,s):u.style.removeProperty(a)})}}function doe(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class poe{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&i0(t.modalRef,!1);const i=doe(r);wk(r,t.mount,t.modalRef,i,!0);const s=U5(this.containers,u=>u.container===r);return s!==-1?(this.containers[s].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=U5(this.containers,s=>s.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=hoe(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=U5(this.containers,u=>u.modals.includes(t)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(t),1),this.modals.splice(n,1),s.modals.length===0)s.restore&&s.restore(),t.modalRef&&i0(t.modalRef,r),wk(s.container,t.mount,t.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const u=s.modals[s.modals.length-1];u.modalRef&&i0(u.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const moe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function goe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function yoe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function voe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||yoe(e))}function boe(e){const t=[],r=[];return Array.from(e.querySelectorAll(moe)).forEach((n,i)=>{const s=goe(n);s===-1||!voe(n)||(s===0?t.push(n):r.push({documentOrder:i,tabIndex:s,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function _oe(){return!0}function xoe(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:s=boe,isEnabled:u=_oe,open:a}=e,p=R.useRef(!1),d=R.useRef(null),g=R.useRef(null),_=R.useRef(null),C=R.useRef(null),S=R.useRef(!1),I=R.useRef(null),O=Oo(Rd(t),I),P=R.useRef(null);R.useEffect(()=>{!a||!I.current||(S.current=!r)},[r,a]),R.useEffect(()=>{if(!a||!I.current)return;const B=Sl(I.current);return I.current.contains(B.activeElement)||(I.current.hasAttribute("tabIndex")||I.current.setAttribute("tabIndex","-1"),S.current&&I.current.focus()),()=>{i||(_.current&&_.current.focus&&(p.current=!0,_.current.focus()),_.current=null)}},[a]),R.useEffect(()=>{if(!a||!I.current)return;const B=Sl(I.current),N=X=>{P.current=X,!(n||!u()||X.key!=="Tab")&&B.activeElement===I.current&&X.shiftKey&&(p.current=!0,g.current&&g.current.focus())},G=()=>{const X=I.current;if(X===null)return;if(!B.hasFocus()||!u()||p.current){p.current=!1;return}if(X.contains(B.activeElement)||n&&B.activeElement!==d.current&&B.activeElement!==g.current)return;if(B.activeElement!==C.current)C.current=null;else if(C.current!==null)return;if(!S.current)return;let ee=[];if((B.activeElement===d.current||B.activeElement===g.current)&&(ee=s(I.current)),ee.length>0){const J=!!(P.current?.shiftKey&&P.current?.key==="Tab"),le=ee[0],Z=ee[ee.length-1];typeof le!="string"&&typeof Z!="string"&&(J?Z.focus():le.focus())}else X.focus()};B.addEventListener("focusin",G),B.addEventListener("keydown",N,!0);const $=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&G()},50);return()=>{clearInterval($),B.removeEventListener("focusin",G),B.removeEventListener("keydown",N,!0)}},[r,n,i,u,a,s]);const k=B=>{_.current===null&&(_.current=B.relatedTarget),S.current=!0,C.current=B.target;const N=t.props.onFocus;N&&N(B)},F=B=>{_.current===null&&(_.current=B.relatedTarget),S.current=!0};return Ue.jsxs(R.Fragment,{children:[Ue.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:d,"data-testid":"sentinelStart"}),R.cloneElement(t,{ref:O,onFocus:k}),Ue.jsx("div",{tabIndex:a?0:-1,onFocus:F,ref:g,"data-testid":"sentinelEnd"})]})}function woe(e){return typeof e=="function"?e():e}function Soe(e){return e?e.props.hasOwnProperty("in"):!1}const Sk=()=>{},S_=new poe;function Eoe(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:u,children:a,onClose:p,open:d,rootRef:g}=e,_=R.useRef({}),C=R.useRef(null),S=R.useRef(null),I=Oo(S,g),[O,P]=R.useState(!d),k=Soe(a);let F=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(F=!1);const B=()=>Sl(C.current),N=()=>(_.current.modalRef=S.current,_.current.mount=C.current,_.current),G=()=>{S_.mount(N(),{disableScrollLock:n}),S.current&&(S.current.scrollTop=0)},$=gc(()=>{const ce=woe(t)||B().body;S_.add(N(),ce),S.current&&G()}),X=()=>S_.isTopModal(N()),ee=gc(ce=>{C.current=ce,ce&&(d&&X()?G():S.current&&i0(S.current,F))}),J=R.useCallback(()=>{S_.remove(N(),F)},[F]);R.useEffect(()=>()=>{J()},[J]),R.useEffect(()=>{d?$():(!k||!i)&&J()},[d,J,k,i,$]);const le=ce=>be=>{ce.onKeyDown?.(be),!(be.key!=="Escape"||be.which===229||!X())&&(r||(be.stopPropagation(),p&&p(be,"escapeKeyDown")))},Z=ce=>be=>{ce.onClick?.(be),be.target===be.currentTarget&&p&&p(be,"backdropClick")};return{getRootProps:(ce={})=>{const be=V1(e);delete be.onTransitionEnter,delete be.onTransitionExited;const Te={...be,...ce};return{role:"presentation",...Te,onKeyDown:le(Te),ref:I}},getBackdropProps:(ce={})=>{const be=ce;return{"aria-hidden":!0,...be,onClick:Z(be),open:d}},getTransitionProps:()=>{const ce=()=>{P(!1),s&&s()},be=()=>{P(!0),u&&u(),i&&J()};return{onEnter:XD(ce,a?.props.onEnter??Sk),onExited:XD(be,a?.props.onExited??Sk)}},rootRef:I,portalRef:ee,isTopModal:X,exited:O,hasTransition:k}}function Coe(e){return Wn("MuiModal",e)}$n("MuiModal",["root","hidden","backdrop"]);const Aoe=e=>{const{open:t,exited:r,classes:n}=e;return Zn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},Coe,n)},Toe=Qt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(yi(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),Poe=Qt(dU,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),CM=R.forwardRef(function(t,r){const n=Yn({name:"MuiModal",props:t}),{BackdropComponent:i=Poe,BackdropProps:s,classes:u,className:a,closeAfterTransition:p=!1,children:d,container:g,component:_,components:C={},componentsProps:S={},disableAutoFocus:I=!1,disableEnforceFocus:O=!1,disableEscapeKeyDown:P=!1,disablePortal:k=!1,disableRestoreFocus:F=!1,disableScrollLock:B=!1,hideBackdrop:N=!1,keepMounted:G=!1,onClose:$,onTransitionEnter:X,onTransitionExited:ee,open:J,slotProps:le={},slots:Z={},theme:H,...oe}=n,ue={...n,closeAfterTransition:p,disableAutoFocus:I,disableEnforceFocus:O,disableEscapeKeyDown:P,disablePortal:k,disableRestoreFocus:F,disableScrollLock:B,hideBackdrop:N,keepMounted:G},{getRootProps:ce,getBackdropProps:be,getTransitionProps:Te,portalRef:ve,isTopModal:Ce,exited:$e,hasTransition:Je}=Eoe({...ue,rootRef:r}),ge={...ue,exited:$e},Ee=Aoe(ge),Ie={};if(d.props.tabIndex===void 0&&(Ie.tabIndex="-1"),Je){const{onEnter:rt,onExited:zt}=Te();Ie.onEnter=rt,Ie.onExited=zt}const Le={slots:{root:C.Root,backdrop:C.Backdrop,...Z},slotProps:{...S,...le}},[Ve,ht]=Kn("root",{ref:r,elementType:Toe,externalForwardedProps:{...Le,...oe,component:_},getSlotProps:ce,ownerState:ge,className:Br(a,Ee?.root,!ge.open&&ge.exited&&Ee?.hidden)}),[It,xt]=Kn("backdrop",{ref:s?.ref,elementType:i,externalForwardedProps:Le,shouldForwardComponentProp:!0,additionalProps:s,getSlotProps:rt=>be({...rt,onClick:zt=>{rt?.onClick&&rt.onClick(zt)}}),className:Br(s?.className,Ee?.backdrop),ownerState:ge});return!G&&!J&&(!Je||$e)?null:Ue.jsx(fU,{ref:ve,container:g,disablePortal:k,children:Ue.jsxs(Ve,{...ht,children:[!N&&i?Ue.jsx(It,{...xt}):null,Ue.jsx(xoe,{disableEnforceFocus:O,disableAutoFocus:I,disableRestoreFocus:F,isEnabled:Ce,open:J,children:R.cloneElement(d,Ie)})]})})});function Ioe(e){return Wn("MuiDialog",e)}const V5=$n("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),vU=R.createContext({}),Moe=Qt(dU,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Ooe=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:s}=e,u={root:["root"],container:["container",`scroll${ln(r)}`],paper:["paper",`paperScroll${ln(r)}`,`paperWidth${ln(String(n))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Zn(u,Ioe,t)},Roe=Qt(CM,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Loe=Qt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${ln(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Doe=Qt(tf,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${ln(r.scroll)}`],t[`paperWidth${ln(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(yi(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${V5.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${V5.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${V5.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),koe=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDialog"}),i=Uf(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":a,"aria-modal":p=!0,BackdropComponent:d,BackdropProps:g,children:_,className:C,disableEscapeKeyDown:S=!1,fullScreen:I=!1,fullWidth:O=!1,maxWidth:P="sm",onClick:k,onClose:F,open:B,PaperComponent:N=tf,PaperProps:G={},scroll:$="paper",slots:X={},slotProps:ee={},TransitionComponent:J=ZP,transitionDuration:le=s,TransitionProps:Z,...H}=n,oe={...n,disableEscapeKeyDown:S,fullScreen:I,fullWidth:O,maxWidth:P,scroll:$},ue=Ooe(oe),ce=R.useRef(),be=Ft=>{ce.current=Ft.target===Ft.currentTarget},Te=Ft=>{k&&k(Ft),ce.current&&(ce.current=null,F&&F(Ft,"backdropClick"))},ve=em(a),Ce=R.useMemo(()=>({titleId:ve}),[ve]),$e={transition:J,...X},Je={transition:Z,paper:G,backdrop:g,...ee},ge={slots:$e,slotProps:Je},[Ee,Ie]=Kn("root",{elementType:Roe,shouldForwardComponentProp:!0,externalForwardedProps:ge,ownerState:oe,className:Br(ue.root,C),ref:r}),[Le,Ve]=Kn("backdrop",{elementType:Moe,shouldForwardComponentProp:!0,externalForwardedProps:ge,ownerState:oe}),[ht,It]=Kn("paper",{elementType:Doe,shouldForwardComponentProp:!0,externalForwardedProps:ge,ownerState:oe,className:Br(ue.paper,G.className)}),[xt,rt]=Kn("container",{elementType:Loe,externalForwardedProps:ge,ownerState:oe,className:ue.container}),[zt,Lt]=Kn("transition",{elementType:ZP,externalForwardedProps:ge,ownerState:oe,additionalProps:{appear:!0,in:B,timeout:le,role:"presentation"}});return Ue.jsx(Ee,{closeAfterTransition:!0,slots:{backdrop:Le},slotProps:{backdrop:{transitionDuration:le,as:d,...Ve}},disableEscapeKeyDown:S,onClose:F,open:B,onClick:Te,...Ie,...H,children:Ue.jsx(zt,{...Lt,children:Ue.jsx(xt,{onMouseDown:be,...rt,children:Ue.jsx(ht,{as:N,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":ve,"aria-modal":p,...It,children:Ue.jsx(vU.Provider,{value:Ce,children:_})})})})})});function Foe(e){return Wn("MuiDialogActions",e)}$n("MuiDialogActions",["root","spacing"]);const Noe=e=>{const{classes:t,disableSpacing:r}=e;return Zn({root:["root",!r&&"spacing"]},Foe,t)},Boe=Qt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),joe=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1,...u}=n,a={...n,disableSpacing:s},p=Noe(a);return Ue.jsx(Boe,{className:Br(p.root,i),ownerState:a,ref:r,...u})});function zoe(e){return Wn("MuiDialogContent",e)}$n("MuiDialogContent",["root","dividers"]);function $oe(e){return Wn("MuiDialogTitle",e)}const qoe=$n("MuiDialogTitle",["root"]),Uoe=e=>{const{classes:t,dividers:r}=e;return Zn({root:["root",r&&"dividers"]},zoe,t)},Voe=Qt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(yi(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${qoe.root} + &`]:{paddingTop:0}}}]}))),Goe=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...u}=n,a={...n,dividers:s},p=Uoe(a);return Ue.jsx(Voe,{className:Br(p.root,i),ownerState:a,ref:r,...u})});function Hoe(e){return Wn("MuiDialogContentText",e)}$n("MuiDialogContentText",["root"]);const Woe=e=>{const{classes:t}=e,n=Zn({root:["root"]},Hoe,t);return{...t,...n}},Zoe=Qt($o,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Xoe=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDialogContentText"}),{children:i,className:s,...u}=n,a=Woe(u);return Ue.jsx(Zoe,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:u,className:Br(a.root,s),...n,classes:a})}),Koe=e=>{const{classes:t}=e;return Zn({root:["root"]},$oe,t)},Yoe=Qt($o,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Joe=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDialogTitle"}),{className:i,id:s,...u}=n,a=n,p=Koe(a),{titleId:d=s}=R.useContext(vU);return Ue.jsx(Yoe,{component:"h2",className:Br(p.root,i),ownerState:a,ref:r,variant:"h6",id:s??d,...u})}),Ek=$n("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Qoe(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),s=Kc(t);let u;if(t.fakeTransform)u=t.fakeTransform;else{const d=s.getComputedStyle(t);u=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let a=0,p=0;if(u&&u!=="none"&&typeof u=="string"){const d=u.split("(")[1].split(")")[0].split(",");a=parseInt(d[4],10),p=parseInt(d[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${s.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+p-n.top}px)`:`translateY(${s.innerHeight+p-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-p}px)`:`translateY(-${n.top+n.height-p}px)`}function ese(e){return typeof e=="function"?e():e}function E_(e,t,r){const n=ese(r),i=Qoe(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const bU=R.forwardRef(function(t,r){const n=Uf(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},s={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:a=!0,children:p,container:d,direction:g="down",easing:_=i,in:C,onEnter:S,onEntered:I,onEntering:O,onExit:P,onExited:k,onExiting:F,style:B,timeout:N=s,TransitionComponent:G=ef,...$}=t,X=R.useRef(null),ee=Oo(Rd(p),X,r),J=ve=>Ce=>{ve&&(Ce===void 0?ve(X.current):ve(X.current,Ce))},le=J((ve,Ce)=>{E_(g,ve,d),pM(ve),S&&S(ve,Ce)}),Z=J((ve,Ce)=>{const $e=Zg({timeout:N,style:B,easing:_},{mode:"enter"});ve.style.webkitTransition=n.transitions.create("-webkit-transform",{...$e}),ve.style.transition=n.transitions.create("transform",{...$e}),ve.style.webkitTransform="none",ve.style.transform="none",O&&O(ve,Ce)}),H=J(I),oe=J(F),ue=J(ve=>{const Ce=Zg({timeout:N,style:B,easing:_},{mode:"exit"});ve.style.webkitTransition=n.transitions.create("-webkit-transform",Ce),ve.style.transition=n.transitions.create("transform",Ce),E_(g,ve,d),P&&P(ve)}),ce=J(ve=>{ve.style.webkitTransition="",ve.style.transition="",k&&k(ve)}),be=ve=>{u&&u(X.current,ve)},Te=R.useCallback(()=>{X.current&&E_(g,X.current,d)},[g,d]);return R.useEffect(()=>{if(C||g==="down"||g==="right")return;const ve=cM(()=>{X.current&&E_(g,X.current,d)}),Ce=Kc(X.current);return Ce.addEventListener("resize",ve),()=>{ve.clear(),Ce.removeEventListener("resize",ve)}},[g,C,d]),R.useEffect(()=>{C||Te()},[C,Te]),Ue.jsx(G,{nodeRef:X,onEnter:le,onEntered:H,onEntering:Z,onExit:ue,onExited:ce,onExiting:oe,addEndListener:be,appear:a,in:C,timeout:N,...$,children:(ve,{ownerState:Ce,...$e})=>R.cloneElement(p,{ref:ee,style:{visibility:ve==="exited"&&!C?"hidden":void 0,...B,...p.props.style},...$e})})});function tse(e){return Wn("MuiDrawer",e)}$n("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const _U=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},rse=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${ln(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ln(r)}`,n!=="temporary"&&`paperAnchorDocked${ln(r)}`]};return Zn(i,tse,t)},nse=Qt(CM,{name:"MuiDrawer",slot:"Root",overridesResolver:_U})(yi(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),ise=Qt("div",{shouldForwardProp:El,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:_U})({flex:"0 0 auto"}),ase=Qt(tf,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${ln(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${ln(r.anchor)}`]]}})(yi(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),xU={left:"right",right:"left",top:"down",bottom:"up"};function ose(e){return["left","right"].includes(e)}function sse({direction:e},t){return e==="rtl"&&ose(t)?xU[t]:t}const lse=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiDrawer"}),i=Uf(),s=w2(),u={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:p,children:d,className:g,elevation:_=16,hideBackdrop:C=!1,ModalProps:{BackdropProps:S,...I}={},onClose:O,open:P=!1,PaperProps:k={},SlideProps:F,TransitionComponent:B,transitionDuration:N=u,variant:G="temporary",slots:$={},slotProps:X={},...ee}=n,J=R.useRef(!1);R.useEffect(()=>{J.current=!0},[]);const le=sse({direction:s?"rtl":"ltr"},a),H={...n,anchor:a,elevation:_,open:P,variant:G,...ee},oe=rse(H),ue={slots:{transition:B,...$},slotProps:{paper:k,transition:F,...X,backdrop:fM(X.backdrop||{...p,...S},{transitionDuration:N})}},[ce,be]=Kn("root",{ref:r,elementType:nse,className:Br(oe.root,oe.modal,g),shouldForwardComponentProp:!0,ownerState:H,externalForwardedProps:{...ue,...ee,...I},additionalProps:{open:P,onClose:O,hideBackdrop:C,slots:{backdrop:ue.slots.backdrop},slotProps:{backdrop:ue.slotProps.backdrop}}}),[Te,ve]=Kn("paper",{elementType:ase,shouldForwardComponentProp:!0,className:Br(oe.paper,k.className),ownerState:H,externalForwardedProps:ue,additionalProps:{elevation:G==="temporary"?_:0,square:!0,...G==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Ce,$e]=Kn("docked",{elementType:ise,ref:r,className:Br(oe.root,oe.docked,g),ownerState:H,externalForwardedProps:ue,additionalProps:ee}),[Je,ge]=Kn("transition",{elementType:bU,ownerState:H,externalForwardedProps:ue,additionalProps:{in:P,direction:xU[le],timeout:N,appear:J.current}}),Ee=Ue.jsx(Te,{...ve,children:d});if(G==="permanent")return Ue.jsx(Ce,{...$e,children:Ee});const Ie=Ue.jsx(Je,{...ge,children:Ee});return G==="persistent"?Ue.jsx(Ce,{...$e,children:Ie}):Ue.jsx(ce,{...be,children:Ie})}),use=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:s,hiddenLabel:u,multiline:a}=e,p={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${ln(s)}`,u&&"hiddenLabel",a&&"multiline"],input:["input"]},d=Zn(p,pae,t);return{...t,...d}},cse=Qt(L2,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...O2(e,t),!r.disableUnderline&&t.underline]}})(yi(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${hp.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${hp.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:u})=>!u.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hp.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hp.disabled}, .${hp.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${hp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Hl()).map(([u])=>({props:{disableUnderline:!1,color:u},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[u]?.main}`}}})),{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:12}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:12}},{props:({ownerState:u})=>u.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:u,size:a})=>u.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),fse=Qt(D2,{name:"MuiFilledInput",slot:"Input",overridesResolver:R2})(yi(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),AM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:u,fullWidth:a=!1,hiddenLabel:p,inputComponent:d="input",multiline:g=!1,slotProps:_,slots:C={},type:S="text",...I}=n,O={...n,disableUnderline:i,fullWidth:a,inputComponent:d,multiline:g,type:S},P=use(n),k={root:{ownerState:O},input:{ownerState:O}},F=_??u?is(k,_??u):k,B=C.root??s.Root??cse,N=C.input??s.Input??fse;return Ue.jsx(wM,{slots:{root:B,input:N},slotProps:F,fullWidth:a,inputComponent:d,multiline:g,ref:r,type:S,...I,classes:P})});AM.muiName="Input";function hse(e){return Wn("MuiFormControl",e)}$n("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const dse=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${ln(r)}`,n&&"fullWidth"]};return Zn(i,hse,t)},pse=Qt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${ln(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),mse=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiFormControl"}),{children:i,className:s,color:u="primary",component:a="div",disabled:p=!1,error:d=!1,focused:g,fullWidth:_=!1,hiddenLabel:C=!1,margin:S="none",required:I=!1,size:O="medium",variant:P="outlined",...k}=n,F={...n,color:u,component:a,disabled:p,error:d,fullWidth:_,hiddenLabel:C,margin:S,required:I,size:O,variant:P},B=dse(F),[N,G]=R.useState(()=>{let ce=!1;return i&&R.Children.forEach(i,be=>{if(!d1(be,["Input","Select"]))return;const Te=d1(be,["Select"])?be.props.input:be;Te&&uae(Te.props)&&(ce=!0)}),ce}),[$,X]=R.useState(()=>{let ce=!1;return i&&R.Children.forEach(i,be=>{d1(be,["Input","Select"])&&(Z1(be.props,!0)||Z1(be.props.inputProps,!0))&&(ce=!0)}),ce}),[ee,J]=R.useState(!1);p&&ee&&J(!1);const le=g!==void 0&&!p?g:ee;let Z;R.useRef(!1);const H=R.useCallback(()=>{X(!0)},[]),oe=R.useCallback(()=>{X(!1)},[]),ue=R.useMemo(()=>({adornedStart:N,setAdornedStart:G,color:u,disabled:p,error:d,filled:$,focused:le,fullWidth:_,hiddenLabel:C,size:O,onBlur:()=>{J(!1)},onFocus:()=>{J(!0)},onEmpty:oe,onFilled:H,registerEffect:Z,required:I,variant:P}),[N,u,p,d,$,le,_,C,Z,oe,H,I,O,P]);return Ue.jsx(M2.Provider,{value:ue,children:Ue.jsx(pse,{as:a,ownerState:F,className:Br(B.root,s),ref:r,...k,children:i})})});function gse(e){return Wn("MuiFormHelperText",e)}const Ck=$n("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Ak;const yse=e=>{const{classes:t,contained:r,size:n,disabled:i,error:s,filled:u,focused:a,required:p}=e,d={root:["root",i&&"disabled",s&&"error",n&&`size${ln(n)}`,r&&"contained",a&&"focused",u&&"filled",p&&"required"]};return Zn(d,gse,t)},vse=Qt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${ln(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(yi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Ck.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ck.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),bse=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiFormHelperText"}),{children:i,className:s,component:u="p",disabled:a,error:p,filled:d,focused:g,margin:_,required:C,variant:S,...I}=n,O=Ld(),P=oy({props:n,muiFormControl:O,states:["variant","size","disabled","error","filled","focused","required"]}),k={...n,component:u,contained:P.variant==="filled"||P.variant==="outlined",variant:P.variant,size:P.size,disabled:P.disabled,error:P.error,filled:P.filled,focused:P.focused,required:P.required};delete k.ownerState;const F=yse(k);return Ue.jsx(vse,{as:u,className:Br(F.root,s),ref:r,...I,ownerState:k,children:i===" "?Ak||(Ak=Ue.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function _se(e){return Wn("MuiFormLabel",e)}const a0=$n("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),xse=e=>{const{classes:t,color:r,focused:n,disabled:i,error:s,filled:u,required:a}=e,p={root:["root",`color${ln(r)}`,i&&"disabled",s&&"error",u&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Zn(p,_se,t)},wse=Qt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(yi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Hl()).map(([t])=>({props:{color:t},style:{[`&.${a0.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${a0.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${a0.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),Sse=Qt("span",{name:"MuiFormLabel",slot:"Asterisk"})(yi(({theme:e})=>({[`&.${a0.error}`]:{color:(e.vars||e).palette.error.main}}))),Ese=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiFormLabel"}),{children:i,className:s,color:u,component:a="label",disabled:p,error:d,filled:g,focused:_,required:C,...S}=n,I=Ld(),O=oy({props:n,muiFormControl:I,states:["color","required","focused","disabled","error","filled"]}),P={...n,color:O.color||"primary",component:a,disabled:O.disabled,error:O.error,filled:O.filled,focused:O.focused,required:O.required},k=xse(P);return Ue.jsxs(wse,{as:a,ownerState:P,className:Br(k.root,s),ref:r,...S,children:[i,O.required&&Ue.jsxs(Sse,{ownerState:P,"aria-hidden":!0,className:k.asterisk,children:["","*"]})]})});function KP(e){return`scale(${e}, ${e**2})`}const Cse={entering:{opacity:1,transform:KP(1)},entered:{opacity:1,transform:"none"}},G5=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),j0=R.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:s,easing:u,in:a,onEnter:p,onEntered:d,onEntering:g,onExit:_,onExited:C,onExiting:S,style:I,timeout:O="auto",TransitionComponent:P=ef,...k}=t,F=Rp(),B=R.useRef(),N=Uf(),G=R.useRef(null),$=Oo(G,Rd(s),r),X=ce=>be=>{if(ce){const Te=G.current;be===void 0?ce(Te):ce(Te,be)}},ee=X(g),J=X((ce,be)=>{pM(ce);const{duration:Te,delay:ve,easing:Ce}=Zg({style:I,timeout:O,easing:u},{mode:"enter"});let $e;O==="auto"?($e=N.transitions.getAutoHeightDuration(ce.clientHeight),B.current=$e):$e=Te,ce.style.transition=[N.transitions.create("opacity",{duration:$e,delay:ve}),N.transitions.create("transform",{duration:G5?$e:$e*.666,delay:ve,easing:Ce})].join(","),p&&p(ce,be)}),le=X(d),Z=X(S),H=X(ce=>{const{duration:be,delay:Te,easing:ve}=Zg({style:I,timeout:O,easing:u},{mode:"exit"});let Ce;O==="auto"?(Ce=N.transitions.getAutoHeightDuration(ce.clientHeight),B.current=Ce):Ce=be,ce.style.transition=[N.transitions.create("opacity",{duration:Ce,delay:Te}),N.transitions.create("transform",{duration:G5?Ce:Ce*.666,delay:G5?Te:Te||Ce*.333,easing:ve})].join(","),ce.style.opacity=0,ce.style.transform=KP(.75),_&&_(ce)}),oe=X(C),ue=ce=>{O==="auto"&&F.start(B.current||0,ce),n&&n(G.current,ce)};return Ue.jsx(P,{appear:i,in:a,nodeRef:G,onEnter:J,onEntered:le,onEntering:ee,onExit:H,onExited:oe,onExiting:Z,addEndListener:ue,timeout:O==="auto"?null:O,...k,children:(ce,{ownerState:be,...Te})=>R.cloneElement(s,{style:{opacity:0,transform:KP(.75),visibility:ce==="exited"&&!a?"hidden":void 0,...Cse[ce],...I,...s.props.style},ref:$,...Te})})});j0&&(j0.muiSupportAuto=!0);const Ase=e=>{const{classes:t,disableUnderline:r}=e,i=Zn({root:["root",!r&&"underline"],input:["input"]},hae,t);return{...t,...i}},Tse=Qt(L2,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...O2(e,t),!r.disableUnderline&&t.underline]}})(yi(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${fv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${fv.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${fv.disabled}, .${fv.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${fv.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Hl()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),Pse=Qt(D2,{name:"MuiInput",slot:"Input",overridesResolver:R2})({}),TM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:u,fullWidth:a=!1,inputComponent:p="input",multiline:d=!1,slotProps:g,slots:_={},type:C="text",...S}=n,I=Ase(n),P={root:{ownerState:{disableUnderline:i}}},k=g??u?is(g??u,P):P,F=_.root??s.Root??Tse,B=_.input??s.Input??Pse;return Ue.jsx(wM,{slots:{root:F,input:B},slotProps:k,fullWidth:a,inputComponent:p,multiline:d,ref:r,type:C,...S,classes:I})});TM.muiName="Input";function Ise(e){return Wn("MuiInputAdornment",e)}const Tk=$n("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Pk;const Mse=(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${ln(r.position)}`],r.disablePointerEvents===!0&&t.disablePointerEvents,t[r.variant]]},Ose=e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:n,position:i,size:s,variant:u}=e,a={root:["root",r&&"disablePointerEvents",i&&`position${ln(i)}`,u,n&&"hiddenLabel",s&&`size${ln(s)}`]};return Zn(a,Ise,t)},Rse=Qt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:Mse})(yi(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${Tk.positionStart}&:not(.${Tk.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),g1=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiInputAdornment"}),{children:i,className:s,component:u="div",disablePointerEvents:a=!1,disableTypography:p=!1,position:d,variant:g,..._}=n,C=Ld()||{};let S=g;g&&C.variant,C&&!S&&(S=C.variant);const I={...n,hiddenLabel:C.hiddenLabel,size:C.size,disablePointerEvents:a,position:d,variant:S},O=Ose(I);return Ue.jsx(M2.Provider,{value:null,children:Ue.jsx(Rse,{as:u,ownerState:I,className:Br(O.root,s),ref:r,..._,children:typeof i=="string"&&!p?Ue.jsx($o,{color:"textSecondary",children:i}):Ue.jsxs(R.Fragment,{children:[d==="start"?Pk||(Pk=Ue.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,i]})})})});function Lse(e){return Wn("MuiInputLabel",e)}$n("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Dse=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:s,variant:u,required:a}=e,p={root:["root",r&&"formControl",!s&&"animated",i&&"shrink",n&&n!=="medium"&&`size${ln(n)}`,u],asterisk:[a&&"asterisk"]},d=Zn(p,Lse,t);return{...t,...d}},kse=Qt(Ese,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${a0.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(yi(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Fse=R.forwardRef(function(t,r){const n=Yn({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:s,shrink:u,variant:a,className:p,...d}=n,g=Ld();let _=u;typeof _>"u"&&g&&(_=g.filled||g.focused||g.adornedStart);const C=oy({props:n,muiFormControl:g,states:["size","variant","required","focused"]}),S={...n,disableAnimation:i,formControl:g,shrink:_,size:C.size,variant:C.variant,required:C.required,focused:C.focused},I=Dse(S);return Ue.jsx(kse,{"data-shrink":_,ref:r,className:Br(I.root,p),...d,ownerState:S,classes:I})}),Lh=R.createContext({});function Nse(e){return Wn("MuiList",e)}$n("MuiList",["root","padding","dense","subheader"]);const Bse=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return Zn({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},Nse,t)},jse=Qt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),pb=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiList"}),{children:i,className:s,component:u="ul",dense:a=!1,disablePadding:p=!1,subheader:d,...g}=n,_=R.useMemo(()=>({dense:a}),[a]),C={...n,component:u,dense:a,disablePadding:p},S=Bse(C);return Ue.jsx(Lh.Provider,{value:_,children:Ue.jsxs(jse,{as:u,className:Br(S.root,s),ref:r,ownerState:C,...g,children:[d,i]})})});function zse(e){return Wn("MuiListItem",e)}$n("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const $se=$n("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function qse(e){return Wn("MuiListItemSecondaryAction",e)}$n("MuiListItemSecondaryAction",["root","disableGutters"]);const Use=e=>{const{disableGutters:t,classes:r}=e;return Zn({root:["root",t&&"disableGutters"]},qse,r)},Vse=Qt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),wU=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...s}=n,u=R.useContext(Lh),a={...n,disableGutters:u.disableGutters},p=Use(a);return Ue.jsx(Vse,{className:Br(p.root,i),ownerState:a,ref:r,...s})});wU.muiName="ListItemSecondaryAction";const Gse=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Hse=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:s,divider:u,hasSecondaryAction:a}=e;return Zn({root:["root",n&&"dense",!i&&"gutters",!s&&"padding",u&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},zse,r)},Wse=Qt("div",{name:"MuiListItem",slot:"Root",overridesResolver:Gse})(yi(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${$se.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Zse=Qt("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),PM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiListItem"}),{alignItems:i="center",children:s,className:u,component:a,components:p={},componentsProps:d={},ContainerComponent:g="li",ContainerProps:{className:_,...C}={},dense:S=!1,disableGutters:I=!1,disablePadding:O=!1,divider:P=!1,secondaryAction:k,slotProps:F={},slots:B={},...N}=n,G=R.useContext(Lh),$=R.useMemo(()=>({dense:S||G.dense||!1,alignItems:i,disableGutters:I}),[i,G.dense,S,I]),X=R.useRef(null),ee=R.Children.toArray(s),J=ee.length&&d1(ee[ee.length-1],["ListItemSecondaryAction"]),le={...n,alignItems:i,dense:$.dense,disableGutters:I,disablePadding:O,divider:P,hasSecondaryAction:J},Z=Hse(le),H=Oo(X,r),oe=B.root||p.Root||Wse,ue=F.root||d.root||{},ce={className:Br(Z.root,ue.className,u),...N};let be=a||"li";return J?(be=!ce.component&&!a?"div":be,g==="li"&&(be==="li"?be="div":ce.component==="li"&&(ce.component="div")),Ue.jsx(Lh.Provider,{value:$,children:Ue.jsxs(Zse,{as:g,className:Br(Z.container,_),ref:H,ownerState:le,...C,children:[Ue.jsx(oe,{...ue,...!Xg(oe)&&{as:be,ownerState:{...le,...ue.ownerState}},...ce,children:ee}),ee.pop()]})})):Ue.jsx(Lh.Provider,{value:$,children:Ue.jsxs(oe,{...ue,as:be,ref:H,...!Xg(oe)&&{ownerState:{...le,...ue.ownerState}},...ce,children:[ee,k&&Ue.jsx(wU,{children:k})]})})});function Xse(e){return Wn("MuiListItemIcon",e)}const Ik=$n("MuiListItemIcon",["root","alignItemsFlexStart"]),Kse=e=>{const{alignItems:t,classes:r}=e;return Zn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Xse,r)},Yse=Qt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(yi(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),mb=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiListItemIcon"}),{className:i,...s}=n,u=R.useContext(Lh),a={...n,alignItems:u.alignItems},p=Kse(a);return Ue.jsx(Yse,{className:Br(p.root,i),ownerState:a,ref:r,...s})});function Jse(e){return Wn("MuiListItemText",e)}const Ag=$n("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Qse=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:s}=e;return Zn({root:["root",r&&"inset",s&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Jse,t)},ele=Qt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Ag.primary}`]:t.primary},{[`& .${Ag.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${nk.root}:where(& .${Ag.primary})`]:{display:"block"},[`.${nk.root}:where(& .${Ag.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),tle=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiListItemText"}),{children:i,className:s,disableTypography:u=!1,inset:a=!1,primary:p,primaryTypographyProps:d,secondary:g,secondaryTypographyProps:_,slots:C={},slotProps:S={},...I}=n,{dense:O}=R.useContext(Lh);let P=p??i,k=g;const F={...n,disableTypography:u,inset:a,primary:!!P,secondary:!!k,dense:O},B=Qse(F),N={slots:C,slotProps:{primary:d,secondary:_,...S}},[G,$]=Kn("root",{className:Br(B.root,s),elementType:ele,externalForwardedProps:{...N,...I},ownerState:F,ref:r}),[X,ee]=Kn("primary",{className:B.primary,elementType:$o,externalForwardedProps:N,ownerState:F}),[J,le]=Kn("secondary",{className:B.secondary,elementType:$o,externalForwardedProps:N,ownerState:F});return P!=null&&P.type!==$o&&!u&&(P=Ue.jsx(X,{variant:O?"body2":"body1",component:ee?.variant?void 0:"span",...ee,children:P})),k!=null&&k.type!==$o&&!u&&(k=Ue.jsx(J,{variant:"body2",color:"textSecondary",...le,children:k})),Ue.jsxs(G,{...$,children:[P,k]})});function H5(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function Mk(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function SU(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function hv(e,t,r,n,i,s){let u=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(u)return!1;u=!0}const p=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!SU(a,s)||p)a=i(e,a,r);else return a.focus(),!0}return!1}const EU=R.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:s=!1,children:u,className:a,disabledItemsFocusable:p=!1,disableListWrap:d=!1,onKeyDown:g,variant:_="selectedMenu",...C}=t,S=R.useRef(null),I=R.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Vu(()=>{i&&S.current.focus()},[i]),R.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(B,{direction:N})=>{const G=!S.current.style.width;if(B.clientHeight<S.current.clientHeight&&G){const $=`${yU(Kc(B))}px`;S.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=$,S.current.style.width=`calc(100% + ${$})`}return S.current}}),[]);const O=B=>{const N=S.current,G=B.key;if(B.ctrlKey||B.metaKey||B.altKey){g&&g(B);return}const X=Sl(N).activeElement;if(G==="ArrowDown")B.preventDefault(),hv(N,X,d,p,H5);else if(G==="ArrowUp")B.preventDefault(),hv(N,X,d,p,Mk);else if(G==="Home")B.preventDefault(),hv(N,null,d,p,H5);else if(G==="End")B.preventDefault(),hv(N,null,d,p,Mk);else if(G.length===1){const ee=I.current,J=G.toLowerCase(),le=performance.now();ee.keys.length>0&&(le-ee.lastTime>500?(ee.keys=[],ee.repeating=!0,ee.previousKeyMatched=!0):ee.repeating&&J!==ee.keys[0]&&(ee.repeating=!1)),ee.lastTime=le,ee.keys.push(J);const Z=X&&!ee.repeating&&SU(X,ee);ee.previousKeyMatched&&(Z||hv(N,X,!1,p,H5,ee))?B.preventDefault():ee.previousKeyMatched=!1}g&&g(B)},P=Oo(S,r);let k=-1;R.Children.forEach(u,(B,N)=>{if(!R.isValidElement(B)){k===N&&(k+=1,k>=u.length&&(k=-1));return}B.props.disabled||(_==="selectedMenu"&&B.props.selected||k===-1)&&(k=N),k===N&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(k+=1,k>=u.length&&(k=-1))});const F=R.Children.map(u,(B,N)=>{if(N===k){const G={};return s&&(G.autoFocus=!0),B.props.tabIndex===void 0&&_==="selectedMenu"&&(G.tabIndex=0),R.cloneElement(B,G)}return B});return Ue.jsx(pb,{role:"menu",ref:P,className:a,onKeyDown:O,tabIndex:i?0:-1,...C,children:F})});function rle(e){return Wn("MuiPopover",e)}$n("MuiPopover",["root","paper"]);function Ok(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function Rk(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function Lk(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function C_(e){return typeof e=="function"?e():e}const nle=e=>{const{classes:t}=e;return Zn({root:["root"],paper:["paper"]},rle,t)},ile=Qt(CM,{name:"MuiPopover",slot:"Root"})({}),CU=Qt(tf,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),AU=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:p="anchorEl",children:d,className:g,container:_,elevation:C=8,marginThreshold:S=16,open:I,PaperProps:O={},slots:P={},slotProps:k={},transformOrigin:F={vertical:"top",horizontal:"left"},TransitionComponent:B,transitionDuration:N="auto",TransitionProps:G={},disableScrollLock:$=!1,...X}=n,ee=R.useRef(),J={...n,anchorOrigin:u,anchorReference:p,elevation:C,marginThreshold:S,transformOrigin:F,TransitionComponent:B,transitionDuration:N,TransitionProps:G},le=nle(J),Z=R.useCallback(()=>{if(p==="anchorPosition")return a;const rt=C_(s),Lt=(rt&&rt.nodeType===1?rt:Sl(ee.current).body).getBoundingClientRect();return{top:Lt.top+Ok(Lt,u.vertical),left:Lt.left+Rk(Lt,u.horizontal)}},[s,u.horizontal,u.vertical,a,p]),H=R.useCallback(rt=>({vertical:Ok(rt,F.vertical),horizontal:Rk(rt,F.horizontal)}),[F.horizontal,F.vertical]),oe=R.useCallback(rt=>{const zt={width:rt.offsetWidth,height:rt.offsetHeight},Lt=H(zt);if(p==="none")return{top:null,left:null,transformOrigin:Lk(Lt)};const Ft=Z();let dt=Ft.top-Lt.vertical,ke=Ft.left-Lt.horizontal;const fr=dt+zt.height,sr=ke+zt.width,xr=Kc(C_(s)),tr=xr.innerHeight-S,Ge=xr.innerWidth-S;if(S!==null&&dt<S){const nt=dt-S;dt-=nt,Lt.vertical+=nt}else if(S!==null&&fr>tr){const nt=fr-tr;dt-=nt,Lt.vertical+=nt}if(S!==null&&ke<S){const nt=ke-S;ke-=nt,Lt.horizontal+=nt}else if(sr>Ge){const nt=sr-Ge;ke-=nt,Lt.horizontal+=nt}return{top:`${Math.round(dt)}px`,left:`${Math.round(ke)}px`,transformOrigin:Lk(Lt)}},[s,p,Z,H,S]),[ue,ce]=R.useState(I),be=R.useCallback(()=>{const rt=ee.current;if(!rt)return;const zt=oe(rt);zt.top!==null&&rt.style.setProperty("top",zt.top),zt.left!==null&&(rt.style.left=zt.left),rt.style.transformOrigin=zt.transformOrigin,ce(!0)},[oe]);R.useEffect(()=>($&&window.addEventListener("scroll",be),()=>window.removeEventListener("scroll",be)),[s,$,be]);const Te=()=>{be()},ve=()=>{ce(!1)};R.useEffect(()=>{I&&be()}),R.useImperativeHandle(i,()=>I?{updatePosition:()=>{be()}}:null,[I,be]),R.useEffect(()=>{if(!I)return;const rt=cM(()=>{be()}),zt=Kc(C_(s));return zt.addEventListener("resize",rt),()=>{rt.clear(),zt.removeEventListener("resize",rt)}},[s,I,be]);let Ce=N;const $e={slots:{transition:B,...P},slotProps:{transition:G,paper:O,...k}},[Je,ge]=Kn("transition",{elementType:j0,externalForwardedProps:$e,ownerState:J,getSlotProps:rt=>({...rt,onEntering:(zt,Lt)=>{rt.onEntering?.(zt,Lt),Te()},onExited:zt=>{rt.onExited?.(zt),ve()}}),additionalProps:{appear:!0,in:I}});N==="auto"&&!Je.muiSupportAuto&&(Ce=void 0);const Ee=_||(s?Sl(C_(s)).body:void 0),[Ie,{slots:Le,slotProps:Ve,...ht}]=Kn("root",{ref:r,elementType:ile,externalForwardedProps:{...$e,...X},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:P.backdrop},slotProps:{backdrop:fM(typeof k.backdrop=="function"?k.backdrop(J):k.backdrop,{invisible:!0})},container:Ee,open:I},ownerState:J,className:Br(le.root,g)}),[It,xt]=Kn("paper",{ref:ee,className:le.paper,elementType:CU,externalForwardedProps:$e,shouldForwardComponentProp:!0,additionalProps:{elevation:C,style:ue?void 0:{opacity:0}},ownerState:J});return Ue.jsx(Ie,{...ht,...!Xg(Ie)&&{slots:Le,slotProps:Ve,disableScrollLock:$},children:Ue.jsx(Je,{...ge,timeout:Ce,children:Ue.jsx(It,{...xt,children:d})})})});function ale(e){return Wn("MuiMenu",e)}$n("MuiMenu",["root","paper","list"]);const ole={vertical:"top",horizontal:"right"},sle={vertical:"top",horizontal:"left"},lle=e=>{const{classes:t}=e;return Zn({root:["root"],paper:["paper"],list:["list"]},ale,t)},ule=Qt(AU,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),cle=Qt(CU,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),fle=Qt(EU,{name:"MuiMenu",slot:"List"})({outline:0}),IM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:u,disableAutoFocusItem:a=!1,MenuListProps:p={},onClose:d,open:g,PaperProps:_={},PopoverClasses:C,transitionDuration:S="auto",TransitionProps:{onEntering:I,...O}={},variant:P="selectedMenu",slots:k={},slotProps:F={},...B}=n,N=w2(),G={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:p,onEntering:I,PaperProps:_,transitionDuration:S,TransitionProps:O,variant:P},$=lle(G),X=i&&!a&&g,ee=R.useRef(null),J=(Ce,$e)=>{ee.current&&ee.current.adjustStyleForScrollbar(Ce,{direction:N?"rtl":"ltr"}),I&&I(Ce,$e)},le=Ce=>{Ce.key==="Tab"&&(Ce.preventDefault(),d&&d(Ce,"tabKeyDown"))};let Z=-1;R.Children.map(s,(Ce,$e)=>{R.isValidElement(Ce)&&(Ce.props.disabled||(P==="selectedMenu"&&Ce.props.selected||Z===-1)&&(Z=$e))});const H={slots:k,slotProps:{list:p,transition:O,paper:_,...F}},oe=cU({elementType:k.root,externalSlotProps:F.root,ownerState:G,className:[$.root,u]}),[ue,ce]=Kn("paper",{className:$.paper,elementType:cle,externalForwardedProps:H,shouldForwardComponentProp:!0,ownerState:G}),[be,Te]=Kn("list",{className:Br($.list,p.className),elementType:fle,shouldForwardComponentProp:!0,externalForwardedProps:H,getSlotProps:Ce=>({...Ce,onKeyDown:$e=>{le($e),Ce.onKeyDown?.($e)}}),ownerState:G}),ve=typeof H.slotProps.transition=="function"?H.slotProps.transition(G):H.slotProps.transition;return Ue.jsx(ule,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?ole:sle,slots:{root:k.root,paper:ue,backdrop:k.backdrop,...k.transition&&{transition:k.transition}},slotProps:{root:oe,paper:ce,backdrop:typeof F.backdrop=="function"?F.backdrop(G):F.backdrop,transition:{...ve,onEntering:(...Ce)=>{J(...Ce),ve?.onEntering?.(...Ce)}}},open:g,ref:r,transitionDuration:S,ownerState:G,...B,classes:C,children:Ue.jsx(be,{actions:ee,autoFocus:i&&(Z===-1||a),autoFocusItem:X,variant:P,...Te,children:s})})});function hle(e){return Wn("MuiMenuItem",e)}const dv=$n("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),dle=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},ple=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:s,classes:u}=e,p=Zn({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",s&&"selected"]},hle,u);return{...u,...p}},mle=Qt(P2,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:dle})(yi(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${dv.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${dv.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${dv.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${dv.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${dv.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Ek.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Ek.inset}`]:{marginLeft:52},[`& .${Ag.root}`]:{marginTop:0,marginBottom:0},[`& .${Ag.inset}`]:{paddingLeft:36},[`& .${Ik.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${Ik.root} svg`]:{fontSize:"1.25rem"}}}]}))),MM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:u=!1,divider:a=!1,disableGutters:p=!1,focusVisibleClassName:d,role:g="menuitem",tabIndex:_,className:C,...S}=n,I=R.useContext(Lh),O=R.useMemo(()=>({dense:u||I.dense||!1,disableGutters:p}),[I.dense,u,p]),P=R.useRef(null);Vu(()=>{i&&P.current&&P.current.focus()},[i]);const k={...n,dense:O.dense,divider:a,disableGutters:p},F=ple(n),B=Oo(P,r);let N;return n.disabled||(N=_!==void 0?_:-1),Ue.jsx(Lh.Provider,{value:O,children:Ue.jsx(mle,{ref:B,role:g,tabIndex:N,component:s,focusVisibleClassName:Br(F.focusVisible,d),className:Br(F.root,C),...S,ownerState:k,classes:F})})});function gle(e){return Wn("MuiNativeSelect",e)}const OM=$n("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),yle=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:s,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${ln(r)}`,s&&"iconOpen",n&&"disabled"]};return Zn(a,gle,t)},TU=Qt("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${OM.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),vle=Qt(TU,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:El,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${OM.multiple}`]:t.multiple}]}})({}),PU=Qt("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${OM.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),ble=Qt(PU,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${ln(r.variant)}`],r.open&&t.iconOpen]}})({}),_le=R.forwardRef(function(t,r){const{className:n,disabled:i,error:s,IconComponent:u,inputRef:a,variant:p="standard",...d}=t,g={...t,disabled:i,variant:p,error:s},_=yle(g);return Ue.jsxs(R.Fragment,{children:[Ue.jsx(vle,{ownerState:g,className:Br(_.select,n),disabled:i,ref:a||r,...d}),t.multiple?null:Ue.jsx(ble,{as:u,ownerState:g,className:_.icon})]})});var Dk;const xle=Qt("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:El})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),wle=Qt("legend",{name:"MuiNotchedOutlined",shouldForwardProp:El})(yi(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function Sle(e){const{children:t,classes:r,className:n,label:i,notched:s,...u}=e,a=i!=null&&i!=="",p={...e,notched:s,withLabel:a};return Ue.jsx(xle,{"aria-hidden":!0,className:n,ownerState:p,...u,children:Ue.jsx(wle,{ownerState:p,children:a?Ue.jsx("span",{children:i}):Dk||(Dk=Ue.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Ele=e=>{const{classes:t}=e,n=Zn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},dae,t);return{...t,...n}},Cle=Qt(L2,{shouldForwardProp:e=>El(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:O2})(yi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Cf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Cf.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${Cf.focused} .${Cf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Hl()).map(([r])=>({props:{color:r},style:{[`&.${Cf.focused} .${Cf.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${Cf.error} .${Cf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Cf.disabled} .${Cf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),Ale=Qt(Sle,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(yi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),Tle=Qt(D2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:R2})(yi(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),RM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:s=!1,inputComponent:u="input",label:a,multiline:p=!1,notched:d,slots:g={},slotProps:_={},type:C="text",...S}=n,I=Ele(n),O=Ld(),P=oy({props:n,muiFormControl:O,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k={...n,color:P.color||"primary",disabled:P.disabled,error:P.error,focused:P.focused,formControl:O,fullWidth:s,hiddenLabel:P.hiddenLabel,multiline:p,size:P.size,type:C},F=g.root??i.Root??Cle,B=g.input??i.Input??Tle,[N,G]=Kn("notchedOutline",{elementType:Ale,className:I.notchedOutline,shouldForwardComponentProp:!0,ownerState:k,externalForwardedProps:{slots:g,slotProps:_},additionalProps:{label:a!=null&&a!==""&&P.required?Ue.jsxs(R.Fragment,{children:[a,"","*"]}):a}});return Ue.jsx(wM,{slots:{root:F,input:B},slotProps:_,renderSuffix:$=>Ue.jsx(N,{...G,notched:typeof d<"u"?d:!!($.startAdornment||$.filled||$.focused)}),fullWidth:s,inputComponent:u,multiline:p,ref:r,type:C,...S,classes:{...I,notchedOutline:null}})});RM.muiName="Input";function IU(e){return Wn("MuiSelect",e)}const pv=$n("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var kk;const Ple=Qt(TU,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${pv.select}`]:t.select},{[`&.${pv.select}`]:t[r.variant]},{[`&.${pv.error}`]:t.error},{[`&.${pv.multiple}`]:t.multiple}]}})({[`&.${pv.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Ile=Qt(PU,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${ln(r.variant)}`],r.open&&t.iconOpen]}})({}),Mle=Qt("input",{shouldForwardProp:e=>Vq(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Fk(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Ole(e){return e==null||typeof e=="string"&&!e.trim()}const Rle=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:s,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${ln(r)}`,s&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Zn(a,IU,t)},Lle=R.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:s,autoWidth:u,children:a,className:p,defaultOpen:d,defaultValue:g,disabled:_,displayEmpty:C,error:S=!1,IconComponent:I,inputRef:O,labelId:P,MenuProps:k={},multiple:F,name:B,onBlur:N,onChange:G,onClose:$,onFocus:X,onOpen:ee,open:J,readOnly:le,renderValue:Z,required:H,SelectDisplayProps:oe={},tabIndex:ue,type:ce,value:be,variant:Te="standard",...ve}=t,[Ce,$e]=q1({controlled:be,default:g,name:"Select"}),[Je,ge]=q1({controlled:J,default:d,name:"Select"}),Ee=R.useRef(null),Ie=R.useRef(null),[Le,Ve]=R.useState(null),{current:ht}=R.useRef(J!=null),[It,xt]=R.useState(),rt=Oo(r,O),zt=R.useCallback(gt=>{Ie.current=gt,gt&&Ve(gt)},[]),Lt=Le?.parentNode;R.useImperativeHandle(rt,()=>({focus:()=>{Ie.current.focus()},node:Ee.current,value:Ce}),[Ce]),R.useEffect(()=>{d&&Je&&Le&&!ht&&(xt(u?null:Lt.clientWidth),Ie.current.focus())},[Le,u]),R.useEffect(()=>{s&&Ie.current.focus()},[s]),R.useEffect(()=>{if(!P)return;const gt=Sl(Ie.current).getElementById(P);if(gt){const $t=()=>{getSelection().isCollapsed&&Ie.current.focus()};return gt.addEventListener("click",$t),()=>{gt.removeEventListener("click",$t)}}},[P]);const Ft=(gt,$t)=>{gt?ee&&ee($t):$&&$($t),ht||(xt(u?null:Lt.clientWidth),ge(gt))},dt=gt=>{gt.button===0&&(gt.preventDefault(),Ie.current.focus(),Ft(!0,gt))},ke=gt=>{Ft(!1,gt)},fr=R.Children.toArray(a),sr=gt=>{const $t=fr.find(kt=>kt.props.value===gt.target.value);$t!==void 0&&($e($t.props.value),G&&G(gt,$t))},xr=gt=>$t=>{let kt;if($t.currentTarget.hasAttribute("tabindex")){if(F){kt=Array.isArray(Ce)?Ce.slice():[];const cr=Ce.indexOf(gt.props.value);cr===-1?kt.push(gt.props.value):kt.splice(cr,1)}else kt=gt.props.value;if(gt.props.onClick&&gt.props.onClick($t),Ce!==kt&&($e(kt),G)){const cr=$t.nativeEvent||$t,mr=new cr.constructor(cr.type,cr);Object.defineProperty(mr,"target",{writable:!0,value:{value:kt,name:B}}),G(mr,gt)}F||Ft(!1,$t)}},tr=gt=>{le||[" ","ArrowUp","ArrowDown","Enter"].includes(gt.key)&&(gt.preventDefault(),Ft(!0,gt))},Ge=Le!==null&&Je,nt=gt=>{!Ge&&N&&(Object.defineProperty(gt,"target",{writable:!0,value:{value:Ce,name:B}}),N(gt))};delete ve["aria-invalid"];let ut,Nt;const Kt=[];let Vt=!1;(Z1({value:Ce})||C)&&(Z?ut=Z(Ce):Vt=!0);const Ke=fr.map(gt=>{if(!R.isValidElement(gt))return null;let $t;if(F){if(!Array.isArray(Ce))throw new Error(kh(2));$t=Ce.some(kt=>Fk(kt,gt.props.value)),$t&&Vt&&Kt.push(gt.props.children)}else $t=Fk(Ce,gt.props.value),$t&&Vt&&(Nt=gt.props.children);return R.cloneElement(gt,{"aria-selected":$t?"true":"false",onClick:xr(gt),onKeyUp:kt=>{kt.key===" "&&kt.preventDefault(),gt.props.onKeyUp&&gt.props.onKeyUp(kt)},role:"option",selected:$t,value:void 0,"data-value":gt.props.value})});Vt&&(F?Kt.length===0?ut=null:ut=Kt.reduce((gt,$t,kt)=>(gt.push($t),kt<Kt.length-1&&gt.push(", "),gt),[]):ut=Nt);let me=It;!u&&ht&&Le&&(me=Lt.clientWidth);let pe;typeof ue<"u"?pe=ue:pe=_?null:0;const Ae=oe.id||(B?`mui-component-select-${B}`:void 0),Be={...t,variant:Te,value:Ce,open:Ge,error:S},Ne=Rle(Be),Tt={...k.PaperProps,...typeof k.slotProps?.paper=="function"?k.slotProps.paper(Be):k.slotProps?.paper},bt={...k.MenuListProps,...typeof k.slotProps?.list=="function"?k.slotProps.list(Be):k.slotProps?.list},tt=em();return Ue.jsxs(R.Fragment,{children:[Ue.jsx(Ple,{as:"div",ref:zt,tabIndex:pe,role:"combobox","aria-controls":Ge?tt:void 0,"aria-disabled":_?"true":void 0,"aria-expanded":Ge?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[P,Ae].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":H?"true":void 0,"aria-invalid":S?"true":void 0,onKeyDown:tr,onMouseDown:_||le?null:dt,onBlur:nt,onFocus:X,...oe,ownerState:Be,className:Br(oe.className,Ne.select,p),id:Ae,children:Ole(ut)?kk||(kk=Ue.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):ut}),Ue.jsx(Mle,{"aria-invalid":S,value:Array.isArray(Ce)?Ce.join(","):Ce,name:B,ref:Ee,"aria-hidden":!0,onChange:sr,tabIndex:-1,disabled:_,className:Ne.nativeInput,autoFocus:s,required:H,...ve,ownerState:Be}),Ue.jsx(Ile,{as:I,className:Ne.icon,ownerState:Be}),Ue.jsx(IM,{id:`menu-${B||""}`,anchorEl:Lt,open:Ge,onClose:ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...k,slotProps:{...k.slotProps,list:{"aria-labelledby":P,role:"listbox","aria-multiselectable":F?"true":void 0,disableListWrap:!0,id:tt,...bt},paper:{...Tt,style:{minWidth:me,...Tt!=null?Tt.style:null}}},children:Ke})]})}),Dle=e=>{const{classes:t}=e,n=Zn({root:["root"]},IU,t);return{...t,...n}},LM={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>El(e)&&e!=="variant"},kle=Qt(TM,LM)(""),Fle=Qt(RM,LM)(""),Nle=Qt(AM,LM)(""),MU=R.forwardRef(function(t,r){const n=Yn({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:s,classes:u={},className:a,defaultOpen:p=!1,displayEmpty:d=!1,IconComponent:g=mae,id:_,input:C,inputProps:S,label:I,labelId:O,MenuProps:P,multiple:k=!1,native:F=!1,onClose:B,onOpen:N,open:G,renderValue:$,SelectDisplayProps:X,variant:ee="outlined",...J}=n,le=F?_le:Lle,Z=Ld(),H=oy({props:n,muiFormControl:Z,states:["variant","error"]}),oe=H.variant||ee,ue={...n,variant:oe,classes:u},ce=Dle(ue),{root:be,...Te}=ce,ve=C||{standard:Ue.jsx(kle,{ownerState:ue}),outlined:Ue.jsx(Fle,{label:I,ownerState:ue}),filled:Ue.jsx(Nle,{ownerState:ue})}[oe],Ce=Oo(r,Rd(ve));return Ue.jsx(R.Fragment,{children:R.cloneElement(ve,{inputComponent:le,inputProps:{children:s,error:H.error,IconComponent:g,variant:oe,type:void 0,multiple:k,...F?{id:_}:{autoWidth:i,defaultOpen:p,displayEmpty:d,labelId:O,MenuProps:P,onClose:B,onOpen:N,open:G,renderValue:$,SelectDisplayProps:{id:_,...X}},...S,classes:S?is(Te,S.classes):Te,...C?C.props.inputProps:{}},...(k&&F||d)&&oe==="outlined"?{notched:!0}:{},ref:Ce,className:Br(ve.props.className,a,ce.root),...!C&&{variant:oe},...J})})});MU.muiName="Select";function Ble(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:s}=e,u=Rp();R.useEffect(()=>{if(!i)return;function k(F){F.defaultPrevented||F.key==="Escape"&&n?.(F,"escapeKeyDown")}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[i,n]);const a=gc((k,F)=>{n?.(k,F)}),p=gc(k=>{!n||k==null||u.start(k,()=>{a(null,"timeout")})});R.useEffect(()=>(i&&p(t),u.clear),[i,t,p,u]);const d=k=>{n?.(k,"clickaway")},g=u.clear,_=R.useCallback(()=>{t!=null&&p(s??t*.5)},[t,s,p]),C=k=>F=>{const B=k.onBlur;B?.(F),_()},S=k=>F=>{const B=k.onFocus;B?.(F),g()},I=k=>F=>{const B=k.onMouseEnter;B?.(F),g()},O=k=>F=>{const B=k.onMouseLeave;B?.(F),_()};return R.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",_),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",_),window.removeEventListener("blur",g)}},[r,i,_,g]),{getRootProps:(k={})=>{const F={...V1(e),...V1(k)};return{role:"presentation",...k,...F,onBlur:C(F),onFocus:S(F),onMouseEnter:I(F),onMouseLeave:O(F)}},onClickAway:d}}function jle(e){return Wn("MuiSnackbarContent",e)}$n("MuiSnackbarContent",["root","message","action"]);const zle=e=>{const{classes:t}=e;return Zn({root:["root"],action:["action"],message:["message"]},jle,t)},$le=Qt(tf,{name:"MuiSnackbarContent",slot:"Root"})(yi(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(DP(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:DP(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),qle=Qt("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Ule=Qt("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Vle=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiSnackbarContent"}),{action:i,className:s,message:u,role:a="alert",...p}=n,d=n,g=zle(d);return Ue.jsxs($le,{role:a,elevation:6,className:Br(g.root,s),ownerState:d,ref:r,...p,children:[Ue.jsx(qle,{className:g.message,ownerState:d,children:u}),i?Ue.jsx(Ule,{className:g.action,ownerState:d,children:i}):null]})});function Gle(e){return Wn("MuiSnackbar",e)}$n("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Hle=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${ln(r.vertical)}${ln(r.horizontal)}`]};return Zn(n,Gle,t)},Wle=Qt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${ln(r.anchorOrigin.vertical)}${ln(r.anchorOrigin.horizontal)}`]]}})(yi(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Zle=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiSnackbar"}),i=Uf(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:a,horizontal:p}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:g,className:_,ClickAwayListenerProps:C,ContentProps:S,disableWindowBlurListener:I=!1,message:O,onBlur:P,onClose:k,onFocus:F,onMouseEnter:B,onMouseLeave:N,open:G,resumeHideDuration:$,slots:X={},slotProps:ee={},TransitionComponent:J,transitionDuration:le=s,TransitionProps:{onEnter:Z,onExited:H,...oe}={},...ue}=n,ce={...n,anchorOrigin:{vertical:a,horizontal:p},autoHideDuration:d,disableWindowBlurListener:I,TransitionComponent:J,transitionDuration:le},be=Hle(ce),{getRootProps:Te,onClickAway:ve}=Ble({...ce}),[Ce,$e]=R.useState(!0),Je=Ft=>{$e(!0),H&&H(Ft)},ge=(Ft,dt)=>{$e(!1),Z&&Z(Ft,dt)},Ee={slots:{transition:J,...X},slotProps:{content:S,clickAwayListener:C,transition:oe,...ee}},[Ie,Le]=Kn("root",{ref:r,className:[be.root,_],elementType:Wle,getSlotProps:Te,externalForwardedProps:{...Ee,...ue},ownerState:ce}),[Ve,{ownerState:ht,...It}]=Kn("clickAwayListener",{elementType:ioe,externalForwardedProps:Ee,getSlotProps:Ft=>({onClickAway:(...dt)=>{const ke=dt[0];Ft.onClickAway?.(...dt),!ke?.defaultMuiPrevented&&ve(...dt)}}),ownerState:ce}),[xt,rt]=Kn("content",{elementType:Vle,shouldForwardComponentProp:!0,externalForwardedProps:Ee,additionalProps:{message:O,action:u},ownerState:ce}),[zt,Lt]=Kn("transition",{elementType:j0,externalForwardedProps:Ee,getSlotProps:Ft=>({onEnter:(...dt)=>{Ft.onEnter?.(...dt),ge(...dt)},onExited:(...dt)=>{Ft.onExited?.(...dt),Je(...dt)}}),additionalProps:{appear:!0,in:G,timeout:le,direction:a==="top"?"down":"up"},ownerState:ce});return!G&&Ce?null:Ue.jsx(Ve,{...It,...X.clickAwayListener&&{ownerState:ht},children:Ue.jsx(Ie,{...Le,children:Ue.jsx(zt,{...Lt,children:g||Ue.jsx(xt,{...rt})})})})});function Xle(e){return Wn("MuiTooltip",e)}const To=$n("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Kle(e){return Math.round(e*1e5)/1e5}const Yle=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:s}=e,u={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${ln(s.split("-")[0])}`],arrow:["arrow"]};return Zn(u,Xle,t)},Jle=Qt(hU,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(yi(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${To.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${To.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${To.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${To.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${To.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${To.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${To.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${To.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Qle=Qt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${ln(r.placement.split("-")[0])}`]]}})(yi(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${To.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${To.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${To.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${To.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Kle(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${To.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${To.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${To.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${To.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${To.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${To.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${To.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${To.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${To.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${To.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),eue=Qt("span",{name:"MuiTooltip",slot:"Arrow"})(yi(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let A_=!1;const Nk=new T2;let mv={x:0,y:0};function T_(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const sy=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:s,classes:u,components:a={},componentsProps:p={},describeChild:d=!1,disableFocusListener:g=!1,disableHoverListener:_=!1,disableInteractive:C=!1,disableTouchListener:S=!1,enterDelay:I=100,enterNextDelay:O=0,enterTouchDelay:P=700,followCursor:k=!1,id:F,leaveDelay:B=0,leaveTouchDelay:N=1500,onClose:G,onOpen:$,open:X,placement:ee="bottom",PopperComponent:J,PopperProps:le={},slotProps:Z={},slots:H={},title:oe,TransitionComponent:ue,TransitionProps:ce,...be}=n,Te=R.isValidElement(s)?s:Ue.jsx("span",{children:s}),ve=Uf(),Ce=w2(),[$e,Je]=R.useState(),[ge,Ee]=R.useState(null),Ie=R.useRef(!1),Le=C||k,Ve=Rp(),ht=Rp(),It=Rp(),xt=Rp(),[rt,zt]=q1({controlled:X,default:!1,name:"Tooltip",state:"open"});let Lt=rt;const Ft=em(F),dt=R.useRef(),ke=gc(()=>{dt.current!==void 0&&(document.body.style.WebkitUserSelect=dt.current,dt.current=void 0),xt.clear()});R.useEffect(()=>ke,[ke]);const fr=jr=>{Nk.clear(),A_=!0,zt(!0),$&&!Lt&&$(jr)},sr=gc(jr=>{Nk.start(800+B,()=>{A_=!1}),zt(!1),G&&Lt&&G(jr),Ve.start(ve.transitions.duration.shortest,()=>{Ie.current=!1})}),xr=jr=>{Ie.current&&jr.type!=="touchstart"||($e&&$e.removeAttribute("title"),ht.clear(),It.clear(),I||A_&&O?ht.start(A_?O:I,()=>{fr(jr)}):fr(jr))},tr=jr=>{ht.clear(),It.start(B,()=>{sr(jr)})},[,Ge]=R.useState(!1),nt=jr=>{G1(jr.target)||(Ge(!1),tr(jr))},ut=jr=>{$e||Je(jr.currentTarget),G1(jr.target)&&(Ge(!0),xr(jr))},Nt=jr=>{Ie.current=!0;const wt=Te.props;wt.onTouchStart&&wt.onTouchStart(jr)},Kt=jr=>{Nt(jr),It.clear(),Ve.clear(),ke(),dt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",xt.start(P,()=>{document.body.style.WebkitUserSelect=dt.current,xr(jr)})},Vt=jr=>{Te.props.onTouchEnd&&Te.props.onTouchEnd(jr),ke(),It.start(N,()=>{sr(jr)})};R.useEffect(()=>{if(!Lt)return;function jr(wt){wt.key==="Escape"&&sr(wt)}return document.addEventListener("keydown",jr),()=>{document.removeEventListener("keydown",jr)}},[sr,Lt]);const Ke=Oo(Rd(Te),Je,r);!oe&&oe!==0&&(Lt=!1);const me=R.useRef(),pe=jr=>{const wt=Te.props;wt.onMouseMove&&wt.onMouseMove(jr),mv={x:jr.clientX,y:jr.clientY},me.current&&me.current.update()},Ae={},Be=typeof oe=="string";d?(Ae.title=!Lt&&Be&&!_?oe:null,Ae["aria-describedby"]=Lt?Ft:null):(Ae["aria-label"]=Be?oe:null,Ae["aria-labelledby"]=Lt&&!Be?Ft:null);const Ne={...Ae,...be,...Te.props,className:Br(be.className,Te.props.className),onTouchStart:Nt,ref:Ke,...k?{onMouseMove:pe}:{}},Tt={};S||(Ne.onTouchStart=Kt,Ne.onTouchEnd=Vt),_||(Ne.onMouseOver=T_(xr,Ne.onMouseOver),Ne.onMouseLeave=T_(tr,Ne.onMouseLeave),Le||(Tt.onMouseOver=xr,Tt.onMouseLeave=tr)),g||(Ne.onFocus=T_(ut,Ne.onFocus),Ne.onBlur=T_(nt,Ne.onBlur),Le||(Tt.onFocus=ut,Tt.onBlur=nt));const bt={...n,isRtl:Ce,arrow:i,disableInteractive:Le,placement:ee,PopperComponentProp:J,touch:Ie.current},tt=typeof Z.popper=="function"?Z.popper(bt):Z.popper,gt=R.useMemo(()=>{let jr=[{name:"arrow",enabled:!!ge,options:{element:ge,padding:4}}];return le.popperOptions?.modifiers&&(jr=jr.concat(le.popperOptions.modifiers)),tt?.popperOptions?.modifiers&&(jr=jr.concat(tt.popperOptions.modifiers)),{...le.popperOptions,...tt?.popperOptions,modifiers:jr}},[ge,le.popperOptions,tt?.popperOptions]),$t=Yle(bt),kt=typeof Z.transition=="function"?Z.transition(bt):Z.transition,cr={slots:{popper:a.Popper,transition:a.Transition??ue,tooltip:a.Tooltip,arrow:a.Arrow,...H},slotProps:{arrow:Z.arrow??p.arrow,popper:{...le,...tt??p.popper},tooltip:Z.tooltip??p.tooltip,transition:{...ce,...kt??p.transition}}},[mr,Zr]=Kn("popper",{elementType:Jle,externalForwardedProps:cr,ownerState:bt,className:Br($t.popper,le?.className)}),[mn,Kr]=Kn("transition",{elementType:j0,externalForwardedProps:cr,ownerState:bt}),[Rt,Ur]=Kn("tooltip",{elementType:Qle,className:$t.tooltip,externalForwardedProps:cr,ownerState:bt}),[Fn,Jr]=Kn("arrow",{elementType:eue,className:$t.arrow,externalForwardedProps:cr,ownerState:bt,ref:Ee});return Ue.jsxs(R.Fragment,{children:[R.cloneElement(Te,Ne),Ue.jsx(mr,{as:J??hU,placement:ee,anchorEl:k?{getBoundingClientRect:()=>({top:mv.y,left:mv.x,right:mv.x,bottom:mv.y,width:0,height:0})}:$e,popperRef:me,open:$e?Lt:!1,id:Ft,transition:!0,...Tt,...Zr,popperOptions:gt,children:({TransitionProps:jr})=>Ue.jsx(mn,{timeout:ve.transitions.duration.shorter,...jr,...Kr,children:Ue.jsxs(Rt,{...Ur,children:[oe,i?Ue.jsx(Fn,{...Jr}):null]})})})]})}),DM=qte({createStyledComponent:Qt("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Yn({props:e,name:"MuiStack"})});function tue(e){return Wn("MuiToolbar",e)}$n("MuiToolbar",["root","gutters","regular","dense"]);const rue=e=>{const{classes:t,disableGutters:r,variant:n}=e;return Zn({root:["root",!r&&"gutters",n]},tue,t)},nue=Qt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(yi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),kM=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:u=!1,variant:a="regular",...p}=n,d={...n,component:s,disableGutters:u,variant:a},g=rue(d);return Ue.jsx(nue,{as:s,className:Br(g.root,i),ref:r,ownerState:d,...p})});function iue(e){return Wn("MuiTextField",e)}$n("MuiTextField",["root"]);const aue={standard:TM,filled:AM,outlined:RM},oue=e=>{const{classes:t}=e;return Zn({root:["root"]},iue,t)},sue=Qt(mse,{name:"MuiTextField",slot:"Root"})({}),OU=R.forwardRef(function(t,r){const n=Yn({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:u,className:a,color:p="primary",defaultValue:d,disabled:g=!1,error:_=!1,FormHelperTextProps:C,fullWidth:S=!1,helperText:I,id:O,InputLabelProps:P,inputProps:k,InputProps:F,inputRef:B,label:N,maxRows:G,minRows:$,multiline:X=!1,name:ee,onBlur:J,onChange:le,onFocus:Z,placeholder:H,required:oe=!1,rows:ue,select:ce=!1,SelectProps:be,slots:Te={},slotProps:ve={},type:Ce,value:$e,variant:Je="outlined",...ge}=n,Ee={...n,autoFocus:s,color:p,disabled:g,error:_,fullWidth:S,multiline:X,required:oe,select:ce,variant:Je},Ie=oue(Ee),Le=em(O),Ve=I&&Le?`${Le}-helper-text`:void 0,ht=N&&Le?`${Le}-label`:void 0,It=aue[Je],xt={slots:Te,slotProps:{input:F,inputLabel:P,htmlInput:k,formHelperText:C,select:be,...ve}},rt={},zt=xt.slotProps.inputLabel;Je==="outlined"&&(zt&&typeof zt.shrink<"u"&&(rt.notched=zt.shrink),rt.label=N),ce&&((!be||!be.native)&&(rt.id=void 0),rt["aria-describedby"]=void 0);const[Lt,Ft]=Kn("root",{elementType:sue,shouldForwardComponentProp:!0,externalForwardedProps:{...xt,...ge},ownerState:Ee,className:Br(Ie.root,a),ref:r,additionalProps:{disabled:g,error:_,fullWidth:S,required:oe,color:p,variant:Je}}),[dt,ke]=Kn("input",{elementType:It,externalForwardedProps:xt,additionalProps:rt,ownerState:Ee}),[fr,sr]=Kn("inputLabel",{elementType:Fse,externalForwardedProps:xt,ownerState:Ee}),[xr,tr]=Kn("htmlInput",{elementType:"input",externalForwardedProps:xt,ownerState:Ee}),[Ge,nt]=Kn("formHelperText",{elementType:bse,externalForwardedProps:xt,ownerState:Ee}),[ut,Nt]=Kn("select",{elementType:MU,externalForwardedProps:xt,ownerState:Ee}),Kt=Ue.jsx(dt,{"aria-describedby":Ve,autoComplete:i,autoFocus:s,defaultValue:d,fullWidth:S,multiline:X,name:ee,rows:ue,maxRows:G,minRows:$,type:Ce,value:$e,id:Le,inputRef:B,onBlur:J,onChange:le,onFocus:Z,placeholder:H,inputProps:tr,slots:{input:Te.htmlInput?xr:void 0},...ke});return Ue.jsxs(Lt,{...Ft,children:[N!=null&&N!==""&&Ue.jsx(fr,{htmlFor:Le,id:ht,...sr,children:N}),ce?Ue.jsx(ut,{"aria-describedby":Ve,id:Le,labelId:ht,value:$e,input:Kt,...Nt,children:u}):Kt,I&&Ue.jsx(Ge,{id:Ve,...nt,children:I})]})}),Zu=Mq({themeId:mc});function lue(e,t){const{disableHysteresis:r=!1,threshold:n=100,target:i}=t,s=e.current;return i&&(e.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!r&&s!==void 0&&e.current<s?!1:e.current>n}const uue=typeof window<"u"?window:null;function RU(e={}){const{getTrigger:t=lue,target:r=uue,...n}=e,i=R.useRef(),[s,u]=R.useState(()=>t(i,n));return R.useEffect(()=>{if(r===null)return u(!1);const a=()=>{u(t(i,{target:r,...n}))};return a(),r.addEventListener("scroll",a,{passive:!0}),()=>{r.removeEventListener("scroll",a,{passive:!0})}},[r,t,JSON.stringify(n)]),s}function va(e){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(e)}var Jc=Uint8Array,qu=Uint16Array,FM=Int32Array,NM=new Jc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),BM=new Jc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bk=new Jc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LU=function(e,t){for(var r=new qu(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new FM(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},DU=LU(NM,2),cue=DU.b,YP=DU.r;cue[28]=258,YP[258]=28;var fue=LU(BM,0),jk=fue.r,JP=new qu(32768);for(var Qa=0;Qa<32768;++Qa){var sd=(Qa&43690)>>1|(Qa&21845)<<1;sd=(sd&52428)>>2|(sd&13107)<<2,sd=(sd&61680)>>4|(sd&3855)<<4,JP[Qa]=((sd&65280)>>8|(sd&255)<<8)>>1}var o0=(function(e,t,r){for(var n=e.length,i=0,s=new qu(t);i<n;++i)e[i]&&++s[e[i]-1];var u=new qu(t);for(i=1;i<t;++i)u[i]=u[i-1]+s[i-1]<<1;var a;if(r){a=new qu(1<<t);var p=15-t;for(i=0;i<n;++i)if(e[i])for(var d=i<<4|e[i],g=t-e[i],_=u[e[i]-1]++<<g,C=_|(1<<g)-1;_<=C;++_)a[JP[_]>>p]=d}else for(a=new qu(n),i=0;i<n;++i)e[i]&&(a[i]=JP[u[e[i]-1]++]>>15-e[i]);return a}),Vp=new Jc(288);for(var Qa=0;Qa<144;++Qa)Vp[Qa]=8;for(var Qa=144;Qa<256;++Qa)Vp[Qa]=9;for(var Qa=256;Qa<280;++Qa)Vp[Qa]=7;for(var Qa=280;Qa<288;++Qa)Vp[Qa]=8;var X1=new Jc(32);for(var Qa=0;Qa<32;++Qa)X1[Qa]=5;var hue=o0(Vp,9,0),due=o0(X1,5,0),kU=function(e){return(e+7)/8|0},pue=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Jc(e.subarray(t,r))},yh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},gv=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},W5=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,s=r.slice();if(!i)return{t:NU,l:0};if(i==1){var u=new Jc(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function(G,$){return G.f-$.f}),r.push({s:-1,f:25001});var a=r[0],p=r[1],d=0,g=1,_=2;for(r[0]={s:-1,f:a.f+p.f,l:a,r:p};g!=i-1;)a=r[r[d].f<r[_].f?d++:_++],p=r[d!=g&&r[d].f<r[_].f?d++:_++],r[g++]={s:-1,f:a.f+p.f,l:a,r:p};for(var C=s[0].s,n=1;n<i;++n)s[n].s>C&&(C=s[n].s);var S=new qu(C+1),I=QP(r[g-1],S,0);if(I>t){var n=0,O=0,P=I-t,k=1<<P;for(s.sort(function($,X){return S[X.s]-S[$.s]||$.f-X.f});n<i;++n){var F=s[n].s;if(S[F]>t)O+=k-(1<<I-S[F]),S[F]=t;else break}for(O>>=P;O>0;){var B=s[n].s;S[B]<t?O-=1<<t-S[B]++-1:++n}for(;n>=0&&O;--n){var N=s[n].s;S[N]==t&&(--S[N],++O)}I=t}return{t:new Jc(S),l:I}},QP=function(e,t,r){return e.s==-1?Math.max(QP(e.l,t,r+1),QP(e.r,t,r+1)):t[e.s]=r},zk=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new qu(++t),n=0,i=e[0],s=1,u=function(p){r[n++]=p},a=1;a<=t;++a)if(e[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)u(32754);s>2&&(u(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(u(i),--s;s>6;s-=6)u(8304);s>2&&(u(s-3<<5|8208),s=0)}for(;s--;)u(i);s=1,i=e[a]}return{c:r.subarray(0,n),n:t}},yv=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},FU=function(e,t,r){var n=r.length,i=kU(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<n;++s)e[i+s+4]=r[s];return(i+4+n)*8},$k=function(e,t,r,n,i,s,u,a,p,d,g){yh(t,g++,r),++i[256];for(var _=W5(i,15),C=_.t,S=_.l,I=W5(s,15),O=I.t,P=I.l,k=zk(C),F=k.c,B=k.n,N=zk(O),G=N.c,$=N.n,X=new qu(19),ee=0;ee<F.length;++ee)++X[F[ee]&31];for(var ee=0;ee<G.length;++ee)++X[G[ee]&31];for(var J=W5(X,7),le=J.t,Z=J.l,H=19;H>4&&!le[Bk[H-1]];--H);var oe=d+5<<3,ue=yv(i,Vp)+yv(s,X1)+u,ce=yv(i,C)+yv(s,O)+u+14+3*H+yv(X,le)+2*X[16]+3*X[17]+7*X[18];if(p>=0&&oe<=ue&&oe<=ce)return FU(t,g,e.subarray(p,p+d));var be,Te,ve,Ce;if(yh(t,g,1+(ce<ue)),g+=2,ce<ue){be=o0(C,S,0),Te=C,ve=o0(O,P,0),Ce=O;var $e=o0(le,Z,0);yh(t,g,B-257),yh(t,g+5,$-1),yh(t,g+10,H-4),g+=14;for(var ee=0;ee<H;++ee)yh(t,g+3*ee,le[Bk[ee]]);g+=3*H;for(var Je=[F,G],ge=0;ge<2;++ge)for(var Ee=Je[ge],ee=0;ee<Ee.length;++ee){var Ie=Ee[ee]&31;yh(t,g,$e[Ie]),g+=le[Ie],Ie>15&&(yh(t,g,Ee[ee]>>5&127),g+=Ee[ee]>>12)}}else be=hue,Te=Vp,ve=due,Ce=X1;for(var ee=0;ee<a;++ee){var Le=n[ee];if(Le>255){var Ie=Le>>18&31;gv(t,g,be[Ie+257]),g+=Te[Ie+257],Ie>7&&(yh(t,g,Le>>23&31),g+=NM[Ie]);var Ve=Le&31;gv(t,g,ve[Ve]),g+=Ce[Ve],Ve>3&&(gv(t,g,Le>>5&8191),g+=BM[Ve])}else gv(t,g,be[Le]),g+=Te[Le]}return gv(t,g,be[256]),g+Te[256]},mue=new FM([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),NU=new Jc(0),gue=function(e,t,r,n,i,s){var u=s.z||e.length,a=new Jc(n+u+5*(1+Math.ceil(u/7e3))+i),p=a.subarray(n,a.length-i),d=s.l,g=(s.r||0)&7;if(t){g&&(p[0]=s.r>>3);for(var _=mue[t-1],C=_>>13,S=_&8191,I=(1<<r)-1,O=s.p||new qu(32768),P=s.h||new qu(I+1),k=Math.ceil(r/3),F=2*k,B=function(dt){return(e[dt]^e[dt+1]<<k^e[dt+2]<<F)&I},N=new FM(25e3),G=new qu(288),$=new qu(32),X=0,ee=0,J=s.i||0,le=0,Z=s.w||0,H=0;J+2<u;++J){var oe=B(J),ue=J&32767,ce=P[oe];if(O[ue]=ce,P[oe]=ue,Z<=J){var be=u-J;if((X>7e3||le>24576)&&(be>423||!d)){g=$k(e,p,0,N,G,$,ee,le,H,J-H,g),le=X=ee=0,H=J;for(var Te=0;Te<286;++Te)G[Te]=0;for(var Te=0;Te<30;++Te)$[Te]=0}var ve=2,Ce=0,$e=S,Je=ue-ce&32767;if(be>2&&oe==B(J-Je))for(var ge=Math.min(C,be)-1,Ee=Math.min(32767,J),Ie=Math.min(258,be);Je<=Ee&&--$e&&ue!=ce;){if(e[J+ve]==e[J+ve-Je]){for(var Le=0;Le<Ie&&e[J+Le]==e[J+Le-Je];++Le);if(Le>ve){if(ve=Le,Ce=Je,Le>ge)break;for(var Ve=Math.min(Je,Le-2),ht=0,Te=0;Te<Ve;++Te){var It=J-Je+Te&32767,xt=O[It],rt=It-xt&32767;rt>ht&&(ht=rt,ce=It)}}}ue=ce,ce=O[ue],Je+=ue-ce&32767}if(Ce){N[le++]=268435456|YP[ve]<<18|jk[Ce];var zt=YP[ve]&31,Lt=jk[Ce]&31;ee+=NM[zt]+BM[Lt],++G[257+zt],++$[Lt],Z=J+ve,++X}else N[le++]=e[J],++G[e[J]]}}for(J=Math.max(J,Z);J<u;++J)N[le++]=e[J],++G[e[J]];g=$k(e,p,d,N,G,$,ee,le,H,J-H,g),d||(s.r=g&7|p[g/8|0]<<3,g-=7,s.h=P,s.p=O,s.i=J,s.w=Z)}else{for(var J=s.w||0;J<u+d;J+=65535){var Ft=J+65535;Ft>=u&&(p[g/8|0]=d,Ft=u),g=FU(p,g+1,e.subarray(J,Ft))}s.i=u}return pue(a,0,n+kU(g)+i)},BU=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,s=r.length|0,u=0;u!=s;){for(var a=Math.min(u+2655,s);u<a;++u)i+=n+=r[u];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},yue=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),u=new Jc(s.length+e.length);u.set(s),u.set(e,s.length),e=u,i.w=s.length}return gue(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},jU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},vue=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=BU();i.p(t.dictionary),jU(e,2,i.d())}};function e3(e,t){t||(t={});var r=BU();r.p(e);var n=yue(e,t,t.dictionary?6:2,4);return vue(n,t),jU(n,n.length-4,r.d()),n}var bue=typeof TextDecoder<"u"&&new TextDecoder,_ue=0;try{bue.decode(NU,{stream:!0}),_ue=1}catch{}function xue(e){if(Array.isArray(e))return e}function wue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,u,a=[],p=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(p=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);p=!0);}catch(g){d=!0,i=g}finally{try{if(!p&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(d)throw i}}return a}}function qk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Sue(e,t){if(e){if(typeof e=="string")return qk(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qk(e,t):void 0}}function Eue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uk(e,t){return xue(e)||wue(e,t)||Sue(e,t)||Eue()}function Vk(e,t="utf8"){return new TextDecoder(t).decode(e)}const Cue=new TextEncoder;function Aue(e){return Cue.encode(e)}const Tue=1024*8,Pue=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Z5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class jM{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Tue,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,s=t.byteLength-i;let u=i;(ArrayBuffer.isView(t)||t instanceof jM)&&(t.byteLength!==t.buffer.byteLength&&(u=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=Z5[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===Pue&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const p=new Z5[r](a.buffer);return this.offset+=n,p.reverse(),p}const u=new Z5[r](s);return this.offset+=n,u}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return Vk(this.readBytes(t))}decodeText(t=1,r="utf8"){return Vk(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Aue(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ly(e){let t=e.length;for(;--t>=0;)e[t]=0}const Iue=3,Mue=258,zU=29,Oue=256,Rue=Oue+1+zU,$U=30,Lue=512,Due=new Array((Rue+2)*2);ly(Due);const kue=new Array($U*2);ly(kue);const Fue=new Array(Lue);ly(Fue);const Nue=new Array(Mue-Iue+1);ly(Nue);const Bue=new Array(zU);ly(Bue);const jue=new Array($U);ly(jue);const zue=(e,t,r,n)=>{let i=e&65535|0,s=e>>>16&65535|0,u=0;for(;r!==0;){u=r>2e3?2e3:r,r-=u;do i=i+t[n++]|0,s=s+i|0;while(--u);i%=65521,s%=65521}return i|s<<16|0};var t3=zue;const $ue=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},que=new Uint32Array($ue()),Uue=(e,t,r,n)=>{const i=que,s=n+r;e^=-1;for(let u=n;u<s;u++)e=e>>>8^i[(e^t[u])&255];return e^-1};var Af=Uue,r3={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},qU={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Vue=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Gue=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Vue(r,n)&&(e[n]=r[n])}}return e},Hue=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let u=e[n];r.set(u,i),i+=u.length}return r},UU={assign:Gue,flattenChunks:Hue};let VU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{VU=!1}const z0=new Uint8Array(256);for(let e=0;e<256;e++)z0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;z0[254]=z0[254]=1;var Wue=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,s,u=e.length,a=0;for(i=0;i<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|r&63):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|r&63):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|r&63);return t};const Zue=(e,t)=>{if(t<65534&&e.subarray&&VU)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Xue=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let u=e[n++];if(u<128){s[i++]=u;continue}let a=z0[u];if(a>4){s[i++]=65533,n+=a-1;continue}for(u&=a===2?31:a===3?15:7;a>1&&n<r;)u=u<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}u<65536?s[i++]=u:(u-=65536,s[i++]=55296|u>>10&1023,s[i++]=56320|u&1023)}return Zue(s,i)},Kue=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+z0[e[r]]>t?r:t},n3={string2buf:Wue,buf2string:Xue,utf8border:Kue};function Yue(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Jue=Yue;const P_=16209,Que=16191;var ece=function(t,r){let n,i,s,u,a,p,d,g,_,C,S,I,O,P,k,F,B,N,G,$,X,ee,J,le;const Z=t.state;n=t.next_in,J=t.input,i=n+(t.avail_in-5),s=t.next_out,le=t.output,u=s-(r-t.avail_out),a=s+(t.avail_out-257),p=Z.dmax,d=Z.wsize,g=Z.whave,_=Z.wnext,C=Z.window,S=Z.hold,I=Z.bits,O=Z.lencode,P=Z.distcode,k=(1<<Z.lenbits)-1,F=(1<<Z.distbits)-1;e:do{I<15&&(S+=J[n++]<<I,I+=8,S+=J[n++]<<I,I+=8),B=O[S&k];t:for(;;){if(N=B>>>24,S>>>=N,I-=N,N=B>>>16&255,N===0)le[s++]=B&65535;else if(N&16){G=B&65535,N&=15,N&&(I<N&&(S+=J[n++]<<I,I+=8),G+=S&(1<<N)-1,S>>>=N,I-=N),I<15&&(S+=J[n++]<<I,I+=8,S+=J[n++]<<I,I+=8),B=P[S&F];r:for(;;){if(N=B>>>24,S>>>=N,I-=N,N=B>>>16&255,N&16){if($=B&65535,N&=15,I<N&&(S+=J[n++]<<I,I+=8,I<N&&(S+=J[n++]<<I,I+=8)),$+=S&(1<<N)-1,$>p){t.msg="invalid distance too far back",Z.mode=P_;break e}if(S>>>=N,I-=N,N=s-u,$>N){if(N=$-N,N>g&&Z.sane){t.msg="invalid distance too far back",Z.mode=P_;break e}if(X=0,ee=C,_===0){if(X+=d-N,N<G){G-=N;do le[s++]=C[X++];while(--N);X=s-$,ee=le}}else if(_<N){if(X+=d+_-N,N-=_,N<G){G-=N;do le[s++]=C[X++];while(--N);if(X=0,_<G){N=_,G-=N;do le[s++]=C[X++];while(--N);X=s-$,ee=le}}}else if(X+=_-N,N<G){G-=N;do le[s++]=C[X++];while(--N);X=s-$,ee=le}for(;G>2;)le[s++]=ee[X++],le[s++]=ee[X++],le[s++]=ee[X++],G-=3;G&&(le[s++]=ee[X++],G>1&&(le[s++]=ee[X++]))}else{X=s-$;do le[s++]=le[X++],le[s++]=le[X++],le[s++]=le[X++],G-=3;while(G>2);G&&(le[s++]=le[X++],G>1&&(le[s++]=le[X++]))}}else if((N&64)===0){B=P[(B&65535)+(S&(1<<N)-1)];continue r}else{t.msg="invalid distance code",Z.mode=P_;break e}break}}else if((N&64)===0){B=O[(B&65535)+(S&(1<<N)-1)];continue t}else if(N&32){Z.mode=Que;break e}else{t.msg="invalid literal/length code",Z.mode=P_;break e}break}}while(n<i&&s<a);G=I>>3,n-=G,I-=G<<3,S&=(1<<I)-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=s<a?257+(a-s):257-(s-a),Z.hold=S,Z.bits=I};const Wm=15,Gk=852,Hk=592,Wk=0,X5=1,Zk=2,tce=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nce=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ice=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ace=(e,t,r,n,i,s,u,a)=>{const p=a.bits;let d=0,g=0,_=0,C=0,S=0,I=0,O=0,P=0,k=0,F=0,B,N,G,$,X,ee=null,J;const le=new Uint16Array(Wm+1),Z=new Uint16Array(Wm+1);let H=null,oe,ue,ce;for(d=0;d<=Wm;d++)le[d]=0;for(g=0;g<n;g++)le[t[r+g]]++;for(S=p,C=Wm;C>=1&&le[C]===0;C--);if(S>C&&(S=C),C===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(_=1;_<C&&le[_]===0;_++);for(S<_&&(S=_),P=1,d=1;d<=Wm;d++)if(P<<=1,P-=le[d],P<0)return-1;if(P>0&&(e===Wk||C!==1))return-1;for(Z[1]=0,d=1;d<Wm;d++)Z[d+1]=Z[d]+le[d];for(g=0;g<n;g++)t[r+g]!==0&&(u[Z[t[r+g]]++]=g);if(e===Wk?(ee=H=u,J=20):e===X5?(ee=tce,H=rce,J=257):(ee=nce,H=ice,J=0),F=0,g=0,d=_,X=s,I=S,O=0,G=-1,k=1<<S,$=k-1,e===X5&&k>Gk||e===Zk&&k>Hk)return 1;for(;;){oe=d-O,u[g]+1<J?(ue=0,ce=u[g]):u[g]>=J?(ue=H[u[g]-J],ce=ee[u[g]-J]):(ue=96,ce=0),B=1<<d-O,N=1<<I,_=N;do N-=B,i[X+(F>>O)+N]=oe<<24|ue<<16|ce|0;while(N!==0);for(B=1<<d-1;F&B;)B>>=1;if(B!==0?(F&=B-1,F+=B):F=0,g++,--le[d]===0){if(d===C)break;d=t[r+u[g]]}if(d>S&&(F&$)!==G){for(O===0&&(O=S),X+=_,I=d-O,P=1<<I;I+O<C&&(P-=le[I+O],!(P<=0));)I++,P<<=1;if(k+=1<<I,e===X5&&k>Gk||e===Zk&&k>Hk)return 1;G=F&$,i[G]=S<<24|I<<16|X-s|0}}return F!==0&&(i[X+F]=d-O<<24|64<<16|0),a.bits=S,0};var s0=ace;const oce=0,GU=1,HU=2,{Z_FINISH:Xk,Z_BLOCK:sce,Z_TREES:I_,Z_OK:Gp,Z_STREAM_END:lce,Z_NEED_DICT:uce,Z_STREAM_ERROR:_c,Z_DATA_ERROR:WU,Z_MEM_ERROR:ZU,Z_BUF_ERROR:cce,Z_DEFLATED:Kk}=qU,k2=16180,Yk=16181,Jk=16182,Qk=16183,eF=16184,tF=16185,rF=16186,nF=16187,iF=16188,aF=16189,K1=16190,vh=16191,K5=16192,oF=16193,Y5=16194,sF=16195,lF=16196,uF=16197,cF=16198,M_=16199,O_=16200,fF=16201,hF=16202,dF=16203,pF=16204,mF=16205,J5=16206,gF=16207,yF=16208,oo=16209,XU=16210,KU=16211,fce=852,hce=592,dce=15,pce=dce,vF=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function mce(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const tm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<k2||t.mode>KU?1:0},YU=e=>{if(tm(e))return _c;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=k2,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(fce),t.distcode=t.distdyn=new Int32Array(hce),t.sane=1,t.back=-1,Gp},JU=e=>{if(tm(e))return _c;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,YU(e)},QU=(e,t)=>{let r;if(tm(e))return _c;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?_c:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,JU(e))},eV=(e,t)=>{if(!e)return _c;const r=new mce;e.state=r,r.strm=e,r.window=null,r.mode=k2;const n=QU(e,t);return n!==Gp&&(e.state=null),n},gce=e=>eV(e,pce);let bF=!0,Q5,eS;const yce=e=>{if(bF){Q5=new Int32Array(512),eS=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s0(GU,e.lens,0,288,Q5,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s0(HU,e.lens,0,32,eS,0,e.work,{bits:5}),bF=!1}e.lencode=Q5,e.lenbits=9,e.distcode=eS,e.distbits=5},tV=(e,t,r,n)=>{let i;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},vce=(e,t)=>{let r,n,i,s,u,a,p,d,g,_,C,S,I,O,P=0,k,F,B,N,G,$,X,ee;const J=new Uint8Array(4);let le,Z;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tm(e)||!e.output||!e.input&&e.avail_in!==0)return _c;r=e.state,r.mode===vh&&(r.mode=K5),u=e.next_out,i=e.output,p=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,d=r.hold,g=r.bits,_=a,C=p,ee=Gp;e:for(;;)switch(r.mode){case k2:if(r.wrap===0){r.mode=K5;break}for(;g<16;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,J[0]=d&255,J[1]=d>>>8&255,r.check=Af(r.check,J,2,0),d=0,g=0,r.mode=Yk;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=oo;break}if((d&15)!==Kk){e.msg="unknown compression method",r.mode=oo;break}if(d>>>=4,g-=4,X=(d&15)+8,r.wbits===0&&(r.wbits=X),X>15||X>r.wbits){e.msg="invalid window size",r.mode=oo;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?aF:vh,d=0,g=0;break;case Yk:for(;g<16;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(r.flags=d,(r.flags&255)!==Kk){e.msg="unknown compression method",r.mode=oo;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=oo;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(J[0]=d&255,J[1]=d>>>8&255,r.check=Af(r.check,J,2,0)),d=0,g=0,r.mode=Jk;case Jk:for(;g<32;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(J[0]=d&255,J[1]=d>>>8&255,J[2]=d>>>16&255,J[3]=d>>>24&255,r.check=Af(r.check,J,4,0)),d=0,g=0,r.mode=Qk;case Qk:for(;g<16;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(J[0]=d&255,J[1]=d>>>8&255,r.check=Af(r.check,J,2,0)),d=0,g=0,r.mode=eF;case eF:if(r.flags&1024){for(;g<16;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(J[0]=d&255,J[1]=d>>>8&255,r.check=Af(r.check,J,2,0)),d=0,g=0}else r.head&&(r.head.extra=null);r.mode=tF;case tF:if(r.flags&1024&&(S=r.length,S>a&&(S=a),S&&(r.head&&(X=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+S),X)),r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,S,s)),a-=S,s+=S,r.length-=S),r.length))break e;r.length=0,r.mode=rF;case rF:if(r.flags&2048){if(a===0)break e;S=0;do X=n[s+S++],r.head&&X&&r.length<65536&&(r.head.name+=String.fromCharCode(X));while(X&&S<a);if(r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,S,s)),a-=S,s+=S,X)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=nF;case nF:if(r.flags&4096){if(a===0)break e;S=0;do X=n[s+S++],r.head&&X&&r.length<65536&&(r.head.comment+=String.fromCharCode(X));while(X&&S<a);if(r.flags&512&&r.wrap&4&&(r.check=Af(r.check,n,S,s)),a-=S,s+=S,X)break e}else r.head&&(r.head.comment=null);r.mode=iF;case iF:if(r.flags&512){for(;g<16;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=oo;break}d=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=vh;break;case aF:for(;g<32;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}e.adler=r.check=vF(d),d=0,g=0,r.mode=K1;case K1:if(r.havedict===0)return e.next_out=u,e.avail_out=p,e.next_in=s,e.avail_in=a,r.hold=d,r.bits=g,uce;e.adler=r.check=1,r.mode=vh;case vh:if(t===sce||t===I_)break e;case K5:if(r.last){d>>>=g&7,g-=g&7,r.mode=J5;break}for(;g<3;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}switch(r.last=d&1,d>>>=1,g-=1,d&3){case 0:r.mode=oF;break;case 1:if(yce(r),r.mode=M_,t===I_){d>>>=2,g-=2;break e}break;case 2:r.mode=lF;break;case 3:e.msg="invalid block type",r.mode=oo}d>>>=2,g-=2;break;case oF:for(d>>>=g&7,g-=g&7;g<32;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=oo;break}if(r.length=d&65535,d=0,g=0,r.mode=Y5,t===I_)break e;case Y5:r.mode=sF;case sF:if(S=r.length,S){if(S>a&&(S=a),S>p&&(S=p),S===0)break e;i.set(n.subarray(s,s+S),u),a-=S,s+=S,p-=S,u+=S,r.length-=S;break}r.mode=vh;break;case lF:for(;g<14;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(r.nlen=(d&31)+257,d>>>=5,g-=5,r.ndist=(d&31)+1,d>>>=5,g-=5,r.ncode=(d&15)+4,d>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=oo;break}r.have=0,r.mode=uF;case uF:for(;r.have<r.ncode;){for(;g<3;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.lens[H[r.have++]]=d&7,d>>>=3,g-=3}for(;r.have<19;)r.lens[H[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,le={bits:r.lenbits},ee=s0(oce,r.lens,0,19,r.lencode,0,r.work,le),r.lenbits=le.bits,ee){e.msg="invalid code lengths set",r.mode=oo;break}r.have=0,r.mode=cF;case cF:for(;r.have<r.nlen+r.ndist;){for(;P=r.lencode[d&(1<<r.lenbits)-1],k=P>>>24,F=P>>>16&255,B=P&65535,!(k<=g);){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(B<16)d>>>=k,g-=k,r.lens[r.have++]=B;else{if(B===16){for(Z=k+2;g<Z;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(d>>>=k,g-=k,r.have===0){e.msg="invalid bit length repeat",r.mode=oo;break}X=r.lens[r.have-1],S=3+(d&3),d>>>=2,g-=2}else if(B===17){for(Z=k+3;g<Z;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}d>>>=k,g-=k,X=0,S=3+(d&7),d>>>=3,g-=3}else{for(Z=k+7;g<Z;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}d>>>=k,g-=k,X=0,S=11+(d&127),d>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=oo;break}for(;S--;)r.lens[r.have++]=X}}if(r.mode===oo)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=oo;break}if(r.lenbits=9,le={bits:r.lenbits},ee=s0(GU,r.lens,0,r.nlen,r.lencode,0,r.work,le),r.lenbits=le.bits,ee){e.msg="invalid literal/lengths set",r.mode=oo;break}if(r.distbits=6,r.distcode=r.distdyn,le={bits:r.distbits},ee=s0(HU,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,le),r.distbits=le.bits,ee){e.msg="invalid distances set",r.mode=oo;break}if(r.mode=M_,t===I_)break e;case M_:r.mode=O_;case O_:if(a>=6&&p>=258){e.next_out=u,e.avail_out=p,e.next_in=s,e.avail_in=a,r.hold=d,r.bits=g,ece(e,C),u=e.next_out,i=e.output,p=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,d=r.hold,g=r.bits,r.mode===vh&&(r.back=-1);break}for(r.back=0;P=r.lencode[d&(1<<r.lenbits)-1],k=P>>>24,F=P>>>16&255,B=P&65535,!(k<=g);){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(F&&(F&240)===0){for(N=k,G=F,$=B;P=r.lencode[$+((d&(1<<N+G)-1)>>N)],k=P>>>24,F=P>>>16&255,B=P&65535,!(N+k<=g);){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}d>>>=N,g-=N,r.back+=N}if(d>>>=k,g-=k,r.back+=k,r.length=B,F===0){r.mode=mF;break}if(F&32){r.back=-1,r.mode=vh;break}if(F&64){e.msg="invalid literal/length code",r.mode=oo;break}r.extra=F&15,r.mode=fF;case fF:if(r.extra){for(Z=r.extra;g<Z;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=hF;case hF:for(;P=r.distcode[d&(1<<r.distbits)-1],k=P>>>24,F=P>>>16&255,B=P&65535,!(k<=g);){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if((F&240)===0){for(N=k,G=F,$=B;P=r.distcode[$+((d&(1<<N+G)-1)>>N)],k=P>>>24,F=P>>>16&255,B=P&65535,!(N+k<=g);){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}d>>>=N,g-=N,r.back+=N}if(d>>>=k,g-=k,r.back+=k,F&64){e.msg="invalid distance code",r.mode=oo;break}r.offset=B,r.extra=F&15,r.mode=dF;case dF:if(r.extra){for(Z=r.extra;g<Z;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=oo;break}r.mode=pF;case pF:if(p===0)break e;if(S=C-p,r.offset>S){if(S=r.offset-S,S>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=oo;break}S>r.wnext?(S-=r.wnext,I=r.wsize-S):I=r.wnext-S,S>r.length&&(S=r.length),O=r.window}else O=i,I=u-r.offset,S=r.length;S>p&&(S=p),p-=S,r.length-=S;do i[u++]=O[I++];while(--S);r.length===0&&(r.mode=O_);break;case mF:if(p===0)break e;i[u++]=r.length,p--,r.mode=O_;break;case J5:if(r.wrap){for(;g<32;){if(a===0)break e;a--,d|=n[s++]<<g,g+=8}if(C-=p,e.total_out+=C,r.total+=C,r.wrap&4&&C&&(e.adler=r.check=r.flags?Af(r.check,i,C,u-C):t3(r.check,i,C,u-C)),C=p,r.wrap&4&&(r.flags?d:vF(d))!==r.check){e.msg="incorrect data check",r.mode=oo;break}d=0,g=0}r.mode=gF;case gF:if(r.wrap&&r.flags){for(;g<32;){if(a===0)break e;a--,d+=n[s++]<<g,g+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=oo;break}d=0,g=0}r.mode=yF;case yF:ee=lce;break e;case oo:ee=WU;break e;case XU:return ZU;case KU:default:return _c}return e.next_out=u,e.avail_out=p,e.next_in=s,e.avail_in=a,r.hold=d,r.bits=g,(r.wsize||C!==e.avail_out&&r.mode<oo&&(r.mode<J5||t!==Xk))&&tV(e,e.output,e.next_out,C-e.avail_out),_-=e.avail_in,C-=e.avail_out,e.total_in+=_,e.total_out+=C,r.total+=C,r.wrap&4&&C&&(e.adler=r.check=r.flags?Af(r.check,i,C,e.next_out-C):t3(r.check,i,C,e.next_out-C)),e.data_type=r.bits+(r.last?64:0)+(r.mode===vh?128:0)+(r.mode===M_||r.mode===Y5?256:0),(_===0&&C===0||t===Xk)&&ee===Gp&&(ee=cce),ee},bce=e=>{if(tm(e))return _c;let t=e.state;return t.window&&(t.window=null),e.state=null,Gp},_ce=(e,t)=>{if(tm(e))return _c;const r=e.state;return(r.wrap&2)===0?_c:(r.head=t,t.done=!1,Gp)},xce=(e,t)=>{const r=t.length;let n,i,s;return tm(e)||(n=e.state,n.wrap!==0&&n.mode!==K1)?_c:n.mode===K1&&(i=1,i=t3(i,t,r,0),i!==n.check)?WU:(s=tV(e,t,r,r),s?(n.mode=XU,ZU):(n.havedict=1,Gp))};var wce=JU,Sce=QU,Ece=YU,Cce=gce,Ace=eV,Tce=vce,Pce=bce,Ice=_ce,Mce=xce,Oce="pako inflate (from Nodeca project)",Ah={inflateReset:wce,inflateReset2:Sce,inflateResetKeep:Ece,inflateInit:Cce,inflateInit2:Ace,inflate:Tce,inflateEnd:Pce,inflateGetHeader:Ice,inflateSetDictionary:Mce,inflateInfo:Oce};function Rce(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Lce=Rce;const rV=Object.prototype.toString,{Z_NO_FLUSH:Dce,Z_FINISH:kce,Z_OK:$0,Z_STREAM_END:tS,Z_NEED_DICT:rS,Z_STREAM_ERROR:Fce,Z_DATA_ERROR:_F,Z_MEM_ERROR:Nce}=qU;function gb(e){this.options=UU.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jue,this.strm.avail_out=0;let r=Ah.inflateInit2(this.strm,t.windowBits);if(r!==$0)throw new Error(r3[r]);if(this.header=new Lce,Ah.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=n3.string2buf(t.dictionary):rV.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ah.inflateSetDictionary(this.strm,t.dictionary),r!==$0)))throw new Error(r3[r])}gb.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,u,a;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?kce:Dce,rV.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Ah.inflate(r,u),s===rS&&i&&(s=Ah.inflateSetDictionary(r,i),s===$0?s=Ah.inflate(r,u):s===_F&&(s=rS));r.avail_in>0&&s===tS&&r.state.wrap>0&&e[r.next_in]!==0;)Ah.inflateReset(r),s=Ah.inflate(r,u);switch(s){case Fce:case _F:case rS:case Nce:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||s===tS))if(this.options.to==="string"){let p=n3.utf8border(r.output,r.next_out),d=r.next_out-p,g=n3.buf2string(r.output,p);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(p,p+d),0),this.onData(g)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===$0&&a===0)){if(s===tS)return s=Ah.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};gb.prototype.onData=function(e){this.chunks.push(e)};gb.prototype.onEnd=function(e){e===$0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=UU.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Bce(e,t){const r=new gb(t);if(r.push(e),r.err)throw r.msg||r3[r.err];return r.result}var jce=gb,zce=Bce,$ce={Inflate:jce,inflate:zce};const{Inflate:qce,inflate:Uce}=$ce;var xF=qce,Vce=Uce;const nV=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;nV[e]=t}const wF=4294967295;function Gce(e,t,r){let n=e;for(let i=0;i<r;i++)n=nV[(n^t[i])&255]^n>>>8;return n}function Hce(e,t){return(Gce(wF,e,t)^wF)>>>0}function SF(e,t,r){const n=e.readUint32(),i=Hce(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function iV(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function aV(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function oV(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function sV(e,t,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-i]+r[s]>>1)&255}}function lV(e,t,r,n,i){let s=0;if(r.length===0){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+Wce(t[s-i],r[s],r[s-i])&255}}function Wce(e,t,r){const n=e+t-r,i=Math.abs(n-e),s=Math.abs(n-t),u=Math.abs(n-r);return i<=s&&i<=u?e:s<=u?t:r}function Zce(e,t,r,n,i,s){switch(e){case 0:iV(t,r,i);break;case 1:aV(t,r,i,s);break;case 2:oV(t,r,n,i);break;case 3:sV(t,r,n,i,s);break;case 4:lV(t,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Xce=new Uint16Array([255]),Kce=new Uint8Array(Xce.buffer),Yce=Kce[0]===255;function Jce(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,p=new Uint8Array(n*r*a);let d=0;for(let g=0;g<7;g++){const _=u[g],C=Math.ceil((r-_.x)/_.xStep),S=Math.ceil((n-_.y)/_.yStep);if(C<=0||S<=0)continue;const I=C*a,O=new Uint8Array(I);for(let P=0;P<S;P++){const k=t[d++],F=t.subarray(d,d+I);d+=I;const B=new Uint8Array(I);Zce(k,F,B,O,I,a),O.set(B);for(let N=0;N<C;N++){const G=_.x+N*_.xStep,$=_.y+P*_.yStep;if(!(G>=r||$>=n))for(let X=0;X<a;X++)p[($*r+G)*a+X]=B[N*a+X]}}}if(s===16){const g=new Uint16Array(p.buffer);if(Yce)for(let _=0;_<g.length;_++)g[_]=Qce(g[_]);return g}else return p}function Qce(e){return(e&255)<<8|e>>8&255}const efe=new Uint16Array([255]),tfe=new Uint8Array(efe.buffer),rfe=tfe[0]===255,nfe=new Uint8Array(0);function EF(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,u=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*r),p=new Uint8Array(n*a);let d=nfe,g=0,_,C;for(let S=0;S<n;S++){switch(_=t.subarray(g+1,g+1+a),C=p.subarray(S*a,(S+1)*a),t[g]){case 0:iV(_,C,a);break;case 1:aV(_,C,a,u);break;case 2:oV(_,C,d,a);break;case 3:sV(_,C,d,a,u);break;case 4:lV(_,C,d,a,u);break;default:throw new Error(`Unsupported filter: ${t[g]}`)}d=C,g+=a+1}if(s===16){const S=new Uint16Array(p.buffer);if(rfe)for(let I=0;I<S.length;I++)S[I]=ife(S[I]);return S}else return p}function ife(e){return(e&255)<<8|e>>8&255}const y1=Uint8Array.of(137,80,78,71,13,10,26,10);function CF(e){if(!afe(e.readBytes(y1.length)))throw new Error("wrong PNG signature")}function afe(e){if(e.length<y1.length)return!1;for(let t=0;t<y1.length;t++)if(e[t]!==y1[t])return!1;return!0}const ofe="tEXt",sfe=0,uV=new TextDecoder("latin1");function lfe(e){if(cfe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const ufe=/^[\u0000-\u00FF]*$/;function cfe(e){if(!ufe.test(e))throw new Error("invalid latin1 text")}function ffe(e,t,r){const n=cV(t);e[n]=hfe(t,r-n.length-1)}function cV(e){for(e.mark();e.readByte()!==sfe;);const t=e.offset;e.reset();const r=uV.decode(e.readBytes(t-e.offset-1));return e.skip(1),lfe(r),r}function hfe(e,t){return uV.decode(e.readBytes(t))}const ku={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},nS={UNKNOWN:-1,DEFLATE:0},AF={UNKNOWN:-1,ADAPTIVE:0},iS={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},R_={NONE:0,BACKGROUND:1,PREVIOUS:2},aS={SOURCE:0,OVER:1};class dfe extends jM{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new xF,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=nS.UNKNOWN,this._filterMethod=AF.UNKNOWN,this._interlaceMethod=iS.UNKNOWN,this._colorType=ku.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(CF(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(CF(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case ofe:ffe(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?SF(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?SF(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=pfe(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case ku.GREYSCALE:n=1;break;case ku.TRUECOLOUR:n=3;break;case ku.INDEXED_COLOUR:n=1;break;case ku.GREYSCALE_ALPHA:n=2;break;case ku.TRUECOLOUR_ALPHA:n=4;break;case ku.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==nS.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ku.GREYSCALE:case ku.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case ku.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ku.UNKNOWN:case ku.GREYSCALE_ALPHA:case ku.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=cV(this),n=this.readUint8();if(n!==nS.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Vce(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=EF({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case R_.NONE:break;case R_.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){const u=(i*t.width+s)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[u+a]=0}break;case R_.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(s,u)=>{const a=((s+r.yOffset)*this._png.width+r.xOffset+u)*this._png.channels,p=(s*r.width+u)*this._png.channels;return{index:a,frameIndex:p}};switch(r.blendOp){case aS.SOURCE:for(let s=0;s<r.height;s++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(s,u);for(let d=0;d<this._png.channels;d++)t.data[a+d]=r.data[p+d]}break;case aS.OVER:for(let s=0;s<r.height;s++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(s,u);for(let d=0;d<this._png.channels;d++){const g=r.data[p+this._png.channels-1]/n,_=d%(this._png.channels-1)===0?1:r.data[p+d],C=Math.floor(g*_+(1-g)*t.data[a+d]);t.data[a+d]+=C}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==AF.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===iS.NO_INTERLACE)this._png.data=EF({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===iS.ADAM7)this._png.data=Jce({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:R_.NONE,blendOp:aS.SOURCE,data:t}),this._inflator=new xF,this._writingDataChunks=!1}}function pfe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var TF;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(TF||(TF={}));function mfe(e,t){return new dfe(e,t).decode()}var ei=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function oS(){ei.console&&typeof ei.console.log=="function"&&ei.console.log.apply(ei.console,arguments)}var Fa={log:oS,warn:function(e){ei.console&&(typeof ei.console.warn=="function"?ei.console.warn.apply(ei.console,arguments):oS.call(null,arguments))},error:function(e){ei.console&&(typeof ei.console.error=="function"?ei.console.error.apply(ei.console,arguments):oS(e))}};function sS(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){_p(n.response,t,r)},n.onerror=function(){Fa.error("could not download file")},n.send()}function PF(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function L_(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var _p=ei.saveAs||((typeof window>"u"?"undefined":va(window))!=="object"||window!==ei?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=ei.URL||ei.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?PF(i.href)?sS(e,t,r):L_(i,i.target="_blank"):L_(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){L_(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(PF(e))sS(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){L_(n)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:va(s)!=="object"&&(Fa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return sS(e,t,r);var i=e.type==="application/octet-stream",s=/constructor/i.test(ei.HTMLElement)||ei.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&s)&&(typeof FileReader>"u"?"undefined":va(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var g=a.result;g=u?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},a.readAsDataURL(e)}else{var p=ei.URL||ei.webkitURL,d=p.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){p.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fV(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,s=r[n].process,u=i.exec(e);u&&(t=s(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),p=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),p.length==1&&(p="0"+p),d.length==1&&(d="0"+d),"#"+a+p+d}}var v1=ei.atob.bind(ei),IF=ei.btoa.bind(ei);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function lS(e,t){var r=e[0],n=e[1],i=e[2],s=e[3];r=vl(r,n,i,s,t[0],7,-680876936),s=vl(s,r,n,i,t[1],12,-389564586),i=vl(i,s,r,n,t[2],17,606105819),n=vl(n,i,s,r,t[3],22,-1044525330),r=vl(r,n,i,s,t[4],7,-176418897),s=vl(s,r,n,i,t[5],12,1200080426),i=vl(i,s,r,n,t[6],17,-1473231341),n=vl(n,i,s,r,t[7],22,-45705983),r=vl(r,n,i,s,t[8],7,1770035416),s=vl(s,r,n,i,t[9],12,-1958414417),i=vl(i,s,r,n,t[10],17,-42063),n=vl(n,i,s,r,t[11],22,-1990404162),r=vl(r,n,i,s,t[12],7,1804603682),s=vl(s,r,n,i,t[13],12,-40341101),i=vl(i,s,r,n,t[14],17,-1502002290),r=bl(r,n=vl(n,i,s,r,t[15],22,1236535329),i,s,t[1],5,-165796510),s=bl(s,r,n,i,t[6],9,-1069501632),i=bl(i,s,r,n,t[11],14,643717713),n=bl(n,i,s,r,t[0],20,-373897302),r=bl(r,n,i,s,t[5],5,-701558691),s=bl(s,r,n,i,t[10],9,38016083),i=bl(i,s,r,n,t[15],14,-660478335),n=bl(n,i,s,r,t[4],20,-405537848),r=bl(r,n,i,s,t[9],5,568446438),s=bl(s,r,n,i,t[14],9,-1019803690),i=bl(i,s,r,n,t[3],14,-187363961),n=bl(n,i,s,r,t[8],20,1163531501),r=bl(r,n,i,s,t[13],5,-1444681467),s=bl(s,r,n,i,t[2],9,-51403784),i=bl(i,s,r,n,t[7],14,1735328473),r=_l(r,n=bl(n,i,s,r,t[12],20,-1926607734),i,s,t[5],4,-378558),s=_l(s,r,n,i,t[8],11,-2022574463),i=_l(i,s,r,n,t[11],16,1839030562),n=_l(n,i,s,r,t[14],23,-35309556),r=_l(r,n,i,s,t[1],4,-1530992060),s=_l(s,r,n,i,t[4],11,1272893353),i=_l(i,s,r,n,t[7],16,-155497632),n=_l(n,i,s,r,t[10],23,-1094730640),r=_l(r,n,i,s,t[13],4,681279174),s=_l(s,r,n,i,t[0],11,-358537222),i=_l(i,s,r,n,t[3],16,-722521979),n=_l(n,i,s,r,t[6],23,76029189),r=_l(r,n,i,s,t[9],4,-640364487),s=_l(s,r,n,i,t[12],11,-421815835),i=_l(i,s,r,n,t[15],16,530742520),r=xl(r,n=_l(n,i,s,r,t[2],23,-995338651),i,s,t[0],6,-198630844),s=xl(s,r,n,i,t[7],10,1126891415),i=xl(i,s,r,n,t[14],15,-1416354905),n=xl(n,i,s,r,t[5],21,-57434055),r=xl(r,n,i,s,t[12],6,1700485571),s=xl(s,r,n,i,t[3],10,-1894986606),i=xl(i,s,r,n,t[10],15,-1051523),n=xl(n,i,s,r,t[1],21,-2054922799),r=xl(r,n,i,s,t[8],6,1873313359),s=xl(s,r,n,i,t[15],10,-30611744),i=xl(i,s,r,n,t[6],15,-1560198380),n=xl(n,i,s,r,t[13],21,1309151649),r=xl(r,n,i,s,t[4],6,-145523070),s=xl(s,r,n,i,t[11],10,-1120210379),i=xl(i,s,r,n,t[2],15,718787259),n=xl(n,i,s,r,t[9],21,-343485551),e[0]=bd(r,e[0]),e[1]=bd(n,e[1]),e[2]=bd(i,e[2]),e[3]=bd(s,e[3])}function F2(e,t,r,n,i,s){return t=bd(bd(t,e),bd(n,s)),bd(t<<i|t>>>32-i,r)}function vl(e,t,r,n,i,s,u){return F2(t&r|~t&n,e,t,i,s,u)}function bl(e,t,r,n,i,s,u){return F2(t&n|r&~n,e,t,i,s,u)}function _l(e,t,r,n,i,s,u){return F2(t^r^n,e,t,i,s,u)}function xl(e,t,r,n,i,s,u){return F2(r^(t|~n),e,t,i,s,u)}function hV(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)lS(n,gfe(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(lS(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,lS(n,i),n}function gfe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var MF="0123456789abcdef".split("");function yfe(e){for(var t="",r=0;r<4;r++)t+=MF[e>>8*r+4&15]+MF[e>>8*r&15];return t}function vfe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function i3(e){return hV(e).map(vfe).join("")}var bfe=(function(e){for(var t=0;t<e.length;t++)e[t]=yfe(e[t]);return e.join("")})(hV("hello"))!="5d41402abc4b2a76b9719d911017c592";function bd(e,t){if(bfe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function a3(e,t){var r,n,i,s;if(e!==r){for(var u=(i=e,s=1+(256/e.length|0),new Array(s+1).join(i)),a=[],p=0;p<256;p++)a[p]=p;var d=0;for(p=0;p<256;p++){var g=a[p];d=(d+g+u.charCodeAt(p))%256,a[p]=a[d],a[d]=g}r=e,n=a}else a=n;var _=t.length,C=0,S=0,I="";for(p=0;p<_;p++)S=(S+(g=a[C=(C+1)%256]))%256,a[C]=a[S],a[S]=g,u=a[(a[C]+a[S])%256],I+=String.fromCharCode(t.charCodeAt(p)^u);return I}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var OF={print:4,modify:8,copy:16,"annot-forms":32};function ag(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(OF.perm!==void 0)throw new Error("Invalid permission: "+a);i+=OF[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),u=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,u),this.P=-(1+(255^i)),this.encryptionKey=i3(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=a3(this.encryptionKey,this.padding)}function og(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function RF(e){if(va(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!i],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in t[r]){var u=t[r][s];try{u[0].apply(e,n)}catch(a){ei.console&&Fa.error("jsPDF PubSub Error",a.message,a)}u[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Y1(e){if(!(this instanceof Y1))return new Y1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function dV(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Sp(e,t,r,n,i){if(!(this instanceof Sp))return new Sp(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,dV.call(this,n,i)}function Tg(e,t,r,n,i){if(!(this instanceof Tg))return new Tg(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,dV.call(this,n,i)}function On(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],u=[],a=1,p=16,d="S",g=null;va(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,s=e.compress||e.compressPdf||s,(g=e.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(p=e.floatPrecision),d=e.defaultPathOperation||"S"),u=e.filters||(s===!0?["FlateEncode"]:u),n=n||"mm",r=(""+(r||"P")).toLowerCase();var _=e.putOnlyUsedFonts||!1,C={},S={internal:{},__private__:{}};S.__private__.PubSub=RF;var I="1.3",O=S.__private__.getPdfVersion=function(){return I};S.__private__.setPdfVersion=function(Y){I=Y};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return P};var k=S.__private__.getPageFormat=function(Y){return P[Y]};i=i||"a4";var F="compat",B="advanced",N=F;function G(){this.saveGraphicsState(),ke(new Ct(Be,0,0,-Be,0,eo()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),d="n",N=B}function $(){this.restoreGraphicsState(),d="S",N=F}var X=S.__private__.combineFontStyleAndFontWeight=function(Y,Pe){if(Y=="bold"&&Pe=="normal"||Y=="bold"&&Pe==400||Y=="normal"&&Pe=="italic"||Y=="bold"&&Pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Pe&&(Y=Pe==400||Pe==="normal"?Y==="italic"?"italic":"normal":Pe!=700&&Pe!=="bold"||Y!=="normal"?(Pe==700?"bold":Pe)+""+Y:"bold"),Y};S.advancedAPI=function(Y){var Pe=N===F;return Pe&&G.call(this),typeof Y!="function"||(Y(this),Pe&&$.call(this)),this},S.compatAPI=function(Y){var Pe=N===B;return Pe&&$.call(this),typeof Y!="function"||(Y(this),Pe&&G.call(this)),this},S.isAdvancedAPI=function(){return N===B};var ee,J=function(Y){if(N!==B)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},le=S.roundToPrecision=S.__private__.roundToPrecision=function(Y,Pe){var it=t||Pe;if(isNaN(Y)||isNaN(it))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(it).replace(/0+$/,"")};ee=S.hpf=S.__private__.hpf=typeof p=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return le(Y,p)}:p==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return le(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return le(Y,16)};var Z=S.f2=S.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return le(Y,2)},H=S.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return le(Y,3)},oe=S.scale=S.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return N===F?Y*Be:N===B?Y:void 0},ue=function(Y){return oe((function(Pe){return N===F?eo()-Pe:N===B?Pe:void 0})(Y))};S.__private__.setPrecision=S.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(t=parseInt(Y,10))};var ce,be="00000000000000000000000000000000",Te=S.__private__.getFileId=function(){return be},ve=S.__private__.setFileId=function(Y){return be=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():be.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(ba=new ag(g.userPermissions,g.userPassword,g.ownerPassword,be)),be};S.setFileId=function(Y){return ve(Y),this},S.getFileId=function(){return Te()};var Ce=S.__private__.convertDateToPDFDate=function(Y){var Pe=Y.getTimezoneOffset(),it=Pe<0?"+":"-",Ot=Math.floor(Math.abs(Pe/60)),Gt=Math.abs(Pe%60),br=[it,Ie(Ot),"'",Ie(Gt),"'"].join("");return["D:",Y.getFullYear(),Ie(Y.getMonth()+1),Ie(Y.getDate()),Ie(Y.getHours()),Ie(Y.getMinutes()),Ie(Y.getSeconds()),br].join("")},$e=S.__private__.convertPDFDateToDate=function(Y){var Pe=parseInt(Y.substr(2,4),10),it=parseInt(Y.substr(6,2),10)-1,Ot=parseInt(Y.substr(8,2),10),Gt=parseInt(Y.substr(10,2),10),br=parseInt(Y.substr(12,2),10),Pr=parseInt(Y.substr(14,2),10);return new Date(Pe,it,Ot,Gt,br,Pr,0)},Je=S.__private__.setCreationDate=function(Y){var Pe;if(Y===void 0&&(Y=new Date),Y instanceof Date)Pe=Ce(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Pe=Y}return ce=Pe},ge=S.__private__.getCreationDate=function(Y){var Pe=ce;return Y==="jsDate"&&(Pe=$e(ce)),Pe};S.setCreationDate=function(Y){return Je(Y),this},S.getCreationDate=function(Y){return ge(Y)};var Ee,Ie=S.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},Le=S.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},Ve=0,ht=[],It=[],xt=0,rt=[],zt=[],Lt=!1,Ft=It;S.__private__.setCustomOutputDestination=function(Y){Lt=!0,Ft=Y};var dt=function(Y){Lt||(Ft=Y)};S.__private__.resetCustomOutputDestination=function(){Lt=!1,Ft=It};var ke=S.__private__.out=function(Y){return Y=Y.toString(),xt+=Y.length+1,Ft.push(Y),Ft},fr=S.__private__.write=function(Y){return ke(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},sr=S.__private__.getArrayBuffer=function(Y){for(var Pe=Y.length,it=new ArrayBuffer(Pe),Ot=new Uint8Array(it);Pe--;)Ot[Pe]=Y.charCodeAt(Pe);return it},xr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return xr};var tr=e.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(Y){return tr=N===B?Y/Be:Y,this};var Ge,nt=S.__private__.getFontSize=S.getFontSize=function(){return N===F?tr:tr*Be},ut=e.R2L||!1;S.__private__.setR2L=S.setR2L=function(Y){return ut=Y,this},S.__private__.getR2L=S.getR2L=function(){return ut};var Nt,Kt=S.__private__.setZoomMode=function(Y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Ge=Y;else if(isNaN(Y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Ge=Y}else Ge=parseInt(Y,10)};S.__private__.getZoomMode=function(){return Ge};var Vt,Ke=S.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');Nt=Y};S.__private__.getPageMode=function(){return Nt};var me=S.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');Vt=Y};S.__private__.getLayoutMode=function(){return Vt},S.__private__.setDisplayMode=S.setDisplayMode=function(Y,Pe,it){return Kt(Y),me(Pe),Ke(it),this};var pe={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(Y){if(Object.keys(pe).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pe[Y]},S.__private__.getDocumentProperties=function(){return pe},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(Y){for(var Pe in pe)pe.hasOwnProperty(Pe)&&Y[Pe]&&(pe[Pe]=Y[Pe]);return this},S.__private__.setDocumentProperty=function(Y,Pe){if(Object.keys(pe).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pe[Y]=Pe};var Ae,Be,Ne,Tt,bt,tt={},gt={},$t=[],kt={},cr={},mr={},Zr={},mn=null,Kr=0,Rt=[],Ur=new RF(S),Fn=e.hotfixes||[],Jr={},jr={},wt=[],Ct=function Y(Pe,it,Ot,Gt,br,Pr){if(!(this instanceof Y))return new Y(Pe,it,Ot,Gt,br,Pr);isNaN(Pe)&&(Pe=1),isNaN(it)&&(it=0),isNaN(Ot)&&(Ot=0),isNaN(Gt)&&(Gt=1),isNaN(br)&&(br=0),isNaN(Pr)&&(Pr=0),this._matrix=[Pe,it,Ot,Gt,br,Pr]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ee).join(Y)},Ct.prototype.multiply=function(Y){var Pe=Y.sx*this.sx+Y.shy*this.shx,it=Y.sx*this.shy+Y.shy*this.sy,Ot=Y.shx*this.sx+Y.sy*this.shx,Gt=Y.shx*this.shy+Y.sy*this.sy,br=Y.tx*this.sx+Y.ty*this.shx+this.tx,Pr=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new Ct(Pe,it,Ot,Gt,br,Pr)},Ct.prototype.decompose=function(){var Y=this.sx,Pe=this.shy,it=this.shx,Ot=this.sy,Gt=this.tx,br=this.ty,Pr=Math.sqrt(Y*Y+Pe*Pe),hn=(Y/=Pr)*it+(Pe/=Pr)*Ot;it-=Y*hn,Ot-=Pe*hn;var bn=Math.sqrt(it*it+Ot*Ot);return hn/=bn,Y*(Ot/=bn)<Pe*(it/=bn)&&(Y=-Y,Pe=-Pe,hn=-hn,Pr=-Pr),{scale:new Ct(Pr,0,0,bn,0,0),translate:new Ct(1,0,0,1,Gt,br),rotate:new Ct(Y,Pe,-Pe,Y,0,0),skew:new Ct(1,0,hn,1,0,0)}},Ct.prototype.toString=function(Y){return this.join(" ")},Ct.prototype.inversed=function(){var Y=this.sx,Pe=this.shy,it=this.shx,Ot=this.sy,Gt=this.tx,br=this.ty,Pr=1/(Y*Ot-Pe*it),hn=Ot*Pr,bn=-Pe*Pr,yn=-it*Pr,Mn=Y*Pr;return new Ct(hn,bn,yn,Mn,-hn*Gt-yn*br,-bn*Gt-Mn*br)},Ct.prototype.applyToPoint=function(Y){var Pe=Y.x*this.sx+Y.y*this.shx+this.tx,it=Y.x*this.shy+Y.y*this.sy+this.ty;return new Xl(Pe,it)},Ct.prototype.applyToRectangle=function(Y){var Pe=this.applyToPoint(Y),it=this.applyToPoint(new Xl(Y.x+Y.w,Y.y+Y.h));return new wu(Pe.x,Pe.y,it.x-Pe.x,it.y-Pe.y)},Ct.prototype.clone=function(){var Y=this.sx,Pe=this.shy,it=this.shx,Ot=this.sy,Gt=this.tx,br=this.ty;return new Ct(Y,Pe,it,Ot,Gt,br)},S.Matrix=Ct;var Wt=S.matrixMult=function(Y,Pe){return Pe.multiply(Y)},ie=new Ct(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=ie;var _e=function(Y,Pe){if(!cr[Y]){var it=(Pe instanceof Sp?"Sh":"P")+(Object.keys(kt).length+1).toString(10);Pe.id=it,cr[Y]=it,kt[it]=Pe,Ur.publish("addPattern",Pe)}};S.ShadingPattern=Sp,S.TilingPattern=Tg,S.addShadingPattern=function(Y,Pe){return J("addShadingPattern()"),_e(Y,Pe),this},S.beginTilingPattern=function(Y){J("beginTilingPattern()"),bi(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},S.endTilingPattern=function(Y,Pe){J("endTilingPattern()"),Pe.stream=zt[Ee].join(`
`),_e(Y,Pe),Ur.publish("endTilingPattern",Pe),wt.pop().restore()};var Ze,_t=S.__private__.newObject=function(){var Y=lt();return or(Y,!0),Y},lt=S.__private__.newObjectDeferred=function(){return Ve++,ht[Ve]=function(){return xt},Ve},or=function(Y,Pe){return Pe=typeof Pe=="boolean"&&Pe,ht[Y]=xt,Pe&&ke(Y+" 0 obj"),Y},Ar=S.__private__.newAdditionalObject=function(){var Y={objId:lt(),content:""};return rt.push(Y),Y},Vr=lt(),Rr=lt(),lr=S.__private__.decodeColorString=function(Y){var Pe=Y.split(" ");if(Pe.length!==2||Pe[1]!=="g"&&Pe[1]!=="G")Pe.length!==5||Pe[4]!=="k"&&Pe[4]!=="K"||(Pe=[(1-Pe[0])*(1-Pe[3]),(1-Pe[1])*(1-Pe[3]),(1-Pe[2])*(1-Pe[3]),"r"]);else{var it=parseFloat(Pe[0]);Pe=[it,it,it,"r"]}for(var Ot="#",Gt=0;Gt<3;Gt++)Ot+=("0"+Math.floor(255*parseFloat(Pe[Gt])).toString(16)).slice(-2);return Ot},kr=S.__private__.encodeColorString=function(Y){var Pe;typeof Y=="string"&&(Y={ch1:Y});var it=Y.ch1,Ot=Y.ch2,Gt=Y.ch3,br=Y.ch4,Pr=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof it=="string"&&it.charAt(0)!=="#"){var hn=new fV(it);if(hn.ok)it=hn.toHex();else if(!/^\d*\.?\d*$/.test(it))throw new Error('Invalid color "'+it+'" passed to jsPDF.encodeColorString.')}if(typeof it=="string"&&/^#[0-9A-Fa-f]{3}$/.test(it)&&(it="#"+it[1]+it[1]+it[2]+it[2]+it[3]+it[3]),typeof it=="string"&&/^#[0-9A-Fa-f]{6}$/.test(it)){var bn=parseInt(it.substr(1),16);it=bn>>16&255,Ot=bn>>8&255,Gt=255&bn}if(Ot===void 0||br===void 0&&it===Ot&&Ot===Gt)Pe=typeof it=="string"?it+" "+Pr[0]:Y.precision===2?Z(it/255)+" "+Pr[0]:H(it/255)+" "+Pr[0];else if(br===void 0||va(br)==="object"){if(br&&!isNaN(br.a)&&br.a===0)return["1.","1.","1.",Pr[1]].join(" ");Pe=typeof it=="string"?[it,Ot,Gt,Pr[1]].join(" "):Y.precision===2?[Z(it/255),Z(Ot/255),Z(Gt/255),Pr[1]].join(" "):[H(it/255),H(Ot/255),H(Gt/255),Pr[1]].join(" ")}else Pe=typeof it=="string"?[it,Ot,Gt,br,Pr[2]].join(" "):Y.precision===2?[Z(it),Z(Ot),Z(Gt),Z(br),Pr[2]].join(" "):[H(it),H(Ot),H(Gt),H(br),Pr[2]].join(" ");return Pe},Yr=S.__private__.getFilters=function(){return u},dn=S.__private__.putStream=function(Y){var Pe=(Y=Y||{}).data||"",it=Y.filters||Yr(),Ot=Y.alreadyAppliedFilters||[],Gt=Y.addLength1||!1,br=Pe.length,Pr=Y.objectId,hn=function(Vn){return Vn};if(g!==null&&Pr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(hn=ba.encryptor(Pr,0));var bn={};it===!0&&(it=["FlateEncode"]);var yn=Y.additionalKeyValues||[],Mn=(bn=On.API.processDataByFilters!==void 0?On.API.processDataByFilters(Pe,it):{data:Pe,reverseChain:[]}).reverseChain+(Array.isArray(Ot)?Ot.join(" "):Ot.toString());if(bn.data.length!==0&&(yn.push({key:"Length",value:bn.data.length}),Gt===!0&&yn.push({key:"Length1",value:br})),Mn.length!=0)if(Mn.split("/").length-1==1)yn.push({key:"Filter",value:Mn});else{yn.push({key:"Filter",value:"["+Mn+"]"});for(var _n=0;_n<yn.length;_n+=1)if(yn[_n].key==="DecodeParms"){for(var Pi=[],_a=0;_a<bn.reverseChain.split("/").length-1;_a+=1)Pi.push("null");Pi.push(yn[_n].value),yn[_n].value="["+Pi.join(" ")+"]"}}ke("<<");for(var Ei=0;Ei<yn.length;Ei++)ke("/"+yn[Ei].key+" "+yn[Ei].value);ke(">>"),bn.data.length!==0&&(ke("stream"),ke(hn(bn.data)),ke("endstream"))},Bn=S.__private__.putPage=function(Y){var Pe=Y.number,it=Y.data,Ot=Y.objId,Gt=Y.contentsObjId;or(Ot,!0),ke("<</Type /Page"),ke("/Parent "+Y.rootDictionaryObjId+" 0 R"),ke("/Resources "+Y.resourceDictionaryObjId+" 0 R"),ke("/MediaBox ["+parseFloat(ee(Y.mediaBox.bottomLeftX))+" "+parseFloat(ee(Y.mediaBox.bottomLeftY))+" "+ee(Y.mediaBox.topRightX)+" "+ee(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&ke("/CropBox ["+ee(Y.cropBox.bottomLeftX)+" "+ee(Y.cropBox.bottomLeftY)+" "+ee(Y.cropBox.topRightX)+" "+ee(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&ke("/BleedBox ["+ee(Y.bleedBox.bottomLeftX)+" "+ee(Y.bleedBox.bottomLeftY)+" "+ee(Y.bleedBox.topRightX)+" "+ee(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&ke("/TrimBox ["+ee(Y.trimBox.bottomLeftX)+" "+ee(Y.trimBox.bottomLeftY)+" "+ee(Y.trimBox.topRightX)+" "+ee(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&ke("/ArtBox ["+ee(Y.artBox.bottomLeftX)+" "+ee(Y.artBox.bottomLeftY)+" "+ee(Y.artBox.topRightX)+" "+ee(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&ke("/UserUnit "+Y.userUnit),Ur.publish("putPage",{objId:Ot,pageContext:Rt[Pe],pageNumber:Pe,page:it}),ke("/Contents "+Gt+" 0 R"),ke(">>"),ke("endobj");var br=it.join(`
`);return N===B&&(br+=`
Q`),or(Gt,!0),dn({data:br,filters:Yr(),objectId:Gt}),ke("endobj"),Ot},Pn=S.__private__.putPages=function(){var Y,Pe,it=[];for(Y=1;Y<=Kr;Y++)Rt[Y].objId=lt(),Rt[Y].contentsObjId=lt();for(Y=1;Y<=Kr;Y++)it.push(Bn({number:Y,data:zt[Y],objId:Rt[Y].objId,contentsObjId:Rt[Y].contentsObjId,mediaBox:Rt[Y].mediaBox,cropBox:Rt[Y].cropBox,bleedBox:Rt[Y].bleedBox,trimBox:Rt[Y].trimBox,artBox:Rt[Y].artBox,userUnit:Rt[Y].userUnit,rootDictionaryObjId:Vr,resourceDictionaryObjId:Rr}));or(Vr,!0),ke("<</Type /Pages");var Ot="/Kids [";for(Pe=0;Pe<Kr;Pe++)Ot+=it[Pe]+" 0 R ";ke(Ot+"]"),ke("/Count "+Kr),ke(">>"),ke("endobj"),Ur.publish("postPutPages")},un=function(Y){Ur.publish("putFont",{font:Y,out:ke,newObject:_t,putStream:dn}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=_t(),ke("<<"),ke("/Type /Font"),ke("/BaseFont /"+og(Y.postScriptName)),ke("/Subtype /Type1"),typeof Y.encoding=="string"&&ke("/Encoding /"+Y.encoding),ke("/FirstChar 32"),ke("/LastChar 255"),ke(">>"),ke("endobj"))},Wi=function(Y){Y.objectNumber=_t();var Pe=[];Pe.push({key:"Type",value:"/XObject"}),Pe.push({key:"Subtype",value:"/Form"}),Pe.push({key:"BBox",value:"["+[ee(Y.x),ee(Y.y),ee(Y.x+Y.width),ee(Y.y+Y.height)].join(" ")+"]"}),Pe.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var it=Y.pages[1].join(`
`);dn({data:it,additionalKeyValues:Pe,objectId:Y.objectNumber}),ke("endobj")},Zi=function(Y,Pe){Pe||(Pe=21);var it=_t(),Ot=(function(Pr,hn){var bn,yn=[],Mn=1/(hn-1);for(bn=0;bn<1;bn+=Mn)yn.push(bn);if(yn.push(1),Pr[0].offset!=0){var _n={offset:0,color:Pr[0].color};Pr.unshift(_n)}if(Pr[Pr.length-1].offset!=1){var Pi={offset:1,color:Pr[Pr.length-1].color};Pr.push(Pi)}for(var _a="",Ei=0,Vn=0;Vn<yn.length;Vn++){for(bn=yn[Vn];bn>Pr[Ei+1].offset;)Ei++;var Qi=Pr[Ei].offset,Ia=(bn-Qi)/(Pr[Ei+1].offset-Qi),As=Pr[Ei].color,ol=Pr[Ei+1].color;_a+=Le(Math.round((1-Ia)*As[0]+Ia*ol[0]).toString(16))+Le(Math.round((1-Ia)*As[1]+Ia*ol[1]).toString(16))+Le(Math.round((1-Ia)*As[2]+Ia*ol[2]).toString(16))}return _a.trim()})(Y.colors,Pe),Gt=[];Gt.push({key:"FunctionType",value:"0"}),Gt.push({key:"Domain",value:"[0.0 1.0]"}),Gt.push({key:"Size",value:"["+Pe+"]"}),Gt.push({key:"BitsPerSample",value:"8"}),Gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dn({data:Ot,additionalKeyValues:Gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:it}),ke("endobj"),Y.objectNumber=_t(),ke("<< /ShadingType "+Y.type),ke("/ColorSpace /DeviceRGB");var br="/Coords ["+ee(parseFloat(Y.coords[0]))+" "+ee(parseFloat(Y.coords[1]))+" ";Y.type===2?br+=ee(parseFloat(Y.coords[2]))+" "+ee(parseFloat(Y.coords[3])):br+=ee(parseFloat(Y.coords[2]))+" "+ee(parseFloat(Y.coords[3]))+" "+ee(parseFloat(Y.coords[4]))+" "+ee(parseFloat(Y.coords[5])),ke(br+="]"),Y.matrix&&ke("/Matrix ["+Y.matrix.toString()+"]"),ke("/Function "+it+" 0 R"),ke("/Extend [true true]"),ke(">>"),ke("endobj")},Ui=function(Y,Pe){var it=lt(),Ot=_t();Pe.push({resourcesOid:it,objectOid:Ot}),Y.objectNumber=Ot;var Gt=[];Gt.push({key:"Type",value:"/Pattern"}),Gt.push({key:"PatternType",value:"1"}),Gt.push({key:"PaintType",value:"1"}),Gt.push({key:"TilingType",value:"1"}),Gt.push({key:"BBox",value:"["+Y.boundingBox.map(ee).join(" ")+"]"}),Gt.push({key:"XStep",value:ee(Y.xStep)}),Gt.push({key:"YStep",value:ee(Y.yStep)}),Gt.push({key:"Resources",value:it+" 0 R"}),Y.matrix&&Gt.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),dn({data:Y.stream,additionalKeyValues:Gt,objectId:Y.objectNumber}),ke("endobj")},Ri=function(Y){for(var Pe in Y.objectNumber=_t(),ke("<<"),Y)switch(Pe){case"opacity":ke("/ca "+Z(Y[Pe]));break;case"stroke-opacity":ke("/CA "+Z(Y[Pe]))}ke(">>"),ke("endobj")},Pa=function(Y){or(Y.resourcesOid,!0),ke("<<"),ke("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Pe in ke("/Font <<"),tt)tt.hasOwnProperty(Pe)&&(_===!1||_===!0&&C.hasOwnProperty(Pe))&&ke("/"+Pe+" "+tt[Pe].objectNumber+" 0 R");ke(">>")})(),(function(){if(Object.keys(kt).length>0){for(var Pe in ke("/Shading <<"),kt)kt.hasOwnProperty(Pe)&&kt[Pe]instanceof Sp&&kt[Pe].objectNumber>=0&&ke("/"+Pe+" "+kt[Pe].objectNumber+" 0 R");Ur.publish("putShadingPatternDict"),ke(">>")}})(),(function(Pe){if(Object.keys(kt).length>0){for(var it in ke("/Pattern <<"),kt)kt.hasOwnProperty(it)&&kt[it]instanceof S.TilingPattern&&kt[it].objectNumber>=0&&kt[it].objectNumber<Pe&&ke("/"+it+" "+kt[it].objectNumber+" 0 R");Ur.publish("putTilingPatternDict"),ke(">>")}})(Y.objectOid),(function(){if(Object.keys(mr).length>0){var Pe;for(Pe in ke("/ExtGState <<"),mr)mr.hasOwnProperty(Pe)&&mr[Pe].objectNumber>=0&&ke("/"+Pe+" "+mr[Pe].objectNumber+" 0 R");Ur.publish("putGStateDict"),ke(">>")}})(),(function(){for(var Pe in ke("/XObject <<"),Jr)Jr.hasOwnProperty(Pe)&&Jr[Pe].objectNumber>=0&&ke("/"+Pe+" "+Jr[Pe].objectNumber+" 0 R");Ur.publish("putXobjectDict"),ke(">>")})(),ke(">>"),ke("endobj")},Vi=function(Y){gt[Y.fontName]=gt[Y.fontName]||{},gt[Y.fontName][Y.fontStyle]=Y.id},Ro=function(Y,Pe,it,Ot,Gt){var br={id:"F"+(Object.keys(tt).length+1).toString(10),postScriptName:Y,fontName:Pe,fontStyle:it,encoding:Ot,isStandardFont:Gt||!1,metadata:{}};return Ur.publish("addFont",{font:br,instance:this}),tt[br.id]=br,Vi(br),br.id},Dn=S.__private__.pdfEscape=S.pdfEscape=function(Y,Pe){return(function(it,Ot){var Gt,br,Pr,hn,bn,yn,Mn,_n,Pi;if(Pr=(Ot=Ot||{}).sourceEncoding||"Unicode",bn=Ot.outputEncoding,(Ot.autoencode||bn)&&tt[Ae].metadata&&tt[Ae].metadata[Pr]&&tt[Ae].metadata[Pr].encoding&&(hn=tt[Ae].metadata[Pr].encoding,!bn&&tt[Ae].encoding&&(bn=tt[Ae].encoding),!bn&&hn.codePages&&(bn=hn.codePages[0]),typeof bn=="string"&&(bn=hn[bn]),bn)){for(Mn=!1,yn=[],Gt=0,br=it.length;Gt<br;Gt++)(_n=bn[it.charCodeAt(Gt)])?yn.push(String.fromCharCode(_n)):yn.push(it[Gt]),yn[Gt].charCodeAt(0)>>8&&(Mn=!0);it=yn.join("")}for(Gt=it.length;Mn===void 0&&Gt!==0;)it.charCodeAt(Gt-1)>>8&&(Mn=!0),Gt--;if(!Mn)return it;for(yn=Ot.noBOM?[]:[254,255],Gt=0,br=it.length;Gt<br;Gt++){if((Pi=(_n=it.charCodeAt(Gt))>>8)>>8)throw new Error("Character at position "+Gt+" of string '"+it+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yn.push(Pi),yn.push(_n-(Pi<<8))}return String.fromCharCode.apply(void 0,yn)})(Y,Pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cn=S.__private__.beginPage=function(Y){zt[++Kr]=[],Rt[Kr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Ki(Kr),dt(zt[Ee])},Xi=function(Y,Pe){var it,Ot,Gt;switch(r=Pe||r,typeof Y=="string"&&(it=k(Y.toLowerCase()),Array.isArray(it)&&(Ot=it[0],Gt=it[1])),Array.isArray(Y)&&(Ot=Y[0]*Be,Gt=Y[1]*Be),isNaN(Ot)&&(Ot=i[0],Gt=i[1]),(Ot>14400||Gt>14400)&&(Fa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ot=Math.min(14400,Ot),Gt=Math.min(14400,Gt)),i=[Ot,Gt],r.substr(0,1)){case"l":Gt>Ot&&(i=[Gt,Ot]);break;case"p":Ot>Gt&&(i=[Gt,Ot])}cn(i),pr(Rn),ke(ws),Na!==0&&ke(Na+" J"),Es!==0&&ke(Es+" j"),Ur.publish("addPage",{pageNumber:Kr})},ia=function(Y){Y>0&&Y<=Kr&&(zt.splice(Y,1),Rt.splice(Y,1),Kr--,Ee>Kr&&(Ee=Kr),this.setPage(Ee))},Ki=function(Y){Y>0&&Y<=Kr&&(Ee=Y)},vi=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return zt.length-1},Yi=function(Y,Pe,it){var Ot,Gt=void 0;return it=it||{},Y=Y!==void 0?Y:tt[Ae].fontName,Pe=Pe!==void 0?Pe:tt[Ae].fontStyle,Ot=Y.toLowerCase(),gt[Ot]!==void 0&&gt[Ot][Pe]!==void 0?Gt=gt[Ot][Pe]:gt[Y]!==void 0&&gt[Y][Pe]!==void 0?Gt=gt[Y][Pe]:it.disableWarning===!1&&Fa.warn("Unable to look up font label for font '"+Y+"', '"+Pe+"'. Refer to getFontList() for available fonts."),Gt||it.noFallback||(Gt=gt.times[Pe])==null&&(Gt=gt.times.normal),Gt},mo=S.__private__.putInfo=function(){var Y=_t(),Pe=function(Ot){return Ot};for(var it in g!==null&&(Pe=ba.encryptor(Y,0)),ke("<<"),ke("/Producer ("+Dn(Pe("jsPDF "+On.version))+")"),pe)pe.hasOwnProperty(it)&&pe[it]&&ke("/"+it.substr(0,1).toUpperCase()+it.substr(1)+" ("+Dn(Pe(pe[it]))+")");ke("/CreationDate ("+Dn(Pe(ce))+")"),ke(">>"),ke("endobj")},xs=S.__private__.putCatalog=function(Y){var Pe=(Y=Y||{}).rootDictionaryObjId||Vr;switch(_t(),ke("<<"),ke("/Type /Catalog"),ke("/Pages "+Pe+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":ke("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ke("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ke("/OpenAction [3 0 R /Fit]");break;case"original":ke("/OpenAction [3 0 R /XYZ null null 1]");break;default:var it=""+Ge;it.substr(it.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&ke("/OpenAction [3 0 R /XYZ null null "+Z(Ge)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":ke("/PageLayout /OneColumn");break;case"single":ke("/PageLayout /SinglePage");break;case"two":case"twoleft":ke("/PageLayout /TwoColumnLeft");break;case"tworight":ke("/PageLayout /TwoColumnRight")}Nt&&ke("/PageMode /"+Nt),Ur.publish("putCatalog"),ke(">>"),ke("endobj")},fa=S.__private__.putTrailer=function(){ke("trailer"),ke("<<"),ke("/Size "+(Ve+1)),ke("/Root "+Ve+" 0 R"),ke("/Info "+(Ve-1)+" 0 R"),g!==null&&ke("/Encrypt "+ba.oid+" 0 R"),ke("/ID [ <"+be+"> <"+be+"> ]"),ke(">>")},Gi=S.__private__.putHeader=function(){ke("%PDF-"+I),ke("%")},Cc=S.__private__.putXRef=function(){var Y="0000000000";ke("xref"),ke("0 "+(Ve+1)),ke("0000000000 65535 f ");for(var Pe=1;Pe<=Ve;Pe++)typeof ht[Pe]=="function"?ke((Y+ht[Pe]()).slice(-10)+" 00000 n "):ht[Pe]!==void 0?ke((Y+ht[Pe]).slice(-10)+" 00000 n "):ke("0000000000 00000 n ")},$s=S.__private__.buildDocument=function(){var Y;Ve=0,xt=0,It=[],ht=[],rt=[],Vr=lt(),Rr=lt(),dt(It),Ur.publish("buildDocument"),Gi(),Pn(),(function(){Ur.publish("putAdditionalObjects");for(var it=0;it<rt.length;it++){var Ot=rt[it];or(Ot.objId,!0),ke(Ot.content),ke("endobj")}Ur.publish("postPutAdditionalObjects")})(),Y=[],(function(){for(var it in tt)tt.hasOwnProperty(it)&&(_===!1||_===!0&&C.hasOwnProperty(it))&&un(tt[it])})(),(function(){var it;for(it in mr)mr.hasOwnProperty(it)&&Ri(mr[it])})(),(function(){for(var it in Jr)Jr.hasOwnProperty(it)&&Wi(Jr[it])})(),(function(it){var Ot;for(Ot in kt)kt.hasOwnProperty(Ot)&&(kt[Ot]instanceof Sp?Zi(kt[Ot]):kt[Ot]instanceof Tg&&Ui(kt[Ot],it))})(Y),Ur.publish("putResources"),Y.forEach(Pa),Pa({resourcesOid:Rr,objectOid:Number.MAX_SAFE_INTEGER}),Ur.publish("postPutResources"),g!==null&&(ba.oid=_t(),ke("<<"),ke("/Filter /Standard"),ke("/V "+ba.v),ke("/R "+ba.r),ke("/U <"+ba.toHexString(ba.U)+">"),ke("/O <"+ba.toHexString(ba.O)+">"),ke("/P "+ba.P),ke(">>"),ke("endobj")),mo(),xs();var Pe=xt;return Cc(),fa(),ke("startxref"),ke(""+Pe),ke("%%EOF"),dt(zt[Ee]),It.join(`
`)},as=S.__private__.getBlob=function(Y){return new Blob([sr(Y)],{type:"application/pdf"})},os=S.output=S.__private__.output=(Ze=function(Y,Pe){switch(typeof(Pe=Pe||{})=="string"?Pe={filename:Pe}:Pe.filename=Pe.filename||"generated.pdf",Y){case void 0:return $s();case"save":S.save(Pe.filename);break;case"arraybuffer":return sr($s());case"blob":return as($s());case"bloburi":case"bloburl":if(ei.URL!==void 0&&typeof ei.URL.createObjectURL=="function")return ei.URL&&ei.URL.createObjectURL(as($s()))||void 0;Fa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var it="",Ot=$s();try{it=IF(Ot)}catch{it=IF(unescape(encodeURIComponent(Ot)))}return"data:application/pdf;filename="+Pe.filename+";base64,"+it;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ei)==="[object Window]"){var Gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",br=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Pe.pdfObjectUrl&&(Gt=Pe.pdfObjectUrl,br="");var Pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Gt+'"'+br+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Pe)+");<\/script></body></html>",hn=ei.open();return hn!==null&&hn.document.write(Pr),hn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ei)==="[object Window]"){var bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Pe.filename+'" width="500px" height="400px" /></body></html>',yn=ei.open();if(yn!==null){yn.document.write(bn);var Mn=this;yn.document.documentElement.querySelector("#pdfViewer").onload=function(){yn.document.title=Pe.filename,yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mn.output("bloburl"))}}return yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ei)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Pe)+'"></iframe></body></html>',Pi=ei.open();if(Pi!==null&&(Pi.document.write(_n),Pi.document.title=Pe.filename),Pi||typeof safari>"u")return Pi;break;case"datauri":case"dataurl":return ei.document.location.href=this.output("datauristring",Pe);default:return null}},Ze.foo=function(){try{return Ze.apply(this,arguments)}catch(it){var Y=it.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var Pe="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+it.message;if(!ei.console)throw new Error(Pe);ei.console.error(Pe,it),ei.alert&&alert(Pe)}},Ze.foo.bar=Ze,Ze.foo),Tl=function(Y){return Array.isArray(Fn)===!0&&Fn.indexOf(Y)>-1};switch(n){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=Tl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Be=n}var ba=null;Je(),ve();var Wl=S.__private__.getPageInfo=S.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[Y].objId,pageNumber:Y,pageContext:Rt[Y]}},Ac=S.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Pe in Rt)if(Rt[Pe].objId===Y)break;return Wl(Pe)},Zl=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:Rt[Ee].objId,pageNumber:Ee,pageContext:Rt[Ee]}};S.addPage=function(){return Xi.apply(this,arguments),this},S.setPage=function(){return Ki.apply(this,arguments),dt.call(this,zt[Ee]),this},S.insertPage=function(Y){return this.addPage(),this.movePage(Ee,Y),this},S.movePage=function(Y,Pe){var it,Ot;if(Y>Pe){it=zt[Y],Ot=Rt[Y];for(var Gt=Y;Gt>Pe;Gt--)zt[Gt]=zt[Gt-1],Rt[Gt]=Rt[Gt-1];zt[Pe]=it,Rt[Pe]=Ot,this.setPage(Pe)}else if(Y<Pe){it=zt[Y],Ot=Rt[Y];for(var br=Y;br<Pe;br++)zt[br]=zt[br+1],Rt[br]=Rt[br+1];zt[Pe]=it,Rt[Pe]=Ot,this.setPage(Pe)}return this},S.deletePage=function(){return ia.apply(this,arguments),this},S.__private__.text=S.text=function(Y,Pe,it,Ot,Gt){var br,Pr,hn,bn,yn,Mn,_n,Pi,_a,Ei=(Ot=Ot||{}).scope||this;if(typeof Y=="number"&&typeof Pe=="number"&&(typeof it=="string"||Array.isArray(it))){var Vn=it;it=Pe,Pe=Y,Y=Vn}if(arguments[3]instanceof Ct==0?(hn=arguments[4],bn=arguments[5],va(_n=arguments[3])==="object"&&_n!==null||(typeof hn=="string"&&(bn=hn,hn=null),typeof _n=="string"&&(bn=_n,_n=null),typeof _n=="number"&&(hn=_n,_n=null),Ot={flags:_n,angle:hn,align:bn})):(J("The transform parameter of text() with a Matrix value"),_a=Gt),isNaN(Pe)||isNaN(it)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return Ei;var Qi,Ia="",As=typeof Ot.lineHeightFactor=="number"?Ot.lineHeightFactor:Li,ol=Ei.internal.scaleFactor;function Ts(gn){return gn=gn.split("	").join(Array(Ot.TabLen||9).join(" ")),Dn(gn,_n)}function Su(gn){for(var Ln,zn=gn.concat(),_i=[],$i=zn.length;$i--;)typeof(Ln=zn.shift())=="string"?_i.push(Ln):Array.isArray(gn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?_i.push(Ln[0]):_i.push([Ln[0],Ln[1],Ln[2]]);return _i}function Ps(gn,Ln){var zn;if(typeof gn=="string")zn=Ln(gn)[0];else if(Array.isArray(gn)){for(var _i,$i,ea=gn.concat(),Va=[],hs=ea.length;hs--;)typeof(_i=ea.shift())=="string"?Va.push(Ln(_i)[0]):Array.isArray(_i)&&typeof _i[0]=="string"&&($i=Ln(_i[0],_i[1],_i[2]),Va.push([$i[0],$i[1],$i[2]]));zn=Va}return zn}var us=!1,Pl=!0;if(typeof Y=="string")us=!0;else if(Array.isArray(Y)){var qs=Y.concat();Pr=[];for(var Go,ni=qs.length;ni--;)(typeof(Go=qs.shift())!="string"||Array.isArray(Go)&&typeof Go[0]!="string")&&(Pl=!1);us=Pl}if(us===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var vo=tr/Ei.internal.scaleFactor,xa=vo*(As-1);switch(Ot.baseline){case"bottom":it-=xa;break;case"top":it+=vo-xa;break;case"hanging":it+=vo-2*xa;break;case"middle":it+=vo/2-xa}if((Mn=Ot.maxWidth||0)>0&&(typeof Y=="string"?Y=Ei.splitTextToSize(Y,Mn):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(gn,Ln){return gn.concat(Ei.splitTextToSize(Ln,Mn))},[]))),br={text:Y,x:Pe,y:it,options:Ot,mutex:{pdfEscape:Dn,activeFontKey:Ae,fonts:tt,activeFontSize:tr}},Ur.publish("preProcessText",br),Y=br.text,hn=(Ot=br.options).angle,_a instanceof Ct==0&&hn&&typeof hn=="number"){hn*=Math.PI/180,Ot.rotationDirection===0&&(hn=-hn),N===B&&(hn=-hn);var bo=Math.cos(hn),Ho=Math.sin(hn);_a=new Ct(bo,Ho,-Ho,bo,0,0)}else hn&&hn instanceof Ct&&(_a=hn);N!==B||_a||(_a=ie),(yn=Ot.charSpace||go)!==void 0&&(Ia+=ee(oe(yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Pi=Ot.horizontalScale)!==void 0&&(Ia+=ee(100*Pi)+` Tz
`),Ot.lang;var wa=-1,Eu=Ot.renderingMode!==void 0?Ot.renderingMode:Ot.stroke,Il=Ei.internal.getCurrentPageInfo().pageContext;switch(Eu){case 0:case!1:case"fill":wa=0;break;case 1:case!0:case"stroke":wa=1;break;case 2:case"fillThenStroke":wa=2;break;case 3:case"invisible":wa=3;break;case 4:case"fillAndAddForClipping":wa=4;break;case 5:case"strokeAndAddPathForClipping":wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":wa=6;break;case 7:case"addToPathForClipping":wa=7}var cs=Il.usedRenderingMode!==void 0?Il.usedRenderingMode:-1;wa!==-1?Ia+=wa+` Tr
`:cs!==-1&&(Ia+=`0 Tr
`),wa!==-1&&(Il.usedRenderingMode=wa),bn=Ot.align||"left";var ha,Wo=tr*As,Ku=Ei.internal.pageSize.getWidth(),Cu=tt[Ae];yn=Ot.charSpace||go,Mn=Ot.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},Ot.flags);var Us=[],Ml=function(gn){return Ei.getStringUnitWidth(gn,{font:Cu,charSpace:yn,fontSize:tr,doKerning:!1})*tr/ol};if(Object.prototype.toString.call(Y)==="[object Array]"){var to;Pr=Su(Y),bn!=="left"&&(ha=Pr.map(Ml));var Ba,Kl=0;if(bn==="right"){Pe-=ha[0],Y=[],ni=Pr.length;for(var da=0;da<ni;da++)da===0?(Ba=di(Pe),to=Ji(it)):(Ba=oe(Kl-ha[da]),to=-Wo),Y.push([Pr[da],Ba,to]),Kl=ha[da]}else if(bn==="center"){Pe-=ha[0]/2,Y=[],ni=Pr.length;for(var Ol=0;Ol<ni;Ol++)Ol===0?(Ba=di(Pe),to=Ji(it)):(Ba=oe((Kl-ha[Ol])/2),to=-Wo),Y.push([Pr[Ol],Ba,to]),Kl=ha[Ol]}else if(bn==="left"){Y=[],ni=Pr.length;for(var fs=0;fs<ni;fs++)Y.push(Pr[fs])}else if(bn==="justify"&&Cu.encoding==="Identity-H"){Y=[],ni=Pr.length,Mn=Mn!==0?Mn:Ku;for(var Zo=0,Sa=0;Sa<ni;Sa++)if(to=Sa===0?Ji(it):-Wo,Ba=Sa===0?di(Pe):Zo,Sa<ni-1){var Rl=oe((Mn-ha[Sa])/(Pr[Sa].split(" ").length-1)),Is=Pr[Sa].split(" ");Y.push([Is[0]+" ",Ba,to]),Zo=0;for(var Vs=1;Vs<Is.length;Vs++){var Yl=(Ml(Is[Vs-1]+" "+Is[Vs])-Ml(Is[Vs]))*ol+Rl;Vs==Is.length-1?Y.push([Is[Vs],Yl,0]):Y.push([Is[Vs]+" ",Yl,0]),Zo-=Yl}}else Y.push([Pr[Sa],Ba,to]);Y.push(["",Zo,0])}else{if(bn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],ni=Pr.length,Mn=Mn!==0?Mn:Ku,Sa=0;Sa<ni;Sa++)to=Sa===0?Ji(it):-Wo,Ba=Sa===0?di(Pe):0,Sa<ni-1?Us.push(ee(oe((Mn-ha[Sa])/(Pr[Sa].split(" ").length-1)))):Us.push(0),Y.push([Pr[Sa],Ba,to])}}(typeof Ot.R2L=="boolean"?Ot.R2L:ut)===!0&&(Y=Ps(Y,function(gn,Ln,zn){return[gn.split("").reverse().join(""),Ln,zn]})),br={text:Y,x:Pe,y:it,options:Ot,mutex:{pdfEscape:Dn,activeFontKey:Ae,fonts:tt,activeFontSize:tr}},Ur.publish("postProcessText",br),Y=br.text,Qi=br.mutex.isHex||!1;var sl=tt[Ae].encoding;sl!=="WinAnsiEncoding"&&sl!=="StandardEncoding"||(Y=Ps(Y,function(gn,Ln,zn){return[Ts(gn),Ln,zn]})),Pr=Su(Y),Y=[];for(var Gs,Ll,Jl,qt=Array.isArray(Pr[0])?1:0,ar="",qr=function(gn,Ln,zn){var _i="";return zn instanceof Ct?(zn=typeof Ot.angle=="number"?Wt(zn,new Ct(1,0,0,1,gn,Ln)):Wt(new Ct(1,0,0,1,gn,Ln),zn),N===B&&(zn=Wt(new Ct(1,0,0,-1,0,0),zn)),_i=zn.join(" ")+` Tm
`):_i=ee(gn)+" "+ee(Ln)+` Td
`,_i},sn=0;sn<Pr.length;sn++){switch(ar="",qt){case 1:Jl=(Qi?"<":"(")+Pr[sn][0]+(Qi?">":")"),Gs=parseFloat(Pr[sn][1]),Ll=parseFloat(Pr[sn][2]);break;case 0:Jl=(Qi?"<":"(")+Pr[sn]+(Qi?">":")"),Gs=di(Pe),Ll=Ji(it)}Us!==void 0&&Us[sn]!==void 0&&(ar=Us[sn]+` Tw
`),sn===0?Y.push(ar+qr(Gs,Ll,_a)+Jl):qt===0?Y.push(ar+Jl):qt===1&&Y.push(ar+qr(Gs,Ll,_a)+Jl)}Y=qt===0?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var ci=`BT
/`;return ci+=Ae+" "+tr+` Tf
`,ci+=ee(tr*As)+` TL
`,ci+=ui+`
`,ci+=Ia,ci+=Y,ke(ci+="ET"),C[Ae]=!0,Ei};var U=S.__private__.clip=S.clip=function(Y){return ke(Y==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return U("evenodd")},S.__private__.discardPath=S.discardPath=function(){return ke("n"),this};var ne=S.__private__.isValidStyle=function(Y){var Pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(Pe=!0),Pe};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(Y){return ne(Y)&&(d=Y),this};var De=S.__private__.getStyle=S.getStyle=function(Y){var Pe=d;switch(Y){case"D":case"S":Pe="S";break;case"F":Pe="f";break;case"FD":case"DF":Pe="B";break;case"f":case"f*":case"B":case"B*":Pe=Y}return Pe},mt=S.close=function(){return ke("h"),this};S.stroke=function(){return ke("S"),this},S.fill=function(Y){return Mt("f",Y),this},S.fillEvenOdd=function(Y){return Mt("f*",Y),this},S.fillStroke=function(Y){return Mt("B",Y),this},S.fillStrokeEvenOdd=function(Y){return Mt("B*",Y),this};var Mt=function(Y,Pe){va(Pe)==="object"?Tr(Pe,Y):ke(Y)},Dt=function(Y){Y===null||N===B&&Y===void 0||(Y=De(Y),ke(Y))};function Ut(Y,Pe,it,Ot,Gt){var br=new Tg(Pe||this.boundingBox,it||this.xStep,Ot||this.yStep,this.gState,Gt||this.matrix);br.stream=this.stream;var Pr=Y+"$$"+this.cloneIndex+++"$$";return _e(Pr,br),br}var Tr=function(Y,Pe){var it=cr[Y.key],Ot=kt[it];if(Ot instanceof Sp)ke("q"),ke(Mr(Pe)),Ot.gState&&S.setGState(Ot.gState),ke(Y.matrix.toString()+" cm"),ke("/"+it+" sh"),ke("Q");else if(Ot instanceof Tg){var Gt=new Ct(1,0,0,-1,0,eo());Y.matrix&&(Gt=Gt.multiply(Y.matrix||ie),it=Ut.call(Ot,Y.key,Y.boundingBox,Y.xStep,Y.yStep,Gt).id),ke("q"),ke("/Pattern cs"),ke("/"+it+" scn"),Ot.gState&&S.setGState(Ot.gState),ke(Pe),ke("Q")}},Mr=function(Y){switch(Y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fr=S.moveTo=function(Y,Pe){return ke(ee(oe(Y))+" "+ee(ue(Pe))+" m"),this},Nr=S.lineTo=function(Y,Pe){return ke(ee(oe(Y))+" "+ee(ue(Pe))+" l"),this},hr=S.curveTo=function(Y,Pe,it,Ot,Gt,br){return ke([ee(oe(Y)),ee(ue(Pe)),ee(oe(it)),ee(ue(Ot)),ee(oe(Gt)),ee(ue(br)),"c"].join(" ")),this};S.__private__.line=S.line=function(Y,Pe,it,Ot,Gt){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||isNaN(Ot)||!ne(Gt))throw new Error("Invalid arguments passed to jsPDF.line");return N===F?this.lines([[it-Y,Ot-Pe]],Y,Pe,[1,1],Gt||"S"):this.lines([[it-Y,Ot-Pe]],Y,Pe,[1,1]).stroke()},S.__private__.lines=S.lines=function(Y,Pe,it,Ot,Gt,br){var Pr,hn,bn,yn,Mn,_n,Pi,_a,Ei,Vn,Qi,Ia;if(typeof Y=="number"&&(Ia=it,it=Pe,Pe=Y,Y=Ia),Ot=Ot||[1,1],br=br||!1,isNaN(Pe)||isNaN(it)||!Array.isArray(Y)||!Array.isArray(Ot)||!ne(Gt)||typeof br!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fr(Pe,it),Pr=Ot[0],hn=Ot[1],yn=Y.length,Vn=Pe,Qi=it,bn=0;bn<yn;bn++)(Mn=Y[bn]).length===2?(Vn=Mn[0]*Pr+Vn,Qi=Mn[1]*hn+Qi,Nr(Vn,Qi)):(_n=Mn[0]*Pr+Vn,Pi=Mn[1]*hn+Qi,_a=Mn[2]*Pr+Vn,Ei=Mn[3]*hn+Qi,Vn=Mn[4]*Pr+Vn,Qi=Mn[5]*hn+Qi,hr(_n,Pi,_a,Ei,Vn,Qi));return br&&mt(),Dt(Gt),this},S.path=function(Y){for(var Pe=0;Pe<Y.length;Pe++){var it=Y[Pe],Ot=it.c;switch(it.op){case"m":Fr(Ot[0],Ot[1]);break;case"l":Nr(Ot[0],Ot[1]);break;case"c":hr.apply(this,Ot);break;case"h":mt()}}return this},S.__private__.rect=S.rect=function(Y,Pe,it,Ot,Gt){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||isNaN(Ot)||!ne(Gt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===F&&(Ot=-Ot),ke([ee(oe(Y)),ee(ue(Pe)),ee(oe(it)),ee(oe(Ot)),"re"].join(" ")),Dt(Gt),this},S.__private__.triangle=S.triangle=function(Y,Pe,it,Ot,Gt,br,Pr){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||isNaN(Ot)||isNaN(Gt)||isNaN(br)||!ne(Pr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[it-Y,Ot-Pe],[Gt-it,br-Ot],[Y-Gt,Pe-br]],Y,Pe,[1,1],Pr,!0),this},S.__private__.roundedRect=S.roundedRect=function(Y,Pe,it,Ot,Gt,br,Pr){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||isNaN(Ot)||isNaN(Gt)||isNaN(br)||!ne(Pr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var hn=4/3*(Math.SQRT2-1);return Gt=Math.min(Gt,.5*it),br=Math.min(br,.5*Ot),this.lines([[it-2*Gt,0],[Gt*hn,0,Gt,br-br*hn,Gt,br],[0,Ot-2*br],[0,br*hn,-Gt*hn,br,-Gt,br],[2*Gt-it,0],[-Gt*hn,0,-Gt,-br*hn,-Gt,-br],[0,2*br-Ot],[0,-br*hn,Gt*hn,-br,Gt,-br]],Y+Gt,Pe,[1,1],Pr,!0),this},S.__private__.ellipse=S.ellipse=function(Y,Pe,it,Ot,Gt){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||isNaN(Ot)||!ne(Gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var br=4/3*(Math.SQRT2-1)*it,Pr=4/3*(Math.SQRT2-1)*Ot;return Fr(Y+it,Pe),hr(Y+it,Pe-Pr,Y+br,Pe-Ot,Y,Pe-Ot),hr(Y-br,Pe-Ot,Y-it,Pe-Pr,Y-it,Pe),hr(Y-it,Pe+Pr,Y-br,Pe+Ot,Y,Pe+Ot),hr(Y+br,Pe+Ot,Y+it,Pe+Pr,Y+it,Pe),Dt(Gt),this},S.__private__.circle=S.circle=function(Y,Pe,it,Ot){if(isNaN(Y)||isNaN(Pe)||isNaN(it)||!ne(Ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,Pe,it,it,Ot)},S.setFont=function(Y,Pe,it){return it&&(Pe=X(Pe,it)),Ae=Yi(Y,Pe,{disableWarning:!1}),this};var In=S.__private__.getFont=S.getFont=function(){return tt[Yi.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var Y,Pe,it={};for(Y in gt)if(gt.hasOwnProperty(Y))for(Pe in it[Y]=[],gt[Y])gt[Y].hasOwnProperty(Pe)&&it[Y].push(Pe);return it},S.addFont=function(Y,Pe,it,Ot,Gt){var br=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&br.indexOf(arguments[3])!==-1?Gt=arguments[3]:arguments[3]&&br.indexOf(arguments[3])==-1&&(it=X(it,Ot)),Ro.call(this,Y,Pe,it,Gt=Gt||"Identity-H")};var Li,Rn=e.lineWidth||.200025,tn=S.__private__.getLineWidth=S.getLineWidth=function(){return Rn},pr=S.__private__.setLineWidth=S.setLineWidth=function(Y){return Rn=Y,ke(ee(oe(Y))+" w"),this};S.__private__.setLineDash=On.API.setLineDash=On.API.setLineDashPattern=function(Y,Pe){if(Y=Y||[],Pe=Pe||0,isNaN(Pe)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(it){return ee(oe(it))}).join(" "),Pe=ee(oe(Pe)),ke("["+Y+"] "+Pe+" d"),this};var $r=S.__private__.getLineHeight=S.getLineHeight=function(){return tr*Li};S.__private__.getLineHeight=S.getLineHeight=function(){return tr*Li};var Wr=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(Li=Y),this},jn=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return Li};Wr(e.lineHeight);var di=S.__private__.getHorizontalCoordinate=function(Y){return oe(Y)},Ji=S.__private__.getVerticalCoordinate=function(Y){return N===B?Y:Rt[Ee].mediaBox.topRightY-Rt[Ee].mediaBox.bottomLeftY-oe(Y)},Lo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(Y){return ee(di(Y))},Jn=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(Y){return ee(Ji(Y))},ws=e.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return lr(ws)},S.__private__.setStrokeColor=S.setDrawColor=function(Y,Pe,it,Ot){return ws=kr({ch1:Y,ch2:Pe,ch3:it,ch4:Ot,pdfColorType:"draw",precision:2}),ke(ws),this};var Ss=e.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return lr(Ss)},S.__private__.setFillColor=S.setFillColor=function(Y,Pe,it,Ot){return Ss=kr({ch1:Y,ch2:Pe,ch3:it,ch4:Ot,pdfColorType:"fill",precision:2}),ke(Ss),this};var ui=e.textColor||"0 g",ss=S.__private__.getTextColor=S.getTextColor=function(){return lr(ui)};S.__private__.setTextColor=S.setTextColor=function(Y,Pe,it,Ot){return ui=kr({ch1:Y,ch2:Pe,ch3:it,ch4:Ot,pdfColorType:"text",precision:3}),this};var go=e.charSpace,xu=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat(go||0)};S.__private__.setCharSpace=S.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return go=Y,this};var Na=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(Y){var Pe=S.CapJoinStyles[Y];if(Pe===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Na=Pe,ke(Pe+" J"),this};var Es=0;S.__private__.setLineJoin=S.setLineJoin=function(Y){var Pe=S.CapJoinStyles[Y];if(Pe===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Es=Pe,ke(Pe+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ke(ee(oe(Y))+" M"),this},S.GState=Y1,S.setGState=function(Y){(Y=typeof Y=="string"?mr[Zr[Y]]:yo(null,Y)).equals(mn)||(ke("/"+Y.id+" gs"),mn=Y)};var yo=function(Y,Pe){if(!Y||!Zr[Y]){var it=!1;for(var Ot in mr)if(mr.hasOwnProperty(Ot)&&mr[Ot].equals(Pe)){it=!0;break}if(it)Pe=mr[Ot];else{var Gt="GS"+(Object.keys(mr).length+1).toString(10);mr[Gt]=Pe,Pe.id=Gt}return Y&&(Zr[Y]=Pe.id),Ur.publish("addGState",Pe),Pe}};S.addGState=function(Y,Pe){return yo(Y,Pe),this},S.saveGraphicsState=function(){return ke("q"),$t.push({key:Ae,size:tr,color:ui}),this},S.restoreGraphicsState=function(){ke("Q");var Y=$t.pop();return Ae=Y.key,tr=Y.size,ui=Y.color,mn=null,this},S.setCurrentTransformationMatrix=function(Y){return ke(Y.toString()+" cm"),this},S.comment=function(Y){return ke("#"+Y),this};var Xl=function(Y,Pe){var it=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return it},set:function(br){isNaN(br)||(it=parseFloat(br))}});var Ot=Pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ot},set:function(br){isNaN(br)||(Ot=parseFloat(br))}});var Gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Gt},set:function(br){Gt=br.toString()}}),this},wu=function(Y,Pe,it,Ot){Xl.call(this,Y,Pe),this.type="rect";var Gt=it||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Gt},set:function(Pr){isNaN(Pr)||(Gt=parseFloat(Pr))}});var br=Ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return br},set:function(Pr){isNaN(Pr)||(br=parseFloat(Pr))}}),this},Cs=function(){this.page=Kr,this.currentPage=Ee,this.pages=zt.slice(0),this.pagesContext=Rt.slice(0),this.x=Ne,this.y=Tt,this.matrix=bt,this.width=Xn(Ee),this.height=eo(Ee),this.outputDestination=Ft,this.id="",this.objectNumber=-1};Cs.prototype.restore=function(){Kr=this.page,Ee=this.currentPage,Rt=this.pagesContext,zt=this.pages,Ne=this.x,Tt=this.y,bt=this.matrix,kn(Ee,this.width),Nn(Ee,this.height),Ft=this.outputDestination};var bi=function(Y,Pe,it,Ot,Gt){wt.push(new Cs),Kr=Ee=0,zt=[],Ne=Y,Tt=Pe,bt=Gt,cn([it,Ot])};for(var ls in S.beginFormObject=function(Y,Pe,it,Ot,Gt){return bi(Y,Pe,it,Ot,Gt),this},S.endFormObject=function(Y){return(function(Pe){if(jr[Pe])wt.pop().restore();else{var it=new Cs,Ot="Xo"+(Object.keys(Jr).length+1).toString(10);it.id=Ot,jr[Pe]=Ot,Jr[Ot]=it,Ur.publish("addFormObject",it),wt.pop().restore()}})(Y),this},S.doFormObject=function(Y,Pe){var it=Jr[jr[Y]];return ke("q"),ke(Pe.toString()+" cm"),ke("/"+it.id+" Do"),ke("Q"),this},S.getFormObject=function(Y){var Pe=Jr[jr[Y]];return{x:Pe.x,y:Pe.y,width:Pe.width,height:Pe.height,matrix:Pe.matrix}},S.save=function(Y,Pe){return Y=Y||"generated.pdf",(Pe=Pe||{}).returnPromise=Pe.returnPromise||!1,Pe.returnPromise===!1?(_p(as($s()),Y),typeof _p.unload=="function"&&ei.setTimeout&&setTimeout(_p.unload,911),this):new Promise(function(it,Ot){try{var Gt=_p(as($s()),Y);typeof _p.unload=="function"&&ei.setTimeout&&setTimeout(_p.unload,911),it(Gt)}catch(br){Ot(br.message)}})},On.API)On.API.hasOwnProperty(ls)&&(ls==="events"&&On.API.events.length?(function(Y,Pe){var it,Ot,Gt;for(Gt=Pe.length-1;Gt!==-1;Gt--)it=Pe[Gt][0],Ot=Pe[Gt][1],Y.subscribe.apply(Y,[it].concat(typeof Ot=="function"?[Ot]:Ot))})(Ur,On.API.events):S[ls]=On.API[ls]);var Xn=S.getPageWidth=function(Y){return(Rt[Y=Y||Ee].mediaBox.topRightX-Rt[Y].mediaBox.bottomLeftX)/Be},kn=S.setPageWidth=function(Y,Pe){Rt[Y].mediaBox.topRightX=Pe*Be+Rt[Y].mediaBox.bottomLeftX},eo=S.getPageHeight=function(Y){return(Rt[Y=Y||Ee].mediaBox.topRightY-Rt[Y].mediaBox.bottomLeftY)/Be},Nn=S.setPageHeight=function(Y,Pe){Rt[Y].mediaBox.topRightY=Pe*Be+Rt[Y].mediaBox.bottomLeftY};return S.internal={pdfEscape:Dn,getStyle:De,getFont:In,getFontSize:nt,getCharSpace:xu,getTextColor:ss,getLineHeight:$r,getLineHeightFactor:jn,getLineWidth:tn,write:fr,getHorizontalCoordinate:di,getVerticalCoordinate:Ji,getCoordinateString:Lo,getVerticalCoordinateString:Jn,collections:{},newObject:_t,newAdditionalObject:Ar,newObjectDeferred:lt,newObjectDeferredBegin:or,getFilters:Yr,putStream:dn,events:Ur,scaleFactor:Be,pageSize:{getWidth:function(){return Xn(Ee)},setWidth:function(Y){kn(Ee,Y)},getHeight:function(){return eo(Ee)},setHeight:function(Y){Nn(Ee,Y)}},encryptionOptions:g,encryption:ba,getEncryptor:function(Y){return g!==null?ba.encryptor(Y,0):function(Pe){return Pe}},output:os,getNumberOfPages:vi,pages:zt,out:ke,f2:Z,f3:H,getPageInfo:Wl,getPageInfoByObjId:Ac,getCurrentPageInfo:Zl,getPDFVersion:O,Point:Xl,Rectangle:wu,Matrix:Ct,hasHotfix:Tl},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return Xn(Ee)},set:function(Y){kn(Ee,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return eo(Ee)},set:function(Y){Nn(Ee,Y)},enumerable:!0,configurable:!0}),(function(Y){for(var Pe=0,it=xr.length;Pe<it;Pe++){var Ot=Ro.call(this,Y[Pe][0],Y[Pe][1],Y[Pe][2],xr[Pe][3],!0);_===!1&&(C[Ot]=!0);var Gt=Y[Pe][0].split("-");Vi({id:Ot,fontName:Gt[0],fontStyle:Gt[1]||""})}Ur.publish("addFonts",{fonts:tt,dictionary:gt})}).call(S,xr),Ae="F1",Xi(i,r),Ur.publish("initialized"),S}ag.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ag.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ag.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ag.prototype.processOwnerPassword=function(e,t){return a3(i3(t).substr(0,5),e)},ag.prototype.encryptor=function(e,t){var r=i3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return a3(r,n)}},Y1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||va(e)!==va(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},On.API={events:[]},On.version="3.0.2";var Po=On.API,zM=1,rm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ai=function(e){return e.toFixed(2)},ld=function(e){return e.toFixed(5)};Po.__acroform__={};var yu=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},LF=function(e){return e*zM},Tf=function(e){var t=new mV,r=En.internal.getHeight(e)||0,n=En.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ai(n)),Number(ai(r))],t},_fe=Po.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},xfe=Po.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},wfe=Po.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},No=Po.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wfe(e,t-1)},Bo=Po.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _fe(e,t-1)},jo=Po.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xfe(e,t-1)},Sfe=Po.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],s=e[1],u=e[2],a=e[3],p={};return p.lowerLeft_X=r(i)||0,p.lowerLeft_Y=n(s+a)||0,p.upperRight_X=r(i+u)||0,p.upperRight_Y=n(s)||0,[Number(ai(p.lowerLeft_X)),Number(ai(p.lowerLeft_Y)),Number(ai(p.upperRight_X)),Number(ai(p.upperRight_Y))]},Efe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=o3(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+ai(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Tf(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},o3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(Z){return Z.split(`
`)}):i.map(function(Z){return[Z]});var s=r,u=En.internal.getHeight(e)||0;u=u<0?-u:u;var a=En.internal.getWidth(e)||0;a=a<0?-a:a;var p=function(Z,H,oe){if(Z+1<i.length){var ue=H+" "+i[Z+1][0];return D_(ue,e,oe).width<=a-4}return!1};s++;e:for(;s>0;){t="",s--;var d,g,_=D_("3",e,s).height,C=e.multiline?u-s:(u-_)/2,S=C+=2,I=0,O=0,P=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+D_(t,e,s=12).width+", FieldWidth:"+a+`
`;break}for(var k="",F=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var N=!1;if(i[B].length!==1&&P!==i[B].length-1){if((_+2)*(F+2)+2>u)continue e;k+=i[B][P],N=!0,O=B,B--}else{k=(k+=i[B][P]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var G=parseInt(B),$=p(G,k,s),X=B>=i.length-1;if($&&!X){k+=" ",P=0;continue}if($||X){if(X)O=G;else if(e.multiline&&(_+2)*(F+2)+2>u)continue e}else{if(!e.multiline||(_+2)*(F+2)+2>u)continue e;O=G}}for(var ee="",J=I;J<=O;J++){var le=i[J];if(e.multiline){if(J===O){ee+=le[P]+" ",P=(P+1)%le.length;continue}if(J===I){ee+=le[le.length-1]+" ";continue}}ee+=le[0]+" "}switch(ee=ee.substr(ee.length-1)==" "?ee.substr(0,ee.length-1):ee,g=D_(ee,e,s).width,e.textAlign){case"right":d=a-g-2;break;case"center":d=(a-g)/2;break;default:d=2}t+=ai(d)+" "+ai(S)+` Td
`,t+="("+rm(ee)+`) Tj
`,t+=-ai(d)+` 0 Td
`,S=-(s+2),g=0,I=N?O:O+1,F++,k=""}break}return n.text=t,n.fontSize=s,n},D_=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},Cfe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Afe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Tfe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(rf.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Cfe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zM=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new gV,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&Afe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var s=!n;for(var u in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(u)){var a=n[u],p=[],d=a.Rect;if(a.Rect&&(a.Rect=Sfe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=En.createDefaultAppearanceStream(a),va(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(p=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var g=Efe(a);p.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(a.appearanceStreamContent){var _="";for(var C in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(C)){var S=a.appearanceStreamContent[C];if(_+="/"+C+" ",_+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var u in S)if(S.hasOwnProperty(u)){var I=S[u];typeof I=="function"&&(I=I.call(i,a)),_+="/"+u+" "+I+" ",i.internal.acroformPlugin.xForms.indexOf(I)>=0||i.internal.acroformPlugin.xForms.push(I)}}else typeof(I=S)=="function"&&(I=I.call(i,a)),_+="/"+u+" "+I,i.internal.acroformPlugin.xForms.indexOf(I)>=0||i.internal.acroformPlugin.xForms.push(I);_+=">>"}p.push({key:"AP",value:`<<
`+_+">>"})}i.internal.putStream({additionalKeyValues:p,objectId:a.objId}),i.internal.out("endobj")}s&&(function(O,P){for(var k in O)if(O.hasOwnProperty(k)){var F=k,B=O[k];P.internal.newObjectDeferredBegin(B.objId,!0),va(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete O[F]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},pV=Po.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(u){return u};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),va(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+rm(n(e[s].toString()))+")"):i+=e[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},uS=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+rm(n(e))+")"},kf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};kf.prototype.toString=function(){return this.objId+" 0 R"},kf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},kf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:pV(i,this.objId,this.scope)}):i instanceof kf?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var mV=function(){kf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};yu(mV,kf);var gV=function(){kf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+rm(r(e))+")"}},set:function(r){e=r}})};yu(gV,kf);var rf=function e(){kf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');t=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!No(t,3)},set:function(k){k?this.F=Bo(t,3):this.F=jo(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof J1)return;s="FieldObject"+e.FieldNum++}var k=function(F){return F};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+rm(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/zM:d},set:function(k){d=k}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(k){g=k}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof J1||this instanceof Bp))return uS(_,this.objId,this.scope)},set:function(k){k=k.toString(),_=k}});var C=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof zs==0?uS(C,this.objId,this.scope):C},set:function(k){k=k.toString(),C=this instanceof zs==0?k.substr(0,1)==="("?Zm(k.substr(1,k.length-2)):Zm(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs==1?Zm(C.substr(1,C.length-1)):C},set:function(k){k=k.toString(),C=this instanceof zs==1?"/"+k:k}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof zs==0?uS(S,this.objId,this.scope):S},set:function(k){k=k.toString(),S=this instanceof zs==0?k.substr(0,1)==="("?Zm(k.substr(1,k.length-2)):Zm(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs==1?Zm(S.substr(1,S.length-1)):S},set:function(k){k=k.toString(),S=this instanceof zs==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(k){k=!!k,O=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(k){I=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,1)},set:function(k){k?this.Ff=Bo(this.Ff,1):this.Ff=jo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,2)},set:function(k){k?this.Ff=Bo(this.Ff,2):this.Ff=jo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,3)},set:function(k){k?this.Ff=Bo(this.Ff,3):this.Ff=jo(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');P=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(P){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};yu(rf,kf);var kg=function(){rf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return pV(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(s,u,a){a||(a=1);for(var p,d=[];p=u.exec(s);)d.push(p[a]);return d})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,18)},set:function(r){r?this.Ff=Bo(this.Ff,18):this.Ff=jo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Bo(this.Ff,19):this.Ff=jo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,20)},set:function(r){r?(this.Ff=Bo(this.Ff,20),t.sort()):this.Ff=jo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,22)},set:function(r){r?this.Ff=Bo(this.Ff,22):this.Ff=jo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,23)},set:function(r){r?this.Ff=Bo(this.Ff,23):this.Ff=jo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,27)},set:function(r){r?this.Ff=Bo(this.Ff,27):this.Ff=jo(this.Ff,27)}}),this.hasAppearanceStream=!1};yu(kg,rf);var Fg=function(){kg.call(this),this.fontName="helvetica",this.combo=!1};yu(Fg,kg);var Ng=function(){Fg.call(this),this.combo=!0};yu(Ng,Fg);var b1=function(){Ng.call(this),this.edit=!0};yu(b1,Ng);var zs=function(){rf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,15)},set:function(r){r?this.Ff=Bo(this.Ff,15):this.Ff=jo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,16)},set:function(r){r?this.Ff=Bo(this.Ff,16):this.Ff=jo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,17)},set:function(r){r?this.Ff=Bo(this.Ff,17):this.Ff=jo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,26)},set:function(r){r?this.Ff=Bo(this.Ff,26):this.Ff=jo(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+rm(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){va(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};yu(zs,rf);var _1=function(){zs.call(this),this.pushButton=!0};yu(_1,zs);var Bg=function(){zs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};yu(Bg,zs);var J1=function(){var e,t;rf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,u=[];for(s in u.push("<<"),n)u.push("/"+s+" ("+rm(i(n[s]))+")");return u.push(">>"),u.join(`
`)},set:function(i){va(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=En.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yu(J1,rf),Bg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Bg.prototype.createOption=function(e){var t=new J1;return t.Parent=this,t.optionName=e,this.Kids.push(t),Pfe.call(this.scope,t),t};var x1=function(){zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=En.CheckBox.createAppearanceStream()};yu(x1,zs);var Bp=function(){rf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,13)},set:function(t){t?this.Ff=Bo(this.Ff,13):this.Ff=jo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,21)},set:function(t){t?this.Ff=Bo(this.Ff,21):this.Ff=jo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,23)},set:function(t){t?this.Ff=Bo(this.Ff,23):this.Ff=jo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,24)},set:function(t){t?this.Ff=Bo(this.Ff,24):this.Ff=jo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,25)},set:function(t){t?this.Ff=Bo(this.Ff,25):this.Ff=jo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,26)},set:function(t){t?this.Ff=Bo(this.Ff,26):this.Ff=jo(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yu(Bp,rf);var w1=function(){Bp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!No(this.Ff,14)},set:function(e){e?this.Ff=Bo(this.Ff,14):this.Ff=jo(this.Ff,14)}}),this.password=!0};yu(w1,Bp);var En={CheckBox:{createAppearanceStream:function(){return{N:{On:En.CheckBox.YesNormal},D:{On:En.CheckBox.YesPushDown,Off:En.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=o3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ai(En.internal.getWidth(e))+" "+ai(En.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ai(s.fontSize)+" Tf "+i),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Tf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],s=En.internal.getHeight(e),u=En.internal.getWidth(e),a=o3(e,e.caption);return i.push("1 g"),i.push("0 0 "+ai(u)+" "+ai(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ai(u-1)+" "+ai(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+ai(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ai(En.internal.getWidth(e))+" "+ai(En.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:En.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=En.RadioButton.Circle.YesNormal,t.D[e]=En.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Tf(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=En.internal.Bezier_C,s=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ld(En.internal.getWidth(e)/2)+" "+ld(En.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*En.internal.Bezier_C).toFixed(5)),u=Number((n*En.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ld(En.internal.getWidth(e)/2)+" "+ld(En.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ld(En.internal.getWidth(e)/2)+" "+ld(En.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*En.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ld(En.internal.getWidth(e)/2)+" "+ld(En.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:En.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=En.RadioButton.Cross.YesNormal,t.D[e]=En.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Tf(e);t.scope=e.scope;var r=[],n=En.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ai(En.internal.getWidth(e)-2)+" "+ai(En.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ai(n.x1.x)+" "+ai(n.x1.y)+" m"),r.push(ai(n.x2.x)+" "+ai(n.x2.y)+" l"),r.push(ai(n.x4.x)+" "+ai(n.x4.y)+" m"),r.push(ai(n.x3.x)+" "+ai(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=En.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ai(En.internal.getWidth(e))+" "+ai(En.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ai(En.internal.getWidth(e)-2)+" "+ai(En.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ai(r.x1.x)+" "+ai(r.x1.y)+" m"),n.push(ai(r.x2.x)+" "+ai(r.x2.y)+" l"),n.push(ai(r.x4.x)+" "+ai(r.x4.y)+" m"),n.push(ai(r.x3.x)+" "+ai(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Tf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ai(En.internal.getWidth(e))+" "+ai(En.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};En.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=En.internal.getWidth(e),r=En.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},En.internal.getWidth=function(e){var t=0;return va(e)==="object"&&(t=LF(e.Rect[2])),t},En.internal.getHeight=function(e){var t=0;return va(e)==="object"&&(t=LF(e.Rect[3])),t};var Pfe=Po.addField=function(e){if(Tfe(this,e),!(e instanceof rf))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=kg,Po.AcroFormListBox=Fg,Po.AcroFormComboBox=Ng,Po.AcroFormEditBox=b1,Po.AcroFormButton=zs,Po.AcroFormPushButton=_1,Po.AcroFormRadioButton=Bg,Po.AcroFormCheckBox=x1,Po.AcroFormTextField=Bp,Po.AcroFormPasswordField=w1,Po.AcroFormAppearance=En,Po.AcroForm={ChoiceField:kg,ListBox:Fg,ComboBox:Ng,EditBox:b1,Button:zs,PushButton:_1,RadioButton:Bg,CheckBox:x1,TextField:Bp,PasswordField:w1,Appearance:En},On.AcroForm={ChoiceField:kg,ListBox:Fg,ComboBox:Ng,EditBox:b1,Button:zs,PushButton:_1,RadioButton:Bg,CheckBox:x1,TextField:Bp,PasswordField:w1,Appearance:En};On.AcroForm;function yV(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(Z,H){var oe,ue,ce,be,Te,ve=r;if((H=H||r)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if($(Z))for(Te in n)for(ce=n[Te],oe=0;oe<ce.length;oe+=1){for(be=!0,ue=0;ue<ce[oe].length;ue+=1)if(ce[oe][ue]!==void 0&&ce[oe][ue]!==Z[ue]){be=!1;break}if(be===!0){ve=Te;break}}else for(Te in n)for(ce=n[Te],oe=0;oe<ce.length;oe+=1){for(be=!0,ue=0;ue<ce[oe].length;ue+=1)if(ce[oe][ue]!==void 0&&ce[oe][ue]!==Z.charCodeAt(ue)){be=!1;break}if(be===!0){ve=Te;break}}return ve===r&&H!==r&&(ve=H),ve},s=function Z(H){for(var oe=this.internal.write,ue=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var be=[];if(be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Image"}),be.push({key:"Width",value:H.width}),be.push({key:"Height",value:H.height}),H.colorSpace===k.INDEXED?be.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(be.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===k.DEVICE_CMYK&&be.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),be.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&be.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var Te="",ve=0,Ce=H.transparency.length;ve<Ce;ve++)Te+=H.transparency[ve]+" "+H.transparency[ve]+" ";be.push({key:"Mask",value:"["+Te+"]"})}H.sMask!==void 0&&be.push({key:"SMask",value:H.objectId+1+" 0 R"});var $e=H.filter!==void 0?["/"+H.filter]:void 0;if(ue({data:H.data,additionalKeyValues:be,alreadyAppliedFilters:$e,objectId:H.objectId}),oe("endobj"),"sMask"in H&&H.sMask!==void 0){var Je=(H.predictor!=null?"/Predictor "+H.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+H.width,ge={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:Je,data:H.sMask};"filter"in H&&(ge.filter=H.filter),Z.call(this,ge)}if(H.colorSpace===k.INDEXED){var Ee=this.internal.newObject();ue({data:ee(new Uint8Array(H.palette)),objectId:Ee}),oe("endobj")}},u=function(){var Z=this.internal.collections[t+"images"];for(var H in Z)s.call(this,Z[H])},a=function(){var Z,H=this.internal.collections[t+"images"],oe=this.internal.write;for(var ue in H)oe("/I"+(Z=H[ue]).index,Z.objectId,"0","R")},p=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",a))},d=function(){var Z=this.internal.collections[t+"images"];return p.call(this),Z},g=function(){return Object.keys(this.internal.collections[t+"images"]).length},_=function(Z){return typeof e["process"+Z.toUpperCase()]=="function"},C=function(Z){return va(Z)==="object"&&Z.nodeType===1},S=function(Z,H){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var oe=""+Z.getAttribute("src");if(oe.indexOf("data:image/")===0)return v1(unescape(oe).split("base64,").pop());var ue=e.loadFile(oe,!0);if(ue!==void 0)return ue}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var ce;switch(H){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;default:ce="image/jpeg"}return v1(Z.toDataURL(ce,1).split("base64,").pop())}},I=function(Z){var H=this.internal.collections[t+"images"];if(H){for(var oe in H)if(Z===H[oe].alias)return H[oe]}},O=function(Z,H,oe){return Z||H||(Z=-96,H=-96),Z<0&&(Z=-1*oe.width*72/Z/this.internal.scaleFactor),H<0&&(H=-1*oe.height*72/H/this.internal.scaleFactor),Z===0&&(Z=H*oe.width/oe.height),H===0&&(H=Z*oe.height/oe.width),[Z,H]},P=function(Z,H,oe,ue,ce,be){var Te=O.call(this,oe,ue,ce),ve=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,$e=d.call(this);if(oe=Te[0],ue=Te[1],$e[ce.index]=ce,be){be*=Math.PI/180;var Je=Math.cos(be),ge=Math.sin(be),Ee=function(Le){return Le.toFixed(4)},Ie=[Ee(Je),Ee(ge),Ee(-1*ge),Ee(Je),0,0,"cm"]}this.internal.write("q"),be?(this.internal.write([1,"0","0",1,ve(Z),Ce(H+ue),"cm"].join(" ")),this.internal.write(Ie.join(" ")),this.internal.write([ve(oe),"0","0",ve(ue),"0","0","cm"].join(" "))):this.internal.write([ve(oe),"0","0",ve(ue),ve(Z),Ce(H+ue),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},k=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=e.__addimage__.sHashCode=function(Z){var H,oe,ue=0;if(typeof Z=="string")for(oe=Z.length,H=0;H<oe;H++)ue=(ue<<5)-ue+Z.charCodeAt(H),ue|=0;else if($(Z))for(oe=Z.byteLength/2,H=0;H<oe;H++)ue=(ue<<5)-ue+Z[H],ue|=0;return ue},N=e.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var H=!0;return Z.length===0&&(H=!1),Z.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(H=!1),H},G=e.__addimage__.extractImageFromDataUrl=function(Z){if(Z==null||!(Z=Z.trim()).startsWith("data:"))return null;var H=Z.indexOf(",");return H<0?null:Z.substring(0,H).trim().endsWith("base64")?Z.substring(H+1):null};e.__addimage__.isArrayBuffer=function(Z){return Z instanceof ArrayBuffer};var $=e.__addimage__.isArrayBufferView=function(Z){return Z instanceof Int8Array||Z instanceof Uint8Array||Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array},X=e.__addimage__.binaryStringToUint8Array=function(Z){for(var H=Z.length,oe=new Uint8Array(H),ue=0;ue<H;ue++)oe[ue]=Z.charCodeAt(ue);return oe},ee=e.__addimage__.arrayBufferToBinaryString=function(Z){for(var H="",oe=$(Z)?Z:new Uint8Array(Z),ue=0;ue<oe.length;ue+=8192)H+=String.fromCharCode.apply(null,oe.subarray(ue,ue+8192));return H};e.addImage=function(){var Z,H,oe,ue,ce,be,Te,ve,Ce;if(typeof arguments[1]=="number"?(H=r,oe=arguments[1],ue=arguments[2],ce=arguments[3],be=arguments[4],Te=arguments[5],ve=arguments[6],Ce=arguments[7]):(H=arguments[1],oe=arguments[2],ue=arguments[3],ce=arguments[4],be=arguments[5],Te=arguments[6],ve=arguments[7],Ce=arguments[8]),va(Z=arguments[0])==="object"&&!C(Z)&&"imageData"in Z){var $e=Z;Z=$e.imageData,H=$e.format||H||r,oe=$e.x||oe||0,ue=$e.y||ue||0,ce=$e.w||$e.width||ce,be=$e.h||$e.height||be,Te=$e.alias||Te,ve=$e.compression||ve,Ce=$e.rotation||$e.angle||Ce}var Je=this.internal.getFilters();if(ve===void 0&&Je.indexOf("FlateEncode")!==-1&&(ve="SLOW"),isNaN(oe)||isNaN(ue))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var ge=J.call(this,Z,H,Te,ve);return P.call(this,oe,ue,ce,be,ge,Ce),this};var J=function(Z,H,oe,ue){var ce,be,Te;if(typeof Z=="string"&&i(Z)===r){Z=unescape(Z);var ve=le(Z,!1);(ve!==""||(ve=e.loadFile(Z,!0))!==void 0)&&(Z=ve)}if(C(Z)&&(Z=S(Z,H)),H=i(Z,H),!_(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((Te=oe)==null||Te.length===0)&&(oe=(function(Ce){return typeof Ce=="string"||$(Ce)?B(Ce):$(Ce.data)?B(Ce.data):null})(Z)),(ce=I.call(this,oe))||(Z instanceof Uint8Array||H==="RGBA"||(be=Z,Z=X(Z)),ce=this["process"+H.toUpperCase()](Z,g.call(this),oe,(function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in e.image_compression?Ce:F.NONE})(ue),be)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},le=e.__addimage__.convertBase64ToBinaryString=function(Z,H){H=typeof H!="boolean"||H;var oe,ue="";if(typeof Z=="string"){var ce;oe=(ce=G(Z))!==null&&ce!==void 0?ce:Z;try{ue=v1(oe)}catch(be){if(H)throw N(oe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+be.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ue};e.getImageProperties=function(Z){var H,oe,ue="";if(C(Z)&&(Z=S(Z)),typeof Z=="string"&&i(Z)===r&&((ue=le(Z,!1))===""&&(ue=e.loadFile(Z)||""),Z=ue),oe=i(Z),!_(oe))throw new Error("addImage does not support files of type '"+oe+"', please ensure that a plugin for '"+oe+"' support is added.");if(Z instanceof Uint8Array||(Z=X(Z)),!(H=this["process"+oe.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=oe,H}})(On.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};On.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,s,u=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,g=!1,_=0;_<d.length&&!g;_++)switch((n=d[_]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var C=0;C<d.length;C++){n=d[C];var S=this.internal.pdfEscape,I=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(O.objId),F=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+S(k(n.contents))+")",s+=" /Popup "+P.objId+" 0 R",s+=" /P "+p.objId+" 0 R",s+=" /T ("+S(k(F))+") >>",O.content=s;var B=O.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+B,n.open&&(s+=" /Open true"),s+=" >>",P.content=s,this.internal.write(O.objId,"0 R",P.objId,"0 R");break;case"freetext":i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+S(I(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var G=this.annotations._nameMap[n.options.name];n.options.pageNumber=G.page,n.options.top=G.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+S(I(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var $=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+$+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,s,u){var a=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:p(r),y:d(n),w:p(r+i),h:d(n+s)},options:u,type:"link"})},e.textWithLink=function(r,n,i,s){var u,a,p=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var g=this.splitTextToSize(r,a).length;u=Math.ceil(d*g)}else a=p,u=d;return this.text(r,n,i,s),i+=.2*d,s.align==="center"&&(n-=p/2),s.align==="right"&&(n-=p),this.link(n,i-d,a,u,s),p},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(On.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(O){return t[O.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},a=e.__arabicParser__.isArabicEndLetter=function(O){return u(O)&&s(O)&&t[O.charCodeAt(0)].length<=2},p=e.__arabicParser__.isArabicAlfLetter=function(O){return u(O)&&i.indexOf(O.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return u(O)&&s(O)&&t[O.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(O){return u(O)&&s(O)&&t[O.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(O){return u(O)&&s(O)&&t[O.charCodeAt(0)].length>=3};var g=e.__arabicParser__.arabicLetterHasMedialForm=function(O){return u(O)&&s(O)&&t[O.charCodeAt(0)].length==4},_=e.__arabicParser__.resolveLigatures=function(O){var P=0,k=r,F="",B=0;for(P=0;P<O.length;P+=1)k[O.charCodeAt(P)]!==void 0?(B++,typeof(k=k[O.charCodeAt(P)])=="number"&&(F+=String.fromCharCode(k),k=r,B=0),P===O.length-1&&(k=r,F+=O.charAt(P-(B-1)),P-=B-1,B=0)):(k=r,F+=O.charAt(P-B),P-=B,B=0);return F};e.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&n[O.charCodeAt(0)]!==void 0};var C=e.__arabicParser__.getCorrectForm=function(O,P,k){return u(O)?s(O)===!1?-1:!d(O)||!u(P)&&!u(k)||!u(k)&&a(P)||a(O)&&!u(P)||a(O)&&p(P)||a(O)&&a(P)?0:g(O)&&u(P)&&!a(P)&&u(k)&&d(k)?3:a(O)||!u(k)?1:2:-1},S=function(O){var P=0,k=0,F=0,B="",N="",G="",$=(O=O||"").split("\\s+"),X=[];for(P=0;P<$.length;P+=1){for(X.push(""),k=0;k<$[P].length;k+=1)B=$[P][k],N=$[P][k-1],G=$[P][k+1],u(B)?(F=C(B,N,G),X[P]+=F!==-1?String.fromCharCode(t[B.charCodeAt(0)][F]):B):X[P]+=B;X[P]=_(X[P])}return X.join(" ")},I=e.__arabicParser__.processArabic=e.processArabic=function(){var O,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(P)){var F=0;for(k=[],F=0;F<P.length;F+=1)Array.isArray(P[F])?k.push([S(P[F][0]),P[F][1],P[F][2]]):k.push([S(P[F])]);O=k}else O=S(P);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};e.events.push(["preProcessText",I])})(On.API),On.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(a){u=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(On.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(O){p=O}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(O){d=O}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(O){g=O}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(O){_=O}});var C=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(O){S=O}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(O){I=O}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(p){return n.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},e.getTextDimensions=function(p,d){n.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),_=d.font||this.getFont(),C=d.scaleFactor||this.internal.scaleFactor,S=0,I=0,O=0,P=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var k=d.maxWidth;k>0?typeof p=="string"?p=this.splitTextToSize(p,k):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(B,N){return B.concat(P.splitTextToSize(N,k))},[])):p=Array.isArray(p)?p:[p];for(var F=0;F<p.length;F++)S<(O=this.getStringUnitWidth(p[F],{font:_})*g)&&(S=O);return S!==0&&(I=p.length),{w:S/=C,h:Math.max((I*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/C,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var p=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var p;p=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,_=this.internal.__cell__.margins||t,C=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===p.lineNumber?(p.x=(d.x||0)+(d.width||0),p.y=d.y||0):d.y+d.height+p.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=_.top,S&&C&&(this.printHeaderRow(p.lineNumber,!0),p.y+=C[0].height)):p.y=d.y+d.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,r===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-g,p.y+g,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+g,{align:"center",baseline:"top",maxWidth:p.width-g-g}):this.text(p.text,p.x+g,p.y+g,{align:"left",baseline:"top",maxWidth:p.width-g-g})),this.internal.__cell__.lastCell=p,this};e.table=function(p,d,g,_,C){if(n.call(this),!g)throw new Error("No data for PDF table.");var S,I,O,P,k=[],F=[],B=[],N={},G={},$=[],X=[],ee=(C=C||{}).autoSize||!1,J=C.printHeaders!==!1,le=C.css&&C.css["font-size"]!==void 0?16*C.css["font-size"]:C.fontSize||12,Z=C.margins||Object.assign({width:this.getPageWidth()},t),H=typeof C.padding=="number"?C.padding:3,oe=C.headerBackgroundColor||"#c8c8c8",ue=C.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=oe,this.internal.__cell__.headerTextColor=ue,this.setFontSize(le),_==null)F=k=Object.keys(g[0]),B=k.map(function(){return"left"});else if(Array.isArray(_)&&va(_[0])==="object")for(k=_.map(function($e){return $e.name}),F=_.map(function($e){return $e.prompt||$e.name||""}),B=_.map(function($e){return $e.align||"left"}),S=0;S<_.length;S+=1)G[_[S].name]=.7499990551181103*_[S].width;else Array.isArray(_)&&typeof _[0]=="string"&&(F=k=_,B=k.map(function(){return"left"}));if(ee||Array.isArray(_)&&typeof _[0]=="string")for(S=0;S<k.length;S+=1){for(N[P=k[S]]=g.map(function($e){return $e[P]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(F[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=N[P],this.setFont(void 0,"normal"),O=0;O<I.length;O+=1)$.push(this.getTextDimensions(I[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[P]=Math.max.apply(null,$)+H+H,$=[]}if(J){var ce={};for(S=0;S<k.length;S+=1)ce[k[S]]={},ce[k[S]].text=F[S],ce[k[S]].align=B[S];var be=a.call(this,ce,G);X=k.map(function($e){return new s(p,d,G[$e],be,ce[$e].text,void 0,ce[$e].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var Te=_.reduce(function($e,Je){return $e[Je.name]=Je.align,$e},{});for(S=0;S<g.length;S+=1){"rowStart"in C&&C.rowStart instanceof Function&&C.rowStart({row:S,data:g[S]},this);var ve=a.call(this,g[S],G);for(O=0;O<k.length;O+=1){var Ce=g[S][k[O]];"cellStart"in C&&C.cellStart instanceof Function&&C.cellStart({row:S,col:O,data:Ce},this),u.call(this,new s(p,d,G[k[O]],ve,Ce,S+2,Te[k[O]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=d,this};var a=function(p,d){var g=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,C=this.internal.scaleFactor;return Object.keys(p).map(function(S){var I=p[S];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,d[S]-g-g)},this).map(function(S){return this.getLineHeightFactor()*S.length*_/C+g+g},this).reduce(function(S,I){return Math.max(S,I)},0)};e.setTableHeaderRow=function(p){n.call(this),this.internal.__cell__.tableHeaderRow=p},e.printHeaderRow=function(p,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var C=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){g=this.internal.__cell__.tableHeaderRow[S].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,C.push(g)),g.lineNumber=p;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,g),this.setTextColor(I)}C.length>0&&this.setTableHeaderRow(C),this.setFont(void 0,"normal"),r=!1}})(On.API);var vV={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},bV=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],s3=yV(bV),_V=[100,200,300,400,500,600,700,800,900],Ife=yV(_V);function cS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(s){return vV[s=s||"normal"]?s:"normal"})(e.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(e.weight),i=(function(s){return typeof s3[s=s||"normal"]=="number"?s:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function DF(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var Mfe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FF(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function NF(e){return e.trimLeft()}function Ofe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Rfe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var k_,BF,jF,Xm,F_,zF,$F,qF,fS=["times"];function UF(e,t,r,n){var i=4,s=GF;switch(n){case On.API.image_compression.FAST:i=1,s=VF;break;case On.API.image_compression.MEDIUM:i=6,s=HF;break;case On.API.image_compression.SLOW:i=9,s=WF}e=(function(a,p,d,g){for(var _,C=a.length/p,S=new Uint8Array(a.length+C),I=[Lfe,VF,GF,HF,WF],O=0;O<C;O+=1){var P=O*p,k=a.subarray(P,P+p);if(g)S.set(g(k,d,_),P+O);else{for(var F=I.length,B=[],N=0;N<F;N+=1)B[N]=I[N](k,d,_);var G=kfe(B.concat());S.set(B[G],P+O)}_=k}return S})(e,t,r,s);var u=e3(e,{level:i});return On.API.__addimage__.arrayBufferToBinaryString(u)}function Lfe(e){var t=Array.apply([],e);return t.unshift(0),t}function VF(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var s=e[i-t]||0;n[i+1]=e[i]-s+256&255}return n}function GF(e,t,r){var n=e.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var u=r&&r[s]||0;i[s+1]=e[s]-u+256&255}return i}function HF(e,t,r){var n=e.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var u=e[s-t]||0,a=r&&r[s]||0;i[s+1]=e[s]+256-(u+a>>>1)&255}return i}function WF(e,t,r){var n=e.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var u=Dfe(e[s-t]||0,r&&r[s]||0,r&&r[s-t]||0);i[s+1]=e[s]-u+256&255}return i}function Dfe(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=i&&n<=s?e:i<=s?t:r}function kfe(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function hS(e,t,r){var n=t*r,i=Math.floor(n/8),s=16-(n-8*i+r),u=(1<<r)-1;return xV(e,i)>>s&u}function ZF(e,t,r,n){var i=r*n,s=Math.floor(i/8),u=16-(i-8*s+n),a=(1<<n)-1,p=(t&a)<<u;(function(d,g,_){if(g+1<d.byteLength)d.setUint16(g,_,!1);else{var C=_>>8&255;d.setUint8(g,C)}})(e,s,xV(e,s)&~(a<<u)&65535|p)}function xV(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Ffe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],s=i>>7,u=1<<1+(7&i);e[t++],e[t++];var a=null,p=null;s&&(a=t,p=u,t+=3*u);var d=!0,g=[],_=0,C=null,S=0,I=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,I=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((Z=e[t++])>=0))throw Error("Invalid block size");if(Z===0)break;t+=Z}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var O=e[t++];_=e[t++]|e[t++]<<8,C=e[t++],1&O||(C=null),S=O>>2&7,t++;break;case 254:for(;;){if(!((Z=e[t++])>=0))throw Error("Invalid block size");if(Z===0)break;t+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var P=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,B=e[t++]|e[t++]<<8,N=e[t++],G=N>>6&1,$=1<<1+(7&N),X=a,ee=p,J=!1;N>>7&&(J=!0,X=t,ee=$,t+=3*$);var le=t;for(t++;;){var Z;if(!((Z=e[t++])>=0))throw Error("Invalid block size");if(Z===0)break;t+=Z}g.push({x:P,y:k,width:F,height:B,has_local_palette:J,palette_offset:X,palette_size:ee,data_offset:le,data_length:t-le,transparent_index:C,interlaced:!!G,delay:_,disposal:S});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return I},this.frameInfo=function(H){if(H<0||H>=g.length)throw new Error("Frame index out of range.");return g[H]},this.decodeAndBlitFrameBGRA=function(H,oe){var ue=this.frameInfo(H),ce=ue.width*ue.height,be=new Uint8Array(ce);XF(e,ue.data_offset,be,ce);var Te=ue.palette_offset,ve=ue.transparent_index;ve===null&&(ve=256);var Ce=ue.width,$e=r-Ce,Je=Ce,ge=4*(ue.y*r+ue.x),Ee=4*((ue.y+ue.height)*r+ue.x),Ie=ge,Le=4*$e;ue.interlaced===!0&&(Le+=4*r*7);for(var Ve=8,ht=0,It=be.length;ht<It;++ht){var xt=be[ht];if(Je===0&&(Je=Ce,(Ie+=Le)>=Ee&&(Le=4*$e+4*r*(Ve-1),Ie=ge+(Ce+$e)*(Ve<<1),Ve>>=1)),xt===ve)Ie+=4;else{var rt=e[Te+3*xt],zt=e[Te+3*xt+1],Lt=e[Te+3*xt+2];oe[Ie++]=Lt,oe[Ie++]=zt,oe[Ie++]=rt,oe[Ie++]=255}--Je}},this.decodeAndBlitFrameRGBA=function(H,oe){var ue=this.frameInfo(H),ce=ue.width*ue.height,be=new Uint8Array(ce);XF(e,ue.data_offset,be,ce);var Te=ue.palette_offset,ve=ue.transparent_index;ve===null&&(ve=256);var Ce=ue.width,$e=r-Ce,Je=Ce,ge=4*(ue.y*r+ue.x),Ee=4*((ue.y+ue.height)*r+ue.x),Ie=ge,Le=4*$e;ue.interlaced===!0&&(Le+=4*r*7);for(var Ve=8,ht=0,It=be.length;ht<It;++ht){var xt=be[ht];if(Je===0&&(Je=Ce,(Ie+=Le)>=Ee&&(Le=4*$e+4*r*(Ve-1),Ie=ge+(Ce+$e)*(Ve<<1),Ve>>=1)),xt===ve)Ie+=4;else{var rt=e[Te+3*xt],zt=e[Te+3*xt+1],Lt=e[Te+3*xt+2];oe[Ie++]=rt,oe[Ie++]=zt,oe[Ie++]=Lt,oe[Ie++]=255}--Je}}}function XF(e,t,r,n){for(var i=e[t++],s=1<<i,u=s+1,a=u+1,p=i+1,d=(1<<p)-1,g=0,_=0,C=0,S=e[t++],I=new Int32Array(4096),O=null;;){for(;g<16&&S!==0;)_|=e[t++]<<g,g+=8,S===1?S=e[t++]:--S;if(g<p)break;var P=_&d;if(_>>=p,g-=p,P!==s){if(P===u)break;for(var k=P<a?P:O,F=0,B=k;B>s;)B=I[B]>>8,++F;var N=B;if(C+F+(k!==P?1:0)>n)return void Fa.log("Warning, gif stream longer than expected.");r[C++]=N;var G=C+=F;for(k!==P&&(r[C++]=N),B=k;F--;)B=I[B],r[--G]=255&B,B>>=8;O!==null&&a<4096&&(I[a++]=O<<8|N,a>=d+1&&p<12&&(++p,d=d<<1|1)),O=P}else a=u+1,d=(1<<(p=i+1))-1,O=null}return C!==n&&Fa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dS(e){var t,r,n,i,s,u=Math.floor,a=new Array(64),p=new Array(64),d=new Array(64),g=new Array(64),_=new Array(65535),C=new Array(65535),S=new Array(64),I=new Array(64),O=[],P=0,k=7,F=new Array(64),B=new Array(64),N=new Array(64),G=new Array(256),$=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function be(ge,Ee){for(var Ie=0,Le=0,Ve=new Array,ht=1;ht<=16;ht++){for(var It=1;It<=ge[ht];It++)Ve[Ee[Le]]=[],Ve[Ee[Le]][0]=Ie,Ve[Ee[Le]][1]=ht,Le++,Ie++;Ie*=2}return Ve}function Te(ge){for(var Ee=ge[0],Ie=ge[1]-1;Ie>=0;)Ee&1<<Ie&&(P|=1<<k),Ie--,--k<0&&(P==255?(ve(255),ve(0)):ve(P),k=7,P=0)}function ve(ge){O.push(ge)}function Ce(ge){ve(ge>>8&255),ve(255&ge)}function $e(ge,Ee,Ie,Le,Ve){for(var ht,It=Ve[0],xt=Ve[240],rt=(function(tr,Ge){var nt,ut,Nt,Kt,Vt,Ke,me,pe,Ae,Be,Ne=0;for(Ae=0;Ae<8;++Ae){nt=tr[Ne],ut=tr[Ne+1],Nt=tr[Ne+2],Kt=tr[Ne+3],Vt=tr[Ne+4],Ke=tr[Ne+5],me=tr[Ne+6];var Tt=nt+(pe=tr[Ne+7]),bt=nt-pe,tt=ut+me,gt=ut-me,$t=Nt+Ke,kt=Nt-Ke,cr=Kt+Vt,mr=Kt-Vt,Zr=Tt+cr,mn=Tt-cr,Kr=tt+$t,Rt=tt-$t;tr[Ne]=Zr+Kr,tr[Ne+4]=Zr-Kr;var Ur=.707106781*(Rt+mn);tr[Ne+2]=mn+Ur,tr[Ne+6]=mn-Ur;var Fn=.382683433*((Zr=mr+kt)-(Rt=gt+bt)),Jr=.5411961*Zr+Fn,jr=1.306562965*Rt+Fn,wt=.707106781*(Kr=kt+gt),Ct=bt+wt,Wt=bt-wt;tr[Ne+5]=Wt+Jr,tr[Ne+3]=Wt-Jr,tr[Ne+1]=Ct+jr,tr[Ne+7]=Ct-jr,Ne+=8}for(Ne=0,Ae=0;Ae<8;++Ae){nt=tr[Ne],ut=tr[Ne+8],Nt=tr[Ne+16],Kt=tr[Ne+24],Vt=tr[Ne+32],Ke=tr[Ne+40],me=tr[Ne+48];var ie=nt+(pe=tr[Ne+56]),_e=nt-pe,Ze=ut+me,_t=ut-me,lt=Nt+Ke,or=Nt-Ke,Ar=Kt+Vt,Vr=Kt-Vt,Rr=ie+Ar,lr=ie-Ar,kr=Ze+lt,Yr=Ze-lt;tr[Ne]=Rr+kr,tr[Ne+32]=Rr-kr;var dn=.707106781*(Yr+lr);tr[Ne+16]=lr+dn,tr[Ne+48]=lr-dn;var Bn=.382683433*((Rr=Vr+or)-(Yr=_t+_e)),Pn=.5411961*Rr+Bn,un=1.306562965*Yr+Bn,Wi=.707106781*(kr=or+_t),Zi=_e+Wi,Ui=_e-Wi;tr[Ne+40]=Ui+Pn,tr[Ne+24]=Ui-Pn,tr[Ne+8]=Zi+un,tr[Ne+56]=Zi-un,Ne++}for(Ae=0;Ae<64;++Ae)Be=tr[Ae]*Ge[Ae],S[Ae]=Be>0?Be+.5|0:Be-.5|0;return S})(ge,Ee),zt=0;zt<64;++zt)I[X[zt]]=rt[zt];var Lt=I[0]-Ie;Ie=I[0],Lt==0?Te(Le[0]):(Te(Le[C[ht=32767+Lt]]),Te(_[ht]));for(var Ft=63;Ft>0&&I[Ft]==0;)Ft--;if(Ft==0)return Te(It),Ie;for(var dt,ke=1;ke<=Ft;){for(var fr=ke;I[ke]==0&&ke<=Ft;)++ke;var sr=ke-fr;if(sr>=16){dt=sr>>4;for(var xr=1;xr<=dt;++xr)Te(xt);sr&=15}ht=32767+I[ke],Te(Ve[(sr<<4)+C[ht]]),Te(_[ht]),ke++}return Ft!=63&&Te(It),Ie}function Je(ge){ge=Math.min(Math.max(ge,1),100),s!=ge&&((function(Ee){for(var Ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Le=0;Le<64;Le++){var Ve=u((Ie[Le]*Ee+50)/100);Ve=Math.min(Math.max(Ve,1),255),a[X[Le]]=Ve}for(var ht=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],It=0;It<64;It++){var xt=u((ht[It]*Ee+50)/100);xt=Math.min(Math.max(xt,1),255),p[X[It]]=xt}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],zt=0,Lt=0;Lt<8;Lt++)for(var Ft=0;Ft<8;Ft++)d[zt]=1/(a[X[zt]]*rt[Lt]*rt[Ft]*8),g[zt]=1/(p[X[zt]]*rt[Lt]*rt[Ft]*8),zt++})(ge<50?Math.floor(5e3/ge):Math.floor(200-2*ge)),s=ge)}this.encode=function(ge,Ee){Ee&&Je(Ee),O=new Array,P=0,k=7,Ce(65496),Ce(65504),Ce(16),ve(74),ve(70),ve(73),ve(70),ve(0),ve(1),ve(1),ve(0),Ce(1),Ce(1),ve(0),ve(0),(function(){Ce(65499),Ce(132),ve(0);for(var ut=0;ut<64;ut++)ve(a[ut]);ve(1);for(var Nt=0;Nt<64;Nt++)ve(p[Nt])})(),(function(ut,Nt){Ce(65472),Ce(17),ve(8),Ce(Nt),Ce(ut),ve(3),ve(1),ve(17),ve(0),ve(2),ve(17),ve(1),ve(3),ve(17),ve(1)})(ge.width,ge.height),(function(){Ce(65476),Ce(418),ve(0);for(var ut=0;ut<16;ut++)ve(ee[ut+1]);for(var Nt=0;Nt<=11;Nt++)ve(J[Nt]);ve(16);for(var Kt=0;Kt<16;Kt++)ve(le[Kt+1]);for(var Vt=0;Vt<=161;Vt++)ve(Z[Vt]);ve(1);for(var Ke=0;Ke<16;Ke++)ve(H[Ke+1]);for(var me=0;me<=11;me++)ve(oe[me]);ve(17);for(var pe=0;pe<16;pe++)ve(ue[pe+1]);for(var Ae=0;Ae<=161;Ae++)ve(ce[Ae])})(),Ce(65498),Ce(12),ve(3),ve(1),ve(0),ve(2),ve(17),ve(3),ve(17),ve(0),ve(63),ve(0);var Ie=0,Le=0,Ve=0;P=0,k=7,this.encode.displayName="_encode_";for(var ht,It,xt,rt,zt,Lt,Ft,dt,ke,fr=ge.data,sr=ge.width,xr=ge.height,tr=4*sr,Ge=0;Ge<xr;){for(ht=0;ht<tr;){for(zt=tr*Ge+ht,Ft=-1,dt=0,ke=0;ke<64;ke++)Lt=zt+(dt=ke>>3)*tr+(Ft=4*(7&ke)),Ge+dt>=xr&&(Lt-=tr*(Ge+1+dt-xr)),ht+Ft>=tr&&(Lt-=ht+Ft-tr+4),It=fr[Lt++],xt=fr[Lt++],rt=fr[Lt++],F[ke]=($[It]+$[xt+256|0]+$[rt+512|0]>>16)-128,B[ke]=($[It+768|0]+$[xt+1024|0]+$[rt+1280|0]>>16)-128,N[ke]=($[It+1280|0]+$[xt+1536|0]+$[rt+1792|0]>>16)-128;Ie=$e(F,d,Ie,t,n),Le=$e(B,g,Le,r,i),Ve=$e(N,g,Ve,r,i),ht+=32}Ge+=8}if(k>=0){var nt=[];nt[1]=k+1,nt[0]=(1<<k+1)-1,Te(nt)}return Ce(65497),new Uint8Array(O)},e=e||50,(function(){for(var ge=String.fromCharCode,Ee=0;Ee<256;Ee++)G[Ee]=ge(Ee)})(),t=be(ee,J),r=be(H,oe),n=be(le,Z),i=be(ue,ce),(function(){for(var ge=1,Ee=2,Ie=1;Ie<=15;Ie++){for(var Le=ge;Le<Ee;Le++)C[32767+Le]=Ie,_[32767+Le]=[],_[32767+Le][1]=Ie,_[32767+Le][0]=Le;for(var Ve=-(Ee-1);Ve<=-ge;Ve++)C[32767+Ve]=Ie,_[32767+Ve]=[],_[32767+Ve][1]=Ie,_[32767+Ve][0]=Ee-1+Ve;ge<<=1,Ee<<=1}})(),(function(){for(var ge=0;ge<256;ge++)$[ge]=19595*ge,$[ge+256|0]=38470*ge,$[ge+512|0]=7471*ge+32768,$[ge+768|0]=-11059*ge,$[ge+1024|0]=-21709*ge,$[ge+1280|0]=32768*ge+8421375,$[ge+1536|0]=-27439*ge,$[ge+1792|0]=-5329*ge})(),Je(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function $c(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function KF(e){function t(J){if(!J)throw Error("assert :P")}function r(J,le,Z){for(var H=0;4>H;H++)if(J[le+H]!=Z.charCodeAt(H))return!0;return!1}function n(J,le,Z,H,oe){for(var ue=0;ue<oe;ue++)J[le+ue]=Z[H+ue]}function i(J,le,Z,H){for(var oe=0;oe<H;oe++)J[le+oe]=Z}function s(J){return new Int32Array(J)}function u(J,le){for(var Z=[],H=0;H<J;H++)Z.push(new le);return Z}function a(J,le){var Z=[];return(function H(oe,ue,ce){for(var be=ce[ue],Te=0;Te<be&&(oe.push(ce.length>ue+1?[]:new le),!(ce.length<ue+1));Te++)H(oe[Te],ue+1,ce)})(Z,0,J),Z}var p=function(){var J=this;function le(D,q){for(var re=1<<q-1>>>0;D&re;)re>>>=1;return re?(D&re-1)+re:D}function Z(D,q,re,de,Me){t(!(de%re));do D[q+(de-=re)]=Me;while(0<de)}function H(D,q,re,de,Me){if(t(2328>=Me),512>=Me)var Re=s(512);else if((Re=s(Me))==null)return 0;return(function(ze,He,et,ft,Bt,er){var st,pt,Ht=He,yr=1<<et,Yt=s(16),vr=s(16);for(t(Bt!=0),t(ft!=null),t(ze!=null),t(0<et),pt=0;pt<Bt;++pt){if(15<ft[pt])return 0;++Yt[ft[pt]]}if(Yt[0]==Bt)return 0;for(vr[1]=0,st=1;15>st;++st){if(Yt[st]>1<<st)return 0;vr[st+1]=vr[st]+Yt[st]}for(pt=0;pt<Bt;++pt)st=ft[pt],0<ft[pt]&&(er[vr[st]++]=pt);if(vr[15]==1)return(ft=new oe).g=0,ft.value=er[0],Z(ze,Ht,1,yr,ft),yr;var _r,Lr=-1,Ir=yr-1,Sn=0,pn=1,Un=1,wn=1<<et;for(pt=0,st=1,Bt=2;st<=et;++st,Bt<<=1){if(pn+=Un<<=1,0>(Un-=Yt[st]))return 0;for(;0<Yt[st];--Yt[st])(ft=new oe).g=st,ft.value=er[pt++],Z(ze,Ht+Sn,Bt,wn,ft),Sn=le(Sn,st)}for(st=et+1,Bt=2;15>=st;++st,Bt<<=1){if(pn+=Un<<=1,0>(Un-=Yt[st]))return 0;for(;0<Yt[st];--Yt[st]){if(ft=new oe,(Sn&Ir)!=Lr){for(Ht+=wn,_r=1<<(Lr=st)-et;15>Lr&&!(0>=(_r-=Yt[Lr]));)++Lr,_r<<=1;yr+=wn=1<<(_r=Lr-et),ze[He+(Lr=Sn&Ir)].g=_r+et,ze[He+Lr].value=Ht-He-Lr}ft.g=st-et,ft.value=er[pt++],Z(ze,Ht+(Sn>>et),Bt,wn,ft),Sn=le(Sn,st)}}return pn!=2*vr[15]-1?0:yr})(D,q,re,de,Me,Re)}function oe(){this.value=this.g=0}function ue(){this.value=this.g=0}function ce(){this.G=u(5,oe),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(da,ue)}function be(D,q,re,de){t(D!=null),t(q!=null),t(2147483648>de),D.Ca=254,D.I=0,D.b=-8,D.Ka=0,D.oa=q,D.pa=re,D.Jd=q,D.Yc=re+de,D.Zc=4<=de?re+de-4+1:re,It(D)}function Te(D,q){for(var re=0;0<q--;)re|=rt(D,128)<<q;return re}function ve(D,q){var re=Te(D,q);return xt(D)?-re:re}function Ce(D,q,re,de){var Me,Re=0;for(t(D!=null),t(q!=null),t(4294967288>de),D.Sb=de,D.Ra=0,D.u=0,D.h=0,4<de&&(de=4),Me=0;Me<de;++Me)Re+=q[re+Me]<<8*Me;D.Ra=Re,D.bb=de,D.oa=q,D.pa=re}function $e(D){for(;8<=D.u&&D.bb<D.Sb;)D.Ra>>>=8,D.Ra+=D.oa[D.pa+D.bb]<<Zo-8>>>0,++D.bb,D.u-=8;Le(D)&&(D.h=1,D.u=0)}function Je(D,q){if(t(0<=q),!D.h&&q<=fs){var re=Ie(D)&Ol[q];return D.u+=q,$e(D),re}return D.h=1,D.u=0}function ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ie(D){return D.Ra>>>(D.u&Zo-1)>>>0}function Le(D){return t(D.bb<=D.Sb),D.h||D.bb==D.Sb&&D.u>Zo}function Ve(D,q){D.u=q,D.h=Le(D)}function ht(D){D.u>=Sa&&(t(D.u>=Sa),$e(D))}function It(D){t(D!=null&&D.oa!=null),D.pa<D.Zc?(D.I=(D.oa[D.pa++]|D.I<<8)>>>0,D.b+=8):(t(D!=null&&D.oa!=null),D.pa<D.Yc?(D.b+=8,D.I=D.oa[D.pa++]|D.I<<8):D.Ka?D.b=0:(D.I<<=8,D.b+=8,D.Ka=1))}function xt(D){return Te(D,1)}function rt(D,q){var re=D.Ca;0>D.b&&It(D);var de=D.b,Me=re*q>>>8,Re=(D.I>>>de>Me)+0;for(Re?(re-=Me,D.I-=Me+1<<de>>>0):re=Me+1,de=re,Me=0;256<=de;)Me+=8,de>>=8;return de=7^Me+Rl[de],D.b-=de,D.Ca=(re<<de)-1,Re}function zt(D,q,re){D[q+0]=re>>24&255,D[q+1]=re>>16&255,D[q+2]=re>>8&255,D[q+3]=255&re}function Lt(D,q){return D[q+0]|D[q+1]<<8}function Ft(D,q){return Lt(D,q)|D[q+2]<<16}function dt(D,q){return Lt(D,q)|Lt(D,q+2)<<16}function ke(D,q){var re=1<<q;return t(D!=null),t(0<q),D.X=s(re),D.X==null?0:(D.Mb=32-q,D.Xa=q,1)}function fr(D,q){t(D!=null),t(q!=null),t(D.Xa==q.Xa),n(q.X,0,D.X,0,1<<q.Xa)}function sr(){this.X=[],this.Xa=this.Mb=0}function xr(D,q,re,de){t(re!=null),t(de!=null);var Me=re[0],Re=de[0];return Me==0&&(Me=(D*Re+q/2)/q),Re==0&&(Re=(q*Me+D/2)/D),0>=Me||0>=Re?0:(re[0]=Me,de[0]=Re,1)}function tr(D,q){return D+(1<<q)-1>>>q}function Ge(D,q){return((4278255360&D)+(4278255360&q)>>>0&4278255360)+((16711935&D)+(16711935&q)>>>0&16711935)>>>0}function nt(D,q){J[q]=function(re,de,Me,Re,ze,He,et){var ft;for(ft=0;ft<ze;++ft){var Bt=J[D](He[et+ft-1],Me,Re+ft);He[et+ft]=Ge(re[de+ft],Bt)}}}function ut(){this.ud=this.hd=this.jd=0}function Nt(D,q){return((4278124286&(D^q))>>>1)+(D&q)>>>0}function Kt(D){return 0<=D&&256>D?D:0>D?0:255<D?255:void 0}function Vt(D,q){return Kt(D+(D-q+.5>>1))}function Ke(D,q,re){return Math.abs(q-re)-Math.abs(D-re)}function me(D,q,re,de,Me,Re,ze){for(de=Re[ze-1],re=0;re<Me;++re)Re[ze+re]=de=Ge(D[q+re],de)}function pe(D,q,re,de,Me){var Re;for(Re=0;Re<re;++Re){var ze=D[q+Re],He=ze>>8&255,et=16711935&(et=(et=16711935&ze)+((He<<16)+He));de[Me+Re]=(4278255360&ze)+et>>>0}}function Ae(D,q){q.jd=255&D,q.hd=D>>8&255,q.ud=D>>16&255}function Be(D,q,re,de,Me,Re){var ze;for(ze=0;ze<de;++ze){var He=q[re+ze],et=He>>>8,ft=He,Bt=255&(Bt=(Bt=He>>>16)+((D.jd<<24>>24)*(et<<24>>24)>>>5));ft=255&(ft=(ft+=(D.hd<<24>>24)*(et<<24>>24)>>>5)+((D.ud<<24>>24)*(Bt<<24>>24)>>>5)),Me[Re+ze]=(4278255360&He)+(Bt<<16)+ft}}function Ne(D,q,re,de,Me){J[q]=function(Re,ze,He,et,ft,Bt,er,st,pt){for(et=er;et<st;++et)for(er=0;er<pt;++er)ft[Bt++]=Me(He[de(Re[ze++])])},J[D]=function(Re,ze,He,et,ft,Bt,er){var st=8>>Re.b,pt=Re.Ea,Ht=Re.K[0],yr=Re.w;if(8>st)for(Re=(1<<Re.b)-1,yr=(1<<st)-1;ze<He;++ze){var Yt,vr=0;for(Yt=0;Yt<pt;++Yt)Yt&Re||(vr=de(et[ft++])),Bt[er++]=Me(Ht[vr&yr]),vr>>=st}else J["VP8LMapColor"+re](et,ft,Ht,yr,Bt,er,ze,He,pt)}}function Tt(D,q,re,de,Me){for(re=q+re;q<re;){var Re=D[q++];de[Me++]=Re>>16&255,de[Me++]=Re>>8&255,de[Me++]=255&Re}}function bt(D,q,re,de,Me){for(re=q+re;q<re;){var Re=D[q++];de[Me++]=Re>>16&255,de[Me++]=Re>>8&255,de[Me++]=255&Re,de[Me++]=Re>>24&255}}function tt(D,q,re,de,Me){for(re=q+re;q<re;){var Re=(ze=D[q++])>>16&240|ze>>12&15,ze=240&ze|ze>>28&15;de[Me++]=Re,de[Me++]=ze}}function gt(D,q,re,de,Me){for(re=q+re;q<re;){var Re=(ze=D[q++])>>16&248|ze>>13&7,ze=ze>>5&224|ze>>3&31;de[Me++]=Re,de[Me++]=ze}}function $t(D,q,re,de,Me){for(re=q+re;q<re;){var Re=D[q++];de[Me++]=255&Re,de[Me++]=Re>>8&255,de[Me++]=Re>>16&255}}function kt(D,q,re,de,Me,Re){if(Re==0)for(re=q+re;q<re;)zt(de,((Re=D[q++])[0]>>24|Re[1]>>8&65280|Re[2]<<8&16711680|Re[3]<<24)>>>0),Me+=32;else n(de,Me,D,q,re)}function cr(D,q){J[q][0]=J[D+"0"],J[q][1]=J[D+"1"],J[q][2]=J[D+"2"],J[q][3]=J[D+"3"],J[q][4]=J[D+"4"],J[q][5]=J[D+"5"],J[q][6]=J[D+"6"],J[q][7]=J[D+"7"],J[q][8]=J[D+"8"],J[q][9]=J[D+"9"],J[q][10]=J[D+"10"],J[q][11]=J[D+"11"],J[q][12]=J[D+"12"],J[q][13]=J[D+"13"],J[q][14]=J[D+"0"],J[q][15]=J[D+"0"]}function mr(D){return D==Hd||D==Qf||D==Au||D==Ic}function Zr(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zr,this.f.kb=new mn,this.sd=null}function Rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Fn(D){return alert("todo:WebPSamplerProcessPlane"),D.T}function Jr(D,q){var re=D.T,de=q.ba.f.RGBA,Me=de.eb,Re=de.fb+D.ka*de.A,ze=Xo[q.ba.S],He=D.y,et=D.O,ft=D.f,Bt=D.N,er=D.ea,st=D.W,pt=q.cc,Ht=q.dc,yr=q.Mc,Yt=q.Nc,vr=D.ka,_r=D.ka+D.T,Lr=D.U,Ir=Lr+1>>1;for(vr==0?ze(He,et,null,null,ft,Bt,er,st,ft,Bt,er,st,Me,Re,null,null,Lr):(ze(q.ec,q.fc,He,et,pt,Ht,yr,Yt,ft,Bt,er,st,Me,Re-de.A,Me,Re,Lr),++re);vr+2<_r;vr+=2)pt=ft,Ht=Bt,yr=er,Yt=st,Bt+=D.Rc,st+=D.Rc,Re+=2*de.A,ze(He,(et+=2*D.fa)-D.fa,He,et,pt,Ht,yr,Yt,ft,Bt,er,st,Me,Re-de.A,Me,Re,Lr);return et+=D.fa,D.j+_r<D.o?(n(q.ec,q.fc,He,et,Lr),n(q.cc,q.dc,ft,Bt,Ir),n(q.Mc,q.Nc,er,st,Ir),re--):1&_r||ze(He,et,null,null,ft,Bt,er,st,ft,Bt,er,st,Me,Re+de.A,null,null,Lr),re}function jr(D,q,re){var de=D.F,Me=[D.J];if(de!=null){var Re=D.U,ze=q.ba.S,He=ze==Uh||ze==Au;q=q.ba.f.RGBA;var et=[0],ft=D.ka;et[0]=D.T,D.Kb&&(ft==0?--et[0]:(--ft,Me[0]-=D.width),D.j+D.ka+D.T==D.o&&(et[0]=D.o-D.j-ft));var Bt=q.eb;ft=q.fb+ft*q.A,D=Ga(de,Me[0],D.width,Re,et,Bt,ft+(He?0:3),q.A),t(re==et),D&&mr(ze)&&ds(Bt,ft,He,Re,et,q.A)}return 0}function wt(D){var q=D.ma,re=q.ba.S,de=11>re,Me=re==Pc||re==Hs||re==Uh||re==Vd||re==12||mr(re);if(q.memory=null,q.Ib=null,q.Jb=null,q.Nd=null,!to(q.Oa,D,Me?11:12))return 0;if(Me&&mr(re)&&Pl(),D.da)alert("todo:use_scaling");else{if(de){if(q.Ib=Fn,D.Kb){if(re=D.U+1>>1,q.memory=s(D.U+2*re),q.memory==null)return 0;q.ec=q.memory,q.fc=0,q.cc=q.ec,q.dc=q.fc+D.U,q.Mc=q.cc,q.Nc=q.dc+re,q.Ib=Jr,Pl()}}else alert("todo:EmitYUV");Me&&(q.Jb=jr,de&&Ps())}if(de&&!Kh){for(D=0;256>D;++D)oh[D]=89858*(D-128)+ah>>ih,Qd[D]=-22014*(D-128)+ah,Jd[D]=-45773*(D-128),bm[D]=113618*(D-128)+ah>>ih;for(D=cf;D<iu;++D)q=76283*(D-16)+ah>>ih,_m[D-cf]=ha(q,255),ep[D-cf]=ha(q+8>>4,15);Kh=1}return 1}function Ct(D){var q=D.ma,re=D.U,de=D.T;return t(!(1&D.ka)),0>=re||0>=de?0:(re=q.Ib(D,q),q.Jb!=null&&q.Jb(D,q,re),q.Dc+=re,1)}function Wt(D){D.ma.memory=null}function ie(D,q,re,de){return Je(D,8)!=47?0:(q[0]=Je(D,14)+1,re[0]=Je(D,14)+1,de[0]=Je(D,1),Je(D,3)!=0?0:!D.h)}function _e(D,q){if(4>D)return D+1;var re=D-2>>1;return(2+(1&D)<<re)+Je(q,re)+1}function Ze(D,q){return 120<q?q-120:1<=(re=((re=tc[q-1])>>4)*D+(8-(15&re)))?re:1;var re}function _t(D,q,re){var de=Ie(re),Me=D[q+=255&de].g-8;return 0<Me&&(Ve(re,re.u+8),de=Ie(re),q+=D[q].value,q+=de&(1<<Me)-1),Ve(re,re.u+D[q].g),D[q].value}function lt(D,q,re){return re.g+=D.g,re.value+=D.value<<q>>>0,t(8>=re.g),D.g}function or(D,q,re){var de=D.xc;return t((q=de==0?0:D.vc[D.md*(re>>de)+(q>>de)])<D.Wb),D.Ya[q]}function Ar(D,q,re,de){var Me=D.ab,Re=D.c*q,ze=D.C;q=ze+q;var He=re,et=de;for(de=D.Ta,re=D.Ua;0<Me--;){var ft=D.gc[Me],Bt=ze,er=q,st=He,pt=et,Ht=(et=de,He=re,ft.Ea);switch(t(Bt<er),t(er<=ft.nc),ft.hc){case 2:Yl(st,pt,(er-Bt)*Ht,et,He);break;case 0:var yr=Bt,Yt=er,vr=et,_r=He,Lr=(wn=ft).Ea;yr==0&&(Is(st,pt,null,null,1,vr,_r),me(st,pt+1,0,0,Lr-1,vr,_r+1),pt+=Lr,_r+=Lr,++yr);for(var Ir=1<<wn.b,Sn=Ir-1,pn=tr(Lr,wn.b),Un=wn.K,wn=wn.w+(yr>>wn.b)*pn;yr<Yt;){var fi=Un,ja=wn,ti=1;for(Vs(st,pt,vr,_r-Lr,1,vr,_r);ti<Lr;){var xn=(ti&~Sn)+Ir;xn>Lr&&(xn=Lr),(0,qt[fi[ja++]>>8&15])(st,pt+ +ti,vr,_r+ti-Lr,xn-ti,vr,_r+ti),ti=xn}pt+=Lr,_r+=Lr,++yr&Sn||(wn+=pn)}er!=ft.nc&&n(et,He-Ht,et,He+(er-Bt-1)*Ht,Ht);break;case 1:for(Ht=st,Yt=pt,Lr=(st=ft.Ea)-(_r=st&~(vr=(pt=1<<ft.b)-1)),yr=tr(st,ft.b),Ir=ft.K,ft=ft.w+(Bt>>ft.b)*yr;Bt<er;){for(Sn=Ir,pn=ft,Un=new ut,wn=Yt+_r,fi=Yt+st;Yt<wn;)Ae(Sn[pn++],Un),ar(Un,Ht,Yt,pt,et,He),Yt+=pt,He+=pt;Yt<fi&&(Ae(Sn[pn++],Un),ar(Un,Ht,Yt,Lr,et,He),Yt+=Lr,He+=Lr),++Bt&vr||(ft+=yr)}break;case 3:if(st==et&&pt==He&&0<ft.b){for(Yt=et,st=Ht=He+(er-Bt)*Ht-(_r=(er-Bt)*tr(ft.Ea,ft.b)),pt=et,vr=He,yr=[],_r=(Lr=_r)-1;0<=_r;--_r)yr[_r]=pt[vr+_r];for(_r=Lr-1;0<=_r;--_r)Yt[st+_r]=yr[_r];sl(ft,Bt,er,et,Ht,et,He)}else sl(ft,Bt,er,st,pt,et,He)}He=de,et=re}et!=re&&n(de,re,He,et,Re)}function Vr(D,q){var re=D.V,de=D.Ba+D.c*D.C,Me=q-D.C;if(t(q<=D.l.o),t(16>=Me),0<Me){var Re=D.l,ze=D.Ta,He=D.Ua,et=Re.width;if(Ar(D,Me,re,de),Me=He=[He],t((re=D.C)<(de=q)),t(Re.v<Re.va),de>Re.o&&(de=Re.o),re<Re.j){var ft=Re.j-re;re=Re.j,Me[0]+=ft*et}if(re>=de?re=0:(Me[0]+=4*Re.v,Re.ka=re-Re.j,Re.U=Re.va-Re.v,Re.T=de-re,re=1),re){if(He=He[0],11>(re=D.ca).S){var Bt=re.f.RGBA,er=(de=re.S,Me=Re.U,Re=Re.T,ft=Bt.eb,Bt.A),st=Re;for(Bt=Bt.fb+D.Ma*Bt.A;0<st--;){var pt=ze,Ht=He,yr=Me,Yt=ft,vr=Bt;switch(de){case fl:qr(pt,Ht,yr,Yt,vr);break;case Pc:sn(pt,Ht,yr,Yt,vr);break;case Hd:sn(pt,Ht,yr,Yt,vr),ds(Yt,vr,0,yr,1,0);break;case ec:Ln(pt,Ht,yr,Yt,vr);break;case Hs:kt(pt,Ht,yr,Yt,vr,1);break;case Qf:kt(pt,Ht,yr,Yt,vr,1),ds(Yt,vr,0,yr,1,0);break;case Uh:kt(pt,Ht,yr,Yt,vr,0);break;case Au:kt(pt,Ht,yr,Yt,vr,0),ds(Yt,vr,1,yr,1,0);break;case Vd:ci(pt,Ht,yr,Yt,vr);break;case Ic:ci(pt,Ht,yr,Yt,vr),Qu(Yt,vr,yr,1,0);break;case Gd:gn(pt,Ht,yr,Yt,vr);break;default:t(0)}He+=et,Bt+=er}D.Ma+=Re}else alert("todo:EmitRescaledRowsYUVA");t(D.Ma<=re.height)}}D.C=q,t(D.C<=D.i)}function Rr(D){var q;if(0<D.ua)return 0;for(q=0;q<D.Wb;++q){var re=D.Ya[q].G,de=D.Ya[q].H;if(0<re[1][de[1]+0].g||0<re[2][de[2]+0].g||0<re[3][de[3]+0].g)return 0}return 1}function lr(D,q,re,de,Me,Re){if(D.Z!=0){var ze=D.qd,He=D.rd;for(t(Fl[D.Z]!=null);q<re;++q)Fl[D.Z](ze,He,de,Me,de,Me,Re),ze=de,He=Me,Me+=Re;D.qd=ze,D.rd=He}}function kr(D,q){var re=D.l.ma,de=re.Z==0||re.Z==1?D.l.j:D.C;if(de=D.C<de?de:D.C,t(q<=D.l.o),q>de){var Me=D.l.width,Re=re.ca,ze=re.tb+Me*de,He=D.V,et=D.Ba+D.c*de,ft=D.gc;t(D.ab==1),t(ft[0].hc==3),Ll(ft[0],de,q,He,et,Re,ze),lr(re,de,q,Re,ze,Me)}D.C=D.Ma=q}function Yr(D,q,re,de,Me,Re,ze){var He=D.$/de,et=D.$%de,ft=D.m,Bt=D.s,er=re+D.$,st=er;Me=re+de*Me;var pt=re+de*Re,Ht=280+Bt.ua,yr=D.Pb?He:16777216,Yt=0<Bt.ua?Bt.Wa:null,vr=Bt.wc,_r=er<pt?or(Bt,et,He):null;t(D.C<Re),t(pt<=Me);var Lr=!1;e:for(;;){for(;Lr||er<pt;){var Ir=0;if(He>=yr){var Sn=er-re;t((yr=D).Pb),yr.wd=yr.m,yr.xd=Sn,0<yr.s.ua&&fr(yr.s.Wa,yr.s.vb),yr=He+Zd}if(et&vr||(_r=or(Bt,et,He)),t(_r!=null),_r.Qb&&(q[er]=_r.qb,Lr=!0),!Lr)if(ht(ft),_r.jc){Ir=ft,Sn=q;var pn=er,Un=_r.pd[Ie(Ir)&da-1];t(_r.jc),256>Un.g?(Ve(Ir,Ir.u+Un.g),Sn[pn]=Un.value,Ir=0):(Ve(Ir,Ir.u+Un.g-256),t(256<=Un.value),Ir=Un.value),Ir==0&&(Lr=!0)}else Ir=_t(_r.G[0],_r.H[0],ft);if(ft.h)break;if(Lr||256>Ir){if(!Lr)if(_r.nd)q[er]=(_r.qb|Ir<<8)>>>0;else{if(ht(ft),Lr=_t(_r.G[1],_r.H[1],ft),ht(ft),Sn=_t(_r.G[2],_r.H[2],ft),pn=_t(_r.G[3],_r.H[3],ft),ft.h)break;q[er]=(pn<<24|Lr<<16|Ir<<8|Sn)>>>0}if(Lr=!1,++er,++et>=de&&(et=0,++He,ze!=null&&He<=Re&&!(He%16)&&ze(D,He),Yt!=null))for(;st<er;)Ir=q[st++],Yt.X[(506832829*Ir&4294967295)>>>Yt.Mb]=Ir}else if(280>Ir){if(Ir=_e(Ir-256,ft),Sn=_t(_r.G[4],_r.H[4],ft),ht(ft),Sn=Ze(de,Sn=_e(Sn,ft)),ft.h)break;if(er-re<Sn||Me-er<Ir)break e;for(pn=0;pn<Ir;++pn)q[er+pn]=q[er+pn-Sn];for(er+=Ir,et+=Ir;et>=de;)et-=de,++He,ze!=null&&He<=Re&&!(He%16)&&ze(D,He);if(t(er<=Me),et&vr&&(_r=or(Bt,et,He)),Yt!=null)for(;st<er;)Ir=q[st++],Yt.X[(506832829*Ir&4294967295)>>>Yt.Mb]=Ir}else{if(!(Ir<Ht))break e;for(Lr=Ir-280,t(Yt!=null);st<er;)Ir=q[st++],Yt.X[(506832829*Ir&4294967295)>>>Yt.Mb]=Ir;Ir=er,t(!(Lr>>>(Sn=Yt).Xa)),q[Ir]=Sn.X[Lr],Lr=!0}Lr||t(ft.h==Le(ft))}if(D.Pb&&ft.h&&er<Me)t(D.m.h),D.a=5,D.m=D.wd,D.$=D.xd,0<D.s.ua&&fr(D.s.vb,D.s.Wa);else{if(ft.h)break e;ze?.(D,He>Re?Re:He),D.a=0,D.$=er-re}return 1}return D.a=3,0}function dn(D){t(D!=null),D.vc=null,D.yc=null,D.Ya=null;var q=D.Wa;q!=null&&(q.X=null),D.vb=null,t(D!=null)}function Bn(){var D=new Pi;return D==null?null:(D.a=0,D.xb=Os,cr("Predictor","VP8LPredictors"),cr("Predictor","VP8LPredictors_C"),cr("PredictorAdd","VP8LPredictorsAdd"),cr("PredictorAdd","VP8LPredictorsAdd_C"),Yl=pe,ar=Be,qr=Tt,sn=bt,ci=tt,gn=gt,Ln=$t,J.VP8LMapColor32b=Gs,J.VP8LMapColor8b=Jl,D)}function Pn(D,q,re,de,Me){var Re=1,ze=[D],He=[q],et=de.m,ft=de.s,Bt=null,er=0;e:for(;;){if(re)for(;Re&&Je(et,1);){var st=ze,pt=He,Ht=de,yr=1,Yt=Ht.m,vr=Ht.gc[Ht.ab],_r=Je(Yt,2);if(Ht.Oc&1<<_r)Re=0;else{switch(Ht.Oc|=1<<_r,vr.hc=_r,vr.Ea=st[0],vr.nc=pt[0],vr.K=[null],++Ht.ab,t(4>=Ht.ab),_r){case 0:case 1:vr.b=Je(Yt,3)+2,yr=Pn(tr(vr.Ea,vr.b),tr(vr.nc,vr.b),0,Ht,vr.K),vr.K=vr.K[0];break;case 3:var Lr,Ir=Je(Yt,8)+1,Sn=16<Ir?0:4<Ir?1:2<Ir?2:3;if(st[0]=tr(vr.Ea,Sn),vr.b=Sn,Lr=yr=Pn(Ir,1,0,Ht,vr.K)){var pn,Un=Ir,wn=vr,fi=1<<(8>>wn.b),ja=s(fi);if(ja==null)Lr=0;else{var ti=wn.K[0],xn=wn.w;for(ja[0]=wn.K[0][0],pn=1;pn<1*Un;++pn)ja[pn]=Ge(ti[xn+pn],ja[pn-1]);for(;pn<4*fi;++pn)ja[pn]=0;wn.K[0]=null,wn.K[0]=ja,Lr=1}}yr=Lr;break;case 2:break;default:t(0)}Re=yr}}if(ze=ze[0],He=He[0],Re&&Je(et,1)&&!(Re=1<=(er=Je(et,4))&&11>=er)){de.a=3;break e}var Qr;if(Qr=Re)t:{var Ma,Gn,wi,Ii=de,Hn=ze,gs=He,aa=er,fo=re,_o=Ii.m,Ha=Ii.s,Ci=[null],Ni=1,Oa=0,oi=Mc[aa];r:for(;;){if(fo&&Je(_o,1)){var Wa=Je(_o,3)+2,rn=tr(Hn,Wa),en=tr(gs,Wa),xo=rn*en;if(!Pn(rn,en,0,Ii,Ci))break r;for(Ci=Ci[0],Ha.xc=Wa,Ma=0;Ma<xo;++Ma){var Bi=Ci[Ma]>>8&65535;Ci[Ma]=Bi,Bi>=Ni&&(Ni=Bi+1)}}if(_o.h)break r;for(Gn=0;5>Gn;++Gn){var za=Gh[Gn];!Gn&&0<aa&&(za+=1<<aa),Oa<za&&(Oa=za)}var ta=u(Ni*oi,oe),oa=Ni,ys=u(oa,ce);if(ys==null)var Rs=null;else t(65536>=oa),Rs=ys;var Ls=s(Oa);if(Rs==null||Ls==null||ta==null){Ii.a=1;break r}var Ws=ta;for(Ma=wi=0;Ma<Ni;++Ma){var ji=Rs[Ma],gi=ji.G,Mi=ji.H,Zs=0,Xs=1,ro=0;for(Gn=0;5>Gn;++Gn){za=Gh[Gn],gi[Gn]=Ws,Mi[Gn]=wi,!Gn&&0<aa&&(za+=1<<aa);i:{var ff,hf=za,df=Ii,Pu=Ls,Iu=Ws,Jh=wi,Dc=0,Bl=df.m,sh=Je(Bl,1);if(i(Pu,0,0,hf),sh){var tp=Je(Bl,1)+1,pf=Je(Bl,1),ic=Je(Bl,pf==0?1:8);Pu[ic]=1,tp==2&&(Pu[ic=Je(Bl,8)]=1);var mf=1}else{var gf=s(19),ac=Je(Bl,4)+4;if(19<ac){df.a=3;var yf=0;break i}for(ff=0;ff<ac;++ff)gf[Wh[ff]]=Je(Bl,3);var vf=void 0,oc=void 0,Qh=df,E=gf,l=hf,h=Pu,y=0,b=Qh.m,A=8,M=u(128,oe);n:for(;H(M,0,7,E,19);){if(Je(b,1)){var j=2+2*Je(b,3);if((vf=2+Je(b,j))>l)break n}else vf=l;for(oc=0;oc<l&&vf--;){ht(b);var V=M[0+(127&Ie(b))];Ve(b,b.u+V.g);var K=V.value;if(16>K)h[oc++]=K,K!=0&&(A=K);else{var te=K==16,he=K-16,fe=Wd[he],we=Je(b,Vh[he])+fe;if(oc+we>l)break n;for(var Oe=te?A:0;0<we--;)h[oc++]=Oe}}y=1;break n}y||(Qh.a=3),mf=y}(mf=mf&&!Bl.h)&&(Dc=H(Iu,Jh,8,Pu,hf)),mf&&Dc!=0?yf=Dc:(df.a=3,yf=0)}if(yf==0)break r;if(Xs&&Hh[Gn]==1&&(Xs=Ws[wi].g==0),Zs+=Ws[wi].g,wi+=yf,3>=Gn){var Xe,Qe=Ls[0];for(Xe=1;Xe<za;++Xe)Ls[Xe]>Qe&&(Qe=Ls[Xe]);ro+=Qe}}if(ji.nd=Xs,ji.Qb=0,Xs&&(ji.qb=(gi[3][Mi[3]+0].value<<24|gi[1][Mi[1]+0].value<<16|gi[2][Mi[2]+0].value)>>>0,Zs==0&&256>gi[0][Mi[0]+0].value&&(ji.Qb=1,ji.qb+=gi[0][Mi[0]+0].value<<8)),ji.jc=!ji.Qb&&6>ro,ji.jc){var Ye,at=ji;for(Ye=0;Ye<da;++Ye){var St=Ye,ot=at.pd[St],Et=at.G[0][at.H[0]+St];256<=Et.value?(ot.g=Et.g+256,ot.value=Et.value):(ot.g=0,ot.value=0,St>>=lt(Et,8,ot),St>>=lt(at.G[1][at.H[1]+St],16,ot),St>>=lt(at.G[2][at.H[2]+St],0,ot),lt(at.G[3][at.H[3]+St],24,ot))}}}Ha.vc=Ci,Ha.Wb=Ni,Ha.Ya=Rs,Ha.yc=ta,Qr=1;break t}Qr=0}if(!(Re=Qr)){de.a=3;break e}if(0<er){if(ft.ua=1<<er,!ke(ft.Wa,er)){de.a=1,Re=0;break e}}else ft.ua=0;var Pt=de,vt=ze,jt=He,nr=Pt.s,Xt=nr.xc;if(Pt.c=vt,Pt.i=jt,nr.md=tr(vt,Xt),nr.wc=Xt==0?-1:(1<<Xt)-1,re){de.xb=Rc;break e}if((Bt=s(ze*He))==null){de.a=1,Re=0;break e}Re=(Re=Yr(de,Bt,0,ze,He,He,null))&&!et.h;break e}return Re?(Me!=null?Me[0]=Bt:(t(Bt==null),t(re)),de.$=0,re||dn(ft)):dn(ft),Re}function un(D,q){var re=D.c*D.i,de=re+q+16*q;return t(D.c<=q),D.V=s(de),D.V==null?(D.Ta=null,D.Ua=0,D.a=1,0):(D.Ta=D.V,D.Ua=D.Ba+re+q,1)}function Wi(D,q){var re=D.C,de=q-re,Me=D.V,Re=D.Ba+D.c*re;for(t(q<=D.l.o);0<de;){var ze=16<de?16:de,He=D.l.ma,et=D.l.width,ft=et*ze,Bt=He.ca,er=He.tb+et*re,st=D.Ta,pt=D.Ua;Ar(D,ze,Me,Re),ps(st,pt,Bt,er,ft),lr(He,re,re+ze,Bt,er,et),de-=ze,Me+=ze*D.c,re+=ze}t(re==q),D.C=D.Ma=q}function Zi(){this.ub=this.yd=this.td=this.Rb=0}function Ui(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ri(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Pa(){this.Yb=(function(){var D=[];return(function q(re,de,Me){for(var Re=Me[de],ze=0;ze<Re&&(re.push(Me.length>de+1?[]:0),!(Me.length<de+1));ze++)q(re[ze],de+1,Me)})(D,0,[3,11]),D})()}function Vi(){this.jb=s(3),this.Wc=a([4,8],Pa),this.Xc=a([4,17],Pa)}function Ro(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dn(){this.ld=this.La=this.dd=this.tc=0}function cn(){this.Na=this.la=0}function Xi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ia(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ki(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dn),this.Y=0,this.ya=Array(new ia),this.aa=0,this.l=new mo}function vi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Yi(){this.cb=this.a=0,this.sc="",this.m=new ge,this.Od=new Zi,this.Kc=new Ui,this.ed=new Ro,this.Qa=new Ri,this.Ic=this.$c=this.Aa=0,this.D=new Ki,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,ge),this.ia=0,this.pb=u(4,Xi),this.Pa=new Vi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vi),this.Hd=0,this.rb=Array(new cn),this.sb=0,this.wa=Array(new Dn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ia),this.L=this.aa=0,this.gd=a([4,2],Dn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xs(){var D=new Yi;return D!=null&&(D.a=0,D.sc="OK",D.cb=0,D.Xb=0,eh||(eh=$s)),D}function fa(D,q,re){return D.a==0&&(D.a=q,D.sc=re,D.cb=0),0}function Gi(D,q,re){return 3<=re&&D[q+0]==157&&D[q+1]==1&&D[q+2]==42}function Cc(D,q){if(D==null)return 0;if(D.a=0,D.sc="OK",q==null)return fa(D,2,"null VP8Io passed to VP8GetHeaders()");var re=q.data,de=q.w,Me=q.ha;if(4>Me)return fa(D,7,"Truncated header.");var Re=re[de+0]|re[de+1]<<8|re[de+2]<<16,ze=D.Od;if(ze.Rb=!(1&Re),ze.td=Re>>1&7,ze.yd=Re>>4&1,ze.ub=Re>>5,3<ze.td)return fa(D,3,"Incorrect keyframe parameters.");if(!ze.yd)return fa(D,4,"Frame not displayable.");de+=3,Me-=3;var He=D.Kc;if(ze.Rb){if(7>Me)return fa(D,7,"cannot parse picture header");if(!Gi(re,de,Me))return fa(D,3,"Bad code word");He.c=16383&(re[de+4]<<8|re[de+3]),He.Td=re[de+4]>>6,He.i=16383&(re[de+6]<<8|re[de+5]),He.Ud=re[de+6]>>6,de+=7,Me-=7,D.za=He.c+15>>4,D.Ub=He.i+15>>4,q.width=He.c,q.height=He.i,q.Da=0,q.j=0,q.v=0,q.va=q.width,q.o=q.height,q.da=0,q.ib=q.width,q.hb=q.height,q.U=q.width,q.T=q.height,i((Re=D.Pa).jb,0,255,Re.jb.length),t((Re=D.Qa)!=null),Re.Cb=0,Re.Bb=0,Re.Fb=1,i(Re.Zb,0,0,Re.Zb.length),i(Re.Lb,0,0,Re.Lb)}if(ze.ub>Me)return fa(D,7,"bad partition length");be(Re=D.m,re,de,ze.ub),de+=ze.ub,Me-=ze.ub,ze.Rb&&(He.Ld=xt(Re),He.Kd=xt(Re)),He=D.Qa;var et,ft=D.Pa;if(t(Re!=null),t(He!=null),He.Cb=xt(Re),He.Cb){if(He.Bb=xt(Re),xt(Re)){for(He.Fb=xt(Re),et=0;4>et;++et)He.Zb[et]=xt(Re)?ve(Re,7):0;for(et=0;4>et;++et)He.Lb[et]=xt(Re)?ve(Re,6):0}if(He.Bb)for(et=0;3>et;++et)ft.jb[et]=xt(Re)?Te(Re,8):255}else He.Bb=0;if(Re.Ka)return fa(D,3,"cannot parse segment header");if((He=D.ed).zd=xt(Re),He.Tb=Te(Re,6),He.wb=Te(Re,3),He.Pc=xt(Re),He.Pc&&xt(Re)){for(ft=0;4>ft;++ft)xt(Re)&&(He.vd[ft]=ve(Re,6));for(ft=0;4>ft;++ft)xt(Re)&&(He.od[ft]=ve(Re,6))}if(D.L=He.Tb==0?0:He.zd?1:2,Re.Ka)return fa(D,3,"cannot parse filter header");var Bt=Me;if(Me=et=de,de=et+Bt,He=Bt,D.Xb=(1<<Te(D.m,2))-1,Bt<3*(ft=D.Xb))re=7;else{for(et+=3*ft,He-=3*ft,Bt=0;Bt<ft;++Bt){var er=re[Me+0]|re[Me+1]<<8|re[Me+2]<<16;er>He&&(er=He),be(D.Jc[+Bt],re,et,er),et+=er,He-=er,Me+=3}be(D.Jc[+ft],re,et,He),re=et<de?0:5}if(re!=0)return fa(D,re,"cannot parse partitions");for(re=Te(et=D.m,7),Me=xt(et)?ve(et,4):0,de=xt(et)?ve(et,4):0,He=xt(et)?ve(et,4):0,ft=xt(et)?ve(et,4):0,et=xt(et)?ve(et,4):0,Bt=D.Qa,er=0;4>er;++er){if(Bt.Cb){var st=Bt.Zb[er];Bt.Fb||(st+=re)}else{if(0<er){D.pb[er]=D.pb[0];continue}st=re}var pt=D.pb[er];pt.Sc[0]=Xd[ha(st+Me,127)],pt.Sc[1]=Oc[ha(st+0,127)],pt.Eb[0]=2*Xd[ha(st+de,127)],pt.Eb[1]=101581*Oc[ha(st+He,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=Xd[ha(st+ft,117)],pt.Qc[1]=Oc[ha(st+et,127)],pt.lc=st+et}if(!ze.Rb)return fa(D,4,"Not a key frame.");for(xt(Re),ze=D.Pa,re=0;4>re;++re){for(Me=0;8>Me;++Me)for(de=0;3>de;++de)for(He=0;11>He;++He)ft=rt(Re,nh[re][Me][de][He])?Te(Re,8):gm[re][Me][de][He],ze.Wc[re][Me].Yb[de][He]=ft;for(Me=0;17>Me;++Me)ze.Xc[re][Me]=ze.Wc[re][Zh[Me]]}return D.kc=xt(Re),D.kc&&(D.Bd=Te(Re,8)),D.cb=1}function $s(D,q,re,de,Me,Re,ze){var He=q[Me].Yb[re];for(re=0;16>Me;++Me){if(!rt(D,He[re+0]))return Me;for(;!rt(D,He[re+1]);)if(He=q[++Me].Yb[0],re=0,Me==16)return 16;var et=q[Me+1].Yb;if(rt(D,He[re+2])){var ft=D,Bt=0;if(rt(ft,(st=He)[(er=re)+3]))if(rt(ft,st[er+6])){for(He=0,er=2*(Bt=rt(ft,st[er+8]))+(st=rt(ft,st[er+9+Bt])),Bt=0,st=mm[er];st[He];++He)Bt+=Bt+rt(ft,st[He]);Bt+=3+(8<<er)}else rt(ft,st[er+7])?(Bt=7+2*rt(ft,165),Bt+=rt(ft,145)):Bt=5+rt(ft,159);else Bt=rt(ft,st[er+4])?3+rt(ft,st[er+5]):2;He=et[2]}else Bt=1,He=et[1];et=ze+th[Me],0>(ft=D).b&&It(ft);var er,st=ft.b,pt=(er=ft.Ca>>1)-(ft.I>>st)>>31;--ft.b,ft.Ca+=pt,ft.Ca|=1,ft.I-=(er+1&pt)<<st,Re[et]=((Bt^pt)-pt)*de[(0<Me)+0]}return 16}function as(D){var q=D.rb[D.sb-1];q.la=0,q.Na=0,i(D.zc,0,0,D.zc.length),D.ja=0}function os(D,q,re,de,Me){Me=D[q+re+32*de]+(Me>>3),D[q+re+32*de]=-256&Me?0>Me?0:255:Me}function Tl(D,q,re,de,Me,Re){os(D,q,0,re,de+Me),os(D,q,1,re,de+Re),os(D,q,2,re,de-Re),os(D,q,3,re,de-Me)}function ba(D){return(20091*D>>16)+D}function Wl(D,q,re,de){var Me,Re=0,ze=s(16);for(Me=0;4>Me;++Me){var He=D[q+0]+D[q+8],et=D[q+0]-D[q+8],ft=(35468*D[q+4]>>16)-ba(D[q+12]),Bt=ba(D[q+4])+(35468*D[q+12]>>16);ze[Re+0]=He+Bt,ze[Re+1]=et+ft,ze[Re+2]=et-ft,ze[Re+3]=He-Bt,Re+=4,q++}for(Me=Re=0;4>Me;++Me)He=(D=ze[Re+0]+4)+ze[Re+8],et=D-ze[Re+8],ft=(35468*ze[Re+4]>>16)-ba(ze[Re+12]),os(re,de,0,0,He+(Bt=ba(ze[Re+4])+(35468*ze[Re+12]>>16))),os(re,de,1,0,et+ft),os(re,de,2,0,et-ft),os(re,de,3,0,He-Bt),Re++,de+=32}function Ac(D,q,re,de){var Me=D[q+0]+4,Re=35468*D[q+4]>>16,ze=ba(D[q+4]),He=35468*D[q+1]>>16;Tl(re,de,0,Me+ze,D=ba(D[q+1]),He),Tl(re,de,1,Me+Re,D,He),Tl(re,de,2,Me-Re,D,He),Tl(re,de,3,Me-ze,D,He)}function Zl(D,q,re,de,Me){Wl(D,q,re,de),Me&&Wl(D,q+16,re,de+4)}function U(D,q,re,de){_i(D,q+0,re,de,1),_i(D,q+32,re,de+128,1)}function ne(D,q,re,de){var Me;for(D=D[q+0]+4,Me=0;4>Me;++Me)for(q=0;4>q;++q)os(re,de,q,Me,D)}function De(D,q,re,de){D[q+0]&&Va(D,q+0,re,de),D[q+16]&&Va(D,q+16,re,de+4),D[q+32]&&Va(D,q+32,re,de+128),D[q+48]&&Va(D,q+48,re,de+128+4)}function mt(D,q,re,de){var Me,Re=s(16);for(Me=0;4>Me;++Me){var ze=D[q+0+Me]+D[q+12+Me],He=D[q+4+Me]+D[q+8+Me],et=D[q+4+Me]-D[q+8+Me],ft=D[q+0+Me]-D[q+12+Me];Re[0+Me]=ze+He,Re[8+Me]=ze-He,Re[4+Me]=ft+et,Re[12+Me]=ft-et}for(Me=0;4>Me;++Me)ze=(D=Re[0+4*Me]+3)+Re[3+4*Me],He=Re[1+4*Me]+Re[2+4*Me],et=Re[1+4*Me]-Re[2+4*Me],ft=D-Re[3+4*Me],re[de+0]=ze+He>>3,re[de+16]=ft+et>>3,re[de+32]=ze-He>>3,re[de+48]=ft-et>>3,de+=64}function Mt(D,q,re){var de,Me=q-32,Re=co,ze=255-D[Me-1];for(de=0;de<re;++de){var He,et=Re,ft=ze+D[q-1];for(He=0;He<re;++He)D[q+He]=et[ft+D[Me+He]];q+=32}}function Dt(D,q){Mt(D,q,4)}function Ut(D,q){Mt(D,q,8)}function Tr(D,q){Mt(D,q,16)}function Mr(D,q){var re;for(re=0;16>re;++re)n(D,q+32*re,D,q-32,16)}function Fr(D,q){var re;for(re=16;0<re;--re)i(D,q,D[q-1],16),q+=32}function Nr(D,q,re){var de;for(de=0;16>de;++de)i(q,re+32*de,D,16)}function hr(D,q){var re,de=16;for(re=0;16>re;++re)de+=D[q-1+32*re]+D[q+re-32];Nr(de>>5,D,q)}function In(D,q){var re,de=8;for(re=0;16>re;++re)de+=D[q-1+32*re];Nr(de>>4,D,q)}function Li(D,q){var re,de=8;for(re=0;16>re;++re)de+=D[q+re-32];Nr(de>>4,D,q)}function Rn(D,q){Nr(128,D,q)}function tn(D,q,re){return D+2*q+re+2>>2}function pr(D,q){var re,de=q-32;for(de=new Uint8Array([tn(D[de-1],D[de+0],D[de+1]),tn(D[de+0],D[de+1],D[de+2]),tn(D[de+1],D[de+2],D[de+3]),tn(D[de+2],D[de+3],D[de+4])]),re=0;4>re;++re)n(D,q+32*re,de,0,de.length)}function $r(D,q){var re=D[q-1],de=D[q-1+32],Me=D[q-1+64],Re=D[q-1+96];zt(D,q+0,16843009*tn(D[q-1-32],re,de)),zt(D,q+32,16843009*tn(re,de,Me)),zt(D,q+64,16843009*tn(de,Me,Re)),zt(D,q+96,16843009*tn(Me,Re,Re))}function Wr(D,q){var re,de=4;for(re=0;4>re;++re)de+=D[q+re-32]+D[q-1+32*re];for(de>>=3,re=0;4>re;++re)i(D,q+32*re,de,4)}function jn(D,q){var re=D[q-1+0],de=D[q-1+32],Me=D[q-1+64],Re=D[q-1-32],ze=D[q+0-32],He=D[q+1-32],et=D[q+2-32],ft=D[q+3-32];D[q+0+96]=tn(de,Me,D[q-1+96]),D[q+1+96]=D[q+0+64]=tn(re,de,Me),D[q+2+96]=D[q+1+64]=D[q+0+32]=tn(Re,re,de),D[q+3+96]=D[q+2+64]=D[q+1+32]=D[q+0+0]=tn(ze,Re,re),D[q+3+64]=D[q+2+32]=D[q+1+0]=tn(He,ze,Re),D[q+3+32]=D[q+2+0]=tn(et,He,ze),D[q+3+0]=tn(ft,et,He)}function di(D,q){var re=D[q+1-32],de=D[q+2-32],Me=D[q+3-32],Re=D[q+4-32],ze=D[q+5-32],He=D[q+6-32],et=D[q+7-32];D[q+0+0]=tn(D[q+0-32],re,de),D[q+1+0]=D[q+0+32]=tn(re,de,Me),D[q+2+0]=D[q+1+32]=D[q+0+64]=tn(de,Me,Re),D[q+3+0]=D[q+2+32]=D[q+1+64]=D[q+0+96]=tn(Me,Re,ze),D[q+3+32]=D[q+2+64]=D[q+1+96]=tn(Re,ze,He),D[q+3+64]=D[q+2+96]=tn(ze,He,et),D[q+3+96]=tn(He,et,et)}function Ji(D,q){var re=D[q-1+0],de=D[q-1+32],Me=D[q-1+64],Re=D[q-1-32],ze=D[q+0-32],He=D[q+1-32],et=D[q+2-32],ft=D[q+3-32];D[q+0+0]=D[q+1+64]=Re+ze+1>>1,D[q+1+0]=D[q+2+64]=ze+He+1>>1,D[q+2+0]=D[q+3+64]=He+et+1>>1,D[q+3+0]=et+ft+1>>1,D[q+0+96]=tn(Me,de,re),D[q+0+64]=tn(de,re,Re),D[q+0+32]=D[q+1+96]=tn(re,Re,ze),D[q+1+32]=D[q+2+96]=tn(Re,ze,He),D[q+2+32]=D[q+3+96]=tn(ze,He,et),D[q+3+32]=tn(He,et,ft)}function Lo(D,q){var re=D[q+0-32],de=D[q+1-32],Me=D[q+2-32],Re=D[q+3-32],ze=D[q+4-32],He=D[q+5-32],et=D[q+6-32],ft=D[q+7-32];D[q+0+0]=re+de+1>>1,D[q+1+0]=D[q+0+64]=de+Me+1>>1,D[q+2+0]=D[q+1+64]=Me+Re+1>>1,D[q+3+0]=D[q+2+64]=Re+ze+1>>1,D[q+0+32]=tn(re,de,Me),D[q+1+32]=D[q+0+96]=tn(de,Me,Re),D[q+2+32]=D[q+1+96]=tn(Me,Re,ze),D[q+3+32]=D[q+2+96]=tn(Re,ze,He),D[q+3+64]=tn(ze,He,et),D[q+3+96]=tn(He,et,ft)}function Jn(D,q){var re=D[q-1+0],de=D[q-1+32],Me=D[q-1+64],Re=D[q-1+96];D[q+0+0]=re+de+1>>1,D[q+2+0]=D[q+0+32]=de+Me+1>>1,D[q+2+32]=D[q+0+64]=Me+Re+1>>1,D[q+1+0]=tn(re,de,Me),D[q+3+0]=D[q+1+32]=tn(de,Me,Re),D[q+3+32]=D[q+1+64]=tn(Me,Re,Re),D[q+3+64]=D[q+2+64]=D[q+0+96]=D[q+1+96]=D[q+2+96]=D[q+3+96]=Re}function ws(D,q){var re=D[q-1+0],de=D[q-1+32],Me=D[q-1+64],Re=D[q-1+96],ze=D[q-1-32],He=D[q+0-32],et=D[q+1-32],ft=D[q+2-32];D[q+0+0]=D[q+2+32]=re+ze+1>>1,D[q+0+32]=D[q+2+64]=de+re+1>>1,D[q+0+64]=D[q+2+96]=Me+de+1>>1,D[q+0+96]=Re+Me+1>>1,D[q+3+0]=tn(He,et,ft),D[q+2+0]=tn(ze,He,et),D[q+1+0]=D[q+3+32]=tn(re,ze,He),D[q+1+32]=D[q+3+64]=tn(de,re,ze),D[q+1+64]=D[q+3+96]=tn(Me,de,re),D[q+1+96]=tn(Re,Me,de)}function Ss(D,q){var re;for(re=0;8>re;++re)n(D,q+32*re,D,q-32,8)}function ui(D,q){var re;for(re=0;8>re;++re)i(D,q,D[q-1],8),q+=32}function ss(D,q,re){var de;for(de=0;8>de;++de)i(q,re+32*de,D,8)}function go(D,q){var re,de=8;for(re=0;8>re;++re)de+=D[q+re-32]+D[q-1+32*re];ss(de>>4,D,q)}function xu(D,q){var re,de=4;for(re=0;8>re;++re)de+=D[q+re-32];ss(de>>3,D,q)}function Na(D,q){var re,de=4;for(re=0;8>re;++re)de+=D[q-1+32*re];ss(de>>3,D,q)}function Es(D,q){ss(128,D,q)}function yo(D,q,re){var de=D[q-re],Me=D[q+0],Re=3*(Me-de)+kl[1020+D[q-2*re]-D[q+re]],ze=nu[112+(Re+4>>3)];D[q-re]=co[255+de+nu[112+(Re+3>>3)]],D[q+0]=co[255+Me-ze]}function Xl(D,q,re,de){var Me=D[q+0],Re=D[q+re];return Cn[255+D[q-2*re]-D[q-re]]>de||Cn[255+Re-Me]>de}function wu(D,q,re,de){return 4*Cn[255+D[q-re]-D[q+0]]+Cn[255+D[q-2*re]-D[q+re]]<=de}function Cs(D,q,re,de,Me){var Re=D[q-3*re],ze=D[q-2*re],He=D[q-re],et=D[q+0],ft=D[q+re],Bt=D[q+2*re],er=D[q+3*re];return 4*Cn[255+He-et]+Cn[255+ze-ft]>de?0:Cn[255+D[q-4*re]-Re]<=Me&&Cn[255+Re-ze]<=Me&&Cn[255+ze-He]<=Me&&Cn[255+er-Bt]<=Me&&Cn[255+Bt-ft]<=Me&&Cn[255+ft-et]<=Me}function bi(D,q,re,de){var Me=2*de+1;for(de=0;16>de;++de)wu(D,q+de,re,Me)&&yo(D,q+de,re)}function ls(D,q,re,de){var Me=2*de+1;for(de=0;16>de;++de)wu(D,q+de*re,1,Me)&&yo(D,q+de*re,1)}function Xn(D,q,re,de){var Me;for(Me=3;0<Me;--Me)bi(D,q+=4*re,re,de)}function kn(D,q,re,de){var Me;for(Me=3;0<Me;--Me)ls(D,q+=4,re,de)}function eo(D,q,re,de,Me,Re,ze,He){for(Re=2*Re+1;0<Me--;){if(Cs(D,q,re,Re,ze))if(Xl(D,q,re,He))yo(D,q,re);else{var et=D,ft=q,Bt=re,er=et[ft-2*Bt],st=et[ft-Bt],pt=et[ft+0],Ht=et[ft+Bt],yr=et[ft+2*Bt],Yt=27*(_r=kl[1020+3*(pt-st)+kl[1020+er-Ht]])+63>>7,vr=18*_r+63>>7,_r=9*_r+63>>7;et[ft-3*Bt]=co[255+et[ft-3*Bt]+_r],et[ft-2*Bt]=co[255+er+vr],et[ft-Bt]=co[255+st+Yt],et[ft+0]=co[255+pt-Yt],et[ft+Bt]=co[255+Ht-vr],et[ft+2*Bt]=co[255+yr-_r]}q+=de}}function Nn(D,q,re,de,Me,Re,ze,He){for(Re=2*Re+1;0<Me--;){if(Cs(D,q,re,Re,ze))if(Xl(D,q,re,He))yo(D,q,re);else{var et=D,ft=q,Bt=re,er=et[ft-Bt],st=et[ft+0],pt=et[ft+Bt],Ht=nu[112+(4+(yr=3*(st-er))>>3)],yr=nu[112+(yr+3>>3)],Yt=Ht+1>>1;et[ft-2*Bt]=co[255+et[ft-2*Bt]+Yt],et[ft-Bt]=co[255+er+yr],et[ft+0]=co[255+st-Ht],et[ft+Bt]=co[255+pt-Yt]}q+=de}}function Y(D,q,re,de,Me,Re){eo(D,q,re,1,16,de,Me,Re)}function Pe(D,q,re,de,Me,Re){eo(D,q,1,re,16,de,Me,Re)}function it(D,q,re,de,Me,Re){var ze;for(ze=3;0<ze;--ze)Nn(D,q+=4*re,re,1,16,de,Me,Re)}function Ot(D,q,re,de,Me,Re){var ze;for(ze=3;0<ze;--ze)Nn(D,q+=4,1,re,16,de,Me,Re)}function Gt(D,q,re,de,Me,Re,ze,He){eo(D,q,Me,1,8,Re,ze,He),eo(re,de,Me,1,8,Re,ze,He)}function br(D,q,re,de,Me,Re,ze,He){eo(D,q,1,Me,8,Re,ze,He),eo(re,de,1,Me,8,Re,ze,He)}function Pr(D,q,re,de,Me,Re,ze,He){Nn(D,q+4*Me,Me,1,8,Re,ze,He),Nn(re,de+4*Me,Me,1,8,Re,ze,He)}function hn(D,q,re,de,Me,Re,ze,He){Nn(D,q+4,1,Me,8,Re,ze,He),Nn(re,de+4,1,Me,8,Re,ze,He)}function bn(){this.ba=new Kr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _n(){this.ua=0,this.Wa=new sr,this.vb=new sr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ce,this.yc=new oe}function Pi(){this.xb=this.a=0,this.l=new mo,this.ca=new Kr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _n,this.ab=0,this.gc=u(4,Mn),this.Oc=0}function _a(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ei(D,q,re,de,Me,Re,ze){for(D=D==null?0:D[q+0],q=0;q<ze;++q)Me[Re+q]=D+re[de+q]&255,D=Me[Re+q]}function Vn(D,q,re,de,Me,Re,ze){var He;if(D==null)Ei(null,null,re,de,Me,Re,ze);else for(He=0;He<ze;++He)Me[Re+He]=D[q+He]+re[de+He]&255}function Qi(D,q,re,de,Me,Re,ze){if(D==null)Ei(null,null,re,de,Me,Re,ze);else{var He,et=D[q+0],ft=et,Bt=et;for(He=0;He<ze;++He)ft=Bt+(et=D[q+He])-ft,Bt=re[de+He]+(-256&ft?0>ft?0:255:ft)&255,ft=et,Me[Re+He]=Bt}}function Ia(D,q,re,de){var Me=q.width,Re=q.o;if(t(D!=null&&q!=null),0>re||0>=de||re+de>Re)return null;if(!D.Cc){if(D.ga==null){var ze;if(D.ga=new _a,(ze=D.ga==null)||(ze=q.width*q.o,t(D.Gb.length==0),D.Gb=s(ze),D.Uc=0,D.Gb==null?ze=0:(D.mb=D.Gb,D.nb=D.Uc,D.rc=null,ze=1),ze=!ze),!ze){ze=D.ga;var He=D.Fa,et=D.P,ft=D.qc,Bt=D.mb,er=D.nb,st=et+1,pt=ft-1,Ht=ze.l;if(t(He!=null&&Bt!=null&&q!=null),Fl[0]=null,Fl[1]=Ei,Fl[2]=Vn,Fl[3]=Qi,ze.ca=Bt,ze.tb=er,ze.c=q.width,ze.i=q.height,t(0<ze.c&&0<ze.i),1>=ft)q=0;else if(ze.$a=3&He[et+0],ze.Z=He[et+0]>>2&3,ze.Lc=He[et+0]>>4&3,et=He[et+0]>>6&3,0>ze.$a||1<ze.$a||4<=ze.Z||1<ze.Lc||et)q=0;else if(Ht.put=Ct,Ht.ac=wt,Ht.bc=Wt,Ht.ma=ze,Ht.width=q.width,Ht.height=q.height,Ht.Da=q.Da,Ht.v=q.v,Ht.va=q.va,Ht.j=q.j,Ht.o=q.o,ze.$a)e:{t(ze.$a==1),q=Bn();t:for(;;){if(q==null){q=0;break e}if(t(ze!=null),ze.mc=q,q.c=ze.c,q.i=ze.i,q.l=ze.l,q.l.ma=ze,q.l.width=ze.c,q.l.height=ze.i,q.a=0,Ce(q.m,He,st,pt),!Pn(ze.c,ze.i,1,q,null)||(q.ab==1&&q.gc[0].hc==3&&Rr(q.s)?(ze.ic=1,He=q.c*q.i,q.Ta=null,q.Ua=0,q.V=s(He),q.Ba=0,q.V==null?(q.a=1,q=0):q=1):(ze.ic=0,q=un(q,ze.c)),!q))break t;q=1;break e}ze.mc=null,q=0}else q=pt>=ze.c*ze.i;ze=!q}if(ze)return null;D.ga.Lc!=1?D.Ga=0:de=Re-re}t(D.ga!=null),t(re+de<=Re);e:{if(q=(He=D.ga).c,Re=He.l.o,He.$a==0){if(st=D.rc,pt=D.Vc,Ht=D.Fa,et=D.P+1+re*q,ft=D.mb,Bt=D.nb+re*q,t(et<=D.P+D.qc),He.Z!=0)for(t(Fl[He.Z]!=null),ze=0;ze<de;++ze)Fl[He.Z](st,pt,Ht,et,ft,Bt,q),st=ft,pt=Bt,Bt+=q,et+=q;else for(ze=0;ze<de;++ze)n(ft,Bt,Ht,et,q),st=ft,pt=Bt,Bt+=q,et+=q;D.rc=st,D.Vc=pt}else{if(t(He.mc!=null),q=re+de,t((ze=He.mc)!=null),t(q<=ze.i),ze.C>=q)q=1;else if(He.ic||Ps(),He.ic){He=ze.V,st=ze.Ba,pt=ze.c;var yr=ze.i,Yt=(Ht=1,et=ze.$/pt,ft=ze.$%pt,Bt=ze.m,er=ze.s,ze.$),vr=pt*yr,_r=pt*q,Lr=er.wc,Ir=Yt<_r?or(er,ft,et):null;t(Yt<=vr),t(q<=yr),t(Rr(er));t:for(;;){for(;!Bt.h&&Yt<_r;){if(ft&Lr||(Ir=or(er,ft,et)),t(Ir!=null),ht(Bt),256>(yr=_t(Ir.G[0],Ir.H[0],Bt)))He[st+Yt]=yr,++Yt,++ft>=pt&&(ft=0,++et<=q&&!(et%16)&&kr(ze,et));else{if(!(280>yr)){Ht=0;break t}yr=_e(yr-256,Bt);var Sn,pn=_t(Ir.G[4],Ir.H[4],Bt);if(ht(Bt),!(Yt>=(pn=Ze(pt,pn=_e(pn,Bt)))&&vr-Yt>=yr)){Ht=0;break t}for(Sn=0;Sn<yr;++Sn)He[st+Yt+Sn]=He[st+Yt+Sn-pn];for(Yt+=yr,ft+=yr;ft>=pt;)ft-=pt,++et<=q&&!(et%16)&&kr(ze,et);Yt<_r&&ft&Lr&&(Ir=or(er,ft,et))}t(Bt.h==Le(Bt))}kr(ze,et>q?q:et);break t}!Ht||Bt.h&&Yt<vr?(Ht=0,ze.a=Bt.h?5:3):ze.$=Yt,q=Ht}else q=Yr(ze,ze.V,ze.Ba,ze.c,ze.i,q,Wi);if(!q){de=0;break e}}re+de>=Re&&(D.Cc=1),de=1}if(!de)return null;if(D.Cc&&((de=D.ga)!=null&&(de.mc=null),D.ga=null,0<D.Ga))return alert("todo:WebPDequantizeLevels"),null}return D.nb+re*Me}function As(D,q,re,de,Me,Re){for(;0<Me--;){var ze,He=D,et=q+(re?1:0),ft=D,Bt=q+(re?0:3);for(ze=0;ze<de;++ze){var er=ft[Bt+4*ze];er!=255&&(er*=32897,He[et+4*ze+0]=He[et+4*ze+0]*er>>23,He[et+4*ze+1]=He[et+4*ze+1]*er>>23,He[et+4*ze+2]=He[et+4*ze+2]*er>>23)}q+=Re}}function ol(D,q,re,de,Me){for(;0<de--;){var Re;for(Re=0;Re<re;++Re){var ze=D[q+2*Re+0],He=15&(ft=D[q+2*Re+1]),et=4369*He,ft=(240&ft|ft>>4)*et>>16;D[q+2*Re+0]=(240&ze|ze>>4)*et>>16&240|(15&ze|ze<<4)*et>>16>>4&15,D[q+2*Re+1]=240&ft|He}q+=Me}}function Ts(D,q,re,de,Me,Re,ze,He){var et,ft,Bt=255;for(ft=0;ft<Me;++ft){for(et=0;et<de;++et){var er=D[q+et];Re[ze+4*et]=er,Bt&=er}q+=re,ze+=He}return Bt!=255}function Su(D,q,re,de,Me){var Re;for(Re=0;Re<Me;++Re)re[de+Re]=D[q+Re]>>8}function Ps(){ds=As,Qu=ol,Ga=Ts,ps=Su}function us(D,q,re){J[D]=function(de,Me,Re,ze,He,et,ft,Bt,er,st,pt,Ht,yr,Yt,vr,_r,Lr){var Ir,Sn=Lr-1>>1,pn=He[et+0]|ft[Bt+0]<<16,Un=er[st+0]|pt[Ht+0]<<16;t(de!=null);var wn=3*pn+Un+131074>>2;for(q(de[Me+0],255&wn,wn>>16,yr,Yt),Re!=null&&(wn=3*Un+pn+131074>>2,q(Re[ze+0],255&wn,wn>>16,vr,_r)),Ir=1;Ir<=Sn;++Ir){var fi=He[et+Ir]|ft[Bt+Ir]<<16,ja=er[st+Ir]|pt[Ht+Ir]<<16,ti=pn+fi+Un+ja+524296,xn=ti+2*(fi+Un)>>3;wn=xn+pn>>1,pn=(ti=ti+2*(pn+ja)>>3)+fi>>1,q(de[Me+2*Ir-1],255&wn,wn>>16,yr,Yt+(2*Ir-1)*re),q(de[Me+2*Ir-0],255&pn,pn>>16,yr,Yt+(2*Ir-0)*re),Re!=null&&(wn=ti+Un>>1,pn=xn+ja>>1,q(Re[ze+2*Ir-1],255&wn,wn>>16,vr,_r+(2*Ir-1)*re),q(Re[ze+2*Ir+0],255&pn,pn>>16,vr,_r+(2*Ir+0)*re)),pn=fi,Un=ja}1&Lr||(wn=3*pn+Un+131074>>2,q(de[Me+Lr-1],255&wn,wn>>16,yr,Yt+(Lr-1)*re),Re!=null&&(wn=3*Un+pn+131074>>2,q(Re[ze+Lr-1],255&wn,wn>>16,vr,_r+(Lr-1)*re)))}}function Pl(){Xo[fl]=Xh,Xo[Pc]=uf,Xo[ec]=rc,Xo[Hs]=nc,Xo[Uh]=Lc,Xo[Vd]=Kd,Xo[Gd]=vm,Xo[Hd]=uf,Xo[Qf]=nc,Xo[Au]=Lc,Xo[Ic]=Kd}function qs(D){return D&-16384?0>D?0:255:D>>Yd}function Go(D,q){return qs((19077*D>>8)+(26149*q>>8)-14234)}function ni(D,q,re){return qs((19077*D>>8)-(6419*q>>8)-(13320*re>>8)+8708)}function vo(D,q){return qs((19077*D>>8)+(33050*q>>8)-17685)}function xa(D,q,re,de,Me){de[Me+0]=Go(D,re),de[Me+1]=ni(D,q,re),de[Me+2]=vo(D,q)}function bo(D,q,re,de,Me){de[Me+0]=vo(D,q),de[Me+1]=ni(D,q,re),de[Me+2]=Go(D,re)}function Ho(D,q,re,de,Me){var Re=ni(D,q,re);q=Re<<3&224|vo(D,q)>>3,de[Me+0]=248&Go(D,re)|Re>>5,de[Me+1]=q}function wa(D,q,re,de,Me){var Re=240&vo(D,q)|15;de[Me+0]=240&Go(D,re)|ni(D,q,re)>>4,de[Me+1]=Re}function Eu(D,q,re,de,Me){de[Me+0]=255,xa(D,q,re,de,Me+1)}function Il(D,q,re,de,Me){bo(D,q,re,de,Me),de[Me+3]=255}function cs(D,q,re,de,Me){xa(D,q,re,de,Me),de[Me+3]=255}function ha(D,q){return 0>D?0:D>q?q:D}function Wo(D,q,re){J[D]=function(de,Me,Re,ze,He,et,ft,Bt,er){for(var st=Bt+(-2&er)*re;Bt!=st;)q(de[Me+0],Re[ze+0],He[et+0],ft,Bt),q(de[Me+1],Re[ze+0],He[et+0],ft,Bt+re),Me+=2,++ze,++et,Bt+=2*re;1&er&&q(de[Me+0],Re[ze+0],He[et+0],ft,Bt)}}function Ku(D,q,re){return re==0?D==0?q==0?6:5:q==0?4:0:re}function Cu(D,q,re,de,Me){switch(D>>>30){case 3:_i(q,re,de,Me,0);break;case 2:$i(q,re,de,Me);break;case 1:Va(q,re,de,Me)}}function Us(D,q){var re,de,Me=q.M,Re=q.Nb,ze=D.oc,He=D.pc+40,et=D.oc,ft=D.pc+584,Bt=D.oc,er=D.pc+600;for(re=0;16>re;++re)ze[He+32*re-1]=129;for(re=0;8>re;++re)et[ft+32*re-1]=129,Bt[er+32*re-1]=129;for(0<Me?ze[He-1-32]=et[ft-1-32]=Bt[er-1-32]=129:(i(ze,He-32-1,127,21),i(et,ft-32-1,127,9),i(Bt,er-32-1,127,9)),de=0;de<D.za;++de){var st=q.ya[q.aa+de];if(0<de){for(re=-1;16>re;++re)n(ze,He+32*re-4,ze,He+32*re+12,4);for(re=-1;8>re;++re)n(et,ft+32*re-4,et,ft+32*re+4,4),n(Bt,er+32*re-4,Bt,er+32*re+4,4)}var pt=D.Gd,Ht=D.Hd+de,yr=st.ad,Yt=st.Hc;if(0<Me&&(n(ze,He-32,pt[Ht].y,0,16),n(et,ft-32,pt[Ht].f,0,8),n(Bt,er-32,pt[Ht].ea,0,8)),st.Za){var vr=ze,_r=He-32+16;for(0<Me&&(de>=D.za-1?i(vr,_r,pt[Ht].y[15],4):n(vr,_r,pt[Ht+1].y,0,4)),re=0;4>re;re++)vr[_r+128+re]=vr[_r+256+re]=vr[_r+384+re]=vr[_r+0+re];for(re=0;16>re;++re,Yt<<=2)vr=ze,_r=He+Yh[re],hl[st.Ob[re]](vr,_r),Cu(Yt,yr,16*+re,vr,_r)}else if(vr=Ku(de,Me,st.Ob[0]),Tu[vr](ze,He),Yt!=0)for(re=0;16>re;++re,Yt<<=2)Cu(Yt,yr,16*+re,ze,He+Yh[re]);for(re=st.Gc,vr=Ku(de,Me,st.Dd),Fi[vr](et,ft),Fi[vr](Bt,er),Yt=yr,vr=et,_r=ft,255&(st=0|re)&&(170&st?ea(Yt,256,vr,_r):hs(Yt,256,vr,_r)),st=Bt,Yt=er,255&(re>>=8)&&(170&re?ea(yr,320,st,Yt):hs(yr,320,st,Yt)),Me<D.Ub-1&&(n(pt[Ht].y,0,ze,He+480,16),n(pt[Ht].f,0,et,ft+224,8),n(pt[Ht].ea,0,Bt,er+224,8)),re=8*Re*D.B,pt=D.sa,Ht=D.ta+16*de+16*Re*D.R,yr=D.qa,st=D.ra+8*de+re,Yt=D.Ha,vr=D.Ia+8*de+re,re=0;16>re;++re)n(pt,Ht+re*D.R,ze,He+32*re,16);for(re=0;8>re;++re)n(yr,st+re*D.B,et,ft+32*re,8),n(Yt,vr+re*D.B,Bt,er+32*re,8)}}function Ml(D,q,re,de,Me,Re,ze,He,et){var ft=[0],Bt=[0],er=0,st=et!=null?et.kd:0,pt=et??new yn;if(D==null||12>re)return 7;pt.data=D,pt.w=q,pt.ha=re,q=[q],re=[re],pt.gb=[pt.gb];e:{var Ht=q,yr=re,Yt=pt.gb;if(t(D!=null),t(yr!=null),t(Yt!=null),Yt[0]=0,12<=yr[0]&&!r(D,Ht[0],"RIFF")){if(r(D,Ht[0]+8,"WEBP")){Yt=3;break e}var vr=dt(D,Ht[0]+4);if(12>vr||4294967286<vr){Yt=3;break e}if(st&&vr>yr[0]-8){Yt=7;break e}Yt[0]=vr,Ht[0]+=12,yr[0]-=12}Yt=0}if(Yt!=0)return Yt;for(vr=0<pt.gb[0],re=re[0];;){e:{var _r=D;yr=q,Yt=re;var Lr=ft,Ir=Bt,Sn=Ht=[0];if((wn=er=[er])[0]=0,8>Yt[0])Yt=7;else{if(!r(_r,yr[0],"VP8X")){if(dt(_r,yr[0]+4)!=10){Yt=3;break e}if(18>Yt[0]){Yt=7;break e}var pn=dt(_r,yr[0]+8),Un=1+Ft(_r,yr[0]+12);if(2147483648<=Un*(_r=1+Ft(_r,yr[0]+15))){Yt=3;break e}Sn!=null&&(Sn[0]=pn),Lr!=null&&(Lr[0]=Un),Ir!=null&&(Ir[0]=_r),yr[0]+=18,Yt[0]-=18,wn[0]=1}Yt=0}}if(er=er[0],Ht=Ht[0],Yt!=0)return Yt;if(yr=!!(2&Ht),!vr&&er)return 3;if(Re!=null&&(Re[0]=!!(16&Ht)),ze!=null&&(ze[0]=yr),He!=null&&(He[0]=0),ze=ft[0],Ht=Bt[0],er&&yr&&et==null){Yt=0;break}if(4>re){Yt=7;break}if(vr&&er||!vr&&!er&&!r(D,q[0],"ALPH")){re=[re],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{pn=D,Yt=q,vr=re;var wn=pt.gb;Lr=pt.na,Ir=pt.P,Sn=pt.Sa,Un=22,t(pn!=null),t(vr!=null),_r=Yt[0];var fi=vr[0];for(t(Lr!=null),t(Sn!=null),Lr[0]=null,Ir[0]=null,Sn[0]=0;;){if(Yt[0]=_r,vr[0]=fi,8>fi){Yt=7;break e}var ja=dt(pn,_r+4);if(4294967286<ja){Yt=3;break e}var ti=8+ja+1&-2;if(Un+=ti,0<wn&&Un>wn){Yt=3;break e}if(!r(pn,_r,"VP8 ")||!r(pn,_r,"VP8L")){Yt=0;break e}if(fi[0]<ti){Yt=7;break e}r(pn,_r,"ALPH")||(Lr[0]=pn,Ir[0]=_r+8,Sn[0]=ja),_r+=ti,fi-=ti}}if(re=re[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],Yt!=0)break}re=[re],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(wn=D,Yt=q,vr=re,Lr=pt.gb[0],Ir=pt.Ja,Sn=pt.xa,pn=Yt[0],_r=!r(wn,pn,"VP8 "),Un=!r(wn,pn,"VP8L"),t(wn!=null),t(vr!=null),t(Ir!=null),t(Sn!=null),8>vr[0])Yt=7;else{if(_r||Un){if(wn=dt(wn,pn+4),12<=Lr&&wn>Lr-12){Yt=3;break e}if(st&&wn>vr[0]-8){Yt=7;break e}Ir[0]=wn,Yt[0]+=8,vr[0]-=8,Sn[0]=Un}else Sn[0]=5<=vr[0]&&wn[pn+0]==47&&!(wn[pn+4]>>5),Ir[0]=vr[0];Yt=0}if(re=re[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],q=q[0],Yt!=0)break;if(4294967286<pt.Ja)return 3;if(He==null||yr||(He[0]=pt.xa?2:1),ze=[ze],Ht=[Ht],pt.xa){if(5>re){Yt=7;break}He=ze,st=Ht,yr=Re,D==null||5>re?D=0:5<=re&&D[q+0]==47&&!(D[q+4]>>5)?(vr=[0],wn=[0],Lr=[0],Ce(Ir=new Ee,D,q,re),ie(Ir,vr,wn,Lr)?(He!=null&&(He[0]=vr[0]),st!=null&&(st[0]=wn[0]),yr!=null&&(yr[0]=Lr[0]),D=1):D=0):D=0}else{if(10>re){Yt=7;break}He=Ht,D==null||10>re||!Gi(D,q+3,re-3)?D=0:(st=D[q+0]|D[q+1]<<8|D[q+2]<<16,yr=16383&(D[q+7]<<8|D[q+6]),D=16383&(D[q+9]<<8|D[q+8]),1&st||3<(st>>1&7)||!(st>>4&1)||st>>5>=pt.Ja||!yr||!D?D=0:(ze&&(ze[0]=yr),He&&(He[0]=D),D=1))}if(!D||(ze=ze[0],Ht=Ht[0],er&&(ft[0]!=ze||Bt[0]!=Ht)))return 3;et!=null&&(et[0]=pt,et.offset=q-et.w,t(4294967286>q-et.w),t(et.offset==et.ha-re));break}return Yt==0||Yt==7&&er&&et==null?(Re!=null&&(Re[0]|=pt.na!=null&&0<pt.na.length),de!=null&&(de[0]=ze),Me!=null&&(Me[0]=Ht),0):Yt}function to(D,q,re){var de=q.width,Me=q.height,Re=0,ze=0,He=de,et=Me;if(q.Da=D!=null&&0<D.Da,q.Da&&(He=D.cd,et=D.bd,Re=D.v,ze=D.j,11>re||(Re&=-2,ze&=-2),0>Re||0>ze||0>=He||0>=et||Re+He>de||ze+et>Me))return 0;if(q.v=Re,q.j=ze,q.va=Re+He,q.o=ze+et,q.U=He,q.T=et,q.da=D!=null&&0<D.da,q.da){if(!xr(He,et,re=[D.ib],Re=[D.hb]))return 0;q.ib=re[0],q.hb=Re[0]}return q.ob=D!=null&&D.ob,q.Kb=D==null||!D.Sd,q.da&&(q.ob=q.ib<3*de/4&&q.hb<3*Me/4,q.Kb=0),1}function Ba(D){if(D==null)return 2;if(11>D.S){var q=D.f.RGBA;q.fb+=(D.height-1)*q.A,q.A=-q.A}else q=D.f.kb,D=D.height,q.O+=(D-1)*q.fa,q.fa=-q.fa,q.N+=(D-1>>1)*q.Ab,q.Ab=-q.Ab,q.W+=(D-1>>1)*q.Db,q.Db=-q.Db,q.F!=null&&(q.J+=(D-1)*q.lb,q.lb=-q.lb);return 0}function Kl(D,q,re,de){if(de==null||0>=D||0>=q)return 2;if(re!=null){if(re.Da){var Me=re.cd,Re=re.bd,ze=-2&re.v,He=-2&re.j;if(0>ze||0>He||0>=Me||0>=Re||ze+Me>D||He+Re>q)return 2;D=Me,q=Re}if(re.da){if(!xr(D,q,Me=[re.ib],Re=[re.hb]))return 2;D=Me[0],q=Re[0]}}de.width=D,de.height=q;e:{var et=de.width,ft=de.height;if(D=de.S,0>=et||0>=ft||!(D>=fl&&13>D))D=2;else{if(0>=de.Rd&&de.sd==null){ze=Re=Me=q=0;var Bt=(He=et*pl[D])*ft;if(11>D||(Re=(ft+1)/2*(q=(et+1)/2),D==12&&(ze=(Me=et)*ft)),(ft=s(Bt+2*Re+ze))==null){D=1;break e}de.sd=ft,11>D?((et=de.f.RGBA).eb=ft,et.fb=0,et.A=He,et.size=Bt):((et=de.f.kb).y=ft,et.O=0,et.fa=He,et.Fd=Bt,et.f=ft,et.N=0+Bt,et.Ab=q,et.Cd=Re,et.ea=ft,et.W=0+Bt+Re,et.Db=q,et.Ed=Re,D==12&&(et.F=ft,et.J=0+Bt+2*Re),et.Tc=ze,et.lb=Me)}if(q=1,Me=de.S,Re=de.width,ze=de.height,Me>=fl&&13>Me)if(11>Me)D=de.f.RGBA,q&=(He=Math.abs(D.A))*(ze-1)+Re<=D.size,q&=He>=Re*pl[Me],q&=D.eb!=null;else{D=de.f.kb,He=(Re+1)/2,Bt=(ze+1)/2,et=Math.abs(D.fa),ft=Math.abs(D.Ab);var er=Math.abs(D.Db),st=Math.abs(D.lb),pt=st*(ze-1)+Re;q&=et*(ze-1)+Re<=D.Fd,q&=ft*(Bt-1)+He<=D.Cd,q=(q&=er*(Bt-1)+He<=D.Ed)&et>=Re&ft>=He&er>=He,q&=D.y!=null,q&=D.f!=null,q&=D.ea!=null,Me==12&&(q&=st>=Re,q&=pt<=D.Tc,q&=D.F!=null)}else q=0;D=q?0:2}}return D!=0||re!=null&&re.fd&&(D=Ba(de)),D}var da=64,Ol=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],fs=24,Zo=32,Sa=8,Rl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(D){return D},J.Predictor2=function(D,q,re){return q[re+0]},J.Predictor3=function(D,q,re){return q[re+1]},J.Predictor4=function(D,q,re){return q[re-1]},J.Predictor5=function(D,q,re){return Nt(Nt(D,q[re+1]),q[re+0])},J.Predictor6=function(D,q,re){return Nt(D,q[re-1])},J.Predictor7=function(D,q,re){return Nt(D,q[re+0])},J.Predictor8=function(D,q,re){return Nt(q[re-1],q[re+0])},J.Predictor9=function(D,q,re){return Nt(q[re+0],q[re+1])},J.Predictor10=function(D,q,re){return Nt(Nt(D,q[re-1]),Nt(q[re+0],q[re+1]))},J.Predictor11=function(D,q,re){var de=q[re+0];return 0>=Ke(de>>24&255,D>>24&255,(q=q[re-1])>>24&255)+Ke(de>>16&255,D>>16&255,q>>16&255)+Ke(de>>8&255,D>>8&255,q>>8&255)+Ke(255&de,255&D,255&q)?de:D},J.Predictor12=function(D,q,re){var de=q[re+0];return(Kt((D>>24&255)+(de>>24&255)-((q=q[re-1])>>24&255))<<24|Kt((D>>16&255)+(de>>16&255)-(q>>16&255))<<16|Kt((D>>8&255)+(de>>8&255)-(q>>8&255))<<8|Kt((255&D)+(255&de)-(255&q)))>>>0},J.Predictor13=function(D,q,re){var de=q[re-1];return(Vt((D=Nt(D,q[re+0]))>>24&255,de>>24&255)<<24|Vt(D>>16&255,de>>16&255)<<16|Vt(D>>8&255,de>>8&255)<<8|Vt(255&D,255&de))>>>0};var Is=J.PredictorAdd0;J.PredictorAdd1=me,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Vs=J.PredictorAdd2;Ne("ColorIndexInverseTransform","MapARGB","32b",function(D){return D>>8&255},function(D){return D}),Ne("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(D){return D},function(D){return D>>8&255});var Yl,sl=J.ColorIndexInverseTransform,Gs=J.MapARGB,Ll=J.VP8LColorIndexInverseTransformAlpha,Jl=J.MapAlpha,qt=J.VP8LPredictorsAdd=[];qt.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var ar,qr,sn,ci,gn,Ln,zn,_i,$i,ea,Va,hs,uo,ll,ii,Ql,ul,Dl,Tc,eu,Yu,xi,Qn,Ju,ds,Qu,Ga,ps,Ms=s(511),cl=s(2041),tu=s(225),ru=s(767),ms=0,kl=cl,nu=tu,co=ru,Cn=Ms,fl=0,Pc=1,ec=2,Hs=3,Uh=4,Vd=5,Gd=6,Hd=7,Qf=8,Au=9,Ic=10,Vh=[2,3,7],Wd=[3,3,11],Gh=[280,256,256,256,40],Hh=[0,1,1,1,0],Wh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zd=8,Xd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Oc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],eh=null,mm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],th=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gm=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ym=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Zh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Tu=[],hl=[],Fi=[],Rc=1,Os=2,Fl=[],Xo=[];us("UpsampleRgbLinePair",xa,3),us("UpsampleBgrLinePair",bo,3),us("UpsampleRgbaLinePair",cs,4),us("UpsampleBgraLinePair",Il,4),us("UpsampleArgbLinePair",Eu,4),us("UpsampleRgba4444LinePair",wa,2),us("UpsampleRgb565LinePair",Ho,2);var Xh=J.UpsampleRgbLinePair,rc=J.UpsampleBgrLinePair,uf=J.UpsampleRgbaLinePair,nc=J.UpsampleBgraLinePair,Lc=J.UpsampleArgbLinePair,Kd=J.UpsampleRgba4444LinePair,vm=J.UpsampleRgb565LinePair,ih=16,ah=1<<ih-1,cf=-227,iu=482,Yd=6,Kh=0,oh=s(256),bm=s(256),Jd=s(256),Qd=s(256),_m=s(iu-cf),ep=s(iu-cf);Wo("YuvToRgbRow",xa,3),Wo("YuvToBgrRow",bo,3),Wo("YuvToRgbaRow",cs,4),Wo("YuvToBgraRow",Il,4),Wo("YuvToArgbRow",Eu,4),Wo("YuvToRgba4444Row",wa,2),Wo("YuvToRgb565Row",Ho,2);var Yh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Nl=[0,2,8],xm=[8,7,6,4,4,2,2,2,1,1,1,1],dl=1;this.WebPDecodeRGBA=function(D,q,re,de,Me){var Re=Pc,ze=new bn,He=new Kr;ze.ba=He,He.S=Re,He.width=[He.width],He.height=[He.height];var et=He.width,ft=He.height,Bt=new Rt;if(Bt==null||D==null)var er=2;else t(Bt!=null),er=Ml(D,q,re,Bt.width,Bt.height,Bt.Pd,Bt.Qd,Bt.format,null);if(er!=0?et=0:(et!=null&&(et[0]=Bt.width[0]),ft!=null&&(ft[0]=Bt.height[0]),et=1),et){He.width=He.width[0],He.height=He.height[0],de!=null&&(de[0]=He.width),Me!=null&&(Me[0]=He.height);e:{if(de=new mo,(Me=new yn).data=D,Me.w=q,Me.ha=re,Me.kd=1,q=[0],t(Me!=null),((D=Ml(Me.data,Me.w,Me.ha,null,null,null,q,null,Me))==0||D==7)&&q[0]&&(D=4),(q=D)==0){if(t(ze!=null),de.data=Me.data,de.w=Me.w+Me.offset,de.ha=Me.ha-Me.offset,de.put=Ct,de.ac=wt,de.bc=Wt,de.ma=ze,Me.xa){if((D=Bn())==null){ze=1;break e}if((function(st,pt){var Ht=[0],yr=[0],Yt=[0];t:for(;;){if(st==null)return 0;if(pt==null)return st.a=2,0;if(st.l=pt,st.a=0,Ce(st.m,pt.data,pt.w,pt.ha),!ie(st.m,Ht,yr,Yt)){st.a=3;break t}if(st.xb=Os,pt.width=Ht[0],pt.height=yr[0],!Pn(Ht[0],yr[0],1,st,null))break t;return 1}return t(st.a!=0),0})(D,de)){if(de=(q=Kl(de.width,de.height,ze.Oa,ze.ba))==0){t:{de=D;r:for(;;){if(de==null){de=0;break t}if(t(de.s.yc!=null),t(de.s.Ya!=null),t(0<de.s.Wb),t((re=de.l)!=null),t((Me=re.ma)!=null),de.xb!=0){if(de.ca=Me.ba,de.tb=Me.tb,t(de.ca!=null),!to(Me.Oa,re,Hs)){de.a=2;break r}if(!un(de,re.width)||re.da)break r;if((re.da||mr(de.ca.S))&&Ps(),11>de.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),de.ca.f.kb.F!=null&&Ps()),de.Pb&&0<de.s.ua&&de.s.vb.X==null&&!ke(de.s.vb,de.s.Wa.Xa)){de.a=1;break r}de.xb=0}if(!Yr(de,de.V,de.Ba,de.c,de.i,re.o,Vr))break r;Me.Dc=de.Ma,de=1;break t}t(de.a!=0),de=0}de=!de}de&&(q=D.a)}else q=D.a}else{if((D=new xs)==null){ze=1;break e}if(D.Fa=Me.na,D.P=Me.P,D.qc=Me.Sa,Cc(D,de)){if((q=Kl(de.width,de.height,ze.Oa,ze.ba))==0){if(D.Aa=0,re=ze.Oa,t((Me=D)!=null),re!=null){if(0<(et=0>(et=re.Md)?0:100<et?255:255*et/100)){for(ft=Bt=0;4>ft;++ft)12>(er=Me.pb[ft]).lc&&(er.ia=et*xm[0>er.lc?0:er.lc]>>3),Bt|=er.ia;Bt&&(alert("todo:VP8InitRandom"),Me.ia=1)}Me.Ga=re.Id,100<Me.Ga?Me.Ga=100:0>Me.Ga&&(Me.Ga=0)}(function(st,pt){if(st==null)return 0;if(pt==null)return fa(st,2,"NULL VP8Io parameter in VP8Decode().");if(!st.cb&&!Cc(st,pt))return 0;if(t(st.cb),pt.ac==null||pt.ac(pt)){pt.ob&&(st.L=0);var Ht=Nl[st.L];if(st.L==2?(st.yb=0,st.zb=0):(st.yb=pt.v-Ht>>4,st.zb=pt.j-Ht>>4,0>st.yb&&(st.yb=0),0>st.zb&&(st.zb=0)),st.Va=pt.o+15+Ht>>4,st.Hb=pt.va+15+Ht>>4,st.Hb>st.za&&(st.Hb=st.za),st.Va>st.Ub&&(st.Va=st.Ub),0<st.L){var yr=st.ed;for(Ht=0;4>Ht;++Ht){var Yt;if(st.Qa.Cb){var vr=st.Qa.Lb[Ht];st.Qa.Fb||(vr+=yr.Tb)}else vr=yr.Tb;for(Yt=0;1>=Yt;++Yt){var _r=st.gd[Ht][Yt],Lr=vr;if(yr.Pc&&(Lr+=yr.vd[0],Yt&&(Lr+=yr.od[0])),0<(Lr=0>Lr?0:63<Lr?63:Lr)){var Ir=Lr;0<yr.wb&&(Ir=4<yr.wb?Ir>>2:Ir>>1)>9-yr.wb&&(Ir=9-yr.wb),1>Ir&&(Ir=1),_r.dd=Ir,_r.tc=2*Lr+Ir,_r.ld=40<=Lr?2:15<=Lr?1:0}else _r.tc=0;_r.La=Yt}}}Ht=0}else fa(st,6,"Frame setup failed"),Ht=st.a;if(Ht=Ht==0){if(Ht){st.$c=0,0<st.Aa||(st.Ic=dl);t:{Ht=st.Ic,yr=4*(Ir=st.za);var Sn=32*Ir,pn=Ir+1,Un=0<st.L?Ir*(0<st.Aa?2:1):0,wn=(st.Aa==2?2:1)*Ir;if((_r=yr+832+(Yt=3*(16*Ht+Nl[st.L])/2*Sn)+(vr=st.Fa!=null&&0<st.Fa.length?st.Kc.c*st.Kc.i:0))!=_r)Ht=0;else{if(_r>st.Vb){if(st.Vb=0,st.Ec=s(_r),st.Fc=0,st.Ec==null){Ht=fa(st,1,"no memory during frame initialization.");break t}st.Vb=_r}_r=st.Ec,Lr=st.Fc,st.Ac=_r,st.Bc=Lr,Lr+=yr,st.Gd=u(Sn,vi),st.Hd=0,st.rb=u(pn+1,cn),st.sb=1,st.wa=Un?u(Un,Dn):null,st.Y=0,st.D.Nb=0,st.D.wa=st.wa,st.D.Y=st.Y,0<st.Aa&&(st.D.Y+=Ir),t(!0),st.oc=_r,st.pc=Lr,Lr+=832,st.ya=u(wn,ia),st.aa=0,st.D.ya=st.ya,st.D.aa=st.aa,st.Aa==2&&(st.D.aa+=Ir),st.R=16*Ir,st.B=8*Ir,Ir=(Sn=Nl[st.L])*st.R,Sn=Sn/2*st.B,st.sa=_r,st.ta=Lr+Ir,st.qa=st.sa,st.ra=st.ta+16*Ht*st.R+Sn,st.Ha=st.qa,st.Ia=st.ra+8*Ht*st.B+Sn,st.$c=0,Lr+=Yt,st.mb=vr?_r:null,st.nb=vr?Lr:null,t(Lr+vr<=st.Fc+st.Vb),as(st),i(st.Ac,st.Bc,0,yr),Ht=1}}if(Ht){if(pt.ka=0,pt.y=st.sa,pt.O=st.ta,pt.f=st.qa,pt.N=st.ra,pt.ea=st.Ha,pt.Vd=st.Ia,pt.fa=st.R,pt.Rc=st.B,pt.F=null,pt.J=0,!ms){for(Ht=-255;255>=Ht;++Ht)Ms[255+Ht]=0>Ht?-Ht:Ht;for(Ht=-1020;1020>=Ht;++Ht)cl[1020+Ht]=-128>Ht?-128:127<Ht?127:Ht;for(Ht=-112;112>=Ht;++Ht)tu[112+Ht]=-16>Ht?-16:15<Ht?15:Ht;for(Ht=-255;510>=Ht;++Ht)ru[255+Ht]=0>Ht?0:255<Ht?255:Ht;ms=1}zn=mt,_i=Zl,ea=U,Va=ne,hs=De,$i=Ac,uo=Y,ll=Pe,ii=Gt,Ql=br,ul=it,Dl=Ot,Tc=Pr,eu=hn,Yu=bi,xi=ls,Qn=Xn,Ju=kn,hl[0]=Wr,hl[1]=Dt,hl[2]=pr,hl[3]=$r,hl[4]=jn,hl[5]=Ji,hl[6]=di,hl[7]=Lo,hl[8]=ws,hl[9]=Jn,Tu[0]=hr,Tu[1]=Tr,Tu[2]=Mr,Tu[3]=Fr,Tu[4]=In,Tu[5]=Li,Tu[6]=Rn,Fi[0]=go,Fi[1]=Ut,Fi[2]=Ss,Fi[3]=ui,Fi[4]=Na,Fi[5]=xu,Fi[6]=Es,Ht=1}else Ht=0}Ht&&(Ht=(function(fi,ja){for(fi.M=0;fi.M<fi.Va;++fi.M){var ti,xn=fi.Jc[fi.M&fi.Xb],Qr=fi.m,Ma=fi;for(ti=0;ti<Ma.za;++ti){var Gn=Qr,wi=Ma,Ii=wi.Ac,Hn=wi.Bc+4*ti,gs=wi.zc,aa=wi.ya[wi.aa+ti];if(wi.Qa.Bb?aa.$b=rt(Gn,wi.Pa.jb[0])?2+rt(Gn,wi.Pa.jb[2]):rt(Gn,wi.Pa.jb[1]):aa.$b=0,wi.kc&&(aa.Ad=rt(Gn,wi.Bd)),aa.Za=!rt(Gn,145)+0,aa.Za){var fo=aa.Ob,_o=0;for(wi=0;4>wi;++wi){var Ha,Ci=gs[0+wi];for(Ha=0;4>Ha;++Ha){Ci=ym[Ii[Hn+Ha]][Ci];for(var Ni=rh[rt(Gn,Ci[0])];0<Ni;)Ni=rh[2*Ni+rt(Gn,Ci[Ni])];Ci=-Ni,Ii[Hn+Ha]=Ci}n(fo,_o,Ii,Hn,4),_o+=4,gs[0+wi]=Ci}}else Ci=rt(Gn,156)?rt(Gn,128)?1:3:rt(Gn,163)?2:0,aa.Ob[0]=Ci,i(Ii,Hn,Ci,4),i(gs,0,Ci,4);aa.Dd=rt(Gn,142)?rt(Gn,114)?rt(Gn,183)?1:3:2:0}if(Ma.m.Ka)return fa(fi,7,"Premature end-of-partition0 encountered.");for(;fi.ja<fi.za;++fi.ja){if(Ma=xn,Gn=(Qr=fi).rb[Qr.sb-1],Ii=Qr.rb[Qr.sb+Qr.ja],ti=Qr.ya[Qr.aa+Qr.ja],Hn=Qr.kc?ti.Ad:0)Gn.la=Ii.la=0,ti.Za||(Gn.Na=Ii.Na=0),ti.Hc=0,ti.Gc=0,ti.ia=0;else{var Oa,oi;if(Gn=Ii,Ii=Ma,Hn=Qr.Pa.Xc,gs=Qr.ya[Qr.aa+Qr.ja],aa=Qr.pb[gs.$b],wi=gs.ad,fo=0,_o=Qr.rb[Qr.sb-1],Ci=Ha=0,i(wi,fo,0,384),gs.Za)var Wa=0,rn=Hn[3];else{Ni=s(16);var en=Gn.Na+_o.Na;if(en=eh(Ii,Hn[1],en,aa.Eb,0,Ni,0),Gn.Na=_o.Na=(0<en)+0,1<en)zn(Ni,0,wi,fo);else{var xo=Ni[0]+3>>3;for(Ni=0;256>Ni;Ni+=16)wi[fo+Ni]=xo}Wa=1,rn=Hn[0]}var Bi=15&Gn.la,za=15&_o.la;for(Ni=0;4>Ni;++Ni){var ta=1&za;for(xo=oi=0;4>xo;++xo)Bi=Bi>>1|(ta=(en=eh(Ii,rn,en=ta+(1&Bi),aa.Sc,Wa,wi,fo))>Wa)<<7,oi=oi<<2|(3<en?3:1<en?2:wi[fo+0]!=0),fo+=16;Bi>>=4,za=za>>1|ta<<7,Ha=(Ha<<8|oi)>>>0}for(rn=Bi,Wa=za>>4,Oa=0;4>Oa;Oa+=2){for(oi=0,Bi=Gn.la>>4+Oa,za=_o.la>>4+Oa,Ni=0;2>Ni;++Ni){for(ta=1&za,xo=0;2>xo;++xo)en=ta+(1&Bi),Bi=Bi>>1|(ta=0<(en=eh(Ii,Hn[2],en,aa.Qc,0,wi,fo)))<<3,oi=oi<<2|(3<en?3:1<en?2:wi[fo+0]!=0),fo+=16;Bi>>=2,za=za>>1|ta<<5}Ci|=oi<<4*Oa,rn|=Bi<<4<<Oa,Wa|=(240&za)<<Oa}Gn.la=rn,_o.la=Wa,gs.Hc=Ha,gs.Gc=Ci,gs.ia=43690&Ci?0:aa.ia,Hn=!(Ha|Ci)}if(0<Qr.L&&(Qr.wa[Qr.Y+Qr.ja]=Qr.gd[ti.$b][ti.Za],Qr.wa[Qr.Y+Qr.ja].La|=!Hn),Ma.Ka)return fa(fi,7,"Premature end-of-file encountered.")}if(as(fi),Qr=ja,Ma=1,ti=(xn=fi).D,Gn=0<xn.L&&xn.M>=xn.zb&&xn.M<=xn.Va,xn.Aa==0)t:{if(ti.M=xn.M,ti.uc=Gn,Us(xn,ti),Ma=1,ti=(oi=xn.D).Nb,Gn=(Ci=Nl[xn.L])*xn.R,Ii=Ci/2*xn.B,Ni=16*ti*xn.R,xo=8*ti*xn.B,Hn=xn.sa,gs=xn.ta-Gn+Ni,aa=xn.qa,wi=xn.ra-Ii+xo,fo=xn.Ha,_o=xn.Ia-Ii+xo,za=(Bi=oi.M)==0,Ha=Bi>=xn.Va-1,xn.Aa==2&&Us(xn,oi),oi.uc)for(ta=(en=xn).D.M,t(en.D.uc),oi=en.yb;oi<en.Hb;++oi){Wa=oi,rn=ta;var oa=(ys=(ro=en).D).Nb;Oa=ro.R;var ys=ys.wa[ys.Y+Wa],Rs=ro.sa,Ls=ro.ta+16*oa*Oa+16*Wa,Ws=ys.dd,ji=ys.tc;if(ji!=0)if(t(3<=ji),ro.L==1)0<Wa&&xi(Rs,Ls,Oa,ji+4),ys.La&&Ju(Rs,Ls,Oa,ji),0<rn&&Yu(Rs,Ls,Oa,ji+4),ys.La&&Qn(Rs,Ls,Oa,ji);else{var gi=ro.B,Mi=ro.qa,Zs=ro.ra+8*oa*gi+8*Wa,Xs=ro.Ha,ro=ro.Ia+8*oa*gi+8*Wa;oa=ys.ld,0<Wa&&(ll(Rs,Ls,Oa,ji+4,Ws,oa),Ql(Mi,Zs,Xs,ro,gi,ji+4,Ws,oa)),ys.La&&(Dl(Rs,Ls,Oa,ji,Ws,oa),eu(Mi,Zs,Xs,ro,gi,ji,Ws,oa)),0<rn&&(uo(Rs,Ls,Oa,ji+4,Ws,oa),ii(Mi,Zs,Xs,ro,gi,ji+4,Ws,oa)),ys.La&&(ul(Rs,Ls,Oa,ji,Ws,oa),Tc(Mi,Zs,Xs,ro,gi,ji,Ws,oa))}}if(xn.ia&&alert("todo:DitherRow"),Qr.put!=null){if(oi=16*Bi,Bi=16*(Bi+1),za?(Qr.y=xn.sa,Qr.O=xn.ta+Ni,Qr.f=xn.qa,Qr.N=xn.ra+xo,Qr.ea=xn.Ha,Qr.W=xn.Ia+xo):(oi-=Ci,Qr.y=Hn,Qr.O=gs,Qr.f=aa,Qr.N=wi,Qr.ea=fo,Qr.W=_o),Ha||(Bi-=Ci),Bi>Qr.o&&(Bi=Qr.o),Qr.F=null,Qr.J=null,xn.Fa!=null&&0<xn.Fa.length&&oi<Bi&&(Qr.J=Ia(xn,Qr,oi,Bi-oi),Qr.F=xn.mb,Qr.F==null&&Qr.F.length==0)){Ma=fa(xn,3,"Could not decode alpha data.");break t}oi<Qr.j&&(Ci=Qr.j-oi,oi=Qr.j,t(!(1&Ci)),Qr.O+=xn.R*Ci,Qr.N+=xn.B*(Ci>>1),Qr.W+=xn.B*(Ci>>1),Qr.F!=null&&(Qr.J+=Qr.width*Ci)),oi<Bi&&(Qr.O+=Qr.v,Qr.N+=Qr.v>>1,Qr.W+=Qr.v>>1,Qr.F!=null&&(Qr.J+=Qr.v),Qr.ka=oi-Qr.j,Qr.U=Qr.va-Qr.v,Qr.T=Bi-oi,Ma=Qr.put(Qr))}ti+1!=xn.Ic||Ha||(n(xn.sa,xn.ta-Gn,Hn,gs+16*xn.R,Gn),n(xn.qa,xn.ra-Ii,aa,wi+8*xn.B,Ii),n(xn.Ha,xn.Ia-Ii,fo,_o+8*xn.B,Ii))}if(!Ma)return fa(fi,6,"Output aborted.")}return 1})(st,pt)),pt.bc!=null&&pt.bc(pt),Ht&=1}return Ht?(st.cb=0,Ht):0})(D,de)||(q=D.a)}}else q=D.a}q==0&&ze.Oa!=null&&ze.Oa.fd&&(q=Ba(ze.ba))}ze=q}Re=ze!=0?null:11>Re?He.f.RGBA.eb:He.f.kb.y}else Re=null;return Re};var pl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(J,le){for(var Z="",H=0;H<4;H++)Z+=String.fromCharCode(J[le++]);return Z}function g(J,le){return J[le+0]|J[le+1]<<8}function _(J,le){return(J[le+0]|J[le+1]<<8|J[le+2]<<16)>>>0}function C(J,le){return(J[le+0]|J[le+1]<<8|J[le+2]<<16|J[le+3]<<24)>>>0}new p;var S=[0],I=[0],O=[],P=new p,k=e,F=(function(J,le){var Z={},H=0,oe=!1,ue=0,ce=0;if(Z.frames=[],!(function(ge,Ee){for(var Ie=0;Ie<4;Ie++)if(ge[Ee+Ie]!="RIFF".charCodeAt(Ie))return!0;return!1})(J,le)){for(C(J,le+=4),le+=8;le<J.length;){var be=d(J,le),Te=C(J,le+=4);le+=4;var ve=Te+(1&Te);switch(be){case"VP8 ":case"VP8L":Z.frames[H]===void 0&&(Z.frames[H]={}),(Je=Z.frames[H]).src_off=oe?ce:le-8,Je.src_size=ue+Te+8,H++,oe&&(oe=!1,ue=0,ce=0);break;case"VP8X":(Je=Z.header={}).feature_flags=J[le];var Ce=le+4;Je.canvas_width=1+_(J,Ce),Ce+=3,Je.canvas_height=1+_(J,Ce),Ce+=3;break;case"ALPH":oe=!0,ue=ve+8,ce=le-8;break;case"ANIM":(Je=Z.header).bgcolor=C(J,le),Ce=le+4,Je.loop_count=g(J,Ce),Ce+=2;break;case"ANMF":var $e,Je;(Je=Z.frames[H]={}).offset_x=2*_(J,le),le+=3,Je.offset_y=2*_(J,le),le+=3,Je.width=1+_(J,le),le+=3,Je.height=1+_(J,le),le+=3,Je.duration=_(J,le),le+=3,$e=J[le++],Je.dispose=1&$e,Je.blend=$e>>1&1}be!="ANMF"&&(le+=ve)}return Z}})(k,0);F.response=k,F.rgbaoutput=!0,F.dataurl=!1;var B=F.header?F.header:null,N=F.frames?F.frames:null;if(B){B.loop_counter=B.loop_count,S=[B.canvas_height],I=[B.canvas_width];for(var G=0;G<N.length&&N[G].blend!=0;G++);}var $=N[0],X=P.WebPDecodeRGBA(k,$.src_off,$.src_size,I,S);$.rgba=X,$.imgwidth=I[0],$.imgheight=S[0];for(var ee=0;ee<I[0]*S[0]*4;ee++)O[ee]=X[ee];return this.width=I,this.height=S,this.data=O,this}(function(e){var t,r,n,i,s,u,a,p,d,g=function(ge){return ge=ge||{},this.isStrokeTransparent=ge.isStrokeTransparent||!1,this.strokeOpacity=ge.strokeOpacity||1,this.strokeStyle=ge.strokeStyle||"#000000",this.fillStyle=ge.fillStyle||"#000000",this.isFillTransparent=ge.isFillTransparent||!1,this.fillOpacity=ge.fillOpacity||1,this.font=ge.font||"10px sans-serif",this.textBaseline=ge.textBaseline||"alphabetic",this.textAlign=ge.textAlign||"left",this.lineWidth=ge.lineWidth||1,this.lineJoin=ge.lineJoin||"miter",this.lineCap=ge.lineCap||"butt",this.path=ge.path||[],this.transform=ge.transform!==void 0?ge.transform.clone():new p,this.globalCompositeOperation=ge.globalCompositeOperation||"normal",this.globalAlpha=ge.globalAlpha||1,this.clip_path=ge.clip_path||[],this.currentPoint=ge.currentPoint||new u,this.miterLimit=ge.miterLimit||10,this.lastPoint=ge.lastPoint||new u,this.lineDashOffset=ge.lineDashOffset||0,this.lineDash=ge.lineDash||[],this.margin=ge.margin||[0,0,0,0],this.prevPageLastElemOffset=ge.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ge.ignoreClearRect!="boolean"||ge.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new _(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,u=this.internal.Point,a=this.internal.Rectangle,p=this.internal.Matrix,d=new g}]);var _=function(ge){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=ge;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var Ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ie},set:function(dt){Ie=!!dt}});var Le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Le},set:function(dt){Le=!!dt}});var Ve=0;Object.defineProperty(this,"posX",{get:function(){return Ve},set:function(dt){isNaN(dt)||(Ve=dt)}});var ht=0;Object.defineProperty(this,"posY",{get:function(){return ht},set:function(dt){isNaN(dt)||(ht=dt)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(dt){var ke;typeof dt=="number"?ke=[dt,dt,dt,dt]:((ke=new Array(4))[0]=dt[0],ke[1]=dt.length>=2?dt[1]:ke[0],ke[2]=dt.length>=3?dt[2]:ke[0],ke[3]=dt.length>=4?dt[3]:ke[1]),d.margin=ke}});var It=!1;Object.defineProperty(this,"autoPaging",{get:function(){return It},set:function(dt){It=dt}});var xt=0;Object.defineProperty(this,"lastBreak",{get:function(){return xt},set:function(dt){xt=dt}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(dt){rt=dt}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(dt){dt instanceof g&&(d=dt)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(dt){d.path=dt}});var zt=[];Object.defineProperty(this,"ctxStack",{get:function(){return zt},set:function(dt){zt=dt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(dt){var ke;ke=C(dt),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(dt){var ke=C(dt);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(dt){["butt","round","square"].indexOf(dt)!==-1&&(this.ctx.lineCap=dt,this.pdf.setLineCap(dt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(dt){isNaN(dt)||(this.ctx.lineWidth=dt,this.pdf.setLineWidth(dt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(dt){["bevel","round","miter"].indexOf(dt)!==-1&&(this.ctx.lineJoin=dt,this.pdf.setLineJoin(dt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(dt){isNaN(dt)||(this.ctx.miterLimit=dt,this.pdf.setMiterLimit(dt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(dt){this.ctx.textBaseline=dt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(dt){["right","end","center","left","start"].indexOf(dt)!==-1&&(this.ctx.textAlign=dt)}});var Lt=null,Ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ft},set:function(dt){Lt=null,Ft=dt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(dt){var ke;if(this.ctx.font=dt,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(dt))!==null){var fr=ke[1];ke[2];var sr=ke[3],xr=ke[4];ke[5];var tr=ke[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xr)[2];xr=Math.floor(Ge==="px"?parseFloat(xr)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(xr)*this.pdf.getFontSize():parseFloat(xr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xr);var nt=(function(Be){var Ne,Tt,bt=[],tt=Be.trim();if(tt==="")return fS;if(tt in kF)return[kF[tt]];for(;tt!=="";){switch(Tt=null,Ne=(tt=NF(tt)).charAt(0)){case'"':case"'":Tt=Ofe(tt.substring(1),Ne);break;default:Tt=Rfe(tt)}if(Tt===null||(bt.push(Tt[0]),(tt=NF(Tt[1]))!==""&&tt.charAt(0)!==","))return fS;tt=tt.replace(/^,/,"")}return bt})(tr);if(this.fontFaces){var ut=(function(Be,Ne){if(Lt===null){var Tt=(function(bt){var tt=[];return Object.keys(bt).forEach(function(gt){bt[gt].forEach(function($t){var kt=null;switch($t){case"bold":kt={family:gt,weight:"bold"};break;case"italic":kt={family:gt,style:"italic"};break;case"bolditalic":kt={family:gt,weight:"bold",style:"italic"};break;case"":case"normal":kt={family:gt}}kt!==null&&(kt.ref={name:gt,style:$t},tt.push(kt))})}),tt})(Be.getFontList());Lt=(function(bt){for(var tt={},gt=0;gt<bt.length;++gt){var $t=cS(bt[gt]),kt=$t.family,cr=$t.stretch,mr=$t.style,Zr=$t.weight;tt[kt]=tt[kt]||{},tt[kt][cr]=tt[kt][cr]||{},tt[kt][cr][mr]=tt[kt][cr][mr]||{},tt[kt][cr][mr][Zr]=$t}return tt})(Tt.concat(Ne))}return Lt})(this.pdf,this.fontFaces),Nt=nt.map(function(Be){return{family:Be,stretch:"normal",weight:sr,style:fr}}),Kt=(function(Be,Ne,Tt){for(var bt=(Tt=Tt||{}).defaultFontFamily||"times",tt=Object.assign({},Mfe,Tt.genericFontFamilies||{}),gt=null,$t=null,kt=0;kt<Ne.length;++kt)if(tt[(gt=cS(Ne[kt])).family]&&(gt.family=tt[gt.family]),Be.hasOwnProperty(gt.family)){$t=Be[gt.family];break}if(!($t=$t||Be[bt]))throw new Error("Could not find a font-family for the rule '"+FF(gt)+"' and default family '"+bt+"'.");if($t=(function(cr,mr){if(mr[cr])return mr[cr];var Zr=s3[cr],mn=Zr<=s3.normal?-1:1,Kr=DF(mr,bV,Zr,mn);if(!Kr)throw new Error("Could not find a matching font-stretch value for "+cr);return Kr})(gt.stretch,$t),$t=(function(cr,mr){if(mr[cr])return mr[cr];for(var Zr=vV[cr],mn=0;mn<Zr.length;++mn)if(mr[Zr[mn]])return mr[Zr[mn]];throw new Error("Could not find a matching font-style for "+cr)})(gt.style,$t),!($t=(function(cr,mr){if(mr[cr])return mr[cr];if(cr===400&&mr[500])return mr[500];if(cr===500&&mr[400])return mr[400];var Zr=Ife[cr],mn=DF(mr,_V,Zr,cr<400?-1:1);if(!mn)throw new Error("Could not find a matching font-weight for value "+cr);return mn})(gt.weight,$t)))throw new Error("Failed to resolve a font for the rule '"+FF(gt)+"'.");return $t})(ut,Nt);this.pdf.setFont(Kt.ref.name,Kt.ref.style)}else{var Vt="";(sr==="bold"||parseInt(sr,10)>=700||fr==="bold")&&(Vt="bold"),fr==="italic"&&(Vt+="italic"),Vt.length===0&&(Vt="normal");for(var Ke="",me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pe=0;pe<nt.length;pe++){if(this.pdf.internal.getFont(nt[pe],Vt,{noFallback:!0,disableWarning:!0})!==void 0){Ke=nt[pe];break}if(Vt==="bolditalic"&&this.pdf.internal.getFont(nt[pe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=nt[pe],Vt="bold";else if(this.pdf.internal.getFont(nt[pe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=nt[pe],Vt="normal";break}}if(Ke===""){for(var Ae=0;Ae<nt.length;Ae++)if(me[nt[Ae]]){Ke=me[nt[Ae]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,Vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(dt){this.ctx.globalCompositeOperation=dt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(dt){this.ctx.globalAlpha=dt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(dt){this.ctx.lineDashOffset=dt,Je.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(dt){this.ctx.lineDash=dt,Je.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(dt){this.ctx.ignoreClearRect=!!dt}})};_.prototype.setLineDash=function(ge){this.lineDash=ge},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){N.call(this,"fill",!1)},_.prototype.stroke=function(){N.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(ge,Ee){if(isNaN(ge)||isNaN(Ee))throw Fa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ie=this.ctx.transform.applyToPoint(new u(ge,Ee));this.path.push({type:"mt",x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new u(ge,Ee)},_.prototype.closePath=function(){var ge=new u(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&va(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){ge=new u(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(ge.x,ge.y)},_.prototype.lineTo=function(ge,Ee){if(isNaN(ge)||isNaN(Ee))throw Fa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ie=this.ctx.transform.applyToPoint(new u(ge,Ee));this.path.push({type:"lt",x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new u(Ie.x,Ie.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},_.prototype.quadraticCurveTo=function(ge,Ee,Ie,Le){if(isNaN(Ie)||isNaN(Le)||isNaN(ge)||isNaN(Ee))throw Fa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ve=this.ctx.transform.applyToPoint(new u(Ie,Le)),ht=this.ctx.transform.applyToPoint(new u(ge,Ee));this.path.push({type:"qct",x1:ht.x,y1:ht.y,x:Ve.x,y:Ve.y}),this.ctx.lastPoint=new u(Ve.x,Ve.y)},_.prototype.bezierCurveTo=function(ge,Ee,Ie,Le,Ve,ht){if(isNaN(Ve)||isNaN(ht)||isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le))throw Fa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var It=this.ctx.transform.applyToPoint(new u(Ve,ht)),xt=this.ctx.transform.applyToPoint(new u(ge,Ee)),rt=this.ctx.transform.applyToPoint(new u(Ie,Le));this.path.push({type:"bct",x1:xt.x,y1:xt.y,x2:rt.x,y2:rt.y,x:It.x,y:It.y}),this.ctx.lastPoint=new u(It.x,It.y)},_.prototype.arc=function(ge,Ee,Ie,Le,Ve,ht){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le)||isNaN(Ve))throw Fa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ht=!!ht,!this.ctx.transform.isIdentity){var It=this.ctx.transform.applyToPoint(new u(ge,Ee));ge=It.x,Ee=It.y;var xt=this.ctx.transform.applyToPoint(new u(0,Ie)),rt=this.ctx.transform.applyToPoint(new u(0,0));Ie=Math.sqrt(Math.pow(xt.x-rt.x,2)+Math.pow(xt.y-rt.y,2))}Math.abs(Ve-Le)>=2*Math.PI&&(Le=0,Ve=2*Math.PI),this.path.push({type:"arc",x:ge,y:Ee,radius:Ie,startAngle:Le,endAngle:Ve,counterclockwise:ht})},_.prototype.arcTo=function(ge,Ee,Ie,Le,Ve){throw new Error("arcTo not implemented.")},_.prototype.rect=function(ge,Ee,Ie,Le){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le))throw Fa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ge,Ee),this.lineTo(ge+Ie,Ee),this.lineTo(ge+Ie,Ee+Le),this.lineTo(ge,Ee+Le),this.lineTo(ge,Ee),this.lineTo(ge+Ie,Ee),this.lineTo(ge,Ee)},_.prototype.fillRect=function(ge,Ee,Ie,Le){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le))throw Fa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var Ve={};this.lineCap!=="butt"&&(Ve.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ve.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ge,Ee,Ie,Le),this.fill(),Ve.hasOwnProperty("lineCap")&&(this.lineCap=Ve.lineCap),Ve.hasOwnProperty("lineJoin")&&(this.lineJoin=Ve.lineJoin)}},_.prototype.strokeRect=function(ge,Ee,Ie,Le){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le))throw Fa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(ge,Ee,Ie,Le),this.stroke())},_.prototype.clearRect=function(ge,Ee,Ie,Le){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le))throw Fa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ge,Ee,Ie,Le))},_.prototype.save=function(ge){ge=typeof ge!="boolean"||ge;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Ie=0;Ie<this.pdf.internal.getNumberOfPages();Ie++)this.pdf.setPage(Ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),ge){this.ctx.fontSize=this.pdf.internal.getFontSize();var Le=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Le}},_.prototype.restore=function(ge){ge=typeof ge!="boolean"||ge;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Ie=0;Ie<this.pdf.internal.getNumberOfPages();Ie++)this.pdf.setPage(Ie+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),ge&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var C=function(ge){var Ee,Ie,Le,Ve;if(ge.isCanvasGradient===!0&&(ge=ge.getColor()),!ge)return{r:0,g:0,b:0,a:0,style:ge};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ge))Ee=0,Ie=0,Le=0,Ve=0;else{var ht=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ge);if(ht!==null)Ee=parseInt(ht[1]),Ie=parseInt(ht[2]),Le=parseInt(ht[3]),Ve=1;else if((ht=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ge))!==null)Ee=parseInt(ht[1]),Ie=parseInt(ht[2]),Le=parseInt(ht[3]),Ve=parseFloat(ht[4]);else{if(Ve=1,typeof ge=="string"&&ge.charAt(0)!=="#"){var It=new fV(ge);ge=It.ok?It.toHex():"#000000"}ge.length===4?(Ee=ge.substring(1,2),Ee+=Ee,Ie=ge.substring(2,3),Ie+=Ie,Le=ge.substring(3,4),Le+=Le):(Ee=ge.substring(1,3),Ie=ge.substring(3,5),Le=ge.substring(5,7)),Ee=parseInt(Ee,16),Ie=parseInt(Ie,16),Le=parseInt(Le,16)}}return{r:Ee,g:Ie,b:Le,a:Ve,style:ge}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(ge,Ee,Ie,Le){if(isNaN(Ee)||isNaN(Ie)||typeof ge!="string")throw Fa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Le=isNaN(Le)?void 0:Le,!S.call(this)){var Ve=ve(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;H.call(this,{text:ge,x:Ee,y:Ie,scale:ht,angle:Ve,align:this.textAlign,maxWidth:Le})}},_.prototype.strokeText=function(ge,Ee,Ie,Le){if(isNaN(Ee)||isNaN(Ie)||typeof ge!="string")throw Fa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){Le=isNaN(Le)?void 0:Le;var Ve=ve(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;H.call(this,{text:ge,x:Ee,y:Ie,scale:ht,renderingMode:"stroke",angle:Ve,align:this.textAlign,maxWidth:Le})}},_.prototype.measureText=function(ge){if(typeof ge!="string")throw Fa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,Ie=this.pdf.internal.scaleFactor,Le=Ee.internal.getFontSize(),Ve=Ee.getStringUnitWidth(ge)*Le/Ee.internal.scaleFactor;return new function(ht){var It=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return It}}),this}({width:Ve*=Math.round(96*Ie/72*1e4)/1e4})},_.prototype.scale=function(ge,Ee){if(isNaN(ge)||isNaN(Ee))throw Fa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ie=new p(ge,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Ie)},_.prototype.rotate=function(ge){if(isNaN(ge))throw Fa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new p(Math.cos(ge),Math.sin(ge),-Math.sin(ge),Math.cos(ge),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},_.prototype.translate=function(ge,Ee){if(isNaN(ge)||isNaN(Ee))throw Fa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ie=new p(1,0,0,1,ge,Ee);this.ctx.transform=this.ctx.transform.multiply(Ie)},_.prototype.transform=function(ge,Ee,Ie,Le,Ve,ht){if(isNaN(ge)||isNaN(Ee)||isNaN(Ie)||isNaN(Le)||isNaN(Ve)||isNaN(ht))throw Fa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var It=new p(ge,Ee,Ie,Le,Ve,ht);this.ctx.transform=this.ctx.transform.multiply(It)},_.prototype.setTransform=function(ge,Ee,Ie,Le,Ve,ht){ge=isNaN(ge)?1:ge,Ee=isNaN(Ee)?0:Ee,Ie=isNaN(Ie)?0:Ie,Le=isNaN(Le)?1:Le,Ve=isNaN(Ve)?0:Ve,ht=isNaN(ht)?0:ht,this.ctx.transform=new p(ge,Ee,Ie,Le,Ve,ht)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(ge,Ee,Ie,Le,Ve,ht,It,xt,rt){var zt=this.pdf.getImageProperties(ge),Lt=1,Ft=1,dt=1,ke=1;Le!==void 0&&xt!==void 0&&(dt=xt/Le,ke=rt/Ve,Lt=zt.width/Le*xt/Le,Ft=zt.height/Ve*rt/Ve),ht===void 0&&(ht=Ee,It=Ie,Ee=0,Ie=0),Le!==void 0&&xt===void 0&&(xt=Le,rt=Ve),Le===void 0&&xt===void 0&&(xt=zt.width,rt=zt.height);for(var fr,sr=this.ctx.transform.decompose(),xr=ve(sr.rotate.shx),tr=new p,Ge=(tr=(tr=(tr=tr.multiply(sr.translate)).multiply(sr.skew)).multiply(sr.scale)).applyToRectangle(new a(ht-Ee*dt,It-Ie*ke,Le*Lt,Ve*Ft)),nt=P.call(this,Ge),ut=[],Nt=0;Nt<nt.length;Nt+=1)ut.indexOf(nt[Nt])===-1&&ut.push(nt[Nt]);if(B(ut),this.autoPaging)for(var Kt=ut[0],Vt=ut[ut.length-1],Ke=Kt;Ke<Vt+1;Ke++){this.pdf.setPage(Ke);var me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=Ke===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=Ke===1?0:Ae+(Ke-2)*Be;if(this.ctx.clip_path.length!==0){var Tt=this.path;fr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(fr,this.posX+this.margin[3],-Ne+pe+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Tt}var bt=JSON.parse(JSON.stringify(Ge));bt=F([bt],this.posX+this.margin[3],-Ne+pe+this.ctx.prevPageLastElemOffset)[0];var tt=(Ke>Kt||Ke<Vt)&&O.call(this);tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,Be,null).clip().discardPath()),this.pdf.addImage(ge,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,xr),tt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ge,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,xr)};var P=function(ge,Ee,Ie){var Le=[];Ee=Ee||this.pdf.internal.pageSize.width,Ie=Ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ve=this.posY+this.ctx.prevPageLastElemOffset;switch(ge.type){default:case"mt":case"lt":Le.push(Math.floor((ge.y+Ve)/Ie)+1);break;case"arc":Le.push(Math.floor((ge.y+Ve-ge.radius)/Ie)+1),Le.push(Math.floor((ge.y+Ve+ge.radius)/Ie)+1);break;case"qct":var ht=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ge.x1,ge.y1,ge.x,ge.y);Le.push(Math.floor((ht.y+Ve)/Ie)+1),Le.push(Math.floor((ht.y+ht.h+Ve)/Ie)+1);break;case"bct":var It=$e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ge.x1,ge.y1,ge.x2,ge.y2,ge.x,ge.y);Le.push(Math.floor((It.y+Ve)/Ie)+1),Le.push(Math.floor((It.y+It.h+Ve)/Ie)+1);break;case"rect":Le.push(Math.floor((ge.y+Ve)/Ie)+1),Le.push(Math.floor((ge.y+ge.h+Ve)/Ie)+1)}for(var xt=0;xt<Le.length;xt+=1)for(;this.pdf.internal.getNumberOfPages()<Le[xt];)k.call(this);return Le},k=function(){var ge=this.fillStyle,Ee=this.strokeStyle,Ie=this.font,Le=this.lineCap,Ve=this.lineWidth,ht=this.lineJoin;this.pdf.addPage(),this.fillStyle=ge,this.strokeStyle=Ee,this.font=Ie,this.lineCap=Le,this.lineWidth=Ve,this.lineJoin=ht},F=function(ge,Ee,Ie){for(var Le=0;Le<ge.length;Le++)switch(ge[Le].type){case"bct":ge[Le].x2+=Ee,ge[Le].y2+=Ie;case"qct":ge[Le].x1+=Ee,ge[Le].y1+=Ie;default:ge[Le].x+=Ee,ge[Le].y+=Ie}return ge},B=function(ge){return ge.sort(function(Ee,Ie){return Ee-Ie})},N=function(ge,Ee){for(var Ie,Le,Ve=this.fillStyle,ht=this.strokeStyle,It=this.lineCap,xt=this.lineWidth,rt=Math.abs(xt*this.ctx.transform.scaleX),zt=this.lineJoin,Lt=JSON.parse(JSON.stringify(this.path)),Ft=JSON.parse(JSON.stringify(this.path)),dt=[],ke=0;ke<Ft.length;ke++)if(Ft[ke].x!==void 0)for(var fr=P.call(this,Ft[ke]),sr=0;sr<fr.length;sr+=1)dt.indexOf(fr[sr])===-1&&dt.push(fr[sr]);for(var xr=0;xr<dt.length;xr++)for(;this.pdf.internal.getNumberOfPages()<dt[xr];)k.call(this);if(B(dt),this.autoPaging)for(var tr=dt[0],Ge=dt[dt.length-1],nt=tr;nt<Ge+1;nt++){this.pdf.setPage(nt),this.fillStyle=Ve,this.strokeStyle=ht,this.lineCap=It,this.lineWidth=rt,this.lineJoin=zt;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nt=nt===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=nt===1?0:Kt+(nt-2)*Vt;if(this.ctx.clip_path.length!==0){var me=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ie,this.posX+this.margin[3],-Ke+Nt+this.ctx.prevPageLastElemOffset),G.call(this,ge,!0),this.path=me}if(Le=JSON.parse(JSON.stringify(Lt)),this.path=F(Le,this.posX+this.margin[3],-Ke+Nt+this.ctx.prevPageLastElemOffset),Ee===!1||nt===0){var pe=(nt>tr||nt<Ge)&&O.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Vt,null).clip().discardPath()),G.call(this,ge,Ee),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=xt}else this.lineWidth=rt,G.call(this,ge,Ee),this.lineWidth=xt;this.path=Lt},G=function(ge,Ee){if((ge!=="stroke"||Ee||!I.call(this))&&(ge==="stroke"||Ee||!S.call(this))){for(var Ie,Le,Ve=[],ht=this.path,It=0;It<ht.length;It++){var xt=ht[It];switch(xt.type){case"begin":Ve.push({begin:!0});break;case"close":Ve.push({close:!0});break;case"mt":Ve.push({start:xt,deltas:[],abs:[]});break;case"lt":var rt=Ve.length;if(ht[It-1]&&!isNaN(ht[It-1].x)&&(Ie=[xt.x-ht[It-1].x,xt.y-ht[It-1].y],rt>0)){for(;rt>=0;rt--)if(Ve[rt-1].close!==!0&&Ve[rt-1].begin!==!0){Ve[rt-1].deltas.push(Ie),Ve[rt-1].abs.push(xt);break}}break;case"bct":Ie=[xt.x1-ht[It-1].x,xt.y1-ht[It-1].y,xt.x2-ht[It-1].x,xt.y2-ht[It-1].y,xt.x-ht[It-1].x,xt.y-ht[It-1].y],Ve[Ve.length-1].deltas.push(Ie);break;case"qct":var zt=ht[It-1].x+2/3*(xt.x1-ht[It-1].x),Lt=ht[It-1].y+2/3*(xt.y1-ht[It-1].y),Ft=xt.x+2/3*(xt.x1-xt.x),dt=xt.y+2/3*(xt.y1-xt.y),ke=xt.x,fr=xt.y;Ie=[zt-ht[It-1].x,Lt-ht[It-1].y,Ft-ht[It-1].x,dt-ht[It-1].y,ke-ht[It-1].x,fr-ht[It-1].y],Ve[Ve.length-1].deltas.push(Ie);break;case"arc":Ve.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ve[Ve.length-1].abs)&&Ve[Ve.length-1].abs.push(xt)}}Le=Ee?null:ge==="stroke"?"stroke":"fill";for(var sr=!1,xr=0;xr<Ve.length;xr++)if(Ve[xr].arc)for(var tr=Ve[xr].abs,Ge=0;Ge<tr.length;Ge++){var nt=tr[Ge];nt.type==="arc"?ee.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,Ee,!sr):oe.call(this,nt.x,nt.y),sr=!0}else if(Ve[xr].close===!0)this.pdf.internal.out("h"),sr=!1;else if(Ve[xr].begin!==!0){var ut=Ve[xr].start.x,Nt=Ve[xr].start.y;ue.call(this,Ve[xr].deltas,ut,Nt),sr=!0}Le&&J.call(this,Le),Ee&&le.call(this)}},$=function(ge){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ie=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ge-Ie;case"top":return ge+Ee-Ie;case"hanging":return ge+Ee-2*Ie;case"middle":return ge+Ee/2-Ie;default:return ge}},X=function(ge){return ge+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var ge=function(){};return ge.colorStops=[],ge.addColorStop=function(Ee,Ie){this.colorStops.push([Ee,Ie])},ge.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ge.isCanvasGradient=!0,ge},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ee=function(ge,Ee,Ie,Le,Ve,ht,It,xt,rt){for(var zt=be.call(this,Ie,Le,Ve,ht),Lt=0;Lt<zt.length;Lt++){var Ft=zt[Lt];Lt===0&&(rt?Z.call(this,Ft.x1+ge,Ft.y1+Ee):oe.call(this,Ft.x1+ge,Ft.y1+Ee)),ce.call(this,ge,Ee,Ft.x2,Ft.y2,Ft.x3,Ft.y3,Ft.x4,Ft.y4)}xt?le.call(this):J.call(this,It)},J=function(ge){switch(ge){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(ge,Ee){this.pdf.internal.out(r(ge)+" "+n(Ee)+" m")},H=function(ge){var Ee;switch(ge.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var Ie=this.pdf.getTextDimensions(ge.text),Le=$.call(this,ge.y),Ve=X.call(this,Le)-Ie.h,ht=this.ctx.transform.applyToPoint(new u(ge.x,Le)),It=this.ctx.transform.decompose(),xt=new p;xt=(xt=(xt=xt.multiply(It.translate)).multiply(It.skew)).multiply(It.scale);for(var rt,zt,Lt,Ft=this.ctx.transform.applyToRectangle(new a(ge.x,Le,Ie.w,Ie.h)),dt=xt.applyToRectangle(new a(ge.x,Ve,Ie.w,Ie.h)),ke=P.call(this,dt),fr=[],sr=0;sr<ke.length;sr+=1)fr.indexOf(ke[sr])===-1&&fr.push(ke[sr]);if(B(fr),this.autoPaging)for(var xr=fr[0],tr=fr[fr.length-1],Ge=xr;Ge<tr+1;Ge++){this.pdf.setPage(Ge);var nt=Ge===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[2],Kt=Nt-this.margin[0],Vt=this.pdf.internal.pageSize.width-this.margin[1],Ke=Vt-this.margin[3],me=Ge===1?0:ut+(Ge-2)*Kt;if(this.ctx.clip_path.length!==0){var pe=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(rt,this.posX+this.margin[3],-1*me+nt),G.call(this,"fill",!0),this.path=pe}var Ae=F([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-me+nt+this.ctx.prevPageLastElemOffset)[0];ge.scale>=.01&&(zt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(zt*ge.scale),Lt=this.lineWidth,this.lineWidth=Lt*ge.scale);var Be=this.autoPaging!=="text";if(Be||Ae.y+Ae.h<=Nt){if(Be||Ae.y>=nt&&Ae.x<=Vt){var Ne=Be?ge.text:this.pdf.splitTextToSize(ge.text,ge.maxWidth||Vt-Ae.x)[0],Tt=F([JSON.parse(JSON.stringify(Ft))],this.posX+this.margin[3],-me+nt+this.ctx.prevPageLastElemOffset)[0],bt=Be&&(Ge>xr||Ge<tr)&&O.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,Kt,null).clip().discardPath()),this.pdf.text(Ne,Tt.x,Tt.y,{angle:ge.angle,align:Ee,renderingMode:ge.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Ae.y<Nt&&(this.ctx.prevPageLastElemOffset+=Nt-Ae.y);ge.scale>=.01&&(this.pdf.setFontSize(zt),this.lineWidth=Lt)}else ge.scale>=.01&&(zt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(zt*ge.scale),Lt=this.lineWidth,this.lineWidth=Lt*ge.scale),this.pdf.text(ge.text,ht.x+this.posX,ht.y+this.posY,{angle:ge.angle,align:Ee,renderingMode:ge.renderingMode,maxWidth:ge.maxWidth}),ge.scale>=.01&&(this.pdf.setFontSize(zt),this.lineWidth=Lt)},oe=function(ge,Ee,Ie,Le){Ie=Ie||0,Le=Le||0,this.pdf.internal.out(r(ge+Ie)+" "+n(Ee+Le)+" l")},ue=function(ge,Ee,Ie){return this.pdf.lines(ge,Ee,Ie,null,null)},ce=function(ge,Ee,Ie,Le,Ve,ht,It,xt){this.pdf.internal.out([t(i(Ie+ge)),t(s(Le+Ee)),t(i(Ve+ge)),t(s(ht+Ee)),t(i(It+ge)),t(s(xt+Ee)),"c"].join(" "))},be=function(ge,Ee,Ie,Le){for(var Ve=2*Math.PI,ht=Math.PI/2;Ee>Ie;)Ee-=Ve;var It=Math.abs(Ie-Ee);It<Ve&&Le&&(It=Ve-It);for(var xt=[],rt=Le?-1:1,zt=Ee;It>1e-5;){var Lt=zt+rt*Math.min(It,ht);xt.push(Te.call(this,ge,zt,Lt)),It-=Math.abs(Lt-zt),zt=Lt}return xt},Te=function(ge,Ee,Ie){var Le=(Ie-Ee)/2,Ve=ge*Math.cos(Le),ht=ge*Math.sin(Le),It=Ve,xt=-ht,rt=It*It+xt*xt,zt=rt+It*Ve+xt*ht,Lt=4/3*(Math.sqrt(2*rt*zt)-zt)/(It*ht-xt*Ve),Ft=It-Lt*xt,dt=xt+Lt*It,ke=Ft,fr=-dt,sr=Le+Ee,xr=Math.cos(sr),tr=Math.sin(sr);return{x1:ge*Math.cos(Ee),y1:ge*Math.sin(Ee),x2:Ft*xr-dt*tr,y2:Ft*tr+dt*xr,x3:ke*xr-fr*tr,y3:ke*tr+fr*xr,x4:ge*Math.cos(Ie),y4:ge*Math.sin(Ie)}},ve=function(ge){return 180*ge/Math.PI},Ce=function(ge,Ee,Ie,Le,Ve,ht){var It=ge+.5*(Ie-ge),xt=Ee+.5*(Le-Ee),rt=Ve+.5*(Ie-Ve),zt=ht+.5*(Le-ht),Lt=Math.min(ge,Ve,It,rt),Ft=Math.max(ge,Ve,It,rt),dt=Math.min(Ee,ht,xt,zt),ke=Math.max(Ee,ht,xt,zt);return new a(Lt,dt,Ft-Lt,ke-dt)},$e=function(ge,Ee,Ie,Le,Ve,ht,It,xt){var rt,zt,Lt,Ft,dt,ke,fr,sr,xr,tr,Ge,nt,ut,Nt,Kt=Ie-ge,Vt=Le-Ee,Ke=Ve-Ie,me=ht-Le,pe=It-Ve,Ae=xt-ht;for(zt=0;zt<41;zt++)xr=(fr=(Lt=ge+(rt=zt/40)*Kt)+rt*((dt=Ie+rt*Ke)-Lt))+rt*(dt+rt*(Ve+rt*pe-dt)-fr),tr=(sr=(Ft=Ee+rt*Vt)+rt*((ke=Le+rt*me)-Ft))+rt*(ke+rt*(ht+rt*Ae-ke)-sr),zt==0?(Ge=xr,nt=tr,ut=xr,Nt=tr):(Ge=Math.min(Ge,xr),nt=Math.min(nt,tr),ut=Math.max(ut,xr),Nt=Math.max(Nt,tr));return new a(Math.round(Ge),Math.round(nt),Math.round(ut-Ge),Math.round(Nt-nt))},Je=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ge,Ee,Ie=(ge=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:ge,lineDashOffset:Ee}));this.prevLineDash!==Ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ie)}}})(On.API),(function(e){var t=function(u){var a,p,d,g,_,C,S,I,O,P;for(p=[],d=0,g=(u+=a="\0\0\0\0".slice(u.length%4||4)).length;g>d;d+=4)(_=(u.charCodeAt(d)<<24)+(u.charCodeAt(d+1)<<16)+(u.charCodeAt(d+2)<<8)+u.charCodeAt(d+3))!==0?(C=(_=((_=((_=((_=(_-(P=_%85))/85)-(O=_%85))/85)-(I=_%85))/85)-(S=_%85))/85)%85,p.push(C+33,S+33,I+33,O+33,P+33)):p.push(122);return(function(k,F){for(var B=F;B>0;B--)k.pop()})(p,a.length),String.fromCharCode.apply(String,p)+"~>"},r=function(u){var a,p,d,g,_,C=String,S="length",I=255,O="charCodeAt",P="slice",k="replace";for(u[P](-2),u=u[P](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),d=[],g=0,_=(u+=a="uuuuu"[P](u[S]%5||5))[S];_>g;g+=5)p=52200625*(u[O](g)-33)+614125*(u[O](g+1)-33)+7225*(u[O](g+2)-33)+85*(u[O](g+3)-33)+(u[O](g+4)-33),d.push(I&p>>24,I&p>>16,I&p>>8,I&p);return(function(F,B){for(var N=B;N>0;N--)F.pop()})(d,a[S]),C.fromCharCode.apply(C,d)},n=function(u){return u.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),a.test(u)===!1)return"";for(var p="",d=0;d<u.length;d+=2)p+=String.fromCharCode("0x"+(u[d]+u[d+1]));return p},s=function(u){for(var a=new Uint8Array(u.length),p=u.length;p--;)a[p]=u.charCodeAt(p);return(a=e3(a)).reduce(function(d,g){return d+String.fromCharCode(g)},"")};e.processDataByFilters=function(u,a){var p=0,d=u||"",g=[];for(typeof(a=a||[])=="string"&&(a=[a]),p=0;p<a.length;p+=1)switch(a[p]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[p]+'" is not implemented')}return{data:d,reverseChain:g.reverse().join(" ")}}})(On.API),(function(e){e.loadFile=function(t,r,n){return(function(i,s,u){s=s!==!1,u=typeof u=="function"?u:function(){};var a=void 0;try{a=(function(p,d,g){var _=new XMLHttpRequest,C=0,S=function(I){var O=I.length,P=[],k=String.fromCharCode;for(C=0;C<O;C+=1)P.push(k(255&I.charCodeAt(C)));return P.join("")};if(_.open("GET",p,!d),_.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(_.onload=function(){_.status===200?g(S(this.responseText)):g(void 0)}),_.send(null),d&&_.status===200)return S(_.responseText)})(i,s,u)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(On.API),(function(e){function t(){return(ei.html2canvas?Promise.resolve(ei.html2canvas):A5(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(ei.DOMPurify?Promise.resolve(ei.DOMPurify):A5(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var p=va(a);return p==="undefined"?"undefined":p==="string"||a instanceof String?"string":p==="number"||a instanceof Number?"number":p==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":p==="object"?"object":"unknown"},i=function(a,p){var d=document.createElement(a);for(var g in p.className&&(d.className=p.className),p.innerHTML&&p.dompurify&&(d.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)d.style[g]=p.style[g];return d},s=function a(p,d){for(var g=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),_=p.firstChild;_;_=_.nextSibling)d!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||g.appendChild(a(_,d));return p.nodeType===1&&(p.nodeName==="CANVAS"?(g.width=p.width,g.height=p.height,g.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(g.value=p.value),g.addEventListener("load",function(){g.scrollTop=p.scrollTop,g.scrollLeft=p.scrollLeft},!0)),g},u=function a(p){var d=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),g=a.convert(Promise.resolve(),d);return(g=g.setProgress(1,a,1,[a])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(a,p){return a.__proto__=p||u.prototype,a},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(a,p){return this.then(function(){switch(p=p||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),p){case"string":return this.then(r).then(function(d){return this.set({src:i("div",{innerHTML:a,dompurify:d})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},u.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,p(this.prop.container,d)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var d=this.opt.jsPDF,g=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=g,g)for(var S=0;S<g.length;++S){var I=g[S],O=I.src.find(function(P){return P.format==="truetype"});O&&d.addFont(O.url,I.ref.name,I.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,d.context2d.save(!0),p(this.prop.container,C)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(a,p,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(a,p):this.outputPdf(a,p)},u.prototype.outputPdf=function(a,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,p)})},u.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},u.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(a){if(n(a)!=="object")return this;var p=Object.keys(a||{}).map(function(d){if(d in u.template.prop)return function(){this.prop[d]=a[d]};switch(d){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[d]=a[d]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(a,p){return this.then(function(){var d=a in u.template.prop?this.prop[a]:this.opt[a];return p?p(d):d})},u.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},u.prototype.setPageSize=function(a){function p(d,g){return Math.floor(d*g/72*96)}return this.then(function(){(a=a||On.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:p(a.inner.width,a.k),height:p(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},u.prototype.setProgress=function(a,p,d,g){return a!=null&&(this.progress.val=a),p!=null&&(this.progress.state=p),d!=null&&(this.progress.n=d),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(a,p,d,g){return this.setProgress(a?this.progress.val+a:null,p||null,d?this.progress.n+d:null,g?this.progress.stack.concat(g):null)},u.prototype.then=function(a,p){var d=this;return this.thenCore(a,p,function(g,_){return d.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(C){return d.updateProgress(null,g),C}).then(g,_).then(function(C){return d.updateProgress(1),C})})},u.prototype.thenCore=function(a,p,d){d=d||Promise.prototype.then;var g=this;a&&(a=a.bind(g)),p&&(p=p.bind(g));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:u.convert(Object.assign({},g),Promise.prototype),C=d.call(_,a,p);return u.convert(C,g.__proto__)},u.prototype.thenExternal=function(a,p){return Promise.prototype.then.call(this,a,p)},u.prototype.thenList=function(a){var p=this;return a.forEach(function(d){p=p.thenCore(d)}),p},u.prototype.catch=function(a){a&&(a=a.bind(this));var p=Promise.prototype.catch.call(this,a);return u.convert(p,this)},u.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},u.prototype.error=function(a){return this.then(function(){throw new Error(a)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,On.getPageSize=function(a,p,d){if(va(a)==="object"){var g=a;a=g.orientation,p=g.unit||p,d=g.format||d}p=p||"mm",d=d||"a4",a=(""+(a||"P")).toLowerCase();var _,C=(""+d).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+p}var I,O=0,P=0;if(S.hasOwnProperty(C))O=S[C][1]/_,P=S[C][0]/_;else try{O=d[1],P=d[0]}catch{throw new Error("Invalid format: "+d)}if(a==="p"||a==="portrait")a="p",P>O&&(I=P,P=O,O=I);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",O>P&&(I=P,P=O,O=I)}return{width:P,height:O,unit:p,k:_,orientation:a}},e.html=function(a,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(cS):null;var d=new u(p);return p.worker?d:d.from(a).doCallback()}})(On.API),On.API.addJS=function(e){return jF=e,this.internal.events.subscribe("postPutResources",function(){k_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(k_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),BF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){k_!==void 0&&BF!==void 0&&this.internal.out("/Names <</JavaScript "+k_+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),s=0;s<i.length;s++){var u=i[s],a=n.exec(u);if(a!=null){var p=a[1];r.internal.newObjectDeferredBegin(p,!1)}r.internal.write(u)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(s=0;s<d;s++){var _=r.internal.newObject();g.push(_);var C=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+C.objId+" 0 R /XYZ null null null]>> endobj")}var S=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<g.length;s++)r.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+S+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,s){var u={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(u),u},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var u=n.children[s];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var a=this.count=this.count_r({count:0},u);if(a>0&&this.line("/Count "+a),u.options&&u.options.pageNumber){var p=r.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])})(On.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,s,u,a){var p,d=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=u||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,p=(function(_){for(var C,S=256*_.charCodeAt(4)+_.charCodeAt(5),I=_.length,O={width:0,height:0,numcomponents:1},P=4;P<I;P+=2){if(P+=S,t.indexOf(_.charCodeAt(P+1))!==-1){C=256*_.charCodeAt(P+5)+_.charCodeAt(P+6),O={width:256*_.charCodeAt(P+7)+_.charCodeAt(P+8),height:C,numcomponents:_.charCodeAt(P+9)};break}S=256*_.charCodeAt(P+2)+_.charCodeAt(P+3)}return O})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),p.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}g={data:r,width:p.width,height:p.height,colorSpace:a,bitsPerComponent:8,filter:d,index:n,alias:i}}return g}})(On.API),On.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,s=mfe(e,{checkCrc:!0}),u=s.width,a=s.height,p=s.channels,d=s.palette,g=s.depth;i=d&&p===1?(function(X){for(var ee=X.width,J=X.height,le=X.data,Z=X.palette,H=X.depth,oe=!1,ue=[],ce=[],be=void 0,Te=!1,ve=0,Ce=0;Ce<Z.length;Ce++){var $e=Uk(Z[Ce],4),Je=$e[0],ge=$e[1],Ee=$e[2],Ie=$e[3];ue.push(Je,ge,Ee),Ie!=null&&(Ie===0?(ve++,ce.length<1&&ce.push(Ce)):Ie<255&&(Te=!0))}if(Te||ve>1){oe=!0,ce=void 0;var Le=ee*J;be=new Uint8Array(Le);for(var Ve=new DataView(le.buffer),ht=0;ht<Le;ht++){var It=hS(Ve,ht,H),xt=Uk(Z[It],4)[3];be[ht]=xt}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:le,alphaBytes:be,needSMask:oe,palette:ue,mask:ce}})(s):p===2||p===4?(function(X){for(var ee=X.data,J=X.width,le=X.height,Z=X.channels,H=X.depth,oe=Z===2?"DeviceGray":"DeviceRGB",ue=Z-1,ce=J*le,be=ue,Te=ce*be,ve=1*ce,Ce=Math.ceil(Te*H/8),$e=Math.ceil(ve*H/8),Je=new Uint8Array(Ce),ge=new Uint8Array($e),Ee=new DataView(ee.buffer),Ie=new DataView(Je.buffer),Le=new DataView(ge.buffer),Ve=!1,ht=0;ht<ce;ht++){for(var It=ht*Z,xt=0;xt<be;xt++)ZF(Ie,hS(Ee,It+xt,H),ht*be+xt,H);var rt=hS(Ee,It+be,H);rt<(1<<H)-1&&(Ve=!0),ZF(Le,rt,1*ht,H)}return{colorSpace:oe,colorsPerPixel:ue,colorBytes:Je,alphaBytes:ge,needSMask:Ve}})(s):(function(X){var ee=X.data,J=X.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:ee instanceof Uint8Array?ee:new Uint8Array(ee.buffer),needSMask:!1}})(s);var _,C,S,I=i,O=I.colorSpace,P=I.colorsPerPixel,k=I.colorBytes,F=I.alphaBytes,B=I.needSMask,N=I.palette,G=I.mask,$=null;return n!==On.API.image_compression.NONE&&typeof e3=="function"?($=(function(X){var ee;switch(X){case On.API.image_compression.FAST:ee=11;break;case On.API.image_compression.MEDIUM:ee=13;break;case On.API.image_compression.SLOW:ee=14;break;default:ee=12}return ee})(n),_=this.decode.FLATE_DECODE,C="/Predictor ".concat($," "),e=UF(k,u*P,P,n),B&&(S=UF(F,u,1,n))):(_=void 0,C="",e=k,B&&(S=F)),C+="/Colors ".concat(P," /BitsPerComponent ").concat(g," /Columns ").concat(u),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:r,data:e,index:t,filter:_,decodeParameters:C,transparency:G,palette:N,sMask:S,predictor:$,width:u,height:a,bitsPerComponent:g,colorSpace:O}}},(function(e){e.processGIF89A=function(t,r,n,i){var s=new Ffe(t),u=s.width,a=s.height,p=[];s.decodeAndBlitFrameRGBA(0,p);var d={data:p,width:u,height:a},g=new dS(100).encode(d,100);return e.processJPEG.call(this,g,r,n,i)},e.processGIF87A=e.processGIF89A})(On.API),$c.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},$c.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Fa.log("bit decode error:"+r)}},$c.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var s=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var p=this.palette[s>>7-a&1];this.data[u+4*a]=p.blue,this.data[u+4*a+1]=p.green,this.data[u+4*a+2]=p.red,this.data[u+4*a+3]=255}r!==0&&(this.pos+=4-r)}},$c.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+2*i*4,a=s>>4,p=15&s,d=this.palette[a];if(this.data[u]=d.blue,this.data[u+1]=d.green,this.data[u+2]=d.red,this.data[u+3]=255,2*i+1>=this.width)break;d=this.palette[p],this.data[u+4]=d.blue,this.data[u+4+1]=d.green,this.data[u+4+2]=d.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},$c.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(i<this.palette.length){var u=this.palette[i];this.data[s]=u.red,this.data[s+1]=u.green,this.data[s+2]=u.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},$c.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(s&t)/t*255|0,a=(s>>5&t)/t*255|0,p=(s>>10&t)/t*255|0,d=s>>15?255:0,g=n*this.width*4+4*i;this.data[g]=p,this.data[g+1]=a,this.data[g+2]=u,this.data[g+3]=d}this.pos+=e}},$c.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(u&t)/t*255|0,p=(u>>5&r)/r*255|0,d=(u>>11)/t*255|0,g=i*this.width*4+4*s;this.data[g]=d,this.data[g+1]=p,this.data[g+2]=a,this.data[g+3]=255}this.pos+=e}},$c.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=255}this.pos+=this.width%4}},$c.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=u}},$c.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var s=new $c(t,!1),u=s.width,a=s.height,p={data:s.getData(),width:u,height:a},d=new dS(100).encode(p,100);return e.processJPEG.call(this,d,r,n,i)}})(On.API),KF.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var s=new KF(t),u=s.width,a=s.height,p={data:s.getData(),width:u,height:a},d=new dS(100).encode(p,100);return e.processJPEG.call(this,d,r,n,i)}})(On.API),On.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,s=new Uint8Array(i/4*3),u=new Uint8Array(i/4),a=0,p=0,d=0;d<i;d+=4){var g=n[d],_=n[d+1],C=n[d+2],S=n[d+3];s[a++]=g,s[a++]=_,s[a++]=C,u[p++]=S}var I=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:I,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},On.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xm=On.API,F_=Xm.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,p=a.fof?a.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,g=d.fof?d.fof:1,_=t.doKerning!==!1,C=0,S=e.length,I=0,O=a[0]||p,P=[];for(r=0;r<S;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?P.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+u*(1e3/s)||0)/1e3):(C=_&&va(d[n])==="object"&&!isNaN(parseInt(d[n][I],10))?d[n][I]/g:0,P.push((a[n]||O)/p+C)),I=n;return P},zF=Xm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Xm.processArabic&&(e=Xm.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:F_.apply(this,arguments).reduce(function(s,u){return s+u},0)},$F=function(e,t,r,n){for(var i=[],s=0,u=e.length,a=0;s!==u&&a+t[s]<r;)a+=t[s],s++;i.push(e.slice(0,s));var p=s;for(a=0;s!==u;)a+t[s]>n&&(i.push(e.slice(p,s)),a=0,p=s),a+=t[s],s++;return p!==s&&i.push(e.slice(p,s)),i},qF=function(e,t,r){r||(r={});var n,i,s,u,a,p,d,g=[],_=[g],C=r.textIndent||0,S=0,I=0,O=e.split(" "),P=F_.apply(this,[" ",r])[0];if(p=r.lineIndent===-1?O[0].length+2:r.lineIndent||0){var k=Array(p).join(" "),F=[];O.map(function(N){(N=N.split(/\s*\n/)).length>1?F=F.concat(N.map(function(G,$){return($&&G.length?`
`:"")+G})):F.push(N[0])}),O=F,p=zF.apply(this,[k,r])}for(s=0,u=O.length;s<u;s++){var B=0;if(n=O[s],p&&n[0]==`
`&&(n=n.substr(1),B=1),C+S+(I=(i=F_.apply(this,[n,r])).reduce(function(N,G){return N+G},0))>t||B){if(I>t){for(a=$F.apply(this,[n,i,t-(C+S),t]),g.push(a.shift()),g=[a.pop()];a.length;)_.push([a.shift()]);I=i.slice(n.length-(g[0]?g[0].length:0)).reduce(function(N,G){return N+G},0)}else g=[n];_.push(g),C=I+p,S=P}else g.push(n),C+=S+I,S=P}return d=p?function(N,G){return(G?k:"")+N.join(" ")}:function(N){return N.join(" ")},_.map(d)},Xm.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var _=this.internal.getFont(g.fontName,g.fontStyle),C="Unicode";return _.metadata[C]?{widths:_.metadata[C].widths||{0:1},kerning:_.metadata[C].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/i;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=r.lineIndent;var a,p,d=[];for(a=0,p=n.length;a<p;a++)d=d.concat(qF.apply(this,[n[a],u,s]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[r[s]]=t[s],i[t[s]]=r[s];var u=function(C){return"0x"+parseInt(C,10).toString(16)},a=e.__fontmetrics__.compress=function(C){var S,I,O,P,k=["{"];for(var F in C){if(S=C[F],isNaN(parseInt(F,10))?I="'"+F+"'":(F=parseInt(F,10),I=(I=u(F).slice(2)).slice(0,-1)+i[I.slice(-1)]),typeof S=="number")S<0?(O=u(S).slice(3),P="-"):(O=u(S).slice(2),P=""),O=P+O.slice(0,-1)+i[O.slice(-1)];else{if(va(S)!=="object")throw new Error("Don't know what to do with value type "+va(S)+".");O=a(S)}k.push(I+O)}return k.push("}"),k.join("")},p=e.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,I,O,P,k={},F=1,B=k,N=[],G="",$="",X=C.length-1,ee=1;ee<X;ee+=1)(P=C[ee])=="'"?S?(O=S.join(""),S=void 0):S=[]:S?S.push(P):P=="{"?(N.push([B,O]),B={},O=void 0):P=="}"?((I=N.pop())[0][I[1]]=B,O=void 0,B=I[0]):P=="-"?F=-1:O===void 0?n.hasOwnProperty(P)?(G+=n[P],O=parseInt(G,16)*F,F=1,G=""):G+=P:n.hasOwnProperty(P)?($+=n[P],B[O]=parseInt($,16)*F,F=1,O=void 0,$=""):$+=P;return k},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},_={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(C){var S=C.font,I=_.Unicode[S.postScriptName];I&&(S.metadata.Unicode={},S.metadata.Unicode.widths=I.widths,S.metadata.Unicode.kerning=I.kerning);var O=g.Unicode[S.postScriptName];O&&(S.metadata.Unicode.encoding=O,S.encoding=O.codePages[0])}])})(On.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=r.charCodeAt(s);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,s=r.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(v1(a)),u.metadata=e.API.TTFFont.open(a),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,n)}}])})(On),On.API.addSvgAsImage=function(e,t,r,n,i,s,u,a){if(isNaN(t)||isNaN(r))throw Fa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Fa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=n,p.height=i;var d=p.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(ei.canvg?Promise.resolve(ei.canvg):A5(()=>import("./index.es-DG1fRI-Q.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)).catch(function(C){return Promise.reject(new Error("Could not load canvg: "+C))}).then(function(C){return C.default?C.default:C}).then(function(C){return C.fromString(d,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(g)}).then(function(){_.addImage(p.toDataURL("image/jpeg",1),t,r,n,i,u,a)})},On.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},On.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,s,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(u),p=[],d=0,g=0,_=0;function C(I,O){var P,k=!1;for(P=0;P<I.length;P+=1)I[P]===O&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var S=a.length;for(_=0;_<S;_+=1)r[a[_]].value=r[a[_]].defaultValue,r[a[_]].explicitSet=!1}if(va(e)==="object"){for(i in e)if(s=e[i],C(a,i)&&s!==void 0){if(r[i].type==="boolean"&&typeof s=="boolean")r[i].value=s;else if(r[i].type==="name"&&C(r[i].valueSet,s))r[i].value=s;else if(r[i].type==="integer"&&Number.isInteger(s))r[i].value=s;else if(r[i].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")p.push(String(s[d]-1));else if(s[d].length>1){for(g=0;g<s[d].length;g+=1)typeof s[d][g]!="number"&&(n=!1);n===!0&&p.push([s[d][0]-1,s[d][1]-1].join(" "))}r[i].value="["+p.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var I,O=[];for(I in r)r[I].explicitSet===!0&&(r[I].type==="name"?O.push("/"+I+" /"+r[I].value):O.push("/"+I+" "+r[I].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+u.length+a.length+i.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+u+a+p),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(On.API),(function(e){var t=e.API,r=t.pdfEscape16=function(s,u){for(var a,p=u.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],_=0,C=s.length;_<C;++_){if(a=u.metadata.characterToGlyph(s.charCodeAt(_)),u.metadata.glyIdsUsed.push(a),u.metadata.toUnicode[a]=s.charCodeAt(_),p.indexOf(a)==-1&&(p.push(a),p.push([parseInt(u.metadata.widthOfGlyph(a),10)])),a=="0")return g.join("");a=a.toString(16),g.push(d[4-a.length],a)}return g.join("")},n=function(s){var u,a,p,d,g,_,C;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],_=0,C=(a=Object.keys(s).sort(function(S,I){return S-I})).length;_<C;_++)u=a[_],p.length>=100&&(g+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),s[u]!==void 0&&s[u]!==null&&typeof s[u].toString=="function"&&(d=("0000"+s[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+d+">"));return p.length&&(g+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(u){var a=u.font,p=u.out,d=u.newObject,g=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var _=a.metadata.Unicode.widths,C=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),S="",I=0;I<C.length;I++)S+=String.fromCharCode(C[I]);var O=d();g({data:S,addLength1:!0,objectId:O}),p("endobj");var P=d();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:P}),p("endobj");var k=d();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+og(a.fontName)),p("/FontFile2 "+O+" 0 R"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/Flags "+a.metadata.flags),p("/StemV "+a.metadata.stemV),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p(">>"),p("endobj");var F=d();p("<<"),p("/Type /Font"),p("/BaseFont /"+og(a.fontName)),p("/FontDescriptor "+k+" 0 R"),p("/W "+e.API.PDFObject.convert(_)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+a.encoding+")"),p(">>"),p(">>"),p("endobj"),a.objectNumber=d(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+P+" 0 R"),p("/BaseFont /"+og(a.fontName)),p("/Encoding /"+a.encoding),p("/DescendantFonts ["+F+" 0 R]"),p(">>"),p("endobj"),a.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(u){var a=u.font,p=u.out,d=u.newObject,g=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var _=a.metadata.rawData,C="",S=0;S<_.length;S++)C+=String.fromCharCode(_[S]);var I=d();g({data:C,addLength1:!0,objectId:I}),p("endobj");var O=d();g({data:n(a.metadata.toUnicode),addLength1:!0,objectId:O}),p("endobj");var P=d();p("<<"),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p("/StemV "+a.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+I+" 0 R"),p("/Flags 96"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/FontName /"+og(a.fontName)),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p(">>"),p("endobj"),a.objectNumber=d();for(var k=0;k<a.metadata.hmtx.widths.length;k++)a.metadata.hmtx.widths[k]=parseInt(a.metadata.hmtx.widths[k]*(1e3/a.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+og(a.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),p("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var u,a=s.text||"",p=s.x,d=s.y,g=s.options||{},_=s.mutex||{},C=_.pdfEscape,S=_.activeFontKey,I=_.fonts,O=S,P="",k=0,F="",B=I[O].encoding;if(I[O].encoding!=="Identity-H")return{text:a,x:p,y:d,options:g,mutex:_};for(F=a,O=S,Array.isArray(a)&&(F=a[0]),k=0;k<F.length;k+=1)I[O].metadata.hasOwnProperty("cmap")&&(u=I[O].metadata.cmap.unicode.codeMap[F[k].charCodeAt(0)]),u||F[k].charCodeAt(0)<256&&I[O].metadata.hasOwnProperty("Unicode")?P+=F[k]:P+="";var N="";return parseInt(O.slice(1))<14||B==="WinAnsiEncoding"?N=C(P,O).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(N=r(P,I[O])),_.isHex=!0,{text:N,x:p,y:d,options:g,mutex:_}};t.events.push(["postProcessText",function(s){var u=s.text||"",a=[],p={text:u,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(u)){var d=0;for(d=0;d<u.length;d+=1)Array.isArray(u[d])&&u[d].length===3?a.push([i(Object.assign({},p,{text:u[d][0]})).text,u[d][1],u[d][2]]):a.push(i(Object.assign({},p,{text:u[d]})).text);s.text=a}else s.text=i(Object.assign({},p,{text:u})).text}])})(On),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(On.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,s,u,a,p,d,g,_=t,C=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,B=0;this.__bidiEngine__={};var N=function(Z){var H=Z.charCodeAt(),oe=H>>8,ue=O[oe];return ue!==void 0?_[256*ue+(255&H)]:oe===252||oe===253?"AL":k.test(oe)?"L":oe===8?"R":"N"},G=function(Z){for(var H,oe=0;oe<Z.length;oe++){if((H=N(Z.charAt(oe)))==="L")return!1;if(H==="R")return!0}return!1},$=function(Z,H,oe,ue){var ce,be,Te,ve,Ce=H[ue];switch(Ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(Ce="AN");break;case"AL":F=!0,Ce="R";break;case"WS":case"BN":Ce="N";break;case"CS":ue<1||ue+1>=H.length||(ce=oe[ue-1])!=="EN"&&ce!=="AN"||(be=H[ue+1])!=="EN"&&be!=="AN"?Ce="N":F&&(be="AN"),Ce=be===ce?be:"N";break;case"ES":Ce=(ce=ue>0?oe[ue-1]:"B")==="EN"&&ue+1<H.length&&H[ue+1]==="EN"?"EN":"N";break;case"ET":if(ue>0&&oe[ue-1]==="EN"){Ce="EN";break}if(F){Ce="N";break}for(Te=ue+1,ve=H.length;Te<ve&&H[Te]==="ET";)Te++;Ce=Te<ve&&H[Te]==="EN"?"EN":"N";break;case"NSM":if(u&&!a){for(ve=H.length,Te=ue+1;Te<ve&&H[Te]==="NSM";)Te++;if(Te<ve){var $e=Z[ue],Je=$e>=1425&&$e<=2303||$e===64286;if(ce=H[Te],Je&&(ce==="R"||ce==="AL")){Ce="R";break}}}Ce=ue<1||(ce=H[ue-1])==="B"?"N":oe[ue-1];break;case"B":F=!1,i=!0,Ce=B;break;case"S":s=!0,Ce="N"}return Ce},X=function(Z,H,oe){var ue=Z.split("");return oe&&ee(ue,oe,{hiLevel:B}),ue.reverse(),H&&H.reverse(),ue.join("")},ee=function(Z,H,oe){var ue,ce,be,Te,ve,Ce=-1,$e=Z.length,Je=0,ge=[],Ee=B?S:C,Ie=[];for(F=!1,i=!1,s=!1,ce=0;ce<$e;ce++)Ie[ce]=N(Z[ce]);for(be=0;be<$e;be++){if(ve=Je,ge[be]=$(Z,Ie,ge,be),ue=240&(Je=Ee[ve][I[ge[be]]]),Je&=15,H[be]=Te=Ee[Je][5],ue>0)if(ue===16){for(ce=Ce;ce<be;ce++)H[ce]=1;Ce=-1}else Ce=-1;if(Ee[Je][6])Ce===-1&&(Ce=be);else if(Ce>-1){for(ce=Ce;ce<be;ce++)H[ce]=Te;Ce=-1}Ie[be]==="B"&&(H[be]=0),oe.hiLevel|=Te}s&&(function(Le,Ve,ht){for(var It=0;It<ht;It++)if(Le[It]==="S"){Ve[It]=B;for(var xt=It-1;xt>=0&&Le[xt]==="WS";xt--)Ve[xt]=B}})(Ie,H,$e)},J=function(Z,H,oe,ue,ce){if(!(ce.hiLevel<Z)){if(Z===1&&B===1&&!i)return H.reverse(),void(oe&&oe.reverse());for(var be,Te,ve,Ce,$e=H.length,Je=0;Je<$e;){if(ue[Je]>=Z){for(ve=Je+1;ve<$e&&ue[ve]>=Z;)ve++;for(Ce=Je,Te=ve-1;Ce<Te;Ce++,Te--)be=H[Ce],H[Ce]=H[Te],H[Te]=be,oe&&(be=oe[Ce],oe[Ce]=oe[Te],oe[Te]=be);Je=ve}Je++}}},le=function(Z,H,oe){var ue=Z.split(""),ce={hiLevel:B};return oe||(oe=[]),ee(ue,oe,ce),(function(be,Te,ve){if(ve.hiLevel!==0&&g)for(var Ce,$e=0;$e<be.length;$e++)Te[$e]===1&&(Ce=P.indexOf(be[$e]))>=0&&(be[$e]=P[Ce+1])})(ue,oe,ce),J(2,ue,H,oe,ce),J(1,ue,H,oe,ce),ue.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,H,oe){if((function(ce,be){if(be)for(var Te=0;Te<ce.length;Te++)be[Te]=Te;a===void 0&&(a=G(ce)),d===void 0&&(d=G(ce))})(Z,H),u||!p||d)if(u&&p&&a^d)B=a?1:0,Z=X(Z,H,oe);else if(!u&&p&&d)B=a?1:0,Z=le(Z,H,oe),Z=X(Z,H);else if(!u||a||p||d){if(u&&!p&&a^d)Z=X(Z,H),a?(B=0,Z=le(Z,H,oe)):(B=1,Z=le(Z,H,oe),Z=X(Z,H));else if(u&&a&&!p&&d)B=1,Z=le(Z,H,oe),Z=X(Z,H);else if(!u&&!p&&a^d){var ue=g;a?(B=1,Z=le(Z,H,oe),B=0,g=!1,Z=le(Z,H,oe),g=ue):(B=0,Z=le(Z,H,oe),Z=X(Z,H),B=1,g=!1,Z=le(Z,H,oe),g=ue,Z=X(Z,H))}}else B=0,Z=le(Z,H,oe);else B=a?1:0,Z=le(Z,H,oe);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(u=Z.isInputVisual,p=Z.isOutputVisual,a=Z.isInputRtl,d=Z.isOutputRtl,g=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var u=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(u=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?u.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):u.push([r.doBidiReorder(i[a])]);n.text=u}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(On),On.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Td(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Yfe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Nfe(this.contents),this.head=new jfe(this),this.name=new Vfe(this),this.cmap=new wV(this),this.toUnicode={},this.hhea=new zfe(this),this.maxp=new Gfe(this),this.hmtx=new Hfe(this),this.post=new qfe(this),this.os2=new $fe(this),this.loca=new Kfe(this),this.glyf=new Wfe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,a,p,d;for(d=[],u=0,a=(p=this.bbox).length;u<a;u++)t=p[u],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,s,u,a;for(u=0,s=0,a=(t=""+t).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=t.charCodeAt(s),u+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return u*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var nf,Td=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,s,u,a,p;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),u=this.readByte(),a=this.readByte(),p=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^u)+256*(255^a)+(255^p)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*s+65536*u+256*a+p},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,s;for(s=[],n=0,i=t.length;n<i;n++)r=t[n],s.push(this.writeByte(r));return s},e})(),Nfe=(function(){var e;function t(r){var n,i,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,s,u,a,p,d,g,_,C,S,I,O;for(O in S=Object.keys(r).length,p=Math.log(2),_=16*Math.floor(Math.log(S)/p),u=Math.floor(_/p),g=16*S-_,(i=new Td).writeInt(this.scalarType),i.writeShort(S),i.writeShort(_),i.writeShort(u),i.writeShort(g),s=16*S,d=i.pos+s,a=null,I=[],r)for(C=r[O],i.writeString(O),i.writeInt(e(C)),i.writeInt(d),i.writeInt(C.length),I=I.concat(C),O==="head"&&(a=d),d+=C.length;d%4;)I.push(0),d++;return i.write(I),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,s,u;for(r=SV.call(r);r.length%4;)r.push(0);for(s=new Td(r),i=0,n=0,u=r.length;n<u;n=n+=4)i+=s.readUInt32();return 4294967295&i},t})(),Bfe={}.hasOwnProperty,Vf=function(e,t){for(var r in t)Bfe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};nf=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var jfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Td).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),YF=(function(){function e(t,r){var n,i,s,u,a,p,d,g,_,C,S,I,O,P,k,F,B;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),_=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=t.readByte();break;case 4:for(S=t.readUInt16(),C=S/2,t.pos+=6,s=(function(){var N,G;for(G=[],p=N=0;0<=C?N<C:N>C;p=0<=C?++N:--N)G.push(t.readUInt16());return G})(),t.pos+=2,O=(function(){var N,G;for(G=[],p=N=0;0<=C?N<C:N>C;p=0<=C?++N:--N)G.push(t.readUInt16());return G})(),d=(function(){var N,G;for(G=[],p=N=0;0<=C?N<C:N>C;p=0<=C?++N:--N)G.push(t.readUInt16());return G})(),g=(function(){var N,G;for(G=[],p=N=0;0<=C?N<C:N>C;p=0<=C?++N:--N)G.push(t.readUInt16());return G})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var N,G;for(G=[],p=N=0;0<=i?N<i:N>i;p=0<=i?++N:--N)G.push(t.readUInt16());return G})(),p=k=0,B=s.length;k<B;p=++k)for(P=s[p],n=F=I=O[p];I<=P?F<=P:F>=P;n=I<=P?++F:--F)g[p]===0?u=n+d[p]:(u=a[g[p]/2+(n-I)-(C-p)]||0)!==0&&(u+=d[p]),this.codeMap[n]=65535&u}t.pos=_}return e.encode=function(t,r){var n,i,s,u,a,p,d,g,_,C,S,I,O,P,k,F,B,N,G,$,X,ee,J,le,Z,H,oe,ue,ce,be,Te,ve,Ce,$e,Je,ge,Ee,Ie,Le,Ve,ht,It,xt,rt,zt,Lt;switch(ue=new Td,u=Object.keys(t).sort(function(Ft,dt){return Ft-dt}),r){case"macroman":for(O=0,P=(function(){var Ft=[];for(I=0;I<256;++I)Ft.push(0);return Ft})(),F={0:0},s={},ce=0,Ce=u.length;ce<Ce;ce++)F[xt=t[i=u[ce]]]==null&&(F[xt]=++O),s[i]={old:t[i],new:F[t[i]]},P[i]=F[t[i]];return ue.writeUInt16(1),ue.writeUInt16(0),ue.writeUInt32(12),ue.writeUInt16(0),ue.writeUInt16(262),ue.writeUInt16(0),ue.write(P),{charMap:s,subtable:ue.data,maxGlyphID:O+1};case"unicode":for(H=[],_=[],B=0,F={},n={},k=d=null,be=0,$e=u.length;be<$e;be++)F[G=t[i=u[be]]]==null&&(F[G]=++B),n[i]={old:G,new:F[G]},a=F[G]-i,k!=null&&a===d||(k&&_.push(k),H.push(i),d=a),k=i;for(k&&_.push(k),_.push(65535),H.push(65535),le=2*(J=H.length),ee=2*Math.pow(Math.log(J)/Math.LN2,2),C=Math.log(ee/2)/Math.LN2,X=2*J-ee,p=[],$=[],S=[],I=Te=0,Je=H.length;Te<Je;I=++Te){if(Z=H[I],g=_[I],Z===65535){p.push(0),$.push(0);break}if(Z-(oe=n[Z].new)>=32768)for(p.push(0),$.push(2*(S.length+J-I)),i=ve=Z;Z<=g?ve<=g:ve>=g;i=Z<=g?++ve:--ve)S.push(n[i].new);else p.push(oe-Z),$.push(0)}for(ue.writeUInt16(3),ue.writeUInt16(1),ue.writeUInt32(12),ue.writeUInt16(4),ue.writeUInt16(16+8*J+2*S.length),ue.writeUInt16(0),ue.writeUInt16(le),ue.writeUInt16(ee),ue.writeUInt16(C),ue.writeUInt16(X),ht=0,ge=_.length;ht<ge;ht++)i=_[ht],ue.writeUInt16(i);for(ue.writeUInt16(0),It=0,Ee=H.length;It<Ee;It++)i=H[It],ue.writeUInt16(i);for(rt=0,Ie=p.length;rt<Ie;rt++)a=p[rt],ue.writeUInt16(a);for(zt=0,Le=$.length;zt<Le;zt++)N=$[zt],ue.writeUInt16(N);for(Lt=0,Ve=S.length;Lt<Ve;Lt++)O=S[Lt],ue.writeUInt16(O);return{charMap:n,subtable:ue.data,maxGlyphID:B+1}}},e})(),wV=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new YF(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=YF.encode(t,r),(i=new Td).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),zfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),$fe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),qfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var u,a,p;for(p=[],s=u=0,a=this.file.maxp.numGlyphs;0<=a?u<a:u>a;s=0<=a?++u:--u)p.push(t.readUInt32());return p}).call(this)}},e})(),Ufe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Vfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,s,u,a,p,d,g,_,C;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(p={},s=g=0,_=n.length;g<_;s=++g)i=n[s],t.pos=i.offset,d=t.readString(i.length),u=new Ufe(d,i),p[C=i.nameID]==null&&(p[C]=[]),p[i.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},e})(),Gfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Hfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,s,u,a,p;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,g;for(g=[],r=d=0;0<=i?d<i:d>i;r=0<=i?++d:--d)g.push(t.readInt16());return g})(),this.widths=(function(){var d,g,_,C;for(C=[],d=0,g=(_=this.metrics).length;d<g;d++)s=_[d],C.push(s.advance);return C}).call(this),n=this.widths[this.widths.length-1],p=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)p.push(this.widths.push(n));return p},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),SV=[].slice,Wfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,s,u,a,p,d,g,_;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,u=(a=new Td(r.read(i))).readShort(),d=a.readShort(),_=a.readShort(),p=a.readShort(),g=a.readShort(),this.cache[t]=u===-1?new Xfe(a,d,_,p,g):new Zfe(a,u,d,_,p,g),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,s,u,a,p;for(u=[],s=[],a=0,p=r.length;a<p;a++)i=t[r[a]],s.push(u.length),i&&(u=u.concat(i.encode(n)));return s.push(u.length),{table:u,offsets:s}},e})(),Zfe=(function(){function e(t,r,n,i,s,u){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Xfe=(function(){function e(t,r,n,i,s){var u,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;a=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&a;)u.pos+=1&a?4:2,128&a?u.pos+=8:64&a?u.pos+=4:8&a&&(u.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Td(SV.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Kfe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vf(e,nf),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,u=0;u<n.length;++u)if(n[u]=i,s<r.length&&r[s]==u){++s,n[u]=i;var a=this.offsets[u],p=this.offsets[u+1]-a;p>0&&(i+=p)}for(var d=new Array(4*n.length),g=0;g<n.length;++g)d[4*g+3]=255&n[g],d[4*g+2]=(65280&n[g])>>8,d[4*g+1]=(16711680&n[g])>>16,d[4*g]=(4278190080&n[g])>>24;return d},e})(),Yfe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,s;for(r in i=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,s,u,a,p;for(i={},u=0,a=t.length;u<a;u++)i[s=t[u]]=this.font.glyf.glyphFor(s);for(s in r=[],i)(n=i[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in p=this.glyphsFor(r))n=p[s],i[s]=n;return i},e.prototype.encode=function(t,r){var n,i,s,u,a,p,d,g,_,C,S,I,O,P,k;for(i in n=wV.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),S={0:0},k=n.charMap)S[(p=k[i]).old]=p.new;for(I in C=n.maxGlyphID,u)I in S||(S[I]=C++);return g=(function(F){var B,N;for(B in N={},F)N[F[B]]=B;return N})(S),_=Object.keys(g).sort(function(F,B){return F-B}),O=(function(){var F,B,N;for(N=[],F=0,B=_.length;F<B;F++)a=_[F],N.push(g[a]);return N})(),s=this.font.glyf.encode(u,O,S),d=this.font.loca.encode(s.offsets,O),P={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},e})();On.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,s,u;if(Array.isArray(r))return"["+(function(){var a,p,d;for(d=[],a=0,p=r.length;a<p;a++)n=r[a],d.push(t.convert(n));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in s=["<<"],r)u=r[i],s.push("/"+i+" "+t.convert(u));return s.push(">>"),s.join(`
`)}return""+r},t})();qe.createContext({});function EV(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Jfe(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!JF(e[0])||!JF(e[1]))throw new Error("coordinates must contain numbers");return EV({type:"Point",coordinates:e},t,r)}function Qfe(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function JF(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function CV(e,t,r){if(e!==null)for(var n,i,s,u,a,p,d,g=0,_=0,C,S=e.type,I=S==="FeatureCollection",O=S==="Feature",P=I?e.features.length:1,k=0;k<P;k++){d=I?e.features[k].geometry:O?e.geometry:e,C=d?d.type==="GeometryCollection":!1,a=C?d.geometries.length:1;for(var F=0;F<a;F++){var B=0,N=0;if(u=C?d.geometries[F]:d,u!==null){p=u.coordinates;var G=u.type;switch(g=G==="Polygon"||G==="MultiPolygon"?1:0,G){case null:break;case"Point":if(t(p,_,k,B,N)===!1)return!1;_++,B++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(t(p[n],_,k,B,N)===!1)return!1;_++,G==="MultiPoint"&&B++}G==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(i=0;i<p[n].length-g;i++){if(t(p[n][i],_,k,B,N)===!1)return!1;_++}G==="MultiLineString"&&B++,G==="Polygon"&&N++}G==="Polygon"&&B++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(N=0,i=0;i<p[n].length;i++){for(s=0;s<p[n][i].length-g;s++){if(t(p[n][i][s],_,k,B,N)===!1)return!1;_++}N++}B++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(CV(u.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function AV(e,t={}){let r=0,n=0,i=0;return CV(e,function(s){r+=s[0],n+=s[1],i++}),Jfe([r/i,n/i],t.properties)}var S1={exports:{}},ehe=S1.exports,QF;function the(){return QF||(QF=1,(function(e,t){(function(r,n){e.exports=n()})(ehe,(function(){var r=function(U,ne){var De={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},mt={on:function(Dt,Ut,Tr){if(De[Dt]===void 0)throw new Error("Invalid event type: "+Dt);De[Dt].push({selector:Ut,fn:Tr})},render:function(Dt){ne.store.featureChanged(Dt)}},Mt=function(Dt,Ut){for(var Tr=De[Dt],Mr=Tr.length;Mr--;){var Fr=Tr[Mr];if(Fr.selector(Ut)){Fr.fn.call(mt,Ut)||ne.store.render(),ne.ui.updateMapClasses();break}}};return U.start.call(mt),{render:U.render,stop:function(){U.stop&&U.stop()},trash:function(){U.trash&&(U.trash(),ne.store.render())},combineFeatures:function(){U.combineFeatures&&U.combineFeatures()},uncombineFeatures:function(){U.uncombineFeatures&&U.uncombineFeatures()},drag:function(Dt){Mt("drag",Dt)},click:function(Dt){Mt("click",Dt)},mousemove:function(Dt){Mt("mousemove",Dt)},mousedown:function(Dt){Mt("mousedown",Dt)},mouseup:function(Dt){Mt("mouseup",Dt)},mouseout:function(Dt){Mt("mouseout",Dt)},keydown:function(Dt){Mt("keydown",Dt)},keyup:function(Dt){Mt("keyup",Dt)},touchstart:function(Dt){Mt("touchstart",Dt)},touchmove:function(Dt){Mt("touchmove",Dt)},touchend:function(Dt){Mt("touchend",Dt)},tap:function(Dt){Mt("tap",Dt)}}};function n(U){return U&&U.__esModule&&Object.prototype.hasOwnProperty.call(U,"default")?U.default:U}function i(U){if(U.__esModule)return U;var ne=U.default;if(typeof ne=="function"){var De=function mt(){if(this instanceof mt){var Mt=[null];Mt.push.apply(Mt,arguments);var Dt=Function.bind.apply(ne,Mt);return new Dt}return ne.apply(this,arguments)};De.prototype=ne.prototype}else De={};return Object.defineProperty(De,"__esModule",{value:!0}),Object.keys(U).forEach((function(mt){var Mt=Object.getOwnPropertyDescriptor(U,mt);Object.defineProperty(De,mt,Mt.get?Mt:{enumerable:!0,get:function(){return U[mt]}})})),De}var s={},u={RADIUS:6378137},a=u;function p(U){var ne=0;if(U&&U.length>0){ne+=Math.abs(d(U[0]));for(var De=1;De<U.length;De++)ne-=Math.abs(d(U[De]))}return ne}function d(U){var ne,De,mt,Mt,Dt,Ut,Tr=0,Mr=U.length;if(Mr>2){for(Ut=0;Ut<Mr;Ut++)Ut===Mr-2?(mt=Mr-2,Mt=Mr-1,Dt=0):Ut===Mr-1?(mt=Mr-1,Mt=0,Dt=1):(mt=Ut,Mt=Ut+1,Dt=Ut+2),ne=U[mt],De=U[Mt],Tr+=(g(U[Dt][0])-g(ne[0]))*Math.sin(g(De[1]));Tr=Tr*a.RADIUS*a.RADIUS/2}return Tr}function g(U){return U*Math.PI/180}s.geometry=function U(ne){var De,mt=0;switch(ne.type){case"Polygon":return p(ne.coordinates);case"MultiPolygon":for(De=0;De<ne.coordinates.length;De++)mt+=p(ne.coordinates[De]);return mt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(De=0;De<ne.geometries.length;De++)mt+=U(ne.geometries[De]);return mt}},s.ring=d;var _={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},C={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},S={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},I={POLYGON:"polygon",LINE:"line_string",POINT:"point"},O={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},P={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},k={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},B={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},N={ACTIVE:"true",INACTIVE:"false"},G=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],$=-85,X=Object.freeze({__proto__:null,classes:_,sources:C,cursors:S,types:I,geojsonTypes:O,modes:P,events:k,updateActions:F,meta:B,activeStates:N,interactions:G,LAT_MIN:-90,LAT_RENDERED_MIN:$,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ee={Point:0,LineString:1,MultiLineString:1,Polygon:2};function J(U,ne){var De=ee[U.geometry.type]-ee[ne.geometry.type];return De===0&&U.geometry.type===O.POLYGON?U.area-ne.area:De}function le(U){return U.map((function(ne){return ne.geometry.type===O.POLYGON&&(ne.area=s.geometry({type:O.FEATURE,property:{},geometry:ne.geometry})),ne})).sort(J).map((function(ne){return delete ne.area,ne}))}function Z(U,ne){return ne===void 0&&(ne=0),[[U.point.x-ne,U.point.y-ne],[U.point.x+ne,U.point.y+ne]]}function H(U){if(this._items={},this._nums={},this._length=U?U.length:0,U)for(var ne=0,De=U.length;ne<De;ne++)this.add(U[ne]),U[ne]!==void 0&&(typeof U[ne]=="string"?this._items[U[ne]]=ne:this._nums[U[ne]]=ne)}H.prototype.add=function(U){return this.has(U)||(this._length++,typeof U=="string"?this._items[U]=this._length:this._nums[U]=this._length),this},H.prototype.delete=function(U){return this.has(U)===!1||(this._length--,delete this._items[U],delete this._nums[U]),this},H.prototype.has=function(U){return(typeof U=="string"||typeof U=="number")&&(this._items[U]!==void 0||this._nums[U]!==void 0)},H.prototype.values=function(){var U=this,ne=[];return Object.keys(this._items).forEach((function(De){ne.push({k:De,v:U._items[De]})})),Object.keys(this._nums).forEach((function(De){ne.push({k:JSON.parse(De),v:U._nums[De]})})),ne.sort((function(De,mt){return De.v-mt.v})).map((function(De){return De.k}))},H.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var oe=[B.FEATURE,B.MIDPOINT,B.VERTEX],ue={click:function(U,ne,De){return ce(U,ne,De,De.options.clickBuffer)},touch:function(U,ne,De){return ce(U,ne,De,De.options.touchBuffer)}};function ce(U,ne,De,mt){if(De.map===null)return[];var Mt=U?Z(U,mt):ne,Dt={};De.options.styles&&(Dt.layers=De.options.styles.map((function(Fr){return Fr.id})).filter((function(Fr){return De.map.getLayer(Fr)!=null})));var Ut=De.map.queryRenderedFeatures(Mt,Dt).filter((function(Fr){return oe.indexOf(Fr.properties.meta)!==-1})),Tr=new H,Mr=[];return Ut.forEach((function(Fr){var Nr=Fr.properties.id;Tr.has(Nr)||(Tr.add(Nr),Mr.push(Fr))})),le(Mr)}function be(U,ne){var De=ue.click(U,null,ne),mt={mouse:S.NONE};return De[0]&&(mt.mouse=De[0].properties.active===N.ACTIVE?S.MOVE:S.POINTER,mt.feature=De[0].properties.meta),ne.events.currentModeName().indexOf("draw")!==-1&&(mt.mouse=S.ADD),ne.ui.queueMapClasses(mt),ne.ui.updateMapClasses(),De[0]}function Te(U,ne){var De=U.x-ne.x,mt=U.y-ne.y;return Math.sqrt(De*De+mt*mt)}function ve(U,ne,De){De===void 0&&(De={});var mt=De.fineTolerance!=null?De.fineTolerance:4,Mt=De.grossTolerance!=null?De.grossTolerance:12,Dt=De.interval!=null?De.interval:500;U.point=U.point||ne.point,U.time=U.time||ne.time;var Ut=Te(U.point,ne.point);return Ut<mt||Ut<Mt&&ne.time-U.time<Dt}function Ce(U,ne,De){De===void 0&&(De={});var mt=De.tolerance!=null?De.tolerance:25,Mt=De.interval!=null?De.interval:250;return U.point=U.point||ne.point,U.time=U.time||ne.time,Te(U.point,ne.point)<mt&&ne.time-U.time<Mt}var $e={exports:{}},Je=$e.exports=function(U,ne){if(ne||(ne=16),U===void 0&&(U=128),U<=0)return"0";for(var De=Math.log(Math.pow(2,U))/Math.log(ne),mt=2;De===1/0;mt*=2)De=Math.log(Math.pow(2,U/mt))/Math.log(ne)*mt;var Mt=De-Math.floor(De),Dt="";for(mt=0;mt<Math.floor(De);mt++)Dt=Math.floor(Math.random()*ne).toString(ne)+Dt;if(Mt){var Ut=Math.pow(ne,Mt);Dt=Math.floor(Math.random()*Ut).toString(ne)+Dt}var Tr=parseInt(Dt,ne);return Tr!==1/0&&Tr>=Math.pow(2,U)?Je(U,ne):Dt};Je.rack=function(U,ne,De){var mt=function(Dt){var Ut=0;do{if(Ut++>10){if(!De)throw new Error("too many ID collisions, use more bits");U+=De}var Tr=Je(U,ne)}while(Object.hasOwnProperty.call(Mt,Tr));return Mt[Tr]=Dt,Tr},Mt=mt.hats={};return mt.get=function(Dt){return mt.hats[Dt]},mt.set=function(Dt,Ut){return mt.hats[Dt]=Ut,mt},mt.bits=U||128,mt.base=ne||16,mt};var ge=n($e.exports),Ee=function(U,ne){this.ctx=U,this.properties=ne.properties||{},this.coordinates=ne.geometry.coordinates,this.id=ne.id||ge(),this.type=ne.geometry.type};Ee.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ee.prototype.incomingCoords=function(U){this.setCoordinates(U)},Ee.prototype.setCoordinates=function(U){this.coordinates=U,this.changed()},Ee.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ee.prototype.setProperty=function(U,ne){this.properties[U]=ne},Ee.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:O.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ee.prototype.internal=function(U){var ne={id:this.id,meta:B.FEATURE,"meta:type":this.type,active:N.INACTIVE,mode:U};if(this.ctx.options.userProperties)for(var De in this.properties)ne["user_"+De]=this.properties[De];return{type:O.FEATURE,properties:ne,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ie=function(U,ne){Ee.call(this,U,ne)};(Ie.prototype=Object.create(Ee.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ie.prototype.updateCoordinate=function(U,ne,De){this.coordinates=arguments.length===3?[ne,De]:[U,ne],this.changed()},Ie.prototype.getCoordinate=function(){return this.getCoordinates()};var Le=function(U,ne){Ee.call(this,U,ne)};(Le.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length>1},Le.prototype.addCoordinate=function(U,ne,De){this.changed();var mt=parseInt(U,10);this.coordinates.splice(mt,0,[ne,De])},Le.prototype.getCoordinate=function(U){var ne=parseInt(U,10);return JSON.parse(JSON.stringify(this.coordinates[ne]))},Le.prototype.removeCoordinate=function(U){this.changed(),this.coordinates.splice(parseInt(U,10),1)},Le.prototype.updateCoordinate=function(U,ne,De){var mt=parseInt(U,10);this.coordinates[mt]=[ne,De],this.changed()};var Ve=function(U,ne){Ee.call(this,U,ne),this.coordinates=this.coordinates.map((function(De){return De.slice(0,-1)}))};(Ve.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function(U){return U.length>2}))},Ve.prototype.incomingCoords=function(U){this.coordinates=U.map((function(ne){return ne.slice(0,-1)})),this.changed()},Ve.prototype.setCoordinates=function(U){this.coordinates=U,this.changed()},Ve.prototype.addCoordinate=function(U,ne,De){this.changed();var mt=U.split(".").map((function(Mt){return parseInt(Mt,10)}));this.coordinates[mt[0]].splice(mt[1],0,[ne,De])},Ve.prototype.removeCoordinate=function(U){this.changed();var ne=U.split(".").map((function(mt){return parseInt(mt,10)})),De=this.coordinates[ne[0]];De&&(De.splice(ne[1],1),De.length<3&&this.coordinates.splice(ne[0],1))},Ve.prototype.getCoordinate=function(U){var ne=U.split(".").map((function(mt){return parseInt(mt,10)})),De=this.coordinates[ne[0]];return JSON.parse(JSON.stringify(De[ne[1]]))},Ve.prototype.getCoordinates=function(){return this.coordinates.map((function(U){return U.concat([U[0]])}))},Ve.prototype.updateCoordinate=function(U,ne,De){this.changed();var mt=U.split("."),Mt=parseInt(mt[0],10),Dt=parseInt(mt[1],10);this.coordinates[Mt]===void 0&&(this.coordinates[Mt]=[]),this.coordinates[Mt][Dt]=[ne,De]};var ht={MultiPoint:Ie,MultiLineString:Le,MultiPolygon:Ve},It=function(U,ne,De,mt,Mt){var Dt=De.split("."),Ut=parseInt(Dt[0],10),Tr=Dt[1]?Dt.slice(1).join("."):null;return U[Ut][ne](Tr,mt,Mt)},xt=function(U,ne){if(Ee.call(this,U,ne),delete this.coordinates,this.model=ht[ne.geometry.type],this.model===void 0)throw new TypeError(ne.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(ne.geometry.coordinates)};function rt(U){this.map=U.map,this.drawConfig=JSON.parse(JSON.stringify(U.options||{})),this._ctx=U}(xt.prototype=Object.create(Ee.prototype))._coordinatesToFeatures=function(U){var ne=this,De=this.model.bind(this);return U.map((function(mt){return new De(ne.ctx,{id:ge(),type:O.FEATURE,properties:{},geometry:{coordinates:mt,type:ne.type.replace("Multi","")}})}))},xt.prototype.isValid=function(){return this.features.every((function(U){return U.isValid()}))},xt.prototype.setCoordinates=function(U){this.features=this._coordinatesToFeatures(U),this.changed()},xt.prototype.getCoordinate=function(U){return It(this.features,"getCoordinate",U)},xt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(U){return U.type===O.POLYGON?U.getCoordinates():U.coordinates}))))},xt.prototype.updateCoordinate=function(U,ne,De){It(this.features,"updateCoordinate",U,ne,De),this.changed()},xt.prototype.addCoordinate=function(U,ne,De){It(this.features,"addCoordinate",U,ne,De),this.changed()},xt.prototype.removeCoordinate=function(U){It(this.features,"removeCoordinate",U),this.changed()},xt.prototype.getFeatures=function(){return this.features},rt.prototype.setSelected=function(U){return this._ctx.store.setSelected(U)},rt.prototype.setSelectedCoordinates=function(U){var ne=this;this._ctx.store.setSelectedCoordinates(U),U.reduce((function(De,mt){return De[mt.feature_id]===void 0&&(De[mt.feature_id]=!0,ne._ctx.store.get(mt.feature_id).changed()),De}),{})},rt.prototype.getSelected=function(){return this._ctx.store.getSelected()},rt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},rt.prototype.isSelected=function(U){return this._ctx.store.isSelected(U)},rt.prototype.getFeature=function(U){return this._ctx.store.get(U)},rt.prototype.select=function(U){return this._ctx.store.select(U)},rt.prototype.deselect=function(U){return this._ctx.store.deselect(U)},rt.prototype.deleteFeature=function(U,ne){return ne===void 0&&(ne={}),this._ctx.store.delete(U,ne)},rt.prototype.addFeature=function(U){return this._ctx.store.add(U)},rt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},rt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},rt.prototype.setActionableState=function(U){U===void 0&&(U={});var ne={trash:U.trash||!1,combineFeatures:U.combineFeatures||!1,uncombineFeatures:U.uncombineFeatures||!1};return this._ctx.events.actionable(ne)},rt.prototype.changeMode=function(U,ne,De){return ne===void 0&&(ne={}),De===void 0&&(De={}),this._ctx.events.changeMode(U,ne,De)},rt.prototype.updateUIClasses=function(U){return this._ctx.ui.queueMapClasses(U)},rt.prototype.activateUIButton=function(U){return this._ctx.ui.setActiveButton(U)},rt.prototype.featuresAt=function(U,ne,De){if(De===void 0&&(De="click"),De!=="click"&&De!=="touch")throw new Error("invalid buffer type");return ue[De](U,ne,this._ctx)},rt.prototype.newFeature=function(U){var ne=U.geometry.type;return ne===O.POINT?new Ie(this._ctx,U):ne===O.LINE_STRING?new Le(this._ctx,U):ne===O.POLYGON?new Ve(this._ctx,U):new xt(this._ctx,U)},rt.prototype.isInstanceOf=function(U,ne){if(U===O.POINT)return ne instanceof Ie;if(U===O.LINE_STRING)return ne instanceof Le;if(U===O.POLYGON)return ne instanceof Ve;if(U==="MultiFeature")return ne instanceof xt;throw new Error("Unknown feature class: "+U)},rt.prototype.doRender=function(U){return this._ctx.store.featureChanged(U)},rt.prototype.onSetup=function(){},rt.prototype.onDrag=function(){},rt.prototype.onClick=function(){},rt.prototype.onMouseMove=function(){},rt.prototype.onMouseDown=function(){},rt.prototype.onMouseUp=function(){},rt.prototype.onMouseOut=function(){},rt.prototype.onKeyUp=function(){},rt.prototype.onKeyDown=function(){},rt.prototype.onTouchStart=function(){},rt.prototype.onTouchMove=function(){},rt.prototype.onTouchEnd=function(){},rt.prototype.onTap=function(){},rt.prototype.onStop=function(){},rt.prototype.onTrash=function(){},rt.prototype.onCombineFeature=function(){},rt.prototype.onUncombineFeature=function(){},rt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var zt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Lt=Object.keys(zt);function Ft(U){var ne=Object.keys(U);return function(De,mt){mt===void 0&&(mt={});var Mt={},Dt=ne.reduce((function(Ut,Tr){return Ut[Tr]=U[Tr],Ut}),new rt(De));return{start:function(){var Ut=this;Mt=Dt.onSetup(mt),Lt.forEach((function(Tr){var Mr,Fr=zt[Tr],Nr=function(){return!1};U[Fr]&&(Nr=function(){return!0}),Ut.on(Tr,Nr,(Mr=Fr,function(hr){return Dt[Mr](Mt,hr)}))}))},stop:function(){Dt.onStop(Mt)},trash:function(){Dt.onTrash(Mt)},combineFeatures:function(){Dt.onCombineFeatures(Mt)},uncombineFeatures:function(){Dt.onUncombineFeatures(Mt)},render:function(Ut,Tr){Dt.toDisplayFeatures(Mt,Ut,Tr)}}}}function dt(U){return[].concat(U).filter((function(ne){return ne!==void 0}))}function ke(){var U=this;if(!(U.ctx.map&&U.ctx.map.getSource(C.HOT)!==void 0))return Mr();var ne=U.ctx.events.currentModeName();U.ctx.ui.queueMapClasses({mode:ne});var De=[],mt=[];U.isDirty?mt=U.getAllIds():(De=U.getChangedIds().filter((function(Fr){return U.get(Fr)!==void 0})),mt=U.sources.hot.filter((function(Fr){return Fr.properties.id&&De.indexOf(Fr.properties.id)===-1&&U.get(Fr.properties.id)!==void 0})).map((function(Fr){return Fr.properties.id}))),U.sources.hot=[];var Mt=U.sources.cold.length;U.sources.cold=U.isDirty?[]:U.sources.cold.filter((function(Fr){var Nr=Fr.properties.id||Fr.properties.parent;return De.indexOf(Nr)===-1}));var Dt=Mt!==U.sources.cold.length||mt.length>0;function Ut(Fr,Nr){var hr=U.get(Fr).internal(ne);U.ctx.events.currentModeRender(hr,(function(In){U.sources[Nr].push(In)}))}if(De.forEach((function(Fr){return Ut(Fr,"hot")})),mt.forEach((function(Fr){return Ut(Fr,"cold")})),Dt&&U.ctx.map.getSource(C.COLD).setData({type:O.FEATURE_COLLECTION,features:U.sources.cold}),U.ctx.map.getSource(C.HOT).setData({type:O.FEATURE_COLLECTION,features:U.sources.hot}),U._emitSelectionChange&&(U.ctx.map.fire(k.SELECTION_CHANGE,{features:U.getSelected().map((function(Fr){return Fr.toGeoJSON()})),points:U.getSelectedCoordinates().map((function(Fr){return{type:O.FEATURE,properties:{},geometry:{type:O.POINT,coordinates:Fr.coordinates}}}))}),U._emitSelectionChange=!1),U._deletedFeaturesToEmit.length){var Tr=U._deletedFeaturesToEmit.map((function(Fr){return Fr.toGeoJSON()}));U._deletedFeaturesToEmit=[],U.ctx.map.fire(k.DELETE,{features:Tr})}function Mr(){U.isDirty=!1,U.clearChangedIds()}Mr(),U.ctx.map.fire(k.RENDER,{})}function fr(U){var ne,De=this;this._features={},this._featureIds=new H,this._selectedFeatureIds=new H,this._selectedCoordinates=[],this._changedFeatureIds=new H,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=U,this.sources={hot:[],cold:[]},this.render=function(){ne||(ne=requestAnimationFrame((function(){ne=null,ke.call(De)})))},this.isDirty=!1}function sr(U,ne){var De=U._selectedCoordinates.filter((function(mt){return U._selectedFeatureIds.has(mt.feature_id)}));U._selectedCoordinates.length===De.length||ne.silent||(U._emitSelectionChange=!0),U._selectedCoordinates=De}fr.prototype.createRenderBatch=function(){var U=this,ne=this.render,De=0;return this.render=function(){De++},function(){U.render=ne,De>0&&U.render()}},fr.prototype.setDirty=function(){return this.isDirty=!0,this},fr.prototype.featureChanged=function(U){return this._changedFeatureIds.add(U),this},fr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},fr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},fr.prototype.getAllIds=function(){return this._featureIds.values()},fr.prototype.add=function(U){return this.featureChanged(U.id),this._features[U.id]=U,this._featureIds.add(U.id),this},fr.prototype.delete=function(U,ne){var De=this;return ne===void 0&&(ne={}),dt(U).forEach((function(mt){De._featureIds.has(mt)&&(De._featureIds.delete(mt),De._selectedFeatureIds.delete(mt),ne.silent||De._deletedFeaturesToEmit.indexOf(De._features[mt])===-1&&De._deletedFeaturesToEmit.push(De._features[mt]),delete De._features[mt],De.isDirty=!0)})),sr(this,ne),this},fr.prototype.get=function(U){return this._features[U]},fr.prototype.getAll=function(){var U=this;return Object.keys(this._features).map((function(ne){return U._features[ne]}))},fr.prototype.select=function(U,ne){var De=this;return ne===void 0&&(ne={}),dt(U).forEach((function(mt){De._selectedFeatureIds.has(mt)||(De._selectedFeatureIds.add(mt),De._changedFeatureIds.add(mt),ne.silent||(De._emitSelectionChange=!0))})),this},fr.prototype.deselect=function(U,ne){var De=this;return ne===void 0&&(ne={}),dt(U).forEach((function(mt){De._selectedFeatureIds.has(mt)&&(De._selectedFeatureIds.delete(mt),De._changedFeatureIds.add(mt),ne.silent||(De._emitSelectionChange=!0))})),sr(this,ne),this},fr.prototype.clearSelected=function(U){return U===void 0&&(U={}),this.deselect(this._selectedFeatureIds.values(),{silent:U.silent}),this},fr.prototype.setSelected=function(U,ne){var De=this;return ne===void 0&&(ne={}),U=dt(U),this.deselect(this._selectedFeatureIds.values().filter((function(mt){return U.indexOf(mt)===-1})),{silent:ne.silent}),this.select(U.filter((function(mt){return!De._selectedFeatureIds.has(mt)})),{silent:ne.silent}),this},fr.prototype.setSelectedCoordinates=function(U){return this._selectedCoordinates=U,this._emitSelectionChange=!0,this},fr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},fr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},fr.prototype.getSelected=function(){var U=this;return this._selectedFeatureIds.values().map((function(ne){return U.get(ne)}))},fr.prototype.getSelectedCoordinates=function(){var U=this;return this._selectedCoordinates.map((function(ne){return{coordinates:U.get(ne.feature_id).getCoordinate(ne.coord_path)}}))},fr.prototype.isSelected=function(U){return this._selectedFeatureIds.has(U)},fr.prototype.setFeatureProperty=function(U,ne,De){this.get(U).setProperty(ne,De),this.featureChanged(U)},fr.prototype.storeMapConfig=function(){var U=this;G.forEach((function(ne){U.ctx.map[ne]&&(U._mapInitialConfig[ne]=U.ctx.map[ne].isEnabled())}))},fr.prototype.restoreMapConfig=function(){var U=this;Object.keys(this._mapInitialConfig).forEach((function(ne){U._mapInitialConfig[ne]?U.ctx.map[ne].enable():U.ctx.map[ne].disable()}))},fr.prototype.getInitialConfigValue=function(U){return this._mapInitialConfig[U]===void 0||this._mapInitialConfig[U]};var xr=function(){for(var U=arguments,ne={},De=0;De<arguments.length;De++){var mt=U[De];for(var Mt in mt)tr.call(mt,Mt)&&(ne[Mt]=mt[Mt])}return ne},tr=Object.prototype.hasOwnProperty,Ge=n(xr),nt=["mode","feature","mouse"];function ut(U){var ne=null,De=null,mt={onRemove:function(){return U.map.off("load",mt.connect),clearInterval(De),mt.removeLayers(),U.store.restoreMapConfig(),U.ui.removeButtons(),U.events.removeEventListeners(),U.ui.clearMapClasses(),U.boxZoomInitial&&U.map.boxZoom.enable(),U.map=null,U.container=null,U.store=null,ne&&ne.parentNode&&ne.parentNode.removeChild(ne),ne=null,this},connect:function(){U.map.off("load",mt.connect),clearInterval(De),mt.addLayers(),U.store.storeMapConfig(),U.events.addEventListeners()},onAdd:function(Mt){var Dt=Mt.fire;return Mt.fire=function(Ut,Tr){var Mr=arguments;return Dt.length===1&&arguments.length!==1&&(Mr=[Ge({},{type:Ut},Tr)]),Dt.apply(Mt,Mr)},U.map=Mt,U.events=(function(Ut){var Tr=Object.keys(Ut.options.modes).reduce((function(pr,$r){return pr[$r]=Ft(Ut.options.modes[$r]),pr}),{}),Mr={},Fr={},Nr={},hr=null,In=null;Nr.drag=function(pr,$r){$r({point:pr.point,time:new Date().getTime()})?(Ut.ui.queueMapClasses({mouse:S.DRAG}),In.drag(pr)):pr.originalEvent.stopPropagation()},Nr.mousedrag=function(pr){Nr.drag(pr,(function($r){return!ve(Mr,$r)}))},Nr.touchdrag=function(pr){Nr.drag(pr,(function($r){return!Ce(Fr,$r)}))},Nr.mousemove=function(pr){if((pr.originalEvent.buttons!==void 0?pr.originalEvent.buttons:pr.originalEvent.which)===1)return Nr.mousedrag(pr);var $r=be(pr,Ut);pr.featureTarget=$r,In.mousemove(pr)},Nr.mousedown=function(pr){Mr={time:new Date().getTime(),point:pr.point};var $r=be(pr,Ut);pr.featureTarget=$r,In.mousedown(pr)},Nr.mouseup=function(pr){var $r=be(pr,Ut);pr.featureTarget=$r,ve(Mr,{point:pr.point,time:new Date().getTime()})?In.click(pr):In.mouseup(pr)},Nr.mouseout=function(pr){In.mouseout(pr)},Nr.touchstart=function(pr){if(Ut.options.touchEnabled){Fr={time:new Date().getTime(),point:pr.point};var $r=ue.touch(pr,null,Ut)[0];pr.featureTarget=$r,In.touchstart(pr)}},Nr.touchmove=function(pr){if(Ut.options.touchEnabled)return In.touchmove(pr),Nr.touchdrag(pr)},Nr.touchend=function(pr){if(pr.originalEvent.preventDefault(),Ut.options.touchEnabled){var $r=ue.touch(pr,null,Ut)[0];pr.featureTarget=$r,Ce(Fr,{time:new Date().getTime(),point:pr.point})?In.tap(pr):In.touchend(pr)}};var Li=function(pr){return!(pr===8||pr===46||pr>=48&&pr<=57)};function Rn(pr,$r,Wr){Wr===void 0&&(Wr={}),In.stop();var jn=Tr[pr];if(jn===void 0)throw new Error(pr+" is not valid");hr=pr;var di=jn(Ut,$r);In=r(di,Ut),Wr.silent||Ut.map.fire(k.MODE_CHANGE,{mode:pr}),Ut.store.setDirty(),Ut.store.render()}Nr.keydown=function(pr){(pr.srcElement||pr.target).classList.contains("mapboxgl-canvas")&&(pr.keyCode!==8&&pr.keyCode!==46||!Ut.options.controls.trash?Li(pr.keyCode)?In.keydown(pr):pr.keyCode===49&&Ut.options.controls.point?Rn(P.DRAW_POINT):pr.keyCode===50&&Ut.options.controls.line_string?Rn(P.DRAW_LINE_STRING):pr.keyCode===51&&Ut.options.controls.polygon&&Rn(P.DRAW_POLYGON):(pr.preventDefault(),In.trash()))},Nr.keyup=function(pr){Li(pr.keyCode)&&In.keyup(pr)},Nr.zoomend=function(){Ut.store.changeZoom()},Nr.data=function(pr){if(pr.dataType==="style"){var $r=Ut.setup,Wr=Ut.map,jn=Ut.options,di=Ut.store;jn.styles.some((function(Ji){return Wr.getLayer(Ji.id)}))||($r.addLayers(),di.setDirty(),di.render())}};var tn={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){hr=Ut.options.defaultMode,In=r(Tr[hr](Ut),Ut)},changeMode:Rn,actionable:function(pr){var $r=!1;Object.keys(pr).forEach((function(Wr){if(tn[Wr]===void 0)throw new Error("Invalid action type");tn[Wr]!==pr[Wr]&&($r=!0),tn[Wr]=pr[Wr]})),$r&&Ut.map.fire(k.ACTIONABLE,{actions:tn})},currentModeName:function(){return hr},currentModeRender:function(pr,$r){return In.render(pr,$r)},fire:function(pr,$r){Nr[pr]&&Nr[pr]($r)},addEventListeners:function(){Ut.map.on("mousemove",Nr.mousemove),Ut.map.on("mousedown",Nr.mousedown),Ut.map.on("mouseup",Nr.mouseup),Ut.map.on("data",Nr.data),Ut.map.on("touchmove",Nr.touchmove),Ut.map.on("touchstart",Nr.touchstart),Ut.map.on("touchend",Nr.touchend),Ut.container.addEventListener("mouseout",Nr.mouseout),Ut.options.keybindings&&(Ut.container.addEventListener("keydown",Nr.keydown),Ut.container.addEventListener("keyup",Nr.keyup))},removeEventListeners:function(){Ut.map.off("mousemove",Nr.mousemove),Ut.map.off("mousedown",Nr.mousedown),Ut.map.off("mouseup",Nr.mouseup),Ut.map.off("data",Nr.data),Ut.map.off("touchmove",Nr.touchmove),Ut.map.off("touchstart",Nr.touchstart),Ut.map.off("touchend",Nr.touchend),Ut.container.removeEventListener("mouseout",Nr.mouseout),Ut.options.keybindings&&(Ut.container.removeEventListener("keydown",Nr.keydown),Ut.container.removeEventListener("keyup",Nr.keyup))},trash:function(pr){In.trash(pr)},combineFeatures:function(){In.combineFeatures()},uncombineFeatures:function(){In.uncombineFeatures()},getMode:function(){return hr}}})(U),U.ui=(function(Ut){var Tr={},Mr=null,Fr={mode:null,feature:null,mouse:null},Nr={mode:null,feature:null,mouse:null};function hr(pr){Nr=Ge(Nr,pr)}function In(){var pr,$r;if(Ut.container){var Wr=[],jn=[];nt.forEach((function(di){Nr[di]!==Fr[di]&&(Wr.push(di+"-"+Fr[di]),Nr[di]!==null&&jn.push(di+"-"+Nr[di]))})),Wr.length>0&&(pr=Ut.container.classList).remove.apply(pr,Wr),jn.length>0&&($r=Ut.container.classList).add.apply($r,jn),Fr=Ge(Fr,Nr)}}function Li(pr,$r){$r===void 0&&($r={});var Wr=document.createElement("button");return Wr.className=_.CONTROL_BUTTON+" "+$r.className,Wr.setAttribute("title",$r.title),$r.container.appendChild(Wr),Wr.addEventListener("click",(function(jn){if(jn.preventDefault(),jn.stopPropagation(),jn.target===Mr)return Rn(),void $r.onDeactivate();tn(pr),$r.onActivate()}),!0),Wr}function Rn(){Mr&&(Mr.classList.remove(_.ACTIVE_BUTTON),Mr=null)}function tn(pr){Rn();var $r=Tr[pr];$r&&$r&&pr!=="trash"&&($r.classList.add(_.ACTIVE_BUTTON),Mr=$r)}return{setActiveButton:tn,queueMapClasses:hr,updateMapClasses:In,clearMapClasses:function(){hr({mode:null,feature:null,mouse:null}),In()},addButtons:function(){var pr=Ut.options.controls,$r=document.createElement("div");return $r.className=_.CONTROL_GROUP+" "+_.CONTROL_BASE,pr&&(pr[I.LINE]&&(Tr[I.LINE]=Li(I.LINE,{container:$r,className:_.CONTROL_BUTTON_LINE,title:"LineString tool "+(Ut.options.keybindings?"(l)":""),onActivate:function(){return Ut.events.changeMode(P.DRAW_LINE_STRING)},onDeactivate:function(){return Ut.events.trash()}})),pr[I.POLYGON]&&(Tr[I.POLYGON]=Li(I.POLYGON,{container:$r,className:_.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Ut.options.keybindings?"(p)":""),onActivate:function(){return Ut.events.changeMode(P.DRAW_POLYGON)},onDeactivate:function(){return Ut.events.trash()}})),pr[I.POINT]&&(Tr[I.POINT]=Li(I.POINT,{container:$r,className:_.CONTROL_BUTTON_POINT,title:"Marker tool "+(Ut.options.keybindings?"(m)":""),onActivate:function(){return Ut.events.changeMode(P.DRAW_POINT)},onDeactivate:function(){return Ut.events.trash()}})),pr.trash&&(Tr.trash=Li("trash",{container:$r,className:_.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Ut.events.trash()}})),pr.combine_features&&(Tr.combine_features=Li("combineFeatures",{container:$r,className:_.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Ut.events.combineFeatures()}})),pr.uncombine_features&&(Tr.uncombine_features=Li("uncombineFeatures",{container:$r,className:_.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Ut.events.uncombineFeatures()}}))),$r},removeButtons:function(){Object.keys(Tr).forEach((function(pr){var $r=Tr[pr];$r.parentNode&&$r.parentNode.removeChild($r),delete Tr[pr]}))}}})(U),U.container=Mt.getContainer(),U.store=new fr(U),ne=U.ui.addButtons(),U.options.boxSelect&&(U.boxZoomInitial=Mt.boxZoom.isEnabled(),Mt.boxZoom.disable(),Mt.dragPan.disable(),Mt.dragPan.enable()),Mt.loaded()?mt.connect():(Mt.on("load",mt.connect),De=setInterval((function(){Mt.loaded()&&mt.connect()}),16)),U.events.start(),ne},addLayers:function(){U.map.addSource(C.COLD,{data:{type:O.FEATURE_COLLECTION,features:[]},type:"geojson"}),U.map.addSource(C.HOT,{data:{type:O.FEATURE_COLLECTION,features:[]},type:"geojson"}),U.options.styles.forEach((function(Mt){U.map.addLayer(Mt)})),U.store.setDirty(!0),U.store.render()},removeLayers:function(){U.options.styles.forEach((function(Mt){U.map.getLayer(Mt.id)&&U.map.removeLayer(Mt.id)})),U.map.getSource(C.COLD)&&U.map.removeSource(C.COLD),U.map.getSource(C.HOT)&&U.map.removeSource(C.HOT)}};return U.setup=mt,mt}var Nt=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Kt(U){return function(ne){var De=ne.featureTarget;return!!De&&!!De.properties&&De.properties.meta===U}}function Vt(U){return!!U.originalEvent&&!!U.originalEvent.shiftKey&&U.originalEvent.button===0}function Ke(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.active===N.ACTIVE&&U.featureTarget.properties.meta===B.FEATURE}function me(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.active===N.INACTIVE&&U.featureTarget.properties.meta===B.FEATURE}function pe(U){return U.featureTarget===void 0}function Ae(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.meta===B.FEATURE}function Be(U){var ne=U.featureTarget;return!!ne&&!!ne.properties&&ne.properties.meta===B.VERTEX}function Ne(U){return!!U.originalEvent&&U.originalEvent.shiftKey===!0}function Tt(U){return U.keyCode===27}function bt(U){return U.keyCode===13}var tt=Object.freeze({__proto__:null,isOfMetaType:Kt,isShiftMousedown:Vt,isActiveFeature:Ke,isInactiveFeature:me,noTarget:pe,isFeature:Ae,isVertex:Be,isShiftDown:Ne,isEscapeKey:Tt,isEnterKey:bt,isTrue:function(){return!0}}),gt=$t;function $t(U,ne){this.x=U,this.y=ne}$t.prototype={clone:function(){return new $t(this.x,this.y)},add:function(U){return this.clone()._add(U)},sub:function(U){return this.clone()._sub(U)},multByPoint:function(U){return this.clone()._multByPoint(U)},divByPoint:function(U){return this.clone()._divByPoint(U)},mult:function(U){return this.clone()._mult(U)},div:function(U){return this.clone()._div(U)},rotate:function(U){return this.clone()._rotate(U)},rotateAround:function(U,ne){return this.clone()._rotateAround(U,ne)},matMult:function(U){return this.clone()._matMult(U)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(U){return this.x===U.x&&this.y===U.y},dist:function(U){return Math.sqrt(this.distSqr(U))},distSqr:function(U){var ne=U.x-this.x,De=U.y-this.y;return ne*ne+De*De},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(U){return Math.atan2(this.y-U.y,this.x-U.x)},angleWith:function(U){return this.angleWithSep(U.x,U.y)},angleWithSep:function(U,ne){return Math.atan2(this.x*ne-this.y*U,this.x*U+this.y*ne)},_matMult:function(U){var ne=U[0]*this.x+U[1]*this.y,De=U[2]*this.x+U[3]*this.y;return this.x=ne,this.y=De,this},_add:function(U){return this.x+=U.x,this.y+=U.y,this},_sub:function(U){return this.x-=U.x,this.y-=U.y,this},_mult:function(U){return this.x*=U,this.y*=U,this},_div:function(U){return this.x/=U,this.y/=U,this},_multByPoint:function(U){return this.x*=U.x,this.y*=U.y,this},_divByPoint:function(U){return this.x/=U.x,this.y/=U.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var U=this.y;return this.y=this.x,this.x=-U,this},_rotate:function(U){var ne=Math.cos(U),De=Math.sin(U),mt=ne*this.x-De*this.y,Mt=De*this.x+ne*this.y;return this.x=mt,this.y=Mt,this},_rotateAround:function(U,ne){var De=Math.cos(U),mt=Math.sin(U),Mt=ne.x+De*(this.x-ne.x)-mt*(this.y-ne.y),Dt=ne.y+mt*(this.x-ne.x)+De*(this.y-ne.y);return this.x=Mt,this.y=Dt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},$t.convert=function(U){return U instanceof $t?U:Array.isArray(U)?new $t(U[0],U[1]):U};var kt=n(gt);function cr(U,ne){var De=ne.getBoundingClientRect();return new kt(U.clientX-De.left-(ne.clientLeft||0),U.clientY-De.top-(ne.clientTop||0))}function mr(U,ne,De,mt){return{type:O.FEATURE,properties:{meta:B.VERTEX,parent:U,coord_path:De,active:mt?N.ACTIVE:N.INACTIVE},geometry:{type:O.POINT,coordinates:ne}}}function Zr(U,ne,De){var mt=ne.geometry.coordinates,Mt=De.geometry.coordinates;if(mt[1]>85||mt[1]<$||Mt[1]>85||Mt[1]<$)return null;var Dt={lng:(mt[0]+Mt[0])/2,lat:(mt[1]+Mt[1])/2};return{type:O.FEATURE,properties:{meta:B.MIDPOINT,parent:U,lng:Dt.lng,lat:Dt.lat,coord_path:De.properties.coord_path},geometry:{type:O.POINT,coordinates:[Dt.lng,Dt.lat]}}}function mn(U,ne,De){ne===void 0&&(ne={}),De===void 0&&(De=null);var mt,Mt=U.geometry,Dt=Mt.type,Ut=Mt.coordinates,Tr=U.properties&&U.properties.id,Mr=[];function Fr(hr,In){var Li="",Rn=null;hr.forEach((function(tn,pr){var $r=In!=null?In+"."+pr:String(pr),Wr=mr(Tr,tn,$r,Nr($r));if(ne.midpoints&&Rn){var jn=Zr(Tr,Rn,Wr);jn&&Mr.push(jn)}Rn=Wr;var di=JSON.stringify(tn);Li!==di&&Mr.push(Wr),pr===0&&(Li=di)}))}function Nr(hr){return!!ne.selectedPaths&&ne.selectedPaths.indexOf(hr)!==-1}return Dt===O.POINT?Mr.push(mr(Tr,Ut,De,Nr(De))):Dt===O.POLYGON?Ut.forEach((function(hr,In){Fr(hr,De!==null?De+"."+In:String(In))})):Dt===O.LINE_STRING?Fr(Ut,De):Dt.indexOf(O.MULTI_PREFIX)===0&&(mt=Dt.replace(O.MULTI_PREFIX,""),Ut.forEach((function(hr,In){var Li={type:O.FEATURE,properties:U.properties,geometry:{type:mt,coordinates:hr}};Mr=Mr.concat(mn(Li,ne,In))}))),Mr}var Kr={enable:function(U){setTimeout((function(){U.map&&U.map.doubleClickZoom&&U._ctx&&U._ctx.store&&U._ctx.store.getInitialConfigValue&&U._ctx.store.getInitialConfigValue("doubleClickZoom")&&U.map.doubleClickZoom.enable()}),0)},disable:function(U){setTimeout((function(){U.map&&U.map.doubleClickZoom&&U.map.doubleClickZoom.disable()}),0)}},Rt={exports:{}},Ur=function(U){if(!U||!U.type)return null;var ne=Fn[U.type];if(!ne)return null;if(ne==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:U}]};if(ne==="feature")return{type:"FeatureCollection",features:[U]};if(ne==="featurecollection")return U},Fn={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Jr=n(Ur),jr=Object.freeze({__proto__:null,default:function U(ne){switch(ne&&ne.type||null){case"FeatureCollection":return ne.features=ne.features.reduce((function(De,mt){return De.concat(U(mt))}),[]),ne;case"Feature":return ne.geometry?U(ne.geometry).map((function(De){var mt={type:"Feature",properties:JSON.parse(JSON.stringify(ne.properties)),geometry:De};return ne.id!==void 0&&(mt.id=ne.id),mt})):[ne];case"MultiPoint":return ne.coordinates.map((function(De){return{type:"Point",coordinates:De}}));case"MultiPolygon":return ne.coordinates.map((function(De){return{type:"Polygon",coordinates:De}}));case"MultiLineString":return ne.coordinates.map((function(De){return{type:"LineString",coordinates:De}}));case"GeometryCollection":return ne.geometries.map(U).reduce((function(De,mt){return De.concat(mt)}),[]);case"Point":case"Polygon":case"LineString":return[ne]}}}),wt=Ur,Ct=i(jr),Wt=function(U){return(function ne(De){return Array.isArray(De)&&De.length&&typeof De[0]=="number"?[De]:De.reduce((function(mt,Mt){return Array.isArray(Mt)&&Array.isArray(Mt[0])?mt.concat(ne(Mt)):(mt.push(Mt),mt)}),[])})(U)};Ct instanceof Function||(Ct=Ct.default);var ie={exports:{}},_e=ie.exports=function(U){return new Ze(U)};function Ze(U){this.value=U}function _t(U,ne,De){var mt=[],Mt=[],Dt=!0;return(function Ut(Tr){var Mr=De?lt(Tr):Tr,Fr={},Nr=!0,hr={node:Mr,node_:Tr,path:[].concat(mt),parent:Mt[Mt.length-1],parents:Mt,key:mt.slice(-1)[0],isRoot:mt.length===0,level:mt.length,circular:null,update:function(Rn,tn){hr.isRoot||(hr.parent.node[hr.key]=Rn),hr.node=Rn,tn&&(Nr=!1)},delete:function(Rn){delete hr.parent.node[hr.key],Rn&&(Nr=!1)},remove:function(Rn){Vr(hr.parent.node)?hr.parent.node.splice(hr.key,1):delete hr.parent.node[hr.key],Rn&&(Nr=!1)},keys:null,before:function(Rn){Fr.before=Rn},after:function(Rn){Fr.after=Rn},pre:function(Rn){Fr.pre=Rn},post:function(Rn){Fr.post=Rn},stop:function(){Dt=!1},block:function(){Nr=!1}};if(!Dt)return hr;function In(){if(typeof hr.node=="object"&&hr.node!==null){hr.keys&&hr.node_===hr.node||(hr.keys=or(hr.node)),hr.isLeaf=hr.keys.length==0;for(var Rn=0;Rn<Mt.length;Rn++)if(Mt[Rn].node_===Tr){hr.circular=Mt[Rn];break}}else hr.isLeaf=!0,hr.keys=null;hr.notLeaf=!hr.isLeaf,hr.notRoot=!hr.isRoot}In();var Li=ne.call(hr,hr.node);return Li!==void 0&&hr.update&&hr.update(Li),Fr.before&&Fr.before.call(hr,hr.node),Nr&&(typeof hr.node!="object"||hr.node===null||hr.circular||(Mt.push(hr),In(),Rr(hr.keys,(function(Rn,tn){mt.push(Rn),Fr.pre&&Fr.pre.call(hr,hr.node[Rn],Rn);var pr=Ut(hr.node[Rn]);De&&lr.call(hr.node,Rn)&&(hr.node[Rn]=pr.node),pr.isLast=tn==hr.keys.length-1,pr.isFirst=tn==0,Fr.post&&Fr.post.call(hr,pr),mt.pop()})),Mt.pop()),Fr.after&&Fr.after.call(hr,hr.node)),hr})(U).node}function lt(U){if(typeof U=="object"&&U!==null){var ne;if(Vr(U))ne=[];else if(Ar(U)==="[object Date]")ne=new Date(U.getTime?U.getTime():U);else if((function(Mt){return Ar(Mt)==="[object RegExp]"})(U))ne=new RegExp(U);else if((function(Mt){return Ar(Mt)==="[object Error]"})(U))ne={message:U.message};else if((function(Mt){return Ar(Mt)==="[object Boolean]"})(U))ne=new Boolean(U);else if((function(Mt){return Ar(Mt)==="[object Number]"})(U))ne=new Number(U);else if((function(Mt){return Ar(Mt)==="[object String]"})(U))ne=new String(U);else if(Object.create&&Object.getPrototypeOf)ne=Object.create(Object.getPrototypeOf(U));else if(U.constructor===Object)ne={};else{var De=U.constructor&&U.constructor.prototype||U.__proto__||{},mt=function(){};mt.prototype=De,ne=new mt}return Rr(or(U),(function(Mt){ne[Mt]=U[Mt]})),ne}return U}Ze.prototype.get=function(U){for(var ne=this.value,De=0;De<U.length;De++){var mt=U[De];if(!ne||!lr.call(ne,mt)){ne=void 0;break}ne=ne[mt]}return ne},Ze.prototype.has=function(U){for(var ne=this.value,De=0;De<U.length;De++){var mt=U[De];if(!ne||!lr.call(ne,mt))return!1;ne=ne[mt]}return!0},Ze.prototype.set=function(U,ne){for(var De=this.value,mt=0;mt<U.length-1;mt++){var Mt=U[mt];lr.call(De,Mt)||(De[Mt]={}),De=De[Mt]}return De[U[mt]]=ne,ne},Ze.prototype.map=function(U){return _t(this.value,U,!0)},Ze.prototype.forEach=function(U){return this.value=_t(this.value,U,!1),this.value},Ze.prototype.reduce=function(U,ne){var De=arguments.length===1,mt=De?this.value:ne;return this.forEach((function(Mt){this.isRoot&&De||(mt=U.call(this,mt,Mt))})),mt},Ze.prototype.paths=function(){var U=[];return this.forEach((function(ne){U.push(this.path)})),U},Ze.prototype.nodes=function(){var U=[];return this.forEach((function(ne){U.push(this.node)})),U},Ze.prototype.clone=function(){var U=[],ne=[];return(function De(mt){for(var Mt=0;Mt<U.length;Mt++)if(U[Mt]===mt)return ne[Mt];if(typeof mt=="object"&&mt!==null){var Dt=lt(mt);return U.push(mt),ne.push(Dt),Rr(or(mt),(function(Ut){Dt[Ut]=De(mt[Ut])})),U.pop(),ne.pop(),Dt}return mt})(this.value)};var or=Object.keys||function(U){var ne=[];for(var De in U)ne.push(De);return ne};function Ar(U){return Object.prototype.toString.call(U)}var Vr=Array.isArray||function(U){return Object.prototype.toString.call(U)==="[object Array]"},Rr=function(U,ne){if(U.forEach)return U.forEach(ne);for(var De=0;De<U.length;De++)ne(U[De],De,U)};Rr(or(Ze.prototype),(function(U){_e[U]=function(ne){var De=[].slice.call(arguments,1),mt=new Ze(ne);return mt[U].apply(mt,De)}}));var lr=Object.hasOwnProperty||function(U,ne){return ne in U},kr=ie.exports,Yr=dn;function dn(U){if(!(this instanceof dn))return new dn(U);this._bbox=U||[1/0,1/0,-1/0,-1/0],this._valid=!!U}dn.prototype.include=function(U){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],U[0]),this._bbox[1]=Math.min(this._bbox[1],U[1]),this._bbox[2]=Math.max(this._bbox[2],U[0]),this._bbox[3]=Math.max(this._bbox[3],U[1]),this},dn.prototype.equals=function(U){var ne;return ne=U instanceof dn?U.bbox():U,this._bbox[0]==ne[0]&&this._bbox[1]==ne[1]&&this._bbox[2]==ne[2]&&this._bbox[3]==ne[3]},dn.prototype.center=function(U){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},dn.prototype.union=function(U){var ne;return this._valid=!0,ne=U instanceof dn?U.bbox():U,this._bbox[0]=Math.min(this._bbox[0],ne[0]),this._bbox[1]=Math.min(this._bbox[1],ne[1]),this._bbox[2]=Math.max(this._bbox[2],ne[2]),this._bbox[3]=Math.max(this._bbox[3],ne[3]),this},dn.prototype.bbox=function(){return this._valid?this._bbox:null},dn.prototype.contains=function(U){if(!U)return this._fastContains();if(!this._valid)return null;var ne=U[0],De=U[1];return this._bbox[0]<=ne&&this._bbox[1]<=De&&this._bbox[2]>=ne&&this._bbox[3]>=De},dn.prototype.intersect=function(U){return this._valid?(ne=U instanceof dn?U.bbox():U,!(this._bbox[0]>ne[2]||this._bbox[2]<ne[0]||this._bbox[3]<ne[1]||this._bbox[1]>ne[3])):null;var ne},dn.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var U="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",U)},dn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Bn=function(U){if(!U)return[];var ne=Ct(wt(U)),De=[];return ne.features.forEach((function(mt){mt.geometry&&(De=De.concat(Wt(mt.geometry.coordinates)))})),De},Pn=kr,un=Yr,Wi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Zi=Object.keys(Wi);function Ui(U){for(var ne=un(),De=Bn(U),mt=0;mt<De.length;mt++)ne.include(De[mt]);return ne}Rt.exports=function(U){return Ui(U).bbox()},Rt.exports.polygon=function(U){return Ui(U).polygon()},Rt.exports.bboxify=function(U){return Pn(U).map((function(ne){ne&&Zi.some((function(De){return!!ne[De]&&Wi[De].indexOf(ne.type)!==-1}))&&(ne.bbox=Ui(ne).bbox(),this.update(ne))}))};var Ri=n(Rt.exports),Pa=-90;function Vi(U,ne){var De=Pa,mt=90,Mt=Pa,Dt=90,Ut=270,Tr=-270;U.forEach((function(Fr){var Nr=Ri(Fr),hr=Nr[1],In=Nr[3],Li=Nr[0],Rn=Nr[2];hr>De&&(De=hr),In<mt&&(mt=In),In>Mt&&(Mt=In),hr<Dt&&(Dt=hr),Li<Ut&&(Ut=Li),Rn>Tr&&(Tr=Rn)}));var Mr=ne;return De+Mr.lat>85&&(Mr.lat=85-De),Mt+Mr.lat>90&&(Mr.lat=90-Mt),mt+Mr.lat<-85&&(Mr.lat=-85-mt),Dt+Mr.lat<Pa&&(Mr.lat=Pa-Dt),Ut+Mr.lng<=-270&&(Mr.lng+=360*Math.ceil(Math.abs(Mr.lng)/360)),Tr+Mr.lng>=270&&(Mr.lng-=360*Math.ceil(Math.abs(Mr.lng)/360)),Mr}function Ro(U,ne){var De=Vi(U.map((function(mt){return mt.toGeoJSON()})),ne);U.forEach((function(mt){var Mt,Dt=mt.getCoordinates(),Ut=function(Mr){var Fr={lng:Mr[0]+De.lng,lat:Mr[1]+De.lat};return[Fr.lng,Fr.lat]},Tr=function(Mr){return Mr.map((function(Fr){return Ut(Fr)}))};mt.type===O.POINT?Mt=Ut(Dt):mt.type===O.LINE_STRING||mt.type===O.MULTI_POINT?Mt=Dt.map(Ut):mt.type===O.POLYGON||mt.type===O.MULTI_LINE_STRING?Mt=Dt.map(Tr):mt.type===O.MULTI_POLYGON&&(Mt=Dt.map((function(Mr){return Mr.map((function(Fr){return Tr(Fr)}))}))),mt.incomingCoords(Mt)}))}var Dn={onSetup:function(U){var ne=this,De={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:U.featureIds||[]};return this.setSelected(De.initiallySelectedFeatureIds.filter((function(mt){return ne.getFeature(mt)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),De},fireUpdate:function(){this.map.fire(k.UPDATE,{action:F.MOVE,features:this.getSelected().map((function(U){return U.toGeoJSON()}))})},fireActionable:function(){var U=this,ne=this.getSelected(),De=ne.filter((function(Tr){return U.isInstanceOf("MultiFeature",Tr)})),mt=!1;if(ne.length>1){mt=!0;var Mt=ne[0].type.replace("Multi","");ne.forEach((function(Tr){Tr.type.replace("Multi","")!==Mt&&(mt=!1)}))}var Dt=De.length>0,Ut=ne.length>0;this.setActionableState({combineFeatures:mt,uncombineFeatures:Dt,trash:Ut})},getUniqueIds:function(U){return U.length?U.map((function(ne){return ne.properties.id})).filter((function(ne){return ne!==void 0})).reduce((function(ne,De){return ne.add(De),ne}),new H).values():[]},stopExtendedInteractions:function(U){U.boxSelectElement&&(U.boxSelectElement.parentNode&&U.boxSelectElement.parentNode.removeChild(U.boxSelectElement),U.boxSelectElement=null),this.map.dragPan.enable(),U.boxSelecting=!1,U.canBoxSelect=!1,U.dragMoving=!1,U.canDragMove=!1},onStop:function(){Kr.enable(this)},onMouseMove:function(U,ne){return Ae(ne)&&U.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(U),!0},onMouseOut:function(U){return!U.dragMoving||this.fireUpdate()}};Dn.onTap=Dn.onClick=function(U,ne){return pe(ne)?this.clickAnywhere(U,ne):Kt(B.VERTEX)(ne)?this.clickOnVertex(U,ne):Ae(ne)?this.clickOnFeature(U,ne):void 0},Dn.clickAnywhere=function(U){var ne=this,De=this.getSelectedIds();De.length&&(this.clearSelectedFeatures(),De.forEach((function(mt){return ne.doRender(mt)}))),Kr.enable(this),this.stopExtendedInteractions(U)},Dn.clickOnVertex=function(U,ne){this.changeMode(P.DIRECT_SELECT,{featureId:ne.featureTarget.properties.parent,coordPath:ne.featureTarget.properties.coord_path,startPos:ne.lngLat}),this.updateUIClasses({mouse:S.MOVE})},Dn.startOnActiveFeature=function(U,ne){this.stopExtendedInteractions(U),this.map.dragPan.disable(),this.doRender(ne.featureTarget.properties.id),U.canDragMove=!0,U.dragMoveLocation=ne.lngLat},Dn.clickOnFeature=function(U,ne){var De=this;Kr.disable(this),this.stopExtendedInteractions(U);var mt=Ne(ne),Mt=this.getSelectedIds(),Dt=ne.featureTarget.properties.id,Ut=this.isSelected(Dt);if(!mt&&Ut&&this.getFeature(Dt).type!==O.POINT)return this.changeMode(P.DIRECT_SELECT,{featureId:Dt});Ut&&mt?(this.deselect(Dt),this.updateUIClasses({mouse:S.POINTER}),Mt.length===1&&Kr.enable(this)):!Ut&&mt?(this.select(Dt),this.updateUIClasses({mouse:S.MOVE})):Ut||mt||(Mt.forEach((function(Tr){return De.doRender(Tr)})),this.setSelected(Dt),this.updateUIClasses({mouse:S.MOVE})),this.doRender(Dt)},Dn.onMouseDown=function(U,ne){return Ke(ne)?this.startOnActiveFeature(U,ne):this.drawConfig.boxSelect&&Vt(ne)?this.startBoxSelect(U,ne):void 0},Dn.startBoxSelect=function(U,ne){this.stopExtendedInteractions(U),this.map.dragPan.disable(),U.boxSelectStartLocation=cr(ne.originalEvent,this.map.getContainer()),U.canBoxSelect=!0},Dn.onTouchStart=function(U,ne){if(Ke(ne))return this.startOnActiveFeature(U,ne)},Dn.onDrag=function(U,ne){return U.canDragMove?this.dragMove(U,ne):this.drawConfig.boxSelect&&U.canBoxSelect?this.whileBoxSelect(U,ne):void 0},Dn.whileBoxSelect=function(U,ne){U.boxSelecting=!0,this.updateUIClasses({mouse:S.ADD}),U.boxSelectElement||(U.boxSelectElement=document.createElement("div"),U.boxSelectElement.classList.add(_.BOX_SELECT),this.map.getContainer().appendChild(U.boxSelectElement));var De=cr(ne.originalEvent,this.map.getContainer()),mt=Math.min(U.boxSelectStartLocation.x,De.x),Mt=Math.max(U.boxSelectStartLocation.x,De.x),Dt=Math.min(U.boxSelectStartLocation.y,De.y),Ut=Math.max(U.boxSelectStartLocation.y,De.y),Tr="translate("+mt+"px, "+Dt+"px)";U.boxSelectElement.style.transform=Tr,U.boxSelectElement.style.WebkitTransform=Tr,U.boxSelectElement.style.width=Mt-mt+"px",U.boxSelectElement.style.height=Ut-Dt+"px"},Dn.dragMove=function(U,ne){U.dragMoving=!0,ne.originalEvent.stopPropagation();var De={lng:ne.lngLat.lng-U.dragMoveLocation.lng,lat:ne.lngLat.lat-U.dragMoveLocation.lat};Ro(this.getSelected(),De),U.dragMoveLocation=ne.lngLat},Dn.onTouchEnd=Dn.onMouseUp=function(U,ne){var De=this;if(U.dragMoving)this.fireUpdate();else if(U.boxSelecting){var mt=[U.boxSelectStartLocation,cr(ne.originalEvent,this.map.getContainer())],Mt=this.featuresAt(null,mt,"click"),Dt=this.getUniqueIds(Mt).filter((function(Ut){return!De.isSelected(Ut)}));Dt.length&&(this.select(Dt),Dt.forEach((function(Ut){return De.doRender(Ut)})),this.updateUIClasses({mouse:S.MOVE}))}this.stopExtendedInteractions(U)},Dn.toDisplayFeatures=function(U,ne,De){ne.properties.active=this.isSelected(ne.properties.id)?N.ACTIVE:N.INACTIVE,De(ne),this.fireActionable(),ne.properties.active===N.ACTIVE&&ne.geometry.type!==O.POINT&&mn(ne).forEach(De)},Dn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Dn.onCombineFeatures=function(){var U=this.getSelected();if(!(U.length===0||U.length<2)){for(var ne=[],De=[],mt=U[0].type.replace("Multi",""),Mt=0;Mt<U.length;Mt++){var Dt=U[Mt];if(Dt.type.replace("Multi","")!==mt)return;Dt.type.includes("Multi")?Dt.getCoordinates().forEach((function(Tr){ne.push(Tr)})):ne.push(Dt.getCoordinates()),De.push(Dt.toGeoJSON())}if(De.length>1){var Ut=this.newFeature({type:O.FEATURE,properties:De[0].properties,geometry:{type:"Multi"+mt,coordinates:ne}});this.addFeature(Ut),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Ut.id]),this.map.fire(k.COMBINE_FEATURES,{createdFeatures:[Ut.toGeoJSON()],deletedFeatures:De})}this.fireActionable()}},Dn.onUncombineFeatures=function(){var U=this,ne=this.getSelected();if(ne.length!==0){for(var De=[],mt=[],Mt=function(Ut){var Tr=ne[Ut];U.isInstanceOf("MultiFeature",Tr)&&(Tr.getFeatures().forEach((function(Mr){U.addFeature(Mr),Mr.properties=Tr.properties,De.push(Mr.toGeoJSON()),U.select([Mr.id])})),U.deleteFeature(Tr.id,{silent:!0}),mt.push(Tr.toGeoJSON()))},Dt=0;Dt<ne.length;Dt++)Mt(Dt);De.length>1&&this.map.fire(k.UNCOMBINE_FEATURES,{createdFeatures:De,deletedFeatures:mt}),this.fireActionable()}};var cn=Kt(B.VERTEX),Xi=Kt(B.MIDPOINT),ia={fireUpdate:function(){this.map.fire(k.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map((function(U){return U.toGeoJSON()}))})},fireActionable:function(U){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:U.selectedCoordPaths.length>0})},startDragging:function(U,ne){this.map.dragPan.disable(),U.canDragMove=!0,U.dragMoveLocation=ne.lngLat},stopDragging:function(U){this.map.dragPan.enable(),U.dragMoving=!1,U.canDragMove=!1,U.dragMoveLocation=null},onVertex:function(U,ne){this.startDragging(U,ne);var De=ne.featureTarget.properties,mt=U.selectedCoordPaths.indexOf(De.coord_path);Ne(ne)||mt!==-1?Ne(ne)&&mt===-1&&U.selectedCoordPaths.push(De.coord_path):U.selectedCoordPaths=[De.coord_path];var Mt=this.pathsToCoordinates(U.featureId,U.selectedCoordPaths);this.setSelectedCoordinates(Mt)},onMidpoint:function(U,ne){this.startDragging(U,ne);var De=ne.featureTarget.properties;U.feature.addCoordinate(De.coord_path,De.lng,De.lat),this.fireUpdate(),U.selectedCoordPaths=[De.coord_path]},pathsToCoordinates:function(U,ne){return ne.map((function(De){return{feature_id:U,coord_path:De}}))},onFeature:function(U,ne){U.selectedCoordPaths.length===0?this.startDragging(U,ne):this.stopDragging(U)},dragFeature:function(U,ne,De){Ro(this.getSelected(),De),U.dragMoveLocation=ne.lngLat},dragVertex:function(U,ne,De){for(var mt=U.selectedCoordPaths.map((function(Tr){return U.feature.getCoordinate(Tr)})),Mt=Vi(mt.map((function(Tr){return{type:O.FEATURE,properties:{},geometry:{type:O.POINT,coordinates:Tr}}})),De),Dt=0;Dt<mt.length;Dt++){var Ut=mt[Dt];U.feature.updateCoordinate(U.selectedCoordPaths[Dt],Ut[0]+Mt.lng,Ut[1]+Mt.lat)}},clickNoTarget:function(){this.changeMode(P.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(P.SIMPLE_SELECT)},clickActiveFeature:function(U){U.selectedCoordPaths=[],this.clearSelectedCoordinates(),U.feature.changed()},onSetup:function(U){var ne=U.featureId,De=this.getFeature(ne);if(!De)throw new Error("You must provide a featureId to enter direct_select mode");if(De.type===O.POINT)throw new TypeError("direct_select mode doesn't handle point features");var mt={featureId:ne,feature:De,dragMoveLocation:U.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:U.coordPath?[U.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(ne,mt.selectedCoordPaths)),this.setSelected(ne),Kr.disable(this),this.setActionableState({trash:!0}),mt},onStop:function(){Kr.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(U,ne,De){U.featureId===ne.properties.id?(ne.properties.active=N.ACTIVE,De(ne),mn(ne,{map:this.map,midpoints:!0,selectedPaths:U.selectedCoordPaths}).forEach(De)):(ne.properties.active=N.INACTIVE,De(ne)),this.fireActionable(U)},onTrash:function(U){U.selectedCoordPaths.sort((function(ne,De){return De.localeCompare(ne,"en",{numeric:!0})})).forEach((function(ne){return U.feature.removeCoordinate(ne)})),this.fireUpdate(),U.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(U),U.feature.isValid()===!1&&(this.deleteFeature([U.featureId]),this.changeMode(P.SIMPLE_SELECT,{}))},onMouseMove:function(U,ne){var De=Ke(ne),mt=cn(ne),Mt=Xi(ne),Dt=U.selectedCoordPaths.length===0;return De&&Dt||mt&&!Dt?this.updateUIClasses({mouse:S.MOVE}):this.updateUIClasses({mouse:S.NONE}),(mt||De||Mt)&&U.dragMoving&&this.fireUpdate(),this.stopDragging(U),!0},onMouseOut:function(U){return U.dragMoving&&this.fireUpdate(),!0}};ia.onTouchStart=ia.onMouseDown=function(U,ne){return cn(ne)?this.onVertex(U,ne):Ke(ne)?this.onFeature(U,ne):Xi(ne)?this.onMidpoint(U,ne):void 0},ia.onDrag=function(U,ne){if(U.canDragMove===!0){U.dragMoving=!0,ne.originalEvent.stopPropagation();var De={lng:ne.lngLat.lng-U.dragMoveLocation.lng,lat:ne.lngLat.lat-U.dragMoveLocation.lat};U.selectedCoordPaths.length>0?this.dragVertex(U,ne,De):this.dragFeature(U,ne,De),U.dragMoveLocation=ne.lngLat}},ia.onClick=function(U,ne){return pe(ne)?this.clickNoTarget(U,ne):Ke(ne)?this.clickActiveFeature(U,ne):me(ne)?this.clickInactive(U,ne):void this.stopDragging(U)},ia.onTap=function(U,ne){return pe(ne)?this.clickNoTarget(U,ne):Ke(ne)?this.clickActiveFeature(U,ne):me(ne)?this.clickInactive(U,ne):void 0},ia.onTouchEnd=ia.onMouseUp=function(U){U.dragMoving&&this.fireUpdate(),this.stopDragging(U)};var Ki={};function vi(U,ne){return!!U.lngLat&&U.lngLat.lng===ne[0]&&U.lngLat.lat===ne[1]}Ki.onSetup=function(){var U=this.newFeature({type:O.FEATURE,properties:{},geometry:{type:O.POINT,coordinates:[]}});return this.addFeature(U),this.clearSelectedFeatures(),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(I.POINT),this.setActionableState({trash:!0}),{point:U}},Ki.stopDrawingAndRemove=function(U){this.deleteFeature([U.point.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)},Ki.onTap=Ki.onClick=function(U,ne){this.updateUIClasses({mouse:S.MOVE}),U.point.updateCoordinate("",ne.lngLat.lng,ne.lngLat.lat),this.map.fire(k.CREATE,{features:[U.point.toGeoJSON()]}),this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.point.id]})},Ki.onStop=function(U){this.activateUIButton(),U.point.getCoordinate().length||this.deleteFeature([U.point.id],{silent:!0})},Ki.toDisplayFeatures=function(U,ne,De){var mt=ne.properties.id===U.point.id;if(ne.properties.active=mt?N.ACTIVE:N.INACTIVE,!mt)return De(ne)},Ki.onTrash=Ki.stopDrawingAndRemove,Ki.onKeyUp=function(U,ne){if(Tt(ne)||bt(ne))return this.stopDrawingAndRemove(U,ne)};var Yi={onSetup:function(){var U=this.newFeature({type:O.FEATURE,properties:{},geometry:{type:O.POLYGON,coordinates:[[]]}});return this.addFeature(U),this.clearSelectedFeatures(),Kr.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(I.POLYGON),this.setActionableState({trash:!0}),{polygon:U,currentVertexPosition:0}},clickAnywhere:function(U,ne){if(U.currentVertexPosition>0&&vi(ne,U.polygon.coordinates[0][U.currentVertexPosition-1]))return this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.polygon.id]});this.updateUIClasses({mouse:S.ADD}),U.polygon.updateCoordinate("0."+U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat),U.currentVertexPosition++,U.polygon.updateCoordinate("0."+U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat)},clickOnVertex:function(U){return this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.polygon.id]})},onMouseMove:function(U,ne){U.polygon.updateCoordinate("0."+U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat),Be(ne)&&this.updateUIClasses({mouse:S.POINTER})}};Yi.onTap=Yi.onClick=function(U,ne){return Be(ne)?this.clickOnVertex(U,ne):this.clickAnywhere(U,ne)},Yi.onKeyUp=function(U,ne){Tt(ne)?(this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)):bt(ne)&&this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.polygon.id]})},Yi.onStop=function(U){this.updateUIClasses({mouse:S.NONE}),Kr.enable(this),this.activateUIButton(),this.getFeature(U.polygon.id)!==void 0&&(U.polygon.removeCoordinate("0."+U.currentVertexPosition),U.polygon.isValid()?this.map.fire(k.CREATE,{features:[U.polygon.toGeoJSON()]}):(this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT,{},{silent:!0})))},Yi.toDisplayFeatures=function(U,ne,De){var mt=ne.properties.id===U.polygon.id;if(ne.properties.active=mt?N.ACTIVE:N.INACTIVE,!mt)return De(ne);if(ne.geometry.coordinates.length!==0){var Mt=ne.geometry.coordinates[0].length;if(!(Mt<3)){if(ne.properties.meta=B.FEATURE,De(mr(U.polygon.id,ne.geometry.coordinates[0][0],"0.0",!1)),Mt>3){var Dt=ne.geometry.coordinates[0].length-3;De(mr(U.polygon.id,ne.geometry.coordinates[0][Dt],"0."+Dt,!1))}if(Mt<=4){var Ut=[[ne.geometry.coordinates[0][0][0],ne.geometry.coordinates[0][0][1]],[ne.geometry.coordinates[0][1][0],ne.geometry.coordinates[0][1][1]]];if(De({type:O.FEATURE,properties:ne.properties,geometry:{coordinates:Ut,type:O.LINE_STRING}}),Mt===3)return}return De(ne)}}},Yi.onTrash=function(U){this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)};var mo={onSetup:function(U){var ne,De,mt=(U=U||{}).featureId,Mt="forward";if(mt){if(!(ne=this.getFeature(mt)))throw new Error("Could not find a feature with the provided featureId");var Dt=U.from;if(Dt&&Dt.type==="Feature"&&Dt.geometry&&Dt.geometry.type==="Point"&&(Dt=Dt.geometry),Dt&&Dt.type==="Point"&&Dt.coordinates&&Dt.coordinates.length===2&&(Dt=Dt.coordinates),!Dt||!Array.isArray(Dt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Ut=ne.coordinates.length-1;if(ne.coordinates[Ut][0]===Dt[0]&&ne.coordinates[Ut][1]===Dt[1])De=Ut+1,ne.addCoordinate.apply(ne,[De].concat(ne.coordinates[Ut]));else{if(ne.coordinates[0][0]!==Dt[0]||ne.coordinates[0][1]!==Dt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Mt="backwards",De=0,ne.addCoordinate.apply(ne,[De].concat(ne.coordinates[0]))}}else ne=this.newFeature({type:O.FEATURE,properties:{},geometry:{type:O.LINE_STRING,coordinates:[]}}),De=0,this.addFeature(ne);return this.clearSelectedFeatures(),Kr.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(I.LINE),this.setActionableState({trash:!0}),{line:ne,currentVertexPosition:De,direction:Mt}},clickAnywhere:function(U,ne){if(U.currentVertexPosition>0&&vi(ne,U.line.coordinates[U.currentVertexPosition-1])||U.direction==="backwards"&&vi(ne,U.line.coordinates[U.currentVertexPosition+1]))return this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.line.id]});this.updateUIClasses({mouse:S.ADD}),U.line.updateCoordinate(U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat),U.direction==="forward"?(U.currentVertexPosition++,U.line.updateCoordinate(U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat)):U.line.addCoordinate(0,ne.lngLat.lng,ne.lngLat.lat)},clickOnVertex:function(U){return this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.line.id]})},onMouseMove:function(U,ne){U.line.updateCoordinate(U.currentVertexPosition,ne.lngLat.lng,ne.lngLat.lat),Be(ne)&&this.updateUIClasses({mouse:S.POINTER})}};mo.onTap=mo.onClick=function(U,ne){if(Be(ne))return this.clickOnVertex(U,ne);this.clickAnywhere(U,ne)},mo.onKeyUp=function(U,ne){bt(ne)?this.changeMode(P.SIMPLE_SELECT,{featureIds:[U.line.id]}):Tt(ne)&&(this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT))},mo.onStop=function(U){Kr.enable(this),this.activateUIButton(),this.getFeature(U.line.id)!==void 0&&(U.line.removeCoordinate(""+U.currentVertexPosition),U.line.isValid()?this.map.fire(k.CREATE,{features:[U.line.toGeoJSON()]}):(this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT,{},{silent:!0})))},mo.onTrash=function(U){this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(P.SIMPLE_SELECT)},mo.toDisplayFeatures=function(U,ne,De){var mt=ne.properties.id===U.line.id;if(ne.properties.active=mt?N.ACTIVE:N.INACTIVE,!mt)return De(ne);ne.geometry.coordinates.length<2||(ne.properties.meta=B.FEATURE,De(mr(U.line.id,ne.geometry.coordinates[U.direction==="forward"?ne.geometry.coordinates.length-2:1],""+(U.direction==="forward"?ne.geometry.coordinates.length-2:1),!1)),De(ne))};var xs={simple_select:Dn,direct_select:ia,draw_point:Ki,draw_polygon:Yi,draw_line_string:mo},fa={defaultMode:P.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Nt,modes:xs,controls:{},userProperties:!1},Gi={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Cc={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function $s(U,ne){return U.map((function(De){return De.source?De:Ge(De,{id:De.id+"."+ne,source:ne==="hot"?C.HOT:C.COLD})}))}var as={exports:{}};(function(U,ne){var De="__lodash_hash_undefined__",mt=9007199254740991,Mt="[object Arguments]",Dt="[object Array]",Ut="[object Boolean]",Tr="[object Date]",Mr="[object Error]",Fr="[object Function]",Nr="[object Map]",hr="[object Number]",In="[object Object]",Li="[object Promise]",Rn="[object RegExp]",tn="[object Set]",pr="[object String]",$r="[object Symbol]",Wr="[object WeakMap]",jn="[object ArrayBuffer]",di="[object DataView]",Ji=/^\[object .+?Constructor\]$/,Lo=/^(?:0|[1-9]\d*)$/,Jn={};Jn["[object Float32Array]"]=Jn["[object Float64Array]"]=Jn["[object Int8Array]"]=Jn["[object Int16Array]"]=Jn["[object Int32Array]"]=Jn["[object Uint8Array]"]=Jn["[object Uint8ClampedArray]"]=Jn["[object Uint16Array]"]=Jn["[object Uint32Array]"]=!0,Jn[Mt]=Jn[Dt]=Jn[jn]=Jn[Ut]=Jn[di]=Jn[Tr]=Jn[Mr]=Jn[Fr]=Jn[Nr]=Jn[hr]=Jn[In]=Jn[Rn]=Jn[tn]=Jn[pr]=Jn[Wr]=!1;var ws=typeof vd=="object"&&vd&&vd.Object===Object&&vd,Ss=typeof self=="object"&&self&&self.Object===Object&&self,ui=ws||Ss||Function("return this")(),ss=ne&&!ne.nodeType&&ne,go=ss&&U&&!U.nodeType&&U,xu=go&&go.exports===ss,Na=xu&&ws.process,Es=(function(){try{return Na&&Na.binding&&Na.binding("util")}catch{}})(),yo=Es&&Es.isTypedArray;function Xl(qt,ar){for(var qr=-1,sn=qt==null?0:qt.length;++qr<sn;)if(ar(qt[qr],qr,qt))return!0;return!1}function wu(qt){var ar=-1,qr=Array(qt.size);return qt.forEach((function(sn,ci){qr[++ar]=[ci,sn]})),qr}function Cs(qt){var ar=-1,qr=Array(qt.size);return qt.forEach((function(sn){qr[++ar]=sn})),qr}var bi,ls,Xn,kn=Array.prototype,eo=Function.prototype,Nn=Object.prototype,Y=ui["__core-js_shared__"],Pe=eo.toString,it=Nn.hasOwnProperty,Ot=(bi=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+bi:"",Gt=Nn.toString,br=RegExp("^"+Pe.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pr=xu?ui.Buffer:void 0,hn=ui.Symbol,bn=ui.Uint8Array,yn=Nn.propertyIsEnumerable,Mn=kn.splice,_n=hn?hn.toStringTag:void 0,Pi=Object.getOwnPropertySymbols,_a=Pr?Pr.isBuffer:void 0,Ei=(ls=Object.keys,Xn=Object,function(qt){return ls(Xn(qt))}),Vn=Ba(ui,"DataView"),Qi=Ba(ui,"Map"),Ia=Ba(ui,"Promise"),As=Ba(ui,"Set"),ol=Ba(ui,"WeakMap"),Ts=Ba(Object,"create"),Su=fs(Vn),Ps=fs(Qi),us=fs(Ia),Pl=fs(As),qs=fs(ol),Go=hn?hn.prototype:void 0,ni=Go?Go.valueOf:void 0;function vo(qt){var ar=-1,qr=qt==null?0:qt.length;for(this.clear();++ar<qr;){var sn=qt[ar];this.set(sn[0],sn[1])}}function xa(qt){var ar=-1,qr=qt==null?0:qt.length;for(this.clear();++ar<qr;){var sn=qt[ar];this.set(sn[0],sn[1])}}function bo(qt){var ar=-1,qr=qt==null?0:qt.length;for(this.clear();++ar<qr;){var sn=qt[ar];this.set(sn[0],sn[1])}}function Ho(qt){var ar=-1,qr=qt==null?0:qt.length;for(this.__data__=new bo;++ar<qr;)this.add(qt[ar])}function wa(qt){var ar=this.__data__=new xa(qt);this.size=ar.size}function Eu(qt,ar){var qr=Rl(qt),sn=!qr&&Sa(qt),ci=!qr&&!sn&&Is(qt),gn=!qr&&!sn&&!ci&&Ll(qt),Ln=qr||sn||ci||gn,zn=Ln?(function(ea,Va){for(var hs=-1,uo=Array(ea);++hs<ea;)uo[hs]=Va(hs);return uo})(qt.length,String):[],_i=zn.length;for(var $i in qt)!it.call(qt,$i)||Ln&&($i=="length"||ci&&($i=="offset"||$i=="parent")||gn&&($i=="buffer"||$i=="byteLength"||$i=="byteOffset")||Ol($i,_i))||zn.push($i);return zn}function Il(qt,ar){for(var qr=qt.length;qr--;)if(Zo(qt[qr][0],ar))return qr;return-1}function cs(qt){return qt==null?qt===void 0?"[object Undefined]":"[object Null]":_n&&_n in Object(qt)?(function(ar){var qr=it.call(ar,_n),sn=ar[_n];try{ar[_n]=void 0;var ci=!0}catch{}var gn=Gt.call(ar);return ci&&(qr?ar[_n]=sn:delete ar[_n]),gn})(qt):(function(ar){return Gt.call(ar)})(qt)}function ha(qt){return Gs(qt)&&cs(qt)==Mt}function Wo(qt,ar,qr,sn,ci){return qt===ar||(qt==null||ar==null||!Gs(qt)&&!Gs(ar)?qt!=qt&&ar!=ar:(function(gn,Ln,zn,_i,$i,ea){var Va=Rl(gn),hs=Rl(Ln),uo=Va?Dt:da(gn),ll=hs?Dt:da(Ln),ii=(uo=uo==Mt?In:uo)==In,Ql=(ll=ll==Mt?In:ll)==In,ul=uo==ll;if(ul&&Is(gn)){if(!Is(Ln))return!1;Va=!0,ii=!1}if(ul&&!ii)return ea||(ea=new wa),Va||Ll(gn)?Us(gn,Ln,zn,_i,$i,ea):(function(xi,Qn,Ju,ds,Qu,Ga,ps){switch(Ju){case di:if(xi.byteLength!=Qn.byteLength||xi.byteOffset!=Qn.byteOffset)return!1;xi=xi.buffer,Qn=Qn.buffer;case jn:return!(xi.byteLength!=Qn.byteLength||!Ga(new bn(xi),new bn(Qn)));case Ut:case Tr:case hr:return Zo(+xi,+Qn);case Mr:return xi.name==Qn.name&&xi.message==Qn.message;case Rn:case pr:return xi==Qn+"";case Nr:var Ms=wu;case tn:var cl=1&ds;if(Ms||(Ms=Cs),xi.size!=Qn.size&&!cl)return!1;var tu=ps.get(xi);if(tu)return tu==Qn;ds|=2,ps.set(xi,Qn);var ru=Us(Ms(xi),Ms(Qn),ds,Qu,Ga,ps);return ps.delete(xi),ru;case $r:if(ni)return ni.call(xi)==ni.call(Qn)}return!1})(gn,Ln,uo,zn,_i,$i,ea);if(!(1&zn)){var Dl=ii&&it.call(gn,"__wrapped__"),Tc=Ql&&it.call(Ln,"__wrapped__");if(Dl||Tc){var eu=Dl?gn.value():gn,Yu=Tc?Ln.value():Ln;return ea||(ea=new wa),$i(eu,Yu,zn,_i,ea)}}return ul?(ea||(ea=new wa),(function(xi,Qn,Ju,ds,Qu,Ga){var ps=1&Ju,Ms=Ml(xi),cl=Ms.length,tu=Ml(Qn).length;if(cl!=tu&&!ps)return!1;for(var ru=cl;ru--;){var ms=Ms[ru];if(!(ps?ms in Qn:it.call(Qn,ms)))return!1}var kl=Ga.get(xi);if(kl&&Ga.get(Qn))return kl==Qn;var nu=!0;Ga.set(xi,Qn),Ga.set(Qn,xi);for(var co=ps;++ru<cl;){var Cn=xi[ms=Ms[ru]],fl=Qn[ms];if(ds)var Pc=ps?ds(fl,Cn,ms,Qn,xi,Ga):ds(Cn,fl,ms,xi,Qn,Ga);if(!(Pc===void 0?Cn===fl||Qu(Cn,fl,Ju,ds,Ga):Pc)){nu=!1;break}co||(co=ms=="constructor")}if(nu&&!co){var ec=xi.constructor,Hs=Qn.constructor;ec==Hs||!("constructor"in xi)||!("constructor"in Qn)||typeof ec=="function"&&ec instanceof ec&&typeof Hs=="function"&&Hs instanceof Hs||(nu=!1)}return Ga.delete(xi),Ga.delete(Qn),nu})(gn,Ln,zn,_i,$i,ea)):!1})(qt,ar,qr,sn,Wo,ci))}function Ku(qt){return!(!sl(qt)||(function(ar){return!!Ot&&Ot in ar})(qt))&&(Vs(qt)?br:Ji).test(fs(qt))}function Cu(qt){if(qr=(ar=qt)&&ar.constructor,sn=typeof qr=="function"&&qr.prototype||Nn,ar!==sn)return Ei(qt);var ar,qr,sn,ci=[];for(var gn in Object(qt))it.call(qt,gn)&&gn!="constructor"&&ci.push(gn);return ci}function Us(qt,ar,qr,sn,ci,gn){var Ln=1&qr,zn=qt.length,_i=ar.length;if(zn!=_i&&!(Ln&&_i>zn))return!1;var $i=gn.get(qt);if($i&&gn.get(ar))return $i==ar;var ea=-1,Va=!0,hs=2&qr?new Ho:void 0;for(gn.set(qt,ar),gn.set(ar,qt);++ea<zn;){var uo=qt[ea],ll=ar[ea];if(sn)var ii=Ln?sn(ll,uo,ea,ar,qt,gn):sn(uo,ll,ea,qt,ar,gn);if(ii!==void 0){if(ii)continue;Va=!1;break}if(hs){if(!Xl(ar,(function(Ql,ul){if(Dl=ul,!hs.has(Dl)&&(uo===Ql||ci(uo,Ql,qr,sn,gn)))return hs.push(ul);var Dl}))){Va=!1;break}}else if(uo!==ll&&!ci(uo,ll,qr,sn,gn)){Va=!1;break}}return gn.delete(qt),gn.delete(ar),Va}function Ml(qt){return(function(ar,qr,sn){var ci=qr(ar);return Rl(ar)?ci:(function(gn,Ln){for(var zn=-1,_i=Ln.length,$i=gn.length;++zn<_i;)gn[$i+zn]=Ln[zn];return gn})(ci,sn(ar))})(qt,Jl,Kl)}function to(qt,ar){var qr,sn,ci=qt.__data__;return((sn=typeof(qr=ar))=="string"||sn=="number"||sn=="symbol"||sn=="boolean"?qr!=="__proto__":qr===null)?ci[typeof ar=="string"?"string":"hash"]:ci.map}function Ba(qt,ar){var qr=(function(sn,ci){return sn?.[ci]})(qt,ar);return Ku(qr)?qr:void 0}vo.prototype.clear=function(){this.__data__=Ts?Ts(null):{},this.size=0},vo.prototype.delete=function(qt){var ar=this.has(qt)&&delete this.__data__[qt];return this.size-=ar?1:0,ar},vo.prototype.get=function(qt){var ar=this.__data__;if(Ts){var qr=ar[qt];return qr===De?void 0:qr}return it.call(ar,qt)?ar[qt]:void 0},vo.prototype.has=function(qt){var ar=this.__data__;return Ts?ar[qt]!==void 0:it.call(ar,qt)},vo.prototype.set=function(qt,ar){var qr=this.__data__;return this.size+=this.has(qt)?0:1,qr[qt]=Ts&&ar===void 0?De:ar,this},xa.prototype.clear=function(){this.__data__=[],this.size=0},xa.prototype.delete=function(qt){var ar=this.__data__,qr=Il(ar,qt);return!(qr<0)&&(qr==ar.length-1?ar.pop():Mn.call(ar,qr,1),--this.size,!0)},xa.prototype.get=function(qt){var ar=this.__data__,qr=Il(ar,qt);return qr<0?void 0:ar[qr][1]},xa.prototype.has=function(qt){return Il(this.__data__,qt)>-1},xa.prototype.set=function(qt,ar){var qr=this.__data__,sn=Il(qr,qt);return sn<0?(++this.size,qr.push([qt,ar])):qr[sn][1]=ar,this},bo.prototype.clear=function(){this.size=0,this.__data__={hash:new vo,map:new(Qi||xa),string:new vo}},bo.prototype.delete=function(qt){var ar=to(this,qt).delete(qt);return this.size-=ar?1:0,ar},bo.prototype.get=function(qt){return to(this,qt).get(qt)},bo.prototype.has=function(qt){return to(this,qt).has(qt)},bo.prototype.set=function(qt,ar){var qr=to(this,qt),sn=qr.size;return qr.set(qt,ar),this.size+=qr.size==sn?0:1,this},Ho.prototype.add=Ho.prototype.push=function(qt){return this.__data__.set(qt,De),this},Ho.prototype.has=function(qt){return this.__data__.has(qt)},wa.prototype.clear=function(){this.__data__=new xa,this.size=0},wa.prototype.delete=function(qt){var ar=this.__data__,qr=ar.delete(qt);return this.size=ar.size,qr},wa.prototype.get=function(qt){return this.__data__.get(qt)},wa.prototype.has=function(qt){return this.__data__.has(qt)},wa.prototype.set=function(qt,ar){var qr=this.__data__;if(qr instanceof xa){var sn=qr.__data__;if(!Qi||sn.length<199)return sn.push([qt,ar]),this.size=++qr.size,this;qr=this.__data__=new bo(sn)}return qr.set(qt,ar),this.size=qr.size,this};var Kl=Pi?function(qt){return qt==null?[]:(qt=Object(qt),(function(ar,qr){for(var sn=-1,ci=ar==null?0:ar.length,gn=0,Ln=[];++sn<ci;){var zn=ar[sn];qr(zn,sn,ar)&&(Ln[gn++]=zn)}return Ln})(Pi(qt),(function(ar){return yn.call(qt,ar)})))}:function(){return[]},da=cs;function Ol(qt,ar){return!!(ar=ar??mt)&&(typeof qt=="number"||Lo.test(qt))&&qt>-1&&qt%1==0&&qt<ar}function fs(qt){if(qt!=null){try{return Pe.call(qt)}catch{}try{return qt+""}catch{}}return""}function Zo(qt,ar){return qt===ar||qt!=qt&&ar!=ar}(Vn&&da(new Vn(new ArrayBuffer(1)))!=di||Qi&&da(new Qi)!=Nr||Ia&&da(Ia.resolve())!=Li||As&&da(new As)!=tn||ol&&da(new ol)!=Wr)&&(da=function(qt){var ar=cs(qt),qr=ar==In?qt.constructor:void 0,sn=qr?fs(qr):"";if(sn)switch(sn){case Su:return di;case Ps:return Nr;case us:return Li;case Pl:return tn;case qs:return Wr}return ar});var Sa=ha((function(){return arguments})())?ha:function(qt){return Gs(qt)&&it.call(qt,"callee")&&!yn.call(qt,"callee")},Rl=Array.isArray,Is=_a||function(){return!1};function Vs(qt){if(!sl(qt))return!1;var ar=cs(qt);return ar==Fr||ar=="[object GeneratorFunction]"||ar=="[object AsyncFunction]"||ar=="[object Proxy]"}function Yl(qt){return typeof qt=="number"&&qt>-1&&qt%1==0&&qt<=mt}function sl(qt){var ar=typeof qt;return qt!=null&&(ar=="object"||ar=="function")}function Gs(qt){return qt!=null&&typeof qt=="object"}var Ll=yo?(function(qt){return function(ar){return qt(ar)}})(yo):function(qt){return Gs(qt)&&Yl(qt.length)&&!!Jn[cs(qt)]};function Jl(qt){return(ar=qt)!=null&&Yl(ar.length)&&!Vs(ar)?Eu(qt):Cu(qt);var ar}U.exports=function(qt,ar){return Wo(qt,ar)}})(as,as.exports);var os=n(as.exports);function Tl(U,ne){return U.length===ne.length&&JSON.stringify(U.map((function(De){return De})).sort())===JSON.stringify(ne.map((function(De){return De})).sort())}var ba={Polygon:Ve,LineString:Le,Point:Ie,MultiPolygon:xt,MultiLineString:xt,MultiPoint:xt},Wl=Object.freeze({__proto__:null,CommonSelectors:tt,constrainFeatureMovement:Vi,createMidPoint:Zr,createSupplementaryPoints:mn,createVertex:mr,doubleClickZoom:Kr,euclideanDistance:Te,featuresAt:ue,getFeatureAtAndSetCursors:be,isClick:ve,isEventAtCoordinates:vi,isTap:Ce,mapEventToBoundingBox:Z,ModeHandler:r,moveFeatures:Ro,sortFeatures:le,stringSetsAreEqual:Tl,StringSet:H,theme:Nt,toDenseArray:dt}),Ac=function(U,ne){var De={options:U=(function(Mt){Mt===void 0&&(Mt={});var Dt=Ge(Mt);return Mt.controls||(Dt.controls={}),Mt.displayControlsDefault===!1?Dt.controls=Ge(Cc,Mt.controls):Dt.controls=Ge(Gi,Mt.controls),(Dt=Ge(fa,Dt)).styles=$s(Dt.styles,"cold").concat($s(Dt.styles,"hot")),Dt})(U)};ne=(function(Mt,Dt){return Dt.modes=P,Dt.getFeatureIdsAt=function(Ut){return ue.click({point:Ut},null,Mt).map((function(Tr){return Tr.properties.id}))},Dt.getSelectedIds=function(){return Mt.store.getSelectedIds()},Dt.getSelected=function(){return{type:O.FEATURE_COLLECTION,features:Mt.store.getSelectedIds().map((function(Ut){return Mt.store.get(Ut)})).map((function(Ut){return Ut.toGeoJSON()}))}},Dt.getSelectedPoints=function(){return{type:O.FEATURE_COLLECTION,features:Mt.store.getSelectedCoordinates().map((function(Ut){return{type:O.FEATURE,properties:{},geometry:{type:O.POINT,coordinates:Ut.coordinates}}}))}},Dt.set=function(Ut){if(Ut.type===void 0||Ut.type!==O.FEATURE_COLLECTION||!Array.isArray(Ut.features))throw new Error("Invalid FeatureCollection");var Tr=Mt.store.createRenderBatch(),Mr=Mt.store.getAllIds().slice(),Fr=Dt.add(Ut),Nr=new H(Fr);return(Mr=Mr.filter((function(hr){return!Nr.has(hr)}))).length&&Dt.delete(Mr),Tr(),Fr},Dt.add=function(Ut){var Tr=JSON.parse(JSON.stringify(Jr(Ut))).features.map((function(Mr){if(Mr.id=Mr.id||ge(),Mr.geometry===null)throw new Error("Invalid geometry: null");if(Mt.store.get(Mr.id)===void 0||Mt.store.get(Mr.id).type!==Mr.geometry.type){var Fr=ba[Mr.geometry.type];if(Fr===void 0)throw new Error("Invalid geometry type: "+Mr.geometry.type+".");var Nr=new Fr(Mt,Mr);Mt.store.add(Nr)}else{var hr=Mt.store.get(Mr.id);hr.properties=Mr.properties,os(hr.properties,Mr.properties)||Mt.store.featureChanged(hr.id),os(hr.getCoordinates(),Mr.geometry.coordinates)||hr.incomingCoords(Mr.geometry.coordinates)}return Mr.id}));return Mt.store.render(),Tr},Dt.get=function(Ut){var Tr=Mt.store.get(Ut);if(Tr)return Tr.toGeoJSON()},Dt.getAll=function(){return{type:O.FEATURE_COLLECTION,features:Mt.store.getAll().map((function(Ut){return Ut.toGeoJSON()}))}},Dt.delete=function(Ut){return Mt.store.delete(Ut,{silent:!0}),Dt.getMode()!==P.DIRECT_SELECT||Mt.store.getSelectedIds().length?Mt.store.render():Mt.events.changeMode(P.SIMPLE_SELECT,void 0,{silent:!0}),Dt},Dt.deleteAll=function(){return Mt.store.delete(Mt.store.getAllIds(),{silent:!0}),Dt.getMode()===P.DIRECT_SELECT?Mt.events.changeMode(P.SIMPLE_SELECT,void 0,{silent:!0}):Mt.store.render(),Dt},Dt.changeMode=function(Ut,Tr){return Tr===void 0&&(Tr={}),Ut===P.SIMPLE_SELECT&&Dt.getMode()===P.SIMPLE_SELECT?(Tl(Tr.featureIds||[],Mt.store.getSelectedIds())||(Mt.store.setSelected(Tr.featureIds,{silent:!0}),Mt.store.render()),Dt):(Ut===P.DIRECT_SELECT&&Dt.getMode()===P.DIRECT_SELECT&&Tr.featureId===Mt.store.getSelectedIds()[0]||Mt.events.changeMode(Ut,Tr,{silent:!0}),Dt)},Dt.getMode=function(){return Mt.events.getMode()},Dt.trash=function(){return Mt.events.trash({silent:!0}),Dt},Dt.combineFeatures=function(){return Mt.events.combineFeatures({silent:!0}),Dt},Dt.uncombineFeatures=function(){return Mt.events.uncombineFeatures({silent:!0}),Dt},Dt.setFeatureProperty=function(Ut,Tr,Mr){return Mt.store.setFeatureProperty(Ut,Tr,Mr),Dt},Dt})(De,ne),De.api=ne;var mt=ut(De);return ne.onAdd=mt.onAdd,ne.onRemove=mt.onRemove,ne.types=I,ne.options=U,ne};function Zl(U){Ac(U,this)}return Zl.modes=xs,Zl.constants=X,Zl.lib=Wl,Zl}))})(S1)),S1.exports}var rhe=the();const eN=rl(rhe);function nhe(){const e=Zu(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const ihe=e=>{const t=R.useRef(null),r=fb({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=R.useRef(!1),[i,s]=R.useState(!1),[u,a]=R.useState(),p=nhe(),d=R.useCallback(g=>{console.log("MlFeatureEditor mode change to "+g.mode),typeof e.onFinish=="function"&&g.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return R.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new eN({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},eN.modes),userProperties:!0,styles:p}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",d,r.componentId),s(!0))},[r.map,e,n,d]),R.useEffect(()=>{if(!r.map||!i||!t.current)return;const g=_=>{const C=_?.features||[];a(C),e.onChange&&e.onChange(C)};return r.map.on("draw.create",g,r.componentId),r.map.on("draw.update",g,r.componentId),r.map.on("draw.delete",g,r.componentId),()=>{r.map&&(r.map.map.off("draw.create",g),r.map.map.off("draw.update",g),r.map.map.off("draw.delete",g))}},[i,r.map,e.onChange]),R.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),R.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:u,drawToolsReady:i,draw:t.current}},E1=e=>(ihe({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),Ue.jsx(Ue.Fragment,{}));E1.__docgenInfo={description:"",methods:[],displayName:"MlFeatureEditor",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`},geojson:{required:!1,tsType:{name:"Feature"},description:"Input GeoJson data at initialization"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(para: Feature[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Feature"}],raw:"Feature[]"},name:"para"}],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`},onFinish:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`},mode:{required:!1,tsType:{name:"MapboxDraw.Modes"},description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`}}};const tN=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function ahe(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function ohe(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function l3(e){const t=fb({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=R.useRef(""),n=R.useRef(""),i=R.useRef(""),[s,u]=R.useState(),a=R.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),p=R.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...ahe(e),id:a.current},ohe(e,t),t.componentId)}catch(_){console.error("Failed to add layer:",_)}u(()=>t.map?.map.getLayer(a.current));const d=()=>{t.map?.map.getLayer(a.current)||p()};t.map.on("styledata",d,t.componentId);const g=(_,C,{source_id:S})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===S&&p()};t.map.wrapper.on("addsource",g,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return R.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(tN.indexOf(e.options.type)===-1||tN.indexOf(e.options.type)!==-1&&e.options.type===r.current)||p())},[t.map,t.mapIsReady,e,p]),R.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),R.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let d;const g=JSON.stringify(e.options.layout);if(e.options.layout&&g!==i.current){const C=JSON.parse(i.current);for(d in e.options.layout)e.options.layout?.[d]&&e.options.layout[d]!==C[d]&&t.map.map.setLayoutProperty(a.current,d,e.options.layout[d]);i.current=g}const _=JSON.stringify(e.options.paint);if(_!==n.current){const C=JSON.parse(n.current);for(d in e.options.paint)e.options.paint?.[d]&&e.options.paint[d]!==C[d]&&t.map.map.setPaintProperty(a.current,d,e.options.paint[d]);n.current=_}},[e.options,t.map]),R.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),R.useEffect(()=>()=>{t.cleanup()},[]),R.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const d=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&p()};t.map.on("sourcedataloading",d);const g=(_,C,{source_id:S})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===S&&p()};return t.map.wrapper.on("addsource",g),()=>{t?.map&&(t.map.off("sourcedataloading",d),t.map.wrapper.off("addsource",g))}},[t.map,e.options?.source]),R.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onClick;return t.map?.on("click",a.current,d),()=>{d&&t?.map&&t.map?.off("click",a.current,d)}},[t.map,e.onClick]),R.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onHover;return t.map?.on("mousemove",a.current,d),()=>{d&&t?.map&&t.map?.off("mousemove",a.current,d)}},[t.map,e.onHover]),R.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onLeave;return t.map?.on("mouseleave",a.current,d),()=>{d&&t?.map&&t.map?.off("mouseleave",a.current,d)}},[t.map,e.onLeave]),{map:t.map,layer:s,layerId:a.current,componentId:t.componentId,mapHook:t}}l3.defaultProps={};const she=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},rN={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},TV=e=>e?.type==="Feature"?rN?.[e?.geometry?.type]?rN[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?TV(e.features[0]):"circle":"fill";function lhe(e){const t=fb({mapId:e.mapId}),[r,n]=R.useState(),i=R.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),s=R.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,p]of Object.entries(t.map.style._layers))p.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),u=R.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&s(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,s]);return R.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),R.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,u())},[t.map,e,u]),R.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||u()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,u]),R.useEffect(()=>()=>{s()},[s]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const l0=e=>{const t=e.type||TV(e.geojson),r=R.useRef(e.layerId||"MlGeoJsonLayer-"+F0()),n=`label-${r.current}`;return R.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+F0()},[e.layerId]),lhe({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),l3({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||she(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),l3({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),Ue.jsx(Ue.Fragment,{})};l0.__docgenInfo={description:`Adds source and layer to display GeoJSON data on the map.

@component`,methods:[],displayName:"MlGeoJsonLayer",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`},layerId:{required:!1,tsType:{name:"string"},description:"Id of the new layer and source that are added to the MapLibre instance"},geojson:{required:!1,tsType:{name:"union",raw:"Feature | FeatureCollection | undefined",elements:[{name:"Feature"},{name:"FeatureCollection"},{name:"undefined"}]},description:"GeoJSON data that is supposed to be rendered by this component."},type:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['type']",raw:"LayerSpecification['type']"},{name:"RasterLayerSpecification['type']",raw:"RasterLayerSpecification['type']"}],raw:"Exclude<LayerSpecification['type'], RasterLayerSpecification['type']>"},description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`},paint:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['paint']",raw:"LayerSpecification['paint']"},{name:"RasterLayerSpecification['paint']",raw:"RasterLayerSpecification['paint']"}],raw:"Exclude<LayerSpecification['paint'], RasterLayerSpecification['paint']>"},description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`},layout:{required:!1,tsType:{name:"LayerSpecification['layout']",raw:"LayerSpecification['layout']"},description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`},options:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Javascript object that is spread into the addLayer commands first parameter."},defaultPaintOverrides:{required:!1,tsType:{name:"signature",type:"object",raw:`{
	circle?: CircleLayerSpecification['paint'];
	fill?: FillLayerSpecification['paint'];
	line?: LineLayerSpecification['paint'];
}`,signature:{properties:[{key:"circle",value:{name:"CircleLayerSpecification['paint']",raw:"CircleLayerSpecification['paint']",required:!1}},{key:"fill",value:{name:"FillLayerSpecification['paint']",raw:"FillLayerSpecification['paint']",required:!1}},{key:"line",value:{name:"LineLayerSpecification['paint']",raw:"LineLayerSpecification['paint']",required:!1}}]}},description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.'},labelProp:{required:!1,tsType:{name:"string"},description:"Property name in the GeoJSON object to be used as a label."},labelOptions:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Label configuration options."},onHover:{required:!1,tsType:{name:"useLayerProps['onHover']",raw:"useLayerProps['onHover']"},description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered."},onClick:{required:!1,tsType:{name:"useLayerProps['onClick']",raw:"useLayerProps['onClick']"},description:"Click event handler that is executed whenever a geometry rendered by this component is clicked."},onLeave:{required:!1,tsType:{name:"useLayerProps['onLeave']",raw:"useLayerProps['onLeave']"},description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`}}};Qt(pb)({marginTop:"15px"});const PV=Si(Ue.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),uhe=Si(Ue.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));Qp(PM)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Qp(mb)({minWidth:"30px"});Qp(Uo)({marginRight:"0px",padding:"0px"});Qp(mU)({padding:0,marginRight:"5px"});Qp(Kee)(({open:e})=>({display:e?"block":"none"}));Qp(pb)({marginLeft:"50px"});var su={},Km={},pS,nN;function IV(){if(nN)return pS;nN=1;var e=typeof vd=="object"&&vd&&vd.Object===Object&&vd;return pS=e,pS}var mS,iN;function Gf(){if(iN)return mS;iN=1;var e=IV(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return mS=r,mS}var gS,aN;function uy(){if(aN)return gS;aN=1;var e=Gf(),t=e.Symbol;return gS=t,gS}var yS,oN;function che(){if(oN)return yS;oN=1;var e=uy(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function s(u){var a=r.call(u,i),p=u[i];try{u[i]=void 0;var d=!0}catch{}var g=n.call(u);return d&&(a?u[i]=p:delete u[i]),g}return yS=s,yS}var vS,sN;function fhe(){if(sN)return vS;sN=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return vS=r,vS}var bS,lN;function nm(){if(lN)return bS;lN=1;var e=uy(),t=che(),r=fhe(),n="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function u(a){return a==null?a===void 0?i:n:s&&s in Object(a)?t(a):r(a)}return bS=u,bS}var _S,uN;function Xu(){if(uN)return _S;uN=1;var e=Array.isArray;return _S=e,_S}var xS,cN;function Hf(){if(cN)return xS;cN=1;function e(t){return t!=null&&typeof t=="object"}return xS=e,xS}var wS,fN;function hhe(){if(fN)return wS;fN=1;var e=nm(),t=Xu(),r=Hf(),n="[object String]";function i(s){return typeof s=="string"||!t(s)&&r(s)&&e(s)==n}return wS=i,wS}var SS,hN;function dhe(){if(hN)return SS;hN=1;function e(t){return function(r,n,i){for(var s=-1,u=Object(r),a=i(r),p=a.length;p--;){var d=a[t?p:++s];if(n(u[d],d,u)===!1)break}return r}}return SS=e,SS}var ES,dN;function MV(){if(dN)return ES;dN=1;var e=dhe(),t=e();return ES=t,ES}var CS,pN;function phe(){if(pN)return CS;pN=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return CS=e,CS}var AS,mN;function mhe(){if(mN)return AS;mN=1;var e=nm(),t=Hf(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return AS=n,AS}var TS,gN;function N2(){if(gN)return TS;gN=1;var e=mhe(),t=Hf(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(u){return t(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return TS=s,TS}var qv={exports:{}},PS,yN;function ghe(){if(yN)return PS;yN=1;function e(){return!1}return PS=e,PS}qv.exports;var vN;function B2(){return vN||(vN=1,(function(e,t){var r=Gf(),n=ghe(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,d=p||n;e.exports=d})(qv,qv.exports)),qv.exports}var IS,bN;function cy(){if(bN)return IS;bN=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return IS=r,IS}var MS,_N;function $M(){if(_N)return MS;_N=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return MS=t,MS}var OS,xN;function yhe(){if(xN)return OS;xN=1;var e=nm(),t=$M(),r=Hf(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",u="[object Date]",a="[object Error]",p="[object Function]",d="[object Map]",g="[object Number]",_="[object Object]",C="[object RegExp]",S="[object Set]",I="[object String]",O="[object WeakMap]",P="[object ArrayBuffer]",k="[object DataView]",F="[object Float32Array]",B="[object Float64Array]",N="[object Int8Array]",G="[object Int16Array]",$="[object Int32Array]",X="[object Uint8Array]",ee="[object Uint8ClampedArray]",J="[object Uint16Array]",le="[object Uint32Array]",Z={};Z[F]=Z[B]=Z[N]=Z[G]=Z[$]=Z[X]=Z[ee]=Z[J]=Z[le]=!0,Z[n]=Z[i]=Z[P]=Z[s]=Z[k]=Z[u]=Z[a]=Z[p]=Z[d]=Z[g]=Z[_]=Z[C]=Z[S]=Z[I]=Z[O]=!1;function H(oe){return r(oe)&&t(oe.length)&&!!Z[e(oe)]}return OS=H,OS}var RS,wN;function qM(){if(wN)return RS;wN=1;function e(t){return function(r){return t(r)}}return RS=e,RS}var Uv={exports:{}};Uv.exports;var SN;function UM(){return SN||(SN=1,(function(e,t){var r=IV(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,u=s&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(Uv,Uv.exports)),Uv.exports}var LS,EN;function VM(){if(EN)return LS;EN=1;var e=yhe(),t=qM(),r=UM(),n=r&&r.isTypedArray,i=n?t(n):e;return LS=i,LS}var DS,CN;function OV(){if(CN)return DS;CN=1;var e=phe(),t=N2(),r=Xu(),n=B2(),i=cy(),s=VM(),u=Object.prototype,a=u.hasOwnProperty;function p(d,g){var _=r(d),C=!_&&t(d),S=!_&&!C&&n(d),I=!_&&!C&&!S&&s(d),O=_||C||S||I,P=O?e(d.length,String):[],k=P.length;for(var F in d)(g||a.call(d,F))&&!(O&&(F=="length"||S&&(F=="offset"||F=="parent")||I&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||i(F,k)))&&P.push(F);return P}return DS=p,DS}var kS,AN;function GM(){if(AN)return kS;AN=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return kS=t,kS}var FS,TN;function RV(){if(TN)return FS;TN=1;function e(t,r){return function(n){return t(r(n))}}return FS=e,FS}var NS,PN;function vhe(){if(PN)return NS;PN=1;var e=RV(),t=e(Object.keys,Object);return NS=t,NS}var BS,IN;function bhe(){if(IN)return BS;IN=1;var e=GM(),t=vhe(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!e(s))return t(s);var u=[];for(var a in Object(s))n.call(s,a)&&a!="constructor"&&u.push(a);return u}return BS=i,BS}var jS,MN;function Wf(){if(MN)return jS;MN=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return jS=e,jS}var zS,ON;function HM(){if(ON)return zS;ON=1;var e=nm(),t=Wf(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function u(a){if(!t(a))return!1;var p=e(a);return p==n||p==i||p==r||p==s}return zS=u,zS}var $S,RN;function fy(){if(RN)return $S;RN=1;var e=HM(),t=$M();function r(n){return n!=null&&t(n.length)&&!e(n)}return $S=r,$S}var qS,LN;function yb(){if(LN)return qS;LN=1;var e=OV(),t=bhe(),r=fy();function n(i){return r(i)?e(i):t(i)}return qS=n,qS}var US,DN;function LV(){if(DN)return US;DN=1;var e=MV(),t=yb();function r(n,i){return n&&e(n,i,t)}return US=r,US}var VS,kN;function j2(){if(kN)return VS;kN=1;function e(t){return t}return VS=e,VS}var GS,FN;function _he(){if(FN)return GS;FN=1;var e=j2();function t(r){return typeof r=="function"?r:e}return GS=t,GS}var HS,NN;function WM(){if(NN)return HS;NN=1;var e=LV(),t=_he();function r(n,i){return n&&e(n,t(i))}return HS=r,HS}var WS,BN;function ZM(){if(BN)return WS;BN=1;var e=RV(),t=e(Object.getPrototypeOf,Object);return WS=t,WS}var ZS,jN;function DV(){if(jN)return ZS;jN=1;var e=nm(),t=ZM(),r=Hf(),n="[object Object]",i=Function.prototype,s=Object.prototype,u=i.toString,a=s.hasOwnProperty,p=u.call(Object);function d(g){if(!r(g)||e(g)!=n)return!1;var _=t(g);if(_===null)return!0;var C=a.call(_,"constructor")&&_.constructor;return typeof C=="function"&&C instanceof C&&u.call(C)==p}return ZS=d,ZS}var XS,zN;function XM(){if(zN)return XS;zN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=r(t[n],n,t);return s}return XS=e,XS}var KS,$N;function xhe(){if($N)return KS;$N=1;function e(){this.__data__=[],this.size=0}return KS=e,KS}var YS,qN;function hy(){if(qN)return YS;qN=1;function e(t,r){return t===r||t!==t&&r!==r}return YS=e,YS}var JS,UN;function z2(){if(UN)return JS;UN=1;var e=hy();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return JS=t,JS}var QS,VN;function whe(){if(VN)return QS;VN=1;var e=z2(),t=Array.prototype,r=t.splice;function n(i){var s=this.__data__,u=e(s,i);if(u<0)return!1;var a=s.length-1;return u==a?s.pop():r.call(s,u,1),--this.size,!0}return QS=n,QS}var eE,GN;function She(){if(GN)return eE;GN=1;var e=z2();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return eE=t,eE}var tE,HN;function Ehe(){if(HN)return tE;HN=1;var e=z2();function t(r){return e(this.__data__,r)>-1}return tE=t,tE}var rE,WN;function Che(){if(WN)return rE;WN=1;var e=z2();function t(r,n){var i=this.__data__,s=e(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return rE=t,rE}var nE,ZN;function $2(){if(ZN)return nE;ZN=1;var e=xhe(),t=whe(),r=She(),n=Ehe(),i=Che();function s(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,nE=s,nE}var iE,XN;function Ahe(){if(XN)return iE;XN=1;var e=$2();function t(){this.__data__=new e,this.size=0}return iE=t,iE}var aE,KN;function The(){if(KN)return aE;KN=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return aE=e,aE}var oE,YN;function Phe(){if(YN)return oE;YN=1;function e(t){return this.__data__.get(t)}return oE=e,oE}var sE,JN;function Ihe(){if(JN)return sE;JN=1;function e(t){return this.__data__.has(t)}return sE=e,sE}var lE,QN;function Mhe(){if(QN)return lE;QN=1;var e=Gf(),t=e["__core-js_shared__"];return lE=t,lE}var uE,e6;function Ohe(){if(e6)return uE;e6=1;var e=Mhe(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return uE=r,uE}var cE,t6;function kV(){if(t6)return cE;t6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return cE=r,cE}var fE,r6;function Rhe(){if(r6)return fE;r6=1;var e=HM(),t=Ohe(),r=Wf(),n=kV(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,a=Object.prototype,p=u.toString,d=a.hasOwnProperty,g=RegExp("^"+p.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _(C){if(!r(C)||t(C))return!1;var S=e(C)?g:s;return S.test(n(C))}return fE=_,fE}var hE,n6;function Lhe(){if(n6)return hE;n6=1;function e(t,r){return t?.[r]}return hE=e,hE}var dE,i6;function im(){if(i6)return dE;i6=1;var e=Rhe(),t=Lhe();function r(n,i){var s=t(n,i);return e(s)?s:void 0}return dE=r,dE}var pE,a6;function KM(){if(a6)return pE;a6=1;var e=im(),t=Gf(),r=e(t,"Map");return pE=r,pE}var mE,o6;function q2(){if(o6)return mE;o6=1;var e=im(),t=e(Object,"create");return mE=t,mE}var gE,s6;function Dhe(){if(s6)return gE;s6=1;var e=q2();function t(){this.__data__=e?e(null):{},this.size=0}return gE=t,gE}var yE,l6;function khe(){if(l6)return yE;l6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return yE=e,yE}var vE,u6;function Fhe(){if(u6)return vE;u6=1;var e=q2(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var u=this.__data__;if(e){var a=u[s];return a===t?void 0:a}return n.call(u,s)?u[s]:void 0}return vE=i,vE}var bE,c6;function Nhe(){if(c6)return bE;c6=1;var e=q2(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var s=this.__data__;return e?s[i]!==void 0:r.call(s,i)}return bE=n,bE}var _E,f6;function Bhe(){if(f6)return _E;f6=1;var e=q2(),t="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=e&&i===void 0?t:i,this}return _E=r,_E}var xE,h6;function jhe(){if(h6)return xE;h6=1;var e=Dhe(),t=khe(),r=Fhe(),n=Nhe(),i=Bhe();function s(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,xE=s,xE}var wE,d6;function zhe(){if(d6)return wE;d6=1;var e=jhe(),t=$2(),r=KM();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return wE=n,wE}var SE,p6;function $he(){if(p6)return SE;p6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return SE=e,SE}var EE,m6;function U2(){if(m6)return EE;m6=1;var e=$he();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return EE=t,EE}var CE,g6;function qhe(){if(g6)return CE;g6=1;var e=U2();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return CE=t,CE}var AE,y6;function Uhe(){if(y6)return AE;y6=1;var e=U2();function t(r){return e(this,r).get(r)}return AE=t,AE}var TE,v6;function Vhe(){if(v6)return TE;v6=1;var e=U2();function t(r){return e(this,r).has(r)}return TE=t,TE}var PE,b6;function Ghe(){if(b6)return PE;b6=1;var e=U2();function t(r,n){var i=e(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return PE=t,PE}var IE,_6;function YM(){if(_6)return IE;_6=1;var e=zhe(),t=qhe(),r=Uhe(),n=Vhe(),i=Ghe();function s(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,IE=s,IE}var ME,x6;function Hhe(){if(x6)return ME;x6=1;var e=$2(),t=KM(),r=YM(),n=200;function i(s,u){var a=this.__data__;if(a instanceof e){var p=a.__data__;if(!t||p.length<n-1)return p.push([s,u]),this.size=++a.size,this;a=this.__data__=new r(p)}return a.set(s,u),this.size=a.size,this}return ME=i,ME}var OE,w6;function V2(){if(w6)return OE;w6=1;var e=$2(),t=Ahe(),r=The(),n=Phe(),i=Ihe(),s=Hhe();function u(a){var p=this.__data__=new e(a);this.size=p.size}return u.prototype.clear=t,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=s,OE=u,OE}var RE,S6;function Whe(){if(S6)return RE;S6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return RE=t,RE}var LE,E6;function Zhe(){if(E6)return LE;E6=1;function e(t){return this.__data__.has(t)}return LE=e,LE}var DE,C6;function Xhe(){if(C6)return DE;C6=1;var e=YM(),t=Whe(),r=Zhe();function n(i){var s=-1,u=i==null?0:i.length;for(this.__data__=new e;++s<u;)this.add(i[s])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,DE=n,DE}var kE,A6;function Khe(){if(A6)return kE;A6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return kE=e,kE}var FE,T6;function Yhe(){if(T6)return FE;T6=1;function e(t,r){return t.has(r)}return FE=e,FE}var NE,P6;function FV(){if(P6)return NE;P6=1;var e=Xhe(),t=Khe(),r=Yhe(),n=1,i=2;function s(u,a,p,d,g,_){var C=p&n,S=u.length,I=a.length;if(S!=I&&!(C&&I>S))return!1;var O=_.get(u),P=_.get(a);if(O&&P)return O==a&&P==u;var k=-1,F=!0,B=p&i?new e:void 0;for(_.set(u,a),_.set(a,u);++k<S;){var N=u[k],G=a[k];if(d)var $=C?d(G,N,k,a,u,_):d(N,G,k,u,a,_);if($!==void 0){if($)continue;F=!1;break}if(B){if(!t(a,function(X,ee){if(!r(B,ee)&&(N===X||g(N,X,p,d,_)))return B.push(ee)})){F=!1;break}}else if(!(N===G||g(N,G,p,d,_))){F=!1;break}}return _.delete(u),_.delete(a),F}return NE=s,NE}var BE,I6;function NV(){if(I6)return BE;I6=1;var e=Gf(),t=e.Uint8Array;return BE=t,BE}var jE,M6;function Jhe(){if(M6)return jE;M6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,s){n[++r]=[s,i]}),n}return jE=e,jE}var zE,O6;function Qhe(){if(O6)return zE;O6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return zE=e,zE}var $E,R6;function ede(){if(R6)return $E;R6=1;var e=uy(),t=NV(),r=hy(),n=FV(),i=Jhe(),s=Qhe(),u=1,a=2,p="[object Boolean]",d="[object Date]",g="[object Error]",_="[object Map]",C="[object Number]",S="[object RegExp]",I="[object Set]",O="[object String]",P="[object Symbol]",k="[object ArrayBuffer]",F="[object DataView]",B=e?e.prototype:void 0,N=B?B.valueOf:void 0;function G($,X,ee,J,le,Z,H){switch(ee){case F:if($.byteLength!=X.byteLength||$.byteOffset!=X.byteOffset)return!1;$=$.buffer,X=X.buffer;case k:return!($.byteLength!=X.byteLength||!Z(new t($),new t(X)));case p:case d:case C:return r(+$,+X);case g:return $.name==X.name&&$.message==X.message;case S:case O:return $==X+"";case _:var oe=i;case I:var ue=J&u;if(oe||(oe=s),$.size!=X.size&&!ue)return!1;var ce=H.get($);if(ce)return ce==X;J|=a,H.set($,X);var be=n(oe($),oe(X),J,le,Z,H);return H.delete($),be;case P:if(N)return N.call($)==N.call(X)}return!1}return $E=G,$E}var qE,L6;function JM(){if(L6)return qE;L6=1;function e(t,r){for(var n=-1,i=r.length,s=t.length;++n<i;)t[s+n]=r[n];return t}return qE=e,qE}var UE,D6;function BV(){if(D6)return UE;D6=1;var e=JM(),t=Xu();function r(n,i,s){var u=i(n);return t(n)?u:e(u,s(n))}return UE=r,UE}var VE,k6;function tde(){if(k6)return VE;k6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,s=0,u=[];++n<i;){var a=t[n];r(a,n,t)&&(u[s++]=a)}return u}return VE=e,VE}var GE,F6;function jV(){if(F6)return GE;F6=1;function e(){return[]}return GE=e,GE}var HE,N6;function QM(){if(N6)return HE;N6=1;var e=tde(),t=jV(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(u){return u==null?[]:(u=Object(u),e(i(u),function(a){return n.call(u,a)}))}:t;return HE=s,HE}var WE,B6;function zV(){if(B6)return WE;B6=1;var e=BV(),t=QM(),r=yb();function n(i){return e(i,r,t)}return WE=n,WE}var ZE,j6;function rde(){if(j6)return ZE;j6=1;var e=zV(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,u,a,p,d,g){var _=a&t,C=e(s),S=C.length,I=e(u),O=I.length;if(S!=O&&!_)return!1;for(var P=S;P--;){var k=C[P];if(!(_?k in u:n.call(u,k)))return!1}var F=g.get(s),B=g.get(u);if(F&&B)return F==u&&B==s;var N=!0;g.set(s,u),g.set(u,s);for(var G=_;++P<S;){k=C[P];var $=s[k],X=u[k];if(p)var ee=_?p(X,$,k,u,s,g):p($,X,k,s,u,g);if(!(ee===void 0?$===X||d($,X,a,p,g):ee)){N=!1;break}G||(G=k=="constructor")}if(N&&!G){var J=s.constructor,le=u.constructor;J!=le&&"constructor"in s&&"constructor"in u&&!(typeof J=="function"&&J instanceof J&&typeof le=="function"&&le instanceof le)&&(N=!1)}return g.delete(s),g.delete(u),N}return ZE=i,ZE}var XE,z6;function nde(){if(z6)return XE;z6=1;var e=im(),t=Gf(),r=e(t,"DataView");return XE=r,XE}var KE,$6;function ide(){if($6)return KE;$6=1;var e=im(),t=Gf(),r=e(t,"Promise");return KE=r,KE}var YE,q6;function ade(){if(q6)return YE;q6=1;var e=im(),t=Gf(),r=e(t,"Set");return YE=r,YE}var JE,U6;function ode(){if(U6)return JE;U6=1;var e=im(),t=Gf(),r=e(t,"WeakMap");return JE=r,JE}var QE,V6;function G2(){if(V6)return QE;V6=1;var e=nde(),t=KM(),r=ide(),n=ade(),i=ode(),s=nm(),u=kV(),a="[object Map]",p="[object Object]",d="[object Promise]",g="[object Set]",_="[object WeakMap]",C="[object DataView]",S=u(e),I=u(t),O=u(r),P=u(n),k=u(i),F=s;return(e&&F(new e(new ArrayBuffer(1)))!=C||t&&F(new t)!=a||r&&F(r.resolve())!=d||n&&F(new n)!=g||i&&F(new i)!=_)&&(F=function(B){var N=s(B),G=N==p?B.constructor:void 0,$=G?u(G):"";if($)switch($){case S:return C;case I:return a;case O:return d;case P:return g;case k:return _}return N}),QE=F,QE}var eC,G6;function sde(){if(G6)return eC;G6=1;var e=V2(),t=FV(),r=ede(),n=rde(),i=G2(),s=Xu(),u=B2(),a=VM(),p=1,d="[object Arguments]",g="[object Array]",_="[object Object]",C=Object.prototype,S=C.hasOwnProperty;function I(O,P,k,F,B,N){var G=s(O),$=s(P),X=G?g:i(O),ee=$?g:i(P);X=X==d?_:X,ee=ee==d?_:ee;var J=X==_,le=ee==_,Z=X==ee;if(Z&&u(O)){if(!u(P))return!1;G=!0,J=!1}if(Z&&!J)return N||(N=new e),G||a(O)?t(O,P,k,F,B,N):r(O,P,X,k,F,B,N);if(!(k&p)){var H=J&&S.call(O,"__wrapped__"),oe=le&&S.call(P,"__wrapped__");if(H||oe){var ue=H?O.value():O,ce=oe?P.value():P;return N||(N=new e),B(ue,ce,k,F,N)}}return Z?(N||(N=new e),n(O,P,k,F,B,N)):!1}return eC=I,eC}var tC,H6;function eO(){if(H6)return tC;H6=1;var e=sde(),t=Hf();function r(n,i,s,u,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,s,u,r,a)}return tC=r,tC}var rC,W6;function lde(){if(W6)return rC;W6=1;var e=V2(),t=eO(),r=1,n=2;function i(s,u,a,p){var d=a.length,g=d,_=!p;if(s==null)return!g;for(s=Object(s);d--;){var C=a[d];if(_&&C[2]?C[1]!==s[C[0]]:!(C[0]in s))return!1}for(;++d<g;){C=a[d];var S=C[0],I=s[S],O=C[1];if(_&&C[2]){if(I===void 0&&!(S in s))return!1}else{var P=new e;if(p)var k=p(I,O,S,s,u,P);if(!(k===void 0?t(O,I,r|n,p,P):k))return!1}}return!0}return rC=i,rC}var nC,Z6;function $V(){if(Z6)return nC;Z6=1;var e=Wf();function t(r){return r===r&&!e(r)}return nC=t,nC}var iC,X6;function ude(){if(X6)return iC;X6=1;var e=$V(),t=yb();function r(n){for(var i=t(n),s=i.length;s--;){var u=i[s],a=n[u];i[s]=[u,a,e(a)]}return i}return iC=r,iC}var aC,K6;function qV(){if(K6)return aC;K6=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return aC=e,aC}var oC,Y6;function cde(){if(Y6)return oC;Y6=1;var e=lde(),t=ude(),r=qV();function n(i){var s=t(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(u){return u===i||e(u,i,s)}}return oC=n,oC}var sC,J6;function H2(){if(J6)return sC;J6=1;var e=nm(),t=Hf(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return sC=n,sC}var lC,Q6;function tO(){if(Q6)return lC;Q6=1;var e=Xu(),t=H2(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,u){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||t(s)?!0:n.test(s)||!r.test(s)||u!=null&&s in Object(u)}return lC=i,lC}var uC,e8;function UV(){if(e8)return uC;e8=1;var e=YM(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var u=arguments,a=i?i.apply(this,u):u[0],p=s.cache;if(p.has(a))return p.get(a);var d=n.apply(this,u);return s.cache=p.set(a,d)||p,d};return s.cache=new(r.Cache||e),s}return r.Cache=e,uC=r,uC}var cC,t8;function fde(){if(t8)return cC;t8=1;var e=UV(),t=500;function r(n){var i=e(n,function(u){return s.size===t&&s.clear(),u}),s=i.cache;return i}return cC=r,cC}var fC,r8;function hde(){if(r8)return fC;r8=1;var e=fde(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(u,a,p,d){s.push(p?d.replace(r,"$1"):a||u)}),s});return fC=n,fC}var hC,n8;function dde(){if(n8)return hC;n8=1;var e=uy(),t=XM(),r=Xu(),n=H2(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function u(a){if(typeof a=="string")return a;if(r(a))return t(a,u)+"";if(n(a))return s?s.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}return hC=u,hC}var dC,i8;function pde(){if(i8)return dC;i8=1;var e=dde();function t(r){return r==null?"":e(r)}return dC=t,dC}var pC,a8;function vb(){if(a8)return pC;a8=1;var e=Xu(),t=tO(),r=hde(),n=pde();function i(s,u){return e(s)?s:t(s,u)?[s]:r(n(s))}return pC=i,pC}var mC,o8;function dy(){if(o8)return mC;o8=1;var e=H2();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return mC=t,mC}var gC,s8;function W2(){if(s8)return gC;s8=1;var e=vb(),t=dy();function r(n,i){i=e(i,n);for(var s=0,u=i.length;n!=null&&s<u;)n=n[t(i[s++])];return s&&s==u?n:void 0}return gC=r,gC}var yC,l8;function rO(){if(l8)return yC;l8=1;var e=W2();function t(r,n,i){var s=r==null?void 0:e(r,n);return s===void 0?i:s}return yC=t,yC}var vC,u8;function mde(){if(u8)return vC;u8=1;function e(t,r){return t!=null&&r in Object(t)}return vC=e,vC}var bC,c8;function gde(){if(c8)return bC;c8=1;var e=vb(),t=N2(),r=Xu(),n=cy(),i=$M(),s=dy();function u(a,p,d){p=e(p,a);for(var g=-1,_=p.length,C=!1;++g<_;){var S=s(p[g]);if(!(C=a!=null&&d(a,S)))break;a=a[S]}return C||++g!=_?C:(_=a==null?0:a.length,!!_&&i(_)&&n(S,_)&&(r(a)||t(a)))}return bC=u,bC}var _C,f8;function VV(){if(f8)return _C;f8=1;var e=mde(),t=gde();function r(n,i){return n!=null&&t(n,i,e)}return _C=r,_C}var xC,h8;function yde(){if(h8)return xC;h8=1;var e=eO(),t=rO(),r=VV(),n=tO(),i=$V(),s=qV(),u=dy(),a=1,p=2;function d(g,_){return n(g)&&i(_)?s(u(g),_):function(C){var S=t(C,g);return S===void 0&&S===_?r(C,g):e(_,S,a|p)}}return xC=d,xC}var wC,d8;function vde(){if(d8)return wC;d8=1;function e(t){return function(r){return r?.[t]}}return wC=e,wC}var SC,p8;function bde(){if(p8)return SC;p8=1;var e=W2();function t(r){return function(n){return e(n,r)}}return SC=t,SC}var EC,m8;function _de(){if(m8)return EC;m8=1;var e=vde(),t=bde(),r=tO(),n=dy();function i(s){return r(s)?e(n(s)):t(s)}return EC=i,EC}var CC,g8;function xde(){if(g8)return CC;g8=1;var e=cde(),t=yde(),r=j2(),n=Xu(),i=_de();function s(u){return typeof u=="function"?u:u==null?r:typeof u=="object"?n(u)?t(u[0],u[1]):e(u):i(u)}return CC=s,CC}var AC,y8;function wde(){if(y8)return AC;y8=1;var e=fy();function t(r,n){return function(i,s){if(i==null)return i;if(!e(i))return r(i,s);for(var u=i.length,a=n?u:-1,p=Object(i);(n?a--:++a<u)&&s(p[a],a,p)!==!1;);return i}}return AC=t,AC}var TC,v8;function Sde(){if(v8)return TC;v8=1;var e=LV(),t=wde(),r=t(e);return TC=r,TC}var PC,b8;function Ede(){if(b8)return PC;b8=1;var e=Sde(),t=fy();function r(n,i){var s=-1,u=t(n)?Array(n.length):[];return e(n,function(a,p,d){u[++s]=i(a,p,d)}),u}return PC=r,PC}var IC,_8;function Cde(){if(_8)return IC;_8=1;var e=XM(),t=xde(),r=Ede(),n=Xu();function i(s,u){var a=n(s)?e:r;return a(s,t(u,3))}return IC=i,IC}var x8;function Ade(){if(x8)return Km;x8=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.flattenNames=void 0;var e=hhe(),t=p(e),r=WM(),n=p(r),i=DV(),s=p(i),u=Cde(),a=p(u);function p(g){return g&&g.__esModule?g:{default:g}}var d=Km.flattenNames=function g(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],C=[];return(0,a.default)(_,function(S){Array.isArray(S)?g(S).map(function(I){return C.push(I)}):(0,s.default)(S)?(0,n.default)(S,function(I,O){I===!0&&C.push(O),C.push(O+"-"+I)}):(0,t.default)(S)&&C.push(S)}),C};return Km.default=d,Km}var Ym={},MC,w8;function Tde(){if(w8)return MC;w8=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return MC=e,MC}var OC,S8;function GV(){if(S8)return OC;S8=1;var e=im(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return OC=t,OC}var RC,E8;function nO(){if(E8)return RC;E8=1;var e=GV();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return RC=t,RC}var LC,C8;function iO(){if(C8)return LC;C8=1;var e=nO(),t=hy(),r=Object.prototype,n=r.hasOwnProperty;function i(s,u,a){var p=s[u];(!(n.call(s,u)&&t(p,a))||a===void 0&&!(u in s))&&e(s,u,a)}return LC=i,LC}var DC,A8;function bb(){if(A8)return DC;A8=1;var e=iO(),t=nO();function r(n,i,s,u){var a=!s;s||(s={});for(var p=-1,d=i.length;++p<d;){var g=i[p],_=u?u(s[g],n[g],g,s,n):void 0;_===void 0&&(_=n[g]),a?t(s,g,_):e(s,g,_)}return s}return DC=r,DC}var kC,T8;function Pde(){if(T8)return kC;T8=1;var e=bb(),t=yb();function r(n,i){return n&&e(i,t(i),n)}return kC=r,kC}var FC,P8;function Ide(){if(P8)return FC;P8=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return FC=e,FC}var NC,I8;function Mde(){if(I8)return NC;I8=1;var e=Wf(),t=GM(),r=Ide(),n=Object.prototype,i=n.hasOwnProperty;function s(u){if(!e(u))return r(u);var a=t(u),p=[];for(var d in u)d=="constructor"&&(a||!i.call(u,d))||p.push(d);return p}return NC=s,NC}var BC,M8;function py(){if(M8)return BC;M8=1;var e=OV(),t=Mde(),r=fy();function n(i){return r(i)?e(i,!0):t(i)}return BC=n,BC}var jC,O8;function Ode(){if(O8)return jC;O8=1;var e=bb(),t=py();function r(n,i){return n&&e(i,t(i),n)}return jC=r,jC}var Vv={exports:{}};Vv.exports;var R8;function HV(){return R8||(R8=1,(function(e,t){var r=Gf(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,u=s?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(d,g){if(g)return d.slice();var _=d.length,C=a?a(_):new d.constructor(_);return d.copy(C),C}e.exports=p})(Vv,Vv.exports)),Vv.exports}var zC,L8;function WV(){if(L8)return zC;L8=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return zC=e,zC}var $C,D8;function Rde(){if(D8)return $C;D8=1;var e=bb(),t=QM();function r(n,i){return e(n,t(n),i)}return $C=r,$C}var qC,k8;function ZV(){if(k8)return qC;k8=1;var e=JM(),t=ZM(),r=QM(),n=jV(),i=Object.getOwnPropertySymbols,s=i?function(u){for(var a=[];u;)e(a,r(u)),u=t(u);return a}:n;return qC=s,qC}var UC,F8;function Lde(){if(F8)return UC;F8=1;var e=bb(),t=ZV();function r(n,i){return e(n,t(n),i)}return UC=r,UC}var VC,N8;function Dde(){if(N8)return VC;N8=1;var e=BV(),t=ZV(),r=py();function n(i){return e(i,r,t)}return VC=n,VC}var GC,B8;function kde(){if(B8)return GC;B8=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return GC=r,GC}var HC,j8;function aO(){if(j8)return HC;j8=1;var e=NV();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return HC=t,HC}var WC,z8;function Fde(){if(z8)return WC;z8=1;var e=aO();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return WC=t,WC}var ZC,$8;function Nde(){if($8)return ZC;$8=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return ZC=t,ZC}var XC,q8;function Bde(){if(q8)return XC;q8=1;var e=uy(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return XC=n,XC}var KC,U8;function XV(){if(U8)return KC;U8=1;var e=aO();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return KC=t,KC}var YC,V8;function jde(){if(V8)return YC;V8=1;var e=aO(),t=Fde(),r=Nde(),n=Bde(),i=XV(),s="[object Boolean]",u="[object Date]",a="[object Map]",p="[object Number]",d="[object RegExp]",g="[object Set]",_="[object String]",C="[object Symbol]",S="[object ArrayBuffer]",I="[object DataView]",O="[object Float32Array]",P="[object Float64Array]",k="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",N="[object Uint8Array]",G="[object Uint8ClampedArray]",$="[object Uint16Array]",X="[object Uint32Array]";function ee(J,le,Z){var H=J.constructor;switch(le){case S:return e(J);case s:case u:return new H(+J);case I:return t(J,Z);case O:case P:case k:case F:case B:case N:case G:case $:case X:return i(J,Z);case a:return new H;case p:case _:return new H(J);case d:return r(J);case g:return new H;case C:return n(J)}}return YC=ee,YC}var JC,G8;function zde(){if(G8)return JC;G8=1;var e=Wf(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}})();return JC=r,JC}var QC,H8;function KV(){if(H8)return QC;H8=1;var e=zde(),t=ZM(),r=GM();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return QC=n,QC}var eA,W8;function $de(){if(W8)return eA;W8=1;var e=G2(),t=Hf(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return eA=n,eA}var tA,Z8;function qde(){if(Z8)return tA;Z8=1;var e=$de(),t=qM(),r=UM(),n=r&&r.isMap,i=n?t(n):e;return tA=i,tA}var rA,X8;function Ude(){if(X8)return rA;X8=1;var e=G2(),t=Hf(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return rA=n,rA}var nA,K8;function Vde(){if(K8)return nA;K8=1;var e=Ude(),t=qM(),r=UM(),n=r&&r.isSet,i=n?t(n):e;return nA=i,nA}var iA,Y8;function Gde(){if(Y8)return iA;Y8=1;var e=V2(),t=Tde(),r=iO(),n=Pde(),i=Ode(),s=HV(),u=WV(),a=Rde(),p=Lde(),d=zV(),g=Dde(),_=G2(),C=kde(),S=jde(),I=KV(),O=Xu(),P=B2(),k=qde(),F=Wf(),B=Vde(),N=yb(),G=py(),$=1,X=2,ee=4,J="[object Arguments]",le="[object Array]",Z="[object Boolean]",H="[object Date]",oe="[object Error]",ue="[object Function]",ce="[object GeneratorFunction]",be="[object Map]",Te="[object Number]",ve="[object Object]",Ce="[object RegExp]",$e="[object Set]",Je="[object String]",ge="[object Symbol]",Ee="[object WeakMap]",Ie="[object ArrayBuffer]",Le="[object DataView]",Ve="[object Float32Array]",ht="[object Float64Array]",It="[object Int8Array]",xt="[object Int16Array]",rt="[object Int32Array]",zt="[object Uint8Array]",Lt="[object Uint8ClampedArray]",Ft="[object Uint16Array]",dt="[object Uint32Array]",ke={};ke[J]=ke[le]=ke[Ie]=ke[Le]=ke[Z]=ke[H]=ke[Ve]=ke[ht]=ke[It]=ke[xt]=ke[rt]=ke[be]=ke[Te]=ke[ve]=ke[Ce]=ke[$e]=ke[Je]=ke[ge]=ke[zt]=ke[Lt]=ke[Ft]=ke[dt]=!0,ke[oe]=ke[ue]=ke[Ee]=!1;function fr(sr,xr,tr,Ge,nt,ut){var Nt,Kt=xr&$,Vt=xr&X,Ke=xr&ee;if(tr&&(Nt=nt?tr(sr,Ge,nt,ut):tr(sr)),Nt!==void 0)return Nt;if(!F(sr))return sr;var me=O(sr);if(me){if(Nt=C(sr),!Kt)return u(sr,Nt)}else{var pe=_(sr),Ae=pe==ue||pe==ce;if(P(sr))return s(sr,Kt);if(pe==ve||pe==J||Ae&&!nt){if(Nt=Vt||Ae?{}:I(sr),!Kt)return Vt?p(sr,i(Nt,sr)):a(sr,n(Nt,sr))}else{if(!ke[pe])return nt?sr:{};Nt=S(sr,pe,Kt)}}ut||(ut=new e);var Be=ut.get(sr);if(Be)return Be;ut.set(sr,Nt),B(sr)?sr.forEach(function(bt){Nt.add(fr(bt,xr,tr,bt,sr,ut))}):k(sr)&&sr.forEach(function(bt,tt){Nt.set(tt,fr(bt,xr,tr,tt,sr,ut))});var Ne=Ke?Vt?g:d:Vt?G:N,Tt=me?void 0:Ne(sr);return t(Tt||sr,function(bt,tt){Tt&&(tt=bt,bt=sr[tt]),r(Nt,tt,fr(bt,xr,tr,tt,sr,ut))}),Nt}return iA=fr,iA}var aA,J8;function Hde(){if(J8)return aA;J8=1;var e=Gde(),t=1,r=4;function n(i){return e(i,t|r)}return aA=n,aA}var Q8;function Wde(){if(Q8)return Ym;Q8=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.mergeClasses=void 0;var e=WM(),t=s(e),r=Hde(),n=s(r),i=Object.assign||function(a){for(var p=1;p<arguments.length;p++){var d=arguments[p];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])}return a};function s(a){return a&&a.__esModule?a:{default:a}}var u=Ym.mergeClasses=function(p){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=p.default&&(0,n.default)(p.default)||{};return d.map(function(_){var C=p[_];return C&&(0,t.default)(C,function(S,I){g[I]||(g[I]={}),g[I]=i({},g[I],C[I])}),_}),g};return Ym.default=u,Ym}var Jm={},eB;function Zde(){if(eB)return Jm;eB=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.autoprefix=void 0;var e=WM(),t=n(e),r=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u};function n(u){return u&&u.__esModule?u:{default:u}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var p=a&&a.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(a,p){var d=p[a];return d||{extend:a}}},s=Jm.autoprefix=function(a){var p={};return(0,t.default)(a,function(d,g){var _={};(0,t.default)(d,function(C,S){var I=i[S];I?_=r({},_,I(C)):_[S]=C}),p[g]=_}),p};return Jm.default=s,Jm}var Qm={},tB;function Xde(){if(tB)return Qm;tB=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.hover=void 0;var e=Object.assign||function(p){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(p[_]=g[_])}return p},t=i2(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function s(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function u(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var a=Qm.hover=function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(_){u(C,_);function C(){var S,I,O,P;i(this,C);for(var k=arguments.length,F=Array(k),B=0;B<k;B++)F[B]=arguments[B];return P=(I=(O=s(this,(S=C.__proto__||Object.getPrototypeOf(C)).call.apply(S,[this].concat(F))),O),O.state={hover:!1},O.handleMouseOver=function(){return O.setState({hover:!0})},O.handleMouseOut=function(){return O.setState({hover:!1})},O.render=function(){return r.default.createElement(g,{onMouseOver:O.handleMouseOver,onMouseOut:O.handleMouseOut},r.default.createElement(d,e({},O.props,O.state)))},I),s(O,P)}return C})(r.default.Component)};return Qm.default=a,Qm}var eg={},rB;function Kde(){if(rB)return eg;rB=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.active=void 0;var e=Object.assign||function(p){for(var d=1;d<arguments.length;d++){var g=arguments[d];for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(p[_]=g[_])}return p},t=i2(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function s(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function u(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var a=eg.active=function(d){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(_){u(C,_);function C(){var S,I,O,P;i(this,C);for(var k=arguments.length,F=Array(k),B=0;B<k;B++)F[B]=arguments[B];return P=(I=(O=s(this,(S=C.__proto__||Object.getPrototypeOf(C)).call.apply(S,[this].concat(F))),O),O.state={active:!1},O.handleMouseDown=function(){return O.setState({active:!0})},O.handleMouseUp=function(){return O.setState({active:!1})},O.render=function(){return r.default.createElement(g,{onMouseDown:O.handleMouseDown,onMouseUp:O.handleMouseUp},r.default.createElement(d,e({},O.props,O.state)))},I),s(O,P)}return C})(r.default.Component)};return eg.default=a,eg}var N_={},nB;function Yde(){if(nB)return N_;nB=1,Object.defineProperty(N_,"__esModule",{value:!0});var e=function(r,n){var i={},s=function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=p};return r===0&&s("first-child"),r===n-1&&s("last-child"),(r===0||r%2===0)&&s("even"),Math.abs(r%2)===1&&s("odd"),s("nth-child",r),i};return N_.default=e,N_}var iB;function Jde(){if(iB)return su;iB=1,Object.defineProperty(su,"__esModule",{value:!0}),su.ReactCSS=su.loop=su.handleActive=su.handleHover=su.hover=void 0;var e=Ade(),t=C(e),r=Wde(),n=C(r),i=Zde(),s=C(i),u=Xde(),a=C(u),p=Kde(),d=C(p),g=Yde(),_=C(g);function C(I){return I&&I.__esModule?I:{default:I}}su.hover=a.default,su.handleHover=a.default,su.handleActive=d.default,su.loop=_.default;var S=su.ReactCSS=function(O){for(var P=arguments.length,k=Array(P>1?P-1:0),F=1;F<P;F++)k[F-1]=arguments[F];var B=(0,t.default)(k),N=(0,n.default)(O,B);return(0,s.default)(N)};return su.default=S,su}var oO=Jde();const ri=rl(oO);var Qde=function(t,r,n,i,s){var u=s.clientWidth,a=s.clientHeight,p=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,g=p-(s.getBoundingClientRect().left+window.pageXOffset),_=d-(s.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var C=void 0;if(_<0?C=0:_>a?C=1:C=Math.round(_*100/a)/100,r.a!==C)return{h:r.h,s:r.s,l:r.l,a:C,source:"rgb"}}else{var S=void 0;if(g<0?S=0:g>u?S=1:S=Math.round(g*100/u)/100,i!==S)return{h:r.h,s:r.s,l:r.l,a:S,source:"rgb"}}return null},oA={},epe=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=n*2,s.height=n*2;var u=s.getContext("2d");return u?(u.fillStyle=t,u.fillRect(0,0,s.width,s.height),u.fillStyle=r,u.fillRect(0,0,n,n),u.translate(n,n),u.fillRect(0,0,n,n),s.toDataURL()):null},tpe=function(t,r,n,i){var s=t+"-"+r+"-"+n+(i?"-server":"");if(oA[s])return oA[s];var u=epe(t,r,n,i);return oA[s]=u,u},aB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},my=function(t){var r=t.white,n=t.grey,i=t.size,s=t.renderers,u=t.borderRadius,a=t.boxShadow,p=t.children,d=ri({default:{grid:{borderRadius:u,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+tpe(r,n,i,s.canvas)+") center left"}}});return R.isValidElement(p)?qe.cloneElement(p,aB({},p.props,{style:aB({},p.props.style,d.grid)})):qe.createElement("div",{style:d.grid})};my.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var rpe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},npe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function ipe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oB(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ape(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sO=(function(e){ape(t,e);function t(){var r,n,i,s;ipe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return s=(n=(i=oB(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(d){var g=Qde(d,i.props.hsl,i.props.direction,i.props.a,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),oB(i,s)}return npe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,s=ri({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:rpe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return qe.createElement("div",{style:s.alpha},qe.createElement("div",{style:s.checkboard},qe.createElement(my,{renderers:this.props.renderers})),qe.createElement("div",{style:s.gradient}),qe.createElement("div",{style:s.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},qe.createElement("div",{style:s.pointer},this.props.pointer?qe.createElement(this.props.pointer,this.props):qe.createElement("div",{style:s.slider}))))}}]),t})(R.PureComponent||R.Component),ope=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function spe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function upe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fpe=1,YV=38,hpe=40,dpe=[YV,hpe],ppe=function(t){return dpe.indexOf(t)>-1},mpe=function(t){return Number(String(t).replace(/%/g,""))},gpe=1,ki=(function(e){cpe(t,e);function t(r){lpe(this,t);var n=upe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var s=mpe(i.target.value);if(!isNaN(s)&&ppe(i.keyCode)){var u=n.getArrowOffset(),a=i.keyCode===YV?s+u:s-u;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var s=Math.round(n.props.value+i.movementX);s>=0&&s<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(s),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+gpe++,n}return ope(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return spe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||fpe}},{key:"setUpdatedValue",value:function(n,i){var s=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(s,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=ri({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return qe.createElement("div",{style:i.wrap},qe.createElement("input",{id:this.inputId,style:i.input,ref:function(u){return n.input=u},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?qe.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(R.PureComponent||R.Component),ype=function(t,r,n,i){var s=i.clientWidth,u=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=a-(i.getBoundingClientRect().left+window.pageXOffset),g=p-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var _=void 0;if(g<0)_=359;else if(g>u)_=0;else{var C=-(g*100/u)+100;_=360*C/100}if(n.h!==_)return{h:_,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var S=void 0;if(d<0)S=0;else if(d>s)S=359;else{var I=d*100/s;S=360*I/100}if(n.h!==S)return{h:S,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},vpe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function bpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sB(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gy=(function(e){_pe(t,e);function t(){var r,n,i,s;bpe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return s=(n=(i=sB(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(d){var g=ype(d,i.props.direction,i.props.hsl,i.container);g&&typeof i.props.onChange=="function"&&i.props.onChange(g,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),sB(i,s)}return vpe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,s=i===void 0?"horizontal":i,u=ri({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return qe.createElement("div",{style:u.hue},qe.createElement("div",{className:"hue-"+s,style:u.container,ref:function(p){return n.container=p},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},qe.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),qe.createElement("div",{style:u.pointer},this.props.pointer?qe.createElement(this.props.pointer,this.props):qe.createElement("div",{style:u.slider}))))}}]),t})(R.PureComponent||R.Component);function xpe(){this.__data__=[],this.size=0}function _b(e,t){return e===t||e!==e&&t!==t}function Z2(e,t){for(var r=e.length;r--;)if(_b(e[r][0],t))return r;return-1}var wpe=Array.prototype,Spe=wpe.splice;function Epe(e){var t=this.__data__,r=Z2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Spe.call(t,r,1),--this.size,!0}function Cpe(e){var t=this.__data__,r=Z2(t,e);return r<0?void 0:t[r][1]}function Ape(e){return Z2(this.__data__,e)>-1}function Tpe(e,t){var r=this.__data__,n=Z2(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function zh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zh.prototype.clear=xpe;zh.prototype.delete=Epe;zh.prototype.get=Cpe;zh.prototype.has=Ape;zh.prototype.set=Tpe;function Ppe(){this.__data__=new zh,this.size=0}function Ipe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Mpe(e){return this.__data__.get(e)}function Ope(e){return this.__data__.has(e)}var JV=typeof global=="object"&&global&&global.Object===Object&&global,Rpe=typeof self=="object"&&self&&self.Object===Object&&self,af=JV||Rpe||Function("return this")(),Pd=af.Symbol,QV=Object.prototype,Lpe=QV.hasOwnProperty,Dpe=QV.toString,vv=Pd?Pd.toStringTag:void 0;function kpe(e){var t=Lpe.call(e,vv),r=e[vv];try{e[vv]=void 0;var n=!0}catch{}var i=Dpe.call(e);return n&&(t?e[vv]=r:delete e[vv]),i}var Fpe=Object.prototype,Npe=Fpe.toString;function Bpe(e){return Npe.call(e)}var jpe="[object Null]",zpe="[object Undefined]",lB=Pd?Pd.toStringTag:void 0;function am(e){return e==null?e===void 0?zpe:jpe:lB&&lB in Object(e)?kpe(e):Bpe(e)}function xc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $pe="[object AsyncFunction]",qpe="[object Function]",Upe="[object GeneratorFunction]",Vpe="[object Proxy]";function lO(e){if(!xc(e))return!1;var t=am(e);return t==qpe||t==Upe||t==$pe||t==Vpe}var sA=af["__core-js_shared__"],uB=(function(){var e=/[^.]+$/.exec(sA&&sA.keys&&sA.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Gpe(e){return!!uB&&uB in e}var Hpe=Function.prototype,Wpe=Hpe.toString;function om(e){if(e!=null){try{return Wpe.call(e)}catch{}try{return e+""}catch{}}return""}var Zpe=/[\\^$.*+?()[\]{}|]/g,Xpe=/^\[object .+?Constructor\]$/,Kpe=Function.prototype,Ype=Object.prototype,Jpe=Kpe.toString,Qpe=Ype.hasOwnProperty,eme=RegExp("^"+Jpe.call(Qpe).replace(Zpe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tme(e){if(!xc(e)||Gpe(e))return!1;var t=lO(e)?eme:Xpe;return t.test(om(e))}function rme(e,t){return e?.[t]}function sm(e,t){var r=rme(e,t);return tme(r)?r:void 0}var q0=sm(af,"Map"),U0=sm(Object,"create");function nme(){this.__data__=U0?U0(null):{},this.size=0}function ime(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ame="__lodash_hash_undefined__",ome=Object.prototype,sme=ome.hasOwnProperty;function lme(e){var t=this.__data__;if(U0){var r=t[e];return r===ame?void 0:r}return sme.call(t,e)?t[e]:void 0}var ume=Object.prototype,cme=ume.hasOwnProperty;function fme(e){var t=this.__data__;return U0?t[e]!==void 0:cme.call(t,e)}var hme="__lodash_hash_undefined__";function dme(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=U0&&t===void 0?hme:t,this}function Hp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hp.prototype.clear=nme;Hp.prototype.delete=ime;Hp.prototype.get=lme;Hp.prototype.has=fme;Hp.prototype.set=dme;function pme(){this.size=0,this.__data__={hash:new Hp,map:new(q0||zh),string:new Hp}}function mme(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function X2(e,t){var r=e.__data__;return mme(t)?r[typeof t=="string"?"string":"hash"]:r.map}function gme(e){var t=X2(this,e).delete(e);return this.size-=t?1:0,t}function yme(e){return X2(this,e).get(e)}function vme(e){return X2(this,e).has(e)}function bme(e,t){var r=X2(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function $h(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$h.prototype.clear=pme;$h.prototype.delete=gme;$h.prototype.get=yme;$h.prototype.has=vme;$h.prototype.set=bme;var _me=200;function xme(e,t){var r=this.__data__;if(r instanceof zh){var n=r.__data__;if(!q0||n.length<_me-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new $h(n)}return r.set(e,t),this.size=r.size,this}function jf(e){var t=this.__data__=new zh(e);this.size=t.size}jf.prototype.clear=Ppe;jf.prototype.delete=Ipe;jf.prototype.get=Mpe;jf.prototype.has=Ope;jf.prototype.set=xme;var Q1=(function(){try{var e=sm(Object,"defineProperty");return e({},"",{}),e}catch{}})();function uO(e,t,r){t=="__proto__"&&Q1?Q1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function u3(e,t,r){(r!==void 0&&!_b(e[t],r)||r===void 0&&!(t in e))&&uO(e,t,r)}function wme(e){return function(t,r,n){for(var i=-1,s=Object(t),u=n(t),a=u.length;a--;){var p=u[++i];if(r(s[p],p,s)===!1)break}return t}}var eG=wme(),tG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cB=tG&&typeof module=="object"&&module&&!module.nodeType&&module,Sme=cB&&cB.exports===tG,fB=Sme?af.Buffer:void 0;fB&&fB.allocUnsafe;function Eme(e,t){return e.slice()}var ex=af.Uint8Array;function Cme(e){var t=new e.constructor(e.byteLength);return new ex(t).set(new ex(e)),t}function Ame(e,t){var r=Cme(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function Tme(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var hB=Object.create,Pme=(function(){function e(){}return function(t){if(!xc(t))return{};if(hB)return hB(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function rG(e,t){return function(r){return e(t(r))}}var nG=rG(Object.getPrototypeOf,Object),Ime=Object.prototype;function cO(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ime;return e===r}function Mme(e){return typeof e.constructor=="function"&&!cO(e)?Pme(nG(e)):{}}function Id(e){return e!=null&&typeof e=="object"}var Ome="[object Arguments]";function dB(e){return Id(e)&&am(e)==Ome}var iG=Object.prototype,Rme=iG.hasOwnProperty,Lme=iG.propertyIsEnumerable,tx=dB((function(){return arguments})())?dB:function(e){return Id(e)&&Rme.call(e,"callee")&&!Lme.call(e,"callee")},Hu=Array.isArray,Dme=9007199254740991;function fO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Dme}function yy(e){return e!=null&&fO(e.length)&&!lO(e)}function kme(e){return Id(e)&&yy(e)}function Fme(){return!1}var aG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pB=aG&&typeof module=="object"&&module&&!module.nodeType&&module,Nme=pB&&pB.exports===aG,mB=Nme?af.Buffer:void 0,Bme=mB?mB.isBuffer:void 0,rx=Bme||Fme,jme="[object Object]",zme=Function.prototype,$me=Object.prototype,oG=zme.toString,qme=$me.hasOwnProperty,Ume=oG.call(Object);function Vme(e){if(!Id(e)||am(e)!=jme)return!1;var t=nG(e);if(t===null)return!0;var r=qme.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&oG.call(r)==Ume}var Gme="[object Arguments]",Hme="[object Array]",Wme="[object Boolean]",Zme="[object Date]",Xme="[object Error]",Kme="[object Function]",Yme="[object Map]",Jme="[object Number]",Qme="[object Object]",ege="[object RegExp]",tge="[object Set]",rge="[object String]",nge="[object WeakMap]",ige="[object ArrayBuffer]",age="[object DataView]",oge="[object Float32Array]",sge="[object Float64Array]",lge="[object Int8Array]",uge="[object Int16Array]",cge="[object Int32Array]",fge="[object Uint8Array]",hge="[object Uint8ClampedArray]",dge="[object Uint16Array]",pge="[object Uint32Array]",Ya={};Ya[oge]=Ya[sge]=Ya[lge]=Ya[uge]=Ya[cge]=Ya[fge]=Ya[hge]=Ya[dge]=Ya[pge]=!0;Ya[Gme]=Ya[Hme]=Ya[ige]=Ya[Wme]=Ya[age]=Ya[Zme]=Ya[Xme]=Ya[Kme]=Ya[Yme]=Ya[Jme]=Ya[Qme]=Ya[ege]=Ya[tge]=Ya[rge]=Ya[nge]=!1;function mge(e){return Id(e)&&fO(e.length)&&!!Ya[am(e)]}function gge(e){return function(t){return e(t)}}var sG=typeof exports=="object"&&exports&&!exports.nodeType&&exports,u0=sG&&typeof module=="object"&&module&&!module.nodeType&&module,yge=u0&&u0.exports===sG,lA=yge&&JV.process,gB=(function(){try{var e=u0&&u0.require&&u0.require("util").types;return e||lA&&lA.binding&&lA.binding("util")}catch{}})(),yB=gB&&gB.isTypedArray,hO=yB?gge(yB):mge;function c3(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var vge=Object.prototype,bge=vge.hasOwnProperty;function _ge(e,t,r){var n=e[t];(!(bge.call(e,t)&&_b(n,r))||r===void 0&&!(t in e))&&uO(e,t,r)}function xge(e,t,r,n){var i=!r;r||(r={});for(var s=-1,u=t.length;++s<u;){var a=t[s],p=void 0;p===void 0&&(p=e[a]),i?uO(r,a,p):_ge(r,a,p)}return r}function wge(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Sge=9007199254740991,Ege=/^(?:0|[1-9]\d*)$/;function dO(e,t){var r=typeof e;return t=t??Sge,!!t&&(r=="number"||r!="symbol"&&Ege.test(e))&&e>-1&&e%1==0&&e<t}var Cge=Object.prototype,Age=Cge.hasOwnProperty;function lG(e,t){var r=Hu(e),n=!r&&tx(e),i=!r&&!n&&rx(e),s=!r&&!n&&!i&&hO(e),u=r||n||i||s,a=u?wge(e.length,String):[],p=a.length;for(var d in e)(t||Age.call(e,d))&&!(u&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||dO(d,p)))&&a.push(d);return a}function Tge(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Pge=Object.prototype,Ige=Pge.hasOwnProperty;function Mge(e){if(!xc(e))return Tge(e);var t=cO(e),r=[];for(var n in e)n=="constructor"&&(t||!Ige.call(e,n))||r.push(n);return r}function uG(e){return yy(e)?lG(e,!0):Mge(e)}function Oge(e){return xge(e,uG(e))}function Rge(e,t,r,n,i,s,u){var a=c3(e,r),p=c3(t,r),d=u.get(p);if(d){u3(e,r,d);return}var g=s?s(a,p,r+"",e,t,u):void 0,_=g===void 0;if(_){var C=Hu(p),S=!C&&rx(p),I=!C&&!S&&hO(p);g=p,C||S||I?Hu(a)?g=a:kme(a)?g=Tme(a):S?(_=!1,g=Eme(p)):I?(_=!1,g=Ame(p)):g=[]:Vme(p)||tx(p)?(g=a,tx(a)?g=Oge(a):(!xc(a)||lO(a))&&(g=Mme(p))):_=!1}_&&(u.set(p,g),i(g,p,n,s,u),u.delete(p)),u3(e,r,g)}function cG(e,t,r,n,i){e!==t&&eG(t,function(s,u){if(i||(i=new jf),xc(s))Rge(e,t,u,r,cG,n,i);else{var a=n?n(c3(e,u),s,u+"",e,t,i):void 0;a===void 0&&(a=s),u3(e,u,a)}},uG)}function K2(e){return e}function Lge(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var vB=Math.max;function Dge(e,t,r){return t=vB(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=vB(n.length-t,0),u=Array(s);++i<s;)u[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(u),Lge(e,this,a)}}function kge(e){return function(){return e}}var Fge=Q1?function(e,t){return Q1(e,"toString",{configurable:!0,enumerable:!1,value:kge(t),writable:!0})}:K2,Nge=800,Bge=16,jge=Date.now;function zge(e){var t=0,r=0;return function(){var n=jge(),i=Bge-(n-r);if(r=n,i>0){if(++t>=Nge)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $ge=zge(Fge);function qge(e,t){return $ge(Dge(e,t,K2),e+"")}function Uge(e,t,r){if(!xc(r))return!1;var n=typeof t;return(n=="number"?yy(r)&&dO(t,r.length):n=="string"&&t in r)?_b(r[t],e):!1}function Vge(e){return qge(function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,u&&Uge(r[0],r[1],u)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,s)}return t})}var vu=Vge(function(e,t,r){cG(e,t,r)}),xb=function(t){var r=t.zDepth,n=t.radius,i=t.background,s=t.children,u=t.styles,a=u===void 0?{}:u,p=ri(vu({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return qe.createElement("div",{style:p.wrap},qe.createElement("div",{style:p.bg}),qe.createElement("div",{style:p.content},s))};xb.propTypes={background:on.string,zDepth:on.oneOf([0,1,2,3,4,5]),radius:on.number,styles:on.object};xb.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var uA=function(){return af.Date.now()},Gge=/\s/;function Hge(e){for(var t=e.length;t--&&Gge.test(e.charAt(t)););return t}var Wge=/^\s+/;function Zge(e){return e&&e.slice(0,Hge(e)+1).replace(Wge,"")}var Xge="[object Symbol]";function Y2(e){return typeof e=="symbol"||Id(e)&&am(e)==Xge}var bB=NaN,Kge=/^[-+]0x[0-9a-f]+$/i,Yge=/^0b[01]+$/i,Jge=/^0o[0-7]+$/i,Qge=parseInt;function _B(e){if(typeof e=="number")return e;if(Y2(e))return bB;if(xc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=xc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zge(e);var r=Yge.test(e);return r||Jge.test(e)?Qge(e.slice(2),r?2:8):Kge.test(e)?bB:+e}var eye="Expected a function",tye=Math.max,rye=Math.min;function fG(e,t,r){var n,i,s,u,a,p,d=0,g=!1,_=!1,C=!0;if(typeof e!="function")throw new TypeError(eye);t=_B(t)||0,xc(r)&&(g=!!r.leading,_="maxWait"in r,s=_?tye(_B(r.maxWait)||0,t):s,C="trailing"in r?!!r.trailing:C);function S($){var X=n,ee=i;return n=i=void 0,d=$,u=e.apply(ee,X),u}function I($){return d=$,a=setTimeout(k,t),g?S($):u}function O($){var X=$-p,ee=$-d,J=t-X;return _?rye(J,s-ee):J}function P($){var X=$-p,ee=$-d;return p===void 0||X>=t||X<0||_&&ee>=s}function k(){var $=uA();if(P($))return F($);a=setTimeout(k,O($))}function F($){return a=void 0,C&&n?S($):(n=i=void 0,u)}function B(){a!==void 0&&clearTimeout(a),d=0,n=p=i=a=void 0}function N(){return a===void 0?u:F(uA())}function G(){var $=uA(),X=P($);if(n=arguments,i=this,p=$,X){if(a===void 0)return I(p);if(_)return clearTimeout(a),a=setTimeout(k,t),S(p)}return a===void 0&&(a=setTimeout(k,t)),u}return G.cancel=B,G.flush=N,G}var nye="Expected a function";function iye(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(nye);return xc(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),fG(e,t,{leading:n,maxWait:t,trailing:i})}var aye=function(t,r,n){var i=n.getBoundingClientRect(),s=i.width,u=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=a-(n.getBoundingClientRect().left+window.pageXOffset),g=p-(n.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>s&&(d=s),g<0?g=0:g>u&&(g=u);var _=d/s,C=1-g/u;return{h:r.h,s:_,v:C,a:r.a,source:"hsv"}},oye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var J2=(function(e){uye(t,e);function t(r){sye(this,t);var n=lye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,aye(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var s=n.getContainerRenderWindow();s.addEventListener("mousemove",n.handleChange),s.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=iye(function(i,s,u){i(s,u)},50),n}return oye(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},s=i.color,u=i.white,a=i.black,p=i.pointer,d=i.circle,g=ri({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:u,black:a,pointer:p,circle:d}},{custom:!!this.props.style});return qe.createElement("div",{style:g.color,ref:function(C){return n.container=C},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},qe.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),qe.createElement("div",{style:g.white,className:"saturation-white"},qe.createElement("div",{style:g.black,className:"saturation-black"}),qe.createElement("div",{style:g.pointer},this.props.pointer?qe.createElement(this.props.pointer,this.props):qe.createElement("div",{style:g.circle}))))}}]),t})(R.PureComponent||R.Component);function cye(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var fye=rG(Object.keys,Object),hye=Object.prototype,dye=hye.hasOwnProperty;function pye(e){if(!cO(e))return fye(e);var t=[];for(var r in Object(e))dye.call(e,r)&&r!="constructor"&&t.push(r);return t}function pO(e){return yy(e)?lG(e):pye(e)}function mye(e,t){return e&&eG(e,t,pO)}function gye(e,t){return function(r,n){if(r==null)return r;if(!yy(r))return e(r,n);for(var i=r.length,s=-1,u=Object(r);++s<i&&n(u[s],s,u)!==!1;);return r}}var hG=gye(mye);function yye(e){return typeof e=="function"?e:K2}function vye(e,t){var r=Hu(e)?cye:hG;return r(e,yye(t))}function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}var bye=/^\s+/,_ye=/\s+$/;function Tn(e,t){if(e=e||"",t=t||{},e instanceof Tn)return e;if(!(this instanceof Tn))return new Tn(e,t);var r=xye(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Tn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,s,u,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),n<=.03928?u=n/12.92:u=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*u+.0722*a},setAlpha:function(t){return this._a=dG(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=wB(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=wB(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=xB(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=xB(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return SB(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Cye(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(lo(this._r,255)*100)+"%",g:Math.round(lo(this._g,255)*100)+"%",b:Math.round(lo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(lo(this._r,255)*100)+"%, "+Math.round(lo(this._g,255)*100)+"%, "+Math.round(lo(this._b,255)*100)+"%)":"rgba("+Math.round(lo(this._r,255)*100)+"%, "+Math.round(lo(this._g,255)*100)+"%, "+Math.round(lo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Nye[SB(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+EB(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var s=Tn(t);n="#"+EB(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,s=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Tn(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Iye,arguments)},brighten:function(){return this._applyModification(Mye,arguments)},darken:function(){return this._applyModification(Oye,arguments)},desaturate:function(){return this._applyModification(Aye,arguments)},saturate:function(){return this._applyModification(Tye,arguments)},greyscale:function(){return this._applyModification(Pye,arguments)},spin:function(){return this._applyModification(Rye,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(kye,arguments)},complement:function(){return this._applyCombination(Lye,arguments)},monochromatic:function(){return this._applyCombination(Fye,arguments)},splitcomplement:function(){return this._applyCombination(Dye,arguments)},triad:function(){return this._applyCombination(CB,[3])},tetrad:function(){return this._applyCombination(CB,[4])}};Tn.fromRatio=function(e,t){if(nx(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=Gv(e[n]));e=r}return Tn(e,t)};function xye(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,s=null,u=!1,a=!1;return typeof e=="string"&&(e=$ye(e)),nx(e)=="object"&&(bh(e.r)&&bh(e.g)&&bh(e.b)?(t=wye(e.r,e.g,e.b),u=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):bh(e.h)&&bh(e.s)&&bh(e.v)?(n=Gv(e.s),i=Gv(e.v),t=Eye(e.h,n,i),u=!0,a="hsv"):bh(e.h)&&bh(e.s)&&bh(e.l)&&(n=Gv(e.s),s=Gv(e.l),t=Sye(e.h,n,s),u=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=dG(r),{ok:u,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function wye(e,t,r){return{r:lo(e,255)*255,g:lo(t,255)*255,b:lo(r,255)*255}}function xB(e,t,r){e=lo(e,255),t=lo(t,255),r=lo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),s,u,a=(n+i)/2;if(n==i)s=u=0;else{var p=n-i;switch(u=a>.5?p/(2-n-i):p/(n+i),n){case e:s=(t-r)/p+(t<r?6:0);break;case t:s=(r-e)/p+2;break;case r:s=(e-t)/p+4;break}s/=6}return{h:s,s:u,l:a}}function Sye(e,t,r){var n,i,s;e=lo(e,360),t=lo(t,100),r=lo(r,100);function u(d,g,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?d+(g-d)*6*_:_<1/2?g:_<2/3?d+(g-d)*(2/3-_)*6:d}if(t===0)n=i=s=r;else{var a=r<.5?r*(1+t):r+t-r*t,p=2*r-a;n=u(p,a,e+1/3),i=u(p,a,e),s=u(p,a,e-1/3)}return{r:n*255,g:i*255,b:s*255}}function wB(e,t,r){e=lo(e,255),t=lo(t,255),r=lo(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),s,u,a=n,p=n-i;if(u=n===0?0:p/n,n==i)s=0;else{switch(n){case e:s=(t-r)/p+(t<r?6:0);break;case t:s=(r-e)/p+2;break;case r:s=(e-t)/p+4;break}s/=6}return{h:s,s:u,v:a}}function Eye(e,t,r){e=lo(e,360)*6,t=lo(t,100),r=lo(r,100);var n=Math.floor(e),i=e-n,s=r*(1-t),u=r*(1-i*t),a=r*(1-(1-i)*t),p=n%6,d=[r,u,s,s,a,r][p],g=[a,r,r,u,s,s][p],_=[s,s,a,r,r,u][p];return{r:d*255,g:g*255,b:_*255}}function SB(e,t,r,n){var i=[Wc(Math.round(e).toString(16)),Wc(Math.round(t).toString(16)),Wc(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Cye(e,t,r,n,i){var s=[Wc(Math.round(e).toString(16)),Wc(Math.round(t).toString(16)),Wc(Math.round(r).toString(16)),Wc(pG(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function EB(e,t,r,n){var i=[Wc(pG(n)),Wc(Math.round(e).toString(16)),Wc(Math.round(t).toString(16)),Wc(Math.round(r).toString(16))];return i.join("")}Tn.equals=function(e,t){return!e||!t?!1:Tn(e).toRgbString()==Tn(t).toRgbString()};Tn.random=function(){return Tn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Aye(e,t){t=t===0?0:t||10;var r=Tn(e).toHsl();return r.s-=t/100,r.s=Q2(r.s),Tn(r)}function Tye(e,t){t=t===0?0:t||10;var r=Tn(e).toHsl();return r.s+=t/100,r.s=Q2(r.s),Tn(r)}function Pye(e){return Tn(e).desaturate(100)}function Iye(e,t){t=t===0?0:t||10;var r=Tn(e).toHsl();return r.l+=t/100,r.l=Q2(r.l),Tn(r)}function Mye(e,t){t=t===0?0:t||10;var r=Tn(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),Tn(r)}function Oye(e,t){t=t===0?0:t||10;var r=Tn(e).toHsl();return r.l-=t/100,r.l=Q2(r.l),Tn(r)}function Rye(e,t){var r=Tn(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,Tn(r)}function Lye(e){var t=Tn(e).toHsl();return t.h=(t.h+180)%360,Tn(t)}function CB(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Tn(e).toHsl(),n=[Tn(e)],i=360/t,s=1;s<t;s++)n.push(Tn({h:(r.h+s*i)%360,s:r.s,l:r.l}));return n}function Dye(e){var t=Tn(e).toHsl(),r=t.h;return[Tn(e),Tn({h:(r+72)%360,s:t.s,l:t.l}),Tn({h:(r+216)%360,s:t.s,l:t.l})]}function kye(e,t,r){t=t||6,r=r||30;var n=Tn(e).toHsl(),i=360/r,s=[Tn(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,s.push(Tn(n));return s}function Fye(e,t){t=t||6;for(var r=Tn(e).toHsv(),n=r.h,i=r.s,s=r.v,u=[],a=1/t;t--;)u.push(Tn({h:n,s:i,v:s})),s=(s+a)%1;return u}Tn.mix=function(e,t,r){r=r===0?0:r||50;var n=Tn(e).toRgb(),i=Tn(t).toRgb(),s=r/100,u={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return Tn(u)};Tn.readability=function(e,t){var r=Tn(e),n=Tn(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Tn.isReadable=function(e,t,r){var n=Tn.readability(e,t),i,s;switch(s=!1,i=qye(r),i.level+i.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};Tn.mostReadable=function(e,t,r){var n=null,i=0,s,u,a,p;r=r||{},u=r.includeFallbackColors,a=r.level,p=r.size;for(var d=0;d<t.length;d++)s=Tn.readability(e,t[d]),s>i&&(i=s,n=Tn(t[d]));return Tn.isReadable(e,n,{level:a,size:p})||!u?n:(r.includeFallbackColors=!1,Tn.mostReadable(e,["#fff","#000"],r))};var f3=Tn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Nye=Tn.hexNames=Bye(f3);function Bye(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function dG(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function lo(e,t){jye(e)&&(e="100%");var r=zye(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Q2(e){return Math.min(1,Math.max(0,e))}function Fu(e){return parseInt(e,16)}function jye(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function zye(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Wc(e){return e.length==1?"0"+e:""+e}function Gv(e){return e<=1&&(e=e*100+"%"),e}function pG(e){return Math.round(parseFloat(e)*255).toString(16)}function AB(e){return Fu(e)/255}var qc=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function bh(e){return!!qc.CSS_UNIT.exec(e)}function $ye(e){e=e.replace(bye,"").replace(_ye,"").toLowerCase();var t=!1;if(f3[e])e=f3[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=qc.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=qc.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=qc.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=qc.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=qc.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=qc.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=qc.hex8.exec(e))?{r:Fu(r[1]),g:Fu(r[2]),b:Fu(r[3]),a:AB(r[4]),format:t?"name":"hex8"}:(r=qc.hex6.exec(e))?{r:Fu(r[1]),g:Fu(r[2]),b:Fu(r[3]),format:t?"name":"hex"}:(r=qc.hex4.exec(e))?{r:Fu(r[1]+""+r[1]),g:Fu(r[2]+""+r[2]),b:Fu(r[3]+""+r[3]),a:AB(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=qc.hex3.exec(e))?{r:Fu(r[1]+""+r[1]),g:Fu(r[2]+""+r[2]),b:Fu(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function qye(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var TB=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return vye(r,function(s){if(t[s]&&(n+=1,isNaN(t[s])||(i+=1),s==="s"||s==="l")){var u=/^\d+%$/;u.test(t[s])&&(i+=1)}}),n===i?t:!1},Hv=function(t,r){var n=t.hex?Tn(t.hex):Tn(t),i=n.toHsl(),s=n.toHsv(),u=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,s.h=r||0);var p=a==="000000"&&u.a===0;return{hsl:i,hex:p?"transparent":"#"+a,rgb:u,hsv:s,oldHue:t.h||r||i.h,source:t.source}},kd=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&Tn(t).isValid()},mO=function(t){if(!t)return"#fff";var r=Hv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},cA=function(t,r){var n=t.replace("","");return Tn(r+" ("+n+")")._ok},bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Vye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Hye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bu=function(t){var r=(function(n){Hye(i,n);function i(s){Vye(this,i);var u=Gye(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return u.handleChange=function(a,p){var d=TB(a);if(d){var g=Hv(a,a.h||u.state.oldHue);u.setState(g),u.props.onChangeComplete&&u.debounce(u.props.onChangeComplete,g,p),u.props.onChange&&u.props.onChange(g,p)}},u.handleSwatchHover=function(a,p){var d=TB(a);if(d){var g=Hv(a,a.h||u.state.oldHue);u.props.onSwatchHover&&u.props.onSwatchHover(g,p)}},u.state=bv({},Hv(s.color,0)),u.debounce=fG(function(a,p,d){a(p,d)},100),u}return Uye(i,[{key:"render",value:function(){var u={};return this.props.onSwatchHover&&(u.onSwatchHover=this.handleSwatchHover),qe.createElement(t,bv({},this.props,this.state,{onChange:this.handleChange},u))}}],[{key:"getDerivedStateFromProps",value:function(u,a){return bv({},Hv(u.color,a.oldHue))}}]),i})(R.PureComponent||R.Component);return r.propTypes=bv({},t.propTypes),r.defaultProps=bv({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},Wye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Xye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PB(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yye=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){Kye(i,n);function i(){var s,u,a,p;Xye(this,i);for(var d=arguments.length,g=Array(d),_=0;_<d;_++)g[_]=arguments[_];return p=(u=(a=PB(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(g))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},u),PB(a,p)}return Zye(i,[{key:"render",value:function(){return qe.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},qe.createElement(t,Wye({},this.props,this.state)))}}]),i})(qe.Component)},IB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jye=13,Qye=function(t){var r=t.color,n=t.style,i=t.onClick,s=i===void 0?function(){}:i,u=t.onHover,a=t.title,p=a===void 0?r:a,d=t.children,g=t.focus,_=t.focusStyle,C=_===void 0?{}:_,S=r==="transparent",I=ri({default:{swatch:IB({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,g?C:{})}}),O=function(N){return s(r,N)},P=function(N){return N.keyCode===Jye&&s(r,N)},k=function(N){return u(r,N)},F={};return u&&(F.onMouseOver=k),qe.createElement("div",IB({style:I.swatch,onClick:O,title:p,tabIndex:0,onKeyDown:P},F),d,S&&qe.createElement(my,{borderRadius:I.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const lm=Yye(Qye);var eve=function(t){var r=t.direction,n=ri({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return qe.createElement("div",{style:n.picker})},tve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mG=function(t){var r=t.rgb,n=t.hsl,i=t.width,s=t.height,u=t.onChange,a=t.direction,p=t.style,d=t.renderers,g=t.pointer,_=t.className,C=_===void 0?"":_,S=ri({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:p}}});return qe.createElement("div",{style:S.picker,className:"alpha-picker "+C},qe.createElement(sO,tve({},S.alpha,{rgb:r,hsl:n,pointer:g,renderers:d,onChange:u,direction:a})))};mG.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:eve};bu(mG);function gG(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var rve="__lodash_hash_undefined__";function nve(e){return this.__data__.set(e,rve),this}function ive(e){return this.__data__.has(e)}function ix(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new $h;++t<r;)this.add(e[t])}ix.prototype.add=ix.prototype.push=nve;ix.prototype.has=ive;function ave(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ove(e,t){return e.has(t)}var sve=1,lve=2;function yG(e,t,r,n,i,s){var u=r&sve,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var d=s.get(e),g=s.get(t);if(d&&g)return d==t&&g==e;var _=-1,C=!0,S=r&lve?new ix:void 0;for(s.set(e,t),s.set(t,e);++_<a;){var I=e[_],O=t[_];if(n)var P=u?n(O,I,_,t,e,s):n(I,O,_,e,t,s);if(P!==void 0){if(P)continue;C=!1;break}if(S){if(!ave(t,function(k,F){if(!ove(S,F)&&(I===k||i(I,k,r,n,s)))return S.push(F)})){C=!1;break}}else if(!(I===O||i(I,O,r,n,s))){C=!1;break}}return s.delete(e),s.delete(t),C}function uve(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function cve(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var fve=1,hve=2,dve="[object Boolean]",pve="[object Date]",mve="[object Error]",gve="[object Map]",yve="[object Number]",vve="[object RegExp]",bve="[object Set]",_ve="[object String]",xve="[object Symbol]",wve="[object ArrayBuffer]",Sve="[object DataView]",MB=Pd?Pd.prototype:void 0,fA=MB?MB.valueOf:void 0;function Eve(e,t,r,n,i,s,u){switch(r){case Sve:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case wve:return!(e.byteLength!=t.byteLength||!s(new ex(e),new ex(t)));case dve:case pve:case yve:return _b(+e,+t);case mve:return e.name==t.name&&e.message==t.message;case vve:case _ve:return e==t+"";case gve:var a=uve;case bve:var p=n&fve;if(a||(a=cve),e.size!=t.size&&!p)return!1;var d=u.get(e);if(d)return d==t;n|=hve,u.set(e,t);var g=yG(a(e),a(t),n,i,s,u);return u.delete(e),g;case xve:if(fA)return fA.call(e)==fA.call(t)}return!1}function Cve(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Ave(e,t,r){var n=t(e);return Hu(e)?n:Cve(n,r(e))}function Tve(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var u=e[r];t(u,r,e)&&(s[i++]=u)}return s}function Pve(){return[]}var Ive=Object.prototype,Mve=Ive.propertyIsEnumerable,OB=Object.getOwnPropertySymbols,Ove=OB?function(e){return e==null?[]:(e=Object(e),Tve(OB(e),function(t){return Mve.call(e,t)}))}:Pve;function RB(e){return Ave(e,pO,Ove)}var Rve=1,Lve=Object.prototype,Dve=Lve.hasOwnProperty;function kve(e,t,r,n,i,s){var u=r&Rve,a=RB(e),p=a.length,d=RB(t),g=d.length;if(p!=g&&!u)return!1;for(var _=p;_--;){var C=a[_];if(!(u?C in t:Dve.call(t,C)))return!1}var S=s.get(e),I=s.get(t);if(S&&I)return S==t&&I==e;var O=!0;s.set(e,t),s.set(t,e);for(var P=u;++_<p;){C=a[_];var k=e[C],F=t[C];if(n)var B=u?n(F,k,C,t,e,s):n(k,F,C,e,t,s);if(!(B===void 0?k===F||i(k,F,r,n,s):B)){O=!1;break}P||(P=C=="constructor")}if(O&&!P){var N=e.constructor,G=t.constructor;N!=G&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof G=="function"&&G instanceof G)&&(O=!1)}return s.delete(e),s.delete(t),O}var h3=sm(af,"DataView"),d3=sm(af,"Promise"),p3=sm(af,"Set"),m3=sm(af,"WeakMap"),LB="[object Map]",Fve="[object Object]",DB="[object Promise]",kB="[object Set]",FB="[object WeakMap]",NB="[object DataView]",Nve=om(h3),Bve=om(q0),jve=om(d3),zve=om(p3),$ve=om(m3),cd=am;(h3&&cd(new h3(new ArrayBuffer(1)))!=NB||q0&&cd(new q0)!=LB||d3&&cd(d3.resolve())!=DB||p3&&cd(new p3)!=kB||m3&&cd(new m3)!=FB)&&(cd=function(e){var t=am(e),r=t==Fve?e.constructor:void 0,n=r?om(r):"";if(n)switch(n){case Nve:return NB;case Bve:return LB;case jve:return DB;case zve:return kB;case $ve:return FB}return t});var qve=1,BB="[object Arguments]",jB="[object Array]",B_="[object Object]",Uve=Object.prototype,zB=Uve.hasOwnProperty;function Vve(e,t,r,n,i,s){var u=Hu(e),a=Hu(t),p=u?jB:cd(e),d=a?jB:cd(t);p=p==BB?B_:p,d=d==BB?B_:d;var g=p==B_,_=d==B_,C=p==d;if(C&&rx(e)){if(!rx(t))return!1;u=!0,g=!1}if(C&&!g)return s||(s=new jf),u||hO(e)?yG(e,t,r,n,i,s):Eve(e,t,p,r,n,i,s);if(!(r&qve)){var S=g&&zB.call(e,"__wrapped__"),I=_&&zB.call(t,"__wrapped__");if(S||I){var O=S?e.value():e,P=I?t.value():t;return s||(s=new jf),i(O,P,r,n,s)}}return C?(s||(s=new jf),kve(e,t,r,n,i,s)):!1}function gO(e,t,r,n,i){return e===t?!0:e==null||t==null||!Id(e)&&!Id(t)?e!==e&&t!==t:Vve(e,t,r,n,gO,i)}var Gve=1,Hve=2;function Wve(e,t,r,n){var i=r.length,s=i;if(e==null)return!s;for(e=Object(e);i--;){var u=r[i];if(u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<s;){u=r[i];var a=u[0],p=e[a],d=u[1];if(u[2]){if(p===void 0&&!(a in e))return!1}else{var g=new jf,_;if(!(_===void 0?gO(d,p,Gve|Hve,n,g):_))return!1}}return!0}function vG(e){return e===e&&!xc(e)}function Zve(e){for(var t=pO(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,vG(i)]}return t}function bG(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Xve(e){var t=Zve(e);return t.length==1&&t[0][2]?bG(t[0][0],t[0][1]):function(r){return r===e||Wve(r,e,t)}}var Kve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yve=/^\w*$/;function yO(e,t){if(Hu(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Y2(e)?!0:Yve.test(e)||!Kve.test(e)||t!=null&&e in Object(t)}var Jve="Expected a function";function vO(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Jve);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var u=e.apply(this,n);return r.cache=s.set(i,u)||s,u};return r.cache=new(vO.Cache||$h),r}vO.Cache=$h;var Qve=500;function e0e(e){var t=vO(e,function(n){return r.size===Qve&&r.clear(),n}),r=t.cache;return t}var t0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r0e=/\\(\\)?/g,n0e=e0e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(t0e,function(r,n,i,s){t.push(i?s.replace(r0e,"$1"):n||r)}),t}),$B=Pd?Pd.prototype:void 0,qB=$B?$B.toString:void 0;function _G(e){if(typeof e=="string")return e;if(Hu(e))return gG(e,_G)+"";if(Y2(e))return qB?qB.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function i0e(e){return e==null?"":_G(e)}function xG(e,t){return Hu(e)?e:yO(e,t)?[e]:n0e(i0e(e))}function ew(e){if(typeof e=="string"||Y2(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function wG(e,t){t=xG(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ew(t[r++])];return r&&r==n?e:void 0}function a0e(e,t,r){var n=e==null?void 0:wG(e,t);return n===void 0?r:n}function o0e(e,t){return e!=null&&t in Object(e)}function s0e(e,t,r){t=xG(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var u=ew(t[n]);if(!(s=e!=null&&r(e,u)))break;e=e[u]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&fO(i)&&dO(u,i)&&(Hu(e)||tx(e)))}function l0e(e,t){return e!=null&&s0e(e,t,o0e)}var u0e=1,c0e=2;function f0e(e,t){return yO(e)&&vG(t)?bG(ew(e),t):function(r){var n=a0e(r,e);return n===void 0&&n===t?l0e(r,e):gO(t,n,u0e|c0e)}}function h0e(e){return function(t){return t?.[e]}}function d0e(e){return function(t){return wG(t,e)}}function p0e(e){return yO(e)?h0e(ew(e)):d0e(e)}function m0e(e){return typeof e=="function"?e:e==null?K2:typeof e=="object"?Hu(e)?f0e(e[0],e[1]):Xve(e):p0e(e)}function g0e(e,t){var r=-1,n=yy(e)?Array(e.length):[];return hG(e,function(i,s,u){n[++r]=t(i,s,u)}),n}function um(e,t){var r=Hu(e)?gG:g0e;return r(e,m0e(t))}var y0e=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,s=ri({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return qe.createElement("div",{style:s.swatches},um(r,function(u){return qe.createElement(lm,{key:u,color:u,style:s.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+u}})}),qe.createElement("div",{style:s.clear}))},bO=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,s=t.colors,u=t.width,a=t.triangle,p=t.styles,d=p===void 0?{}:p,g=t.className,_=g===void 0?"":g,C=i==="transparent",S=function(P,k){kd(P)&&r({hex:P,source:"hex"},k)},I=ri(vu({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:mO(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},d),{"hide-triangle":a==="hide"});return qe.createElement("div",{style:I.card,className:"block-picker "+_},qe.createElement("div",{style:I.triangle}),qe.createElement("div",{style:I.head},C&&qe.createElement(my,{borderRadius:"6px 6px 0 0"}),qe.createElement("div",{style:I.label},i)),qe.createElement("div",{style:I.body},qe.createElement(y0e,{colors:s,onClick:S,onSwatchHover:n}),qe.createElement(ki,{style:{input:I.input},value:i,onChange:S})))};bO.propTypes={width:on.oneOfType([on.string,on.number]),colors:on.arrayOf(on.string),triangle:on.oneOf(["top","hide"]),styles:on.object};bO.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};bu(bO);var sg={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},lg={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},ug={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},cg={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},fg={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},hg={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},dg={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},pg={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},mg={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},Wv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},gg={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},yg={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},vg={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},bg={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},_g={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},xg={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},wg={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Sg={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},SG=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,s=t.hover,u=t.active,a=t.circleSize,p=t.circleSpacing,d=ri({default:{swatch:{width:a,height:a,marginRight:p,marginBottom:p,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:s,active:u});return qe.createElement("div",{style:d.swatch},qe.createElement(lm,{style:d.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+r}}))};SG.defaultProps={circleSize:28,circleSpacing:14};const v0e=oO.handleHover(SG);var _O=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,s=t.colors,u=t.hex,a=t.circleSize,p=t.styles,d=p===void 0?{}:p,g=t.circleSpacing,_=t.className,C=_===void 0?"":_,S=ri(vu({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-g,marginBottom:-g}}},d)),I=function(P,k){return n({hex:P,source:"hex"},k)};return qe.createElement("div",{style:S.card,className:"circle-picker "+C},um(s,function(O){return qe.createElement(v0e,{key:O,color:O,onClick:I,onSwatchHover:i,active:u===O.toLowerCase(),circleSize:a,circleSpacing:g})}))};_O.propTypes={width:on.oneOfType([on.string,on.number]),circleSize:on.number,circleSpacing:on.number,styles:on.object};_O.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[sg[500],lg[500],ug[500],cg[500],fg[500],hg[500],dg[500],pg[500],mg[500],Wv[500],gg[500],yg[500],vg[500],bg[500],_g[500],xg[500],wg[500],Sg[500]],styles:{}};bu(_O);function UB(e){return e===void 0}var j_={},VB;function b0e(){if(VB)return j_;VB=1,Object.defineProperty(j_,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u},t=i2(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var d in u)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(u,d)&&(p[d]=u[d]);return p}var s=24;return j_.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,d=u.width,g=d===void 0?s:d,_=u.height,C=_===void 0?s:_,S=u.style,I=S===void 0?{}:S,O=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+s+" "+s,style:e({fill:p,width:g,height:C},I)},O),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},j_}var _0e=b0e();const x0e=rl(_0e);var w0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function S0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function C0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var EG=(function(e){C0e(t,e);function t(r){S0e(this,t);var n=E0e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,s){i.hex?kd(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(UB(i.s)?n.props.hsl.s:i.s),l:Number(UB(i.l)?n.props.hsl.l:i.l),source:"hsl"},s))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return w0e(t,[{key:"render",value:function(){var n=this,i=ri({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=qe.createElement("div",{style:i.fields,className:"flexbox-fix"},qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=qe.createElement("div",{style:i.fields,className:"flexbox-fix"},qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),qe.createElement("div",{style:i.alpha},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=qe.createElement("div",{style:i.fields,className:"flexbox-fix"},qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),qe.createElement("div",{style:i.field},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),qe.createElement("div",{style:i.alpha},qe.createElement(ki,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),qe.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,qe.createElement("div",{style:i.toggle},qe.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},qe.createElement(x0e,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(qe.Component);EG.defaultProps={view:"hex"};var GB=function(){var t=ri({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return qe.createElement("div",{style:t.picker})},A0e=function(){var t=ri({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return qe.createElement("div",{style:t.picker})},xO=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,s=t.rgb,u=t.hsl,a=t.hsv,p=t.hex,d=t.renderers,g=t.styles,_=g===void 0?{}:g,C=t.className,S=C===void 0?"":C,I=t.defaultView,O=ri(vu({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},_),{disableAlpha:i});return qe.createElement("div",{style:O.picker,className:"chrome-picker "+S},qe.createElement("div",{style:O.saturation},qe.createElement(J2,{style:O.Saturation,hsl:u,hsv:a,pointer:A0e,onChange:n})),qe.createElement("div",{style:O.body},qe.createElement("div",{style:O.controls,className:"flexbox-fix"},qe.createElement("div",{style:O.color},qe.createElement("div",{style:O.swatch},qe.createElement("div",{style:O.active}),qe.createElement(my,{renderers:d}))),qe.createElement("div",{style:O.toggles},qe.createElement("div",{style:O.hue},qe.createElement(gy,{style:O.Hue,hsl:u,pointer:GB,onChange:n})),qe.createElement("div",{style:O.alpha},qe.createElement(sO,{style:O.Alpha,rgb:s,hsl:u,pointer:GB,renderers:d,onChange:n})))),qe.createElement(EG,{rgb:s,hsl:u,hex:p,view:I,onChange:n,disableAlpha:i})))};xO.propTypes={width:on.oneOfType([on.string,on.number]),disableAlpha:on.bool,styles:on.object,defaultView:on.oneOf(["hex","rgb","hsl"])};xO.defaultProps={width:225,disableAlpha:!1,styles:{}};bu(xO);var T0e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,s=t.onSwatchHover,u=t.active,a=ri({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:mO(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return qe.createElement(lm,{style:a.color,color:r,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+r}},qe.createElement("div",{style:a.dot}))},P0e=function(t){var r=t.hex,n=t.rgb,i=t.onChange,s=ri({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),u=function(p,d){p.r||p.g||p.b?i({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},d):i({hex:p.hex,source:"hex"},d)};return qe.createElement("div",{style:s.fields,className:"flexbox-fix"},qe.createElement("div",{style:s.active}),qe.createElement(ki,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:r,onChange:u}),qe.createElement(ki,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:u}),qe.createElement(ki,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:u}),qe.createElement(ki,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:u}))},wO=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,s=t.hex,u=t.rgb,a=t.styles,p=a===void 0?{}:a,d=t.className,g=d===void 0?"":d,_=ri(vu({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},p)),C=function(I,O){I.hex?kd(I.hex)&&r({hex:I.hex,source:"hex"},O):r(I,O)};return qe.createElement(xb,{style:_.Compact,styles:p},qe.createElement("div",{style:_.compact,className:"compact-picker "+g},qe.createElement("div",null,um(i,function(S){return qe.createElement(T0e,{key:S,color:S,active:S.toLowerCase()===s,onClick:C,onSwatchHover:n})}),qe.createElement("div",{style:_.clear})),qe.createElement(P0e,{hex:s,rgb:u,onChange:C})))};wO.propTypes={colors:on.arrayOf(on.string),styles:on.object};wO.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};bu(wO);var I0e=function(t){var r=t.hover,n=t.color,i=t.onClick,s=t.onSwatchHover,u={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ri({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:u}},{hover:r});return qe.createElement("div",{style:a.swatch},qe.createElement(lm,{color:n,onClick:i,onHover:s,focusStyle:u}))};const M0e=oO.handleHover(I0e);var SO=function(t){var r=t.width,n=t.colors,i=t.onChange,s=t.onSwatchHover,u=t.triangle,a=t.styles,p=a===void 0?{}:a,d=t.className,g=d===void 0?"":d,_=ri(vu({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},p),{"hide-triangle":u==="hide","top-left-triangle":u==="top-left","top-right-triangle":u==="top-right","bottom-left-triangle":u==="bottom-left","bottom-right-triangle":u==="bottom-right"}),C=function(I,O){return i({hex:I,source:"hex"},O)};return qe.createElement("div",{style:_.card,className:"github-picker "+g},qe.createElement("div",{style:_.triangleShadow}),qe.createElement("div",{style:_.triangle}),um(n,function(S){return qe.createElement(M0e,{color:S,key:S,onClick:C,onSwatchHover:s})}))};SO.propTypes={width:on.oneOfType([on.string,on.number]),colors:on.arrayOf(on.string),triangle:on.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:on.object};SO.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};bu(SO);var O0e=function(t){var r=t.direction,n=ri({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return qe.createElement("div",{style:n.picker})},R0e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EO=function(t){var r=t.width,n=t.height,i=t.onChange,s=t.hsl,u=t.direction,a=t.pointer,p=t.styles,d=p===void 0?{}:p,g=t.className,_=g===void 0?"":g,C=ri(vu({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},d)),S=function(O){return i({a:1,h:O.h,l:.5,s:1})};return qe.createElement("div",{style:C.picker,className:"hue-picker "+_},qe.createElement(gy,R0e({},C.hue,{hsl:s,pointer:a,onChange:S,direction:u})))};EO.propTypes={styles:on.object};EO.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:O0e,styles:{}};bu(EO);var L0e=function(t){var r=t.onChange,n=t.hex,i=t.rgb,s=t.styles,u=s===void 0?{}:s,a=t.className,p=a===void 0?"":a,d=ri(vu({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},u)),g=function(C,S){C.hex?kd(C.hex)&&r({hex:C.hex,source:"hex"},S):(C.r||C.g||C.b)&&r({r:C.r||i.r,g:C.g||i.g,b:C.b||i.b,source:"rgb"},S)};return qe.createElement(xb,{styles:u},qe.createElement("div",{style:d.material,className:"material-picker "+p},qe.createElement(ki,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:g}),qe.createElement("div",{style:d.split,className:"flexbox-fix"},qe.createElement("div",{style:d.third},qe.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:i.r,onChange:g})),qe.createElement("div",{style:d.third},qe.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:i.g,onChange:g})),qe.createElement("div",{style:d.third},qe.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:i.b,onChange:g})))))};bu(L0e);var D0e=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,s=t.hex,u=ri({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(d,g){d["#"]?kd(d["#"])&&r({hex:d["#"],source:"hex"},g):d.r||d.g||d.b?r({r:d.r||n.r,g:d.g||n.g,b:d.b||n.b,source:"rgb"},g):(d.h||d.s||d.v)&&r({h:d.h||i.h,s:d.s||i.s,v:d.v||i.v,source:"hsv"},g)};return qe.createElement("div",{style:u.fields},qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),qe.createElement("div",{style:u.divider}),qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:a}),qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:a}),qe.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:a}),qe.createElement("div",{style:u.divider}),qe.createElement(ki,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),qe.createElement("div",{style:u.fieldSymbols},qe.createElement("div",{style:u.symbol},""),qe.createElement("div",{style:u.symbol},"%"),qe.createElement("div",{style:u.symbol},"%")))},k0e=function(t){var r=t.hsl,n=ri({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return qe.createElement("div",{style:n.picker})},F0e=function(){var t=ri({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return qe.createElement("div",{style:t.pointer},qe.createElement("div",{style:t.left},qe.createElement("div",{style:t.leftInside})),qe.createElement("div",{style:t.right},qe.createElement("div",{style:t.rightInside})))},HB=function(t){var r=t.onClick,n=t.label,i=t.children,s=t.active,u=ri({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return qe.createElement("div",{style:u.button,onClick:r},n||i)},N0e=function(t){var r=t.rgb,n=t.currentColor,i=ri({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return qe.createElement("div",null,qe.createElement("div",{style:i.label},"new"),qe.createElement("div",{style:i.swatches},qe.createElement("div",{style:i.new}),qe.createElement("div",{style:i.current})),qe.createElement("div",{style:i.label},"current"))},B0e=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function j0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z0e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function $0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CO=(function(e){$0e(t,e);function t(r){j0e(this,t);var n=z0e(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return B0e(t,[{key:"render",value:function(){var n=this.props,i=n.styles,s=i===void 0?{}:i,u=n.className,a=u===void 0?"":u,p=ri(vu({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return qe.createElement("div",{style:p.picker,className:"photoshop-picker "+a},qe.createElement("div",{style:p.head},this.props.header),qe.createElement("div",{style:p.body,className:"flexbox-fix"},qe.createElement("div",{style:p.saturation},qe.createElement(J2,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:k0e,onChange:this.props.onChange})),qe.createElement("div",{style:p.hue},qe.createElement(gy,{direction:"vertical",hsl:this.props.hsl,pointer:F0e,onChange:this.props.onChange})),qe.createElement("div",{style:p.controls},qe.createElement("div",{style:p.top,className:"flexbox-fix"},qe.createElement("div",{style:p.previews},qe.createElement(N0e,{rgb:this.props.rgb,currentColor:this.state.currentColor})),qe.createElement("div",{style:p.actions},qe.createElement(HB,{label:"OK",onClick:this.props.onAccept,active:!0}),qe.createElement(HB,{label:"Cancel",onClick:this.props.onCancel}),qe.createElement(D0e,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(qe.Component);CO.propTypes={header:on.string,styles:on.object};CO.defaultProps={header:"Color Picker",styles:{}};bu(CO);var q0e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,s=t.hex,u=t.disableAlpha,a=ri({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),p=function(g,_){g.hex?kd(g.hex)&&r({hex:g.hex,source:"hex"},_):g.r||g.g||g.b?r({r:g.r||n.r,g:g.g||n.g,b:g.b||n.b,a:n.a,source:"rgb"},_):g.a&&(g.a<0?g.a=0:g.a>100&&(g.a=100),g.a/=100,r({h:i.h,s:i.s,l:i.l,a:g.a,source:"rgb"},_))};return qe.createElement("div",{style:a.fields,className:"flexbox-fix"},qe.createElement("div",{style:a.double},qe.createElement(ki,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:p})),qe.createElement("div",{style:a.single},qe.createElement(ki,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:p,dragLabel:"true",dragMax:"255"})),qe.createElement("div",{style:a.single},qe.createElement(ki,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:p,dragLabel:"true",dragMax:"255"})),qe.createElement("div",{style:a.single},qe.createElement(ki,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:p,dragLabel:"true",dragMax:"255"})),qe.createElement("div",{style:a.alpha},qe.createElement(ki,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:p,dragLabel:"true",dragMax:"100"})))},U0e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CG=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,s=t.onSwatchHover,u=ri({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(d,g){i({hex:d,source:"hex"},g)};return qe.createElement("div",{style:u.colors,className:"flexbox-fix"},r.map(function(p){var d=typeof p=="string"?{color:p}:p,g=""+d.color+(d.title||"");return qe.createElement("div",{key:g,style:u.swatchWrap},qe.createElement(lm,U0e({},d,{style:u.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+d.color}})))}))};CG.propTypes={colors:on.arrayOf(on.oneOfType([on.string,on.shape({color:on.string,title:on.string})])).isRequired};var V0e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AO=function(t){var r=t.width,n=t.rgb,i=t.hex,s=t.hsv,u=t.hsl,a=t.onChange,p=t.onSwatchHover,d=t.disableAlpha,g=t.presetColors,_=t.renderers,C=t.styles,S=C===void 0?{}:C,I=t.className,O=I===void 0?"":I,P=ri(vu({default:V0e({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},S),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},S),{disableAlpha:d});return qe.createElement("div",{style:P.picker,className:"sketch-picker "+O},qe.createElement("div",{style:P.saturation},qe.createElement(J2,{style:P.Saturation,hsl:u,hsv:s,onChange:a})),qe.createElement("div",{style:P.controls,className:"flexbox-fix"},qe.createElement("div",{style:P.sliders},qe.createElement("div",{style:P.hue},qe.createElement(gy,{style:P.Hue,hsl:u,onChange:a})),qe.createElement("div",{style:P.alpha},qe.createElement(sO,{style:P.Alpha,rgb:n,hsl:u,renderers:_,onChange:a}))),qe.createElement("div",{style:P.color},qe.createElement(my,null),qe.createElement("div",{style:P.activeColor}))),qe.createElement(q0e,{rgb:n,hsl:u,hex:i,onChange:a,disableAlpha:d}),qe.createElement(CG,{colors:g,onClick:a,onSwatchHover:p}))};AO.propTypes={disableAlpha:on.bool,width:on.oneOfType([on.string,on.number]),styles:on.object};AO.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};bu(AO);var _v=function(t){var r=t.hsl,n=t.offset,i=t.onClick,s=i===void 0?function(){}:i,u=t.active,a=t.first,p=t.last,d=ri({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:u,first:a,last:p}),g=function(C){return s({h:r.h,s:.5,l:n,source:"hsl"},C)};return qe.createElement("div",{style:d.swatch,onClick:g})},G0e=function(t){var r=t.onClick,n=t.hsl,i=ri({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return qe.createElement("div",{style:i.swatches},qe.createElement("div",{style:i.swatch},qe.createElement(_v,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<s&&Math.abs(n.s-.5)<s,onClick:r,first:!0})),qe.createElement("div",{style:i.swatch},qe.createElement(_v,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<s&&Math.abs(n.s-.5)<s,onClick:r})),qe.createElement("div",{style:i.swatch},qe.createElement(_v,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<s&&Math.abs(n.s-.5)<s,onClick:r})),qe.createElement("div",{style:i.swatch},qe.createElement(_v,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<s&&Math.abs(n.s-.5)<s,onClick:r})),qe.createElement("div",{style:i.swatch},qe.createElement(_v,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<s&&Math.abs(n.s-.5)<s,onClick:r,last:!0})),qe.createElement("div",{style:i.clear}))},H0e=function(){var t=ri({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return qe.createElement("div",{style:t.picker})},TO=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,s=t.styles,u=s===void 0?{}:s,a=t.className,p=a===void 0?"":a,d=ri(vu({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},u));return qe.createElement("div",{style:d.wrap||{},className:"slider-picker "+p},qe.createElement("div",{style:d.hue},qe.createElement(gy,{style:d.Hue,hsl:r,pointer:i,onChange:n})),qe.createElement("div",{style:d.swatches},qe.createElement(G0e,{hsl:r,onClick:n})))};TO.propTypes={styles:on.object};TO.defaultProps={pointer:H0e,styles:{}};bu(TO);var z_={},WB;function W0e(){if(WB)return z_;WB=1,Object.defineProperty(z_,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u},t=i2(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var d in u)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(u,d)&&(p[d]=u[d]);return p}var s=24;return z_.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,d=u.width,g=d===void 0?s:d,_=u.height,C=_===void 0?s:_,S=u.style,I=S===void 0?{}:S,O=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+s+" "+s,style:e({fill:p,width:g,height:C},I)},O),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},z_}var Z0e=W0e();const X0e=rl(Z0e);var K0e=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,s=t.onSwatchHover,u=t.first,a=t.last,p=t.active,d=ri({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:mO(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:u,last:a,active:p,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return qe.createElement(lm,{color:r,style:d.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+r}},qe.createElement("div",{style:d.check},qe.createElement(X0e,null)))},Y0e=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,s=t.active,u=ri({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return qe.createElement("div",{style:u.group},um(i,function(a,p){return qe.createElement(K0e,{key:a,color:a,active:a.toLowerCase()===s,first:p===0,last:p===i.length-1,onClick:r,onSwatchHover:n})}))},PO=function(t){var r=t.width,n=t.height,i=t.onChange,s=t.onSwatchHover,u=t.colors,a=t.hex,p=t.styles,d=p===void 0?{}:p,g=t.className,_=g===void 0?"":g,C=ri(vu({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},d)),S=function(O,P){return i({hex:O,source:"hex"},P)};return qe.createElement("div",{style:C.picker,className:"swatches-picker "+_},qe.createElement(xb,null,qe.createElement("div",{style:C.overflow},qe.createElement("div",{style:C.body},um(u,function(I){return qe.createElement(Y0e,{key:I.toString(),group:I,active:a,onClick:S,onSwatchHover:s})}),qe.createElement("div",{style:C.clear})))))};PO.propTypes={width:on.oneOfType([on.string,on.number]),height:on.oneOfType([on.string,on.number]),colors:on.arrayOf(on.arrayOf(on.string)),styles:on.object};PO.defaultProps={width:320,height:240,colors:[[sg[900],sg[700],sg[500],sg[300],sg[100]],[lg[900],lg[700],lg[500],lg[300],lg[100]],[ug[900],ug[700],ug[500],ug[300],ug[100]],[cg[900],cg[700],cg[500],cg[300],cg[100]],[fg[900],fg[700],fg[500],fg[300],fg[100]],[hg[900],hg[700],hg[500],hg[300],hg[100]],[dg[900],dg[700],dg[500],dg[300],dg[100]],[pg[900],pg[700],pg[500],pg[300],pg[100]],[mg[900],mg[700],mg[500],mg[300],mg[100]],["#194D33",Wv[700],Wv[500],Wv[300],Wv[100]],[gg[900],gg[700],gg[500],gg[300],gg[100]],[yg[900],yg[700],yg[500],yg[300],yg[100]],[vg[900],vg[700],vg[500],vg[300],vg[100]],[bg[900],bg[700],bg[500],bg[300],bg[100]],[_g[900],_g[700],_g[500],_g[300],_g[100]],[xg[900],xg[700],xg[500],xg[300],xg[100]],[wg[900],wg[700],wg[500],wg[300],wg[100]],[Sg[900],Sg[700],Sg[500],Sg[300],Sg[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};bu(PO);var IO=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,s=t.colors,u=t.width,a=t.triangle,p=t.styles,d=p===void 0?{}:p,g=t.className,_=g===void 0?"":g,C=ri(vu({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},d),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),S=function(O,P){kd(O)&&r({hex:O,source:"hex"},P)};return qe.createElement("div",{style:C.card,className:"twitter-picker "+_},qe.createElement("div",{style:C.triangleShadow}),qe.createElement("div",{style:C.triangle}),qe.createElement("div",{style:C.body},um(s,function(I,O){return qe.createElement(lm,{key:O,color:I,hex:I,style:C.swatch,onClick:S,onHover:n,focusStyle:{boxShadow:"0 0 4px "+I}})}),qe.createElement("div",{style:C.hash},"#"),qe.createElement(ki,{label:null,style:{input:C.input},value:i.replace("#",""),onChange:S}),qe.createElement("div",{style:C.clear})))};IO.propTypes={width:on.oneOfType([on.string,on.number]),triangle:on.oneOf(["hide","top-left","top-right"]),colors:on.arrayOf(on.string),styles:on.object};IO.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};bu(IO);var MO=function(t){var r=ri({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return qe.createElement("div",{style:r.picker})};MO.propTypes={hsl:on.shape({h:on.number,s:on.number,l:on.number,a:on.number})};MO.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var OO=function(t){var r=ri({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return qe.createElement("div",{style:r.picker})};OO.propTypes={hsl:on.shape({h:on.number,s:on.number,l:on.number,a:on.number})};OO.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var J0e=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,s=t.hex,u=t.hsv,a=function(S,I){if(S.hex)kd(S.hex)&&r({hex:S.hex,source:"hex"},I);else if(S.rgb){var O=S.rgb.split(",");cA(S.rgb,"rgb")&&r({r:O[0],g:O[1],b:O[2],a:1,source:"rgb"},I)}else if(S.hsv){var P=S.hsv.split(",");cA(S.hsv,"hsv")&&(P[2]=P[2].replace("%",""),P[1]=P[1].replace("%",""),P[0]=P[0].replace("",""),P[1]==1?P[1]=.01:P[2]==1&&(P[2]=.01),r({h:Number(P[0]),s:Number(P[1]),v:Number(P[2]),source:"hsv"},I))}else if(S.hsl){var k=S.hsl.split(",");cA(S.hsl,"hsl")&&(k[2]=k[2].replace("%",""),k[1]=k[1].replace("%",""),k[0]=k[0].replace("",""),_[1]==1?_[1]=.01:_[2]==1&&(_[2]=.01),r({h:Number(k[0]),s:Number(k[1]),v:Number(k[2]),source:"hsl"},I))}},p=ri({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),d=n.r+", "+n.g+", "+n.b,g=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",_=Math.round(u.h)+", "+Math.round(u.s*100)+"%, "+Math.round(u.v*100)+"%";return qe.createElement("div",{style:p.wrap,className:"flexbox-fix"},qe.createElement("div",{style:p.fields},qe.createElement("div",{style:p.double},qe.createElement(ki,{style:{input:p.input,label:p.label},label:"hex",value:s,onChange:a})),qe.createElement("div",{style:p.column},qe.createElement("div",{style:p.single},qe.createElement(ki,{style:{input:p.input2,label:p.label2},label:"rgb",value:d,onChange:a})),qe.createElement("div",{style:p.single},qe.createElement(ki,{style:{input:p.input2,label:p.label2},label:"hsv",value:_,onChange:a})),qe.createElement("div",{style:p.single},qe.createElement(ki,{style:{input:p.input2,label:p.label2},label:"hsl",value:g,onChange:a})))))},RO=function(t){var r=t.width,n=t.onChange,i=t.rgb,s=t.hsl,u=t.hsv,a=t.hex,p=t.header,d=t.styles,g=d===void 0?{}:d,_=t.className,C=_===void 0?"":_,S=ri(vu({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},g));return qe.createElement("div",{style:S.picker,className:"google-picker "+C},qe.createElement("div",{style:S.head},p),qe.createElement("div",{style:S.swatch}),qe.createElement("div",{style:S.saturation},qe.createElement(J2,{hsl:s,hsv:u,pointer:MO,onChange:n})),qe.createElement("div",{style:S.body},qe.createElement("div",{style:S.controls,className:"flexbox-fix"},qe.createElement("div",{style:S.hue},qe.createElement(gy,{style:S.Hue,hsl:s,radius:"4px",pointer:OO,onChange:n}))),qe.createElement(J0e,{rgb:i,hsl:s,hex:a,hsv:u,onChange:n})))};RO.propTypes={width:on.oneOfType([on.string,on.number]),styles:on.object,header:on.string};RO.defaultProps={width:652,styles:{},header:"Color picker"};bu(RO);Qt(tf)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Qt(Dd)({marginLeft:"61px"});Qt(PM)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}));Qt(Uo)({padding:"4px",marginTop:"-3px"});Qt(mb)({minWidth:"30px"});Qt(mU)({padding:0});var ZB;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ZB||(ZB={}));const Q0e=Object.freeze({x:0,y:0});var Pg;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Pg||(Pg={}));var XB;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(XB||(XB={}));var pc;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(pc||(pc={}));pc.Space,pc.Enter,pc.Esc,pc.Space,pc.Enter,pc.Tab;var KB;(function(e){e[e.RightClick=2]="RightClick"})(KB||(KB={}));var YB;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(YB||(YB={}));var JB;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(JB||(JB={}));Pg.Backward+"",Pg.Forward+"",Pg.Backward+"",Pg.Forward+"";var g3;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(g3||(g3={}));var y3;(function(e){e.Optimized="optimized"})(y3||(y3={}));g3.WhileDragging,y3.Optimized;({...Q0e});var QB;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(QB||(QB={}));pc.Down,pc.Right,pc.Up,pc.Left;Qt(Uo)({padding:"4px",marginTop:"-3px"});Qt(Uo)({marginLeft:"20px"});Qt("div")(()=>({display:"flex",alignItems:"center"}));Qt(Dd)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));Qt(Dd)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}}));Qt(Dd)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}}));Qt(Dd)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}}));Qt(Yc)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"}));var Di={},Bs={},ej;function vy(){if(ej)return Bs;ej=1;function e(k,F,B){if(B===void 0&&(B=Array.prototype),k&&typeof B.find=="function")return B.find.call(k,F);for(var N=0;N<k.length;N++)if(r(k,N)){var G=k[N];if(F.call(void 0,G,N,k))return G}}function t(k,F){return F===void 0&&(F=Object),F&&typeof F.getOwnPropertyDescriptors=="function"&&(k=F.create(null,F.getOwnPropertyDescriptors(k))),F&&typeof F.freeze=="function"?F.freeze(k):k}function r(k,F){return Object.prototype.hasOwnProperty.call(k,F)}function n(k,F){if(k===null||typeof k!="object")throw new TypeError("target is not an object");for(var B in F)r(F,B)&&(k[B]=F[B]);return k}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function s(k){return r(i,k.toLowerCase())}var u=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(k){return r(u,k.toLowerCase())}var p=t({script:!1,style:!1,textarea:!0,title:!0});function d(k){var F=k.toLowerCase();return r(p,F)&&!p[F]}function g(k){var F=k.toLowerCase();return r(p,F)&&p[F]}function _(k){return k===S.HTML}function C(k){return _(k)||k===S.XML_XHTML_APPLICATION}var S=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),I=Object.keys(S).map(function(k){return S[k]});function O(k){return I.indexOf(k)>-1}var P=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Bs.assign=n,Bs.find=e,Bs.freeze=t,Bs.HTML_BOOLEAN_ATTRIBUTES=i,Bs.HTML_RAW_TEXT_ELEMENTS=p,Bs.HTML_VOID_ELEMENTS=u,Bs.hasDefaultHTMLNamespace=C,Bs.hasOwn=r,Bs.isHTMLBooleanAttribute=s,Bs.isHTMLRawTextElement=d,Bs.isHTMLEscapableRawTextElement=g,Bs.isHTMLMimeType=_,Bs.isHTMLVoidElement=a,Bs.isValidMimeType=O,Bs.MIME_TYPE=S,Bs.NAMESPACE=P,Bs}var tg={},tj;function tw(){if(tj)return tg;tj=1;var e=vy();function t(C,S){C.prototype=Object.create(Error.prototype,{constructor:{value:C},name:{value:C.name,enumerable:!0,writable:S}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(C){return typeof C=="number"&&C>=1&&C<=25}function s(C){return typeof C=="string"&&C.substring(C.length-r.Error.length)===r.Error}function u(C,S){i(C)?(this.name=n[C],this.message=S||""):(this.message=C,this.name=s(S)?S:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,u)}t(u,!0),Object.defineProperties(u.prototype,{code:{enumerable:!0,get:function(){var C=n.indexOf(this.name);return i(C)?C:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},p=Object.entries(a),d=0;d<p.length;d++){var g=p[d][0];u[g]=p[d][1]}function _(C,S){this.message=C,this.locator=S,Error.captureStackTrace&&Error.captureStackTrace(this,_)}return t(_),tg.DOMException=u,tg.DOMExceptionName=r,tg.ExceptionCode=a,tg.ParseError=_,tg}var Eo={},pi={},rj;function AG(){if(rj)return pi;rj=1;function e(Ur){try{typeof Ur!="function"&&(Ur=RegExp);var Fn=new Ur("","u").exec("");return!!Fn&&Fn[0].length===2}catch{}return!1}var t=e();function r(Ur){if(Ur.source[0]!=="[")throw new Error(Ur+" can not be used with chars");return Ur.source.slice(1,Ur.source.lastIndexOf("]"))}function n(Ur,Fn){if(Ur.source[0]!=="[")throw new Error("/"+Ur.source+"/ can not be used with chars_without");if(!Fn||typeof Fn!="string")throw new Error(JSON.stringify(Fn)+" is not a valid search");if(Ur.source.indexOf(Fn)===-1)throw new Error('"'+Fn+'" is not is /'+Ur.source+"/");if(Fn==="-"&&Ur.source.indexOf(Fn)!==1)throw new Error('"'+Fn+'" is not at the first postion of /'+Ur.source+"/");return new RegExp(Ur.source.replace(Fn,""),t?"u":"")}function i(Ur){var Fn=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Jr){var jr=typeof Jr=="string";if(jr&&Fn===void 0&&Jr==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return jr?Jr:Jr.source}).join(""),t?"mu":"m")}function s(Ur){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(s,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var u="",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var p=/[\x20\x09\x0D\x0A]/,d=r(p),g=i(p,"+"),_=i(p,"*"),C=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(C=i("[",r(C),"\\u{10000}-\\u{10FFFF}","]"));var S=r(C),I=i("[",S,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),O=i(C,I,"*"),P=i(I,"+"),k=i("&",O,";"),F=s(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),B=s(k,"|",F),N=i("%",O,";"),G=s(i('"',s(/[^%&"]/,"|",N,"|",B),"*",'"'),"|",i("'",s(/[^%&']/,"|",N,"|",B),"*","'")),$=s('"',s(/[^<&"]/,"|",B),"*",'"',"|","'",s(/[^<&']/,"|",B),"*","'"),X=n(C,":"),ee=n(I,":"),J=i(X,ee,"*"),le=i(J,s(":",J),"?"),Z=i("^",le,"$"),H=i("(",le,")"),oe=s(/"[^"]*"|'[^']*'/),ue=i(/^<\?/,"(",O,")",s(g,"(",a,"*?)"),"?",/\?>/),ce=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,be=s('"',ce,'*"',"|","'",n(ce,"'"),"*'"),Te="<!--",ve="-->",Ce=i(Te,s(n(a,"-"),"|",i("-",n(a,"-"))),"*",ve),$e="#PCDATA",Je=s(i(/\(/,_,$e,s(_,/\|/,_,le),"*",_,/\)\*/),"|",i(/\(/,_,$e,_,/\)/)),ge=/[?*+]?/,Ee=i(/\([^>]+\)/,ge),Ie=s("EMPTY","|","ANY","|",Je,"|",Ee),Le="<!ELEMENT",Ve=i(Le,g,s(le,"|",N),g,s(Ie,"|",N),_,">"),ht=i("NOTATION",g,/\(/,_,O,s(_,/\|/,_,O),"*",_,/\)/),It=i(/\(/,_,P,s(_,/\|/,_,P),"*",_,/\)/),xt=s(ht,"|",It),rt=s(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",xt),zt=s(/#REQUIRED|#IMPLIED/,"|",s(s("#FIXED",g),"?",$)),Lt=s(g,O,g,rt,g,zt),Ft="<!ATTLIST",dt=i(Ft,g,O,Lt,"*",_,">"),ke="about:legacy-compat",fr=s('"'+ke+'"',"|","'"+ke+"'"),sr="SYSTEM",xr="PUBLIC",tr=s(s(sr,g,oe),"|",s(xr,g,be,g,oe)),Ge=i("^",s(s(sr,g,"(?<SystemLiteralOnly>",oe,")"),"|",s(xr,g,"(?<PubidLiteral>",be,")",g,"(?<SystemLiteral>",oe,")"))),nt=s(g,"NDATA",g,O),ut=s(G,"|",s(tr,nt,"?")),Nt="<!ENTITY",Kt=i(Nt,g,O,g,ut,_,">"),Vt=s(G,"|",tr),Ke=i(Nt,g,"%",g,O,g,Vt,_,">"),me=s(Kt,"|",Ke),pe=i(xr,g,be),Ae=i("<!NOTATION",g,O,g,s(tr,"|",pe),_,">"),Be=i(_,"=",_),Ne=/1[.]\d+/,Tt=i(g,"version",Be,s("'",Ne,"'","|",'"',Ne,'"')),bt=/[A-Za-z][-A-Za-z0-9._]*/,tt=s(g,"encoding",Be,s('"',bt,'"',"|","'",bt,"'")),gt=s(g,"standalone",Be,s("'",s("yes","|","no"),"'","|",'"',s("yes","|","no"),'"')),$t=i(/^<\?xml/,Tt,tt,"?",gt,"?",_,/\?>/),kt="<!DOCTYPE",cr="<![CDATA[",mr="]]>",Zr=/<!\[CDATA\[/,mn=/\]\]>/,Kr=i(a,"*?",mn),Rt=i(Zr,Kr);return pi.chars=r,pi.chars_without=n,pi.detectUnicodeSupport=e,pi.reg=i,pi.regg=s,pi.ABOUT_LEGACY_COMPAT=ke,pi.ABOUT_LEGACY_COMPAT_SystemLiteral=fr,pi.AttlistDecl=dt,pi.CDATA_START=cr,pi.CDATA_END=mr,pi.CDSect=Rt,pi.Char=a,pi.Comment=Ce,pi.COMMENT_START=Te,pi.COMMENT_END=ve,pi.DOCTYPE_DECL_START=kt,pi.elementdecl=Ve,pi.EntityDecl=me,pi.EntityValue=G,pi.ExternalID=tr,pi.ExternalID_match=Ge,pi.Name=O,pi.NotationDecl=Ae,pi.Reference=B,pi.PEReference=N,pi.PI=ue,pi.PUBLIC=xr,pi.PubidLiteral=be,pi.QName=le,pi.QName_exact=Z,pi.QName_group=H,pi.S=g,pi.SChar_s=d,pi.S_OPT=_,pi.SYSTEM=sr,pi.SystemLiteral=oe,pi.UNICODE_REPLACEMENT_CHARACTER=u,pi.UNICODE_SUPPORT=t,pi.XMLDecl=$t,pi}var nj;function TG(){if(nj)return Eo;nj=1;var e=vy(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,s=e.isHTMLRawTextElement,u=e.isHTMLVoidElement,a=e.MIME_TYPE,p=e.NAMESPACE,d=Symbol(),g=tw(),_=g.DOMException,C=g.DOMExceptionName,S=AG();function I(ie){if(ie!==d)throw new TypeError("Illegal constructor")}function O(ie){return ie!==""}function P(ie){return ie?ie.split(/[\t\n\f\r ]+/).filter(O):[]}function k(ie,_e){return n(ie,_e)||(ie[_e]=!0),ie}function F(ie){if(!ie)return[];var _e=P(ie);return Object.keys(_e.reduce(k,{}))}function B(ie){return function(_e){return ie&&ie.indexOf(_e)!==-1}}function N(ie){if(!S.QName_exact.test(ie))throw new _(_.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+ie+'"')}function G(ie,_e){N(_e),ie=ie||null;var Ze=null,_t=_e;if(_e.indexOf(":")>=0){var lt=_e.split(":");Ze=lt[0],_t=lt[1]}if(Ze!==null&&ie===null)throw new _(_.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(Ze==="xml"&&ie!==e.NAMESPACE.XML)throw new _(_.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((Ze==="xmlns"||_e==="xmlns")&&ie!==e.NAMESPACE.XMLNS)throw new _(_.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(ie===e.NAMESPACE.XMLNS&&Ze!=="xmlns"&&_e!=="xmlns")throw new _(_.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[ie,Ze,_t]}function $(ie,_e){for(var Ze in ie)n(ie,Ze)&&(_e[Ze]=ie[Ze])}function X(ie,_e){var Ze=ie.prototype;if(!(Ze instanceof _e)){let _t=function(){};_t.prototype=_e.prototype,_t=new _t,$(Ze,_t),ie.prototype=Ze=_t}Ze.constructor!=ie&&(typeof ie!="function"&&console.error("unknown Class:"+ie),Ze.constructor=ie)}var ee={},J=ee.ELEMENT_NODE=1,le=ee.ATTRIBUTE_NODE=2,Z=ee.TEXT_NODE=3,H=ee.CDATA_SECTION_NODE=4,oe=ee.ENTITY_REFERENCE_NODE=5,ue=ee.ENTITY_NODE=6,ce=ee.PROCESSING_INSTRUCTION_NODE=7,be=ee.COMMENT_NODE=8,Te=ee.DOCUMENT_NODE=9,ve=ee.DOCUMENT_TYPE_NODE=10,Ce=ee.DOCUMENT_FRAGMENT_NODE=11,$e=ee.NOTATION_NODE=12,Je=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function ge(ie,_e){if(_e.length<ie.length)return ge(_e,ie);var Ze=null;for(var _t in ie){if(ie[_t]!==_e[_t])return Ze;Ze=ie[_t]}return Ze}function Ee(ie){return ie.guid||(ie.guid=Math.random()),ie.guid}function Ie(){}Ie.prototype={length:0,item:function(ie){return ie>=0&&ie<this.length?this[ie]:null},toString:function(ie){for(var _e=[],Ze=0;Ze<this.length;Ze++)jr(this[Ze],_e,ie);return _e.join("")},filter:function(ie){return Array.prototype.filter.call(this,ie)},indexOf:function(ie){return Array.prototype.indexOf.call(this,ie)}},Ie.prototype[Symbol.iterator]=function(){var ie=this,_e=0;return{next:function(){return _e<ie.length?{value:ie[_e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Le(ie,_e){this._node=ie,this._refresh=_e,Ve(this)}function Ve(ie){var _e=ie._node._inc||ie._node.ownerDocument._inc;if(ie._inc!==_e){var Ze=ie._refresh(ie._node);if(Wt(ie,"length",Ze.length),!ie.$$length||Ze.length<ie.$$length)for(var _t=Ze.length;_t in ie;_t++)n(ie,_t)&&delete ie[_t];$(Ze,ie),ie._inc=_e}}Le.prototype.item=function(ie){return Ve(this),this[ie]||null},X(Le,Ie);function ht(){}function It(ie,_e){for(var Ze=0;Ze<ie.length;){if(ie[Ze]===_e)return Ze;Ze++}}function xt(ie,_e,Ze,_t){if(_t?_e[It(_e,_t)]=Ze:(_e[_e.length]=Ze,_e.length++),ie){Ze.ownerElement=ie;var lt=ie.ownerDocument;lt&&(_t&&sr(lt,ie,_t),fr(lt,ie,Ze))}}function rt(ie,_e,Ze){var _t=It(_e,Ze);if(_t>=0){for(var lt=_e.length-1;_t<=lt;)_e[_t]=_e[++_t];if(_e.length=lt,ie){var or=ie.ownerDocument;or&&sr(or,ie,Ze),Ze.ownerElement=null}}}ht.prototype={length:0,item:Ie.prototype.item,getNamedItem:function(ie){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(ie=ie.toLowerCase());for(var _e=0;_e<this.length;){var Ze=this[_e];if(Ze.nodeName===ie)return Ze;_e++}return null},setNamedItem:function(ie){var _e=ie.ownerElement;if(_e&&_e!==this._ownerElement)throw new _(_.INUSE_ATTRIBUTE_ERR);var Ze=this.getNamedItemNS(ie.namespaceURI,ie.localName);return Ze===ie?ie:(xt(this._ownerElement,this,ie,Ze),Ze)},setNamedItemNS:function(ie){return this.setNamedItem(ie)},removeNamedItem:function(ie){var _e=this.getNamedItem(ie);if(!_e)throw new _(_.NOT_FOUND_ERR,ie);return rt(this._ownerElement,this,_e),_e},removeNamedItemNS:function(ie,_e){var Ze=this.getNamedItemNS(ie,_e);if(!Ze)throw new _(_.NOT_FOUND_ERR,ie?ie+" : "+_e:_e);return rt(this._ownerElement,this,Ze),Ze},getNamedItemNS:function(ie,_e){ie||(ie=null);for(var Ze=0;Ze<this.length;){var _t=this[Ze];if(_t.localName===_e&&_t.namespaceURI===ie)return _t;Ze++}return null}},ht.prototype[Symbol.iterator]=function(){var ie=this,_e=0;return{next:function(){return _e<ie.length?{value:ie[_e++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function zt(){}zt.prototype={hasFeature:function(ie,_e){return!0},createDocument:function(ie,_e,Ze){var _t=a.XML_APPLICATION;ie===p.HTML?_t=a.XML_XHTML_APPLICATION:ie===p.SVG&&(_t=a.XML_SVG_IMAGE);var lt=new ke(d,{contentType:_t});if(lt.implementation=this,lt.childNodes=new Ie,lt.doctype=Ze||null,Ze&&lt.appendChild(Ze),_e){var or=lt.createElementNS(ie,_e);lt.appendChild(or)}return lt},createDocumentType:function(ie,_e,Ze,_t){N(ie);var lt=new kt(d);return lt.name=ie,lt.nodeName=ie,lt.publicId=_e||"",lt.systemId=Ze||"",lt.internalSubset=_t||"",lt.childNodes=new Ie,lt},createHTMLDocument:function(ie){var _e=new ke(d,{contentType:a.HTML});if(_e.implementation=this,_e.childNodes=new Ie,ie!==!1){_e.doctype=this.createDocumentType("html"),_e.doctype.ownerDocument=_e,_e.appendChild(_e.doctype);var Ze=_e.createElement("html");_e.appendChild(Ze);var _t=_e.createElement("head");if(Ze.appendChild(_t),typeof ie=="string"){var lt=_e.createElement("title");lt.appendChild(_e.createTextNode(ie)),_t.appendChild(lt)}Ze.appendChild(_e.createElement("body"))}return _e}};function Lt(ie){I(ie)}Lt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var ie=this.getRootNode();return ie&&ie.nodeType===ie.DOCUMENT_NODE},contains:function(ie){if(!ie)return!1;var _e=ie;do{if(this===_e)return!0;_e=ie.parentNode}while(_e);return!1},getRootNode:function(ie){var _e=this;do{if(!_e.parentNode)return _e;_e=_e.parentNode}while(_e)},isEqualNode:function(ie){if(!ie||this.nodeType!==ie.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==ie.name||this.publicId!==ie.publicId||this.systemId!==ie.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==ie.namespaceURI||this.prefix!==ie.prefix||this.localName!==ie.localName||this.attributes.length!==ie.attributes.length)return!1;for(var _e=0;_e<this.attributes.length;_e++){var Ze=this.attributes.item(_e);if(!Ze.isEqualNode(ie.getAttributeNodeNS(Ze.namespaceURI,Ze.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==ie.namespaceURI||this.localName!==ie.localName||this.value!==ie.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==ie.target||this.data!==ie.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==ie.data)return!1;break}if(this.childNodes.length!==ie.childNodes.length)return!1;for(var _e=0;_e<this.childNodes.length;_e++)if(!this.childNodes[_e].isEqualNode(ie.childNodes[_e]))return!1;return!0},isSameNode:function(ie){return this===ie},insertBefore:function(ie,_e){return Be(this,ie,_e)},replaceChild:function(ie,_e){Be(this,ie,_e,Ae),_e&&this.removeChild(_e)},removeChild:function(ie){return tr(this,ie)},appendChild:function(ie){return this.insertBefore(ie,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(ie){return Ct(this.ownerDocument||this,this,ie)},normalize:function(){for(var ie=this.firstChild;ie;){var _e=ie.nextSibling;_e&&_e.nodeType==Z&&ie.nodeType==Z?(this.removeChild(_e),ie.appendData(_e.data)):(ie.normalize(),ie=_e)}},isSupported:function(ie,_e){return this.ownerDocument.implementation.hasFeature(ie,_e)},lookupPrefix:function(ie){for(var _e=this;_e;){var Ze=_e._nsMap;if(Ze){for(var _t in Ze)if(n(Ze,_t)&&Ze[_t]===ie)return _t}_e=_e.nodeType==le?_e.ownerDocument:_e.parentNode}return null},lookupNamespaceURI:function(ie){for(var _e=this;_e;){var Ze=_e._nsMap;if(Ze&&n(Ze,ie))return Ze[ie];_e=_e.nodeType==le?_e.ownerDocument:_e.parentNode}return null},isDefaultNamespace:function(ie){var _e=this.lookupPrefix(ie);return _e==null},compareDocumentPosition:function(ie){if(this===ie)return 0;var _e=ie,Ze=this,_t=null,lt=null;if(_e instanceof Tt&&(_t=_e,_e=_t.ownerElement),Ze instanceof Tt&&(lt=Ze,Ze=lt.ownerElement,_t&&_e&&Ze===_e))for(var or=0,Ar;Ar=Ze.attributes[or];or++){if(Ar===_t)return Je.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Je.DOCUMENT_POSITION_PRECEDING;if(Ar===lt)return Je.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Je.DOCUMENT_POSITION_FOLLOWING}if(!_e||!Ze||Ze.ownerDocument!==_e.ownerDocument)return Je.DOCUMENT_POSITION_DISCONNECTED+Je.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Ee(Ze.ownerDocument)>Ee(_e.ownerDocument)?Je.DOCUMENT_POSITION_FOLLOWING:Je.DOCUMENT_POSITION_PRECEDING);if(lt&&_e===Ze)return Je.DOCUMENT_POSITION_CONTAINS+Je.DOCUMENT_POSITION_PRECEDING;if(_t&&_e===Ze)return Je.DOCUMENT_POSITION_CONTAINED_BY+Je.DOCUMENT_POSITION_FOLLOWING;for(var Vr=[],Rr=_e.parentNode;Rr;){if(!lt&&Rr===Ze)return Je.DOCUMENT_POSITION_CONTAINED_BY+Je.DOCUMENT_POSITION_FOLLOWING;Vr.push(Rr),Rr=Rr.parentNode}Vr.reverse();for(var lr=[],kr=Ze.parentNode;kr;){if(!_t&&kr===_e)return Je.DOCUMENT_POSITION_CONTAINS+Je.DOCUMENT_POSITION_PRECEDING;lr.push(kr),kr=kr.parentNode}lr.reverse();var Yr=ge(Vr,lr);for(var dn in Yr.childNodes){var Bn=Yr.childNodes[dn];if(Bn===Ze)return Je.DOCUMENT_POSITION_FOLLOWING;if(Bn===_e)return Je.DOCUMENT_POSITION_PRECEDING;if(lr.indexOf(Bn)>=0)return Je.DOCUMENT_POSITION_FOLLOWING;if(Vr.indexOf(Bn)>=0)return Je.DOCUMENT_POSITION_PRECEDING}return 0}};function Ft(ie){return ie=="<"&&"&lt;"||ie==">"&&"&gt;"||ie=="&"&&"&amp;"||ie=='"'&&"&quot;"||"&#"+ie.charCodeAt()+";"}$(ee,Lt),$(ee,Lt.prototype),$(Je,Lt),$(Je,Lt.prototype);function dt(ie,_e){if(_e(ie))return!0;if(ie=ie.firstChild)do if(dt(ie,_e))return!0;while(ie=ie.nextSibling)}function ke(ie,_e){I(ie);var Ze=_e||{};this.ownerDocument=this,this.contentType=Ze.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function fr(ie,_e,Ze){ie&&ie._inc++;var _t=Ze.namespaceURI;_t===p.XMLNS&&(_e._nsMap[Ze.prefix?Ze.localName:""]=Ze.value)}function sr(ie,_e,Ze,_t){ie&&ie._inc++;var lt=Ze.namespaceURI;lt===p.XMLNS&&delete _e._nsMap[Ze.prefix?Ze.localName:""]}function xr(ie,_e,Ze){if(ie&&ie._inc){ie._inc++;var _t=_e.childNodes;if(Ze&&!Ze.nextSibling)_t[_t.length++]=Ze;else{for(var lt=_e.firstChild,or=0;lt;)_t[or++]=lt,lt=lt.nextSibling;_t.length=or,delete _t[_t.length]}}}function tr(ie,_e){if(ie!==_e.parentNode)throw new _(_.NOT_FOUND_ERR,"child's parent is not parent");var Ze=_e.previousSibling,_t=_e.nextSibling;return Ze?Ze.nextSibling=_t:ie.firstChild=_t,_t?_t.previousSibling=Ze:ie.lastChild=Ze,xr(ie.ownerDocument,ie),_e.parentNode=null,_e.previousSibling=null,_e.nextSibling=null,_e}function Ge(ie){return ie&&(ie.nodeType===Lt.DOCUMENT_NODE||ie.nodeType===Lt.DOCUMENT_FRAGMENT_NODE||ie.nodeType===Lt.ELEMENT_NODE)}function nt(ie){return ie&&(ie.nodeType===Lt.CDATA_SECTION_NODE||ie.nodeType===Lt.COMMENT_NODE||ie.nodeType===Lt.DOCUMENT_FRAGMENT_NODE||ie.nodeType===Lt.DOCUMENT_TYPE_NODE||ie.nodeType===Lt.ELEMENT_NODE||ie.nodeType===Lt.PROCESSING_INSTRUCTION_NODE||ie.nodeType===Lt.TEXT_NODE)}function ut(ie){return ie&&ie.nodeType===Lt.DOCUMENT_TYPE_NODE}function Nt(ie){return ie&&ie.nodeType===Lt.ELEMENT_NODE}function Kt(ie){return ie&&ie.nodeType===Lt.TEXT_NODE}function Vt(ie,_e){var Ze=ie.childNodes||[];if(t(Ze,Nt)||ut(_e))return!1;var _t=t(Ze,ut);return!(_e&&_t&&Ze.indexOf(_t)>Ze.indexOf(_e))}function Ke(ie,_e){var Ze=ie.childNodes||[];function _t(or){return Nt(or)&&or!==_e}if(t(Ze,_t))return!1;var lt=t(Ze,ut);return!(_e&&lt&&Ze.indexOf(lt)>Ze.indexOf(_e))}function me(ie,_e,Ze){if(!Ge(ie))throw new _(_.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+ie.nodeType);if(Ze&&Ze.parentNode!==ie)throw new _(_.NOT_FOUND_ERR,"child not in parent");if(!nt(_e)||ut(_e)&&ie.nodeType!==Lt.DOCUMENT_NODE)throw new _(_.HIERARCHY_REQUEST_ERR,"Unexpected node type "+_e.nodeType+" for parent node type "+ie.nodeType)}function pe(ie,_e,Ze){var _t=ie.childNodes||[],lt=_e.childNodes||[];if(_e.nodeType===Lt.DOCUMENT_FRAGMENT_NODE){var or=lt.filter(Nt);if(or.length>1||t(lt,Kt))throw new _(_.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(or.length===1&&!Vt(ie,Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Nt(_e)&&!Vt(ie,Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ut(_e)){if(t(_t,ut))throw new _(_.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Ar=t(_t,Nt);if(Ze&&_t.indexOf(Ar)<_t.indexOf(Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!Ze&&Ar)throw new _(_.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function Ae(ie,_e,Ze){var _t=ie.childNodes||[],lt=_e.childNodes||[];if(_e.nodeType===Lt.DOCUMENT_FRAGMENT_NODE){var or=lt.filter(Nt);if(or.length>1||t(lt,Kt))throw new _(_.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(or.length===1&&!Ke(ie,Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Nt(_e)&&!Ke(ie,Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ut(_e)){if(t(_t,function(Rr){return ut(Rr)&&Rr!==Ze}))throw new _(_.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Ar=t(_t,Nt);if(Ze&&_t.indexOf(Ar)<_t.indexOf(Ze))throw new _(_.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function Be(ie,_e,Ze,_t){me(ie,_e,Ze),ie.nodeType===Lt.DOCUMENT_NODE&&(_t||pe)(ie,_e,Ze);var lt=_e.parentNode;if(lt&&lt.removeChild(_e),_e.nodeType===Ce){var or=_e.firstChild;if(or==null)return _e;var Ar=_e.lastChild}else or=Ar=_e;var Vr=Ze?Ze.previousSibling:ie.lastChild;or.previousSibling=Vr,Ar.nextSibling=Ze,Vr?Vr.nextSibling=or:ie.firstChild=or,Ze==null?ie.lastChild=Ar:Ze.previousSibling=Ar;do or.parentNode=ie;while(or!==Ar&&(or=or.nextSibling));return xr(ie.ownerDocument||ie,ie,_e),_e.nodeType==Ce&&(_e.firstChild=_e.lastChild=null),_e}ke.prototype={implementation:null,nodeName:"#document",nodeType:Te,doctype:null,documentElement:null,_inc:1,insertBefore:function(ie,_e){if(ie.nodeType===Ce){for(var Ze=ie.firstChild;Ze;){var _t=Ze.nextSibling;this.insertBefore(Ze,_e),Ze=_t}return ie}return Be(this,ie,_e),ie.ownerDocument=this,this.documentElement===null&&ie.nodeType===J&&(this.documentElement=ie),ie},removeChild:function(ie){var _e=tr(this,ie);return _e===this.documentElement&&(this.documentElement=null),_e},replaceChild:function(ie,_e){Be(this,ie,_e,Ae),ie.ownerDocument=this,_e&&this.removeChild(_e),Nt(ie)&&(this.documentElement=ie)},importNode:function(ie,_e){return wt(this,ie,_e)},getElementById:function(ie){var _e=null;return dt(this.documentElement,function(Ze){if(Ze.nodeType==J&&Ze.getAttribute("id")==ie)return _e=Ze,!0}),_e},createElement:function(ie){var _e=new Ne(d);_e.ownerDocument=this,this.type==="html"&&(ie=ie.toLowerCase()),r(this.contentType)&&(_e.namespaceURI=p.HTML),_e.nodeName=ie,_e.tagName=ie,_e.localName=ie,_e.childNodes=new Ie;var Ze=_e.attributes=new ht;return Ze._ownerElement=_e,_e},createDocumentFragment:function(){var ie=new mn(d);return ie.ownerDocument=this,ie.childNodes=new Ie,ie},createTextNode:function(ie){var _e=new tt(d);return _e.ownerDocument=this,_e.childNodes=new Ie,_e.appendData(ie),_e},createComment:function(ie){var _e=new gt(d);return _e.ownerDocument=this,_e.childNodes=new Ie,_e.appendData(ie),_e},createCDATASection:function(ie){var _e=new $t(d);return _e.ownerDocument=this,_e.childNodes=new Ie,_e.appendData(ie),_e},createProcessingInstruction:function(ie,_e){var Ze=new Kr(d);return Ze.ownerDocument=this,Ze.childNodes=new Ie,Ze.nodeName=Ze.target=ie,Ze.nodeValue=Ze.data=_e,Ze},createAttribute:function(ie){if(!S.QName_exact.test(ie))throw new _(_.INVALID_CHARACTER_ERR,'invalid character in name "'+ie+'"');return this.type==="html"&&(ie=ie.toLowerCase()),this._createAttribute(ie)},_createAttribute:function(ie){var _e=new Tt(d);return _e.ownerDocument=this,_e.childNodes=new Ie,_e.name=ie,_e.nodeName=ie,_e.localName=ie,_e.specified=!0,_e},createEntityReference:function(ie){if(!S.Name.test(ie))throw new _(_.INVALID_CHARACTER_ERR,'not a valid xml name "'+ie+'"');if(this.type==="html")throw new _("document is an html document",C.NotSupportedError);var _e=new Zr(d);return _e.ownerDocument=this,_e.childNodes=new Ie,_e.nodeName=ie,_e},createElementNS:function(ie,_e){var Ze=G(ie,_e),_t=new Ne(d),lt=_t.attributes=new ht;return _t.childNodes=new Ie,_t.ownerDocument=this,_t.nodeName=_e,_t.tagName=_e,_t.namespaceURI=Ze[0],_t.prefix=Ze[1],_t.localName=Ze[2],lt._ownerElement=_t,_t},createAttributeNS:function(ie,_e){var Ze=G(ie,_e),_t=new Tt(d);return _t.ownerDocument=this,_t.childNodes=new Ie,_t.nodeName=_e,_t.name=_e,_t.specified=!0,_t.namespaceURI=Ze[0],_t.prefix=Ze[1],_t.localName=Ze[2],_t}},X(ke,Lt);function Ne(ie){I(ie),this._nsMap=Object.create(null)}Ne.prototype={nodeType:J,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===p.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(ie){return!!this.getAttributeNode(ie)},getAttribute:function(ie){var _e=this.getAttributeNode(ie);return _e?_e.value:null},getAttributeNode:function(ie){return this._isInHTMLDocumentAndNamespace()&&(ie=ie.toLowerCase()),this.attributes.getNamedItem(ie)},setAttribute:function(ie,_e){this._isInHTMLDocumentAndNamespace()&&(ie=ie.toLowerCase());var Ze=this.getAttributeNode(ie);Ze?Ze.value=Ze.nodeValue=""+_e:(Ze=this.ownerDocument._createAttribute(ie),Ze.value=Ze.nodeValue=""+_e,this.setAttributeNode(Ze))},removeAttribute:function(ie){var _e=this.getAttributeNode(ie);_e&&this.removeAttributeNode(_e)},setAttributeNode:function(ie){return this.attributes.setNamedItem(ie)},setAttributeNodeNS:function(ie){return this.attributes.setNamedItemNS(ie)},removeAttributeNode:function(ie){return this.attributes.removeNamedItem(ie.nodeName)},removeAttributeNS:function(ie,_e){var Ze=this.getAttributeNodeNS(ie,_e);Ze&&this.removeAttributeNode(Ze)},hasAttributeNS:function(ie,_e){return this.getAttributeNodeNS(ie,_e)!=null},getAttributeNS:function(ie,_e){var Ze=this.getAttributeNodeNS(ie,_e);return Ze?Ze.value:null},setAttributeNS:function(ie,_e,Ze){var _t=G(ie,_e),lt=_t[2],or=this.getAttributeNodeNS(ie,lt);or?or.value=or.nodeValue=""+Ze:(or=this.ownerDocument.createAttributeNS(ie,_e),or.value=or.nodeValue=""+Ze,this.setAttributeNode(or))},getAttributeNodeNS:function(ie,_e){return this.attributes.getNamedItemNS(ie,_e)},getElementsByClassName:function(ie){var _e=F(ie);return new Le(this,function(Ze){var _t=[];return _e.length>0&&dt(Ze,function(lt){if(lt!==Ze&&lt.nodeType===J){var or=lt.getAttribute("class");if(or){var Ar=ie===or;if(!Ar){var Vr=F(or);Ar=_e.every(B(Vr))}Ar&&_t.push(lt)}}}),_t})},getElementsByTagName:function(ie){var _e=(this.nodeType===Te?this:this.ownerDocument).type==="html",Ze=ie.toLowerCase();return new Le(this,function(_t){var lt=[];return dt(_t,function(or){if(!(or===_t||or.nodeType!==J))if(ie==="*")lt.push(or);else{var Ar=or.getQualifiedName(),Vr=_e&&or.namespaceURI===p.HTML?Ze:ie;Ar===Vr&&lt.push(or)}}),lt})},getElementsByTagNameNS:function(ie,_e){return new Le(this,function(Ze){var _t=[];return dt(Ze,function(lt){lt!==Ze&&lt.nodeType===J&&(ie==="*"||lt.namespaceURI===ie)&&(_e==="*"||lt.localName==_e)&&_t.push(lt)}),_t})}},ke.prototype.getElementsByClassName=Ne.prototype.getElementsByClassName,ke.prototype.getElementsByTagName=Ne.prototype.getElementsByTagName,ke.prototype.getElementsByTagNameNS=Ne.prototype.getElementsByTagNameNS,X(Ne,Lt);function Tt(ie){I(ie),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Tt.prototype.nodeType=le,X(Tt,Lt);function bt(ie){I(ie)}bt.prototype={data:"",substringData:function(ie,_e){return this.data.substring(ie,ie+_e)},appendData:function(ie){ie=this.data+ie,this.nodeValue=this.data=ie,this.length=ie.length},insertData:function(ie,_e){this.replaceData(ie,0,_e)},deleteData:function(ie,_e){this.replaceData(ie,_e,"")},replaceData:function(ie,_e,Ze){var _t=this.data.substring(0,ie),lt=this.data.substring(ie+_e);Ze=_t+Ze+lt,this.nodeValue=this.data=Ze,this.length=Ze.length}},X(bt,Lt);function tt(ie){I(ie)}tt.prototype={nodeName:"#text",nodeType:Z,splitText:function(ie){var _e=this.data,Ze=_e.substring(ie);_e=_e.substring(0,ie),this.data=this.nodeValue=_e,this.length=_e.length;var _t=this.ownerDocument.createTextNode(Ze);return this.parentNode&&this.parentNode.insertBefore(_t,this.nextSibling),_t}},X(tt,bt);function gt(ie){I(ie)}gt.prototype={nodeName:"#comment",nodeType:be},X(gt,bt);function $t(ie){I(ie)}$t.prototype={nodeName:"#cdata-section",nodeType:H},X($t,tt);function kt(ie){I(ie)}kt.prototype.nodeType=ve,X(kt,Lt);function cr(ie){I(ie)}cr.prototype.nodeType=$e,X(cr,Lt);function mr(ie){I(ie)}mr.prototype.nodeType=ue,X(mr,Lt);function Zr(ie){I(ie)}Zr.prototype.nodeType=oe,X(Zr,Lt);function mn(ie){I(ie)}mn.prototype.nodeName="#document-fragment",mn.prototype.nodeType=Ce,X(mn,Lt);function Kr(ie){I(ie)}Kr.prototype.nodeType=ce,X(Kr,bt);function Rt(){}Rt.prototype.serializeToString=function(ie,_e){return Ur.call(ie,_e)},Lt.prototype.toString=Ur;function Ur(ie){var _e=[],Ze=this.nodeType===Te&&this.documentElement||this,_t=Ze.prefix,lt=Ze.namespaceURI;if(lt&&_t==null){var _t=Ze.lookupPrefix(lt);if(_t==null)var or=[{namespace:lt,prefix:null}]}return jr(this,_e,ie,or),_e.join("")}function Fn(ie,_e,Ze){var _t=ie.prefix||"",lt=ie.namespaceURI;if(!lt||_t==="xml"&&lt===p.XML||lt===p.XMLNS)return!1;for(var or=Ze.length;or--;){var Ar=Ze[or];if(Ar.prefix===_t)return Ar.namespace!==lt}return!0}function Jr(ie,_e,Ze){ie.push(" ",_e,'="',Ze.replace(/[<>&"\t\n\r]/g,Ft),'"')}function jr(ie,_e,Ze,_t){_t||(_t=[]);var lt=ie.nodeType===Te?ie:ie.ownerDocument,or=lt.type==="html";if(Ze)if(ie=Ze(ie),ie){if(typeof ie=="string"){_e.push(ie);return}}else return;switch(ie.nodeType){case J:var Ar=ie.attributes,Vr=Ar.length,Ri=ie.firstChild,Rr=ie.tagName,lr=Rr;if(!or&&!ie.prefix&&ie.namespaceURI){for(var kr,Yr=0;Yr<Ar.length;Yr++)if(Ar.item(Yr).name==="xmlns"){kr=Ar.item(Yr).value;break}if(!kr)for(var dn=_t.length-1;dn>=0;dn--){var Bn=_t[dn];if(Bn.prefix===""&&Bn.namespace===ie.namespaceURI){kr=Bn.namespace;break}}if(kr!==ie.namespaceURI)for(var dn=_t.length-1;dn>=0;dn--){var Bn=_t[dn];if(Bn.namespace===ie.namespaceURI){Bn.prefix&&(lr=Bn.prefix+":"+Rr);break}}}_e.push("<",lr);for(var Pn=0;Pn<Vr;Pn++){var un=Ar.item(Pn);un.prefix=="xmlns"?_t.push({prefix:un.localName,namespace:un.value}):un.nodeName=="xmlns"&&_t.push({prefix:"",namespace:un.value})}for(var Pn=0;Pn<Vr;Pn++){var un=Ar.item(Pn);if(Fn(un,or,_t)){var Wi=un.prefix||"",Zi=un.namespaceURI;Jr(_e,Wi?"xmlns:"+Wi:"xmlns",Zi),_t.push({prefix:Wi,namespace:Zi})}jr(un,_e,Ze,_t)}if(Rr===lr&&Fn(ie,or,_t)){var Wi=ie.prefix||"",Zi=ie.namespaceURI;Jr(_e,Wi?"xmlns:"+Wi:"xmlns",Zi),_t.push({prefix:Wi,namespace:Zi})}var Ui=!Ri;if(Ui&&(or||ie.namespaceURI===p.HTML)&&(Ui=u(Rr)),Ui)_e.push("/>");else{if(_e.push(">"),or&&s(Rr))for(;Ri;)Ri.data?_e.push(Ri.data):jr(Ri,_e,Ze,_t.slice()),Ri=Ri.nextSibling;else for(;Ri;)jr(Ri,_e,Ze,_t.slice()),Ri=Ri.nextSibling;_e.push("</",lr,">")}return;case Te:case Ce:for(var Ri=ie.firstChild;Ri;)jr(Ri,_e,Ze,_t.slice()),Ri=Ri.nextSibling;return;case le:return Jr(_e,ie.name,ie.value);case Z:return _e.push(ie.data.replace(/[<&>]/g,Ft));case H:return _e.push(S.CDATA_START,ie.data,S.CDATA_END);case be:return _e.push(S.COMMENT_START,ie.data,S.COMMENT_END);case ve:var Pa=ie.publicId,Vi=ie.systemId;_e.push(S.DOCTYPE_DECL_START," ",ie.name),Pa?(_e.push(" ",S.PUBLIC," ",Pa),Vi&&Vi!=="."&&_e.push(" ",Vi)):Vi&&Vi!=="."&&_e.push(" ",S.SYSTEM," ",Vi),ie.internalSubset&&_e.push(" [",ie.internalSubset,"]"),_e.push(">");return;case ce:return _e.push("<?",ie.target," ",ie.data,"?>");case oe:return _e.push("&",ie.nodeName,";");default:_e.push("??",ie.nodeName)}}function wt(ie,_e,Ze){var _t;switch(_e.nodeType){case J:_t=_e.cloneNode(!1),_t.ownerDocument=ie;case Ce:break;case le:Ze=!0;break}if(_t||(_t=_e.cloneNode(!1)),_t.ownerDocument=ie,_t.parentNode=null,Ze)for(var lt=_e.firstChild;lt;)_t.appendChild(wt(ie,lt,Ze)),lt=lt.nextSibling;return _t}function Ct(ie,_e,Ze){var _t=new _e.constructor(d);for(var lt in _e)if(n(_e,lt)){var or=_e[lt];typeof or!="object"&&or!=_t[lt]&&(_t[lt]=or)}switch(_e.childNodes&&(_t.childNodes=new Ie),_t.ownerDocument=ie,_t.nodeType){case J:var Ar=_e.attributes,Vr=_t.attributes=new ht,Rr=Ar.length;Vr._ownerElement=_t;for(var lr=0;lr<Rr;lr++)_t.setAttributeNode(Ct(ie,Ar.item(lr),!0));break;case le:Ze=!0}if(Ze)for(var kr=_e.firstChild;kr;)_t.appendChild(Ct(ie,kr,Ze)),kr=kr.nextSibling;return _t}function Wt(ie,_e,Ze){ie[_e]=Ze}try{if(Object.defineProperty){let ie=function(_e){switch(_e.nodeType){case J:case Ce:var Ze=[];for(_e=_e.firstChild;_e;)_e.nodeType!==7&&_e.nodeType!==8&&Ze.push(ie(_e)),_e=_e.nextSibling;return Ze.join("");default:return _e.nodeValue}};Object.defineProperty(Le.prototype,"length",{get:function(){return Ve(this),this.$$length}}),Object.defineProperty(Lt.prototype,"textContent",{get:function(){return ie(this)},set:function(_e){switch(this.nodeType){case J:case Ce:for(;this.firstChild;)this.removeChild(this.firstChild);(_e||String(_e))&&this.appendChild(this.ownerDocument.createTextNode(_e));break;default:this.data=_e,this.value=_e,this.nodeValue=_e}}}),Wt=function(_e,Ze,_t){_e["$$"+Ze]=_t}}}catch{}return Eo._updateLiveList=Ve,Eo.Attr=Tt,Eo.CDATASection=$t,Eo.CharacterData=bt,Eo.Comment=gt,Eo.Document=ke,Eo.DocumentFragment=mn,Eo.DocumentType=kt,Eo.DOMImplementation=zt,Eo.Element=Ne,Eo.Entity=mr,Eo.EntityReference=Zr,Eo.LiveNodeList=Le,Eo.NamedNodeMap=ht,Eo.Node=Lt,Eo.NodeList=Ie,Eo.Notation=cr,Eo.Text=tt,Eo.ProcessingInstruction=Kr,Eo.XMLSerializer=Rt,Eo}var pp={},hA={},ij;function ebe(){return ij||(ij=1,(function(e){var t=vy().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(hA)),hA}var xv={},aj;function tbe(){if(aj)return xv;aj=1;var e=vy(),t=AG(),r=tw(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,s=e.isHTMLRawTextElement,u=e.hasOwn,a=e.NAMESPACE,p=r.ParseError,d=r.DOMException,g=0,_=1,C=2,S=3,I=4,O=5,P=6,k=7;function F(){}F.prototype={parse:function(ce,be,Te){var ve=this.domBuilder;ve.startDocument(),J(be,be=Object.create(null)),N(ce,be,Te,ve,this.errorHandler),ve.endDocument()}};var B=/&#?\w+;?/g;function N(ce,be,Te,ve,Ce){var $e=i(ve.mimeType);ce.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&Ce.warning("Unicode replacement character detected, source encoding issues?");function Je(Be){if(Be>65535){Be-=65536;var Ne=55296+(Be>>10),Tt=56320+(Be&1023);return String.fromCharCode(Ne,Tt)}else return String.fromCharCode(Be)}function ge(Be){var Ne=Be[Be.length-1]===";"?Be:Be+";";if(!$e&&Ne!==Be)return Ce.error("EntityRef: expecting ;"),Be;var Tt=t.Reference.exec(Ne);if(!Tt||Tt[0].length!==Ne.length)return Ce.error("entity not matching Reference production: "+Be),Be;var bt=Ne.slice(1,-1);return u(Te,bt)?Te[bt]:bt.charAt(0)==="#"?Je(parseInt(bt.substring(1).replace("x","0x"))):(Ce.error("entity not found:"+Be),Be)}function Ee(Be){if(Be>zt){var Ne=ce.substring(zt,Be).replace(B,ge);ht&&It(zt),ve.characters(Ne,0,Be-zt),zt=Be}}var Ie=0,Le=0,Ve=/\r\n?|\n|$/g,ht=ve.locator;function It(Be,Ne){for(;Be>=Le&&(Ne=Ve.exec(ce));)Ie=Le,Le=Ne.index+Ne[0].length,ht.lineNumber++;ht.columnNumber=Be-Ie+1}for(var xt=[{currentNSMap:be}],rt=[],zt=0;;){try{var Lt=ce.indexOf("<",zt);if(Lt<0){if(!$e&&rt.length>0)return Ce.fatalError("unclosed xml tag(s): "+rt.join(", "));if(!ce.substring(zt).match(/^\s*$/)){var Ft=ve.doc,dt=Ft.createTextNode(ce.substring(zt));if(Ft.documentElement)return Ce.error("Extra content at the end of the document");Ft.appendChild(dt),ve.currentElement=dt}return}if(Lt>zt){var ke=ce.substring(zt,Lt);!$e&&rt.length===0&&(ke=ke.replace(new RegExp(t.S_OPT.source,"g"),""),ke&&Ce.error("Unexpected content outside root element: '"+ke+"'")),Ee(Lt)}switch(ce.charAt(Lt+1)){case"/":var Vt=ce.indexOf(">",Lt+2),fr=ce.substring(Lt+2,Vt>0?Vt:void 0);if(!fr)return Ce.fatalError("end tag name missing");var sr=Vt>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(fr);if(!sr)return Ce.fatalError('end tag name contains invalid characters: "'+fr+'"');if(!ve.currentElement&&!ve.doc.documentElement)return;var xr=rt[rt.length-1]||ve.currentElement.tagName||ve.doc.documentElement.tagName||"";if(xr!==sr[1]){var tr=sr[1].toLowerCase();if(!$e||xr.toLowerCase()!==tr)return Ce.fatalError('Opening and ending tag mismatch: "'+xr+'" != "'+fr+'"')}var Ge=xt.pop();rt.pop();var nt=Ge.localNSMap;if(ve.endElement(Ge.uri,Ge.localName,xr),nt)for(var ut in nt)u(nt,ut)&&ve.endPrefixMapping(ut);Vt++;break;case"?":ht&&It(Lt),Vt=oe(ce,Lt,ve,Ce);break;case"!":ht&&It(Lt),Vt=H(ce,Lt,ve,Ce,$e);break;default:ht&&It(Lt);var Nt=new ue,Kt=xt[xt.length-1].currentNSMap,Vt=$(ce,Lt,Nt,Kt,ge,Ce,$e),Ke=Nt.length;if(Nt.closed||($e&&e.isHTMLVoidElement(Nt.tagName)?Nt.closed=!0:rt.push(Nt.tagName)),ht&&Ke){for(var me=G(ht,{}),pe=0;pe<Ke;pe++){var Ae=Nt[pe];It(Ae.offset),Ae.locator=G(ht,{})}ve.locator=me,X(Nt,ve,Kt)&&xt.push(Nt),ve.locator=ht}else X(Nt,ve,Kt)&&xt.push(Nt);$e&&!Nt.closed?Vt=ee(ce,Vt,Nt.tagName,ge,ve):Vt++}}catch(Be){if(Be instanceof p)throw Be;if(Be instanceof d)throw new p(Be.name+": "+Be.message,ve.locator,Be);Ce.error("element parse error: "+Be),Vt=-1}Vt>zt?zt=Vt:Ee(Math.max(Lt,zt)+1)}}function G(ce,be){return be.lineNumber=ce.lineNumber,be.columnNumber=ce.columnNumber,be}function $(ce,be,Te,ve,Ce,$e,Je){function ge(It,xt,rt){if(u(Te.attributeNames,It))return $e.fatalError("Attribute "+It+" redefined");if(!Je&&xt.indexOf("<")>=0)return $e.fatalError("Unescaped '<' not allowed in attributes values");Te.addValue(It,xt.replace(/[\t\n\r]/g," ").replace(B,Ce),rt)}for(var Ee,Ie,Le=++be,Ve=g;;){var ht=ce.charAt(Le);switch(ht){case"=":if(Ve===_)Ee=ce.slice(be,Le),Ve=S;else if(Ve===C)Ve=S;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Ve===S||Ve===_)if(Ve===_&&($e.warning('attribute value must after "="'),Ee=ce.slice(be,Le)),be=Le+1,Le=ce.indexOf(ht,be),Le>0)Ie=ce.slice(be,Le),ge(Ee,Ie,be-1),Ve=O;else throw new Error("attribute value no end '"+ht+"' match");else if(Ve==I)Ie=ce.slice(be,Le),ge(Ee,Ie,be),$e.warning('attribute "'+Ee+'" missed start quot('+ht+")!!"),be=Le+1,Ve=O;else throw new Error('attribute value must after "="');break;case"/":switch(Ve){case g:Te.setTagName(ce.slice(be,Le));case O:case P:case k:Ve=k,Te.closed=!0;case I:case _:break;case C:Te.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return $e.error("unexpected end of input"),Ve==g&&Te.setTagName(ce.slice(be,Le)),Le;case">":switch(Ve){case g:Te.setTagName(ce.slice(be,Le));case O:case P:case k:break;case I:case _:Ie=ce.slice(be,Le),Ie.slice(-1)==="/"&&(Te.closed=!0,Ie=Ie.slice(0,-1));case C:Ve===C&&(Ie=Ee),Ve==I?($e.warning('attribute "'+Ie+'" missed quot(")!'),ge(Ee,Ie,be)):(Je||$e.warning('attribute "'+Ie+'" missed value!! "'+Ie+'" instead!!'),ge(Ie,Ie,be));break;case S:if(!Je)return $e.fatalError(`AttValue: ' or " expected`)}return Le;case"":ht=" ";default:if(ht<=" ")switch(Ve){case g:Te.setTagName(ce.slice(be,Le)),Ve=P;break;case _:Ee=ce.slice(be,Le),Ve=C;break;case I:var Ie=ce.slice(be,Le);$e.warning('attribute "'+Ie+'" missed quot(")!!'),ge(Ee,Ie,be);case O:Ve=P;break}else switch(Ve){case C:Je||$e.warning('attribute "'+Ee+'" missed value!! "'+Ee+'" instead2!!'),ge(Ee,Ee,be),be=Le,Ve=_;break;case O:$e.warning('attribute space is required"'+Ee+'"!!');case P:Ve=_,be=Le;break;case S:Ve=I,be=Le;break;case k:throw new Error("elements closed character '/' and '>' must be connected to")}}Le++}}function X(ce,be,Te){for(var ve=ce.tagName,Ce=null,Ve=ce.length;Ve--;){var $e=ce[Ve],Je=$e.qName,ge=$e.value,ht=Je.indexOf(":");if(ht>0)var Ee=$e.prefix=Je.slice(0,ht),Ie=Je.slice(ht+1),Le=Ee==="xmlns"&&Ie;else Ie=Je,Ee=null,Le=Je==="xmlns"&&"";$e.localName=Ie,Le!==!1&&(Ce==null&&(Ce=Object.create(null),J(Te,Te=Object.create(null))),Te[Le]=Ce[Le]=ge,$e.uri=a.XMLNS,be.startPrefixMapping(Le,ge))}for(var Ve=ce.length;Ve--;)$e=ce[Ve],$e.prefix&&($e.prefix==="xml"&&($e.uri=a.XML),$e.prefix!=="xmlns"&&($e.uri=Te[$e.prefix]));var ht=ve.indexOf(":");ht>0?(Ee=ce.prefix=ve.slice(0,ht),Ie=ce.localName=ve.slice(ht+1)):(Ee=null,Ie=ce.localName=ve);var It=ce.uri=Te[Ee||""];if(be.startElement(It,Ie,ve,ce),ce.closed){if(be.endElement(It,Ie,ve),Ce)for(Ee in Ce)u(Ce,Ee)&&be.endPrefixMapping(Ee)}else return ce.currentNSMap=Te,ce.localNSMap=Ce,!0}function ee(ce,be,Te,ve,Ce){var $e=n(Te);if($e||s(Te)){var Je=ce.indexOf("</"+Te+">",be),ge=ce.substring(be+1,Je);return $e&&(ge=ge.replace(B,ve)),Ce.characters(ge,0,ge.length),Je}return be+1}function J(ce,be){for(var Te in ce)u(ce,Te)&&(be[Te]=ce[Te])}function le(ce,be){var Te=be;function ve(Le){return Le=Le||0,ce.charAt(Te+Le)}function Ce(Le){Le=Le||1,Te+=Le}function $e(){for(var Le=0;Te<ce.length;){var Ve=ve();if(Ve!==" "&&Ve!==`
`&&Ve!=="	"&&Ve!=="\r")return Le;Le++,Ce()}return-1}function Je(){return ce.substring(Te)}function ge(Le){return ce.substring(Te,Te+Le.length)===Le}function Ee(Le){return ce.substring(Te,Te+Le.length).toUpperCase()===Le.toUpperCase()}function Ie(Le){var Ve=t.reg("^",Le),ht=Ve.exec(Je());return ht?(Ce(ht[0].length),ht[0]):null}return{char:ve,getIndex:function(){return Te},getMatch:Ie,getSource:function(){return ce},skip:Ce,skipBlanks:$e,substringFromIndex:Je,substringStartsWith:ge,substringStartsWithCaseInsensitive:Ee}}function Z(ce,be){function Te(ge,Ee){var Ie=t.PI.exec(ge.substringFromIndex());return Ie?Ie[1].toLowerCase()==="xml"?Ee.fatalError("xml declaration is only allowed at the start of the document, but found at position "+ge.getIndex()):(ge.skip(Ie[0].length),Ie[0]):Ee.fatalError("processing instruction is not well-formed at position "+ge.getIndex())}var ve=ce.getSource();if(ce.char()==="["){ce.skip(1);for(var Ce=ce.getIndex();ce.getIndex()<ve.length;){if(ce.skipBlanks(),ce.char()==="]"){var $e=ve.substring(Ce,ce.getIndex());return ce.skip(1),$e}var Je=null;if(ce.char()==="<"&&ce.char(1)==="!")switch(ce.char(2)){case"E":ce.char(3)==="L"?Je=ce.getMatch(t.elementdecl):ce.char(3)==="N"&&(Je=ce.getMatch(t.EntityDecl));break;case"A":Je=ce.getMatch(t.AttlistDecl);break;case"N":Je=ce.getMatch(t.NotationDecl);break;case"-":Je=ce.getMatch(t.Comment);break}else if(ce.char()==="<"&&ce.char(1)==="?")Je=Te(ce,be);else if(ce.char()==="%")Je=ce.getMatch(t.PEReference);else return be.fatalError("Error detected in Markup declaration");if(!Je)return be.fatalError("Error in internal subset at position "+ce.getIndex())}return be.fatalError("doctype internal subset is not well-formed, missing ]")}}function H(ce,be,Te,ve,Ce){var $e=le(ce,be);switch(Ce?$e.char(2).toUpperCase():$e.char(2)){case"-":var Je=$e.getMatch(t.Comment);return Je?(Te.comment(Je,t.COMMENT_START.length,Je.length-t.COMMENT_START.length-t.COMMENT_END.length),$e.getIndex()):ve.fatalError("comment is not well-formed at position "+$e.getIndex());case"[":var ge=$e.getMatch(t.CDSect);return ge?!Ce&&!Te.currentElement?ve.fatalError("CDATA outside of element"):(Te.startCDATA(),Te.characters(ge,t.CDATA_START.length,ge.length-t.CDATA_START.length-t.CDATA_END.length),Te.endCDATA(),$e.getIndex()):ve.fatalError("Invalid CDATA starting at position "+be);case"D":{if(Te.doc&&Te.doc.documentElement)return ve.fatalError("Doctype not allowed inside or after documentElement at position "+$e.getIndex());if(Ce?!$e.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!$e.substringStartsWith(t.DOCTYPE_DECL_START))return ve.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+$e.getIndex());if($e.skip(t.DOCTYPE_DECL_START.length),$e.skipBlanks()<1)return ve.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+$e.getIndex());var Ee={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(Ee.name=$e.getMatch(t.Name),!Ee.name)return ve.fatalError("doctype name missing or contains unexpected characters at position "+$e.getIndex());if(Ce&&Ee.name.toLowerCase()!=="html"&&ve.warning("Unexpected DOCTYPE in HTML document at position "+$e.getIndex()),$e.skipBlanks(),$e.substringStartsWith(t.PUBLIC)||$e.substringStartsWith(t.SYSTEM)){var Ie=t.ExternalID_match.exec($e.substringFromIndex());if(!Ie)return ve.fatalError("doctype external id is not well-formed at position "+$e.getIndex());Ie.groups.SystemLiteralOnly!==void 0?Ee.systemId=Ie.groups.SystemLiteralOnly:(Ee.systemId=Ie.groups.SystemLiteral,Ee.publicId=Ie.groups.PubidLiteral),$e.skip(Ie[0].length)}else if(Ce&&$e.substringStartsWithCaseInsensitive(t.SYSTEM)){if($e.skip(t.SYSTEM.length),$e.skipBlanks()<1)return ve.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+$e.getIndex());if(Ee.systemId=$e.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!Ee.systemId)return ve.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+$e.getIndex())}return Ce&&Ee.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(Ee.systemId)&&ve.warning("Unexpected doctype.systemId in HTML document at position "+$e.getIndex()),Ce||($e.skipBlanks(),Ee.internalSubset=Z($e,ve)),$e.skipBlanks(),$e.char()!==">"?ve.fatalError("doctype not terminated with > at position "+$e.getIndex()):($e.skip(1),Te.startDTD(Ee.name,Ee.publicId,Ee.systemId,Ee.internalSubset),Te.endDTD(),$e.getIndex())}default:return ve.fatalError('Not well-formed XML starting with "<!" at position '+be)}}function oe(ce,be,Te,ve){var Ce=ce.substring(be).match(t.PI);if(!Ce)return ve.fatalError("Invalid processing instruction starting at position "+be);if(Ce[1].toLowerCase()==="xml"){if(be>0)return ve.fatalError("processing instruction at position "+be+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(ce.substring(be)))return ve.fatalError("xml declaration is not well-formed")}return Te.processingInstruction(Ce[1],Ce[2]),be+Ce[0].length}function ue(){this.attributeNames=Object.create(null)}return ue.prototype={setTagName:function(ce){if(!t.QName_exact.test(ce))throw new Error("invalid tagName:"+ce);this.tagName=ce},addValue:function(ce,be,Te){if(!t.QName_exact.test(ce))throw new Error("invalid attribute:"+ce);this.attributeNames[ce]=this.length,this[this.length++]={qName:ce,value:be,offset:Te}},length:0,getLocalName:function(ce){return this[ce].localName},getLocator:function(ce){return this[ce].locator},getQName:function(ce){return this[ce].qName},getURI:function(ce){return this[ce].uri},getValue:function(ce){return this[ce].value}},xv.XMLReader=F,xv.parseUtils=le,xv.parseDoctypeCommentOrCData=H,xv}var oj;function rbe(){if(oj)return pp;oj=1;var e=vy(),t=TG(),r=tw(),n=ebe(),i=tbe(),s=t.DOMImplementation,u=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,p=e.isValidMimeType,d=e.MIME_TYPE,g=e.NAMESPACE,_=r.ParseError,C=i.XMLReader;function S($){return $.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function I($){if($=$||{},$.locator===void 0&&($.locator=!0),this.assign=$.assign||e.assign,this.domHandler=$.domHandler||O,this.onError=$.onError||$.errorHandler,$.errorHandler&&typeof $.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");$.errorHandler&&$.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=$.normalizeLineEndings||S,this.locator=!!$.locator,this.xmlns=this.assign(Object.create(null),$.xmlns)}I.prototype.parseFromString=function($,X){if(!p(X))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+X+'" is not valid.');var ee=this.assign(Object.create(null),this.xmlns),J=n.XML_ENTITIES,le=ee[""]||null;u(X)?(J=n.HTML_ENTITIES,le=g.HTML):X===d.XML_SVG_IMAGE&&(le=g.SVG),ee[""]=le,ee.xml=ee.xml||g.XML;var Z=new this.domHandler({mimeType:X,defaultNamespace:le,onError:this.onError}),H=this.locator?{}:void 0;this.locator&&Z.setDocumentLocator(H);var oe=new C;oe.errorHandler=Z,oe.domBuilder=Z;var ue=!e.isHTMLMimeType(X);return ue&&typeof $!="string"&&oe.errorHandler.fatalError("source is not a string"),oe.parse(this.normalizeLineEndings(String($)),ee,J),Z.doc.documentElement||oe.errorHandler.fatalError("missing root element"),Z.doc};function O($){var X=$||{};this.mimeType=X.mimeType||d.XML_APPLICATION,this.defaultNamespace=X.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=X.onError}function P($,X){X.lineNumber=$.lineNumber,X.columnNumber=$.columnNumber}O.prototype={startDocument:function(){var $=new s;this.doc=a(this.mimeType)?$.createHTMLDocument(!1):$.createDocument(this.defaultNamespace,"")},startElement:function($,X,ee,J){var le=this.doc,Z=le.createElementNS($,ee||X),H=J.length;B(this,Z),this.currentElement=Z,this.locator&&P(this.locator,Z);for(var oe=0;oe<H;oe++){var $=J.getURI(oe),ue=J.getValue(oe),ee=J.getQName(oe),ce=le.createAttributeNS($,ee);this.locator&&P(J.getLocator(oe),ce),ce.value=ce.nodeValue=ue,Z.setAttributeNode(ce)}},endElement:function($,X,ee){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function($,X){},endPrefixMapping:function($){},processingInstruction:function($,X){var ee=this.doc.createProcessingInstruction($,X);this.locator&&P(this.locator,ee),B(this,ee)},ignorableWhitespace:function($,X,ee){},characters:function($,X,ee){if($=F.apply(this,arguments),$){if(this.cdata)var J=this.doc.createCDATASection($);else var J=this.doc.createTextNode($);this.currentElement?this.currentElement.appendChild(J):/^\s*$/.test($)&&this.doc.appendChild(J),this.locator&&P(this.locator,J)}},skippedEntity:function($){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function($){$&&($.lineNumber=0),this.locator=$},comment:function($,X,ee){$=F.apply(this,arguments);var J=this.doc.createComment($);this.locator&&P(this.locator,J),B(this,J)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function($,X,ee,J){var le=this.doc.implementation;if(le&&le.createDocumentType){var Z=le.createDocumentType($,X,ee,J);this.locator&&P(this.locator,Z),B(this,Z),this.doc.doctype=Z}},reportError:function($,X){if(typeof this.onError=="function")try{this.onError($,X,this)}catch(ee){throw new _("Reporting "+$+' "'+X+'" caused '+ee,this.locator)}else console.error("[xmldom "+$+"]	"+X,k(this.locator))},warning:function($){this.reportError("warning",$)},error:function($){this.reportError("error",$)},fatalError:function($){throw this.reportError("fatalError",$),new _($,this.locator)}};function k($){if($)return`
@#[line:`+$.lineNumber+",col:"+$.columnNumber+"]"}function F($,X,ee){return typeof $=="string"?$.substr(X,ee):$.length>=X+ee||X?new java.lang.String($,X,ee)+"":$}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function($){O.prototype[$]=function(){return null}});function B($,X){$.currentElement?$.currentElement.appendChild(X):$.doc.appendChild(X)}function N($){if($==="error")throw"onErrorStopParsing"}function G(){throw"onWarningStopParsing"}return pp.__DOMHandler=O,pp.DOMParser=I,pp.normalizeLineEndings=S,pp.onErrorStopParsing=N,pp.onWarningStopParsing=G,pp}var sj;function nbe(){if(sj)return Di;sj=1;var e=vy();Di.assign=e.assign,Di.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,Di.isHTMLMimeType=e.isHTMLMimeType,Di.isValidMimeType=e.isValidMimeType,Di.MIME_TYPE=e.MIME_TYPE,Di.NAMESPACE=e.NAMESPACE;var t=tw();Di.DOMException=t.DOMException,Di.DOMExceptionName=t.DOMExceptionName,Di.ExceptionCode=t.ExceptionCode,Di.ParseError=t.ParseError;var r=TG();Di.Attr=r.Attr,Di.CDATASection=r.CDATASection,Di.CharacterData=r.CharacterData,Di.Comment=r.Comment,Di.Document=r.Document,Di.DocumentFragment=r.DocumentFragment,Di.DocumentType=r.DocumentType,Di.DOMImplementation=r.DOMImplementation,Di.Element=r.Element,Di.Entity=r.Entity,Di.EntityReference=r.EntityReference,Di.LiveNodeList=r.LiveNodeList,Di.NamedNodeMap=r.NamedNodeMap,Di.Node=r.Node,Di.NodeList=r.NodeList,Di.Notation=r.Notation,Di.ProcessingInstruction=r.ProcessingInstruction,Di.Text=r.Text,Di.XMLSerializer=r.XMLSerializer;var n=rbe();return Di.DOMParser=n.DOMParser,Di.normalizeLineEndings=n.normalizeLineEndings,Di.onErrorStopParsing=n.onErrorStopParsing,Di.onWarningStopParsing=n.onWarningStopParsing,Di}var ibe=nbe();(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(N){if(!N||!N.length)return 0;for(var G=0,$=0;G<N.length;G++)$=($<<5)-$+N.charCodeAt(G)|0;return $}function i(N,G){return N.getElementsByTagName(G)}function s(N,G){return N.getAttribute(G)}function u(N,G){return parseFloat(s(N,G))}function a(N,G){const $=i(N,G);return $.length?$[0]:null}function p(N){return N.normalize&&N.normalize(),N}function d(N){for(var G=0,$=[];G<N.length;G++)$[G]=parseFloat(N[G]);return $}function g(N){return N&&p(N),N&&N.textContent||""}function _(N,G){let $={},X,ee;for(ee=0;ee<G.length;ee++)X=a(N,G[ee]),X&&($[G[ee]]=g(X));return $}function C(N,G){for(const $ in G)N[$]=G[$]}function S(N){return d(N.replace(e,"").split(","))}function I(N){const G=N.replace(t,"").split(r),$=[];for(let X=0;X<G.length;X++)$.push(S(G[X]));return $}function O(N){let G=[u(N,"lon"),u(N,"lat")],$=a(N,"ele"),X=a(N,"gpxtpx:hr")||a(N,"hr"),ee=a(N,"time"),J;return $&&(J=parseFloat(g($)),isNaN(J)||G.push(J)),{coordinates:G,time:ee?g(ee):null,heartRate:X?parseFloat(g(X)):null}}function P(){return{type:"FeatureCollection",features:[]}}let k;if(typeof XMLSerializer<"u")k=new XMLSerializer;else{const N=typeof process=="object"&&!process.browser,G=typeof Titanium=="object";if(typeof exports=="object"&&(N||G))k=ibe.XMLSerializer;else throw new Error("Unable to initialize serializer")}function F(N){return N.xml!==void 0?N.xml:k.serializeToString(N)}return{kml:function(N){const G=P(),$={},X={},ee={},J=["Polygon","LineString","Point","Track","gx:Track"],le=i(N,"Placemark"),Z=i(N,"Style"),H=i(N,"StyleMap");for(let ve=0;ve<Z.length;ve++){const Ce=n(F(Z[ve])).toString(16);$["#"+s(Z[ve],"id")]=Ce,X[Ce]=Z[ve]}for(let ve=0;ve<H.length;ve++){$["#"+s(H[ve],"id")]=n(F(H[ve])).toString(16);const Ce=i(H[ve],"Pair"),$e={};for(let Je=0;Je<Ce.length;Je++)$e[g(a(Ce[Je],"key"))]=g(a(Ce[Je],"styleUrl"));ee["#"+s(H[ve],"id")]=$e}for(let ve=0;ve<le.length;ve++)G.features=G.features.concat(Te(le[ve]));function oe(ve){let Ce,$e;return ve=ve||"",ve.substr(0,1)==="#"&&(ve=ve.substr(1)),(ve.length===6||ve.length===3)&&(Ce=ve),ve.length===8&&($e=parseInt(ve.substr(0,2),16)/255,Ce="#"+ve.substr(6,2)+ve.substr(4,2)+ve.substr(2,2)),[Ce,isNaN($e)?void 0:$e]}function ue(ve){return d(ve.split(" "))}function ce(ve){let Ce=i(ve,"coord"),$e=[],Je=[];Ce.length===0&&(Ce=i(ve,"gx:coord"));for(let Ee=0;Ee<Ce.length;Ee++)$e.push(ue(g(Ce[Ee])));const ge=i(ve,"when");for(let Ee=0;Ee<ge.length;Ee++)Je.push(g(ge[Ee]));return{coords:$e,times:Je}}function be(ve){let Ce,$e,Je,ge,Ee,Ie=[],Le=[];if(a(ve,"MultiGeometry"))return be(a(ve,"MultiGeometry"));if(a(ve,"MultiTrack"))return be(a(ve,"MultiTrack"));if(a(ve,"gx:MultiTrack"))return be(a(ve,"gx:MultiTrack"));for(Je=0;Je<J.length;Je++)if($e=i(ve,J[Je]),$e){for(ge=0;ge<$e.length;ge++)if(Ce=$e[ge],J[Je]==="Point")Ie.push({type:"Point",coordinates:S(g(a(Ce,"coordinates")))});else if(J[Je]==="LineString")Ie.push({type:"LineString",coordinates:I(g(a(Ce,"coordinates")))});else if(J[Je]==="Polygon"){const Ve=i(Ce,"LinearRing"),ht=[];for(Ee=0;Ee<Ve.length;Ee++)ht.push(I(g(a(Ve[Ee],"coordinates"))));Ie.push({type:"Polygon",coordinates:ht})}else if(J[Je]==="Track"||J[Je]==="gx:Track"){const Ve=ce(Ce);Ie.push({type:"LineString",coordinates:Ve.coords}),Ve.times.length&&Le.push(Ve.times)}}return{geoms:Ie,coordTimes:Le}}function Te(ve){let Ce=be(ve),$e,Je={},ge=g(a(ve,"name")),Ee=g(a(ve,"address")),Ie=g(a(ve,"styleUrl")),Le=g(a(ve,"description")),Ve=a(ve,"TimeSpan"),ht=a(ve,"TimeStamp"),It=a(ve,"ExtendedData"),xt=a(ve,"LineStyle"),rt=a(ve,"PolyStyle"),zt=a(ve,"visibility");if(!Ce.geoms.length)return[];if(ge&&(Je.name=ge),Ee&&(Je.address=Ee),Ie){Ie[0]!=="#"&&(Ie="#"+Ie),Je.styleUrl=Ie,$[Ie]&&(Je.styleHash=$[Ie]),ee[Ie]&&(Je.styleMapHash=ee[Ie],Je.styleHash=$[ee[Ie].normal]);const Ft=X[Je.styleHash];if(Ft){xt||(xt=a(Ft,"LineStyle")),rt||(rt=a(Ft,"PolyStyle"));const dt=a(Ft,"IconStyle");if(dt){const ke=a(dt,"Icon");if(ke){const fr=g(a(ke,"href"));fr&&(Je.icon=fr)}}}}if(Le&&(Je.description=Le),Ve){const Ft=g(a(Ve,"begin")),dt=g(a(Ve,"end"));Je.timespan={begin:Ft,end:dt}}if(ht&&(Je.timestamp=g(a(ht,"when"))),xt){const Ft=oe(g(a(xt,"color"))),dt=Ft[0],ke=Ft[1],fr=parseFloat(g(a(xt,"width")));dt&&(Je.stroke=dt),isNaN(ke)||(Je["stroke-opacity"]=ke),isNaN(fr)||(Je["stroke-width"]=fr)}if(rt){const Ft=oe(g(a(rt,"color"))),dt=Ft[0],ke=Ft[1],fr=g(a(rt,"fill")),sr=g(a(rt,"outline"));dt&&(Je.fill=dt),isNaN(ke)||(Je["fill-opacity"]=ke),fr&&(Je["fill-opacity"]=fr==="1"?Je["fill-opacity"]||1:0),sr&&(Je["stroke-opacity"]=sr==="1"?Je["stroke-opacity"]||1:0)}if(It){const Ft=i(It,"Data"),dt=i(It,"SimpleData");for($e=0;$e<Ft.length;$e++)Je[Ft[$e].getAttribute("name")]=g(a(Ft[$e],"value"));for($e=0;$e<dt.length;$e++)Je[dt[$e].getAttribute("name")]=g(dt[$e])}zt&&(Je.visibility=g(zt)),Ce.coordTimes.length&&(Je.coordTimes=Ce.coordTimes.length===1?Ce.coordTimes[0]:Ce.coordTimes);const Lt={type:"Feature",geometry:Ce.geoms.length===1?Ce.geoms[0]:{type:"GeometryCollection",geometries:Ce.geoms},properties:Je};return s(ve,"id")&&(Lt.id=s(ve,"id")),[Lt]}return G},gpx:function(N){let G,$=i(N,"trk"),X=i(N,"rte"),ee=i(N,"wpt"),J=P(),le;for(G=0;G<$.length;G++)le=oe($[G]),le&&J.features.push(le);for(G=0;G<X.length;G++)le=ue(X[G]),le&&J.features.push(le);for(G=0;G<ee.length;G++)J.features.push(ce(ee[G]));function Z(ve,Ce){for(let $e=0;$e<Ce;$e++)ve.push(null);return ve}function H(ve,Ce){const $e=i(ve,Ce),Je=[],ge=[],Ee=[],Ie=$e.length;if(Ie<2)return{};for(let Le=0;Le<Ie;Le++){const Ve=O($e[Le]);Je.push(Ve.coordinates),Ve.time&&ge.push(Ve.time),(Ve.heartRate||Ee.length)&&(Ee.length||Z(Ee,Le),Ee.push(Ve.heartRate||null))}return{line:Je,times:ge,heartRates:Ee}}function oe(ve){let Ce=i(ve,"trkseg"),$e=[],Je=[],ge=[],Ee;for(let Le=0;Le<Ce.length;Le++)if(Ee=H(Ce[Le],"trkpt"),Ee&&(Ee.line&&$e.push(Ee.line),Ee.times&&Ee.times.length&&Je.push(Ee.times),ge.length||Ee.heartRates&&Ee.heartRates.length)){if(!ge.length)for(let Ve=0;Ve<Le;Ve++)ge.push(Z([],$e[Ve].length));Ee.heartRates&&Ee.heartRates.length?ge.push(Ee.heartRates):ge.push(Z([],Ee.line.length||0))}if($e.length===0)return;const Ie=Te(ve);return C(Ie,be(a(ve,"extensions"))),Je.length&&(Ie.coordTimes=$e.length===1?Je[0]:Je),ge.length&&(Ie.heartRates=$e.length===1?ge[0]:ge),{type:"Feature",properties:Ie,geometry:{type:$e.length===1?"LineString":"MultiLineString",coordinates:$e.length===1?$e[0]:$e}}}function ue(ve){const Ce=H(ve,"rtept");if(!Ce.line)return;const $e=Te(ve);return C($e,be(a(ve,"extensions"))),{type:"Feature",properties:$e,geometry:{type:"LineString",coordinates:Ce.line}}}function ce(ve){const Ce=Te(ve);return C(Ce,_(ve,["sym"])),{type:"Feature",properties:Ce,geometry:{type:"Point",coordinates:O(ve).coordinates}}}function be(ve){const Ce={};if(ve){const $e=a(ve,"line");if($e){const Je=g(a($e,"color")),ge=parseFloat(g(a($e,"opacity"))),Ee=parseFloat(g(a($e,"width")));Je&&(Ce.stroke=Je),isNaN(ge)||(Ce["stroke-opacity"]=ge),isNaN(Ee)||(Ce["stroke-width"]=Ee*96/25.4)}}return Ce}function Te(ve){const Ce=_(ve,["name","cmt","desc","type","time","keywords"]),$e=i(ve,"link");$e.length&&(Ce.links=[]);for(let Je=0,ge;Je<$e.length;Je++)ge={href:s($e[Je],"href")},C(ge,_($e[Je],["text","type"])),Ce.links.push(ge);return Ce}return J}}})();const abe=qe.createContext({});abe.Provider;const obe=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e};obe();/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Ti=e=>e!==void 0,PG=(e,t,r)=>t in e?e[t]:e[t]=r;const ax={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function LO(e,t){return IG(e,t,[]).join("")}function IG(e,t,r){if(e.nodeType===ax.CDATA_SECTION||e.nodeType===ax.TEXT)r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)IG(n,t,r)}return r}function sbe(e,t,r,n){for(var i=lbe(t);i;i=ube(i)){var s=i.namespaceURI||null,u=e[s];if(Ti(u)){var a=u[i.localName];Ti(a)&&a.call(n,i,r)}}}function lbe(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==ax.ELEMENT;)t=t.nextSibling;return t}function ube(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==ax.ELEMENT;)t=t.nextSibling;return t}function nl(e,t,r){return cbe(e,t,r)}function cbe(e,t,r){var n=Ti(r)?r:{},i,s;for(i=0,s=e.length;i<s;++i)n[e[i]]=t;return n}function MG(e,t){return(function(r,n){var i=e.call(Ti(t)?t:this,r,n);if(Ti(i)){var s=n[n.length-1];s.push(i)}})}function il(e,t,r,n,i){return n.push(e),sbe(t,r,n,i),n.pop()}function An(e,t,r){return(function(n,i){let s=e.call(Ti(r)?r:this,n,i);if(Ti(s)){var u=i[i.length-1],a=Ti(t)?t:n.localName;u[a]=s}})}function lu(e,t,r){return(function(n,i){var s=e.call(Ti(r)?r:this,n,i);if(Ti(s)){var u=i[i.length-1],a=Ti(t)?t:n.localName,p=PG(u,a,[]);p.push(s)}})}const fbe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function hbe(e){return e.replace(fbe,"")}function jp(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Ti(t[1])||!1}function Ig(e){return Oh(LO(e,!1))}function Oh(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function dA(e){return ox(LO(e,!1))}function ox(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Hi(e){return hbe(LO(e,!1))}const dbe="http://www.w3.org/1999/xlink";function DO(e){return e.getAttributeNS(dbe,"href")}function pbe(e,t){return il({},zbe,e,t)}function OG(e){return[Oh(e.getAttribute("minx")),Oh(e.getAttribute("miny")),Oh(e.getAttribute("maxx")),Oh(e.getAttribute("maxy"))]}function mbe(e,t){const r=OG(e),n=[Oh(e.getAttribute("resx")),Oh(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function gbe(e,t){const r=OG(e);if(!(!Ti(r[0])||!Ti(r[1])||!Ti(r[2])||!Ti(r[3])))return r}function ybe(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function vbe(e,t){const r=il({},$be,e,t);if(!Ti(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,s=r.eastBoundLongitude,u=r.northBoundLatitude;if(!(!Ti(n)||!Ti(i)||!Ti(s)||!Ti(u)))return[n,i,s,u]}function bbe(e,t){return il({},Dbe,e,t)}function _be(e,t){return il({},kbe,e,t)}function xbe(e,t){return il({},Fbe,e,t)}function wbe(e,t){return il({},Nbe,e,t)}function Sbe(e,t){return il({},Bbe,e,t)}function Ebe(e,t){return il([],jbe,e,t)}function Cbe(e,t){const r=jp(e.getAttribute("queryable"));return il({queryable:Ti(r)?r:!1},DG,e,t)}function Abe(e,t){var r=t[t.length-1];const n=il({},DG,e,t);if(!Ti(n))return;let i=jp(e.getAttribute("queryable"));Ti(i)||(i=r.queryable),n.queryable=Ti(i)?i:!1;let s=ox(e.getAttribute("cascaded"));Ti(s)||(s=r.cascaded),n.cascaded=s;let u=jp(e.getAttribute("opaque"));Ti(u)||(u=r.opaque),n.opaque=Ti(u)?u:!1;let a=jp(e.getAttribute("noSubsets"));Ti(a)||(a=r.noSubsets),n.noSubsets=Ti(a)?a:!1;let p=Oh(e.getAttribute("fixedWidth"));Ti(p)||(p=r.fixedWidth),n.fixedWidth=p;let d=Oh(e.getAttribute("fixedHeight"));Ti(d)||(d=r.fixedHeight),n.fixedHeight=d;const g=["Style","CRS","AuthorityURL"];for(let C=0,S=g.length;C<S;C++){const I=g[C],O=r[I];if(Ti(O)){let P=PG(n,I,[]);P=P.concat(O),n[I]=P}}const _=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let C=0,S=_.length;C<S;C++){const I=_[C],O=n[I];if(!Ti(O)){const P=r[I];n[I]=P}}return n}function Tbe(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:jp(e.getAttribute("multipleValues")),nearestValue:jp(e.getAttribute("nearestValue")),current:jp(e.getAttribute("current")),values:Hi(e)}}function Nh(e,t){return il({},Wbe,e,t)}function Pbe(e,t){return il({},qbe,e,t)}function Ibe(e,t){return il({},Vbe,e,t)}function Mbe(e,t){return il({},Gbe,e,t)}function pA(e,t){return il({},Ube,e,t)}function RG(e,t){var r=Nh(e,t);if(Ti(r)){const n=[ox(e.getAttribute("width")),ox(e.getAttribute("height"))];return r.size=n,r}}function Obe(e,t){var r=Nh(e,t);if(Ti(r))return r.name=e.getAttribute("name"),r}function Rbe(e,t){var r=Nh(e,t);if(Ti(r))return r.type=e.getAttribute("type"),r}function Lbe(e,t){return il({},Hbe,e,t)}function LG(e,t){return il([],Zbe,e,t)}const al=[null,"http://www.opengis.net/wms"];nl(al,{Service:An(_be),Capability:An(bbe)});const Dbe=nl(al,{Request:An(Pbe),Exception:An(Ebe),Layer:An(Cbe)}),kbe=nl(al,{Name:An(Hi),Title:An(Hi),Abstract:An(Hi),KeywordList:An(LG),OnlineResource:An(DO),ContactInformation:An(xbe),Fees:An(Hi),AccessConstraints:An(Hi),LayerLimit:An(dA),MaxWidth:An(dA),MaxHeight:An(dA)}),Fbe=nl(al,{ContactPersonPrimary:An(wbe),ContactPosition:An(Hi),ContactAddress:An(Sbe),ContactVoiceTelephone:An(Hi),ContactFacsimileTelephone:An(Hi),ContactElectronicMailAddress:An(Hi)}),Nbe=nl(al,{ContactPerson:An(Hi),ContactOrganization:An(Hi)}),Bbe=nl(al,{AddressType:An(Hi),Address:An(Hi),City:An(Hi),StateOrProvince:An(Hi),PostCode:An(Hi),Country:An(Hi)}),jbe=nl(al,{Format:MG(Hi)}),DG=nl(al,{Name:An(Hi),Title:An(Hi),Abstract:An(Hi),KeywordList:An(LG),CRS:lu(Hi),SRS:lu(Hi),EX_GeographicBoundingBox:An(vbe),LatLonBoundingBox:An(gbe),BoundingBox:lu(mbe),Dimension:lu(Tbe),Attribution:An(pbe),AuthorityURL:lu(Obe),Identifier:lu(Hi),MetadataURL:lu(Rbe),DataURL:lu(Nh),FeatureListURL:lu(Nh),Style:lu(Lbe),MinScaleDenominator:An(Ig),MaxScaleDenominator:An(Ig),ScaleHint:An(ybe),Layer:lu(Abe)}),zbe=nl(al,{Title:An(Hi),OnlineResource:An(DO),LogoURL:An(RG)}),$be=nl(al,{westBoundLongitude:An(Ig),eastBoundLongitude:An(Ig),southBoundLatitude:An(Ig),northBoundLatitude:An(Ig)}),qbe=nl(al,{GetCapabilities:An(pA),GetMap:An(pA),GetFeatureInfo:An(pA)}),Ube=nl(al,{Format:lu(Hi),DCPType:lu(Ibe)}),Vbe=nl(al,{HTTP:An(Mbe)}),Gbe=nl(al,{Get:An(Nh),Post:An(Nh)}),Hbe=nl(al,{Name:An(Hi),Title:An(Hi),Abstract:An(Hi),LegendURL:lu(RG),StyleSheetURL:An(Nh),StyleURL:An(Nh)}),Wbe=nl(al,{Format:An(Hi),OnlineResource:An(DO)}),Zbe=nl(al,{Keyword:MG(Hi)});function kG(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function Xbe(e,t){var r=kG(e);return function(n,i){return t(r(n),i,e)}}function Kbe(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function kO(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(d,g){var _,C,S=i(d,function(I,O){if(_)return _(I,O-1);C=I,_=g?Xbe(I,g):kG(I)});return S.columns=C,S}function i(d,g){var _={},C={},S=[],I=d.length,O=0,P=0,k,F;function B(){if(O>=I)return C;if(F)return F=!1,_;var G=O,$;if(d.charCodeAt(G)===34){for(var X=G;X++<I;)if(d.charCodeAt(X)===34){if(d.charCodeAt(X+1)!==34)break;++X}return O=X+2,$=d.charCodeAt(X+1),$===13?(F=!0,d.charCodeAt(X+2)===10&&++O):$===10&&(F=!0),d.slice(G+1,X).replace(/""/g,'"')}for(;O<I;){var ee=1;if($=d.charCodeAt(O++),$===10)F=!0;else if($===13)F=!0,d.charCodeAt(O)===10&&(++O,++ee);else if($!==r)continue;return d.slice(G,O-ee)}return d.slice(G)}for(;(k=B())!==C;){for(var N=[];k!==_&&k!==C;)N.push(k),k=B();g&&(N=g(N,P++))==null||S.push(N)}return S}function s(d,g){return g==null&&(g=Kbe(d)),[g.map(p).join(e)].concat(d.map(function(_){return g.map(function(C){return p(_[C])}).join(e)})).join(`
`)}function u(d){return d.map(a).join(`
`)}function a(d){return d.map(p).join(e)}function p(d){return d==null?"":t.test(d+="")?'"'+d.replace(/\"/g,'""')+'"':d}return{parse:n,parseRows:i,format:s,formatRows:u}}var rw=kO(","),Ybe=rw.parse,Jbe=rw.parseRows,Qbe=rw.format,e_e=rw.formatRows,nw=kO("	"),t_e=nw.parse,r_e=nw.parseRows,n_e=nw.format,i_e=nw.formatRows;const a_e=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Qbe,csvFormatRows:e_e,csvParse:Ybe,csvParseRows:Jbe,dsvFormat:kO,tsvFormat:n_e,tsvFormatRows:i_e,tsvParse:t_e,tsvParseRows:r_e},Symbol.toStringTag,{value:"Module"})),o_e=FJ(a_e);var mp={exports:{}},lj;function s_e(){if(lj)return mp.exports;lj=1,mp.exports=e,mp.exports.pair=s,mp.exports.format=r,mp.exports.formatPair=t,mp.exports.coordToDMS=n;function e(a,p){var d=i(a,p);return d===null?null:d.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,p){var d=n(a,p);return d.whole+" "+(d.minutes?d.minutes+"' ":"")+(d.seconds?d.seconds+'" ':"")+d.dir}function n(a,p){var d={lat:["N","S"],lon:["E","W"]}[p]||"",g=d[a>=0?0:1],_=Math.abs(a),C=Math.floor(_),S=_-C,I=S*60,O=Math.floor(I),P=Math.floor((I-O)*60);return{whole:C,minutes:O,seconds:P,dir:g}}function i(a,p){if(p||(p="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var d=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,g=a.match(d);if(!g)return null;var _=g[0],C;if(g[1]&&g[5]?(C=g[1],_=_.slice(0,-1)):C=g[1]||g[5],C&&p.indexOf(C)===-1)return null;var S=g[2]?parseFloat(g[2]):0,I=g[3]?parseFloat(g[3])/60:0,O=g[4]?parseFloat(g[4])/3600:0,P=S<0?-1:1;return(C==="S"||C==="W")&&(P*=-1),{val:(Math.abs(S)+I+O)*P,dim:C,matched:_,remain:a.slice(_.length)}}function s(a,p){a=a.trim();var d=i(a,p);if(!d)return null;a=d.remain.trim();var g=i(a,p);return!g||g.remain?null:d.dim?u(d.val,g.val,d.dim):[d.val,g.val]}function u(a,p,d){if(d==="N"||d==="S")return[a,p];if(d==="W"||d==="E")return[p,a]}return mp.exports}var mA,uj;function l_e(){if(uj)return mA;uj=1;var e=o_e,t=s_e(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(P,k){var F,B,N;for(var G in P)B=G.match(k),B&&(!F||B[0].length/G.length>N)&&(N=B[0].length/G.length,F=G);return F}function s(P){return i(P,r)}function u(P){return i(P,n)}function a(P){return!!P.match(r)}function p(P){return!!P.match(n)}function d(P){return typeof P=="object"?Object.keys(P).length:0}function g(P){var k=[",",";","	","|"],F=[];return k.forEach(function(B){var N=e.dsvFormat(B).parse(P);if(N.length>=1){for(var G=d(N[0]),$=0;$<N.length;$++)if(d(N[$])!==G)return;F.push({delimiter:B,arity:Object.keys(N[0]).length})}}),F.length?F.sort(function(B,N){return N.arity-B.arity})[0].delimiter:null}function _(P){return delete P.columns,P}function C(P){var k=g(P);return k?_(e.dsvFormat(k).parse(P)):null}function S(P,k,F){F||(F=k,k={}),k.delimiter=k.delimiter||",";var B=k.latfield||"",N=k.lonfield||"",G=k.crs||"",$=[],X={type:"FeatureCollection",features:$};if(G!==""&&(X.crs={type:"name",properties:{name:G}}),k.delimiter==="auto"&&typeof P=="string"&&(k.delimiter=g(P),!k.delimiter)){F({type:"Error",message:"Could not autodetect delimiter"});return}var ee=k.numericFields?k.numericFields.split(","):null,J=typeof P=="string"?e.dsvFormat(k.delimiter).parse(P,function(ve){if(ee)for(var Ce in ve)ee.includes(Ce)&&(ve[Ce]=+ve[Ce]);return ve}):P;if(!J.length){F(null,X);return}var le=[],Z;B||(B=s(J[0])),N||(N=u(J[0]));var H=!B||!N;if(H){for(Z=0;Z<J.length;Z++)$.push({type:"Feature",properties:J[Z],geometry:null});F(le.length?le:null,X);return}for(Z=0;Z<J.length;Z++)if(J[Z][N]!==void 0&&J[Z][B]!==void 0){var oe=J[Z][N],ue=J[Z][B],ce,be,Te;Te=t(oe,"EW"),Te&&(oe=Te),Te=t(ue,"NS"),Te&&(ue=Te),ce=parseFloat(oe),be=parseFloat(ue),isNaN(ce)||isNaN(be)?le.push({message:"A row contained an invalid value for latitude or longitude",row:J[Z],index:Z}):(k.includeLatLon||(delete J[Z][N],delete J[Z][B]),$.push({type:"Feature",properties:J[Z],geometry:{type:"Point",coordinates:[parseFloat(ce),parseFloat(be)]}}))}F(le.length?le:null,X)}function I(P){for(var k=P.features,F={type:"Feature",geometry:{type:"LineString",coordinates:[]}},B=0;B<k.length;B++)F.geometry.coordinates.push(k[B].geometry.coordinates);return F.properties=k.reduce(function(N,G){for(var $ in G.properties)N[$]||(N[$]=[]),N[$].push(G.properties[$]);return N},{}),{type:"FeatureCollection",features:[F]}}function O(P){for(var k=P.features,F={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},B=0;B<k.length;B++)F.geometry.coordinates[0].push(k[B].geometry.coordinates);return F.properties=k.reduce(function(N,G){for(var $ in G.properties)N[$]||(N[$]=[]),N[$].push(G.properties[$]);return N},{}),{type:"FeatureCollection",features:[F]}}return mA={isLon:p,isLat:a,guessLatHeader:s,guessLonHeader:u,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:C,csv2geojson:S,toLine:I,toPolygon:O},mA}l_e();var ql={},cj;function wb(){if(cj)return ql;cj=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.purgeProps=e,ql.first=t,ql.last=r,ql.coordsToKey=n,ql.addToMap=i,ql.removeFromMap=s,ql.getFirstFromMap=u,ql.isRing=a,ql.ringDirection=p,ql.pointInsidePolygon=d,ql.strArrayArrayToFloat=g,ql.strArrayToFloat=_;function e(C,S){if(C){const I=Object.assign({},C);if(S)for(const O of S)delete I[O];return I}return{}}function t(C){return C[0]}function r(C){return C[C.length-1]}function n(C){return C.join(",")}function i(C,S,I){const O=C[S];O?O.push(I):C[S]=[I]}function s(C,S,I){const O=C[S];let P=-1;O&&(P=O.indexOf(I)),P>=0&&O.splice(P,1)}function u(C,S){const I=C[S];return I&&I.length>0?I[0]:null}function a(C){return C.length>3&&n(t(C))===n(r(C))}function p(C,S,I){S=S||0,I=I||1;const O=C.reduce((J,le,Z)=>C[J][S||0]>le[S||0]?J:Z,0),P=O<=0?C.length-2:O-1,k=O>=C.length-1?1:O+1,F=C[P][S],B=C[O][S],N=C[k][S],G=C[P][I],$=C[O][I],X=C[k][I];return(B-F)*(X-G)-(N-F)*($-G)<0?"clockwise":"counterclockwise"}function d(C,S,I,O){I=I||0,O=O||1;let P=!1;for(let k=0,F=S.length-1;k<S.length;F=k++)(S[k][I]<=C[I]&&C[I]<S[F][I]||S[F][I]<=C[I]&&C[I]<S[k][I])&&C[O]<(S[F][O]-S[k][O])*(C[I]-S[k][I])/(S[F][I]-S[k][I])+S[k][O]&&(P=!P);return P}function g(C){return C.map(_)}function _(C){return C.map(parseFloat)}return ql}var wv={},fj;function u_e(){if(fj)return wv;fj=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const s=/^(.+?)\[(.+?)\]>$/g.exec(i);return s?{evt:s[1]+">",exp:s[2]}:{evt:i}}function r(i){const s="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",s)}class n{constructor(s){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,s&&(this.queryParent=!!s.queryParent,this.progressive=s.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(s,u,a){a=a?a+".":"";const p=/<([^ >\/]+)(.*?)>/mg,d=[];let g=p.exec(s);for(;g;){const _=g[1],C={$tag:_},S=a+_,I=g[2].trim();let O=!1;(I.endsWith("/")||_.startsWith("?")||_.startsWith("!"))&&(O=!0);const P=/([^ ]+?)="(.+?)"/g,k=/([^ ]+?)='(.+?)'/g;let F=P.exec(I),B=!1;for(;F;)B=!0,C[F[1]]=F[2],F=P.exec(I);if(!B)for(F=k.exec(I);F;)B=!0,C[F[1]]=F[2],F=k.exec(I);if(!B&&I!==""&&(C.text=I),this.progressive&&this.emit(`<${S}>`,C,u),!O){const N=new RegExp(`([^]+?)</${_}>`,"g");N.lastIndex=p.lastIndex;const G=N.exec(s);if(G&&G[1]){p.lastIndex=N.lastIndex;const $=this.parse(G[1],C,S);$.length>0?C.$innerNodes=$:C.$innerText=G[1]}}this.queryParent&&u&&this.parentMap.set(C,u),this.progressive&&this.emit(`</${S}>`,C,u),d.push(C),g=p.exec(s)}return d}getParent(s){return this.queryParent?this.parentMap.get(s):null}addListener(s,u){if(e(s)){const a=t(s);a.exp&&(u.condition=r(a.exp)),s=a.evt}this.$addListener(s,u)}removeListener(s,u){e(s)&&(s=t(s).evt),this.$removeListener(s,u)}on(s,u){this.addListener(s,u)}off(s,u){this.removeListener(s,u)}$addListener(s,u){const a=this.evtListeners[s];a?a.push(u):this.evtListeners[s]=[u]}$removeListener(s,u){const a=this.evtListeners[s];let p=-1;a&&(p=a.indexOf(u)),p>=0&&a.splice(p,1)}emit(s,...u){const a=this.evtListeners[s];if(a)for(const p of a)p.condition?p.condition.apply(null,u)===!0&&p.apply(null,u):p.apply(null,u)}}return wv.XmlParser=n,wv}var Sv={},Ev={},hj;function FO(){if(hj)return Ev;hj=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return Ev.OsmObject=e,Ev}var dj;function FG(){if(dj)return Sv;dj=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.Node=void 0;const e=FO(),t=wb();class r extends e.OsmObject{constructor(i,s){super("node",i,s)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return Sv.Node=r,Sv}var gp={},Cv={},pj;function NG(){if(pj)return Cv;pj=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.LateBinder=void 0;class e{constructor(r,n,i,s){this.container=r,this.valueFunc=n,this.ctx=i,this.args=s}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return Cv.LateBinder=e,Cv}const c_e={},f_e={whitelist:["services","rest_area","escape","elevator"]},h_e={blacklist:["coastline","cliff","ridge","arete","tree_row"]},d_e={},p_e={whitelist:["riverbank","dock","boatyard","dam"]},m_e={},g_e={},y_e={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},v_e={whitelist:["station","turntable","roundhouse","platform"]},b_e={},__e={},x_e={blacklist:["cutline","embankment","pipeline"]},w_e={whitelist:["plant","substation","generator","transformer"]},S_e={},E_e={},C_e={blacklist:["taxiway"]},A_e={},T_e={},P_e={},I_e={},M_e={},O_e={},R_e={},L_e={},D_e={},k_e={building:c_e,highway:f_e,natural:h_e,landuse:d_e,waterway:p_e,amenity:m_e,leisure:g_e,barrier:y_e,railway:v_e,area:b_e,boundary:__e,man_made:x_e,power:w_e,place:S_e,shop:E_e,aeroway:C_e,tourism:A_e,historic:T_e,public_transport:P_e,office:I_e,"building:part":{},military:M_e,ruins:O_e,"area:highway":{},craft:R_e,golf:L_e,indoor:D_e};var mj;function BG(){if(mj)return gp;mj=1;var e=gp&&gp.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(gp,"__esModule",{value:!0}),gp.Way=void 0;const t=FO(),r=NG(),n=wb(),i=e(k_e);class s extends t.OsmObject{constructor(a,p){super("way",a,p),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const p=new r.LateBinder(this.latLngArray,d=>{const g=this.refElems.get(`node/${d}`);if(g)return g.refCount++,g.getLatLng()},this,[a]);this.latLngArray.push(p),this.refElems.addBinder(p)}addTags(a){super.addTags(a);for(const[p,d]of Object.entries(a))this.analyzeTag(p,d)}addTag(a,p){super.addTag(a,p),this.analyzeTag(a,p)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const p=(0,n.strArrayArrayToFloat)(a),d={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:p}};return this.isPolygon&&(0,n.isRing)(p)?((0,n.ringDirection)(p)!=="counterclockwise"&&p.reverse(),d.geometry={type:"Polygon",coordinates:[p]},[d]):[d]}return[]}analyzeTag(a,p){const d=i.default[a];d&&(this.isPolygon=!0,d.whitelist?this.isPolygon=d.whitelist.indexOf(p)>=0:d.blacklist&&(this.isPolygon=!(d.blacklist.indexOf(p)>=0)))}}return gp.Way=s,gp}var Av={},Tv={},gj;function F_e(){if(gj)return Tv;gj=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.WayCollection=void 0;const e=wb();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let s=i,u;do{let a=this.getNextWay(s);u=a.next;let p=a.mergeType;if(u)switch(this.splice(this.indexOf(u),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(u)),u),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(u)),u),p){case 0:s=s.concat(u.slice(1));break;case 1:u.reverse(),s=s.concat(u.slice(1));break;case 2:s.reverse(),s=s.concat(u.slice(1));break;case 3:s=u.concat(s.slice(1));break}}while(u);n.push((0,e.strArrayArrayToFloat)(s)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),s=(0,e.coordsToKey)((0,e.first)(n));let u=this.length>0?this[0]:null;if(u){const a=(0,e.coordsToKey)((0,e.first)(u)),p=(0,e.coordsToKey)((0,e.last)(u));if(i===a)return{next:u,mergeType:0};if(i===p)return{next:u,mergeType:1};if(s===a)return{next:u,mergeType:2};if(s===p)return{next:u,mergeType:3}}return u=(0,e.getFirstFromMap)(this.firstMap,i),u?{next:u,mergeType:0}:(u=(0,e.getFirstFromMap)(this.lastMap,i),{next:u,mergeType:1})}toRings(n){const i=this.mergeWays(),s=[];let u=i.shift();for(;u;)(0,e.isRing)(u)&&((0,e.ringDirection)(u)!==n&&u.reverse(),s.push(u)),u=i.shift();return s}}return Tv.WayCollection=t,Tv}var yj;function N_e(){if(yj)return Av;yj=1,Object.defineProperty(Av,"__esModule",{value:!0}),Av.Relation=void 0;const e=FO(),t=BG(),r=FG(),n=F_e(),i=NG(),s=wb();class u extends e.OsmObject{constructor(p,d){super("relation",p,d),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(p){this.bounds=p}addMember(p){switch(p.type){case"relation":let d=new i.LateBinder(this.relations,_=>{const C=this.refElems.get(`relation/${_}`);if(C)return C.refCount++,C},this,[p.ref]);this.relations.push(d),this.refElems.addBinder(d);break;case"way":if(p.role||(p.role=""),p.geometry){const _=new t.Way(p.ref,this.refElems);_.setLatLngArray(p.geometry),_.refCount++,this.ways.push(_),this.roles.push(p.role)}else if(p.nodes){const _=new t.Way(p.ref,this.refElems);for(const C of p.nodes)_.addNodeRef(C);_.refCount++,this.ways.push(_),this.roles.push(p.role)}else{let _=new i.LateBinder(this.ways,C=>{const S=this.refElems.get(`way/${C}`);if(S)return S.refCount++,S},this,[p.ref]);this.ways.push(_),this.roles.push(p.role),this.refElems.addBinder(_)}break;case"node":let g=null;if(p.lat&&p.lon){g=new r.Node(p.ref,this.refElems),g.setLatLng({lon:p.lon,lat:p.lat}),p.tags&&g.addTags(p.tags);for(const[_,C]of Object.entries(p))["id","type","lat","lon"].indexOf(_)<0&&g.addProp(_,C);g.refCount++,this.nodes.push(g)}else{let _=new i.LateBinder(this.nodes,C=>{const S=this.refElems.get(`node/${C}`);if(S)return S.refCount++,S},this,[p.ref]);this.nodes.push(_),this.refElems.addBinder(_)}break}}constructStringGeometry(p){const d=p?p.mergeWays():[];return d.length===0?null:{type:"MultiLineString",coordinates:d}}constructPolygonGeometry(p,d){const g=p?p.toRings("counterclockwise"):[],_=d?d.toRings("clockwise"):[];if(g.length>0){const C=[];let S;for(S of g)C.push([S]);for(S=_.shift();S;){for(const I in g)if((0,s.pointInsidePolygon)((0,s.first)(S),g[I])){C[I].push(S);break}S=_.shift()}return C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C}}return null}toFeatureArray(){const p=[],d=[];let g=[];for(const C of this.relations)if(C)for(let S=0;S<C.ways.length;S++){const I=C.ways[S];this.ways.push(I),this.roles.push(C.roles[S])}let _={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete _.bbox,this.roles.some(C=>C==="outer")){const C=new n.WayCollection,S=new n.WayCollection;for(let P=0;P<this.ways.length;P++){const k=this.ways[P],F=this.roles[P];F==="outer"?C.addWay(k):F==="inner"&&S.addWay(k)}let I=Object.assign({},_),O=this.constructPolygonGeometry(C,S);O&&(I.geometry=O,p.push(I))}else{const C=new n.WayCollection;for(let I of this.ways)C.addWay(I);let S=this.constructStringGeometry(C);if(S){let I=Object.assign({},_);I.geometry=S,d.push(I)}}for(let C of this.nodes)g=g.concat(C.toFeatureArray());return[...p,...d,...g]}}return Av.Relation=u,Av}var Pv={},vj;function B_e(){if(vj)return Pv;vj=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return Pv.RefElements=e,Pv}var gA,bj;function j_e(){if(bj)return gA;bj=1;const e=wb(),t=u_e(),r=FG(),n=BG(),i=N_e(),s=B_e();function u(_){if(!_)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let C=_.excludeWay===void 0||_.excludeWay,S=!!_.completeFeature,I=!!_.renderTagged;return{completeFeature:S,renderTagged:I,excludeWay:C}}function a(_){return _.elements?"json":_.indexOf("<osm")>=0?"xml":_.trim().startsWith("{")?"json-raw":"invalid"}function p(_,C){for(const S of _.elements)switch(S.type){case"node":const I=new r.Node(S.id,C);S.tags&&I.addTags(S.tags),I.addProps((0,e.purgeProps)(S,["id","type","tags","lat","lon"])),I.setLatLng(S);break;case"way":const O=new n.Way(S.id,C);if(S.tags&&O.addTags(S.tags),O.addProps((0,e.purgeProps)(S,["id","type","tags","nodes","geometry"])),S.geometry)O.setLatLngArray(S.geometry);else if(S.nodes)for(const k of S.nodes)O.addNodeRef(k);break;case"relation":const P=new i.Relation(S.id,C);if(S.bounds&&P.setBounds([parseFloat(S.bounds.minlon),parseFloat(S.bounds.minlat),parseFloat(S.bounds.maxlon),parseFloat(S.bounds.maxlat)]),S.tags&&P.addTags(S.tags),P.addProps((0,e.purgeProps)(S,["id","type","tags","bounds","members"])),S.members)for(const k of S.members)P.addMember(k)}}function d(_,C){const S=new t.XmlParser({progressive:!0});S.on("</osm.node>",I=>{const O=new r.Node(I.id,C);for(const[P,k]of Object.entries(I))!P.startsWith("$")&&["id","lon","lat"].indexOf(P)<0&&O.addProp(P,k);if(O.setLatLng(I),I.$innerNodes)for(const P of I.$innerNodes)P.$tag==="tag"&&O.addTag(P.k,P.v)}),S.on("</osm.way>",I=>{const O=new n.Way(I.id,C);for(const[P,k]of Object.entries(I))!P.startsWith("$")&&["id"].indexOf(P)<0&&O.addProp(P,k);if(I.$innerNodes)for(const P of I.$innerNodes)P.$tag==="nd"?P.lon&&P.lat?O.addLatLng(P):P.ref&&O.addNodeRef(P.ref):P.$tag==="tag"&&O.addTag(P.k,P.v)}),S.on("<osm.relation>",I=>new i.Relation(I.id,C)),S.on("</osm.relation.member>",(I,O)=>{const P=C.get(`relation/${O?.id}`),k={type:I.type,role:I.role?I.role:"",ref:I.ref};if(I.lat&&I.lon){k.lat=I.lat,k.lon=I.lon,k.tags={};for(const[F,B]of Object.entries(I))!F.startsWith("$")&&["type","lat","lon"].indexOf(F)<0&&(k[F]=B)}if(I.$innerNodes){const F=[],B=[];for(const N of I.$innerNodes)N.lat&&N.lon?F.push(N):N.ref&&B.push(N.ref);F.length>0?k.geometry=F:B.length>0&&(k.nodes=B)}P.addMember(k)}),S.on("</osm.relation.bounds>",(I,O)=>{C.get(`relation/${O?.id}`).setBounds([parseFloat(I.minlon),parseFloat(I.minlat),parseFloat(I.maxlon),parseFloat(I.maxlat)])}),S.on("</osm.relation.tag>",(I,O)=>{C.get(`relation/${O?.id}`).addTag(I.k,I.v)}),S.parse(_)}function g(_,C){let{completeFeature:S,renderTagged:I,excludeWay:O}=u(C),P=a(_);const k=new s.RefElements;let F=[];P==="json-raw"&&(_=JSON.parse(_),_.elements?P="json":P="invalid"),P==="json"?p(_,k):P==="xml"&&d(_,k),k.bindAll();for(const B of k.values()){if(B.refCount>0&&(!B.hasTag||!I||B instanceof n.Way&&O))continue;const N=B.toFeatureArray();if(B instanceof i.Relation&&!S&&N.length>0)return N[0].geometry;F=F.concat(N)}return{type:"FeatureCollection",features:F}}return gA=g,gA}j_e();var _j;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(_j||(_j={}));const z_e=qe.createContext({});z_e.Provider;var $_e={value:()=>{}};function jG(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new C1(r)}function C1(e){this._=e}function q_e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}C1.prototype=jG.prototype={constructor:C1,on:function(e,t){var r=this._,n=q_e(e+"",r),i,s=-1,u=n.length;if(arguments.length<2){for(;++s<u;)if((i=(e=n[s]).type)&&(i=U_e(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<u;)if(i=(e=n[s]).type)r[i]=xj(r[i],e.name,t);else if(t==null)for(i in r)r[i]=xj(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new C1(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,i=s.length;n<i;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)}};function U_e(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function xj(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=$_e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var v3="http://www.w3.org/1999/xhtml";const wj={svg:"http://www.w3.org/2000/svg",xhtml:v3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iw(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),wj.hasOwnProperty(t)?{space:wj[t],local:e}:e}function V_e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===v3&&t.documentElement.namespaceURI===v3?t.createElement(e):t.createElementNS(r,e)}}function G_e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zG(e){var t=iw(e);return(t.local?G_e:V_e)(t)}function H_e(){}function NO(e){return e==null?H_e:function(){return this.querySelector(e)}}function W_e(e){typeof e!="function"&&(e=NO(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],u=s.length,a=n[i]=new Array(u),p,d,g=0;g<u;++g)(p=s[g])&&(d=e.call(p,p.__data__,g,s))&&("__data__"in p&&(d.__data__=p.__data__),a[g]=d);return new Qc(n,this._parents)}function Z_e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function X_e(){return[]}function $G(e){return e==null?X_e:function(){return this.querySelectorAll(e)}}function K_e(e){return function(){return Z_e(e.apply(this,arguments))}}function Y_e(e){typeof e=="function"?e=K_e(e):e=$G(e);for(var t=this._groups,r=t.length,n=[],i=[],s=0;s<r;++s)for(var u=t[s],a=u.length,p,d=0;d<a;++d)(p=u[d])&&(n.push(e.call(p,p.__data__,d,u)),i.push(p));return new Qc(n,i)}function qG(e){return function(){return this.matches(e)}}function UG(e){return function(t){return t.matches(e)}}var J_e=Array.prototype.find;function Q_e(e){return function(){return J_e.call(this.children,e)}}function e1e(){return this.firstElementChild}function t1e(e){return this.select(e==null?e1e:Q_e(typeof e=="function"?e:UG(e)))}var r1e=Array.prototype.filter;function n1e(){return Array.from(this.children)}function i1e(e){return function(){return r1e.call(this.children,e)}}function a1e(e){return this.selectAll(e==null?n1e:i1e(typeof e=="function"?e:UG(e)))}function o1e(e){typeof e!="function"&&(e=qG(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],u=s.length,a=n[i]=[],p,d=0;d<u;++d)(p=s[d])&&e.call(p,p.__data__,d,s)&&a.push(p);return new Qc(n,this._parents)}function VG(e){return new Array(e.length)}function s1e(){return new Qc(this._enter||this._groups.map(VG),this._parents)}function sx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sx.prototype={constructor:sx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function l1e(e){return function(){return e}}function u1e(e,t,r,n,i,s){for(var u=0,a,p=t.length,d=s.length;u<d;++u)(a=t[u])?(a.__data__=s[u],n[u]=a):r[u]=new sx(e,s[u]);for(;u<p;++u)(a=t[u])&&(i[u]=a)}function c1e(e,t,r,n,i,s,u){var a,p,d=new Map,g=t.length,_=s.length,C=new Array(g),S;for(a=0;a<g;++a)(p=t[a])&&(C[a]=S=u.call(p,p.__data__,a,t)+"",d.has(S)?i[a]=p:d.set(S,p));for(a=0;a<_;++a)S=u.call(e,s[a],a,s)+"",(p=d.get(S))?(n[a]=p,p.__data__=s[a],d.delete(S)):r[a]=new sx(e,s[a]);for(a=0;a<g;++a)(p=t[a])&&d.get(C[a])===p&&(i[a]=p)}function f1e(e){return e.__data__}function h1e(e,t){if(!arguments.length)return Array.from(this,f1e);var r=t?c1e:u1e,n=this._parents,i=this._groups;typeof e!="function"&&(e=l1e(e));for(var s=i.length,u=new Array(s),a=new Array(s),p=new Array(s),d=0;d<s;++d){var g=n[d],_=i[d],C=_.length,S=d1e(e.call(g,g&&g.__data__,d,n)),I=S.length,O=a[d]=new Array(I),P=u[d]=new Array(I),k=p[d]=new Array(C);r(g,_,O,P,k,S,t);for(var F=0,B=0,N,G;F<I;++F)if(N=O[F]){for(F>=B&&(B=F+1);!(G=P[B])&&++B<I;);N._next=G||null}}return u=new Qc(u,n),u._enter=a,u._exit=p,u}function d1e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function p1e(){return new Qc(this._exit||this._groups.map(VG),this._parents)}function m1e(e,t,r){var n=this.enter(),i=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function g1e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,s=n.length,u=Math.min(i,s),a=new Array(i),p=0;p<u;++p)for(var d=r[p],g=n[p],_=d.length,C=a[p]=new Array(_),S,I=0;I<_;++I)(S=d[I]||g[I])&&(C[I]=S);for(;p<i;++p)a[p]=r[p];return new Qc(a,this._parents)}function y1e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,s=n[i],u;--i>=0;)(u=n[i])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function v1e(e){e||(e=b1e);function t(_,C){return _&&C?e(_.__data__,C.__data__):!_-!C}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var u=r[s],a=u.length,p=i[s]=new Array(a),d,g=0;g<a;++g)(d=u[g])&&(p[g]=d);p.sort(t)}return new Qc(i,this._parents).order()}function b1e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _1e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function x1e(){return Array.from(this)}function w1e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length;i<s;++i){var u=n[i];if(u)return u}return null}function S1e(){let e=0;for(const t of this)++e;return e}function E1e(){return!this.node()}function C1e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,u=i.length,a;s<u;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function A1e(e){return function(){this.removeAttribute(e)}}function T1e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function P1e(e,t){return function(){this.setAttribute(e,t)}}function I1e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function M1e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function O1e(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function R1e(e,t){var r=iw(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?T1e:A1e:typeof t=="function"?r.local?O1e:M1e:r.local?I1e:P1e)(r,t))}function GG(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function L1e(e){return function(){this.style.removeProperty(e)}}function D1e(e,t,r){return function(){this.style.setProperty(e,t,r)}}function k1e(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function F1e(e,t,r){return arguments.length>1?this.each((t==null?L1e:typeof t=="function"?k1e:D1e)(e,t,r??"")):ty(this.node(),e)}function ty(e,t){return e.style.getPropertyValue(t)||GG(e).getComputedStyle(e,null).getPropertyValue(t)}function N1e(e){return function(){delete this[e]}}function B1e(e,t){return function(){this[e]=t}}function j1e(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function z1e(e,t){return arguments.length>1?this.each((t==null?N1e:typeof t=="function"?j1e:B1e)(e,t)):this.node()[e]}function HG(e){return e.trim().split(/^|\s+/)}function BO(e){return e.classList||new WG(e)}function WG(e){this._node=e,this._names=HG(e.getAttribute("class")||"")}WG.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ZG(e,t){for(var r=BO(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function XG(e,t){for(var r=BO(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function $1e(e){return function(){ZG(this,e)}}function q1e(e){return function(){XG(this,e)}}function U1e(e,t){return function(){(t.apply(this,arguments)?ZG:XG)(this,e)}}function V1e(e,t){var r=HG(e+"");if(arguments.length<2){for(var n=BO(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?U1e:t?$1e:q1e)(r,t))}function G1e(){this.textContent=""}function H1e(e){return function(){this.textContent=e}}function W1e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Z1e(e){return arguments.length?this.each(e==null?G1e:(typeof e=="function"?W1e:H1e)(e)):this.node().textContent}function X1e(){this.innerHTML=""}function K1e(e){return function(){this.innerHTML=e}}function Y1e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function J1e(e){return arguments.length?this.each(e==null?X1e:(typeof e=="function"?Y1e:K1e)(e)):this.node().innerHTML}function Q1e(){this.nextSibling&&this.parentNode.appendChild(this)}function exe(){return this.each(Q1e)}function txe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rxe(){return this.each(txe)}function nxe(e){var t=typeof e=="function"?e:zG(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ixe(){return null}function axe(e,t){var r=typeof e=="function"?e:zG(e),n=t==null?ixe:typeof t=="function"?t:NO(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function oxe(){var e=this.parentNode;e&&e.removeChild(this)}function sxe(){return this.each(oxe)}function lxe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uxe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cxe(e){return this.select(e?uxe:lxe)}function fxe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hxe(e){return function(t){e.call(this,t,this.__data__)}}function dxe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function pxe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,s;r<i;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function mxe(e,t,r){return function(){var n=this.__on,i,s=hxe(t);if(n){for(var u=0,a=n.length;u<a;++u)if((i=n[u]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=t;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(i):this.__on=[i]}}function gxe(e,t,r){var n=dxe(e+""),i,s=n.length,u;if(arguments.length<2){var a=this.node().__on;if(a){for(var p=0,d=a.length,g;p<d;++p)for(i=0,g=a[p];i<s;++i)if((u=n[i]).type===g.type&&u.name===g.name)return g.value}return}for(a=t?mxe:pxe,i=0;i<s;++i)this.each(a(n[i],t,r));return this}function KG(e,t,r){var n=GG(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function yxe(e,t){return function(){return KG(this,e,t)}}function vxe(e,t){return function(){return KG(this,e,t.apply(this,arguments))}}function bxe(e,t){return this.each((typeof t=="function"?vxe:yxe)(e,t))}function*_xe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length,u;i<s;++i)(u=n[i])&&(yield u)}var xxe=[null];function Qc(e,t){this._groups=e,this._parents=t}function Sb(){return new Qc([[document.documentElement]],xxe)}function wxe(){return this}Qc.prototype=Sb.prototype={constructor:Qc,select:W_e,selectAll:Y_e,selectChild:t1e,selectChildren:a1e,filter:o1e,data:h1e,enter:s1e,exit:p1e,join:m1e,merge:g1e,selection:wxe,order:y1e,sort:v1e,call:_1e,nodes:x1e,node:w1e,size:S1e,empty:E1e,each:C1e,attr:R1e,style:F1e,property:z1e,classed:V1e,text:Z1e,html:J1e,raise:exe,lower:rxe,append:nxe,insert:axe,remove:sxe,clone:cxe,datum:fxe,on:gxe,dispatch:bxe,[Symbol.iterator]:_xe};function jO(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function YG(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Eb(){}var V0=.7,lx=1/V0,jg="\\s*([+-]?\\d+)\\s*",G0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sxe=/^#([0-9a-f]{3,8})$/,Exe=new RegExp(`^rgb\\(${jg},${jg},${jg}\\)$`),Cxe=new RegExp(`^rgb\\(${zf},${zf},${zf}\\)$`),Axe=new RegExp(`^rgba\\(${jg},${jg},${jg},${G0}\\)$`),Txe=new RegExp(`^rgba\\(${zf},${zf},${zf},${G0}\\)$`),Pxe=new RegExp(`^hsl\\(${G0},${zf},${zf}\\)$`),Ixe=new RegExp(`^hsla\\(${G0},${zf},${zf},${G0}\\)$`),Sj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jO(Eb,H0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ej,formatHex:Ej,formatHex8:Mxe,formatHsl:Oxe,formatRgb:Cj,toString:Cj});function Ej(){return this.rgb().formatHex()}function Mxe(){return this.rgb().formatHex8()}function Oxe(){return JG(this).formatHsl()}function Cj(){return this.rgb().formatRgb()}function H0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Sxe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Aj(t):r===3?new fu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?$_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?$_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Exe.exec(e))?new fu(t[1],t[2],t[3],1):(t=Cxe.exec(e))?new fu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Axe.exec(e))?$_(t[1],t[2],t[3],t[4]):(t=Txe.exec(e))?$_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pxe.exec(e))?Ij(t[1],t[2]/100,t[3]/100,1):(t=Ixe.exec(e))?Ij(t[1],t[2]/100,t[3]/100,t[4]):Sj.hasOwnProperty(e)?Aj(Sj[e]):e==="transparent"?new fu(NaN,NaN,NaN,0):null}function Aj(e){return new fu(e>>16&255,e>>8&255,e&255,1)}function $_(e,t,r,n){return n<=0&&(e=t=r=NaN),new fu(e,t,r,n)}function Rxe(e){return e instanceof Eb||(e=H0(e)),e?(e=e.rgb(),new fu(e.r,e.g,e.b,e.opacity)):new fu}function b3(e,t,r,n){return arguments.length===1?Rxe(e):new fu(e,t,r,n??1)}function fu(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}jO(fu,b3,YG(Eb,{brighter(e){return e=e==null?lx:Math.pow(lx,e),new fu(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new fu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fu(zp(this.r),zp(this.g),zp(this.b),ux(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tj,formatHex:Tj,formatHex8:Lxe,formatRgb:Pj,toString:Pj}));function Tj(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}`}function Lxe(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}${Lp((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pj(){const e=ux(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function ux(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function Ij(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Uc(e,t,r,n)}function JG(e){if(e instanceof Uc)return new Uc(e.h,e.s,e.l,e.opacity);if(e instanceof Eb||(e=H0(e)),!e)return new Uc;if(e instanceof Uc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),u=NaN,a=s-i,p=(s+i)/2;return a?(t===s?u=(r-n)/a+(r<n)*6:r===s?u=(n-t)/a+2:u=(t-r)/a+4,a/=p<.5?s+i:2-s-i,u*=60):a=p>0&&p<1?0:u,new Uc(u,a,p,e.opacity)}function Dxe(e,t,r,n){return arguments.length===1?JG(e):new Uc(e,t,r,n??1)}function Uc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}jO(Uc,Dxe,YG(Eb,{brighter(e){return e=e==null?lx:Math.pow(lx,e),new Uc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?V0:Math.pow(V0,e),new Uc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new fu(yA(e>=240?e-240:e+120,i,n),yA(e,i,n),yA(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Uc(Mj(this.h),q_(this.s),q_(this.l),ux(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ux(this.opacity);return`${e===1?"hsl(":"hsla("}${Mj(this.h)}, ${q_(this.s)*100}%, ${q_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Mj(e){return e=(e||0)%360,e<0?e+360:e}function q_(e){return Math.max(0,Math.min(1,e||0))}function yA(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const QG=e=>()=>e;function kxe(e,t){return function(r){return e+r*t}}function Fxe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Nxe(e){return(e=+e)==1?eH:function(t,r){return r-t?Fxe(t,r,e):QG(isNaN(t)?r:t)}}function eH(e,t){var r=t-e;return r?kxe(e,r):QG(isNaN(e)?t:e)}const Oj=(function e(t){var r=Nxe(t);function n(i,s){var u=r((i=b3(i)).r,(s=b3(s)).r),a=r(i.g,s.g),p=r(i.b,s.b),d=eH(i.opacity,s.opacity);return function(g){return i.r=u(g),i.g=a(g),i.b=p(g),i.opacity=d(g),i+""}}return n.gamma=e,n})(1);function fd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var _3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vA=new RegExp(_3.source,"g");function Bxe(e){return function(){return e}}function jxe(e){return function(t){return e(t)+""}}function zxe(e,t){var r=_3.lastIndex=vA.lastIndex=0,n,i,s,u=-1,a=[],p=[];for(e=e+"",t=t+"";(n=_3.exec(e))&&(i=vA.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[u]?a[u]+=s:a[++u]=s),(n=n[0])===(i=i[0])?a[u]?a[u]+=i:a[++u]=i:(a[++u]=null,p.push({i:u,x:fd(n,i)})),r=vA.lastIndex;return r<t.length&&(s=t.slice(r),a[u]?a[u]+=s:a[++u]=s),a.length<2?p[0]?jxe(p[0].x):Bxe(t):(t=p.length,function(d){for(var g=0,_;g<t;++g)a[(_=p[g]).i]=_.x(d);return a.join("")})}var Rj=180/Math.PI,x3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tH(e,t,r,n,i,s){var u,a,p;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(p=e*r+t*n)&&(r-=e*p,n-=t*p),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,p/=a),e*n<t*r&&(e=-e,t=-t,p=-p,u=-u),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Rj,skewX:Math.atan(p)*Rj,scaleX:u,scaleY:a}}var U_;function $xe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?x3:tH(t.a,t.b,t.c,t.d,t.e,t.f)}function qxe(e){return e==null||(U_||(U_=document.createElementNS("http://www.w3.org/2000/svg","g")),U_.setAttribute("transform",e),!(e=U_.transform.baseVal.consolidate()))?x3:(e=e.matrix,tH(e.a,e.b,e.c,e.d,e.e,e.f))}function rH(e,t,r,n){function i(d){return d.length?d.pop()+" ":""}function s(d,g,_,C,S,I){if(d!==_||g!==C){var O=S.push("translate(",null,t,null,r);I.push({i:O-4,x:fd(d,_)},{i:O-2,x:fd(g,C)})}else(_||C)&&S.push("translate("+_+t+C+r)}function u(d,g,_,C){d!==g?(d-g>180?g+=360:g-d>180&&(d+=360),C.push({i:_.push(i(_)+"rotate(",null,n)-2,x:fd(d,g)})):g&&_.push(i(_)+"rotate("+g+n)}function a(d,g,_,C){d!==g?C.push({i:_.push(i(_)+"skewX(",null,n)-2,x:fd(d,g)}):g&&_.push(i(_)+"skewX("+g+n)}function p(d,g,_,C,S,I){if(d!==_||g!==C){var O=S.push(i(S)+"scale(",null,",",null,")");I.push({i:O-4,x:fd(d,_)},{i:O-2,x:fd(g,C)})}else(_!==1||C!==1)&&S.push(i(S)+"scale("+_+","+C+")")}return function(d,g){var _=[],C=[];return d=e(d),g=e(g),s(d.translateX,d.translateY,g.translateX,g.translateY,_,C),u(d.rotate,g.rotate,_,C),a(d.skewX,g.skewX,_,C),p(d.scaleX,d.scaleY,g.scaleX,g.scaleY,_,C),d=g=null,function(S){for(var I=-1,O=C.length,P;++I<O;)_[(P=C[I]).i]=P.x(S);return _.join("")}}}var Uxe=rH($xe,"px, ","px)","deg)"),Vxe=rH(qxe,", ",")",")"),ry=0,Zv=0,Iv=0,nH=1e3,cx,Xv,fx=0,Wp=0,aw=0,W0=typeof performance=="object"&&performance.now?performance:Date,iH=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zO(){return Wp||(iH(Gxe),Wp=W0.now()+aw)}function Gxe(){Wp=0}function hx(){this._call=this._time=this._next=null}hx.prototype=aH.prototype={constructor:hx,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?zO():+r)+(t==null?0:+t),!this._next&&Xv!==this&&(Xv?Xv._next=this:cx=this,Xv=this),this._call=e,this._time=r,w3()},stop:function(){this._call&&(this._call=null,this._time=1/0,w3())}};function aH(e,t,r){var n=new hx;return n.restart(e,t,r),n}function Hxe(){zO(),++ry;for(var e=cx,t;e;)(t=Wp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ry}function Lj(){Wp=(fx=W0.now())+aw,ry=Zv=0;try{Hxe()}finally{ry=0,Zxe(),Wp=0}}function Wxe(){var e=W0.now(),t=e-fx;t>nH&&(aw-=t,fx=e)}function Zxe(){for(var e,t=cx,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:cx=r);Xv=e,w3(n)}function w3(e){if(!ry){Zv&&(Zv=clearTimeout(Zv));var t=e-Wp;t>24?(e<1/0&&(Zv=setTimeout(Lj,e-W0.now()-aw)),Iv&&(Iv=clearInterval(Iv))):(Iv||(fx=W0.now(),Iv=setInterval(Wxe,nH)),ry=1,iH(Lj))}}function Dj(e,t,r){var n=new hx;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var Xxe=jG("start","end","cancel","interrupt"),Kxe=[],oH=0,kj=1,S3=2,A1=3,Fj=4,E3=5,T1=6;function ow(e,t,r,n,i,s){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;Yxe(e,r,{name:t,index:n,group:i,on:Xxe,tween:Kxe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:oH})}function $O(e,t){var r=of(e,t);if(r.state>oH)throw new Error("too late; already scheduled");return r}function Zf(e,t){var r=of(e,t);if(r.state>A1)throw new Error("too late; already running");return r}function of(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Yxe(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=aH(s,0,r.time);function s(d){r.state=kj,r.timer.restart(u,r.delay,r.time),r.delay<=d&&u(d-r.delay)}function u(d){var g,_,C,S;if(r.state!==kj)return p();for(g in n)if(S=n[g],S.name===r.name){if(S.state===A1)return Dj(u);S.state===Fj?(S.state=T1,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete n[g]):+g<t&&(S.state=T1,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete n[g])}if(Dj(function(){r.state===A1&&(r.state=Fj,r.timer.restart(a,r.delay,r.time),a(d))}),r.state=S3,r.on.call("start",e,e.__data__,r.index,r.group),r.state===S3){for(r.state=A1,i=new Array(C=r.tween.length),g=0,_=-1;g<C;++g)(S=r.tween[g].value.call(e,e.__data__,r.index,r.group))&&(i[++_]=S);i.length=_+1}}function a(d){for(var g=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(p),r.state=E3,1),_=-1,C=i.length;++_<C;)i[_].call(e,g);r.state===E3&&(r.on.call("end",e,e.__data__,r.index,r.group),p())}function p(){r.state=T1,r.timer.stop(),delete n[t];for(var d in n)return;delete e.__transition}}function Jxe(e,t){var r=e.__transition,n,i,s=!0,u;if(r){t=t==null?null:t+"";for(u in r){if((n=r[u]).name!==t){s=!1;continue}i=n.state>S3&&n.state<E3,n.state=T1,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[u]}s&&delete e.__transition}}function Qxe(e){return this.each(function(){Jxe(this,e)})}function e2e(e,t){var r,n;return function(){var i=Zf(this,e),s=i.tween;if(s!==r){n=r=s;for(var u=0,a=n.length;u<a;++u)if(n[u].name===t){n=n.slice(),n.splice(u,1);break}}i.tween=n}}function t2e(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=Zf(this,e),u=s.tween;if(u!==n){i=(n=u).slice();for(var a={name:t,value:r},p=0,d=i.length;p<d;++p)if(i[p].name===t){i[p]=a;break}p===d&&i.push(a)}s.tween=i}}function r2e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=of(this.node(),r).tween,i=0,s=n.length,u;i<s;++i)if((u=n[i]).name===e)return u.value;return null}return this.each((t==null?e2e:t2e)(r,e,t))}function qO(e,t,r){var n=e._id;return e.each(function(){var i=Zf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return of(i,n).value[t]}}function sH(e,t){var r;return(typeof t=="number"?fd:t instanceof H0?Oj:(r=H0(t))?(t=r,Oj):zxe)(e,t)}function n2e(e){return function(){this.removeAttribute(e)}}function i2e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a2e(e,t,r){var n,i=r+"",s;return function(){var u=this.getAttribute(e);return u===i?null:u===n?s:s=t(n=u,r)}}function o2e(e,t,r){var n,i=r+"",s;return function(){var u=this.getAttributeNS(e.space,e.local);return u===i?null:u===n?s:s=t(n=u,r)}}function s2e(e,t,r){var n,i,s;return function(){var u,a=r(this),p;return a==null?void this.removeAttribute(e):(u=this.getAttribute(e),p=a+"",u===p?null:u===n&&p===i?s:(i=p,s=t(n=u,a)))}}function l2e(e,t,r){var n,i,s;return function(){var u,a=r(this),p;return a==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),p=a+"",u===p?null:u===n&&p===i?s:(i=p,s=t(n=u,a)))}}function u2e(e,t){var r=iw(e),n=r==="transform"?Vxe:sH;return this.attrTween(e,typeof t=="function"?(r.local?l2e:s2e)(r,n,qO(this,"attr."+e,t)):t==null?(r.local?i2e:n2e)(r):(r.local?o2e:a2e)(r,n,t))}function c2e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function f2e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function h2e(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&f2e(e,s)),r}return i._value=t,i}function d2e(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&c2e(e,s)),r}return i._value=t,i}function p2e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=iw(e);return this.tween(r,(n.local?h2e:d2e)(n,t))}function m2e(e,t){return function(){$O(this,e).delay=+t.apply(this,arguments)}}function g2e(e,t){return t=+t,function(){$O(this,e).delay=t}}function y2e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?m2e:g2e)(t,e)):of(this.node(),t).delay}function v2e(e,t){return function(){Zf(this,e).duration=+t.apply(this,arguments)}}function b2e(e,t){return t=+t,function(){Zf(this,e).duration=t}}function _2e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?v2e:b2e)(t,e)):of(this.node(),t).duration}function x2e(e,t){if(typeof t!="function")throw new Error;return function(){Zf(this,e).ease=t}}function w2e(e){var t=this._id;return arguments.length?this.each(x2e(t,e)):of(this.node(),t).ease}function S2e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Zf(this,e).ease=r}}function E2e(e){if(typeof e!="function")throw new Error;return this.each(S2e(this._id,e))}function C2e(e){typeof e!="function"&&(e=qG(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],u=s.length,a=n[i]=[],p,d=0;d<u;++d)(p=s[d])&&e.call(p,p.__data__,d,s)&&a.push(p);return new Bh(n,this._parents,this._name,this._id)}function A2e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,s=Math.min(n,i),u=new Array(n),a=0;a<s;++a)for(var p=t[a],d=r[a],g=p.length,_=u[a]=new Array(g),C,S=0;S<g;++S)(C=p[S]||d[S])&&(_[S]=C);for(;a<n;++a)u[a]=t[a];return new Bh(u,this._parents,this._name,this._id)}function T2e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function P2e(e,t,r){var n,i,s=T2e(t)?$O:Zf;return function(){var u=s(this,e),a=u.on;a!==n&&(i=(n=a).copy()).on(t,r),u.on=i}}function I2e(e,t){var r=this._id;return arguments.length<2?of(this.node(),r).on.on(e):this.each(P2e(r,e,t))}function M2e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function O2e(){return this.on("end.remove",M2e(this._id))}function R2e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=NO(e));for(var n=this._groups,i=n.length,s=new Array(i),u=0;u<i;++u)for(var a=n[u],p=a.length,d=s[u]=new Array(p),g,_,C=0;C<p;++C)(g=a[C])&&(_=e.call(g,g.__data__,C,a))&&("__data__"in g&&(_.__data__=g.__data__),d[C]=_,ow(d[C],t,r,C,d,of(g,r)));return new Bh(s,this._parents,t,r)}function L2e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=$G(e));for(var n=this._groups,i=n.length,s=[],u=[],a=0;a<i;++a)for(var p=n[a],d=p.length,g,_=0;_<d;++_)if(g=p[_]){for(var C=e.call(g,g.__data__,_,p),S,I=of(g,r),O=0,P=C.length;O<P;++O)(S=C[O])&&ow(S,t,r,O,C,I);s.push(C),u.push(g)}return new Bh(s,u,t,r)}var D2e=Sb.prototype.constructor;function k2e(){return new D2e(this._groups,this._parents)}function F2e(e,t){var r,n,i;return function(){var s=ty(this,e),u=(this.style.removeProperty(e),ty(this,e));return s===u?null:s===r&&u===n?i:i=t(r=s,n=u)}}function lH(e){return function(){this.style.removeProperty(e)}}function N2e(e,t,r){var n,i=r+"",s;return function(){var u=ty(this,e);return u===i?null:u===n?s:s=t(n=u,r)}}function B2e(e,t,r){var n,i,s;return function(){var u=ty(this,e),a=r(this),p=a+"";return a==null&&(p=a=(this.style.removeProperty(e),ty(this,e))),u===p?null:u===n&&p===i?s:(i=p,s=t(n=u,a))}}function j2e(e,t){var r,n,i,s="style."+t,u="end."+s,a;return function(){var p=Zf(this,e),d=p.on,g=p.value[s]==null?a||(a=lH(t)):void 0;(d!==r||i!==g)&&(n=(r=d).copy()).on(u,i=g),p.on=n}}function z2e(e,t,r){var n=(e+="")=="transform"?Uxe:sH;return t==null?this.styleTween(e,F2e(e,n)).on("end.style."+e,lH(e)):typeof t=="function"?this.styleTween(e,B2e(e,n,qO(this,"style."+e,t))).each(j2e(this._id,e)):this.styleTween(e,N2e(e,n,t),r).on("end.style."+e,null)}function $2e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function q2e(e,t,r){var n,i;function s(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&$2e(e,u,r)),n}return s._value=t,s}function U2e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,q2e(e,t,r??""))}function V2e(e){return function(){this.textContent=e}}function G2e(e){return function(){var t=e(this);this.textContent=t??""}}function H2e(e){return this.tween("text",typeof e=="function"?G2e(qO(this,"text",e)):V2e(e==null?"":e+""))}function W2e(e){return function(t){this.textContent=e.call(this,t)}}function Z2e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&W2e(i)),t}return n._value=e,n}function X2e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Z2e(e))}function K2e(){for(var e=this._name,t=this._id,r=uH(),n=this._groups,i=n.length,s=0;s<i;++s)for(var u=n[s],a=u.length,p,d=0;d<a;++d)if(p=u[d]){var g=of(p,t);ow(p,e,r,d,u,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new Bh(n,this._parents,e,r)}function Y2e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(s,u){var a={value:u},p={value:function(){--i===0&&s()}};r.each(function(){var d=Zf(this,n),g=d.on;g!==e&&(t=(e=g).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(p)),d.on=t}),i===0&&s()})}var J2e=0;function Bh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function uH(){return++J2e}var _h=Sb.prototype;Bh.prototype={constructor:Bh,select:R2e,selectAll:L2e,selectChild:_h.selectChild,selectChildren:_h.selectChildren,filter:C2e,merge:A2e,selection:k2e,transition:K2e,call:_h.call,nodes:_h.nodes,node:_h.node,size:_h.size,empty:_h.empty,each:_h.each,on:I2e,attr:u2e,attrTween:p2e,style:z2e,styleTween:U2e,text:H2e,textTween:X2e,remove:O2e,tween:r2e,delay:y2e,duration:_2e,ease:w2e,easeVarying:E2e,end:Y2e,[Symbol.iterator]:_h[Symbol.iterator]};function Q2e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ewe={time:null,delay:0,duration:250,ease:Q2e};function twe(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function rwe(e){var t,r;e instanceof Bh?(t=e._id,e=e._name):(t=uH(),(r=ewe).time=zO(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var u=n[s],a=u.length,p,d=0;d<a;++d)(p=u[d])&&ow(p,e,t,d,u,r||twe(p,t));return new Bh(n,this._parents,e,t)}Sb.prototype.interrupt=Qxe;Sb.prototype.transition=rwe;function Kv(e,t,r){this.k=e,this.x=t,this.y=r}Kv.prototype={constructor:Kv,scale:function(e){return e===1?this:new Kv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Kv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Kv.prototype;Qt(Uo)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});const nwe=Si(Ue.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),iwe=Si(Ue.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),awe=Si(Ue.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}));function Js(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var owe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Nj=owe,bA=()=>Math.random().toString(36).substring(7).split("").join("."),swe={INIT:`@@redux/INIT${bA()}`,REPLACE:`@@redux/REPLACE${bA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bA()}`},dx=swe;function UO(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cH(e,t,r){if(typeof e!="function")throw new Error(Js(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Js(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Js(1));return r(cH)(e,t)}let n=e,i=t,s=new Map,u=s,a=0,p=!1;function d(){u===s&&(u=new Map,s.forEach((P,k)=>{u.set(k,P)}))}function g(){if(p)throw new Error(Js(3));return i}function _(P){if(typeof P!="function")throw new Error(Js(4));if(p)throw new Error(Js(5));let k=!0;d();const F=a++;return u.set(F,P),function(){if(k){if(p)throw new Error(Js(6));k=!1,d(),u.delete(F),s=null}}}function C(P){if(!UO(P))throw new Error(Js(7));if(typeof P.type>"u")throw new Error(Js(8));if(typeof P.type!="string")throw new Error(Js(17));if(p)throw new Error(Js(9));try{p=!0,i=n(i,P)}finally{p=!1}return(s=u).forEach(F=>{F()}),P}function S(P){if(typeof P!="function")throw new Error(Js(10));n=P,C({type:dx.REPLACE})}function I(){const P=_;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Js(11));function F(){const N=k;N.next&&N.next(g())}return F(),{unsubscribe:P(F)}},[Nj](){return this}}}return C({type:dx.INIT}),{dispatch:C,subscribe:_,getState:g,replaceReducer:S,[Nj]:I}}function lwe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:dx.INIT})>"u")throw new Error(Js(12));if(typeof r(void 0,{type:dx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Js(13))})}function uwe(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const u=t[s];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let i;try{lwe(r)}catch(s){i=s}return function(u={},a){if(i)throw i;let p=!1;const d={};for(let g=0;g<n.length;g++){const _=n[g],C=r[_],S=u[_],I=C(S,a);if(typeof I>"u")throw a&&a.type,new Error(Js(14));d[_]=I,p=p||I!==S}return p=p||n.length!==Object.keys(u).length,p?d:u}}function px(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function cwe(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Js(15))};const u={getState:i.getState,dispatch:(p,...d)=>s(p,...d)},a=e.map(p=>p(u));return s=px(...a)(i.dispatch),{...i,dispatch:s}}}function fwe(e){return UO(e)&&"type"in e&&typeof e.type=="string"}var fH=Symbol.for("immer-nothing"),Bj=Symbol.for("immer-draftable"),Wu=Symbol.for("immer-state");function Vc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ny=Object.getPrototypeOf;function Zp(e){return!!e&&!!e[Wu]}function jh(e){return e?hH(e)||Array.isArray(e)||!!e[Bj]||!!e.constructor?.[Bj]||Cb(e)||lw(e):!1}var hwe=Object.prototype.constructor.toString();function hH(e){if(!e||typeof e!="object")return!1;const t=ny(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===hwe}function mx(e,t){sw(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function sw(e){const t=e[Wu];return t?t.type_:Array.isArray(e)?1:Cb(e)?2:lw(e)?3:0}function C3(e,t){return sw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dH(e,t,r){const n=sw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function dwe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Cb(e){return e instanceof Map}function lw(e){return e instanceof Set}function xp(e){return e.copy_||e.base_}function A3(e,t){if(Cb(e))return new Map(e);if(lw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=hH(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Wu];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const u=i[s],a=n[u];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[u]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[u]})}return Object.create(ny(e),n)}else{const n=ny(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function VO(e,t=!1){return uw(e)||Zp(e)||!jh(e)||(sw(e)>1&&Object.defineProperties(e,{set:{value:V_},add:{value:V_},clear:{value:V_},delete:{value:V_}}),Object.freeze(e),t&&Object.values(e).forEach(r=>VO(r,!0))),e}function V_(){Vc(2)}function uw(e){return Object.isFrozen(e)}var pwe={};function Xp(e){const t=pwe[e];return t||Vc(0,e),t}var Z0;function pH(){return Z0}function mwe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jj(e,t){t&&(Xp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T3(e){P3(e),e.drafts_.forEach(gwe),e.drafts_=null}function P3(e){e===Z0&&(Z0=e.parent_)}function zj(e){return Z0=mwe(Z0,e)}function gwe(e){const t=e[Wu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $j(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Wu].modified_&&(T3(t),Vc(4)),jh(e)&&(e=gx(t,e),t.parent_||yx(t,e)),t.patches_&&Xp("Patches").generateReplacementPatches_(r[Wu].base_,e,t.patches_,t.inversePatches_)):e=gx(t,r,[]),T3(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fH?e:void 0}function gx(e,t,r){if(uw(t))return t;const n=t[Wu];if(!n)return mx(t,(i,s)=>qj(e,n,t,i,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return yx(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,u=!1;n.type_===3&&(s=new Set(i),i.clear(),u=!0),mx(s,(a,p)=>qj(e,n,i,a,p,r,u)),yx(e,i,!1),r&&e.patches_&&Xp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function qj(e,t,r,n,i,s,u){if(Zp(i)){const a=s&&t&&t.type_!==3&&!C3(t.assigned_,n)?s.concat(n):void 0,p=gx(e,i,a);if(dH(r,n,p),Zp(p))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(jh(i)&&!uw(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gx(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Cb(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&yx(e,i)}}function yx(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&VO(t,r)}function ywe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:pH(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=GO;r&&(i=[n],s=X0);const{revoke:u,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=u,a}var GO={get(e,t){if(t===Wu)return e;const r=xp(e);if(!C3(r,t))return vwe(e,r,t);const n=r[t];return e.finalized_||!jh(n)?n:n===_A(e.base_,t)?(xA(e),e.copy_[t]=M3(n,e)):n},has(e,t){return t in xp(e)},ownKeys(e){return Reflect.ownKeys(xp(e))},set(e,t,r){const n=mH(xp(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=_A(xp(e),t),s=i?.[Wu];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(dwe(r,i)&&(r!==void 0||C3(e.base_,t)))return!0;xA(e),I3(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _A(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xA(e),I3(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Vc(11)},getPrototypeOf(e){return ny(e.base_)},setPrototypeOf(){Vc(12)}},X0={};mx(GO,(e,t)=>{X0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});X0.deleteProperty=function(e,t){return X0.set.call(this,e,t,void 0)};X0.set=function(e,t,r){return GO.set.call(this,e[0],t,r,e[0])};function _A(e,t){const r=e[Wu];return(r?xp(r):e)[t]}function vwe(e,t,r){const n=mH(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function mH(e,t){if(!(t in e))return;let r=ny(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ny(r)}}function I3(e){e.modified_||(e.modified_=!0,e.parent_&&I3(e.parent_))}function xA(e){e.copy_||(e.copy_=A3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bwe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const u=this;return function(p=s,...d){return u.produce(p,g=>r.call(this,g,...d))}}typeof r!="function"&&Vc(6),n!==void 0&&typeof n!="function"&&Vc(7);let i;if(jh(t)){const s=zj(this),u=M3(t,void 0);let a=!0;try{i=r(u),a=!1}finally{a?T3(s):P3(s)}return jj(s,n),$j(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===fH&&(i=void 0),this.autoFreeze_&&VO(i,!0),n){const s=[],u=[];Xp("Patches").generateReplacementPatches_(t,i,s,u),n(s,u)}return i}else Vc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...a)=>this.produceWithPatches(u,p=>t(p,...a));let n,i;return[this.produce(t,r,(u,a)=>{n=u,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jh(e)||Vc(8),Zp(e)&&(e=_we(e));const t=zj(this),r=M3(e,void 0);return r[Wu].isManual_=!0,P3(t),r}finishDraft(e,t){const r=e&&e[Wu];(!r||!r.isManual_)&&Vc(9);const{scope_:n}=r;return jj(n,t),$j(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Xp("Patches").applyPatches_;return Zp(e)?n(e,t):this.produce(e,i=>n(i,t))}};function M3(e,t){const r=Cb(e)?Xp("MapSet").proxyMap_(e,t):lw(e)?Xp("MapSet").proxySet_(e,t):ywe(e,t);return(t?t.scope_:pH()).drafts_.push(r),r}function _we(e){return Zp(e)||Vc(10,e),gH(e)}function gH(e){if(!jh(e)||uw(e))return e;const t=e[Wu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=A3(e,t.scope_.immer_.useStrictShallowCopy_)}else r=A3(e,!0);return mx(r,(n,i)=>{dH(r,n,gH(i))}),t&&(t.finalized_=!1),r}var xwe=new bwe,yH=xwe.produce;function vH(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var wwe=vH(),Swe=vH,Ewe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?px:px.apply(null,arguments)};function Uj(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(Dh(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>fwe(n)&&n.type===e,r}var bH=class Yv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Yv.prototype)}static get[Symbol.species](){return Yv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Yv(...t[0].concat(this)):new Yv(...t.concat(this))}};function Vj(e){return jh(e)?yH(e,()=>{}):e}function G_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Cwe(e){return typeof e=="boolean"}var Awe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let u=new bH;return r&&(Cwe(r)?u.push(wwe):u.push(Swe(r.extraArgument))),u},Twe="RTK_autoBatch",Gj=e=>t=>{setTimeout(t,e)},Pwe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,u=!1;const a=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Gj(10):e.type==="callback"?e.queueNotification:Gj(e.timeout),d=()=>{u=!1,s&&(s=!1,a.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const _=()=>i&&g(),C=n.subscribe(_);return a.add(g),()=>{C(),a.delete(g)}},dispatch(g){try{return i=!g?.meta?.[Twe],s=!i,s&&(u||(u=!0,p(d))),n.dispatch(g)}finally{i=!0}}})},Iwe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new bH(e);return n&&i.push(Pwe(typeof n=="object"?n:void 0)),i};function Mwe(e){const t=Awe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:u=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(UO(r))a=uwe(r);else throw new Error(Dh(1));let p;typeof n=="function"?p=n(t):p=t();let d=px;i&&(d=Ewe({trace:!1,...typeof i=="object"&&i}));const g=cwe(...p),_=Iwe(g);let C=typeof u=="function"?u(_):_();const S=d(...C);return cH(a,s,S)}function _H(e){const t={},r=[];let n;const i={addCase(s,u){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Dh(28));if(a in t)throw new Error(Dh(29));return t[a]=u,i},addAsyncThunk(s,u){return u.pending&&(t[s.pending.type]=u.pending),u.rejected&&(t[s.rejected.type]=u.rejected),u.fulfilled&&(t[s.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:s.settled,reducer:u.settled}),i},addMatcher(s,u){return r.push({matcher:s,reducer:u}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function Owe(e){return typeof e=="function"}function Rwe(e,t){let[r,n,i]=_H(t),s;if(Owe(e))s=()=>Vj(e());else{const a=Vj(e);s=()=>a}function u(a=s(),p){let d=[r[p.type],...n.filter(({matcher:g})=>g(p)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[i]),d.reduce((g,_)=>{if(_)if(Zp(g)){const S=_(g,p);return S===void 0?g:S}else{if(jh(g))return yH(g,C=>_(C,p));{const C=_(g,p);if(C===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return C}}return g},a)}return u.getInitialState=s,u}var Lwe=Symbol.for("rtk-slice-createasyncthunk");function Dwe(e,t){return`${e}/${t}`}function kwe({creators:e}={}){const t=e?.asyncThunk?.[Lwe];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(Dh(11));const u=(typeof n.reducers=="function"?n.reducers(Bwe()):n.reducers)||{},a=Object.keys(u),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(B,N){const G=typeof B=="string"?B:B.type;if(!G)throw new Error(Dh(12));if(G in p.sliceCaseReducersByType)throw new Error(Dh(13));return p.sliceCaseReducersByType[G]=N,d},addMatcher(B,N){return p.sliceMatchers.push({matcher:B,reducer:N}),d},exposeAction(B,N){return p.actionCreators[B]=N,d},exposeCaseReducer(B,N){return p.sliceCaseReducersByName[B]=N,d}};a.forEach(B=>{const N=u[B],G={reducerName:B,type:Dwe(i,B),createNotation:typeof n.reducers=="function"};zwe(N)?qwe(G,N,d,t):jwe(G,N,d)});function g(){const[B={},N=[],G=void 0]=typeof n.extraReducers=="function"?_H(n.extraReducers):[n.extraReducers],$={...B,...p.sliceCaseReducersByType};return Rwe(n.initialState,X=>{for(let ee in $)X.addCase(ee,$[ee]);for(let ee of p.sliceMatchers)X.addMatcher(ee.matcher,ee.reducer);for(let ee of N)X.addMatcher(ee.matcher,ee.reducer);G&&X.addDefaultCase(G)})}const _=B=>B,C=new Map,S=new WeakMap;let I;function O(B,N){return I||(I=g()),I(B,N)}function P(){return I||(I=g()),I.getInitialState()}function k(B,N=!1){function G(X){let ee=X[B];return typeof ee>"u"&&N&&(ee=G_(S,G,P)),ee}function $(X=_){const ee=G_(C,N,()=>new WeakMap);return G_(ee,X,()=>{const J={};for(const[le,Z]of Object.entries(n.selectors??{}))J[le]=Fwe(Z,X,()=>G_(S,X,P),N);return J})}return{reducerPath:B,getSelectors:$,get selectors(){return $(G)},selectSlice:G}}const F={name:i,reducer:O,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:P,...k(s),injectInto(B,{reducerPath:N,...G}={}){const $=N??s;return B.inject({reducerPath:$,reducer:O},G),{...F,...k($,!0)}}};return F}}function Fwe(e,t,r,n){function i(s,...u){let a=t(s);return typeof a>"u"&&n&&(a=r()),e(a,...u)}return i.unwrapped=e,i}var Nwe=kwe();function Bwe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function jwe({type:e,reducerName:t,createNotation:r},n,i){let s,u;if("reducer"in n){if(r&&!$we(n))throw new Error(Dh(17));s=n.reducer,u=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,u?Uj(e,u):Uj(e))}function zwe(e){return e._reducerDefinitionType==="asyncThunk"}function $we(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qwe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(Dh(18));const{payloadCreator:s,fulfilled:u,pending:a,rejected:p,settled:d,options:g}=r,_=i(e,s,g);n.exposeAction(t,_),u&&n.addCase(_.fulfilled,u),a&&n.addCase(_.pending,a),p&&n.addCase(_.rejected,p),d&&n.addMatcher(_.settled,d),n.exposeCaseReducer(t,{fulfilled:u||H_,pending:a||H_,rejected:p||H_,settled:d||H_})}function H_(){}function Dh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function xH(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&xH(e,n.layers,n)})}const Uwe={mapConfigs:{}},wH=Nwe({name:"mapConfig",initialState:Uwe,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let s=0;s<i.layers.length;s++)if(i.layers[s].uuid===n.uuid){i.layers[s]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const s=i.layers.findIndex(u=>u.uuid===n);s!==-1&&(delete i.layers[s],xH(function(u,a){a&&a.layers&&(a.layers=a.layers.filter(p=>p.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,s=e.mapConfigs[r];if(s){const u=s.layers.findIndex(a=>a.uuid===n);if(u!==-1){const a=s.layers[u];if(a){const p=[...s.layers];a.type==="folder"&&s.layerOrder.forEach(d=>{d.uuid===n&&d.layers?.forEach(g=>{const _=s.layers.findIndex(S=>S.uuid===g.uuid),C=p[_];p[_]={...C,masterVisible:i},C?.type==="vt"&&C?.config?.layers&&(C.config.layers=C.config.layers.map(S=>({...S,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(d=>({...d,masterVisible:i}))),e.mapConfigs[r].layers=p}}}}}});Mwe({reducer:{mapConfig:wH.reducer}});const{setMapConfig:O7e,removeMapConfig:R7e,setLayerInMapConfig:L7e,removeLayerFromMapConfig:D7e,updateLayerOrder:k7e,setMasterVisible:F7e}=wH.actions;Qt(tf)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Qt(Dd)({marginLeft:"61px"});Qt(Uo)({padding:"4px",marginTop:"-3px"});Qt(Uo)({marginLeft:"20px"});Qt(PM)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Qt(mb)({minWidth:"30px"});Qt(Uo)({marginRight:"0px",padding:"0px"});Qt(Dd)(({open:e})=>({display:e?"block":"none"}));Qt(pb)({marginLeft:"50px"});Qt(pb)({marginTop:"15px"});var HO=R.createContext(void 0);HO.displayName="AuthContext";var cw={loginUrl:"/login",afterLoginUrl:"/"},Ec=function(){return R.useContext(HO)},by=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Kp=typeof window>"u"||"Deno"in globalThis;function Vl(){}function Vwe(e,t){return typeof e=="function"?e(t):e}function O3(e){return typeof e=="number"&&e>=0&&e!==1/0}function SH(e,t){return Math.max(e+(t||0)-Date.now(),0)}function wd(e,t){return typeof e=="function"?e(t):e}function hc(e,t){return typeof e=="function"?e(t):e}function Hj(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:u,stale:a}=e;if(u){if(n){if(t.queryHash!==WO(u,t.options))return!1}else if(!K0(t.queryKey,u))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function Wj(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Yp(t.options.mutationKey)!==Yp(s))return!1}else if(!K0(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function WO(e,t){return(t?.queryKeyHashFn||Yp)(e)}function Yp(e){return JSON.stringify(e,(t,r)=>R3(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function K0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>K0(e[r],t[r])):!1}var Gwe=Object.prototype.hasOwnProperty;function EH(e,t){if(e===t)return e;const r=Zj(e)&&Zj(t);if(!r&&!(R3(e)&&R3(t)))return t;const i=(r?e:Object.keys(e)).length,s=r?t:Object.keys(t),u=s.length,a=r?new Array(u):{};let p=0;for(let d=0;d<u;d++){const g=r?d:s[d],_=e[g],C=t[g];if(_===C){a[g]=_,(r?d<i:Gwe.call(e,g))&&p++;continue}if(_===null||C===null||typeof _!="object"||typeof C!="object"){a[g]=C;continue}const S=EH(_,C);a[g]=S,S===_&&p++}return i===u&&p===i?e:a}function vx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Zj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function R3(e){if(!Xj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Xj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Xj(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hwe(e){return new Promise(t=>{setTimeout(t,e)})}function L3(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?EH(e,t):t}function Wwe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Zwe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var ZO=Symbol();function CH(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===ZO?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function AH(e,t){return typeof e=="function"?e(...t):!!e}var Xwe=class extends by{#t;#e;#r;constructor(){super(),this.#r=e=>{if(!Kp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},XO=new Xwe,Kwe=class extends by{#t=!0;#e;#r;constructor(){super(),this.#r=e=>{if(!Kp&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#t}},bx=new Kwe;function D3(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Ywe(e){return Math.min(1e3*2**e,3e4)}function TH(e){return(e??"online")==="online"?bx.isOnline():!0}var k3=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function PH(e){let t=!1,r=0,n;const i=D3(),s=()=>i.status!=="pending",u=O=>{if(!s()){const P=new k3(O);C(P),e.onCancel?.(P)}},a=()=>{t=!0},p=()=>{t=!1},d=()=>XO.isFocused()&&(e.networkMode==="always"||bx.isOnline())&&e.canRun(),g=()=>TH(e.networkMode)&&e.canRun(),_=O=>{s()||(n?.(),i.resolve(O))},C=O=>{s()||(n?.(),i.reject(O))},S=()=>new Promise(O=>{n=P=>{(s()||d())&&O(P)},e.onPause?.()}).then(()=>{n=void 0,s()||e.onContinue?.()}),I=()=>{if(s())return;let O;const P=r===0?e.initialPromise:void 0;try{O=P??e.fn()}catch(k){O=Promise.reject(k)}Promise.resolve(O).then(_).catch(k=>{if(s())return;const F=e.retry??(Kp?0:3),B=e.retryDelay??Ywe,N=typeof B=="function"?B(r,k):B,G=F===!0||typeof F=="number"&&r<F||typeof F=="function"&&F(r,k);if(t||!G){C(k);return}r++,e.onFail?.(r,k),Hwe(N).then(()=>d()?void 0:S()).then(()=>{t?C(k):I()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(n?.(),i),cancelRetry:a,continueRetry:p,canStart:g,start:()=>(g()?I():S().then(I),i)}}var Jwe=e=>setTimeout(e,0);function Qwe(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=Jwe;const s=a=>{t?e.push(a):i(()=>{r(a)})},u=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(p=>{r(p)})})})};return{batch:a=>{let p;t++;try{p=a()}finally{t--,t||u()}return p},batchCalls:a=>(...p)=>{s(()=>{a(...p)})},schedule:s,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var zo=Qwe(),IH=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),O3(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Kp?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},e5e=class extends IH{#t;#e;#r;#n;#i;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=t5e(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=L3(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Vl).catch(Vl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>hc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!SH(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(p=>p.options.queryFn);a&&this.setOptions(a.options)}const r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const a=CH(this.options,t),d=(()=>{const g={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(g),g})();return this.#s=!1,this.options.persister?this.options.persister(a,d,this):a(d)},u=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(a),a})();this.options.behavior?.onFetch(u,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#a({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=PH({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:a=>{a instanceof k3&&a.revert&&this.setState({...this.#e,fetchStatus:"idle"}),r.abort()},onFail:(a,p)=>{this.#a({type:"failed",failureCount:a,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const a=await this.#i.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof k3){if(a.silent)return this.#i.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#a({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...MH(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),zo.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function MH(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TH(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function t5e(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var r5e=class extends by{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,r){const n=t.queryKey,i=t.queryHash??WO(n,t);let s=this.get(i);return s||(s=new e5e({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(s)),s}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){zo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Hj(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Hj(e,r)):t}notify(e){zo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){zo.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){zo.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},n5e=class extends IH{#t;#e;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||OH(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})};this.#r=PH({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(i,s)=>{this.#n({type:"failed",failureCount:i,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)t();else{this.#n({type:"pending",variables:e,isPaused:n}),await this.#e.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const i=await this.#r.start();return await this.#e.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,e,this.state.context,this),await this.options.onError?.(i,e,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,e,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#e.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),zo.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function OH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var i5e=class extends by{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(e,t,r){const n=new n5e({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=W_(e);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=W_(e);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=W_(e);if(typeof t=="string"){const n=this.#e.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=W_(e);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zo.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Wj(t,r))}findAll(e={}){return this.getAll().filter(t=>Wj(e,t))}notify(e){zo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return zo.batch(()=>Promise.all(e.map(t=>t.continue().catch(Vl))))}};function W_(e){return e.options.scope?.id}function Kj(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},p=0;const d=async()=>{let g=!1;const _=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},C=CH(t.options,t.fetchOptions),S=async(I,O,P)=>{if(g)return Promise.reject();if(O==null&&I.pages.length)return Promise.resolve(I);const F=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:O,direction:P?"backward":"forward",meta:t.options.meta};return _($),$})(),B=await C(F),{maxPages:N}=t.options,G=P?Zwe:Wwe;return{pages:G(I.pages,B,N),pageParams:G(I.pageParams,O,N)}};if(i&&s.length){const I=i==="backward",O=I?a5e:Yj,P={pages:s,pageParams:u},k=O(n,P);a=await S(P,k,I)}else{const I=e??s.length;do{const O=p===0?u[0]??n.initialPageParam:Yj(n,a);if(p>0&&O==null)break;a=await S(a,O),p++}while(p<I)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function Yj(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function a5e(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var o5e=class{#t;#e;#r;#n;#i;#o;#s;#a;constructor(e={}){this.#t=e.queryCache||new r5e,this.#e=e.mutationCache||new i5e,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=XO.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=bx.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#t.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(wd(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=this.#t.get(n.queryHash)?.state.data,u=Vwe(t,s);if(u!==void 0)return this.#t.build(this,n).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return zo.batch(()=>this.#t.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;zo.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#t;return zo.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=zo.batch(()=>this.#t.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Vl).catch(Vl)}invalidateQueries(e,t={}){return zo.batch(()=>(this.#t.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=zo.batch(()=>this.#t.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(Vl)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(Vl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(wd(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Vl).catch(Vl)}fetchInfiniteQuery(e){return e.behavior=Kj(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Vl).catch(Vl)}ensureInfiniteQueryData(e){return e.behavior=Kj(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bx.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Yp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{K0(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(Yp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{K0(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ZO&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},s5e=class extends by{constructor(e,t){super(),this.options=t,this.#t=e,this.#a=null,this.#s=D3(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#r=void 0;#n=void 0;#i;#o;#s;#a;#m;#h;#d;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Jj(this.#e,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return F3(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return F3(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#x(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hc(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!vx(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Qj(this.#e,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#e!==r||hc(this.options.enabled,this.#e)!==hc(t.enabled,this.#e)||wd(this.options.staleTime,this.#e)!==wd(t.staleTime,this.#e))&&this.#g();const i=this.#y();n&&(this.#e!==r||hc(this.options.enabled,this.#e)!==hc(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),r=this.createResult(t,e);return u5e(this,r)&&(this.#n=r,this.#o=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#f(e){this.#w();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Vl)),t}#g(){this.#_();const e=wd(this.options.staleTime,this.#e);if(Kp||this.#n.isStale||!O3(e))return;const r=SH(this.#n.dataUpdatedAt,e)+1;this.#u=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#x(),this.#l=e,!(Kp||hc(this.options.enabled,this.#e)===!1||!O3(this.#l)||this.#l===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||XO.isFocused())&&this.#f()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#_(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#x(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#e,n=this.options,i=this.#n,s=this.#i,u=this.#o,p=e!==r?e.state:this.#r,{state:d}=e;let g={...d},_=!1,C;if(t._optimisticResults){const ee=this.hasListeners(),J=!ee&&Jj(e,t),le=ee&&Qj(e,r,t,n);(J||le)&&(g={...g,...MH(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:S,errorUpdatedAt:I,status:O}=g;C=g.data;let P=!1;if(t.placeholderData!==void 0&&C===void 0&&O==="pending"){let ee;i?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(ee=i.data,P=!0):ee=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,ee!==void 0&&(O="success",C=L3(i?.data,ee,t),_=!0)}if(t.select&&C!==void 0&&!P)if(i&&C===s?.data&&t.select===this.#m)C=this.#h;else try{this.#m=t.select,C=t.select(C),C=L3(i?.data,C,t),this.#h=C,this.#a=null}catch(ee){this.#a=ee}this.#a&&(S=this.#a,C=this.#h,I=Date.now(),O="error");const k=g.fetchStatus==="fetching",F=O==="pending",B=O==="error",N=F&&k,G=C!==void 0,X={status:O,fetchStatus:g.fetchStatus,isPending:F,isSuccess:O==="success",isError:B,isInitialLoading:N,isLoading:N,data:C,dataUpdatedAt:g.dataUpdatedAt,error:S,errorUpdatedAt:I,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>p.dataUpdateCount||g.errorUpdateCount>p.errorUpdateCount,isFetching:k,isRefetching:k&&!F,isLoadingError:B&&!G,isPaused:g.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:B&&G,isStale:KO(e,t),refetch:this.refetch,promise:this.#s,isEnabled:hc(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const ee=Z=>{X.status==="error"?Z.reject(X.error):X.data!==void 0&&Z.resolve(X.data)},J=()=>{const Z=this.#s=X.promise=D3();ee(Z)},le=this.#s;switch(le.status){case"pending":e.queryHash===r.queryHash&&ee(le);break;case"fulfilled":(X.status==="error"||X.data!==le.value)&&J();break;case"rejected":(X.status!=="error"||X.error!==le.reason)&&J();break}}return X}updateResult(){const e=this.#n,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#o=this.options,this.#i.data!==void 0&&(this.#d=this.#e),vx(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const s=new Set(i??this.#p);return this.options.throwOnError&&s.add("error"),Object.keys(this.#n).some(u=>{const a=u;return this.#n[a]!==e[a]&&s.has(a)})};this.#S({listeners:r()})}#w(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){zo.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function l5e(e,t){return hc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jj(e,t){return l5e(e,t)||e.state.data!==void 0&&F3(e,t,t.refetchOnMount)}function F3(e,t,r){if(hc(t.enabled,e)!==!1&&wd(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&KO(e,t)}return!1}function Qj(e,t,r,n){return(e!==t||hc(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&KO(e,r)}function KO(e,t){return hc(t.enabled,e)!==!1&&e.isStaleByTime(wd(t.staleTime,e))}function u5e(e,t){return!vx(e.getCurrentResult(),t)}var c5e=class extends by{#t;#e=void 0;#r;#n;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),vx(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Yp(r.mutationKey)!==Yp(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#o()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??OH();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){zo.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,r,n),this.#n.onSettled?.(t.data,null,r,n)):t?.type==="error"&&(this.#n.onError?.(t.error,r,n),this.#n.onSettled?.(void 0,t.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},RH=R.createContext(void 0),Xf=e=>{const t=R.useContext(RH);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},f5e=({client:e,children:t})=>(R.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Ue.jsx(RH.Provider,{value:e,children:t})),LH=R.createContext(!1),h5e=()=>R.useContext(LH);LH.Provider;function d5e(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var p5e=R.createContext(d5e()),m5e=()=>R.useContext(p5e),g5e=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},y5e=e=>{R.useEffect(()=>{e.clearReset()},[e])},v5e=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||AH(r,[e.error,n])),b5e=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},_5e=(e,t)=>e.isLoading&&e.isFetching&&!t,x5e=(e,t)=>e?.suspense&&t.isPending,ez=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function w5e(e,t,r){const n=h5e(),i=m5e(),s=Xf(),u=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=n?"isRestoring":"optimistic",b5e(u),g5e(u,i),y5e(i);const a=!s.getQueryCache().get(u.queryHash),[p]=R.useState(()=>new t(s,u)),d=p.getOptimisticResult(u),g=!n&&e.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(_=>{const C=g?p.subscribe(zo.batchCalls(_)):Vl;return p.updateResult(),C},[p,g]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),R.useEffect(()=>{p.setOptions(u)},[u,p]),x5e(u,d))throw ez(u,p,i);if(v5e({result:d,errorResetBoundary:i,throwOnError:u.throwOnError,query:s.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw d.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(u,d),u.experimental_prefetchInRender&&!Kp&&_5e(d,n)&&(a?ez(u,p,i):s.getQueryCache().get(u.queryHash)?.promise)?.catch(Vl).finally(()=>{p.updateResult()}),u.notifyOnChangeProps?d:p.trackResult(d)}function cm(e,t){return w5e(e,s5e)}function DH(e,t){const r=Xf(),[n]=R.useState(()=>new c5e(r,e));R.useEffect(()=>{n.setOptions(e)},[n,e]);const i=R.useSyncExternalStore(R.useCallback(u=>n.subscribe(zo.batchCalls(u)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=R.useCallback((u,a)=>{n.mutate(u,a).catch(Vl)},[n]);if(i.error&&AH(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kH=e=>{throw TypeError(e)},S5e=(e,t,r)=>t.has(e)||kH("Cannot "+r),wA=(e,t,r)=>(S5e(e,t,"read from private field"),r?r.call(e):t.get(e)),E5e=(e,t,r)=>t.has(e)?kH("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),tz="popstate";function C5e(e={}){function t(i,s){let{pathname:u="/",search:a="",hash:p=""}=Kf(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Y0("",{pathname:u,search:a,hash:p},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){let u=i.document.querySelector("base"),a="";if(u&&u.getAttribute("href")){let p=i.location.href,d=p.indexOf("#");a=d===-1?p:p.slice(0,d)}return a+"#"+(typeof s=="string"?s:Md(s))}function n(i,s){Io(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return T5e(t,r,n,e)}function li(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Io(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A5e(){return Math.random().toString(36).substring(2,10)}function rz(e,t){return{usr:e.state,key:e.key,idx:t}}function Y0(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Kf(t):t,state:r,key:t&&t.key||n||A5e()}}function Md({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function T5e(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,u=i.history,a="POP",p=null,d=g();d==null&&(d=0,u.replaceState({...u.state,idx:d},""));function g(){return(u.state||{idx:null}).idx}function _(){a="POP";let P=g(),k=P==null?null:P-d;d=P,p&&p({action:a,location:O.location,delta:k})}function C(P,k){a="PUSH";let F=Y0(O.location,P,k);r&&r(F,P),d=g()+1;let B=rz(F,d),N=O.createHref(F);try{u.pushState(B,"",N)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(N)}s&&p&&p({action:a,location:O.location,delta:1})}function S(P,k){a="REPLACE";let F=Y0(O.location,P,k);r&&r(F,P),d=g();let B=rz(F,d),N=O.createHref(F);u.replaceState(B,"",N),s&&p&&p({action:a,location:O.location,delta:0})}function I(P){return FH(P)}let O={get action(){return a},get location(){return e(i,u)},listen(P){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(tz,_),p=P,()=>{i.removeEventListener(tz,_),p=null}},createHref(P){return t(i,P)},createURL:I,encodeLocation(P){let k=I(P);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:C,replace:S,go(P){return u.go(P)}};return O}function FH(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),li(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Md(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var Jv,nz=class{constructor(e){if(E5e(this,Jv,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(wA(this,Jv).has(e))return wA(this,Jv).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){wA(this,Jv).set(e,t)}};Jv=new WeakMap;var P5e=new Set(["lazy","caseSensitive","path","id","index","children"]);function I5e(e){return P5e.has(e)}var M5e=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function O5e(e){return M5e.has(e)}function R5e(e){return e.index===!0}function J0(e,t,r=[],n={},i=!1){return e.map((s,u)=>{let a=[...r,String(u)],p=typeof s.id=="string"?s.id:a.join("-");if(li(s.index!==!0||!s.children,"Cannot specify children on an index route"),li(i||!n[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),R5e(s)){let d={...s,...t(s),id:p};return n[p]=d,d}else{let d={...s,...t(s),id:p,children:void 0};return n[p]=d,s.children&&(d.children=J0(s.children,t,a,n,i)),d}})}function pd(e,t,r="/"){return P1(e,t,r,!1)}function P1(e,t,r,n){let i=typeof t=="string"?Kf(t):t,s=mu(i.pathname||"/",r);if(s==null)return null;let u=NH(e);D5e(u);let a=null;for(let p=0;a==null&&p<u.length;++p){let d=jH(s);a=U5e(u[p],d,n)}return a}function L5e(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function NH(e,t=[],r=[],n="",i=!1){let s=(u,a,p=i,d)=>{let g={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:a,route:u};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&p)return;li(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let _=$f([n,g.relativePath]),C=r.concat(g);u.children&&u.children.length>0&&(li(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),NH(u.children,t,C,_,p)),!(u.path==null&&!u.index)&&t.push({path:_,score:$5e(_,u.index),routesMeta:C})};return e.forEach((u,a)=>{if(u.path===""||!u.path?.includes("?"))s(u,a);else for(let p of BH(u.path))s(u,a,!0,p)}),t}function BH(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let u=BH(n.join("/")),a=[];return a.push(...u.map(p=>p===""?s:[s,p].join("/"))),i&&a.push(...u),a.map(p=>e.startsWith("/")&&p===""?"/":p)}function D5e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:q5e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var k5e=/^:[\w-]+$/,F5e=3,N5e=2,B5e=1,j5e=10,z5e=-2,iz=e=>e==="*";function $5e(e,t){let r=e.split("/"),n=r.length;return r.some(iz)&&(n+=z5e),t&&(n+=N5e),r.filter(i=>!iz(i)).reduce((i,s)=>i+(k5e.test(s)?F5e:s===""?B5e:j5e),n)}function q5e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function U5e(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",u=[];for(let a=0;a<n.length;++a){let p=n[a],d=a===n.length-1,g=s==="/"?t:t.slice(s.length)||"/",_=Q0({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},g),C=p.route;if(!_&&d&&r&&!n[n.length-1].route.index&&(_=Q0({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!_)return null;Object.assign(i,_.params),u.push({params:i,pathname:$f([s,_.pathname]),pathnameBase:Z5e($f([s,_.pathnameBase])),route:C}),_.pathnameBase!=="/"&&(s=$f([s,_.pathnameBase]))}return u}function Q0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=V5e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],u=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((d,{paramName:g,isOptional:_},C)=>{if(g==="*"){let I=a[C]||"";u=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const S=a[C];return _&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:u,pattern:e}}function V5e(e,t=!1,r=!0){Io(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,a,p)=>(n.push({paramName:a,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function jH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Io(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function mu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function G5e({basename:e,pathname:t}){return t==="/"?e:$f([e,t])}function H5e(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Kf(e):e;return{pathname:r?r.startsWith("/")?r:W5e(r,t):t,search:X5e(n),hash:K5e(i)}}function W5e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function SA(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zH(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function fw(e){let t=zH(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function hw(e,t,r,n=!1){let i;typeof e=="string"?i=Kf(e):(i={...e},li(!i.pathname||!i.pathname.includes("?"),SA("?","pathname","search",i)),li(!i.pathname||!i.pathname.includes("#"),SA("#","pathname","hash",i)),li(!i.search||!i.search.includes("#"),SA("#","search","hash",i)));let s=e===""||i.pathname==="",u=s?"/":i.pathname,a;if(u==null)a=r;else{let _=t.length-1;if(!n&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),_-=1;i.pathname=C.join("/")}a=_>=0?t[_]:"/"}let p=H5e(i,a),d=u&&u!=="/"&&u.endsWith("/"),g=(s||u===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(d||g)&&(p.pathname+="/"),p}var $f=e=>e.join("/").replace(/\/\/+/g,"/"),Z5e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X5e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,K5e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,_x=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function eb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var $H=["POST","PUT","PATCH","DELETE"],Y5e=new Set($H),J5e=["GET",...$H],Q5e=new Set(J5e),eSe=new Set([301,302,303,307,308]),tSe=new Set([307,308]),EA={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rSe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Eg={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},nSe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YO=e=>nSe.test(e),iSe=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),qH="remix-router-transitions",UH=Symbol("ResetLoaderData");function aSe(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";li(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],i=e.mapRouteProperties||iSe,s={},u=J0(e.routes,i,void 0,s),a,p=e.basename||"/";p.startsWith("/")||(p=`/${p}`);let d=e.dataStrategy||cSe,g={...e.future},_=null,C=new Set,S=null,I=null,O=null,P=e.hydrationData!=null,k=pd(u,e.history.location,p),F=!1,B=null,N;if(k==null&&!e.patchRoutesOnNavigation){let wt=cc(404,{pathname:e.history.location.pathname}),{matches:Ct,route:Wt}=Z_(u);N=!0,k=Ct,B={[Wt.id]:wt}}else if(k&&!e.hydrationData&&Ur(k,u,e.history.location.pathname).active&&(k=null),k)if(k.some(wt=>wt.route.lazy))N=!1;else if(!k.some(wt=>wt.route.loader))N=!0;else{let wt=e.hydrationData?e.hydrationData.loaderData:null,Ct=e.hydrationData?e.hydrationData.errors:null;if(Ct){let Wt=k.findIndex(ie=>Ct[ie.route.id]!==void 0);N=k.slice(0,Wt+1).every(ie=>!B3(ie.route,wt,Ct))}else N=k.every(Wt=>!B3(Wt.route,wt,Ct))}else{N=!1,k=[];let wt=Ur(null,u,e.history.location.pathname);wt.active&&wt.matches&&(F=!0,k=wt.matches)}let G,$={historyAction:e.history.action,location:e.history.location,matches:k,initialized:N,navigation:EA,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||B,fetchers:new Map,blockers:new Map},X="POP",ee=!1,J,le=!1,Z=new Map,H=null,oe=!1,ue=!1,ce=new Set,be=new Map,Te=0,ve=-1,Ce=new Map,$e=new Set,Je=new Map,ge=new Map,Ee=new Set,Ie=new Map,Le,Ve=null;function ht(){if(_=e.history.listen(({action:wt,location:Ct,delta:Wt})=>{if(Le){Le(),Le=void 0;return}Io(Ie.size===0||Wt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=cr({currentLocation:$.location,nextLocation:Ct,historyAction:wt});if(ie&&Wt!=null){let _e=new Promise(Ze=>{Le=Ze});e.history.go(Wt*-1),kt(ie,{state:"blocked",location:Ct,proceed(){kt(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:Ct}),_e.then(()=>e.history.go(Wt))},reset(){let Ze=new Map($.blockers);Ze.set(ie,Eg),rt({blockers:Ze})}});return}return dt(wt,Ct)}),r){CSe(t,Z);let wt=()=>ASe(t,Z);t.addEventListener("pagehide",wt),H=()=>t.removeEventListener("pagehide",wt)}return $.initialized||dt("POP",$.location,{initialHydration:!0}),G}function It(){_&&_(),H&&H(),C.clear(),J&&J.abort(),$.fetchers.forEach((wt,Ct)=>Ae(Ct)),$.blockers.forEach((wt,Ct)=>$t(Ct))}function xt(wt){return C.add(wt),()=>C.delete(wt)}function rt(wt,Ct={}){wt.matches&&(wt.matches=wt.matches.map(_e=>{let Ze=s[_e.route.id],_t=_e.route;return _t.element!==Ze.element||_t.errorElement!==Ze.errorElement||_t.hydrateFallbackElement!==Ze.hydrateFallbackElement?{..._e,route:Ze}:_e})),$={...$,...wt};let Wt=[],ie=[];$.fetchers.forEach((_e,Ze)=>{_e.state==="idle"&&(Ee.has(Ze)?Wt.push(Ze):ie.push(Ze))}),Ee.forEach(_e=>{!$.fetchers.has(_e)&&!be.has(_e)&&Wt.push(_e)}),[...C].forEach(_e=>_e($,{deletedFetchers:Wt,viewTransitionOpts:Ct.viewTransitionOpts,flushSync:Ct.flushSync===!0})),Wt.forEach(_e=>Ae(_e)),ie.forEach(_e=>$.fetchers.delete(_e))}function zt(wt,Ct,{flushSync:Wt}={}){let ie=$.actionData!=null&&$.navigation.formMethod!=null&&cu($.navigation.formMethod)&&$.navigation.state==="loading"&&wt.state?._isRedirect!==!0,_e;Ct.actionData?Object.keys(Ct.actionData).length>0?_e=Ct.actionData:_e=null:ie?_e=$.actionData:_e=null;let Ze=Ct.loaderData?pz($.loaderData,Ct.loaderData,Ct.matches||[],Ct.errors):$.loaderData,_t=$.blockers;_t.size>0&&(_t=new Map(_t),_t.forEach((Vr,Rr)=>_t.set(Rr,Eg)));let lt=oe?!1:Rt(wt,Ct.matches||$.matches),or=ee===!0||$.navigation.formMethod!=null&&cu($.navigation.formMethod)&&wt.state?._isRedirect!==!0;a&&(u=a,a=void 0),oe||X==="POP"||(X==="PUSH"?e.history.push(wt,wt.state):X==="REPLACE"&&e.history.replace(wt,wt.state));let Ar;if(X==="POP"){let Vr=Z.get($.location.pathname);Vr&&Vr.has(wt.pathname)?Ar={currentLocation:$.location,nextLocation:wt}:Z.has(wt.pathname)&&(Ar={currentLocation:wt,nextLocation:$.location})}else if(le){let Vr=Z.get($.location.pathname);Vr?Vr.add(wt.pathname):(Vr=new Set([wt.pathname]),Z.set($.location.pathname,Vr)),Ar={currentLocation:$.location,nextLocation:wt}}rt({...Ct,actionData:_e,loaderData:Ze,historyAction:X,location:wt,initialized:!0,navigation:EA,revalidation:"idle",restoreScrollPosition:lt,preventScrollReset:or,blockers:_t},{viewTransitionOpts:Ar,flushSync:Wt===!0}),X="POP",ee=!1,le=!1,oe=!1,ue=!1,Ve?.resolve(),Ve=null}async function Lt(wt,Ct){if(typeof wt=="number"){e.history.go(wt);return}let Wt=N3($.location,$.matches,p,wt,Ct?.fromRouteId,Ct?.relative),{path:ie,submission:_e,error:Ze}=az(!1,Wt,Ct),_t=$.location,lt=Y0($.location,ie,Ct&&Ct.state);lt={...lt,...e.history.encodeLocation(lt)};let or=Ct&&Ct.replace!=null?Ct.replace:void 0,Ar="PUSH";or===!0?Ar="REPLACE":or===!1||_e!=null&&cu(_e.formMethod)&&_e.formAction===$.location.pathname+$.location.search&&(Ar="REPLACE");let Vr=Ct&&"preventScrollReset"in Ct?Ct.preventScrollReset===!0:void 0,Rr=(Ct&&Ct.flushSync)===!0,lr=cr({currentLocation:_t,nextLocation:lt,historyAction:Ar});if(lr){kt(lr,{state:"blocked",location:lt,proceed(){kt(lr,{state:"proceeding",proceed:void 0,reset:void 0,location:lt}),Lt(wt,Ct)},reset(){let kr=new Map($.blockers);kr.set(lr,Eg),rt({blockers:kr})}});return}await dt(Ar,lt,{submission:_e,pendingError:Ze,preventScrollReset:Vr,replace:Ct&&Ct.replace,enableViewTransition:Ct&&Ct.viewTransition,flushSync:Rr})}function Ft(){Ve||(Ve=TSe()),Vt(),rt({revalidation:"loading"});let wt=Ve.promise;return $.navigation.state==="submitting"?wt:$.navigation.state==="idle"?(dt($.historyAction,$.location,{startUninterruptedRevalidation:!0}),wt):(dt(X||$.historyAction,$.navigation.location,{overrideNavigation:$.navigation,enableViewTransition:le===!0}),wt)}async function dt(wt,Ct,Wt){J&&J.abort(),J=null,X=wt,oe=(Wt&&Wt.startUninterruptedRevalidation)===!0,Kr($.location,$.matches),ee=(Wt&&Wt.preventScrollReset)===!0,le=(Wt&&Wt.enableViewTransition)===!0;let ie=a||u,_e=Wt&&Wt.overrideNavigation,Ze=Wt?.initialHydration&&$.matches&&$.matches.length>0&&!F?$.matches:pd(ie,Ct,p),_t=(Wt&&Wt.flushSync)===!0;if(Ze&&$.initialized&&!ue&&vSe($.location,Ct)&&!(Wt&&Wt.submission&&cu(Wt.submission.formMethod))){zt(Ct,{matches:Ze},{flushSync:_t});return}let lt=Ur(Ze,ie,Ct.pathname);if(lt.active&&lt.matches&&(Ze=lt.matches),!Ze){let{error:dn,notFoundMatches:Bn,route:Pn}=mr(Ct.pathname);zt(Ct,{matches:Bn,loaderData:{},errors:{[Pn.id]:dn}},{flushSync:_t});return}J=new AbortController;let or=Cg(e.history,Ct,J.signal,Wt&&Wt.submission),Ar=e.unstable_getContext?await e.unstable_getContext():new nz,Vr;if(Wt&&Wt.pendingError)Vr=[md(Ze).route.id,{type:"error",error:Wt.pendingError}];else if(Wt&&Wt.submission&&cu(Wt.submission.formMethod)){let dn=await ke(or,Ct,Wt.submission,Ze,Ar,lt.active,Wt&&Wt.initialHydration===!0,{replace:Wt.replace,flushSync:_t});if(dn.shortCircuited)return;if(dn.pendingActionResult){let[Bn,Pn]=dn.pendingActionResult;if(Bu(Pn)&&eb(Pn.error)&&Pn.error.status===404){J=null,zt(Ct,{matches:dn.matches,loaderData:{},errors:{[Bn]:Pn.error}});return}}Ze=dn.matches||Ze,Vr=dn.pendingActionResult,_e=CA(Ct,Wt.submission),_t=!1,lt.active=!1,or=Cg(e.history,or.url,or.signal)}let{shortCircuited:Rr,matches:lr,loaderData:kr,errors:Yr}=await fr(or,Ct,Ze,Ar,lt.active,_e,Wt&&Wt.submission,Wt&&Wt.fetcherSubmission,Wt&&Wt.replace,Wt&&Wt.initialHydration===!0,_t,Vr);Rr||(J=null,zt(Ct,{matches:lr||Ze,...mz(Vr),loaderData:kr,errors:Yr}))}async function ke(wt,Ct,Wt,ie,_e,Ze,_t,lt={}){Vt();let or=SSe(Ct,Wt);if(rt({navigation:or},{flushSync:lt.flushSync===!0}),Ze){let Rr=await Fn(ie,Ct.pathname,wt.signal);if(Rr.type==="aborted")return{shortCircuited:!0};if(Rr.type==="error"){if(Rr.partialMatches.length===0){let{matches:kr,route:Yr}=Z_(u);return{matches:kr,pendingActionResult:[Yr.id,{type:"error",error:Rr.error}]}}let lr=md(Rr.partialMatches).route.id;return{matches:Rr.partialMatches,pendingActionResult:[lr,{type:"error",error:Rr.error}]}}else if(Rr.matches)ie=Rr.matches;else{let{notFoundMatches:lr,error:kr,route:Yr}=mr(Ct.pathname);return{matches:lr,pendingActionResult:[Yr.id,{type:"error",error:kr}]}}}let Ar,Vr=I1(ie,Ct);if(!Vr.route.action&&!Vr.route.lazy)Ar={type:"error",error:cc(405,{method:wt.method,pathname:Ct.pathname,routeId:Vr.route.id})};else{let Rr=zg(i,s,wt,ie,Vr,_t?[]:n,_e),lr=await Nt(wt,Rr,_e,null);if(Ar=lr[Vr.route.id],!Ar){for(let kr of ie)if(lr[kr.route.id]){Ar=lr[kr.route.id];break}}if(wt.signal.aborted)return{shortCircuited:!0}}if(Dp(Ar)){let Rr;return lt&&lt.replace!=null?Rr=lt.replace:Rr=fz(Ar.response.headers.get("Location"),new URL(wt.url),p)===$.location.pathname+$.location.search,await ut(wt,Ar,!0,{submission:Wt,replace:Rr}),{shortCircuited:!0}}if(Bu(Ar)){let Rr=md(ie,Vr.route.id);return(lt&&lt.replace)!==!0&&(X="PUSH"),{matches:ie,pendingActionResult:[Rr.route.id,Ar,Vr.route.id]}}return{matches:ie,pendingActionResult:[Vr.route.id,Ar]}}async function fr(wt,Ct,Wt,ie,_e,Ze,_t,lt,or,Ar,Vr,Rr){let lr=Ze||CA(Ct,_t),kr=_t||lt||yz(lr),Yr=!oe&&!Ar;if(_e){if(Yr){let Xi=sr(Rr);rt({navigation:lr,...Xi!==void 0?{actionData:Xi}:{}},{flushSync:Vr})}let cn=await Fn(Wt,Ct.pathname,wt.signal);if(cn.type==="aborted")return{shortCircuited:!0};if(cn.type==="error"){if(cn.partialMatches.length===0){let{matches:ia,route:Ki}=Z_(u);return{matches:ia,loaderData:{},errors:{[Ki.id]:cn.error}}}let Xi=md(cn.partialMatches).route.id;return{matches:cn.partialMatches,loaderData:{},errors:{[Xi]:cn.error}}}else if(cn.matches)Wt=cn.matches;else{let{error:Xi,notFoundMatches:ia,route:Ki}=mr(Ct.pathname);return{matches:ia,loaderData:{},errors:{[Ki.id]:Xi}}}}let dn=a||u,{dsMatches:Bn,revalidatingFetchers:Pn}=oz(wt,ie,i,s,e.history,$,Wt,kr,Ct,Ar?[]:n,Ar===!0,ue,ce,Ee,Je,$e,dn,p,e.patchRoutesOnNavigation!=null,Rr);if(ve=++Te,!e.dataStrategy&&!Bn.some(cn=>cn.shouldLoad)&&!Bn.some(cn=>cn.route.unstable_middleware)&&Pn.length===0){let cn=bt();return zt(Ct,{matches:Wt,loaderData:{},errors:Rr&&Bu(Rr[1])?{[Rr[0]]:Rr[1].error}:null,...mz(Rr),...cn?{fetchers:new Map($.fetchers)}:{}},{flushSync:Vr}),{shortCircuited:!0}}if(Yr){let cn={};if(!_e){cn.navigation=lr;let Xi=sr(Rr);Xi!==void 0&&(cn.actionData=Xi)}Pn.length>0&&(cn.fetchers=xr(Pn)),rt(cn,{flushSync:Vr})}Pn.forEach(cn=>{Ne(cn.key),cn.controller&&be.set(cn.key,cn.controller)});let un=()=>Pn.forEach(cn=>Ne(cn.key));J&&J.signal.addEventListener("abort",un);let{loaderResults:Wi,fetcherResults:Zi}=await Kt(Bn,Pn,wt,ie);if(wt.signal.aborted)return{shortCircuited:!0};J&&J.signal.removeEventListener("abort",un),Pn.forEach(cn=>be.delete(cn.key));let Ui=X_(Wi);if(Ui)return await ut(wt,Ui.result,!0,{replace:or}),{shortCircuited:!0};if(Ui=X_(Zi),Ui)return $e.add(Ui.key),await ut(wt,Ui.result,!0,{replace:or}),{shortCircuited:!0};let{loaderData:Ri,errors:Pa}=dz($,Wt,Wi,Rr,Pn,Zi);Ar&&$.errors&&(Pa={...$.errors,...Pa});let Vi=bt(),Ro=tt(ve),Dn=Vi||Ro||Pn.length>0;return{matches:Wt,loaderData:Ri,errors:Pa,...Dn?{fetchers:new Map($.fetchers)}:{}}}function sr(wt){if(wt&&!Bu(wt[1]))return{[wt[0]]:wt[1].data};if($.actionData)return Object.keys($.actionData).length===0?null:$.actionData}function xr(wt){return wt.forEach(Ct=>{let Wt=$.fetchers.get(Ct.key),ie=Mv(void 0,Wt?Wt.data:void 0);$.fetchers.set(Ct.key,ie)}),new Map($.fetchers)}async function tr(wt,Ct,Wt,ie){Ne(wt);let _e=(ie&&ie.flushSync)===!0,Ze=a||u,_t=N3($.location,$.matches,p,Wt,Ct,ie?.relative),lt=pd(Ze,_t,p),or=Ur(lt,Ze,_t);if(or.active&&or.matches&&(lt=or.matches),!lt){me(wt,Ct,cc(404,{pathname:_t}),{flushSync:_e});return}let{path:Ar,submission:Vr,error:Rr}=az(!0,_t,ie);if(Rr){me(wt,Ct,Rr,{flushSync:_e});return}let lr=e.unstable_getContext?await e.unstable_getContext():new nz,kr=(ie&&ie.preventScrollReset)===!0;if(Vr&&cu(Vr.formMethod)){await Ge(wt,Ct,Ar,lt,lr,or.active,_e,kr,Vr);return}Je.set(wt,{routeId:Ct,path:Ar}),await nt(wt,Ct,Ar,lt,lr,or.active,_e,kr,Vr)}async function Ge(wt,Ct,Wt,ie,_e,Ze,_t,lt,or){Vt(),Je.delete(wt);let Ar=$.fetchers.get(wt);Ke(wt,ESe(or,Ar),{flushSync:_t});let Vr=new AbortController,Rr=Cg(e.history,Wt,Vr.signal,or);if(Ze){let vi=await Fn(ie,new URL(Rr.url).pathname,Rr.signal,wt);if(vi.type==="aborted")return;if(vi.type==="error"){me(wt,Ct,vi.error,{flushSync:_t});return}else if(vi.matches)ie=vi.matches;else{me(wt,Ct,cc(404,{pathname:Wt}),{flushSync:_t});return}}let lr=I1(ie,Wt);if(!lr.route.action&&!lr.route.lazy){let vi=cc(405,{method:or.formMethod,pathname:Wt,routeId:Ct});me(wt,Ct,vi,{flushSync:_t});return}be.set(wt,Vr);let kr=Te,Yr=zg(i,s,Rr,ie,lr,n,_e),Bn=(await Nt(Rr,Yr,_e,wt))[lr.route.id];if(Rr.signal.aborted){be.get(wt)===Vr&&be.delete(wt);return}if(Ee.has(wt)){if(Dp(Bn)||Bu(Bn)){Ke(wt,ud(void 0));return}}else{if(Dp(Bn))if(be.delete(wt),ve>kr){Ke(wt,ud(void 0));return}else return $e.add(wt),Ke(wt,Mv(or)),ut(Rr,Bn,!1,{fetcherSubmission:or,preventScrollReset:lt});if(Bu(Bn)){me(wt,Ct,Bn.error);return}}let Pn=$.navigation.location||$.location,un=Cg(e.history,Pn,Vr.signal),Wi=a||u,Zi=$.navigation.state!=="idle"?pd(Wi,$.navigation.location,p):$.matches;li(Zi,"Didn't find any matches after fetcher action");let Ui=++Te;Ce.set(wt,Ui);let Ri=Mv(or,Bn.data);$.fetchers.set(wt,Ri);let{dsMatches:Pa,revalidatingFetchers:Vi}=oz(un,_e,i,s,e.history,$,Zi,or,Pn,n,!1,ue,ce,Ee,Je,$e,Wi,p,e.patchRoutesOnNavigation!=null,[lr.route.id,Bn]);Vi.filter(vi=>vi.key!==wt).forEach(vi=>{let Yi=vi.key,mo=$.fetchers.get(Yi),xs=Mv(void 0,mo?mo.data:void 0);$.fetchers.set(Yi,xs),Ne(Yi),vi.controller&&be.set(Yi,vi.controller)}),rt({fetchers:new Map($.fetchers)});let Ro=()=>Vi.forEach(vi=>Ne(vi.key));Vr.signal.addEventListener("abort",Ro);let{loaderResults:Dn,fetcherResults:cn}=await Kt(Pa,Vi,un,_e);if(Vr.signal.aborted)return;if(Vr.signal.removeEventListener("abort",Ro),Ce.delete(wt),be.delete(wt),Vi.forEach(vi=>be.delete(vi.key)),$.fetchers.has(wt)){let vi=ud(Bn.data);$.fetchers.set(wt,vi)}let Xi=X_(Dn);if(Xi)return ut(un,Xi.result,!1,{preventScrollReset:lt});if(Xi=X_(cn),Xi)return $e.add(Xi.key),ut(un,Xi.result,!1,{preventScrollReset:lt});let{loaderData:ia,errors:Ki}=dz($,Zi,Dn,void 0,Vi,cn);tt(Ui),$.navigation.state==="loading"&&Ui>ve?(li(X,"Expected pending action"),J&&J.abort(),zt($.navigation.location,{matches:Zi,loaderData:ia,errors:Ki,fetchers:new Map($.fetchers)})):(rt({errors:Ki,loaderData:pz($.loaderData,ia,Zi,Ki),fetchers:new Map($.fetchers)}),ue=!1)}async function nt(wt,Ct,Wt,ie,_e,Ze,_t,lt,or){let Ar=$.fetchers.get(wt);Ke(wt,Mv(or,Ar?Ar.data:void 0),{flushSync:_t});let Vr=new AbortController,Rr=Cg(e.history,Wt,Vr.signal);if(Ze){let Pn=await Fn(ie,new URL(Rr.url).pathname,Rr.signal,wt);if(Pn.type==="aborted")return;if(Pn.type==="error"){me(wt,Ct,Pn.error,{flushSync:_t});return}else if(Pn.matches)ie=Pn.matches;else{me(wt,Ct,cc(404,{pathname:Wt}),{flushSync:_t});return}}let lr=I1(ie,Wt);be.set(wt,Vr);let kr=Te,Yr=zg(i,s,Rr,ie,lr,n,_e),Bn=(await Nt(Rr,Yr,_e,wt))[lr.route.id];if(be.get(wt)===Vr&&be.delete(wt),!Rr.signal.aborted){if(Ee.has(wt)){Ke(wt,ud(void 0));return}if(Dp(Bn))if(ve>kr){Ke(wt,ud(void 0));return}else{$e.add(wt),await ut(Rr,Bn,!1,{preventScrollReset:lt});return}if(Bu(Bn)){me(wt,Ct,Bn.error);return}Ke(wt,ud(Bn.data))}}async function ut(wt,Ct,Wt,{submission:ie,fetcherSubmission:_e,preventScrollReset:Ze,replace:_t}={}){Ct.response.headers.has("X-Remix-Revalidate")&&(ue=!0);let lt=Ct.response.headers.get("Location");li(lt,"Expected a Location header on the redirect Response"),lt=fz(lt,new URL(wt.url),p);let or=Y0($.location,lt,{_isRedirect:!0});if(r){let Yr=!1;if(Ct.response.headers.has("X-Remix-Reload-Document"))Yr=!0;else if(YO(lt)){const dn=FH(lt,!0);Yr=dn.origin!==t.location.origin||mu(dn.pathname,p)==null}if(Yr){_t?t.location.replace(lt):t.location.assign(lt);return}}J=null;let Ar=_t===!0||Ct.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Vr,formAction:Rr,formEncType:lr}=$.navigation;!ie&&!_e&&Vr&&Rr&&lr&&(ie=yz($.navigation));let kr=ie||_e;if(tSe.has(Ct.response.status)&&kr&&cu(kr.formMethod))await dt(Ar,or,{submission:{...kr,formAction:lt},preventScrollReset:Ze||ee,enableViewTransition:Wt?le:void 0});else{let Yr=CA(or,ie);await dt(Ar,or,{overrideNavigation:Yr,fetcherSubmission:_e,preventScrollReset:Ze||ee,enableViewTransition:Wt?le:void 0})}}async function Nt(wt,Ct,Wt,ie){let _e,Ze={};try{_e=await hSe(d,wt,Ct,ie,Wt,!1)}catch(_t){return Ct.filter(lt=>lt.shouldLoad).forEach(lt=>{Ze[lt.route.id]={type:"error",error:_t}}),Ze}if(wt.signal.aborted)return Ze;for(let[_t,lt]of Object.entries(_e))if(xSe(lt)){let or=lt.result;Ze[_t]={type:"redirect",response:gSe(or,wt,_t,Ct,p)}}else Ze[_t]=await mSe(lt);return Ze}async function Kt(wt,Ct,Wt,ie){let _e=Nt(Wt,wt,ie,null),Ze=Promise.all(Ct.map(async or=>{if(or.matches&&or.match&&or.request&&or.controller){let Vr=(await Nt(or.request,or.matches,ie,or.key))[or.match.route.id];return{[or.key]:Vr}}else return Promise.resolve({[or.key]:{type:"error",error:cc(404,{pathname:or.path})}})})),_t=await _e,lt=(await Ze).reduce((or,Ar)=>Object.assign(or,Ar),{});return{loaderResults:_t,fetcherResults:lt}}function Vt(){ue=!0,Je.forEach((wt,Ct)=>{be.has(Ct)&&ce.add(Ct),Ne(Ct)})}function Ke(wt,Ct,Wt={}){$.fetchers.set(wt,Ct),rt({fetchers:new Map($.fetchers)},{flushSync:(Wt&&Wt.flushSync)===!0})}function me(wt,Ct,Wt,ie={}){let _e=md($.matches,Ct);Ae(wt),rt({errors:{[_e.route.id]:Wt},fetchers:new Map($.fetchers)},{flushSync:(ie&&ie.flushSync)===!0})}function pe(wt){return ge.set(wt,(ge.get(wt)||0)+1),Ee.has(wt)&&Ee.delete(wt),$.fetchers.get(wt)||rSe}function Ae(wt){let Ct=$.fetchers.get(wt);be.has(wt)&&!(Ct&&Ct.state==="loading"&&Ce.has(wt))&&Ne(wt),Je.delete(wt),Ce.delete(wt),$e.delete(wt),Ee.delete(wt),ce.delete(wt),$.fetchers.delete(wt)}function Be(wt){let Ct=(ge.get(wt)||0)-1;Ct<=0?(ge.delete(wt),Ee.add(wt)):ge.set(wt,Ct),rt({fetchers:new Map($.fetchers)})}function Ne(wt){let Ct=be.get(wt);Ct&&(Ct.abort(),be.delete(wt))}function Tt(wt){for(let Ct of wt){let Wt=pe(Ct),ie=ud(Wt.data);$.fetchers.set(Ct,ie)}}function bt(){let wt=[],Ct=!1;for(let Wt of $e){let ie=$.fetchers.get(Wt);li(ie,`Expected fetcher: ${Wt}`),ie.state==="loading"&&($e.delete(Wt),wt.push(Wt),Ct=!0)}return Tt(wt),Ct}function tt(wt){let Ct=[];for(let[Wt,ie]of Ce)if(ie<wt){let _e=$.fetchers.get(Wt);li(_e,`Expected fetcher: ${Wt}`),_e.state==="loading"&&(Ne(Wt),Ce.delete(Wt),Ct.push(Wt))}return Tt(Ct),Ct.length>0}function gt(wt,Ct){let Wt=$.blockers.get(wt)||Eg;return Ie.get(wt)!==Ct&&Ie.set(wt,Ct),Wt}function $t(wt){$.blockers.delete(wt),Ie.delete(wt)}function kt(wt,Ct){let Wt=$.blockers.get(wt)||Eg;li(Wt.state==="unblocked"&&Ct.state==="blocked"||Wt.state==="blocked"&&Ct.state==="blocked"||Wt.state==="blocked"&&Ct.state==="proceeding"||Wt.state==="blocked"&&Ct.state==="unblocked"||Wt.state==="proceeding"&&Ct.state==="unblocked",`Invalid blocker state transition: ${Wt.state} -> ${Ct.state}`);let ie=new Map($.blockers);ie.set(wt,Ct),rt({blockers:ie})}function cr({currentLocation:wt,nextLocation:Ct,historyAction:Wt}){if(Ie.size===0)return;Ie.size>1&&Io(!1,"A router only supports one blocker at a time");let ie=Array.from(Ie.entries()),[_e,Ze]=ie[ie.length-1],_t=$.blockers.get(_e);if(!(_t&&_t.state==="proceeding")&&Ze({currentLocation:wt,nextLocation:Ct,historyAction:Wt}))return _e}function mr(wt){let Ct=cc(404,{pathname:wt}),Wt=a||u,{matches:ie,route:_e}=Z_(Wt);return{notFoundMatches:ie,route:_e,error:Ct}}function Zr(wt,Ct,Wt){if(S=wt,O=Ct,I=Wt||null,!P&&$.navigation===EA){P=!0;let ie=Rt($.location,$.matches);ie!=null&&rt({restoreScrollPosition:ie})}return()=>{S=null,O=null,I=null}}function mn(wt,Ct){return I&&I(wt,Ct.map(ie=>L5e(ie,$.loaderData)))||wt.key}function Kr(wt,Ct){if(S&&O){let Wt=mn(wt,Ct);S[Wt]=O()}}function Rt(wt,Ct){if(S){let Wt=mn(wt,Ct),ie=S[Wt];if(typeof ie=="number")return ie}return null}function Ur(wt,Ct,Wt){if(e.patchRoutesOnNavigation)if(wt){if(Object.keys(wt[0].params).length>0)return{active:!0,matches:P1(Ct,Wt,p,!0)}}else return{active:!0,matches:P1(Ct,Wt,p,!0)||[]};return{active:!1,matches:null}}async function Fn(wt,Ct,Wt,ie){if(!e.patchRoutesOnNavigation)return{type:"success",matches:wt};let _e=wt;for(;;){let Ze=a==null,_t=a||u,lt=s;try{await e.patchRoutesOnNavigation({signal:Wt,path:Ct,matches:_e,fetcherKey:ie,patch:(Vr,Rr)=>{Wt.aborted||sz(Vr,Rr,_t,lt,i,!1)}})}catch(Vr){return{type:"error",error:Vr,partialMatches:_e}}finally{Ze&&!Wt.aborted&&(u=[...u])}if(Wt.aborted)return{type:"aborted"};let or=pd(_t,Ct,p);if(or)return{type:"success",matches:or};let Ar=P1(_t,Ct,p,!0);if(!Ar||_e.length===Ar.length&&_e.every((Vr,Rr)=>Vr.route.id===Ar[Rr].route.id))return{type:"success",matches:null};_e=Ar}}function Jr(wt){s={},a=J0(wt,i,void 0,s)}function jr(wt,Ct,Wt=!1){let ie=a==null;sz(wt,Ct,a||u,s,i,Wt),ie&&(u=[...u],rt({}))}return G={get basename(){return p},get future(){return g},get state(){return $},get routes(){return u},get window(){return t},initialize:ht,subscribe:xt,enableScrollRestoration:Zr,navigate:Lt,fetch:tr,revalidate:Ft,createHref:wt=>e.history.createHref(wt),encodeLocation:wt=>e.history.encodeLocation(wt),getFetcher:pe,deleteFetcher:Be,dispose:It,getBlocker:gt,deleteBlocker:$t,patchRoutes:jr,_internalFetchControllers:be,_internalSetRoutes:Jr,_internalSetStateDoNotUseOrYouWillBreakYourApp(wt){rt(wt)}},G}function oSe(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function N3(e,t,r,n,i,s){let u,a;if(i){u=[];for(let d of t)if(u.push(d),d.route.id===i){a=d;break}}else u=t,a=t[t.length-1];let p=hw(n||".",fw(u),mu(e.pathname,r)||e.pathname,s==="path");if(n==null&&(p.search=e.search,p.hash=e.hash),(n==null||n===""||n===".")&&a){let d=JO(p.search);if(a.route.index&&!d)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&d){let g=new URLSearchParams(p.search),_=g.getAll("index");g.delete("index"),_.filter(S=>S).forEach(S=>g.append("index",S));let C=g.toString();p.search=C?`?${C}`:""}}return r!=="/"&&(p.pathname=G5e({basename:r,pathname:p.pathname})),Md(p)}function az(e,t,r){if(!r||!oSe(r))return{path:t};if(r.formMethod&&!wSe(r.formMethod))return{path:t,error:cc(405,{method:r.formMethod})};let n=()=>({path:t,error:cc(400,{type:"invalid-body"})}),s=(r.formMethod||"get").toUpperCase(),u=XH(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!cu(s))return n();let _=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((C,[S,I])=>`${C}${S}=${I}
`,""):String(r.body);return{path:t,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:_}}}else if(r.formEncType==="application/json"){if(!cu(s))return n();try{let _=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:u,formEncType:r.formEncType,formData:void 0,json:_,text:void 0}}}catch{return n()}}}li(typeof FormData=="function","FormData is not available in this environment");let a,p;if(r.formData)a=z3(r.formData),p=r.formData;else if(r.body instanceof FormData)a=z3(r.body),p=r.body;else if(r.body instanceof URLSearchParams)a=r.body,p=hz(a);else if(r.body==null)a=new URLSearchParams,p=new FormData;else try{a=new URLSearchParams(r.body),p=hz(a)}catch{return n()}let d={formMethod:s,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(cu(d.formMethod))return{path:t,submission:d};let g=Kf(t);return e&&g.search&&JO(g.search)&&a.append("index",""),g.search=`?${a}`,{path:Md(g),submission:d}}function oz(e,t,r,n,i,s,u,a,p,d,g,_,C,S,I,O,P,k,F,B){let N=B?Bu(B[1])?B[1].error:B[1].data:void 0,G=i.createURL(s.location),$=i.createURL(p),X;if(g&&s.errors){let oe=Object.keys(s.errors)[0];X=u.findIndex(ue=>ue.route.id===oe)}else if(B&&Bu(B[1])){let oe=B[0];X=u.findIndex(ue=>ue.route.id===oe)-1}let ee=B?B[1].statusCode:void 0,J=ee&&ee>=400,le={currentUrl:G,currentParams:s.matches[0]?.params||{},nextUrl:$,nextParams:u[0].params,...a,actionResult:N,actionStatus:ee},Z=u.map((oe,ue)=>{let{route:ce}=oe,be=null;if(X!=null&&ue>X?be=!1:ce.lazy?be=!0:ce.loader==null?be=!1:g?be=B3(ce,s.loaderData,s.errors):sSe(s.loaderData,s.matches[ue],oe)&&(be=!0),be!==null)return j3(r,n,e,oe,d,t,be);let Te=J?!1:_||G.pathname+G.search===$.pathname+$.search||G.search!==$.search||lSe(s.matches[ue],oe),ve={...le,defaultShouldRevalidate:Te},Ce=xx(oe,ve);return j3(r,n,e,oe,d,t,Ce,ve)}),H=[];return I.forEach((oe,ue)=>{if(g||!u.some(ge=>ge.route.id===oe.routeId)||S.has(ue))return;let ce=s.fetchers.get(ue),be=ce&&ce.state!=="idle"&&ce.data===void 0,Te=pd(P,oe.path,k);if(!Te){if(F&&be)return;H.push({key:ue,routeId:oe.routeId,path:oe.path,matches:null,match:null,request:null,controller:null});return}if(O.has(ue))return;let ve=I1(Te,oe.path),Ce=new AbortController,$e=Cg(i,oe.path,Ce.signal),Je=null;if(C.has(ue))C.delete(ue),Je=zg(r,n,$e,Te,ve,d,t);else if(be)_&&(Je=zg(r,n,$e,Te,ve,d,t));else{let ge={...le,defaultShouldRevalidate:J?!1:_};xx(ve,ge)&&(Je=zg(r,n,$e,Te,ve,d,t,ge))}Je&&H.push({key:ue,routeId:oe.routeId,path:oe.path,matches:Je,match:ve,request:$e,controller:Ce})}),{dsMatches:Z,revalidatingFetchers:H}}function B3(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&e.id in t,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function sSe(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function lSe(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function xx(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function sz(e,t,r,n,i,s){let u;if(e){let d=n[e];li(d,`No route found to patch children into: routeId = ${e}`),d.children||(d.children=[]),u=d.children}else u=r;let a=[],p=[];if(t.forEach(d=>{let g=u.find(_=>VH(d,_));g?p.push({existingRoute:g,newRoute:d}):a.push(d)}),a.length>0){let d=J0(a,i,[e||"_","patch",String(u?.length||"0")],n);u.push(...d)}if(s&&p.length>0)for(let d=0;d<p.length;d++){let{existingRoute:g,newRoute:_}=p[d],C=g,[S]=J0([_],i,[],{},!0);Object.assign(C,{element:S.element?S.element:C.element,errorElement:S.errorElement?S.errorElement:C.errorElement,hydrateFallbackElement:S.hydrateFallbackElement?S.hydrateFallbackElement:C.hydrateFallbackElement})}}function VH(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>t.children?.some(i=>VH(r,i))):!1}var lz=new WeakMap,GH=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let i=r[t.id];if(li(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let s=i.lazy[e];if(!s)return;let u=lz.get(i);u||(u={},lz.set(i,u));let a=u[e];if(a)return a;let p=(async()=>{let d=I5e(e),_=i[e]!==void 0&&e!=="hasErrorBoundary";if(d)Io(!d,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),u[e]=Promise.resolve();else if(_)Io(!1,`Route "${i.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let C=await s();C!=null&&(Object.assign(i,{[e]:C}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[e]=void 0,Object.values(i.lazy).every(C=>C===void 0)&&(i.lazy=void 0))})();return u[e]=p,p},uz=new WeakMap;function uSe(e,t,r,n,i){let s=r[e.id];if(li(s,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let g=uz.get(s);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let _=(async()=>{li(typeof e.lazy=="function","No lazy route function found");let C=await e.lazy(),S={};for(let I in C){let O=C[I];if(O===void 0)continue;let P=O5e(I),F=s[I]!==void 0&&I!=="hasErrorBoundary";P?Io(!P,"Route property "+I+" is not a supported property to be returned from a lazy route function. This property will be ignored."):F?Io(!F,`Route "${s.id}" has a static property "${I}" defined but its lazy function is also returning a value for this property. The lazy route property "${I}" will be ignored.`):S[I]=O}Object.assign(s,S),Object.assign(s,{...n(s),lazy:void 0})})();return uz.set(s,_),_.catch(()=>{}),{lazyRoutePromise:_,lazyHandlerPromise:_}}let u=Object.keys(e.lazy),a=[],p;for(let g of u){if(i&&i.includes(g))continue;let _=GH({key:g,route:e,manifest:r,mapRouteProperties:n});_&&(a.push(_),g===t&&(p=_))}let d=a.length>0?Promise.all(a).then(()=>{}):void 0;return d?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:p}}async function cz(e){let t=e.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(t.map(i=>i.resolve()))).forEach((i,s)=>{r[t[s].route.id]=i}),r}async function cSe(e){return e.matches.some(t=>t.route.unstable_middleware)?HH(e,()=>cz(e)):cz(e)}function HH(e,t){return fSe(e,t,n=>n,bSe,r);function r(n,i,s){if(s)return Promise.resolve(Object.assign(s.value,{[i]:{type:"error",result:n}}));{let{matches:u}=e,a=Math.min(u.findIndex(d=>d.route.id===i)||0,u.findIndex(d=>d.unstable_shouldCallHandler())||0),p=md(u,u[a].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:n}})}}}async function fSe(e,t,r,n,i){let{matches:s,request:u,params:a,context:p}=e,d=s.flatMap(_=>_.route.unstable_middleware?_.route.unstable_middleware.map(C=>[_.route.id,C]):[]);return await WH({request:u,params:a,context:p},d,t,r,n,i)}async function WH(e,t,r,n,i,s,u=0){let{request:a}=e;if(a.signal.aborted)throw a.signal.reason??new Error(`Request aborted: ${a.method} ${a.url}`);let p=t[u];if(!p)return await r();let[d,g]=p,_,C=async()=>{if(_)throw new Error("You may only call `next()` once per middleware");try{return _={value:await WH(e,t,r,n,i,s,u+1)},_.value}catch(S){return _={value:await s(S,d,_)},_.value}};try{let S=await g(e,C),I=S!=null?n(S):void 0;return i(I)?I:_?I??_.value:(_={value:await C()},_.value)}catch(S){return await s(S,d,_)}}function ZH(e,t,r,n,i){let s=GH({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:e}),u=uSe(n.route,cu(r.method)?"action":"loader",t,e,i);return{middleware:s,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function j3(e,t,r,n,i,s,u,a=null){let p=!1,d=ZH(e,t,r,n,i);return{...n,_lazyPromises:d,shouldLoad:u,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(g){return p=!0,a?typeof g=="boolean"?xx(n,{...a,defaultShouldRevalidate:g}):xx(n,a):u},resolve(g){return p||u||g&&!cu(r.method)&&(n.route.lazy||n.route.loader)?dSe({request:r,match:n,lazyHandlerPromise:d?.handler,lazyRoutePromise:d?.route,handlerOverride:g,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function zg(e,t,r,n,i,s,u,a=null){return n.map(p=>p.route.id!==i.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:ZH(e,t,r,p,s),resolve:()=>Promise.resolve({type:"data",result:void 0})}:j3(e,t,r,p,s,u,!0,a))}async function hSe(e,t,r,n,i,s){r.some(d=>d._lazyPromises?.middleware)&&await Promise.all(r.map(d=>d._lazyPromises?.middleware));let u={request:t,params:r[0].params,context:i,matches:r},p=await e({...u,fetcherKey:n,unstable_runClientMiddleware:d=>{let g=u;return HH(g,()=>d({...g,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(d=>[d._lazyPromises?.handler,d._lazyPromises?.route]))}catch{}return p}async function dSe({request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:s}){let u,a,p=cu(e.method),d=p?"action":"loader",g=_=>{let C,S=new Promise((P,k)=>C=k);a=()=>C(),e.signal.addEventListener("abort",a);let I=P=>typeof _!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${d}" [routeId: ${t.route.id}]`)):_({request:e,params:t.params,context:s},...P!==void 0?[P]:[]),O=(async()=>{try{return{type:"data",result:await(i?i(k=>I(k)):I())}}catch(P){return{type:"error",result:P}}})();return Promise.race([O,S])};try{let _=p?t.route.action:t.route.loader;if(r||n)if(_){let C,[S]=await Promise.all([g(_).catch(I=>{C=I}),r,n]);if(C!==void 0)throw C;u=S}else{await r;let C=p?t.route.action:t.route.loader;if(C)[u]=await Promise.all([g(C),n]);else if(d==="action"){let S=new URL(e.url),I=S.pathname+S.search;throw cc(405,{method:e.method,pathname:I,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(_)u=await g(_);else{let C=new URL(e.url),S=C.pathname+C.search;throw cc(404,{pathname:S})}}catch(_){return{type:"error",result:_}}finally{a&&e.signal.removeEventListener("abort",a)}return u}async function pSe(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function mSe(e){let{result:t,type:r}=e;if(KH(t)){let n;try{n=await pSe(t)}catch(i){return{type:"error",error:i}}return r==="error"?{type:"error",error:new _x(t.status,t.statusText,n),statusCode:t.status,headers:t.headers}:{type:"data",data:n,statusCode:t.status,headers:t.headers}}return r==="error"?gz(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new _x(t.init?.status||500,void 0,t.data),statusCode:eb(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:eb(t)?t.status:void 0}:gz(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function gSe(e,t,r,n,i){let s=e.headers.get("Location");if(li(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!YO(s)){let u=n.slice(0,n.findIndex(a=>a.route.id===r)+1);s=N3(new URL(t.url),u,i,s),e.headers.set("Location",s)}return e}function fz(e,t,r){if(YO(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),s=mu(i.pathname,r)!=null;if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function Cg(e,t,r,n){let i=e.createURL(XH(t)).toString(),s={signal:r};if(n&&cu(n.formMethod)){let{formMethod:u,formEncType:a}=n;s.method=u.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=z3(n.formData):s.body=n.formData}return new Request(i,s)}function z3(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function hz(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function ySe(e,t,r,n=!1,i=!1){let s={},u=null,a,p=!1,d={},g=r&&Bu(r[1])?r[1].error:void 0;return e.forEach(_=>{if(!(_.route.id in t))return;let C=_.route.id,S=t[C];if(li(!Dp(S),"Cannot handle redirect results in processLoaderData"),Bu(S)){let I=S.error;if(g!==void 0&&(I=g,g=void 0),u=u||{},i)u[C]=I;else{let O=md(e,C);u[O.route.id]==null&&(u[O.route.id]=I)}n||(s[C]=UH),p||(p=!0,a=eb(S.error)?S.error.status:500),S.headers&&(d[C]=S.headers)}else s[C]=S.data,S.statusCode&&S.statusCode!==200&&!p&&(a=S.statusCode),S.headers&&(d[C]=S.headers)}),g!==void 0&&r&&(u={[r[0]]:g},r[2]&&(s[r[2]]=void 0)),{loaderData:s,errors:u,statusCode:a||200,loaderHeaders:d}}function dz(e,t,r,n,i,s){let{loaderData:u,errors:a}=ySe(t,r,n);return i.filter(p=>!p.matches||p.matches.some(d=>d.shouldLoad)).forEach(p=>{let{key:d,match:g,controller:_}=p;if(_&&_.signal.aborted)return;let C=s[d];if(li(C,"Did not find corresponding fetcher result"),Bu(C)){let S=md(e.matches,g?.route.id);a&&a[S.route.id]||(a={...a,[S.route.id]:C.error}),e.fetchers.delete(d)}else if(Dp(C))li(!1,"Unhandled fetcher revalidation redirect");else{let S=ud(C.data);e.fetchers.set(d,S)}}),{loaderData:u,errors:a}}function pz(e,t,r,n){let i=Object.entries(t).filter(([,s])=>s!==UH).reduce((s,[u,a])=>(s[u]=a,s),{});for(let s of r){let u=s.route.id;if(!t.hasOwnProperty(u)&&e.hasOwnProperty(u)&&s.route.loader&&(i[u]=e[u]),n&&n.hasOwnProperty(u))break}return i}function mz(e){return e?Bu(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function md(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Z_(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function cc(e,{pathname:t,routeId:r,method:n,type:i,message:s}={}){let u="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(u="Bad Request",n&&t&&r?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):e===403?(u="Forbidden",a=`Route "${r}" does not match URL "${t}"`):e===404?(u="Not Found",a=`No route matches URL "${t}"`):e===405&&(u="Method Not Allowed",n&&t&&r?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new _x(e||500,u,new Error(a),!0)}function X_(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(Dp(i))return{key:n,result:i}}}function XH(e){let t=typeof e=="string"?Kf(e):e;return Md({...t,hash:""})}function vSe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function bSe(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&_Se(r))}function _Se(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function xSe(e){return KH(e.result)&&eSe.has(e.result.status)}function Bu(e){return e.type==="error"}function Dp(e){return(e&&e.type)==="redirect"}function gz(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function KH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function wSe(e){return Q5e.has(e.toUpperCase())}function cu(e){return Y5e.has(e.toUpperCase())}function JO(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function I1(e,t){let r=typeof t=="string"?Kf(t).search:t.search;if(e[e.length-1].route.index&&JO(r||""))return e[e.length-1];let n=zH(e);return n[n.length-1]}function yz(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:u}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function CA(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SSe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Mv(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ESe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ud(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function CSe(e,t){try{let r=e.sessionStorage.getItem(qH);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function ASe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(qH,JSON.stringify(r))}catch(n){Io(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function TSe(){let e,t,r=new Promise((n,i)=>{e=async s=>{n(s);try{await r}catch{}},t=async s=>{i(s);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var Fd=R.createContext(null);Fd.displayName="DataRouter";var _y=R.createContext(null);_y.displayName="DataRouterState";R.createContext(!1);var QO=R.createContext({isTransitioning:!1});QO.displayName="ViewTransition";var YH=R.createContext(new Map);YH.displayName="Fetchers";var PSe=R.createContext(null);PSe.displayName="Await";var sf=R.createContext(null);sf.displayName="Navigation";var Ab=R.createContext(null);Ab.displayName="Location";var lf=R.createContext({outlet:null,matches:[],isDataRoute:!1});lf.displayName="Route";var eR=R.createContext(null);eR.displayName="RouteError";function ISe(e,{relative:t}={}){li(Nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=R.useContext(sf),{hash:i,pathname:s,search:u}=Tb(e,{relative:t}),a=s;return r!=="/"&&(a=s==="/"?r:$f([r,s])),n.createHref({pathname:a,search:u,hash:i})}function Nd(){return R.useContext(Ab)!=null}function Cl(){return li(Nd(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ab).location}function MSe(e){li(Nd(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:t}=Cl();return R.useMemo(()=>Q0(e,jH(t)),[t,e])}var JH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QH(e){R.useContext(sf).static||R.useLayoutEffect(e)}function Bd(){let{isDataRoute:e}=R.useContext(lf);return e?USe():OSe()}function OSe(){li(Nd(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(Fd),{basename:t,navigator:r}=R.useContext(sf),{matches:n}=R.useContext(lf),{pathname:i}=Cl(),s=JSON.stringify(fw(n)),u=R.useRef(!1);return QH(()=>{u.current=!0}),R.useCallback((p,d={})=>{if(Io(u.current,JH),!u.current)return;if(typeof p=="number"){r.go(p);return}let g=hw(p,JSON.parse(s),i,d.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:$f([t,g.pathname])),(d.replace?r.replace:r.push)(g,d.state,d)},[t,r,s,i,e])}R.createContext(null);function eW(){let{matches:e}=R.useContext(lf),t=e[e.length-1];return t?t.params:{}}function Tb(e,{relative:t}={}){let{matches:r}=R.useContext(lf),{pathname:n}=Cl(),i=JSON.stringify(fw(r));return R.useMemo(()=>hw(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function RSe(e,t){return tW(e,t)}function tW(e,t,r,n,i){li(Nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(sf),{matches:u}=R.useContext(lf),a=u[u.length-1],p=a?a.params:{},d=a?a.pathname:"/",g=a?a.pathnameBase:"/",_=a&&a.route;{let F=_&&_.path||"";iW(d,!_||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let C=Cl(),S;if(t){let F=typeof t=="string"?Kf(t):t;li(g==="/"||F.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),S=F}else S=C;let I=S.pathname||"/",O=I;if(g!=="/"){let F=g.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let P=pd(e,{pathname:O});Io(_||P!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Io(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=NSe(P&&P.map(F=>Object.assign({},F,{params:Object.assign({},p,F.params),pathname:$f([g,s.encodeLocation?s.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:$f([g,s.encodeLocation?s.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),u,r,n,i);return t&&k?R.createElement(Ab.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},k):k}function LSe(){let e=zSe(),t=eb(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:s},"ErrorBoundary")," or"," ",R.createElement("code",{style:s},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:i},r):null,u)}var DSe=R.createElement(LSe,null),kSe=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?R.createElement(lf.Provider,{value:this.props.routeContext},R.createElement(eR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FSe({routeContext:e,match:t,children:r}){let n=R.useContext(Fd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(lf.Provider,{value:e},r)}function NSe(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,u=r?.errors;if(u!=null){let d=s.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);li(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,p=-1;if(r)for(let d=0;d<s.length;d++){let g=s[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(p=d),g.route.id){let{loaderData:_,errors:C}=r,S=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!C||C[g.route.id]===void 0);if(g.route.lazy||S){a=!0,p>=0?s=s.slice(0,p+1):s=[s[0]];break}}}return s.reduceRight((d,g,_)=>{let C,S=!1,I=null,O=null;r&&(C=u&&g.route.id?u[g.route.id]:void 0,I=g.route.errorElement||DSe,a&&(p<0&&_===0?(iW("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,O=null):p===_&&(S=!0,O=g.route.hydrateFallbackElement||null)));let P=t.concat(s.slice(0,_+1)),k=()=>{let F;return C?F=I:S?F=O:g.route.Component?F=R.createElement(g.route.Component,null):g.route.element?F=g.route.element:F=d,R.createElement(FSe,{match:g,routeContext:{outlet:d,matches:P,isDataRoute:r!=null},children:F})};return r&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?R.createElement(kSe,{location:r.location,revalidation:r.revalidation,component:I,error:C,children:k(),routeContext:{outlet:null,matches:P,isDataRoute:!0},unstable_onError:n}):k()},null)}function tR(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rW(e){let t=R.useContext(Fd);return li(t,tR(e)),t}function nW(e){let t=R.useContext(_y);return li(t,tR(e)),t}function BSe(e){let t=R.useContext(lf);return li(t,tR(e)),t}function rR(e){let t=BSe(e),r=t.matches[t.matches.length-1];return li(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function jSe(){return rR("useRouteId")}function zSe(){let e=R.useContext(eR),t=nW("useRouteError"),r=rR("useRouteError");return e!==void 0?e:t.errors?.[r]}var $Se=0;function qSe(e){let{router:t,basename:r}=rW("useBlocker"),n=nW("useBlocker"),[i,s]=R.useState(""),u=R.useCallback(a=>{if(typeof e!="function")return!!e;if(r==="/")return e(a);let{currentLocation:p,nextLocation:d,historyAction:g}=a;return e({currentLocation:{...p,pathname:mu(p.pathname,r)||p.pathname},nextLocation:{...d,pathname:mu(d.pathname,r)||d.pathname},historyAction:g})},[r,e]);return R.useEffect(()=>{let a=String(++$Se);return s(a),()=>t.deleteBlocker(a)},[t]),R.useEffect(()=>{i!==""&&t.getBlocker(i,u)},[t,i,u]),i&&n.blockers.has(i)?n.blockers.get(i):Eg}function USe(){let{router:e}=rW("useNavigate"),t=rR("useNavigate"),r=R.useRef(!1);return QH(()=>{r.current=!0}),R.useCallback(async(i,s={})=>{Io(r.current,JH),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var vz={};function iW(e,t,r){!t&&!vz[e]&&(vz[e]=!0,Io(!1,r))}var bz={};function _z(e,t){!e&&!bz[t]&&(bz[t]=!0,console.warn(t))}function VSe(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Io(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:R.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Io(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Io(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var GSe=["HydrateFallback","hydrateFallbackElement"],HSe=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function WSe({router:e,flushSync:t,unstable_onError:r}){let[n,i]=R.useState(e.state),[s,u]=R.useState(),[a,p]=R.useState({isTransitioning:!1}),[d,g]=R.useState(),[_,C]=R.useState(),[S,I]=R.useState(),O=R.useRef(new Map),P=R.useCallback(G=>{i($=>(G.errors&&r&&Object.entries(G.errors).forEach(([X,ee])=>{$.errors?.[X]!==ee&&r(ee)}),G))},[r]),k=R.useCallback((G,{deletedFetchers:$,flushSync:X,viewTransitionOpts:ee})=>{G.fetchers.forEach((le,Z)=>{le.data!==void 0&&O.current.set(Z,le.data)}),$.forEach(le=>O.current.delete(le)),_z(X===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let J=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(_z(ee==null||J,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ee||!J){t&&X?t(()=>P(G)):R.startTransition(()=>P(G));return}if(t&&X){t(()=>{_&&(d&&d.resolve(),_.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})});let le=e.window.document.startViewTransition(()=>{t(()=>P(G))});le.finished.finally(()=>{t(()=>{g(void 0),C(void 0),u(void 0),p({isTransitioning:!1})})}),t(()=>C(le));return}_?(d&&d.resolve(),_.skipTransition(),I({state:G,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation})):(u(G),p({isTransitioning:!0,flushSync:!1,currentLocation:ee.currentLocation,nextLocation:ee.nextLocation}))},[e.window,t,_,d,P]);R.useLayoutEffect(()=>e.subscribe(k),[e,k]),R.useEffect(()=>{a.isTransitioning&&!a.flushSync&&g(new HSe)},[a]),R.useEffect(()=>{if(d&&s&&e.window){let G=s,$=d.promise,X=e.window.document.startViewTransition(async()=>{R.startTransition(()=>P(G)),await $});X.finished.finally(()=>{g(void 0),C(void 0),u(void 0),p({isTransitioning:!1})}),C(X)}},[s,d,e.window,P]),R.useEffect(()=>{d&&s&&n.location.key===s.location.key&&d.resolve()},[d,_,n.location,s]),R.useEffect(()=>{!a.isTransitioning&&S&&(u(S.state),p({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),I(void 0))},[a.isTransitioning,S]);let F=R.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:G=>e.navigate(G),push:(G,$,X)=>e.navigate(G,{state:$,preventScrollReset:X?.preventScrollReset}),replace:(G,$,X)=>e.navigate(G,{replace:!0,state:$,preventScrollReset:X?.preventScrollReset})}),[e]),B=e.basename||"/",N=R.useMemo(()=>({router:e,navigator:F,static:!1,basename:B,unstable_onError:r}),[e,F,B,r]);return R.createElement(R.Fragment,null,R.createElement(Fd.Provider,{value:N},R.createElement(_y.Provider,{value:n},R.createElement(YH.Provider,{value:O.current},R.createElement(QO.Provider,{value:a},R.createElement(YSe,{basename:B,location:n.location,navigationType:n.historyAction,navigator:F},R.createElement(ZSe,{routes:e.routes,future:e.future,state:n,unstable_onError:r})))))),null)}var ZSe=R.memo(XSe);function XSe({routes:e,future:t,state:r,unstable_onError:n}){return tW(e,void 0,r,n,t)}function KSe({to:e,replace:t,state:r,relative:n}){li(Nd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(sf);Io(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=R.useContext(lf),{pathname:u}=Cl(),a=Bd(),p=hw(e,fw(s),u,n==="path"),d=JSON.stringify(p);return R.useEffect(()=>{a(JSON.parse(d),{replace:t,state:r,relative:n})},[a,d,n,t,r]),null}function Nu(e){li(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YSe({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1}){li(!Nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:u,navigator:i,static:s,future:{}}),[u,i,s]);typeof r=="string"&&(r=Kf(r));let{pathname:p="/",search:d="",hash:g="",state:_=null,key:C="default"}=r,S=R.useMemo(()=>{let I=mu(p,u);return I==null?null:{location:{pathname:I,search:d,hash:g,state:_,key:C},navigationType:n}},[u,p,d,g,_,C,n]);return Io(S!=null,`<Router basename="${u}"> is not able to match the URL "${p}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:R.createElement(sf.Provider,{value:a},R.createElement(Ab.Provider,{children:t,value:S}))}function Qv({children:e,location:t}){return RSe($3(e),t)}function $3(e,t=[]){let r=[];return R.Children.forEach(e,(n,i)=>{if(!R.isValidElement(n))return;let s=[...t,i];if(n.type===R.Fragment){r.push.apply(r,$3(n.props.children,s));return}li(n.type===Nu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),li(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=$3(n.props.children,s)),r.push(u)}),r}var M1="get",O1="application/x-www-form-urlencoded";function dw(e){return e!=null&&typeof e.tagName=="string"}function JSe(e){return dw(e)&&e.tagName.toLowerCase()==="button"}function QSe(e){return dw(e)&&e.tagName.toLowerCase()==="form"}function eEe(e){return dw(e)&&e.tagName.toLowerCase()==="input"}function tEe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rEe(e,t){return e.button===0&&(!t||t==="_self")&&!tEe(e)}var K_=null;function nEe(){if(K_===null)try{new FormData(document.createElement("form"),0),K_=!1}catch{K_=!0}return K_}var iEe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function AA(e){return e!=null&&!iEe.has(e)?(Io(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${O1}"`),null):e}function aEe(e,t){let r,n,i,s,u;if(QSe(e)){let a=e.getAttribute("action");n=a?mu(a,t):null,r=e.getAttribute("method")||M1,i=AA(e.getAttribute("enctype"))||O1,s=new FormData(e)}else if(JSe(e)||eEe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||a.getAttribute("action");if(n=p?mu(p,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||M1,i=AA(e.getAttribute("formenctype"))||AA(a.getAttribute("enctype"))||O1,s=new FormData(a,e),!nEe()){let{name:d,type:g,value:_}=e;if(g==="image"){let C=d?`${d}.`:"";s.append(`${C}x`,"0"),s.append(`${C}y`,"0")}else d&&s.append(d,_)}}else{if(dw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=M1,n=null,i=O1,u=e}return s&&i==="text/plain"&&(u=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nR(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oEe(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&mu(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function sEe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lEe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function uEe(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let u=await sEe(s,r);return u.links?u.links():[]}return[]}));return dEe(n.flat(1).filter(lEe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function xz(e,t,r,n,i,s){let u=(p,d)=>r[d]?p.route.id!==r[d].route.id:!0,a=(p,d)=>r[d].pathname!==p.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==p.params["*"];return s==="assets"?t.filter((p,d)=>u(p,d)||a(p,d)):s==="data"?t.filter((p,d)=>{let g=n.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(u(p,d)||a(p,d))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function cEe(e,t,{includeHydrateFallback:r}={}){return fEe(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function fEe(e){return[...new Set(e)]}function hEe(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function dEe(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(hEe(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function aW(){let e=R.useContext(Fd);return nR(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pEe(){let e=R.useContext(_y);return nR(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var iR=R.createContext(void 0);iR.displayName="FrameworkContext";function oW(){let e=R.useContext(iR);return nR(e,"You must render this element inside a <HydratedRouter> element"),e}function mEe(e,t){let r=R.useContext(iR),[n,i]=R.useState(!1),[s,u]=R.useState(!1),{onFocus:a,onBlur:p,onMouseEnter:d,onMouseLeave:g,onTouchStart:_}=t,C=R.useRef(null);R.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let O=k=>{k.forEach(F=>{u(F.isIntersecting)})},P=new IntersectionObserver(O,{threshold:.5});return C.current&&P.observe(C.current),()=>{P.disconnect()}}},[e]),R.useEffect(()=>{if(n){let O=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(O)}}},[n]);let S=()=>{i(!0)},I=()=>{i(!1),u(!1)};return r?e!=="intent"?[s,C,{}]:[s,C,{onFocus:Ov(a,S),onBlur:Ov(p,I),onMouseEnter:Ov(d,S),onMouseLeave:Ov(g,I),onTouchStart:Ov(_,S)}]:[!1,C,{}]}function Ov(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function gEe({page:e,...t}){let{router:r}=aW(),n=R.useMemo(()=>pd(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?R.createElement(vEe,{page:e,matches:n,...t}):null}function yEe(e){let{manifest:t,routeModules:r}=oW(),[n,i]=R.useState([]);return R.useEffect(()=>{let s=!1;return uEe(e,t,r).then(u=>{s||i(u)}),()=>{s=!0}},[e,t,r]),n}function vEe({page:e,matches:t,...r}){let n=Cl(),{manifest:i,routeModules:s}=oW(),{basename:u}=aW(),{loaderData:a,matches:p}=pEe(),d=R.useMemo(()=>xz(e,t,p,i,n,"data"),[e,t,p,i,n]),g=R.useMemo(()=>xz(e,t,p,i,n,"assets"),[e,t,p,i,n]),_=R.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let I=new Set,O=!1;if(t.forEach(k=>{let F=i.routes[k.route.id];!F||!F.hasLoader||(!d.some(B=>B.route.id===k.route.id)&&k.route.id in a&&s[k.route.id]?.shouldRevalidate||F.hasClientLoader?O=!0:I.add(k.route.id))}),I.size===0)return[];let P=oEe(e,u,"data");return O&&I.size>0&&P.searchParams.set("_routes",t.filter(k=>I.has(k.route.id)).map(k=>k.route.id).join(",")),[P.pathname+P.search]},[u,a,n,i,d,t,e,s]),C=R.useMemo(()=>cEe(g,i),[g,i]),S=yEe(g);return R.createElement(R.Fragment,null,_.map(I=>R.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...r})),C.map(I=>R.createElement("link",{key:I,rel:"modulepreload",href:I,...r})),S.map(({key:I,link:O})=>R.createElement("link",{key:I,nonce:r.nonce,...O})))}function bEe(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var sW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sW&&(window.__reactRouterVersion="7.8.2")}catch{}function _Ee(e,t){return aSe({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:C5e({window:t?.window}),hydrationData:t?.hydrationData||xEe(),routes:e,mapRouteProperties:VSe,hydrationRouteProperties:GSe,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function xEe(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:wEe(e.errors)}),e}function wEe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new _x(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let u=new s(i.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}var lW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xy=R.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:u,state:a,target:p,to:d,preventScrollReset:g,viewTransition:_,...C},S){let{basename:I}=R.useContext(sf),O=typeof d=="string"&&lW.test(d),P,k=!1;if(typeof d=="string"&&O&&(P=d,sW))try{let J=new URL(window.location.href),le=d.startsWith("//")?new URL(J.protocol+d):new URL(d),Z=mu(le.pathname,I);le.origin===J.origin&&Z!=null?d=Z+le.search+le.hash:k=!0}catch{Io(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=ISe(d,{relative:i}),[B,N,G]=mEe(n,C),$=AEe(d,{replace:u,state:a,target:p,preventScrollReset:g,relative:i,viewTransition:_});function X(J){t&&t(J),J.defaultPrevented||$(J)}let ee=R.createElement("a",{...C,...G,href:P||F,onClick:k||s?t:X,ref:bEe(S,N),target:p,"data-discover":!O&&r==="render"?"true":void 0});return B&&!O?R.createElement(R.Fragment,null,ee,R.createElement(gEe,{page:F})):ee});xy.displayName="Link";var SEe=R.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:u,viewTransition:a,children:p,...d},g){let _=Tb(u,{relative:d.relative}),C=Cl(),S=R.useContext(_y),{navigator:I,basename:O}=R.useContext(sf),P=S!=null&&OEe(_)&&a===!0,k=I.encodeLocation?I.encodeLocation(_).pathname:_.pathname,F=C.pathname,B=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(F=F.toLowerCase(),B=B?B.toLowerCase():null,k=k.toLowerCase()),B&&O&&(B=mu(B,O)||B);const N=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let G=F===k||!i&&F.startsWith(k)&&F.charAt(N)==="/",$=B!=null&&(B===k||!i&&B.startsWith(k)&&B.charAt(k.length)==="/"),X={isActive:G,isPending:$,isTransitioning:P},ee=G?t:void 0,J;typeof n=="function"?J=n(X):J=[n,G?"active":null,$?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let le=typeof s=="function"?s(X):s;return R.createElement(xy,{...d,"aria-current":ee,className:J,ref:g,style:le,to:u,viewTransition:a},typeof p=="function"?p(X):p)});SEe.displayName="NavLink";var EEe=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:u=M1,action:a,onSubmit:p,relative:d,preventScrollReset:g,viewTransition:_,...C},S)=>{let I=IEe(),O=MEe(a,{relative:d}),P=u.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&lW.test(a),F=B=>{if(p&&p(B),B.defaultPrevented)return;B.preventDefault();let N=B.nativeEvent.submitter,G=N?.getAttribute("formmethod")||u;I(N||B.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:i,state:s,relative:d,preventScrollReset:g,viewTransition:_})};return R.createElement("form",{ref:S,method:P,action:O,onSubmit:n?p:F,...C,"data-discover":!k&&e==="render"?"true":void 0})});EEe.displayName="Form";function CEe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uW(e){let t=R.useContext(Fd);return li(t,CEe(e)),t}function AEe(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:u}={}){let a=Bd(),p=Cl(),d=Tb(e,{relative:s});return R.useCallback(g=>{if(rEe(g,t)){g.preventDefault();let _=r!==void 0?r:Md(p)===Md(d);a(e,{replace:_,state:n,preventScrollReset:i,relative:s,viewTransition:u})}},[p,a,d,r,n,t,e,i,s,u])}var TEe=0,PEe=()=>`__${String(++TEe)}__`;function IEe(){let{router:e}=uW("useSubmit"),{basename:t}=R.useContext(sf),r=jSe();return R.useCallback(async(n,i={})=>{let{action:s,method:u,encType:a,formData:p,body:d}=aEe(n,t);if(i.navigate===!1){let g=i.fetcherKey||PEe();await e.fetch(g,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function MEe(e,{relative:t}={}){let{basename:r}=R.useContext(sf),n=R.useContext(lf);li(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Tb(e||".",{relative:t})},u=Cl();if(e==null){s.search=u.search;let a=new URLSearchParams(s.search),p=a.getAll("index");if(p.some(g=>g==="")){a.delete("index"),p.filter(_=>_).forEach(_=>a.append("index",_));let g=a.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:$f([r,s.pathname])),Md(s)}function OEe(e,{relative:t}={}){let r=R.useContext(QO);li(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=uW("useViewTransitionState"),i=Tb(e,{relative:t});if(!r.isTransitioning)return!1;let s=mu(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=mu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Q0(i.pathname,u)!=null||Q0(i.pathname,s)!=null}function REe(e){return R.createElement(WSe,{flushSync:A2.flushSync,...e})}var LEe="RaStore",DEe=function(){if(typeof window>"u"||window.localStorage==null)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch{return!1}},q3=DEe(),kEe=function(e,t){e===void 0&&(e="1"),t===void 0&&(t="");var r="".concat(LEe).concat(t),n=r.length,i={},s=function(a,p){Object.keys(i).forEach(function(d){i[d]&&i[d].key===a&&i[d].callback(p)})},u=function(a){var p;if(((p=a.key)===null||p===void 0?void 0:p.substring(0,n))===r){var d=a.key.substring(n+1),g=a.newValue?wz(a.newValue):void 0;Object.keys(i).forEach(function(_){i[_]&&i[_].key===d&&(g===null?i[_].callback(void 0):i[_].callback(g??void 0))})}};return{setup:function(){if(q3){var a=xh().getItem("".concat(r,".version"));if(a&&a!==e){var p=xh();Object.keys(p).forEach(function(d){d.startsWith(r)&&p.removeItem(d)})}xh().setItem("".concat(r,".version"),e),window.addEventListener("storage",u)}},teardown:function(){q3&&window.removeEventListener("storage",u)},getItem:function(a,p){var d=xh().getItem("".concat(r,".").concat(a));return d==null?p:wz(d)},setItem:function(a,p){p===void 0?xh().removeItem("".concat(r,".").concat(a)):xh().setItem("".concat(r,".").concat(a),JSON.stringify(p)),s(a,p)},removeItem:function(a){xh().removeItem("".concat(r,".").concat(a)),s(a,void 0)},removeItems:function(a){var p=xh();Object.keys(p).forEach(function(d){if(d.startsWith("".concat(r,".").concat(a))){p.removeItem(d);var g=d.substring(n+1);s(g,void 0)}})},reset:function(){var a=xh();Object.keys(a).forEach(function(p){if(p.startsWith(r)){a.removeItem(p);var d=p.substring(n+1);s(d,void 0)}})},subscribe:function(a,p){var d=Math.random().toString();return i[d]={key:a,callback:p},function(){delete i[d]}}}},wz=function(e){try{return JSON.parse(e)}catch{return e}},FEe=(function(){function e(){this.valuesMap=new Map}return e.prototype.getItem=function(t){return this.valuesMap.has(t)?String(this.valuesMap.get(t)):null},e.prototype.setItem=function(t,r){this.valuesMap.set(t,r)},e.prototype.removeItem=function(t){this.valuesMap.delete(t)},e.prototype.removeItems=function(t){var r=this;this.valuesMap.forEach(function(n,i){i.startsWith(t)&&r.valuesMap.delete(i)})},e.prototype.clear=function(){this.valuesMap.clear()},e.prototype.key=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");var r=Array.from(this.valuesMap.keys());return r[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.valuesMap.size},enumerable:!1,configurable:!0}),e})(),NEe=new FEe,xh=function(){return q3?window.localStorage:NEe},TA,Sz;function cW(){if(Sz)return TA;Sz=1;var e=iO(),t=vb(),r=cy(),n=Wf(),i=dy();function s(u,a,p,d){if(!n(u))return u;a=t(a,u);for(var g=-1,_=a.length,C=_-1,S=u;S!=null&&++g<_;){var I=i(a[g]),O=p;if(I==="__proto__"||I==="constructor"||I==="prototype")return u;if(g!=C){var P=S[I];O=d?d(P,I,S):void 0,O===void 0&&(O=n(P)?P:r(a[g+1])?[]:{})}e(S,I,O),S=S[I]}return u}return TA=s,TA}var PA,Ez;function BEe(){if(Ez)return PA;Ez=1;var e=cW();function t(r,n,i){return r==null?r:e(r,n,i)}return PA=t,PA}var jEe=BEe();const zEe=rl(jEe);var IA,Cz;function $Ee(){if(Cz)return IA;Cz=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return IA=e,IA}var MA,Az;function qEe(){if(Az)return MA;Az=1;function e(t,r,n){var i=-1,s=t.length;r<0&&(r=-r>s?0:s+r),n=n>s?s:n,n<0&&(n+=s),s=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(s);++i<s;)u[i]=t[i+r];return u}return MA=e,MA}var OA,Tz;function UEe(){if(Tz)return OA;Tz=1;var e=W2(),t=qEe();function r(n,i){return i.length<2?n:e(n,t(i,0,-1))}return OA=r,OA}var RA,Pz;function fW(){if(Pz)return RA;Pz=1;var e=vb(),t=$Ee(),r=UEe(),n=dy();function i(s,u){return u=e(u,s),s=r(s,u),s==null||delete s[n(t(u))]}return RA=i,RA}var LA,Iz;function VEe(){if(Iz)return LA;Iz=1;var e=fW();function t(r,n){return r==null?!0:e(r,n)}return LA=t,LA}var GEe=VEe();const DA=rl(GEe);var HEe=rO();const Zc=rl(HEe);var hW=function(e){e===void 0&&(e={});var t={},r=function(n,i){Object.keys(t).forEach(function(s){t[s]&&t[s].key===n&&t[s].callback(i)})};return{setup:function(){},teardown:function(){Object.keys(e).forEach(function(n){return delete e[n]})},getItem:function(n,i){return Zc(e,n,i)},setItem:function(n,i){zEe(e,n,i),r(n,i)},removeItem:function(n){DA(e,n),r(n,void 0)},removeItems:function(n){var i=Mz(e);Object.keys(i).forEach(function(s){s.startsWith(n)&&(DA(e,s),r(s,void 0))})},reset:function(){var n=Mz(e);Object.keys(n).forEach(function(i){DA(e,i),r(i,void 0)})},subscribe:function(n,i){var s=Math.random().toString();return t[s]={key:n,callback:i},function(){delete t[s]}}}},Mz=function(e){var t={};function r(n,i){if(Object(n)!==n)t[i]=n;else if(Array.isArray(n))t[i]=n;else{var s=!0;for(var u in n)s=!1,r(n[u],i?i+"."+u:u);s&&i&&(t[i]={})}}return r(e,""),t},WEe=hW(),dW=R.createContext(WEe),ZEe=function(e){var t=e.value,r=e.children;return R.useEffect(function(){return t.setup(),function(){t.teardown()}},[t]),R.createElement(dW.Provider,{value:t},r)},pw=function(){return R.useContext(dW)},kA,Oz;function XEe(){if(Oz)return kA;Oz=1;var e=eO();function t(r,n){return e(r,n)}return kA=t,kA}var KEe=XEe();const aR=rl(KEe);var Rz=function(e,t){return e&&t?String.prototype.replace.call(e,YEe,function(r,n){return!t.hasOwnProperty(n)||t[n]==null?r:t[n]}):e},YEe=/%\{(.*?)\}/g,JEe={translate:function(e,t){return t?._?Rz(t._,t):Rz(e,t)},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},oR=R.createContext(JEe);oR.displayName="I18nContext";var pW=R.createContext(function(){}),QEe=R.createContext(null),mW=R.createContext({notifications:[],addNotification:function(){},takeNotification:function(){},resetNotifications:function(){},setNotifications:function(){}}),Lz=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},eCe=function(e){var t=e.children,r=R.useState([]),n=r[0],i=r[1],s=R.useCallback(function(d){i(function(g){return Lz(Lz([],g,!0),[d],!1)})},[]),u=R.useCallback(function(){if(n.length!==0){var d=n[0],g=n.slice(1);return i(g),d}},[n]),a=R.useCallback(function(){i([])},[]),p=R.useMemo(function(){return{notifications:n,addNotification:s,takeNotification:u,resetNotifications:a,setNotifications:i}},[n]);return R.createElement(mW.Provider,{value:p},R.createElement(pW.Provider,{value:s},t))},tCe=function(){return R.useContext(pW)},gW=function(){return R.useContext(mW)},rCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Yf=function(){var e=tCe();return R.useCallback(function(t,r){r===void 0&&(r={});var n=r.type,i=n===void 0?"info":n,s=rCe(r,["type"]);e({message:t,type:i,notificationOptions:s})},[e])},nCe=function(e){var t=e.value,r=t===void 0?iCe:t,n=e.children,i=fm("locale")[0],s=Yf(),u=R.useState(0),a=u[0],p=u[1],d=R.useState(i===r.getLocale()),g=d[0],_=d[1];return R.useEffect(function(){i&&r.getLocale()!==i?new Promise(function(C){C(r.changeLocale(i))}).then(function(){p(function(C){return C+1}),_(!0)}).catch(function(C){_(!0),s("ra.notification.i18n_error",{type:"error"}),console.error(C)}):_(!0)},[r,i,s]),g?R.createElement(oR.Provider,{value:r,key:a},n):null},iCe={translate:function(e){return e},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},sR=function(){return R.useContext(oR)},Oi=function(){var e=sR(),t=R.useCallback(function(r,n){return e.translate(r,n)},[e]);return e?t:aCe},aCe=function(e){return e},FA,Dz;function yW(){if(Dz)return FA;Dz=1;var e=nO(),t=hy();function r(n,i,s){(s!==void 0&&!t(n[i],s)||s===void 0&&!(i in n))&&e(n,i,s)}return FA=r,FA}var NA,kz;function oCe(){if(kz)return NA;kz=1;var e=fy(),t=Hf();function r(n){return t(n)&&e(n)}return NA=r,NA}var BA,Fz;function vW(){if(Fz)return BA;Fz=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return BA=e,BA}var jA,Nz;function sCe(){if(Nz)return jA;Nz=1;var e=bb(),t=py();function r(n){return e(n,t(n))}return jA=r,jA}var zA,Bz;function lCe(){if(Bz)return zA;Bz=1;var e=yW(),t=HV(),r=XV(),n=WV(),i=KV(),s=N2(),u=Xu(),a=oCe(),p=B2(),d=HM(),g=Wf(),_=DV(),C=VM(),S=vW(),I=sCe();function O(P,k,F,B,N,G,$){var X=S(P,F),ee=S(k,F),J=$.get(ee);if(J){e(P,F,J);return}var le=G?G(X,ee,F+"",P,k,$):void 0,Z=le===void 0;if(Z){var H=u(ee),oe=!H&&p(ee),ue=!H&&!oe&&C(ee);le=ee,H||oe||ue?u(X)?le=X:a(X)?le=n(X):oe?(Z=!1,le=t(ee,!0)):ue?(Z=!1,le=r(ee,!0)):le=[]:_(ee)||s(ee)?(le=X,s(X)?le=I(X):(!g(X)||d(X))&&(le=i(ee))):Z=!1}Z&&($.set(ee,le),N(le,ee,B,G,$),$.delete(ee)),e(P,F,le)}return zA=O,zA}var $A,jz;function uCe(){if(jz)return $A;jz=1;var e=V2(),t=yW(),r=MV(),n=lCe(),i=Wf(),s=py(),u=vW();function a(p,d,g,_,C){p!==d&&r(d,function(S,I){if(C||(C=new e),i(S))n(p,d,I,g,a,_,C);else{var O=_?_(u(p,I),S,I+"",p,d,C):void 0;O===void 0&&(O=S),t(p,I,O)}},s)}return $A=a,$A}var qA,zz;function cCe(){if(zz)return qA;zz=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return qA=e,qA}var UA,$z;function bW(){if($z)return UA;$z=1;var e=cCe(),t=Math.max;function r(n,i,s){return i=t(i===void 0?n.length-1:i,0),function(){for(var u=arguments,a=-1,p=t(u.length-i,0),d=Array(p);++a<p;)d[a]=u[i+a];a=-1;for(var g=Array(i+1);++a<i;)g[a]=u[a];return g[i]=s(d),e(n,this,g)}}return UA=r,UA}var VA,qz;function fCe(){if(qz)return VA;qz=1;function e(t){return function(){return t}}return VA=e,VA}var GA,Uz;function hCe(){if(Uz)return GA;Uz=1;var e=fCe(),t=GV(),r=j2(),n=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:r;return GA=n,GA}var HA,Vz;function dCe(){if(Vz)return HA;Vz=1;var e=800,t=16,r=Date.now;function n(i){var s=0,u=0;return function(){var a=r(),p=t-(a-u);if(u=a,p>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return HA=n,HA}var WA,Gz;function _W(){if(Gz)return WA;Gz=1;var e=hCe(),t=dCe(),r=t(e);return WA=r,WA}var ZA,Hz;function xW(){if(Hz)return ZA;Hz=1;var e=j2(),t=bW(),r=_W();function n(i,s){return r(t(i,s,e),i+"")}return ZA=n,ZA}var XA,Wz;function wW(){if(Wz)return XA;Wz=1;var e=hy(),t=fy(),r=cy(),n=Wf();function i(s,u,a){if(!n(a))return!1;var p=typeof u;return(p=="number"?t(a)&&r(u,a.length):p=="string"&&u in a)?e(a[u],s):!1}return XA=i,XA}var KA,Zz;function pCe(){if(Zz)return KA;Zz=1;var e=xW(),t=wW();function r(n){return e(function(i,s){var u=-1,a=s.length,p=a>1?s[a-1]:void 0,d=a>2?s[2]:void 0;for(p=n.length>3&&typeof p=="function"?(a--,p):void 0,d&&t(s[0],s[1],d)&&(p=a<3?void 0:p,a=1),i=Object(i);++u<a;){var g=s[u];g&&n(i,g,u,p)}return i})}return KA=r,KA}var YA,Xz;function mCe(){if(Xz)return YA;Xz=1;var e=uCe(),t=pCe(),r=t(function(n,i,s){e(n,i,s)});return YA=r,YA}var gCe=mCe();const SW=rl(gCe);var EW=function(){var e=sR(),t=R.useMemo(function(){return e.getLocale()},[e]);return fm("locale",t)},yCe=function(){var e=EW()[0];return e},CW=function(e){var t,r=sR(),n=R.useMemo(function(){return r?.getLocales?r?.getLocales():[]},[r]);return(t=e?.locales)!==null&&t!==void 0?t:n},c0=function(){return c0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c0.apply(this,arguments)},$p=function(e){var t=e.resourceI18nKey,r=e.baseI18nKey,n=e.userText,i=e.options,s=Oi();return n!==void 0?typeof n!="string"?n:s(n,c0({_:n},i)):t?s(t,c0(c0({},i),{_:s(r,i)})):s(r,i)},AW=R.createContext(""),vCe=function(e){var t=e.children,r=e.basename;return R.createElement(AW.Provider,{value:r},t)},bCe=function(e){var t=e.basename,r=t===void 0?"":t,n=e.children,i=Nd(),s=i?_Ce:wCe;return R.createElement(vCe,{basename:i?r:""},R.createElement(s,{basename:r},n))},_Ce=function(e){var t=e.children;return R.createElement(R.Fragment,null,t)},xCe={v7_startTransition:!1,v7_relativeSplatPath:!1},wCe=function(e){var t=e.children,r=e.basename,n=_Ee([{path:"*",element:R.createElement(R.Fragment,null,t)}],{basename:r,future:{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1}});return R.createElement(REe,{router:n,future:xCe})},qh=function(){return R.useContext(AW)},Pb=function(){var e=qh();return R.useCallback(function(t){var r=t.resource,n=t.id,i=t.type;if(["list","create","edit","show"].includes(i)&&!r)throw new Error("Cannot create a link without a resource. You must provide the resource name.");switch(i){case"list":return Of("".concat(e,"/").concat(r));case"create":return Of("".concat(e,"/").concat(r,"/create"));case"edit":return n==null?Of("".concat(e,"/").concat(r)):Of("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n)));case"show":return n==null?Of("".concat(e,"/").concat(r)):Of("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n),"/show"));default:return i}},[e])},Of=function(e){return e.replace("//","/")},TW=R.createContext(void 0),_u=function(e){var t=R.useContext(TW);return e&&e.resource||t},lR=R.createContext(void 0);lR.displayName="RecordContext";var uR=function(e){var t=e.children,r=e.value;return R.createElement(lR.Provider,{value:r},t)},Al=function(e){var t=R.useContext(lR);return e&&e.record||t},wx=function(){return wx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wx.apply(this,arguments)},SCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},PW=R.createContext({definitions:{},register:function(){},unregister:function(){}}),ECe=function(e){var t=e.definitions,r=t===void 0?{}:t,n=e.children,i=R.useState(r),s=i[0],u=i[1],a=R.useCallback(function(g){u(function(_){var C;return aR(_[g.name],g)?_:wx(wx({},_),(C={},C[g.name]=g,C))})},[]),p=R.useCallback(function(g){u(function(_){var C=_,S=g.name;C[S];var I=SCe(C,[typeof S=="symbol"?S:S+""]);return I})},[]),d=R.useMemo(function(){return{definitions:s,register:a,unregister:p}},[s]);return R.createElement(PW.Provider,{value:d},n)},IW=function(){return R.useContext(PW)},Ib=function(){return IW().definitions},f0=function(){return f0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f0.apply(this,arguments)},Mb=function(){var e=Bd(),t=qh(),r=Pb();return R.useCallback(function(n,i,s,u,a){var p;if(i===void 0&&(i=""),a===void 0&&(a={}),n)if(typeof n=="function"){var d=n(i,s,u),g=typeof d=="string"?"".concat(t).concat(d.startsWith("/")?"":"/").concat(d):f0({pathname:"".concat(t).concat(!((p=d.pathname)===null||p===void 0)&&p.startsWith("/")?"":"/").concat(d.pathname)},d);e(g,{state:f0({_scrollToTop:!0},a)});return}else if(typeof n=="string"&&n.startsWith("http")&&window){window.location.href=n;return}else{e(r({resource:i,id:s,type:n}),{state:n==="list"?a:f0({_scrollToTop:!0},a)});return}else return},[e,t,r])},MW=function(e){var t=Cl().pathname,r=R.useRef(t);R.useEffect(function(){t!==r.current&&e()},[t,e])},CCe=function(){var e=Cl();R.useEffect(function(){var t;!((t=e.state)===null||t===void 0)&&t._scrollToTop&&typeof window<"u"&&typeof window.scrollTo=="function"&&window.scrollTo(0,0)},[e])},Sx=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},ACe="GET_LIST",TCe="GET_ONE",PCe="GET_MANY",ICe="GET_MANY_REFERENCE",MCe="CREATE",OCe="UPDATE",RCe="UPDATE_MANY",LCe="DELETE",DCe="DELETE_MANY",kCe=["getOne","create","update"],FCe=["getList","getMany","getManyReference"],NCe=Sx(Sx([],FCe,!0),["updateMany","deleteMany"],!1);Sx(Sx([],kCe,!0),NCe,!0);var cR={create:function(){return Promise.resolve({data:null})},delete:function(){return Promise.resolve({data:null})},deleteMany:function(){return Promise.resolve({data:[]})},getList:function(){return Promise.resolve({data:[],total:0})},getMany:function(){return Promise.resolve({data:[]})},getManyReference:function(){return Promise.resolve({data:[],total:0})},getOne:function(){return Promise.resolve({data:null})},update:function(){return Promise.resolve({data:null})},updateMany:function(){return Promise.resolve({data:[]})}},Kz={create:MCe,delete:LCe,deleteMany:DCe,getList:ACe,getMany:PCe,getManyReference:ICe,getOne:TCe,update:OCe,updateMany:RCe},BCe=function(e){var t=new Proxy(cR,{get:function(r,n){return function(i,s){if(Object.keys(Kz).includes(n.toString())){var u=Kz[n.toString()];return e(u,i,s)}return e(n.toString(),i,s)}},apply:function(r,n,i){return e.apply(e,i)}});return t},fR=R.createContext(null);fR.displayName="DataProviderContext";var JA={},QA,Yz;function jCe(){return Yz||(Yz=1,QA=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),QA}var eT,Jz;function zCe(){if(Jz)return eT;Jz=1;var e="%[a-f0-9]{2}",t=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function n(u,a){try{return[decodeURIComponent(u.join(""))]}catch{}if(u.length===1)return u;a=a||1;var p=u.slice(0,a),d=u.slice(a);return Array.prototype.concat.call([],n(p),n(d))}function i(u){try{return decodeURIComponent(u)}catch{for(var a=u.match(t)||[],p=1;p<a.length;p++)u=n(a,p).join(""),a=u.match(t)||[];return u}}function s(u){for(var a={"%FE%FF":"","%FF%FE":""},p=r.exec(u);p;){try{a[p[0]]=decodeURIComponent(p[0])}catch{var d=i(p[0]);d!==p[0]&&(a[p[0]]=d)}p=r.exec(u)}a["%C2"]="";for(var g=Object.keys(a),_=0;_<g.length;_++){var C=g[_];u=u.replace(new RegExp(C,"g"),a[C])}return u}return eT=function(u){if(typeof u!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof u+"`");try{return u=u.replace(/\+/g," "),decodeURIComponent(u)}catch{return s(u)}},eT}var tT,Qz;function $Ce(){return Qz||(Qz=1,tT=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}),tT}var rT,e7;function qCe(){return e7||(e7=1,rT=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),s=0;s<n.length;s++){var u=n[s],a=e[u];(i?t.indexOf(u)!==-1:t(u,a,e))&&(r[u]=a)}return r}),rT}var t7;function UCe(){return t7||(t7=1,(function(e){const t=jCe(),r=zCe(),n=$Ce(),i=qCe(),s=F=>F==null,u=Symbol("encodeFragmentIdentifier");function a(F){switch(F.arrayFormat){case"index":return B=>(N,G)=>{const $=N.length;return G===void 0||F.skipNull&&G===null||F.skipEmptyString&&G===""?N:G===null?[...N,[g(B,F),"[",$,"]"].join("")]:[...N,[g(B,F),"[",g($,F),"]=",g(G,F)].join("")]};case"bracket":return B=>(N,G)=>G===void 0||F.skipNull&&G===null||F.skipEmptyString&&G===""?N:G===null?[...N,[g(B,F),"[]"].join("")]:[...N,[g(B,F),"[]=",g(G,F)].join("")];case"colon-list-separator":return B=>(N,G)=>G===void 0||F.skipNull&&G===null||F.skipEmptyString&&G===""?N:G===null?[...N,[g(B,F),":list="].join("")]:[...N,[g(B,F),":list=",g(G,F)].join("")];case"comma":case"separator":case"bracket-separator":{const B=F.arrayFormat==="bracket-separator"?"[]=":"=";return N=>(G,$)=>$===void 0||F.skipNull&&$===null||F.skipEmptyString&&$===""?G:($=$===null?"":$,G.length===0?[[g(N,F),B,g($,F)].join("")]:[[G,g($,F)].join(F.arrayFormatSeparator)])}default:return B=>(N,G)=>G===void 0||F.skipNull&&G===null||F.skipEmptyString&&G===""?N:G===null?[...N,g(B,F)]:[...N,[g(B,F),"=",g(G,F)].join("")]}}function p(F){let B;switch(F.arrayFormat){case"index":return(N,G,$)=>{if(B=/\[(\d*)\]$/.exec(N),N=N.replace(/\[\d*\]$/,""),!B){$[N]=G;return}$[N]===void 0&&($[N]={}),$[N][B[1]]=G};case"bracket":return(N,G,$)=>{if(B=/(\[\])$/.exec(N),N=N.replace(/\[\]$/,""),!B){$[N]=G;return}if($[N]===void 0){$[N]=[G];return}$[N]=[].concat($[N],G)};case"colon-list-separator":return(N,G,$)=>{if(B=/(:list)$/.exec(N),N=N.replace(/:list$/,""),!B){$[N]=G;return}if($[N]===void 0){$[N]=[G];return}$[N]=[].concat($[N],G)};case"comma":case"separator":return(N,G,$)=>{const X=typeof G=="string"&&G.includes(F.arrayFormatSeparator),ee=typeof G=="string"&&!X&&_(G,F).includes(F.arrayFormatSeparator);G=ee?_(G,F):G;const J=X||ee?G.split(F.arrayFormatSeparator).map(le=>_(le,F)):G===null?G:_(G,F);$[N]=J};case"bracket-separator":return(N,G,$)=>{const X=/(\[\])$/.test(N);if(N=N.replace(/\[\]$/,""),!X){$[N]=G&&_(G,F);return}const ee=G===null?[]:G.split(F.arrayFormatSeparator).map(J=>_(J,F));if($[N]===void 0){$[N]=ee;return}$[N]=[].concat($[N],ee)};default:return(N,G,$)=>{if($[N]===void 0){$[N]=G;return}$[N]=[].concat($[N],G)}}}function d(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function g(F,B){return B.encode?B.strict?t(F):encodeURIComponent(F):F}function _(F,B){return B.decode?r(F):F}function C(F){return Array.isArray(F)?F.sort():typeof F=="object"?C(Object.keys(F)).sort((B,N)=>Number(B)-Number(N)).map(B=>F[B]):F}function S(F){const B=F.indexOf("#");return B!==-1&&(F=F.slice(0,B)),F}function I(F){let B="";const N=F.indexOf("#");return N!==-1&&(B=F.slice(N)),B}function O(F){F=S(F);const B=F.indexOf("?");return B===-1?"":F.slice(B+1)}function P(F,B){return B.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):B.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function k(F,B){B=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},B),d(B.arrayFormatSeparator);const N=p(B),G=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return G;for(const $ of F.split("&")){if($==="")continue;let[X,ee]=n(B.decode?$.replace(/\+/g," "):$,"=");ee=ee===void 0?null:["comma","separator","bracket-separator"].includes(B.arrayFormat)?ee:_(ee,B),N(_(X,B),ee,G)}for(const $ of Object.keys(G)){const X=G[$];if(typeof X=="object"&&X!==null)for(const ee of Object.keys(X))X[ee]=P(X[ee],B);else G[$]=P(X,B)}return B.sort===!1?G:(B.sort===!0?Object.keys(G).sort():Object.keys(G).sort(B.sort)).reduce(($,X)=>{const ee=G[X];return ee&&typeof ee=="object"&&!Array.isArray(ee)?$[X]=C(ee):$[X]=ee,$},Object.create(null))}e.extract=O,e.parse=k,e.stringify=(F,B)=>{if(!F)return"";B=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},B),d(B.arrayFormatSeparator);const N=ee=>B.skipNull&&s(F[ee])||B.skipEmptyString&&F[ee]==="",G=a(B),$={};for(const ee of Object.keys(F))N(ee)||($[ee]=F[ee]);const X=Object.keys($);return B.sort!==!1&&X.sort(B.sort),X.map(ee=>{const J=F[ee];return J===void 0?"":J===null?g(ee,B):Array.isArray(J)?J.length===0&&B.arrayFormat==="bracket-separator"?g(ee,B)+"[]":J.reduce(G(ee),[]).join("&"):g(ee,B)+"="+g(J,B)}).filter(ee=>ee.length>0).join("&")},e.parseUrl=(F,B)=>{B=Object.assign({decode:!0},B);const[N,G]=n(F,"#");return Object.assign({url:N.split("?")[0]||"",query:k(O(F),B)},B&&B.parseFragmentIdentifier&&G?{fragmentIdentifier:_(G,B)}:{})},e.stringifyUrl=(F,B)=>{B=Object.assign({encode:!0,strict:!0,[u]:!0},B);const N=S(F.url).split("?")[0]||"",G=e.extract(F.url),$=e.parse(G,{sort:!1}),X=Object.assign($,F.query);let ee=e.stringify(X,B);ee&&(ee=`?${ee}`);let J=I(F.url);return F.fragmentIdentifier&&(J=`#${B[u]?g(F.fragmentIdentifier,B):F.fragmentIdentifier}`),`${N}${ee}${J}`},e.pick=(F,B,N)=>{N=Object.assign({parseFragmentIdentifier:!0,[u]:!1},N);const{url:G,query:$,fragmentIdentifier:X}=e.parseUrl(F,N);return e.stringifyUrl({url:G,query:i($,B),fragmentIdentifier:X},N)},e.exclude=(F,B,N)=>{const G=Array.isArray(B)?$=>!B.includes($):($,X)=>!B($,X);return e.pick(F,G,N)}})(JA)),JA}var VCe=UCe(),nT={exports:{}},r7;function GCe(){return r7||(r7=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(p,d,g){this.fn=p,this.context=d,this.once=g||!1}function s(p,d,g,_,C){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new i(g,_||p,C),I=r?r+d:d;return p._events[I]?p._events[I].fn?p._events[I]=[p._events[I],S]:p._events[I].push(S):(p._events[I]=S,p._eventsCount++),p}function u(p,d){--p._eventsCount===0?p._events=new n:delete p._events[d]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],g,_;if(this._eventsCount===0)return d;for(_ in g=this._events)t.call(g,_)&&d.push(r?_.slice(1):_);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},a.prototype.listeners=function(d){var g=r?r+d:d,_=this._events[g];if(!_)return[];if(_.fn)return[_.fn];for(var C=0,S=_.length,I=new Array(S);C<S;C++)I[C]=_[C].fn;return I},a.prototype.listenerCount=function(d){var g=r?r+d:d,_=this._events[g];return _?_.fn?1:_.length:0},a.prototype.emit=function(d,g,_,C,S,I){var O=r?r+d:d;if(!this._events[O])return!1;var P=this._events[O],k=arguments.length,F,B;if(P.fn){switch(P.once&&this.removeListener(d,P.fn,void 0,!0),k){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,g),!0;case 3:return P.fn.call(P.context,g,_),!0;case 4:return P.fn.call(P.context,g,_,C),!0;case 5:return P.fn.call(P.context,g,_,C,S),!0;case 6:return P.fn.call(P.context,g,_,C,S,I),!0}for(B=1,F=new Array(k-1);B<k;B++)F[B-1]=arguments[B];P.fn.apply(P.context,F)}else{var N=P.length,G;for(B=0;B<N;B++)switch(P[B].once&&this.removeListener(d,P[B].fn,void 0,!0),k){case 1:P[B].fn.call(P[B].context);break;case 2:P[B].fn.call(P[B].context,g);break;case 3:P[B].fn.call(P[B].context,g,_);break;case 4:P[B].fn.call(P[B].context,g,_,C);break;default:if(!F)for(G=1,F=new Array(k-1);G<k;G++)F[G-1]=arguments[G];P[B].fn.apply(P[B].context,F)}}return!0},a.prototype.on=function(d,g,_){return s(this,d,g,_,!1)},a.prototype.once=function(d,g,_){return s(this,d,g,_,!0)},a.prototype.removeListener=function(d,g,_,C){var S=r?r+d:d;if(!this._events[S])return this;if(!g)return u(this,S),this;var I=this._events[S];if(I.fn)I.fn===g&&(!C||I.once)&&(!_||I.context===_)&&u(this,S);else{for(var O=0,P=[],k=I.length;O<k;O++)(I[O].fn!==g||C&&!I[O].once||_&&I[O].context!==_)&&P.push(I[O]);P.length?this._events[S]=P.length===1?P[0]:P:u(this,S)}return this},a.prototype.removeAllListeners=function(d){var g;return d?(g=r?r+d:d,this._events[g]&&u(this,g)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(nT)),nT.exports}var HCe=GCe();const WCe=rl(HCe),n7=new WCe;var OW=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},RW=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iT,LW=function(){var e=Ec(),t=Ey(),r=Yf(),n=Bd(),i=R.useCallback(function(u){u.startsWith("http")?window.location.href=u:n(u)},[n]),s=R.useCallback(function(u){return OW(void 0,void 0,void 0,function(){var a,p,d,g,_;return RW(this,function(C){switch(C.label){case 0:if(!e)return[2,ZCe()];C.label=1;case 1:return C.trys.push([1,3,,8]),[4,e.checkError(u)];case 2:return C.sent(),[2,!1];case 3:if(a=C.sent(),p=(_=a?.logoutUser)!==null&&_!==void 0?_:!0,iT)return[2,!0];if(iT=setTimeout(function(){iT=void 0},0),d=a&&a.redirectTo!=null?a.redirectTo:u&&u.redirectTo?u.redirectTo:void 0,g=!(a&&a.message===!1||u&&u.message===!1||d?.startsWith("http")),!g)return[3,7];C.label=4;case 4:return C.trys.push([4,6,,7]),[4,e.checkAuth({})];case 5:return C.sent(),p?r(i7(a,"ra.notification.logged_out"),{type:"error"}):r(i7(a,"ra.notification.not_authorized"),{type:"error"}),[3,7];case 6:return C.sent(),[3,7];case 7:return p?t({},d):d&&i(d),[2,!0];case 8:return[2]}})})},[e,t,r,i]);return s},ZCe=function(){return OW(void 0,void 0,void 0,function(){return RW(this,function(e){return[2,!1]})})},i7=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},XCe=function(e){var t=e.data,r=e.queryClient,n=e.staleTime,i=n===void 0?1e3:n,s=Date.now()+i;Object.keys(t).forEach(function(u){t[u].forEach(function(p){!p||p.id==null||r.setQueryData([u,"getOne",{id:String(p.id)}],p,{updatedAt:s})});var a=t[u].map(function(p){return String(p.id)});r.setQueryData([u,"getMany",{ids:a}],t[u],{updatedAt:s})})},KCe=["getList","getMany","getManyReference"],hR=function(){var e=R.useContext(fR)||cR,t=Xf(),r=LW(),n=R.useMemo(function(){return new Proxy(e,{get:function(i,s){if(!(typeof s=="symbol"||s==="then"))return s==="supportAbortSignal"?e.supportAbortSignal:function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];var p=s.toString();if(typeof e[p]!="function")throw new Error("Unknown dataProvider function: ".concat(p));try{return e[p].apply(e,u).then(function(d){var g;return!((g=d?.meta)===null||g===void 0)&&g.prefetched&&XCe({data:d?.meta.prefetched,queryClient:t}),d}).catch(function(d){return r(d).then(function(g){if(g)return{data:KCe.includes(p)?[]:{}};throw d})})}catch{throw new Error("The dataProvider threw an error. It should return a rejected Promise instead.")}}}})},[e,r,t]);return n},YCe=function(){var e=Xf(),t=qe.useRef(!1),r=qe.useRef(e.isFetching()>0),n=qe.useRef(e.isMutating()>0),i=qe.useState(r.current||n.current),s=i[0],u=i[1];return qe.useEffect(function(){t.current=!0;var a=e.getQueryCache().subscribe(zo.batchCalls(function(){t.current&&(r.current=e.isFetching()>0,u(r.current||n.current))})),p=e.getMutationCache().subscribe(zo.batchCalls(function(){t.current&&(n.current=e.isMutating()>0,u(r.current||n.current))}));return function(){t.current=!1,a(),p()}},[e]),s},JCe=function(){var e=Xf();return R.useCallback(function(){e.invalidateQueries()},[e])},U3=function(){return U3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},U3.apply(this,arguments)},QCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},DW=function(e,t,r){var n=t.id,i=t.meta;r===void 0&&(r={});var s=hR(),u=r.onError,a=u===void 0?aT:u,p=r.onSuccess,d=p===void 0?aT:p,g=r.onSettled,_=g===void 0?aT:g,C=r.enabled,S=QCe(r,["onError","onSuccess","onSettled","enabled"]),I=Mo(d),O=Mo(a),P=Mo(_),k=cm(U3({queryKey:[e,"getOne",{id:String(n),meta:i}],queryFn:function(F){return n==null?Promise.reject("useGetOne: id cannot be null"):s.getOne(e,{id:n,meta:i,signal:s.supportAbortSignal===!0?F.signal:void 0}).then(function(B){var N=B.data;return N})},enabled:C??n!=null},S));return R.useEffect(function(){k.data===void 0||k.error!=null||k.isFetching||I(k.data)},[I,k.data,k.error,k.isFetching]),R.useEffect(function(){k.error==null||k.isFetching||O(k.error)},[O,k.error,k.isFetching]),R.useEffect(function(){k.status==="pending"||k.isFetching||P(k.data,k.error)},[P,k.data,k.error,k.status,k.isFetching]),k},aT=function(){},oT,a7;function eAe(){if(a7)return oT;a7=1;var e=uy(),t=N2(),r=Xu(),n=e?e.isConcatSpreadable:void 0;function i(s){return r(s)||t(s)||!!(n&&s&&s[n])}return oT=i,oT}var sT,o7;function tAe(){if(o7)return sT;o7=1;var e=JM(),t=eAe();function r(n,i,s,u,a){var p=-1,d=n.length;for(s||(s=t),a||(a=[]);++p<d;){var g=n[p];i>0&&s(g)?i>1?r(g,i-1,s,u,a):e(a,g):u||(a[a.length]=g)}return a}return sT=r,sT}var V3=function(){return V3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},V3.apply(this,arguments)},rAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},kW=function(e){var t=e.record,r=e.redirect,n=r===void 0?"list":r,i=e.mutationMode,s=e.mutationOptions,u=s===void 0?{}:s,a=e.successMessage,p=u.meta,d=rAe(u,["meta"]),g=_u(e),_=Yf(),C=jW(g),S=Mb(),I=Oi(),O=BTe(g,void 0,{onSuccess:function(){_(a??"resources.".concat(g,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:I("ra.notification.deleted",{smart_count:1})},undoable:i==="undoable"}),t&&C([t.id]),S(n,g)},onError:function(B){_(typeof B=="string"?B:B?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof B=="string"?B:B?.message?B.message:void 0}})}}),P=O[0],k=O[1].isPending,F=R.useCallback(function(){if(!t)throw new Error("The record cannot be deleted because no record has been passed");P(g,{id:t.id,previousData:t,meta:p},V3({mutationMode:i},d))},[P,p,i,d,t,g]);return R.useMemo(function(){return{isPending:k,isLoading:k,handleDelete:F}},[k,F])},FW=R.createContext({}),nAe=function(e){var t=e.children,r=e.value;return R.createElement(FW.Provider,{value:r},t)},lT,s7;function iAe(){if(s7)return lT;s7=1;var e=W2(),t=cW(),r=vb();function n(i,s,u){for(var a=-1,p=s.length,d={};++a<p;){var g=s[a],_=e(i,g);u(_,g)&&t(d,r(g,i),_)}return d}return lT=n,lT}var uT,l7;function aAe(){if(l7)return uT;l7=1;var e=iAe(),t=VV();function r(n,i){return e(n,i,function(s,u){return t(n,u)})}return uT=r,uT}var cT,u7;function oAe(){if(u7)return cT;u7=1;var e=tAe();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return cT=t,cT}var fT,c7;function NW(){if(c7)return fT;c7=1;var e=oAe(),t=bW(),r=_W();function n(i){return r(t(i,void 0,e),i+"")}return fT=n,fT}var hT,f7;function sAe(){if(f7)return hT;f7=1;var e=aAe(),t=NW(),r=t(function(n,i){return n==null?{}:e(n,i)});return hT=r,hT}var lAe=sAe();const uAe=rl(lAe);var cAe=function(e){var t=R.useMemo(function(){return uAe(e,["save","saving","mutationMode","registerMutationMiddleware","unregisterMutationMiddleware"])},[e.save,e.saving,e.mutationMode,e.registerMutationMiddleware,e.unregisterMutationMiddleware]);return t},dR=function(e){return R.useContext(FW)},Rv=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},fAe=function(){var e=R.useRef([]),t=R.useCallback(function(s){e.current.push(s)},[]),r=R.useCallback(function(s){e.current=e.current.filter(function(u){return u!==s})},[]),n=R.useCallback(function(s){var u=Rv([],e.current,!0);return function(){for(var a=[],p=0;p<arguments.length;p++)a[p]=arguments[p];var d=u.length-1,g=function(){for(var _=[],C=0;C<arguments.length;C++)_[C]=arguments[C];return d--,d>=0?u[d].apply(u,Rv(Rv([],_,!1),[g],!1)):s.apply(void 0,_)};return u.length>0?u[d].apply(u,Rv(Rv([],a,!1),[g],!1)):s.apply(void 0,a)}},[]),i=R.useMemo(function(){return{registerMutationMiddleware:t,getMutateWithMiddlewares:n,unregisterMutationMiddleware:r}},[t,n,r]);return i},h0=function(){return h0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},h0.apply(this,arguments)},h7=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},d7=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},p7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},hAe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.mutationMode,s=i===void 0?"undoable":i,u=e.mutationOptions,a=u===void 0?{}:u,p=e.queryOptions,d=p===void 0?{}:p,g=e.redirect,_=g===void 0?dAe:g,C=e.transform,S=_u(e);if(!S)throw new Error("useEditController requires a non-empty resource prop or context");var I=Db({enabled:!r}).isPending,O=EZ({action:"edit",resource:S,enabled:!r&&!I}).isPending,P=Sy(S),k=Oi(),F=Yf(),B=Mb(),N=eW().id;if(!N&&!n)throw new Error("useEditController requires an id prop or a route with an /:id? parameter.");var G=n??N,$=d.meta,X=p7(d,["meta"]),ee=a.meta,J=a.onSuccess,le=a.onError,Z=p7(a,["meta","onSuccess","onError"]);($||ee)&&JSON.stringify($)!==JSON.stringify(ee)&&_===!1&&console.warn("When not redirecting after editing, query meta and mutation meta should be the same, or you will have data update issues.");var H=fAe(),oe=H.registerMutationMiddleware,ue=H.getMutateWithMiddlewares,ce=H.unregisterMutationMiddleware,be=DW(S,{id:G,meta:$},h0({enabled:!I&&!O||r,onError:function(){F("ra.notification.item_doesnt_exist",{type:"error"}),B("list",S)},refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:!1},X)),Te=be.data,ve=be.error,Ce=be.isLoading,$e=be.isFetching,Je=be.isPaused,ge=be.isPending,Ee=be.isPlaceholderData,Ie=be.refetch;if(Te&&Te.id&&Te.id!=G)throw new Error("useEditController: Fetched record's id attribute (".concat(Te.id,") must match the requested 'id' (").concat(G,")"));var Le=wy(),Ve=P(Te),ht=k("resources.".concat(S,".page.edit"),{id:G,record:Te,recordRepresentation:typeof Ve=="string"?Ve:"",_:k("ra.page.edit",{name:Le(S,1),id:G,record:Te,recordRepresentation:typeof Ve=="string"?Ve:""})}),It={id:G,previousData:Te},xt=NTe(S,It,h0(h0({onSuccess:function(Ft,dt,ke){return h7(void 0,void 0,void 0,function(){return d7(this,function(fr){return J?[2,J(Ft,dt,ke)]:(F("resources.".concat(S,".notifications.updated"),{type:"info",messageArgs:{smart_count:1,_:k("ra.notification.updated",{smart_count:1})},undoable:s==="undoable"}),B(_,S,Ft.id,Ft),[2])})})},onError:function(Ft,dt,ke){var fr;if(le)return le(Ft,dt,ke);var sr=(fr=Ft?.body)===null||fr===void 0?void 0:fr.errors,xr=!!sr&&Object.keys(sr).length>0;(!xr||s!=="pessimistic")&&F(typeof Ft=="string"?Ft:Ft.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof Ft=="string"?Ft:Ft instanceof Error||typeof Ft=="object"&&Ft!==null&&Ft.hasOwnProperty("message")?Ft.message:void 0}})}},Z),{mutationMode:s,returnPromise:s==="pessimistic",getMutateWithMiddlewares:ue})),rt=xt[0],zt=xt[1].isPending,Lt=R.useCallback(function(Ft,dt){var ke=dt===void 0?{}:dt,fr=ke.onSuccess,sr=ke.onError,xr=ke.transform,tr=ke.meta;return Promise.resolve(xr?xr(Ft,{previousData:It.previousData}):C?C(Ft,{previousData:It.previousData}):Ft).then(function(Ge){return h7(void 0,void 0,void 0,function(){var nt,ut;return d7(this,function(Nt){switch(Nt.label){case 0:return Nt.trys.push([0,2,,3]),[4,rt(S,{id:G,data:Ge,meta:tr??ee,previousData:Te},{onError:sr,onSuccess:fr})];case 1:return Nt.sent(),[3,3];case 2:return nt=Nt.sent(),((ut=nt.body)===null||ut===void 0?void 0:ut.errors)!=null?[2,nt.body.errors]:[3,3];case 3:return[2]}})})})},[G,ee,Te,S,C,rt,It.previousData]);return{defaultTitle:ht,error:ve,isFetching:$e,isLoading:Ce,isPaused:Je,isPending:ge,isPlaceholderData:Ee,mutationMode:s,record:Te,redirect:_,refetch:Ie,registerMutationMiddleware:oe,resource:S,save:Lt,saving:zt,unregisterMutationMiddleware:ce}},dAe="list",BW=function(e){var t=e.value,r=e.children;return t?R.createElement(uR,{value:t},r):r},pR=R.createContext(null);pR.displayName="EditContext";var pAe=function(e){var t=e.children,r=e.value;return R.createElement(pR.Provider,{value:r},R.createElement(nAe,{value:cAe(r)},R.createElement(uR,{value:r&&r.record},t)))},mAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gAe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,s=mAe(e,["children","loading","offline","render"]),u=hAe(s),a=SZ({resource:u.resource,action:"edit"});if(!i&&!t)throw new Error("<EditBase> requires either a 'render' prop or 'children' prop");var p=u.isPaused,d=u.isPending,g=a&&!s.disableAuthentication&&r!==!1&&r!==void 0,_=p&&d&&n!==!1&&n!==void 0;return R.createElement(mZ,{value:s.resource},R.createElement(pAe,{value:u},g?r:_?n:i?i(u):t))},yAe=function(){var e=R.useContext(pR);if(!e)throw new Error("useEditContext must be used inside an EditContextProvider");return e},rg=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},vAe=function(e){var t=e.resource,r=t===void 0?"":t,n=e.disableSyncWithStore,i=n===void 0?!1:n,s="".concat(r,".selectedIds"),u=R.useState(dT),a=u[0],p=u[1],d=fm(s,dT),g=d[0],_=d[1],C=CPe(s),S=i?a:g,I=i?p:_,O=R.useCallback(function(){i?p(dT):C()},[i,C]),P=R.useMemo(function(){return{select:function(k){k&&I(rg([],k,!0))},unselect:function(k){!k||k.length===0||I(function(F){return Array.isArray(F)?F.filter(function(B){return!k.includes(B)}):[]})},toggle:function(k){typeof k>"u"||I(function(F){if(!Array.isArray(F))return rg([],F,!0);var B=F.indexOf(k);return B>-1?rg(rg([],F.slice(0,B),!0),F.slice(B+1),!0):rg(rg([],F,!0),[k],!1)})},clearSelection:function(){O()}}},[I,O]);return[S,P]},dT=[];function bAe(e,t){e===void 0&&(e=0),t===void 0&&(t="");var r=R.useState(!1),n=r[0],i=r[1];return R.useEffect(function(){i(!1);var s=setTimeout(function(){i(!0)},e);return function(){clearTimeout(s)}},[t,e,i]),n}var pT,m7;function _Ae(){if(m7)return pT;m7=1;var e=xW(),t=hy(),r=wW(),n=py(),i=Object.prototype,s=i.hasOwnProperty,u=e(function(a,p){a=Object(a);var d=-1,g=p.length,_=g>2?p[2]:void 0;for(_&&r(p[0],p[1],_)&&(g=1);++d<g;)for(var C=p[d],S=n(C),I=-1,O=S.length;++I<O;){var P=S[I],k=a[P];(k===void 0||t(k,i[P])&&!s.call(a,P))&&(a[P]=C[P])}return a});return pT=u,pT}var xAe=_Ae();const wAe=rl(xAe);var jW=function(e){var t=vAe(e?{resource:e}:{disableSyncWithStore:!0}),r=t[1].unselect;return R.useCallback(function(n){r(n)},[r])},SAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},EAe=function(e){e.cellClassName,e.className,e.emptyText,e.fullWidth,e.headerClassName,e.label,e.linkType,e.link,e.locale,e.record,e.refetch,e.resource,e.sortable,e.sortBy,e.sortByOrder,e.source,e.textAlign,e.translateChoice;var t=SAe(e,["cellClassName","className","emptyText","fullWidth","headerClassName","label","linkType","link","locale","record","refetch","resource","sortable","sortBy","sortByOrder","source","textAlign","translateChoice"]);return t},Ob=e=>e.type==="checkbox",kp=e=>e instanceof Date,Gl=e=>e==null;const zW=e=>typeof e=="object";var qo=e=>!Gl(e)&&!Array.isArray(e)&&zW(e)&&!kp(e),$W=e=>qo(e)&&e.target?Ob(e.target)?e.target.checked:e.target.value:e,CAe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,qW=(e,t)=>e.has(CAe(t)),AAe=e=>{const t=e.constructor&&e.constructor.prototype;return qo(t)&&t.hasOwnProperty("isPrototypeOf")},mR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _s(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(mR&&(e instanceof Blob||n))&&(r||qo(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!AAe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=_s(e[i]));else return e;return t}var mw=e=>/^\w*$/.test(e),Fo=e=>e===void 0,gR=e=>Array.isArray(e)?e.filter(Boolean):[],yR=e=>gR(e.replace(/["|']|\]/g,"").split(/\.|\[/)),fn=(e,t,r)=>{if(!t||!qo(e))return r;const n=(mw(t)?[t]:yR(t)).reduce((i,s)=>Gl(i)?i:i[s],e);return Fo(n)||n===e?Fo(e[t])?r:e[t]:n},ju=e=>typeof e=="boolean",Ua=(e,t,r)=>{let n=-1;const i=mw(t)?[t]:yR(t),s=i.length,u=s-1;for(;++n<s;){const a=i[n];let p=r;if(n!==u){const d=e[a];p=qo(d)||Array.isArray(d)?d:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=p,e=e[a]}};const Ex={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Gc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},wh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vR=qe.createContext(null);vR.displayName="HookFormContext";const Rb=()=>qe.useContext(vR),TAe=e=>{const{children:t,...r}=e;return qe.createElement(vR.Provider,{value:r},t)};var UW=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const u=s;return t._proxyFormState[u]!==Gc.all&&(t._proxyFormState[u]=!n||Gc.all),r&&(r[u]=!0),e[u]}});return i};const bR=typeof window<"u"?qe.useLayoutEffect:qe.useEffect;function gw(e){const t=Rb(),{control:r=t.control,disabled:n,name:i,exact:s}=e||{},[u,a]=qe.useState(r._formState),p=qe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return bR(()=>r._subscribe({name:i,formState:p.current,exact:s,callback:d=>{!n&&a({...r._formState,...d})}}),[i,n,s]),qe.useEffect(()=>{p.current.isValid&&r._setValid(!0)},[r]),qe.useMemo(()=>UW(u,r,p.current,!1),[u,r])}var Ff=e=>typeof e=="string",VW=(e,t,r,n,i)=>Ff(e)?(n&&t.watch.add(e),fn(r,e,i)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),fn(r,s))):(n&&(t.watchAll=!0),r),G3=e=>Gl(e)||!zW(e);function Mh(e,t,r=new WeakSet){if(G3(e)||G3(t))return e===t;if(kp(e)&&kp(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const u=e[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=t[s];if(kp(u)&&kp(a)||qo(u)&&qo(a)||Array.isArray(u)&&Array.isArray(a)?!Mh(u,a,r):u!==a)return!1}}return!0}function PAe(e){const t=Rb(),{control:r=t.control,name:n,defaultValue:i,disabled:s,exact:u,compute:a}=e||{},p=qe.useRef(i),d=qe.useRef(a),g=qe.useRef(void 0);d.current=a;const _=qe.useMemo(()=>r._getWatch(n,p.current),[r,n]),[C,S]=qe.useState(d.current?d.current(_):_);return bR(()=>r._subscribe({name:n,formState:{values:!0},exact:u,callback:I=>{if(!s){const O=VW(n,r._names,I.values||r._formValues,!1,p.current);if(d.current){const P=d.current(O);Mh(P,g.current)||(S(P),g.current=P)}else S(O)}}}),[r,s,n,u]),qe.useEffect(()=>r._removeUnmounted()),C}function IAe(e){const t=Rb(),{name:r,disabled:n,control:i=t.control,shouldUnregister:s,defaultValue:u}=e,a=qW(i._names.array,r),p=qe.useMemo(()=>fn(i._formValues,r,fn(i._defaultValues,r,u)),[i,r,u]),d=PAe({control:i,name:r,defaultValue:p,exact:!0}),g=gw({control:i,name:r,exact:!0}),_=qe.useRef(e),C=qe.useRef(i.register(r,{...e.rules,value:d,...ju(e.disabled)?{disabled:e.disabled}:{}}));_.current=e;const S=qe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!fn(g.errors,r)},isDirty:{enumerable:!0,get:()=>!!fn(g.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!fn(g.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!fn(g.validatingFields,r)},error:{enumerable:!0,get:()=>fn(g.errors,r)}}),[g,r]),I=qe.useCallback(F=>C.current.onChange({target:{value:$W(F),name:r},type:Ex.CHANGE}),[r]),O=qe.useCallback(()=>C.current.onBlur({target:{value:fn(i._formValues,r),name:r},type:Ex.BLUR}),[r,i._formValues]),P=qe.useCallback(F=>{const B=fn(i._fields,r);B&&F&&(B._f.ref={focus:()=>F.focus&&F.focus(),select:()=>F.select&&F.select(),setCustomValidity:N=>F.setCustomValidity(N),reportValidity:()=>F.reportValidity()})},[i._fields,r]),k=qe.useMemo(()=>({name:r,value:d,...ju(n)||g.disabled?{disabled:g.disabled||n}:{},onChange:I,onBlur:O,ref:P}),[r,n,g.disabled,I,O,P,d]);return qe.useEffect(()=>{const F=i._options.shouldUnregister||s;i.register(r,{..._.current.rules,...ju(_.current.disabled)?{disabled:_.current.disabled}:{}});const B=(N,G)=>{const $=fn(i._fields,N);$&&$._f&&($._f.mount=G)};if(B(r,!0),F){const N=_s(fn(i._options.defaultValues,r));Ua(i._defaultValues,r,N),Fo(fn(i._formValues,r))&&Ua(i._formValues,r,N)}return!a&&i.register(r),()=>{(a?F&&!i._state.action:F)?i.unregister(r):B(r,!1)}},[r,i,a,s]),qe.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),qe.useMemo(()=>({field:k,formState:g,fieldState:S}),[k,g,S])}var MAe=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},d0=e=>Array.isArray(e)?e:[e],g7=()=>{let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next&&s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}},uu=e=>qo(e)&&!Object.keys(e).length,_R=e=>e.type==="file",Hc=e=>typeof e=="function",Cx=e=>{if(!mR)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},GW=e=>e.type==="select-multiple",xR=e=>e.type==="radio",OAe=e=>xR(e)||Ob(e),mT=e=>Cx(e)&&e.isConnected;function RAe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Fo(e)?n++:e[t[n++]];return e}function LAe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fo(e[t]))return!1;return!0}function rs(e,t){const r=Array.isArray(t)?t:mw(t)?[t]:yR(t),n=r.length===1?e:RAe(e,r),i=r.length-1,s=r[i];return n&&delete n[s],i!==0&&(qo(n)&&uu(n)||Array.isArray(n)&&LAe(n))&&rs(e,r.slice(0,-1)),e}var HW=e=>{for(const t in e)if(Hc(e[t]))return!0;return!1};function Ax(e,t={}){const r=Array.isArray(e);if(qo(e)||r)for(const n in e)Array.isArray(e[n])||qo(e[n])&&!HW(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ax(e[n],t[n])):Gl(e[n])||(t[n]=!0);return t}function WW(e,t,r){const n=Array.isArray(e);if(qo(e)||n)for(const i in e)Array.isArray(e[i])||qo(e[i])&&!HW(e[i])?Fo(t)||G3(r[i])?r[i]=Array.isArray(e[i])?Ax(e[i],[]):{...Ax(e[i])}:WW(e[i],Gl(t)?{}:t[i],r[i]):r[i]=!Mh(e[i],t[i]);return r}var Lv=(e,t)=>WW(e,t,Ax(t));const y7={value:!1,isValid:!1},v7={value:!0,isValid:!0};var ZW=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fo(e[0].attributes.value)?Fo(e[0].value)||e[0].value===""?v7:{value:e[0].value,isValid:!0}:v7:y7}return y7},XW=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Fo(e)?e:t?e===""?NaN:e&&+e:r&&Ff(e)?new Date(e):n?n(e):e;const b7={isValid:!1,value:null};var KW=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,b7):b7;function _7(e){const t=e.ref;return _R(t)?t.files:xR(t)?KW(e.refs).value:GW(t)?[...t.selectedOptions].map(({value:r})=>r):Ob(t)?ZW(e.refs).value:XW(Fo(t.value)?e.ref.value:t.value,e)}var DAe=(e,t,r,n)=>{const i={};for(const s of e){const u=fn(t,s);u&&Ua(i,s,u._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},Tx=e=>e instanceof RegExp,Dv=e=>Fo(e)?e:Tx(e)?e.source:qo(e)?Tx(e.value)?e.value.source:e.value:e,x7=e=>({isOnSubmit:!e||e===Gc.onSubmit,isOnBlur:e===Gc.onBlur,isOnChange:e===Gc.onChange,isOnAll:e===Gc.all,isOnTouch:e===Gc.onTouched});const w7="AsyncFunction";var kAe=e=>!!e&&!!e.validate&&!!(Hc(e.validate)&&e.validate.constructor.name===w7||qo(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===w7)),FAe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),S7=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const p0=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const s=fn(e,i);if(s){const{_f:u,...a}=s;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(p0(a,t))break}else if(qo(a)&&p0(a,t))break}}};function E7(e,t,r){const n=fn(e,r);if(n||mw(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const s=i.join("."),u=fn(t,s),a=fn(e,s);if(u&&!Array.isArray(u)&&r!==s)return{name:r};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:r}}var NAe=(e,t,r,n)=>{r(e);const{name:i,...s}=e;return uu(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(u=>t[u]===(!n||Gc.all))},BAe=(e,t,r)=>!e||!t||e===t||d0(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),jAe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,zAe=(e,t)=>!gR(fn(e,t)).length&&rs(e,t),$Ae=(e,t,r)=>{const n=d0(fn(e,r));return Ua(n,"root",t[r]),Ua(e,r,n),e},R1=e=>Ff(e);function C7(e,t,r="validate"){if(R1(e)||Array.isArray(e)&&e.every(R1)||ju(e)&&!e)return{type:r,message:R1(e)?e:"",ref:t}}var ng=e=>qo(e)&&!Tx(e)?e:{value:e,message:""},A7=async(e,t,r,n,i,s)=>{const{ref:u,refs:a,required:p,maxLength:d,minLength:g,min:_,max:C,pattern:S,validate:I,name:O,valueAsNumber:P,mount:k}=e._f,F=fn(r,O);if(!k||t.has(O))return{};const B=a?a[0]:u,N=H=>{i&&B.reportValidity&&(B.setCustomValidity(ju(H)?"":H||""),B.reportValidity())},G={},$=xR(u),X=Ob(u),ee=$||X,J=(P||_R(u))&&Fo(u.value)&&Fo(F)||Cx(u)&&u.value===""||F===""||Array.isArray(F)&&!F.length,le=MAe.bind(null,O,n,G),Z=(H,oe,ue,ce=wh.maxLength,be=wh.minLength)=>{const Te=H?oe:ue;G[O]={type:H?ce:be,message:Te,ref:u,...le(H?ce:be,Te)}};if(s?!Array.isArray(F)||!F.length:p&&(!ee&&(J||Gl(F))||ju(F)&&!F||X&&!ZW(a).isValid||$&&!KW(a).isValid)){const{value:H,message:oe}=R1(p)?{value:!!p,message:p}:ng(p);if(H&&(G[O]={type:wh.required,message:oe,ref:B,...le(wh.required,oe)},!n))return N(oe),G}if(!J&&(!Gl(_)||!Gl(C))){let H,oe;const ue=ng(C),ce=ng(_);if(!Gl(F)&&!isNaN(F)){const be=u.valueAsNumber||F&&+F;Gl(ue.value)||(H=be>ue.value),Gl(ce.value)||(oe=be<ce.value)}else{const be=u.valueAsDate||new Date(F),Te=$e=>new Date(new Date().toDateString()+" "+$e),ve=u.type=="time",Ce=u.type=="week";Ff(ue.value)&&F&&(H=ve?Te(F)>Te(ue.value):Ce?F>ue.value:be>new Date(ue.value)),Ff(ce.value)&&F&&(oe=ve?Te(F)<Te(ce.value):Ce?F<ce.value:be<new Date(ce.value))}if((H||oe)&&(Z(!!H,ue.message,ce.message,wh.max,wh.min),!n))return N(G[O].message),G}if((d||g)&&!J&&(Ff(F)||s&&Array.isArray(F))){const H=ng(d),oe=ng(g),ue=!Gl(H.value)&&F.length>+H.value,ce=!Gl(oe.value)&&F.length<+oe.value;if((ue||ce)&&(Z(ue,H.message,oe.message),!n))return N(G[O].message),G}if(S&&!J&&Ff(F)){const{value:H,message:oe}=ng(S);if(Tx(H)&&!F.match(H)&&(G[O]={type:wh.pattern,message:oe,ref:u,...le(wh.pattern,oe)},!n))return N(oe),G}if(I){if(Hc(I)){const H=await I(F,r),oe=C7(H,B);if(oe&&(G[O]={...oe,...le(wh.validate,oe.message)},!n))return N(oe.message),G}else if(qo(I)){let H={};for(const oe in I){if(!uu(H)&&!n)break;const ue=C7(await I[oe](F,r),B,oe);ue&&(H={...ue,...le(oe,ue.message)},N(ue.message),n&&(G[O]=H))}if(!uu(H)&&(G[O]={ref:B,...H},!n))return G}}return N(!0),G};const qAe={mode:Gc.onSubmit,reValidateMode:Gc.onChange,shouldFocusError:!0};function UAe(e={}){let t={...qAe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Hc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=qo(t.defaultValues)||qo(t.values)?_s(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:_s(i),u={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,d=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let _={...g};const C={array:g7(),state:g7()},S=t.criteriaMode===Gc.all,I=Ge=>nt=>{clearTimeout(d),d=setTimeout(Ge,nt)},O=async Ge=>{if(!t.disabled&&(g.isValid||_.isValid||Ge)){const nt=t.resolver?uu((await X()).errors):await J(n,!0);nt!==r.isValid&&C.state.next({isValid:nt})}},P=(Ge,nt)=>{!t.disabled&&(g.isValidating||g.validatingFields||_.isValidating||_.validatingFields)&&((Ge||Array.from(a.mount)).forEach(ut=>{ut&&(nt?Ua(r.validatingFields,ut,nt):rs(r.validatingFields,ut))}),C.state.next({validatingFields:r.validatingFields,isValidating:!uu(r.validatingFields)}))},k=(Ge,nt=[],ut,Nt,Kt=!0,Vt=!0)=>{if(Nt&&ut&&!t.disabled){if(u.action=!0,Vt&&Array.isArray(fn(n,Ge))){const Ke=ut(fn(n,Ge),Nt.argA,Nt.argB);Kt&&Ua(n,Ge,Ke)}if(Vt&&Array.isArray(fn(r.errors,Ge))){const Ke=ut(fn(r.errors,Ge),Nt.argA,Nt.argB);Kt&&Ua(r.errors,Ge,Ke),zAe(r.errors,Ge)}if((g.touchedFields||_.touchedFields)&&Vt&&Array.isArray(fn(r.touchedFields,Ge))){const Ke=ut(fn(r.touchedFields,Ge),Nt.argA,Nt.argB);Kt&&Ua(r.touchedFields,Ge,Ke)}(g.dirtyFields||_.dirtyFields)&&(r.dirtyFields=Lv(i,s)),C.state.next({name:Ge,isDirty:Z(Ge,nt),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ua(s,Ge,nt)},F=(Ge,nt)=>{Ua(r.errors,Ge,nt),C.state.next({errors:r.errors})},B=Ge=>{r.errors=Ge,C.state.next({errors:r.errors,isValid:!1})},N=(Ge,nt,ut,Nt)=>{const Kt=fn(n,Ge);if(Kt){const Vt=fn(s,Ge,Fo(ut)?fn(i,Ge):ut);Fo(Vt)||Nt&&Nt.defaultChecked||nt?Ua(s,Ge,nt?Vt:_7(Kt._f)):ue(Ge,Vt),u.mount&&O()}},G=(Ge,nt,ut,Nt,Kt)=>{let Vt=!1,Ke=!1;const me={name:Ge};if(!t.disabled){if(!ut||Nt){(g.isDirty||_.isDirty)&&(Ke=r.isDirty,r.isDirty=me.isDirty=Z(),Vt=Ke!==me.isDirty);const pe=Mh(fn(i,Ge),nt);Ke=!!fn(r.dirtyFields,Ge),pe?rs(r.dirtyFields,Ge):Ua(r.dirtyFields,Ge,!0),me.dirtyFields=r.dirtyFields,Vt=Vt||(g.dirtyFields||_.dirtyFields)&&Ke!==!pe}if(ut){const pe=fn(r.touchedFields,Ge);pe||(Ua(r.touchedFields,Ge,ut),me.touchedFields=r.touchedFields,Vt=Vt||(g.touchedFields||_.touchedFields)&&pe!==ut)}Vt&&Kt&&C.state.next(me)}return Vt?me:{}},$=(Ge,nt,ut,Nt)=>{const Kt=fn(r.errors,Ge),Vt=(g.isValid||_.isValid)&&ju(nt)&&r.isValid!==nt;if(t.delayError&&ut?(p=I(()=>F(Ge,ut)),p(t.delayError)):(clearTimeout(d),p=null,ut?Ua(r.errors,Ge,ut):rs(r.errors,Ge)),(ut?!Mh(Kt,ut):Kt)||!uu(Nt)||Vt){const Ke={...Nt,...Vt&&ju(nt)?{isValid:nt}:{},errors:r.errors,name:Ge};r={...r,...Ke},C.state.next(Ke)}},X=async Ge=>{P(Ge,!0);const nt=await t.resolver(s,t.context,DAe(Ge||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return P(Ge),nt},ee=async Ge=>{const{errors:nt}=await X(Ge);if(Ge)for(const ut of Ge){const Nt=fn(nt,ut);Nt?Ua(r.errors,ut,Nt):rs(r.errors,ut)}else r.errors=nt;return nt},J=async(Ge,nt,ut={valid:!0})=>{for(const Nt in Ge){const Kt=Ge[Nt];if(Kt){const{_f:Vt,...Ke}=Kt;if(Vt){const me=a.array.has(Vt.name),pe=Kt._f&&kAe(Kt._f);pe&&g.validatingFields&&P([Nt],!0);const Ae=await A7(Kt,a.disabled,s,S,t.shouldUseNativeValidation&&!nt,me);if(pe&&g.validatingFields&&P([Nt]),Ae[Vt.name]&&(ut.valid=!1,nt))break;!nt&&(fn(Ae,Vt.name)?me?$Ae(r.errors,Ae,Vt.name):Ua(r.errors,Vt.name,Ae[Vt.name]):rs(r.errors,Vt.name))}!uu(Ke)&&await J(Ke,nt,ut)}}return ut.valid},le=()=>{for(const Ge of a.unMount){const nt=fn(n,Ge);nt&&(nt._f.refs?nt._f.refs.every(ut=>!mT(ut)):!mT(nt._f.ref))&&ht(Ge)}a.unMount=new Set},Z=(Ge,nt)=>!t.disabled&&(Ge&&nt&&Ua(s,Ge,nt),!Mh($e(),i)),H=(Ge,nt,ut)=>VW(Ge,a,{...u.mount?s:Fo(nt)?i:Ff(Ge)?{[Ge]:nt}:nt},ut,nt),oe=Ge=>gR(fn(u.mount?s:i,Ge,t.shouldUnregister?fn(i,Ge,[]):[])),ue=(Ge,nt,ut={})=>{const Nt=fn(n,Ge);let Kt=nt;if(Nt){const Vt=Nt._f;Vt&&(!Vt.disabled&&Ua(s,Ge,XW(nt,Vt)),Kt=Cx(Vt.ref)&&Gl(nt)?"":nt,GW(Vt.ref)?[...Vt.ref.options].forEach(Ke=>Ke.selected=Kt.includes(Ke.value)):Vt.refs?Ob(Vt.ref)?Vt.refs.forEach(Ke=>{(!Ke.defaultChecked||!Ke.disabled)&&(Array.isArray(Kt)?Ke.checked=!!Kt.find(me=>me===Ke.value):Ke.checked=Kt===Ke.value||!!Kt)}):Vt.refs.forEach(Ke=>Ke.checked=Ke.value===Kt):_R(Vt.ref)?Vt.ref.value="":(Vt.ref.value=Kt,Vt.ref.type||C.state.next({name:Ge,values:_s(s)})))}(ut.shouldDirty||ut.shouldTouch)&&G(Ge,Kt,ut.shouldTouch,ut.shouldDirty,!0),ut.shouldValidate&&Ce(Ge)},ce=(Ge,nt,ut)=>{for(const Nt in nt){if(!nt.hasOwnProperty(Nt))return;const Kt=nt[Nt],Vt=Ge+"."+Nt,Ke=fn(n,Vt);(a.array.has(Ge)||qo(Kt)||Ke&&!Ke._f)&&!kp(Kt)?ce(Vt,Kt,ut):ue(Vt,Kt,ut)}},be=(Ge,nt,ut={})=>{const Nt=fn(n,Ge),Kt=a.array.has(Ge),Vt=_s(nt);Ua(s,Ge,Vt),Kt?(C.array.next({name:Ge,values:_s(s)}),(g.isDirty||g.dirtyFields||_.isDirty||_.dirtyFields)&&ut.shouldDirty&&C.state.next({name:Ge,dirtyFields:Lv(i,s),isDirty:Z(Ge,Vt)})):Nt&&!Nt._f&&!Gl(Vt)?ce(Ge,Vt,ut):ue(Ge,Vt,ut),S7(Ge,a)&&C.state.next({...r,name:Ge}),C.state.next({name:u.mount?Ge:void 0,values:_s(s)})},Te=async Ge=>{u.mount=!0;const nt=Ge.target;let ut=nt.name,Nt=!0;const Kt=fn(n,ut),Vt=pe=>{Nt=Number.isNaN(pe)||kp(pe)&&isNaN(pe.getTime())||Mh(pe,fn(s,ut,pe))},Ke=x7(t.mode),me=x7(t.reValidateMode);if(Kt){let pe,Ae;const Be=nt.type?_7(Kt._f):$W(Ge),Ne=Ge.type===Ex.BLUR||Ge.type===Ex.FOCUS_OUT,Tt=!FAe(Kt._f)&&!t.resolver&&!fn(r.errors,ut)&&!Kt._f.deps||jAe(Ne,fn(r.touchedFields,ut),r.isSubmitted,me,Ke),bt=S7(ut,a,Ne);Ua(s,ut,Be),Ne?(!nt||!nt.readOnly)&&(Kt._f.onBlur&&Kt._f.onBlur(Ge),p&&p(0)):Kt._f.onChange&&Kt._f.onChange(Ge);const tt=G(ut,Be,Ne),gt=!uu(tt)||bt;if(!Ne&&C.state.next({name:ut,type:Ge.type,values:_s(s)}),Tt)return(g.isValid||_.isValid)&&(t.mode==="onBlur"?Ne&&O():Ne||O()),gt&&C.state.next({name:ut,...bt?{}:tt});if(!Ne&&bt&&C.state.next({...r}),t.resolver){const{errors:$t}=await X([ut]);if(Vt(Be),Nt){const kt=E7(r.errors,n,ut),cr=E7($t,n,kt.name||ut);pe=cr.error,ut=cr.name,Ae=uu($t)}}else P([ut],!0),pe=(await A7(Kt,a.disabled,s,S,t.shouldUseNativeValidation))[ut],P([ut]),Vt(Be),Nt&&(pe?Ae=!1:(g.isValid||_.isValid)&&(Ae=await J(n,!0)));Nt&&(Kt._f.deps&&Ce(Kt._f.deps),$(ut,Ae,pe,tt))}},ve=(Ge,nt)=>{if(fn(r.errors,nt)&&Ge.focus)return Ge.focus(),1},Ce=async(Ge,nt={})=>{let ut,Nt;const Kt=d0(Ge);if(t.resolver){const Vt=await ee(Fo(Ge)?Ge:Kt);ut=uu(Vt),Nt=Ge?!Kt.some(Ke=>fn(Vt,Ke)):ut}else Ge?(Nt=(await Promise.all(Kt.map(async Vt=>{const Ke=fn(n,Vt);return await J(Ke&&Ke._f?{[Vt]:Ke}:Ke)}))).every(Boolean),!(!Nt&&!r.isValid)&&O()):Nt=ut=await J(n);return C.state.next({...!Ff(Ge)||(g.isValid||_.isValid)&&ut!==r.isValid?{}:{name:Ge},...t.resolver||!Ge?{isValid:ut}:{},errors:r.errors}),nt.shouldFocus&&!Nt&&p0(n,ve,Ge?Kt:a.mount),Nt},$e=Ge=>{const nt={...u.mount?s:i};return Fo(Ge)?nt:Ff(Ge)?fn(nt,Ge):Ge.map(ut=>fn(nt,ut))},Je=(Ge,nt)=>({invalid:!!fn((nt||r).errors,Ge),isDirty:!!fn((nt||r).dirtyFields,Ge),error:fn((nt||r).errors,Ge),isValidating:!!fn(r.validatingFields,Ge),isTouched:!!fn((nt||r).touchedFields,Ge)}),ge=Ge=>{Ge&&d0(Ge).forEach(nt=>rs(r.errors,nt)),C.state.next({errors:Ge?r.errors:{}})},Ee=(Ge,nt,ut)=>{const Nt=(fn(n,Ge,{_f:{}})._f||{}).ref,Kt=fn(r.errors,Ge)||{},{ref:Vt,message:Ke,type:me,...pe}=Kt;Ua(r.errors,Ge,{...pe,...nt,ref:Nt}),C.state.next({name:Ge,errors:r.errors,isValid:!1}),ut&&ut.shouldFocus&&Nt&&Nt.focus&&Nt.focus()},Ie=(Ge,nt)=>Hc(Ge)?C.state.subscribe({next:ut=>"values"in ut&&Ge(H(void 0,nt),ut)}):H(Ge,nt,!0),Le=Ge=>C.state.subscribe({next:nt=>{BAe(Ge.name,nt.name,Ge.exact)&&NAe(nt,Ge.formState||g,sr,Ge.reRenderRoot)&&Ge.callback({values:{...s},...r,...nt,defaultValues:i})}}).unsubscribe,Ve=Ge=>(u.mount=!0,_={..._,...Ge.formState},Le({...Ge,formState:_})),ht=(Ge,nt={})=>{for(const ut of Ge?d0(Ge):a.mount)a.mount.delete(ut),a.array.delete(ut),nt.keepValue||(rs(n,ut),rs(s,ut)),!nt.keepError&&rs(r.errors,ut),!nt.keepDirty&&rs(r.dirtyFields,ut),!nt.keepTouched&&rs(r.touchedFields,ut),!nt.keepIsValidating&&rs(r.validatingFields,ut),!t.shouldUnregister&&!nt.keepDefaultValue&&rs(i,ut);C.state.next({values:_s(s)}),C.state.next({...r,...nt.keepDirty?{isDirty:Z()}:{}}),!nt.keepIsValid&&O()},It=({disabled:Ge,name:nt})=>{(ju(Ge)&&u.mount||Ge||a.disabled.has(nt))&&(Ge?a.disabled.add(nt):a.disabled.delete(nt))},xt=(Ge,nt={})=>{let ut=fn(n,Ge);const Nt=ju(nt.disabled)||ju(t.disabled);return Ua(n,Ge,{...ut||{},_f:{...ut&&ut._f?ut._f:{ref:{name:Ge}},name:Ge,mount:!0,...nt}}),a.mount.add(Ge),ut?It({disabled:ju(nt.disabled)?nt.disabled:t.disabled,name:Ge}):N(Ge,!0,nt.value),{...Nt?{disabled:nt.disabled||t.disabled}:{},...t.progressive?{required:!!nt.required,min:Dv(nt.min),max:Dv(nt.max),minLength:Dv(nt.minLength),maxLength:Dv(nt.maxLength),pattern:Dv(nt.pattern)}:{},name:Ge,onChange:Te,onBlur:Te,ref:Kt=>{if(Kt){xt(Ge,nt),ut=fn(n,Ge);const Vt=Fo(Kt.value)&&Kt.querySelectorAll&&Kt.querySelectorAll("input,select,textarea")[0]||Kt,Ke=OAe(Vt),me=ut._f.refs||[];if(Ke?me.find(pe=>pe===Vt):Vt===ut._f.ref)return;Ua(n,Ge,{_f:{...ut._f,...Ke?{refs:[...me.filter(mT),Vt,...Array.isArray(fn(i,Ge))?[{}]:[]],ref:{type:Vt.type,name:Ge}}:{ref:Vt}}}),N(Ge,!1,void 0,Vt)}else ut=fn(n,Ge,{}),ut._f&&(ut._f.mount=!1),(t.shouldUnregister||nt.shouldUnregister)&&!(qW(a.array,Ge)&&u.action)&&a.unMount.add(Ge)}}},rt=()=>t.shouldFocusError&&p0(n,ve,a.mount),zt=Ge=>{ju(Ge)&&(C.state.next({disabled:Ge}),p0(n,(nt,ut)=>{const Nt=fn(n,ut);Nt&&(nt.disabled=Nt._f.disabled||Ge,Array.isArray(Nt._f.refs)&&Nt._f.refs.forEach(Kt=>{Kt.disabled=Nt._f.disabled||Ge}))},0,!1))},Lt=(Ge,nt)=>async ut=>{let Nt;ut&&(ut.preventDefault&&ut.preventDefault(),ut.persist&&ut.persist());let Kt=_s(s);if(C.state.next({isSubmitting:!0}),t.resolver){const{errors:Vt,values:Ke}=await X();r.errors=Vt,Kt=_s(Ke)}else await J(n);if(a.disabled.size)for(const Vt of a.disabled)rs(Kt,Vt);if(rs(r.errors,"root"),uu(r.errors)){C.state.next({errors:{}});try{await Ge(Kt,ut)}catch(Vt){Nt=Vt}}else nt&&await nt({...r.errors},ut),rt(),setTimeout(rt);if(C.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:uu(r.errors)&&!Nt,submitCount:r.submitCount+1,errors:r.errors}),Nt)throw Nt},Ft=(Ge,nt={})=>{fn(n,Ge)&&(Fo(nt.defaultValue)?be(Ge,_s(fn(i,Ge))):(be(Ge,nt.defaultValue),Ua(i,Ge,_s(nt.defaultValue))),nt.keepTouched||rs(r.touchedFields,Ge),nt.keepDirty||(rs(r.dirtyFields,Ge),r.isDirty=nt.defaultValue?Z(Ge,_s(fn(i,Ge))):Z()),nt.keepError||(rs(r.errors,Ge),g.isValid&&O()),C.state.next({...r}))},dt=(Ge,nt={})=>{const ut=Ge?_s(Ge):i,Nt=_s(ut),Kt=uu(Ge),Vt=Kt?i:Nt;if(nt.keepDefaultValues||(i=ut),!nt.keepValues){if(nt.keepDirtyValues){const Ke=new Set([...a.mount,...Object.keys(Lv(i,s))]);for(const me of Array.from(Ke))fn(r.dirtyFields,me)?Ua(Vt,me,fn(s,me)):be(me,fn(Vt,me))}else{if(mR&&Fo(Ge))for(const Ke of a.mount){const me=fn(n,Ke);if(me&&me._f){const pe=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(Cx(pe)){const Ae=pe.closest("form");if(Ae){Ae.reset();break}}}}if(nt.keepFieldsRef)for(const Ke of a.mount)be(Ke,fn(Vt,Ke));else n={}}s=t.shouldUnregister?nt.keepDefaultValues?_s(i):{}:_s(Vt),C.array.next({values:{...Vt}}),C.state.next({values:{...Vt}})}a={mount:nt.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!nt.keepIsValid||!!nt.keepDirtyValues,u.watch=!!t.shouldUnregister,C.state.next({submitCount:nt.keepSubmitCount?r.submitCount:0,isDirty:Kt?!1:nt.keepDirty?r.isDirty:!!(nt.keepDefaultValues&&!Mh(Ge,i)),isSubmitted:nt.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Kt?{}:nt.keepDirtyValues?nt.keepDefaultValues&&s?Lv(i,s):r.dirtyFields:nt.keepDefaultValues&&Ge?Lv(i,Ge):nt.keepDirty?r.dirtyFields:{},touchedFields:nt.keepTouched?r.touchedFields:{},errors:nt.keepErrors?r.errors:{},isSubmitSuccessful:nt.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},ke=(Ge,nt)=>dt(Hc(Ge)?Ge(s):Ge,nt),fr=(Ge,nt={})=>{const ut=fn(n,Ge),Nt=ut&&ut._f;if(Nt){const Kt=Nt.refs?Nt.refs[0]:Nt.ref;Kt.focus&&(Kt.focus(),nt.shouldSelect&&Hc(Kt.select)&&Kt.select())}},sr=Ge=>{r={...r,...Ge}},tr={control:{register:xt,unregister:ht,getFieldState:Je,handleSubmit:Lt,setError:Ee,_subscribe:Le,_runSchema:X,_focusError:rt,_getWatch:H,_getDirty:Z,_setValid:O,_setFieldArray:k,_setDisabledField:It,_setErrors:B,_getFieldArray:oe,_reset:dt,_resetDefaultValues:()=>Hc(t.defaultValues)&&t.defaultValues().then(Ge=>{ke(Ge,t.resetOptions),C.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:zt,_subjects:C,_proxyFormState:g,get _fields(){return n},get _formValues(){return s},get _state(){return u},set _state(Ge){u=Ge},get _defaultValues(){return i},get _names(){return a},set _names(Ge){a=Ge},get _formState(){return r},get _options(){return t},set _options(Ge){t={...t,...Ge}}},subscribe:Ve,trigger:Ce,register:xt,handleSubmit:Lt,watch:Ie,setValue:be,getValues:$e,reset:ke,resetField:Ft,clearErrors:ge,unregister:ht,setError:Ee,setFocus:fr,getFieldState:Je};return{...tr,formControl:tr}}function VAe(e={}){const t=qe.useRef(void 0),r=qe.useRef(void 0),[n,i]=qe.useState({isDirty:!1,isValidating:!1,isLoading:Hc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Hc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Hc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...a}=UAe(e);t.current={...a,formState:n}}const s=t.current.control;return s._options=e,bR(()=>{const u=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,u},[s]),qe.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),qe.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),qe.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),qe.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),qe.useEffect(()=>{if(s._proxyFormState.isDirty){const u=s._getDirty();u!==n.isDirty&&s._subjects.state.next({isDirty:u})}},[s,n.isDirty]),qe.useEffect(()=>{e.values&&!Mh(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,i(u=>({...u}))):s._resetDefaultValues()},[s,e.values]),qe.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=UW(n,s),t.current}var YW=R.createContext(void 0),T7=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},GAe=function(e){var t=e.children,r=R.useRef({}),n=R.useRef({}),i=R.useMemo(function(){return{subscribe:function(s,u){return n.current[s]||(n.current[s]=[]),n.current[s].push(u),function(){n.current[s]=n.current[s].filter(function(a){return a!==u})}},getGroupFields:function(s){return r.current[s]||[]},registerGroup:function(s){r.current[s]=r.current[s]||[]},unregisterGroup:function(s){delete r[s]},registerField:function(s,u){u!=null&&((r.current[u]||[]).includes(s)||(r.current[u]=T7(T7([],r.current[u]||[],!0),[s],!1),n.current[u]&&n.current[u].forEach(function(a){return a()})))},unregisterField:function(s,u){if(u!=null)if(!r.current[u])console.warn("Invalid form group ".concat(u));else{var a=new Set(r.current[u]);a.delete(s),r.current[u]=Array.from(a),n.current[u]&&n.current[u].forEach(function(p){return p()})}}}},[]);return R.createElement(YW.Provider,{value:i},t)},HAe=function(e,t,r){var n=Oi(),i=gw(r?{control:r}:void 0),s=i.isSubmitSuccessful,u=i.dirtyFields,a=Object.keys(u).length>0,p=R.useState(!1),d=p[0],g=p[1],_=!e||!a||s,C=qSe(function(S){var I=S.currentLocation,O=S.nextLocation;if(_)return!1;var P=t||I.pathname,k=O.pathname.startsWith(P),F=O.pathname.startsWith("".concat(P,"/show")),B=k&&!F;return!B});R.useEffect(function(){if(C.state==="blocked"){if(_){C.proceed();return}g(!0)}},[C.state]),R.useEffect(function(){if(d){var S=window.confirm(n("ra.message.unsaved_changes"));S?C.proceed&&C.proceed():C.reset&&C.reset()}g(!1)},[d,n]),R.useEffect(function(){var S=function(I){I.preventDefault(),I.returnValue=!0};if(!_)return window.addEventListener("beforeunload",S),function(){window.removeEventListener("beforeunload",S)}},[_])},WAe=function(e){var t=e.enable,r=t===void 0?!0:t,n=e.formRootPathName,i=e.formControl;return HAe(r,n,i),null};function ZAe(e,t){var r=SW({},XAe(e,t),t);return r}function XAe(e,t){return typeof e=="object"?e:typeof e=="function"?e(t):{}}var hd=function(){return hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hd.apply(this,arguments)},KAe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},YAe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},JAe=function(e){return function(t){return KAe(void 0,void 0,void 0,function(){var r,n;return YAe(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return r=i.sent(),!r||Px(r)?[2,{values:t,errors:{}}]:(n=H3(r),!n||Px(n)?[2,{values:t,errors:{}}]:[2,{values:{},errors:n}])}})})}},H3=function(e){return Object.keys(e).reduce(function(t,r){var n,i,s;if(Array.isArray(e[r])){var u=!1,a=e[r].map(function(p){return Px(p)||(u=!0),H3(p)});return u?hd(hd({},t),(n={},n[r]=a,n)):t}return Px(e[r])?t:typeof e[r]=="object"&&!JW(e[r])?hd(hd({},t),(i={},i[r]=H3(e[r]),i)):hd(hd({},t),(s={},s[r]=QAe(e[r]),s))},{})},QAe=function(e){return{type:"manual",message:JW(e)?e:{message:e}}},JW=function(e){return Object.keys(e).includes("message")&&Object.keys(e).includes("args")},Px=function(e){return e==null||Object.getOwnPropertyNames(e).length===0},QW=function(e,t){var r=function(n,i){Object.entries(n).forEach(function(s){var u=s[0],a=s[1];if(typeof a=="object"){r(a,"".concat(i).concat(u,"."));return}t("".concat(i).concat(u),{type:"server",message:a.toString()})})};r(e,"")},eTe=function(e,t){t===void 0&&(t=!0);var r=gw(e?{control:e}:void 0),n=r.submitCount,i=r.errors,s=R.useRef(n),u=Yf();R.useEffect(function(){var a,p;if(n>s.current&&t&&(s.current=n,Object.keys(i).length>0)){var d=typeof((p=(a=i.root)===null||a===void 0?void 0:a.serverError)===null||p===void 0?void 0:p.message)=="string"?i.root.serverError.message:void 0;u(d||"ra.message.invalid_form",{type:"error"})}},[i,n,u,t])},tTe=function(e,t){t===void 0&&(t={});var r={};return Object.keys(e).forEach(function(n){e[n]==null||e[n]===""?t.hasOwnProperty(n)&&(r[n]=null):r[n]=e[n]}),r},eZ=function(e){e===void 0&&(e={});var t=e.searchSource,r=e.stateSource,n=Cl(),i=R.useState(function(){return P7(n,{stateSource:r,searchSource:t})}),s=i[0],u=i[1],a=R.useRef(s);return R.useEffect(function(){var p=P7(n,{stateSource:r,searchSource:t});aR(p,a.current)||(a.current=p,u(p))},[n,r,t]),s},P7=function(e,t){var r=e.state,n=e.search,i=t===void 0?{}:t,s=i.searchSource,u=s===void 0?"source":s,a=i.stateSource,p=a===void 0?"record":a;if(r&&r[p])return r[p];if(n)try{var d=VCe.parse(n),g=d[u];if(g)return Array.isArray(g)?(console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`)),null):JSON.parse(g)}catch{console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`))}return null},W3=function(){return W3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W3.apply(this,arguments)},rTe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},nTe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},aTe=function(e){var t=e.criteriaMode,r=t===void 0?"firstError":t,n=e.defaultValues;e.formRootPathname;var i=e.resolver,s=e.reValidateMode,u=s===void 0?"onChange":s,a=e.onSubmit,p=e.sanitizeEmptyValues,d=e.validate,g=e.disableInvalidFormNotification,_=iTe(e,["criteriaMode","defaultValues","formRootPathname","resolver","reValidateMode","onSubmit","sanitizeEmptyValues","validate","disableInvalidFormNotification"]),C=dR(),S=Al(e),I=R.useMemo(function(){return ZAe(n,S)},[JSON.stringify({defaultValues:typeof n=="function"?"function":n,record:S})]),O=i||(d?JAe(d):void 0),P=VAe(W3({criteriaMode:r,values:I,reValidateMode:u,resolver:O},_)),k=R.useRef(P);eTe(P.control,!g);var F=eZ(),B=R.useRef(!1),N=P.reset;R.useEffect(function(){F&&!B.current&&(N(SW({},I,F),{keepDefaultValues:!0}),B.current=!0)},[I,F,N]);var G=R.useCallback(function(X,ee){return rTe(void 0,void 0,void 0,function(){var J,le;return nTe(this,function(Z){switch(Z.label){case 0:return le=p?tTe(X,S):X,a?[4,a(le,ee)]:[3,2];case 1:J=Z.sent(),Z.label=2;case 2:return a==null&&C?.save?[4,C.save(le,ee)]:[3,4];case 3:J=Z.sent(),Z.label=4;case 4:return J!=null&&QW(J,k.current.setError),[2]}})})},[a,C,p,S]),$=R.useCallback(function(X){X.defaultPrevented||(X.stopPropagation(),P.handleSubmit(G)(X))},[P,G]);return{form:P,handleSubmit:G,formHandleSubmit:$}},Z3=function(){return Z3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Z3.apply(this,arguments)};function tZ(e){var t=e.children,r=e.id,n=e.className,i=e.noValidate,s=i===void 0?!1:i,u=e.formRootPathname,a=e.warnWhenUnsavedChanges,p=e.WarnWhenUnsavedChangesComponent,d=p===void 0?WAe:p,g=Al(e),_=_u(e),C=aTe(e),S=C.form,I=C.formHandleSubmit,O=R.useMemo(function(){return{getSource:function(F){return F},getLabel:function(F){return"resources.".concat(_,".fields.").concat(F)}}},[_]),P=R.useContext(Fd),k=R.useContext(_y);return R.createElement(BW,{value:g},R.createElement(hPe,{value:O},R.createElement(TAe,Z3({},S),R.createElement(GAe,null,R.createElement("form",{onSubmit:I,noValidate:s,id:r,className:n},t),a&&P&&k&&R.createElement(d,{enable:!0,formRootPathName:u,formControl:S.control})))))}var oTe=R.createContext(null),sTe=function(){var e=R.useContext(YW);return e},lTe=function(){var e=R.useContext(oTe);return e},uTe=function(e){var t=e.inputProps,r=e.isArrayInput,n=e.fieldArrayInputControl,i=t.defaultValue,s=t.source,u=t.disabled,a=gZ(s),p=Al(t),d=Rb(),g=d.getValues,_=d.resetField,C=d.formState,S=d.reset,I=Zc(p,a),O=Zc(g(),a),P=C.dirtyFields,k=Object.keys(P).includes(a);R.useEffect(function(){if(!(i==null||O!=null||u||I!==void 0||k)){var F=a.split(".").some(function(G){return cTe.test(G)});if(F){var B=a.split(".").slice(0,-1).join("."),N=Zc(g(),B);if(N==null)return}if(r){if(!n)throw new Error("useApplyInputDefaultValues: No fieldArrayInputControl passed in props for array input usage");n.replace(i),S({},{keepValues:!0});return}_(a,{defaultValue:i})}})},cTe=/^\d+$/,fTe=UV();const rZ=rl(fTe);var hTe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,jd=function(e){return typeof e>"u"||e===null||e===""||Array.isArray(e)&&e.length===0};function dTe(e){return e?e.hasOwnProperty("message"):!1}var zd=function(e,t,r,n){return typeof e=="function"?e({args:t,value:r,values:n}):t?{message:e,args:t}:e},$d=function(e){return rZ(e,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return JSON.stringify(t)})},pTe=function(e){return typeof e=="function"},mTe=function(e,t){return function(r,n,i){var s=e(r,n,i);return s?typeof s=="string"||dTe(s)?s:s.then(function(u){return u||t(r,n,i)}):t(r,n,i)}},gTe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(Array.isArray(e[0])?e[0]:e).filter(pTe);return r.reduce(mTe,function(){return null})},I7=$d(function(e){return e===void 0&&(e="ra.validation.required"),Object.assign(function(t,r){return jd(t)?zd(e,void 0,t,r):void 0},{isRequired:!0})});$d(function(e,t){return t===void 0&&(t="ra.validation.minLength"),function(r,n){return!jd(r)&&r.length<e?zd(t,{min:e},r,n):void 0}});$d(function(e,t){return t===void 0&&(t="ra.validation.maxLength"),function(r,n){return!jd(r)&&r.length>e?zd(t,{max:e},r,n):void 0}});$d(function(e,t){return t===void 0&&(t="ra.validation.minValue"),function(r,n){return!jd(r)&&r<e?zd(t,{min:e},r,n):void 0}});$d(function(e,t){return t===void 0&&(t="ra.validation.maxValue"),function(r,n){return!jd(r)&&r>e?zd(t,{max:e},r,n):void 0}});$d(function(e){return e===void 0&&(e="ra.validation.number"),function(t,r){return!jd(t)&&isNaN(Number(t))?zd(e,void 0,t,r):void 0}});var yTe=rZ(function(e,t){return t===void 0&&(t="ra.validation.regex"),function(r,n){return!jd(r)&&typeof r=="string"&&!e.test(r)?zd(t,{pattern:e},r,n):void 0}},function(e,t){return e.toString()+t});$d(function(e){return e===void 0&&(e="ra.validation.email"),yTe(hTe,e)});var vTe=function(e){var t=e.args;return{message:"ra.validation.oneOf",args:t}};$d(function(e,t){return t===void 0&&(t=vTe),function(r,n){return!jd(r)&&e.indexOf(r)===-1?zd(t,{list:e},r,n):void 0}});var bTe=function(e){return e&&e.isRequired?!0:Array.isArray(e)?!!e.find(function(t){return t.isRequired}):!1},X3=function(){return X3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},X3.apply(this,arguments)},M7="@@react-admin@@",_Te=function(e){var t=e.error,r=t,n=Oi();if(typeof t=="string"&&t.startsWith(M7)&&(r=JSON.parse(t.substring(M7.length))),r.message){var i=r,s=i.message,u=i.args;return R.createElement(R.Fragment,null,n(s,X3({_:s},u)))}return R.createElement(R.Fragment,null,n(r,{_:r}))},Ep=function(){return Ep=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ep.apply(this,arguments)},xTe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,[])).next())})},wTe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},STe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ETe=function(e){return e??""},CTe=function(e){return e===""?null:e},nZ=function(e){var t=e.defaultValue,r=e.format,n=r===void 0?ETe:r,i=e.id,s=e.isRequired,u=e.name,a=e.onBlur,p=e.onChange,d=e.parse,g=d===void 0?CTe:d,_=e.source,C=e.validate,S=STe(e,["defaultValue","format","id","isRequired","name","onBlur","onChange","parse","source","validate"]),I=gZ(_),O=u||I,P=lTe(),k=sTe(),F=Al(),B=Mo(g),N=R.useId();R.useEffect(function(){if(!(!k||P==null))return k.registerField(I,P),function(){k.unregisterField(I,P)}},[k,P,I]);var G=Array.isArray(C)?gTe(C):C,$=IAe(Ep({name:O,defaultValue:Zc(F,I,t),rules:{validate:function(oe,ue){return xTe(void 0,void 0,void 0,function(){var ce;return wTe(this,function(be){switch(be.label){case 0:return G?[4,G(oe,ue,Ep(Ep({},e),{finalSource:I}))]:[2,!0];case 1:return ce=be.sent(),ce?[2,"@@react-admin@@".concat(JSON.stringify(ce))]:[2,!0]}})})}}},S)),X=$.field,ee=$.fieldState,J=$.formState;uTe({inputProps:e});var le=Mo(function(){for(var oe=[],ue=0;ue<arguments.length;ue++)oe[ue]=arguments[ue];X.onBlur(),a&&a.apply(void 0,oe)}),Z=Mo(function(){for(var oe,ue,ce,be,Te,ve=[],Ce=0;Ce<arguments.length;Ce++)ve[Ce]=arguments[Ce];var $e=e.type==="checkbox"&&((ue=(oe=ve[0])===null||oe===void 0?void 0:oe.target)===null||ue===void 0?void 0:ue.value)==="on"?ve[0].target.checked:(Te=(be=(ce=ve[0])===null||ce===void 0?void 0:ce.target)===null||be===void 0?void 0:be.value)!==null&&Te!==void 0?Te:ve[0];X.onChange(B?B($e):$e),p&&p.apply(void 0,ve)}),H=Ep(Ep({},X),{value:n?n(X.value):X.value,onBlur:le,onChange:Z});return{id:i||N,field:H,fieldState:ee,formState:J,isRequired:s||bTe(C)}},ATe=function(e){var t=e.children,r=e.value;return r?R.createElement(TW.Provider,{value:r},t):t},TTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},PTe=function(e){e.afterSubmit,e.allowNull,e.alwaysOn,e.beforeSubmit,e.component,e.data,e.defaultValue,e.error,e.format,e.formatOnBlur,e.initializeForm,e.input,e.isEqual,e.isRequired,e.label,e.limitChoicesToValue,e.locale,e.meta,e.multiple,e.name,e.options,e.optionText,e.optionValue,e.parse,e.record,e.ref,e.refetch,e.render,e.resource,e.setFilter,e.setPagination,e.setSort,e.shouldUnregister,e.source,e.submitError,e.subscription,e.textAlign,e.translate,e.translateChoice,e.validate,e.validateFields,e.value;var t=TTe(e,["afterSubmit","allowNull","alwaysOn","beforeSubmit","component","data","defaultValue","error","format","formatOnBlur","initializeForm","input","isEqual","isRequired","label","limitChoicesToValue","locale","meta","multiple","name","options","optionText","optionValue","parse","record","ref","refetch","render","resource","setFilter","setPagination","setSort","shouldUnregister","source","submitError","subscription","textAlign","translate","translateChoice","validate","validateFields","value"]);return t},K3=function(){return K3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},K3.apply(this,arguments)},ITe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},MTe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.queryOptions,s=i===void 0?{}:i,u=_u(e);if(!u)throw new Error("useShowController requires a non-empty resource prop or context");var a=Db({enabled:!r}).isPending,p=EZ({action:"show",resource:u,enabled:!r&&!a}).isPending,d=Sy(u),g=Oi(),_=Yf(),C=Mb(),S=eW().id;if(!S&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var I=n??S,O=s.meta,P=ITe(s,["meta"]),k=DW(u,{id:I,meta:O},K3({enabled:!a&&!p||r,onError:function(){_("ra.notification.item_doesnt_exist",{type:"error"}),C("list",u)},retry:!1},P)),F=k.data,B=k.error,N=k.isLoading,G=k.isFetching,$=k.isPaused,X=k.isPending,ee=k.isPlaceholderData,J=k.refetch;if(F&&F.id&&F.id!=I)throw new Error("useShowController: Fetched record's id attribute (".concat(F.id,") must match the requested 'id' (").concat(I,")"));var le=wy(),Z=d(F),H=g("resources.".concat(u,".page.show"),{id:I,record:F,recordRepresentation:typeof Z=="string"?Z:"",_:g("ra.page.show",{name:le(u,1),id:I,record:F,recordRepresentation:typeof Z=="string"?Z:""})});return{defaultTitle:H,error:B,isLoading:N,isFetching:G,isPaused:$,isPending:X,isPlaceholderData:ee,record:F,refetch:J,resource:u}},wR=R.createContext(null);wR.displayName="ShowContext";var OTe=function(e){var t=e.children,r=e.value;return R.createElement(wR.Provider,{value:r},R.createElement(uR,{value:r&&r.record},t))},RTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},LTe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,s=RTe(e,["children","loading","offline","render"]),u=MTe(s),a=SZ({resource:u.resource,action:"show"});if(!i&&!t)throw new Error("<ShowBase> requires either a `render` prop or `children` prop");var p=u.isPaused,d=u.isPending,g=a&&!s.disableAuthentication&&r!==!1&&r!==void 0,_=p&&d&&n!==!1&&n!==void 0;return R.createElement(mZ,{value:s.resource},R.createElement(OTe,{value:u},g?r:_?n:i?i(u):t))},DTe=function(){var e=R.useContext(wR);if(!e)throw new Error("useShowContext must be used inside a ShowContextProvider");return e},iZ=R.createContext(function(){}),aZ=R.createContext(function(){}),O7=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},kTe=function(e){var t=e.children,r=R.useState([]),n=r[0],i=r[1],s=R.useCallback(function(a){i(function(p){return O7(O7([],p,!0),[a],!1)})},[]),u=R.useCallback(function(){if(n.length!==0){var a=n[0],p=n.slice(1);return i(p),a}},[n]);return R.createElement(aZ.Provider,{value:u},R.createElement(iZ.Provider,{value:s},t))},oZ=function(){return R.useContext(iZ)},FTe=function(){return R.useContext(aZ)},Ta=function(){return Ta=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ta.apply(this,arguments)},R7=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},L7=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},D7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Y_=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},NTe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=hR(),i=Xf(),s=oZ(),u=t.id,a=t.data,p=t.meta,d=r.mutationMode,g=d===void 0?"pessimistic":d,_=r.getMutateWithMiddlewares,C=D7(r,["mutationMode","getMutateWithMiddlewares"]),S=R.useRef(g);R.useEffect(function(){S.current=g},[g]);var I=R.useRef(t);R.useEffect(function(){I.current=t},[t]);var O=R.useRef([]),P=R.useRef(n.update),k=R.useRef(),F=R.useRef(),B=R.useRef(!1),N=function(ee){var J=ee.resource,le=ee.id,Z=ee.data,H=ee.meta,oe=Date.now(),ue=S.current==="undoable"?oe+5*1e3:oe,ce=JSON.parse(JSON.stringify(Z)),be=function(Te){if(!Te)return Te;var ve=Te.findIndex(function(Ce){return Ce.id==le});return ve===-1?Te:Y_(Y_(Y_([],Te.slice(0,ve),!0),[Ta(Ta({},Te[ve]),ce)],!1),Te.slice(ve+1),!0)};i.setQueryData([J,"getOne",{id:String(le),meta:H}],function(Te){return Ta(Ta({},Te),ce)},{updatedAt:ue}),i.setQueriesData({queryKey:[J,"getList"]},function(Te){return Te&&Te.data?Ta(Ta({},Te),{data:be(Te.data)}):Te},{updatedAt:ue}),i.setQueriesData({queryKey:[J,"getInfiniteList"]},function(Te){return Te&&Te.pages?Ta(Ta({},Te),{pages:Te.pages.map(function(ve){return Ta(Ta({},ve),{data:be(ve.data)})})}):Te},{updatedAt:ue}),i.setQueriesData({queryKey:[J,"getMany"]},function(Te){return Te&&Te.length>0?be(Te):Te},{updatedAt:ue}),i.setQueriesData({queryKey:[J,"getManyReference"]},function(Te){return Te&&Te.data?{data:be(Te.data),total:Te.total}:Te},{updatedAt:ue})},G=DH(Ta(Ta({mutationKey:[e,"update",t],mutationFn:function(ee){var J=ee===void 0?{}:ee,le=J.resource,Z=le===void 0?e:le,H=J.id,oe=H===void 0?I.current.id:H,ue=J.data,ce=ue===void 0?I.current.data:ue,be=J.meta,Te=be===void 0?I.current.meta:be,ve=J.previousData,Ce=ve===void 0?I.current.previousData:ve;if(!Z)throw new Error("useUpdate mutation requires a non-empty resource");if(oe==null)throw new Error("useUpdate mutation requires a non-empty id");if(!ce)throw new Error("useUpdate mutation requires a non-empty data object");return P.current(Z,{id:oe,data:ce,previousData:Ce,meta:Te}).then(function($e){var Je=$e.data;return Je})}},C),{onMutate:function(ee){return R7(void 0,void 0,void 0,function(){var J;return L7(this,function(le){switch(le.label){case 0:return C.onMutate?[4,C.onMutate(ee)]:[3,2];case 1:return J=le.sent()||{},[2,Ta({snapshot:O.current},J)];case 2:return[2,{snapshot:O.current}]}})})},onError:function(ee,J,le){if(J===void 0&&(J={}),(S.current==="optimistic"||S.current==="undoable")&&le.snapshot.forEach(function(Z){var H=Z[0],oe=Z[1];i.setQueryData(H,oe)}),k.current)return k.current(ee,J,le);if(C.onError)return C.onError(ee,J,le)},onSuccess:function(ee,J,le){if(J===void 0&&(J={}),S.current==="pessimistic"){var Z=J.resource,H=Z===void 0?e:Z,oe=J.id,ue=oe===void 0?u:oe,ce=J.meta,be=ce===void 0?p:ce;N({resource:H,id:ue,data:ee,meta:be}),C.onSuccess&&!B.current&&C.onSuccess(ee,J,le)}},onSettled:function(ee,J,le,Z){if(le===void 0&&(le={}),(S.current==="optimistic"||S.current==="undoable")&&Z.snapshot.forEach(function(H){var oe=H[0];i.invalidateQueries({queryKey:oe})}),F.current)return F.current(ee,J,le,Z);if(C.onSettled)return C.onSettled(ee,J,le,Z)}})),$=function(){for(var ee=[],J=0;J<arguments.length;J++)ee[J]=arguments[J];return R7(void 0,Y_([],ee,!0),void 0,function(le,Z,H){var oe,ue,ce,be,Te,ve,Ce,$e,Je,ge,Ee,Ie,Le,Ve,ht;return le===void 0&&(le=e),Z===void 0&&(Z={}),H===void 0&&(H={}),L7(this,function(It){switch(It.label){case 0:return oe=H.mutationMode,ue=H.returnPromise,ce=ue===void 0?C.returnPromise:ue,be=H.onError,Te=H.onSettled,ve=H.onSuccess,Ce=D7(H,["mutationMode","returnPromise","onError","onSettled","onSuccess"]),_?P.current=_(n.update.bind(n)):P.current=n.update,B.current=!!ve,k.current=be,F.current=Te,I.current=t,oe&&(S.current=oe),ce&&S.current!=="pessimistic"&&console.warn("The returnPromise parameter can only be used if the mutationMode is set to pessimistic"),S.current==="pessimistic"?ce?[2,G.mutateAsync(Ta({resource:le},Z),Ta({onSuccess:ve},Ce))]:[2,G.mutate(Ta({resource:le},Z),Ta({onSuccess:ve},Ce))]:($e=Z.id,Je=$e===void 0?u:$e,ge=Z.data,Ee=ge===void 0?a:ge,Ie=Z.meta,Le=Ie===void 0?p:Ie,Ve=i.getQueryData([le,"getOne",{id:String(Je),meta:Le}]),ht=[[le,"getOne",{id:String(Je),meta:Le}],[le,"getList"],[le,"getInfiniteList"],[le,"getMany"],[le,"getManyReference"]],O.current=ht.reduce(function(xt,rt){return xt.concat(i.getQueriesData({queryKey:rt}))},[]),[4,Promise.all(O.current.map(function(xt){var rt=xt[0];return i.cancelQueries({queryKey:rt})}))]);case 1:return It.sent(),N({resource:le,id:Je,data:Ee,meta:Le}),setTimeout(function(){ve?ve(Ta(Ta({},Ve),Ee),Ta({resource:le},Z),{snapshot:O.current}):C.onSuccess&&!B.current&&C.onSuccess(Ta(Ta({},Ve),Ee),Ta({resource:le},Z),{snapshot:O.current})},0),S.current==="optimistic"?[2,G.mutate(Ta({resource:le},Z))]:(s(function(xt){var rt=xt.isUndo;rt?O.current.forEach(function(zt){var Lt=zt[0],Ft=zt[1];i.setQueryData(Lt,Ft)}):G.mutate(Ta({resource:le},Z))}),[2])}})})},X=R.useMemo(function(){return Ta({isLoading:G.isPending},G)},[G]);return[Mo($),X]},Ul=function(){return Ul=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ul.apply(this,arguments)},k7=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},F7=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},N7=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gT=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},BTe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=hR(),i=Xf(),s=oZ(),u=t.id,a=t.previousData,p=r.mutationMode,d=p===void 0?"pessimistic":p,g=N7(r,["mutationMode"]),_=R.useRef(d);R.useEffect(function(){_.current=d},[d]);var C=R.useRef(t);R.useEffect(function(){C.current=t},[t]);var S=R.useRef([]),I=R.useRef(!1),O=R.useRef(!1),P=R.useRef(!1),k=function(G){var $=G.resource,X=G.id,ee=Date.now(),J=_.current==="undoable"?ee+5*1e3:ee,le=function(Z){if(!Z)return Z;var H=Z.findIndex(function(oe){return oe.id==X});return H===-1?Z:gT(gT([],Z.slice(0,H),!0),Z.slice(H+1),!0)};i.setQueriesData({queryKey:[$,"getList"]},function(Z){if(!Z||!Z.data)return Z;var H=le(Z.data),oe=H.length<Z.data.length;return oe?{data:H,total:Z.total?Z.total-1:void 0,pageInfo:Z.pageInfo}:Z},{updatedAt:J}),i.setQueriesData({queryKey:[$,"getInfiniteList"]},function(Z){return!Z||!Z.pages?Z:Ul(Ul({},Z),{pages:Z.pages.map(function(H){var oe=le(H.data),ue=oe.length<H.data.length;return ue?Ul(Ul({},H),{data:oe,total:H.total?H.total-1:void 0,pageInfo:H.pageInfo}):H})})},{updatedAt:J}),i.setQueriesData({queryKey:[$,"getMany"]},function(Z){return Z&&Z.length>0?le(Z):Z},{updatedAt:J}),i.setQueriesData({queryKey:[$,"getManyReference"]},function(Z){if(!Z||!Z.data)return Z;var H=le(Z.data),oe=H.length<Z.data.length;return oe?{data:H,total:Z.total-1}:Z},{updatedAt:J})},F=DH(Ul(Ul({mutationKey:[e,"delete",t],mutationFn:function(G){var $=G===void 0?{}:G,X=$.resource,ee=X===void 0?e:X,J=$.id,le=J===void 0?C.current.id:J,Z=$.previousData,H=Z===void 0?C.current.previousData:Z,oe=$.meta,ue=oe===void 0?C.current.meta:oe;if(!ee)throw new Error("useDelete mutation requires a non-empty resource");if(le==null)throw new Error("useDelete mutation requires a non-empty id");return n.delete(ee,{id:le,previousData:H,meta:ue}).then(function(ce){var be=ce.data;return be})}},g),{onMutate:function(G){return k7(void 0,void 0,void 0,function(){var $;return F7(this,function(X){switch(X.label){case 0:return g.onMutate?[4,g.onMutate(G)]:[3,2];case 1:return $=X.sent()||{},[2,Ul({snapshot:S.current},$)];case 2:return[2,{snapshot:S.current}]}})})},onError:function(G,$,X){if($===void 0&&($={}),(_.current==="optimistic"||_.current==="undoable")&&X.snapshot.forEach(function(ee){var J=ee[0],le=ee[1];i.setQueryData(J,le)}),g.onError&&!I.current)return g.onError(G,$,X)},onSuccess:function(G,$,X){if($===void 0&&($={}),_.current==="pessimistic"){var ee=$.resource,J=ee===void 0?e:ee,le=$.id,Z=le===void 0?u:le;k({resource:J,id:Z}),g.onSuccess&&!O.current&&g.onSuccess(G,$,X)}},onSettled:function(G,$,X,ee){if(X===void 0&&(X={}),ee.snapshot.forEach(function(J){var le=J[0];i.invalidateQueries({queryKey:le})}),g.onSettled&&!P.current)return g.onSettled(G,$,X,ee)}})),B=function(){for(var G=[],$=0;$<arguments.length;$++)G[$]=arguments[$];return k7(void 0,gT([],G,!0),void 0,function(X,ee,J){var le,Z,H,oe,ue,ce,be;return X===void 0&&(X=e),ee===void 0&&(ee={}),J===void 0&&(J={}),F7(this,function(Te){switch(Te.label){case 0:return le=J.mutationMode,Z=N7(J,["mutationMode"]),I.current=!!J.onError,O.current=!!J.onSuccess,P.current=!!J.onSettled,C.current=t,le&&(_.current=le),H=ee.id,oe=H===void 0?u:H,ue=ee.previousData,ce=ue===void 0?a:ue,be=[[X,"getList"],[X,"getInfiniteList"],[X,"getMany"],[X,"getManyReference"]],S.current=be.reduce(function(ve,Ce){return ve.concat(i.getQueriesData({queryKey:Ce}))},[]),_.current==="pessimistic"?[2,F.mutate(Ul({resource:X},ee),Z)]:[4,Promise.all(S.current.map(function(ve){var Ce=ve[0];return i.cancelQueries({queryKey:Ce})}))];case 1:return Te.sent(),k({resource:X,id:oe}),setTimeout(function(){J.onSuccess?J.onSuccess(ce,Ul({resource:X},ee),{snapshot:S.current}):g.onSuccess&&g.onSuccess(ce,Ul({resource:X},ee),{snapshot:S.current})},0),_.current==="optimistic"?[2,F.mutate(Ul({resource:X},ee),{onSettled:J.onSettled,onError:J.onError})]:(s(function(ve){var Ce=ve.isUndo;Ce?S.current.forEach(function($e){var Je=$e[0],ge=$e[1];i.setQueryData(Je,ge)}):F.mutate(Ul({resource:X},ee),{onSettled:J.onSettled,onError:J.onError})}),[2])}})})},N=R.useMemo(function(){return Ul({isLoading:F.isPending},F)},[F]);return[Mo(B),N]},sZ=R.createContext(void 0),jTe=function(e){var t=e.children,r=R.useState(!1),n=r[0],i=r[1],s=R.useState(null),u=s[0],a=s[1],p=R.useState(null),d=p[0],g=p[1],_=R.useState(null),C=_[0],S=_[1],I=R.useState(null),O=I[0],P=I[1],k=R.useState(),F=k[0],B=k[1],N=R.useCallback(function(){return i(!0)},[]),G=R.useCallback(function(){i(!1),a(null)},[]),$=R.useCallback(function(ee,J){P(ee),B(J)},[]),X=R.useMemo(function(){return{editor:u,setEditor:a,preferenceKey:d,setPreferenceKey:g,title:O,titleOptions:F,setTitle:$,isEnabled:n,disable:G,enable:N,path:C,setPath:S}},[G,N,u,d,n,C,S,O,F,$]);return R.createElement(sZ.Provider,{value:X},t)},zTe=hW(),$Te=function(e){var t=e.authProvider,r=e.basename,n=e.dataProvider,i=n===void 0?cR:n,s=e.i18nProvider,u=e.store,a=u===void 0?zTe:u,p=e.children,d=e.queryClient;if(!i)throw new Error(`Missing dataProvider prop.
React-admin requires a valid dataProvider function to work.`);var g=R.useMemo(function(){return d||new o5e},[d]),_=R.useMemo(function(){return t instanceof Function?qPe(t):t},[t]),C=R.useMemo(function(){return i instanceof Function?BCe(i):i},[i]);return R.createElement(HO.Provider,{value:_},R.createElement(fR.Provider,{value:C},R.createElement(ZEe,{value:a},R.createElement(jTe,null,R.createElement(f5e,{client:g},R.createElement(bCe,{basename:r},R.createElement(nCe,{value:s},R.createElement(eCe,null,R.createElement(kTe,null,R.createElement(ECe,null,p))))))))))};const qTe=R.createContext(null),yT={didCatch:!1,error:null};class lZ extends R.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=yT}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:s,reason:"imperative-api"}),this.setState(yT)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&UTe(t.resetKeys,i)){var s,u;(s=(u=this.props).onReset)===null||s===void 0||s.call(u,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(yT)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:s,error:u}=this.state;let a=t;if(s){const p={error:u,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")a=r(p);else if(n)a=R.createElement(n,p);else if(i!==void 0)a=i;else throw u}return R.createElement(qTe.Provider,{value:{didCatch:s,error:u,resetErrorBoundary:this.resetErrorBoundary}},a)}}function UTe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Cp=function(){return Cp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Cp.apply(this,arguments)},VTe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},GTe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},HTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},WTe={},uZ=function(e,t){e===void 0&&(e=WTe),t===void 0&&(t={staleTime:300*1e3});var r=Ec(),n=LW(),i=t??{},s=i.onSuccess,u=i.onError,a=i.onSettled,p=HTe(i,["onSuccess","onError","onSettled"]),d=cm(Cp({queryKey:["auth","getPermissions",e],queryFn:function(I){return VTe(void 0,[I],void 0,function(O){var P,k=O.signal;return GTe(this,function(F){switch(F.label){case 0:return!r||!r.getPermissions?[2,[]]:[4,r.getPermissions(Cp(Cp({},e),{signal:k}))];case 1:return P=F.sent(),[2,P??null]}})})}},p)),g=Mo(s??B7),_=Mo(a??B7),C=Mo(u??(function(I){n(I)}));R.useEffect(function(){d.data===void 0||d.isFetching||g(d.data)},[g,d.data,d.isFetching]),R.useEffect(function(){d.error==null||d.isFetching||C(d.error)},[C,d.error,d.isFetching]),R.useEffect(function(){d.status==="pending"||d.isFetching||_(d.data,d.error)},[_,d.data,d.error,d.status,d.isFetching]);var S=R.useMemo(function(){return Cp(Cp({},d),{permissions:d.data})},[d]);return!r||!r.getPermissions?cZ:S},B7=function(){},cZ={permissions:void 0,data:void 0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(cZ)}},Y3=function(){return Y3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Y3.apply(this,arguments)},j7=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},z7=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ZTe=function(e){var t=uZ(),r=t.permissions,n=t.isPending,i=XTe(e,r,n),s=i[0],u=i[1];return YTe(s.resources,r),{customRoutesWithLayout:s.customRoutesWithLayout,customRoutesWithoutLayout:s.customRoutesWithoutLayout,status:u,resources:s.resources}},XTe=function(e,t,r){var n=Ey(),i=KTe(e0(e)),s=i[0],u=i[1],a=i[2],p=R.useState(function(){return JTe(Y3({children:e},s))}),d=p[0],g=p[1];if(!d)throw new Error("Status should be defined");return R.useEffect(function(){var _=function(S){return j7(void 0,void 0,void 0,function(){var I;return z7(this,function(O){try{I=S(t),I?.then?I.then(function(P){a(e0(P)),g("ready")}):(a(e0(I)),g("ready"))}catch(P){console.error(P),n()}return[2]})})},C=function(){return j7(void 0,void 0,void 0,function(){var S,I;return z7(this,function(O){return S=fZ(e),I=e0(e),u(I),g(S?"loading":I.resources.length>0||I.customRoutesWithLayout.length>0||I.customRoutesWithoutLayout.length>0?"ready":"empty"),S&&_(S),[2]})})};r||C()},[e,n,r,a,t,u,g]),[s,d]},KTe=function(e){var t=R.useState(e),r=t[0],n=t[1],i=R.useCallback(function(s){n(function(u){return{customRoutesWithLayout:u.customRoutesWithLayout.concat(s.customRoutesWithLayout),customRoutesWithoutLayout:u.customRoutesWithoutLayout.concat(s.customRoutesWithoutLayout),resources:u.resources.concat(s.resources)}})},[]);return[r,n,i]},YTe=function(e,t){var r=IW(),n=r.register,i=r.unregister;R.useEffect(function(){return e.forEach(function(s){if(typeof s.type.registerResource=="function"){var u=s.type.registerResource(s.props,t);n(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")}),function(){e.forEach(function(s){if(typeof s.type.registerResource=="function"){var u=s.type.registerResource(s.props,t);i(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")})}},[t,n,e,i])},JTe=function(e){var t=e.children,r=e.resources,n=e.customRoutesWithLayout,i=e.customRoutesWithoutLayout;return fZ(t)?"loading":r.length>0||n.length>0||i.length>0?"ready":"empty"},fZ=function(e){var t=Array.isArray(e)?e:[e],r=t.filter(function(n){return typeof n=="function"});if(r.length>1)throw new Error("You can only provide one function child to AdminRouter");return r.length===0?null:r[0]},e0=function(e){var t=[],r=[],n=[];return typeof e=="function"?{customRoutesWithLayout:[],customRoutesWithoutLayout:[],resources:[]}:(R.Children.forEach(e,function(i){if(R.isValidElement(i)){if(i.type===R.Fragment){var s=e0(i.props.children);t.push.apply(t,s.customRoutesWithLayout),r.push.apply(r,s.customRoutesWithoutLayout),n.push.apply(n,s.resources)}if(i.type.raName==="CustomRoutes"){var u=i;u.props.noLayout?r.push(u.props.children):t.push(u.props.children)}else i.type.raName==="Resource"&&n.push(i)}}),{customRoutesWithLayout:t,customRoutesWithoutLayout:r,resources:n})},hZ=R.createContext(!1),QTe=hZ.Provider,ePe=function(){return R.useContext(hZ)},Ix=function(){return Ix=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ix.apply(this,arguments)},$7=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},q7=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},tPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},rPe=function(e){var t=Ec(),r=Al(e),n=e.action,i=e.resources,s=tPe(e,["action","resources"]),u=cm(Ix({queryKey:["auth","canAccess",i,n,r],queryFn:function(d){return $7(void 0,[d],void 0,function(g){var _,C,S=g.signal;return q7(this,function(I){switch(I.label){case 0:return[4,Promise.all(i.map(function(O){return $7(void 0,void 0,void 0,function(){var P;return q7(this,function(k){switch(k.label){case 0:return!t||!t.canAccess?[2,{canAccess:!0,resource:O}]:[4,t.canAccess({resource:O,action:n,record:r,signal:t.supportAbortSignal?S:void 0})];case 1:return P=k.sent(),[2,{canAccess:P,resource:O}]}})})}))];case 1:return _=I.sent(),C=_.reduce(function(O,P){var k=P.resource,F=P.canAccess;return O[k]=F,O},{}),[2,C]}})})}},s)),a=R.useMemo(function(){return Ix({canAccess:u.data},u)},[u]),p=R.useMemo(function(){return{canAccess:i.reduce(function(d,g){return d[g]=!0,d},{}),isPending:!1,isError:!1,error:null}},[i]);return!t||!t.canAccess?p:a},nPe=function(){var e=Db().isPending,t=Ib(),r=Object.keys(t).filter(function(a){return t[a].hasList}),n=rPe({action:"list",resources:r,enabled:!e}),i=n.canAccess,s=n.isPending,u=r.find(function(a){return i&&i[a]===!0});return{resource:u,isPending:s}},iPe=function(e){var t=e.loading,r=nPe(),n=r.resource,i=r.isPending,s=Pb();if(i)return R.createElement(t,null);if(n)return R.createElement(KSe,{to:s({resource:n,type:"list"}),replace:!0})},aPe=function(e){CCe();var t=ZTe(e.children),r=t.customRoutesWithLayout,n=t.customRoutesWithoutLayout,i=t.status,s=t.resources,u=e.layout,a=e.catchAll,p=e.dashboard,d=e.loading,g=e.requireAuth,_=e.ready,C=e.authenticationError,S=C===void 0?U7:C,I=e.accessDenied,O=I===void 0?U7:I,P=AR(void 0,!1,{enabled:g}),k=P.authenticated,F=P.isPending;if(i==="empty"){if(!_)throw new Error("The admin is empty. Please provide an empty component, or pass Resource or CustomRoutes as children.");return R.createElement(_,null)}return i==="loading"||g&&F?R.createElement(Qv,null,n,R.createElement(Nu,{path:"*",element:R.createElement("div",{style:{height:"100vh"}},R.createElement(d,null))})):g&&(F||!k)?R.createElement(Qv,null,n,R.createElement(Nu,{path:"*",element:R.createElement(HPe,null)})):R.createElement(Qv,null,n,R.createElement(Nu,{path:"/*",element:R.createElement(QTe,{value:!!p},R.createElement(u,null,R.createElement(Qv,null,r,R.Children.map(s,function(B){return R.createElement(Nu,{key:B.props.name,path:"".concat(B.props.name,"/*"),element:B})}),R.createElement(Nu,{path:"/",element:p?R.createElement(kPe,{authParams:oPe,component:p,loading:d}):R.createElement(iPe,{loading:d})}),R.createElement(Nu,{path:"/authentication-error",element:R.createElement(S,null)}),R.createElement(Nu,{path:"/access-denied",element:R.createElement(O,null)}),R.createElement(Nu,{path:"*",element:R.createElement(a,null)}))))}))},oPe={params:{route:"dashboard"}},U7=function(){return null},dZ=R.createContext("React Admin"),sPe=dZ.Provider,SR=function(){return R.useContext(dZ)},lPe=function(e){var t=e.children;return R.createElement(R.Fragment,null,t)},uPe=function(e){var t=e.error,r=e.errorInfo,n=e.resetErrorBoundary;return MW(n),R.createElement("div",null,R.createElement("h1",null,"Error"),R.createElement("pre",null,t.message,r?.componentStack))},cPe=function(e){var t=R.useState({}),r=t[0],n=t[1],i=e.authCallbackPage,s=i===void 0?!1:i,u=e.catchAll,a=u===void 0?J_:u,p=e.children,d=e.dashboard,g=e.disableTelemetry,_=g===void 0?!1:g,C=e.error,S=C===void 0?uPe:C,I=e.layout,O=I===void 0?lPe:I,P=e.loading,k=P===void 0?J_:P,F=e.loginPage,B=F===void 0?!1:F,N=e.ready,G=N===void 0?bPe:N,$=e.requireAuth,X=$===void 0?!1:$,ee=e.title,J=ee===void 0?"React Admin":ee,le=e.authenticationError,Z=le===void 0?J_:le,H=e.accessDenied,oe=H===void 0?J_:H;R.useEffect(function(){if(!(_||typeof window>"u"||typeof window.location>"u"||typeof Image>"u")){var ce=new Image;ce.src="https://react-admin-telemetry.marmelab.com/react-admin-telemetry?domain=".concat(window.location.hostname)}},[_]);var ue=function(ce,be){return n(be)};return R.createElement(sPe,{value:J},R.createElement(lZ,{onError:ue,fallbackRender:function(ce){var be=ce.error,Te=ce.resetErrorBoundary;return R.createElement("div",{style:{minHeight:"100vh"}},R.createElement(S,{error:be,errorInfo:r,resetErrorBoundary:Te}))}},R.createElement(Qv,null,B!==!1&&B!==!0?R.createElement(Nu,{path:"/login",element:V7(B)}):null,s!==!1&&s!==!0?R.createElement(Nu,{path:"/auth-callback",element:V7(s)}):null,R.createElement(Nu,{path:"/*",element:R.createElement(aPe,{catchAll:a,dashboard:d,layout:O,loading:k,requireAuth:X,ready:G,authenticationError:Z,accessDenied:oe},p)}))))},V7=function(e){return R.isValidElement(e)?e:R.createElement(e)},J_=function(){return null},pZ=function(e){return null};pZ.raName="CustomRoutes";var mZ=function(e){var t=e.value,r=e.children;return t?R.createElement(ATe,{value:t},r):r},ER=R.createContext(void 0),fPe={getSource:function(e){return e},getLabel:function(e){return e}},hPe=ER.Provider,dPe=function(){var e=R.useContext(ER);return e||fPe},pPe=function(){return R.useContext(ER)},mPe=R.createContext(void 0),gPe=function(e){var t=e.children,r=e.value;return R.createElement(mPe.Provider,{value:r},t)},js={},G7;function yPe(){if(G7)return js;G7=1;/*!
 * inflection
 * Copyright(c) 2011 Ben Lin <ben@dreamerslab.com>
 * MIT Licensed
 *
 * @fileoverview
 * A port of inflection-js to node.js module.
 */Object.defineProperty(js,"__esModule",{value:!0}),js.pluralize=_,js.singularize=C,js.inflect=S,js.camelize=I,js.underscore=O,js.humanize=P,js.capitalize=k,js.dasherize=F,js.titleize=B,js.demodulize=N,js.tableize=G,js.classify=$,js.foreignKey=X,js.ordinalize=ee,js.transform=le;const e=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","minus","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],t={plural:{men:new RegExp("^(m|wom)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),databases:new RegExp("(database)s$","gi"),drives:new RegExp("(drive)s$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),aves:new RegExp("([a])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopuses:new RegExp("(octop|vir)uses$","gi"),aliases:new RegExp("(alias|canvas|status|campus)es$","gi"),summonses:new RegExp("^(summons|bonus)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),criteria:new RegExp("^(criteri)a$","gi"),genera:new RegExp("^genera$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m|wom)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),drive:new RegExp("(drive)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status|canvas|campus)$","gi"),summons:new RegExp("^(summons|bonus)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),focus:new RegExp("^(focus)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),criterion:new RegExp("^(criteri)on$","gi"),genus:new RegExp("^genus$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},r=[[t.plural.men],[t.plural.people],[t.plural.children],[t.plural.tia],[t.plural.analyses],[t.plural.databases],[t.plural.drives],[t.plural.hives],[t.plural.curves],[t.plural.lrves],[t.plural.foves],[t.plural.aeiouyies],[t.plural.series],[t.plural.movies],[t.plural.xes],[t.plural.mice],[t.plural.buses],[t.plural.oes],[t.plural.shoes],[t.plural.crises],[t.plural.octopuses],[t.plural.aliases],[t.plural.summonses],[t.plural.oxen],[t.plural.matrices],[t.plural.feet],[t.plural.teeth],[t.plural.geese],[t.plural.quizzes],[t.plural.whereases],[t.plural.criteria],[t.plural.genera],[t.singular.man,"$1en"],[t.singular.person,"$1ople"],[t.singular.child,"$1ren"],[t.singular.drive,"$1s"],[t.singular.ox,"$1en"],[t.singular.axis,"$1es"],[t.singular.octopus,"$1uses"],[t.singular.alias,"$1es"],[t.singular.summons,"$1es"],[t.singular.bus,"$1ses"],[t.singular.buffalo,"$1oes"],[t.singular.tium,"$1a"],[t.singular.sis,"ses"],[t.singular.ffe,"$1$2ves"],[t.singular.focus,"$1es"],[t.singular.hive,"$1ves"],[t.singular.aeiouyy,"$1ies"],[t.singular.matrix,"$1ices"],[t.singular.vertex,"$1ices"],[t.singular.x,"$1es"],[t.singular.mouse,"$1ice"],[t.singular.foot,"feet"],[t.singular.tooth,"teeth"],[t.singular.goose,"geese"],[t.singular.quiz,"$1zes"],[t.singular.whereas,"$1es"],[t.singular.criterion,"$1a"],[t.singular.genus,"genera"],[t.singular.s,"s"],[t.singular.common,"s"]],n=[[t.singular.man],[t.singular.person],[t.singular.child],[t.singular.drive],[t.singular.ox],[t.singular.axis],[t.singular.octopus],[t.singular.alias],[t.singular.summons],[t.singular.bus],[t.singular.buffalo],[t.singular.tium],[t.singular.sis],[t.singular.ffe],[t.singular.focus],[t.singular.hive],[t.singular.aeiouyy],[t.singular.x],[t.singular.matrix],[t.singular.mouse],[t.singular.foot],[t.singular.tooth],[t.singular.goose],[t.singular.quiz],[t.singular.whereas],[t.singular.criterion],[t.singular.genus],[t.plural.men,"$1an"],[t.plural.people,"$1rson"],[t.plural.children,"$1"],[t.plural.databases,"$1"],[t.plural.drives,"$1"],[t.plural.genera,"genus"],[t.plural.criteria,"$1on"],[t.plural.tia,"$1um"],[t.plural.analyses,"$1$2sis"],[t.plural.hives,"$1ve"],[t.plural.curves,"$1"],[t.plural.lrves,"$1f"],[t.plural.aves,"$1ve"],[t.plural.foves,"$1fe"],[t.plural.movies,"$1ovie"],[t.plural.aeiouyies,"$1y"],[t.plural.series,"$1eries"],[t.plural.xes,"$1"],[t.plural.mice,"$1ouse"],[t.plural.buses,"$1"],[t.plural.oes,"$1"],[t.plural.shoes,"$1"],[t.plural.crises,"$1is"],[t.plural.octopuses,"$1us"],[t.plural.aliases,"$1"],[t.plural.summonses,"$1"],[t.plural.oxen,"$1"],[t.plural.matrices,"$1ix"],[t.plural.vertices,"$1ex"],[t.plural.feet,"foot"],[t.plural.teeth,"tooth"],[t.plural.geese,"goose"],[t.plural.quizzes,"$1"],[t.plural.whereases,"$1"],[t.plural.ss,"ss"],[t.plural.s,""]],i=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],s=new RegExp("(_ids|_id)$","g"),u=new RegExp("_","g"),a=new RegExp("[ _]","g"),p=new RegExp("([A-Z])","g"),d=new RegExp("^_");function g(Z,H,oe,ue){if(ue)return ue;if(oe.includes(Z.toLocaleLowerCase()))return Z;for(const ce of H)if(Z.match(ce[0]))return ce[1]!==void 0?Z.replace(ce[0],ce[1]):Z;return Z}function _(Z,H){return g(Z,r,e,H)}function C(Z,H){return g(Z,n,e,H)}function S(Z,H,oe,ue){return isNaN(H)?Z:H===1?g(Z,n,e,oe):g(Z,r,e,ue)}function I(Z,H){const oe=Z.split("/"),ue=oe.length;let ce,be,Te,ve;for(let Ce=0;Ce<ue;Ce++){for(ce=oe[Ce].split("_"),be=0,Te=ce.length;be<Te;be++)be!==0&&(ce[be]=ce[be].toLowerCase()),ve=ce[be].charAt(0),ve=H&&Ce===0&&be===0?ve.toLowerCase():ve.toUpperCase(),ce[be]=ve+ce[be].substring(1);oe[Ce]=ce.join("")}return oe.join("::")}function O(Z,H){if(H&&Z===Z.toUpperCase())return Z;const oe=Z.split("::"),ue=oe.length;for(let ce=0;ce<ue;ce++)oe[ce]=oe[ce].replace(p,"_$1"),oe[ce]=oe[ce].replace(d,"");return oe.join("/").toLowerCase()}function P(Z,H){return Z=Z.toLowerCase(),Z=Z.replace(s,""),Z=Z.replace(u," "),H||(Z=k(Z)),Z}function k(Z){return Z=Z.toLowerCase(),Z.substring(0,1).toUpperCase()+Z.substring(1)}function F(Z){return Z.replace(a,"-")}function B(Z){Z=Z.toLowerCase().replace(u," ");const H=Z.split(" "),oe=H.length;let ue,ce;for(let be=0;be<oe;be++){ue=H[be].split("-"),ce=ue.length;for(let Te=0;Te<ce;Te++)i.indexOf(ue[Te].toLowerCase())<0&&(ue[Te]=k(ue[Te]));H[be]=ue.join("-")}return Z=H.join(" "),Z=Z.substring(0,1).toUpperCase()+Z.substring(1),Z}function N(Z){const H=Z.split("::");return H[H.length-1]}function G(Z){return Z=O(Z),Z=_(Z),Z}function $(Z){return Z=I(Z),Z=C(Z),Z}function X(Z,H){return Z=N(Z),Z=O(Z)+(H?"":"_")+"id",Z}function ee(Z){const H=Z.split(" "),oe=H.length;for(let ue=0;ue<oe;ue++){const ce=parseInt(H[ue],10);if(!isNaN(ce)){const be=H[ue].substring(H[ue].length-2),Te=H[ue].substring(H[ue].length-1);let ve="th";be!="11"&&be!="12"&&be!="13"&&(Te==="1"?ve="st":Te==="2"?ve="nd":Te==="3"&&(ve="rd")),H[ue]+=ve}}return H.join(" ")}const J={pluralize:_,singularize:C,camelize:I,underscore:O,humanize:P,capitalize:k,dasherize:F,titleize:B,demodulize:N,tableize:G,classify:$,foreignKey:X,ordinalize:ee};function le(Z,H){const oe=H.length;for(let ue=0;ue<oe;ue++){const ce=H[ue],be=J[ce];be&&(Z=be(Z))}return Z}return js}var Jp=yPe(),wy=function(){var e=Oi(),t=Ib();return function(r,n){n===void 0&&(n=2);var i=t[r],s=e("resources.".concat(r,".name"),{smart_count:n,_:i&&i.options&&i.options.label?e(i.options.label,{smart_count:n,_:i.options.label}):Jp.humanize(Jp.inflect(r,n))});return s}},Lb=function(e){var t=_u(e),r=Ib(),n=e||{},i=n.hasCreate,s=n.hasEdit,u=n.hasList,a=n.hasShow,p=n.recordRepresentation,d=R.useMemo(function(){return wAe({},{hasCreate:i,hasEdit:s,hasList:u,hasShow:a,recordRepresentation:p},t?r[t]:{})},[t,r,i,s,u,a,p]);return d},Sy=function(e){var t=Lb({resource:e}).recordRepresentation;return R.useCallback(function(r){return r?typeof t=="function"?t(r):typeof t=="string"?Zc(r,t):R.isValidElement(t)?t:r?.name!=null&&r?.name!==""?r.name:r?.title!=null&&r?.title!==""?r.title:r?.label!=null&&r?.label!==""?r.label:r?.reference!=null&&r?.reference!==""?r.reference:"#".concat(r.id):""},[t])},gZ=function(e){var t=dPe();return t.getSource(e)},vPe=function(){var e=Oi(),t=_u(),r=pPe();return R.useCallback(function(n){var i=n.source,s=n.label,u=n.resource;return s===!1||s===""?null:s&&typeof s!="string"?s:e.apply(void 0,_Pe({label:s,defaultLabel:i?r?.getLabel(i):void 0,resource:u,resourceFromContext:t,source:i}))},[t,e,r])},yZ=function(e){var t=e.source,r=e.label,n=e.resource,i=e.isRequired,s=vPe();if(r===!0)throw new Error("Label parameter must be a string, a ReactElement or false");return r===!1||r===""?null:r!=null&&typeof r!="string"?r:R.createElement("span",null,s({label:r,resource:n,source:t}),i&&R.createElement("span",{"aria-hidden":"true"},"*"))};yZ.displayName="FieldTitle";const vZ=R.memo(yZ),bPe=(function(){return R.createElement("span",null)}),CR=(function(e,t){});var _Pe=function(e){if(!e)return[""];var t=e.label,r=e.defaultLabel,n=e.resource,i=e.resourceFromContext,s=e.source;if(typeof t<"u")return[t,{_:t}];if(typeof s>"u")return[""];var u=xPe(s),a=u.sourceWithoutDigits,p=u.sourceSuffix,d=Jp.transform(p.replace(/\./g," "),["underscore","humanize"]);return n?[H7(n,a),{_:d}]:r?[r,{_:d}]:[H7(i||"undefined",a),{_:d}]},H7=function(e,t){return"resources.".concat(e,".fields.").concat(t)},xPe=function(e){var t=e.replace(/\.\d+\./g,"."),r=e.split("."),n;r.forEach(function(s,u){wPe(s)&&(n=u)});var i=n!=null?r.slice(n+1).join("."):e;return{sourceWithoutDigits:t,sourceSuffix:i}},wPe=function(e){for(var t=e.length-1;t>=0;t--){var r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0},SPe=typeof window<"u"?R.useLayoutEffect:R.useEffect,Mo=function(e){var t=R.useRef(function(){throw new Error("Cannot call an event handler while rendering.")});return SPe(function(){t.current=e}),R.useCallback(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.current.apply(t,r)},[])},EPe=function(e){var t=e.defaultValue,r=e.source,n=Al(e);return Zc(n,r,t)};function fm(e,t){var r=pw(),n=r.getItem,i=r.setItem,s=r.subscribe,u=R.useState(function(){return n(e,t)}),a=u[0],p=u[1];R.useEffect(function(){var g=n(e,t);aR(a,g)||p(g);var _=s(e,function(C){p(typeof C>"u"?t:C)});return function(){return _()}},[e,s,t,n,a]);var d=Mo(function(g,_){var C=typeof g=="function"?g(a):g;i(e,typeof C>"u"?typeof _>"u"?t:_:C)});return[a,d]}var CPe=function(e){var t=pw().removeItem;return R.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},APe=function(e){var t=pw().removeItems;return R.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},TPe=function(){var e=pw().reset;return e},Ey=function(){var e=Ec(),t=Xf(),r=TPe(),n=Bd(),i=R.useRef(n),s=Cl(),u=R.useRef(s),a=qh(),p=Of("".concat(a,"/").concat(cw.loginUrl));R.useEffect(function(){u.current=s,i.current=n},[s,n]);var d=R.useCallback(function(g,_,C){return g===void 0&&(g={}),_===void 0&&(_=p),C===void 0&&(C=!0),e?e.logout(g).then(function(S){if(S===!1||_===!1){r(),t.clear();return}var I=S||_;if(I?.startsWith("http"))return r(),t.clear(),window.location.href=I,I;var O=I.split("?"),P={pathname:O[0]},k={};return C&&u.current&&u.current.pathname&&(k={state:{nextPathname:u.current.pathname,nextSearch:u.current.search}}),O[1]&&(P.search=O[1]),setTimeout(function(){i.current(P,k),r(),t.clear()},0),S}):(i.current({pathname:p},{state:{nextPathname:u.current&&u.current.pathname}}),r(),t.clear(),Promise.resolve())},[e,r,p,t]);return d},Ap=function(){return Ap=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ap.apply(this,arguments)},PPe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},IPe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},MPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},W7={},AR=function(e,t,r){e===void 0&&(e=W7),t===void 0&&(t=!1),r===void 0&&(r=W7);var n=Ec(),i=Ey(),s=qh(),u=Yf(),a=r.onSuccess,p=r.onError,d=r.onSettled,g=MPe(r,["onSuccess","onError","onSettled"]),_=cm(Ap({queryKey:["auth","checkAuth",e],queryFn:function(P){return PPe(void 0,[P],void 0,function(k){var F,B=k.signal;return IPe(this,function(N){switch(N.label){case 0:if(!n)return[2,!0];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,n.checkAuth(Ap(Ap({},e),{signal:B}))];case 2:return N.sent(),[2,!0];case 3:throw F=N.sent(),F??new Error;case 4:return[2]}})})},retry:!1},g)),C=Mo(a??Z7),S=Mo(d??Z7),I=Mo(p??(function(P){if(t){var k=Of("".concat(s,"/").concat(cw.loginUrl));i({},P&&P.redirectTo!=null?P.redirectTo:k);var F=P&&P.message===!1;!F&&u(OPe(P,"ra.auth.auth_check_error"),{type:"error"})}}));R.useEffect(function(){_.data===void 0||_.isFetching||r.enabled!==!1&&C(_.data)},[C,_.data,_.isFetching,r.enabled]),R.useEffect(function(){_.error==null||_.isFetching||r.enabled!==!1&&I(_.error)},[I,_.error,_.isFetching,r.enabled]),R.useEffect(function(){_.status==="pending"||_.isFetching||r.enabled!==!1&&S(_.data,_.error)},[S,_.data,_.error,_.status,_.isFetching,r.enabled]);var O=R.useMemo(function(){return Ap(Ap({},_),{authenticated:_.error?!1:_.data})},[_]);return n!=null?O:bZ},OPe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},Z7=function(){},bZ={authenticated:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(bZ)}},RPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Db=function(e){e===void 0&&(e={});var t=e.params,r=e.logoutOnFailure,n=r===void 0?!0:r,i=RPe(e,["params","logoutOnFailure"]);return AR(t??LPe,n,i)},LPe={},m0=function(){return m0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m0.apply(this,arguments)},DPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},X7=function(e){return R.Children.count(e)===0},kPe=function(e){var t=e.authParams,r=e.children,n=e.render,i=e.component,s=e.loading,u=s===void 0?null:s;e.staticContext;var a=DPe(e,["authParams","children","render","component","loading","staticContext"]);CR(n&&r&&!X7(r)||n&&i||i&&r&&!X7(r),"You should only use one of the `component`, `render` and `children` props in <WithPermissions>");var p=Db(t).isPending,d=uZ(t,{enabled:!p}),g=d.permissions,_=d.isPending;if(p||_)return u?R.createElement(u,null):null;if(i)return R.createElement(i,m0({permissions:g},a));if(n)return n(m0({permissions:g},a));if(r)return r(m0({permissions:g},a))},FPe=function(){var e=Ec(),t=Xf(),r=Cl(),n=r.state,i=Bd(),s=qh(),u=gW().resetNotifications,a=n&&n.nextPathname,p=n&&n.nextSearch,d=Of("".concat(s,"/").concat(cw.afterLoginUrl)),g=R.useCallback(function(_,C){return _===void 0&&(_={}),e?e.login(_).then(function(S){if(u(),t.invalidateQueries({queryKey:["auth","getPermissions"]}),S&&S.hasOwnProperty("redirectTo"))S&&i(S.redirectTo);else{var I=C||a+p||d;i(I)}return S}):(u(),i(d),Promise.resolve())},[e,t,i,a,p,u,d]);return g},NPe="AUTH_LOGIN",BPe="AUTH_CHECK",jPe="AUTH_ERROR",zPe="AUTH_LOGOUT",$Pe="AUTH_GET_PERMISSIONS";const qPe=(function(e){var t=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.apply(null,r)};return t.login=function(r){return e(NPe,r)},t.logout=function(r){return e(zPe,r)},t.checkAuth=function(r){return e(BPe,r)},t.checkError=function(r){return e(jPe,r)},t.getPermissions=function(r){return e($Pe,r)},t});var Eh=function(){return Eh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Eh.apply(this,arguments)},UPe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},VPe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},GPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},kb=function(e){var t=Ec(),r=_u(e);if(!r)throw new Error("useCanAccess must be used inside a <Resource> component or provide a resource prop");var n=Al(e);e.record;var i=GPe(e,["record"]),s=!!t?.canAccess,u=cm(Eh({queryKey:["auth","canAccess",Eh(Eh({},i),{recordId:n?.id,resource:r})],queryFn:function(p){return UPe(void 0,[p],void 0,function(d){var g=d.signal;return VPe(this,function(_){return!t||!t.canAccess?[2,!0]:[2,t.canAccess(Eh(Eh({},e),{record:n,resource:r,signal:t.supportAbortSignal?g:void 0}))]})})},enabled:s},e)),a=R.useMemo(function(){return Eh(Eh({},u),{canAccess:u.data})},[u]);return s?a:_Z},_Z={canAccess:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(_Z)}},HPe=function(){var e=Ey();return R.useEffect(function(){e()},[e]),null},xZ=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},wZ=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},WPe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},ZPe=function(){var e=Ec(),t=Yf(),r=Ey(),n=qh(),i=Of("".concat(n,"/").concat(cw.loginUrl)),s=R.useCallback(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return xZ(void 0,WPe([],u,!0),void 0,function(p,d,g){var _,C;return p===void 0&&(p={}),d===void 0&&(d=!0),g===void 0&&(g=i),wZ(this,function(S){switch(S.label){case 0:if(!e)return[2,XPe()];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,e.checkAuth(p)];case 2:return[2,S.sent()];case 3:throw _=S.sent(),d&&(r({},_&&_.redirectTo!=null?_.redirectTo:g),C=_&&_.message===!1,!C&&t(KPe(_,"ra.auth.auth_check_error"),{type:"error"})),_;case 4:return[2]}})})},[e,r,t,i]);return s},XPe=function(){return xZ(void 0,void 0,void 0,function(){return wZ(this,function(e){return[2,void 0]})})},KPe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},g0=function(){return g0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},g0.apply(this,arguments)},YPe=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},JPe=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},QPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},e3e={id:""},t3e={staleTime:300*1e3},r3e=function(e){e===void 0&&(e=t3e);var t=Ec(),r=e.onSuccess,n=e.onError,i=e.onSettled,s=QPe(e,["onSuccess","onError","onSettled"]),u=cm(g0({queryKey:["auth","getIdentity"],queryFn:function(g){return YPe(void 0,[g],void 0,function(_){var C=_.signal;return JPe(this,function(S){return t&&typeof t.getIdentity=="function"?[2,t.getIdentity({signal:C})]:[2,e3e]})})}},s)),a=Mo(r??vT),p=Mo(n??vT),d=Mo(i??vT);return R.useEffect(function(){u.data===void 0||u.isFetching||a(u.data)},[a,u.data,u.isFetching]),R.useEffect(function(){u.error==null||u.isFetching||p(u.error)},[p,u.error,u.isFetching]),R.useEffect(function(){u.status==="pending"||u.isFetching||d(u.data,u.error)},[d,u.data,u.error,u.status,u.isFetching]),R.useMemo(function(){return g0(g0({},u),{identity:u.data})},[u])},vT=function(){},J3=function(){return J3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},J3.apply(this,arguments)},n3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},i3e=function(e){var t=Ec(),r=Mb(),n=Cl(),i=n.state,s=i&&i.nextPathname,u=i&&i.nextSearch,a=s?s+u:"/",p={},d=p.onSuccess,g=p.onError,_=p.onSettled,C=n3e(p,["onSuccess","onError","onSettled"]),S,I=cm(J3({queryKey:["auth","handleCallback"],queryFn:function(F){var B=F.signal;return S||(S=t&&typeof t.handleCallback=="function"?t.handleCallback({signal:B}).then(function(N){return N??null}):Promise.resolve()),S},retry:!1},C)),O=Mo(d??(function(F){var B,N=localStorage.getItem(a3e),G=(B=F?.redirectTo)!==null&&B!==void 0?B:N;G!==!1&&r(G??a)})),P=Mo(g??K7),k=Mo(_??K7);return R.useEffect(function(){I.error==null||I.isFetching||P(I.error)},[P,I.error,I.isFetching]),R.useEffect(function(){I.data===void 0||I.isFetching||O(I.data)},[O,I.data,I.isFetching]),R.useEffect(function(){I.status==="pending"||I.isFetching||k(I.data,I.error)},[k,I.data,I.error,I.status,I.isFetching]),I},a3e="@react-admin/nextPathname",K7=function(){},o3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},SZ=function(e){var t=e.action,r=o3e(e,["action"]),n=Xf(),i=Ec(),s=_u(r);if(!i)return!1;var u=n.getQueryState(["auth","checkAuth",{}]),a=n.getQueryState(["auth","canAccess",{action:t,resource:s}]);return!!(u?.status==="pending"||i.canAccess&&a?.status==="pending")},s3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},EZ=function(e){var t=kb(e),r=t.canAccess;t.data;var n=t.error,i=s3e(t,["canAccess","data","error"]),s=Bd(),u=qh();return R.useEffect(function(){i.isPending||r===!1&&s("".concat(u,"/access-denied"))},[u,r,s,i.isPending]),R.useEffect(function(){n&&s("".concat(u,"/authentication-error"))},[u,s,n]),i},CZ=R.createContext(""),AZ=function(e){var t=e.value,r=t===void 0?"":t,n=e.children;return R.createElement(CZ.Provider,{value:r},n)},l3e=function(){return R.useContext(CZ)};function TZ(e,t){e===void 0&&(e=""),t===void 0&&(t=void 0);var r=l3e();if(!r)throw new Error("usePreference cannot be used outside of a Configurable component. Did you forget to wrap your component with <Configurable>? If you don't want to use Configurable, you can use the useStore hook instead.");return fm(r&&e?"".concat(r,".").concat(e):r??e,t)}var TR=function(){var e=R.useContext(sZ);if(!e)throw new Error("usePreferencesEditor must be used within a PreferencesEditorContextProvider");return e},u3e=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},c3e=function(e,t){var r=TZ(e,t),n=r[0],i=r[1],s=R.useState(n),u=s[0],a=s[1];R.useEffect(function(){a(n||t)},[n,t]);var p=function(_){a(_.target.value===""?t:_.target.value)},d=function(){i(u)},g=function(_){var C;if(_.key==="Enter"){i(u);var S=_.target.form;if(S){var I=u3e([],S,!0).indexOf(_.target);(C=S.elements[I+1])===null||C===void 0||C.focus()}_.preventDefault()}};return{value:u,onChange:p,onBlur:d,onKeyDown:g}},f3e=function(e,t){var r=TR();if(!r)throw new Error("useSetInspectorTitle cannot be called outside of a PreferencesEditorContext");var n=r.setTitle;R.useEffect(function(){n(e,t)},[e,JSON.stringify(t),n])};const PR=Si(Ue.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}));var y0=function(){return y0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},y0.apply(this,arguments)},PZ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Cy=function(e){var t=mi({props:e,name:IZ}),r=t.alignIcon,n=r===void 0?"left":r,i=t.children,s=t.className,u=t.disabled,a=t.label,p=t.color,d=p===void 0?"primary":p,g=t.size,_=g===void 0?"small":g,C=t.to,S=PZ(t,["alignIcon","children","className","disabled","label","color","size","to"]),I=Oi(),O=a;typeof a=="string"&&(O=I(a,{_:a}));var P=d3e(C),k=Zu(function(F){return F.breakpoints.down("sm")});return k?a&&!u?R.createElement(sy,{title:O},R.createElement(Uo,y0({"aria-label":typeof O=="string"?O:void 0,className:s,color:d,size:"large"},P,S),i)):R.createElement(Uo,y0({className:s,color:d,disabled:u,size:"large"},P,S),i):R.createElement(h3e,y0({className:s,color:d,size:_,"aria-label":typeof O=="string"?O:void 0,disabled:u,startIcon:n==="left"&&i?i:void 0,endIcon:n==="right"&&i?i:void 0},P,S),O)},IZ="RaButton",h3e=Qt(Yc,{name:IZ,overridesResolver:function(e,t){return t.root}})({"&.MuiButton-sizeSmall":{lineHeight:1.5}}),d3e=function(e){if(e!=null){if(typeof e=="string")return{to:e};var t=e.redirect,r=e.replace,n=e.state,i=PZ(e,["redirect","replace","state"]);return{to:i,redirect:t,replace:r,state:n}}};const p3e=Si(Ue.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}));var Q3=function(){return Q3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Q3.apply(this,arguments)},m3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},g3e=function(e){var t=mi({props:e,name:MZ}),r=t.icon,n=r===void 0?v3e:r,i=t.label;t.record,t.resource;var s=t.scrollToTop,u=s===void 0?!0:s,a=m3e(t,["icon","label","record","resource","scrollToTop"]),p=_u(t);if(!p)throw new Error("<ShowButton> components should be used inside a <Resource> component or provided the resource prop.");var d=Al(t),g=Pb(),_=kb({action:"show",resource:p,record:d}),C=_.canAccess,S=_.isPending,I=wy(),O=Sy(),P=O(d),k=typeof P=="string"?P:P?.toString(),F=$p({resourceI18nKey:"resources.".concat(p,".action.show"),baseI18nKey:"ra.action.show",options:{name:I(p,1),recordRepresentation:k},userText:i});return!d||!C||S?null:R.createElement(x3e,Q3({component:xy,to:g({type:"show",resource:p,id:d.id}),state:y3e[String(u)],label:R.createElement(R.Fragment,null,F),"aria-label":typeof F=="string"?F:void 0,onClick:b3e},a),n)},y3e={true:{_scrollToTop:!0},false:{}},v3e=R.createElement(p3e,null),b3e=function(e){return e.stopPropagation()},_3e=R.memo(g3e,function(e,t){return e.resource===t.resource&&(e.record&&t.record?e.record.id===t.record.id:e.record==t.record)&&e.label===t.label&&e.disabled===t.disabled}),MZ="RaShowButton",x3e=Qt(Cy,{name:MZ,overridesResolver:function(e,t){return t.root}})({}),eI=function(){return eI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},eI.apply(this,arguments)},w3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Q_,S3e=function(e){var t=mi({props:e,name:v0}),r=t.className,n=t.icon,i=n===void 0?C3e:n,s=t.textPrimary,u=s===void 0?"ra.page.access_denied":s,a=t.textSecondary,p=a===void 0?"ra.message.access_denied":a,d=w3e(t,["className","icon","textPrimary","textSecondary"]),g=Oi();return R.createElement(E3e,eI({className:Br(tb.root,r)},d),R.createElement("div",{className:tb.message},i,R.createElement($o,{variant:"h5",sx:{mt:3,color:"text.secondary"}},g(u,{_:u})),R.createElement($o,{variant:"body2"},g(p,{_:p}))))},v0="RaAccessDenied",tb={root:"".concat(v0,"-root"),icon:"".concat(v0,"-icon"),message:"".concat(v0,"-message")},E3e=Qt("div",{name:v0,overridesResolver:function(e,t){return t.root}})((Q_={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},Q_["& .".concat(tb.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},Q_["& .".concat(tb.icon)]={width:"9em",height:"9em"},Q_)),C3e=R.createElement(PR,{className:tb.icon}),Fb=function(){var e=Zu(function(t){return t?.breakpoints.down("sm")},{noSsr:!0});return fm("sidebar.open",!e)},A3e=function(e){var t=mi({props:e,name:Mx}),r=Oi(),n=t.className,i=Fb(),s=i[0],u=i[1];return R.createElement(sy,{className:n,title:r(s?"ra.action.close_menu":"ra.action.open_menu",{_:"Open/Close menu"}),enterDelay:500},R.createElement(T3e,{color:"inherit",onClick:function(){return u(!s)}},R.createElement(awe,{classes:{root:s?Ox.menuButtonIconOpen:Ox.menuButtonIconClosed}})))},Mx="RaSidebarToggleButton",Ox={menuButtonIconClosed:"".concat(Mx,"-menuButtonIconClosed"),menuButtonIconOpen:"".concat(Mx,"-menuButtonIconOpen")},T3e=Qt(Uo,{name:Mx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(Ox.menuButtonIconClosed)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},t["& .".concat(Ox.menuButtonIconOpen)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},t}),tI=function(){return tI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tI.apply(this,arguments)},P3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},e1,bT,I3e=function(e){var t=mi({props:e,name:b0}),r=t.className,n=t.onClick,i=t.sx,s=P3e(t,["className","onClick","sx"]),u=YCe(),a=Uf();return R.createElement(M3e,{className:r,sx:i},R.createElement(GMe,{className:"".concat($g.loadedIcon," ").concat(u&&$g.loadedLoading),onClick:n}),u&&R.createElement(ay,tI({className:Br("app-loader",$g.loader),color:"inherit",size:a.spacing(2),thickness:6},s)))},b0="RaLoadingIndicator",$g={loader:"".concat(b0,"-loader"),loadedLoading:"".concat(b0,"-loadedLoading"),loadedIcon:"".concat(b0,"-loadedIcon")},M3e=Qt("div",{name:b0,overridesResolver:function(e,t){return t.root}})((e1={position:"relative"},e1["& .".concat($g.loadedIcon)]=(bT={},bT["&.".concat($g.loadedLoading)]={opacity:0},bT),e1["& .".concat($g.loader)]={position:"absolute",top:"30%",left:"30%"},e1));const O3e=Si(Ue.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),R3e=Si(Ue.jsx("path",{d:"M13 3h-2v10h2zm4.83 2.17-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83"}));var rI=function(){return rI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rI.apply(this,arguments)},L3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},_T,D3e=R.forwardRef(function(t,r){var n=mi({props:t,name:IR}),i=n.className,s=n.redirectTo,u=n.icon,a=L3e(n,["className","redirectTo","icon"]),p=AR().authenticated,d=Zu(function(S){return S.breakpoints.down("sm")}),g=Oi(),_=Ey(),C=R.useCallback(function(){return _(null,s,!1)},[s,_]);return p?R.createElement(k3e,rI({className:Br("logout",i),onClick:C,ref:r,component:d?"span":"li"},a),R.createElement(mb,{className:OZ.icon},u||R.createElement(R3e,{fontSize:"small"})),R.createElement(tle,null,g("ra.auth.logout",{_:"Logout"}))):null}),IR="RaLogout",OZ={icon:"".concat(IR,"-icon")},k3e=Qt(MM,{name:IR,overridesResolver:function(e,t){return t.root}})((_T={},_T["& .".concat(OZ.icon)]={},_T)),RZ=function(e){var t=mi({props:e,name:Rx}),r=R.useState(null),n=r[0],i=r[1],s=Oi(),u=r3e(),a=u.isPending,p=u.identity,d=Ec(),g=Zu(function($){return $.breakpoints.up("sm")}),_=t.children,C=_===void 0?d?R.createElement(D3e,null):null:_,S=t.className,I=t.label,O=I===void 0?"ra.auth.user_menu":I,P=t.icon,k=P===void 0?N3e:P,F=function($){return i($.currentTarget)},B=R.useCallback(function(){return i(null)},[]),N=R.useMemo(function(){return{onClose:B}},[B]);if(!C)return null;var G=!!n;return R.createElement(F3e,{className:S},g&&!a&&p?.fullName?R.createElement(Yc,{"aria-label":O&&s(O,{_:O}),className:_0.userButton,color:"inherit",startIcon:p.avatar?R.createElement(WP,{className:_0.avatar,src:p.avatar,alt:p.fullName}):k,onClick:F,variant:"text"},p.fullName):R.createElement(sy,{title:O&&s(O,{_:"Profile"})},R.createElement(Uo,{"aria-label":O&&s(O,{_:"Profile"}),"aria-owns":G?"menu-appbar":void 0,"aria-haspopup":!0,color:"inherit",onClick:F},!a&&p?.avatar?R.createElement(WP,{className:_0.avatar,src:p.avatar,alt:p.fullName}):k)),R.createElement(gPe,{value:N},R.createElement(IM,{id:"menu-appbar",disableScrollLock:!0,anchorEl:n,anchorOrigin:B3e,transformOrigin:j3e,open:G,onClose:B},C)))},Rx="RaUserMenu",_0={userButton:"".concat(Rx,"-userButton"),avatar:"".concat(Rx,"-avatar")},F3e=Qt("div",{name:Rx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(_0.userButton)]={textTransform:"none",marginInlineStart:r.spacing(.5)},t["& .".concat(_0.avatar)]={width:r.spacing(3),height:r.spacing(3)},t}),N3e=R.createElement(O3e,null),B3e={vertical:"bottom",horizontal:"right"},j3e={vertical:"top",horizontal:"right"},z3e=function(e){var t=e.children,r=e.className,n=RU();return R.createElement(bU,{appear:!1,direction:"down",in:!n,className:r},t)},nI=function(){return nI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nI.apply(this,arguments)},$3e=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},q3e=function(e){return R.createElement($o,nI({variant:"h6",color:"inherit",id:"react-admin-title"},e,{sx:$3e([{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}],Array.isArray(e.sx)?e.sx:[e.sx],!0)}))},LZ=R.createContext({}),yw=function(e){var t={},r=t.lightTheme,n=t.darkTheme,i=t.defaultTheme,s=R.useContext(LZ);return{lightTheme:r||s.lightTheme,darkTheme:n||s.darkTheme,defaultTheme:i??s.defaultTheme}};const U3e=Si(Ue.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),V3e=Si(Ue.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}));var DZ=function(e){var t=yw().darkTheme,r=Zu("(prefers-color-scheme: dark)",{noSsr:!0}),n=fm("theme",e??(r&&t?"dark":"light")),i=n[0],s=n[1];return[t!=null?i:"light",s]},G3e=function(e){var t=e.children,r=yw(),n=r.lightTheme,i=r.darkTheme,s=r.defaultTheme,u=Zu("(prefers-color-scheme: dark)",{noSsr:!0}),a=DZ(s||(u&&i?"dark":"light"))[0],p=R.useMemo(function(){try{return Ad(a==="dark"?i:n)}catch(d){return console.warn("Failed to reuse custom theme from store",d),Ad()}},[a,n,i]);return R.createElement(Gq,{theme:p},t)},kZ={typography:{h6:{fontWeight:400}},sidebar:{width:240,closedWidth:50},components:{MuiAutocomplete:{defaultProps:{fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiTextField:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiFormControl:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0}},MuiTableCell:{styleOverrides:{root:{"&.MuiTableCell-paddingCheckbox":{padding:"0 8px 0 8px"}}}},RaSimpleFormIterator:{defaultProps:{fullWidth:!0}},RaTranslatableInputs:{defaultProps:{fullWidth:!0}}}},FZ=is(kZ,{palette:{background:{default:"#fafafb"},secondary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}},components:{MuiFilledInput:{styleOverrides:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)","&$disabled":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}}}}),H3e=is(kZ,{palette:{mode:"dark",primary:{main:"#90caf9"},background:{default:"#313131"}}}),iI=function(){return iI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},iI.apply(this,arguments)},W3e=function(){var e=mi({props:{},name:NZ}),t=Oi(),r=yw(),n=r.darkTheme,i=r.defaultTheme,s=Zu("(prefers-color-scheme: dark)",{noSsr:!0}),u=DZ(i||(s&&n?"dark":"light")),a=u[0],p=u[1],d=function(){p(a==="dark"?"light":"dark")},g=t("ra.action.toggle_theme",{_:"Toggle Theme"});return qe.createElement(sy,{title:g,enterDelay:300},qe.createElement(Z3e,iI({color:"inherit",onClick:d,"aria-label":g},e),a==="dark"?qe.createElement(V3e,null):qe.createElement(U3e,null)))},NZ="RaToggleThemeButton",Z3e=Qt(Uo,{name:NZ,overridesResolver:function(e,t){return t.root}})({}),aI=function(){return aI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},aI.apply(this,arguments)},X3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},BZ=R.memo(function(e){var t=mi({props:e,name:Mg}),r=t.alwaysOn,n=t.children,i=t.className,s=t.color,u=s===void 0?"secondary":s,a=t.toolbar,p=a===void 0?Y3e:a,d=t.userMenu,g=d===void 0?J3e:d,_=t.container,C=_===void 0?r?"div":z3e:_,S=X3e(t,["alwaysOn","children","className","color","toolbar","userMenu","container"]),I=Zu(function(O){return O.breakpoints.down("sm")});return R.createElement(C,{className:i},R.createElement(Q3e,aI({className:Fp.appBar,color:u},S),R.createElement(kM,{disableGutters:!0,variant:I?"regular":"dense",className:Fp.toolbar},R.createElement(A3e,{className:Fp.menuButton}),R.Children.count(n)===0?R.createElement(q3e,{className:Fp.title}):n,p,typeof g=="boolean"?g===!0?R.createElement(RZ,null):null:g)))}),K3e=function(){var e=CW(),t=yw().darkTheme;return R.createElement(R.Fragment,null,e&&e.length>1?R.createElement(zMe,null):null,t&&R.createElement(W3e,null),R.createElement(I3e,null))},Y3e=R.createElement(K3e,null),J3e=R.createElement(RZ,null),Mg="RaAppBar",Fp={appBar:"".concat(Mg,"-appBar"),toolbar:"".concat(Mg,"-toolbar"),menuButton:"".concat(Mg,"-menuButton"),title:"".concat(Mg,"-title")},Q3e=Qt(Vne,{name:Mg,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n=e.theme;return t={},t["& .".concat(Fp.toolbar)]=(r={padding:"0 ".concat(n.spacing(1))},r[n.breakpoints.down("md")]={minHeight:n.spacing(6)},r),t["& .".concat(Fp.menuButton)]={marginRight:"0.2em"},t["& .".concat(Fp.title)]={},t});const eIe=Si([Ue.jsx("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),Ue.jsx("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")]);var Lx=function(){return Lx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Lx.apply(this,arguments)},tIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},jZ=function(e){var t=e.title,r=e.defaultTitle,n=e.className,i=tIe(e,["title","defaultTitle","className"]),s=Oi();return R.createElement("span",{className:n},t?typeof t=="string"?R.createElement("span",Lx({},i),s(t,{_:t})):t:R.createElement("span",Lx({},i),r))};const rIe=Si(Ue.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}));var nIe=function(e){var t=mi({props:e,name:x0}),r=t.children,n=t.editor,i=t.preferenceKey,s=t.openButtonLabel,u=s===void 0?"ra.configurable.customize":s,a=t.sx,p="preferences.".concat(i),d=TR(),g=!!d,_=Oi(),C=d||{},S=C.isEnabled,I=C.setEditor,O=C.preferenceKey,P=C.setPreferenceKey,k=p===O,F=R.useRef(k),B=R.useRef(null),N=R.useState(!1),G=N[0],$=N[1];if(R.useEffect(function(){F.current=k},[k]),R.useEffect(function(){return function(){F.current&&(P&&P(null),I&&I(null))}},[I,P]),!g)return r;var X=function(){if(!I)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");if(I(R.cloneElement(n,{preferenceKey:p,key:p})),!P)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");P(p)},ee=function(){$(!0)},J=function(){$(!1)};return R.createElement(AZ,{value:p},R.createElement(iIe,{className:Br(Th.root,S&&Th.editMode,k&&Th.editorActive),sx:a,ref:B,onMouseEnter:S?ee:void 0,onMouseLeave:S?J:void 0},r),R.createElement(AU,{open:!!S&&(G||k),sx:{pointerEvents:"none","& .MuiPaper-root":{pointerEvents:"auto",borderRadius:10,padding:"2px",lineHeight:0,backgroundColor:"warning.light",color:"warning.contrastText","&:hover":{cursor:"pointer"}}},anchorEl:B.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},onClose:J,PaperProps:{elevation:1,onMouseEnter:ee,onMouseLeave:J,title:_(u),onClick:X},disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:!0,disableScrollLock:!0,marginThreshold:8},R.createElement(rIe,{fontSize:"12px"})))},x0="RaConfigurable",Th={root:"".concat(x0,"-root"),editMode:"".concat(x0,"-editMode"),editorActive:"".concat(x0,"-editorActive")},iIe=Qt("span",{name:x0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative",display:"inline-block"},t["&.".concat(Th.editMode)]={transition:r.transitions.create("outline"),outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 30%) solid 2px")},t["&.".concat(Th.editMode,":hover ")]={outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 50%) solid 2px")},t["&.".concat(Th.editMode,".").concat(Th.editorActive," , &.").concat(Th.editMode,".").concat(Th.editorActive,":hover ")]={outline:"".concat((r.vars||r).palette.warning.main," solid 2px")},t});const aIe=Si(Ue.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),oIe=Si(Ue.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}));var sIe=function(){var e=Oi();return f3e("ra.configurable.inspector.title",{_:"Inspector"}),R.createElement($o,null,e("ra.configurable.inspector.content",{_:"Hover the application UI elements to configure them"}))},zZ=function(){var e=TR(),t=e.isEnabled,r=e.disable,n=e.title,i=e.titleOptions,s=e.editor,u=e.preferenceKey,a=R.useRef(!1),p=APe(u),d=Uf(),g=Oi(),_=R.useState(0),C=_[0],S=_[1],I=fm("ra.inspector.position",{x:document?.body.clientWidth-d.breakpoints.values.sm/2-8,y:8}),O=I[0],P=I[1],k=R.useState(),F=k[0],B=k[1],N=function(X){var ee=document?.elementFromPoint(X.clientX,X.clientY);ee?.id==="inspector-dialog-title"&&(a.current=!0,X.dataTransfer.effectAllowed="move",X.dataTransfer.setData("inspector",""),setTimeout(function(){X.target.classList.add("hide")},0),B({x:X.clientX-O.x,y:X.clientY-O.y}))},G=function(X){a.current&&F&&(P({x:X.clientX-F.x,y:X.clientY-F.y}),X.target.classList.remove("hide"),a.current=!1)};R.useEffect(function(){if(t){var X=function(ee){ee.dataTransfer.types.includes("inspector")&&ee.preventDefault()};return document?.addEventListener("dragover",X),function(){document?.removeEventListener("dragover",X)}}},[t]),R.useEffect(function(){if(t){var X=function(){window?.requestAnimationFrame(function(){P(function(ee){return{x:Math.min(ee.x,document?.body.clientWidth-d.breakpoints.values.sm/2-8),y:Math.min(ee.y,window?.innerHeight-50)}})})};return X(),window?.addEventListener("resize",X),function(){window?.removeEventListener("resize",X)}}},[t,P,d.breakpoints.values.sm]);var $=function(){p(),S(function(X){return X+1})};return t?R.createElement(lIe,{className:w0.modal,elevation:3,draggable:!0,onDragStart:N,onDragEnd:G,sx:{left:O.x,top:O.y}},R.createElement("div",{className:w0.title},R.createElement($o,{id:"inspector-dialog-title",variant:"overline",component:"div",sx:{py:1,px:2,flex:"1"}},n&&g(n,i)),R.createElement("span",{id:"inspector-toolbar"}),u&&R.createElement(Uo,{"aria-label":g("ra.action.remove"),onClick:$,size:"small"},R.createElement(oIe,{fontSize:"inherit"})),R.createElement(Uo,{"aria-label":g("ra.action.close"),onClick:r,size:"small",sx:{mr:1}},R.createElement(aIe,{fontSize:"inherit"}))),R.createElement("div",{className:w0.content,key:C},R.createElement(AZ,{value:u},s||R.createElement(sIe,null)))):null},L1="RaInspector",w0={modal:"".concat(L1,"-modal"),title:"".concat(L1,"-title"),content:"".concat(L1,"-content")},lIe=Qt(tf,{name:L1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"fixed",zIndex:r.zIndex.modal+1,width:r.breakpoints.values.sm/2,transition:r.transitions.create(["height","width"]),"&.hide":{display:"none"}},t["& .".concat(w0.title)]={display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},t["& .".concat(w0.content)]={overflowY:"auto",maxHeight:"75vh",padding:r.spacing(2),paddingTop:0},t});zZ.displayName="Inspector";var _d=function(){return _d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_d.apply(this,arguments)},$Z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},uIe=function(){var e=c3e("","");return R.createElement("form",null,R.createElement(OU,_d({label:"title",variant:"filled",size:"small",fullWidth:!0,sx:{mb:1}},e)))},cIe=function(e){var t=e.preferenceKey,r=e.title,n=e.defaultTitle,i=$Z(e,["preferenceKey","title","defaultTitle"]),s=Cl().pathname;return R.createElement(nIe,{editor:R.createElement(uIe,null),preferenceKey:t||"".concat(s,".title"),sx:{"&.RaConfigurable-editMode":{margin:"2px"}}},R.createElement(fIe,_d({title:r,defaultTitle:n},i)))},fIe=function(e){var t=e.title,r=e.defaultTitle,n=$Z(e,["title","defaultTitle"]),i=TZ()[0],s=Oi(),u=Al();return typeof i=="string"?R.createElement("span",_d({className:n.className},n),s(i,_d(_d({},u),{_:i}))):R.createElement(R.Fragment,null,R.createElement(jZ,_d({title:t,defaultTitle:r},n)))},Dx=function(){return Dx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dx.apply(this,arguments)},hIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Nb=function(e){var t=e.defaultTitle,r=e.title,n=e.preferenceKey,i=hIe(e,["defaultTitle","title","preferenceKey"]),s=R.useState(function(){return typeof document<"u"?document.getElementById("react-admin-title"):null}),u=s[0],a=s[1];if(R.useEffect(function(){a(function(d){var g=typeof document<"u"&&document.body.contains(d);return d&&g?d:typeof document<"u"?document.getElementById("react-admin-title"):null})},[]),!u)return null;CR(!t&&!r,"Missing title prop in <Title> element");var p=n===!1?R.createElement(jZ,Dx({title:r,defaultTitle:t},i)):R.createElement(cIe,Dx({title:r,defaultTitle:t,preferenceKey:n},i));return R.createElement(R.Fragment,null,A2.createPortal(p,u))},oI=function(){return oI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},oI.apply(this,arguments)},dIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},t1,pIe=function(e){var t=mi({props:e,name:S0}),r=t.className,n=t.icon,i=n===void 0?gIe:n,s=t.textPrimary,u=s===void 0?"ra.page.authentication_error":s,a=t.textSecondary,p=a===void 0?"ra.message.authentication_error":a,d=dIe(t,["className","icon","textPrimary","textSecondary"]),g=Oi(),_=SR();return R.createElement(mIe,oI({className:Br(rb.root,r)},d),R.createElement(Nb,{defaultTitle:_}),R.createElement("div",{className:rb.message},i,R.createElement($o,{variant:"h5",sx:{mt:3,color:"text.secondary"}},g(u,{_:u})),R.createElement($o,{variant:"body2"},g(p,{_:p}))))},S0="RaAuthenticationError",rb={root:"".concat(S0,"-root"),icon:"".concat(S0,"-icon"),message:"".concat(S0,"-message")},mIe=Qt("div",{name:S0,overridesResolver:function(e,t){return t.root}})((t1={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},t1["& .".concat(rb.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},t1["& .".concat(rb.icon)]={width:"9em",height:"9em"},t1)),gIe=R.createElement(eIe,{className:rb.icon});const yIe=Si(Ue.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),vIe=Si(Ue.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}));var E0=function(){return E0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},E0.apply(this,arguments)},bIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},_Ie=function(e){var t,r=mi({props:e,name:kx}),n=r.className,i=r.isOpen,s=i===void 0?!1:i,u=r.loading,a=r.title,p=r.content,d=r.cancel,g=d===void 0?"ra.action.cancel":d,_=r.confirm,C=_===void 0?"ra.action.confirm":_,S=r.confirmColor,I=S===void 0?"primary":S,O=r.ConfirmIcon,P=O===void 0?yIe:O,k=r.CancelIcon,F=k===void 0?vIe:k,B=r.onClose,N=r.onConfirm,G=r.translateOptions,$=G===void 0?{}:G,X=r.titleTranslateOptions,ee=X===void 0?$:X,J=r.contentTranslateOptions,le=J===void 0?$:J,Z=bIe(r,["className","isOpen","loading","title","content","cancel","confirm","confirmColor","ConfirmIcon","CancelIcon","onClose","onConfirm","translateOptions","titleTranslateOptions","contentTranslateOptions"]),H=Oi(),oe=R.useCallback(function(ce){ce.stopPropagation(),N(ce)},[N]),ue=R.useCallback(function(ce){ce.stopPropagation()},[]);return R.createElement(xIe,E0({className:n,open:s,onClose:B,onClick:ue,"aria-labelledby":"alert-dialog-title"},Z),R.createElement(Joe,{id:"alert-dialog-title"},typeof a=="string"?H(a,E0({_:a},ee)):a),R.createElement(Goe,null,typeof p=="string"?R.createElement(Xoe,null,H(p,E0({_:p},le))):p),R.createElement(joe,null,R.createElement(Yc,{disabled:u,onClick:B,startIcon:R.createElement(F,null)},H(g,{_:g})),R.createElement(Yc,{disabled:u,onClick:oe,className:Br("ra-confirm",(t={},t[Fx.confirmWarning]=I==="warning",t[Fx.confirmPrimary]=I==="primary",t)),autoFocus:!0,startIcon:R.createElement(P,null)},H(C,{_:C}))))},kx="RaConfirm",Fx={confirmPrimary:"".concat(kx,"-confirmPrimary"),confirmWarning:"".concat(kx,"-confirmWarning")},xIe=Qt(koe,{name:kx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(Fx.confirmPrimary)]={color:(r.vars||r).palette.primary.main},t["& .".concat(Fx.confirmWarning)]={color:(r.vars||r).palette.error.main,"&:hover":{backgroundColor:"color-mix(in srgb, ".concat((r.vars||r).palette.error.main,", transparent 12%)"),"@media (hover: none)":{backgroundColor:"transparent"}}},t});const wIe=Si(Ue.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),qZ=["shift","alt","meta","mod","ctrl","control"],SIe={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Sd(e){return(SIe[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function UZ(e){return qZ.includes(e)}function xT(e,t=","){return e.toLowerCase().split(t)}function wT(e,t="+",r=">",n=!1,i){let s=[],u=!1;e.includes(r)?(u=!0,s=e.toLocaleLowerCase().split(r).map(d=>Sd(d))):s=e.toLocaleLowerCase().split(t).map(d=>Sd(d));const a={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:n},p=s.filter(d=>!qZ.includes(d));return{...a,keys:p,description:i,isSequence:u}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&VZ([Sd(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&GZ([Sd(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Rh.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Rh.clear()},0)}));const Rh=new Set;function MR(e){return Array.isArray(e)}function EIe(e,t=","){return(MR(e)?e:e.split(t)).every(r=>Rh.has(r.trim().toLowerCase()))}function VZ(e){const t=Array.isArray(e)?e:[e];Rh.has("meta")&&Rh.forEach(r=>!UZ(r)&&Rh.delete(r.toLowerCase())),t.forEach(r=>Rh.add(r.toLowerCase()))}function GZ(e){const t=Array.isArray(e)?e:[e];e==="meta"?Rh.clear():t.forEach(r=>Rh.delete(r.toLowerCase()))}function CIe(e,t,r){(typeof r=="function"&&r(e,t)||r===!0)&&e.preventDefault()}function AIe(e,t,r){return typeof r=="function"?r(e,t):r===!0||r===void 0}function TIe(e){return HZ(e,["input","textarea","select"])}function HZ(e,t=!1){const{target:r,composed:n}=e;let i;return PIe(r)&&n?i=e.composedPath()[0]&&e.composedPath()[0].tagName:i=r&&r.tagName,MR(t)?!!(i&&t&&t.some(s=>s.toLowerCase()===i.toLowerCase())):!!(i&&t&&t)}function PIe(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function IIe(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(r=>t.includes(r))||e.includes("*"):!0}const MIe=(e,t,r=!1)=>{const{alt:n,meta:i,mod:s,shift:u,ctrl:a,keys:p,useKey:d}=t,{code:g,key:_,ctrlKey:C,metaKey:S,shiftKey:I,altKey:O}=e,P=Sd(g);if(d&&p?.length===1&&p.includes(_))return!0;if(!(p!=null&&p.includes(P))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(P))return!1;if(!r){if(n!==O&&P!=="alt"||u!==I&&P!=="shift")return!1;if(s){if(!S&&!C)return!1}else if(i!==S&&P!=="meta"&&P!=="os"||a!==C&&P!=="ctrl"&&P!=="control")return!1}return p&&p.length===1&&p.includes(P)?!0:p?EIe(p):!p},OIe=R.createContext(void 0),RIe=()=>R.useContext(OIe);function WZ(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((r,n)=>r&&WZ(e[n],t[n]),!0):e===t}const LIe=R.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),DIe=()=>R.useContext(LIe);function kIe(e){const t=R.useRef(void 0);return WZ(t.current,e)||(t.current=e),t.current}const Y7=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},FIe=typeof window<"u"?R.useLayoutEffect:R.useEffect;function NIe(e,t,r,n){const i=R.useRef(null),s=R.useRef(!1),u=r instanceof Array?n instanceof Array?void 0:n:r,a=MR(e)?e.join(u?.delimiter):e,p=r instanceof Array?r:n instanceof Array?n:void 0,d=R.useCallback(t,p??[]),g=R.useRef(d);p?g.current=d:g.current=t;const _=kIe(u),{activeScopes:C}=DIe(),S=RIe();return FIe(()=>{if(_?.enabled===!1||!IIe(C,_?.scopes))return;let I=[],O;const P=(N,G=!1)=>{var $;if(!(TIe(N)&&!HZ(N,_?.enableOnFormTags))){if(i.current!==null){const X=i.current.getRootNode();if((X instanceof Document||X instanceof ShadowRoot)&&X.activeElement!==i.current&&!i.current.contains(X.activeElement)){Y7(N);return}}($=N.target)!=null&&$.isContentEditable&&!(_!=null&&_.enableOnContentEditable)||xT(a,_?.delimiter).forEach(X=>{var ee,J,le,Z;if(X.includes(_?.splitKey??"+")&&X.includes(_?.sequenceSplitKey??">")){console.warn(`Hotkey ${X} contains both ${_?.splitKey??"+"} and ${_?.sequenceSplitKey??">"} which is not supported.`);return}const H=wT(X,_?.splitKey,_?.sequenceSplitKey,_?.useKey,_?.description);if(H.isSequence){O=setTimeout(()=>{I=[]},_?.sequenceTimeoutMs??1e3);const oe=H.useKey?N.key:Sd(N.code);if(UZ(oe.toLowerCase()))return;I.push(oe);const ue=(ee=H.keys)==null?void 0:ee[I.length-1];if(oe!==ue){I=[],O&&clearTimeout(O);return}I.length===((J=H.keys)==null?void 0:J.length)&&(g.current(N,H),O&&clearTimeout(O),I=[])}else if(MIe(N,H,_?.ignoreModifiers)||(le=H.keys)!=null&&le.includes("*")){if((Z=_?.ignoreEventWhen)!=null&&Z.call(_,N)||G&&s.current)return;if(CIe(N,H,_?.preventDefault),!AIe(N,H,_?.enabled)){Y7(N);return}g.current(N,H),G||(s.current=!0)}})}},k=N=>{N.code!==void 0&&(VZ(Sd(N.code)),(_?.keydown===void 0&&_?.keyup!==!0||_!=null&&_.keydown)&&P(N))},F=N=>{N.code!==void 0&&(GZ(Sd(N.code)),s.current=!1,_!=null&&_.keyup&&P(N,!0))},B=i.current||u?.document||document;return B.addEventListener("keyup",F,u?.eventListenerOptions),B.addEventListener("keydown",k,u?.eventListenerOptions),S&&xT(a,_?.delimiter).forEach(N=>S.addHotkey(wT(N,_?.splitKey,_?.sequenceSplitKey,_?.useKey,_?.description))),()=>{B.removeEventListener("keyup",F,u?.eventListenerOptions),B.removeEventListener("keydown",k,u?.eventListenerOptions),S&&xT(a,_?.delimiter).forEach(N=>S.removeHotkey(wT(N,_?.splitKey,_?.sequenceSplitKey,_?.useKey,_?.description))),I=[],O&&clearTimeout(O)}},[a,_,C]),i}var sI=function(){return sI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sI.apply(this,arguments)},BIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},jIe=function(e){var t=e.className,r=e.keyboardShortcut,n=BIe(e,["className","keyboardShortcut"]);return r?R.createElement(zIe,sI({className:Br(lI.root,t)},n),r.split(">").map(function(i,s,u){return R.createElement(R.Fragment,{key:"".concat(i,"-").concat(s)},i.split("+").map(function(a,p){return R.createElement(R.Fragment,{key:"".concat(a,"-").concat(p)},R.createElement($o,{component:"kbd",className:lI.kbd,key:a},J7[a]?J7[a]:a.toUpperCase()))}),s<u.length-1?R.createElement(R.Fragment,null,""):null)})):null},J7={meta:"",mod:"",ctrl:"",shift:"",alt:"",enter:"",esc:"",escape:"",backspace:"",delete:"",tab:"",space:"",up:"",down:"",left:"",right:"",home:"",end:"",pageup:"",pagedown:""},Q7="RaKeyboardShortcut",lI={root:"".concat(Q7,"-root"),kbd:"".concat(Q7,"-kbd")},zIe=Qt("div")(function(e){var t,r=e.theme;return t={opacity:.7},t["& .".concat(lI.kbd)]={padding:"4px 5px",display:"inline-block",whiteSpace:"nowrap",margin:"0 1px",fontSize:"11px",lineHeight:"10px",color:r.palette.text.primary,verticalAlign:"middle",border:"1px solid ".concat(r.palette.divider),borderRadius:6,boxShadow:"inset 0 -1px 0 ".concat(r.palette.divider)},t}),nb=function(){return nb=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nb.apply(this,arguments)},$Ie=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},OR=R.forwardRef(function(e,t){var r=mi({props:e,name:Og}),n=r.className,i=r.primaryText,s=r.leftIcon,u=r.onClick;r.sidebarIsOpen;var a=r.tooltipProps,p=r.children,d=r.keyboardShortcut,g=r.keyboardShortcutRepresentation,_=$Ie(r,["className","primaryText","leftIcon","onClick","sidebarIsOpen","tooltipProps","children","keyboardShortcut","keyboardShortcutRepresentation"]),C=Zu(function(J){return J.breakpoints.down("md")}),S=Oi(),I=qh(),O=Fb(),P=O[0],k=O[1],F=R.useCallback(function(J){C&&k(!1),u&&u(J)},[k,C,u]),B=(typeof r.to=="string"?r.to:r.to.pathname)||"",N=MSe({path:B,end:B==="".concat(I,"/")}),G=R.useRef(null),$=Oo(G,t),X=Mo(function(){var J;return(J=G.current)===null||J===void 0?void 0:J.click()});NIe(d??[],X,{enabled:d!=null});var ee=function(){var J;return qe.createElement(qIe,nb({className:Br(n,Rf.root,(J={},J[Rf.active]=!!N,J)),component:UIe,ref:$,tabIndex:0},_,{onClick:F}),s&&qe.createElement(mb,{className:Rf.icon},s),qe.createElement($o,{variant:"inherit",noWrap:!0,sx:{flexGrow:1}},p||(typeof i=="string"?S(i,{_:i}):i)),d?g??qe.createElement(jIe,{className:Rf.shortcut,keyboardShortcut:d}):null)};return P?ee():qe.createElement(sy,nb({title:typeof i=="string"?S(i,{_:i}):i,placement:"right"},a),ee())}),Og="RaMenuItemLink",Rf={root:"".concat(Og,"-root"),active:"".concat(Og,"-active"),icon:"".concat(Og,"-icon"),shortcut:"".concat(Og,"-shortcut")},qIe=Qt(MM,{name:Og,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={color:(r.vars||r).palette.text.secondary},t["& .".concat(Rf.icon)]={color:(r.vars||r).palette.text.secondary},t["& .".concat(Rf.shortcut)]={color:(r.vars||r).palette.text.secondary,fontSize:r.typography.body2.fontSize,opacity:0,display:"none",transition:"opacity 0.3s"},t["&:hover .".concat(Rf.shortcut)]={opacity:.7,display:"inline-flex"},t["&.".concat(Rf.active)]={color:(r.vars||r).palette.text.primary},t["& .".concat(Rf.icon)]={minWidth:r.spacing(5)},t[".MuiList-dense > & > .".concat(Rf.icon)]={minWidth:r.spacing(3.5)},t}),UIe=R.forwardRef(function(e,t){return qe.createElement(xy,nb({ref:t},e))}),uI=function(){return uI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},uI.apply(this,arguments)},VIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ZZ=function(e){var t=qh(),r=e.leftIcon,n=r===void 0?qe.createElement(wIe,null):r,i=e.to,s=i===void 0?"".concat(t,"/"):i,u=e.primaryText,a=u===void 0?"ra.page.dashboard":u,p=VIe(e,["leftIcon","to","primaryText"]);return qe.createElement(OR,uI({leftIcon:n,to:s,primaryText:a},p))};const GIe=Si(Ue.jsx("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"})),XZ=Si(Ue.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}));var cI=function(){return cI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cI.apply(this,arguments)},HIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KZ=function(e){var t=mi({props:e,name:Ch}),r=t.error,n=t.errorComponent,i=t.errorInfo,s=t.resetErrorBoundary,u=t.className,a=HIe(t,["error","errorComponent","errorInfo","resetErrorBoundary","className"]),p=Oi(),d=SR();return MW(s),n?R.createElement(n,{error:r,errorInfo:i,title:d}):R.createElement(R.Fragment,null,d&&R.createElement(Nb,{title:d}),R.createElement(WIe,cI({className:u},a),R.createElement("h1",{className:Pf.title,role:"alert"},R.createElement(GIe,{className:Pf.icon}),p("ra.page.error")),R.createElement("div",null,p("ra.message.error")),!1,R.createElement("div",{className:Pf.toolbar},R.createElement(Yc,{variant:"contained",startIcon:R.createElement(XZ,null),onClick:ZIe},p("ra.action.back")))))},Ch="RaError",Pf={title:"".concat(Ch,"-title"),icon:"".concat(Ch,"-icon"),panel:"".concat(Ch,"-panel"),panelSummary:"".concat(Ch,"-panelSummary"),panelDetails:"".concat(Ch,"-panelDetails"),toolbar:"".concat(Ch,"-toolbar"),advice:"".concat(Ch,"-advice")},WIe=Qt("div",{name:Ch,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},t[r.breakpoints.down("md")]={padding:"1em"},t.fontFamily="Roboto, sans-serif",t.opacity=.5,t["& .".concat(Pf.title)]={display:"flex",alignItems:"center"},t["& .".concat(Pf.icon)]={width:"2em",height:"2em",marginRight:"0.5em"},t["& .".concat(Pf.panel)]={marginTop:"1em",maxWidth:"60em"},t["& .".concat(Pf.panelSummary)]={userSelect:"all"},t["& .".concat(Pf.panelDetails)]={whiteSpace:"pre-wrap"},t["& .".concat(Pf.toolbar)]={marginTop:"2em"},t["& .".concat(Pf.advice)]={marginTop:"2em"},t});function ZIe(){window.history.go(-1)}var Nx=function(){return Nx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Nx.apply(this,arguments)},XIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},YZ=function(e){var t=mi({props:e,name:Qs}),r=t.appBarAlwaysOn,n=t.children;t.closedSize,t.size;var i=XIe(t,["appBarAlwaysOn","children","closedSize","size"]),s=Zu(function(_){return _.breakpoints.down("sm")}),u=Fb(),a=u[0],p=u[1];yCe();var d=RU(),g=function(){return p(!a)};return s?R.createElement(e9,Nx({variant:"temporary",open:a,onClose:g,classes:el},i),n):R.createElement(e9,Nx({variant:"permanent",open:a,onClose:g,classes:el,className:Br(d&&!r?el.appBarCollapsed:"",a?KIe:YIe)},i),R.createElement("div",{className:el.fixed},n))},Qs="RaSidebar",el={docked:"".concat(Qs,"-docked"),paper:"".concat(Qs,"-paper"),paperAnchorLeft:"".concat(Qs,"-paperAnchorLeft"),paperAnchorRight:"".concat(Qs,"-paperAnchorRight"),paperAnchorTop:"".concat(Qs,"-paperAnchorTop"),paperAnchorBottom:"".concat(Qs,"-paperAnchorBottom"),paperAnchorDockedLeft:"".concat(Qs,"-paperAnchorDockedLeft"),paperAnchorDockedTop:"".concat(Qs,"-paperAnchorDockedTop"),paperAnchorDockedRight:"".concat(Qs,"-paperAnchorDockedRight"),paperAnchorDockedBottom:"".concat(Qs,"-paperAnchorDockedBottom"),modal:"".concat(Qs,"-modal"),fixed:"".concat(Qs,"-fixed"),appBarCollapsed:"".concat(Qs,"-appBarCollapsed")},KIe="".concat(Qs,"-open"),YIe="".concat(Qs,"-closed"),e9=Qt(lse,{name:Qs,slot:"Root",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(){return!0}})(function(e){var t,r,n,i=e.open,s=e.theme;return t={height:"calc(100vh - 3em)",marginTop:0,transition:s.transitions.create("margin",{easing:s.transitions.easing.easeOut,duration:s.transitions.duration.enteringScreen})},t["&.".concat(el.appBarCollapsed)]=(r={marginTop:s.spacing(-6)},r[s.breakpoints.down("sm")]={marginTop:s.spacing(-7)},r.transition=s.transitions.create("margin",{easing:s.transitions.easing.sharp,duration:s.transitions.duration.leavingScreen}),r),t["& .".concat(el.docked)]={},t["& .".concat(el.paper)]={},t["& .".concat(el.paperAnchorLeft)]={},t["& .".concat(el.paperAnchorRight)]={},t["& .".concat(el.paperAnchorTop)]={},t["& .".concat(el.paperAnchorBottom)]={},t["& .".concat(el.paperAnchorDockedLeft)]={},t["& .".concat(el.paperAnchorDockedTop)]={},t["& .".concat(el.paperAnchorDockedRight)]={},t["& .".concat(el.paperAnchorDockedBottom)]={},t["& .".concat(el.modal)]={},t["& .".concat(el.fixed)]={position:"fixed",height:"calc(100vh - 3em)",overflowX:"hidden",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}},t["& .MuiPaper-root"]=(n={position:"relative",width:i?Zc(s,"sidebar.width",JZ):Zc(s,"sidebar.closedWidth",QZ),transition:s.transitions.create("width",{easing:s.transitions.easing.sharp,duration:s.transitions.duration.leavingScreen}),backgroundColor:"transparent",borderRight:"none"},n[s.breakpoints.only("xs")]={marginTop:0,height:"100vh",position:"inherit",backgroundColor:(s.vars||s).palette.background.default},n[s.breakpoints.up("md")]={border:"none"},n.zIndex="inherit",n),t}),JZ=240,QZ=55;const JIe=Si(Ue.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}));var fI=function(){return fI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},fI.apply(this,arguments)},QIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},eX=function(e){var t=e.name,r=QIe(e,["name"]),n=Ib(),i=kb({action:"list",resource:t}),s=i.canAccess,u=i.error,a=i.isPending,p=wy(),d=Pb();return!n||!n[t]||a||s===!1||u!=null?null:R.createElement(OR,fI({to:d({resource:t,type:"list"}),state:{_scrollToTop:!0},primaryText:R.createElement(R.Fragment,null,p(t,2)),leftIcon:n[t].icon?R.createElement(n[t].icon):R.createElement(JIe,null)},r))},tX=function(){var e=Ib();return R.createElement(R.Fragment,null,Object.keys(e).filter(function(t){return e[t].hasList}).map(function(t){return R.createElement(eX,{key:t,name:t})}))},hI=function(){return hI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hI.apply(this,arguments)},eMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Ay=function(e){var t,r=mi({props:e,name:Bx}),n=r.children,i=r.className;r.hasDashboard;var s=eMe(r,["children","className","hasDashboard"]),u=ePe(),a=Fb()[0];return R.createElement(tMe,hI({className:Br((t={},t[jx.open]=a,t[jx.closed]=!a,t),i)},s),u&&!n&&R.createElement(ZZ,null),n??R.createElement(tX,null))};Ay.Item=OR;Ay.DashboardItem=ZZ;Ay.ResourceItem=eX;Ay.ResourceItems=tX;var Bx="RaMenu",jx={open:"".concat(Bx,"-open"),closed:"".concat(Bx,"-closed")},tMe=Qt(EU,{name:Bx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"flex-start"},t[r.breakpoints.only("xs")]={marginTop:0},t.transition=r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),t["&.".concat(jx.open)]={width:Zc(r,"sidebar.width",JZ)},t["&.".concat(jx.closed)]={width:Zc(r,"sidebar.closedWidth",QZ)},t}),dI=function(){return dI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dI.apply(this,arguments)},rMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Ty=function(e){var t=mi({props:e,name:zx}),r=t.className,n=t.loadingPrimary,i=n===void 0?"ra.page.loading":n,s=t.loadingSecondary,u=s===void 0?"ra.message.loading":s,a=t.timeout,p=a===void 0?1e3:a,d=rMe(t,["className","loadingPrimary","loadingSecondary","timeout"]),g=bAe(p),_=Oi();return g?R.createElement(nMe,dI({className:r},d),R.createElement("div",{className:$x.message},R.createElement(ay,{className:$x.icon}),R.createElement($o,{variant:"h5",sx:{mt:3,color:"text.secondary"}},_(i,{_:i})),R.createElement($o,{variant:"body2"},_(u,{_:u})))):null},zx="RaLoading",$x={icon:"".concat(zx,"-icon"),message:"".concat(zx,"-message")},nMe=Qt("div",{name:zx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},t["& .".concat($x.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",color:(r.vars||r).palette.text.disabled,paddingTop:"1em",paddingBottom:"1em"},t["& .".concat($x.icon)]={width:"9em",height:"9em"},t}),pI=function(){return pI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pI.apply(this,arguments)},iMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},aMe=function(e){var t=mi({props:e,name:C0}),r=t.appBar,n=r===void 0?BZ:r,i=t.appBarAlwaysOn,s=t.children,u=t.className,a=t.error,p=t.menu,d=p===void 0?Ay:p,g=t.sidebar,_=g===void 0?YZ:g,C=iMe(t,["appBar","appBarAlwaysOn","children","className","error","menu","sidebar"]),S=R.useState(void 0),I=S[0],O=S[1],P=function(k,F){O(F)};return qe.createElement(oMe,pI({className:Br("layout",u)},C),qe.createElement(eOe,null),qe.createElement("div",{className:qg.appFrame},qe.createElement(n,{alwaysOn:i}),qe.createElement("main",{className:qg.contentWithSidebar},qe.createElement(_,{appBarAlwaysOn:i},qe.createElement(d,null)),qe.createElement("div",{id:"main-content",className:qg.content},qe.createElement(lZ,{onError:P,fallbackRender:function(k){var F=k.error,B=k.resetErrorBoundary;return qe.createElement(KZ,{error:F,errorComponent:a,errorInfo:I,resetErrorBoundary:B})}},qe.createElement(R.Suspense,{fallback:qe.createElement(Ty,null)},s)))),qe.createElement(zZ,null)))},C0="RaLayout",qg={appFrame:"".concat(C0,"-appFrame"),contentWithSidebar:"".concat(C0,"-contentWithSidebar"),content:"".concat(C0,"-content")},oMe=Qt("div",{name:C0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n,i=e.theme;return t={display:"flex",flexDirection:"column",zIndex:1,minHeight:"100vh",backgroundColor:(i.vars||i).palette.background.default,position:"relative",minWidth:"fit-content",width:"100%"},t["& .".concat(qg.appFrame)]=(r={display:"flex",flexDirection:"column",flexGrow:1,marginTop:i.spacing(6)},r[i.breakpoints.down("sm")]={marginTop:i.spacing(7)},r),t["& .".concat(qg.contentWithSidebar)]={display:"flex",flexGrow:1,transition:i.transitions.create("margin",{easing:i.transitions.easing.easeOut,duration:i.transitions.duration.enteringScreen})},t["& .".concat(qg.content)]=(n={backgroundColor:(i.vars||i).palette.background.default,zIndex:2,display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0,padding:0},n[i.breakpoints.up("xs")]={paddingRight:i.spacing(1),paddingLeft:i.spacing(1)},n),t}),mI=function(){return mI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mI.apply(this,arguments)},sMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lMe=function(e){var t=e.loadingPrimary,r=t===void 0?"ra.page.loading":t,n=e.loadingSecondary,i=n===void 0?"ra.message.loading":n,s=sMe(e,["loadingPrimary","loadingSecondary"]);return R.createElement(Ty,mI({loadingPrimary:r,loadingSecondary:i},s))};const uMe=Si([Ue.jsx("circle",{cx:"7",cy:"6",r:"2"},"0"),Ue.jsx("path",{d:"M11.15 12c-.31-.22-.59-.46-.82-.72l-1.4-1.55c-.19-.21-.43-.38-.69-.5-.29-.14-.62-.23-.96-.23h-.03C6.01 9 5 10.01 5 11.25V12H2v8c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-8zM7 20H5v-6h2zm4 0H9v-6h2zm4 0h-2v-6h2zm4 0h-2v-6h2zm-.35-14.14-.07-.07c-.57-.62-.82-1.41-.67-2.2L18 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71m-4 0-.07-.07c-.57-.62-.82-1.41-.67-2.2L14 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71"},"1")]);var gI=function(){return gI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gI.apply(this,arguments)},cMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},fMe=function(e){var t=mi({props:e,name:A0}),r=Oi(),n=Db().isPending,i=SR();return n?R.createElement(Ty,null):R.createElement(dMe,gI({},hMe(t)),R.createElement(Nb,{defaultTitle:i}),R.createElement("div",{className:Ug.message},R.createElement(uMe,{className:Ug.icon}),R.createElement("h1",null,r("ra.page.not_found")),R.createElement("div",null,r("ra.message.not_found"),".")),R.createElement("div",{className:Ug.toolbar},R.createElement(Yc,{variant:"contained",startIcon:R.createElement(XZ,null),onClick:pMe},r("ra.action.back"))))},hMe=function(e){e.staticContext,e.history,e.location,e.match;var t=cMe(e,["staticContext","history","location","match"]);return t},A0="RaNotFound",Ug={icon:"".concat(A0,"-icon"),message:"".concat(A0,"-message"),toolbar:"".concat(A0,"-toolbar")},dMe=Qt("div",{name:A0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("md")]={height:"100vh",marginTop:"-3em"},t["& .".concat(Ug.icon)]={width:"9em",height:"9em"},t["& .".concat(Ug.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t["& .".concat(Ug.toolbar)]={textAlign:"center",marginTop:"2em"},t});function pMe(){window.history.go(-1)}var yI=function(){return yI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},yI.apply(this,arguments)},t9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},mMe={vertical:"bottom",horizontal:"center"},gMe=function(e){var t,r=mi({props:e,name:Tp}),n=r.className,i=r.type,s=i===void 0?"info":i,u=r.autoHideDuration,a=u===void 0?4e3:u,p=r.multiLine,d=p===void 0?!1:p,g=r.anchorOrigin,_=g===void 0?mMe:g,C=t9(r,["className","type","autoHideDuration","multiLine","anchorOrigin"]),S=gW(),I=S.notifications,O=S.takeNotification,P=FTe(),k=R.useState(!1),F=k[0],B=k[1],N=R.useState(void 0),G=N[0],$=N[1],X=Oi();R.useEffect(function(){var $e;if(I.length&&!G){var Je=O();Je&&($(Je),B(!0))}if(G){var ge=function(Ee){Ee.preventDefault();var Ie="";return Ee.returnValue=Ie,Ie};if(!(($e=G?.notificationOptions)===null||$e===void 0)&&$e.undoable)return window.addEventListener("beforeunload",ge),function(){window.removeEventListener("beforeunload",ge)}}},[I,G,F,O]);var ee=R.useCallback(function(){B(!1)},[B]),J=R.useCallback(function(){var $e;if(G&&(!(($e=G.notificationOptions)===null||$e===void 0)&&$e.undoable)){var Je=P();Je?Je({isUndo:!1}):n7.emit("end",{isUndo:!1})}$(void 0)},[G,P]),le=R.useCallback(function(){var $e=P();$e?$e({isUndo:!0}):n7.emit("end",{isUndo:!0}),B(!1)},[P]);if(!G)return null;var Z=G.message,H=G.type,oe=G.notificationOptions,ue=oe||{},ce=ue.autoHideDuration,be=ue.messageArgs,Te=ue.multiLine,ve=ue.undoable,Ce=t9(ue,["autoHideDuration","messageArgs","multiLine","undoable"]);return R.createElement(QEe.Provider,{value:ee},R.createElement(yMe,yI({className:n,open:F,message:Z&&typeof Z=="string"&&X(Z,be),autoHideDuration:ce===void 0?a:ce??void 0,disableWindowBlurListener:ve,TransitionProps:{onExited:J},onClose:ee,ContentProps:{className:Br(gd[H||s],(t={},t[gd.multiLine]=Te||d,t))},action:ve?R.createElement(Yc,{color:"primary",className:gd.undo,size:"small",onClick:le},R.createElement(R.Fragment,null,X("ra.action.undo"))):null,anchorOrigin:_},C,Ce),Z&&typeof Z!="string"&&R.isValidElement(Z)?Z:void 0))},Tp="RaNotification",gd={success:"".concat(Tp,"-success"),error:"".concat(Tp,"-error"),warning:"".concat(Tp,"-warning"),undo:"".concat(Tp,"-undo"),multiLine:"".concat(Tp,"-multiLine")},yMe=Qt(Zle,{name:Tp,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme,n=e.type;return t={},t["& .".concat(gd.success)]={backgroundColor:r?.palette.success.main,color:r?.palette.success.contrastText},t["& .".concat(gd.error)]={backgroundColor:r?.palette.error.main,color:r?.palette.error.contrastText},t["& .".concat(gd.warning)]={backgroundColor:r?.palette.warning.main,color:r?.palette.warning.contrastText},t["& .".concat(gd.undo)]={color:n==="success"?r?.palette.success.contrastText:r?.palette.primary.light},t["& .".concat(gd.multiLine)]={whiteSpace:"pre-wrap"},t}),vI=function(){return vI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vI.apply(this,arguments)},vMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},rX=function(e){var t=mi({props:e,name:nX}),r=Zu(function(n){return n.breakpoints.down("sm")});return R.createElement(bMe,vI({disableGutters:!0,variant:r?"regular":"dense"},_Me(t)))},nX="RaTopToolbar",bMe=Qt(kM,{name:nX,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",justifyContent:"flex-end",alignItems:"flex-end",gap:r.spacing(1),whiteSpace:"nowrap",flex:"0 1 auto",padding:r.spacing(.5),paddingBottom:r.spacing(1)},t[r.breakpoints.down("md")]={flex:"0 1 100%"},t[r.breakpoints.down("sm")]={backgroundColor:(r.vars||r).palette.background.paper,padding:0,paddingBottom:0},t}),_Me=function(e){e.hasCreate;var t=vMe(e,["hasCreate"]);return t},bI=function(){return bI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},bI.apply(this,arguments)},xMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},wMe=function(e){var t=mi({props:e,name:iX}),r=t.label,n=t.className,i=t.icon,s=i===void 0?SMe:i,u=t.onClick,a=t.redirect,p=a===void 0?"list":a,d=t.mutationOptions,g=t.color,_=g===void 0?"error":g,C=t.successMessage,S=xMe(t,["label","className","icon","onClick","redirect","mutationOptions","color","successMessage"]),I=Al(t),O=_u(t);if(!O)throw new Error("<DeleteWithUndoButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var P=kW({record:I,resource:O,redirect:p,mutationMode:"undoable",mutationOptions:d,successMessage:C}),k=P.isPending,F=P.handleDelete,B=function(J){J.stopPropagation(),F(),u&&u(J)},N=Oi(),G=Sy(O),$=G(I),X=N("resources.".concat(O,".forcedCaseName"),{smart_count:1,_:Jp.humanize(N("resources.".concat(O,".name"),{smart_count:1,_:O?Jp.singularize(O):void 0}),!0)});R.isValidElement($)&&($="#".concat(I?.id));var ee=$p({resourceI18nKey:"resources.".concat(O,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:X,recordRepresentation:$},userText:r});return R.createElement(EMe,bI({onClick:B,disabled:k,label:R.createElement(R.Fragment,null,ee),"aria-label":typeof ee=="string"?ee:void 0,className:Br("ra-delete-button",n),key:"button",color:_},S),s)},SMe=R.createElement(PV,null),iX="RaDeleteWithUndoButton",EMe=Qt(Cy,{name:iX,overridesResolver:function(e,t){return t.root}})({}),Pp=function(){return Pp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pp.apply(this,arguments)},r9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},CMe=function(e){var t=mi({props:e,name:aX}),r=t.className,n=t.confirmTitle,i=t.confirmContent,s=t.confirmColor,u=s===void 0?"primary":s,a=t.icon,p=a===void 0?AMe:a,d=t.label,g=t.mutationMode,_=g===void 0?"pessimistic":g;t.onClick;var C=t.redirect,S=C===void 0?"list":C,I=t.translateOptions,O=I===void 0?{}:I,P=t.titleTranslateOptions,k=P===void 0?O:P,F=t.contentTranslateOptions,B=F===void 0?O:F,N=t.mutationOptions,G=t.color,$=G===void 0?"error":G,X=t.successMessage,ee=r9(t,["className","confirmTitle","confirmContent","confirmColor","icon","label","mutationMode","onClick","redirect","translateOptions","titleTranslateOptions","contentTranslateOptions","mutationOptions","color","successMessage"]),J=Oi(),le=Al(t),Z=_u(t),H=Yf(),oe=jW(Z),ue=Mb(),ce=qe.useState(!1),be=ce[0],Te=ce[1];if(!Z)throw new Error("<DeleteWithConfirmButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var ve=N||{},Ce=ve.onSuccess,$e=ve.onError,Je=r9(ve,["onSuccess","onError"]),ge=kW({record:le,redirect:S,mutationMode:_,mutationOptions:Pp(Pp({},Je),{onSuccess:function(Ft,dt,ke){Te(!1),Ce?Ce(Ft,dt,ke):(H(X??"resources.".concat(Z,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:J("ra.notification.deleted",{smart_count:1})},undoable:_==="undoable"}),le&&oe([le.id]),ue(S,Z))},onError:function(Ft,dt,ke){Te(!1),$e?$e(Ft,dt,ke):H(typeof Ft=="string"?Ft:Ft?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof Ft=="string"?Ft:Ft?.message?Ft.message:void 0}})}}),resource:Z,successMessage:X}),Ee=ge.isPending,Ie=ge.handleDelete,Le=function(Ft){Ft.stopPropagation(),Te(!0)},Ve=function(){Te(!1)},ht=Sy(Z),It=ht(le),xt=J("resources.".concat(Z,".forcedCaseName"),{smart_count:1,_:Jp.humanize(J("resources.".concat(Z,".name"),{smart_count:1,_:Z?Jp.singularize(Z):void 0}),!0)});R.isValidElement(It)&&(It="#".concat(le?.id));var rt=$p({resourceI18nKey:"resources.".concat(Z,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:xt,recordRepresentation:It},userText:d}),zt=$p({resourceI18nKey:"resources.".concat(Z,".message.delete_title"),baseI18nKey:"ra.message.delete_title",options:Pp({recordRepresentation:It,name:xt,id:le?.id},k),userText:n}),Lt=$p({resourceI18nKey:"resources.".concat(Z,".message.delete_content"),baseI18nKey:"ra.message.delete_content",options:Pp({recordRepresentation:It,name:xt,id:le?.id},B),userText:i});return qe.createElement(R.Fragment,null,qe.createElement(TMe,Pp({onClick:Le,label:qe.createElement(qe.Fragment,null,rt),"aria-label":typeof rt=="string"?rt:void 0,className:Br("ra-delete-button",r),key:"button",color:$},ee),p),qe.createElement(_Ie,{isOpen:be,loading:Ee,title:qe.createElement(qe.Fragment,null,zt),content:qe.createElement(qe.Fragment,null,Lt),confirmColor:u,onConfirm:Ie,onClose:Ve}))},AMe=qe.createElement(PV,null),aX="RaDeleteWithConfirmButton",TMe=Qt(Cy,{name:aX,overridesResolver:function(e,t){return t.root}})({}),qx=function(){return qx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qx.apply(this,arguments)},PMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},IMe=function(e){var t=mi({name:MMe,props:e}),r=t.mutationMode,n=PMe(t,["mutationMode"]),i=Al(t),s=_u(t);if(!s)throw new Error("<DeleteButton> components should be used inside a <Resource> component or provided the resource prop.");var u=kb({action:"delete",resource:s,record:i}),a=u.canAccess,p=u.isPending,d=dR();if(!i||i.id==null||!a||p)return null;var g=r||(d?.mutationMode?d.mutationMode:"undoable");return g==="undoable"?R.createElement(wMe,qx({record:i},n)):R.createElement(CMe,qx({mutationMode:g,record:i},n))},MMe="RaDeleteButton";const OMe=Si(Ue.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}));var _I=function(){return _I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_I.apply(this,arguments)},RMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},LMe=function(e){var t=mi({props:e,name:RR}),r=t.icon,n=r===void 0?kMe:r,i=t.label,s=t.scrollToTop,u=s===void 0?!0:s,a=t.className,p=RMe(t,["icon","label","scrollToTop","className"]),d=_u(t);if(!d)throw new Error("<EditButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var g=Al(t),_=Pb(),C=kb({action:"edit",resource:d,record:g}),S=C.canAccess,I=C.isPending,O=wy(),P=Sy(),k=P(g),F=typeof k=="string"?k:k?.toString(),B=$p({resourceI18nKey:"resources.".concat(d,".action.edit"),baseI18nKey:"ra.action.edit",options:{name:O(d,1),recordRepresentation:F},userText:i});return!g||!S||I?null:R.createElement(BMe,_I({component:xy,to:_({type:"edit",resource:d,id:g.id}),state:DMe[String(u)],label:R.createElement(R.Fragment,null,B),"aria-label":typeof B=="string"?B:void 0,onClick:FMe,className:Br(NMe.root,a)},p),n)},DMe={true:{_scrollToTop:!0},false:{}},kMe=R.createElement(OMe,null),FMe=function(e){return e.stopPropagation()},RR="RaEditButton",NMe={root:"".concat(RR,"-root")},BMe=Qt(Cy,{name:RR,overridesResolver:function(e,t){return t.root}})({});const jMe=Si(Ue.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"}));var zMe=function(e){var t=mi({props:e,name:oX}),r=t.icon,n=r===void 0?$Me:r,i=t.languages,s=R.useState(null),u=s[0],a=s[1],p=CW({locales:i}),d=EW(),g=d[0],_=d[1],C=function(P){var k=p.find(function(F){return F.locale===P});return k?k.name:""},S=function(P){return function(){_(P),a(null)}},I=function(P){a(P.currentTarget)},O=function(){a(null)};return R.createElement(qMe,{component:"span"},R.createElement(Yc,{color:"inherit",variant:"text","aria-controls":"simple-menu","aria-label":"","aria-haspopup":"true",onClick:I,startIcon:n,endIcon:R.createElement(uhe,{fontSize:"small"})},C(g)),R.createElement(IM,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:!!u,onClose:O},p.map(function(P){return R.createElement(MM,{key:P.locale,onClick:S(P.locale),selected:P.locale===g},P.name)})))},$Me=R.createElement(jMe,null),oX="RaLocalesMenuButton",qMe=Qt("span",{name:oX,overridesResolver:function(e,t){return t.root}})({});const UMe=Si(Ue.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}));var xI=function(){return xI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xI.apply(this,arguments)},VMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},GMe=function(e){var t=e.label,r=t===void 0?"ra.action.refresh":t,n=e.icon,i=n===void 0?HMe:n,s=e.onClick,u=e.className,a=VMe(e,["label","icon","onClick","className"]),p=JCe(),d=Oi(),g=R.useCallback(function(_){_.preventDefault(),p(),typeof s=="function"&&s(_)},[p,s]);return R.createElement(sy,{title:r&&d(r,{_:"Refresh"})},R.createElement(Uo,xI({"aria-label":r&&d(r,{_:"Refresh"}),className:u,color:"inherit",onClick:g},a),i))},HMe=R.createElement(UMe,null);const WMe=Si(Ue.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}));var T0=function(){return T0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T0.apply(this,arguments)},n9=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},i9=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ZMe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},XMe=function(e){var t=mi({props:e,name:sX}),r=t.color,n=r===void 0?"primary":r,i=t.icon,s=i===void 0?YMe:i;t.invalid;var u=t.label,a=u===void 0?"ra.action.save":u,p=t.onClick,d=t.mutationOptions,g=t.disabled,_=t.type,C=_===void 0?"submit":_,S=t.transform,I=t.variant,O=I===void 0?"contained":I,P=t.alwaysEnable,k=P===void 0?!1:P,F=ZMe(t,["color","icon","invalid","label","onClick","mutationOptions","disabled","type","transform","variant","alwaysEnable"]),B=Oi(),N=Rb(),G=dR(),$=gw(),X=$.dirtyFields,ee=$.isValidating,J=$.isSubmitting,le=Object.keys(X).length>0,Z=eZ(),H=QMe(k===!1||k===void 0?void 0:!k,g||!le&&Z==null||ee||J);CR(C==="submit"&&(d&&(d.onSuccess||d.onError)||S),'Cannot use <SaveButton mutationOptions> props on a button of type "submit". To override the default mutation options on a particular save button, set the <SaveButton type="button"> prop, or set mutationOptions in the main view component (<Create> or <Edit>).');var oe=R.useCallback(function(be){return n9(void 0,void 0,void 0,function(){var Te;return i9(this,function(ve){switch(ve.label){case 0:return G?.save?[4,G.save(be,T0(T0({},d),{transform:S}))]:[3,2];case 1:Te=ve.sent(),ve.label=2;case 2:return Te!=null&&QW(Te,N.setError),[2]}})})},[N.setError,G,d,S]),ue=R.useCallback(function(be){return n9(void 0,void 0,void 0,function(){return i9(this,function(Te){switch(Te.label){case 0:return p&&p(be),be.defaultPrevented?[2]:C!=="button"?[3,2]:(be.stopPropagation(),[4,N.handleSubmit(oe)(be)]);case 1:Te.sent(),Te.label=2;case 2:return[2]}})})},[p,C,N,oe]),ce=a&&B(a,{_:a});return R.createElement(JMe,T0({variant:O,type:C,color:n,"aria-label":ce,disabled:H,onClick:ue},F),J?R.createElement(ay,{sx:KMe,size:14,thickness:3,color:"inherit"}):s,ce)},KMe={"&.MuiCircularProgress-root":{marginRight:"10px",marginLeft:"2px"}},YMe=R.createElement(WMe,null),sX="RaSaveButton",JMe=Qt(Yc,{name:sX,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative"},t["& .MuiSvgIcon-root, & .MuiIcon-root, & .MuiCircularProgress-root"]={marginRight:r.spacing(1)},t["& .MuiSvgIcon-root, & .MuiIcon-root"]={fontSize:18},t}),QMe=function(e,t){return typeof e>"u"?t:e},wI=function(){return wI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wI.apply(this,arguments)},eOe=function(e){var t=mi({props:e,name:lX});return qe.createElement(tOe,wI({onClick:rOe,className:"skip-nav-button",label:"ra.navigation.skip_nav",variant:"contained"},t))},lX="RaSkipNavigationButton",tOe=Qt(Cy,{name:lX,overridesResolver:function(e,t){return t.root}})(function(e){var t=e.theme;return{position:"fixed",padding:t.spacing(1),backgroundColor:(t.vars||t).palette.background.default,color:(t.vars||t).palette.primary.contrastText,transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.leavingScreen}),left:t.spacing(2),top:t.spacing(-10),zIndex:5e3,"&:hover":{opacity:.8,backgroundColor:(t.vars||t).palette.background.default},"&:focus":{top:t.spacing(2),transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})}}}),rOe=function(){if(!(typeof document>"u")){var e=document.getElementById("main-content");e&&(e.setAttribute("tabIndex","-1"),e.focus(),e.blur(),e.removeAttribute("tabIndex"))}},SI=function(){return SI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},SI.apply(this,arguments)},nOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},iOe=function(e){var t=mi({props:e,name:LR}),r=t.className,n=t.title,i=n===void 0?"ra.page.error":n,s=t.message,u=s===void 0?"ra.message.auth_error":s,a=nOe(t,["className","title","message"]),p=Oi();return R.createElement(aOe,SI({className:r},a),R.createElement("div",{className:uX.message},R.createElement("h1",null,p(i,{_:i})),R.createElement("div",null,p(u,{_:u})),R.createElement(Cy,{component:xy,to:"/login",label:"ra.auth.sign_in"},R.createElement(PR,null))))},LR="RaAuthError",uX={message:"".concat(LR,"-message")},aOe=Qt("div",{name:LR,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("xl")]={height:"100vh",marginTop:"-3em"},t["& .".concat(uX.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t}),oOe=function(){var e=i3e().error;return e?R.createElement(iOe,{message:e?e.message:void 0}):R.createElement(Ty,null)},sOe=function(e){var t=e.helperText,r=e.error,n=Oi();return r?R.createElement(_Te,{error:r}):t===!1?null:R.isValidElement(t)?t:typeof t=="string"&&t.length>0?R.createElement(R.Fragment,null,n(t,{_:t})):R.createElement("span",{dangerouslySetInnerHTML:lOe})},lOe={__html:"&#8203;"},Ux=function(){return Ux=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ux.apply(this,arguments)},uOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},r1,cX=function(e){var t,r,n,i=nM({props:e,name:Vx}),s=i.children,u=i.className,a=u===void 0?"":u,p=i.color,d=i.component,g=d===void 0?"span":d,_=i.fullWidth,C=i.isRequired,S=i.label,I=i.resource,O=i.source,P=i.TypographyProps,k=uOe(i,["children","className","color","component","fullWidth","isRequired","label","resource","source","TypographyProps"]);return R.createElement(cOe,Ux({component:g,className:Br(a,(t={},t[Gx.fullWidth]=_,t))},k),S!==!1&&s.props.label!==!1&&typeof s.type!="string"&&((r=s.type)===null||r===void 0?void 0:r.displayName)!=="Labeled"&&((n=s.type)===null||n===void 0?void 0:n.displayName)!=="Labeled"?R.createElement($o,Ux({sx:p?{color:p}:{color:function(F){return(F.vars||F).palette.text.secondary}},className:Gx.label},P),R.createElement(vZ,{label:S||s.props.label,source:O||s.props.source,resource:I,isRequired:C})):null,s)};cX.displayName="Labeled";var Vx="RaLabeled",Gx={label:"".concat(Vx,"-label"),fullWidth:"".concat(Vx,"-fullWidth")},cOe=Qt(DM,{name:Vx,overridesResolver:function(e,t){return t.root}})((r1={display:"inline-flex",marginBottom:"0.2em"},r1["&.".concat(Gx.fullWidth)]={width:"100%"},r1["& .".concat(Gx.label)]={fontSize:"0.75em",marginBottom:"0.2em"},r1)),EI=function(){return EI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},EI.apply(this,arguments)},fOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},fX=function(e){var t,r=e.icon,n=e.message,i=e.variant,s=i===void 0?"standard":i,u=fOe(e,["icon","message","variant"]),a=_u(e),p=wy(),d=$p({baseI18nKey:"ra.notification.offline",resourceI18nKey:a?"resources.".concat(a,".notification.offline"):void 0,userText:n,options:{name:a?p(a,0):void 0,_:"No connectivity. Could not fetch data."}});return R.createElement(hOe,EI({className:Br(AI.root,(t={},t[AI.inline]=s==="inline",t)),severity:"warning",variant:s==="inline"?"outlined":s,icon:s==="inline"?!1:r},u),R.createElement($o,{variant:"body2"},d))},CI="RaOffline",AI={root:"".concat(CI,"-root"),inline:"".concat(CI,"-inline")},hOe=Qt(kne,{name:CI,overridesResolver:function(e,t){return t.root}})(function(){var e;return e={},e["&.".concat(AI.inline)]={border:"none",display:"inline-flex",padding:0,margin:0},e});const a9=Si(Ue.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));var Hx=function(){return Hx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hx.apply(this,arguments)},o9=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},yp,hX=R.forwardRef(function(e,t){var r=mi({props:e,name:"MuiTextField"}),n=mi({props:r,name:Ip}),i=n.clearAlwaysVisible,s=n.InputProps,u=n.value,a=n.resettable,p=n.disabled,d=n.readOnly,g=n.variant,_=n.margin,C=n.className,S=o9(n,["clearAlwaysVisible","InputProps","value","resettable","disabled","readOnly","variant","margin","className"]),I=Oi(),O=n.onChange,P=R.useCallback(function(le){le.preventDefault(),O&&O("")},[O]),k=Df.clearButton,F=Df.clearIcon,B=Df.inputAdornedEnd,N=Df.selectAdornment,G=Df.visibleClearIcon,$=s||{},X=$.endAdornment,ee=o9($,["endAdornment"]);if(i&&X)throw new Error("ResettableTextField cannot display both an endAdornment and a clear button always visible");var J=function(){var le;return a?u?R.createElement(g1,{position:"end",className:n.select?N:void 0},R.createElement(Uo,{className:k,"aria-label":I("ra.action.clear_input_value"),title:I("ra.action.clear_input_value"),onClick:P,onMouseDown:dOe,disabled:p||d,size:"large"},R.createElement(a9,{className:Br(F,(le={},le[G]=i||u,le))}))):i?R.createElement(g1,{position:"end",className:n.select?N:void 0},R.createElement(Uo,{className:k,"aria-label":I("ra.action.clear_input_value"),title:I("ra.action.clear_input_value"),disabled:!0,size:"large"},R.createElement(a9,{className:Br(F,G)}))):X||R.createElement(g1,{position:"end",className:n.select?N:void 0},R.createElement("span",{className:k},"")):X};return R.createElement(mOe,Hx({value:u,InputProps:Hx({readOnly:d,classes:n.select&&g==="filled"?{adornedEnd:B}:{},endAdornment:J()},ee),disabled:p||d,variant:g,margin:_,className:C},S,{inputRef:t}))});hX.displayName="ResettableTextField";var dOe=function(e){e.preventDefault()},Ip="RaResettableTextField",Df={clearIcon:"".concat(Ip,"-clearIcon"),visibleClearIcon:"".concat(Ip,"-visibleClearIcon"),clearButton:"".concat(Ip,"-clearButton"),selectAdornment:"".concat(Ip,"-selectAdornment"),inputAdornedEnd:"".concat(Ip,"-inputAdornedEnd")},pOe=(yp={},yp["& .".concat(Df.clearIcon)]={height:16,width:0},yp["& .".concat(Df.visibleClearIcon)]={width:16},yp["& .".concat(Df.clearButton)]={height:24,width:24,padding:0},yp["& .".concat(Df.selectAdornment)]={position:"absolute",right:24},yp["& .".concat(Df.inputAdornedEnd)]={paddingRight:0},yp),mOe=Qt(OU,{name:Ip,overridesResolver:function(e,t){return t.root}})(pOe),gOe=function(e){var t,r=R.memo(e);return r.displayName=(t=e.displayName)===null||t===void 0?void 0:t.replace("Impl",""),r},TI=function(){return TI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},TI.apply(this,arguments)},yOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},dX=function(e){var t=mi({props:e,name:pX}),r=t.className,n=t.emptyText,i=yOe(t,["className","emptyText"]),s=Oi(),u=EPe(t);return R.createElement(vOe,TI({component:"span",variant:"body2",className:r},EAe(i)),u!=null&&typeof u!="string"?u.toString():u||(n?s(n,{_:n}):null))};dX.displayName="TextFieldImpl";var wc=gOe(dX),pX="RaTextField",vOe=Qt($o,{name:pX,overridesResolver:function(e,t){return t.root}})({}),Wx=function(){return Wx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wx.apply(this,arguments)},bOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gu=function(e){var t=mi({props:e,name:mX}),r=t.className,n=t.defaultValue,i=t.label,s=t.format,u=t.helperText,a=t.onBlur,p=t.onChange,d=t.parse,g=t.resource,_=t.source,C=t.validate,S=bOe(t,["className","defaultValue","label","format","helperText","onBlur","onChange","parse","resource","source","validate"]),I=nZ(Wx({defaultValue:n,format:s,parse:d,resource:g,source:_,type:"text",validate:C,onBlur:a,onChange:p},S)),O=I.field,P=I.fieldState,k=P.error,F=P.invalid,B=I.id,N=I.isRequired,G=u!==!1||F;return R.createElement(_Oe,Wx({id:B},O,{className:Br("ra-input","ra-input-".concat(_),r),label:i!==""&&i!==!1?R.createElement(vZ,{label:i,source:_,resource:g,isRequired:N}):null,error:F,helperText:G?R.createElement(sOe,{error:k?.message,helperText:u}):null},PTe(S)))},mX="RaTextInput",_Oe=Qt(hX,{name:mX,overridesResolver:function(e,t){return t.root}})({});const xOe=Si(Ue.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),wOe=Si(Ue.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));var PI=function(){return PI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},PI.apply(this,arguments)},SOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},EOe=function(e){var t=mi({props:e,name:gX}),r=t.initiallyVisible,n=r===void 0?!1:r,i=SOe(t,["initiallyVisible"]),s=R.useState(n),u=s[0],a=s[1],p=Oi(),d=function(){a(!u)};return R.createElement(COe,PI({type:u?"text":"password",size:"small",InputProps:{endAdornment:R.createElement(g1,{position:"end"},R.createElement(Uo,{"aria-label":p(u?"ra.input.password.toggle_visible":"ra.input.password.toggle_hidden"),onClick:d,size:"small"},u?R.createElement(xOe,{fontSize:"small"}):R.createElement(wOe,{fontSize:"small"})))}},i))},gX="RaPasswordInput",COe=Qt(gu,{name:gX,overridesResolver:function(e,t){return t.root}})({}),AOe=function(e){var t=mi({props:e,name:P0}),r=t.redirectTo,n=t.className,i=t.sx,s=t.children,u=R.useState(!1),a=u[0],p=u[1],d=FPe(),g=Oi(),_=Yf(),C=function(S){p(!0),d(S,r).then(function(){p(!1)}).catch(function(I){p(!1),_(typeof I=="string"?I:typeof I>"u"||!I.message?"ra.auth.sign_in_error":I.message,{type:"error",messageArgs:{_:typeof I=="string"?I:I&&I.message?I.message:void 0}})})};return R.createElement(TOe,{onSubmit:C,mode:"onChange",noValidate:!0,className:n,sx:i},R.createElement(EM,{className:Vg.content},s||R.createElement(R.Fragment,null,R.createElement(gu,{autoFocus:!0,source:"username",label:g("ra.auth.username"),autoComplete:"username",validate:I7()}),R.createElement(EOe,{source:"password",label:g("ra.auth.password"),autoComplete:"current-password",validate:I7()})),R.createElement(Yc,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:Vg.button},a?R.createElement(ay,{className:Vg.icon,size:19,thickness:3}):g("ra.auth.sign_in"))))},P0="RaLoginForm",Vg={content:"".concat(P0,"-content"),button:"".concat(P0,"-button"),icon:"".concat(P0,"-icon")},TOe=Qt(tZ,{name:P0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(Vg.content)]={width:300,paddingBottom:"".concat(r.spacing(2),"!important")},t["& .".concat(Vg.button)]={marginTop:r.spacing(2)},t["& .".concat(Vg.icon)]={margin:r.spacing(.3)},t}),II=function(){return II=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},II.apply(this,arguments)},POe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},IOe=function(e){var t=mi({props:e,name:I0}),r=t.children,n=r===void 0?MOe:r,i=t.backgroundImage,s=t.avatarIcon,u=s===void 0?OOe:s,a=POe(t,["children","backgroundImage","avatarIcon"]),p=R.useRef(null),d=!1,g=ZPe(),_=Bd();R.useEffect(function(){g({},!1).then(function(){_("/")}).catch(function(){})},[g,_]);var C=function(){!d&&p.current&&(p.current.style.backgroundImage="url(".concat(i,")"),d=!0)},S=function(){if(i){var I=new Image;I.onload=C,I.src=i}};return R.useEffect(function(){d||S()}),R.createElement(ROe,II({},a,{ref:p}),R.createElement(SM,{className:Gg.card},R.createElement("div",{className:Gg.avatar},R.createElement(WP,{className:Gg.icon},u)),n))},MOe=R.createElement(AOe,null),OOe=R.createElement(PR,null),I0="RaLogin",Gg={card:"".concat(I0,"-card"),avatar:"".concat(I0,"-avatar"),icon:"".concat(I0,"-icon")},ROe=Qt("div",{name:I0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},t["& .".concat(Gg.card)]={minWidth:300,marginTop:"6em"},t["& .".concat(Gg.avatar)]={margin:"1em",display:"flex",justifyContent:"center"},t["& .".concat(Gg.icon)]={backgroundColor:(r.vars||r).palette.secondary[500]},t}),MI=function(){return MI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},MI.apply(this,arguments)},LOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},DOe=function(e){var t=Lb(e).hasShow;return R.createElement(rX,MI({},kOe(e)),t&&R.createElement(_3e,null))},kOe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=LOe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},Zx=function(){return Zx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Zx.apply(this,arguments)},FOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},kv,NOe=R.createElement(DOe,null),BOe=R.createElement(fX,null),jOe=function(e){var t,r=e.actions,n=e.aside,i=e.children,s=e.render,u=e.className,a=e.component,p=a===void 0?SM:a,d=e.emptyWhileLoading,g=d===void 0?!1:d,_=e.offline,C=_===void 0?BOe:_,S=e.title,I=FOe(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),O=Lb().hasShow,P=yAe(),k=P.resource,F=P.defaultTitle,B=P.record,N=P.isPaused,G=P.isPending,$=typeof r>"u"&&O?NOe:r;return N&&G&&C!==void 0&&C!==!1?R.createElement(s9,Zx({className:Br("edit-page",u)},I),R.createElement("div",{className:Br(Ph.main,Ph.noActions)},R.createElement(p,{className:Ph.card},C),n)):!B&&G&&g?null:R.createElement(s9,Zx({className:Br("edit-page",u)},I),S!==!1&&R.createElement(Nb,{title:S,defaultTitle:F,preferenceKey:"".concat(k,".edit.title")}),$,R.createElement("div",{className:Br(Ph.main,(t={},t[Ph.noActions]=!$,t))},R.createElement(p,{className:Ph.card},s?s(P):B?i:R.createElement(EM,null,"")),n))},D1="RaEdit",Ph={main:"".concat(D1,"-main"),noActions:"".concat(D1,"-noActions"),card:"".concat(D1,"-card")},s9=Qt("div",{name:D1,overridesResolver:function(e,t){return t.root}})((kv={},kv["& .".concat(Ph.main)]={display:"flex",alignItems:"flex-start"},kv["& .".concat(Ph.noActions)]={marginTop:"1em"},kv["& .".concat(Ph.card)]={flex:"1 1 auto"},kv)),OI=function(){return OI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},OI.apply(this,arguments)},zOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Py=function(e){var t=mi({props:e,name:qOe}),r=t.resource,n=t.id,i=t.mutationMode,s=t.mutationOptions,u=t.queryOptions,a=t.redirect,p=t.transform,d=t.disableAuthentication,g=t.loading,_=g===void 0?$Oe:g,C=zOe(t,["resource","id","mutationMode","mutationOptions","queryOptions","redirect","transform","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Edit> requires either a `render` prop or `children` prop");return R.createElement(gAe,{resource:r,id:n,mutationMode:i,mutationOptions:s,queryOptions:u,redirect:a,transform:p,disableAuthentication:d,loading:_,offline:!1},R.createElement(jOe,OI({},C)))},$Oe=R.createElement(Ty,null),qOe="RaEdit",RI=function(){return RI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},RI.apply(this,arguments)},UOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},VOe=function(e){var t,r=mi({props:e,name:M0}),n=r.children,i=r.className,s=r.resource,u=UOe(r,["children","className","resource"]),a=Zu(function(p){return p.breakpoints.down("sm")});return R.createElement(GOe,RI({className:Br((t={},t[Hg.mobileToolbar]=a,t[Hg.desktopToolbar]=!a,t),i),role:"toolbar"},u),R.Children.count(n)===0?R.createElement("div",{className:Hg.defaultToolbar},R.createElement(XMe,null),R.createElement(IMe,{resource:s})):n)},M0="RaToolbar",Hg={desktopToolbar:"".concat(M0,"-desktopToolbar"),mobileToolbar:"".concat(M0,"-mobileToolbar"),defaultToolbar:"".concat(M0,"-defaultToolbar")},GOe=Qt(kM,{name:M0,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={backgroundColor:(r.vars||r).palette.divider},t["&.".concat(Hg.desktopToolbar)]={},t["&.".concat(Hg.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},t["& .".concat(Hg.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},t}),Xx=function(){return Xx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xx.apply(this,arguments)},yX=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Iy=function(e){var t=mi({props:e,name:vX}),r=t.children,n=t.className,i=t.component,s=i===void 0?HOe:i,u=t.sx,a=t.toolbar,p=a===void 0?WOe:a,d=yX(t,["children","className","component","sx","toolbar"]);return R.createElement(tZ,Xx({},d),R.createElement(s,{className:n,sx:u},R.createElement(DM,Xx({},ZOe(t),{sx:{alignItems:"flex-start"}}),r)),p!==!1?p:null)},vX="RaSimpleForm",HOe=Qt(EM,{name:vX,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={paddingBottom:"5em"},t}),WOe=R.createElement(VOe,null),ZOe=function(e){e.children,e.className,e.component,e.criteriaMode,e.defaultValues,e.delayError,e.onSubmit,e.record,e.resource,e.reValidateMode,e.sx,e.toolbar,e.validate,e.resetOptions,e.resolver,e.sanitizeEmptyValues,e.shouldFocusError,e.shouldUnregister,e.shouldUseNativeValidation,e.warnWhenUnsavedChanges;var t=yX(e,["children","className","component","criteriaMode","defaultValues","delayError","onSubmit","record","resource","reValidateMode","sx","toolbar","validate","resetOptions","resolver","sanitizeEmptyValues","shouldFocusError","shouldUnregister","shouldUseNativeValidation","warnWhenUnsavedChanges"]);return t},LI=function(){return LI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},LI.apply(this,arguments)},XOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KOe=function(e){var t=Lb(e).hasEdit;return R.createElement(rX,LI({},YOe(e)),t&&R.createElement(LMe,null))},YOe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=XOe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},Kx=function(){return Kx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kx.apply(this,arguments)},JOe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Fv,QOe=R.createElement(KOe,null),eRe=R.createElement(fX,null),tRe=function(e){var t,r=e.actions,n=e.aside,i=e.children,s=e.render,u=e.className,a=e.component,p=a===void 0?SM:a,d=e.emptyWhileLoading,g=d===void 0?!1:d,_=e.offline,C=_===void 0?eRe:_,S=e.title,I=JOe(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),O=DTe(),P=O.resource,k=O.defaultTitle,F=O.isPaused,B=O.isPending,N=O.record,G=Lb().hasEdit,$=typeof r>"u"&&G?QOe:r;return F&&B&&C!==void 0&&C!==!1?R.createElement(l9,Kx({className:Br("show-page",u)},I),R.createElement("div",{className:Br(Ih.main,Ih.noActions)},R.createElement(p,{className:Ih.card},C),n)):!N&&g?null:R.createElement(l9,Kx({className:Br("show-page",u)},I),S!==!1&&R.createElement(Nb,{title:S,defaultTitle:k,preferenceKey:"".concat(P,".show.title")}),$!==!1&&$,R.createElement("div",{className:Br(Ih.main,(t={},t[Ih.noActions]=!$,t))},R.createElement(p,{className:Ih.card},s?s(O):i),n))},k1="RaShow",Ih={main:"".concat(k1,"-main"),noActions:"".concat(k1,"-noActions"),card:"".concat(k1,"-card")},l9=Qt("div",{name:k1,overridesResolver:function(e,t){return t.root}})((Fv={},Fv["& .".concat(Ih.main)]={display:"flex"},Fv["& .".concat(Ih.noActions)]={marginTop:"1em"},Fv["& .".concat(Ih.card)]={flex:"1 1 auto"},Fv)),DI=function(){return DI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},DI.apply(this,arguments)},rRe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},My=function(e){var t=mi({props:e,name:iRe}),r=t.id,n=t.resource,i=t.queryOptions,s=t.disableAuthentication,u=t.loading,a=u===void 0?nRe:u,p=rRe(t,["id","resource","queryOptions","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Show> requires either a `render` prop or `children` prop");return R.createElement(LTe,{id:r,disableAuthentication:s,queryOptions:i,resource:n,loading:a,offline:!1},R.createElement(tRe,DI({},p)))},nRe=R.createElement(Ty,null),iRe="RaShow",kI=function(){return kI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kI.apply(this,arguments)},bX=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Oy=function(e){var t=mi({props:e,name:Yx}),r=t.className,n=t.children,i=t.spacing,s=i===void 0?1:i,u=t.sx,a=bX(t,["className","children","spacing","sx"]),p=Al(t);return p?R.createElement(BW,{value:t.record},R.createElement(aRe,{className:r,sx:u},R.createElement(DM,kI({spacing:s},oRe(a),{className:Jx.stack}),R.Children.map(n,function(d){return d&&R.isValidElement(d)?R.createElement(cX,{key:d.props.source,className:Br("ra-field",d.props.source&&"ra-field-".concat(d.props.source),Jx.row,d.props.className)},d):null})))):null},Yx="RaSimpleShowLayout",Jx={stack:"".concat(Yx,"-stack"),row:"".concat(Yx,"-row")},aRe=Qt("div",{name:Yx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={flex:1,padding:"".concat(r.spacing(1)," ").concat(r.spacing(2))},t["& .".concat(Jx.stack)]={},t["& .".concat(Jx.row)]={display:"inline"},t}),oRe=function(e){e.record,e.resource,e.initialValues,e.translate;var t=bX(e,["record","resource","initialValues","translate"]);return t},FI=function(){return FI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},FI.apply(this,arguments)},sRe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lRe=function(e){var t=e.accessDenied,r=t===void 0?S3e:t,n=e.authCallbackPage,i=n===void 0?oOe:n,s=e.authenticationError,u=s===void 0?pIe:s,a=e.catchAll,p=a===void 0?fMe:a,d=e.error,g=d===void 0?KZ:d,_=e.layout,C=_===void 0?aMe:_,S=e.loading,I=S===void 0?lMe:S,O=e.loginPage,P=O===void 0?IOe:O,k=e.notification,F=k===void 0?gMe:k,B=sRe(e,["accessDenied","authCallbackPage","authenticationError","catchAll","error","layout","loading","loginPage","notification"]);return R.createElement(uoe,{enableColorScheme:!0},R.createElement(cPe,FI({accessDenied:r,authCallbackPage:i,authenticationError:u,catchAll:p,error:g,layout:C,loading:I,loginPage:P},B)),R.createElement(F))},NI=function(){return NI=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},NI.apply(this,arguments)},uRe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},_X=function(e){var t=e.theme,r=e.lightTheme,n=r===void 0?FZ:r,i=e.darkTheme,s=e.defaultTheme,u=e.children,a=uRe(e,["theme","lightTheme","darkTheme","defaultTheme","children"]);return R.createElement($Te,NI({},a),R.createElement(LZ.Provider,{value:{lightTheme:t||n,darkTheme:t&&!i?void 0:!i&&i!==null?H3e:i??void 0,defaultTheme:s}},R.createElement(G3e,null,u)))};_X.displayName="AdminContext";var cRe={ra:{action:{add_filter:"Add filter",add:"Add",back:"Go Back",bulk_actions:"1 item selected |||| %{smart_count} items selected",cancel:"Cancel",clear_array_input:"Clear the list",clear_input_value:"Clear value",clone:"Clone",confirm:"Confirm",create:"Create",create_item:"Create %{item}",delete:"Delete",edit:"Edit",export:"Export",list:"List",refresh:"Refresh",remove_filter:"Remove this filter",remove_all_filters:"Remove all filters",remove:"Remove",save:"Save",search:"Search",search_columns:"Search columns",select_all:"Select all",select_all_button:"Select all",select_row:"Select this row",show:"Show",sort:"Sort",undo:"Undo",unselect:"Unselect",expand:"Expand",close:"Close",open_menu:"Open menu",close_menu:"Close menu",update:"Update",move_up:"Move up",move_down:"Move down",open:"Open",toggle_theme:"Toggle light/dark mode",select_columns:"Columns",update_application:"Reload Application"},boolean:{true:"Yes",false:"No",null:""},page:{create:"Create %{name}",dashboard:"Dashboard",edit:"%{name} %{recordRepresentation}",error:"Something went wrong",list:"%{name}",loading:"Loading",not_found:"Not Found",show:"%{name} %{recordRepresentation}",empty:"No %{name} yet.",invite:"Do you want to add one?",access_denied:"Access denied",authentication_error:"Authentication error"},input:{file:{upload_several:"Drop some files to upload, or click to select one.",upload_single:"Drop a file to upload, or click to select it."},image:{upload_several:"Drop some pictures to upload, or click to select one.",upload_single:"Drop a picture to upload, or click to select it."},references:{all_missing:"Unable to find references data.",many_missing:"At least one of the associated references no longer appears to be available.",single_missing:"Associated reference no longer appears to be available."},password:{toggle_visible:"Hide password",toggle_hidden:"Show password"}},message:{about:"About",access_denied:"You don't have the right permissions to access this page",are_you_sure:"Are you sure?",authentication_error:"The authentication server returned an error and your credentials could not be checked.",auth_error:"An error occurred while validating the authentication token.",bulk_delete_content:"Are you sure you want to delete this %{name}? |||| Are you sure you want to delete these %{smart_count} items?",bulk_delete_title:"Delete %{name} |||| Delete %{smart_count} %{name}",bulk_update_content:"Are you sure you want to update %{name} %{recordRepresentation}? |||| Are you sure you want to update these %{smart_count} items?",bulk_update_title:"Update %{name} %{recordRepresentation} |||| Update %{smart_count} %{name}",clear_array_input:"Are you sure you want to clear the whole list?",delete_content:"Are you sure you want to delete this %{name}?",delete_title:"Delete %{name} %{recordRepresentation}",details:"Details",error:"A client error occurred and your request couldn't be completed.",invalid_form:"The form is not valid. Please check for errors",loading:"Please wait",no:"No",not_found:"Either you typed a wrong URL, or you followed a bad link.",select_all_limit_reached:"There are too many elements to select them all. Only the first %{max} elements were selected.",unsaved_changes:"Some of your changes weren't saved. Are you sure you want to ignore them?",yes:"Yes",placeholder_data_warning:"Network issue: Data refresh failed."},navigation:{clear_filters:"Clear filters",no_filtered_results:"No %{name} found using the current filters.",no_results:"No %{name} found",no_more_results:"The page number %{page} is out of boundaries. Try the previous page.",page_out_of_boundaries:"Page number %{page} out of boundaries",page_out_from_end:"Cannot go after last page",page_out_from_begin:"Cannot go before page 1",page_range_info:"%{offsetBegin}-%{offsetEnd} of %{total}",partial_page_range_info:"%{offsetBegin}-%{offsetEnd} of more than %{offsetEnd}",current_page:"Page %{page}",page:"Go to page %{page}",first:"Go to first page",last:"Go to last page",next:"Go to next page",previous:"Go to previous page",page_rows_per_page:"Rows per page:",skip_nav:"Skip to content"},sort:{sort_by:"Sort by %{field_lower_first} %{order}",ASC:"ascending",DESC:"descending"},auth:{auth_check_error:"Please login to continue",user_menu:"Profile",username:"Username",password:"Password",email:"Email",sign_in:"Sign in",sign_in_error:"Authentication failed, please retry",logout:"Logout"},notification:{updated:"Element updated |||| %{smart_count} elements updated",created:"Element created",deleted:"Element deleted |||| %{smart_count} elements deleted",bad_item:"Incorrect element",item_doesnt_exist:"Element does not exist",http_error:"Server communication error",data_provider_error:"dataProvider error. Check the console for details.",i18n_error:"Cannot load the translations for the specified language",canceled:"Action cancelled",logged_out:"Your session has ended, please reconnect.",not_authorized:"You're not authorized to access this resource.",application_update_available:"A new version is available.",offline:"No connectivity. Could not fetch data."},validation:{required:"Required",minLength:"Must be %{min} characters at least",maxLength:"Must be %{max} characters or less",minValue:"Must be at least %{min}",maxValue:"Must be %{max} or less",number:"Must be a number",email:"Must be a valid email",oneOf:"Must be one of: %{options}",regex:"Must match a specific format (regexp): %{pattern}",unique:"Must be unique"},saved_queries:{label:"Saved queries",query_name:"Query name",new_label:"Save current query...",new_dialog_title:"Save current query as",remove_label:"Remove saved query",remove_label_with_name:'Remove query "%{name}"',remove_dialog_title:"Remove saved query?",remove_message:"Are you sure you want to remove that item from your list of saved queries?",help:"Filter the list and save this query for later"},configurable:{customize:"Customize",configureMode:"Configure this page",inspector:{title:"Inspector",content:"Hover the application UI elements to configure them",reset:"Reset Settings",hideAll:"Hide All",showAll:"Show All"},Datagrid:{title:"Datagrid",unlabeled:"Unlabeled column #%{column}"},SimpleForm:{title:"Form",unlabeled:"Unlabeled input #%{input}"},SimpleList:{title:"List",primaryText:"Primary text",secondaryText:"Secondary text",tertiaryText:"Tertiary text"}}}},ST,u9;function xX(){if(u9)return ST;u9=1;var e=Object.prototype.toString;return ST=function(r){var n=e.call(r),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&e.call(r.callee)==="[object Function]"),i},ST}var ET,c9;function fRe(){if(c9)return ET;c9=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=xX(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(C){var S=C.constructor;return S&&S.prototype===C},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g=(function(){if(typeof window>"u")return!1;for(var C in window)try{if(!d["$"+C]&&t.call(window,C)&&window[C]!==null&&typeof window[C]=="object")try{p(window[C])}catch{return!0}}catch{return!0}return!1})(),_=function(C){if(typeof window>"u"||!g)return p(C);try{return p(C)}catch{return!1}};e=function(S){var I=S!==null&&typeof S=="object",O=r.call(S)==="[object Function]",P=n(S),k=I&&r.call(S)==="[object String]",F=[];if(!I&&!O&&!P)throw new TypeError("Object.keys called on a non-object");var B=u&&O;if(k&&S.length>0&&!t.call(S,0))for(var N=0;N<S.length;++N)F.push(String(N));if(P&&S.length>0)for(var G=0;G<S.length;++G)F.push(String(G));else for(var $ in S)!(B&&$==="prototype")&&t.call(S,$)&&F.push(String($));if(s)for(var X=_(S),ee=0;ee<a.length;++ee)!(X&&a[ee]==="constructor")&&t.call(S,a[ee])&&F.push(a[ee]);return F}}return ET=e,ET}var CT,f9;function hRe(){if(f9)return CT;f9=1;var e=Array.prototype.slice,t=xX(),r=Object.keys,n=r?function(u){return r(u)}:fRe(),i=Object.keys;return n.shim=function(){if(Object.keys){var u=(function(){var a=Object.keys(arguments);return a&&a.length===arguments.length})(1,2);u||(Object.keys=function(p){return t(p)?i(e.call(p)):i(p)})}else Object.keys=n;return Object.keys||n},CT=n,CT}var AT,h9;function vw(){if(h9)return AT;h9=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return AT=e,AT}var TT,d9;function wX(){return d9||(d9=1,TT=SyntaxError),TT}var PT,p9;function Bb(){return p9||(p9=1,PT=TypeError),PT}var IT,m9;function dRe(){return m9||(m9=1,IT=Object.getOwnPropertyDescriptor),IT}var MT,g9;function bw(){if(g9)return MT;g9=1;var e=dRe();if(e)try{e([],"length")}catch{e=null}return MT=e,MT}var OT,y9;function SX(){if(y9)return OT;y9=1;var e=vw(),t=wX(),r=Bb(),n=bw();return OT=function(s,u,a){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,g=arguments.length>5?arguments[5]:null,_=arguments.length>6?arguments[6]:!1,C=!!n&&n(s,u);if(e)e(s,u,{configurable:g===null&&C?C.configurable:!g,enumerable:p===null&&C?C.enumerable:!p,value:a,writable:d===null&&C?C.writable:!d});else if(_||!p&&!d&&!g)s[u]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},OT}var RT,v9;function EX(){if(v9)return RT;v9=1;var e=vw(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},RT=t,RT}var LT,b9;function CX(){if(b9)return LT;b9=1;var e=hRe(),t=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,n=Array.prototype.concat,i=SX(),s=function(d){return typeof d=="function"&&r.call(d)==="[object Function]"},u=EX()(),a=function(d,g,_,C){if(g in d){if(C===!0){if(d[g]===_)return}else if(!s(C)||!C())return}u?i(d,g,_,!0):i(d,g,_)},p=function(d,g){var _=arguments.length>2?arguments[2]:{},C=e(g);t&&(C=n.call(C,Object.getOwnPropertySymbols(g)));for(var S=0;S<C.length;S+=1)a(d,C[S],g[C[S]],_[C[S]])};return p.supportsDescriptors=!!u,LT=p,LT}var DT={exports:{}},kT,_9;function AX(){return _9||(_9=1,kT=Object),kT}var FT,x9;function pRe(){return x9||(x9=1,FT=Error),FT}var NT,w9;function mRe(){return w9||(w9=1,NT=EvalError),NT}var BT,S9;function gRe(){return S9||(S9=1,BT=RangeError),BT}var jT,E9;function yRe(){return E9||(E9=1,jT=ReferenceError),jT}var zT,C9;function vRe(){return C9||(C9=1,zT=URIError),zT}var $T,A9;function bRe(){return A9||(A9=1,$T=Math.abs),$T}var qT,T9;function _Re(){return T9||(T9=1,qT=Math.floor),qT}var UT,P9;function xRe(){return P9||(P9=1,UT=Math.max),UT}var VT,I9;function wRe(){return I9||(I9=1,VT=Math.min),VT}var GT,M9;function SRe(){return M9||(M9=1,GT=Math.pow),GT}var HT,O9;function ERe(){return O9||(O9=1,HT=Math.round),HT}var WT,R9;function CRe(){return R9||(R9=1,WT=Number.isNaN||function(t){return t!==t}),WT}var ZT,L9;function ARe(){if(L9)return ZT;L9=1;var e=CRe();return ZT=function(r){return e(r)||r===0?r:r<0?-1:1},ZT}var XT,D9;function TRe(){return D9||(D9=1,XT=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var u=Object.getOwnPropertySymbols(t);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),XT}var KT,k9;function PRe(){if(k9)return KT;k9=1;var e=typeof Symbol<"u"&&Symbol,t=TRe();return KT=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},KT}var YT,F9;function TX(){return F9||(F9=1,YT=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),YT}var JT,N9;function PX(){if(N9)return JT;N9=1;var e=AX();return JT=e.getPrototypeOf||null,JT}var QT,B9;function IRe(){if(B9)return QT;B9=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(p,d){for(var g=[],_=0;_<p.length;_+=1)g[_]=p[_];for(var C=0;C<d.length;C+=1)g[C+p.length]=d[C];return g},s=function(p,d){for(var g=[],_=d,C=0;_<p.length;_+=1,C+=1)g[C]=p[_];return g},u=function(a,p){for(var d="",g=0;g<a.length;g+=1)d+=a[g],g+1<a.length&&(d+=p);return d};return QT=function(p){var d=this;if(typeof d!="function"||t.apply(d)!==n)throw new TypeError(e+d);for(var g=s(arguments,1),_,C=function(){if(this instanceof _){var k=d.apply(this,i(g,arguments));return Object(k)===k?k:this}return d.apply(p,i(g,arguments))},S=r(0,d.length-g.length),I=[],O=0;O<S;O++)I[O]="$"+O;if(_=Function("binder","return function ("+u(I,",")+"){ return binder.apply(this,arguments); }")(C),d.prototype){var P=function(){};P.prototype=d.prototype,_.prototype=new P,P.prototype=null}return _},QT}var eP,j9;function jb(){if(j9)return eP;j9=1;var e=IRe();return eP=Function.prototype.bind||e,eP}var tP,z9;function DR(){return z9||(z9=1,tP=Function.prototype.call),tP}var rP,$9;function kR(){return $9||($9=1,rP=Function.prototype.apply),rP}var nP,q9;function MRe(){return q9||(q9=1,nP=typeof Reflect<"u"&&Reflect&&Reflect.apply),nP}var iP,U9;function IX(){if(U9)return iP;U9=1;var e=jb(),t=kR(),r=DR(),n=MRe();return iP=n||e.call(r,t),iP}var aP,V9;function FR(){if(V9)return aP;V9=1;var e=jb(),t=Bb(),r=DR(),n=IX();return aP=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return n(e,r,s)},aP}var oP,G9;function ORe(){if(G9)return oP;G9=1;var e=FR(),t=bw(),r;try{r=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var n=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return oP=n&&typeof n.get=="function"?e([n.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,oP}var sP,H9;function RRe(){if(H9)return sP;H9=1;var e=TX(),t=PX(),r=ORe();return sP=e?function(i){return e(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:r?function(i){return r(i)}:null,sP}var lP,W9;function MX(){if(W9)return lP;W9=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=jb();return lP=r.call(e,t),lP}var uP,Z9;function OX(){if(Z9)return uP;Z9=1;var e,t=AX(),r=pRe(),n=mRe(),i=gRe(),s=yRe(),u=wX(),a=Bb(),p=vRe(),d=bRe(),g=_Re(),_=xRe(),C=wRe(),S=SRe(),I=ERe(),O=ARe(),P=Function,k=function(xt){try{return P('"use strict"; return ('+xt+").constructor;")()}catch{}},F=bw(),B=vw(),N=function(){throw new a},G=F?(function(){try{return arguments.callee,N}catch{try{return F(arguments,"callee").get}catch{return N}}})():N,$=PRe()(),X=RRe(),ee=PX(),J=TX(),le=kR(),Z=DR(),H={},oe=typeof Uint8Array>"u"||!X?e:X(Uint8Array),ue={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":$&&X?X([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":P,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$&&X?X(X([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$||!X?e:X(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":F,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$||!X?e:X(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$&&X?X(""[Symbol.iterator]()):e,"%Symbol%":$?Symbol:e,"%SyntaxError%":u,"%ThrowTypeError%":G,"%TypedArray%":oe,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":Z,"%Function.prototype.apply%":le,"%Object.defineProperty%":B,"%Object.getPrototypeOf%":ee,"%Math.abs%":d,"%Math.floor%":g,"%Math.max%":_,"%Math.min%":C,"%Math.pow%":S,"%Math.round%":I,"%Math.sign%":O,"%Reflect.getPrototypeOf%":J};if(X)try{null.error}catch(xt){var ce=X(X(xt));ue["%Error.prototype%"]=ce}var be=function xt(rt){var zt;if(rt==="%AsyncFunction%")zt=k("async function () {}");else if(rt==="%GeneratorFunction%")zt=k("function* () {}");else if(rt==="%AsyncGeneratorFunction%")zt=k("async function* () {}");else if(rt==="%AsyncGenerator%"){var Lt=xt("%AsyncGeneratorFunction%");Lt&&(zt=Lt.prototype)}else if(rt==="%AsyncIteratorPrototype%"){var Ft=xt("%AsyncGenerator%");Ft&&X&&(zt=X(Ft.prototype))}return ue[rt]=zt,zt},Te={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ve=jb(),Ce=MX(),$e=ve.call(Z,Array.prototype.concat),Je=ve.call(le,Array.prototype.splice),ge=ve.call(Z,String.prototype.replace),Ee=ve.call(Z,String.prototype.slice),Ie=ve.call(Z,RegExp.prototype.exec),Le=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ve=/\\(\\)?/g,ht=function(rt){var zt=Ee(rt,0,1),Lt=Ee(rt,-1);if(zt==="%"&&Lt!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(Lt==="%"&&zt!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var Ft=[];return ge(rt,Le,function(dt,ke,fr,sr){Ft[Ft.length]=fr?ge(sr,Ve,"$1"):ke||dt}),Ft},It=function(rt,zt){var Lt=rt,Ft;if(Ce(Te,Lt)&&(Ft=Te[Lt],Lt="%"+Ft[0]+"%"),Ce(ue,Lt)){var dt=ue[Lt];if(dt===H&&(dt=be(Lt)),typeof dt>"u"&&!zt)throw new a("intrinsic "+rt+" exists, but is not available. Please file an issue!");return{alias:Ft,name:Lt,value:dt}}throw new u("intrinsic "+rt+" does not exist!")};return uP=function(rt,zt){if(typeof rt!="string"||rt.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof zt!="boolean")throw new a('"allowMissing" argument must be a boolean');if(Ie(/^%?[^%]*%?$/,rt)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Lt=ht(rt),Ft=Lt.length>0?Lt[0]:"",dt=It("%"+Ft+"%",zt),ke=dt.name,fr=dt.value,sr=!1,xr=dt.alias;xr&&(Ft=xr[0],Je(Lt,$e([0,1],xr)));for(var tr=1,Ge=!0;tr<Lt.length;tr+=1){var nt=Lt[tr],ut=Ee(nt,0,1),Nt=Ee(nt,-1);if((ut==='"'||ut==="'"||ut==="`"||Nt==='"'||Nt==="'"||Nt==="`")&&ut!==Nt)throw new u("property names with quotes must have matching quotes");if((nt==="constructor"||!Ge)&&(sr=!0),Ft+="."+nt,ke="%"+Ft+"%",Ce(ue,ke))fr=ue[ke];else if(fr!=null){if(!(nt in fr)){if(!zt)throw new a("base intrinsic for "+rt+" exists, but the property is not available.");return}if(F&&tr+1>=Lt.length){var Kt=F(fr,nt);Ge=!!Kt,Ge&&"get"in Kt&&!("originalValue"in Kt.get)?fr=Kt.get:fr=fr[nt]}else Ge=Ce(fr,nt),fr=fr[nt];Ge&&!sr&&(ue[ke]=fr)}}return fr},uP}var cP,X9;function LRe(){if(X9)return cP;X9=1;var e=OX(),t=SX(),r=EX()(),n=bw(),i=Bb(),s=e("%Math.floor%");return cP=function(a,p){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||s(p)!==p)throw new i("`length` must be a positive 32-bit integer");var d=arguments.length>2&&!!arguments[2],g=!0,_=!0;if("length"in a&&n){var C=n(a,"length");C&&!C.configurable&&(g=!1),C&&!C.writable&&(_=!1)}return(g||_||!d)&&(r?t(a,"length",p,!0,!0):t(a,"length",p)),a},cP}var fP,K9;function DRe(){if(K9)return fP;K9=1;var e=jb(),t=kR(),r=IX();return fP=function(){return r(e,t,arguments)},fP}var Y9;function kRe(){return Y9||(Y9=1,(function(e){var t=LRe(),r=vw(),n=FR(),i=DRe();e.exports=function(u){var a=n(arguments),p=u.length-(arguments.length-1);return t(a,1+(p>0?p:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(DT)),DT.exports}var hP,J9;function FRe(){if(J9)return hP;J9=1;var e=Bb();return hP=function(r){if(r==null)throw new e(arguments.length>0&&arguments[1]||"Cannot call method on "+r);return r},hP}var dP,Q9;function NRe(){if(Q9)return dP;Q9=1;var e=OX(),t=FR(),r=t([e("%String.prototype.indexOf%")]);return dP=function(i,s){var u=e(i,!!s);return typeof u=="function"&&r(i,".prototype.")>-1?t([u]):u},dP}var pP,e$;function RX(){if(e$)return pP;e$=1;var e=FRe(),t=NRe(),r=t("Object.prototype.propertyIsEnumerable"),n=t("Array.prototype.push");return pP=function(s){var u=e(s),a=[];for(var p in u)r(u,p)&&n(a,[p,u[p]]);return a},pP}var mP,t$;function LX(){if(t$)return mP;t$=1;var e=RX();return mP=function(){return typeof Object.entries=="function"?Object.entries:e},mP}var gP,r$;function BRe(){if(r$)return gP;r$=1;var e=LX(),t=CX();return gP=function(){var n=e();return t(Object,{entries:n},{entries:function(){return Object.entries!==n}}),n},gP}var yP,n$;function jRe(){if(n$)return yP;n$=1;var e=CX(),t=kRe(),r=RX(),n=LX(),i=BRe(),s=t(n(),Object);return e(s,{getPolyfill:n,implementation:r,shim:i}),yP=s,yP}var vP,i$;function zRe(){if(i$)return vP;i$=1;var e=function(){};return vP=e,vP}var bP,a$;function $Re(){if(a$)return bP;a$=1;var e=jRe(),t=zRe(),r=MX(),n=function(N){t(!1,N)},i=String.prototype.replace,s=String.prototype.split,u="||||",a=function(B){var N=B%100,G=N%10;return N!==11&&G===1?0:2<=G&&G<=4&&!(N>=12&&N<=14)?1:2},p={pluralTypes:{arabic:function(B){if(B<3)return B;var N=B%100;return N>=3&&N<=10?3:N>=11?4:5},bosnian_serbian:a,chinese:function(){return 0},croatian:a,french:function(B){return B>=2?1:0},german:function(B){return B!==1?1:0},russian:a,lithuanian:function(B){return B%10===1&&B%100!==11?0:B%10>=2&&B%10<=9&&(B%100<11||B%100>19)?1:2},czech:function(B){return B===1?0:B>=2&&B<=4?1:2},polish:function(B){if(B===1)return 0;var N=B%10;return 2<=N&&N<=4&&(B%100<10||B%100>=20)?1:2},icelandic:function(B){return B%10!==1||B%100===11?1:0},slovenian:function(B){var N=B%100;return N===1?0:N===2?1:N===3||N===4?2:3},romanian:function(B){if(B===1)return 0;var N=B%100;return B===0||N>=2&&N<=19?1:2},ukrainian:a},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function d(B){for(var N={},G=e(B),$=0;$<G.length;$+=1)for(var X=G[$][0],ee=G[$][1],J=0;J<ee.length;J+=1)N[ee[J]]=X;return N}function g(B,N){var G=d(B.pluralTypeToLanguages);return G[N]||G[s.call(N,/-/,1)[0]]||G.en}function _(B,N,G){return B.pluralTypes[N](G)}function C(){var B={};return function(N,G){var $=B[G];return $&&!N.pluralTypes[$]&&($=null,B[G]=$),$||($=g(N,G),$&&(B[G]=$)),$}}function S(B){return B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(B){var N=B&&B.prefix||"%{",G=B&&B.suffix||"}";if(N===u||G===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(S(N)+"(.*?)"+S(G),"g")}var O=C(),P=/%\{(.*?)\}/g;function k(B,N,G,$,X,ee){if(typeof B!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(N==null)return B;var J=B,le=$||P,Z=ee||i,H=typeof N=="number"?{smart_count:N}:N;if(H.smart_count!=null&&B){var oe=X||p,ue=s.call(B,u),ce=G||"en",be=O(oe,ce),Te=_(oe,be,H.smart_count);J=i.call(ue[Te]||ue[0],/^[^\S]*|[^\S]*$/g,"")}return J=Z.call(J,le,function(ve,Ce){return!r(H,Ce)||H[Ce]==null?ve:H[Ce]}),J}function F(B){var N=B||{};this.phrases={},this.extend(N.phrases||{}),this.currentLocale=N.locale||"en";var G=N.allowMissing?k:null;this.onMissingKey=typeof N.onMissingKey=="function"?N.onMissingKey:G,this.warn=N.warn||n,this.replaceImplementation=N.replace||i,this.tokenRegex=I(N.interpolation),this.pluralRules=N.pluralRules||p}return F.prototype.locale=function(B){return B&&(this.currentLocale=B),this.currentLocale},F.prototype.extend=function(B,N){for(var G=e(B||{}),$=0;$<G.length;$+=1){var X=G[$][0],ee=G[$][1],J=N?N+"."+X:X;typeof ee=="object"?this.extend(ee,J):this.phrases[J]=ee}},F.prototype.unset=function(B,N){if(typeof B=="string")delete this.phrases[B];else for(var G=e(B||{}),$=0;$<G.length;$+=1){var X=G[$][0],ee=G[$][1],J=N?N+"."+X:X;typeof ee=="object"?this.unset(ee,J):delete this.phrases[J]}},F.prototype.clear=function(){this.phrases={}},F.prototype.replace=function(B){this.clear(),this.extend(B)},F.prototype.t=function(B,N){var G,$,X=N??{};if(typeof this.phrases[B]=="string")G=this.phrases[B];else if(typeof X._=="string")G=X._;else if(this.onMissingKey){var ee=this.onMissingKey;$=ee(B,X,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+B+'"'),$=B;return typeof G=="string"&&($=k(G,X,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),$},F.prototype.has=function(B){return r(this.phrases,B)},F.transformPhrase=function(N,G,$){return k(N,G,$)},bP=F,bP}var qRe=$Re();const o$=rl(qRe);var Rg=function(){return Rg=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rg.apply(this,arguments)};const URe=(function(e,t,r,n){r===void 0&&(r=[{locale:"en",name:"English"}]),n===void 0&&(n={});var i=t,s=e(t);if(s instanceof Promise)throw new Error("The i18nProvider returned a Promise for the messages of the default locale (".concat(t,"). Please update your i18nProvider to return the messages of the default locale in a synchronous way."));var u,a;Array.isArray(r)?(u=r,a=n):(u=[{locale:"en",name:"English"}],a=r);var p=new o$(Rg({locale:i,phrases:Rg({"":""},s)},a)),d=p.t.bind(p);return{translate:function(g,_){return _===void 0&&(_={}),d(g,_)},changeLocale:function(g){return Promise.resolve(e(g)).then(function(_){i=g;var C=new o$(Rg({locale:g,phrases:Rg({"":""},_)},n));d=C.t.bind(C)})},getLocale:function(){return i},getLocales:function(){return u}}});var VRe=URe(function(){return cRe},"en",[{name:"en",value:"English"}],{allowMissing:!0}),GRe=kEe(),HRe=function(e){var t=e.accessDenied,r=e.authCallbackPage,n=e.authenticationError,i=e.authProvider,s=e.basename,u=e.catchAll,a=e.children,p=e.darkTheme,d=e.dashboard,g=e.dataProvider,_=e.defaultTheme,C=e.disableTelemetry,S=e.error,I=e.i18nProvider,O=I===void 0?VRe:I,P=e.layout,k=e.lightTheme,F=e.loading,B=e.loginPage,N=e.notification,G=e.queryClient,$=e.ready,X=e.requireAuth,ee=e.store,J=ee===void 0?GRe:ee,le=e.theme,Z=e.title,H=Z===void 0?"React Admin":Z;return R.createElement(_X,{authProvider:i,basename:s,darkTheme:p,dataProvider:g,defaultTheme:_,i18nProvider:O,lightTheme:k,queryClient:G,store:J,theme:le},R.createElement(lRe,{accessDenied:t,authCallbackPage:r,authenticationError:n,catchAll:u,dashboard:d,disableTelemetry:C,error:S,layout:P,loading:F,loginPage:B,notification:N,ready:$,requireAuth:X,title:H},a))},Nv={exports:{}},s$;function WRe(){if(s$)return Nv.exports;s$=1,Nv.exports=r,Nv.exports.parse=r,Nv.exports.stringify=n;var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,t=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function r(i){var s=i.split(";"),u=s.pop(),a=(s.shift()||"").split("=").pop(),p=0;function d($){var X=u.substring(p).match($);return X?(p+=X[0].length,X[0]):null}function g($){return $&&a.match(/\d+/)&&($.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),$}function _(){d(/^\s*/)}function C(){_();for(var $=0,X=[],ee=[X],J=X,le;le=d(/^(\()/)||d(/^(\))/)||d(/^(,)/)||d(t);){if(le==="(")ee.push(J),J=[],ee[ee.length-1].push(J),$++;else if(le===")"){if(J.length===0||(J=ee.pop(),!J))return null;if($--,$===0)break}else if(le===",")J=[],ee[ee.length-1].push(J);else if(!le.split(/\s/g).some(isNaN))Array.prototype.push.apply(J,le.split(/\s/g).map(parseFloat));else return null;_()}return $!==0?null:X}function S(){for(var $=[],X,ee;ee=d(t)||d(/^(,)/);)ee===","?($.push(X),X=[]):ee.split(/\s/g).some(isNaN)||(X||(X=[]),Array.prototype.push.apply(X,ee.split(/\s/g).map(parseFloat))),_();if(X)$.push(X);else return null;return $.length?$:null}function I(){if(!d(/^(point(\sz)?)/i)||(_(),!d(/^(\()/)))return null;var $=S();return!$||(_(),!d(/^(\))/))?null:{type:"Point",coordinates:$[0]}}function O(){if(!d(/^(multipoint)/i))return null;_();var $=u.substring(u.indexOf("(")+1,u.length-1).replace(/\(/g,"").replace(/\)/g,"");u="MULTIPOINT ("+$+")";var X=C();return X?(_(),{type:"MultiPoint",coordinates:X}):null}function P(){if(!d(/^(multilinestring)/i))return null;_();var $=C();return $?(_(),{type:"MultiLineString",coordinates:$}):null}function k(){if(!d(/^(linestring(\sz)?)/i)||(_(),!d(/^(\()/)))return null;var $=S();return!$||!d(/^(\))/)?null:{type:"LineString",coordinates:$}}function F(){if(!d(/^(polygon(\sz)?)/i))return null;_();var $=C();return $?{type:"Polygon",coordinates:$}:null}function B(){if(!d(/^(multipolygon)/i))return null;_();var $=C();return $?{type:"MultiPolygon",coordinates:$}:null}function N(){var $=[],X;if(!d(/^(geometrycollection)/i)||(_(),!d(/^(\()/)))return null;for(;X=G();)$.push(X),_(),d(/^(,)/),_();return d(/^(\))/)?{type:"GeometryCollection",geometries:$}:null}function G(){return I()||k()||F()||O()||P()||B()||N()}return g(G())}function n(i){i.type==="Feature"&&(i=i.geometry);function s(g){return g.join(" ")}function u(g){return g.map(s).join(", ")}function a(g){return g.map(u).map(d).join(", ")}function p(g){return g.map(a).map(d).join(", ")}function d(g){return"("+g+")"}switch(i.type){case"Point":return"POINT ("+s(i.coordinates)+")";case"LineString":return"LINESTRING ("+u(i.coordinates)+")";case"Polygon":return"POLYGON ("+a(i.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+u(i.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+p(i.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+a(i.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+i.geometries.map(n).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return Nv.exports}var yd=WRe();function Qx(e){const t=e?.source,r=Al(),n=fb({mapId:e?.mapId}),[i,s]=R.useState(),[u,a]=R.useState(),p=nZ(e),{field:{onChange:d}}=p;return R.useEffect(()=>{if(typeof r>"u"||!r[t])return;const g={type:"Feature",properties:{},geometry:yd.parse(r[t])};s(g),a(g)},[r,e.source]),R.useEffect(()=>{if(n.map&&typeof r<"u"&&r[t]){const g=AV(yd.parse(r[t]));g?.geometry?.coordinates&&n.map.setCenter(g.geometry.coordinates)}},[n.map]),Ue.jsxs(Ue.Fragment,{children:[e.embeddedMap&&Ue.jsx(cb,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:Array.isArray(e?.MapLibreMapProps?.options?.center)&&e.MapLibreMapProps.options.center.length===2?[e.MapLibreMapProps.options.center[0],e.MapLibreMapProps.options.center[1]]:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),e.type==="point"&&Ue.jsxs(Ue.Fragment,{children:[u&&Ue.jsx(l0,{mapId:e?.mapId,geojson:u,options:{paint:{"circle-radius":8,"circle-color":"#6f6f96","circle-stroke-color":"white","circle-stroke-width":3,"circle-opacity":.8}},type:"circle",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),Ue.jsx(E1,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_point",onChange:g=>{typeof g[0]<"u"&&d(yd.stringify(g[0]))}})]}),e.type==="polygon"&&Ue.jsxs(Ue.Fragment,{children:[u&&Ue.jsx(l0,{mapId:e?.mapId,geojson:u,options:{paint:{"fill-color":"#6f6f96","fill-opacity":.6}},type:"fill",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),Ue.jsx(E1,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_polygon",onChange:g=>{typeof g[0]<"u"&&d(yd.stringify(g[0]))}})]}),e.type==="line"&&Ue.jsxs(Ue.Fragment,{children:[u&&Ue.jsx(l0,{mapId:e?.mapId,geojson:u,options:{paint:{"line-width":6,"line-color":"#6f6f96","line-opacity":.6}},type:"line",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),Ue.jsx(E1,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_line_string",onChange:g=>{typeof g[0]<"u"&&d(yd.stringify(g[0]))}})]})]})}Qx.defaultProps={type:"point",embeddedMap:!0};Qx.__docgenInfo={description:"",methods:[],displayName:"GeospatialInputMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},geometrytype:{required:!1,tsType:{name:"union",raw:"'point' | 'line' | 'polygon'",elements:[{name:"literal",value:"'point'"},{name:"literal",value:"'line'"},{name:"literal",value:"'polygon'"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},mapId:{required:!1,tsType:{name:"string"},description:""},type:{defaultValue:{value:"'point'",computed:!1},required:!1}},composes:["InputProps"]};function qd(e){return Ue.jsx(Ue.Fragment,{children:e.embeddedMap?Ue.jsx(C2,{children:Ue.jsx(Qx,{...e})}):Ue.jsx(Qx,{...e})})}qd.defaultProps={embeddedMap:!0};qd.__docgenInfo={description:"",methods:[],displayName:"GeospatialInput",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};var ZRe=Object.defineProperty,XRe=(e,t,r)=>t in e?ZRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,zu=(e,t,r)=>XRe(e,typeof t!="symbol"?t+"":t,r),n1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var KRe=Array.isArray,hm=KRe,YRe=typeof n1=="object"&&n1&&n1.Object===Object&&n1,DX=YRe,JRe=DX,QRe=typeof self=="object"&&self&&self.Object===Object&&self,eLe=JRe||QRe||Function("return this")(),Jf=eLe,tLe=Jf,rLe=tLe.Symbol,zb=rLe,l$=zb,kX=Object.prototype,nLe=kX.hasOwnProperty,iLe=kX.toString,Bv=l$?l$.toStringTag:void 0;function aLe(e){var t=nLe.call(e,Bv),r=e[Bv];try{e[Bv]=void 0;var n=!0}catch{}var i=iLe.call(e);return n&&(t?e[Bv]=r:delete e[Bv]),i}var oLe=aLe,sLe=Object.prototype,lLe=sLe.toString;function uLe(e){return lLe.call(e)}var cLe=uLe,u$=zb,fLe=oLe,hLe=cLe,dLe="[object Null]",pLe="[object Undefined]",c$=u$?u$.toStringTag:void 0;function mLe(e){return e==null?e===void 0?pLe:dLe:c$&&c$ in Object(e)?fLe(e):hLe(e)}var $b=mLe;function gLe(e){return e!=null&&typeof e=="object"}var dm=gLe,yLe=$b,vLe=dm,bLe="[object Symbol]";function _Le(e){return typeof e=="symbol"||vLe(e)&&yLe(e)==bLe}var BR=_Le,xLe=hm,wLe=BR,SLe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ELe=/^\w*$/;function CLe(e,t){if(xLe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||wLe(e)?!0:ELe.test(e)||!SLe.test(e)||t!=null&&e in Object(t)}var ALe=CLe;function TLe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ry=TLe,PLe=$b,ILe=Ry,MLe="[object AsyncFunction]",OLe="[object Function]",RLe="[object GeneratorFunction]",LLe="[object Proxy]";function DLe(e){if(!ILe(e))return!1;var t=PLe(e);return t==OLe||t==RLe||t==MLe||t==LLe}var FX=DLe,kLe=Jf,FLe=kLe["__core-js_shared__"],NLe=FLe,_P=NLe,f$=(function(){var e=/[^.]+$/.exec(_P&&_P.keys&&_P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function BLe(e){return!!f$&&f$ in e}var jLe=BLe,zLe=Function.prototype,$Le=zLe.toString;function qLe(e){if(e!=null){try{return $Le.call(e)}catch{}try{return e+""}catch{}}return""}var NX=qLe,ULe=FX,VLe=jLe,GLe=Ry,HLe=NX,WLe=/[\\^$.*+?()[\]{}|]/g,ZLe=/^\[object .+?Constructor\]$/,XLe=Function.prototype,KLe=Object.prototype,YLe=XLe.toString,JLe=KLe.hasOwnProperty,QLe=RegExp("^"+YLe.call(JLe).replace(WLe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e4e(e){if(!GLe(e)||VLe(e))return!1;var t=ULe(e)?QLe:ZLe;return t.test(HLe(e))}var t4e=e4e;function r4e(e,t){return e?.[t]}var n4e=r4e,i4e=t4e,a4e=n4e;function o4e(e,t){var r=a4e(e,t);return i4e(r)?r:void 0}var pm=o4e,s4e=pm,l4e=s4e(Object,"create"),_w=l4e,h$=_w;function u4e(){this.__data__=h$?h$(null):{},this.size=0}var c4e=u4e;function f4e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var h4e=f4e,d4e=_w,p4e="__lodash_hash_undefined__",m4e=Object.prototype,g4e=m4e.hasOwnProperty;function y4e(e){var t=this.__data__;if(d4e){var r=t[e];return r===p4e?void 0:r}return g4e.call(t,e)?t[e]:void 0}var v4e=y4e,b4e=_w,_4e=Object.prototype,x4e=_4e.hasOwnProperty;function w4e(e){var t=this.__data__;return b4e?t[e]!==void 0:x4e.call(t,e)}var S4e=w4e,E4e=_w,C4e="__lodash_hash_undefined__";function A4e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=E4e&&t===void 0?C4e:t,this}var T4e=A4e,P4e=c4e,I4e=h4e,M4e=v4e,O4e=S4e,R4e=T4e;function Ly(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ly.prototype.clear=P4e;Ly.prototype.delete=I4e;Ly.prototype.get=M4e;Ly.prototype.has=O4e;Ly.prototype.set=R4e;var L4e=Ly;function D4e(){this.__data__=[],this.size=0}var k4e=D4e;function F4e(e,t){return e===t||e!==e&&t!==t}var jR=F4e,N4e=jR;function B4e(e,t){for(var r=e.length;r--;)if(N4e(e[r][0],t))return r;return-1}var xw=B4e,j4e=xw,z4e=Array.prototype,$4e=z4e.splice;function q4e(e){var t=this.__data__,r=j4e(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$4e.call(t,r,1),--this.size,!0}var U4e=q4e,V4e=xw;function G4e(e){var t=this.__data__,r=V4e(t,e);return r<0?void 0:t[r][1]}var H4e=G4e,W4e=xw;function Z4e(e){return W4e(this.__data__,e)>-1}var X4e=Z4e,K4e=xw;function Y4e(e,t){var r=this.__data__,n=K4e(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var J4e=Y4e,Q4e=k4e,eDe=U4e,tDe=H4e,rDe=X4e,nDe=J4e;function Dy(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Dy.prototype.clear=Q4e;Dy.prototype.delete=eDe;Dy.prototype.get=tDe;Dy.prototype.has=rDe;Dy.prototype.set=nDe;var ww=Dy,iDe=pm,aDe=Jf,oDe=iDe(aDe,"Map"),zR=oDe,d$=L4e,sDe=ww,lDe=zR;function uDe(){this.size=0,this.__data__={hash:new d$,map:new(lDe||sDe),string:new d$}}var cDe=uDe;function fDe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hDe=fDe,dDe=hDe;function pDe(e,t){var r=e.__data__;return dDe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Sw=pDe,mDe=Sw;function gDe(e){var t=mDe(this,e).delete(e);return this.size-=t?1:0,t}var yDe=gDe,vDe=Sw;function bDe(e){return vDe(this,e).get(e)}var _De=bDe,xDe=Sw;function wDe(e){return xDe(this,e).has(e)}var SDe=wDe,EDe=Sw;function CDe(e,t){var r=EDe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var ADe=CDe,TDe=cDe,PDe=yDe,IDe=_De,MDe=SDe,ODe=ADe;function ky(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ky.prototype.clear=TDe;ky.prototype.delete=PDe;ky.prototype.get=IDe;ky.prototype.has=MDe;ky.prototype.set=ODe;var $R=ky,BX=$R,RDe="Expected a function";function qR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(RDe);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var u=e.apply(this,n);return r.cache=s.set(i,u)||s,u};return r.cache=new(qR.Cache||BX),r}qR.Cache=BX;var LDe=qR,DDe=LDe,kDe=500;function FDe(e){var t=DDe(e,function(n){return r.size===kDe&&r.clear(),n}),r=t.cache;return t}var NDe=FDe,BDe=NDe,jDe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zDe=/\\(\\)?/g,$De=BDe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jDe,function(r,n,i,s){t.push(i?s.replace(zDe,"$1"):n||r)}),t}),qDe=$De;function UDe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var VDe=UDe,p$=zb,GDe=VDe,HDe=hm,WDe=BR,m$=p$?p$.prototype:void 0,g$=m$?m$.toString:void 0;function jX(e){if(typeof e=="string")return e;if(HDe(e))return GDe(e,jX)+"";if(WDe(e))return g$?g$.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ZDe=jX,XDe=ZDe;function KDe(e){return e==null?"":XDe(e)}var YDe=KDe,JDe=hm,QDe=ALe,eke=qDe,tke=YDe;function rke(e,t){return JDe(e)?e:QDe(e,t)?[e]:eke(tke(e))}var nke=rke,ike=BR;function ake(e){if(typeof e=="string"||ike(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var oke=ake,ske=nke,lke=oke;function uke(e,t){t=ske(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[lke(t[r++])];return r&&r==n?e:void 0}var cke=uke,fke=cke;function hke(e,t,r){var n=e==null?void 0:fke(e,t);return n===void 0?r:n}var dke=hke;const so=NR(dke);var pke=ww;function mke(){this.__data__=new pke,this.size=0}var gke=mke;function yke(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var vke=yke;function bke(e){return this.__data__.get(e)}var _ke=bke;function xke(e){return this.__data__.has(e)}var wke=xke,Ske=ww,Eke=zR,Cke=$R,Ake=200;function Tke(e,t){var r=this.__data__;if(r instanceof Ske){var n=r.__data__;if(!Eke||n.length<Ake-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Cke(n)}return r.set(e,t),this.size=r.size,this}var Pke=Tke,Ike=ww,Mke=gke,Oke=vke,Rke=_ke,Lke=wke,Dke=Pke;function Fy(e){var t=this.__data__=new Ike(e);this.size=t.size}Fy.prototype.clear=Mke;Fy.prototype.delete=Oke;Fy.prototype.get=Rke;Fy.prototype.has=Lke;Fy.prototype.set=Dke;var UR=Fy;function kke(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Fke=kke,Nke=pm,Bke=(function(){try{var e=Nke(Object,"defineProperty");return e({},"",{}),e}catch{}})(),jke=Bke,y$=jke;function zke(e,t,r){t=="__proto__"&&y$?y$(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zX=zke,$ke=zX,qke=jR,Uke=Object.prototype,Vke=Uke.hasOwnProperty;function Gke(e,t,r){var n=e[t];(!(Vke.call(e,t)&&qke(n,r))||r===void 0&&!(t in e))&&$ke(e,t,r)}var $X=Gke,Hke=$X,Wke=zX;function Zke(e,t,r,n){var i=!r;r||(r={});for(var s=-1,u=t.length;++s<u;){var a=t[s],p=n?n(r[a],e[a],a,r,e):void 0;p===void 0&&(p=e[a]),i?Wke(r,a,p):Hke(r,a,p)}return r}var Ew=Zke;function Xke(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Kke=Xke,Yke=$b,Jke=dm,Qke="[object Arguments]";function eFe(e){return Jke(e)&&Yke(e)==Qke}var tFe=eFe,v$=tFe,rFe=dm,qX=Object.prototype,nFe=qX.hasOwnProperty,iFe=qX.propertyIsEnumerable,aFe=v$((function(){return arguments})())?v$:function(e){return rFe(e)&&nFe.call(e,"callee")&&!iFe.call(e,"callee")},oFe=aFe,e2={exports:{}};function sFe(){return!1}var lFe=sFe;e2.exports;(function(e,t){var r=Jf,n=lFe,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,d=p||n;e.exports=d})(e2,e2.exports);var VR=e2.exports,uFe=9007199254740991,cFe=/^(?:0|[1-9]\d*)$/;function fFe(e,t){var r=typeof e;return t=t??uFe,!!t&&(r=="number"||r!="symbol"&&cFe.test(e))&&e>-1&&e%1==0&&e<t}var hFe=fFe,dFe=9007199254740991;function pFe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dFe}var UX=pFe,mFe=$b,gFe=UX,yFe=dm,vFe="[object Arguments]",bFe="[object Array]",_Fe="[object Boolean]",xFe="[object Date]",wFe="[object Error]",SFe="[object Function]",EFe="[object Map]",CFe="[object Number]",AFe="[object Object]",TFe="[object RegExp]",PFe="[object Set]",IFe="[object String]",MFe="[object WeakMap]",OFe="[object ArrayBuffer]",RFe="[object DataView]",LFe="[object Float32Array]",DFe="[object Float64Array]",kFe="[object Int8Array]",FFe="[object Int16Array]",NFe="[object Int32Array]",BFe="[object Uint8Array]",jFe="[object Uint8ClampedArray]",zFe="[object Uint16Array]",$Fe="[object Uint32Array]",Ja={};Ja[LFe]=Ja[DFe]=Ja[kFe]=Ja[FFe]=Ja[NFe]=Ja[BFe]=Ja[jFe]=Ja[zFe]=Ja[$Fe]=!0;Ja[vFe]=Ja[bFe]=Ja[OFe]=Ja[_Fe]=Ja[RFe]=Ja[xFe]=Ja[wFe]=Ja[SFe]=Ja[EFe]=Ja[CFe]=Ja[AFe]=Ja[TFe]=Ja[PFe]=Ja[IFe]=Ja[MFe]=!1;function qFe(e){return yFe(e)&&gFe(e.length)&&!!Ja[mFe(e)]}var UFe=qFe;function VFe(e){return function(t){return e(t)}}var GR=VFe,t2={exports:{}};t2.exports;(function(e,t){var r=DX,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,u=s&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(t2,t2.exports);var HR=t2.exports,GFe=UFe,HFe=GR,b$=HR,_$=b$&&b$.isTypedArray,WFe=_$?HFe(_$):GFe,VX=WFe,ZFe=Kke,XFe=oFe,KFe=hm,YFe=VR,JFe=hFe,QFe=VX,eNe=Object.prototype,tNe=eNe.hasOwnProperty;function rNe(e,t){var r=KFe(e),n=!r&&XFe(e),i=!r&&!n&&YFe(e),s=!r&&!n&&!i&&QFe(e),u=r||n||i||s,a=u?ZFe(e.length,String):[],p=a.length;for(var d in e)(t||tNe.call(e,d))&&!(u&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||JFe(d,p)))&&a.push(d);return a}var GX=rNe,nNe=Object.prototype;function iNe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||nNe;return e===r}var WR=iNe;function aNe(e,t){return function(r){return e(t(r))}}var HX=aNe,oNe=HX,sNe=oNe(Object.keys,Object),lNe=sNe,uNe=WR,cNe=lNe,fNe=Object.prototype,hNe=fNe.hasOwnProperty;function dNe(e){if(!uNe(e))return cNe(e);var t=[];for(var r in Object(e))hNe.call(e,r)&&r!="constructor"&&t.push(r);return t}var pNe=dNe,mNe=FX,gNe=UX;function yNe(e){return e!=null&&gNe(e.length)&&!mNe(e)}var WX=yNe,vNe=GX,bNe=pNe,_Ne=WX;function xNe(e){return _Ne(e)?vNe(e):bNe(e)}var Cw=xNe,wNe=Ew,SNe=Cw;function ENe(e,t){return e&&wNe(t,SNe(t),e)}var CNe=ENe;function ANe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var TNe=ANe,PNe=Ry,INe=WR,MNe=TNe,ONe=Object.prototype,RNe=ONe.hasOwnProperty;function LNe(e){if(!PNe(e))return MNe(e);var t=INe(e),r=[];for(var n in e)n=="constructor"&&(t||!RNe.call(e,n))||r.push(n);return r}var DNe=LNe,kNe=GX,FNe=DNe,NNe=WX;function BNe(e){return NNe(e)?kNe(e,!0):FNe(e)}var ZR=BNe,jNe=Ew,zNe=ZR;function $Ne(e,t){return e&&jNe(t,zNe(t),e)}var qNe=$Ne,r2={exports:{}};r2.exports;(function(e,t){var r=Jf,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,u=s?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(d,g){if(g)return d.slice();var _=d.length,C=a?a(_):new d.constructor(_);return d.copy(C),C}e.exports=p})(r2,r2.exports);var UNe=r2.exports;function VNe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var GNe=VNe;function HNe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var u=e[r];t(u,r,e)&&(s[i++]=u)}return s}var WNe=HNe;function ZNe(){return[]}var ZX=ZNe,XNe=WNe,KNe=ZX,YNe=Object.prototype,JNe=YNe.propertyIsEnumerable,x$=Object.getOwnPropertySymbols,QNe=x$?function(e){return e==null?[]:(e=Object(e),XNe(x$(e),function(t){return JNe.call(e,t)}))}:KNe,XR=QNe,e6e=Ew,t6e=XR;function r6e(e,t){return e6e(e,t6e(e),t)}var n6e=r6e;function i6e(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var XX=i6e,a6e=HX,o6e=a6e(Object.getPrototypeOf,Object),KX=o6e,s6e=XX,l6e=KX,u6e=XR,c6e=ZX,f6e=Object.getOwnPropertySymbols,h6e=f6e?function(e){for(var t=[];e;)s6e(t,u6e(e)),e=l6e(e);return t}:c6e,YX=h6e,d6e=Ew,p6e=YX;function m6e(e,t){return d6e(e,p6e(e),t)}var g6e=m6e,y6e=XX,v6e=hm;function b6e(e,t,r){var n=t(e);return v6e(e)?n:y6e(n,r(e))}var JX=b6e,_6e=JX,x6e=XR,w6e=Cw;function S6e(e){return _6e(e,w6e,x6e)}var QX=S6e,E6e=JX,C6e=YX,A6e=ZR;function T6e(e){return E6e(e,A6e,C6e)}var P6e=T6e,I6e=pm,M6e=Jf,O6e=I6e(M6e,"DataView"),R6e=O6e,L6e=pm,D6e=Jf,k6e=L6e(D6e,"Promise"),F6e=k6e,N6e=pm,B6e=Jf,j6e=N6e(B6e,"Set"),z6e=j6e,$6e=pm,q6e=Jf,U6e=$6e(q6e,"WeakMap"),V6e=U6e,BI=R6e,jI=zR,zI=F6e,$I=z6e,qI=V6e,eK=$b,Ny=NX,w$="[object Map]",G6e="[object Object]",S$="[object Promise]",E$="[object Set]",C$="[object WeakMap]",A$="[object DataView]",H6e=Ny(BI),W6e=Ny(jI),Z6e=Ny(zI),X6e=Ny($I),K6e=Ny(qI),wp=eK;(BI&&wp(new BI(new ArrayBuffer(1)))!=A$||jI&&wp(new jI)!=w$||zI&&wp(zI.resolve())!=S$||$I&&wp(new $I)!=E$||qI&&wp(new qI)!=C$)&&(wp=function(e){var t=eK(e),r=t==G6e?e.constructor:void 0,n=r?Ny(r):"";if(n)switch(n){case H6e:return A$;case W6e:return w$;case Z6e:return S$;case X6e:return E$;case K6e:return C$}return t});var Aw=wp,Y6e=Object.prototype,J6e=Y6e.hasOwnProperty;function Q6e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&J6e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var e8e=Q6e,t8e=Jf,r8e=t8e.Uint8Array,tK=r8e,T$=tK;function n8e(e){var t=new e.constructor(e.byteLength);return new T$(t).set(new T$(e)),t}var KR=n8e,i8e=KR;function a8e(e,t){var r=t?i8e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var o8e=a8e,s8e=/\w*$/;function l8e(e){var t=new e.constructor(e.source,s8e.exec(e));return t.lastIndex=e.lastIndex,t}var u8e=l8e,P$=zb,I$=P$?P$.prototype:void 0,M$=I$?I$.valueOf:void 0;function c8e(e){return M$?Object(M$.call(e)):{}}var f8e=c8e,h8e=KR;function d8e(e,t){var r=t?h8e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var p8e=d8e,m8e=KR,g8e=o8e,y8e=u8e,v8e=f8e,b8e=p8e,_8e="[object Boolean]",x8e="[object Date]",w8e="[object Map]",S8e="[object Number]",E8e="[object RegExp]",C8e="[object Set]",A8e="[object String]",T8e="[object Symbol]",P8e="[object ArrayBuffer]",I8e="[object DataView]",M8e="[object Float32Array]",O8e="[object Float64Array]",R8e="[object Int8Array]",L8e="[object Int16Array]",D8e="[object Int32Array]",k8e="[object Uint8Array]",F8e="[object Uint8ClampedArray]",N8e="[object Uint16Array]",B8e="[object Uint32Array]";function j8e(e,t,r){var n=e.constructor;switch(t){case P8e:return m8e(e);case _8e:case x8e:return new n(+e);case I8e:return g8e(e,r);case M8e:case O8e:case R8e:case L8e:case D8e:case k8e:case F8e:case N8e:case B8e:return b8e(e,r);case w8e:return new n;case S8e:case A8e:return new n(e);case E8e:return y8e(e);case C8e:return new n;case T8e:return v8e(e)}}var z8e=j8e,$8e=Ry,O$=Object.create,q8e=(function(){function e(){}return function(t){if(!$8e(t))return{};if(O$)return O$(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),U8e=q8e,V8e=U8e,G8e=KX,H8e=WR;function W8e(e){return typeof e.constructor=="function"&&!H8e(e)?V8e(G8e(e)):{}}var Z8e=W8e,X8e=Aw,K8e=dm,Y8e="[object Map]";function J8e(e){return K8e(e)&&X8e(e)==Y8e}var Q8e=J8e,eBe=Q8e,tBe=GR,R$=HR,L$=R$&&R$.isMap,rBe=L$?tBe(L$):eBe,nBe=rBe,iBe=Aw,aBe=dm,oBe="[object Set]";function sBe(e){return aBe(e)&&iBe(e)==oBe}var lBe=sBe,uBe=lBe,cBe=GR,D$=HR,k$=D$&&D$.isSet,fBe=k$?cBe(k$):uBe,hBe=fBe,dBe=UR,pBe=Fke,mBe=$X,gBe=CNe,yBe=qNe,vBe=UNe,bBe=GNe,_Be=n6e,xBe=g6e,wBe=QX,SBe=P6e,EBe=Aw,CBe=e8e,ABe=z8e,TBe=Z8e,PBe=hm,IBe=VR,MBe=nBe,OBe=Ry,RBe=hBe,LBe=Cw,DBe=ZR,kBe=1,FBe=2,NBe=4,rK="[object Arguments]",BBe="[object Array]",jBe="[object Boolean]",zBe="[object Date]",$Be="[object Error]",nK="[object Function]",qBe="[object GeneratorFunction]",UBe="[object Map]",VBe="[object Number]",iK="[object Object]",GBe="[object RegExp]",HBe="[object Set]",WBe="[object String]",ZBe="[object Symbol]",XBe="[object WeakMap]",KBe="[object ArrayBuffer]",YBe="[object DataView]",JBe="[object Float32Array]",QBe="[object Float64Array]",eje="[object Int8Array]",tje="[object Int16Array]",rje="[object Int32Array]",nje="[object Uint8Array]",ije="[object Uint8ClampedArray]",aje="[object Uint16Array]",oje="[object Uint32Array]",qa={};qa[rK]=qa[BBe]=qa[KBe]=qa[YBe]=qa[jBe]=qa[zBe]=qa[JBe]=qa[QBe]=qa[eje]=qa[tje]=qa[rje]=qa[UBe]=qa[VBe]=qa[iK]=qa[GBe]=qa[HBe]=qa[WBe]=qa[ZBe]=qa[nje]=qa[ije]=qa[aje]=qa[oje]=!0;qa[$Be]=qa[nK]=qa[XBe]=!1;function F1(e,t,r,n,i,s){var u,a=t&kBe,p=t&FBe,d=t&NBe;if(r&&(u=i?r(e,n,i,s):r(e)),u!==void 0)return u;if(!OBe(e))return e;var g=PBe(e);if(g){if(u=CBe(e),!a)return bBe(e,u)}else{var _=EBe(e),C=_==nK||_==qBe;if(IBe(e))return vBe(e,a);if(_==iK||_==rK||C&&!i){if(u=p||C?{}:TBe(e),!a)return p?xBe(e,yBe(u,e)):_Be(e,gBe(u,e))}else{if(!qa[_])return i?e:{};u=ABe(e,_,a)}}s||(s=new dBe);var S=s.get(e);if(S)return S;s.set(e,u),RBe(e)?e.forEach(function(P){u.add(F1(P,t,r,P,e,s))}):MBe(e)&&e.forEach(function(P,k){u.set(k,F1(P,t,r,k,e,s))});var I=d?p?SBe:wBe:p?DBe:LBe,O=g?void 0:I(e);return pBe(O||e,function(P,k){O&&(k=P,P=e[k]),mBe(u,k,F1(P,t,r,k,e,s))}),u}var aK=F1,sje="__lodash_hash_undefined__";function lje(e){return this.__data__.set(e,sje),this}var uje=lje;function cje(e){return this.__data__.has(e)}var fje=cje,hje=$R,dje=uje,pje=fje;function n2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new hje;++t<r;)this.add(e[t])}n2.prototype.add=n2.prototype.push=dje;n2.prototype.has=pje;var mje=n2;function gje(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var yje=gje;function vje(e,t){return e.has(t)}var bje=vje,_je=mje,xje=yje,wje=bje,Sje=1,Eje=2;function Cje(e,t,r,n,i,s){var u=r&Sje,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var d=s.get(e),g=s.get(t);if(d&&g)return d==t&&g==e;var _=-1,C=!0,S=r&Eje?new _je:void 0;for(s.set(e,t),s.set(t,e);++_<a;){var I=e[_],O=t[_];if(n)var P=u?n(O,I,_,t,e,s):n(I,O,_,e,t,s);if(P!==void 0){if(P)continue;C=!1;break}if(S){if(!xje(t,function(k,F){if(!wje(S,F)&&(I===k||i(I,k,r,n,s)))return S.push(F)})){C=!1;break}}else if(!(I===O||i(I,O,r,n,s))){C=!1;break}}return s.delete(e),s.delete(t),C}var oK=Cje;function Aje(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var Tje=Aje;function Pje(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Ije=Pje,F$=zb,N$=tK,Mje=jR,Oje=oK,Rje=Tje,Lje=Ije,Dje=1,kje=2,Fje="[object Boolean]",Nje="[object Date]",Bje="[object Error]",jje="[object Map]",zje="[object Number]",$je="[object RegExp]",qje="[object Set]",Uje="[object String]",Vje="[object Symbol]",Gje="[object ArrayBuffer]",Hje="[object DataView]",B$=F$?F$.prototype:void 0,xP=B$?B$.valueOf:void 0;function Wje(e,t,r,n,i,s,u){switch(r){case Hje:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gje:return!(e.byteLength!=t.byteLength||!s(new N$(e),new N$(t)));case Fje:case Nje:case zje:return Mje(+e,+t);case Bje:return e.name==t.name&&e.message==t.message;case $je:case Uje:return e==t+"";case jje:var a=Rje;case qje:var p=n&Dje;if(a||(a=Lje),e.size!=t.size&&!p)return!1;var d=u.get(e);if(d)return d==t;n|=kje,u.set(e,t);var g=Oje(a(e),a(t),n,i,s,u);return u.delete(e),g;case Vje:if(xP)return xP.call(e)==xP.call(t)}return!1}var Zje=Wje,j$=QX,Xje=1,Kje=Object.prototype,Yje=Kje.hasOwnProperty;function Jje(e,t,r,n,i,s){var u=r&Xje,a=j$(e),p=a.length,d=j$(t),g=d.length;if(p!=g&&!u)return!1;for(var _=p;_--;){var C=a[_];if(!(u?C in t:Yje.call(t,C)))return!1}var S=s.get(e),I=s.get(t);if(S&&I)return S==t&&I==e;var O=!0;s.set(e,t),s.set(t,e);for(var P=u;++_<p;){C=a[_];var k=e[C],F=t[C];if(n)var B=u?n(F,k,C,t,e,s):n(k,F,C,e,t,s);if(!(B===void 0?k===F||i(k,F,r,n,s):B)){O=!1;break}P||(P=C=="constructor")}if(O&&!P){var N=e.constructor,G=t.constructor;N!=G&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof G=="function"&&G instanceof G)&&(O=!1)}return s.delete(e),s.delete(t),O}var Qje=Jje,wP=UR,eze=oK,tze=Zje,rze=Qje,z$=Aw,$$=hm,q$=VR,nze=VX,ize=1,U$="[object Arguments]",V$="[object Array]",i1="[object Object]",aze=Object.prototype,G$=aze.hasOwnProperty;function oze(e,t,r,n,i,s){var u=$$(e),a=$$(t),p=u?V$:z$(e),d=a?V$:z$(t);p=p==U$?i1:p,d=d==U$?i1:d;var g=p==i1,_=d==i1,C=p==d;if(C&&q$(e)){if(!q$(t))return!1;u=!0,g=!1}if(C&&!g)return s||(s=new wP),u||nze(e)?eze(e,t,r,n,i,s):tze(e,t,p,r,n,i,s);if(!(r&ize)){var S=g&&G$.call(e,"__wrapped__"),I=_&&G$.call(t,"__wrapped__");if(S||I){var O=S?e.value():e,P=I?t.value():t;return s||(s=new wP),i(O,P,r,n,s)}}return C?(s||(s=new wP),rze(e,t,r,n,i,s)):!1}var sze=oze,lze=sze,H$=dm;function sK(e,t,r,n,i){return e===t?!0:e==null||t==null||!H$(e)&&!H$(t)?e!==e&&t!==t:lze(e,t,r,n,sK,i)}var uze=sK,cze=UR,fze=uze,hze=1,dze=2;function pze(e,t,r,n){var i=r.length,s=i,u=!n;if(e==null)return!s;for(e=Object(e);i--;){var a=r[i];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=r[i];var p=a[0],d=e[p],g=a[1];if(u&&a[2]){if(d===void 0&&!(p in e))return!1}else{var _=new cze;if(n)var C=n(d,g,p,e,t,_);if(!(C===void 0?fze(g,d,hze|dze,n,_):C))return!1}}return!0}var mze=pze,gze=Ry;function yze(e){return e===e&&!gze(e)}var vze=yze,bze=vze,_ze=Cw;function xze(e){for(var t=_ze(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,bze(i)]}return t}var wze=xze;function Sze(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Eze=Sze,Cze=mze,Aze=wze,Tze=Eze;function Pze(e){var t=Aze(e);return t.length==1&&t[0][2]?Tze(t[0][0],t[0][1]):function(r){return r===e||Cze(r,e,t)}}var Ize=Pze,Mze=aK,Oze=Ize,Rze=1;function Lze(e){return Oze(Mze(e,Rze))}var Dze=Lze;const kze=NR(Dze);var Fze=aK,Nze=1,Bze=4;function jze(e){return Fze(e,Nze|Bze)}var zze=jze;const lK=NR(zze);class W${constructor({items:t=[],identifierName:r="id",getNewId:n}={}){if(zu(this,"sequence",0),zu(this,"items",[]),zu(this,"database",null),zu(this,"name",null),zu(this,"identifierName","id"),zu(this,"getNewId"),!Array.isArray(t))throw new Error("Can't initialize a Collection with anything else than an array of items");this.identifierName=r,this.getNewId=n||this.getNewIdFromSequence,t.map(this.addOne.bind(this))}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){if(this.name==null)throw new Error("Can't embed references without a collection name");const r=`${this.name.slice(0,-1)}_id`;return n=>{if(this.database==null)throw new Error("Can't embed references without a database");const i=this.database.collections[t];if(!i)throw new Error(`Can't embed a non-existing collection ${t}`);return Array.isArray(n[t])?n[t]=i.getAll({filter:s=>n[t].indexOf(s[i.identifierName])!==-1}):n[t]=i.getAll({filter:s=>s[r]===n[this.identifierName]}),n}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const s=this.database.collections[r];if(!s)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=s.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,s)=>s(i),n)}getCount(t){return this.getAll(t).length}getAll(t){let r=this.items.slice(0);return t&&(r=r.map(n=>Object.assign({},n)),t.embed&&this.database&&(r=r.map(this._itemEmbedder(t.embed))),t.filter&&(r=uK(r,t.filter)),t.sort&&(r=Vze(r,t.sort)),t.range&&(r=Gze(r,t.range))),r}getIndex(t){return this.items.findIndex(r=>r[this.identifierName]==t)}getOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);let i=this.items[n];return i=Object.assign({},i),r!=null&&r.embed&&this.database&&(i=this._itemEmbedder(r.embed)(i)),i}getNewIdFromSequence(){return this.sequence++}addOne(t){const r=lK(t),n=r[this.identifierName];if(n!=null){if(this.getIndex(n)!==-1)throw new Error(`An item with the identifier ${n} already exists`);typeof n=="number"&&(this.sequence=Math.max(this.sequence,n)+1)}else r[this.identifierName]=this.getNewId();return this.items.push(r),r}updateOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);for(const i in r)this.items[n][i]=r[i];return Object.assign({},this.items[n])}removeOne(t){const r=this.getIndex(t);if(r===-1)throw new Error(`No item with identifier ${t}`);const n=this.items[r];return this.items.splice(r,1),typeof t=="number"&&t==this.sequence-1&&this.sequence--,n}}const $ze=(e,t)=>e.reduce((r,n)=>r&&t(n),!0),qze=(e,t)=>e.reduce((r,n)=>r||t(n),!1),Uze=(e,t)=>e.reduce((r,n,i)=>{if(r!=null)return r;const s=e.slice(0,i+1).join("."),u=e.slice(i+1).join("."),a=so(t,s);return Array.isArray(a)&&i<e.length-1?[s,u]:void 0},void 0),Z$=(e,t)=>{if(e.indexOf("_q")!==-1){const r=e.replace(/(_q)$/,""),n=new RegExp(t.toString(),"i");return i=>{var s;return((s=so(i,r))==null?void 0:s.toString().match(n))!==null}}if(e.indexOf("_lte")!==-1){const r=e.replace(/(_lte)$/,"");return n=>so(n,r)<=t}if(e.indexOf("_gte")!==-1){const r=e.replace(/(_gte)$/,"");return n=>so(n,r)>=t}if(e.indexOf("_lt")!==-1){const r=e.replace(/(_lt)$/,"");return n=>so(n,r)<t}if(e.indexOf("_gt")!==-1){const r=e.replace(/(_gt)$/,"");return n=>so(n,r)>t}if(e.indexOf("_neq_any")!==-1){const r=e.replace(/(_neq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(s=>so(i,r)!=s)}if(e.indexOf("_neq")!==-1){const r=e.replace(/(_neq)$/,"");return n=>so(n,r)!=t}if(e.indexOf("_eq_any")!==-1){const r=e.replace(/(_eq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(s=>so(i,r)==s)}if(e.indexOf("_eq")!==-1){const r=e.replace(/(_eq)$/,"");return n=>so(n,r)==t}if(e.indexOf("_inc_any")!==-1){const r=e.replace(/(_inc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(s=>{const u=so(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(s):!1})}if(e.indexOf("_inc")!==-1){const r=e.replace(/(_inc)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(s=>{const u=so(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(s):!1})}if(e.indexOf("_ninc_any")!==-1){const r=e.replace(/(_ninc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(s=>{const u=so(i,r);return Array.isArray(u)||typeof u=="string"?!u.includes(s):!1})}return Array.isArray(t)?r=>Array.isArray(so(r,e))?$ze(t,n=>{const i=so(r,e);return Array.isArray(i)?qze(i,s=>s==n):!1}):t.filter(n=>n==so(r,e)).length>0:t==null?r=>so(r,e)==null:typeof t=="object"?r=>kze(t)(so(r,e)):r=>{const n=so(r,e);return Array.isArray(n)&&typeof t=="string"?n.indexOf(t)!==-1:typeof n=="boolean"&&typeof t=="string"?n===(t==="true"):n==t}};function uK(e,t){if(typeof t=="function")return e.filter(t);if(t instanceof Object){const r=Object.keys(t).map(n=>{if(n==="q"&&typeof t.q=="string"){const u=Hze(t.q),a=p=>{for(const d in p){const g=p[d];if(typeof g=="object"&&a(g)||g&&typeof g=="string"&&g.match&&g.match(u)!==null)return!0}return!1};return a}const i=n.split("."),s=t[n];return i.length>1?u=>{const a=Uze(i,u);if(a){const[p,d]=a,g=so(u,p);return Array.isArray(g)?uK(g,{[d]:s}).length>0:!1}return Z$(n,s)(u)}:Z$(n,s)});return e.filter(n=>r.reduce((i,s)=>i&&s(n),!0))}throw new Error("Unsupported filter type")}function Vze(e,t){if(typeof t=="function")return e.sort(t);if(typeof t=="string")return e.sort((r,n)=>{const i=so(r,t),s=so(n,t);return i>s?1:i<s?-1:0});if(Array.isArray(t)){const r=t[0],n=t[1].toLowerCase()==="asc"?1:-1;return e.sort((i,s)=>{const u=so(i,r),a=so(s,r);return u>a?n:u<a?-1*n:0})}throw new Error("Unsupported sort type")}function Gze(e,t){if(Array.isArray(t))return e.slice(t[0],t[1]!==void 0?t[1]+1:void 0);throw new Error("Unsupported range type")}function Hze(e){const t=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(" ").map(r=>`(${r})`).join("|");return new RegExp(t,"i")}class Wze{constructor(t){if(zu(this,"obj",null),zu(this,"database",null),zu(this,"name",null),!(t instanceof Object))throw new Error("Can't initialize a Single with anything except an object");this.obj=lK(t)}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){return r=>{if(this.database==null)throw new Error("Can't embed references without a database");const n=this.database.collections[t];if(!n)throw new Error(`Can't embed a non-existing collection ${t}`);return r[t]=n.getAll({filter:i=>r[t].indexOf(i[n.identifierName])!==-1}),r}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const s=this.database.collections[r];if(!s)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=s.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,s)=>s(i),n)}getOnly(t){let r=this.obj;return t!=null&&t.embed&&this.database&&(r=Object.assign({},r),r=this._itemEmbedder(t.embed)(r)),r}updateOnly(t){if(this.obj==null)throw new Error("Can't update a non-existing object");for(const r in t)this.obj[r]=t[r];return this.obj}}class Zze{constructor({data:t,identifierName:r="id",getNewId:n}={}){zu(this,"identifierName","id"),zu(this,"collections",{}),zu(this,"singles",{}),zu(this,"getNewId"),this.getNewId=n,this.identifierName=r,t&&this.init(t)}init(t){for(const r in t){const n=t[r];Array.isArray(n)?this.addCollection(r,new W$({items:n,identifierName:this.identifierName,getNewId:this.getNewId})):this.addSingle(r,new Wze(n))}}addCollection(t,r){this.collections[t]=r,r.setDatabase(this),r.setName(t)}getCollection(t){return this.collections[t]}getCollectionNames(){return Object.keys(this.collections)}addSingle(t,r){this.singles[t]=r,r.setDatabase(this),r.setName(t)}getSingle(t){return this.singles[t]}getSingleNames(){return Object.keys(this.singles)}getCount(t,r){return this.collections[t].getCount(r)}getAll(t,r){return this.collections[t].getAll(r)}getOne(t,r,n){return this.collections[t].getOne(r,n)}addOne(t,r){return Object.prototype.hasOwnProperty.call(this.collections,t)||this.addCollection(t,new W$({items:[],identifierName:this.identifierName,getNewId:this.getNewId})),this.collections[t].addOne(r)}updateOne(t,r,n){return this.collections[t].updateOne(r,n)}removeOne(t,r){return this.collections[t].removeOne(r)}getOnly(t,r){return this.singles[t].getOnly()}updateOnly(t,r){return this.singles[t].updateOnly(r)}}var Xze=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dd=function(){return dd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},dd.apply(this,arguments)},Kze=function(e,t,r,n){function i(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function a(g){try{d(n.next(g))}catch(_){u(_)}}function p(g){try{d(n.throw(g))}catch(_){u(_)}}function d(g){g.done?s(g.value):i(g.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},Yze=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(g){return p([d,g])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(g){d=[6,g],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Jze=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function Qze(e,t,r,n){console.group?(console.groupCollapsed(e,t,JSON.stringify(r)),console.log(n),console.groupEnd()):(console.log("FakeRest request ",e,t,r),console.log("FakeRest response",n))}function Sh(e,t){return t?new Promise(function(r){setTimeout(function(){return r(e)},t)}):e}const X$=(function(e,t,r){t===void 0&&(t=!1);var n=new Zze({data:e});typeof window<"u"&&(window._database=n);function i(u,a,p){var d,g,_,C,S,I,O,P,k,F,B,N,G,$,X,ee,J,le,Z;switch(u){case"getList":{var H=p.pagination,oe=H.page,ue=H.perPage,ce=p.sort,be=ce.field,Te=ce.order,ve={sort:[be,Te],range:[(oe-1)*ue,oe*ue-1],filter:p.filter,embed:a1((g=p.meta)===null||g===void 0?void 0:g.embed,(_=p.meta)===null||_===void 0?void 0:_.prefetch)},Ce=n.getAll(a,ve),$e=o1(Ce,(C=p.meta)===null||C===void 0?void 0:C.prefetch);return Sh({data:s1(Ce,(S=p.meta)===null||S===void 0?void 0:S.prefetch),total:n.getCount(a,{filter:p.filter}),meta:!((I=p.meta)===null||I===void 0)&&I.prefetch?{prefetched:$e}:void 0},r)}case"getOne":{var Je=n.getOne(a,p.id,dd(dd({},p),{embed:a1((O=p.meta)===null||O===void 0?void 0:O.embed,(P=p.meta)===null||P===void 0?void 0:P.prefetch)})),$e=o1(Je,(k=p.meta)===null||k===void 0?void 0:k.prefetch);return Sh({data:s1(Je,(F=p.meta)===null||F===void 0?void 0:F.prefetch),meta:!((B=p.meta)===null||B===void 0)&&B.prefetch?{prefetched:$e}:void 0},r)}case"getMany":{var ge=p.ids.map(function(ht){var It,xt;return n.getOne(a,ht,dd(dd({},p),{embed:a1((It=p.meta)===null||It===void 0?void 0:It.embed,(xt=p.meta)===null||xt===void 0?void 0:xt.prefetch)}))}),$e=o1(ge,(N=p.meta)===null||N===void 0?void 0:N.prefetch);return Sh({data:s1(ge,(G=p.meta)===null||G===void 0?void 0:G.prefetch),meta:!(($=p.meta)===null||$===void 0)&&$.prefetch?{prefetched:$e}:void 0},r)}case"getManyReference":{var Ee=p.pagination,oe=Ee.page,ue=Ee.perPage,Ie=p.sort,be=Ie.field,Te=Ie.order,ve={sort:[be,Te],range:[(oe-1)*ue,oe*ue-1],filter:dd(dd({},p.filter),(d={},d[p.target]=p.id,d)),embed:a1((X=p.meta)===null||X===void 0?void 0:X.embed,(ee=p.meta)===null||ee===void 0?void 0:ee.prefetch)},Le=n.getAll(a,ve),$e=o1(Le,(J=p.meta)===null||J===void 0?void 0:J.prefetch);return Sh({data:s1(Le,(le=p.meta)===null||le===void 0?void 0:le.prefetch),total:n.getCount(a,{filter:ve.filter}),meta:!((Z=p.meta)===null||Z===void 0)&&Z.prefetch?{prefetched:$e}:void 0},r)}case"update":return Sh({data:n.updateOne(a,p.id,SP(p.data))},r);case"updateMany":return p.ids.forEach(function(Ve){return n.updateOne(a,Ve,SP(p.data))}),Sh({data:p.ids},r);case"create":return Sh({data:n.addOne(a,SP(p.data))},r);case"delete":return Sh({data:n.removeOne(a,p.id)},r);case"deleteMany":return p.ids.forEach(function(Ve){return n.removeOne(a,Ve)}),Sh({data:p.ids},r);default:return!1}}var s=function(u,a,p){return Kze(void 0,void 0,void 0,function(){var d,g,_,C,S;return Yze(this,function(I){switch(I.label){case 0:if(d=n.getCollection(a),!d&&u!=="create")throw g=new e7e('Undefined collection "'.concat(a,'"')),g.code=1,g;I.label=1;case 1:return I.trys.push([1,3,,4]),[4,i(u,a,p)];case 2:return _=I.sent(),[3,4];case 3:throw C=I.sent(),console.error(C),C;case 4:return t&&(p.signal,S=Jze(p,["signal"]),Qze(u,a,S,_)),[2,_]}})})};return{getList:function(u,a){return s("getList",u,a)},getOne:function(u,a){return s("getOne",u,a)},getMany:function(u,a){return s("getMany",u,a)},getManyReference:function(u,a){return s("getManyReference",u,a)},update:function(u,a){return s("update",u,a)},updateMany:function(u,a){return s("updateMany",u,a)},create:function(u,a){return s("create",u,a)},delete:function(u,a){return s("delete",u,a)},deleteMany:function(u,a){return s("deleteMany",u,a)}}});function a1(e,t){if(!(!e&&!t)){var r=new Set;return e&&e.forEach(function(n){return r.add(n)}),t&&t.forEach(function(n){return r.add(n)}),Array.from(r)}}var o1=function(e,t){if(t){var r={},n=Array.isArray(e)?e:[e];return t.forEach(function(i){var s=i.endsWith("s")?i:"".concat(i,"s");n.forEach(function(u){r[s]||(r[s]=[]),!r[s].some(function(a){return a.id===u[i].id})&&r[s].push(u[i])})}),r}},s1=function(e,t){if(!t)return e;var r=Array.isArray(e)?e:[e],n=r.map(function(i){var s={};for(var u in i)t.includes(u)||(s[u]=i[u]);return s});return Array.isArray(e)?n:n[0]},SP=function(e){return JSON.parse(JSON.stringify(e))},e7e=(function(e){Xze(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Error),EP,K$;function t7e(){if(K$)return EP;K$=1;var e=rO();function t(r,n){for(var i=-1,s=n.length,u=Array(s),a=r==null;++i<s;)u[i]=a?void 0:e(r,n[i]);return u}return EP=t,EP}var CP,Y$;function r7e(){if(Y$)return CP;Y$=1;var e=fW(),t=cy(),r=Array.prototype,n=r.splice;function i(s,u){for(var a=s?u.length:0,p=a-1;a--;){var d=u[a];if(a==p||d!==g){var g=d;t(d)?n.call(s,d,1):e(s,d)}}return s}return CP=i,CP}var AP,J$;function n7e(){if(J$)return AP;J$=1;var e=H2();function t(r,n){if(r!==n){var i=r!==void 0,s=r===null,u=r===r,a=e(r),p=n!==void 0,d=n===null,g=n===n,_=e(n);if(!d&&!_&&!a&&r>n||a&&p&&g&&!d&&!_||s&&p&&g||!i&&g||!u)return 1;if(!s&&!a&&!_&&r<n||_&&i&&u&&!s&&!a||d&&i&&u||!p&&u||!g)return-1}return 0}return AP=t,AP}var TP,Q$;function i7e(){if(Q$)return TP;Q$=1;var e=XM(),t=t7e(),r=r7e(),n=n7e(),i=NW(),s=cy(),u=i(function(a,p){var d=a==null?0:a.length,g=t(a,p);return r(a,e(p,function(_){return s(_,d)?+_:_}).sort(n)),g});return TP=u,TP}var a7e=i7e();const eq=rl(a7e);function o7e(e){const{defaultData:t={},localStorageKey:r="ra-data-local-storage",loggingEnabled:n=!1,localStorageUpdateDelay:i=10}=e||{},s=localStorage.getItem(r);let u=s?JSON.parse(s):t;const a=d=>{setTimeout(()=>{d(),localStorage.setItem(r,JSON.stringify(u));const g=new Event("storageItemUpdated",{bubbles:!0,cancelable:!1});document.dispatchEvent(g)},i)};let p=X$(u,n);return window?.addEventListener("storage",d=>{if(d.key===r){const g=JSON.parse(d.newValue);u=g,p=X$(g,n)}}),{getList:(d,g)=>p.getList(d,g).catch(_=>{if(_.code===1)return{data:[],total:0};throw _}),getOne:(d,g)=>p.getOne(d,g),getMany:(d,g)=>p.getMany(d,g),getManyReference:(d,g)=>p.getManyReference(d,g).catch(_=>{if(_.code===1)return{data:[],total:0};throw _}),update:(d,g)=>(a(()=>{const _=u[d].findIndex(C=>C.id===g.data.id);u[d][_]={...g.data}}),p.update(d,g)),updateMany:(d,g)=>(a(()=>{g.ids.forEach(_=>{const C=u[d]?.findIndex(S=>S.id===_);u[d][C]={...u[d][C],...g.data}})}),p.updateMany(d,g)),create:(d,g)=>p.create(d,g).then(_=>(a(()=>{Object.prototype.hasOwnProperty.call(u,d)||(u[d]=[]),u[d].push(_.data)}),_)),delete:(d,g)=>(a(()=>{const _=u[d]?.findIndex(C=>C.id===g.id);eq(u[d],[_])}),p.delete(d,g)),deleteMany:(d,g)=>(a(()=>{const _=g.ids.map(C=>u[d]?.findIndex(S=>S.id===C));eq(u[d],_)}),p.deleteMany(d,g))}}const cK={pois:[{id:0,title:"poi",geom:"POINT (7.077808464010502 50.74294216203171)"}],properties:[{id:0,title:"property",geom:"POLYGON ((7.066952151714986 50.740002740511244, 7.0639480776189885 50.74065454154203, 7.064291400372213 50.74198527380986, 7.067381305157255 50.742121060690465, 7.067381305157255 50.740518750408825, 7.0669092363712025 50.73997558193838, 7.066952151714986 50.740002740511244))"}],routes:[{id:0,title:"route",geom:"LINESTRING (7.072968944094811 50.737892872017426, 7.0724677647124565 50.73921232584979, 7.0719866325044904 50.7409250229731, 7.071808100376245 50.742318711300925, 7.072108808006249 50.7425470593881, 7.076779799853682 50.742876893548384, 7.077140649009607 50.742775406362085, 7.0774413566381895 50.74257243132925, 7.077862347320121 50.74252168743365, 7.078343479528058 50.74269929082783, 7.078503856930212 50.742889579431534, 7.079466121344723 50.74290226531082, 7.080187819656601 50.742876893548384, 7.08082932926672 50.74281346408284)"}]},s7e=o7e({localStorageUpdateDelay:2,defaultData:cK}),l7e=qe.createContext();function fK(e){const[t,r]=R.useState({});R.useEffect(()=>{n();const s=()=>{console.log("refreshing data from localStorage"),n()};return window.addEventListener("storageItemUpdated",s),()=>{window.removeEventListener("storageItemUpdated",s)}},[]);const n=()=>{const s=localStorage.getItem("ra-data-local-storage");if(s){const u=JSON.parse(s),a=Object.keys(u).map(p=>{const d=u[p].map(g=>EV(yd.parse(g.geom)));return{name:p,featureCollection:d?.[0]?Qfe(d):void 0}});r(a)}else{const u=[];let a=0;Object.values(cK).map(p=>{u.push({name:a===0?"pois":a===1?"properties":"routes",featureCollection:{type:"FeatureCollection",features:p.map(d=>({type:"Feature",properties:{},geometry:yd.parse(d.geom)}))}}),a++}),r(u)}},i={data:t,refreshData:n};return Ue.jsx(l7e.Provider,{value:i,children:e.children})}fK.__docgenInfo={description:"",methods:[],displayName:"DataContextProvider"};const u7e=(e,t)=>Ue.jsx(fK,{children:Ue.jsxs(C2,{children:[Ue.jsx(HRe,{dataProvider:s7e,layout:t.parameters?.layout,theme:FZ,children:Ue.jsx(pZ,{children:Ue.jsx(Nu,{path:"/",element:Ue.jsx(e,{})})})},t.parameters?.name),!t.args.embeddedMap&&Ue.jsx(cb,{mapId:"map_1",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[7.080590113226776,50.740545567043426]},style:{position:"absolute",top:0,right:0,left:0,bottom:0}})]})});u7e.__docgenInfo={description:"",methods:[],displayName:"ReactAdminDefaultDecorator"};function UI(e){const t=e.source,r=Al(),n=fb(),[i,s]=R.useState();return R.useEffect(()=>{if(!r?.[t])return;const u=yd.parse(r[t]);u&&s({type:"Feature",properties:{},geometry:u})},[r]),R.useEffect(()=>{if(!n.map||!i)return;const u=AV(i);u?.geometry?.coordinates&&n.map.setCenter(u.geometry.coordinates)},[n.map,i]),Ue.jsxs(Ue.Fragment,{children:[e.embeddedMap&&Ue.jsx(cb,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),i&&Ue.jsx(l0,{geojson:i})]})}UI.__docgenInfo={description:"",methods:[],displayName:"GeospatialShowMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:""},mapId:{required:!1,tsType:{name:"string"},description:""}},composes:["InputProps"]};function Ud(e){return Ue.jsx(Ue.Fragment,{children:e.embeddedMap?Ue.jsx(C2,{children:Ue.jsx(UI,{...e})}):Ue.jsx(UI,{...e})})}Ud.defaultProps={embeddedMap:!0};Ud.__docgenInfo={description:"",methods:[],displayName:"GeospatialShow",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};const By={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!0,source:"geom"},jy={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!1,source:"geom"},c7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...By,type:"point"})]})}),f7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...jy,type:"point"})]})}),h7e=()=>Ue.jsx(My,{resource:"pois",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...By})]})}),d7e=()=>Ue.jsx(My,{resource:"pois",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...jy})]})});c7e.__docgenInfo={description:"",methods:[],displayName:"PoiEdit"};f7e.__docgenInfo={description:"",methods:[],displayName:"PoiEditWebGis"};h7e.__docgenInfo={description:"",methods:[],displayName:"PoiShow"};d7e.__docgenInfo={description:"",methods:[],displayName:"PoiShowWebGis"};const p7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...By,type:"polygon"})]})}),m7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...jy,type:"polygon"})]})}),g7e=()=>Ue.jsx(My,{resource:"properties",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...By})]})}),y7e=()=>Ue.jsx(My,{resource:"properties",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...jy})]})});p7e.__docgenInfo={description:"",methods:[],displayName:"PropertyEdit"};m7e.__docgenInfo={description:"",methods:[],displayName:"PropertyEditWebGis"};g7e.__docgenInfo={description:"",methods:[],displayName:"PropertyShow"};y7e.__docgenInfo={description:"",methods:[],displayName:"PropertyShowWebGis"};const v7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...By,type:"line"})]})}),b7e=()=>Ue.jsx(Py,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:Ue.jsxs(Iy,{children:[Ue.jsx(gu,{source:"title"}),Ue.jsx(gu,{source:"geom"}),Ue.jsx(qd,{...jy,type:"line"})]})}),_7e=()=>Ue.jsx(My,{resource:"routes",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...By})]})}),x7e=()=>Ue.jsx(My,{resource:"routes",id:"0",children:Ue.jsxs(Oy,{children:[Ue.jsx(wc,{source:"id"}),Ue.jsx(wc,{source:"title"}),Ue.jsx(Ud,{...jy})]})});v7e.__docgenInfo={description:"",methods:[],displayName:"RouteEdit"};b7e.__docgenInfo={description:"",methods:[],displayName:"RouteEditWebGis"};_7e.__docgenInfo={description:"",methods:[],displayName:"RouteShow"};x7e.__docgenInfo={description:"",methods:[],displayName:"RouteShowWebGis"};const w7e=Qt("div")(()=>({display:"flex",flexDirection:"column",zIndex:1,minHeight:"100%",position:"relative",backgroundColor:"transparent",pointerEvents:"none"})),S7e=Qt("div")(()=>({display:"flex",flexDirection:"column"})),E7e=Qt("main")(()=>({display:"flex",flexGrow:1,marginTop:"3em"})),C7e=Qt("div")(()=>({display:"flex",flexDirection:"row",justifyContent:"center",maxHeight:"50vh",position:"fixed",bottom:"0",width:"100%",backgroundColor:"#fafafa",overflow:"auto",pointerEvents:"all",boxShadow:"0px 0px 8px rgba(0,0,0,0.2)"})),A7e=Qt(Dd)(()=>({maxWidth:"600px",width:"100%",height:"100%"})),T7e=({children:e,title:t})=>{const[r]=Fb(),[n,i]=R.useState(!0);return R.useEffect(()=>{i(!0)},[e]),Ue.jsx(w7e,{children:Ue.jsxs(S7e,{children:[Ue.jsx(BZ,{title:t,open:r,sx:{pointerEvents:"all"}}),Ue.jsxs(E7e,{children:[Ue.jsx(YZ,{sx:{backgroundColor:"#f0f0f0",pointerEvents:"all",overflow:"hidden"},children:Ue.jsx(Ay,{})}),Ue.jsxs(C7e,{sx:{...n?{}:{height:"40px",overflow:"hidden"}},children:[Ue.jsx(Uo,{onClick:()=>i(s=>!s),sx:{position:"absolute",top:0,zIndex:100},children:n?Ue.jsx(nwe,{}):Ue.jsx(iwe,{})}),Ue.jsx(A7e,{children:e})]})]})]})})};T7e.__docgenInfo={description:"",methods:[],displayName:"GisLayout"};export{qd as G,c7e as P,u7e as R,va as _,p7e as a,v7e as b,f7e as c,m7e as d,b7e as e,T7e as f,Ud as g,h7e as h,g7e as i,_7e as j,d7e as k,y7e as l,x7e as m};
