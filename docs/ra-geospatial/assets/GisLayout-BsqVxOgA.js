const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-CKiEIchA.js","./iframe-B6AMndVi.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-b7V7p3nf.js"])))=>i.map(i=>d[i]);
import{R as U_,r as M,g as Us,a as Be,c as qh,b as ux,d as _X}from"./iframe-B6AMndVi.js";import{_ as yw}from"./preload-helper-D9Z9MdNV.js";import{r as xX}from"./index-b7V7p3nf.js";var vw={exports:{}},Sy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wk;function wX(){if(wk)return Sy;wk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:e,type:n,key:u,ref:i!==void 0?i:null,props:o}}return Sy.Fragment=t,Sy.jsx=r,Sy.jsxs=r,Sy}var Sk;function SX(){return Sk||(Sk=1,vw.exports=wX()),vw.exports}var ze=SX(),d_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
 */var EX=d_.exports,Ek;function CX(){return Ek||(Ek=1,(function(e,t){(function(r,n){e.exports=n()})(EX,(function(){var r={},n={};function i(u,a,p){if(n[u]=p,u==="index"){var d="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",m={};return n.shared(m),n.index(r,m),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(u){function a(f,l,c,g){return new(c||(c=Promise))((function(b,C){function A(H){try{B(g.next(H))}catch(K){C(K)}}function R(H){try{B(g.throw(H))}catch(K){C(K)}}function B(H){var K;H.done?b(H.value):(K=H.value,K instanceof c?K:new c((function(ie){ie(K)}))).then(A,R)}B((g=g.apply(f,l||[])).next())}))}function p(f,l){this.x=f,this.y=l}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,v;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,l){return this.clone()._rotateAround(f,l)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const l=f.x-this.x,c=f.y-this.y;return l*l+c*c},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult(f){const l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const l=Math.cos(f),c=Math.sin(f),g=c*this.x+l*this.y;return this.x=l*this.x-c*this.y,this.y=g,this},_rotateAround(f,l){const c=Math.cos(f),g=Math.sin(f),b=l.y+g*(this.x-l.x)+c*(this.y-l.y);return this.x=l.x+c*(this.x-l.x)-g*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(f){if(f instanceof p)return f;if(Array.isArray(f))return new p(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new p(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var w=(function(){if(v)return m;function f(l,c,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(b-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=c,this.p2x=g,this.p2y=b}return v=1,m=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,c){if(c===void 0&&(c=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var C=this.sampleCurveX(g)-l;if(Math.abs(C)<c)return g;var A=this.sampleCurveDerivativeX(g);if(Math.abs(A)<1e-6)break;g-=C/A}var R=0,B=1;for(g=l,b=0;b<20&&(C=this.sampleCurveX(g),!(Math.abs(C-l)<c));b++)l>C?R=g:B=g,g=.5*(B-R)+R;return g},solve:function(l,c){return this.sampleCurveY(this.solveCurveX(l,c))}},m})(),x=d(w);let P,T;function O(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function L(){if(T==null&&(T=!1,O())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let g=0;g<25;g++){const b=4*g;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(g%5,Math.floor(g/5),1,1)}const c=l.getImageData(0,0,5,5).data;for(let g=0;g<100;g++)if(g%4!=3&&c[g]!==g){T=!0;break}}}return T||!1}var N=1e-6,F=typeof Float32Array<"u"?Float32Array:Array;function D(){var f=new F(9);return F!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function q(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function z(){var f=new F(3);return F!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function Z(f){var l=f[0],c=f[1],g=f[2];return Math.sqrt(l*l+c*c+g*g)}function Q(f,l,c){var g=new F(3);return g[0]=f,g[1]=l,g[2]=c,g}function Y(f,l,c){return f[0]=l[0]+c[0],f[1]=l[1]+c[1],f[2]=l[2]+c[2],f}function se(f,l,c){return f[0]=l[0]*c,f[1]=l[1]*c,f[2]=l[2]*c,f}function W(f,l,c){var g=l[0],b=l[1],C=l[2],A=c[0],R=c[1],B=c[2];return f[0]=b*B-C*R,f[1]=C*A-g*B,f[2]=g*R-b*A,f}var G,ae=Z;function le(f,l,c){var g=l[0],b=l[1],C=l[2],A=l[3];return f[0]=c[0]*g+c[4]*b+c[8]*C+c[12]*A,f[1]=c[1]*g+c[5]*b+c[9]*C+c[13]*A,f[2]=c[2]*g+c[6]*b+c[10]*C+c[14]*A,f[3]=c[3]*g+c[7]*b+c[11]*C+c[15]*A,f}function ue(){var f=new F(4);return F!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function ye(f,l,c,g){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",C=Math.PI/360;l*=C,g*=C,c*=C;var A=Math.sin(l),R=Math.cos(l),B=Math.sin(c),H=Math.cos(c),K=Math.sin(g),ie=Math.cos(g);switch(b){case"xyz":f[0]=A*H*ie+R*B*K,f[1]=R*B*ie-A*H*K,f[2]=R*H*K+A*B*ie,f[3]=R*H*ie-A*B*K;break;case"xzy":f[0]=A*H*ie-R*B*K,f[1]=R*B*ie-A*H*K,f[2]=R*H*K+A*B*ie,f[3]=R*H*ie+A*B*K;break;case"yxz":f[0]=A*H*ie+R*B*K,f[1]=R*B*ie-A*H*K,f[2]=R*H*K-A*B*ie,f[3]=R*H*ie+A*B*K;break;case"yzx":f[0]=A*H*ie+R*B*K,f[1]=R*B*ie+A*H*K,f[2]=R*H*K-A*B*ie,f[3]=R*H*ie-A*B*K;break;case"zxy":f[0]=A*H*ie-R*B*K,f[1]=R*B*ie+A*H*K,f[2]=R*H*K+A*B*ie,f[3]=R*H*ie-A*B*K;break;case"zyx":f[0]=A*H*ie-R*B*K,f[1]=R*B*ie+A*H*K,f[2]=R*H*K-A*B*ie,f[3]=R*H*ie+A*B*K;break;default:throw new Error("Unknown angle order "+b)}return f}function Se(){var f=new F(2);return F!=Float32Array&&(f[0]=0,f[1]=0),f}function ge(f,l){var c=new F(2);return c[0]=f,c[1]=l,c}z(),G=new F(4),F!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0,G[3]=0),z(),Q(1,0,0),Q(0,1,0),ue(),ue(),D(),Se();const xe=8192;function Fe(f,l,c){return l*(xe/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}function He(f,l){return(f%l+l)%l}function pe(f,l,c){return f*(1-c)+l*c}function _e(f){if(f<=0)return 0;if(f>=1)return 1;const l=f*f,c=l*f;return 4*(f<.5?c:3*(f-l)+c-.75)}function Ce(f,l,c,g){const b=new x(f,l,c,g);return C=>b.solve(C)}const ke=Ce(.25,.1,.25,1);function $e(f,l,c){return Math.min(c,Math.max(l,f))}function ht(f,l,c){const g=c-l,b=((f-l)%g+g)%g+l;return b===l?c:b}function At(f,...l){for(const c of l)for(const g in c)f[g]=c[g];return f}let mt=1;function rt(f,l,c){const g={};for(const b in f)g[b]=l.call(this,f[b],b,f);return g}function Lt(f,l,c){const g={};for(const b in f)l.call(this,f[b],b,f)&&(g[b]=f[b]);return g}function Tt(f){return Array.isArray(f)?f.map(Tt):typeof f=="object"&&f?rt(f,Tt):f}const Pt={};function ut(f){Pt[f]||(typeof console<"u"&&console.warn(f),Pt[f]=!0)}function Le(f,l,c){return(c.y-f.y)*(l.x-f.x)>(l.y-f.y)*(c.x-f.x)}function sr(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let lr=null;function dr(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ve(f,l,c,g,b){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(f,{timestamp:0});try{const A=C?.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const R=A.startsWith("BGR"),B=new Uint8ClampedArray(g*b*4);if(yield C.copyTo(B,(function(H,K,ie,ve,we){const Ee=4*Math.max(-K,0),Oe=(Math.max(0,ie)-ie)*ve*4+Ee,Ge=4*ve,at=Math.max(0,K),Nt=Math.max(0,ie);return{rect:{x:at,y:Nt,width:Math.min(H.width,K+ve)-at,height:Math.min(H.height,ie+we)-Nt},layout:[{offset:Oe,stride:Ge}]}})(f,l,c,g,b)),R)for(let H=0;H<B.length;H+=4){const K=B[H];B[H]=B[H+2],B[H+2]=K}return B}finally{C.close()}}))}let tt,lt;function Mt(f,l,c,g){return f.addEventListener(l,c,g),{unsubscribe:()=>{f.removeEventListener(l,c,g)}}}function Kt(f){return f*Math.PI/180}function Ut(f){return f/Math.PI*180}const ar={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},gr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},yr="AbortError";function Ye(){return new Error(yr)}const de={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function he(f){return de.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Me="global-dispatcher";class Ue extends Error{constructor(l,c,g,b){super(`AJAXError: ${c} (${l}): ${g}`),this.status=l,this.statusText=c,this.url=g,this.body=b}}const Ke=()=>sr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Qe=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const g=he(f.url);if(g)return g(f,l);if(sr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Me},l)}if(!(/^file:/.test(c=f.url)||/^file:/.test(Ke())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(g,b){return a(this,void 0,void 0,(function*(){const C=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:Ke(),signal:b.signal});let A,R;g.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{A=yield fetch(C)}catch(H){throw new Ue(0,H.message,g.url,new Blob)}if(!A.ok){const H=yield A.blob();throw new Ue(A.status,A.statusText,g.url,H)}R=g.type==="arrayBuffer"||g.type==="image"?A.arrayBuffer():g.type==="json"?A.json():A.text();const B=yield R;if(b.signal.aborted)throw Ye();return{data:B,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}}))})(f,l);if(sr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Me},l)}var c;return(function(g,b){return new Promise(((C,A)=>{var R;const B=new XMLHttpRequest;B.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(B.responseType="arraybuffer");for(const H in g.headers)B.setRequestHeader(H,g.headers[H]);g.type==="json"&&(B.responseType="text",!((R=g.headers)===null||R===void 0)&&R.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=g.credentials==="include",B.onerror=()=>{A(new Error(B.statusText))},B.onload=()=>{if(!b.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let H=B.response;if(g.type==="json")try{H=JSON.parse(B.response)}catch(K){return void A(K)}C({data:H,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const H=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});A(new Ue(B.status,B.statusText,g.url,H))}},b.signal.addEventListener("abort",(()=>{B.abort(),A(Ye())})),B.send(g.body)}))})(f,l)};function wt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const l=new URL(f),c=window.location;return l.protocol===c.protocol&&l.host===c.host}function nt(f,l,c){c[f]&&c[f].indexOf(l)!==-1||(c[f]=c[f]||[],c[f].push(l))}function Ot(f,l,c){if(c&&c[f]){const g=c[f].indexOf(l);g!==-1&&c[f].splice(g,1)}}class Gt{constructor(l,c={}){At(this,c),this.type=l}}class ir extends Gt{constructor(l,c={}){super("error",At({error:l},c))}}class Pr{on(l,c){return this._listeners=this._listeners||{},nt(l,c,this._listeners),{unsubscribe:()=>{this.off(l,c)}}}off(l,c){return Ot(l,c,this._listeners),Ot(l,c,this._oneTimeListeners),this}once(l,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},nt(l,c,this._oneTimeListeners),this):new Promise((g=>this.once(l,g)))}fire(l,c){typeof l=="string"&&(l=new Gt(l,c||{}));const g=l.type;if(this.listens(g)){l.target=this;const b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const R of b)R.call(this,l);const C=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const R of C)Ot(g,R,this._oneTimeListeners),R.call(this,l);const A=this._eventedParent;A&&(At(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(l))}else l instanceof ir&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,c){return this._eventedParent=l,this._eventedParentData=c,this}}var bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Sr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Mr(f,l){const c={};for(const g in f)g!=="ref"&&(c[g]=f[g]);return Sr.forEach((g=>{g in l&&(c[g]=l[g])})),c}function Nr(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let c=0;c<f.length;c++)if(!Nr(f[c],l[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(const c in f)if(!Nr(f[c],l[c]))return!1;return!0}return f===l}function en(f,l){f.push(l)}function Vr(f,l,c){en(c,{command:"addSource",args:[f,l[f]]})}function gt(f,l,c){en(l,{command:"removeSource",args:[f]}),c[f]=!0}function xt(f,l,c,g){gt(f,c,g),Vr(f,l,c)}function Wt(f,l,c){let g;for(g in f[c])if(Object.prototype.hasOwnProperty.call(f[c],g)&&g!=="data"&&!Nr(f[c][g],l[c][g]))return!1;for(g in l[c])if(Object.prototype.hasOwnProperty.call(l[c],g)&&g!=="data"&&!Nr(f[c][g],l[c][g]))return!1;return!0}function ne(f,l,c,g,b,C){f=f||{},l=l||{};for(const A in f)Object.prototype.hasOwnProperty.call(f,A)&&(Nr(f[A],l[A])||c.push({command:C,args:[g,A,l[A],b]}));for(const A in l)Object.prototype.hasOwnProperty.call(l,A)&&!Object.prototype.hasOwnProperty.call(f,A)&&(Nr(f[A],l[A])||c.push({command:C,args:[g,A,l[A],b]}))}function me(f){return f.id}function qe(f,l){return f[l.id]=l,f}class je{constructor(l,c,g,b){this.message=(l?`${l}: `:"")+g,b&&(this.identifier=b),c!=null&&c.__line__&&(this.line=c.__line__)}}function jt(f,...l){for(const c of l)for(const g in c)f[g]=c[g];return f}class Jt extends Error{constructor(l,c){super(c),this.message=c,this.key=l}}class Tr{constructor(l,c=[]){this.parent=l,this.bindings={};for(const[g,b]of c)this.bindings[g]=b}concat(l){return new Tr(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const zr={kind:"null"},Vt={kind:"number"},Ir={kind:"string"},Dr={kind:"boolean"},Sn={kind:"color"},vn={kind:"projectionDefinition"},Rn={kind:"object"},$r={kind:"value"},Ii={kind:"collator"},Li={kind:"formatted"},Ji={kind:"padding"},vi={kind:"colorArray"},Mi={kind:"numberArray"},ni={kind:"resolvedImage"},Qi={kind:"variableAnchorOffsetCollection"};function ea(f,l){return{kind:"array",itemType:f,N:l}}function hn(f){if(f.kind==="array"){const l=hn(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}const Jn=[zr,Vt,Ir,Dr,Sn,vn,Li,Rn,ea($r),Ji,Mi,vi,ni,Qi];function qi(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!qi(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(const c of Jn)if(!qi(c,l))return null}}return`Expected ${hn(f)} but found ${hn(l)} instead.`}function ya(f,l){return l.some((c=>c.kind===f.kind))}function Di(f,l){return l.some((c=>c==="null"?f===null:c==="array"?Array.isArray(f):c==="object"?f&&!Array.isArray(f)&&typeof f=="object":c===typeof f))}function hi(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}const Qa=.96422,io=.82521,uu=4/29,Hi=6/29,uc=3*Hi*Hi,$c=Hi*Hi*Hi,Hs=Math.PI/180,ml=180/Math.PI;function Wo(f){return(f%=360)<0&&(f+=360),f}function as([f,l,c,g]){let b,C;const A=cu((.2225045*(f=ia(f))+.7168786*(l=ia(l))+.0606169*(c=ia(c)))/1);f===l&&l===c?b=C=A:(b=cu((.4360747*f+.3850649*l+.1430804*c)/Qa),C=cu((.0139322*f+.0971045*l+.7141733*c)/io));const R=116*A-16;return[R<0?0:R,500*(b-A),200*(A-C),g]}function ia(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function cu(f){return f>$c?Math.pow(f,1/3):f/uc+uu}function Bl([f,l,c,g]){let b=(f+16)/116,C=isNaN(l)?b:b+l/500,A=isNaN(c)?b:b-c/200;return b=1*U(b),C=Qa*U(C),A=io*U(A),[jl(3.1338561*C-1.6168667*b-.4906146*A),jl(-.9787684*C+1.9161415*b+.033454*A),jl(.0719453*C-.2289914*b+1.4052427*A),g]}function jl(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function U(f){return f>Hi?f*f*f:uc*(f-uu)}const te=Object.hasOwn||function(f,l){return Object.prototype.hasOwnProperty.call(f,l)};function Re(f,l){return te(f,l)?f[l]:void 0}function dt(f){return parseInt(f.padEnd(2,f),16)/255}function St(f,l){return yt(l?f/100:f,0,1)}function yt(f,l,c){return Math.min(Math.max(l,f),c)}function Bt(f){return!f.some(Number.isNaN)}const xr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ar(f,l,c){return f+c*(l-f)}function jr(f,l,c){return f.map(((g,b)=>Ar(g,l[b],c)))}class fr{constructor(l,c,g,b=1,C=!0){this.r=l,this.g=c,this.b=g,this.a=b,C||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,c,g,b]))}static parse(l){if(l instanceof fr)return l;if(typeof l!="string")return;const c=(function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Re(xr,g);if(b){const[A,R,B]=b;return[A/255,R/255,B/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const A=g.length<6?1:2;let R=1;return[dt(g.slice(R,R+=A)),dt(g.slice(R,R+=A)),dt(g.slice(R,R+=A)),dt(g.slice(R,R+A)||"ff")]}if(g.startsWith("rgb")){const A=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt]=A,vt=[K||" ",we||" ",Ge].join("");if(vt==="  "||vt==="  /"||vt===",,"||vt===",,,"){const Et=[H,ve,Oe].join(""),Xt=Et==="%%%"?100:Et===""?255:0;if(Xt){const or=[yt(+B/Xt,0,1),yt(+ie/Xt,0,1),yt(+Ee/Xt,0,1),at?St(+at,Nt):1];if(Bt(or))return or}}return}}const C=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[A,R,B,H,K,ie,ve,we,Ee]=C,Oe=[B||" ",K||" ",ve].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){const Ge=[+R,yt(+H,0,100),yt(+ie,0,100),we?St(+we,Ee):1];if(Bt(Ge))return(function([at,Nt,vt,Et]){function Xt(or){const wr=(or+at/30)%12,Zr=Nt*Math.min(vt,1-vt);return vt-Zr*Math.max(-1,Math.min(wr-3,9-wr,1))}return at=Wo(at),Nt/=100,vt/=100,[Xt(0),Xt(8),Xt(4),Et]})(Ge)}}})(l);return c?new fr(...c,!1):void 0}get rgb(){const{r:l,g:c,b:g,a:b}=this,C=b||1/0;return this.overwriteGetter("rgb",[l/C,c/C,g/C,b])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[c,g,b,C]=as(l),A=Math.sqrt(g*g+b*b);return[Math.round(1e4*A)?Wo(Math.atan2(b,g)*ml):NaN,A,c,C]})(this.rgb))}get lab(){return this.overwriteGetter("lab",as(this.rgb))}overwriteGetter(l,c){return Object.defineProperty(this,l,{value:c}),c}toString(){const[l,c,g,b]=this.rgb;return`rgba(${[l,c,g].map((C=>Math.round(255*C))).join(",")},${b})`}static interpolate(l,c,g,b="rgb"){switch(b){case"rgb":{const[C,A,R,B]=jr(l.rgb,c.rgb,g);return new fr(C,A,R,B,!1)}case"hcl":{const[C,A,R,B]=l.hcl,[H,K,ie,ve]=c.hcl;let we,Ee;if(isNaN(C)||isNaN(H))isNaN(C)?isNaN(H)?we=NaN:(we=H,R!==1&&R!==0||(Ee=K)):(we=C,ie!==1&&ie!==0||(Ee=A));else{let vt=H-C;H>C&&vt>180?vt-=360:H<C&&C-H>180&&(vt+=360),we=C+g*vt}const[Oe,Ge,at,Nt]=(function([vt,Et,Xt,or]){return vt=isNaN(vt)?0:vt*Hs,Bl([Xt,Math.cos(vt)*Et,Math.sin(vt)*Et,or])})([we,Ee??Ar(A,K,g),Ar(R,ie,g),Ar(B,ve,g)]);return new fr(Oe,Ge,at,Nt,!1)}case"lab":{const[C,A,R,B]=Bl(jr(l.lab,c.lab,g));return new fr(C,A,R,B,!1)}}}}fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);class Rr{constructor(l,c,g){this.sensitivity=l?c?"variant":"case":c?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,c){return this.collator.compare(l,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Pn=["bottom","center","top"];class bi{constructor(l,c,g,b,C,A){this.text=l,this.image=c,this.scale=g,this.fontStack=b,this.textColor=C,this.verticalAlign=A}}class dn{constructor(l){this.sections=l}static fromString(l){return new dn([new bi(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof dn?l:dn.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class Yr{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Yr)return l;if(typeof l=="number")return new Yr([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const c of l)if(typeof c!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Yr(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,c,g){return new Yr(jr(l.values,c.values,g))}}class ur{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ur)return l;if(typeof l=="number")return new ur([l]);if(Array.isArray(l)){for(const c of l)if(typeof c!="number")return;return new ur(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,c,g){return new ur(jr(l.values,c.values,g))}}class Kr{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Kr)return l;if(typeof l=="string"){const g=fr.parse(l);return g?new Kr([g]):void 0}if(!Array.isArray(l))return;const c=[];for(const g of l){if(typeof g!="string")return;const b=fr.parse(g);if(!b)return;c.push(b)}return new Kr(c)}toString(){return JSON.stringify(this.values)}static interpolate(l,c,g,b="rgb"){const C=[];if(l.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let A=0;A<l.values.length;A++)C.push(fr.interpolate(l.values[A],c.values[A],g,b));return new Kr(C)}}class bn extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const va=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Gn)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let c=0;c<l.length;c+=2){const g=l[c],b=l[c+1];if(typeof g!="string"||!va.has(g)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new Gn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,c,g){const b=l.values,C=c.values;if(b.length!==C.length)throw new bn(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${c.toString()}`);const A=[];for(let R=0;R<b.length;R+=2){if(b[R]!==C[R])throw new bn(`Cannot interpolate values containing mismatched anchors. from[${R}]: ${b[R]}, to[${R}]: ${C[R]}`);A.push(b[R]);const[B,H]=b[R+1],[K,ie]=C[R+1];A.push([Ar(B,K,g),Ar(H,ie,g)])}return new Gn(A)}}class aa{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new aa({name:l,available:!1}):null}}class ja{constructor(l,c,g){this.from=l,this.to=c,this.transition=g}static interpolate(l,c,g){return new ja(l,c,g)}static parse(l){return l instanceof ja?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new ja(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new ja(l.from,l.to,l.transition):typeof l=="string"?new ja(l,l,1):void 0}}function In(f,l,c,g){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof c=="number"&&c>=0&&c<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[f,l,c,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[f,l,c,g]:[f,l,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function os(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof ja||f instanceof fr||f instanceof Rr||f instanceof dn||f instanceof Yr||f instanceof ur||f instanceof Kr||f instanceof Gn||f instanceof aa)return!0;if(Array.isArray(f)){for(const l of f)if(!os(l))return!1;return!0}if(typeof f=="object"){for(const l in f)if(!os(f[l]))return!1;return!0}return!1}function yn(f){if(f===null)return zr;if(typeof f=="string")return Ir;if(typeof f=="boolean")return Dr;if(typeof f=="number")return Vt;if(f instanceof fr)return Sn;if(f instanceof ja)return vn;if(f instanceof Rr)return Ii;if(f instanceof dn)return Li;if(f instanceof Yr)return Ji;if(f instanceof ur)return Mi;if(f instanceof Kr)return vi;if(f instanceof Gn)return Qi;if(f instanceof aa)return ni;if(Array.isArray(f)){const l=f.length;let c;for(const g of f){const b=yn(g);if(c){if(c===b)continue;c=$r;break}c=b}return ea(c||$r,l)}return Rn}function pn(f){const l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof fr||f instanceof ja||f instanceof dn||f instanceof Yr||f instanceof ur||f instanceof Kr||f instanceof Gn||f instanceof aa?f.toString():JSON.stringify(f)}class Po{constructor(l,c){this.type=l,this.value=c}static parse(l,c){if(l.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!os(l[1]))return c.error("invalid value");const g=l[1];let b=yn(g);const C=c.expectedType;return b.kind!=="array"||b.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(b=C),new Po(b,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const zn={string:Ir,number:Vt,boolean:Dr,object:Rn};class ao{constructor(l,c){this.type=l,this.args=c}static parse(l,c){if(l.length<2)return c.error("Expected at least one argument.");let g,b=1;const C=l[0];if(C==="array"){let R,B;if(l.length>2){const H=l[1];if(typeof H!="string"||!(H in zn)||H==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);R=zn[H],b++}else R=$r;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return c.error('The length argument to "array" must be a positive integer literal',2);B=l[2],b++}g=ea(R,B)}else{if(!zn[C])throw new Error(`Types doesn't contain name = ${C}`);g=zn[C]}const A=[];for(;b<l.length;b++){const R=c.parse(l[b],b,$r);if(!R)return null;A.push(R)}return new ao(g,A)}evaluate(l){for(let c=0;c<this.args.length;c++){const g=this.args[c].evaluate(l);if(!qi(this.type,yn(g)))return g;if(c===this.args.length-1)throw new bn(`Expected value to be of type ${hn(this.type)}, but found ${hn(yn(g))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const oo={"to-boolean":Dr,"to-color":Sn,"to-number":Vt,"to-string":Ir};class To{constructor(l,c){this.type=l,this.args=c}static parse(l,c){if(l.length<2)return c.error("Expected at least one argument.");const g=l[0];if(!oo[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&l.length!==2)return c.error("Expected one argument.");const b=oo[g],C=[];for(let A=1;A<l.length;A++){const R=c.parse(l[A],A,$r);if(!R)return null;C.push(R)}return new To(b,C)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let c,g;for(const b of this.args){if(c=b.evaluate(l),g=null,c instanceof fr)return c;if(typeof c=="string"){const C=l.parseColor(c);if(C)return C}else if(Array.isArray(c)&&(g=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:In(c[0],c[1],c[2],c[3]),!g))return new fr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new bn(g||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const g of this.args){c=g.evaluate(l);const b=Yr.parse(c);if(b)return b}throw new bn(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const g of this.args){c=g.evaluate(l);const b=ur.parse(c);if(b)return b}throw new bn(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const g of this.args){c=g.evaluate(l);const b=Kr.parse(c);if(b)return b}throw new bn(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const g of this.args){c=g.evaluate(l);const b=Gn.parse(c);if(b)return b}throw new bn(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const g of this.args){if(c=g.evaluate(l),c===null)return 0;const b=Number(c);if(!isNaN(b))return b}throw new bn(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return dn.fromString(pn(this.args[0].evaluate(l)));case"resolvedImage":return aa.fromString(pn(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return pn(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Ms=["Unknown","Point","LineString","Polygon"];class gl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ms[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let c=this._parseColorCache.get(l);return c||(c=fr.parse(l),this._parseColorCache.set(l,c)),c}}class Ws{constructor(l,c,g=[],b,C=new Tr,A=[]){this.registry=l,this.path=g,this.key=g.map((R=>`[${R}]`)).join(""),this.scope=C,this.errors=A,this.expectedType=b,this._isConstant=c}parse(l,c,g,b,C={}){return c?this.concat(c,g,b)._parse(l,C):this._parse(l,C)}_parse(l,c){function g(b,C,A){return A==="assert"?new ao(C,[b]):A==="coerce"?new To(C,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[b];if(C){let A=C.parse(l,this);if(!A)return null;if(this.expectedType){const R=this.expectedType,B=A.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||B.kind!=="value"){if(R.kind==="projectionDefinition"&&["string","array"].includes(B.kind)||["color","formatted","resolvedImage"].includes(R.kind)&&["value","string"].includes(B.kind)||["padding","numberArray"].includes(R.kind)&&["value","number","array"].includes(B.kind)||R.kind==="colorArray"&&["value","string","array"].includes(B.kind)||R.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(B.kind))A=g(A,R,c.typeAnnotation||"coerce");else if(this.checkSubtype(R,B))return null}else A=g(A,R,c.typeAnnotation||"assert")}if(!(A instanceof Po)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const R=new gl;try{A=new Po(A.type,A.evaluate(R))}catch(B){return this.error(B.message),null}}return A}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,c,g){const b=typeof l=="number"?this.path.concat(l):this.path,C=g?this.scope.concat(g):this.scope;return new Ws(this.registry,this._isConstant,b,c||null,C,this.errors)}error(l,...c){const g=`${this.key}${c.map((b=>`[${b}]`)).join("")}`;this.errors.push(new Jt(g,l))}checkSubtype(l,c){const g=qi(l,c);return g&&this.error(g),g}}class Zs{constructor(l,c){this.type=c.type,this.bindings=[].concat(l),this.result=c}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const c of this.bindings)l(c[1]);l(this.result)}static parse(l,c){if(l.length<4)return c.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const g=[];for(let C=1;C<l.length-1;C+=2){const A=l[C];if(typeof A!="string")return c.error(`Expected string, but found ${typeof A} instead.`,C);if(/[^a-zA-Z0-9_]/.test(A))return c.error("Variable names must contain only alphanumeric characters or '_'.",C);const R=c.parse(l[C+1],C+1);if(!R)return null;g.push([A,R])}const b=c.parse(l[l.length-1],l.length-1,c.expectedType,g);return b?new Zs(g,b):null}outputDefined(){return this.result.outputDefined()}}class yl{constructor(l,c){this.type=c.type,this.name=l,this.boundExpression=c}static parse(l,c){if(l.length!==2||typeof l[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const g=l[1];return c.scope.has(g)?new yl(g,c.scope.get(g)):c.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Rs{constructor(l,c,g){this.type=l,this.index=c,this.input=g}static parse(l,c){if(l.length!==3)return c.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=c.parse(l[1],1,Vt),b=c.parse(l[2],2,ea(c.expectedType||$r));return g&&b?new Rs(b.type.itemType,g,b):null}evaluate(l){const c=this.index.evaluate(l),g=this.input.evaluate(l);if(c<0)throw new bn(`Array index out of bounds: ${c} < 0.`);if(c>=g.length)throw new bn(`Array index out of bounds: ${c} > ${g.length-1}.`);if(c!==Math.floor(c))throw new bn(`Array index must be an integer, but found ${c} instead.`);return g[c]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class vl{constructor(l,c){this.type=Dr,this.needle=l,this.haystack=c}static parse(l,c){if(l.length!==3)return c.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=c.parse(l[1],1,$r),b=c.parse(l[2],2,$r);return g&&b?ya(g.type,[Dr,Ir,Vt,zr,$r])?new vl(g,b):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${hn(g.type)} instead`):null}evaluate(l){const c=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!g)return!1;if(!Di(c,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${hn(yn(c))} instead.`);if(!Di(g,["string","array"]))throw new bn(`Expected second argument to be of type array or string, but found ${hn(yn(g))} instead.`);return g.indexOf(c)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Io{constructor(l,c,g){this.type=Vt,this.needle=l,this.haystack=c,this.fromIndex=g}static parse(l,c){if(l.length<=2||l.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=c.parse(l[1],1,$r),b=c.parse(l[2],2,$r);if(!g||!b)return null;if(!ya(g.type,[Dr,Ir,Vt,zr,$r]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${hn(g.type)} instead`);if(l.length===4){const C=c.parse(l[3],3,Vt);return C?new Io(g,b,C):null}return new Io(g,b)}evaluate(l){const c=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!Di(c,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${hn(yn(c))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),Di(g,["string"])){const C=g.indexOf(c,b);return C===-1?-1:[...g.slice(0,C)].length}if(Di(g,["array"]))return g.indexOf(c,b);throw new bn(`Expected second argument to be of type array or string, but found ${hn(yn(g))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Ei{constructor(l,c,g,b,C,A){this.inputType=l,this.type=c,this.input=g,this.cases=b,this.outputs=C,this.otherwise=A}static parse(l,c){if(l.length<5)return c.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return c.error("Expected an even number of arguments.");let g,b;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);const C={},A=[];for(let H=2;H<l.length-1;H+=2){let K=l[H];const ie=l[H+1];Array.isArray(K)||(K=[K]);const ve=c.concat(H);if(K.length===0)return ve.error("Expected at least one branch label.");for(const Ee of K){if(typeof Ee!="number"&&typeof Ee!="string")return ve.error("Branch labels must be numbers or strings.");if(typeof Ee=="number"&&Math.abs(Ee)>Number.MAX_SAFE_INTEGER)return ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ee=="number"&&Math.floor(Ee)!==Ee)return ve.error("Numeric branch labels must be integer values.");if(g){if(ve.checkSubtype(g,yn(Ee)))return null}else g=yn(Ee);if(C[String(Ee)]!==void 0)return ve.error("Branch labels must be unique.");C[String(Ee)]=A.length}const we=c.parse(ie,H,b);if(!we)return null;b=b||we.type,A.push(we)}const R=c.parse(l[1],1,$r);if(!R)return null;const B=c.parse(l[l.length-1],l.length-1,b);return B?R.type.kind!=="value"&&c.concat(1).checkSubtype(g,R.type)?null:new Ei(g,b,R,C,A,B):null}evaluate(l){const c=this.input.evaluate(l);return(yn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class za{constructor(l,c,g){this.type=l,this.branches=c,this.otherwise=g}static parse(l,c){if(l.length<4)return c.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return c.error("Expected an odd number of arguments.");let g;c.expectedType&&c.expectedType.kind!=="value"&&(g=c.expectedType);const b=[];for(let A=1;A<l.length-1;A+=2){const R=c.parse(l[A],A,Dr);if(!R)return null;const B=c.parse(l[A+1],A+1,g);if(!B)return null;b.push([R,B]),g=g||B.type}const C=c.parse(l[l.length-1],l.length-1,g);if(!C)return null;if(!g)throw new Error("Can't infer output type");return new za(g,b,C)}evaluate(l){for(const[c,g]of this.branches)if(c.evaluate(l))return g.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[c,g]of this.branches)l(c),l(g);l(this.otherwise)}outputDefined(){return this.branches.every((([l,c])=>c.outputDefined()))&&this.otherwise.outputDefined()}}class X{constructor(l,c,g,b){this.type=l,this.input=c,this.beginIndex=g,this.endIndex=b}static parse(l,c){if(l.length<=2||l.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=c.parse(l[1],1,$r),b=c.parse(l[2],2,Vt);if(!g||!b)return null;if(!ya(g.type,[ea($r),Ir,$r]))return c.error(`Expected first argument to be of type array or string, but found ${hn(g.type)} instead`);if(l.length===4){const C=c.parse(l[3],3,Vt);return C?new X(g.type,g,b,C):null}return new X(g.type,g,b)}evaluate(l){const c=this.input.evaluate(l),g=this.beginIndex.evaluate(l);let b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),Di(c,["string"]))return[...c].slice(g,b).join("");if(Di(c,["array"]))return c.slice(g,b);throw new bn(`Expected first argument to be of type array or string, but found ${hn(yn(c))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ae(f,l){const c=f.length-1;let g,b,C=0,A=c,R=0;for(;C<=A;)if(R=Math.floor((C+A)/2),g=f[R],b=f[R+1],g<=l){if(R===c||l<b)return R;C=R+1}else{if(!(g>l))throw new bn("Input is not a number.");A=R-1}return 0}class et{constructor(l,c,g){this.type=l,this.input=c,this.labels=[],this.outputs=[];for(const[b,C]of g)this.labels.push(b),this.outputs.push(C)}static parse(l,c){if(l.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return c.error("Expected an even number of arguments.");const g=c.parse(l[1],1,Vt);if(!g)return null;const b=[];let C=null;c.expectedType&&c.expectedType.kind!=="value"&&(C=c.expectedType);for(let A=1;A<l.length;A+=2){const R=A===1?-1/0:l[A],B=l[A+1],H=A,K=A+1;if(typeof R!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(b.length&&b[b.length-1][0]>=R)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',H);const ie=c.parse(B,K,C);if(!ie)return null;C=C||ie.type,b.push([R,ie])}return new et(C,g,b)}evaluate(l){const c=this.labels,g=this.outputs;if(c.length===1)return g[0].evaluate(l);const b=this.input.evaluate(l);if(b<=c[0])return g[0].evaluate(l);const C=c.length;return b>=c[C-1]?g[C-1].evaluate(l):g[Ae(c,b)].evaluate(l)}eachChild(l){l(this.input);for(const c of this.outputs)l(c)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function It(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var $t,pr,Er=(function(){if(pr)return $t;function f(l,c,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(b-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=c,this.p2x=g,this.p2y=b}return pr=1,$t=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,c){if(c===void 0&&(c=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var C=this.sampleCurveX(g)-l;if(Math.abs(C)<c)return g;var A=this.sampleCurveDerivativeX(g);if(Math.abs(A)<1e-6)break;g-=C/A}var R=0,B=1;for(g=l,b=0;b<20&&(C=this.sampleCurveX(g),!(Math.abs(C-l)<c));b++)l>C?R=g:B=g,g=.5*(B-R)+R;return g},solve:function(l,c){return this.sampleCurveY(this.solveCurveX(l,c))}},$t})(),rn=It(Er);class Qr{constructor(l,c,g,b,C){this.type=l,this.operator=c,this.interpolation=g,this.input=b,this.labels=[],this.outputs=[];for(const[A,R]of C)this.labels.push(A),this.outputs.push(R)}static interpolationFactor(l,c,g,b){let C=0;if(l.name==="exponential")C=Mn(c,l.base,g,b);else if(l.name==="linear")C=Mn(c,1,g,b);else if(l.name==="cubic-bezier"){const A=l.controlPoints;C=new rn(A[0],A[1],A[2],A[3]).solve(Mn(c,1,g,b))}return C}static parse(l,c){let[g,b,C,...A]=l;if(!Array.isArray(b)||b.length===0)return c.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const H=b[1];if(typeof H!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:H}}else{if(b[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const H=b.slice(1);if(H.length!==4||H.some((K=>typeof K!="number"||K<0||K>1)))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:H}}}if(l.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(C=c.parse(C,2,Vt),!C)return null;const R=[];let B=null;g!=="interpolate-hcl"&&g!=="interpolate-lab"||c.expectedType==vi?c.expectedType&&c.expectedType.kind!=="value"&&(B=c.expectedType):B=Sn;for(let H=0;H<A.length;H+=2){const K=A[H],ie=A[H+1],ve=H+3,we=H+4;if(typeof K!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ve);if(R.length&&R[R.length-1][0]>=K)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ve);const Ee=c.parse(ie,we,B);if(!Ee)return null;B=B||Ee.type,R.push([K,Ee])}return hi(B,Vt)||hi(B,vn)||hi(B,Sn)||hi(B,Ji)||hi(B,Mi)||hi(B,vi)||hi(B,Qi)||hi(B,ea(Vt))?new Qr(B,g,b,C,R):c.error(`Type ${hn(B)} is not interpolatable.`)}evaluate(l){const c=this.labels,g=this.outputs;if(c.length===1)return g[0].evaluate(l);const b=this.input.evaluate(l);if(b<=c[0])return g[0].evaluate(l);const C=c.length;if(b>=c[C-1])return g[C-1].evaluate(l);const A=Ae(c,b),R=Qr.interpolationFactor(this.interpolation,b,c[A],c[A+1]),B=g[A].evaluate(l),H=g[A+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ar(B,H,R);case"color":return fr.interpolate(B,H,R);case"padding":return Yr.interpolate(B,H,R);case"colorArray":return Kr.interpolate(B,H,R);case"numberArray":return ur.interpolate(B,H,R);case"variableAnchorOffsetCollection":return Gn.interpolate(B,H,R);case"array":return jr(B,H,R);case"projectionDefinition":return ja.interpolate(B,H,R)}case"interpolate-hcl":switch(this.type.kind){case"color":return fr.interpolate(B,H,R,"hcl");case"colorArray":return Kr.interpolate(B,H,R,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return fr.interpolate(B,H,R,"lab");case"colorArray":return Kr.interpolate(B,H,R,"lab")}}}eachChild(l){l(this.input);for(const c of this.outputs)l(c)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Mn(f,l,c,g){const b=g-c,C=f-c;return b===0?0:l===1?C/b:(Math.pow(l,C)-1)/(Math.pow(l,b)-1)}const On={color:fr.interpolate,number:Ar,padding:Yr.interpolate,numberArray:ur.interpolate,colorArray:Kr.interpolate,variableAnchorOffsetCollection:Gn.interpolate,array:jr};class Xn{constructor(l,c){this.type=l,this.args=c}static parse(l,c){if(l.length<2)return c.error("Expected at least one argument.");let g=null;const b=c.expectedType;b&&b.kind!=="value"&&(g=b);const C=[];for(const R of l.slice(1)){const B=c.parse(R,1+C.length,g,void 0,{typeAnnotation:"omit"});if(!B)return null;g=g||B.type,C.push(B)}if(!g)throw new Error("No output type");const A=b&&C.some((R=>qi(b,R.type)));return new Xn(A?$r:g,C)}evaluate(l){let c,g=null,b=0;for(const C of this.args)if(b++,g=C.evaluate(l),g&&g instanceof aa&&!g.available&&(c||(c=g.name),g=null,b===this.args.length&&(g=c)),g!==null)break;return g}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function Ni(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function ta(f,l,c,g){return g.compare(l,c)===0}function $n(f,l,c){const g=f!=="=="&&f!=="!=";return class m${constructor(C,A,R){this.type=Dr,this.lhs=C,this.rhs=A,this.collator=R,this.hasUntypedArgument=C.type.kind==="value"||A.type.kind==="value"}static parse(C,A){if(C.length!==3&&C.length!==4)return A.error("Expected two or three arguments.");const R=C[0];let B=A.parse(C[1],1,$r);if(!B)return null;if(!Ni(R,B.type))return A.concat(1).error(`"${R}" comparisons are not supported for type '${hn(B.type)}'.`);let H=A.parse(C[2],2,$r);if(!H)return null;if(!Ni(R,H.type))return A.concat(2).error(`"${R}" comparisons are not supported for type '${hn(H.type)}'.`);if(B.type.kind!==H.type.kind&&B.type.kind!=="value"&&H.type.kind!=="value")return A.error(`Cannot compare types '${hn(B.type)}' and '${hn(H.type)}'.`);g&&(B.type.kind==="value"&&H.type.kind!=="value"?B=new ao(H.type,[B]):B.type.kind!=="value"&&H.type.kind==="value"&&(H=new ao(B.type,[H])));let K=null;if(C.length===4){if(B.type.kind!=="string"&&H.type.kind!=="string"&&B.type.kind!=="value"&&H.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(K=A.parse(C[3],3,Ii),!K)return null}return new m$(B,H,K)}evaluate(C){const A=this.lhs.evaluate(C),R=this.rhs.evaluate(C);if(g&&this.hasUntypedArgument){const B=yn(A),H=yn(R);if(B.kind!==H.kind||B.kind!=="string"&&B.kind!=="number")throw new bn(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${B.kind}, ${H.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const B=yn(A),H=yn(R);if(B.kind!=="string"||H.kind!=="string")return l(C,A,R)}return this.collator?c(C,A,R,this.collator.evaluate(C)):l(C,A,R)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const fa=$n("==",(function(f,l,c){return l===c}),ta),zi=$n("!=",(function(f,l,c){return l!==c}),(function(f,l,c,g){return!ta(0,l,c,g)})),Ma=$n("<",(function(f,l,c){return l<c}),(function(f,l,c,g){return g.compare(l,c)<0})),ss=$n(">",(function(f,l,c){return l>c}),(function(f,l,c,g){return g.compare(l,c)>0})),Ks=$n("<=",(function(f,l,c){return l<=c}),(function(f,l,c,g){return g.compare(l,c)<=0})),fu=$n(">=",(function(f,l,c){return l>=c}),(function(f,l,c,g){return g.compare(l,c)>=0}));class hu{constructor(l,c,g){this.type=Ii,this.locale=g,this.caseSensitive=l,this.diacriticSensitive=c}static parse(l,c){if(l.length!==2)return c.error("Expected one argument.");const g=l[1];if(typeof g!="object"||Array.isArray(g))return c.error("Collator options argument must be an object.");const b=c.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Dr);if(!b)return null;const C=c.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Dr);if(!C)return null;let A=null;return g.locale&&(A=c.parse(g.locale,1,Ir),!A)?null:new hu(b,C,A)}evaluate(l){return new Rr(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class bl{constructor(l,c,g,b,C){this.type=Ir,this.number=l,this.locale=c,this.currency=g,this.minFractionDigits=b,this.maxFractionDigits=C}static parse(l,c){if(l.length!==3)return c.error("Expected two arguments.");const g=c.parse(l[1],1,Vt);if(!g)return null;const b=l[2];if(typeof b!="object"||Array.isArray(b))return c.error("NumberFormat options argument must be an object.");let C=null;if(b.locale&&(C=c.parse(b.locale,1,Ir),!C))return null;let A=null;if(b.currency&&(A=c.parse(b.currency,1,Ir),!A))return null;let R=null;if(b["min-fraction-digits"]&&(R=c.parse(b["min-fraction-digits"],1,Vt),!R))return null;let B=null;return b["max-fraction-digits"]&&(B=c.parse(b["max-fraction-digits"],1,Vt),!B)?null:new bl(g,C,A,R,B)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class eo{constructor(l){this.type=Li,this.sections=l}static parse(l,c){if(l.length<2)return c.error("Expected at least one argument.");const g=l[1];if(!Array.isArray(g)&&typeof g=="object")return c.error("First argument must be an image or text section.");const b=[];let C=!1;for(let A=1;A<=l.length-1;++A){const R=l[A];if(C&&typeof R=="object"&&!Array.isArray(R)){C=!1;let B=null;if(R["font-scale"]&&(B=c.parse(R["font-scale"],1,Vt),!B))return null;let H=null;if(R["text-font"]&&(H=c.parse(R["text-font"],1,ea(Ir)),!H))return null;let K=null;if(R["text-color"]&&(K=c.parse(R["text-color"],1,Sn),!K))return null;let ie=null;if(R["vertical-align"]){if(typeof R["vertical-align"]=="string"&&!Pn.includes(R["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${R["vertical-align"]}' instead.`);if(ie=c.parse(R["vertical-align"],1,Ir),!ie)return null}const ve=b[b.length-1];ve.scale=B,ve.font=H,ve.textColor=K,ve.verticalAlign=ie}else{const B=c.parse(l[A],1,$r);if(!B)return null;const H=B.type.kind;if(H!=="string"&&H!=="value"&&H!=="null"&&H!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,b.push({content:B,scale:null,font:null,textColor:null,verticalAlign:null})}}return new eo(b)}evaluate(l){return new dn(this.sections.map((c=>{const g=c.content.evaluate(l);return yn(g)===ni?new bi("",g,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(l):null):new bi(pn(g),null,c.scale?c.scale.evaluate(l):null,c.font?c.font.evaluate(l).join(","):null,c.textColor?c.textColor.evaluate(l):null,c.verticalAlign?c.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const c of this.sections)l(c.content),c.scale&&l(c.scale),c.font&&l(c.font),c.textColor&&l(c.textColor),c.verticalAlign&&l(c.verticalAlign)}outputDefined(){return!1}}class du{constructor(l){this.type=ni,this.input=l}static parse(l,c){if(l.length!==2)return c.error("Expected two arguments.");const g=c.parse(l[1],1,Ir);return g?new du(g):c.error("No image name provided.")}evaluate(l){const c=this.input.evaluate(l),g=aa.fromString(c);return g&&l.availableImages&&(g.available=l.availableImages.indexOf(c)>-1),g}eachChild(l){l(this.input)}outputDefined(){return!1}}class _l{constructor(l){this.type=Vt,this.input=l}static parse(l,c){if(l.length!==2)return c.error(`Expected 1 argument, but found ${l.length-1} instead.`);const g=c.parse(l[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${hn(g.type)} instead.`):new _l(g):null}evaluate(l){const c=this.input.evaluate(l);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new bn(`Expected value to be of type string or array, but found ${hn(yn(c))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Ra=8192;function wa(f,l){const c=(180+f[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(c*b*Ra),Math.round(g*b*Ra)]}function $a(f,l){const c=Math.pow(2,l.z);return[(b=(f[0]/Ra+l.x)/c,360*b-180),(g=(f[1]/Ra+l.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,b}function ba(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function so(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function zl(f,l,c){const g=f[0]-l[0],b=f[1]-l[1],C=f[0]-c[0],A=f[1]-c[1];return g*A-C*b==0&&g*C<=0&&b*A<=0}function Wi(f,l,c,g){return(b=[g[0]-c[0],g[1]-c[1]])[0]*(C=[l[0]-f[0],l[1]-f[1]])[1]-b[1]*C[0]!=0&&!(!Uu(f,l,c,g)||!Uu(c,g,f,l));var b,C}function Uc(f,l,c){for(const g of c)for(let b=0;b<g.length-1;++b)if(Wi(f,l,g[b],g[b+1]))return!0;return!1}function Mo(f,l,c=!1){let g=!1;for(const R of l)for(let B=0;B<R.length-1;B++){if(zl(f,R[B],R[B+1]))return c;(C=R[B])[1]>(b=f)[1]!=(A=R[B+1])[1]>b[1]&&b[0]<(A[0]-C[0])*(b[1]-C[1])/(A[1]-C[1])+C[0]&&(g=!g)}var b,C,A;return g}function xl(f,l){for(const c of l)if(Mo(f,c))return!0;return!1}function ha(f,l){for(const c of f)if(!Mo(c,l))return!1;for(let c=0;c<f.length-1;++c)if(Uc(f[c],f[c+1],l))return!1;return!0}function ls(f,l){for(const c of l)if(ha(f,c))return!0;return!1}function Uu(f,l,c,g){const b=g[0]-c[0],C=g[1]-c[1],A=(f[0]-c[0])*C-b*(f[1]-c[1]),R=(l[0]-c[0])*C-b*(l[1]-c[1]);return A>0&&R<0||A<0&&R>0}function pu(f,l,c){const g=[];for(let b=0;b<f.length;b++){const C=[];for(let A=0;A<f[b].length;A++){const R=wa(f[b][A],c);ba(l,R),C.push(R)}g.push(C)}return g}function Xs(f,l,c){const g=[];for(let b=0;b<f.length;b++){const C=pu(f[b],l,c);g.push(C)}return g}function Ys(f,l,c,g){if(f[0]<c[0]||f[0]>c[2]){const b=.5*g;let C=f[0]-c[0]>b?-g:c[0]-f[0]>b?g:0;C===0&&(C=f[0]-c[2]>b?-g:c[2]-f[0]>b?g:0),f[0]+=C}ba(l,f)}function Ua(f,l,c,g){const b=Math.pow(2,g.z)*Ra,C=[g.x*Ra,g.y*Ra],A=[];for(const R of f)for(const B of R){const H=[B.x+C[0],B.y+C[1]];Ys(H,l,c,b),A.push(H)}return A}function Sa(f,l,c,g){const b=Math.pow(2,g.z)*Ra,C=[g.x*Ra,g.y*Ra],A=[];for(const B of f){const H=[];for(const K of B){const ie=[K.x+C[0],K.y+C[1]];ba(l,ie),H.push(ie)}A.push(H)}if(l[2]-l[0]<=b/2){(R=l)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const B of A)for(const H of B)Ys(H,l,c,b)}var R;return A}class us{constructor(l,c){this.type=Dr,this.geojson=l,this.geometries=c}static parse(l,c){if(l.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(os(l[1])){const g=l[1];if(g.type==="FeatureCollection"){const b=[];for(const C of g.features){const{type:A,coordinates:R}=C.geometry;A==="Polygon"&&b.push(R),A==="MultiPolygon"&&b.push(...R)}if(b.length)return new us(g,{type:"MultiPolygon",coordinates:b})}else if(g.type==="Feature"){const b=g.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new us(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new us(g,g)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(c,g){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=c.canonicalID();if(g.type==="Polygon"){const R=pu(g.coordinates,C,A),B=Ua(c.geometry(),b,C,A);if(!so(b,C))return!1;for(const H of B)if(!Mo(H,R))return!1}if(g.type==="MultiPolygon"){const R=Xs(g.coordinates,C,A),B=Ua(c.geometry(),b,C,A);if(!so(b,C))return!1;for(const H of B)if(!xl(H,R))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(c,g){const b=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=c.canonicalID();if(g.type==="Polygon"){const R=pu(g.coordinates,C,A),B=Sa(c.geometry(),b,C,A);if(!so(b,C))return!1;for(const H of B)if(!ha(H,R))return!1}if(g.type==="MultiPolygon"){const R=Xs(g.coordinates,C,A),B=Sa(c.geometry(),b,C,A);if(!so(b,C))return!1;for(const H of B)if(!ls(H,R))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Oa=class{constructor(f=[],l=(c,g)=>c<g?-1:c>g?1:0){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:l,compare:c}=this,g=l[f];for(;f>0;){const b=f-1>>1,C=l[b];if(c(g,C)>=0)break;l[f]=C,f=b}l[f]=g}_down(f){const{data:l,compare:c}=this,g=this.length>>1,b=l[f];for(;f<g;){let C=1+(f<<1);const A=C+1;if(A<this.length&&c(l[A],l[C])<0&&(C=A),c(l[C],b)>=0)break;l[f]=l[C],f=C}l[f]=b}};function Js(f,l,c=0,g=f.length-1,b=wl){for(;g>c;){if(g-c>600){const B=g-c+1,H=l-c+1,K=Math.log(B),ie=.5*Math.exp(2*K/3),ve=.5*Math.sqrt(K*ie*(B-ie)/B)*(H-B/2<0?-1:1);Js(f,l,Math.max(c,Math.floor(l-H*ie/B+ve)),Math.min(g,Math.floor(l+(B-H)*ie/B+ve)),b)}const C=f[l];let A=c,R=g;for(Ro(f,c,l),b(f[g],C)>0&&Ro(f,c,g);A<R;){for(Ro(f,A,R),A++,R--;b(f[A],C)<0;)A++;for(;b(f[R],C)>0;)R--}b(f[c],C)===0?Ro(f,c,R):(R++,Ro(f,R,g)),R<=l&&(c=R+1),l<=R&&(g=R-1)}}function Ro(f,l,c){const g=f[l];f[l]=f[c],f[c]=g}function wl(f,l){return f<l?-1:f>l?1:0}function Zi(f,l){if(f.length<=1)return[f];const c=[];let g,b;for(const C of f){const A=vs(C);A!==0&&(C.area=Math.abs(A),b===void 0&&(b=A<0),b===A<0?(g&&c.push(g),g=[C]):g.push(C))}if(g&&c.push(g),l>1)for(let C=0;C<c.length;C++)c[C].length<=l||(Js(c[C],l,1,c[C].length-1,mu),c[C]=c[C].slice(0,l));return c}function mu(f,l){return l.area-f.area}function vs(f){let l=0;for(let c,g,b=0,C=f.length,A=C-1;b<C;A=b++)c=f[b],g=f[A],l+=(g.x-c.x)*(c.y+g.y);return l}const bs=1/298.257223563,$l=bs*(2-bs),Ul=Math.PI/180;class _s{constructor(l){const c=6378.137*Ul*1e3,g=Math.cos(l*Ul),b=1/(1-$l*(1-g*g)),C=Math.sqrt(b);this.kx=c*C*g,this.ky=c*C*b*(1-$l)}distance(l,c){const g=this.wrap(l[0]-c[0])*this.kx,b=(l[1]-c[1])*this.ky;return Math.sqrt(g*g+b*b)}pointOnLine(l,c){let g,b,C,A,R=1/0;for(let B=0;B<l.length-1;B++){let H=l[B][0],K=l[B][1],ie=this.wrap(l[B+1][0]-H)*this.kx,ve=(l[B+1][1]-K)*this.ky,we=0;ie===0&&ve===0||(we=(this.wrap(c[0]-H)*this.kx*ie+(c[1]-K)*this.ky*ve)/(ie*ie+ve*ve),we>1?(H=l[B+1][0],K=l[B+1][1]):we>0&&(H+=ie/this.kx*we,K+=ve/this.ky*we)),ie=this.wrap(c[0]-H)*this.kx,ve=(c[1]-K)*this.ky;const Ee=ie*ie+ve*ve;Ee<R&&(R=Ee,g=H,b=K,C=B,A=we)}return{point:[g,b],index:C,t:Math.max(0,Math.min(1,A))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function ql(f,l){return l[0]-f[0]}function Qs(f){return f[1]-f[0]+1}function Ft(f,l){return f[1]>=f[0]&&f[1]<l}function qt(f,l){if(f[0]>f[1])return[null,null];const c=Qs(f);if(l){if(c===2)return[f,null];const b=Math.floor(c/2);return[[f[0],f[0]+b],[f[0]+b,f[1]]]}if(c===1)return[f,null];const g=Math.floor(c/2)-1;return[[f[0],f[0]+g],[f[0]+g+1,f[1]]]}function Ur(f,l){if(!Ft(l,f.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let g=l[0];g<=l[1];++g)ba(c,f[g]);return c}function nn(f){const l=[1/0,1/0,-1/0,-1/0];for(const c of f)for(const g of c)ba(l,g);return l}function si(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function fn(f,l,c){if(!si(f)||!si(l))return NaN;let g=0,b=0;return f[2]<l[0]&&(g=l[0]-f[2]),f[0]>l[2]&&(g=f[0]-l[2]),f[1]>l[3]&&(b=f[1]-l[3]),f[3]<l[1]&&(b=l[1]-f[3]),c.distance([0,0],[g,b])}function Tn(f,l,c){const g=c.pointOnLine(l,f);return c.distance(f,g.point)}function Hn(f,l,c,g,b){const C=Math.min(Tn(f,[c,g],b),Tn(l,[c,g],b)),A=Math.min(Tn(c,[f,l],b),Tn(g,[f,l],b));return Math.min(C,A)}function _i(f,l,c,g,b){if(!Ft(l,f.length)||!Ft(g,c.length))return 1/0;let C=1/0;for(let A=l[0];A<l[1];++A){const R=f[A],B=f[A+1];for(let H=g[0];H<g[1];++H){const K=c[H],ie=c[H+1];if(Wi(R,B,K,ie))return 0;C=Math.min(C,Hn(R,B,K,ie,b))}}return C}function $i(f,l,c,g,b){if(!Ft(l,f.length)||!Ft(g,c.length))return NaN;let C=1/0;for(let A=l[0];A<=l[1];++A)for(let R=g[0];R<=g[1];++R)if(C=Math.min(C,b.distance(f[A],c[R])),C===0)return C;return C}function ra(f,l,c){if(Mo(f,l,!0))return 0;let g=1/0;for(const b of l){const C=b[0],A=b[b.length-1];if(C!==A&&(g=Math.min(g,Tn(f,[A,C],c)),g===0))return g;const R=c.pointOnLine(b,f);if(g=Math.min(g,c.distance(f,R.point)),g===0)return g}return g}function ka(f,l,c,g){if(!Ft(l,f.length))return NaN;for(let C=l[0];C<=l[1];++C)if(Mo(f[C],c,!0))return 0;let b=1/0;for(let C=l[0];C<l[1];++C){const A=f[C],R=f[C+1];for(const B of c)for(let H=0,K=B.length,ie=K-1;H<K;ie=H++){const ve=B[ie],we=B[H];if(Wi(A,R,ve,we))return 0;b=Math.min(b,Hn(A,R,ve,we,g))}}return b}function Zo(f,l){for(const c of f)for(const g of c)if(Mo(g,l,!0))return!0;return!1}function lo(f,l,c,g=1/0){const b=nn(f),C=nn(l);if(g!==1/0&&fn(b,C,c)>=g)return g;if(so(b,C)){if(Zo(f,l))return 0}else if(Zo(l,f))return 0;let A=1/0;for(const R of f)for(let B=0,H=R.length,K=H-1;B<H;K=B++){const ie=R[K],ve=R[B];for(const we of l)for(let Ee=0,Oe=we.length,Ge=Oe-1;Ee<Oe;Ge=Ee++){const at=we[Ge],Nt=we[Ee];if(Wi(ie,ve,at,Nt))return 0;A=Math.min(A,Hn(ie,ve,at,Nt,c))}}return A}function Os(f,l,c,g,b,C){if(!C)return;const A=fn(Ur(g,C),b,c);A<l&&f.push([A,C,[0,0]])}function el(f,l,c,g,b,C,A){if(!C||!A)return;const R=fn(Ur(g,C),Ur(b,A),c);R<l&&f.push([R,C,A])}function Vl(f,l,c,g,b=1/0){let C=Math.min(g.distance(f[0],c[0][0]),b);if(C===0)return C;const A=new Oa([[0,[0,f.length-1],[0,0]]],ql),R=nn(c);for(;A.length>0;){const B=A.pop();if(B[0]>=C)continue;const H=B[1],K=l?50:100;if(Qs(H)<=K){if(!Ft(H,f.length))return NaN;if(l){const ie=ka(f,H,c,g);if(isNaN(ie)||ie===0)return ie;C=Math.min(C,ie)}else for(let ie=H[0];ie<=H[1];++ie){const ve=ra(f[ie],c,g);if(C=Math.min(C,ve),C===0)return 0}}else{const ie=qt(H,l);Os(A,C,g,f,R,ie[0]),Os(A,C,g,f,R,ie[1])}}return C}function tl(f,l,c,g,b,C=1/0){let A=Math.min(C,b.distance(f[0],c[0]));if(A===0)return A;const R=new Oa([[0,[0,f.length-1],[0,c.length-1]]],ql);for(;R.length>0;){const B=R.pop();if(B[0]>=A)continue;const H=B[1],K=B[2],ie=l?50:100,ve=g?50:100;if(Qs(H)<=ie&&Qs(K)<=ve){if(!Ft(H,f.length)&&Ft(K,c.length))return NaN;let we;if(l&&g)we=_i(f,H,c,K,b),A=Math.min(A,we);else if(l&&!g){const Ee=f.slice(H[0],H[1]+1);for(let Oe=K[0];Oe<=K[1];++Oe)if(we=Tn(c[Oe],Ee,b),A=Math.min(A,we),A===0)return A}else if(!l&&g){const Ee=c.slice(K[0],K[1]+1);for(let Oe=H[0];Oe<=H[1];++Oe)if(we=Tn(f[Oe],Ee,b),A=Math.min(A,we),A===0)return A}else we=$i(f,H,c,K,b),A=Math.min(A,we)}else{const we=qt(H,l),Ee=qt(K,g);el(R,A,b,f,c,we[0],Ee[0]),el(R,A,b,f,c,we[0],Ee[1]),el(R,A,b,f,c,we[1],Ee[0]),el(R,A,b,f,c,we[1],Ee[1])}}return A}function Gl(f){return f.type==="MultiPolygon"?f.coordinates.map((l=>({type:"Polygon",coordinates:l}))):f.type==="MultiLineString"?f.coordinates.map((l=>({type:"LineString",coordinates:l}))):f.type==="MultiPoint"?f.coordinates.map((l=>({type:"Point",coordinates:l}))):[f]}class Sl{constructor(l,c){this.type=Vt,this.geojson=l,this.geometries=c}static parse(l,c){if(l.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(os(l[1])){const g=l[1];if(g.type==="FeatureCollection")return new Sl(g,g.features.map((b=>Gl(b.geometry))).flat());if(g.type==="Feature")return new Sl(g,Gl(g.geometry));if("type"in g&&"coordinates"in g)return new Sl(g,Gl(g))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(c,g){const b=c.geometry(),C=b.flat().map((B=>$a([B.x,B.y],c.canonical)));if(b.length===0)return NaN;const A=new _s(C[0][1]);let R=1/0;for(const B of g){switch(B.type){case"Point":R=Math.min(R,tl(C,!1,[B.coordinates],!1,A,R));break;case"LineString":R=Math.min(R,tl(C,!1,B.coordinates,!0,A,R));break;case"Polygon":R=Math.min(R,Vl(C,!1,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries);if(l.geometryType()==="LineString")return(function(c,g){const b=c.geometry(),C=b.flat().map((B=>$a([B.x,B.y],c.canonical)));if(b.length===0)return NaN;const A=new _s(C[0][1]);let R=1/0;for(const B of g){switch(B.type){case"Point":R=Math.min(R,tl(C,!0,[B.coordinates],!1,A,R));break;case"LineString":R=Math.min(R,tl(C,!0,B.coordinates,!0,A,R));break;case"Polygon":R=Math.min(R,Vl(C,!0,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(c,g){const b=c.geometry();if(b.length===0||b[0].length===0)return NaN;const C=Zi(b,0).map((B=>B.map((H=>H.map((K=>$a([K.x,K.y],c.canonical))))))),A=new _s(C[0][0][0][1]);let R=1/0;for(const B of g)for(const H of C){switch(B.type){case"Point":R=Math.min(R,Vl([B.coordinates],!1,H,A,R));break;case"LineString":R=Math.min(R,Vl(B.coordinates,!0,H,A,R));break;case"Polygon":R=Math.min(R,lo(H,B.coordinates,A,R))}if(R===0)return R}return R})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class qu{constructor(l){this.type=$r,this.key=l}static parse(l,c){if(l.length!==2)return c.error(`Expected 1 argument, but found ${l.length-1} instead.`);const g=l[1];return g==null?c.error("Global state property must be defined."):typeof g!="string"?c.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new qu(g)}evaluate(l){var c;const g=(c=l.globals)===null||c===void 0?void 0:c.globalState;return g&&Object.keys(g).length!==0?Re(g,this.key):null}eachChild(){}outputDefined(){return!1}}const gu={"==":fa,"!=":zi,">":ss,"<":Ma,">=":fu,"<=":Ks,array:ao,at:Rs,boolean:ao,case:za,coalesce:Xn,collator:hu,format:eo,image:du,in:vl,"index-of":Io,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:_l,let:Zs,literal:Po,match:Ei,number:ao,"number-format":bl,object:ao,slice:X,step:et,string:ao,"to-boolean":To,"to-color":To,"to-number":To,"to-string":To,var:yl,within:us,distance:Sl,"global-state":qu};class ri{constructor(l,c,g,b){this.name=l,this.type=c,this._evaluate=g,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,c){const g=l[0],b=ri.definitions[g];if(!b)return c.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(b)?b[0]:b.type,A=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,R=A.filter((([H])=>!Array.isArray(H)||H.length===l.length-1));let B=null;for(const[H,K]of R){B=new Ws(c.registry,uo,c.path,null,c.scope);const ie=[];let ve=!1;for(let we=1;we<l.length;we++){const Ee=l[we],Oe=Array.isArray(H)?H[we-1]:H.type,Ge=B.parse(Ee,1+ie.length,Oe);if(!Ge){ve=!0;break}ie.push(Ge)}if(!ve)if(Array.isArray(H)&&H.length!==ie.length)B.error(`Expected ${H.length} arguments, but found ${ie.length} instead.`);else{for(let we=0;we<ie.length;we++){const Ee=Array.isArray(H)?H[we]:H.type,Oe=ie[we];B.concat(we+1).checkSubtype(Ee,Oe.type)}if(B.errors.length===0)return new ri(g,C,K,ie)}}if(R.length===1)c.errors.push(...B.errors);else{const H=(R.length?R:A).map((([ie])=>{return ve=ie,Array.isArray(ve)?`(${ve.map(hn).join(", ")})`:`(${hn(ve.type)}...)`;var ve})).join(" | "),K=[];for(let ie=1;ie<l.length;ie++){const ve=c.parse(l[ie],1+K.length);if(!ve)return null;K.push(hn(ve.type))}c.error(`Expected arguments of type ${H}, but found (${K.join(", ")}) instead.`)}return null}static register(l,c){ri.definitions=c;for(const g in c)l[g]=ri}}function xi(f,[l,c,g,b]){l=l.evaluate(f),c=c.evaluate(f),g=g.evaluate(f);const C=b?b.evaluate(f):1,A=In(l,c,g,C);if(A)throw new bn(A);return new fr(l/255,c/255,g/255,C,!1)}function Vu(f,l){return f in l}function Ko(f,l){const c=l[f];return c===void 0?null:c}function rl(f){return{type:f}}function uo(f){if(f instanceof yl)return uo(f.boundExpression);if(f instanceof ri&&f.name==="error"||f instanceof hu||f instanceof us||f instanceof Sl||f instanceof qu)return!1;const l=f instanceof To||f instanceof ao;let c=!0;return f.eachChild((g=>{c=l?c&&uo(g):c&&g instanceof Po})),!!c&&cs(f)&&El(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function cs(f){if(f instanceof ri&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof us||f instanceof Sl)return!1;let l=!0;return f.eachChild((c=>{l&&!cs(c)&&(l=!1)})),l}function fs(f){if(f instanceof ri&&f.name==="feature-state")return!1;let l=!0;return f.eachChild((c=>{l&&!fs(c)&&(l=!1)})),l}function El(f,l){if(f instanceof ri&&l.indexOf(f.name)>=0)return!1;let c=!0;return f.eachChild((g=>{c&&!El(g,l)&&(c=!1)})),c}function Gu(f){return{result:"success",value:f}}function xs(f){return{result:"error",value:f}}function Oo(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function cc(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Cl(f){return!!f.expression&&f.expression.interpolated}function En(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function La(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&yn(f)===Rn}function yu(f){return f}function Hu(f,l){const c=f.stops&&typeof f.stops[0][0]=="object",g=c||!(c||f.property!==void 0),b=f.type||(Cl(l)?"exponential":"interval"),C=(function(K){switch(K.type){case"color":return fr.parse;case"padding":return Yr.parse;case"numberArray":return ur.parse;case"colorArray":return Kr.parse;default:return null}})(l);if(C&&((f=jt({},f)).stops&&(f.stops=f.stops.map((K=>[K[0],C(K[1])]))),f.default=C(f.default?f.default:l.default)),f.colorSpace&&(A=f.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var A;const R=(function(K){switch(K){case"exponential":return yh;case"interval":return gh;case"categorical":return Hl;case"identity":return Np;default:throw new Error(`Unknown function type "${K}"`)}})(b);let B,H;if(b==="categorical"){B=Object.create(null);for(const K of f.stops)B[K[0]]=K[1];H=typeof f.stops[0][0]}if(c){const K={},ie=[];for(let Ee=0;Ee<f.stops.length;Ee++){const Oe=f.stops[Ee],Ge=Oe[0].zoom;K[Ge]===void 0&&(K[Ge]={zoom:Ge,type:f.type,property:f.property,default:f.default,stops:[]},ie.push(Ge)),K[Ge].stops.push([Oe[0].value,Oe[1]])}const ve=[];for(const Ee of ie)ve.push([K[Ee].zoom,Hu(K[Ee],l)]);const we={name:"linear"};return{kind:"composite",interpolationType:we,interpolationFactor:Qr.interpolationFactor.bind(void 0,we),zoomStops:ve.map((Ee=>Ee[0])),evaluate:({zoom:Ee},Oe)=>yh({stops:ve,base:f.base},l,Ee).evaluate(Ee,Oe)}}if(g){const K=b==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:K,interpolationFactor:Qr.interpolationFactor.bind(void 0,K),zoomStops:f.stops.map((ie=>ie[0])),evaluate:({zoom:ie})=>R(f,l,ie,B,H)}}return{kind:"source",evaluate(K,ie){const ve=ie&&ie.properties?ie.properties[f.property]:void 0;return ve===void 0?ws(f.default,l.default):R(f,l,ve,B,H)}}}function ws(f,l,c){return f!==void 0?f:l!==void 0?l:c!==void 0?c:void 0}function Hl(f,l,c,g,b){return ws(typeof c===b?g[c]:void 0,f.default,l.default)}function gh(f,l,c){if(En(c)!=="number")return ws(f.default,l.default);const g=f.stops.length;if(g===1||c<=f.stops[0][0])return f.stops[0][1];if(c>=f.stops[g-1][0])return f.stops[g-1][1];const b=Ae(f.stops.map((C=>C[0])),c);return f.stops[b][1]}function yh(f,l,c){const g=f.base!==void 0?f.base:1;if(En(c)!=="number")return ws(f.default,l.default);const b=f.stops.length;if(b===1||c<=f.stops[0][0])return f.stops[0][1];if(c>=f.stops[b-1][0])return f.stops[b-1][1];const C=Ae(f.stops.map((K=>K[0])),c),A=(function(K,ie,ve,we){const Ee=we-ve,Oe=K-ve;return Ee===0?0:ie===1?Oe/Ee:(Math.pow(ie,Oe)-1)/(Math.pow(ie,Ee)-1)})(c,g,f.stops[C][0],f.stops[C+1][0]),R=f.stops[C][1],B=f.stops[C+1][1],H=On[l.type]||yu;return typeof R.evaluate=="function"?{evaluate(...K){const ie=R.evaluate.apply(void 0,K),ve=B.evaluate.apply(void 0,K);if(ie!==void 0&&ve!==void 0)return H(ie,ve,A,f.colorSpace)}}:H(R,B,A,f.colorSpace)}function Np(f,l,c){switch(l.type){case"color":c=fr.parse(c);break;case"formatted":c=dn.fromString(c.toString());break;case"resolvedImage":c=aa.fromString(c.toString());break;case"padding":c=Yr.parse(c);break;case"colorArray":c=Kr.parse(c);break;case"numberArray":c=ur.parse(c);break;default:En(c)===l.type||l.type==="enum"&&l.values[c]||(c=void 0)}return ws(c,f.default,l.default)}ri.register(gu,{error:[{kind:"error"},[Ir],(f,[l])=>{throw new bn(l.evaluate(f))}],typeof:[Ir,[$r],(f,[l])=>hn(yn(l.evaluate(f)))],"to-rgba":[ea(Vt,4),[Sn],(f,[l])=>{const[c,g,b,C]=l.evaluate(f).rgb;return[255*c,255*g,255*b,C]}],rgb:[Sn,[Vt,Vt,Vt],xi],rgba:[Sn,[Vt,Vt,Vt,Vt],xi],has:{type:Dr,overloads:[[[Ir],(f,[l])=>Vu(l.evaluate(f),f.properties())],[[Ir,Rn],(f,[l,c])=>Vu(l.evaluate(f),c.evaluate(f))]]},get:{type:$r,overloads:[[[Ir],(f,[l])=>Ko(l.evaluate(f),f.properties())],[[Ir,Rn],(f,[l,c])=>Ko(l.evaluate(f),c.evaluate(f))]]},"feature-state":[$r,[Ir],(f,[l])=>Ko(l.evaluate(f),f.featureState||{})],properties:[Rn,[],f=>f.properties()],"geometry-type":[Ir,[],f=>f.geometryType()],id:[$r,[],f=>f.id()],zoom:[Vt,[],f=>f.globals.zoom],"heatmap-density":[Vt,[],f=>f.globals.heatmapDensity||0],elevation:[Vt,[],f=>f.globals.elevation||0],"line-progress":[Vt,[],f=>f.globals.lineProgress||0],accumulated:[$r,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Vt,rl(Vt),(f,l)=>{let c=0;for(const g of l)c+=g.evaluate(f);return c}],"*":[Vt,rl(Vt),(f,l)=>{let c=1;for(const g of l)c*=g.evaluate(f);return c}],"-":{type:Vt,overloads:[[[Vt,Vt],(f,[l,c])=>l.evaluate(f)-c.evaluate(f)],[[Vt],(f,[l])=>-l.evaluate(f)]]},"/":[Vt,[Vt,Vt],(f,[l,c])=>l.evaluate(f)/c.evaluate(f)],"%":[Vt,[Vt,Vt],(f,[l,c])=>l.evaluate(f)%c.evaluate(f)],ln2:[Vt,[],()=>Math.LN2],pi:[Vt,[],()=>Math.PI],e:[Vt,[],()=>Math.E],"^":[Vt,[Vt,Vt],(f,[l,c])=>Math.pow(l.evaluate(f),c.evaluate(f))],sqrt:[Vt,[Vt],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[Vt,[Vt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[Vt,[Vt],(f,[l])=>Math.log(l.evaluate(f))],log2:[Vt,[Vt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[Vt,[Vt],(f,[l])=>Math.sin(l.evaluate(f))],cos:[Vt,[Vt],(f,[l])=>Math.cos(l.evaluate(f))],tan:[Vt,[Vt],(f,[l])=>Math.tan(l.evaluate(f))],asin:[Vt,[Vt],(f,[l])=>Math.asin(l.evaluate(f))],acos:[Vt,[Vt],(f,[l])=>Math.acos(l.evaluate(f))],atan:[Vt,[Vt],(f,[l])=>Math.atan(l.evaluate(f))],min:[Vt,rl(Vt),(f,l)=>Math.min(...l.map((c=>c.evaluate(f))))],max:[Vt,rl(Vt),(f,l)=>Math.max(...l.map((c=>c.evaluate(f))))],abs:[Vt,[Vt],(f,[l])=>Math.abs(l.evaluate(f))],round:[Vt,[Vt],(f,[l])=>{const c=l.evaluate(f);return c<0?-Math.round(-c):Math.round(c)}],floor:[Vt,[Vt],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[Vt,[Vt],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[Dr,[Ir,$r],(f,[l,c])=>f.properties()[l.value]===c.value],"filter-id-==":[Dr,[$r],(f,[l])=>f.id()===l.value],"filter-type-==":[Dr,[Ir],(f,[l])=>f.geometryType()===l.value],"filter-<":[Dr,[Ir,$r],(f,[l,c])=>{const g=f.properties()[l.value],b=c.value;return typeof g==typeof b&&g<b}],"filter-id-<":[Dr,[$r],(f,[l])=>{const c=f.id(),g=l.value;return typeof c==typeof g&&c<g}],"filter->":[Dr,[Ir,$r],(f,[l,c])=>{const g=f.properties()[l.value],b=c.value;return typeof g==typeof b&&g>b}],"filter-id->":[Dr,[$r],(f,[l])=>{const c=f.id(),g=l.value;return typeof c==typeof g&&c>g}],"filter-<=":[Dr,[Ir,$r],(f,[l,c])=>{const g=f.properties()[l.value],b=c.value;return typeof g==typeof b&&g<=b}],"filter-id-<=":[Dr,[$r],(f,[l])=>{const c=f.id(),g=l.value;return typeof c==typeof g&&c<=g}],"filter->=":[Dr,[Ir,$r],(f,[l,c])=>{const g=f.properties()[l.value],b=c.value;return typeof g==typeof b&&g>=b}],"filter-id->=":[Dr,[$r],(f,[l])=>{const c=f.id(),g=l.value;return typeof c==typeof g&&c>=g}],"filter-has":[Dr,[$r],(f,[l])=>l.value in f.properties()],"filter-has-id":[Dr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Dr,[ea(Ir)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[Dr,[ea($r)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[Dr,[Ir,ea($r)],(f,[l,c])=>c.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[Dr,[Ir,ea($r)],(f,[l,c])=>(function(g,b,C,A){for(;C<=A;){const R=C+A>>1;if(b[R]===g)return!0;b[R]>g?A=R-1:C=R+1}return!1})(f.properties()[l.value],c.value,0,c.value.length-1)],all:{type:Dr,overloads:[[[Dr,Dr],(f,[l,c])=>l.evaluate(f)&&c.evaluate(f)],[rl(Dr),(f,l)=>{for(const c of l)if(!c.evaluate(f))return!1;return!0}]]},any:{type:Dr,overloads:[[[Dr,Dr],(f,[l,c])=>l.evaluate(f)||c.evaluate(f)],[rl(Dr),(f,l)=>{for(const c of l)if(c.evaluate(f))return!0;return!1}]]},"!":[Dr,[Dr],(f,[l])=>!l.evaluate(f)],"is-supported-script":[Dr,[Ir],(f,[l])=>{const c=f.globals&&f.globals.isSupportedScript;return!c||c(l.evaluate(f))}],upcase:[Ir,[Ir],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[Ir,[Ir],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[Ir,rl($r),(f,l)=>l.map((c=>pn(c.evaluate(f)))).join("")],"resolved-locale":[Ir,[Ii],(f,[l])=>l.evaluate(f).resolvedLocale()]});class kf{constructor(l,c){this.expression=l,this._warningHistory={},this._evaluator=new gl,this._defaultValue=c?(function(g){if(g.type==="color"&&La(g.default))return new fr(0,0,0,0);switch(g.type){case"color":return fr.parse(g.default)||null;case"padding":return Yr.parse(g.default)||null;case"numberArray":return ur.parse(g.default)||null;case"colorArray":return Kr.parse(g.default)||null;case"variableAnchorOffsetCollection":return Gn.parse(g.default)||null;case"projectionDefinition":return ja.parse(g.default)||null;default:return g.default===void 0?null:g.default}})(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(l,c,g,b,C,A){return this._evaluator.globals=l,this._evaluator.feature=c,this._evaluator.featureState=g,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(l,c,g,b,C,A){this._evaluator.globals=l,this._evaluator.feature=c||null,this._evaluator.featureState=g||null,this._evaluator.canonical=b,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new bn(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function qc(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in gu}function Wu(f,l){const c=new Ws(gu,uo,[],l?(function(b){const C={color:Sn,string:Ir,number:Vt,enum:Ir,boolean:Dr,formatted:Li,padding:Ji,numberArray:Mi,colorArray:vi,projectionDefinition:vn,resolvedImage:ni,variableAnchorOffsetCollection:Qi};return b.type==="array"?ea(C[b.value]||$r,b.length):C[b.type]})(l):void 0),g=c.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Gu(new kf(g,l)):xs(c.errors)}class fc{constructor(l,c){this.kind=l,this._styleExpression=c,this.isStateDependent=l!=="constant"&&!fs(c.expression),this.globalStateRefs=Df(c.expression)}evaluateWithoutErrorHandling(l,c,g,b,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,c,g,b,C,A)}evaluate(l,c,g,b,C,A){return this._styleExpression.evaluate(l,c,g,b,C,A)}}class md{constructor(l,c,g,b){this.kind=l,this.zoomStops=g,this._styleExpression=c,this.isStateDependent=l!=="camera"&&!fs(c.expression),this.globalStateRefs=Df(c.expression),this.interpolationType=b}evaluateWithoutErrorHandling(l,c,g,b,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,c,g,b,C,A)}evaluate(l,c,g,b,C,A){return this._styleExpression.evaluate(l,c,g,b,C,A)}interpolationFactor(l,c,g){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,l,c,g):0}}function Fp(f,l){const c=Wu(f,l);if(c.result==="error")return c;const g=c.value.expression,b=cs(g);if(!b&&!Oo(l))return xs([new Jt("","data expressions not supported")]);const C=El(g,["zoom"]);if(!C&&!cc(l))return xs([new Jt("","zoom expressions not supported")]);const A=Lf(g);return A||C?A instanceof Jt?xs([A]):A instanceof Qr&&!Cl(l)?xs([new Jt("",'"interpolate" expressions cannot be used with this property')]):Gu(A?new md(b?"camera":"composite",c.value,A.labels,A instanceof Qr?A.interpolation:void 0):new fc(b?"constant":"source",c.value)):xs([new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vc{constructor(l,c){this._parameters=l,this._specification=c,jt(this,Hu(this._parameters,this._specification))}static deserialize(l){return new Vc(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Lf(f){let l=null;if(f instanceof Zs)l=Lf(f.result);else if(f instanceof Xn){for(const c of f.args)if(l=Lf(c),l)break}else(f instanceof et||f instanceof Qr)&&f.input instanceof ri&&f.input.name==="zoom"&&(l=f);return l instanceof Jt||f.eachChild((c=>{const g=Lf(c);g instanceof Jt?l=g:!l&&g?l=new Jt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&g&&l!==g&&(l=new Jt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Df(f,l=new Set){return f instanceof qu&&l.add(f.key),f.eachChild((c=>{Df(c,l)})),l}function vh(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const l of f.slice(1))if(!vh(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const gd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hc(f){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};vh(f)||(f=Al(f));const l=Wu(f,gd);if(l.result==="error")throw new Error(l.value.map((c=>`${c.key}: ${c.message}`)).join(", "));return{filter:(c,g,b)=>l.value.evaluate(c,g,{},b),needGeometry:Gc(f),getGlobalStateRefs:()=>Df(l.value.expression)}}function Nf(f,l){return f<l?-1:f>l?1:0}function Gc(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(Gc(f[l]))return!0;return!1}function Al(f){if(!f)return!0;const l=f[0];return f.length<=1?l!=="any":l==="=="?yd(f[1],f[2],"=="):l==="!="?bh(yd(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?yd(f[1],f[2],l):l==="any"?(c=f.slice(1),["any"].concat(c.map(Al))):l==="all"?["all"].concat(f.slice(1).map(Al)):l==="none"?["all"].concat(f.slice(1).map(Al).map(bh)):l==="in"?Bp(f[1],f.slice(2)):l==="!in"?bh(Bp(f[1],f.slice(2))):l==="has"?vd(f[1]):l!=="!has"||bh(vd(f[1]));var c}function yd(f,l,c){switch(f){case"$type":return[`filter-type-${c}`,l];case"$id":return[`filter-id-${c}`,l];default:return[`filter-${c}`,f,l]}}function Bp(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((c=>typeof c!=typeof l[0]))?["filter-in-large",f,["literal",l.sort(Nf)]]:["filter-in-small",f,["literal",l]]}}function vd(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function bh(f){return["!",f]}function bd(f){const l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let b="[";for(const C of f)b+=`${bd(C)},`;return`${b}]`}const c=Object.keys(f).sort();let g="{";for(let b=0;b<c.length;b++)g+=`${JSON.stringify(c[b])}:${bd(f[c[b]])},`;return`${g}}`}function ay(f){let l="";for(const c of Sr)l+=`/${bd(f[c])}`;return l}function _d(f){const l=f.value;return l?[new je(f.key,l,"constants have been deprecated as of v8")]:[]}function Fi(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function qa(f){if(Array.isArray(f))return f.map(qa);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const l={};for(const c in f)l[c]=qa(f[c]);return l}return Fi(f)}function Va(f){const l=f.key,c=f.value,g=f.valueSpec||{},b=f.objectElementValidators||{},C=f.style,A=f.styleSpec,R=f.validateSpec;let B=[];const H=En(c);if(H!=="object")return[new je(l,c,`object expected, ${H} found`)];for(const K in c){const ie=K.split(".")[0],ve=Re(g,ie)||g["*"];let we;if(Re(b,ie))we=b[ie];else if(Re(g,ie))we=R;else if(b["*"])we=b["*"];else{if(!g["*"]){B.push(new je(l,c[K],`unknown property "${K}"`));continue}we=R}B=B.concat(we({key:(l&&`${l}.`)+K,value:c[K],valueSpec:ve,style:C,styleSpec:A,object:c,objectKey:K,validateSpec:R},c))}for(const K in g)b[K]||g[K].required&&g[K].default===void 0&&c[K]===void 0&&B.push(new je(l,c,`missing required property "${K}"`));return B}function _h(f){const l=f.value,c=f.valueSpec,g=f.style,b=f.styleSpec,C=f.key,A=f.arrayElementValidator||f.validateSpec;if(En(l)!=="array")return[new je(C,l,`array expected, ${En(l)} found`)];if(c.length&&l.length!==c.length)return[new je(C,l,`array length ${c.length} expected, length ${l.length} found`)];if(c["min-length"]&&l.length<c["min-length"])return[new je(C,l,`array length at least ${c["min-length"]} expected, length ${l.length} found`)];let R={type:c.value,values:c.values};b.$version<7&&(R.function=c.function),En(c.value)==="object"&&(R=c.value);let B=[];for(let H=0;H<l.length;H++)B=B.concat(A({array:l,arrayIndex:H,value:l[H],valueSpec:R,validateSpec:f.validateSpec,style:g,styleSpec:b,key:`${C}[${H}]`}));return B}function Hc(f){const l=f.key,c=f.value,g=f.valueSpec;let b=En(c);return b==="number"&&c!=c&&(b="NaN"),b!=="number"?[new je(l,c,`number expected, ${b} found`)]:"minimum"in g&&c<g.minimum?[new je(l,c,`${c} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&c>g.maximum?[new je(l,c,`${c} is greater than the maximum value ${g.maximum}`)]:[]}function vu(f){const l=f.valueSpec,c=Fi(f.value.type);let g,b,C,A={};const R=c!=="categorical"&&f.value.property===void 0,B=!R,H=En(f.value.stops)==="array"&&En(f.value.stops[0])==="array"&&En(f.value.stops[0][0])==="object",K=Va({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(we){if(c==="identity")return[new je(we.key,we.value,'identity function may not have a "stops" property')];let Ee=[];const Oe=we.value;return Ee=Ee.concat(_h({key:we.key,value:Oe,valueSpec:we.valueSpec,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,arrayElementValidator:ie})),En(Oe)==="array"&&Oe.length===0&&Ee.push(new je(we.key,Oe,"array must have at least one stop")),Ee},default:function(we){return we.validateSpec({key:we.key,value:we.value,valueSpec:l,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec})}}});return c==="identity"&&R&&K.push(new je(f.key,f.value,'missing required property "property"')),c==="identity"||f.value.stops||K.push(new je(f.key,f.value,'missing required property "stops"')),c==="exponential"&&f.valueSpec.expression&&!Cl(f.valueSpec)&&K.push(new je(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(B&&!Oo(f.valueSpec)?K.push(new je(f.key,f.value,"property functions not supported")):R&&!cc(f.valueSpec)&&K.push(new je(f.key,f.value,"zoom functions not supported"))),c!=="categorical"&&!H||f.value.property!==void 0||K.push(new je(f.key,f.value,'"property" property is required')),K;function ie(we){let Ee=[];const Oe=we.value,Ge=we.key;if(En(Oe)!=="array")return[new je(Ge,Oe,`array expected, ${En(Oe)} found`)];if(Oe.length!==2)return[new je(Ge,Oe,`array length 2 expected, length ${Oe.length} found`)];if(H){if(En(Oe[0])!=="object")return[new je(Ge,Oe,`object expected, ${En(Oe[0])} found`)];if(Oe[0].zoom===void 0)return[new je(Ge,Oe,"object stop key must have zoom")];if(Oe[0].value===void 0)return[new je(Ge,Oe,"object stop key must have value")];if(C&&C>Fi(Oe[0].zoom))return[new je(Ge,Oe[0].zoom,"stop zoom values must appear in ascending order")];Fi(Oe[0].zoom)!==C&&(C=Fi(Oe[0].zoom),b=void 0,A={}),Ee=Ee.concat(Va({key:`${Ge}[0]`,value:Oe[0],valueSpec:{zoom:{}},validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,objectElementValidators:{zoom:Hc,value:ve}}))}else Ee=Ee.concat(ve({key:`${Ge}[0]`,value:Oe[0],validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec},Oe));return qc(qa(Oe[1]))?Ee.concat([new je(`${Ge}[1]`,Oe[1],"expressions are not allowed in function stops.")]):Ee.concat(we.validateSpec({key:`${Ge}[1]`,value:Oe[1],valueSpec:l,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec}))}function ve(we,Ee){const Oe=En(we.value),Ge=Fi(we.value),at=we.value!==null?we.value:Ee;if(g){if(Oe!==g)return[new je(we.key,at,`${Oe} stop domain type must match previous stop domain type ${g}`)]}else g=Oe;if(Oe!=="number"&&Oe!=="string"&&Oe!=="boolean")return[new je(we.key,at,"stop domain value must be a number, string, or boolean")];if(Oe!=="number"&&c!=="categorical"){let Nt=`number expected, ${Oe} found`;return Oo(l)&&c===void 0&&(Nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(we.key,at,Nt)]}return c!=="categorical"||Oe!=="number"||isFinite(Ge)&&Math.floor(Ge)===Ge?c!=="categorical"&&Oe==="number"&&b!==void 0&&Ge<b?[new je(we.key,at,"stop domain values must appear in ascending order")]:(b=Ge,c==="categorical"&&Ge in A?[new je(we.key,at,"stop domain values must be unique")]:(A[Ge]=!0,[])):[new je(we.key,at,`integer expected, found ${Ge}`)]}}function co(f){const l=(f.expressionContext==="property"?Fp:Wu)(qa(f.value),f.valueSpec);if(l.result==="error")return l.value.map((g=>new je(`${f.key}${g.key}`,f.value,g.message)));const c=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!c.outputDefined())return[new je(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!fs(c))return[new je(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!fs(c))return[new je(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!El(c,["zoom","feature-state"]))return[new je(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!cs(c))return[new je(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xh(f){const l=f.key,c=f.value,g=En(c);return g!=="string"?[new je(l,c,`color expected, ${g} found`)]:fr.parse(String(c))?[]:[new je(l,c,`color expected, "${c}" found`)]}function bu(f){const l=f.key,c=f.value,g=f.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(Fi(c))===-1&&b.push(new je(l,c,`expected one of [${g.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(g.values).indexOf(Fi(c))===-1&&b.push(new je(l,c,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(c)} found`)),b}function wh(f){return vh(qa(f.value))?co(jt({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xd(f)}function xd(f){const l=f.value,c=f.key;if(En(l)!=="array")return[new je(c,l,`array expected, ${En(l)} found`)];const g=f.styleSpec;let b,C=[];if(l.length<1)return[new je(c,l,"filter array must have at least 1 element")];switch(C=C.concat(bu({key:`${c}[0]`,value:l[0],valueSpec:g.filter_operator,style:f.style,styleSpec:f.styleSpec})),Fi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Fi(l[1])==="$type"&&C.push(new je(c,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new je(c,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=En(l[1]),b!=="string"&&C.push(new je(`${c}[1]`,l[1],`string expected, ${b} found`)));for(let A=2;A<l.length;A++)b=En(l[A]),Fi(l[1])==="$type"?C=C.concat(bu({key:`${c}[${A}]`,value:l[A],valueSpec:g.geometry_type,style:f.style,styleSpec:f.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&C.push(new je(`${c}[${A}]`,l[A],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let A=1;A<l.length;A++)C=C.concat(xd({key:`${c}[${A}]`,value:l[A],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":b=En(l[1]),l.length!==2?C.push(new je(c,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&C.push(new je(`${c}[1]`,l[1],`string expected, ${b} found`))}return C}function wd(f,l){const c=f.key,g=f.validateSpec,b=f.style,C=f.styleSpec,A=f.value,R=f.objectKey,B=C[`${l}_${f.layerType}`];if(!B)return[];const H=R.match(/^(.*)-transition$/);if(l==="paint"&&H&&B[H[1]]&&B[H[1]].transition)return g({key:c,value:A,valueSpec:C.transition,style:b,styleSpec:C});const K=f.valueSpec||B[R];if(!K)return[new je(c,A,`unknown property "${R}"`)];let ie;if(En(A)==="string"&&Oo(K)&&!K.tokens&&(ie=/^{([^}]+)}$/.exec(A)))return[new je(c,A,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const ve=[];return f.layerType==="symbol"&&(R==="text-field"&&b&&!b.glyphs&&ve.push(new je(c,A,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&La(qa(A))&&Fi(A.type)==="identity"&&ve.push(new je(c,A,'"text-font" does not support identity functions'))),ve.concat(g({key:f.key,value:A,valueSpec:K,style:b,styleSpec:C,expressionContext:"property",propertyType:l,propertyKey:R}))}function Sd(f){return wd(f,"paint")}function jp(f){return wd(f,"layout")}function Ff(f){let l=[];const c=f.value,g=f.key,b=f.style,C=f.styleSpec;if(En(c)!=="object")return[new je(g,c,`object expected, ${En(c)} found`)];c.type||c.ref||l.push(new je(g,c,'either "type" or "ref" is required'));let A=Fi(c.type);const R=Fi(c.ref);if(c.id){const B=Fi(c.id);for(let H=0;H<f.arrayIndex;H++){const K=b.layers[H];Fi(K.id)===B&&l.push(new je(g,c.id,`duplicate layer id "${c.id}", previously used at line ${K.id.__line__}`))}}if("ref"in c){let B;["type","source","source-layer","filter","layout"].forEach((H=>{H in c&&l.push(new je(g,c[H],`"${H}" is prohibited for ref layers`))})),b.layers.forEach((H=>{Fi(H.id)===R&&(B=H)})),B?B.ref?l.push(new je(g,c.ref,"ref cannot reference another ref layer")):A=Fi(B.type):l.push(new je(g,c.ref,`ref layer "${R}" not found`))}else if(A!=="background")if(c.source){const B=b.sources&&b.sources[c.source],H=B&&Fi(B.type);B?H==="vector"&&A==="raster"?l.push(new je(g,c.source,`layer "${c.id}" requires a raster source`)):H!=="raster-dem"&&A==="hillshade"||H!=="raster-dem"&&A==="color-relief"?l.push(new je(g,c.source,`layer "${c.id}" requires a raster-dem source`)):H==="raster"&&A!=="raster"?l.push(new je(g,c.source,`layer "${c.id}" requires a vector source`)):H!=="vector"||c["source-layer"]?H==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?l.push(new je(g,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!c.paint||!c.paint["line-gradient"]||H==="geojson"&&B.lineMetrics||l.push(new je(g,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new je(g,c,`layer "${c.id}" must specify a "source-layer"`)):l.push(new je(g,c.source,`source "${c.source}" not found`))}else l.push(new je(g,c,'missing required property "source"'));return l=l.concat(Va({key:g,value:c,valueSpec:C.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${g}.type`,value:c.type,valueSpec:C.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:c,objectKey:"type"}),filter:wh,layout:B=>Va({layer:c,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":H=>jp(jt({layerType:A},H))}}),paint:B=>Va({layer:c,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":H=>Sd(jt({layerType:A},H))}})}})),l}function Ss(f){const l=f.value,c=f.key,g=En(l);return g!=="string"?[new je(c,l,`string expected, ${g} found`)]:[]}const Wl={promoteId:function({key:f,value:l}){if(En(l)==="string")return Ss({key:f,value:l});{const c=[];for(const g in l)c.push(...Ss({key:`${f}.${g}`,value:l[g]}));return c}}};function Xo(f){const l=f.value,c=f.key,g=f.styleSpec,b=f.style,C=f.validateSpec;if(!l.type)return[new je(c,l,'"type" is required')];const A=Fi(l.type);let R;switch(A){case"vector":case"raster":return R=Va({key:c,value:l,valueSpec:g[`source_${A.replace("-","_")}`],style:f.style,styleSpec:g,objectElementValidators:Wl,validateSpec:C}),R;case"raster-dem":return R=(function(B){var H;const K=(H=B.sourceName)!==null&&H!==void 0?H:"",ie=B.value,ve=B.styleSpec,we=ve.source_raster_dem,Ee=B.style;let Oe=[];const Ge=En(ie);if(ie===void 0)return Oe;if(Ge!=="object")return Oe.push(new je("source_raster_dem",ie,`object expected, ${Ge} found`)),Oe;const at=Fi(ie.encoding)==="custom",Nt=["redFactor","greenFactor","blueFactor","baseShift"],vt=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const Et in ie)!at&&Nt.includes(Et)?Oe.push(new je(Et,ie[Et],`In "${K}": "${Et}" is only valid when "encoding" is set to "custom". ${vt} encoding found`)):we[Et]?Oe=Oe.concat(B.validateSpec({key:Et,value:ie[Et],valueSpec:we[Et],validateSpec:B.validateSpec,style:Ee,styleSpec:ve})):Oe.push(new je(Et,ie[Et],`unknown property "${Et}"`));return Oe})({sourceName:c,value:l,style:f.style,styleSpec:g,validateSpec:C}),R;case"geojson":if(R=Va({key:c,value:l,valueSpec:g.source_geojson,style:b,styleSpec:g,validateSpec:C,objectElementValidators:Wl}),l.cluster)for(const B in l.clusterProperties){const[H,K]=l.clusterProperties[B],ie=typeof H=="string"?[H,["accumulated"],["get",B]]:H;R.push(...co({key:`${c}.${B}.map`,value:K,expressionContext:"cluster-map"})),R.push(...co({key:`${c}.${B}.reduce`,value:ie,expressionContext:"cluster-reduce"}))}return R;case"video":return Va({key:c,value:l,valueSpec:g.source_video,style:b,validateSpec:C,styleSpec:g});case"image":return Va({key:c,value:l,valueSpec:g.source_image,style:b,validateSpec:C,styleSpec:g});case"canvas":return[new je(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bu({key:`${c}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Wc(f){const l=f.value,c=f.styleSpec,g=c.light,b=f.style;let C=[];const A=En(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new je("light",l,`object expected, ${A} found`)]),C;for(const R in l){const B=R.match(/^(.*)-transition$/);C=C.concat(B&&g[B[1]]&&g[B[1]].transition?f.validateSpec({key:R,value:l[R],valueSpec:c.transition,validateSpec:f.validateSpec,style:b,styleSpec:c}):g[R]?f.validateSpec({key:R,value:l[R],valueSpec:g[R],validateSpec:f.validateSpec,style:b,styleSpec:c}):[new je(R,l[R],`unknown property "${R}"`)])}return C}function Sh(f){const l=f.value,c=f.styleSpec,g=c.sky,b=f.style,C=En(l);if(l===void 0)return[];if(C!=="object")return[new je("sky",l,`object expected, ${C} found`)];let A=[];for(const R in l)A=A.concat(g[R]?f.validateSpec({key:R,value:l[R],valueSpec:g[R],style:b,styleSpec:c}):[new je(R,l[R],`unknown property "${R}"`)]);return A}function zp(f){const l=f.value,c=f.styleSpec,g=c.terrain,b=f.style;let C=[];const A=En(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new je("terrain",l,`object expected, ${A} found`)]),C;for(const R in l)C=C.concat(g[R]?f.validateSpec({key:R,value:l[R],valueSpec:g[R],validateSpec:f.validateSpec,style:b,styleSpec:c}):[new je(R,l[R],`unknown property "${R}"`)]);return C}function $p(f){let l=[];const c=f.value,g=f.key;if(Array.isArray(c)){const b=[],C=[];for(const A in c)c[A].id&&b.includes(c[A].id)&&l.push(new je(g,c,`all the sprites' ids must be unique, but ${c[A].id} is duplicated`)),b.push(c[A].id),c[A].url&&C.includes(c[A].url)&&l.push(new je(g,c,`all the sprites' URLs must be unique, but ${c[A].url} is duplicated`)),C.push(c[A].url),l=l.concat(Va({key:`${g}[${A}]`,value:c[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Ss({key:g,value:c})}function Zc(f){return l=f.value,l&&l.constructor===Object?[]:[new je(f.key,f.value,`object expected, ${En(f.value)} found`)];var l}const Ed={"*":()=>[],array:_h,boolean:function(f){const l=f.value,c=f.key,g=En(l);return g!=="boolean"?[new je(c,l,`boolean expected, ${g} found`)]:[]},number:Hc,color:xh,constants:_d,enum:bu,filter:wh,function:vu,layer:Ff,object:Va,source:Xo,light:Wc,sky:Sh,terrain:zp,projection:function(f){const l=f.value,c=f.styleSpec,g=c.projection,b=f.style,C=En(l);if(l===void 0)return[];if(C!=="object")return[new je("projection",l,`object expected, ${C} found`)];let A=[];for(const R in l)A=A.concat(g[R]?f.validateSpec({key:R,value:l[R],valueSpec:g[R],style:b,styleSpec:c}):[new je(R,l[R],`unknown property "${R}"`)]);return A},projectionDefinition:function(f){const l=f.key;let c=f.value;c=c instanceof String?c.valueOf():c;const g=En(c);return g!=="array"||(function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"})(c)||(function(b){return!!["interpolate","step","literal"].includes(b[0])})(c)?["array","string"].includes(g)?[]:[new je(l,c,`projection expected, invalid type "${g}" found`)]:[new je(l,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:Ss,formatted:function(f){return Ss(f).length===0?[]:co(f)},resolvedImage:function(f){return Ss(f).length===0?[]:co(f)},padding:function(f){const l=f.key,c=f.value;if(En(c)==="array"){if(c.length<1||c.length>4)return[new je(l,c,`padding requires 1 to 4 values; ${c.length} values found`)];const g={type:"number"};let b=[];for(let C=0;C<c.length;C++)b=b.concat(f.validateSpec({key:`${l}[${C}]`,value:c[C],validateSpec:f.validateSpec,valueSpec:g}));return b}return Hc({key:l,value:c,valueSpec:{}})},numberArray:function(f){const l=f.key,c=f.value;if(En(c)==="array"){const g={type:"number"};if(c.length<1)return[new je(l,c,"array length at least 1 expected, length 0 found")];let b=[];for(let C=0;C<c.length;C++)b=b.concat(f.validateSpec({key:`${l}[${C}]`,value:c[C],validateSpec:f.validateSpec,valueSpec:g}));return b}return Hc({key:l,value:c,valueSpec:{}})},colorArray:function(f){const l=f.key,c=f.value;if(En(c)==="array"){if(c.length<1)return[new je(l,c,"array length at least 1 expected, length 0 found")];let g=[];for(let b=0;b<c.length;b++)g=g.concat(xh({key:`${l}[${b}]`,value:c[b]}));return g}return xh({key:l,value:c})},variableAnchorOffsetCollection:function(f){const l=f.key,c=f.value,g=En(c),b=f.styleSpec;if(g!=="array"||c.length<1||c.length%2!=0)return[new je(l,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let A=0;A<c.length;A+=2)C=C.concat(bu({key:`${l}[${A}]`,value:c[A],valueSpec:b.layout_symbol["text-anchor"]})),C=C.concat(_h({key:`${l}[${A+1}]`,value:c[A+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:b}));return C},sprite:$p,state:Zc};function Kc(f){const l=f.value,c=f.valueSpec,g=f.styleSpec;return f.validateSpec=Kc,c.expression&&La(Fi(l))?vu(f):c.expression&&qc(qa(l))?co(f):c.type&&Ed[c.type]?Ed[c.type](f):Va(jt({},f,{valueSpec:c.type?g[c.type]:c}))}function Up(f){const l=f.value,c=f.key,g=Ss(f);return g.length||(l.indexOf("{fontstack}")===-1&&g.push(new je(c,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&g.push(new je(c,l,'"glyphs" url must include a "{range}" token'))),g}function hs(f,l=bt){let c=[];return c=c.concat(Kc({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:Kc,objectElementValidators:{glyphs:Up,"*":()=>[]}})),f.constants&&(c=c.concat(_d({key:"constants",value:f.constants}))),Xc(c)}function Es(f){return function(l){return f({...l,validateSpec:Kc})}}function Xc(f){return[].concat(f).sort(((l,c)=>l.line-c.line))}function Pl(f){return function(...l){return Xc(f.apply(this,l))}}hs.source=Pl(Es(Xo)),hs.sprite=Pl(Es($p)),hs.glyphs=Pl(Es(Up)),hs.light=Pl(Es(Wc)),hs.sky=Pl(Es(Sh)),hs.terrain=Pl(Es(zp)),hs.state=Pl(Es(Zc)),hs.layer=Pl(Es(Ff)),hs.filter=Pl(Es(wh)),hs.paintProperty=Pl(Es(Sd)),hs.layoutProperty=Pl(Es(jp));const dc=hs,k=dc.light,$=dc.sky,ee=dc.paintProperty,fe=dc.layoutProperty;function Pe(f,l){let c=!1;if(l&&l.length)for(const g of l)f.fire(new ir(new Error(g.message))),c=!0;return c}class De{constructor(l,c,g){const b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const A=new Int32Array(this.arrayBuffer);l=A[0],this.d=(c=A[1])+2*(g=A[2]);for(let B=0;B<this.d*this.d;B++){const H=A[3+B],K=A[3+B+1];b.push(H===K?null:A.subarray(H,K))}const R=A[3+b.length+1];this.keys=A.subarray(A[3+b.length],R),this.bboxes=A.subarray(R),this.insert=this._insertReadonly}else{this.d=c+2*g;for(let A=0;A<this.d*this.d;A++)b.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=l,this.padding=g,this.scale=c/l,this.uid=0;const C=g/c*l;this.min=-C,this.max=l+C}insert(l,c,g,b,C){this._forEachCell(c,g,b,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,c,g,b,C,A){this.cells[C].push(A)}query(l,c,g,b,C){const A=this.min,R=this.max;if(l<=A&&c<=A&&R<=g&&R<=b&&!C)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(l,c,g,b,this._queryCell,B,{},C),B}}_queryCell(l,c,g,b,C,A,R,B){const H=this.cells[C];if(H!==null){const K=this.keys,ie=this.bboxes;for(let ve=0;ve<H.length;ve++){const we=H[ve];if(R[we]===void 0){const Ee=4*we;(B?B(ie[Ee+0],ie[Ee+1],ie[Ee+2],ie[Ee+3]):l<=ie[Ee+2]&&c<=ie[Ee+3]&&g>=ie[Ee+0]&&b>=ie[Ee+1])?(R[we]=!0,A.push(K[we])):R[we]=!1}}}}_forEachCell(l,c,g,b,C,A,R,B){const H=this._convertToCellCoord(l),K=this._convertToCellCoord(c),ie=this._convertToCellCoord(g),ve=this._convertToCellCoord(b);for(let we=H;we<=ie;we++)for(let Ee=K;Ee<=ve;Ee++){const Oe=this.d*Ee+we;if((!B||B(this._convertFromCellCoord(we),this._convertFromCellCoord(Ee),this._convertFromCellCoord(we+1),this._convertFromCellCoord(Ee+1)))&&C.call(this,l,c,g,b,Oe,A,R,B))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,c=3+this.cells.length+1+1;let g=0;for(let A=0;A<this.cells.length;A++)g+=this.cells[A].length;const b=new Int32Array(c+g+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let C=c;for(let A=0;A<l.length;A++){const R=l[A];b[3+A]=C,b.set(R,C),C+=R.length}return b[3+l.length]=C,b.set(this.keys,C),C+=this.keys.length,b[3+l.length+1]=C,b.set(this.bboxes,C),C+=this.bboxes.length,b.buffer}static serialize(l,c){const g=l.toArrayBuffer();return c&&c.push(g),{buffer:g}}static deserialize(l){return new De(l.buffer)}}const Ne={};function Te(f,l,c={}){if(Ne[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),Ne[f]={klass:l,omit:c.omit||[],shallow:c.shallow||[]}}Te("Object",Object),Te("Set",Set),Te("TransferableGridIndex",De),Te("Color",fr),Te("Error",Error),Te("AJAXError",Ue),Te("ResolvedImage",aa),Te("StylePropertyFunction",Vc),Te("StyleExpression",kf,{omit:["_evaluator"]}),Te("ZoomDependentExpression",md),Te("ZoomConstantExpression",fc),Te("CompoundExpression",ri,{omit:["_evaluate"]});for(const f in gu)gu[f]._classRegistryKey||Te(`Expression_${f}`,gu[f]);function Je(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function st(f){return f.$name||f.constructor._classRegistryKey}function kt(f){return!(function(l){if(l===null||typeof l!="object")return!1;const c=st(l);return!(!c||c==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Je(f)||dr(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function tr(f,l){if(kt(f))return(Je(f)||dr(f))&&l&&l.push(f),ArrayBuffer.isView(f)&&l&&l.push(f.buffer),f instanceof ImageData&&l&&l.push(f.data.buffer),f;if(Array.isArray(f)){const C=[];for(const A of f)C.push(tr(A,l));return C}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const c=st(f);if(!c)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Ne[c])throw new Error(`${c} is not registered.`);const{klass:g}=Ne[c],b=g.serialize?g.serialize(f,l):{};if(g.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in f){if(!f.hasOwnProperty(C)||Ne[c].omit.indexOf(C)>=0)continue;const A=f[C];b[C]=Ne[c].shallow.indexOf(C)>=0?A:tr(A,l)}f instanceof Error&&(b.message=f.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(b.$name=c),b}function ot(f){if(kt(f))return f;if(Array.isArray(f))return f.map(ot);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const l=st(f)||"Object";if(!Ne[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:c}=Ne[l];if(!c)throw new Error(`can't deserialize unregistered class ${l}`);if(c.deserialize)return c.deserialize(f);const g=Object.create(c.prototype);for(const b of Object.keys(f)){if(b==="$name")continue;const C=f[b];g[b]=Ne[l].shallow.indexOf(b)>=0?C:ot(C)}return g}class zt{constructor(){this.first=!0}update(l,c){const g=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=c),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=g,!0))}}const Rt={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function cr(f){for(const l of f)if(_n(l.charCodeAt(0)))return!0;return!1}function rr(f){for(const l of f)if(!kr(l.charCodeAt(0)))return!1;return!0}function hr(f){const l=f.map((c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}})).filter((c=>c));return new RegExp(l.join("|"),"u")}const br=hr(["Arab","Dupl","Mong","Ougr","Syrc"]);function kr(f){return!br.test(String.fromCodePoint(f))}const Cr=hr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function _n(f){return!(f!==746&&f!==747&&(f<4352||!(Rt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Rt["CJK Compatibility"](f)||Rt["CJK Strokes"](f)||!(!Rt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Rt["Enclosed CJK Letters and Months"](f)||Rt["Ideographic Description Characters"](f)||Rt.Kanbun(f)||Rt.Katakana(f)&&f!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Rt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Rt["Vertical Forms"](f)||Rt["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||Cr.test(String.fromCodePoint(f)))))}function cn(f){return!(_n(f)||(function(l){return!!(Rt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Rt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Rt["Letterlike Symbols"](l)||Rt["Number Forms"](l)||Rt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Rt["Control Pictures"](l)&&l!==9251||Rt["Optical Character Recognition"](l)||Rt["Enclosed Alphanumerics"](l)||Rt["Geometric Shapes"](l)||Rt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Rt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Rt["CJK Symbols and Punctuation"](l)||Rt.Katakana(l)||Rt["Private Use Area"](l)||Rt["CJK Compatibility Forms"](l)||Rt["Small Form Variants"](l)||Rt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)})(f))}const Qn=hr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function mn(f){return Qn.test(String.fromCodePoint(f))}function di(f,l){return!(!l&&mn(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Rt.Khmer(f))}function Ga(f){for(const l of f)if(mn(l.charCodeAt(0)))return!0;return!1}const Nn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Nn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,l){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const c=f.pluginURL,g=new Promise((C=>{this.loadScriptResolve=C}));l(c);const b=new Promise((C=>setTimeout((()=>C()),this.TIMEOUT)));if(yield Promise.race([g,b]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:c};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)}))}};class Wr{constructor(l,c){this.zoom=l,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new zt,this.transition=c.transition||{},this.globalState=c.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zt,this.transition={},this.globalState={})}isSupportedScript(l){return(function(c,g){for(const b of c)if(!di(b.charCodeAt(0),g))return!1;return!0})(l,Nn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,c=l-Math.floor(l),g=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*c}}}class Xr{constructor(l,c){this.property=l,this.value=c,this.expression=(function(g,b){if(La(g))return new Vc(g,b);if(qc(g)){const C=Fp(g,b);if(C.result==="error")throw new Error(C.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return C.value}{let C=g;return b.type==="color"&&typeof g=="string"?C=fr.parse(g):b.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?b.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?b.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?C=Gn.parse(g):b.type==="projectionDefinition"&&typeof g=="string"&&(C=ja.parse(g)):C=Kr.parse(g):C=ur.parse(g):C=Yr.parse(g),{globalStateRefs:new Set,kind:"constant",evaluate:()=>C}}})(c===void 0?l.specification.default:c,l.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,c,g){return this.property.possiblyEvaluate(this,l,c,g)}setGlobalState(l){this.expression.evaluate=(c,g,b,C,A,R)=>(c.globalState=l,this._evaluate.call(this.expression,c,g,b,C,A,R))}}class _a{constructor(l){this.property=l,this.value=new Xr(l,void 0)}transitioned(l,c){return new pi(this.property,this.value,c,At({},l.transition,this.transition),l.now)}untransitioned(){return new pi(this.property,this.value,null,{},0)}}class Wn{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return Tt(this._values[l].value.value)}setValue(l,c){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new _a(this._values[l].property)),this._values[l].value=new Xr(this._values[l].property,c===null?void 0:Tt(c))}getTransition(l){return Tt(this._values[l].transition)}setTransition(l,c){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new _a(this._values[l].property)),this._values[l].transition=Tt(c)||void 0}serialize(){const l={};for(const c of Object.keys(this._values)){const g=this.getValue(c);g!==void 0&&(l[c]=g);const b=this.getTransition(c);b!==void 0&&(l[`${c}-transition`]=b)}return l}transitioned(l,c){const g=new Ki(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].transitioned(l,c._values[b]);return g}untransitioned(){const l=new Ki(this._properties);for(const c of Object.keys(this._values))l._values[c]=this._values[c].untransitioned();return l}}class pi{constructor(l,c,g,b,C){this.property=l,this.value=c,this.begin=C+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=g)}possiblyEvaluate(l,c,g){const b=l.now||0,C=this.value.possiblyEvaluate(l,c,g),A=this.prior;if(A){if(b>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(b<this.begin)return A.possiblyEvaluate(l,c,g);{const R=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(l,c,g),C,_e(R))}}return C}}class Ki{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,c,g){const b=new oa(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,c,g);return b}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class fo{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState={}}hasValue(l){return this._values[l].value!==void 0}getValue(l){return Tt(this._values[l].value)}setValue(l,c){this._values[l]=new Xr(this._values[l].property,c===null?void 0:Tt(c)),this._values[l].setGlobalState(this._globalState)}serialize(){const l={};for(const c of Object.keys(this._values)){const g=this.getValue(c);g!==void 0&&(l[c]=g)}return l}possiblyEvaluate(l,c,g){const b=new oa(this._properties);for(const C of Object.keys(this._values))b._values[C]=this._values[C].possiblyEvaluate(l,c,g);return b}setGlobalState(l){this._globalState=l;for(const c of Object.values(this._values))c.setGlobalState(l)}}class da{constructor(l,c,g){this.property=l,this.value=c,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,c,g,b){return this.property.evaluate(this.value,this.parameters,l,c,g,b)}}class oa{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Jr{constructor(l){this.specification=l}possiblyEvaluate(l,c){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(c)}interpolate(l,c,g){const b=On[this.specification.type];return b?b(l,c,g):l}}class on{constructor(l,c){this.specification=l,this.overrides=c}possiblyEvaluate(l,c,g,b){return new da(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(c,null,{},g,b)}:l.expression,c)}interpolate(l,c,g){if(l.value.kind!=="constant"||c.value.kind!=="constant")return l;if(l.value.value===void 0||c.value.value===void 0)return new da(this,{kind:"constant",value:void 0},l.parameters);const b=On[this.specification.type];if(b){const C=b(l.value.value,c.value.value,g);return new da(this,{kind:"constant",value:C},l.parameters)}return l}evaluate(l,c,g,b,C,A){return l.kind==="constant"?l.value:l.evaluate(c,g,b,C,A)}}class Ea extends on{possiblyEvaluate(l,c,g,b){if(l.value===void 0)return new da(this,{kind:"constant",value:void 0},c);if(l.expression.kind==="constant"){const C=l.expression.evaluate(c,null,{},g,b),A=l.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,R=this._calculate(A,A,A,c);return new da(this,{kind:"constant",value:R},c)}if(l.expression.kind==="camera"){const C=this._calculate(l.expression.evaluate({zoom:c.zoom-1}),l.expression.evaluate({zoom:c.zoom}),l.expression.evaluate({zoom:c.zoom+1}),c);return new da(this,{kind:"constant",value:C},c)}return new da(this,l.expression,c)}evaluate(l,c,g,b,C,A){if(l.kind==="source"){const R=l.evaluate(c,g,b,C,A);return this._calculate(R,R,R,c)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(c.zoom)-1},g,b),l.evaluate({zoom:Math.floor(c.zoom)},g,b),l.evaluate({zoom:Math.floor(c.zoom)+1},g,b),c):l.value}_calculate(l,c,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:c}:{from:g,to:c}}interpolate(l){return l}}class ii{constructor(l){this.specification=l}possiblyEvaluate(l,c,g,b){if(l.value!==void 0){if(l.expression.kind==="constant"){const C=l.expression.evaluate(c,null,{},g,b);return this._calculate(C,C,C,c)}return this._calculate(l.expression.evaluate(new Wr(Math.floor(c.zoom-1),c)),l.expression.evaluate(new Wr(Math.floor(c.zoom),c)),l.expression.evaluate(new Wr(Math.floor(c.zoom+1),c)),c)}}_calculate(l,c,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:c}:{from:g,to:c}}interpolate(l){return l}}class Ci{constructor(l){this.specification=l}possiblyEvaluate(l,c,g,b){return!!l.expression.evaluate(c,null,{},g,b)}interpolate(){return!1}}class mi{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in l){const g=l[c];g.specification.overridable&&this.overridableProperties.push(c);const b=this.defaultPropertyValues[c]=new Xr(g,void 0),C=this.defaultTransitionablePropertyValues[c]=new _a(g);this.defaultTransitioningPropertyValues[c]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=b.possiblyEvaluate({})}}}Te("DataDrivenProperty",on),Te("DataConstantProperty",Jr),Te("CrossFadedDataDrivenProperty",Ea),Te("CrossFadedProperty",ii),Te("ColorRampProperty",Ci);const Bi="-transition";class Vi extends Pr{constructor(l,c){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._globalState={},l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=hc(l.filter)),c.layout&&(this._unevaluatedLayout=new fo(c.layout)),c.paint)){this._transitionablePaint=new Wn(c.paint);for(const g in l.paint)this.setPaintProperty(g,l.paint[g],{validate:!1});for(const g in l.layout)this.setLayoutProperty(g,l.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oa(c.paint)}}setFilter(l){this.filter=l,this._featureFilter=hc(l)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const g=this._unevaluatedLayout._values[c];for(const b of g.getGlobalStateRefs())l.add(b)}for(const c of this._featureFilter.getGlobalStateRefs())l.add(c);return l}getPaintAffectingGlobalStateRefs(){var l;const c=new globalThis.Map;if(this._transitionablePaint)for(const g in this._transitionablePaint._values){const b=this._transitionablePaint._values[g].value;for(const C of b.getGlobalStateRefs()){const A=(l=c.get(C))!==null&&l!==void 0?l:[];A.push({name:g,value:b.value}),c.set(C,A)}}return c}setLayoutProperty(l,c,g={}){c!=null&&this._validate(fe,`layers.${this.id}.layout.${l}`,l,c,g)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,c):this.visibility=c)}getPaintProperty(l){return l.endsWith(Bi)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,c,g={}){if(c!=null&&this._validate(ee,`layers.${this.id}.paint.${l}`,l,c,g))return!1;if(l.endsWith(Bi))return this._transitionablePaint.setTransition(l.slice(0,-11),c||void 0),!1;{const b=this._transitionablePaint._values[l],C=b.property.specification["property-type"]==="cross-faded-data-driven",A=b.value.isDataDriven(),R=b.value;this._transitionablePaint.setValue(l,c),this._handleSpecialPaintPropertyUpdate(l);const B=this._transitionablePaint._values[l].value;return B.isDataDriven()||A||C||this._handleOverridablePaintPropertyUpdate(l,R,B)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,c,g){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,c){l.globalState=this._globalState,l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,c)}setGlobalState(l){this._globalState=l,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(l)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Lt(l,((c,g)=>!(c===void 0||g==="layout"&&!Object.keys(c).length||g==="paint"&&!Object.keys(c).length)))}_validate(l,c,g,b,C={}){return(!C||C.validate!==!1)&&Pe(this,l.call(dc,{key:c,layerType:this.type,objectKey:g,value:b,styleSpec:bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const c=this.paint.get(l);if(c instanceof da&&Oo(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const Tl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sa{constructor(l,c){this._structArray=l,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ei{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,c){return l._trim(),c&&(l.isTransferred=!0,c.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const c=Object.create(this.prototype);return c.arrayBuffer=l.arrayBuffer,c.length=l.length,c.capacity=l.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Bn(f,l=1){let c=0,g=0;return{members:f.map((b=>{const C=Tl[b.type].BYTES_PER_ELEMENT,A=c=Ca(c,Math.max(l,C)),R=b.components||1;return g=Math.max(g,C),c+=C*R,{name:b.name,type:b.type,components:R,offset:A}})),size:Ca(c,Math.max(g,l)),alignment:l}}function Ca(f,l){return Math.ceil(f/l)*l}class ho extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c){const g=this.length;return this.resize(g+1),this.emplace(g,l,c)}emplace(l,c,g){const b=2*l;return this.int16[b+0]=c,this.int16[b+1]=g,l}}ho.prototype.bytesPerElement=4,Te("StructArrayLayout2i4",ho);class Ha extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g){const b=this.length;return this.resize(b+1),this.emplace(b,l,c,g)}emplace(l,c,g,b){const C=3*l;return this.int16[C+0]=c,this.int16[C+1]=g,this.int16[C+2]=b,l}}Ha.prototype.bytesPerElement=6,Te("StructArrayLayout3i6",Ha);class ds extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,c,g,b)}emplace(l,c,g,b,C){const A=4*l;return this.int16[A+0]=c,this.int16[A+1]=g,this.int16[A+2]=b,this.int16[A+3]=C,l}}ds.prototype.bytesPerElement=8,Te("StructArrayLayout4i8",ds);class po extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,c,g,b,C,A)}emplace(l,c,g,b,C,A,R){const B=6*l;return this.int16[B+0]=c,this.int16[B+1]=g,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=R,l}}po.prototype.bytesPerElement=12,Te("StructArrayLayout2i4i12",po);class Wa extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,c,g,b,C,A)}emplace(l,c,g,b,C,A,R){const B=4*l,H=8*l;return this.int16[B+0]=c,this.int16[B+1]=g,this.uint8[H+4]=b,this.uint8[H+5]=C,this.uint8[H+6]=A,this.uint8[H+7]=R,l}}Wa.prototype.bytesPerElement=8,Te("StructArrayLayout2i4ub8",Wa);class ko extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c){const g=this.length;return this.resize(g+1),this.emplace(g,l,c)}emplace(l,c,g){const b=2*l;return this.float32[b+0]=c,this.float32[b+1]=g,l}}ko.prototype.bytesPerElement=8,Te("StructArrayLayout2f8",ko);class Ui extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A,R,B,H,K){const ie=this.length;return this.resize(ie+1),this.emplace(ie,l,c,g,b,C,A,R,B,H,K)}emplace(l,c,g,b,C,A,R,B,H,K,ie){const ve=10*l;return this.uint16[ve+0]=c,this.uint16[ve+1]=g,this.uint16[ve+2]=b,this.uint16[ve+3]=C,this.uint16[ve+4]=A,this.uint16[ve+5]=R,this.uint16[ve+6]=B,this.uint16[ve+7]=H,this.uint16[ve+8]=K,this.uint16[ve+9]=ie,l}}Ui.prototype.bytesPerElement=20,Te("StructArrayLayout10ui20",Ui);class to extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A,R,B,H,K,ie,ve){const we=this.length;return this.resize(we+1),this.emplace(we,l,c,g,b,C,A,R,B,H,K,ie,ve)}emplace(l,c,g,b,C,A,R,B,H,K,ie,ve,we){const Ee=12*l;return this.int16[Ee+0]=c,this.int16[Ee+1]=g,this.int16[Ee+2]=b,this.int16[Ee+3]=C,this.uint16[Ee+4]=A,this.uint16[Ee+5]=R,this.uint16[Ee+6]=B,this.uint16[Ee+7]=H,this.int16[Ee+8]=K,this.int16[Ee+9]=ie,this.int16[Ee+10]=ve,this.int16[Ee+11]=we,l}}to.prototype.bytesPerElement=24,Te("StructArrayLayout4i4ui4i24",to);class ks extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c,g){const b=this.length;return this.resize(b+1),this.emplace(b,l,c,g)}emplace(l,c,g,b){const C=3*l;return this.float32[C+0]=c,this.float32[C+1]=g,this.float32[C+2]=b,l}}ks.prototype.bytesPerElement=12,Te("StructArrayLayout3f12",ks);class _u extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const c=this.length;return this.resize(c+1),this.emplace(c,l)}emplace(l,c){return this.uint32[1*l+0]=c,l}}_u.prototype.bytesPerElement=4,Te("StructArrayLayout1ul4",_u);class nl extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A,R,B,H){const K=this.length;return this.resize(K+1),this.emplace(K,l,c,g,b,C,A,R,B,H)}emplace(l,c,g,b,C,A,R,B,H,K){const ie=10*l,ve=5*l;return this.int16[ie+0]=c,this.int16[ie+1]=g,this.int16[ie+2]=b,this.int16[ie+3]=C,this.int16[ie+4]=A,this.int16[ie+5]=R,this.uint32[ve+3]=B,this.uint16[ie+8]=H,this.uint16[ie+9]=K,l}}nl.prototype.bytesPerElement=20,Te("StructArrayLayout6i1ul2ui20",nl);class ro extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,c,g,b,C,A)}emplace(l,c,g,b,C,A,R){const B=6*l;return this.int16[B+0]=c,this.int16[B+1]=g,this.int16[B+2]=b,this.int16[B+3]=C,this.int16[B+4]=A,this.int16[B+5]=R,l}}ro.prototype.bytesPerElement=12,Te("StructArrayLayout2i2i2i12",ro);class S extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C){const A=this.length;return this.resize(A+1),this.emplace(A,l,c,g,b,C)}emplace(l,c,g,b,C,A){const R=4*l,B=8*l;return this.float32[R+0]=c,this.float32[R+1]=g,this.float32[R+2]=b,this.int16[B+6]=C,this.int16[B+7]=A,l}}S.prototype.bytesPerElement=16,Te("StructArrayLayout2f1f2i16",S);class s extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A){const R=this.length;return this.resize(R+1),this.emplace(R,l,c,g,b,C,A)}emplace(l,c,g,b,C,A,R){const B=16*l,H=4*l,K=8*l;return this.uint8[B+0]=c,this.uint8[B+1]=g,this.float32[H+1]=b,this.float32[H+2]=C,this.int16[K+6]=A,this.int16[K+7]=R,l}}s.prototype.bytesPerElement=16,Te("StructArrayLayout2ub2f2i16",s);class h extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c,g){const b=this.length;return this.resize(b+1),this.emplace(b,l,c,g)}emplace(l,c,g,b){const C=3*l;return this.uint16[C+0]=c,this.uint16[C+1]=g,this.uint16[C+2]=b,l}}h.prototype.bytesPerElement=6,Te("StructArrayLayout3ui6",h);class y extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at)}emplace(l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt){const vt=24*l,Et=12*l,Xt=48*l;return this.int16[vt+0]=c,this.int16[vt+1]=g,this.uint16[vt+2]=b,this.uint16[vt+3]=C,this.uint32[Et+2]=A,this.uint32[Et+3]=R,this.uint32[Et+4]=B,this.uint16[vt+10]=H,this.uint16[vt+11]=K,this.uint16[vt+12]=ie,this.float32[Et+7]=ve,this.float32[Et+8]=we,this.uint8[Xt+36]=Ee,this.uint8[Xt+37]=Oe,this.uint8[Xt+38]=Ge,this.uint32[Et+10]=at,this.int16[vt+22]=Nt,l}}y.prototype.bytesPerElement=48,Te("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",y);class _ extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt,vt,Et,Xt,or,wr,Zr,Fr,Gr,gn,qr){const Hr=this.length;return this.resize(Hr+1),this.emplace(Hr,l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt,vt,Et,Xt,or,wr,Zr,Fr,Gr,gn,qr)}emplace(l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt,vt,Et,Xt,or,wr,Zr,Fr,Gr,gn,qr,Hr){const mr=32*l,Ln=16*l;return this.int16[mr+0]=c,this.int16[mr+1]=g,this.int16[mr+2]=b,this.int16[mr+3]=C,this.int16[mr+4]=A,this.int16[mr+5]=R,this.int16[mr+6]=B,this.int16[mr+7]=H,this.uint16[mr+8]=K,this.uint16[mr+9]=ie,this.uint16[mr+10]=ve,this.uint16[mr+11]=we,this.uint16[mr+12]=Ee,this.uint16[mr+13]=Oe,this.uint16[mr+14]=Ge,this.uint16[mr+15]=at,this.uint16[mr+16]=Nt,this.uint16[mr+17]=vt,this.uint16[mr+18]=Et,this.uint16[mr+19]=Xt,this.uint16[mr+20]=or,this.uint16[mr+21]=wr,this.uint16[mr+22]=Zr,this.uint32[Ln+12]=Fr,this.float32[Ln+13]=Gr,this.float32[Ln+14]=gn,this.uint16[mr+30]=qr,this.uint16[mr+31]=Hr,l}}_.prototype.bytesPerElement=64,Te("StructArrayLayout8i15ui1ul2f2ui64",_);class E extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const c=this.length;return this.resize(c+1),this.emplace(c,l)}emplace(l,c){return this.float32[1*l+0]=c,l}}E.prototype.bytesPerElement=4,Te("StructArrayLayout1f4",E);class I extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c,g){const b=this.length;return this.resize(b+1),this.emplace(b,l,c,g)}emplace(l,c,g,b){const C=3*l;return this.uint16[6*l+0]=c,this.float32[C+1]=g,this.float32[C+2]=b,l}}I.prototype.bytesPerElement=12,Te("StructArrayLayout1ui2f12",I);class j extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c,g){const b=this.length;return this.resize(b+1),this.emplace(b,l,c,g)}emplace(l,c,g,b){const C=4*l;return this.uint32[2*l+0]=c,this.uint16[C+2]=g,this.uint16[C+3]=b,l}}j.prototype.bytesPerElement=8,Te("StructArrayLayout1ul2ui8",j);class V extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,c){const g=this.length;return this.resize(g+1),this.emplace(g,l,c)}emplace(l,c,g){const b=2*l;return this.uint16[b+0]=c,this.uint16[b+1]=g,l}}V.prototype.bytesPerElement=4,Te("StructArrayLayout2ui4",V);class J extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const c=this.length;return this.resize(c+1),this.emplace(c,l)}emplace(l,c){return this.uint16[1*l+0]=c,l}}J.prototype.bytesPerElement=2,Te("StructArrayLayout1ui2",J);class re extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,c,g,b){const C=this.length;return this.resize(C+1),this.emplace(C,l,c,g,b)}emplace(l,c,g,b,C){const A=4*l;return this.float32[A+0]=c,this.float32[A+1]=g,this.float32[A+2]=b,this.float32[A+3]=C,l}}re.prototype.bytesPerElement=16,Te("StructArrayLayout4f16",re);class ce extends sa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class oe extends nl{get(l){return new ce(this,l)}}Te("CollisionBoxArray",oe);class be extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}be.prototype.size=48;class Ie extends y{get(l){return new be(this,l)}}Te("PlacedSymbolArray",Ie);class Ze extends sa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ze.prototype.size=64;class We extends _{get(l){return new Ze(this,l)}}Te("SymbolInstanceArray",We);class Xe extends E{getoffsetX(l){return this.float32[1*l+0]}}Te("GlyphOffsetArray",Xe);class it extends Ha{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Te("SymbolLineVertexArray",it);class pt extends sa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}pt.prototype.size=12;class ct extends I{get(l){return new pt(this,l)}}Te("TextAnchorOffsetArray",ct);class _t extends sa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}_t.prototype.size=8;class Ct extends j{get(l){return new _t(this,l)}}Te("FeatureIndexArray",Ct);class ft extends ho{}class Dt extends ho{}class nr extends ho{}class Ht extends po{}class Zt extends Wa{}class Qt extends ko{}class Or extends Ui{}class Lr extends to{}class _r extends ks{}class sn extends _u{}class Un extends ro{}class li extends s{}class Ri extends h{}class wi extends V{}const Ai=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:ji}=Ai;class kn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,c,g,b){const C=this.segments[this.segments.length-1];return l>kn.MAX_VERTEX_ARRAY_LENGTH&&ut(`Max vertices per segment is ${kn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${kn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+l>kn.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==b?this.createNewSegment(c,g,b):C}createNewSegment(l,c,g){const b={vertexOffset:l.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return g!==void 0&&(b.sortKey=g),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,c,g){return this.prepareSegment(0,l,c,g)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const c in l.vaos)l.vaos[c].destroy()}static simpleSegment(l,c,g,b){return new kn([{vertexOffset:l,primitiveOffset:c,vertexLength:g,primitiveLength:b,vaos:{},sortKey:0}])}}function Pi(f,l){return 256*(f=$e(Math.floor(f),0,255))+$e(Math.floor(l),0,255)}kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Te("SegmentVector",kn);const Aa=Bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Za,mo,Lo,Ls={exports:{}},Yc={exports:{}},Jc={exports:{}},Eh=(function(){if(Lo)return Ls.exports;Lo=1;var f=(Za||(Za=1,Yc.exports=function(c,g){var b,C,A,R,B,H,K,ie;for(C=c.length-(b=3&c.length),A=g,B=3432918353,H=461845907,ie=0;ie<C;)K=255&c.charCodeAt(ie)|(255&c.charCodeAt(++ie))<<8|(255&c.charCodeAt(++ie))<<16|(255&c.charCodeAt(++ie))<<24,++ie,A=27492+(65535&(R=5*(65535&(A=(A^=K=(65535&(K=(K=(65535&K)*B+(((K>>>16)*B&65535)<<16)&4294967295)<<15|K>>>17))*H+(((K>>>16)*H&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(R>>>16)&65535)<<16);switch(K=0,b){case 3:K^=(255&c.charCodeAt(ie+2))<<16;case 2:K^=(255&c.charCodeAt(ie+1))<<8;case 1:A^=K=(65535&(K=(K=(65535&(K^=255&c.charCodeAt(ie)))*B+(((K>>>16)*B&65535)<<16)&4294967295)<<15|K>>>17))*H+(((K>>>16)*H&65535)<<16)&4294967295}return A^=c.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),Yc.exports),l=(mo||(mo=1,Jc.exports=function(c,g){for(var b,C=c.length,A=g^C,R=0;C>=4;)b=1540483477*(65535&(b=255&c.charCodeAt(R)|(255&c.charCodeAt(++R))<<8|(255&c.charCodeAt(++R))<<16|(255&c.charCodeAt(++R))<<24))+((1540483477*(b>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),C-=4,++R;switch(C){case 3:A^=(255&c.charCodeAt(R+2))<<16;case 2:A^=(255&c.charCodeAt(R+1))<<8;case 1:A=1540483477*(65535&(A^=255&c.charCodeAt(R)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),Jc.exports);return Ls.exports=f,Ls.exports.murmur3=f,Ls.exports.murmur2=l,Ls.exports})(),Ch=d(Eh);class Bf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,c,g,b){this.ids.push(jf(l)),this.positions.push(c,g,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=jf(l);let g=0,b=this.ids.length-1;for(;g<b;){const A=g+b>>1;this.ids[A]>=c?b=A:g=A+1}const C=[];for(;this.ids[g]===c;)C.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return C}static serialize(l,c){const g=new Float64Array(l.ids),b=new Uint32Array(l.positions);return il(g,b,0,g.length-1),c&&c.push(g.buffer,b.buffer),{ids:g,positions:b}}static deserialize(l){const c=new Bf;return c.ids=l.ids,c.positions=l.positions,c.indexed=!0,c}}function jf(f){const l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Ch(String(f))}function il(f,l,c,g){for(;c<g;){const b=f[c+g>>1];let C=c-1,A=g+1;for(;;){do C++;while(f[C]<b);do A--;while(f[A]>b);if(C>=A)break;xu(f,C,A),xu(l,3*C,3*A),xu(l,3*C+1,3*A+1),xu(l,3*C+2,3*A+2)}A-c<g-A?(il(f,l,c,A),c=A+1):(il(f,l,A+1,g),g=A)}}function xu(f,l,c){const g=f[l];f[l]=f[c],f[c]=g}Te("FeaturePositionMap",Bf);class Ds{constructor(l,c){this.gl=l.gl,this.location=c}}class Qc extends Ds{constructor(l,c){super(l,c),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class go extends Ds{constructor(l,c){super(l,c),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Do extends Ds{constructor(l,c){super(l,c),this.current=fr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Zl=new Float32Array(16);function yo(f){return[Pi(255*f.r,255*f.g),Pi(255*f.b,255*f.a)]}class Cd{constructor(l,c,g){this.value=l,this.uniformNames=c.map((b=>`u_${b}`)),this.type=g}setUniform(l,c,g){l.set(g.constantOr(this.value))}getBinding(l,c,g){return this.type==="color"?new Do(l,c):new Qc(l,c)}}class Ah{constructor(l,c){this.uniformNames=c.map((g=>`u_${g}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=l.tlbr}setUniform(l,c,g,b){const C=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&l.set(C)}getBinding(l,c,g){return g.substr(0,9)==="u_pattern"?new go(l,c):new Qc(l,c)}}class pc{constructor(l,c,g,b){this.expression=l,this.type=g,this.maxValue=0,this.paintVertexAttributes=c.map((C=>({name:`a_${C}`,type:"Float32",components:g==="color"?2:1,offset:0}))),this.paintVertexArray=new b}populatePaintArray(l,c,g){const b=this.paintVertexArray.length,C=this.expression.evaluate(new Wr(0,g),c,{},g.canonical,[],g.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,C)}updatePaintArray(l,c,g,b,C){const A=this.expression.evaluate(new Wr(0,C),g,b);this._setPaintValue(l,c,A)}_setPaintValue(l,c,g){if(this.type==="color"){const b=yo(g);for(let C=l;C<c;C++)this.paintVertexArray.emplace(C,b[0],b[1])}else{for(let b=l;b<c;b++)this.paintVertexArray.emplace(b,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class wu{constructor(l,c,g,b,C,A){this.expression=l,this.uniformNames=c.map((R=>`u_${R}_t`)),this.type=g,this.useIntegerZoom=b,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=c.map((R=>({name:`a_${R}`,type:"Float32",components:g==="color"?4:2,offset:0}))),this.paintVertexArray=new A}populatePaintArray(l,c,g){const b=this.expression.evaluate(new Wr(this.zoom,g),c,{},g.canonical,[],g.formattedSection),C=this.expression.evaluate(new Wr(this.zoom+1,g),c,{},g.canonical,[],g.formattedSection),A=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(A,l,b,C)}updatePaintArray(l,c,g,b,C){const A=this.expression.evaluate(new Wr(this.zoom,C),g,b),R=this.expression.evaluate(new Wr(this.zoom+1,C),g,b);this._setPaintValue(l,c,A,R)}_setPaintValue(l,c,g,b){if(this.type==="color"){const C=yo(g),A=yo(b);for(let R=l;R<c;R++)this.paintVertexArray.emplace(R,C[0],C[1],A[0],A[1])}else{for(let C=l;C<c;C++)this.paintVertexArray.emplace(C,g,b);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,c){const g=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=$e(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,c,g){return new Qc(l,c)}}class ef{constructor(l,c,g,b,C,A){this.expression=l,this.type=c,this.useIntegerZoom=g,this.zoom=b,this.layerId=A,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(l,c,g){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,c.patterns&&c.patterns[this.layerId],g.imagePositions)}updatePaintArray(l,c,g,b,C){this._setPaintValues(l,c,g.patterns&&g.patterns[this.layerId],C.imagePositions)}_setPaintValues(l,c,g,b){if(!b||!g)return;const{min:C,mid:A,max:R}=g,B=b[C],H=b[A],K=b[R];if(B&&H&&K)for(let ie=l;ie<c;ie++)this.zoomInPaintVertexArray.emplace(ie,H.tl[0],H.tl[1],H.br[0],H.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],H.pixelRatio,B.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,H.tl[0],H.tl[1],H.br[0],H.br[1],K.tl[0],K.tl[1],K.br[0],K.br[1],H.pixelRatio,K.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Aa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Aa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ib{constructor(l,c,g){this.binders={},this._buffers=[];const b=[];for(const C in l.paint._values){if(!g(C))continue;const A=l.paint.get(C);if(!(A instanceof da&&Oo(A.property.specification)))continue;const R=ab(C,l.type),B=A.value,H=A.property.specification.type,K=A.property.useIntegerZoom,ie=A.property.specification["property-type"],ve=ie==="cross-faded"||ie==="cross-faded-data-driven";if(B.kind==="constant")this.binders[C]=ve?new Ah(B.value,R):new Cd(B.value,R,H),b.push(`/u_${C}`);else if(B.kind==="source"||ve){const we=oy(C,H,"source");this.binders[C]=ve?new ef(B,H,K,c,we,l.id):new pc(B,R,H,we),b.push(`/a_${C}`)}else{const we=oy(C,H,"composite");this.binders[C]=new wu(B,R,H,K,c,we),b.push(`/z_${C}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){const c=this.binders[l];return c instanceof pc||c instanceof wu?c.maxValue:0}populatePaintArrays(l,c,g){for(const b in this.binders){const C=this.binders[b];(C instanceof pc||C instanceof wu||C instanceof ef)&&C.populatePaintArray(l,c,g)}}setConstantPatternPositions(l,c){for(const g in this.binders){const b=this.binders[g];b instanceof Ah&&b.setConstantPatternPositions(l,c)}}updatePaintArrays(l,c,g,b,C){let A=!1;for(const R in l){const B=c.getPositions(R);for(const H of B){const K=g.feature(H.index);for(const ie in this.binders){const ve=this.binders[ie];if((ve instanceof pc||ve instanceof wu||ve instanceof ef)&&ve.expression.isStateDependent===!0){const we=b.paint.get(ie);ve.expression=we.value,ve.updatePaintArray(H.start,H.end,K,l[R],C),A=!0}}}}return A}defines(){const l=[];for(const c in this.binders){const g=this.binders[c];(g instanceof Cd||g instanceof Ah)&&l.push(...g.uniformNames.map((b=>`#define HAS_UNIFORM_${b}`)))}return l}getBinderAttributes(){const l=[];for(const c in this.binders){const g=this.binders[c];if(g instanceof pc||g instanceof wu)for(let b=0;b<g.paintVertexAttributes.length;b++)l.push(g.paintVertexAttributes[b].name);else if(g instanceof ef)for(let b=0;b<Aa.members.length;b++)l.push(Aa.members[b].name)}return l}getBinderUniforms(){const l=[];for(const c in this.binders){const g=this.binders[c];if(g instanceof Cd||g instanceof Ah||g instanceof wu)for(const b of g.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,c){const g=[];for(const b in this.binders){const C=this.binders[b];if(C instanceof Cd||C instanceof Ah||C instanceof wu){for(const A of C.uniformNames)if(c[A]){const R=C.getBinding(l,c[A],A);g.push({name:A,property:b,binding:R})}}}return g}setUniforms(l,c,g,b){for(const{name:C,property:A,binding:R}of c)this.binders[A].setUniform(R,b,g.get(A),C)}updatePaintBuffers(l){this._buffers=[];for(const c in this.binders){const g=this.binders[c];if(l&&g instanceof ef){const b=l.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(g instanceof pc||g instanceof wu)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(l){for(const c in this.binders){const g=this.binders[c];(g instanceof pc||g instanceof wu||g instanceof ef)&&g.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const c=this.binders[l];(c instanceof pc||c instanceof wu||c instanceof ef)&&c.destroy()}}}class Il{constructor(l,c,g=()=>!0){this.programConfigurations={};for(const b of l)this.programConfigurations[b.id]=new ib(b,c,g);this.needsUpload=!1,this._featureMap=new Bf,this._bufferOffset=0}populatePaintArrays(l,c,g,b){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,c,b);c.id!==void 0&&this._featureMap.add(c.id,g,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,c,g,b){for(const C of g)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(l,this._featureMap,c,C,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function ab(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function oy(f,l,c){const g={color:{source:ko,composite:re},number:{source:E,composite:ko}},b=(function(C){return{"line-pattern":{source:Or,composite:Or},"fill-pattern":{source:Or,composite:Or},"fill-extrusion-pattern":{source:Or,composite:Or}}[C]})(f);return b&&b[c]||g[l][c]}Te("ConstantBinder",Cd),Te("CrossFadedConstantBinder",Ah),Te("SourceExpressionBinder",pc),Te("CrossFadedCompositeBinder",ef),Te("CompositeExpressionBinder",wu),Te("ProgramConfiguration",ib,{omit:["_buffers"]}),Te("ProgramConfigurationSet",Il);const qp=Math.pow(2,14)-1,Vp=-qp-1;function tf(f){const l=xe/f.extent,c=f.loadGeometry();for(let g=0;g<c.length;g++){const b=c[g];for(let C=0;C<b.length;C++){const A=b[C],R=Math.round(A.x*l),B=Math.round(A.y*l);A.x=$e(R,Vp,qp),A.y=$e(B,Vp,qp),(R<A.x||R>A.x+1||B<A.y||B>A.y+1)&&ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function mc(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?tf(f):[]}}const UR=-32768;function AZ(f,l,c,g,b){f.emplaceBack(UR+8*l+g,UR+8*c+b)}class O2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Dt,this.indexArray=new Ri,this.segments=new kn,this.programConfigurations=new Il(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(l,c,g){const b=this.layers[0],C=[];let A=null,R=!1,B=b.type==="heatmap";if(b.type==="circle"){const K=b;A=K.layout.get("circle-sort-key"),R=!A.isConstant(),B=B||K.paint.get("circle-pitch-alignment")==="map"}const H=B?c.subdivisionGranularity.circle:1;for(const{feature:K,id:ie,index:ve,sourceLayerIndex:we}of l){const Ee=this.layers[0]._featureFilter.needGeometry,Oe=mc(K,Ee);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom,{globalState:this.globalState}),Oe,g))continue;const Ge=R?A.evaluate(Oe,{},g):void 0,at={id:ie,properties:K.properties,type:K.type,sourceLayerIndex:we,index:ve,geometry:Ee?Oe.geometry:tf(K),patterns:{},sortKey:Ge};C.push(at)}R&&C.sort(((K,ie)=>K.sortKey-ie.sortKey));for(const K of C){const{geometry:ie,index:ve,sourceLayerIndex:we}=K,Ee=l[ve].feature;this.addFeature(K,ie,ve,g,H),c.featureIndex.insert(Ee,ie,ve,we,this.index)}}update(l,c,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,c,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ji),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,c,g,b,C=1){let A;switch(C){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const R=A.length;for(const B of c)for(const H of B){const K=H.x,ie=H.y;if(K<0||K>=xe||ie<0||ie>=xe)continue;const ve=this.segments.prepareSegment(R*R,this.layoutVertexArray,this.indexArray,l.sortKey),we=ve.vertexLength;for(let Ee=0;Ee<R;Ee++)for(let Oe=0;Oe<R;Oe++)AZ(this.layoutVertexArray,K,ie,A[Oe],A[Ee]);for(let Ee=0;Ee<R-1;Ee++)for(let Oe=0;Oe<R-1;Oe++){const Ge=we+Ee*R+Oe,at=we+(Ee+1)*R+Oe;this.indexArray.emplaceBack(Ge,at+1,Ge+1),this.indexArray.emplaceBack(Ge,at,at+1)}ve.vertexLength+=R*R,ve.primitiveLength+=(R-1)*(R-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:{},canonical:b,globalState:this.globalState})}}function qR(f,l){for(let c=0;c<f.length;c++)if(Gp(l,f[c]))return!0;for(let c=0;c<l.length;c++)if(Gp(f,l[c]))return!0;return!!k2(f,l)}function PZ(f,l,c){return!!Gp(f,l)||!!L2(l,f,c)}function VR(f,l){if(f.length===1)return HR(l,f[0]);for(let c=0;c<l.length;c++){const g=l[c];for(let b=0;b<g.length;b++)if(Gp(f,g[b]))return!0}for(let c=0;c<f.length;c++)if(HR(l,f[c]))return!0;for(let c=0;c<l.length;c++)if(k2(f,l[c]))return!0;return!1}function TZ(f,l,c){if(f.length>1){if(k2(f,l))return!0;for(let g=0;g<l.length;g++)if(L2(l[g],f,c))return!0}for(let g=0;g<f.length;g++)if(L2(f[g],l,c))return!0;return!1}function k2(f,l){if(f.length===0||l.length===0)return!1;for(let c=0;c<f.length-1;c++){const g=f[c],b=f[c+1];for(let C=0;C<l.length-1;C++)if(IZ(g,b,l[C],l[C+1]))return!0}return!1}function IZ(f,l,c,g){return Le(f,c,g)!==Le(l,c,g)&&Le(f,l,c)!==Le(f,l,g)}function L2(f,l,c){const g=c*c;if(l.length===1)return f.distSqr(l[0])<g;for(let b=1;b<l.length;b++)if(GR(f,l[b-1],l[b])<g)return!0;return!1}function GR(f,l,c){const g=l.distSqr(c);if(g===0)return f.distSqr(l);const b=((f.x-l.x)*(c.x-l.x)+(f.y-l.y)*(c.y-l.y))/g;return f.distSqr(b<0?l:b>1?c:c.sub(l)._mult(b)._add(l))}function HR(f,l){let c,g,b,C=!1;for(let A=0;A<f.length;A++){c=f[A];for(let R=0,B=c.length-1;R<c.length;B=R++)g=c[R],b=c[B],g.y>l.y!=b.y>l.y&&l.x<(b.x-g.x)*(l.y-g.y)/(b.y-g.y)+g.x&&(C=!C)}return C}function Gp(f,l){let c=!1;for(let g=0,b=f.length-1;g<f.length;b=g++){const C=f[g],A=f[b];C.y>l.y!=A.y>l.y&&l.x<(A.x-C.x)*(l.y-C.y)/(A.y-C.y)+C.x&&(c=!c)}return c}function MZ(f,l,c){const g=c[0],b=c[2];if(f.x<g.x&&l.x<g.x||f.x>b.x&&l.x>b.x||f.y<g.y&&l.y<g.y||f.y>b.y&&l.y>b.y)return!1;const C=Le(f,l,c[0]);return C!==Le(f,l,c[1])||C!==Le(f,l,c[2])||C!==Le(f,l,c[3])}function sy(f,l,c){const g=l.paint.get(f).value;return g.kind==="constant"?g.value:c.programConfigurations.get(l.id).getMaxValue(f)}function ob(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function sb(f,l,c,g,b){if(!l[0]&&!l[1])return f;const C=p.convert(l)._mult(b);c==="viewport"&&C._rotate(-g);const A=[];for(let R=0;R<f.length;R++)A.push(f[R].sub(C));return A}let WR,ZR;Te("CircleBucket",O2,{omit:["layers"]});var RZ={get paint(){return ZR=ZR||new mi({"circle-radius":new on(bt.paint_circle["circle-radius"]),"circle-color":new on(bt.paint_circle["circle-color"]),"circle-blur":new on(bt.paint_circle["circle-blur"]),"circle-opacity":new on(bt.paint_circle["circle-opacity"]),"circle-translate":new Jr(bt.paint_circle["circle-translate"]),"circle-translate-anchor":new Jr(bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jr(bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jr(bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(bt.paint_circle["circle-stroke-opacity"])})},get layout(){return WR=WR||new mi({"circle-sort-key":new on(bt.layout_circle["circle-sort-key"])})}};class OZ extends Vi{constructor(l){super(l,RZ)}createBucket(l){return new O2(l)}queryRadius(l){const c=l;return sy("circle-radius",this,c)+sy("circle-stroke-width",this,c)+ob(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:c,featureState:g,geometry:b,transform:C,pixelsToTileUnits:A,unwrappedTileID:R,getElevation:B}){const H=sb(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,A),K=this.paint.get("circle-radius").evaluate(c,g)+this.paint.get("circle-stroke-width").evaluate(c,g),ie=this.paint.get("circle-pitch-alignment")==="map",ve=ie?H:(function(Ee,Oe,Ge,at){return Ee.map((Nt=>KR(Nt,Oe,Ge,at)))})(H,C,R,B),we=ie?K*A:K;for(const Ee of b)for(const Oe of Ee){const Ge=ie?Oe:KR(Oe,C,R,B);let at=we;const Nt=C.projectTileCoordinates(Oe.x,Oe.y,R,B).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?at*=Nt/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(at*=C.cameraToCenterDistance/Nt),PZ(ve,Ge,at))return!0}return!1}}function KR(f,l,c,g){const b=l.projectTileCoordinates(f.x,f.y,c,g).point;return new p((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}class XR extends O2{}let YR;Te("HeatmapBucket",XR,{omit:["layers"]});var kZ={get paint(){return YR=YR||new mi({"heatmap-radius":new on(bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jr(bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ci(bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jr(bt.paint_heatmap["heatmap-opacity"])})}};function D2(f,{width:l,height:c},g,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*c*g)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*c*g}`)}else b=new Uint8Array(l*c*g);return f.width=l,f.height=c,f.data=b,f}function JR(f,{width:l,height:c},g){if(l===f.width&&c===f.height)return;const b=D2({},{width:l,height:c},g);N2(f,b,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,c)},g),f.width=l,f.height=c,f.data=b.data}function N2(f,l,c,g,b,C){if(b.width===0||b.height===0)return l;if(b.width>f.width||b.height>f.height||c.x>f.width-b.width||c.y>f.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||g.x>l.width-b.width||g.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const A=f.data,R=l.data;if(A===R)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<b.height;B++){const H=((c.y+B)*f.width+c.x)*C,K=((g.y+B)*l.width+g.x)*C;for(let ie=0;ie<b.width*C;ie++)R[K+ie]=A[H+ie]}return l}class ly{constructor(l,c){D2(this,l,1,c)}resize(l){JR(this,l,1)}clone(){return new ly({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,c,g,b,C){N2(l,c,g,b,C,1)}}class Ml{constructor(l,c){D2(this,l,4,c)}resize(l){JR(this,l,4)}replace(l,c){c?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,c,g,b,C){N2(l,c,g,b,C,4)}setPixel(l,c,g){const b=4*(l*this.width+c);this.data[b+0]=Math.round(255*g.r/g.a),this.data[b+1]=Math.round(255*g.g/g.a),this.data[b+2]=Math.round(255*g.b/g.a),this.data[b+3]=Math.round(255*g.a)}}function QR(f){const l={},c=f.resolution||256,g=f.clips?f.clips.length:1,b=f.image||new Ml({width:c,height:g});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const C=(A,R,B)=>{l[f.evaluationKey]=B;const H=f.expression.evaluate(l);b.setPixel(A/4/c,R/4,H)};if(f.clips)for(let A=0,R=0;A<g;++A,R+=4*c)for(let B=0,H=0;B<c;B++,H+=4){const K=B/(c-1),{start:ie,end:ve}=f.clips[A];C(R,H,ie*(1-K)+ve*K)}else for(let A=0,R=0;A<c;A++,R+=4)C(0,R,A/(c-1));return b}Te("AlphaImage",ly),Te("RGBAImage",Ml);const F2="big-fb";class LZ extends Vi{createBucket(l){return new XR(l)}constructor(l){super(l,kZ),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=QR({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(F2)&&this.heatmapFbos.delete(F2)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eO;var DZ={get paint(){return eO=eO||new mi({"hillshade-illumination-direction":new Jr(bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Jr(bt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Jr(bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jr(bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jr(bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jr(bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jr(bt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Jr(bt.paint_hillshade["hillshade-method"])})}};class NZ extends Vi{constructor(l){super(l,DZ),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,g=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const C=Math.max(l.length,c.length,g.length,b.length);l=l.concat(Array(C-l.length).fill(l.at(-1))),c=c.concat(Array(C-c.length).fill(c.at(-1))),g=g.concat(Array(C-g.length).fill(g.at(-1))),b=b.concat(Array(C-b.length).fill(b.at(-1)));const A=c.map(Kt);return{directionRadians:l.map(Kt),altitudeRadians:A,shadowColor:b,highlightColor:g}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let tO;var FZ={get paint(){return tO=tO||new mi({"color-relief-opacity":new Jr(bt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ci(bt["paint_color-relief"]["color-relief-color"])})}};class B2{constructor(l,c,g,b){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(c,b)}update(l,c,g){const{width:b,height:C}=l,A=!(this.size&&this.size[0]===b&&this.size[1]===C||g),{context:R}=this,{gl:B}=R;if(this.useMipmap=!!(c&&c.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!c||c.premultiply!==!1)),A)this.size=[b,C],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||dr(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,b,C,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:H,y:K}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||dr(l)?B.texSubImage2D(B.TEXTURE_2D,0,H,K,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,H,K,b,C,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,c,g){const{context:b}=this,{gl:C}=b;C.bindTexture(C.TEXTURE_2D,this.texture),g!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=C.LINEAR),l!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,g||l),this.filter=l),c!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,c),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class rO{constructor(l,c,g,b=1,C=1,A=1,R=0){if(this.uid=l,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void ut(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const B=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=C,this.blueFactor=A,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let H=0;H<B;H++)this.data[this._idx(-1,H)]=this.data[this._idx(0,H)],this.data[this._idx(B,H)]=this.data[this._idx(B-1,H)],this.data[this._idx(H,-1)]=this.data[this._idx(H,0)],this.data[this._idx(H,B)]=this.data[this._idx(H,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let H=0;H<B;H++)for(let K=0;K<B;K++){const ie=this.get(H,K);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(l,c){const g=new Uint8Array(this.data.buffer),b=4*this._idx(l,c);return this.unpack(g[b],g[b+1],g[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,c){if(l<-1||l>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(l+1)}unpack(l,c,g){return l*this.redFactor+c*this.greenFactor+g*this.blueFactor-this.baseShift}pack(l){return nO(l,this.getUnpackVector())}getPixels(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,c,g){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=c*this.dim,C=c*this.dim+this.dim,A=g*this.dim,R=g*this.dim+this.dim;switch(c){case-1:b=C-1;break;case 1:C=b+1}switch(g){case-1:A=R-1;break;case 1:R=A+1}const B=-c*this.dim,H=-g*this.dim;for(let K=A;K<R;K++)for(let ie=b;ie<C;ie++)this.data[this._idx(ie,K)]=l.data[this._idx(ie+B,K+H)]}}function nO(f,l){const c=l[0],g=l[1],b=l[2],C=l[3],A=Math.min(c,g,b),R=Math.round((f+C)/A);return{r:Math.floor(R*A/c)%256,g:Math.floor(R*A/g)%256,b:Math.floor(R*A/b)%256}}Te("DEMData",rO);class BZ extends Vi{constructor(l){super(l,FZ)}_createColorRamp(l){const c={elevationStops:[],colorStops:[]},g=this._transitionablePaint._values["color-relief-color"].value.expression;if(g instanceof fc&&g._styleExpression.expression instanceof Qr){this.colorRampExpression=g;const A=g._styleExpression.expression;c.elevationStops=A.labels,c.colorStops=[];for(const R of c.elevationStops)c.colorStops.push(A.evaluate({globals:{elevation:R}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[fr.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=l)return c;const b={elevationStops:[],colorStops:[]},C=(c.elevationStops.length-1)/(l-1);for(let A=0;A<c.elevationStops.length-.5;A+=C)b.elevationStops.push(c.elevationStops[Math.round(A)]),b.colorStops.push(c.colorStops[Math.round(A)]);return ut(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,c,g){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(c),C=new Ml({width:b.colorStops.length,height:1}),A=new Ml({width:b.colorStops.length,height:1});for(let R=0;R<b.elevationStops.length;R++){const B=nO(b.elevationStops[R],g);A.setPixel(0,R,new fr(B.r/255,B.g/255,B.b/255,1)),C.setPixel(0,R,b.colorStops[R])}return this.colorRampTextures={elevationTexture:new B2(l,A,l.gl.RGBA),colorTexture:new B2(l,C,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const jZ=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:zZ}=jZ;function j2(f,l,c){const g=c.patternDependencies;let b=!1;for(const C of l){const A=C.paint.get(`${f}-pattern`);A.isConstant()||(b=!0);const R=A.constantOr(null);R&&(b=!0,g[R.to]=!0,g[R.from]=!0)}return b}function z2(f,l,c,g,b){const{zoom:C,globalState:A}=g,R=b.patternDependencies;for(const B of l){const H=B.paint.get(`${f}-pattern`).value;if(H.kind!=="constant"){let K=H.evaluate({zoom:C-1,globalState:A},c,{},b.availableImages),ie=H.evaluate({zoom:C,globalState:A},c,{},b.availableImages),ve=H.evaluate({zoom:C+1,globalState:A},c,{},b.availableImages);K=K&&K.name?K.name:K,ie=ie&&ie.name?ie.name:ie,ve=ve&&ve.name?ve.name:ve,R[K]=!0,R[ie]=!0,R[ve]=!0,c.patterns[B.id]={min:K,mid:ie,max:ve}}}return c}function iO(f,l,c,g,b){let C;if(b===(function(A,R,B,H){let K=0;for(let ie=R,ve=B-H;ie<B;ie+=H)K+=(A[ve]-A[ie])*(A[ie+1]+A[ve+1]),ve=ie;return K})(f,l,c,g)>0)for(let A=l;A<c;A+=g)C=lO(A/g|0,f[A],f[A+1],C);else for(let A=c-g;A>=l;A-=g)C=lO(A/g|0,f[A],f[A+1],C);return C&&Hp(C,C.next)&&(hy(C),C=C.next),C}function Ad(f,l){if(!f)return f;l||(l=f);let c,g=f;do if(c=!1,g.steiner||!Hp(g,g.next)&&no(g.prev,g,g.next)!==0)g=g.next;else{if(hy(g),g=l=g.prev,g===g.next)break;c=!0}while(c||g!==l);return l}function uy(f,l,c,g,b,C,A){if(!f)return;!A&&C&&(function(B,H,K,ie){let ve=B;do ve.z===0&&(ve.z=$2(ve.x,ve.y,H,K,ie)),ve.prevZ=ve.prev,ve.nextZ=ve.next,ve=ve.next;while(ve!==B);ve.prevZ.nextZ=null,ve.prevZ=null,(function(we){let Ee,Oe=1;do{let Ge,at=we;we=null;let Nt=null;for(Ee=0;at;){Ee++;let vt=at,Et=0;for(let or=0;or<Oe&&(Et++,vt=vt.nextZ,vt);or++);let Xt=Oe;for(;Et>0||Xt>0&&vt;)Et!==0&&(Xt===0||!vt||at.z<=vt.z)?(Ge=at,at=at.nextZ,Et--):(Ge=vt,vt=vt.nextZ,Xt--),Nt?Nt.nextZ=Ge:we=Ge,Ge.prevZ=Nt,Nt=Ge;at=vt}Nt.nextZ=null,Oe*=2}while(Ee>1)})(ve)})(f,g,b,C);let R=f;for(;f.prev!==f.next;){const B=f.prev,H=f.next;if(C?UZ(f,g,b,C):$Z(f))l.push(B.i,f.i,H.i),hy(f),f=H.next,R=H.next;else if((f=H)===R){A?A===1?uy(f=qZ(Ad(f),l),l,c,g,b,C,2):A===2&&VZ(f,l,c,g,b,C):uy(Ad(f),l,c,g,b,C,1);break}}}function $Z(f){const l=f.prev,c=f,g=f.next;if(no(l,c,g)>=0)return!1;const b=l.x,C=c.x,A=g.x,R=l.y,B=c.y,H=g.y,K=Math.min(b,C,A),ie=Math.min(R,B,H),ve=Math.max(b,C,A),we=Math.max(R,B,H);let Ee=g.next;for(;Ee!==l;){if(Ee.x>=K&&Ee.x<=ve&&Ee.y>=ie&&Ee.y<=we&&cy(b,R,C,B,A,H,Ee.x,Ee.y)&&no(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function UZ(f,l,c,g){const b=f.prev,C=f,A=f.next;if(no(b,C,A)>=0)return!1;const R=b.x,B=C.x,H=A.x,K=b.y,ie=C.y,ve=A.y,we=Math.min(R,B,H),Ee=Math.min(K,ie,ve),Oe=Math.max(R,B,H),Ge=Math.max(K,ie,ve),at=$2(we,Ee,l,c,g),Nt=$2(Oe,Ge,l,c,g);let vt=f.prevZ,Et=f.nextZ;for(;vt&&vt.z>=at&&Et&&Et.z<=Nt;){if(vt.x>=we&&vt.x<=Oe&&vt.y>=Ee&&vt.y<=Ge&&vt!==b&&vt!==A&&cy(R,K,B,ie,H,ve,vt.x,vt.y)&&no(vt.prev,vt,vt.next)>=0||(vt=vt.prevZ,Et.x>=we&&Et.x<=Oe&&Et.y>=Ee&&Et.y<=Ge&&Et!==b&&Et!==A&&cy(R,K,B,ie,H,ve,Et.x,Et.y)&&no(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;vt&&vt.z>=at;){if(vt.x>=we&&vt.x<=Oe&&vt.y>=Ee&&vt.y<=Ge&&vt!==b&&vt!==A&&cy(R,K,B,ie,H,ve,vt.x,vt.y)&&no(vt.prev,vt,vt.next)>=0)return!1;vt=vt.prevZ}for(;Et&&Et.z<=Nt;){if(Et.x>=we&&Et.x<=Oe&&Et.y>=Ee&&Et.y<=Ge&&Et!==b&&Et!==A&&cy(R,K,B,ie,H,ve,Et.x,Et.y)&&no(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function qZ(f,l){let c=f;do{const g=c.prev,b=c.next.next;!Hp(g,b)&&oO(g,c,c.next,b)&&fy(g,b)&&fy(b,g)&&(l.push(g.i,c.i,b.i),hy(c),hy(c.next),c=f=b),c=c.next}while(c!==f);return Ad(c)}function VZ(f,l,c,g,b,C){let A=f;do{let R=A.next.next;for(;R!==A.prev;){if(A.i!==R.i&&KZ(A,R)){let B=sO(A,R);return A=Ad(A,A.next),B=Ad(B,B.next),uy(A,l,c,g,b,C,0),void uy(B,l,c,g,b,C,0)}R=R.next}A=A.next}while(A!==f)}function GZ(f,l){let c=f.x-l.x;return c===0&&(c=f.y-l.y,c===0)&&(c=(f.next.y-f.y)/(f.next.x-f.x)-(l.next.y-l.y)/(l.next.x-l.x)),c}function HZ(f,l){const c=(function(b,C){let A=C;const R=b.x,B=b.y;let H,K=-1/0;if(Hp(b,A))return A;do{if(Hp(b,A.next))return A.next;if(B<=A.y&&B>=A.next.y&&A.next.y!==A.y){const Oe=A.x+(B-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(Oe<=R&&Oe>K&&(K=Oe,H=A.x<A.next.x?A:A.next,Oe===R))return H}A=A.next}while(A!==C);if(!H)return null;const ie=H,ve=H.x,we=H.y;let Ee=1/0;A=H;do{if(R>=A.x&&A.x>=ve&&R!==A.x&&aO(B<we?R:K,B,ve,we,B<we?K:R,B,A.x,A.y)){const Oe=Math.abs(B-A.y)/(R-A.x);fy(A,b)&&(Oe<Ee||Oe===Ee&&(A.x>H.x||A.x===H.x&&WZ(H,A)))&&(H=A,Ee=Oe)}A=A.next}while(A!==ie);return H})(f,l);if(!c)return l;const g=sO(c,f);return Ad(g,g.next),Ad(c,c.next)}function WZ(f,l){return no(f.prev,f,l.prev)<0&&no(l.next,f,f.next)<0}function $2(f,l,c,g,b){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-c)*b|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-g)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function ZZ(f){let l=f,c=f;do(l.x<c.x||l.x===c.x&&l.y<c.y)&&(c=l),l=l.next;while(l!==f);return c}function aO(f,l,c,g,b,C,A,R){return(b-A)*(l-R)>=(f-A)*(C-R)&&(f-A)*(g-R)>=(c-A)*(l-R)&&(c-A)*(C-R)>=(b-A)*(g-R)}function cy(f,l,c,g,b,C,A,R){return!(f===A&&l===R)&&aO(f,l,c,g,b,C,A,R)}function KZ(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!(function(c,g){let b=c;do{if(b.i!==c.i&&b.next.i!==c.i&&b.i!==g.i&&b.next.i!==g.i&&oO(b,b.next,c,g))return!0;b=b.next}while(b!==c);return!1})(f,l)&&(fy(f,l)&&fy(l,f)&&(function(c,g){let b=c,C=!1;const A=(c.x+g.x)/2,R=(c.y+g.y)/2;do b.y>R!=b.next.y>R&&b.next.y!==b.y&&A<(b.next.x-b.x)*(R-b.y)/(b.next.y-b.y)+b.x&&(C=!C),b=b.next;while(b!==c);return C})(f,l)&&(no(f.prev,f,l.prev)||no(f,l.prev,l))||Hp(f,l)&&no(f.prev,f,f.next)>0&&no(l.prev,l,l.next)>0)}function no(f,l,c){return(l.y-f.y)*(c.x-l.x)-(l.x-f.x)*(c.y-l.y)}function Hp(f,l){return f.x===l.x&&f.y===l.y}function oO(f,l,c,g){const b=ub(no(f,l,c)),C=ub(no(f,l,g)),A=ub(no(c,g,f)),R=ub(no(c,g,l));return b!==C&&A!==R||!(b!==0||!lb(f,c,l))||!(C!==0||!lb(f,g,l))||!(A!==0||!lb(c,f,g))||!(R!==0||!lb(c,l,g))}function lb(f,l,c){return l.x<=Math.max(f.x,c.x)&&l.x>=Math.min(f.x,c.x)&&l.y<=Math.max(f.y,c.y)&&l.y>=Math.min(f.y,c.y)}function ub(f){return f>0?1:f<0?-1:0}function fy(f,l){return no(f.prev,f,f.next)<0?no(f,l,f.next)>=0&&no(f,f.prev,l)>=0:no(f,l,f.prev)<0||no(f,f.next,l)<0}function sO(f,l){const c=U2(f.i,f.x,f.y),g=U2(l.i,l.x,l.y),b=f.next,C=l.prev;return f.next=l,l.prev=f,c.next=b,b.prev=c,g.next=c,c.prev=g,C.next=g,g.prev=C,g}function lO(f,l,c,g){const b=U2(f,l,c);return g?(b.next=g.next,b.prev=g,g.next.prev=b,g.next=b):(b.prev=b,b.next=b),b}function hy(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function U2(f,l,c){return{i:f,x:l,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Wp{constructor(l,c){if(c>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=c}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class cb{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}cb.noSubdivision=new cb({fill:new Wp(0,0),line:new Wp(0,0),tile:new Wp(0,0),stencil:new Wp(0,0),circle:1}),Te("SubdivisionGranularityExpression",Wp),Te("SubdivisionGranularitySetting",cb);const Zp=-32768,dy=32767;class XZ{constructor(l,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=xe/l,this._canonical=c}_getKey(l,c){return(l+=32768)<<16|c+32768}_vertexToIndex(l,c){if(l<-32768||c<-32768||l>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const g=0|Math.round(l),b=0|Math.round(c),C=this._getKey(g,b);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,A),this._vertexBuffer.push(g,b),A}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(b,C){const A=[];for(let R=0;R<C.length;R+=3){const B=C[R],H=C[R+1],K=C[R+2],ie=b[2*B],ve=b[2*B+1];(b[2*H]-ie)*(b[2*K+1]-ve)-(b[2*H+1]-ve)*(b[2*K]-ie)>0?(A.push(B),A.push(K),A.push(H)):(A.push(B),A.push(H),A.push(K))}return A})(this._vertexBuffer,l);const c=[],g=l.length;for(let b=0;b<g;b+=3){const C=[l[b+0],l[b+1],l[b+2]],A=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]];let R=1/0,B=1/0,H=-1/0,K=-1/0;for(let Oe=0;Oe<3;Oe++){const Ge=A[2*Oe],at=A[2*Oe+1];R=Math.min(R,Ge),H=Math.max(H,Ge),B=Math.min(B,at),K=Math.max(K,at)}if(R===H||B===K)continue;const ie=Math.floor(R/this._granularityCellSize),ve=Math.ceil(H/this._granularityCellSize),we=Math.floor(B/this._granularityCellSize),Ee=Math.ceil(K/this._granularityCellSize);if(ie!==ve||we!==Ee)for(let Oe=we;Oe<Ee;Oe++){const Ge=this._scanlineGenerateVertexRingForCellRow(Oe,A,C);YZ(this._vertexBuffer,Ge,c)}else c.push(...C)}return c}_scanlineGenerateVertexRingForCellRow(l,c,g){const b=l*this._granularityCellSize,C=b+this._granularityCellSize,A=[];for(let R=0;R<3;R++){const B=c[2*R],H=c[2*R+1],K=c[2*(R+1)%6],ie=c[(2*(R+1)+1)%6],ve=c[2*(R+2)%6],we=c[(2*(R+2)+1)%6],Ee=K-B,Oe=ie-H,Ge=Ee===0,at=Oe===0,Nt=(b-H)/Oe,vt=(C-H)/Oe,Et=Math.min(Nt,vt),Xt=Math.max(Nt,vt);if(!at&&(Et>=1||Xt<=0)||at&&(H<b||H>C)){ie>=b&&ie<=C&&A.push(g[(R+1)%3]);continue}!at&&Et>0&&A.push(this._vertexToIndex(B+Ee*Et,H+Oe*Et));const or=B+Ee*Math.max(Et,0),wr=B+Ee*Math.min(Xt,1);Ge||this._generateIntraEdgeVertices(A,B,H,K,ie,or,wr),!at&&Xt<1&&A.push(this._vertexToIndex(B+Ee*Xt,H+Oe*Xt)),(at||ie>=b&&ie<=C)&&A.push(g[(R+1)%3]),!at&&(ie<=b||ie>=C)&&this._generateInterEdgeVertices(A,B,H,K,ie,ve,we,wr,b,C)}return A}_generateIntraEdgeVertices(l,c,g,b,C,A,R){const B=b-c,H=C-g,K=H===0,ie=K?Math.min(c,b):Math.min(A,R),ve=K?Math.max(c,b):Math.max(A,R),we=Math.floor(ie/this._granularityCellSize)+1,Ee=Math.ceil(ve/this._granularityCellSize)-1;if(K?c<b:A<R)for(let Oe=we;Oe<=Ee;Oe++){const Ge=Oe*this._granularityCellSize;l.push(this._vertexToIndex(Ge,g+H*(Ge-c)/B))}else for(let Oe=Ee;Oe>=we;Oe--){const Ge=Oe*this._granularityCellSize;l.push(this._vertexToIndex(Ge,g+H*(Ge-c)/B))}}_generateInterEdgeVertices(l,c,g,b,C,A,R,B,H,K){const ie=C-g,ve=A-b,we=R-C,Ee=(H-C)/we,Oe=(K-C)/we,Ge=Math.min(Ee,Oe),at=Math.max(Ee,Oe),Nt=b+ve*Ge;let vt=Math.floor(Math.min(Nt,B)/this._granularityCellSize)+1,Et=Math.ceil(Math.max(Nt,B)/this._granularityCellSize)-1,Xt=B<Nt;const or=we===0;if(or&&(R===H||R===K))return;if(or||Ge>=1||at<=0){const Zr=g-R,Fr=A+(c-A)*Math.min((H-R)/Zr,(K-R)/Zr);vt=Math.floor(Math.min(Fr,B)/this._granularityCellSize)+1,Et=Math.ceil(Math.max(Fr,B)/this._granularityCellSize)-1,Xt=B<Fr}const wr=ie>0?K:H;if(Xt)for(let Zr=vt;Zr<=Et;Zr++)l.push(this._vertexToIndex(Zr*this._granularityCellSize,wr));else for(let Zr=Et;Zr>=vt;Zr--)l.push(this._vertexToIndex(Zr*this._granularityCellSize,wr))}_generateOutline(l){const c=[];for(const g of l){const b=Pd(g,this._granularity,!0),C=this._pointArrayToIndices(b),A=[];for(let R=1;R<C.length;R++)A.push(C[R-1]),A.push(C[R]);c.push(A)}return c}_handlePoles(l){let c=!1,g=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(g=!0)),(c||g)&&this._fillPoles(l,c,g)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let c=0;c<l.length;c+=2){const g=l[c+1];g===Zp&&(l[c+1]=-32767),g===dy&&(l[c+1]=32766)}}_generatePoleQuad(l,c,g,b,C,A){b>C!=(A===Zp)?(l.push(c),l.push(g),l.push(this._vertexToIndex(b,A)),l.push(g),l.push(this._vertexToIndex(C,A)),l.push(this._vertexToIndex(b,A))):(l.push(g),l.push(c),l.push(this._vertexToIndex(b,A)),l.push(this._vertexToIndex(C,A)),l.push(g),l.push(this._vertexToIndex(b,A)))}_fillPoles(l,c,g){const b=this._vertexBuffer,C=xe,A=l.length;for(let R=2;R<A;R+=3){const B=l[R-2],H=l[R-1],K=l[R],ie=b[2*B],ve=b[2*B+1],we=b[2*H],Ee=b[2*H+1],Oe=b[2*K],Ge=b[2*K+1];c&&(ve===0&&Ee===0&&this._generatePoleQuad(l,B,H,ie,we,Zp),Ee===0&&Ge===0&&this._generatePoleQuad(l,H,K,we,Oe,Zp),Ge===0&&ve===0&&this._generatePoleQuad(l,K,B,Oe,ie,Zp)),g&&(ve===C&&Ee===C&&this._generatePoleQuad(l,B,H,ie,we,dy),Ee===C&&Ge===C&&this._generatePoleQuad(l,H,K,we,Oe,dy),Ge===C&&ve===C&&this._generatePoleQuad(l,K,B,Oe,ie,dy))}}_initializeVertices(l){for(let c=0;c<l.length;c+=2)this._vertexToIndex(l[c],l[c+1])}subdividePolygonInternal(l,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:g,holeIndices:b}=(function(R){const B=[],H=[];for(const K of R)if(K.length!==0){K!==R[0]&&B.push(H.length/2);for(let ie=0;ie<K.length;ie++)H.push(K[ie].x),H.push(K[ie].y)}return{flattened:H,holeIndices:B}})(l);let C;this._initializeVertices(g);try{const R=(function(H,K,ie=2){const ve=K&&K.length,we=ve?K[0]*ie:H.length;let Ee=iO(H,0,we,ie,!0);const Oe=[];if(!Ee||Ee.next===Ee.prev)return Oe;let Ge,at,Nt;if(ve&&(Ee=(function(vt,Et,Xt,or){const wr=[];for(let Zr=0,Fr=Et.length;Zr<Fr;Zr++){const Gr=iO(vt,Et[Zr]*or,Zr<Fr-1?Et[Zr+1]*or:vt.length,or,!1);Gr===Gr.next&&(Gr.steiner=!0),wr.push(ZZ(Gr))}wr.sort(GZ);for(let Zr=0;Zr<wr.length;Zr++)Xt=HZ(wr[Zr],Xt);return Xt})(H,K,Ee,ie)),H.length>80*ie){Ge=H[0],at=H[1];let vt=Ge,Et=at;for(let Xt=ie;Xt<we;Xt+=ie){const or=H[Xt],wr=H[Xt+1];or<Ge&&(Ge=or),wr<at&&(at=wr),or>vt&&(vt=or),wr>Et&&(Et=wr)}Nt=Math.max(vt-Ge,Et-at),Nt=Nt!==0?32767/Nt:0}return uy(Ee,Oe,ie,Ge,at,Nt,0),Oe})(g,b),B=this._convertIndices(g,R);C=this._subdivideTrianglesScanline(B)}catch(R){console.error(R)}let A=[];return c&&(A=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:A}}_convertIndices(l,c){const g=[];for(let b=0;b<c.length;b++)g.push(this._vertexToIndex(l[2*c[b]],l[2*c[b]+1]));return g}_pointArrayToIndices(l){const c=[];for(let g=0;g<l.length;g++){const b=l[g];c.push(this._vertexToIndex(b.x,b.y))}return c}}function uO(f,l,c,g=!0){return new XZ(c,l).subdividePolygonInternal(f,g)}function Pd(f,l,c=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const g=f[0],b=f[f.length-1],C=c&&(g.x!==b.x||g.y!==b.y);if(l<2)return C?[...f,f[0]]:[...f];const A=Math.floor(xe/l),R=[];R.push(new p(f[0].x,f[0].y));const B=f.length,H=C?B:B-1;for(let K=0;K<H;K++){const ie=f[K],ve=K<B-1?f[K+1]:f[0],we=ie.x,Ee=ie.y,Oe=ve.x,Ge=ve.y,at=we!==Oe,Nt=Ee!==Ge;if(!at&&!Nt)continue;const vt=Oe-we,Et=Ge-Ee,Xt=Math.abs(vt),or=Math.abs(Et);let wr=we,Zr=Ee;for(;;){const Gr=vt>0?(Math.floor(wr/A)+1)*A:(Math.ceil(wr/A)-1)*A,gn=Et>0?(Math.floor(Zr/A)+1)*A:(Math.ceil(Zr/A)-1)*A,qr=Math.abs(wr-Gr),Hr=Math.abs(Zr-gn),mr=Math.abs(wr-Oe),Ln=Math.abs(Zr-Ge),Fn=at?qr/Xt:Number.POSITIVE_INFINITY,wn=Nt?Hr/or:Number.POSITIVE_INFINITY;if((mr<=qr||!at)&&(Ln<=Hr||!Nt))break;if(Fn<wn&&at||!Nt){wr=Gr,Zr+=Et*Fn;const un=new p(wr,Math.round(Zr));R[R.length-1].x===un.x&&R[R.length-1].y===un.y||R.push(un)}else{wr+=vt*wn,Zr=gn;const un=new p(Math.round(wr),Zr);R[R.length-1].x===un.x&&R[R.length-1].y===un.y||R.push(un)}}const Fr=new p(Oe,Ge);R[R.length-1].x===Fr.x&&R[R.length-1].y===Fr.y||R.push(Fr)}return R}function YZ(f,l,c){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let g=0,b=f[2*l[0]];for(let B=1;B<l.length;B++){const H=f[2*l[B]];H<b&&(b=H,g=B)}const C=l.length;let A=g,R=(A+1)%C;for(;;){const B=A-1>=0?A-1:C-1,H=(R+1)%C,K=f[2*l[B]],ie=f[2*l[H]],ve=f[2*l[A]],we=f[2*l[A]+1],Ee=f[2*l[R]+1];let Oe=!1;if(K<ie)Oe=!0;else if(K>ie)Oe=!1;else{const Ge=Ee-we,at=-(f[2*l[R]]-ve),Nt=we<Ee?1:-1;((K-ve)*Ge+(f[2*l[B]+1]-we)*at)*Nt>((ie-ve)*Ge+(f[2*l[H]+1]-we)*at)*Nt&&(Oe=!0)}if(Oe){const Ge=l[B],at=l[A],Nt=l[R];Ge!==at&&Ge!==Nt&&at!==Nt&&c.push(Nt,at,Ge),A--,A<0&&(A=C-1)}else{const Ge=l[H],at=l[A],Nt=l[R];Ge!==at&&Ge!==Nt&&at!==Nt&&c.push(Nt,at,Ge),R++,R>=C&&(R=0)}if(B===H)break}}function cO(f,l,c,g,b,C,A,R,B){const H=b.length/2,K=A&&R&&B;if(H<kn.MAX_VERTEX_ARRAY_LENGTH){const ie=l.prepareSegment(H,c,g),ve=ie.vertexLength;for(let Oe=0;Oe<C.length;Oe+=3)g.emplaceBack(ve+C[Oe],ve+C[Oe+1],ve+C[Oe+2]);let we,Ee;ie.vertexLength+=H,ie.primitiveLength+=C.length/3,K&&(Ee=A.prepareSegment(H,c,R),we=Ee.vertexLength,Ee.vertexLength+=H);for(let Oe=0;Oe<b.length;Oe+=2)f(b[Oe],b[Oe+1]);if(K)for(let Oe=0;Oe<B.length;Oe++){const Ge=B[Oe];for(let at=1;at<Ge.length;at+=2)R.emplaceBack(we+Ge[at-1],we+Ge[at]);Ee.primitiveLength+=Ge.length/2}}else(function(ie,ve,we,Ee,Oe,Ge){const at=[];for(let or=0;or<Ee.length/2;or++)at.push(-1);const Nt={count:0};let vt=0,Et=ie.getOrCreateLatestSegment(ve,we),Xt=Et.vertexLength;for(let or=2;or<Oe.length;or+=3){const wr=Oe[or-2],Zr=Oe[or-1],Fr=Oe[or];let Gr=at[wr]<vt,gn=at[Zr]<vt,qr=at[Fr]<vt;Et.vertexLength+((Gr?1:0)+(gn?1:0)+(qr?1:0))>kn.MAX_VERTEX_ARRAY_LENGTH&&(Et=ie.createNewSegment(ve,we),vt=Nt.count,Gr=!0,gn=!0,qr=!0,Xt=0);const Hr=py(at,Ee,Ge,Nt,wr,Gr,Et),mr=py(at,Ee,Ge,Nt,Zr,gn,Et),Ln=py(at,Ee,Ge,Nt,Fr,qr,Et);we.emplaceBack(Xt+Hr-vt,Xt+mr-vt,Xt+Ln-vt),Et.primitiveLength++}})(l,c,g,b,C,f),K&&(function(ie,ve,we,Ee,Oe,Ge){const at=[];for(let or=0;or<Ee.length/2;or++)at.push(-1);const Nt={count:0};let vt=0,Et=ie.getOrCreateLatestSegment(ve,we),Xt=Et.vertexLength;for(let or=0;or<Oe.length;or++){const wr=Oe[or];for(let Zr=1;Zr<Oe[or].length;Zr+=2){const Fr=wr[Zr-1],Gr=wr[Zr];let gn=at[Fr]<vt,qr=at[Gr]<vt;Et.vertexLength+((gn?1:0)+(qr?1:0))>kn.MAX_VERTEX_ARRAY_LENGTH&&(Et=ie.createNewSegment(ve,we),vt=Nt.count,gn=!0,qr=!0,Xt=0);const Hr=py(at,Ee,Ge,Nt,Fr,gn,Et),mr=py(at,Ee,Ge,Nt,Gr,qr,Et);we.emplaceBack(Xt+Hr-vt,Xt+mr-vt),Et.primitiveLength++}}})(A,c,R,b,B,f),l.forceNewSegmentOnNextPrepare(),A?.forceNewSegmentOnNextPrepare()}function py(f,l,c,g,b,C,A){if(C){const R=g.count;return c(l[2*b],l[2*b+1]),f[b]=g.count,g.count++,A.vertexLength++,R}return f[b]}class q2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nr,this.indexArray=new Ri,this.indexArray2=new wi,this.programConfigurations=new Il(l.layers,l.zoom),this.segments=new kn,this.segments2=new kn,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(l,c,g){this.hasPattern=j2("fill",this.layers,c);const b=this.layers[0].layout.get("fill-sort-key"),C=!b.isConstant(),A=[];for(const{feature:R,id:B,index:H,sourceLayerIndex:K}of l){const ie=this.layers[0]._featureFilter.needGeometry,ve=mc(R,ie);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom,{globalState:this.globalState}),ve,g))continue;const we=C?b.evaluate(ve,{},g,c.availableImages):void 0,Ee={id:B,properties:R.properties,type:R.type,sourceLayerIndex:K,index:H,geometry:ie?ve.geometry:tf(R),patterns:{},sortKey:we};A.push(Ee)}C&&A.sort(((R,B)=>R.sortKey-B.sortKey));for(const R of A){const{geometry:B,index:H,sourceLayerIndex:K}=R;if(this.hasPattern){const ie=z2("fill",this.layers,R,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ie)}else this.addFeature(R,B,H,g,{},c.subdivisionGranularity);c.featureIndex.insert(l[H].feature,B,H,K,this.index)}}update(l,c,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,c,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,c,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,c,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,zZ),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,c,g,b,C,A){for(const R of Zi(c,500)){const B=uO(R,b,A.fill.getGranularityForZoomLevel(b.z)),H=this.layoutVertexArray;cO(((K,ie)=>{H.emplaceBack(K,ie)}),this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles,this.segments2,this.indexArray2,B.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:C,canonical:b,globalState:this.globalState})}}let fO,hO;Te("FillBucket",q2,{omit:["layers","patternFeatures"]});var JZ={get paint(){return hO=hO||new mi({"fill-antialias":new Jr(bt.paint_fill["fill-antialias"]),"fill-opacity":new on(bt.paint_fill["fill-opacity"]),"fill-color":new on(bt.paint_fill["fill-color"]),"fill-outline-color":new on(bt.paint_fill["fill-outline-color"]),"fill-translate":new Jr(bt.paint_fill["fill-translate"]),"fill-translate-anchor":new Jr(bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ea(bt.paint_fill["fill-pattern"])})},get layout(){return fO=fO||new mi({"fill-sort-key":new on(bt.layout_fill["fill-sort-key"])})}};class QZ extends Vi{constructor(l){super(l,JZ)}recalculate(l,c){super.recalculate(l,c);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new q2(l)}queryRadius(){return ob(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:c,transform:g,pixelsToTileUnits:b}){return VR(sb(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-g.bearingInRadians,b),c)}isTileClipped(){return!0}}const eK=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tK=Bn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rK}=eK;class Kp{constructor(l,c,g,b,C){this.properties={},this.extent=g,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=C,l.readFields(nK,this,c)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const c=l.readVarint()+l.pos,g=[];let b,C=1,A=0,R=0,B=0;for(;l.pos<c;){if(A<=0){const H=l.readVarint();C=7&H,A=H>>3}if(A--,C===1||C===2)R+=l.readSVarint(),B+=l.readSVarint(),C===1&&(b&&g.push(b),b=[]),b&&b.push(new p(R,B));else{if(C!==7)throw new Error(`unknown command ${C}`);b&&b.push(b[0].clone())}}return b&&g.push(b),g}bbox(){const l=this._pbf;l.pos=this._geometry;const c=l.readVarint()+l.pos;let g=1,b=0,C=0,A=0,R=1/0,B=-1/0,H=1/0,K=-1/0;for(;l.pos<c;){if(b<=0){const ie=l.readVarint();g=7&ie,b=ie>>3}if(b--,g===1||g===2)C+=l.readSVarint(),A+=l.readSVarint(),C<R&&(R=C),C>B&&(B=C),A<H&&(H=A),A>K&&(K=A);else if(g!==7)throw new Error(`unknown command ${g}`)}return[R,H,B,K]}toGeoJSON(l,c,g){const b=this.extent*Math.pow(2,g),C=this.extent*l,A=this.extent*c,R=this.loadGeometry();function B(ve){return[360*(ve.x+C)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(ve.y+A)/b)*Math.PI))-90]}function H(ve){return ve.map(B)}let K;if(this.type===1){const ve=[];for(const Ee of R)ve.push(Ee[0]);const we=H(ve);K=ve.length===1?{type:"Point",coordinates:we[0]}:{type:"MultiPoint",coordinates:we}}else if(this.type===2){const ve=R.map(H);K=ve.length===1?{type:"LineString",coordinates:ve[0]}:{type:"MultiLineString",coordinates:ve}}else{if(this.type!==3)throw new Error("unknown feature type");{const ve=(function(Ee){const Oe=Ee.length;if(Oe<=1)return[Ee];const Ge=[];let at,Nt;for(let vt=0;vt<Oe;vt++){const Et=iK(Ee[vt]);Et!==0&&(Nt===void 0&&(Nt=Et<0),Nt===Et<0?(at&&Ge.push(at),at=[Ee[vt]]):at&&at.push(Ee[vt]))}return at&&Ge.push(at),Ge})(R),we=[];for(const Ee of ve)we.push(Ee.map(H));K=we.length===1?{type:"Polygon",coordinates:we[0]}:{type:"MultiPolygon",coordinates:we}}}const ie={type:"Feature",geometry:K,properties:this.properties};return this.id!=null&&(ie.id=this.id),ie}}function nK(f,l,c){f===1?l.id=c.readVarint():f===2?(function(g,b){const C=g.readVarint()+g.pos;for(;g.pos<C;){const A=b._keys[g.readVarint()],R=b._values[g.readVarint()];b.properties[A]=R}})(c,l):f===3?l.type=c.readVarint():f===4&&(l._geometry=c.pos)}function iK(f){let l=0;for(let c,g,b=0,C=f.length,A=C-1;b<C;A=b++)c=f[b],g=f[A],l+=(g.x-c.x)*(c.y+g.y);return l}Kp.types=["Unknown","Point","LineString","Polygon"];class dO{constructor(l,c){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(aK,this,c),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const c=this._pbf.readVarint()+this._pbf.pos;return new Kp(this._pbf,c,this.extent,this._keys,this._values)}}function aK(f,l,c){f===15?l.version=c.readVarint():f===1?l.name=c.readString():f===5?l.extent=c.readVarint():f===2?l._features.push(c.pos):f===3?l._keys.push(c.readString()):f===4&&l._values.push((function(g){let b=null;const C=g.readVarint()+g.pos;for(;g.pos<C;){const A=g.readVarint()>>3;b=A===1?g.readString():A===2?g.readFloat():A===3?g.readDouble():A===4?g.readVarint64():A===5?g.readVarint():A===6?g.readSVarint():A===7?g.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b})(c))}class pO{constructor(l,c){this.layers=l.readFields(oK,{},c)}}function oK(f,l,c){if(f===3){const g=new dO(c,c.readVarint()+c.pos);g.length&&(l[g.name]=g)}}const V2=Math.pow(2,13);function my(f,l,c,g,b,C,A,R){f.emplaceBack(l,c,2*Math.floor(g*V2)+A,b*V2*2,C*V2*2,Math.round(R))}class G2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Ht,this.centroidVertexArray=new ft,this.indexArray=new Ri,this.programConfigurations=new Il(l.layers,l.zoom),this.segments=new kn,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(l,c,g){this.features=[],this.hasPattern=j2("fill-extrusion",this.layers,c);for(const{feature:b,id:C,index:A,sourceLayerIndex:R}of l){const B=this.layers[0]._featureFilter.needGeometry,H=mc(b,B);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom,{globalState:this.globalState}),H,g))continue;const K={id:C,sourceLayerIndex:R,index:A,geometry:B?H.geometry:tf(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(z2("fill-extrusion",this.layers,K,{zoom:this.zoom,globalState:this.globalState},c)):this.addFeature(K,K.geometry,A,g,{},c.subdivisionGranularity),c.featureIndex.insert(b,K.geometry,A,R,this.index,!0)}}addFeatures(l,c,g){for(const b of this.features){const{geometry:C}=b;this.addFeature(b,C,b.index,c,g,l.subdivisionGranularity)}}update(l,c,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,c,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,rK),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,tK.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,c,g,b,C,A){for(const R of Zi(c,500)){const B={x:0,y:0,sampleCount:0},H=this.layoutVertexArray.length;this.processPolygon(B,b,l,R,A);const K=this.layoutVertexArray.length-H,ie=Math.floor(B.x/B.sampleCount),ve=Math.floor(B.y/B.sampleCount);for(let we=0;we<K;we++)this.centroidVertexArray.emplaceBack(ie,ve)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:C,canonical:b,globalState:this.globalState})}processPolygon(l,c,g,b,C){if(b.length<1||mO(b[0]))return;for(const ie of b)ie.length!==0&&sK(l,ie);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},R=C.fill.getGranularityForZoomLevel(c.z),B=Kp.types[g.type]==="Polygon";for(const ie of b){if(ie.length===0||mO(ie))continue;const ve=Pd(ie,R,B);this._generateSideFaces(ve,A)}if(!B)return;const H=uO(b,c,R,!1),K=this.layoutVertexArray;cO(((ie,ve)=>{my(K,ie,ve,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,H.verticesFlattened,H.indicesTriangles)}_generateSideFaces(l,c){let g=0;for(let b=1;b<l.length;b++){const C=l[b],A=l[b-1];if(lK(C,A))continue;c.segment.vertexLength+4>kn.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const R=C.sub(A)._perp()._unit(),B=A.dist(C);g+B>32768&&(g=0),my(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,0,g),my(this.layoutVertexArray,C.x,C.y,R.x,R.y,0,1,g),g+=B,my(this.layoutVertexArray,A.x,A.y,R.x,R.y,0,0,g),my(this.layoutVertexArray,A.x,A.y,R.x,R.y,0,1,g);const H=c.segment.vertexLength;this.indexArray.emplaceBack(H,H+2,H+1),this.indexArray.emplaceBack(H+1,H+2,H+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function sK(f,l){for(let c=0;c<l.length;c++){const g=l[c];c===l.length-1&&l[0].x===g.x&&l[0].y===g.y||(f.x+=g.x,f.y+=g.y,f.sampleCount++)}}function lK(f,l){return f.x===l.x&&(f.x<0||f.x>xe)||f.y===l.y&&(f.y<0||f.y>xe)}function mO(f){return f.every((l=>l.x<0))||f.every((l=>l.x>xe))||f.every((l=>l.y<0))||f.every((l=>l.y>xe))}let gO;Te("FillExtrusionBucket",G2,{omit:["layers","features"]});var uK={get paint(){return gO=gO||new mi({"fill-extrusion-opacity":new Jr(bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jr(bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jr(bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ea(bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new on(bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jr(bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class cK extends Vi{constructor(l){super(l,uK)}createBucket(l){return new G2(l)}queryRadius(){return ob(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:c,featureState:g,geometry:b,transform:C,pixelsToTileUnits:A,pixelPosMatrix:R}){const B=sb(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,A),H=this.paint.get("fill-extrusion-height").evaluate(c,g),K=this.paint.get("fill-extrusion-base").evaluate(c,g),ie=(function(we,Ee){const Oe=[];for(const Ge of we){const at=[Ge.x,Ge.y,0,1];le(at,at,Ee),Oe.push(new p(at[0]/at[3],at[1]/at[3]))}return Oe})(B,R),ve=(function(we,Ee,Oe,Ge){const at=[],Nt=[],vt=Ge[8]*Ee,Et=Ge[9]*Ee,Xt=Ge[10]*Ee,or=Ge[11]*Ee,wr=Ge[8]*Oe,Zr=Ge[9]*Oe,Fr=Ge[10]*Oe,Gr=Ge[11]*Oe;for(const gn of we){const qr=[],Hr=[];for(const mr of gn){const Ln=mr.x,Fn=mr.y,wn=Ge[0]*Ln+Ge[4]*Fn+Ge[12],un=Ge[1]*Ln+Ge[5]*Fn+Ge[13],ui=Ge[2]*Ln+Ge[6]*Fn+Ge[14],Da=Ge[3]*Ln+Ge[7]*Fn+Ge[15],No=ui+Xt,As=Da+or,Eu=wn+wr,Rl=un+Zr,ps=ui+Fr,Pa=Da+Gr,Jo=new p((wn+vt)/As,(un+Et)/As);Jo.z=No/As,qr.push(Jo);const ms=new p(Eu/Pa,Rl/Pa);ms.z=ps/Pa,Hr.push(ms)}at.push(qr),Nt.push(Hr)}return[at,Nt]})(b,K,H,R);return(function(we,Ee,Oe){let Ge=1/0;VR(Oe,Ee)&&(Ge=yO(Oe,Ee[0]));for(let at=0;at<Ee.length;at++){const Nt=Ee[at],vt=we[at];for(let Et=0;Et<Nt.length-1;Et++){const Xt=Nt[Et],or=[Xt,Nt[Et+1],vt[Et+1],vt[Et],Xt];qR(Oe,or)&&(Ge=Math.min(Ge,yO(Oe,or)))}}return Ge!==1/0&&Ge})(ve[0],ve[1],ie)}}function gy(f,l){return f.x*l.x+f.y*l.y}function yO(f,l){if(f.length===1){let c=0;const g=l[c++];let b;for(;!b||g.equals(b);)if(b=l[c++],!b)return 1/0;for(;c<l.length;c++){const C=l[c],A=f[0],R=b.sub(g),B=C.sub(g),H=A.sub(g),K=gy(R,R),ie=gy(R,B),ve=gy(B,B),we=gy(H,R),Ee=gy(H,B),Oe=K*ve-ie*ie,Ge=(ve*we-ie*Ee)/Oe,at=(K*Ee-ie*we)/Oe,Nt=g.z*(1-Ge-at)+b.z*Ge+C.z*at;if(isFinite(Nt))return Nt}return 1/0}{let c=1/0;for(const g of l)c=Math.min(c,g.z);return c}}const fK=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hK}=fK,dK=Bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:pK}=dK,mK=Math.cos(Math.PI/180*37.5),vO=Math.pow(2,14)/.5;class H2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((c=>c.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((c=>{this.gradients[c.id]={}})),this.layoutVertexArray=new Zt,this.layoutVertexArray2=new Qt,this.indexArray=new Ri,this.programConfigurations=new Il(l.layers,l.zoom),this.segments=new kn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((c=>c.isStateDependent())).map((c=>c.id))}populate(l,c,g){this.hasPattern=j2("line",this.layers,c);const b=this.layers[0].layout.get("line-sort-key"),C=!b.isConstant(),A=[];for(const{feature:R,id:B,index:H,sourceLayerIndex:K}of l){const ie=this.layers[0]._featureFilter.needGeometry,ve=mc(R,ie);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom,{globalState:this.globalState}),ve,g))continue;const we=C?b.evaluate(ve,{},g):void 0,Ee={id:B,properties:R.properties,type:R.type,sourceLayerIndex:K,index:H,geometry:ie?ve.geometry:tf(R),patterns:{},sortKey:we};A.push(Ee)}C&&A.sort(((R,B)=>R.sortKey-B.sortKey));for(const R of A){const{geometry:B,index:H,sourceLayerIndex:K}=R;if(this.hasPattern){const ie=z2("line",this.layers,R,{zoom:this.zoom,globalState:this.globalState},c);this.patternFeatures.push(ie)}else this.addFeature(R,B,H,g,{},c.subdivisionGranularity);c.featureIndex.insert(l[H].feature,B,H,K,this.index)}}update(l,c,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,c,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,c,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,c,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,pK)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,hK),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,c,g,b,C,A){const R=this.layers[0].layout,B=R.get("line-join").evaluate(l,{}),H=R.get("line-cap"),K=R.get("line-miter-limit"),ie=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ve of c)this.addLine(ve,l,B,H,K,ie,b,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:C,canonical:b,globalState:this.globalState})}addLine(l,c,g,b,C,A,R,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Pd(l,R?B.line.getGranularityForZoomLevel(R.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let vt=0;vt<l.length-1;vt++)this.totalDistance+=l[vt].dist(l[vt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const H=Kp.types[c.type]==="Polygon";let K=l.length;for(;K>=2&&l[K-1].equals(l[K-2]);)K--;let ie=0;for(;ie<K-1&&l[ie].equals(l[ie+1]);)ie++;if(K<(H?3:2))return;g==="bevel"&&(C=1.05);const ve=this.overscaling<=16?122880/(512*this.overscaling):0,we=this.segments.prepareSegment(10*K,this.layoutVertexArray,this.indexArray);let Ee,Oe,Ge,at,Nt;this.e1=this.e2=-1,H&&(Ee=l[K-2],Nt=l[ie].sub(Ee)._unit()._perp());for(let vt=ie;vt<K;vt++){if(Ge=vt===K-1?H?l[ie+1]:void 0:l[vt+1],Ge&&l[vt].equals(Ge))continue;Nt&&(at=Nt),Ee&&(Oe=Ee),Ee=l[vt],Nt=Ge?Ge.sub(Ee)._unit()._perp():at,at=at||Nt;let Et=at.add(Nt);Et.x===0&&Et.y===0||Et._unit();const Xt=at.x*Nt.x+at.y*Nt.y,or=Et.x*Nt.x+Et.y*Nt.y,wr=or!==0?1/or:1/0,Zr=2*Math.sqrt(2-2*or),Fr=or<mK&&Oe&&Ge,Gr=at.x*Nt.y-at.y*Nt.x>0;if(Fr&&vt>ie){const Hr=Ee.dist(Oe);if(Hr>2*ve){const mr=Ee.sub(Ee.sub(Oe)._mult(ve/Hr)._round());this.updateDistance(Oe,mr),this.addCurrentVertex(mr,at,0,0,we),Oe=mr}}const gn=Oe&&Ge;let qr=gn?g:H?"butt":b;if(gn&&qr==="round"&&(wr<A?qr="miter":wr<=2&&(qr="fakeround")),qr==="miter"&&wr>C&&(qr="bevel"),qr==="bevel"&&(wr>2&&(qr="flipbevel"),wr<C&&(qr="miter")),Oe&&this.updateDistance(Oe,Ee),qr==="miter")Et._mult(wr),this.addCurrentVertex(Ee,Et,0,0,we);else if(qr==="flipbevel"){if(wr>100)Et=Nt.mult(-1);else{const Hr=wr*at.add(Nt).mag()/at.sub(Nt).mag();Et._perp()._mult(Hr*(Gr?-1:1))}this.addCurrentVertex(Ee,Et,0,0,we),this.addCurrentVertex(Ee,Et.mult(-1),0,0,we)}else if(qr==="bevel"||qr==="fakeround"){const Hr=-Math.sqrt(wr*wr-1),mr=Gr?Hr:0,Ln=Gr?0:Hr;if(Oe&&this.addCurrentVertex(Ee,at,mr,Ln,we),qr==="fakeround"){const Fn=Math.round(180*Zr/Math.PI/20);for(let wn=1;wn<Fn;wn++){let un=wn/Fn;if(un!==.5){const Da=un-.5;un+=un*Da*(un-1)*((1.0904+Xt*(Xt*(3.55645-1.43519*Xt)-3.2452))*Da*Da+(.848013+Xt*(.215638*Xt-1.06021)))}const ui=Nt.sub(at)._mult(un)._add(at)._unit()._mult(Gr?-1:1);this.addHalfVertex(Ee,ui.x,ui.y,!1,Gr,0,we)}}Ge&&this.addCurrentVertex(Ee,Nt,-mr,-Ln,we)}else if(qr==="butt")this.addCurrentVertex(Ee,Et,0,0,we);else if(qr==="square"){const Hr=Oe?1:-1;this.addCurrentVertex(Ee,Et,Hr,Hr,we)}else qr==="round"&&(Oe&&(this.addCurrentVertex(Ee,at,0,0,we),this.addCurrentVertex(Ee,at,1,1,we,!0)),Ge&&(this.addCurrentVertex(Ee,Nt,-1,-1,we,!0),this.addCurrentVertex(Ee,Nt,0,0,we)));if(Fr&&vt<K-1){const Hr=Ee.dist(Ge);if(Hr>2*ve){const mr=Ee.add(Ge.sub(Ee)._mult(ve/Hr)._round());this.updateDistance(Ee,mr),this.addCurrentVertex(mr,Nt,0,0,we),Ee=mr}}}}addCurrentVertex(l,c,g,b,C,A=!1){const R=c.y*b-c.x,B=-c.y-c.x*b;this.addHalfVertex(l,c.x+c.y*g,c.y-c.x*g,A,!1,g,C),this.addHalfVertex(l,R,B,A,!0,-b,C),this.distance>vO/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,c,g,b,C,A))}addHalfVertex({x:l,y:c},g,b,C,A,R,B){const H=.5*(this.lineClips?this.scaledDistance*(vO-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(C?1:0),(c<<1)+(A?1:0),Math.round(63*g)+128,Math.round(63*b)+128,1+(R===0?0:R<0?-1:1)|(63&H)<<2,H>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const K=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,K,this.e2),B.primitiveLength++),A?this.e2=K:this.e1=K}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,c){this.distance+=l.dist(c),this.updateScaledDistance()}}let bO,_O;Te("LineBucket",H2,{omit:["layers","patternFeatures"]});var xO={get paint(){return _O=_O||new mi({"line-opacity":new on(bt.paint_line["line-opacity"]),"line-color":new on(bt.paint_line["line-color"]),"line-translate":new Jr(bt.paint_line["line-translate"]),"line-translate-anchor":new Jr(bt.paint_line["line-translate-anchor"]),"line-width":new on(bt.paint_line["line-width"]),"line-gap-width":new on(bt.paint_line["line-gap-width"]),"line-offset":new on(bt.paint_line["line-offset"]),"line-blur":new on(bt.paint_line["line-blur"]),"line-dasharray":new ii(bt.paint_line["line-dasharray"]),"line-pattern":new Ea(bt.paint_line["line-pattern"]),"line-gradient":new Ci(bt.paint_line["line-gradient"])})},get layout(){return bO=bO||new mi({"line-cap":new Jr(bt.layout_line["line-cap"]),"line-join":new on(bt.layout_line["line-join"]),"line-miter-limit":new Jr(bt.layout_line["line-miter-limit"]),"line-round-limit":new Jr(bt.layout_line["line-round-limit"]),"line-sort-key":new on(bt.layout_line["line-sort-key"])})}};class gK extends on{possiblyEvaluate(l,c){return c=new Wr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(l,c)}evaluate(l,c,g,b){return c=At({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(l,c,g,b)}}let fb;class yK extends Vi{constructor(l){super(l,xO),this.gradientVersion=0,fb||(fb=new gK(xO.paint.properties["line-width"].specification),fb.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!(function(g){return g._styleExpression!==void 0})(c)&&c._styleExpression.expression instanceof et,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,c){super.recalculate(l,c),this.paint._values["line-floorwidth"]=fb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new H2(l)}queryRadius(l){const c=l,g=wO(sy("line-width",this,c),sy("line-gap-width",this,c)),b=sy("line-offset",this,c);return g/2+Math.abs(b)+ob(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:c,featureState:g,geometry:b,transform:C,pixelsToTileUnits:A}){const R=sb(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,A),B=A/2*wO(this.paint.get("line-width").evaluate(c,g),this.paint.get("line-gap-width").evaluate(c,g)),H=this.paint.get("line-offset").evaluate(c,g);return H&&(b=(function(K,ie){const ve=[];for(let we=0;we<K.length;we++){const Ee=K[we],Oe=[];for(let Ge=0;Ge<Ee.length;Ge++){const at=Ee[Ge-1],Nt=Ee[Ge],vt=Ee[Ge+1],Et=Ge===0?new p(0,0):Nt.sub(at)._unit()._perp(),Xt=Ge===Ee.length-1?new p(0,0):vt.sub(Nt)._unit()._perp(),or=Et._add(Xt)._unit(),wr=or.x*Xt.x+or.y*Xt.y;wr!==0&&or._mult(1/wr),Oe.push(or._mult(ie)._add(Nt))}ve.push(Oe)}return ve})(b,H*A)),(function(K,ie,ve){for(let we=0;we<ie.length;we++){const Ee=ie[we];if(K.length>=3){for(let Oe=0;Oe<Ee.length;Oe++)if(Gp(K,Ee[Oe]))return!0}if(TZ(K,Ee,ve))return!0}return!1})(R,b,B)}isTileClipped(){return!0}}function wO(f,l){return l>0?l+2*f:f}const vK=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bK=Bn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const _K=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const SO=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xK=Bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wK(f,l,c){return f.sections.forEach((g=>{g.text=(function(b,C,A){const R=C.layout.get("text-transform").evaluate(A,{});return R==="uppercase"?b=b.toLocaleUpperCase():R==="lowercase"&&(b=b.toLocaleLowerCase()),Nn.applyArabicShaping&&(b=Nn.applyArabicShaping(b)),b})(g.text,l,c)})),f}Bn([{name:"triangle",components:3,type:"Uint16"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Bn([{type:"Float32",name:"offsetX"}]),Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Bn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const yy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Yo=24;const W2=4294967296,EO=1/W2,CO=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Z2{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,c,g=this.length){for(;this.pos<g;){const b=this.readVarint(),C=b>>3,A=this.pos;this.type=7&b,l(C,c,this),this.pos===A&&this.skip(b)}return c}readMessage(l,c){return this.readFields(l,c,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*W2;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*W2;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const c=this.buf;let g,b;return b=c[this.pos++],g=127&b,b<128?g:(b=c[this.pos++],g|=(127&b)<<7,b<128?g:(b=c[this.pos++],g|=(127&b)<<14,b<128?g:(b=c[this.pos++],g|=(127&b)<<21,b<128?g:(b=c[this.pos],g|=(15&b)<<28,(function(C,A,R){const B=R.buf;let H,K;if(K=B[R.pos++],H=(112&K)>>4,K<128||(K=B[R.pos++],H|=(127&K)<<3,K<128)||(K=B[R.pos++],H|=(127&K)<<10,K<128)||(K=B[R.pos++],H|=(127&K)<<17,K<128)||(K=B[R.pos++],H|=(127&K)<<24,K<128)||(K=B[R.pos++],H|=(1&K)<<31,K<128))return Xp(C,H,A);throw new Error("Expected varint not more than 10 bytes")})(g,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,c=this.pos;return this.pos=l,l-c>=12&&CO?CO.decode(this.buf.subarray(c,l)):(function(g,b,C){let A="",R=b;for(;R<C;){const B=g[R];let H,K,ie,ve=null,we=B>239?4:B>223?3:B>191?2:1;if(R+we>C)break;we===1?B<128&&(ve=B):we===2?(H=g[R+1],(192&H)==128&&(ve=(31&B)<<6|63&H,ve<=127&&(ve=null))):we===3?(H=g[R+1],K=g[R+2],(192&H)==128&&(192&K)==128&&(ve=(15&B)<<12|(63&H)<<6|63&K,(ve<=2047||ve>=55296&&ve<=57343)&&(ve=null))):we===4&&(H=g[R+1],K=g[R+2],ie=g[R+3],(192&H)==128&&(192&K)==128&&(192&ie)==128&&(ve=(15&B)<<18|(63&H)<<12|(63&K)<<6|63&ie,(ve<=65535||ve>=1114112)&&(ve=null))),ve===null?(ve=65533,we=1):ve>65535&&(ve-=65536,A+=String.fromCharCode(ve>>>10&1023|55296),ve=56320|1023&ve),A+=String.fromCharCode(ve),R+=we}return A})(this.buf,c,l)}readBytes(){const l=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,l);return this.pos=l,c}readPackedVarint(l=[],c){const g=this.readPackedEnd();for(;this.pos<g;)l.push(this.readVarint(c));return l}readPackedSVarint(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const c=this.readPackedEnd();for(;this.pos<c;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const c=7&l;if(c===0)for(;this.buf[this.pos++]>127;);else if(c===2)this.pos=this.readVarint()+this.pos;else if(c===5)this.pos+=4;else{if(c!==1)throw new Error(`Unimplemented type: ${c}`);this.pos+=8}}writeTag(l,c){this.writeVarint(l<<3|c)}realloc(l){let c=this.length||16;for(;c<this.pos+l;)c*=2;if(c!==this.length){const g=new Uint8Array(c);g.set(this.buf),this.buf=g,this.dataView=new DataView(g.buffer),this.length=c}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*EO),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*EO),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(c,g){let b,C;if(c>=0?(b=c%4294967296|0,C=c/4294967296|0):(b=~(-c%4294967296),C=~(-c/4294967296),4294967295^b?b=b+1|0:(b=0,C=C+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),(function(A,R,B){B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,A>>>=7,B.buf[B.pos++]=127&A|128,B.buf[B.pos]=127&(A>>>=7)})(b,0,g),(function(A,R){const B=(7&A)<<4;R.buf[R.pos++]|=B|((A>>>=3)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A|((A>>>=7)?128:0),A&&(R.buf[R.pos++]=127&A)))))})(C,g)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const c=this.pos;this.pos=(function(b,C,A){for(let R,B,H=0;H<C.length;H++){if(R=C.charCodeAt(H),R>55295&&R<57344){if(!B){R>56319||H+1===C.length?(b[A++]=239,b[A++]=191,b[A++]=189):B=R;continue}if(R<56320){b[A++]=239,b[A++]=191,b[A++]=189,B=R;continue}R=B-55296<<10|R-56320|65536,B=null}else B&&(b[A++]=239,b[A++]=191,b[A++]=189,B=null);R<128?b[A++]=R:(R<2048?b[A++]=R>>6|192:(R<65536?b[A++]=R>>12|224:(b[A++]=R>>18|240,b[A++]=R>>12&63|128),b[A++]=R>>6&63|128),b[A++]=63&R|128)}return A})(this.buf,l,this.pos);const g=this.pos-c;g>=128&&AO(c,g,this),this.pos=c-1,this.writeVarint(g),this.pos+=g}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const c=l.length;this.writeVarint(c),this.realloc(c);for(let g=0;g<c;g++)this.buf[this.pos++]=l[g]}writeRawMessage(l,c){this.pos++;const g=this.pos;l(c,this);const b=this.pos-g;b>=128&&AO(g,b,this),this.pos=g-1,this.writeVarint(b),this.pos+=b}writeMessage(l,c,g){this.writeTag(l,2),this.writeRawMessage(c,g)}writePackedVarint(l,c){c.length&&this.writeMessage(l,SK,c)}writePackedSVarint(l,c){c.length&&this.writeMessage(l,EK,c)}writePackedBoolean(l,c){c.length&&this.writeMessage(l,PK,c)}writePackedFloat(l,c){c.length&&this.writeMessage(l,CK,c)}writePackedDouble(l,c){c.length&&this.writeMessage(l,AK,c)}writePackedFixed32(l,c){c.length&&this.writeMessage(l,TK,c)}writePackedSFixed32(l,c){c.length&&this.writeMessage(l,IK,c)}writePackedFixed64(l,c){c.length&&this.writeMessage(l,MK,c)}writePackedSFixed64(l,c){c.length&&this.writeMessage(l,RK,c)}writeBytesField(l,c){this.writeTag(l,2),this.writeBytes(c)}writeFixed32Field(l,c){this.writeTag(l,5),this.writeFixed32(c)}writeSFixed32Field(l,c){this.writeTag(l,5),this.writeSFixed32(c)}writeFixed64Field(l,c){this.writeTag(l,1),this.writeFixed64(c)}writeSFixed64Field(l,c){this.writeTag(l,1),this.writeSFixed64(c)}writeVarintField(l,c){this.writeTag(l,0),this.writeVarint(c)}writeSVarintField(l,c){this.writeTag(l,0),this.writeSVarint(c)}writeStringField(l,c){this.writeTag(l,2),this.writeString(c)}writeFloatField(l,c){this.writeTag(l,5),this.writeFloat(c)}writeDoubleField(l,c){this.writeTag(l,1),this.writeDouble(c)}writeBooleanField(l,c){this.writeVarintField(l,+c)}}function Xp(f,l,c){return c?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function AO(f,l,c){const g=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));c.realloc(g);for(let b=c.pos-1;b>=f;b--)c.buf[b+g]=c.buf[b]}function SK(f,l){for(let c=0;c<f.length;c++)l.writeVarint(f[c])}function EK(f,l){for(let c=0;c<f.length;c++)l.writeSVarint(f[c])}function CK(f,l){for(let c=0;c<f.length;c++)l.writeFloat(f[c])}function AK(f,l){for(let c=0;c<f.length;c++)l.writeDouble(f[c])}function PK(f,l){for(let c=0;c<f.length;c++)l.writeBoolean(f[c])}function TK(f,l){for(let c=0;c<f.length;c++)l.writeFixed32(f[c])}function IK(f,l){for(let c=0;c<f.length;c++)l.writeSFixed32(f[c])}function MK(f,l){for(let c=0;c<f.length;c++)l.writeFixed64(f[c])}function RK(f,l){for(let c=0;c<f.length;c++)l.writeSFixed64(f[c])}function OK(f,l,c){f===1&&c.readMessage(kK,l)}function kK(f,l,c){if(f===3){const{id:g,bitmap:b,width:C,height:A,left:R,top:B,advance:H}=c.readMessage(LK,{});l.push({id:g,bitmap:new ly({width:C+6,height:A+6},b),metrics:{width:C,height:A,left:R,top:B,advance:H}})}}function LK(f,l,c){f===1?l.id=c.readVarint():f===2?l.bitmap=c.readBytes():f===3?l.width=c.readVarint():f===4?l.height=c.readVarint():f===5?l.left=c.readSVarint():f===6?l.top=c.readSVarint():f===7&&(l.advance=c.readVarint())}function PO(f){let l=0,c=0;for(const A of f)l+=A.w*A.h,c=Math.max(c,A.w);f.sort(((A,R)=>R.h-A.h));const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),c),h:1/0}];let b=0,C=0;for(const A of f)for(let R=g.length-1;R>=0;R--){const B=g[R];if(!(A.w>B.w||A.h>B.h)){if(A.x=B.x,A.y=B.y,C=Math.max(C,A.y+A.h),b=Math.max(b,A.x+A.w),A.w===B.w&&A.h===B.h){const H=g.pop();H&&R<g.length&&(g[R]=H)}else A.h===B.h?(B.x+=A.w,B.w-=A.w):A.w===B.w?(B.y+=A.h,B.h-=A.h):(g.push({x:B.x+A.w,y:B.y,w:B.w-A.w,h:A.h}),B.y+=A.h,B.h-=A.h);break}}return{w:b,h:C,fill:l/(b*C)||0}}class K2{constructor(l,{pixelRatio:c,version:g,stretchX:b,stretchY:C,content:A,textFitWidth:R,textFitHeight:B}){this.paddedRect=l,this.pixelRatio=c,this.stretchX=b,this.stretchY=C,this.content=A,this.version=g,this.textFitWidth=R,this.textFitHeight=B}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class TO{constructor(l,c){const g={},b={};this.haveRenderCallbacks=[];const C=[];this.addImages(l,g,C),this.addImages(c,b,C);const{w:A,h:R}=PO(C),B=new Ml({width:A||1,height:R||1});for(const H in l){const K=l[H],ie=g[H].paddedRect;Ml.copy(K.data,B,{x:0,y:0},{x:ie.x+1,y:ie.y+1},K.data)}for(const H in c){const K=c[H],ie=b[H].paddedRect,ve=ie.x+1,we=ie.y+1,Ee=K.data.width,Oe=K.data.height;Ml.copy(K.data,B,{x:0,y:0},{x:ve,y:we},K.data),Ml.copy(K.data,B,{x:0,y:Oe-1},{x:ve,y:we-1},{width:Ee,height:1}),Ml.copy(K.data,B,{x:0,y:0},{x:ve,y:we+Oe},{width:Ee,height:1}),Ml.copy(K.data,B,{x:Ee-1,y:0},{x:ve-1,y:we},{width:1,height:Oe}),Ml.copy(K.data,B,{x:0,y:0},{x:ve+Ee,y:we},{width:1,height:Oe})}this.image=B,this.iconPositions=g,this.patternPositions=b}addImages(l,c,g){for(const b in l){const C=l[b],A={x:0,y:0,w:C.data.width+2,h:C.data.height+2};g.push(A),c[b]=new K2(A,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,c){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in l.updatedImages)this.patchUpdatedImage(this.iconPositions[g],l.getImage(g),c),this.patchUpdatedImage(this.patternPositions[g],l.getImage(g),c)}patchUpdatedImage(l,c,g){if(!l||!c||l.version===c.version)return;l.version=c.version;const[b,C]=l.tl;g.update(c.data,void 0,{x:b,y:C})}}var Ph;Te("ImagePosition",K2),Te("ImageAtlas",TO),u.ao=void 0,(Ph=u.ao||(u.ao={}))[Ph.none=0]="none",Ph[Ph.horizontal=1]="horizontal",Ph[Ph.vertical=2]="vertical",Ph[Ph.horizontalOnly=3]="horizontalOnly";class vy{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,c,g){const b=new vy;return b.scale=l||1,b.fontStack=c,b.verticalAlign=g||"bottom",b}static forImage(l,c){const g=new vy;return g.imageName=l,g.verticalAlign=c||"bottom",g}}class Yp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,c){const g=new Yp;for(let b=0;b<l.sections.length;b++){const C=l.sections[b];C.image?g.addImageSection(C):g.addTextSection(C,c)}return g}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=(function(l){let c="";for(let g=0;g<l.length;g++){const b=l.charCodeAt(g+1)||null,C=l.charCodeAt(g-1)||null;c+=b&&cn(b)&&!yy[l[g+1]]||C&&cn(C)&&!yy[l[g-1]]||!yy[l[g]]?l[g]:yy[l[g]]}return c})(this.text)}trim(){let l=0;for(let g=0;g<this.text.length&&db[this.text.charCodeAt(g)];g++)l++;let c=this.text.length;for(let g=this.text.length-1;g>=0&&g>=l&&db[this.text.charCodeAt(g)];g--)c--;this.text=this.text.substring(l,c),this.sectionIndex=this.sectionIndex.slice(l,c)}substring(l,c){const g=new Yp;return g.text=this.text.substring(l,c),g.sectionIndex=this.sectionIndex.slice(l,c),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,c)=>Math.max(l,this.sections[c].scale)),0)}getMaxImageSize(l){let c=0,g=0;for(let b=0;b<this.length();b++){const C=this.getSection(b);if(C.imageName){const A=l[C.imageName];if(!A)continue;const R=A.displaySize;c=Math.max(c,R[0]),g=Math.max(g,R[1])}}return{maxImageWidth:c,maxImageHeight:g}}addTextSection(l,c){this.text+=l.text,this.sections.push(vy.forText(l.scale,l.fontStack||c,l.verticalAlign));const g=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(g)}addImageSection(l){const c=l.image?l.image.name:"";if(c.length===0)return void ut("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(vy.forImage(c,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):ut("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hb(f,l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee){const Oe=Yp.fromFeature(f,b);let Ge;ie===u.ao.vertical&&Oe.verticalizePunctuation();const{processBidirectionalText:at,processStyledBidirectionalText:Nt}=Nn;if(at&&Oe.sections.length===1){Ge=[];const Xt=at(Oe.toString(),X2(Oe,H,C,l,g,we));for(const or of Xt){const wr=new Yp;wr.text=or,wr.sections=Oe.sections;for(let Zr=0;Zr<or.length;Zr++)wr.sectionIndex.push(0);Ge.push(wr)}}else if(Nt){Ge=[];const Xt=Nt(Oe.text,Oe.sectionIndex,X2(Oe,H,C,l,g,we));for(const or of Xt){const wr=new Yp;wr.text=or[0],wr.sectionIndex=or[1],wr.sections=Oe.sections,Ge.push(wr)}}else Ge=(function(Xt,or){const wr=[],Zr=Xt.text;let Fr=0;for(const Gr of or)wr.push(Xt.substring(Fr,Gr)),Fr=Gr;return Fr<Zr.length&&wr.push(Xt.substring(Fr,Zr.length)),wr})(Oe,X2(Oe,H,C,l,g,we));const vt=[],Et={positionedLines:vt,text:Oe.toString(),top:K[1],bottom:K[1],left:K[0],right:K[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return(function(Xt,or,wr,Zr,Fr,Gr,gn,qr,Hr,mr,Ln,Fn){let wn=0,un=0,ui=0,Da=0;const No=qr==="right"?1:qr==="left"?0:.5,As=Yo/Fn;let Eu=0;for(const Pa of Fr){Pa.trim();const Jo=Pa.getMaxScale(),ms={positionedGlyphs:[],lineOffset:0};Xt.positionedLines[Eu]=ms;const gs=ms.positionedGlyphs;let al=0;if(!Pa.length()){un+=Gr,++Eu;continue}const Cu=BK(Zr,Pa,As);for(let Ol=0;Ol<Pa.length();Ol++){const Fo=Pa.getSection(Ol),es=Pa.getSectionIndex(Ol),ts=Pa.getCharCode(Ol),vo=jK(Hr,Ln,ts);let pa;if(Fo.imageName){if(Xt.iconsInText=!0,Fo.scale=Fo.scale*As,pa=$K(Fo,vo,Jo,Cu,Zr),!pa)continue;al=Math.max(al,pa.imageOffset)}else if(pa=zK(Fo,ts,vo,Cu,or,wr),!pa)continue;const{rect:gc,metrics:tm,baselineOffset:yc}=pa;gs.push({glyph:ts,imageName:Fo.imageName,x:wn,y:un+yc+-17,vertical:vo,scale:Fo.scale,fontStack:Fo.fontStack,sectionIndex:es,metrics:tm,rect:gc}),vo?(Xt.verticalizable=!0,wn+=(Fo.imageName?tm.advance:Yo)*Fo.scale+mr):wn+=tm.advance*Fo.scale+mr}gs.length!==0&&(ui=Math.max(wn-mr,ui),UK(gs,0,gs.length-1,No)),wn=0,ms.lineOffset=Math.max(al,(Jo-1)*Yo);const Qo=Gr*Jo+al;un+=Qo,Da=Math.max(Qo,Da),++Eu}const{horizontalAlign:Rl,verticalAlign:ps}=Y2(gn);(function(Pa,Jo,ms,gs,al,Cu,Qo,Ol,Fo){const es=(Jo-ms)*al;let ts=0;ts=Cu!==Qo?-Ol*gs- -17:-gs*Fo*Qo+.5*Qo;for(const vo of Pa)for(const pa of vo.positionedGlyphs)pa.x+=es,pa.y+=ts})(Xt.positionedLines,No,Rl,ps,ui,Da,Gr,un,Fr.length),Xt.top+=-ps*un,Xt.bottom=Xt.top+un,Xt.left+=-Rl*ui,Xt.right=Xt.left+ui})(Et,l,c,g,Ge,A,R,B,ie,H,ve,Ee),!(function(Xt){for(const or of Xt)if(or.positionedGlyphs.length!==0)return!1;return!0})(vt)&&Et}const db={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},DK={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},NK={40:!0};function IO(f,l,c,g,b,C){if(l.imageName){const A=g[l.imageName];return A?A.displaySize[0]*l.scale*Yo/C+b:0}{const A=c[l.fontStack],R=A&&A[f];return R?R.metrics.advance*l.scale+b:0}}function MO(f,l,c,g){const b=Math.pow(f-l,2);return g?f<l?b/2:2*b:b+Math.abs(c)*c}function FK(f,l,c){let g=0;return f===10&&(g-=1e4),c&&(g+=150),f!==40&&f!==65288||(g+=50),l!==41&&l!==65289||(g+=50),g}function RO(f,l,c,g,b,C){let A=null,R=MO(l,c,b,C);for(const B of g){const H=MO(l-B.x,c,b,C)+B.badness;H<=R&&(A=B,R=H)}return{index:f,x:l,priorBreak:A,badness:R}}function OO(f){return f?OO(f.priorBreak).concat(f.index):[]}function X2(f,l,c,g,b,C){if(!f)return[];const A=[],R=(function(ie,ve,we,Ee,Oe,Ge){let at=0;for(let Nt=0;Nt<ie.length();Nt++){const vt=ie.getSection(Nt);at+=IO(ie.getCharCode(Nt),vt,Ee,Oe,ve,Ge)}return at/Math.max(1,Math.ceil(at/we))})(f,l,c,g,b,C),B=f.text.indexOf("")>=0;let H=0;for(let ie=0;ie<f.length();ie++){const ve=f.getSection(ie),we=f.getCharCode(ie);if(db[we]||(H+=IO(we,ve,g,b,l,C)),ie<f.length()-1){const Ee=!((K=we)<11904)&&(!!Rt["CJK Compatibility Forms"](K)||!!Rt["CJK Compatibility"](K)||!!Rt["CJK Strokes"](K)||!!Rt["CJK Symbols and Punctuation"](K)||!!Rt["Enclosed CJK Letters and Months"](K)||!!Rt["Halfwidth and Fullwidth Forms"](K)||!!Rt["Ideographic Description Characters"](K)||!!Rt["Vertical Forms"](K)||Cr.test(String.fromCodePoint(K)));(DK[we]||Ee||ve.imageName||ie!==f.length()-2&&NK[f.getCharCode(ie+1)])&&A.push(RO(ie+1,H,R,A,FK(we,f.getCharCode(ie+1),Ee&&B),!1))}}var K;return OO(RO(f.length(),H,R,A,0,!0))}function Y2(f){let l=.5,c=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:l,verticalAlign:c}}function BK(f,l,c){const g=l.getMaxScale()*Yo,{maxImageWidth:b,maxImageHeight:C}=l.getMaxImageSize(f),A=Math.max(g,C*c);return{verticalLineContentWidth:Math.max(g,b*c),horizontalLineContentHeight:A}}function kO(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function jK(f,l,c){return!(f===u.ao.horizontal||!l&&!_n(c)||l&&(db[c]||(g=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(g)))));var g}function zK(f,l,c,g,b,C){const A=C[f.fontStack],R=(function(H,K,ie,ve){if(H&&H.rect)return H;const we=K[ie.fontStack],Ee=we&&we[ve];return Ee?{rect:null,metrics:Ee.metrics}:null})(A&&A[l],b,f,l);if(R===null)return null;let B;if(c)B=g.verticalLineContentWidth-f.scale*Yo;else{const H=kO(f.verticalAlign);B=(g.horizontalLineContentHeight-f.scale*Yo)*H}return{rect:R.rect,metrics:R.metrics,baselineOffset:B}}function $K(f,l,c,g,b){const C=b[f.imageName];if(!C)return null;const A=C.paddedRect,R=C.displaySize,B={width:R[0],height:R[1],left:1,top:-3,advance:l?R[1]:R[0]};let H;if(l)H=g.verticalLineContentWidth-R[1]*f.scale;else{const K=kO(f.verticalAlign);H=(g.horizontalLineContentHeight-R[1]*f.scale)*K}return{rect:A,metrics:B,baselineOffset:H,imageOffset:(l?R[0]:R[1])*f.scale-Yo*c}}function UK(f,l,c,g){if(g===0)return;const b=f[c],C=(f[c].x+b.metrics.advance*b.scale)*g;for(let A=l;A<=c;A++)f[A].x-=C}function qK(f,l,c){const{horizontalAlign:g,verticalAlign:b}=Y2(c),C=l[0]-f.displaySize[0]*g,A=l[1]-f.displaySize[1]*b;return{image:f,top:A,bottom:A+f.displaySize[1],left:C,right:C+f.displaySize[0]}}function LO(f){var l,c;let g=f.left,b=f.top,C=f.right-g,A=f.bottom-b;const R=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",B=(c=f.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",H=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(B==="proportional"){if(R==="stretchOnly"&&C/A<H||R==="proportional"){const K=Math.ceil(A*H);g*=K/C,C=K}}else if(R==="proportional"&&B==="stretchOnly"&&H!==0&&C/A>H){const K=Math.ceil(C/H);b*=K/A,A=K}return{x1:g,y1:b,x2:g+C,y2:b+A}}function DO(f,l,c,g,b,C){const A=f.image;let R;if(A.content){const Ge=A.content,at=A.pixelRatio||1;R=[Ge[0]/at,Ge[1]/at,A.displaySize[0]-Ge[2]/at,A.displaySize[1]-Ge[3]/at]}const B=l.left*C,H=l.right*C;let K,ie,ve,we;c==="width"||c==="both"?(we=b[0]+B-g[3],ie=b[0]+H+g[1]):(we=b[0]+(B+H-A.displaySize[0])/2,ie=we+A.displaySize[0]);const Ee=l.top*C,Oe=l.bottom*C;return c==="height"||c==="both"?(K=b[1]+Ee-g[0],ve=b[1]+Oe+g[2]):(K=b[1]+(Ee+Oe-A.displaySize[1])/2,ve=K+A.displaySize[1]),{image:A,top:K,right:ie,bottom:ve,left:we,collisionPadding:R}}const zf=128,Th=32640;function NO(f,l){const{expression:c}=l;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Wr(f+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:b}=c;let C=0;for(;C<g.length&&g[C]<=f;)C++;C=Math.max(0,C-1);let A=C;for(;A<g.length&&g[A]<f+1;)A++;A=Math.min(g.length-1,A);const R=g[C],B=g[A];return c.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:B,interpolationType:b}:{kind:"camera",minZoom:R,maxZoom:B,minSize:c.evaluate(new Wr(R)),maxSize:c.evaluate(new Wr(B)),interpolationType:b}}}function J2(f,l,c){let g="never";const b=f.get(l);return b?g=b:f.get(c)&&(g="always"),g}const VK=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pb(f,l,c,g,b,C,A,R,B,H,K,ie,ve){const we=R?Math.min(Th,Math.round(R[0])):0,Ee=R?Math.min(Th,Math.round(R[1])):0;f.emplaceBack(l,c,Math.round(32*g),Math.round(32*b),C,A,(we<<1)+(B?1:0),Ee,16*H,16*K,256*ie,256*ve)}function Q2(f,l,c){f.emplaceBack(l.x,l.y,c),f.emplaceBack(l.x,l.y,c),f.emplaceBack(l.x,l.y,c),f.emplaceBack(l.x,l.y,c)}function GK(f){for(const l of f.sections)if(Ga(l.text))return!0;return!1}class ew{constructor(l){this.layoutVertexArray=new Lr,this.indexArray=new Ri,this.programConfigurations=l,this.segments=new kn,this.dynamicLayoutVertexArray=new _r,this.opacityVertexArray=new sn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,c,g,b){this.isEmpty()||(g&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,vK.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,bK.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,VK,!0),this.opacityVertexBuffer.itemSize=1),(g||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Te("SymbolBuffers",ew);class tw{constructor(l,c,g){this.layoutVertexArray=new l,this.layoutAttributes=c,this.indexArray=new g,this.segments=new kn,this.collisionVertexArray=new li}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,_K.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Te("CollisionBuffers",tw);class Jp{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=NO(this.zoom,c["text-size"]),this.iconSizeData=NO(this.zoom,c["icon-size"]);const g=this.layers[0].layout,b=g.get("symbol-sort-key"),C=g.get("symbol-z-order");this.canOverlap=J2(g,"text-overlap","text-allow-overlap")!=="never"||J2(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map((A=>u.ao[A]))),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id)),this.sourceID=l.sourceID}createArrays(){this.text=new ew(new Il(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new ew(new Il(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new Xe,this.lineVertexArray=new it,this.symbolInstances=new We,this.textAnchorOffsets=new ct}calculateGlyphDependencies(l,c,g,b,C){for(let A=0;A<l.length;A++)if(c[l.charCodeAt(A)]=!0,(g||b)&&C){const R=yy[l.charAt(A)];R&&(c[R.charCodeAt(0)]=!0)}}populate(l,c,g){const b=this.layers[0],C=b.layout,A=C.get("text-font"),R=C.get("text-field"),B=C.get("icon-image"),H=(R.value.kind!=="constant"||R.value.value instanceof dn&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),K=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,ie=C.get("symbol-sort-key");if(this.features=[],!H&&!K)return;const ve=c.iconDependencies,we=c.glyphDependencies,Ee=c.availableImages,Oe=new Wr(this.zoom,{globalState:this.globalState});for(const{feature:Ge,id:at,index:Nt,sourceLayerIndex:vt}of l){const Et=b._featureFilter.needGeometry,Xt=mc(Ge,Et);if(!b._featureFilter.filter(Oe,Xt,g))continue;let or,wr;if(Et||(Xt.geometry=tf(Ge)),H){const Fr=b.getValueAndResolveTokens("text-field",Xt,g,Ee),Gr=dn.factory(Fr),gn=this.hasRTLText=this.hasRTLText||GK(Gr);(!gn||Nn.getRTLTextPluginStatus()==="unavailable"||gn&&Nn.isParsed())&&(or=wK(Gr,b,Xt))}if(K){const Fr=b.getValueAndResolveTokens("icon-image",Xt,g,Ee);wr=Fr instanceof aa?Fr:aa.fromString(Fr)}if(!or&&!wr)continue;const Zr=this.sortFeaturesByKey?ie.evaluate(Xt,{},g):void 0;if(this.features.push({id:at,text:or,icon:wr,index:Nt,sourceLayerIndex:vt,geometry:Xt.geometry,properties:Ge.properties,type:Kp.types[Ge.type],sortKey:Zr}),wr&&(ve[wr.name]=!0),or){const Fr=A.evaluate(Xt,{},g).join(","),Gr=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ao.vertical)>=0;for(const gn of or.sections)if(gn.image)ve[gn.image.name]=!0;else{const qr=cr(or.toString()),Hr=gn.fontStack||Fr,mr=we[Hr]=we[Hr]||{};this.calculateGlyphDependencies(gn.text,mr,Gr,this.allowVerticalPlacement,qr)}}}C.get("symbol-placement")==="line"&&(this.features=(function(Ge){const at={},Nt={},vt=[];let Et=0;function Xt(Fr){vt.push(Ge[Fr]),Et++}function or(Fr,Gr,gn){const qr=Nt[Fr];return delete Nt[Fr],Nt[Gr]=qr,vt[qr].geometry[0].pop(),vt[qr].geometry[0]=vt[qr].geometry[0].concat(gn[0]),qr}function wr(Fr,Gr,gn){const qr=at[Gr];return delete at[Gr],at[Fr]=qr,vt[qr].geometry[0].shift(),vt[qr].geometry[0]=gn[0].concat(vt[qr].geometry[0]),qr}function Zr(Fr,Gr,gn){const qr=gn?Gr[0][Gr[0].length-1]:Gr[0][0];return`${Fr}:${qr.x}:${qr.y}`}for(let Fr=0;Fr<Ge.length;Fr++){const Gr=Ge[Fr],gn=Gr.geometry,qr=Gr.text?Gr.text.toString():null;if(!qr){Xt(Fr);continue}const Hr=Zr(qr,gn),mr=Zr(qr,gn,!0);if(Hr in Nt&&mr in at&&Nt[Hr]!==at[mr]){const Ln=wr(Hr,mr,gn),Fn=or(Hr,mr,vt[Ln].geometry);delete at[Hr],delete Nt[mr],Nt[Zr(qr,vt[Fn].geometry,!0)]=Fn,vt[Ln].geometry=null}else Hr in Nt?or(Hr,mr,gn):mr in at?wr(Hr,mr,gn):(Xt(Fr),at[Hr]=Et-1,Nt[mr]=Et-1)}return vt.filter((Fr=>Fr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ge,at)=>Ge.sortKey-at.sortKey))}update(l,c,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,c,this.layers,{imagePositions:g,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(l,c,this.layers,{imagePositions:g,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,c){const g=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(c[l.segment+1]),C=l.dist(c[l.segment]);const A={};for(let R=l.segment+1;R<c.length;R++)A[R]={x:c[R].x,y:c[R].y,tileUnitDistanceFromAnchor:b},R<c.length-1&&(b+=c[R+1].dist(c[R]));for(let R=l.segment||0;R>=0;R--)A[R]={x:c[R].x,y:c[R].y,tileUnitDistanceFromAnchor:C},R>0&&(C+=c[R-1].dist(c[R]));for(let R=0;R<c.length;R++){const B=A[R];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(l,c,g,b,C,A,R,B,H,K,ie,ve){const we=l.indexArray,Ee=l.layoutVertexArray,Oe=l.segments.prepareSegment(4*c.length,Ee,we,this.canOverlap?A.sortKey:void 0),Ge=this.glyphOffsetArray.length,at=Oe.vertexLength,Nt=this.allowVerticalPlacement&&R===u.ao.vertical?Math.PI/2:0,vt=A.text&&A.text.sections;for(let Et=0;Et<c.length;Et++){const{tl:Xt,tr:or,bl:wr,br:Zr,tex:Fr,pixelOffsetTL:Gr,pixelOffsetBR:gn,minFontScaleX:qr,minFontScaleY:Hr,glyphOffset:mr,isSDF:Ln,sectionIndex:Fn}=c[Et],wn=Oe.vertexLength,un=mr[1];pb(Ee,B.x,B.y,Xt.x,un+Xt.y,Fr.x,Fr.y,g,Ln,Gr.x,Gr.y,qr,Hr),pb(Ee,B.x,B.y,or.x,un+or.y,Fr.x+Fr.w,Fr.y,g,Ln,gn.x,Gr.y,qr,Hr),pb(Ee,B.x,B.y,wr.x,un+wr.y,Fr.x,Fr.y+Fr.h,g,Ln,Gr.x,gn.y,qr,Hr),pb(Ee,B.x,B.y,Zr.x,un+Zr.y,Fr.x+Fr.w,Fr.y+Fr.h,g,Ln,gn.x,gn.y,qr,Hr),Q2(l.dynamicLayoutVertexArray,B,Nt),we.emplaceBack(wn,wn+2,wn+1),we.emplaceBack(wn+1,wn+2,wn+3),Oe.vertexLength+=4,Oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mr[0]),Et!==c.length-1&&Fn===c[Et+1].sectionIndex||l.programConfigurations.populatePaintArrays(Ee.length,A,A.index,{imagePositions:{},canonical:ve,formattedSection:vt&&vt[Fn],globalState:this.globalState})}l.placedSymbolArray.emplaceBack(B.x,B.y,Ge,this.glyphOffsetArray.length-Ge,at,H,K,B.segment,g?g[0]:0,g?g[1]:0,b[0],b[1],R,0,!1,0,ie)}_addCollisionDebugVertex(l,c,g,b,C,A){return c.emplaceBack(0,0),l.emplaceBack(g.x,g.y,b,C,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(l,c,g,b,C,A,R){const B=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),H=B.vertexLength,K=C.layoutVertexArray,ie=C.collisionVertexArray,ve=R.anchorX,we=R.anchorY;this._addCollisionDebugVertex(K,ie,A,ve,we,new p(l,c)),this._addCollisionDebugVertex(K,ie,A,ve,we,new p(g,c)),this._addCollisionDebugVertex(K,ie,A,ve,we,new p(g,b)),this._addCollisionDebugVertex(K,ie,A,ve,we,new p(l,b)),B.vertexLength+=4;const Ee=C.indexArray;Ee.emplaceBack(H,H+1),Ee.emplaceBack(H+1,H+2),Ee.emplaceBack(H+2,H+3),Ee.emplaceBack(H+3,H),B.primitiveLength+=4}addDebugCollisionBoxes(l,c,g,b){for(let C=l;C<c;C++){const A=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,b?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tw(Un,SO.members,wi),this.iconCollisionBox=new tw(Un,SO.members,wi);for(let l=0;l<this.symbolInstances.length;l++){const c=this.symbolInstances.get(l);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(l,c,g,b,C,A,R,B,H){const K={};for(let ie=c;ie<g;ie++){const ve=l.get(ie);K.textBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},K.textFeatureIndex=ve.featureIndex;break}for(let ie=b;ie<C;ie++){const ve=l.get(ie);K.verticalTextBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},K.verticalTextFeatureIndex=ve.featureIndex;break}for(let ie=A;ie<R;ie++){const ve=l.get(ie);K.iconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},K.iconFeatureIndex=ve.featureIndex;break}for(let ie=B;ie<H;ie++){const ve=l.get(ie);K.verticalIconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},K.verticalIconFeatureIndex=ve.featureIndex;break}return K}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const g=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,c){const g=l.placedSymbolArray.get(c),b=g.vertexStartIndex+4*g.numGlyphs;for(let C=g.vertexStartIndex;C<b;C+=4)l.indexArray.emplaceBack(C,C+2,C+1),l.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(l),g=Math.cos(l),b=[],C=[],A=[];for(let R=0;R<this.symbolInstances.length;++R){A.push(R);const B=this.symbolInstances.get(R);b.push(0|Math.round(c*B.anchorX+g*B.anchorY)),C.push(B.featureIndex)}return A.sort(((R,B)=>b[R]-b[B]||C[B]-C[R])),A}addToSortKeyRanges(l,c){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===c?g.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const g=this.symbolInstances.get(c);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach(((b,C,A)=>{b>=0&&A.indexOf(b)===C&&this.addIndicesForPlacedSymbol(this.text,b)})),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let FO,BO;Te("SymbolBucket",Jp,{omit:["layers","collisionBoxArray","features","compareText"]}),Jp.MAX_GLYPHS=65535,Jp.addDynamicAttributes=Q2;var rw={get paint(){return BO=BO||new mi({"icon-opacity":new on(bt.paint_symbol["icon-opacity"]),"icon-color":new on(bt.paint_symbol["icon-color"]),"icon-halo-color":new on(bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(bt.paint_symbol["icon-halo-blur"]),"icon-translate":new Jr(bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jr(bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new on(bt.paint_symbol["text-opacity"]),"text-color":new on(bt.paint_symbol["text-color"],{runtimeType:Sn,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new on(bt.paint_symbol["text-halo-color"]),"text-halo-width":new on(bt.paint_symbol["text-halo-width"]),"text-halo-blur":new on(bt.paint_symbol["text-halo-blur"]),"text-translate":new Jr(bt.paint_symbol["text-translate"]),"text-translate-anchor":new Jr(bt.paint_symbol["text-translate-anchor"])})},get layout(){return FO=FO||new mi({"symbol-placement":new Jr(bt.layout_symbol["symbol-placement"]),"symbol-spacing":new Jr(bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jr(bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jr(bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jr(bt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jr(bt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jr(bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jr(bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jr(bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(bt.layout_symbol["icon-size"]),"icon-text-fit":new Jr(bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jr(bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(bt.layout_symbol["icon-image"]),"icon-rotate":new on(bt.layout_symbol["icon-rotate"]),"icon-padding":new on(bt.layout_symbol["icon-padding"]),"icon-keep-upright":new Jr(bt.layout_symbol["icon-keep-upright"]),"icon-offset":new on(bt.layout_symbol["icon-offset"]),"icon-anchor":new on(bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jr(bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jr(bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jr(bt.layout_symbol["text-rotation-alignment"]),"text-field":new on(bt.layout_symbol["text-field"]),"text-font":new on(bt.layout_symbol["text-font"]),"text-size":new on(bt.layout_symbol["text-size"]),"text-max-width":new on(bt.layout_symbol["text-max-width"]),"text-line-height":new Jr(bt.layout_symbol["text-line-height"]),"text-letter-spacing":new on(bt.layout_symbol["text-letter-spacing"]),"text-justify":new on(bt.layout_symbol["text-justify"]),"text-radial-offset":new on(bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jr(bt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new on(bt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new on(bt.layout_symbol["text-anchor"]),"text-max-angle":new Jr(bt.layout_symbol["text-max-angle"]),"text-writing-mode":new Jr(bt.layout_symbol["text-writing-mode"]),"text-rotate":new on(bt.layout_symbol["text-rotate"]),"text-padding":new Jr(bt.layout_symbol["text-padding"]),"text-keep-upright":new Jr(bt.layout_symbol["text-keep-upright"]),"text-transform":new on(bt.layout_symbol["text-transform"]),"text-offset":new on(bt.layout_symbol["text-offset"]),"text-allow-overlap":new Jr(bt.layout_symbol["text-allow-overlap"]),"text-overlap":new Jr(bt.layout_symbol["text-overlap"]),"text-ignore-placement":new Jr(bt.layout_symbol["text-ignore-placement"]),"text-optional":new Jr(bt.layout_symbol["text-optional"])})}};class jO{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:zr,this.defaultValue=l}evaluate(l){if(l.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(l.formattedSection))return c.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Te("FormatSectionOverride",jO,{omit:["defaultValue"]});class mb extends Vi{constructor(l){super(l,rw)}recalculate(l,c){if(super.recalculate(l,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const b=[];for(const C of g)b.indexOf(C)<0&&b.push(C);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,c,g,b){const C=this.layout.get(l).evaluate(c,{},g,b),A=this._unevaluatedLayout._values[l];return A.isDataDriven()||qc(A.value)||!C?C:(function(R,B){return B.replace(/{([^{}]+)}/g,((H,K)=>R&&K in R?String(R[K]):""))})(c.properties,C)}createBucket(l){return new Jp(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of rw.paint.overridableProperties){if(!mb.hasPaintOverride(this.layout,l))continue;const c=this.paint.get(l),g=new jO(c),b=new kf(g,c.property.specification);let C=null;C=c.value.kind==="constant"||c.value.kind==="source"?new fc("source",b):new md("composite",b,c.value.zoomStops),this.paint._values[l]=new da(c.property,C,c.parameters)}}_handleOverridablePaintPropertyUpdate(l,c,g){return!(!this.layout||c.isDataDriven()||g.isDataDriven())&&mb.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,c){const g=l.get("text-field"),b=rw.paint.properties[c];let C=!1;const A=R=>{for(const B of R)if(b.overrides&&b.overrides.hasOverride(B))return void(C=!0)};if(g.value.kind==="constant"&&g.value.value instanceof dn)A(g.value.value.sections);else if(g.value.kind==="source"||g.value.kind==="composite"){const R=H=>{C||(H instanceof Po&&yn(H.value)===Li?A(H.value.sections):H instanceof eo?A(H.sections):H.eachChild(R))},B=g.value;B._styleExpression&&R(B._styleExpression.expression)}return C}}let zO;var HK={get paint(){return zO=zO||new mi({"background-color":new Jr(bt.paint_background["background-color"]),"background-pattern":new ii(bt.paint_background["background-pattern"]),"background-opacity":new Jr(bt.paint_background["background-opacity"])})}};class WK extends Vi{constructor(l){super(l,HK)}}let $O;var ZK={get paint(){return $O=$O||new mi({"raster-opacity":new Jr(bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jr(bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jr(bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jr(bt.paint_raster["raster-brightness-max"]),"raster-saturation":new Jr(bt.paint_raster["raster-saturation"]),"raster-contrast":new Jr(bt.paint_raster["raster-contrast"]),"raster-resampling":new Jr(bt.paint_raster["raster-resampling"]),"raster-fade-duration":new Jr(bt.paint_raster["raster-fade-duration"])})}};class KK extends Vi{constructor(l){super(l,ZK)}}class XK extends Vi{constructor(l){super(l,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class YK{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const JK={once:!0},nw=63710088e-1;class Ih{constructor(l,c){if(isNaN(l)||isNaN(c))throw new Error(`Invalid LngLat object: (${l}, ${c})`);if(this.lng=+l,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ih(ht(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const c=Math.PI/180,g=this.lat*c,b=l.lat*c,C=Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos((l.lng-this.lng)*c);return nw*Math.acos(Math.min(C,1))}static convert(l){if(l instanceof Ih)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Ih(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Ih(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const UO=2*Math.PI*nw;function qO(f){return UO*Math.cos(f*Math.PI/180)}function VO(f){return(180+f)/360}function GO(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function HO(f,l){return f/qO(l)}function iw(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function WO(f,l){return f*qO(iw(l))}class by{constructor(l,c,g=0){this.x=+l,this.y=+c,this.z=+g}static fromLngLat(l,c=0){const g=Ih.convert(l);return new by(VO(g.lng),GO(g.lat),HO(c,g.lat))}toLngLat(){return new Ih(360*this.x-180,iw(this.y))}toAltitude(){return WO(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/UO*(l=iw(this.y),1/Math.cos(l*Math.PI/180));var l}}function ZO(f,l,c){var g=2*Math.PI*6378137/256/Math.pow(2,c);return[f*g-2*Math.PI*6378137/2,l*g-2*Math.PI*6378137/2]}class aw{constructor(l,c,g){if(!(function(b,C,A){return!(b<0||b>25||A<0||A>=Math.pow(2,b)||C<0||C>=Math.pow(2,b))})(l,c,g))throw new Error(`x=${c}, y=${g}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=c,this.y=g,this.key=Qp(0,l,l,c,g)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,c,g){const b=(A=this.y,R=this.z,B=ZO(256*(C=this.x),256*(A=Math.pow(2,R)-A-1),R),H=ZO(256*(C+1),256*(A+1),R),B[0]+","+B[1]+","+H[0]+","+H[1]);var C,A,R,B,H;const K=(function(ie,ve,we){let Ee,Oe="";for(let Ge=ie;Ge>0;Ge--)Ee=1<<Ge-1,Oe+=(ve&Ee?1:0)+(we&Ee?2:0);return Oe})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,K).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){const c=this.z-l.z;return c>0&&l.x===this.x>>c&&l.y===this.y>>c}getTilePoint(l){const c=Math.pow(2,this.z);return new p((l.x*c-this.x)*xe,(l.y*c-this.y)*xe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class KO{constructor(l,c){this.wrap=l,this.canonical=c,this.key=Qp(l,c.z,c.z,c.x,c.y)}}class Su{constructor(l,c,g,b,C){if(this.terrainRttPosMatrix32f=null,l<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${g}`);this.overscaledZ=l,this.wrap=c,this.canonical=new aw(g,+b,+C),this.key=Qp(c,l,g,b,C)}clone(){return new Su(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-l;return l>this.canonical.z?new Su(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Su(l,this.wrap,l,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(l,c){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-l;return l>this.canonical.z?Qp(this.wrap*+c,l,this.canonical.z,this.canonical.x,this.canonical.y):Qp(this.wrap*+c,l,l,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const c=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>c&&l.canonical.y===this.canonical.y>>c}children(l){if(this.overscaledZ>=l)return[new Su(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,g=2*this.canonical.x,b=2*this.canonical.y;return[new Su(c,this.wrap,c,g,b),new Su(c,this.wrap,c,g+1,b),new Su(c,this.wrap,c,g,b+1),new Su(c,this.wrap,c,g+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Su(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Su(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new KO(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new by(l.x-this.wrap,l.y))}}function Qp(f,l,c,g,b){(f*=2)<0&&(f=-1*f-1);const C=1<<c;return(C*C*f+C*b+g).toString(36)+c.toString(36)+l.toString(36)}function _y(f,l){return l?f.properties[l]:f.id}Te("CanonicalTileID",aw),Te("OverscaledTileID",Su,{omit:["terrainRttPosMatrix32f"]});class Td{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const c=new Td;return c.extend(l(new p(this.minX,this.minY))),c.extend(l(new p(this.maxX,this.minY))),c.extend(l(new p(this.minX,this.maxY))),c.extend(l(new p(this.maxX,this.maxY))),c}static fromPoints(l){const c=new Td;for(const g of l)c.extend(g);return c}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class XO{constructor(l){this._stringToNumber={},this._numberToString=[];for(let c=0;c<l.length;c++){const g=l[c];this._stringToNumber[g]=c,this._numberToString[c]=g}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class YO{constructor(l,c,g,b,C){this.type="Feature",this._vectorTileFeature=l,l._z=c,l._x=g,l._y=b,this.properties=l.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(l[c]=this[c]);return l}}class JO{constructor(l,c){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new De(xe,16,0),this.grid3D=new De(xe,16,0),this.featureIndexArray=new Ct,this.promoteId=c}insert(l,c,g,b,C,A){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,b,C);const B=A?this.grid3D:this.grid;for(let H=0;H<c.length;H++){const K=c[H],ie=[1/0,1/0,-1/0,-1/0];for(let ve=0;ve<K.length;ve++){const we=K[ve];ie[0]=Math.min(ie[0],we.x),ie[1]=Math.min(ie[1],we.y),ie[2]=Math.max(ie[2],we.x),ie[3]=Math.max(ie[3],we.y)}ie[0]<xe&&ie[1]<xe&&ie[2]>=0&&ie[3]>=0&&B.insert(R,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new pO(new Z2(this.rawTileData)).layers,this.sourceLayerCoder=new XO(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,c,g,b){this.loadVTLayers();const C=l.params,A=xe/l.tileSize/l.scale,R=hc(C.filter),B=l.queryGeometry,H=l.queryPadding*A,K=Td.fromPoints(B),ie=this.grid.query(K.minX-H,K.minY-H,K.maxX+H,K.maxY+H),ve=Td.fromPoints(l.cameraQueryGeometry).expandBy(H),we=this.grid3D.query(ve.minX,ve.minY,ve.maxX,ve.maxY,((Ge,at,Nt,vt)=>(function(Et,Xt,or,wr,Zr){for(const Gr of Et)if(Xt<=Gr.x&&or<=Gr.y&&wr>=Gr.x&&Zr>=Gr.y)return!0;const Fr=[new p(Xt,or),new p(Xt,Zr),new p(wr,Zr),new p(wr,or)];if(Et.length>2){for(const Gr of Fr)if(Gp(Et,Gr))return!0}for(let Gr=0;Gr<Et.length-1;Gr++)if(MZ(Et[Gr],Et[Gr+1],Fr))return!0;return!1})(l.cameraQueryGeometry,Ge-H,at-H,Nt+H,vt+H)));for(const Ge of we)ie.push(Ge);ie.sort(QK);const Ee={};let Oe;for(let Ge=0;Ge<ie.length;Ge++){const at=ie[Ge];if(at===Oe)continue;Oe=at;const Nt=this.featureIndexArray.get(at);let vt=null;this.loadMatchingFeature(Ee,Nt.bucketIndex,Nt.sourceLayerIndex,Nt.featureIndex,R,C.layers,C.availableImages,c,g,b,((Et,Xt,or)=>(vt||(vt=tf(Et)),Xt.queryIntersectsFeature({queryGeometry:B,feature:Et,featureState:or,geometry:vt,zoom:this.z,transform:l.transform,pixelsToTileUnits:A,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return Ee}loadMatchingFeature(l,c,g,b,C,A,R,B,H,K,ie){const ve=this.bucketLayerIDs[c];if(A&&!ve.some((Ge=>A.has(Ge))))return;const we=this.sourceLayerCoder.decode(g),Ee=this.vtLayers[we].feature(b);if(C.needGeometry){const Ge=mc(Ee,!0);if(!C.filter(new Wr(this.tileID.overscaledZ),Ge,this.tileID.canonical))return}else if(!C.filter(new Wr(this.tileID.overscaledZ),Ee))return;const Oe=this.getId(Ee,we);for(let Ge=0;Ge<ve.length;Ge++){const at=ve[Ge];if(A&&!A.has(at))continue;const Nt=B[at];if(!Nt)continue;let vt={};Oe&&K&&(vt=K.getState(Nt.sourceLayer||"_geojsonTileLayer",Oe));const Et=At({},H[at]);Et.paint=QO(Et.paint,Nt.paint,Ee,vt,R),Et.layout=QO(Et.layout,Nt.layout,Ee,vt,R);const Xt=!ie||ie(Ee,Nt,vt);if(!Xt)continue;const or=new YO(Ee,this.z,this.x,this.y,Oe);or.layer=Et;let wr=l[at];wr===void 0&&(wr=l[at]=[]),wr.push({featureIndex:b,feature:or,intersectionZ:Xt})}}lookupSymbolFeatures(l,c,g,b,C,A,R,B){const H={};this.loadVTLayers();const K=hc(C);for(const ie of l)this.loadMatchingFeature(H,g,b,ie,K,A,R,B,c);return H}hasLayer(l){for(const c of this.bucketLayerIDs)for(const g of c)if(l===g)return!0;return!1}getId(l,c){var g;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((g=l.properties)===null||g===void 0)&&g.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function QO(f,l,c,g,b){return rt(f,((C,A)=>{const R=l instanceof oa?l.get(A):null;return R&&R.evaluate?R.evaluate(c,g,b):R}))}function QK(f,l){return l-f}function ek(f,l,c,g,b){const C=[];for(let A=0;A<f.length;A++){const R=f[A];let B;for(let H=0;H<R.length-1;H++){let K=R[H],ie=R[H+1];K.x<l&&ie.x<l||(K.x<l?K=new p(l,K.y+(l-K.x)/(ie.x-K.x)*(ie.y-K.y))._round():ie.x<l&&(ie=new p(l,K.y+(l-K.x)/(ie.x-K.x)*(ie.y-K.y))._round()),K.y<c&&ie.y<c||(K.y<c?K=new p(K.x+(c-K.y)/(ie.y-K.y)*(ie.x-K.x),c)._round():ie.y<c&&(ie=new p(K.x+(c-K.y)/(ie.y-K.y)*(ie.x-K.x),c)._round()),K.x>=g&&ie.x>=g||(K.x>=g?K=new p(g,K.y+(g-K.x)/(ie.x-K.x)*(ie.y-K.y))._round():ie.x>=g&&(ie=new p(g,K.y+(g-K.x)/(ie.x-K.x)*(ie.y-K.y))._round()),K.y>=b&&ie.y>=b||(K.y>=b?K=new p(K.x+(b-K.y)/(ie.y-K.y)*(ie.x-K.x),b)._round():ie.y>=b&&(ie=new p(K.x+(b-K.y)/(ie.y-K.y)*(ie.x-K.x),b)._round()),B&&K.equals(B[B.length-1])||(B=[K],C.push(B)),B.push(ie)))))}}return C}Te("FeatureIndex",JO,{omit:["rawTileData","sourceLayerCoder"]});class Mh extends p{constructor(l,c,g,b){super(l,c),this.angle=g,b!==void 0&&(this.segment=b)}clone(){return new Mh(this.x,this.y,this.angle,this.segment)}}function tk(f,l,c,g,b){if(l.segment===void 0||c===0)return!0;let C=l,A=l.segment+1,R=0;for(;R>-c/2;){if(A--,A<0)return!1;R-=f[A].dist(C),C=f[A]}R+=f[A].dist(f[A+1]),A++;const B=[];let H=0;for(;R<c/2;){const K=f[A],ie=f[A+1];if(!ie)return!1;let ve=f[A-1].angleTo(K)-K.angleTo(ie);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:R,angleDelta:ve}),H+=ve;R-B[0].distance>g;)H-=B.shift().angleDelta;if(H>b)return!1;A++,R+=K.dist(ie)}return!0}function rk(f){let l=0;for(let c=0;c<f.length-1;c++)l+=f[c].dist(f[c+1]);return l}function nk(f,l,c){return f?.6*l*c:0}function ik(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function eX(f,l,c,g,b,C){const A=nk(c,b,C),R=ik(c,g)*C;let B=0;const H=rk(f)/2;for(let K=0;K<f.length-1;K++){const ie=f[K],ve=f[K+1],we=ie.dist(ve);if(B+we>H){const Ee=(H-B)/we,Oe=On.number(ie.x,ve.x,Ee),Ge=On.number(ie.y,ve.y,Ee),at=new Mh(Oe,Ge,ve.angleTo(ie),K);return at._round(),!A||tk(f,at,R,A,l)?at:void 0}B+=we}}function tX(f,l,c,g,b,C,A,R,B){const H=nk(g,C,A),K=ik(g,b),ie=K*A,ve=f[0].x===0||f[0].x===B||f[0].y===0||f[0].y===B;return l-ie<l/4&&(l=ie+l/4),ak(f,ve?l/2*R%l:(K/2+2*C)*A*R%l,l,H,c,ie,ve,!1,B)}function ak(f,l,c,g,b,C,A,R,B){const H=C/2,K=rk(f);let ie=0,ve=l-c,we=[];for(let Ee=0;Ee<f.length-1;Ee++){const Oe=f[Ee],Ge=f[Ee+1],at=Oe.dist(Ge),Nt=Ge.angleTo(Oe);for(;ve+c<ie+at;){ve+=c;const vt=(ve-ie)/at,Et=On.number(Oe.x,Ge.x,vt),Xt=On.number(Oe.y,Ge.y,vt);if(Et>=0&&Et<B&&Xt>=0&&Xt<B&&ve-H>=0&&ve+H<=K){const or=new Mh(Et,Xt,Nt,Ee);or._round(),g&&!tk(f,or,C,g,b)||we.push(or)}}ie+=at}return R||we.length||A||(we=ak(f,ie/2,c,g,b,C,A,!0,B)),we}function ok(f,l,c,g){const b=[],C=f.image,A=C.pixelRatio,R=C.paddedRect.w-2,B=C.paddedRect.h-2;let H={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const K=C.stretchX||[[0,R]],ie=C.stretchY||[[0,B]],ve=(mr,Ln)=>mr+Ln[1]-Ln[0],we=K.reduce(ve,0),Ee=ie.reduce(ve,0),Oe=R-we,Ge=B-Ee;let at=0,Nt=we,vt=0,Et=Ee,Xt=0,or=Oe,wr=0,Zr=Ge;if(C.content&&g){const mr=C.content,Ln=mr[2]-mr[0],Fn=mr[3]-mr[1];(C.textFitWidth||C.textFitHeight)&&(H=LO(f)),at=gb(K,0,mr[0]),vt=gb(ie,0,mr[1]),Nt=gb(K,mr[0],mr[2]),Et=gb(ie,mr[1],mr[3]),Xt=mr[0]-at,wr=mr[1]-vt,or=Ln-Nt,Zr=Fn-Et}const Fr=H.x1,Gr=H.y1,gn=H.x2-Fr,qr=H.y2-Gr,Hr=(mr,Ln,Fn,wn)=>{const un=yb(mr.stretch-at,Nt,gn,Fr),ui=vb(mr.fixed-Xt,or,mr.stretch,we),Da=yb(Ln.stretch-vt,Et,qr,Gr),No=vb(Ln.fixed-wr,Zr,Ln.stretch,Ee),As=yb(Fn.stretch-at,Nt,gn,Fr),Eu=vb(Fn.fixed-Xt,or,Fn.stretch,we),Rl=yb(wn.stretch-vt,Et,qr,Gr),ps=vb(wn.fixed-wr,Zr,wn.stretch,Ee),Pa=new p(un,Da),Jo=new p(As,Da),ms=new p(As,Rl),gs=new p(un,Rl),al=new p(ui/A,No/A),Cu=new p(Eu/A,ps/A),Qo=l*Math.PI/180;if(Qo){const es=Math.sin(Qo),ts=Math.cos(Qo),vo=[ts,-es,es,ts];Pa._matMult(vo),Jo._matMult(vo),gs._matMult(vo),ms._matMult(vo)}const Ol=mr.stretch+mr.fixed,Fo=Ln.stretch+Ln.fixed;return{tl:Pa,tr:Jo,bl:gs,br:ms,tex:{x:C.paddedRect.x+1+Ol,y:C.paddedRect.y+1+Fo,w:Fn.stretch+Fn.fixed-Ol,h:wn.stretch+wn.fixed-Fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:al,pixelOffsetBR:Cu,minFontScaleX:or/A/gn,minFontScaleY:Zr/A/qr,isSDF:c}};if(g&&(C.stretchX||C.stretchY)){const mr=sk(K,Oe,we),Ln=sk(ie,Ge,Ee);for(let Fn=0;Fn<mr.length-1;Fn++){const wn=mr[Fn],un=mr[Fn+1];for(let ui=0;ui<Ln.length-1;ui++)b.push(Hr(wn,Ln[ui],un,Ln[ui+1]))}}else b.push(Hr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:B+1}));return b}function gb(f,l,c){let g=0;for(const b of f)g+=Math.max(l,Math.min(c,b[1]))-Math.max(l,Math.min(c,b[0]));return g}function sk(f,l,c){const g=[{fixed:-1,stretch:0}];for(const[b,C]of f){const A=g[g.length-1];g.push({fixed:b-A.stretch,stretch:A.stretch}),g.push({fixed:b-A.stretch,stretch:A.stretch+(C-b)})}return g.push({fixed:l+1,stretch:c}),g}function yb(f,l,c,g){return f/l*c+g}function vb(f,l,c,g){return f-l*c/g}Te("Anchor",Mh);class bb{constructor(l,c,g,b,C,A,R,B,H,K){var ie;if(this.boxStartIndex=l.length,H){let ve=A.top,we=A.bottom;const Ee=A.collisionPadding;Ee&&(ve-=Ee[1],we+=Ee[3]);let Oe=we-ve;Oe>0&&(Oe=Math.max(10,Oe),this.circleDiameter=Oe)}else{const ve=!((ie=A.image)===null||ie===void 0)&&ie.content&&(A.image.textFitWidth||A.image.textFitHeight)?LO(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};ve.y1=ve.y1*R-B[0],ve.y2=ve.y2*R+B[2],ve.x1=ve.x1*R-B[3],ve.x2=ve.x2*R+B[1];const we=A.collisionPadding;if(we&&(ve.x1-=we[0]*R,ve.y1-=we[1]*R,ve.x2+=we[2]*R,ve.y2+=we[3]*R),K){const Ee=new p(ve.x1,ve.y1),Oe=new p(ve.x2,ve.y1),Ge=new p(ve.x1,ve.y2),at=new p(ve.x2,ve.y2),Nt=K*Math.PI/180;Ee._rotate(Nt),Oe._rotate(Nt),Ge._rotate(Nt),at._rotate(Nt),ve.x1=Math.min(Ee.x,Oe.x,Ge.x,at.x),ve.x2=Math.max(Ee.x,Oe.x,Ge.x,at.x),ve.y1=Math.min(Ee.y,Oe.y,Ge.y,at.y),ve.y2=Math.max(Ee.y,Oe.y,Ge.y,at.y)}l.emplaceBack(c.x,c.y,ve.x1,ve.y1,ve.x2,ve.y2,g,b,C)}this.boxEndIndex=l.length}}class rX{constructor(l=[],c=(g,b)=>g<b?-1:g>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=c,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:c,compare:g}=this,b=c[l];for(;l>0;){const C=l-1>>1,A=c[C];if(g(b,A)>=0)break;c[l]=A,l=C}c[l]=b}_down(l){const{data:c,compare:g}=this,b=this.length>>1,C=c[l];for(;l<b;){let A=1+(l<<1);const R=A+1;if(R<this.length&&g(c[R],c[A])<0&&(A=R),g(c[A],C)>=0)break;c[l]=c[A],l=A}c[l]=C}}function nX(f,l=1,c=!1){const g=Td.fromPoints(f[0]),b=Math.min(g.width(),g.height());let C=b/2;const A=new rX([],iX),{minX:R,minY:B,maxX:H,maxY:K}=g;if(b===0)return new p(R,B);for(let we=R;we<H;we+=b)for(let Ee=B;Ee<K;Ee+=b)A.push(new em(we+C,Ee+C,C,f));let ie=(function(we){let Ee=0,Oe=0,Ge=0;const at=we[0];for(let Nt=0,vt=at.length,Et=vt-1;Nt<vt;Et=Nt++){const Xt=at[Nt],or=at[Et],wr=Xt.x*or.y-or.x*Xt.y;Oe+=(Xt.x+or.x)*wr,Ge+=(Xt.y+or.y)*wr,Ee+=3*wr}return new em(Oe/Ee,Ge/Ee,0,we)})(f),ve=A.length;for(;A.length;){const we=A.pop();(we.d>ie.d||!ie.d)&&(ie=we,c&&console.log("found best %d after %d probes",Math.round(1e4*we.d)/1e4,ve)),we.max-ie.d<=l||(C=we.h/2,A.push(new em(we.p.x-C,we.p.y-C,C,f)),A.push(new em(we.p.x+C,we.p.y-C,C,f)),A.push(new em(we.p.x-C,we.p.y+C,C,f)),A.push(new em(we.p.x+C,we.p.y+C,C,f)),ve+=4)}return c&&(console.log(`num probes: ${ve}`),console.log(`best distance: ${ie.d}`)),ie.p}function iX(f,l){return l.max-f.max}function em(f,l,c,g){this.p=new p(f,l),this.h=c,this.d=(function(b,C){let A=!1,R=1/0;for(let B=0;B<C.length;B++){const H=C[B];for(let K=0,ie=H.length,ve=ie-1;K<ie;ve=K++){const we=H[K],Ee=H[ve];we.y>b.y!=Ee.y>b.y&&b.x<(Ee.x-we.x)*(b.y-we.y)/(Ee.y-we.y)+we.x&&(A=!A),R=Math.min(R,GR(b,we,Ee))}}return(A?1:-1)*Math.sqrt(R)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Cs;u.aE=void 0,(Cs=u.aE||(u.aE={}))[Cs.center=1]="center",Cs[Cs.left=2]="left",Cs[Cs.right=3]="right",Cs[Cs.top=4]="top",Cs[Cs.bottom=5]="bottom",Cs[Cs["top-left"]=6]="top-left",Cs[Cs["top-right"]=7]="top-right",Cs[Cs["bottom-left"]=8]="bottom-left",Cs[Cs["bottom-right"]=9]="bottom-right";const ow=Number.POSITIVE_INFINITY;function lk(f,l){return l[1]!==ow?(function(c,g,b){let C=0,A=0;switch(g=Math.abs(g),b=Math.abs(b),c){case"top-right":case"top-left":case"top":A=b-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-b}switch(c){case"top-right":case"bottom-right":case"right":C=-g;break;case"top-left":case"bottom-left":case"left":C=g}return[C,A]})(f,l[0],l[1]):(function(c,g){let b=0,C=0;g<0&&(g=0);const A=g/Math.SQRT2;switch(c){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-g;break;case"top":C=g-7}switch(c){case"top-right":case"bottom-right":b=-A;break;case"top-left":case"bottom-left":b=A;break;case"left":b=g;break;case"right":b=-g}return[b,C]})(f,l[0])}function uk(f,l,c){var g;const b=f.layout,C=(g=b.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(l,{},c);if(C){const R=C.values,B=[];for(let H=0;H<R.length;H+=2){const K=B[H]=R[H],ie=R[H+1].map((ve=>ve*Yo));K.startsWith("top")?ie[1]-=7:K.startsWith("bottom")&&(ie[1]+=7),B[H+1]=ie}return new Gn(B)}const A=b.get("text-variable-anchor");if(A){let R;R=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},c)*Yo,ow]:b.get("text-offset").evaluate(l,{},c).map((H=>H*Yo));const B=[];for(const H of A)B.push(H,lk(H,R));return new Gn(B)}return null}function sw(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function aX(f,l,c,g,b,C,A,R,B,H,K,ie){let ve=C.textMaxSize.evaluate(l,{});ve===void 0&&(ve=A);const we=f.layers[0].layout,Ee=we.get("icon-offset").evaluate(l,{},K),Oe=fk(c.horizontal),Ge=A/24,at=f.tilePixelRatio*Ge,Nt=f.tilePixelRatio*ve/24,vt=f.tilePixelRatio*R,Et=f.tilePixelRatio*we.get("symbol-spacing"),Xt=we.get("text-padding")*f.tilePixelRatio,or=(function(Fn,wn,un,ui=1){const Da=Fn.get("icon-padding").evaluate(wn,{},un),No=Da&&Da.values;return[No[0]*ui,No[1]*ui,No[2]*ui,No[3]*ui]})(we,l,K,f.tilePixelRatio),wr=we.get("text-max-angle")/180*Math.PI,Zr=we.get("text-rotation-alignment")!=="viewport"&&we.get("symbol-placement")!=="point",Fr=we.get("icon-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point",Gr=we.get("symbol-placement"),gn=Et/2,qr=we.get("icon-text-fit");let Hr;g&&qr!=="none"&&(f.allowVerticalPlacement&&c.vertical&&(Hr=DO(g,c.vertical,qr,we.get("icon-text-fit-padding"),Ee,Ge)),Oe&&(g=DO(g,Oe,qr,we.get("icon-text-fit-padding"),Ee,Ge)));const mr=K?ie.line.getGranularityForZoomLevel(K.z):1,Ln=(Fn,wn)=>{wn.x<0||wn.x>=xe||wn.y<0||wn.y>=xe||(function(un,ui,Da,No,As,Eu,Rl,ps,Pa,Jo,ms,gs,al,Cu,Qo,Ol,Fo,es,ts,vo,pa,gc,tm,yc,lX){const rm=un.addToLineVertexArray(ui,Da);let Id,nm,im,am,mk=0,gk=0,yk=0,vk=0,mw=-1,gw=-1;const $f={};let bk=Ch("");if(un.allowVerticalPlacement&&No.vertical){const Ns=ps.layout.get("text-rotate").evaluate(pa,{},yc)+90;im=new bb(Pa,ui,Jo,ms,gs,No.vertical,al,Cu,Qo,Ns),Rl&&(am=new bb(Pa,ui,Jo,ms,gs,Rl,Fo,es,Qo,Ns))}if(As){const Ns=ps.layout.get("icon-rotate").evaluate(pa,{}),Au=ps.layout.get("icon-text-fit")!=="none",Md=ok(As,Ns,tm,Au),bc=Rl?ok(Rl,Ns,tm,Au):void 0;nm=new bb(Pa,ui,Jo,ms,gs,As,Fo,es,!1,Ns),mk=4*Md.length;const Rd=un.iconSizeData;let rf=null;Rd.kind==="source"?(rf=[zf*ps.layout.get("icon-size").evaluate(pa,{})],rf[0]>Th&&ut(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Rd.kind==="composite"&&(rf=[zf*gc.compositeIconSizes[0].evaluate(pa,{},yc),zf*gc.compositeIconSizes[1].evaluate(pa,{},yc)],(rf[0]>Th||rf[1]>Th)&&ut(`${un.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),un.addSymbols(un.icon,Md,rf,vo,ts,pa,u.ao.none,ui,rm.lineStartIndex,rm.lineLength,-1,yc),mw=un.icon.placedSymbolArray.length-1,bc&&(gk=4*bc.length,un.addSymbols(un.icon,bc,rf,vo,ts,pa,u.ao.vertical,ui,rm.lineStartIndex,rm.lineLength,-1,yc),gw=un.icon.placedSymbolArray.length-1)}const _k=Object.keys(No.horizontal);for(const Ns of _k){const Au=No.horizontal[Ns];if(!Id){bk=Ch(Au.text);const bc=ps.layout.get("text-rotate").evaluate(pa,{},yc);Id=new bb(Pa,ui,Jo,ms,gs,Au,al,Cu,Qo,bc)}const Md=Au.positionedLines.length===1;if(yk+=ck(un,ui,Au,Eu,ps,Qo,pa,Ol,rm,No.vertical?u.ao.horizontal:u.ao.horizontalOnly,Md?_k:[Ns],$f,mw,gc,yc),Md)break}No.vertical&&(vk+=ck(un,ui,No.vertical,Eu,ps,Qo,pa,Ol,rm,u.ao.vertical,["vertical"],$f,gw,gc,yc));const uX=Id?Id.boxStartIndex:un.collisionBoxArray.length,cX=Id?Id.boxEndIndex:un.collisionBoxArray.length,fX=im?im.boxStartIndex:un.collisionBoxArray.length,hX=im?im.boxEndIndex:un.collisionBoxArray.length,dX=nm?nm.boxStartIndex:un.collisionBoxArray.length,pX=nm?nm.boxEndIndex:un.collisionBoxArray.length,mX=am?am.boxStartIndex:un.collisionBoxArray.length,gX=am?am.boxEndIndex:un.collisionBoxArray.length;let vc=-1;const xb=(Ns,Au)=>Ns&&Ns.circleDiameter?Math.max(Ns.circleDiameter,Au):Au;vc=xb(Id,vc),vc=xb(im,vc),vc=xb(nm,vc),vc=xb(am,vc);const xk=vc>-1?1:0;xk&&(vc*=lX/Yo),un.glyphOffsetArray.length>=Jp.MAX_GLYPHS&&ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),pa.sortKey!==void 0&&un.addToSortKeyRanges(un.symbolInstances.length,pa.sortKey);const yX=uk(ps,pa,yc),[vX,bX]=(function(Ns,Au){const Md=Ns.length,bc=Au?.values;if(bc?.length>0)for(let Rd=0;Rd<bc.length;Rd+=2){const rf=bc[Rd+1];Ns.emplaceBack(u.aE[bc[Rd]],rf[0],rf[1])}return[Md,Ns.length]})(un.textAnchorOffsets,yX);un.symbolInstances.emplaceBack(ui.x,ui.y,$f.right>=0?$f.right:-1,$f.center>=0?$f.center:-1,$f.left>=0?$f.left:-1,$f.vertical||-1,mw,gw,bk,uX,cX,fX,hX,dX,pX,mX,gX,Jo,yk,vk,mk,gk,xk,0,al,vc,vX,bX)})(f,wn,Fn,c,g,b,Hr,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,at,[Xt,Xt,Xt,Xt],Zr,B,vt,or,Fr,Ee,l,C,H,K,A)};if(Gr==="line")for(const Fn of ek(l.geometry,0,0,xe,xe)){const wn=Pd(Fn,mr),un=tX(wn,Et,wr,c.vertical||Oe,g,24,Nt,f.overscaling,xe);for(const ui of un)Oe&&oX(f,Oe.text,gn,ui)||Ln(wn,ui)}else if(Gr==="line-center"){for(const Fn of l.geometry)if(Fn.length>1){const wn=Pd(Fn,mr),un=eX(wn,wr,c.vertical||Oe,g,24,Nt);un&&Ln(wn,un)}}else if(l.type==="Polygon")for(const Fn of Zi(l.geometry,0)){const wn=nX(Fn,16);Ln(Pd(Fn[0],mr,!0),new Mh(wn.x,wn.y,0))}else if(l.type==="LineString")for(const Fn of l.geometry){const wn=Pd(Fn,mr);Ln(wn,new Mh(wn[0].x,wn[0].y,0))}else if(l.type==="Point")for(const Fn of l.geometry)for(const wn of Fn)Ln([wn],new Mh(wn.x,wn.y,0))}function ck(f,l,c,g,b,C,A,R,B,H,K,ie,ve,we,Ee){const Oe=(function(Nt,vt,Et,Xt,or,wr,Zr,Fr){const Gr=Xt.layout.get("text-rotate").evaluate(wr,{})*Math.PI/180,gn=[];for(const qr of vt.positionedLines)for(const Hr of qr.positionedGlyphs){if(!Hr.rect)continue;const mr=Hr.rect||{};let Ln=4,Fn=!0,wn=1,un=0;const ui=(or||Fr)&&Hr.vertical,Da=Hr.metrics.advance*Hr.scale/2;if(Fr&&vt.verticalizable&&(un=qr.lineOffset/2-(Hr.imageName?-(Yo-Hr.metrics.width*Hr.scale)/2:(Hr.scale-1)*Yo)),Hr.imageName){const es=Zr[Hr.imageName];Fn=es.sdf,wn=es.pixelRatio,Ln=1/wn}const No=or?[Hr.x+Da,Hr.y]:[0,0];let As=or?[0,0]:[Hr.x+Da+Et[0],Hr.y+Et[1]-un],Eu=[0,0];ui&&(Eu=As,As=[0,0]);const Rl=Hr.metrics.isDoubleResolution?2:1,ps=(Hr.metrics.left-Ln)*Hr.scale-Da+As[0],Pa=(-Hr.metrics.top-Ln)*Hr.scale+As[1],Jo=ps+mr.w/Rl*Hr.scale/wn,ms=Pa+mr.h/Rl*Hr.scale/wn,gs=new p(ps,Pa),al=new p(Jo,Pa),Cu=new p(ps,ms),Qo=new p(Jo,ms);if(ui){const es=new p(-Da,Da- -17),ts=-Math.PI/2,vo=12-Da,pa=new p(22-vo,-(Hr.imageName?vo:0)),gc=new p(...Eu);gs._rotateAround(ts,es)._add(pa)._add(gc),al._rotateAround(ts,es)._add(pa)._add(gc),Cu._rotateAround(ts,es)._add(pa)._add(gc),Qo._rotateAround(ts,es)._add(pa)._add(gc)}if(Gr){const es=Math.sin(Gr),ts=Math.cos(Gr),vo=[ts,-es,es,ts];gs._matMult(vo),al._matMult(vo),Cu._matMult(vo),Qo._matMult(vo)}const Ol=new p(0,0),Fo=new p(0,0);gn.push({tl:gs,tr:al,bl:Cu,br:Qo,tex:mr,writingMode:vt.writingMode,glyphOffset:No,sectionIndex:Hr.sectionIndex,isSDF:Fn,pixelOffsetTL:Ol,pixelOffsetBR:Fo,minFontScaleX:0,minFontScaleY:0})}return gn})(0,c,R,b,C,A,g,f.allowVerticalPlacement),Ge=f.textSizeData;let at=null;Ge.kind==="source"?(at=[zf*b.layout.get("text-size").evaluate(A,{})],at[0]>Th&&ut(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ge.kind==="composite"&&(at=[zf*we.compositeTextSizes[0].evaluate(A,{},Ee),zf*we.compositeTextSizes[1].evaluate(A,{},Ee)],(at[0]>Th||at[1]>Th)&&ut(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,Oe,at,R,C,A,H,l,B.lineStartIndex,B.lineLength,ve,Ee);for(const Nt of K)ie[Nt]=f.text.placedSymbolArray.length-1;return 4*Oe.length}function fk(f){for(const l in f)return f[l];return null}function oX(f,l,c,g){const b=f.compareText;if(l in b){const C=b[l];for(let A=C.length-1;A>=0;A--)if(g.dist(C[A])<c)return!0}else b[l]=[];return b[l].push(g),!1}const hk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class lw{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,g]=new Uint8Array(l,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=g>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const C=hk[15&g];if(!C)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(l,2,1),[R]=new Uint32Array(l,4,1);return new lw(R,A,C,l)}constructor(l,c=64,g=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=g,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const C=hk.indexOf(this.ArrayType),A=2*l*this.ArrayType.BYTES_PER_ELEMENT,R=l*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-R%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${g}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+R+B,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+A+R+B),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+R+B,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=l)}add(l,c){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=l,this.coords[this._pos++]=c,g}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return uw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,c,g,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:A,nodeSize:R}=this,B=[0,C.length-1,0],H=[];for(;B.length;){const K=B.pop()||0,ie=B.pop()||0,ve=B.pop()||0;if(ie-ve<=R){for(let Ge=ve;Ge<=ie;Ge++){const at=A[2*Ge],Nt=A[2*Ge+1];at>=l&&at<=g&&Nt>=c&&Nt<=b&&H.push(C[Ge])}continue}const we=ve+ie>>1,Ee=A[2*we],Oe=A[2*we+1];Ee>=l&&Ee<=g&&Oe>=c&&Oe<=b&&H.push(C[we]),(K===0?l<=Ee:c<=Oe)&&(B.push(ve),B.push(we-1),B.push(1-K)),(K===0?g>=Ee:b>=Oe)&&(B.push(we+1),B.push(ie),B.push(1-K))}return H}within(l,c,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:C,nodeSize:A}=this,R=[0,b.length-1,0],B=[],H=g*g;for(;R.length;){const K=R.pop()||0,ie=R.pop()||0,ve=R.pop()||0;if(ie-ve<=A){for(let Ge=ve;Ge<=ie;Ge++)pk(C[2*Ge],C[2*Ge+1],l,c)<=H&&B.push(b[Ge]);continue}const we=ve+ie>>1,Ee=C[2*we],Oe=C[2*we+1];pk(Ee,Oe,l,c)<=H&&B.push(b[we]),(K===0?l-g<=Ee:c-g<=Oe)&&(R.push(ve),R.push(we-1),R.push(1-K)),(K===0?l+g>=Ee:c+g>=Oe)&&(R.push(we+1),R.push(ie),R.push(1-K))}return B}}function uw(f,l,c,g,b,C){if(b-g<=c)return;const A=g+b>>1;dk(f,l,A,g,b,C),uw(f,l,c,g,A-1,1-C),uw(f,l,c,A+1,b,1-C)}function dk(f,l,c,g,b,C){for(;b>g;){if(b-g>600){const H=b-g+1,K=c-g+1,ie=Math.log(H),ve=.5*Math.exp(2*ie/3),we=.5*Math.sqrt(ie*ve*(H-ve)/H)*(K-H/2<0?-1:1);dk(f,l,c,Math.max(g,Math.floor(c-K*ve/H+we)),Math.min(b,Math.floor(c+(H-K)*ve/H+we)),C)}const A=l[2*c+C];let R=g,B=b;for(xy(f,l,g,c),l[2*b+C]>A&&xy(f,l,g,b);R<B;){for(xy(f,l,R,B),R++,B--;l[2*R+C]<A;)R++;for(;l[2*B+C]>A;)B--}l[2*g+C]===A?xy(f,l,g,B):(B++,xy(f,l,B,b)),B<=c&&(g=B+1),c<=B&&(b=B-1)}}function xy(f,l,c,g){cw(f,c,g),cw(l,2*c,2*g),cw(l,2*c+1,2*g+1)}function cw(f,l,c){const g=f[l];f[l]=f[c],f[c]=g}function pk(f,l,c,g){const b=f-c,C=l-g;return b*b+C*C}var fw;u.cx=void 0,(fw=u.cx||(u.cx={})).create="create",fw.load="load",fw.fullLoad="fullLoad";let _b=null,wy=[];const hw=1e3/60,dw="loadTime",pw="fullLoadTime",sX={mark(f){performance.mark(f)},frame(f){const l=f;_b!=null&&wy.push(l-_b),_b=l},clearMetrics(){_b=null,wy=[],performance.clearMeasures(dw),performance.clearMeasures(pw);for(const f in u.cx)performance.clearMarks(u.cx[f])},getPerformanceMetrics(){performance.measure(dw,u.cx.create,u.cx.load),performance.measure(pw,u.cx.create,u.cx.fullLoad);const f=performance.getEntriesByName(dw)[0].duration,l=performance.getEntriesByName(pw)[0].duration,c=wy.length,g=1/(wy.reduce(((C,A)=>C+A),0)/c/1e3),b=wy.filter((C=>C>hw)).reduce(((C,A)=>C+(A-hw)/hw),0);return{loadTime:f,fullLoadTime:l,fps:g,percentDroppedFrames:b/(c+b)*100,totalFrames:c}}};u.$=xe,u.A=F,u.B=function([f,l,c]){return l+=90,l*=Math.PI/180,c*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(c),y:f*Math.sin(l)*Math.sin(c),z:f*Math.cos(c)}},u.C=On,u.D=Jr,u.E=Pr,u.F=Wr,u.G=$,u.H=function(f){if(lr==null){const l=f.navigator?f.navigator.userAgent:null;lr=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return lr},u.I=K2,u.J=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new YK((()=>this.process())),this.subscription=Mt(this.target,"message",(c=>this.receive(c)),!1),this.globalScope=sr(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise(((c,g)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=l?Mt(l.signal,"abort",(()=>{C?.unsubscribe(),delete this.resolveRejects[b];const B={id:b,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(B)}),JK):null;this.resolveRejects[b]={resolve:B=>{C?.unsubscribe(),c(B)},reject:B=>{C?.unsubscribe(),g(B)}};const A=[],R=Object.assign(Object.assign({},f),{id:b,sourceMapId:this.mapId,origin:location.origin,data:tr(f.data,A)});this.target.postMessage(R,{transfer:A})}))}receive(f){const l=f.data,c=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[c];const g=this.abortControllers[c];return delete this.abortControllers[c],void(g&&g.abort())}if(sr(self)||l.mustQueue)return this.tasks[c]=l,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,l)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return a(this,void 0,void 0,(function*(){if(l.type==="<response>"){const b=this.resolveRejects[f];return delete this.resolveRejects[f],b?void(l.error?b.reject(ot(l.error)):b.resolve(ot(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=ot(l.data),g=new AbortController;this.abortControllers[f]=g;try{const b=yield this.messageHandlers[l.type](l.sourceMapId,c,g);this.completeTask(f,null,b)}catch(b){this.completeTask(f,b)}}))}completeTask(f,l,c){const g=[];delete this.abortControllers[f];const b={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?tr(l):null,data:tr(c,g)};this.target.postMessage(b,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.K=Me,u.L=function(){var f=new F(16);return F!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},u.M=function(f,l,c){var g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe=c[0],Ge=c[1],at=c[2];return l===f?(f[12]=l[0]*Oe+l[4]*Ge+l[8]*at+l[12],f[13]=l[1]*Oe+l[5]*Ge+l[9]*at+l[13],f[14]=l[2]*Oe+l[6]*Ge+l[10]*at+l[14],f[15]=l[3]*Oe+l[7]*Ge+l[11]*at+l[15]):(b=l[1],C=l[2],A=l[3],R=l[4],B=l[5],H=l[6],K=l[7],ie=l[8],ve=l[9],we=l[10],Ee=l[11],f[0]=g=l[0],f[1]=b,f[2]=C,f[3]=A,f[4]=R,f[5]=B,f[6]=H,f[7]=K,f[8]=ie,f[9]=ve,f[10]=we,f[11]=Ee,f[12]=g*Oe+R*Ge+ie*at+l[12],f[13]=b*Oe+B*Ge+ve*at+l[13],f[14]=C*Oe+H*Ge+we*at+l[14],f[15]=A*Oe+K*Ge+Ee*at+l[15]),f},u.N=function(f,l,c){var g=c[0],b=c[1],C=c[2];return f[0]=l[0]*g,f[1]=l[1]*g,f[2]=l[2]*g,f[3]=l[3]*g,f[4]=l[4]*b,f[5]=l[5]*b,f[6]=l[6]*b,f[7]=l[7]*b,f[8]=l[8]*C,f[9]=l[9]*C,f[10]=l[10]*C,f[11]=l[11]*C,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},u.O=function(f,l,c){var g=l[0],b=l[1],C=l[2],A=l[3],R=l[4],B=l[5],H=l[6],K=l[7],ie=l[8],ve=l[9],we=l[10],Ee=l[11],Oe=l[12],Ge=l[13],at=l[14],Nt=l[15],vt=c[0],Et=c[1],Xt=c[2],or=c[3];return f[0]=vt*g+Et*R+Xt*ie+or*Oe,f[1]=vt*b+Et*B+Xt*ve+or*Ge,f[2]=vt*C+Et*H+Xt*we+or*at,f[3]=vt*A+Et*K+Xt*Ee+or*Nt,f[4]=(vt=c[4])*g+(Et=c[5])*R+(Xt=c[6])*ie+(or=c[7])*Oe,f[5]=vt*b+Et*B+Xt*ve+or*Ge,f[6]=vt*C+Et*H+Xt*we+or*at,f[7]=vt*A+Et*K+Xt*Ee+or*Nt,f[8]=(vt=c[8])*g+(Et=c[9])*R+(Xt=c[10])*ie+(or=c[11])*Oe,f[9]=vt*b+Et*B+Xt*ve+or*Ge,f[10]=vt*C+Et*H+Xt*we+or*at,f[11]=vt*A+Et*K+Xt*Ee+or*Nt,f[12]=(vt=c[12])*g+(Et=c[13])*R+(Xt=c[14])*ie+(or=c[15])*Oe,f[13]=vt*b+Et*B+Xt*ve+or*Ge,f[14]=vt*C+Et*H+Xt*we+or*at,f[15]=vt*A+Et*K+Xt*Ee+or*Nt,f},u.P=p,u.Q=function(f,l){const c={};for(let g=0;g<l.length;g++){const b=l[g];b in f&&(c[b]=f[b])}return c},u.R=Ml,u.S=Ih,u.T=B2,u.U=GO,u.V=VO,u.W=O,u.X=L,u.Y=Ve,u.Z=Su,u._=a,u.a=de,u.a$=ae,u.a0=function(f,l){var c,g,b,C,A;if(!f)return l??{};if(!l)return f;let R=Object.assign({},f);if(l.removeAll&&(R={removeAll:!0}),l.remove){const B=new Set(l.remove);R.add&&(R.add=R.add.filter((K=>!B.has(K.id)))),R.update&&(R.update=R.update.filter((K=>!B.has(K.id))));const H=new Set(((c=f.add)!==null&&c!==void 0?c:[]).map((K=>K.id)));l.remove=l.remove.filter((K=>!H.has(K)))}if(l.remove){const B=new Set(R.remove?R.remove.concat(l.remove):l.remove);R.remove=Array.from(B.values())}if(l.add){const B=R.add?R.add.concat(l.add):l.add,H=new Map(B.map((K=>[K.id,K])));R.add=Array.from(H.values())}if(l.update){const B=new Map((g=R.update)===null||g===void 0?void 0:g.map((H=>[H.id,H])));for(const H of l.update){const K=(b=B.get(H.id))!==null&&b!==void 0?b:{id:H.id};H.newGeometry&&(K.newGeometry=H.newGeometry),H.addOrUpdateProperties&&(K.addOrUpdateProperties=((C=K.addOrUpdateProperties)!==null&&C!==void 0?C:[]).concat(H.addOrUpdateProperties)),H.removeProperties&&(K.removeProperties=((A=K.removeProperties)!==null&&A!==void 0?A:[]).concat(H.removeProperties)),H.removeAllProperties&&(K.removeAllProperties=!0),B.set(H.id,K)}R.update=Array.from(B.values())}return R.remove&&R.add&&(R.remove=R.remove.filter((B=>R.add.findIndex((H=>H.id===B))===-1))),R},u.a1=by,u.a2=Td,u.a3=25,u.a4=aw,u.a5=f=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((c=>{l.onloadstart=()=>{c(l)};for(const g of f){const b=window.document.createElement("source");wt(g)||(l.crossOrigin="Anonymous"),b.src=g,l.appendChild(b)}}))},u.a6=je,u.a7=function(){return mt++},u.a8=oe,u.a9=Jp,u.aA=function(f){let l=1/0,c=1/0,g=-1/0,b=-1/0;for(const C of f)l=Math.min(l,C.x),c=Math.min(c,C.y),g=Math.max(g,C.x),b=Math.max(b,C.y);return[l,c,g,b]},u.aB=Yo,u.aC=Fe,u.aD=function(f,l,c,g,b=!1){if(!c[0]&&!c[1])return[0,0];const C=b?g==="map"?-f.bearingInRadians:0:g==="viewport"?f.bearingInRadians:0;if(C){const A=Math.sin(C),R=Math.cos(C);c=[c[0]*R-c[1]*A,c[0]*A+c[1]*R]}return[b?c[0]:Fe(l,c[0],f.zoom),b?c[1]:Fe(l,c[1],f.zoom)]},u.aF=J2,u.aG=sw,u.aH=Y2,u.aI=lw,u.aJ=Bn,u.aK=cb,u.aL=ft,u.aM=kn,u.aN=Ri,u.aO=ht,u.aP=Ut,u.aQ=WO,u.aR=se,u.aS=Y,u.aT=function(f){var l=new F(3);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},u.aU=function(f,l,c){return f[0]=l[0]-c[0],f[1]=l[1]-c[1],f[2]=l[2]-c[2],f},u.aV=function(f,l){var c=l[0],g=l[1],b=l[2],C=c*c+g*g+b*b;return C>0&&(C=1/Math.sqrt(C)),f[0]=l[0]*C,f[1]=l[1]*C,f[2]=l[2]*C,f},u.aW=W,u.aX=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]},u.aY=function(f,l,c){return f[0]=l[0]*c[0],f[1]=l[1]*c[1],f[2]=l[2]*c[2],f[3]=l[3]*c[3],f},u.aZ=Z,u.a_=function(f,l,c){const g=l[0]*c[0]+l[1]*c[1]+l[2]*c[2];return g===0?null:(-(f[0]*c[0]+f[1]*c[1]+f[2]*c[2])-c[3])/g},u.aa=hc,u.ab=mc,u.ac=YO,u.ad=function(f){const l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((c,g,b,C)=>{const A=b||C;return l[g]=!A||A.toLowerCase(),""})),l["max-age"]){const c=parseInt(l["max-age"],10);isNaN(c)?delete l["max-age"]:l["max-age"]=c}return l},u.ae=Kt,u.af=function(f){return Math.pow(2,f)},u.ag=q,u.ah=$e,u.ai=85.051129,u.aj=HO,u.ak=function(f){return Math.log(f)/Math.LN2},u.al=function(f){var l=f[0],c=f[1];return l*l+c*c},u.am=function(f,l){const c=[];for(const g in f)g in l||c.push(g);return c},u.an=function(f,l){let c=0,g=0;if(f.kind==="constant")g=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:b,minZoom:C,maxZoom:A}=f,R=b?$e(Qr.interpolationFactor(b,l,C,A),0,1):0;f.kind==="camera"?g=On.number(f.minSize,f.maxSize,R):c=R}return{uSizeT:c,uSize:g}},u.ap=function(f,{uSize:l,uSizeT:c},{lowerSize:g,upperSize:b}){return f.kind==="source"?g/zf:f.kind==="composite"?On.number(g/zf,b/zf,c):l},u.aq=function(f,l){var c=l[0],g=l[1],b=l[2],C=l[3],A=l[4],R=l[5],B=l[6],H=l[7],K=l[8],ie=l[9],ve=l[10],we=l[11],Ee=l[12],Oe=l[13],Ge=l[14],at=l[15],Nt=c*R-g*A,vt=c*B-b*A,Et=c*H-C*A,Xt=g*B-b*R,or=g*H-C*R,wr=b*H-C*B,Zr=K*Oe-ie*Ee,Fr=K*Ge-ve*Ee,Gr=K*at-we*Ee,gn=ie*Ge-ve*Oe,qr=ie*at-we*Oe,Hr=ve*at-we*Ge,mr=Nt*Hr-vt*qr+Et*gn+Xt*Gr-or*Fr+wr*Zr;return mr?(f[0]=(R*Hr-B*qr+H*gn)*(mr=1/mr),f[1]=(b*qr-g*Hr-C*gn)*mr,f[2]=(Oe*wr-Ge*or+at*Xt)*mr,f[3]=(ve*or-ie*wr-we*Xt)*mr,f[4]=(B*Gr-A*Hr-H*Fr)*mr,f[5]=(c*Hr-b*Gr+C*Fr)*mr,f[6]=(Ge*Et-Ee*wr-at*vt)*mr,f[7]=(K*wr-ve*Et+we*vt)*mr,f[8]=(A*qr-R*Gr+H*Zr)*mr,f[9]=(g*Gr-c*qr-C*Zr)*mr,f[10]=(Ee*or-Oe*Et+at*Nt)*mr,f[11]=(ie*Et-K*or-we*Nt)*mr,f[12]=(R*Fr-A*gn-B*Zr)*mr,f[13]=(c*gn-g*Fr+b*Zr)*mr,f[14]=(Oe*vt-Ee*Xt-Ge*Nt)*mr,f[15]=(K*Xt-ie*vt+ve*Nt)*mr,f):null},u.ar=Se,u.as=function(f){var l=f[0],c=f[1];return Math.sqrt(l*l+c*c)},u.at=function(f){return f[0]=0,f[1]=0,f},u.au=function(f,l,c){return f[0]=l[0]*c,f[1]=l[1]*c,f},u.av=Q2,u.aw=le,u.ax=function(f,l,c,g){const b=l.y-f.y,C=l.x-f.x,A=g.y-c.y,R=g.x-c.x,B=A*C-R*b;if(B===0)return null;const H=(R*(f.y-c.y)-A*(f.x-c.x))/B;return new p(f.x+H*C,f.y+H*b)},u.ay=ek,u.az=qR,u.b=dr,u.b$=class extends S{},u.b0=function(f,l,c){return f[0]=l[0]*c,f[1]=l[1]*c,f[2]=l[2]*c,f[3]=l[3]*c,f},u.b1=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]},u.b2=KO,u.b3=Qp,u.b4=function(f,l,c,g,b){var C=1/Math.tan(l/2);if(f[0]=C/c,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=C,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,b!=null&&b!==1/0){var A=1/(g-b);f[10]=(b+g)*A,f[14]=2*b*g*A}else f[10]=-1,f[14]=-2*g;return f},u.b5=function(f){var l=new F(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},u.b6=function(f,l,c){var g=Math.sin(c),b=Math.cos(c),C=l[0],A=l[1],R=l[2],B=l[3],H=l[4],K=l[5],ie=l[6],ve=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=C*b+H*g,f[1]=A*b+K*g,f[2]=R*b+ie*g,f[3]=B*b+ve*g,f[4]=H*b-C*g,f[5]=K*b-A*g,f[6]=ie*b-R*g,f[7]=ve*b-B*g,f},u.b7=function(f,l,c){var g=Math.sin(c),b=Math.cos(c),C=l[4],A=l[5],R=l[6],B=l[7],H=l[8],K=l[9],ie=l[10],ve=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=C*b+H*g,f[5]=A*b+K*g,f[6]=R*b+ie*g,f[7]=B*b+ve*g,f[8]=H*b-C*g,f[9]=K*b-A*g,f[10]=ie*b-R*g,f[11]=ve*b-B*g,f},u.b8=function(){const f=new Float32Array(16);return q(f),f},u.b9=function(){const f=new Float64Array(16);return q(f),f},u.bA=function(f,l){const c=He(f,360),g=He(l,360),b=g-c,C=g>c?b-360:b+360;return Math.abs(b)<Math.abs(C)?b:C},u.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},u.bC=function(f,l,c,g){const b=Math.sqrt(f*f+l*l),C=Math.sqrt(c*c+g*g);f/=b,l/=b,c/=C,g/=C;const A=Math.acos(f*c+l*g);return-l*c+f*g>0?A:-A},u.bD=function(f,l){const c=He(f,2*Math.PI),g=He(l,2*Math.PI);return Math.min(Math.abs(c-g),Math.abs(c-g+2*Math.PI),Math.abs(c-g-2*Math.PI))},u.bE=function(){const f={},l=bt.$version;for(const c in bt.$root){const g=bt.$root[c];if(g.required){let b=null;b=c==="version"?l:g.type==="array"?[]:{},b!=null&&(f[c]=b)}}return f},u.bF=zt,u.bG=Ke,u.bH=function f(l,c){if(Array.isArray(l)){if(!Array.isArray(c)||l.length!==c.length)return!1;for(let g=0;g<l.length;g++)if(!f(l[g],c[g]))return!1;return!0}if(typeof l=="object"&&l!==null&&c!==null){if(typeof c!="object"||Object.keys(l).length!==Object.keys(c).length)return!1;for(const g in l)if(!f(l[g],c[g]))return!1;return!0}return l===c},u.bI=function(f){f=f.slice();const l=Object.create(null);for(let c=0;c<f.length;c++)l[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=Mr(f[c],l[f[c].ref]));return f},u.bJ=function(f){if(f.type==="custom")return new XK(f);switch(f.type){case"background":return new WK(f);case"circle":return new OZ(f);case"color-relief":return new BZ(f);case"fill":return new QZ(f);case"fill-extrusion":return new cK(f);case"heatmap":return new LZ(f);case"hillshade":return new NZ(f);case"line":return new yK(f);case"raster":return new KK(f);case"symbol":return new mb(f)}},u.bK=Tt,u.bL=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let c=[];try{if(!Nr(f.version,l.version))return[{command:"setStyle",args:[l]}];Nr(f.center,l.center)||c.push({command:"setCenter",args:[l.center]}),Nr(f.state,l.state)||c.push({command:"setGlobalState",args:[l.state]}),Nr(f.centerAltitude,l.centerAltitude)||c.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Nr(f.zoom,l.zoom)||c.push({command:"setZoom",args:[l.zoom]}),Nr(f.bearing,l.bearing)||c.push({command:"setBearing",args:[l.bearing]}),Nr(f.pitch,l.pitch)||c.push({command:"setPitch",args:[l.pitch]}),Nr(f.roll,l.roll)||c.push({command:"setRoll",args:[l.roll]}),Nr(f.sprite,l.sprite)||c.push({command:"setSprite",args:[l.sprite]}),Nr(f.glyphs,l.glyphs)||c.push({command:"setGlyphs",args:[l.glyphs]}),Nr(f.transition,l.transition)||c.push({command:"setTransition",args:[l.transition]}),Nr(f.light,l.light)||c.push({command:"setLight",args:[l.light]}),Nr(f.terrain,l.terrain)||c.push({command:"setTerrain",args:[l.terrain]}),Nr(f.sky,l.sky)||c.push({command:"setSky",args:[l.sky]}),Nr(f.projection,l.projection)||c.push({command:"setProjection",args:[l.projection]});const g={},b=[];(function(A,R,B,H){let K;for(K in R=R||{},A=A||{})Object.prototype.hasOwnProperty.call(A,K)&&(Object.prototype.hasOwnProperty.call(R,K)||gt(K,B,H));for(K in R)Object.prototype.hasOwnProperty.call(R,K)&&(Object.prototype.hasOwnProperty.call(A,K)?Nr(A[K],R[K])||(A[K].type==="geojson"&&R[K].type==="geojson"&&Wt(A,R,K)?en(B,{command:"setGeoJSONSourceData",args:[K,R[K].data]}):xt(K,R,B,H)):Vr(K,R,B))})(f.sources,l.sources,b,g);const C=[];f.layers&&f.layers.forEach((A=>{"source"in A&&g[A.source]?c.push({command:"removeLayer",args:[A.id]}):C.push(A)})),c=c.concat(b),(function(A,R,B){R=R||[];const H=(A=A||[]).map(me),K=R.map(me),ie=A.reduce(qe,{}),ve=R.reduce(qe,{}),we=H.slice(),Ee=Object.create(null);let Oe,Ge,at,Nt,vt;for(let Et=0,Xt=0;Et<H.length;Et++)Oe=H[Et],Object.prototype.hasOwnProperty.call(ve,Oe)?Xt++:(en(B,{command:"removeLayer",args:[Oe]}),we.splice(we.indexOf(Oe,Xt),1));for(let Et=0,Xt=0;Et<K.length;Et++)Oe=K[K.length-1-Et],we[we.length-1-Et]!==Oe&&(Object.prototype.hasOwnProperty.call(ie,Oe)?(en(B,{command:"removeLayer",args:[Oe]}),we.splice(we.lastIndexOf(Oe,we.length-Xt),1)):Xt++,Nt=we[we.length-Et],en(B,{command:"addLayer",args:[ve[Oe],Nt]}),we.splice(we.length-Et,0,Oe),Ee[Oe]=!0);for(let Et=0;Et<K.length;Et++)if(Oe=K[Et],Ge=ie[Oe],at=ve[Oe],!Ee[Oe]&&!Nr(Ge,at))if(Nr(Ge.source,at.source)&&Nr(Ge["source-layer"],at["source-layer"])&&Nr(Ge.type,at.type)){for(vt in ne(Ge.layout,at.layout,B,Oe,null,"setLayoutProperty"),ne(Ge.paint,at.paint,B,Oe,null,"setPaintProperty"),Nr(Ge.filter,at.filter)||en(B,{command:"setFilter",args:[Oe,at.filter]}),Nr(Ge.minzoom,at.minzoom)&&Nr(Ge.maxzoom,at.maxzoom)||en(B,{command:"setLayerZoomRange",args:[Oe,at.minzoom,at.maxzoom]}),Ge)Object.prototype.hasOwnProperty.call(Ge,vt)&&vt!=="layout"&&vt!=="paint"&&vt!=="filter"&&vt!=="metadata"&&vt!=="minzoom"&&vt!=="maxzoom"&&(vt.indexOf("paint.")===0?ne(Ge[vt],at[vt],B,Oe,vt.slice(6),"setPaintProperty"):Nr(Ge[vt],at[vt])||en(B,{command:"setLayerProperty",args:[Oe,vt,at[vt]]}));for(vt in at)Object.prototype.hasOwnProperty.call(at,vt)&&!Object.prototype.hasOwnProperty.call(Ge,vt)&&vt!=="layout"&&vt!=="paint"&&vt!=="filter"&&vt!=="metadata"&&vt!=="minzoom"&&vt!=="maxzoom"&&(vt.indexOf("paint.")===0?ne(Ge[vt],at[vt],B,Oe,vt.slice(6),"setPaintProperty"):Nr(Ge[vt],at[vt])||en(B,{command:"setLayerProperty",args:[Oe,vt,at[vt]]}))}else en(B,{command:"removeLayer",args:[Oe]}),Nt=we[we.lastIndexOf(Oe)+1],en(B,{command:"addLayer",args:[at,Nt]})})(C,l.layers,c)}catch(g){console.warn("Unable to compute style diff:",g),c=[{command:"setStyle",args:[l]}]}return c},u.bM=function(f){const l=[],c=f.id;return c===void 0&&l.push({message:`layers.${c}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${c}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),l},u.bN=rt,u.bO=Lt,u.bP=class extends Ds{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},u.bQ=Do,u.bR=class extends Ds{constructor(f,l){super(f,l),this.current=Zl}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},u.bS=go,u.bT=class extends Ds{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},u.bU=class extends Ds{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},u.bV=D,u.bW=function(f,l){var c=Math.sin(l),g=Math.cos(l);return f[0]=g,f[1]=c,f[2]=0,f[3]=-c,f[4]=g,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},u.bX=function(f,l,c){var g=l[0],b=l[1],C=l[2];return f[0]=g*c[0]+b*c[3]+C*c[6],f[1]=g*c[1]+b*c[4]+C*c[7],f[2]=g*c[2]+b*c[5]+C*c[8],f},u.bY=function(f,l,c,g,b,C,A){var R=1/(l-c),B=1/(g-b),H=1/(C-A);return f[0]=-2*R,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*B,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*H,f[11]=0,f[12]=(l+c)*R,f[13]=(b+g)*B,f[14]=(A+C)*H,f[15]=1,f},u.bZ=class extends Ds{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;const l=new Float32Array(4*f.length);for(let c=0;c<f.length;c++)l[4*c]=f[c].r,l[4*c+1]=f[c].g,l[4*c+2]=f[c].b,l[4*c+3]=f[c].a;this.gl.uniform4fv(this.location,l)}}},u.b_=class extends Ds{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;const l=new Float32Array(f);this.gl.uniform1fv(this.location,l)}}},u.ba=function(){return new Float64Array(16)},u.bb=function(f,l,c){const g=new Float64Array(4);return ye(g,f,l-90,c),g},u.bc=function(f,l,c,g){var b,C,A,R,B,H=l[0],K=l[1],ie=l[2],ve=l[3],we=c[0],Ee=c[1],Oe=c[2],Ge=c[3];return(C=H*we+K*Ee+ie*Oe+ve*Ge)<0&&(C=-C,we=-we,Ee=-Ee,Oe=-Oe,Ge=-Ge),1-C>N?(b=Math.acos(C),A=Math.sin(b),R=Math.sin((1-g)*b)/A,B=Math.sin(g*b)/A):(R=1-g,B=g),f[0]=R*H+B*we,f[1]=R*K+B*Ee,f[2]=R*ie+B*Oe,f[3]=R*ve+B*Ge,f},u.bd=function(f){const l=new Float64Array(9);var c,g,b,C,A,R,B,H,K,ie,ve,we,Ee,Oe,Ge,at,Nt,vt;ie=(b=(g=f)[0])*(B=b+b),ve=(C=g[1])*B,Ee=(A=g[2])*B,Oe=A*(H=C+C),at=(R=g[3])*B,Nt=R*H,vt=R*(K=A+A),(c=l)[0]=1-(we=C*H)-(Ge=A*K),c[3]=ve-vt,c[6]=Ee+Nt,c[1]=ve+vt,c[4]=1-ie-Ge,c[7]=Oe-at,c[2]=Ee-Nt,c[5]=Oe+at,c[8]=1-ie-we;const Et=Ut(-Math.asin($e(l[2],-1,1)));let Xt,or;return Math.hypot(l[5],l[8])<.001?(Xt=0,or=-Ut(Math.atan2(l[3],l[4]))):(Xt=Ut(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),or=Ut(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:Xt,pitch:Et+90,bearing:or}},u.be=function(f,l){return f.roll==l.roll&&f.pitch==l.pitch&&f.bearing==l.bearing},u.bf=fr,u.bg=Qc,u.bh=Zp,u.bi=dy,u.bj=Wp,u.bk=pe,u.bl=_e,u.bm=ja,u.bn=function(f,l,c,g,b){return pe(g,b,$e((f-l)/(c-l),0,1))},u.bo=He,u.bp=function(){return new Float64Array(3)},u.bq=function(f,l,c,g){return f[0]=l[0]+c[0]*g,f[1]=l[1]+c[1]*g,f[2]=l[2]+c[2]*g,f},u.br=ye,u.bs=function(f,l,c){var g=c[0],b=c[1],C=c[2],A=c[3],R=l[0],B=l[1],H=l[2],K=b*H-C*B,ie=C*R-g*H,ve=g*B-b*R;return f[0]=R+A*(K+=K)+b*(ve+=ve)-C*(ie+=ie),f[1]=B+A*ie+C*K-g*ve,f[2]=H+A*ve+g*ie-b*K,f},u.bt=function(f,l,c){const g=(b=[f[0],f[1],f[2],l[0],l[1],l[2],c[0],c[1],c[2]])[0]*((K=b[8])*(A=b[4])-(R=b[5])*(H=b[7]))+b[1]*(-K*(C=b[3])+R*(B=b[6]))+b[2]*(H*C-A*B);var b,C,A,R,B,H,K;if(g===0)return null;const ie=W([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),ve=W([],[c[0],c[1],c[2]],[f[0],f[1],f[2]]),we=W([],[f[0],f[1],f[2]],[l[0],l[1],l[2]]),Ee=se([],ie,-f[3]);return Y(Ee,Ee,se([],ve,-l[3])),Y(Ee,Ee,se([],we,-c[3])),se(Ee,Ee,1/g),Ee},u.bu=nw,u.bv=function(){return new Float64Array(4)},u.bw=function(f,l,c,g){var b=[],C=[];return b[0]=l[0]-c[0],b[1]=l[1]-c[1],b[2]=l[2]-c[2],C[0]=b[0]*Math.cos(g)-b[1]*Math.sin(g),C[1]=b[0]*Math.sin(g)+b[1]*Math.cos(g),C[2]=b[2],f[0]=C[0]+c[0],f[1]=C[1]+c[1],f[2]=C[2]+c[2],f},u.bx=function(f,l,c,g){var b=[],C=[];return b[0]=l[0]-c[0],b[1]=l[1]-c[1],b[2]=l[2]-c[2],C[0]=b[0],C[1]=b[1]*Math.cos(g)-b[2]*Math.sin(g),C[2]=b[1]*Math.sin(g)+b[2]*Math.cos(g),f[0]=C[0]+c[0],f[1]=C[1]+c[1],f[2]=C[2]+c[2],f},u.by=function(f,l,c,g){var b=[],C=[];return b[0]=l[0]-c[0],b[1]=l[1]-c[1],b[2]=l[2]-c[2],C[0]=b[2]*Math.sin(g)+b[0]*Math.cos(g),C[1]=b[1],C[2]=b[2]*Math.cos(g)-b[0]*Math.sin(g),f[0]=C[0]+c[0],f[1]=C[1]+c[1],f[2]=C[2]+c[2],f},u.bz=function(f,l,c){var g=Math.sin(c),b=Math.cos(c),C=l[0],A=l[1],R=l[2],B=l[3],H=l[8],K=l[9],ie=l[10],ve=l[11];return l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=C*b-H*g,f[1]=A*b-K*g,f[2]=R*b-ie*g,f[3]=B*b-ve*g,f[8]=C*g+H*b,f[9]=A*g+K*b,f[10]=R*g+ie*b,f[11]=B*g+ve*b,f},u.c=Ye,u.c0=xK,u.c1=class extends h{},u.c2=F2,u.c3=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},u.c4=QR,u.c5=function(f,l,c){var g=l[0],b=l[1],C=l[2],A=c[3]*g+c[7]*b+c[11]*C+c[15];return f[0]=(c[0]*g+c[4]*b+c[8]*C+c[12])/(A=A||1),f[1]=(c[1]*g+c[5]*b+c[9]*C+c[13])/A,f[2]=(c[2]*g+c[6]*b+c[10]*C+c[14])/A,f},u.c6=class extends ds{},u.c7=class extends J{},u.c8=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},u.c9=function(f,l){var c=f[0],g=f[1],b=f[2],C=f[3],A=f[4],R=f[5],B=f[6],H=f[7],K=f[8],ie=f[9],ve=f[10],we=f[11],Ee=f[12],Oe=f[13],Ge=f[14],at=f[15],Nt=l[0],vt=l[1],Et=l[2],Xt=l[3],or=l[4],wr=l[5],Zr=l[6],Fr=l[7],Gr=l[8],gn=l[9],qr=l[10],Hr=l[11],mr=l[12],Ln=l[13],Fn=l[14],wn=l[15];return Math.abs(c-Nt)<=N*Math.max(1,Math.abs(c),Math.abs(Nt))&&Math.abs(g-vt)<=N*Math.max(1,Math.abs(g),Math.abs(vt))&&Math.abs(b-Et)<=N*Math.max(1,Math.abs(b),Math.abs(Et))&&Math.abs(C-Xt)<=N*Math.max(1,Math.abs(C),Math.abs(Xt))&&Math.abs(A-or)<=N*Math.max(1,Math.abs(A),Math.abs(or))&&Math.abs(R-wr)<=N*Math.max(1,Math.abs(R),Math.abs(wr))&&Math.abs(B-Zr)<=N*Math.max(1,Math.abs(B),Math.abs(Zr))&&Math.abs(H-Fr)<=N*Math.max(1,Math.abs(H),Math.abs(Fr))&&Math.abs(K-Gr)<=N*Math.max(1,Math.abs(K),Math.abs(Gr))&&Math.abs(ie-gn)<=N*Math.max(1,Math.abs(ie),Math.abs(gn))&&Math.abs(ve-qr)<=N*Math.max(1,Math.abs(ve),Math.abs(qr))&&Math.abs(we-Hr)<=N*Math.max(1,Math.abs(we),Math.abs(Hr))&&Math.abs(Ee-mr)<=N*Math.max(1,Math.abs(Ee),Math.abs(mr))&&Math.abs(Oe-Ln)<=N*Math.max(1,Math.abs(Oe),Math.abs(Ln))&&Math.abs(Ge-Fn)<=N*Math.max(1,Math.abs(Ge),Math.abs(Fn))&&Math.abs(at-wn)<=N*Math.max(1,Math.abs(at),Math.abs(wn))},u.cA=function(f,l){de.REGISTERED_PROTOCOLS[f]=l},u.cB=function(f){delete de.REGISTERED_PROTOCOLS[f]},u.cC=function(f,l){const c={};for(let b=0;b<f.length;b++){const C=l&&l[f[b].id]||ay(f[b]);l&&(l[f[b].id]=C);let A=c[C];A||(A=c[C]=[]),A.push(f[b])}const g=[];for(const b in c)g.push(c[b]);return g},u.cD=Te,u.cE=XO,u.cF=JO,u.cG=TO,u.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=xe/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const l=f.bucket.layers[0],c=l.layout,g=l._unevaluatedLayout._values,b={layoutIconSize:g["icon-size"].possiblyEvaluate(new Wr(f.bucket.zoom+1),f.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new Wr(f.bucket.zoom+1),f.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new Wr(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:K}=f.bucket.textSizeData;b.compositeTextSizes=[g["text-size"].possiblyEvaluate(new Wr(H),f.canonical),g["text-size"].possiblyEvaluate(new Wr(K),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:K}=f.bucket.iconSizeData;b.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new Wr(H),f.canonical),g["icon-size"].possiblyEvaluate(new Wr(K),f.canonical)]}const C=c.get("text-line-height")*Yo,A=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",R=c.get("text-keep-upright"),B=c.get("text-size");for(const H of f.bucket.features){const K=c.get("text-font").evaluate(H,{},f.canonical).join(","),ie=B.evaluate(H,{},f.canonical),ve=b.layoutTextSize.evaluate(H,{},f.canonical),we=b.layoutIconSize.evaluate(H,{},f.canonical),Ee={horizontal:{},vertical:void 0},Oe=H.text;let Ge,at=[0,0];if(Oe){const Et=Oe.toString(),Xt=c.get("text-letter-spacing").evaluate(H,{},f.canonical)*Yo,or=rr(Et)?Xt:0,wr=c.get("text-anchor").evaluate(H,{},f.canonical),Zr=uk(l,H,f.canonical);if(!Zr){const qr=c.get("text-radial-offset").evaluate(H,{},f.canonical);at=qr?lk(wr,[qr*Yo,ow]):c.get("text-offset").evaluate(H,{},f.canonical).map((Hr=>Hr*Yo))}let Fr=A?"center":c.get("text-justify").evaluate(H,{},f.canonical);const Gr=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(H,{},f.canonical)*Yo:1/0,gn=()=>{f.bucket.allowVerticalPlacement&&cr(Et)&&(Ee.vertical=hb(Oe,f.glyphMap,f.glyphPositions,f.imagePositions,K,Gr,C,wr,"left",or,at,u.ao.vertical,!0,ve,ie))};if(!A&&Zr){const qr=new Set;if(Fr==="auto")for(let mr=0;mr<Zr.values.length;mr+=2)qr.add(sw(Zr.values[mr]));else qr.add(Fr);let Hr=!1;for(const mr of qr)if(!Ee.horizontal[mr])if(Hr)Ee.horizontal[mr]=Ee.horizontal[0];else{const Ln=hb(Oe,f.glyphMap,f.glyphPositions,f.imagePositions,K,Gr,C,"center",mr,or,at,u.ao.horizontal,!1,ve,ie);Ln&&(Ee.horizontal[mr]=Ln,Hr=Ln.positionedLines.length===1)}gn()}else{Fr==="auto"&&(Fr=sw(wr));const qr=hb(Oe,f.glyphMap,f.glyphPositions,f.imagePositions,K,Gr,C,wr,Fr,or,at,u.ao.horizontal,!1,ve,ie);qr&&(Ee.horizontal[Fr]=qr),gn(),cr(Et)&&A&&R&&(Ee.vertical=hb(Oe,f.glyphMap,f.glyphPositions,f.imagePositions,K,Gr,C,wr,Fr,or,at,u.ao.vertical,!1,ve,ie))}}let Nt=!1;if(H.icon&&H.icon.name){const Et=f.imageMap[H.icon.name];Et&&(Ge=qK(f.imagePositions[H.icon.name],c.get("icon-offset").evaluate(H,{},f.canonical),c.get("icon-anchor").evaluate(H,{},f.canonical)),Nt=!!Et.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Nt:f.bucket.sdfIcons!==Nt&&ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Et.pixelRatio!==f.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const vt=fk(Ee.horizontal)||Ee.vertical;f.bucket.iconsInText=!!vt&&vt.iconsInText,(vt||Ge)&&aX(f.bucket,H,Ee,Ge,f.imageMap,b,ve,we,at,Nt,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},u.cI=H2,u.cJ=q2,u.cK=G2,u.cL=pO,u.cM=Z2,u.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},u.cO=function(f,l,c,g,b){return a(this,void 0,void 0,(function*(){if(L())try{return yield Ve(f,l,c,g,b)}catch{}return(function(C,A,R,B,H){const K=C.width,ie=C.height;tt&&lt||(tt=new OffscreenCanvas(K,ie),lt=tt.getContext("2d",{willReadFrequently:!0})),tt.width=K,tt.height=ie,lt.drawImage(C,0,0,K,ie);const ve=lt.getImageData(A,R,B,H);return lt.clearRect(0,0,K,ie),ve.data})(f,l,c,g,b)}))},u.cP=rO,u.cQ=d,u.cR=dO,u.cS=Kp,u.cT=Wu,u.cU=function(f,l){const c=new Map;if(f!=null)if(f.type==="Feature")c.set(_y(f,l),f);else for(const g of f.features)c.set(_y(g,l),g);return c},u.cV=function(f,l){if(f==null)return!0;if(f.type==="Feature")return _y(f,l)!=null;if(f.type==="FeatureCollection"){const c=new Set;for(const g of f.features){const b=_y(g,l);if(b==null||c.has(b))return!1;c.add(b)}return!0}return!1},u.cW=function(f,l,c){var g,b,C,A;if(l.removeAll&&f.clear(),l.remove)for(const R of l.remove)f.delete(R);if(l.add)for(const R of l.add){const B=_y(R,c);B!=null&&f.set(B,R)}if(l.update)for(const R of l.update){let B=f.get(R.id);if(B==null)continue;const H=!R.removeAllProperties&&(((g=R.removeProperties)===null||g===void 0?void 0:g.length)>0||((b=R.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((R.newGeometry||R.removeAllProperties||H)&&(B=Object.assign({},B),f.set(R.id,B),H&&(B.properties=Object.assign({},B.properties))),R.newGeometry&&(B.geometry=R.newGeometry),R.removeAllProperties)B.properties={};else if(((C=R.removeProperties)===null||C===void 0?void 0:C.length)>0)for(const K of R.removeProperties)Object.prototype.hasOwnProperty.call(B.properties,K)&&delete B.properties[K];if(((A=R.addOrUpdateProperties)===null||A===void 0?void 0:A.length)>0)for(const{key:K,value:ie}of R.addOrUpdateProperties)B.properties[K]=ie}},u.cX=Nn,u.ca=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},u.cb=f=>f.type==="symbol",u.cc=f=>f.type==="circle",u.cd=f=>f.type==="heatmap",u.ce=f=>f.type==="line",u.cf=f=>f.type==="fill",u.cg=f=>f.type==="fill-extrusion",u.ch=f=>f.type==="hillshade",u.ci=f=>f.type==="color-relief",u.cj=f=>f.type==="raster",u.ck=f=>f.type==="background",u.cl=f=>f.type==="custom",u.cm=Ce,u.cn=function(f,l,c){const g=ge(l.x-c.x,l.y-c.y),b=ge(f.x-c.x,f.y-c.y);var C,A;return Ut(Math.atan2(g[0]*b[1]-g[1]*b[0],(C=g)[0]*(A=b)[0]+C[1]*A[1]))},u.co=ke,u.cp=function(f,l){return gr[l]&&(f instanceof MouseEvent||f instanceof WheelEvent)},u.cq=function(f,l){return ar[l]&&"touches"in f},u.cr=function(f){return ar[f]||gr[f]},u.cs=function(f,l,c){var g=l[0],b=l[1];return f[0]=c[0]*g+c[4]*b+c[12],f[1]=c[1]*g+c[5]*b+c[13],f},u.ct=function(f,l){const{x:c,y:g}=by.fromLngLat(l);return!(f<0||f>25||g<0||g>=1||c<0||c>=1)},u.cu=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},u.cv=class extends Ha{},u.cw=sX,u.cy=function(f){return f.message===yr},u.cz=Ue,u.d=wt,u.e=At,u.f=f=>a(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),u.g=he,u.h=f=>new Promise(((l,c)=>{const g=new Image;g.onload=()=>{l(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame((()=>{g.src=Yt}))},g.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(f)],{type:"image/png"});g.src=f.byteLength?URL.createObjectURL(b):Yt})),u.i=sr,u.j=(f,l)=>Qe(At(f,{type:"json"}),l),u.k=ir,u.l=Gt,u.m=Qe,u.n=(f,l)=>Qe(At(f,{type:"arrayBuffer"}),l),u.o=function(f){return new Z2(f).readFields(OK,[])},u.p=PO,u.q=ly,u.r=mi,u.s=Mt,u.t=Wn,u.u=Rt,u.v=bt,u.w=ut,u.x=k,u.y=Pe,u.z=dc})),i("worker",["./shared"],(function(u){class a{constructor(de){this.keyCache={},de&&this.replace(de)}replace(de){this._layerConfigs={},this._layers={},this.update(de,[])}update(de,he){for(const Ue of de){this._layerConfigs[Ue.id]=Ue;const Ke=this._layers[Ue.id]=u.bJ(Ue);Ke._featureFilter=u.aa(Ke.filter),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id]}for(const Ue of he)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Me=u.cC(Object.values(this._layerConfigs),this.keyCache);for(const Ue of Me){const Ke=Ue.map((ir=>this._layers[ir.id])),Qe=Ke[0];if(Qe.visibility==="none")continue;const wt=Qe.source||"";let nt=this.familiesBySource[wt];nt||(nt=this.familiesBySource[wt]={});const Ot=Qe.sourceLayer||"_geojsonTileLayer";let Gt=nt[Ot];Gt||(Gt=nt[Ot]=[]),Gt.push(Ke)}}}class p{constructor(de){const he={},Me=[];for(const wt in de){const nt=de[wt],Ot=he[wt]={};for(const Gt in nt){const ir=nt[+Gt];if(!ir||ir.bitmap.width===0||ir.bitmap.height===0)continue;const Pr={x:0,y:0,w:ir.bitmap.width+2,h:ir.bitmap.height+2};Me.push(Pr),Ot[Gt]={rect:Pr,metrics:ir.metrics}}}const{w:Ue,h:Ke}=u.p(Me),Qe=new u.q({width:Ue||1,height:Ke||1});for(const wt in de){const nt=de[wt];for(const Ot in nt){const Gt=nt[+Ot];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const ir=he[wt][Ot].rect;u.q.copy(Gt.bitmap,Qe,{x:0,y:0},{x:ir.x+1,y:ir.y+1},Gt.bitmap)}}this.image=Qe,this.positions=he}}u.cD("GlyphAtlas",p);class d{constructor(de){this.tileID=new u.Z(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[],this.globalState=de.globalState}parse(de,he,Me,Ue,Ke){return u._(this,void 0,void 0,(function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new u.a8;const Qe=new u.cE(Object.keys(de.layers).sort()),wt=new u.cF(this.tileID,this.promoteId);wt.bucketLayerIDs=[];const nt={},Ot={featureIndex:wt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Me,subdivisionGranularity:Ke},Gt=he.familiesBySource[this.source];for(const ne in Gt){const me=de.layers[ne];if(!me)continue;me.version===1&&u.w(`Vector tile source "${this.source}" layer "${ne}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qe=Qe.encode(ne),je=[];for(let jt=0;jt<me.length;jt++){const Jt=me.feature(jt),Tr=wt.getId(Jt,ne);je.push({feature:Jt,id:Tr,index:jt,sourceLayerIndex:qe})}for(const jt of Gt[ne]){const Jt=jt[0];Jt.source!==this.source&&u.w(`layer.source = ${Jt.source} does not equal this.source = ${this.source}`),Jt.minzoom&&this.zoom<Math.floor(Jt.minzoom)||Jt.maxzoom&&this.zoom>=Jt.maxzoom||Jt.visibility!=="none"&&(m(jt,this.zoom,Me,this.globalState),(nt[Jt.id]=Jt.createBucket({index:wt.bucketLayerIDs.length,layers:jt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qe,sourceID:this.source,globalState:this.globalState})).populate(je,Ot,this.tileID.canonical),wt.bucketLayerIDs.push(jt.map((Tr=>Tr.id))))}}const ir=u.bN(Ot.glyphDependencies,(ne=>Object.keys(ne).map(Number)));this.inFlightDependencies.forEach((ne=>ne?.abort())),this.inFlightDependencies=[];let Pr=Promise.resolve({});if(Object.keys(ir).length){const ne=new AbortController;this.inFlightDependencies.push(ne),Pr=Ue.sendAsync({type:"GG",data:{stacks:ir,source:this.source,tileID:this.tileID,type:"glyphs"}},ne)}const bt=Object.keys(Ot.iconDependencies);let Sr=Promise.resolve({});if(bt.length){const ne=new AbortController;this.inFlightDependencies.push(ne),Sr=Ue.sendAsync({type:"GI",data:{icons:bt,source:this.source,tileID:this.tileID,type:"icons"}},ne)}const Mr=Object.keys(Ot.patternDependencies);let Nr=Promise.resolve({});if(Mr.length){const ne=new AbortController;this.inFlightDependencies.push(ne),Nr=Ue.sendAsync({type:"GI",data:{icons:Mr,source:this.source,tileID:this.tileID,type:"patterns"}},ne)}const[en,Vr,gt]=yield Promise.all([Pr,Sr,Nr]),xt=new p(en),Wt=new u.cG(Vr,gt);for(const ne in nt){const me=nt[ne];me instanceof u.a9?(m(me.layers,this.zoom,Me,this.globalState),u.cH({bucket:me,glyphMap:en,glyphPositions:xt.positions,imageMap:Vr,imagePositions:Wt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ot.subdivisionGranularity})):me.hasPattern&&(me instanceof u.cI||me instanceof u.cJ||me instanceof u.cK)&&(m(me.layers,this.zoom,Me,this.globalState),me.addFeatures(Ot,this.tileID.canonical,Wt.patternPositions))}return this.status="done",{buckets:Object.values(nt).filter((ne=>!ne.isEmpty())),featureIndex:wt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xt.image,imageAtlas:Wt,glyphMap:this.returnDependencies?en:null,iconMap:this.returnDependencies?Vr:null,glyphPositions:this.returnDependencies?xt.positions:null}}))}}function m(Ye,de,he,Me){const Ue=new u.F(de);for(const Ke of Ye)Ke.setGlobalState(Me),Ke.recalculate(Ue,he)}class v{constructor(de,he,Me){this.actor=de,this.layerIndex=he,this.availableImages=Me,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(de,he){return u._(this,void 0,void 0,(function*(){const Me=yield u.n(de.request,he);try{return{vectorTile:new u.cL(new u.cM(Me.data)),rawData:Me.data,cacheControl:Me.cacheControl,expires:Me.expires}}catch(Ue){const Ke=new Uint8Array(Me.data);let Qe=`Unable to parse the tile at ${de.request.url}, `;throw Qe+=Ke[0]===31&&Ke[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ue.message}`,new Error(Qe)}}))}loadTile(de){return u._(this,void 0,void 0,(function*(){const he=de.uid,Me=!!(de&&de.request&&de.request.collectResourceTiming)&&new u.cN(de.request),Ue=new d(de);this.loading[he]=Ue;const Ke=new AbortController;Ue.abort=Ke;try{const Qe=yield this.loadVectorTile(de,Ke);if(delete this.loading[he],!Qe)return null;const wt=Qe.rawData,nt={};Qe.expires&&(nt.expires=Qe.expires),Qe.cacheControl&&(nt.cacheControl=Qe.cacheControl);const Ot={};if(Me){const ir=Me.finish();ir&&(Ot.resourceTiming=JSON.parse(JSON.stringify(ir)))}Ue.vectorTile=Qe.vectorTile;const Gt=Ue.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);this.loaded[he]=Ue,this.fetching[he]={rawTileData:wt,cacheControl:nt,resourceTiming:Ot};try{const ir=yield Gt;return u.e({rawTileData:wt.slice(0)},ir,nt,Ot)}finally{delete this.fetching[he]}}catch(Qe){throw delete this.loading[he],Ue.status="done",this.loaded[he]=Ue,Qe}}))}reloadTile(de){return u._(this,void 0,void 0,(function*(){const he=de.uid;if(!this.loaded||!this.loaded[he])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Me=this.loaded[he];if(Me.showCollisionBoxes=de.showCollisionBoxes,Me.globalState=de.globalState,Me.status==="parsing"){const Ue=yield Me.parse(Me.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);let Ke;if(this.fetching[he]){const{rawTileData:Qe,cacheControl:wt,resourceTiming:nt}=this.fetching[he];delete this.fetching[he],Ke=u.e({rawTileData:Qe.slice(0)},Ue,wt,nt)}else Ke=Ue;return Ke}if(Me.status==="done"&&Me.vectorTile)return Me.parse(Me.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity)}))}abortTile(de){return u._(this,void 0,void 0,(function*(){const he=this.loading,Me=de.uid;he&&he[Me]&&he[Me].abort&&(he[Me].abort.abort(),delete he[Me])}))}removeTile(de){return u._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]}))}}class w{constructor(){this.loaded={}}loadTile(de){return u._(this,void 0,void 0,(function*(){const{uid:he,encoding:Me,rawImageData:Ue,redFactor:Ke,greenFactor:Qe,blueFactor:wt,baseShift:nt}=de,Ot=Ue.width+2,Gt=Ue.height+2,ir=u.b(Ue)?new u.R({width:Ot,height:Gt},yield u.cO(Ue,-1,-1,Ot,Gt)):Ue,Pr=new u.cP(he,ir,Me,Ke,Qe,wt,nt);return this.loaded=this.loaded||{},this.loaded[he]=Pr,Pr}))}removeTile(de){const he=this.loaded,Me=de.uid;he&&he[Me]&&delete he[Me]}}var x,P,T=(function(){if(P)return x;function Ye(he,Me){if(he.length!==0){de(he[0],Me);for(var Ue=1;Ue<he.length;Ue++)de(he[Ue],!Me)}}function de(he,Me){for(var Ue=0,Ke=0,Qe=0,wt=he.length,nt=wt-1;Qe<wt;nt=Qe++){var Ot=(he[Qe][0]-he[nt][0])*(he[nt][1]+he[Qe][1]),Gt=Ue+Ot;Ke+=Math.abs(Ue)>=Math.abs(Ot)?Ue-Gt+Ot:Ot-Gt+Ue,Ue=Gt}Ue+Ke>=0!=!!Me&&he.reverse()}return P=1,x=function he(Me,Ue){var Ke,Qe=Me&&Me.type;if(Qe==="FeatureCollection")for(Ke=0;Ke<Me.features.length;Ke++)he(Me.features[Ke],Ue);else if(Qe==="GeometryCollection")for(Ke=0;Ke<Me.geometries.length;Ke++)he(Me.geometries[Ke],Ue);else if(Qe==="Feature")he(Me.geometry,Ue);else if(Qe==="Polygon")Ye(Me.coordinates,Ue);else if(Qe==="MultiPolygon")for(Ke=0;Ke<Me.coordinates.length;Ke++)Ye(Me.coordinates[Ke],Ue);return Me}})(),O=u.cQ(T);class L extends u.cS{constructor(de,he){super(new u.cM,0,he,[],[]),this.feature=de,this.type=de.type,this.properties=de.tags?de.tags:{},"id"in de&&(typeof de.id=="string"?this.id=parseInt(de.id,10):typeof de.id!="number"||isNaN(de.id)||(this.id=de.id))}loadGeometry(){const de=[],he=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Me of he){const Ue=[];for(const Ke of Me)Ue.push(new u.P(Ke[0],Ke[1]));de.push(Ue)}return de}}class N extends u.cR{constructor(de,he){super(new u.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=he?he.version:1,this.extent=he?he.extent:4096,this.length=de.length,this.features=de}feature(de){return new L(this.features[de],this.extent)}}function F(Ye,de){de.writeVarintField(15,Ye.version||1),de.writeStringField(1,Ye.name||""),de.writeVarintField(5,Ye.extent||4096);const he={keys:[],values:[],keycache:{},valuecache:{}};for(let Ke=0;Ke<Ye.length;Ke++)he.feature=Ye.feature(Ke),de.writeMessage(2,D,he);const Me=he.keys;for(const Ke of Me)de.writeStringField(3,Ke);const Ue=he.values;for(const Ke of Ue)de.writeMessage(4,Y,Ke)}function D(Ye,de){if(!Ye.feature)return;const he=Ye.feature;he.id!==void 0&&de.writeVarintField(1,he.id),de.writeMessage(2,q,Ye),de.writeVarintField(3,he.type),de.writeMessage(4,Q,he)}function q(Ye,de){for(const he in Ye.feature?.properties){let Me=Ye.feature.properties[he],Ue=Ye.keycache[he];if(Me===null)continue;Ue===void 0&&(Ye.keys.push(he),Ue=Ye.keys.length-1,Ye.keycache[he]=Ue),de.writeVarint(Ue),typeof Me!="string"&&typeof Me!="boolean"&&typeof Me!="number"&&(Me=JSON.stringify(Me));const Ke=typeof Me+":"+Me;let Qe=Ye.valuecache[Ke];Qe===void 0&&(Ye.values.push(Me),Qe=Ye.values.length-1,Ye.valuecache[Ke]=Qe),de.writeVarint(Qe)}}function z(Ye,de){return(de<<3)+(7&Ye)}function Z(Ye){return Ye<<1^Ye>>31}function Q(Ye,de){const he=Ye.loadGeometry(),Me=Ye.type;let Ue=0,Ke=0;for(const Qe of he){let wt=1;Me===1&&(wt=Qe.length),de.writeVarint(z(1,wt));const nt=Me===3?Qe.length-1:Qe.length;for(let Ot=0;Ot<nt;Ot++){Ot===1&&Me!==1&&de.writeVarint(z(2,nt-1));const Gt=Qe[Ot].x-Ue,ir=Qe[Ot].y-Ke;de.writeVarint(Z(Gt)),de.writeVarint(Z(ir)),Ue+=Gt,Ke+=ir}Ye.type===3&&de.writeVarint(z(7,1))}}function Y(Ye,de){const he=typeof Ye;he==="string"?de.writeStringField(1,Ye):he==="boolean"?de.writeBooleanField(7,Ye):he==="number"&&(Ye%1!=0?de.writeDoubleField(3,Ye):Ye<0?de.writeSVarintField(6,Ye):de.writeVarintField(5,Ye))}const se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ye=>Ye},W=Math.fround||(G=new Float32Array(1),Ye=>(G[0]=+Ye,G[0]));var G;class ae{constructor(de){this.options=Object.assign(Object.create(se),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){const{log:he,minZoom:Me,maxZoom:Ue}=this.options;he&&console.time("total time");const Ke=`prepare ${de.length} points`;he&&console.time(Ke),this.points=de;const Qe=[];for(let nt=0;nt<de.length;nt++){const Ot=de[nt];if(!Ot.geometry)continue;const[Gt,ir]=Ot.geometry.coordinates,Pr=W(ye(Gt)),bt=W(Se(ir));Qe.push(Pr,bt,1/0,nt,-1,1),this.options.reduce&&Qe.push(0)}let wt=this.trees[Ue+1]=this._createTree(Qe);he&&console.timeEnd(Ke);for(let nt=Ue;nt>=Me;nt--){const Ot=+Date.now();wt=this.trees[nt]=this._createTree(this._cluster(wt,nt)),he&&console.log("z%d: %d clusters in %dms",nt,wt.numItems,+Date.now()-Ot)}return he&&console.timeEnd("total time"),this}getClusters(de,he){let Me=((de[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,de[1]));let Ke=de[2]===180?180:((de[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)Me=-180,Ke=180;else if(Me>Ke){const ir=this.getClusters([Me,Ue,180,Qe],he),Pr=this.getClusters([-180,Ue,Ke,Qe],he);return ir.concat(Pr)}const wt=this.trees[this._limitZoom(he)],nt=wt.range(ye(Me),Se(Qe),ye(Ke),Se(Ue)),Ot=wt.data,Gt=[];for(const ir of nt){const Pr=this.stride*ir;Gt.push(Ot[Pr+5]>1?le(Ot,Pr,this.clusterProps):this.points[Ot[Pr+3]])}return Gt}getChildren(de){const he=this._getOriginId(de),Me=this._getOriginZoom(de),Ue="No cluster with the specified id.",Ke=this.trees[Me];if(!Ke)throw new Error(Ue);const Qe=Ke.data;if(he*this.stride>=Qe.length)throw new Error(Ue);const wt=this.options.radius/(this.options.extent*Math.pow(2,Me-1)),nt=Ke.within(Qe[he*this.stride],Qe[he*this.stride+1],wt),Ot=[];for(const Gt of nt){const ir=Gt*this.stride;Qe[ir+4]===de&&Ot.push(Qe[ir+5]>1?le(Qe,ir,this.clusterProps):this.points[Qe[ir+3]])}if(Ot.length===0)throw new Error(Ue);return Ot}getLeaves(de,he,Me){const Ue=[];return this._appendLeaves(Ue,de,he=he||10,Me=Me||0,0),Ue}getTile(de,he,Me){const Ue=this.trees[this._limitZoom(de)],Ke=Math.pow(2,de),{extent:Qe,radius:wt}=this.options,nt=wt/Qe,Ot=(Me-nt)/Ke,Gt=(Me+1+nt)/Ke,ir={features:[]};return this._addTileFeatures(Ue.range((he-nt)/Ke,Ot,(he+1+nt)/Ke,Gt),Ue.data,he,Me,Ke,ir),he===0&&this._addTileFeatures(Ue.range(1-nt/Ke,Ot,1,Gt),Ue.data,Ke,Me,Ke,ir),he===Ke-1&&this._addTileFeatures(Ue.range(0,Ot,nt/Ke,Gt),Ue.data,-1,Me,Ke,ir),ir.features.length?ir:null}getClusterExpansionZoom(de){let he=this._getOriginZoom(de)-1;for(;he<=this.options.maxZoom;){const Me=this.getChildren(de);if(he++,Me.length!==1)break;de=Me[0].properties.cluster_id}return he}_appendLeaves(de,he,Me,Ue,Ke){const Qe=this.getChildren(he);for(const wt of Qe){const nt=wt.properties;if(nt&&nt.cluster?Ke+nt.point_count<=Ue?Ke+=nt.point_count:Ke=this._appendLeaves(de,nt.cluster_id,Me,Ue,Ke):Ke<Ue?Ke++:de.push(wt),de.length===Me)break}return Ke}_createTree(de){const he=new u.aI(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Me=0;Me<de.length;Me+=this.stride)he.add(de[Me],de[Me+1]);return he.finish(),he.data=de,he}_addTileFeatures(de,he,Me,Ue,Ke,Qe){for(const wt of de){const nt=wt*this.stride,Ot=he[nt+5]>1;let Gt,ir,Pr;if(Ot)Gt=ue(he,nt,this.clusterProps),ir=he[nt],Pr=he[nt+1];else{const Mr=this.points[he[nt+3]];Gt=Mr.properties;const[Nr,en]=Mr.geometry.coordinates;ir=ye(Nr),Pr=Se(en)}const bt={type:1,geometry:[[Math.round(this.options.extent*(ir*Ke-Me)),Math.round(this.options.extent*(Pr*Ke-Ue))]],tags:Gt};let Sr;Sr=Ot||this.options.generateId?he[nt+3]:this.points[he[nt+3]].id,Sr!==void 0&&(bt.id=Sr),Qe.features.push(bt)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,he){const{radius:Me,extent:Ue,reduce:Ke,minPoints:Qe}=this.options,wt=Me/(Ue*Math.pow(2,he)),nt=de.data,Ot=[],Gt=this.stride;for(let ir=0;ir<nt.length;ir+=Gt){if(nt[ir+2]<=he)continue;nt[ir+2]=he;const Pr=nt[ir],bt=nt[ir+1],Sr=de.within(nt[ir],nt[ir+1],wt),Mr=nt[ir+5];let Nr=Mr;for(const en of Sr){const Vr=en*Gt;nt[Vr+2]>he&&(Nr+=nt[Vr+5])}if(Nr>Mr&&Nr>=Qe){let en,Vr=Pr*Mr,gt=bt*Mr,xt=-1;const Wt=(ir/Gt<<5)+(he+1)+this.points.length;for(const ne of Sr){const me=ne*Gt;if(nt[me+2]<=he)continue;nt[me+2]=he;const qe=nt[me+5];Vr+=nt[me]*qe,gt+=nt[me+1]*qe,nt[me+4]=Wt,Ke&&(en||(en=this._map(nt,ir,!0),xt=this.clusterProps.length,this.clusterProps.push(en)),Ke(en,this._map(nt,me)))}nt[ir+4]=Wt,Ot.push(Vr/Nr,gt/Nr,1/0,Wt,-1,Nr),Ke&&Ot.push(xt)}else{for(let en=0;en<Gt;en++)Ot.push(nt[ir+en]);if(Nr>1)for(const en of Sr){const Vr=en*Gt;if(!(nt[Vr+2]<=he)){nt[Vr+2]=he;for(let gt=0;gt<Gt;gt++)Ot.push(nt[Vr+gt])}}}}return Ot}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,he,Me){if(de[he+5]>1){const Qe=this.clusterProps[de[he+6]];return Me?Object.assign({},Qe):Qe}const Ue=this.points[de[he+3]].properties,Ke=this.options.map(Ue);return Me&&Ke===Ue?Object.assign({},Ke):Ke}}function le(Ye,de,he){return{type:"Feature",id:Ye[de+3],properties:ue(Ye,de,he),geometry:{type:"Point",coordinates:[(Me=Ye[de],360*(Me-.5)),ge(Ye[de+1])]}};var Me}function ue(Ye,de,he){const Me=Ye[de+5],Ue=Me>=1e4?`${Math.round(Me/1e3)}k`:Me>=1e3?Math.round(Me/100)/10+"k":Me,Ke=Ye[de+6],Qe=Ke===-1?{}:Object.assign({},he[Ke]);return Object.assign(Qe,{cluster:!0,cluster_id:Ye[de+3],point_count:Me,point_count_abbreviated:Ue})}function ye(Ye){return Ye/360+.5}function Se(Ye){const de=Math.sin(Ye*Math.PI/180),he=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return he<0?0:he>1?1:he}function ge(Ye){const de=(180-360*Ye)*Math.PI/180;return 360*Math.atan(Math.exp(de))/Math.PI-90}function xe(Ye,de,he,Me){let Ue=Me;const Ke=de+(he-de>>1);let Qe,wt=he-de;const nt=Ye[de],Ot=Ye[de+1],Gt=Ye[he],ir=Ye[he+1];for(let Pr=de+3;Pr<he;Pr+=3){const bt=Fe(Ye[Pr],Ye[Pr+1],nt,Ot,Gt,ir);if(bt>Ue)Qe=Pr,Ue=bt;else if(bt===Ue){const Sr=Math.abs(Pr-Ke);Sr<wt&&(Qe=Pr,wt=Sr)}}Ue>Me&&(Qe-de>3&&xe(Ye,de,Qe,Me),Ye[Qe+2]=Ue,he-Qe>3&&xe(Ye,Qe,he,Me))}function Fe(Ye,de,he,Me,Ue,Ke){let Qe=Ue-he,wt=Ke-Me;if(Qe!==0||wt!==0){const nt=((Ye-he)*Qe+(de-Me)*wt)/(Qe*Qe+wt*wt);nt>1?(he=Ue,Me=Ke):nt>0&&(he+=Qe*nt,Me+=wt*nt)}return Qe=Ye-he,wt=de-Me,Qe*Qe+wt*wt}function He(Ye,de,he,Me){const Ue={id:Ye??null,type:de,geometry:he,tags:Me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(de==="Point"||de==="MultiPoint"||de==="LineString")pe(Ue,he);else if(de==="Polygon")pe(Ue,he[0]);else if(de==="MultiLineString")for(const Ke of he)pe(Ue,Ke);else if(de==="MultiPolygon")for(const Ke of he)pe(Ue,Ke[0]);return Ue}function pe(Ye,de){for(let he=0;he<de.length;he+=3)Ye.minX=Math.min(Ye.minX,de[he]),Ye.minY=Math.min(Ye.minY,de[he+1]),Ye.maxX=Math.max(Ye.maxX,de[he]),Ye.maxY=Math.max(Ye.maxY,de[he+1])}function _e(Ye,de,he,Me){if(!de.geometry)return;const Ue=de.geometry.coordinates;if(Ue&&Ue.length===0)return;const Ke=de.geometry.type,Qe=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2);let wt=[],nt=de.id;if(he.promoteId?nt=de.properties[he.promoteId]:he.generateId&&(nt=Me||0),Ke==="Point")Ce(Ue,wt);else if(Ke==="MultiPoint")for(const Ot of Ue)Ce(Ot,wt);else if(Ke==="LineString")ke(Ue,wt,Qe,!1);else if(Ke==="MultiLineString"){if(he.lineMetrics){for(const Ot of Ue)wt=[],ke(Ot,wt,Qe,!1),Ye.push(He(nt,"LineString",wt,de.properties));return}$e(Ue,wt,Qe,!1)}else if(Ke==="Polygon")$e(Ue,wt,Qe,!0);else{if(Ke!=="MultiPolygon"){if(Ke==="GeometryCollection"){for(const Ot of de.geometry.geometries)_e(Ye,{id:nt,geometry:Ot,properties:de.properties},he,Me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ot of Ue){const Gt=[];$e(Ot,Gt,Qe,!0),wt.push(Gt)}}Ye.push(He(nt,Ke,wt,de.properties))}function Ce(Ye,de){de.push(ht(Ye[0]),At(Ye[1]),0)}function ke(Ye,de,he,Me){let Ue,Ke,Qe=0;for(let nt=0;nt<Ye.length;nt++){const Ot=ht(Ye[nt][0]),Gt=At(Ye[nt][1]);de.push(Ot,Gt,0),nt>0&&(Qe+=Me?(Ue*Gt-Ot*Ke)/2:Math.sqrt(Math.pow(Ot-Ue,2)+Math.pow(Gt-Ke,2))),Ue=Ot,Ke=Gt}const wt=de.length-3;de[2]=1,xe(de,0,wt,he),de[wt+2]=1,de.size=Math.abs(Qe),de.start=0,de.end=de.size}function $e(Ye,de,he,Me){for(let Ue=0;Ue<Ye.length;Ue++){const Ke=[];ke(Ye[Ue],Ke,he,Me),de.push(Ke)}}function ht(Ye){return Ye/360+.5}function At(Ye){const de=Math.sin(Ye*Math.PI/180),he=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return he<0?0:he>1?1:he}function mt(Ye,de,he,Me,Ue,Ke,Qe,wt){if(Me/=de,Ke>=(he/=de)&&Qe<Me)return Ye;if(Qe<he||Ke>=Me)return null;const nt=[];for(const Ot of Ye){const Gt=Ot.geometry;let ir=Ot.type;const Pr=Ue===0?Ot.minX:Ot.minY,bt=Ue===0?Ot.maxX:Ot.maxY;if(Pr>=he&&bt<Me){nt.push(Ot);continue}if(bt<he||Pr>=Me)continue;let Sr=[];if(ir==="Point"||ir==="MultiPoint")rt(Gt,Sr,he,Me,Ue);else if(ir==="LineString")Lt(Gt,Sr,he,Me,Ue,!1,wt.lineMetrics);else if(ir==="MultiLineString")Pt(Gt,Sr,he,Me,Ue,!1);else if(ir==="Polygon")Pt(Gt,Sr,he,Me,Ue,!0);else if(ir==="MultiPolygon")for(const Mr of Gt){const Nr=[];Pt(Mr,Nr,he,Me,Ue,!0),Nr.length&&Sr.push(Nr)}if(Sr.length){if(wt.lineMetrics&&ir==="LineString"){for(const Mr of Sr)nt.push(He(Ot.id,ir,Mr,Ot.tags));continue}ir!=="LineString"&&ir!=="MultiLineString"||(Sr.length===1?(ir="LineString",Sr=Sr[0]):ir="MultiLineString"),ir!=="Point"&&ir!=="MultiPoint"||(ir=Sr.length===3?"Point":"MultiPoint"),nt.push(He(Ot.id,ir,Sr,Ot.tags))}}return nt.length?nt:null}function rt(Ye,de,he,Me,Ue){for(let Ke=0;Ke<Ye.length;Ke+=3){const Qe=Ye[Ke+Ue];Qe>=he&&Qe<=Me&&ut(de,Ye[Ke],Ye[Ke+1],Ye[Ke+2])}}function Lt(Ye,de,he,Me,Ue,Ke,Qe){let wt=Tt(Ye);const nt=Ue===0?Le:sr;let Ot,Gt,ir=Ye.start;for(let Nr=0;Nr<Ye.length-3;Nr+=3){const en=Ye[Nr],Vr=Ye[Nr+1],gt=Ye[Nr+2],xt=Ye[Nr+3],Wt=Ye[Nr+4],ne=Ue===0?en:Vr,me=Ue===0?xt:Wt;let qe=!1;Qe&&(Ot=Math.sqrt(Math.pow(en-xt,2)+Math.pow(Vr-Wt,2))),ne<he?me>he&&(Gt=nt(wt,en,Vr,xt,Wt,he),Qe&&(wt.start=ir+Ot*Gt)):ne>Me?me<Me&&(Gt=nt(wt,en,Vr,xt,Wt,Me),Qe&&(wt.start=ir+Ot*Gt)):ut(wt,en,Vr,gt),me<he&&ne>=he&&(Gt=nt(wt,en,Vr,xt,Wt,he),qe=!0),me>Me&&ne<=Me&&(Gt=nt(wt,en,Vr,xt,Wt,Me),qe=!0),!Ke&&qe&&(Qe&&(wt.end=ir+Ot*Gt),de.push(wt),wt=Tt(Ye)),Qe&&(ir+=Ot)}let Pr=Ye.length-3;const bt=Ye[Pr],Sr=Ye[Pr+1],Mr=Ue===0?bt:Sr;Mr>=he&&Mr<=Me&&ut(wt,bt,Sr,Ye[Pr+2]),Pr=wt.length-3,Ke&&Pr>=3&&(wt[Pr]!==wt[0]||wt[Pr+1]!==wt[1])&&ut(wt,wt[0],wt[1],wt[2]),wt.length&&de.push(wt)}function Tt(Ye){const de=[];return de.size=Ye.size,de.start=Ye.start,de.end=Ye.end,de}function Pt(Ye,de,he,Me,Ue,Ke){for(const Qe of Ye)Lt(Qe,de,he,Me,Ue,Ke,!1)}function ut(Ye,de,he,Me){Ye.push(de,he,Me)}function Le(Ye,de,he,Me,Ue,Ke){const Qe=(Ke-de)/(Me-de);return ut(Ye,Ke,he+(Ue-he)*Qe,1),Qe}function sr(Ye,de,he,Me,Ue,Ke){const Qe=(Ke-he)/(Ue-he);return ut(Ye,de+(Me-de)*Qe,Ke,1),Qe}function lr(Ye,de){const he=[];for(let Me=0;Me<Ye.length;Me++){const Ue=Ye[Me],Ke=Ue.type;let Qe;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Qe=dr(Ue.geometry,de);else if(Ke==="MultiLineString"||Ke==="Polygon"){Qe=[];for(const wt of Ue.geometry)Qe.push(dr(wt,de))}else if(Ke==="MultiPolygon"){Qe=[];for(const wt of Ue.geometry){const nt=[];for(const Ot of wt)nt.push(dr(Ot,de));Qe.push(nt)}}he.push(He(Ue.id,Ke,Qe,Ue.tags))}return he}function dr(Ye,de){const he=[];he.size=Ye.size,Ye.start!==void 0&&(he.start=Ye.start,he.end=Ye.end);for(let Me=0;Me<Ye.length;Me+=3)he.push(Ye[Me]+de,Ye[Me+1],Ye[Me+2]);return he}function Yt(Ye,de){if(Ye.transformed)return Ye;const he=1<<Ye.z,Me=Ye.x,Ue=Ye.y;for(const Ke of Ye.features){const Qe=Ke.geometry,wt=Ke.type;if(Ke.geometry=[],wt===1)for(let nt=0;nt<Qe.length;nt+=2)Ke.geometry.push(Ve(Qe[nt],Qe[nt+1],de,he,Me,Ue));else for(let nt=0;nt<Qe.length;nt++){const Ot=[];for(let Gt=0;Gt<Qe[nt].length;Gt+=2)Ot.push(Ve(Qe[nt][Gt],Qe[nt][Gt+1],de,he,Me,Ue));Ke.geometry.push(Ot)}}return Ye.transformed=!0,Ye}function Ve(Ye,de,he,Me,Ue,Ke){return[Math.round(he*(Ye*Me-Ue)),Math.round(he*(de*Me-Ke))]}function tt(Ye,de,he,Me,Ue){const Ke=de===Ue.maxZoom?0:Ue.tolerance/((1<<de)*Ue.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:Ye.length,source:null,x:he,y:Me,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const wt of Ye)lt(Qe,wt,Ke,Ue);return Qe}function lt(Ye,de,he,Me){const Ue=de.geometry,Ke=de.type,Qe=[];if(Ye.minX=Math.min(Ye.minX,de.minX),Ye.minY=Math.min(Ye.minY,de.minY),Ye.maxX=Math.max(Ye.maxX,de.maxX),Ye.maxY=Math.max(Ye.maxY,de.maxY),Ke==="Point"||Ke==="MultiPoint")for(let wt=0;wt<Ue.length;wt+=3)Qe.push(Ue[wt],Ue[wt+1]),Ye.numPoints++,Ye.numSimplified++;else if(Ke==="LineString")Mt(Qe,Ue,Ye,he,!1,!1);else if(Ke==="MultiLineString"||Ke==="Polygon")for(let wt=0;wt<Ue.length;wt++)Mt(Qe,Ue[wt],Ye,he,Ke==="Polygon",wt===0);else if(Ke==="MultiPolygon")for(let wt=0;wt<Ue.length;wt++){const nt=Ue[wt];for(let Ot=0;Ot<nt.length;Ot++)Mt(Qe,nt[Ot],Ye,he,!0,Ot===0)}if(Qe.length){let wt=de.tags||null;if(Ke==="LineString"&&Me.lineMetrics){wt={};for(const Ot in de.tags)wt[Ot]=de.tags[Ot];wt.mapbox_clip_start=Ue.start/Ue.size,wt.mapbox_clip_end=Ue.end/Ue.size}const nt={geometry:Qe,type:Ke==="Polygon"||Ke==="MultiPolygon"?3:Ke==="LineString"||Ke==="MultiLineString"?2:1,tags:wt};de.id!==null&&(nt.id=de.id),Ye.features.push(nt)}}function Mt(Ye,de,he,Me,Ue,Ke){const Qe=Me*Me;if(Me>0&&de.size<(Ue?Qe:Me))return void(he.numPoints+=de.length/3);const wt=[];for(let nt=0;nt<de.length;nt+=3)(Me===0||de[nt+2]>Qe)&&(he.numSimplified++,wt.push(de[nt],de[nt+1])),he.numPoints++;Ue&&(function(nt,Ot){let Gt=0;for(let ir=0,Pr=nt.length,bt=Pr-2;ir<Pr;bt=ir,ir+=2)Gt+=(nt[ir]-nt[bt])*(nt[ir+1]+nt[bt+1]);if(Gt>0===Ot)for(let ir=0,Pr=nt.length;ir<Pr/2;ir+=2){const bt=nt[ir],Sr=nt[ir+1];nt[ir]=nt[Pr-2-ir],nt[ir+1]=nt[Pr-1-ir],nt[Pr-2-ir]=bt,nt[Pr-1-ir]=Sr}})(wt,Ke),Ye.push(wt)}const Kt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ut{constructor(de,he){const Me=(he=this.options=(function(Ke,Qe){for(const wt in Qe)Ke[wt]=Qe[wt];return Ke})(Object.create(Kt),he)).debug;if(Me&&console.time("preprocess data"),he.maxZoom<0||he.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(he.promoteId&&he.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=(function(Ke,Qe){const wt=[];if(Ke.type==="FeatureCollection")for(let nt=0;nt<Ke.features.length;nt++)_e(wt,Ke.features[nt],Qe,nt);else _e(wt,Ke.type==="Feature"?Ke:{geometry:Ke},Qe);return wt})(de,he);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",he.indexMaxZoom,he.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=(function(Ke,Qe){const wt=Qe.buffer/Qe.extent;let nt=Ke;const Ot=mt(Ke,1,-1-wt,wt,0,-1,2,Qe),Gt=mt(Ke,1,1-wt,2+wt,0,-1,2,Qe);return(Ot||Gt)&&(nt=mt(Ke,1,-wt,1+wt,0,-1,2,Qe)||[],Ot&&(nt=lr(Ot,1).concat(nt)),Gt&&(nt=nt.concat(lr(Gt,-1)))),nt})(Ue,he),Ue.length&&this.splitTile(Ue,0,0,0),Me&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(de,he,Me,Ue,Ke,Qe,wt){const nt=[de,he,Me,Ue],Ot=this.options,Gt=Ot.debug;for(;nt.length;){Ue=nt.pop(),Me=nt.pop(),he=nt.pop(),de=nt.pop();const ir=1<<he,Pr=ar(he,Me,Ue);let bt=this.tiles[Pr];if(!bt&&(Gt>1&&console.time("creation"),bt=this.tiles[Pr]=tt(de,he,Me,Ue,Ot),this.tileCoords.push({z:he,x:Me,y:Ue}),Gt)){Gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",he,Me,Ue,bt.numFeatures,bt.numPoints,bt.numSimplified),console.timeEnd("creation"));const qe=`z${he}`;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(bt.source=de,Ke==null){if(he===Ot.indexMaxZoom||bt.numPoints<=Ot.indexMaxPoints)continue}else{if(he===Ot.maxZoom||he===Ke)continue;if(Ke!=null){const qe=Ke-he;if(Me!==Qe>>qe||Ue!==wt>>qe)continue}}if(bt.source=null,de.length===0)continue;Gt>1&&console.time("clipping");const Sr=.5*Ot.buffer/Ot.extent,Mr=.5-Sr,Nr=.5+Sr,en=1+Sr;let Vr=null,gt=null,xt=null,Wt=null,ne=mt(de,ir,Me-Sr,Me+Nr,0,bt.minX,bt.maxX,Ot),me=mt(de,ir,Me+Mr,Me+en,0,bt.minX,bt.maxX,Ot);de=null,ne&&(Vr=mt(ne,ir,Ue-Sr,Ue+Nr,1,bt.minY,bt.maxY,Ot),gt=mt(ne,ir,Ue+Mr,Ue+en,1,bt.minY,bt.maxY,Ot),ne=null),me&&(xt=mt(me,ir,Ue-Sr,Ue+Nr,1,bt.minY,bt.maxY,Ot),Wt=mt(me,ir,Ue+Mr,Ue+en,1,bt.minY,bt.maxY,Ot),me=null),Gt>1&&console.timeEnd("clipping"),nt.push(Vr||[],he+1,2*Me,2*Ue),nt.push(gt||[],he+1,2*Me,2*Ue+1),nt.push(xt||[],he+1,2*Me+1,2*Ue),nt.push(Wt||[],he+1,2*Me+1,2*Ue+1)}}getTile(de,he,Me){de=+de,he=+he,Me=+Me;const Ue=this.options,{extent:Ke,debug:Qe}=Ue;if(de<0||de>24)return null;const wt=1<<de,nt=ar(de,he=he+wt&wt-1,Me);if(this.tiles[nt])return Yt(this.tiles[nt],Ke);Qe>1&&console.log("drilling down to z%d-%d-%d",de,he,Me);let Ot,Gt=de,ir=he,Pr=Me;for(;!Ot&&Gt>0;)Gt--,ir>>=1,Pr>>=1,Ot=this.tiles[ar(Gt,ir,Pr)];return Ot&&Ot.source?(Qe>1&&(console.log("found parent tile z%d-%d-%d",Gt,ir,Pr),console.time("drilling down")),this.splitTile(Ot.source,Gt,ir,Pr,de,he,Me),Qe>1&&console.timeEnd("drilling down"),this.tiles[nt]?Yt(this.tiles[nt],Ke):null):null}}function ar(Ye,de,he){return 32*((1<<Ye)*he+de)+Ye}class gr extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(de,he){return u._(this,void 0,void 0,(function*(){const Me=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ue=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!Ue)return null;const Ke=new N(Ue.features,{version:2,extent:u.$});let Qe=(function(wt){const nt=new u.cM;return(function(Ot,Gt){for(const ir in Ot.layers)Gt.writeMessage(3,F,Ot.layers[ir])})(wt,nt),nt.finish()})(Ke);return Qe.byteOffset===0&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),{vectorTile:Ke,rawData:Qe.buffer}}))}loadData(de){return u._(this,void 0,void 0,(function*(){var he;(he=this._pendingRequest)===null||he===void 0||he.abort();const Me=!!(de&&de.request&&de.request.collectResourceTiming)&&new u.cN(de.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(de,this._pendingRequest);const Ue=yield this._pendingData;this._geoJSONIndex=de.cluster?new ae((function({superclusterOptions:Qe,clusterProperties:wt}){if(!wt||!Qe)return Qe;const nt={},Ot={},Gt={accumulated:null,zoom:0},ir={properties:null},Pr=Object.keys(wt);for(const bt of Pr){const[Sr,Mr]=wt[bt],Nr=u.cT(Mr),en=u.cT(typeof Sr=="string"?[Sr,["accumulated"],["get",bt]]:Sr);nt[bt]=Nr.value,Ot[bt]=en.value}return Qe.map=bt=>{ir.properties=bt;const Sr={};for(const Mr of Pr)Sr[Mr]=nt[Mr].evaluate(Gt,ir);return Sr},Qe.reduce=(bt,Sr)=>{ir.properties=Sr;for(const Mr of Pr)Gt.accumulated=bt[Mr],bt[Mr]=Ot[Mr].evaluate(Gt,ir)},Qe})(de)).load(Ue.features):(function(Qe,wt){return new Ut(Qe,wt)})(Ue,de.geojsonVtOptions),this.loaded={};const Ke={data:Ue};if(Me){const Qe=Me.finish();Qe&&(Ke.resourceTiming={},Ke.resourceTiming[de.source]=JSON.parse(JSON.stringify(Qe)))}return Ke}catch(Ue){if(delete this._pendingRequest,u.cy(Ue))return{abandoned:!0};throw Ue}}))}getData(){return u._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(de){const he=this.loaded;return he&&he[de.uid]?super.reloadTile(de):this.loadTile(de)}loadAndProcessGeoJSON(de,he){return u._(this,void 0,void 0,(function*(){let Me=yield this.loadGeoJSON(de,he);if(delete this._pendingRequest,typeof Me!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(O(Me,!0),de.filter){const Ue=u.cT(de.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map((Qe=>`${Qe.key}: ${Qe.message}`)).join(", "));Me={type:"FeatureCollection",features:Me.features.filter((Qe=>Ue.value.evaluate({zoom:0},Qe)))}}return Me}))}loadGeoJSON(de,he){return u._(this,void 0,void 0,(function*(){const{promoteId:Me}=de;if(de.request){const Ue=yield u.j(de.request,he);return this._dataUpdateable=u.cV(Ue.data,Me)?u.cU(Ue.data,Me):void 0,Ue.data}if(typeof de.data=="string")try{const Ue=JSON.parse(de.data);return this._dataUpdateable=u.cV(Ue,Me)?u.cU(Ue,Me):void 0,Ue}catch{throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`)}if(!de.dataDiff)throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${de.source}`);return u.cW(this._dataUpdateable,de.dataDiff,Me),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(de){return u._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}class yr{constructor(de){this.self=de,this.actor=new u.J(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(he,Me)=>{if(this.externalWorkerSourceTypes[he])throw new Error(`Worker source with name "${he}" already registered.`);this.externalWorkerSourceTypes[he]=Me},this.self.addProtocol=u.cA,this.self.removeProtocol=u.cB,this.self.registerRTLTextPlugin=he=>{u.cX.setMethods(he)},this.actor.registerMessageHandler("LDT",((he,Me)=>this._getDEMWorkerSource(he,Me.source).loadTile(Me))),this.actor.registerMessageHandler("RDT",((he,Me)=>u._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(he,Me.source).removeTile(Me)})))),this.actor.registerMessageHandler("GCEZ",((he,Me)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,Me.type,Me.source).getClusterExpansionZoom(Me)})))),this.actor.registerMessageHandler("GCC",((he,Me)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,Me.type,Me.source).getClusterChildren(Me)})))),this.actor.registerMessageHandler("GCL",((he,Me)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(he,Me.type,Me.source).getClusterLeaves(Me)})))),this.actor.registerMessageHandler("LD",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).loadData(Me))),this.actor.registerMessageHandler("GD",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).getData())),this.actor.registerMessageHandler("LT",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).loadTile(Me))),this.actor.registerMessageHandler("RT",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).reloadTile(Me))),this.actor.registerMessageHandler("AT",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).abortTile(Me))),this.actor.registerMessageHandler("RMT",((he,Me)=>this._getWorkerSource(he,Me.type,Me.source).removeTile(Me))),this.actor.registerMessageHandler("RS",((he,Me)=>u._(this,void 0,void 0,(function*(){if(!this.workerSources[he]||!this.workerSources[he][Me.type]||!this.workerSources[he][Me.type][Me.source])return;const Ue=this.workerSources[he][Me.type][Me.source];delete this.workerSources[he][Me.type][Me.source],Ue.removeSource!==void 0&&Ue.removeSource(Me)})))),this.actor.registerMessageHandler("RM",(he=>u._(this,void 0,void 0,(function*(){delete this.layerIndexes[he],delete this.availableImages[he],delete this.workerSources[he],delete this.demWorkerSources[he]})))),this.actor.registerMessageHandler("SR",((he,Me)=>u._(this,void 0,void 0,(function*(){this.referrer=Me})))),this.actor.registerMessageHandler("SRPS",((he,Me)=>this._syncRTLPluginState(he,Me))),this.actor.registerMessageHandler("IS",((he,Me)=>u._(this,void 0,void 0,(function*(){this.self.importScripts(Me)})))),this.actor.registerMessageHandler("SI",((he,Me)=>this._setImages(he,Me))),this.actor.registerMessageHandler("UL",((he,Me)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(he).update(Me.layers,Me.removedIds)})))),this.actor.registerMessageHandler("SL",((he,Me)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(he).replace(Me)}))))}_setImages(de,he){return u._(this,void 0,void 0,(function*(){this.availableImages[de]=he;for(const Me in this.workerSources[de]){const Ue=this.workerSources[de][Me];for(const Ke in Ue)Ue[Ke].availableImages=he}}))}_syncRTLPluginState(de,he){return u._(this,void 0,void 0,(function*(){return yield u.cX.syncState(he,this.self.importScripts)}))}_getAvailableImages(de){let he=this.availableImages[de];return he||(he=[]),he}_getLayerIndex(de){let he=this.layerIndexes[de];return he||(he=this.layerIndexes[de]=new a),he}_getWorkerSource(de,he,Me){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][he]||(this.workerSources[de][he]={}),!this.workerSources[de][he][Me]){const Ue={sendAsync:(Ke,Qe)=>(Ke.targetMapId=de,this.actor.sendAsync(Ke,Qe))};switch(he){case"vector":this.workerSources[de][he][Me]=new v(Ue,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][he][Me]=new gr(Ue,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][he][Me]=new this.externalWorkerSourceTypes[he](Ue,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][he][Me]}_getDEMWorkerSource(de,he){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][he]||(this.demWorkerSources[de][he]=new w),this.demWorkerSources[de][he]}}return u.i(self)&&(self.worker=new yr(self)),yr})),i("index",["exports","./shared"],(function(u,a){var p="5.7.1";function d(){var S=new a.A(4);return a.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let m,v;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,s,h){const y=requestAnimationFrame((E=>{_(),s(E)})),{unsubscribe:_}=a.s(S.signal,"abort",(()=>{_(),cancelAnimationFrame(y),h(a.c())}),!1)},frameAsync(S){return new Promise(((s,h)=>{this.frame(S,s,h)}))},getImageData(S,s=0){return this.getImageCanvasContext(S).getImageData(-s,-s,S.width+2*s,S.height+2*s)},getImageCanvasContext(S){const s=window.document.createElement("canvas"),h=s.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return s.width=S.width,s.height=S.height,h.drawImage(S,0,0,S.width,S.height),h},resolveURL:S=>(m||(m=document.createElement("a")),m.href=S,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class x{static testProp(s){if(!x.docStyle)return s[0];for(let h=0;h<s.length;h++)if(s[h]in x.docStyle)return s[h];return s[0]}static create(s,h,y){const _=window.document.createElement(s);return h!==void 0&&(_.className=h),y&&y.appendChild(_),_}static createNS(s,h){return window.document.createElementNS(s,h)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(s,h){s.style[x.transformProp]=h}static addEventListener(s,h,y,_={}){s.addEventListener(h,y,"passive"in _?_:_.capture)}static removeEventListener(s,h,y,_={}){s.removeEventListener(h,y,"passive"in _?_:_.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",x.suppressClickInternal,!0)}),0)}static getScale(s){const h=s.getBoundingClientRect();return{x:h.width/s.offsetWidth||1,y:h.height/s.offsetHeight||1,boundingClientRect:h}}static getPoint(s,h,y){const _=h.boundingClientRect;return new a.P((y.clientX-_.left)/h.x-s.clientLeft,(y.clientY-_.top)/h.y-s.clientTop)}static mousePos(s,h){const y=x.getScale(s);return x.getPoint(s,y,h)}static touchPos(s,h){const y=[],_=x.getScale(s);for(let E=0;E<h.length;E++)y.push(x.getPoint(s,_,h[E]));return y}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const h=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),y=h.querySelectorAll("script");for(const _ of y)_.remove();return x.clean(h),h.innerHTML}static isPossiblyDangerous(s,h){const y=h.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!y.includes("javascript:")&&!y.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const h=s.children;for(const y of h)x.removeAttributes(y),x.clean(y)}static removeAttributes(s){for(const{name:h,value:y}of s.attributes)x.isPossiblyDangerous(h,y)&&s.removeAttribute(h)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(S){!L&&O&&(N?F(S):T=S)}};let T,O,L=!1,N=!1;function F(S){const s=S.createTexture();S.bindTexture(S.TEXTURE_2D,s);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,O),S.isContextLost())return;P.supported=!0}catch{}S.deleteTexture(s),L=!0}var D;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{T&&F(T),T=null,N=!0},O.onerror=()=>{L=!0,T=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(S){let s,h,y,_;S.resetRequestQueue=()=>{s=[],h=0,y=0,_={}},S.addThrottleControl=V=>{const J=y++;return _[J]=V,J},S.removeThrottleControl=V=>{delete _[V],I()},S.getImage=(V,J,re=!0)=>new Promise(((ce,oe)=>{P.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*"),a.e(V,{type:"image"}),s.push({abortController:J,requestParameters:V,supportImageRefresh:re,state:"queued",onError:be=>{oe(be)},onSuccess:be=>{ce(be)}}),I()}));const E=V=>a._(this,void 0,void 0,(function*(){V.state="running";const{requestParameters:J,supportImageRefresh:re,onError:ce,onSuccess:oe,abortController:be}=V,Ie=re===!1&&!a.i(self)&&!a.g(J.url)&&(!J.headers||Object.keys(J.headers).reduce(((Xe,it)=>Xe&&it==="accept"),!0));h++;const Ze=Ie?j(J,be):a.m(J,be);try{const Xe=yield Ze;delete V.abortController,V.state="completed",Xe.data instanceof HTMLImageElement||a.b(Xe.data)?oe(Xe):Xe.data&&oe({data:yield(We=Xe.data,typeof createImageBitmap=="function"?a.f(We):a.h(We)),cacheControl:Xe.cacheControl,expires:Xe.expires})}catch(Xe){delete V.abortController,ce(Xe)}finally{h--,I()}var We})),I=()=>{const V=(()=>{for(const J of Object.keys(_))if(_[J]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let J=h;J<V&&s.length>0;J++){const re=s.shift();re.abortController.signal.aborted?J--:E(re)}},j=(V,J)=>new Promise(((re,ce)=>{const oe=new Image,be=V.url,Ie=V.credentials;Ie&&Ie==="include"?oe.crossOrigin="use-credentials":(Ie&&Ie==="same-origin"||!a.d(be))&&(oe.crossOrigin="anonymous"),J.signal.addEventListener("abort",(()=>{oe.src="",ce(a.c())})),oe.fetchPriority="high",oe.onload=()=>{oe.onerror=oe.onload=null,re({data:oe})},oe.onerror=()=>{oe.onerror=oe.onload=null,J.signal.aborted||ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},oe.src=be}))})(D||(D={})),D.resetRequestQueue();class q{constructor(s){this._transformRequestFn=s??null}transformRequest(s,h){return this._transformRequestFn&&this._transformRequestFn(s,h)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function z(S){const s=[];if(typeof S=="string")s.push({id:"default",url:S});else if(S&&S.length>0){const h=[];for(const{id:y,url:_}of S){const E=`${y}${_}`;h.indexOf(E)===-1&&(h.push(E),s.push({id:y,url:_}))}}return s}function Z(S,s,h){try{const y=new URL(S);return y.pathname+=`${s}${h}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Q(S){const{userImage:s}=S;return!!(s&&s.render&&s.render())&&(S.data.replace(new Uint8Array(s.data.buffer)),!0)}class Y extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:h,promiseResolve:y}of this.requestors)y(this._getImagesForIds(h));this.requestors=[]}}getImage(s){const h=this.images[s];if(h&&!h.data&&h.spriteData){const y=h.spriteData;h.data=new a.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),h.spriteData=null}return h}addImage(s,h){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,h)&&(this.images[s]=h)}_validate(s,h){let y=!0;const _=h.data||h.spriteData;return this._validateStretch(h.stretchX,_&&_.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,_&&_.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),y=!1),y}_validateStretch(s,h){if(!s)return!0;let y=0;for(const _ of s){if(_[0]<y||_[1]<_[0]||h<_[1])return!1;y=_[1]}return!0}_validateContent(s,h){if(!s)return!0;if(s.length!==4)return!1;const y=h.spriteData,_=y&&y.width||h.data.width,E=y&&y.height||h.data.height;return!(s[0]<0||_<s[0]||s[1]<0||E<s[1]||s[2]<0||_<s[2]||s[3]<0||E<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,h,y=!0){const _=this.getImage(s);if(y&&(_.data.width!==h.data.width||_.data.height!==h.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=_.version+1,this.images[s]=h,this.updatedImages[s]=!0}removeImage(s){const h=this.images[s];delete this.images[s],delete this.patterns[s],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise(((h,y)=>{let _=!0;if(!this.isLoaded())for(const E of s)this.images[E]||(_=!1);this.isLoaded()||_?h(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:h})}))}_getImagesForIds(s){const h={};for(const y of s){let _=this.getImage(y);_||(this.fire(new a.l("styleimagemissing",{id:y})),_=this.getImage(y)),_?h[y]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:s,height:h}=this.atlasImage;return{width:s,height:h}}getPattern(s){const h=this.patterns[s],y=this.getImage(s);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const _={w:y.data.width+2,h:y.data.height+2,x:0,y:0},E=new a.I(_,y);this.patterns[s]={bin:_,position:E}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const h=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const E in this.patterns)s.push(this.patterns[E].bin);const{w:h,h:y}=a.p(s),_=this.atlasImage;_.resize({width:h||1,height:y||1});for(const E in this.patterns){const{bin:I}=this.patterns[E],j=I.x+1,V=I.y+1,J=this.getImage(E).data,re=J.width,ce=J.height;a.R.copy(J,_,{x:0,y:0},{x:j,y:V},{width:re,height:ce}),a.R.copy(J,_,{x:0,y:ce-1},{x:j,y:V-1},{width:re,height:1}),a.R.copy(J,_,{x:0,y:0},{x:j,y:V+ce},{width:re,height:1}),a.R.copy(J,_,{x:re-1,y:0},{x:j-1,y:V},{width:1,height:ce}),a.R.copy(J,_,{x:0,y:0},{x:j+re,y:V},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const h of s){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.getImage(h);y||a.w(`Image with ID: "${h}" was not found`),Q(y)&&this.updateImage(h,y)}}}const se=1e20;function W(S,s,h,y,_,E,I,j,V){for(let J=s;J<s+y;J++)G(S,h*E+J,E,_,I,j,V);for(let J=h;J<h+_;J++)G(S,J*E+s,1,y,I,j,V)}function G(S,s,h,y,_,E,I){E[0]=0,I[0]=-se,I[1]=se,_[0]=S[s];for(let j=1,V=0,J=0;j<y;j++){_[j]=S[s+j*h];const re=j*j;do{const ce=E[V];J=(_[j]-_[ce]+re-ce*ce)/(j-ce)/2}while(J<=I[V]&&--V>-1);V++,E[V]=j,I[V]=J,I[V+1]=se}for(let j=0,V=0;j<y;j++){for(;I[V+1]<j;)V++;const J=E[V],re=j-J;S[s+j*h]=_[J]+re*re}}class ae{constructor(s,h,y){this.requestManager=s,this.localIdeographFontFamily=h,this.entries={},this.lang=y}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,(function*(){const h=[];for(const E in s)for(const I of s[E])h.push(this._getAndCacheGlyphsPromise(E,I));const y=yield Promise.all(h),_={};for(const{stack:E,id:I,glyph:j}of y)_[E]||(_[E]={}),_[E][I]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return _}))}_getAndCacheGlyphsPromise(s,h){return a._(this,void 0,void 0,(function*(){let y=this.entries[s];y||(y=this.entries[s]={glyphs:{},requests:{},ranges:{}});let _=y.glyphs[h];if(_!==void 0)return{stack:s,id:h,glyph:_};if(_=this._tinySDF(y,s,h),_)return y.glyphs[h]=_,{stack:s,id:h,glyph:_};const E=Math.floor(h/256);if(256*E>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[E])return{stack:s,id:h,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[E]){const j=ae.loadGlyphRange(s,E,this.url,this.requestManager);y.requests[E]=j}const I=yield y.requests[E];for(const j in I)this._doesCharSupportLocalGlyph(+j)||(y.glyphs[+j]=I[+j]);return y.ranges[E]=!0,{stack:s,id:h,glyph:I[h]||null}}))}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,h,y){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(y))return;let E=s.tinySDF;if(!E){let j="400";/bold/i.test(h)?j="900":/medium/i.test(h)?j="500":/light/i.test(h)&&(j="200"),E=s.tinySDF=new ae.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:j})}const I=E.draw(String.fromCharCode(y));return{id:y,bitmap:new a.q({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}ae.loadGlyphRange=function(S,s,h,y){return a._(this,void 0,void 0,(function*(){const _=256*s,E=_+255,I=y.transformRequest(h.replace("{fontstack}",S).replace("{range}",`${_}-${E}`),"Glyphs"),j=yield a.n(I,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${s}, ${_}-${E}`);const V={};for(const J of a.o(j.data))V[J.id]=J;return V}))},ae.TinySDF=class{constructor({fontSize:S=24,buffer:s=3,radius:h=8,cutoff:y=.25,fontFamily:_="sans-serif",fontWeight:E="normal",fontStyle:I="normal",lang:j=null}={}){this.buffer=s,this.cutoff=y,this.radius=h,this.lang=j;const V=this.size=S+4*s,J=this._createCanvas(V),re=this.ctx=J.getContext("2d",{willReadFrequently:!0});re.font=`${I} ${E} ${S}px ${_}`,re.textBaseline="alphabetic",re.textAlign="left",re.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Uint16Array(V)}_createCanvas(S){const s=document.createElement("canvas");return s.width=s.height=S,s}draw(S){const{width:s,actualBoundingBoxAscent:h,actualBoundingBoxDescent:y,actualBoundingBoxLeft:_,actualBoundingBoxRight:E}=this.ctx.measureText(S),I=Math.ceil(h),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-_))),V=Math.min(this.size-this.buffer,I+Math.ceil(y)),J=j+2*this.buffer,re=V+2*this.buffer,ce=Math.max(J*re,0),oe=new Uint8ClampedArray(ce),be={data:oe,width:J,height:re,glyphWidth:j,glyphHeight:V,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(j===0||V===0)return be;const{ctx:Ie,buffer:Ze,gridInner:We,gridOuter:Xe}=this;this.lang&&(Ie.lang=this.lang),Ie.clearRect(Ze,Ze,j,V),Ie.fillText(S,Ze,Ze+I);const it=Ie.getImageData(Ze,Ze,j,V);Xe.fill(se,0,ce),We.fill(0,0,ce);for(let pt=0;pt<V;pt++)for(let ct=0;ct<j;ct++){const _t=it.data[4*(pt*j+ct)+3]/255;if(_t===0)continue;const Ct=(pt+Ze)*J+ct+Ze;if(_t===1)Xe[Ct]=0,We[Ct]=se;else{const ft=.5-_t;Xe[Ct]=ft>0?ft*ft:0,We[Ct]=ft<0?ft*ft:0}}W(Xe,0,0,J,re,J,this.f,this.v,this.z),W(We,Ze,Ze,j,V,J,this.f,this.v,this.z);for(let pt=0;pt<ce;pt++){const ct=Math.sqrt(Xe[pt])-Math.sqrt(We[pt]);oe[pt]=Math.round(255-255*(ct/this.radius+this.cutoff))}return be}};class le{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,h){return a.B(s.expression.evaluate(h))}interpolate(s,h,y){return{x:a.C.number(s.x,h.x,y),y:a.C.number(s.y,h.y,y),z:a.C.number(s.z,h.z,y)}}}let ue;class ye extends a.E{constructor(s){super(),ue=ue||new a.r({anchor:new a.D(a.v.light.anchor),position:new le,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,h={}){if(!this._validate(a.x,s,h))for(const y in s){const _=s[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),_):this._transitionable.setValue(y,_)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,h,y){return(!y||y.validate!==!1)&&a.y(this,s.call(a.z,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Se=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class ge extends a.E{constructor(s){super(),this._transitionable=new a.t(Se),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,h={}){if(!this._validate(a.G,s,h)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in s){const _=s[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),_):this._transitionable.setValue(y,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,h,y={}){return y?.validate!==!1&&a.y(this,s.call(a.z,a.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class xe{constructor(s,h){this.width=s,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,h){const y=s.join(",")+String(h);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(s,h)),this.dashEntry[y]}getDashRanges(s,h,y){const _=[];let E=s.length%2==1?-s[s.length-1]*y:0,I=s[0]*y,j=!0;_.push({left:E,right:I,isDash:j,zeroLength:s[0]===0});let V=s[0];for(let J=1;J<s.length;J++){j=!j;const re=s[J];E=V*y,V+=re,I=V*y,_.push({left:E,right:I,isDash:j,zeroLength:re===0})}return _}addRoundDash(s,h,y){const _=h/2;for(let E=-y;E<=y;E++){const I=this.width*(this.nextRow+y+E);let j=0,V=s[j];for(let J=0;J<this.width;J++){J/V.right>1&&(V=s[++j]);const re=Math.abs(J-V.left),ce=Math.abs(J-V.right),oe=Math.min(re,ce);let be;const Ie=E/y*(_+1);if(V.isDash){const Ze=_-Math.abs(Ie);be=Math.sqrt(oe*oe+Ze*Ze)}else be=_-Math.sqrt(oe*oe+Ie*Ie);this.data[I+J]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(s){for(let j=s.length-1;j>=0;--j){const V=s[j],J=s[j+1];V.zeroLength?s.splice(j,1):J&&J.isDash===V.isDash&&(J.left=V.left,s.splice(j,1))}const h=s[0],y=s[s.length-1];h.isDash===y.isDash&&(h.left=y.left-this.width,y.right=h.right+this.width);const _=this.width*this.nextRow;let E=0,I=s[E];for(let j=0;j<this.width;j++){j/I.right>1&&(I=s[++E]);const V=Math.abs(j-I.left),J=Math.abs(j-I.right),re=Math.min(V,J);this.data[_+j]=Math.max(0,Math.min(255,(I.isDash?re:-re)+128))}}addDash(s,h){const y=h?7:0,_=2*y+1;if(this.nextRow+_>this.height)return a.w("LineAtlas out of space"),null;let E=0;for(let j=0;j<s.length;j++)E+=s[j];if(E!==0){const j=this.width/E,V=this.getDashRanges(s,this.width,j);h?this.addRoundDash(V,j,y):this.addRegularDash(V)}const I={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:E};return this.nextRow+=_,this.dirty=!0,I}bind(s){const h=s.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach((h=>{h.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const pe=Math.floor(w.hardwareConcurrency/2);let _e,Ce;function ke(){return _e||(_e=new He),_e}He.workerCount=a.H(globalThis)?Math.max(Math.min(pe,3),1):1;class $e{constructor(s,h){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=h;const y=this.workerPool.acquire(h);for(let _=0;_<y.length;_++){const E=new a.J(y[_],h);E.name=`Worker ${_}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,h){const y=[];for(const _ of this.actors)y.push(_.sendAsync({type:s,data:h}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach((h=>{h.remove()})),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,h){for(const y of this.actors)y.registerMessageHandler(s,h)}}function ht(){return Ce||(Ce=new $e(ke(),a.K),Ce.registerMessageHandler("GR",((S,s,h)=>a.m(s,h)))),Ce}function At(S,s){const h=a.L();return a.M(h,h,[1,1,0]),a.N(h,h,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?a.O(h,h,S.calculatePosMatrix(s.toUnwrapped())):h}function mt(S,s,h,y,_,E,I){var j;const V=(function(oe,be,Ie){if(oe)for(const Ze of oe){const We=be[Ze];if(We&&We.source===Ie&&We.type==="fill-extrusion")return!0}else for(const Ze in be){const We=be[Ze];if(We.source===Ie&&We.type==="fill-extrusion")return!0}return!1})((j=_?.layers)!==null&&j!==void 0?j:null,s,S.id),J=E.maxPitchScaleFactor(),re=S.tilesIn(y,J,V);re.sort(rt);const ce=[];for(const oe of re)ce.push({wrappedTileID:oe.tileID.wrapped().key,queryResults:oe.tile.queryRenderedFeatures(s,h,S._state,oe.queryGeometry,oe.cameraQueryGeometry,oe.scale,_,E,J,At(S.transform,oe.tileID),I?(be,Ie)=>I(oe.tileID,be,Ie):void 0)});return(function(oe,be){for(const Ie in oe)for(const Ze of oe[Ie])Lt(Ze,be);return oe})((function(oe){const be={},Ie={};for(const Ze of oe){const We=Ze.queryResults,Xe=Ze.wrappedTileID,it=Ie[Xe]=Ie[Xe]||{};for(const pt in We){const ct=We[pt],_t=it[pt]=it[pt]||{},Ct=be[pt]=be[pt]||[];for(const ft of ct)_t[ft.featureIndex]||(_t[ft.featureIndex]=!0,Ct.push(ft))}}return be})(ce),S)}function rt(S,s){const h=S.tileID,y=s.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function Lt(S,s){const h=S.feature,y=s.getFeatureState(h.layer["source-layer"],h.id);h.source=h.layer.source,h.layer["source-layer"]&&(h.sourceLayer=h.layer["source-layer"]),h.state=y}function Tt(S,s,h){return a._(this,void 0,void 0,(function*(){let y=S;if(S.url?y=(yield a.j(s.transformRequest(S.url,"Source"),h)).data:yield w.frameAsync(h),!y)return null;const _=a.Q(a.e(y,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(_.vectorLayerIds=y.vector_layers.map((E=>E.id))),_}))}class Pt{constructor(s,h){s&&(h?this.setSouthWest(s).setNorthEast(h):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const h=this._sw,y=this._ne;let _,E;if(s instanceof a.S)_=s,E=s;else{if(!(s instanceof Pt))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Pt.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(_=s._sw,E=s._ne,!_||!E)return this}return h||y?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),y.lng=Math.max(E.lng,y.lng),y.lat=Math.max(E.lat,y.lat)):(this._sw=new a.S(_.lng,_.lat),this._ne=new a.S(E.lng,E.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:h,lat:y}=a.S.convert(s);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&_}static convert(s){return s instanceof Pt?s:s&&new Pt(s)}static fromLngLat(s,h=0){const y=360*h/40075017,_=y/Math.cos(Math.PI/180*s.lat);return new Pt(new a.S(s.lng-_,s.lat-y),new a.S(s.lng+_,s.lat+y))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),h=new a.S(this._ne.lng,this._ne.lat);return new Pt(s,s.lng>h.lng?new a.S(h.lng+360,h.lat):h)}}class ut{constructor(s,h,y){this.bounds=Pt.convert(this.validateBounds(s)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const h=Math.pow(2,s.z),y=Math.floor(a.V(this.bounds.getWest())*h),_=Math.floor(a.U(this.bounds.getNorth())*h),E=Math.ceil(a.V(this.bounds.getEast())*h),I=Math.ceil(a.U(this.bounds.getSouth())*h);return s.x>=y&&s.x<E&&s.y>=_&&s.y<I}}class Le extends a.E{constructor(s,h,y,_){if(super(),this.id=s,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(h,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new ut(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}}))}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(h,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};y.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise(((E,I)=>{s.reloadPromise={resolve:E,reject:I}}))}else s.actor=this.dispatcher.getActor(),_="LT";s.abortController=new AbortController;try{const E=yield s.actor.sendAsync({type:_,data:y},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,E)}catch(E){if(delete s.abortController,s.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(s,null)}}))}_afterTileLoadWorkerResponse(s,h){if(h&&h.resourceTiming&&(s.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&s.setExpiryData(h),s.loadVectorData(h,this.map.painter),s.reloadPromise){const y=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(y.resolve).catch(y.reject)}}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class sr extends a.E{constructor(s,h,y,_){super(),this.id=s,this.dispatcher=y,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},h),a.e(this,a.Q(h,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const h=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,h&&(a.e(this,h),h.bounds&&(this.tileBounds=new ut(h.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(h){this._tileJSONRequest=null,this.fire(new a.k(h))}}))}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const y=yield D.getImage(this.map._requestManager.transformRequest(h,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const _=this.map.painter.context,E=_.gl,I=y.data;s.texture=this.map.painter.getTileTexture(I.width),s.texture?s.texture.update(I,{useMipmap:!0}):(s.texture=new a.T(_,I,E.RGBA,{useMipmap:!0}),s.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)}))}hasTransition(){return!1}}class lr extends sr{constructor(s,h,y,_){super(s,h,y,_),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(h,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const _=yield D.getImage(y,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(_&&_.data){const E=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&s.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const I=a.b(E)&&a.W()?E:yield this.readImageNow(E),j={type:this.type,uid:s.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const V=yield s.actor.sendAsync({type:"LDT",data:j});s.dem=V,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(_){if(delete s.abortController,s.aborted)s.state="unloaded";else if(_)throw s.state="errored",_}}))}readImageNow(s){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const h=s.width+2,y=s.height+2;try{return new a.R({width:h,height:y},yield a.Y(s,-1,-1,h,y))}catch{}}return w.getImageData(s,1)}))}_getNeighboringTiles(s){const h=s.canonical,y=Math.pow(2,h.z),_=(h.x-1+y)%y,E=h.x===0?s.wrap-1:s.wrap,I=(h.x+1+y)%y,j=h.x+1===y?s.wrap+1:s.wrap,V={};return V[new a.Z(s.overscaledZ,E,h.z,_,h.y).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,h.z,I,h.y).key]={backfilled:!1},h.y>0&&(V[new a.Z(s.overscaledZ,E,h.z,_,h.y-1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,s.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,h.z,I,h.y-1).key]={backfilled:!1}),h.y+1<y&&(V[new a.Z(s.overscaledZ,E,h.z,_,h.y+1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,s.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,h.z,I,h.y+1).key]={backfilled:!1}),V}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))}))}}class dr extends a.E{constructor(s,h,y,_){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:h.data},this.actor=y.getActor(),this.setEventedParent(_),this._data=h.data,this._options=a.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId,h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(h.buffer!==void 0?h.buffer:128),tolerance:this._pixelsToTileUnits(h.tolerance!==void 0?h.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(h.clusterMaxZoom),minPoints:Math.max(2,h.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(h.clusterRadius||50),log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const h=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${h}"`),h}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,(function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})}))}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map((h=>h.coordinates)).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const s=new Pt,h=yield this.getData();let y;switch(h.type){case"FeatureCollection":y=h.features.map((_=>this.getCoordinatesFromGeometry(_.geometry))).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(h.geometry);break;default:y=this.getCoordinatesFromGeometry(h)}if(y.length==0)return s;for(let _=0;_<y.length-1;_+=2)s.extend([y[_],y[_+1]]);return s}))}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,h,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:h,offset:y}})}_updateWorkerData(){return a._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:s,diff:h}=this._pendingWorkerUpdate;if(!s&&!h)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=a.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(y.request=this.map._requestManager.transformRequest(w.resolveURL(s),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):h&&(y.dataDiff=h,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=_.data;let E=null;_.resourceTiming&&_.resourceTiming[this.id]&&(E=_.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&E&&E.length>0&&a.e(I,{resourceTiming:E}),this.fire(new a.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return a._(this,void 0,void 0,(function*(){const h=s.actor?"RT":"LT";s.actor=this.actor;const y={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const _=yield this.actor.sendAsync({type:h,data:y},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(_,this.map.painter,h==="RT")}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Yt extends a.E{constructor(s,h,y,_){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=h}load(s){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,s&&(this.coordinates=s),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new a.k(h))}}))}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const h=s.map(a.a1.fromLngLat);var y;return this.tileID=(function(_){const E=a.a2.fromPoints(_),I=E.width(),j=E.height(),V=Math.max(I,j),J=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),re=Math.pow(2,J);return new a.a4(J,Math.floor((E.minX+E.maxX)/2*re),Math.floor((E.minY+E.maxY)/2*re))})(h),this.terrainTileRanges=this._getOverlappingTileRanges(h),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=h.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,h=s.gl;this.texture||(this.texture=new a.T(s,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const _ in this.tiles){const E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:h,minY:y,maxX:_,maxY:E}=a.a2.fromPoints(s),I={};for(let j=0;j<=a.a3;j++){const V=Math.pow(2,j),J=Math.floor(h*V),re=Math.floor(y*V),ce=Math.floor(_*V),oe=Math.floor(E*V);I[j]={minTileX:J,minTileY:re,maxTileX:ce,maxTileY:oe}}return I}}class Ve extends Yt{constructor(s,h,y,_){super(s,h,y,_),this.roundZoom=!0,this.type="video",this.options=h}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const h of s.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield a.a5(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new a.k(h))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const h=this.video.seekable;s<h.start(0)||s>h.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,h=s.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let y=!1;for(const _ in this.tiles){const E=this.tiles[_];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tt extends Yt{constructor(s,h,y,_){super(s,h,y,_),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some((E=>!Array.isArray(E)||E.length!==2||E.some((I=>typeof I!="number"))))||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a6(`sources.${s}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,y=h.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(h,this.canvas,y.RGBA,{premultiply:!0});let _=!1;for(const E in this.tiles){const I=this.tiles[E];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,_=!0)}_&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const lt={},Mt=S=>{switch(S){case"geojson":return dr;case"image":return Yt;case"raster":return sr;case"raster-dem":return lr;case"vector":return Le;case"video":return Ve;case"canvas":return tt}return lt[S]},Kt="RTLPluginLoaded";class Ut extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ht()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch((h=>{throw this.status="error",h}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,(function*(h,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Kt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ar=null;function gr(){return ar||(ar=new Ut),ar}class yr{constructor(s,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a7(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const h=s+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,h,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=(function(_,E){const I={};if(!E)return I;for(const j of _){const V=j.layerIds.map((J=>E.getLayer(J))).filter(Boolean);if(V.length!==0){j.layers=V,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((J=>V.filter((re=>re.id===J))[0])));for(const J of V)I[J.id]=j}}return I})(s.buckets,h?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const E=this.buckets[_];if(E instanceof a.a9){if(this.hasSymbolBuckets=!0,!y)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const E=this.buckets[_];if(E instanceof a.a9&&E.hasRTLText){this.hasRTLText=!0,gr().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const E=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(_).queryRadius(E))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const y in this.buckets){const _=this.buckets[y];_.uploadPending()&&_.upload(s)}const h=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,h,y,_,E,I,j,V,J,re,ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:E,scale:I,tileSize:this.tileSize,pixelPosMatrix:re,transform:V,params:j,queryPadding:this.queryPadding*J,getElevation:ce},s,h,y):{}}querySourceFeatures(s,h){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const _=y.loadVTLayers(),E=h&&h.sourceLayer?h.sourceLayer:"",I=_._geojsonTileLayer||_[E];if(!I)return;const j=a.aa(h&&h.filter),{z:V,x:J,y:re}=this.tileID.canonical,ce={z:V,x:J,y:re};for(let oe=0;oe<I.length;oe++){const be=I.feature(oe);if(j.needGeometry){const We=a.ab(be,!0);if(!j.filter(new a.F(this.tileID.overscaledZ),We,this.tileID.canonical))continue}else if(!j.filter(new a.F(this.tileID.overscaledZ),be))continue;const Ie=y.getId(be,E),Ze=new a.ac(be,V,J,re,Ie);Ze.tile=ce,s.push(Ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const h=this.expirationTime;if(s.cacheControl){const y=a.ad(s.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const y=Date.now();let _=!1;if(this.expirationTime>y)_=!1;else if(h)if(this.expirationTime<h)_=!0;else{const E=this.expirationTime-h;E?this.expirationTime=y+Math.max(E,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!h.style.hasLayer(_))continue;const E=this.buckets[_],I=E.layers[0].sourceLayer||"_geojsonTileLayer",j=y[I],V=s[I];if(!j||!V||Object.keys(V).length===0)continue;E.update(V,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const J=h&&h.style&&h.style.getLayer(_);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=w.now()+s}setDependencies(s,h){const y={};for(const _ of h)y[_]=!0;this.dependencies[s]=y}hasDependency(s,h){for(const y of s){const _=this.dependencies[y];if(_){for(const E of h)if(_[E])return!0}}return!1}}class Ye{constructor(s,h){this.max=s,this.onRemove=h,this.reset()}reset(){for(const s in this.data)for(const h of this.data[s])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(s,h,y){const _=s.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const E={value:h,timeout:void 0};if(y!==void 0&&(E.timeout=setTimeout((()=>{this.remove(s,E)}),y)),this.data[_].push(E),this.order.push(_),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const h=this.data[s].shift();return h.timeout&&clearTimeout(h.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),h.value}getByKey(s){const h=this.data[s];return h?h[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,h){if(!this.has(s))return this;const y=s.wrapped().key,_=h===void 0?0:this.data[y].indexOf(h),E=this.data[y][_];return this.data[y].splice(_,1),E.timeout&&clearTimeout(E.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(E.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(s){const h=[];for(const y in this.data)for(const _ of this.data[y])s(_.value)||h.push(_);for(const y of h)this.remove(y.value.tileID,y)}}class de{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,h,y){const _=String(h);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][_]=this.stateChanges[s][_]||{},a.e(this.stateChanges[s][_],y),this.deletedStates[s]===null){this.deletedStates[s]={};for(const E in this.state[s])E!==_&&(this.deletedStates[s][E]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][_]===null){this.deletedStates[s][_]={};for(const E in this.state[s][_])y[E]||(this.deletedStates[s][_][E]=null)}else for(const E in y)this.deletedStates[s]&&this.deletedStates[s][_]&&this.deletedStates[s][_][E]===null&&delete this.deletedStates[s][_][E]}removeFeatureState(s,h,y){if(this.deletedStates[s]===null)return;const _=String(h);if(this.deletedStates[s]=this.deletedStates[s]||{},y&&h!==void 0)this.deletedStates[s][_]!==null&&(this.deletedStates[s][_]=this.deletedStates[s][_]||{},this.deletedStates[s][_][y]=null);else if(h!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][_])for(y in this.deletedStates[s][_]={},this.stateChanges[s][_])this.deletedStates[s][_][y]=null;else this.deletedStates[s][_]=null;else this.deletedStates[s]=null}getState(s,h){const y=String(h),_=a.e({},(this.state[s]||{})[y],(this.stateChanges[s]||{})[y]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const E=this.deletedStates[s][h];if(E===null)return{};for(const I in E)delete _[I]}return _}initializeTileState(s,h){s.setFeatureState(this.state,h)}coalesceChanges(s,h){const y={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const E={};for(const I in this.stateChanges[_])this.state[_][I]||(this.state[_][I]={}),a.e(this.state[_][I],this.stateChanges[_][I]),E[I]=this.state[_][I];y[_]=E}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const E={};if(this.deletedStates[_]===null)for(const I in this.state[_])E[I]={},this.state[_][I]={};else for(const I in this.deletedStates[_]){if(this.deletedStates[_][I]===null)this.state[_][I]={};else for(const j of Object.keys(this.deletedStates[_][I]))delete this.state[_][I][j];E[I]=this.state[_][I]}y[_]=y[_]||{},a.e(y[_],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const _ in s)s[_].setFeatureState(y,h)}}const he=89.25;function Me(S,s){const h=a.ah(s.lat,-a.ai,a.ai);return new a.P(a.V(s.lng)*S,a.U(h)*S)}function Ue(S,s){return new a.a1(s.x/S,s.y/S).toLngLat()}function Ke(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-S.pitch)),Math.tan(a.ae(he-S.pitch)))}function Qe(S,s){const h=S.canonical,y=s/a.af(h.z),_=h.x+Math.pow(2,h.z)*S.wrap,E=a.ag(new Float64Array(16));return a.M(E,E,[_*y,h.y*y,0]),a.N(E,E,[y/a.$,y/a.$,1]),E}function wt(S,s,h,y,_){const E=a.a1.fromLngLat(S,s),I=_*a.aj(1,S.lat),j=I*Math.cos(a.ae(h)),V=Math.sqrt(I*I-j*j),J=V*Math.sin(a.ae(-y)),re=V*Math.cos(a.ae(-y));return new a.a1(E.x+J,E.y+re,E.z+j)}function nt(S,s,h){const y=s.intersectsFrustum(S);if(!h||y===0)return y;const _=s.intersectsPlane(h);return _===0?0:y===2&&_===2?2:1}function Ot(S,s,h){let y=0;const _=(h-s)/10;for(let E=0;E<10;E++)y+=_*Math.pow(Math.cos(s+(E+.5)/10*(h-s)),S);return y}function Gt(S,s){return function(h,y,_,E,I){const j=2*((S-1)/a.ak(Math.cos(a.ae(he-I))/Math.cos(a.ae(he)))-1),V=Math.acos(_/E),J=2*Ot(j-1,0,a.ae(I/2)),re=Math.min(a.ae(he),V+a.ae(I/2)),ce=Ot(j-1,Math.min(re,V-a.ae(I/2)),re),oe=Math.atan(y/_),be=Math.hypot(y,_);let Ie=h;return Ie+=a.ak(E/be/Math.max(.5,Math.cos(a.ae(I/2)))),Ie+=j*a.ak(Math.cos(oe))/2,Ie-=a.ak(Math.max(1,ce/J/s))/2,Ie}}const ir=Gt(9.314,3);function Pr(S,s){const h=(s.roundZoom?Math.round:Math.floor)(S.zoom+a.ak(S.tileSize/s.tileSize));return Math.max(0,h)}function bt(S,s){const h=S.getCameraFrustum(),y=S.getClippingPlane(),_=S.screenPointToMercatorCoordinate(S.getCameraPoint()),E=a.a1.fromLngLat(S.center,S.elevation);_.z=E.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;const I=S.getCoveringTilesDetailsProvider(),j=I.allowVariableZoom(S,s),V=Pr(S,s),J=s.minzoom||0,re=s.maxzoom!==void 0?s.maxzoom:S.maxZoom,ce=Math.min(Math.max(0,V),re),oe=Math.pow(2,ce),be=[oe*_.x,oe*_.y,0],Ie=[oe*E.x,oe*E.y,0],Ze=Math.hypot(E.x-_.x,E.y-_.y),We=Math.abs(E.z-_.z),Xe=Math.hypot(Ze,We),it=_t=>({zoom:0,x:0,y:0,wrap:_t,fullyVisible:!1}),pt=[],ct=[];if(S.renderWorldCopies&&I.allowWorldCopies())for(let _t=1;_t<=3;_t++)pt.push(it(-_t)),pt.push(it(_t));for(pt.push(it(0));pt.length>0;){const _t=pt.pop(),Ct=_t.x,ft=_t.y;let Dt=_t.fullyVisible;const nr={x:Ct,y:ft,z:_t.zoom},Ht=I.getTileBoundingVolume(nr,_t.wrap,S.elevation,s);if(!Dt){const Lr=nt(h,Ht,y);if(Lr===0)continue;Dt=Lr===2}const Zt=I.distanceToTile2d(_.x,_.y,nr,Ht);let Qt=V;j&&(Qt=(s.calculateTileZoom||ir)(S.zoom+a.ak(S.tileSize/s.tileSize),Zt,We,Xe,S.fov)),Qt=(s.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const Or=Math.min(Qt,re);if(_t.wrap=I.getWrap(E,nr,_t.wrap),_t.zoom>=Or){if(_t.zoom<J)continue;const Lr=ce-_t.zoom,_r=be[0]-.5-(Ct<<Lr),sn=be[1]-.5-(ft<<Lr),Un=s.reparseOverscaled?Math.max(_t.zoom,Qt):_t.zoom;ct.push({tileID:new a.Z(_t.zoom===re?Un:_t.zoom,_t.wrap,_t.zoom,Ct,ft),distanceSq:a.al([Ie[0]-.5-Ct,Ie[1]-.5-ft]),tileDistanceToCamera:Math.sqrt(_r*_r+sn*sn)})}else for(let Lr=0;Lr<4;Lr++)pt.push({zoom:_t.zoom+1,x:(Ct<<1)+Lr%2,y:(ft<<1)+(Lr>>1),wrap:_t.wrap,fullyVisible:Dt})}return ct.sort(((_t,Ct)=>_t.distanceSq-Ct.distanceSq)).map((_t=>_t.tileID))}const Sr=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Mr extends a.E{constructor(s,h,y){super(),this.id=s,this.dispatcher=y,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,E,I,j)=>{const V=new(Mt(E.type))(_,E,I,j);if(V.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${V.id}`);return V})(s,h,y,this),this._tiles={},this._cache=new Ye(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new de,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const h=this._tiles[s];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,h,y){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,h,y)}catch(_){s.state="errored",_.status!==404?this._source.fire(new a.k(_,{tile:s})):this.update(this.transform,this.terrain)}}))}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const y=this._tiles[h];y.upload(s),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((s=>s.tileID)).sort(Nr).map((s=>s.key))}getRenderableIds(s){const h=[];for(const y in this._tiles)this._isIdRenderable(y,s)&&h.push(this._tiles[y]);return s?h.sort(((y,_)=>{const E=y.tileID,I=_.tileID,j=new a.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians),V=new a.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians);return E.overscaledZ-I.overscaledZ||V.y-j.y||V.x-j.x})).map((y=>y.tileID.key)):h.map((y=>y.tileID)).sort(Nr).map((y=>y.key))}hasRenderableParent(s){const h=this.findLoadedParent(s,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(s,h){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(h||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const h in this._tiles)s?this._reloadTile(h,"expired"):this._tiles[h].state!=="errored"&&this._reloadTile(h,"reloading")}}_reloadTile(s,h){return a._(this,void 0,void 0,(function*(){const y=this._tiles[s];y&&(y.state!=="loading"&&(y.state=h),yield this._loadTile(y,s,h))}))}_tileLoaded(s,h,y){s.timeAdded=w.now(),y==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(h,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const h=this.getRenderableIds();for(let _=0;_<h.length;_++){const E=h[_];if(s.neighboringTiles&&s.neighboringTiles[E]){const I=this.getTileByID(E);y(s,I),y(I,s)}}function y(_,E){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let I=E.tileID.canonical.x-_.tileID.canonical.x;const j=E.tileID.canonical.y-_.tileID.canonical.y,V=Math.pow(2,_.tileID.canonical.z),J=E.tileID.key;I===0&&j===0||Math.abs(j)>1||(Math.abs(I)>1&&(Math.abs(I+V)===1?I+=V:Math.abs(I-V)===1&&(I-=V)),E.dem&&_.dem&&(_.dem.backfillBorder(E.dem,I,j),_.neighboringTiles&&_.neighboringTiles[J]&&(_.neighboringTiles[J].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,h,y,_){for(const E in this._tiles){let I=this._tiles[E];if(_[E]||!I.hasData()||I.tileID.overscaledZ<=h||I.tileID.overscaledZ>y)continue;let j=I.tileID;for(;I&&I.tileID.overscaledZ>h+1;){const J=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[J.key],I&&I.hasData()&&(j=J)}let V=j;for(;V.overscaledZ>h;)if(V=V.scaledTo(V.overscaledZ-1),s[V.key]||s[V.canonical.key]){_[j.key]=j;break}}}findLoadedParent(s,h){if(s.key in this._loadedParentTiles){const y=this._loadedParentTiles[s.key];return y&&y.tileID.overscaledZ>=h?y:null}for(let y=s.overscaledZ-1;y>=h;y--){const _=s.scaledTo(y),E=this._getLoadedTile(_);if(E)return E}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const h=this._tiles[s.key];return h&&h.hasData()?h:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const h=Math.ceil(s.width/this._source.tileSize)+1,y=Math.ceil(s.height/this._source.tileSize)+1,_=Math.floor(h*y*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(E)}handleWrapJump(s){const h=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,h){const y={};for(const _ in this._tiles){const E=this._tiles[_];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+h),y[E.tileID.key]=E}this._tiles=y;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(s,h,y,_,E,I){const j={},V={},J=Object.keys(s),re=w.now();for(const ce of J){const oe=s[ce],be=this._tiles[ce];if(!be||be.fadeEndTime!==0&&be.fadeEndTime<=re)continue;const Ie=this.findLoadedParent(oe,h),Ze=this.findLoadedSibling(oe),We=Ie||Ze||null;We&&(this._addTile(We.tileID),j[We.tileID.key]=We.tileID),V[ce]=oe}this._retainLoadedChildren(V,_,y,s);for(const ce in j)s[ce]||(this._coveredTiles[ce]=!0,s[ce]=j[ce]);if(I){const ce={},oe={};for(const be of E)this._tiles[be.key].hasData()?ce[be.key]=be:oe[be.key]=be;for(const be in oe){const Ie=oe[be].children(this._source.maxzoom);this._tiles[Ie[0].key]&&this._tiles[Ie[1].key]&&this._tiles[Ie[2].key]&&this._tiles[Ie[3].key]&&(ce[Ie[0].key]=s[Ie[0].key]=Ie[0],ce[Ie[1].key]=s[Ie[1].key]=Ie[1],ce[Ie[2].key]=s[Ie[2].key]=Ie[2],ce[Ie[3].key]=s[Ie[3].key]=Ie[3],delete oe[be])}for(const be in oe){const Ie=oe[be],Ze=this.findLoadedParent(Ie,this._source.minzoom),We=this.findLoadedSibling(Ie),Xe=Ze||We||null;if(Xe){ce[Xe.tileID.key]=s[Xe.tileID.key]=Xe.tileID;for(const it in ce)ce[it].isChildOf(Xe.tileID)&&delete ce[it]}}for(const be in this._tiles)ce[be]||(this._coveredTiles[be]=!0)}}update(s,h){if(!this._sourceLoaded||this._paused)return;let y;this.transform=s,this.terrain=h,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=s.getVisibleUnwrappedCoordinates(this._source.tileID).map((re=>new a.Z(re.canonical.z,re.wrap,re.canonical.z,re.canonical.x,re.canonical.y))):(y=bt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((re=>this._source.hasTile(re))))):y=[];const _=Pr(s,this._source),E=Math.max(_-Mr.maxOverzooming,this._source.minzoom),I=Math.max(_+Mr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const re={};for(const ce of y)if(ce.canonical.z>this._source.minzoom){const oe=ce.scaledTo(ce.canonical.z-1);re[oe.key]=oe;const be=ce.scaledTo(Math.max(this._source.minzoom,Math.min(ce.canonical.z,5)));re[be.key]=be}y=y.concat(Object.values(re))}const j=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const V=this._updateRetainedTiles(y,_);en(this._source.type)&&this._updateCoveredAndRetainedTiles(V,E,I,_,y,h);for(const re in V)this._tiles[re].clearFadeHold();const J=a.am(this._tiles,V);for(const re of J){const ce=this._tiles[re];ce.hasSymbolBuckets&&!ce.holdingForFade()?ce.setHoldDuration(this.map._fadeDuration):ce.hasSymbolBuckets&&!ce.symbolFadeFinished()||this._removeTile(re)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,h){var y;const _={},E={},I=Math.max(h-Mr.maxOverzooming,this._source.minzoom),j=Math.max(h+Mr.maxUnderzooming,this._source.minzoom),V={};for(const J of s){const re=this._addTile(J);_[J.key]=J,re.hasData()||h<this._source.maxzoom&&(V[J.key]=J)}this._retainLoadedChildren(V,h,j,_);for(const J of s){let re=this._tiles[J.key];if(re.hasData())continue;if(h+1>this._source.maxzoom){const oe=J.children(this._source.maxzoom)[0],be=this.getTile(oe);if(be&&be.hasData()){_[oe.key]=oe;continue}}else{const oe=J.children(this._source.maxzoom);if(_[oe[0].key]&&_[oe[1].key]&&_[oe[2].key]&&_[oe[3].key])continue}let ce=re.wasRequested();for(let oe=J.overscaledZ-1;oe>=I;--oe){const be=J.scaledTo(oe);if(E[be.key])break;if(E[be.key]=!0,re=this.getTile(be),!re&&ce&&(re=this._addTile(be)),re){const Ie=re.hasData();if((Ie||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||ce)&&(_[be.key]=be),ce=re.wasRequested(),Ie)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const h=[];let y,_=this._tiles[s].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){y=this._loadedParentTiles[_.key];break}h.push(_.key);const E=_.scaledTo(_.overscaledZ-1);if(y=this._getLoadedTile(E),y)break;_=E}for(const E of h)this._loadedParentTiles[E]=y}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const h=this._tiles[s].tileID,y=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=y}}_addTile(s){let h=this._tiles[s.key];if(h)return h;h=this._cache.getAndRemove(s),h&&(this._setTileReloadTimer(s.key,h),h.tileID=s,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,h)));const y=h;return h||(h=new yr(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(h,s.key,h.state)),h.uses++,this._tiles[s.key]=h,y||this._source.fire(new a.l("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(s,h){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const y=h.getExpiryTimeout();y&&(this._timers[s]=setTimeout((()=>{this._reloadTile(s,"expired"),delete this._timers[s]}),y))}refreshTiles(s){for(const h in this._tiles)(this._isIdRenderable(h)||this._tiles[h].state=="errored")&&s.some((y=>y.equals(this._tiles[h].tileID.canonical)))&&this._reloadTile(h,"expired")}_removeTile(s){const h=this._tiles[s];h&&(h.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(s){const h=s.sourceDataType;s.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&h==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,h,y){const _=[],E=this.transform;if(!E)return _;const I=E.getCoveringTilesDetailsProvider().allowWorldCopies(),j=y?E.getCameraQueryGeometry(s):s,V=be=>E.screenPointToMercatorCoordinate(be,this.terrain),J=this.transformBbox(s,V,!I),re=this.transformBbox(j,V,!I),ce=this.getIds(),oe=a.a2.fromPoints(re);for(let be=0;be<ce.length;be++){const Ie=this._tiles[ce[be]];if(Ie.holdingForFade())continue;const Ze=I?[Ie.tileID]:[Ie.tileID.unwrapTo(-1),Ie.tileID.unwrapTo(0)],We=Math.pow(2,E.zoom-Ie.tileID.overscaledZ),Xe=h*Ie.queryPadding*a.$/Ie.tileSize/We;for(const it of Ze){const pt=oe.map((ct=>it.getTilePoint(new a.a1(ct.x,ct.y))));if(pt.expandBy(Xe),pt.intersects(Sr)){const ct=J.map((Ct=>it.getTilePoint(Ct))),_t=re.map((Ct=>it.getTilePoint(Ct)));_.push({tile:Ie,tileID:I?it:it.unwrapTo(0),queryGeometry:ct,cameraQueryGeometry:_t,scale:We})}}}return _}transformBbox(s,h,y){let _=s.map(h);if(y){const E=a.a2.fromPoints(s);E.shrinkBy(.001*Math.min(E.width(),E.height()));const I=E.map(h);a.a2.fromPoints(_).covers(I)||(_=_.map((j=>j.x>.5?new a.a1(j.x-1,j.y,j.z):j)))}return _}getVisibleCoordinates(s){const h=this.getRenderableIds(s).map((y=>this._tiles[y].tileID));return this.transform&&this.transform.populateCache(h),h}hasTransition(){if(this._source.hasTransition())return!0;if(en(this._source.type)){const s=w.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=s)return!0}return!1}setFeatureState(s,h,y){this._state.updateState(s=s||"_geojsonTileLayer",h,y)}removeFeatureState(s,h,y){this._state.removeFeatureState(s=s||"_geojsonTileLayer",h,y)}getFeatureState(s,h){return this._state.getState(s=s||"_geojsonTileLayer",h)}setDependencies(s,h,y){const _=this._tiles[s];_&&_.setDependencies(h,y)}reloadTilesForDependencies(s,h){for(const y in this._tiles)this._tiles[y].hasDependency(s,h)&&this._reloadTile(y,"reloading");this._cache.filter((y=>!y.hasDependency(s,h)))}}function Nr(S,s){const h=Math.abs(2*S.wrap)-+(S.wrap<0),y=Math.abs(2*s.wrap)-+(s.wrap<0);return S.overscaledZ-s.overscaledZ||y-h||s.canonical.y-S.canonical.y||s.canonical.x-S.canonical.x}function en(S){return S==="raster"||S==="image"||S==="video"}Mr.maxOverzooming=10,Mr.maxUnderzooming=3;class Vr{constructor(s,h){this.reset(s,h)}reset(s,h){this.points=s||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ah(s,0,1);let h=1,y=this._distances[h];const _=s*this.paddedLength+this.padding;for(;y<_&&h<this._distances.length;)y=this._distances[++h];const E=h-1,I=this._distances[E],j=y-I,V=j>0?(_-I)/j:0;return this.points[E].mult(1-V).add(this.points[h].mult(V))}}function gt(S,s){let h=!0;return S==="always"||S!=="never"&&s!=="never"||(h=!1),h}class xt{constructor(s,h,y){const _=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(s/y),this.yCellCount=Math.ceil(h/y);for(let I=0;I<this.xCellCount*this.yCellCount;I++)_.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=h,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,h,y,_,E){this._forEachCell(h,y,_,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(_),this.bboxes.push(E)}insertCircle(s,h,y,_){this._forEachCell(h-_,y-_,h+_,y+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(h),this.circles.push(y),this.circles.push(_)}_insertBoxCell(s,h,y,_,E,I){this.boxCells[E].push(I)}_insertCircleCell(s,h,y,_,E,I){this.circleCells[E].push(I)}_query(s,h,y,_,E,I,j){if(y<0||s>this.width||_<0||h>this.height)return[];const V=[];if(s<=0&&h<=0&&this.width<=y&&this.height<=_){if(E)return[{key:null,x1:s,y1:h,x2:y,y2:_}];for(let J=0;J<this.boxKeys.length;J++)V.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const re=this.circles[3*J],ce=this.circles[3*J+1],oe=this.circles[3*J+2];V.push({key:this.circleKeys[J],x1:re-oe,y1:ce-oe,x2:re+oe,y2:ce+oe})}}else this._forEachCell(s,h,y,_,this._queryCell,V,{hitTest:E,overlapMode:I,seenUids:{box:{},circle:{}}},j);return V}query(s,h,y,_){return this._query(s,h,y,_,!1,null)}hitTest(s,h,y,_,E,I){return this._query(s,h,y,_,!0,E,I).length>0}hitTestCircle(s,h,y,_,E){const I=s-y,j=s+y,V=h-y,J=h+y;if(j<0||I>this.width||J<0||V>this.height)return!1;const re=[];return this._forEachCell(I,V,j,J,this._queryCellCircle,re,{hitTest:!0,overlapMode:_,circle:{x:s,y:h,radius:y},seenUids:{box:{},circle:{}}},E),re.length>0}_queryCell(s,h,y,_,E,I,j,V){const{seenUids:J,hitTest:re,overlapMode:ce}=j,oe=this.boxCells[E];if(oe!==null){const Ie=this.bboxes;for(const Ze of oe)if(!J.box[Ze]){J.box[Ze]=!0;const We=4*Ze,Xe=this.boxKeys[Ze];if(s<=Ie[We+2]&&h<=Ie[We+3]&&y>=Ie[We+0]&&_>=Ie[We+1]&&(!V||V(Xe))&&(!re||!gt(ce,Xe.overlapMode))&&(I.push({key:Xe,x1:Ie[We],y1:Ie[We+1],x2:Ie[We+2],y2:Ie[We+3]}),re))return!0}}const be=this.circleCells[E];if(be!==null){const Ie=this.circles;for(const Ze of be)if(!J.circle[Ze]){J.circle[Ze]=!0;const We=3*Ze,Xe=this.circleKeys[Ze];if(this._circleAndRectCollide(Ie[We],Ie[We+1],Ie[We+2],s,h,y,_)&&(!V||V(Xe))&&(!re||!gt(ce,Xe.overlapMode))){const it=Ie[We],pt=Ie[We+1],ct=Ie[We+2];if(I.push({key:Xe,x1:it-ct,y1:pt-ct,x2:it+ct,y2:pt+ct}),re)return!0}}}return!1}_queryCellCircle(s,h,y,_,E,I,j,V){const{circle:J,seenUids:re,overlapMode:ce}=j,oe=this.boxCells[E];if(oe!==null){const Ie=this.bboxes;for(const Ze of oe)if(!re.box[Ze]){re.box[Ze]=!0;const We=4*Ze,Xe=this.boxKeys[Ze];if(this._circleAndRectCollide(J.x,J.y,J.radius,Ie[We+0],Ie[We+1],Ie[We+2],Ie[We+3])&&(!V||V(Xe))&&!gt(ce,Xe.overlapMode))return I.push(!0),!0}}const be=this.circleCells[E];if(be!==null){const Ie=this.circles;for(const Ze of be)if(!re.circle[Ze]){re.circle[Ze]=!0;const We=3*Ze,Xe=this.circleKeys[Ze];if(this._circlesCollide(Ie[We],Ie[We+1],Ie[We+2],J.x,J.y,J.radius)&&(!V||V(Xe))&&!gt(ce,Xe.overlapMode))return I.push(!0),!0}}}_forEachCell(s,h,y,_,E,I,j,V){const J=this._convertToXCellCoord(s),re=this._convertToYCellCoord(h),ce=this._convertToXCellCoord(y),oe=this._convertToYCellCoord(_);for(let be=J;be<=ce;be++)for(let Ie=re;Ie<=oe;Ie++)if(E.call(this,s,h,y,_,this.xCellCount*Ie+be,I,j,V))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,h,y,_,E,I){const j=_-s,V=E-h,J=y+I;return J*J>j*j+V*V}_circleAndRectCollide(s,h,y,_,E,I,j){const V=(I-_)/2,J=Math.abs(s-(_+V));if(J>V+y)return!1;const re=(j-E)/2,ce=Math.abs(h-(E+re));if(ce>re+y)return!1;if(J<=V||ce<=re)return!0;const oe=J-V,be=ce-re;return oe*oe+be*be<=y*y}}function Wt(S,s,h){const y=a.L();if(!S){const{vecSouth:ce,vecEast:oe}=me(s),be=d();be[0]=oe[0],be[1]=oe[1],be[2]=ce[0],be[3]=ce[1],_=be,(re=(I=(E=be)[0])*(J=E[3])-(V=E[2])*(j=E[1]))&&(_[0]=J*(re=1/re),_[1]=-j*re,_[2]=-V*re,_[3]=I*re),y[0]=be[0],y[1]=be[1],y[4]=be[2],y[5]=be[3]}var _,E,I,j,V,J,re;return a.N(y,y,[1/h,1/h,1]),y}function ne(S,s,h,y){if(S){const _=a.L();if(!s){const{vecSouth:E,vecEast:I}=me(h);_[0]=I[0],_[1]=I[1],_[4]=E[0],_[5]=E[1]}return a.N(_,_,[y,y,1]),_}return h.pixelsToClipSpaceMatrix}function me(S){const s=Math.cos(S.rollInRadians),h=Math.sin(S.rollInRadians),y=Math.cos(S.pitchInRadians),_=Math.cos(S.bearingInRadians),E=Math.sin(S.bearingInRadians),I=a.ar();I[0]=-_*y*h-E*s,I[1]=-E*y*h+_*s;const j=a.as(I);j<1e-9?a.at(I):a.au(I,I,1/j);const V=a.ar();V[0]=_*y*s-E*h,V[1]=E*y*s+_*h;const J=a.as(V);return J<1e-9?a.at(V):a.au(V,V,1/J),{vecEast:V,vecSouth:I}}function qe(S,s,h,y){let _;y?(_=[S,s,y(S,s),1],a.aw(_,_,h)):(_=[S,s,0,1],Mi(_,_,h));const E=_[3];return{point:new a.P(_[0]/E,_[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function je(S,s){return .5+S/s*.5}function jt(S,s){return S.x>=-s[0]&&S.x<=s[0]&&S.y>=-s[1]&&S.y<=s[1]}function Jt(S,s,h,y,_,E,I,j,V,J,re,ce,oe){const be=h?S.textSizeData:S.iconSizeData,Ie=a.an(be,s.transform.zoom),Ze=[256/s.width*2+1,256/s.height*2+1],We=h?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;We.clear();const Xe=S.lineVertexArray,it=h?S.text.placedSymbolArray:S.icon.placedSymbolArray,pt=s.transform.width/s.transform.height;let ct=!1;for(let _t=0;_t<it.length;_t++){const Ct=it.get(_t);if(Ct.hidden||Ct.writingMode===a.ao.vertical&&!ct){vi(Ct.numGlyphs,We);continue}ct=!1;const ft=new a.P(Ct.anchorX,Ct.anchorY),Dt={getElevation:oe,pitchedLabelPlaneMatrix:y,lineVertexArray:Xe,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:ft,unwrappedTileID:V,width:J,height:re,translation:ce},nr=Rn(Ct.anchorX,Ct.anchorY,Dt);if(!jt(nr.point,Ze)){vi(Ct.numGlyphs,We);continue}const Ht=je(s.transform.cameraToCenterDistance,nr.signedDistanceFromCamera),Zt=a.ap(be,Ie,Ct),Qt=E?Zt*s.transform.getPitchedTextCorrection(Ct.anchorX,Ct.anchorY,V)/Ht:Zt*Ht,Or=Vt({projectionContext:Dt,pitchedLabelPlaneMatrixInverse:_,symbol:Ct,fontSize:Qt,flip:!1,keepUpright:I,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:We,aspectRatio:pt,rotateToLine:j});ct=Or.useVertical,(Or.notEnoughRoom||ct||Or.needsFlipping&&Vt({projectionContext:Dt,pitchedLabelPlaneMatrixInverse:_,symbol:Ct,fontSize:Qt,flip:!0,keepUpright:I,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:We,aspectRatio:pt,rotateToLine:j}).notEnoughRoom)&&vi(Ct.numGlyphs,We)}h?S.text.dynamicLayoutVertexBuffer.updateData(We):S.icon.dynamicLayoutVertexBuffer.updateData(We)}function Tr(S,s,h,y,_,E,I,j){const V=E.glyphStartIndex+E.numGlyphs,J=E.lineStartIndex,re=E.lineStartIndex+E.lineLength,ce=s.getoffsetX(E.glyphStartIndex),oe=s.getoffsetX(V-1),be=Li(S*ce,h,y,_,E.segment,J,re,j,I);if(!be)return null;const Ie=Li(S*oe,h,y,_,E.segment,J,re,j,I);return Ie?j.projectionCache.anyProjectionOccluded?null:{first:be,last:Ie}:null}function zr(S,s,h,y){return S===a.ao.horizontal&&Math.abs(h.y-s.y)>Math.abs(h.x-s.x)*y?{useVertical:!0}:(S===a.ao.vertical?s.y<h.y:s.x>h.x)?{needsFlipping:!0}:null}function Vt(S){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:h,symbol:y,fontSize:_,flip:E,keepUpright:I,glyphOffsetArray:j,dynamicLayoutVertexArray:V,aspectRatio:J,rotateToLine:re}=S,ce=_/24,oe=y.lineOffsetX*ce,be=y.lineOffsetY*ce;let Ie;if(y.numGlyphs>1){const Ze=y.glyphStartIndex+y.numGlyphs,We=y.lineStartIndex,Xe=y.lineStartIndex+y.lineLength,it=Tr(ce,j,oe,be,E,y,re,s);if(!it)return{notEnoughRoom:!0};const pt=vn(it.first.point.x,it.first.point.y,s,h),ct=vn(it.last.point.x,it.last.point.y,s,h);if(I&&!E){const _t=zr(y.writingMode,pt,ct,J);if(_t)return _t}Ie=[it.first];for(let _t=y.glyphStartIndex+1;_t<Ze-1;_t++){const Ct=Li(ce*j.getoffsetX(_t),oe,be,E,y.segment,We,Xe,s,re);if(!Ct)return{notEnoughRoom:!0};Ie.push(Ct)}Ie.push(it.last)}else{if(I&&!E){const We=Sn(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,Xe=y.lineStartIndex+y.segment+1,it=new a.P(s.lineVertexArray.getx(Xe),s.lineVertexArray.gety(Xe)),pt=Sn(it.x,it.y,s),ct=pt.signedDistanceFromCamera>0?pt.point:Ir(s.tileAnchorPoint,it,We,1,s),_t=vn(We.x,We.y,s,h),Ct=vn(ct.x,ct.y,s,h),ft=zr(y.writingMode,_t,Ct,J);if(ft)return ft}const Ze=Li(ce*j.getoffsetX(y.glyphStartIndex),oe,be,E,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,s,re);if(!Ze||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ie=[Ze]}for(const Ze of Ie)a.av(V,Ze.point,Ze.angle);return{}}function Ir(S,s,h,y,_){const E=S.add(S.sub(s)._unit()),I=Sn(E.x,E.y,_).point,j=h.sub(I);return h.add(j._mult(y/j.mag()))}function Dr(S,s,h){const y=s.projectionCache;if(y.projections[S])return y.projections[S];const _=new a.P(s.lineVertexArray.getx(S),s.lineVertexArray.gety(S)),E=Sn(_.x,_.y,s);if(E.signedDistanceFromCamera>0)return y.projections[S]=E.point,y.anyProjectionOccluded=y.anyProjectionOccluded||E.isOccluded,E.point;const I=S-h.direction;return Ir(h.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(I),s.lineVertexArray.gety(I)),_,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,s)}function Sn(S,s,h){const y=S+h.translation[0],_=s+h.translation[1];let E;return h.pitchWithMap?(E=qe(y,_,h.pitchedLabelPlaneMatrix,h.getElevation),E.isOccluded=!1):(E=h.transform.projectTileCoordinates(y,_,h.unwrappedTileID,h.getElevation),E.point.x=(.5*E.point.x+.5)*h.width,E.point.y=(.5*-E.point.y+.5)*h.height),E}function vn(S,s,h,y){if(h.pitchWithMap){const _=[S,s,0,1];return a.aw(_,_,y),h.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],h.unwrappedTileID,h.getElevation).point}return{x:S/h.width*2-1,y:1-s/h.height*2}}function Rn(S,s,h){return h.transform.projectTileCoordinates(S,s,h.unwrappedTileID,h.getElevation)}function $r(S,s,h){return S._unit()._perp()._mult(s*h)}function Ii(S,s,h,y,_,E,I,j,V){if(j.projectionCache.offsets[S])return j.projectionCache.offsets[S];const J=h.add(s);if(S+V.direction<y||S+V.direction>=_)return j.projectionCache.offsets[S]=J,J;const re=Dr(S+V.direction,j,V),ce=$r(re.sub(h),I,V.direction),oe=h.add(ce),be=re.add(ce);return j.projectionCache.offsets[S]=a.ax(E,J,oe,be)||J,j.projectionCache.offsets[S]}function Li(S,s,h,y,_,E,I,j,V){const J=y?S-s:S+s;let re=J>0?1:-1,ce=0;y&&(re*=-1,ce=Math.PI),re<0&&(ce+=Math.PI);let oe,be=re>0?E+_:E+_+1;j.projectionCache.cachedAnchorPoint?oe=j.projectionCache.cachedAnchorPoint:(oe=Sn(j.tileAnchorPoint.x,j.tileAnchorPoint.y,j).point,j.projectionCache.cachedAnchorPoint=oe);let Ie,Ze,We=oe,Xe=oe,it=0,pt=0;const ct=Math.abs(J),_t=[];let Ct;for(;it+pt<=ct;){if(be+=re,be<E||be>=I)return null;it+=pt,Xe=We,Ze=Ie;const nr={absOffsetX:ct,direction:re,distanceFromAnchor:it,previousVertex:Xe};if(We=Dr(be,j,nr),h===0)_t.push(Xe),Ct=We.sub(Xe);else{let Ht;const Zt=We.sub(Xe);Ht=Zt.mag()===0?$r(Dr(be+re,j,nr).sub(We),h,re):$r(Zt,h,re),Ze||(Ze=Xe.add(Ht)),Ie=Ii(be,Ht,We,E,I,Ze,h,j,nr),_t.push(Ze),Ct=Ie.sub(Ze)}pt=Ct.mag()}const ft=Ct._mult((ct-it)/pt)._add(Ze||Xe),Dt=ce+Math.atan2(We.y-Xe.y,We.x-Xe.x);return _t.push(ft),{point:ft,angle:V?Dt:0,path:_t}}const Ji=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function vi(S,s){for(let h=0;h<S;h++){const y=s.length;s.resize(y+4),s.float32.set(Ji,3*y)}}function Mi(S,s,h){const y=s[0],_=s[1];return S[0]=h[0]*y+h[4]*_+h[12],S[1]=h[1]*y+h[5]*_+h[13],S[3]=h[3]*y+h[7]*_+h[15],S}const ni=100;class Qi{constructor(s,h=new xt(s.width+200,s.height+200,25),y=new xt(s.width+200,s.height+200,25)){this.transform=s,this.grid=h,this.ignoredGrid=y,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ni,this.screenBottomBoundary=s.height+ni,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,h,y,_,E,I,j,V,J,re,ce,oe){const be=this.projectAndGetPerspectiveRatio(s.anchorPointX+V[0],s.anchorPointY+V[1],E,re,oe),Ie=y*be.perspectiveRatio;let Ze;if(I||j)Ze=this._projectCollisionBox(s,Ie,_,E,I,j,V,be,re,ce,oe);else{const Ct=be.x+(ce?ce.x*Ie:0),ft=be.y+(ce?ce.y*Ie:0);Ze={allPointsOccluded:!1,box:[Ct+s.x1*Ie,ft+s.y1*Ie,Ct+s.x2*Ie,ft+s.y2*Ie]}}const[We,Xe,it,pt]=Ze.box,ct=I?Ze.allPointsOccluded:be.isOccluded;let _t=ct;return _t||(_t=be.perspectiveRatio<this.perspectiveRatioCutoff),_t||(_t=!this.isInsideGrid(We,Xe,it,pt)),_t||h!=="always"&&this.grid.hitTest(We,Xe,it,pt,h,J)?{box:[We,Xe,it,pt],placeable:!1,offscreen:!1,occluded:ct}:{box:[We,Xe,it,pt],placeable:!0,offscreen:this.isOffscreen(We,Xe,it,pt),occluded:ct}}placeCollisionCircles(s,h,y,_,E,I,j,V,J,re,ce,oe,be,Ie){const Ze=[],We=new a.P(h.anchorX,h.anchorY),Xe=this.getPerspectiveRatio(We.x,We.y,I,Ie),it=(J?E*this.transform.getPitchedTextCorrection(h.anchorX,h.anchorY,I)/Xe:E*Xe)/a.aB,pt={getElevation:Ie,pitchedLabelPlaneMatrix:j,lineVertexArray:y,pitchWithMap:J,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:We,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:be},ct=Tr(it,_,h.lineOffsetX*it,h.lineOffsetY*it,!1,h,!1,pt);let _t=!1,Ct=!1,ft=!0;if(ct){const Dt=.5*ce*Xe+oe,nr=new a.P(-100,-100),Ht=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new Vr,Qt=ct.first,Or=ct.last;let Lr=[];for(let Un=Qt.path.length-1;Un>=1;Un--)Lr.push(Qt.path[Un]);for(let Un=1;Un<Or.path.length;Un++)Lr.push(Or.path[Un]);const _r=2.5*Dt;if(J){const Un=this.projectPathToScreenSpace(Lr,pt);Lr=Un.some((li=>li.signedDistanceFromCamera<=0))?[]:Un.map((li=>li.point))}let sn=[];if(Lr.length>0){const Un=Lr[0].clone(),li=Lr[0].clone();for(let Ri=1;Ri<Lr.length;Ri++)Un.x=Math.min(Un.x,Lr[Ri].x),Un.y=Math.min(Un.y,Lr[Ri].y),li.x=Math.max(li.x,Lr[Ri].x),li.y=Math.max(li.y,Lr[Ri].y);sn=Un.x>=nr.x&&li.x<=Ht.x&&Un.y>=nr.y&&li.y<=Ht.y?[Lr]:li.x<nr.x||Un.x>Ht.x||li.y<nr.y||Un.y>Ht.y?[]:a.ay([Lr],nr.x,nr.y,Ht.x,Ht.y)}for(const Un of sn){Zt.reset(Un,.25*Dt);let li=0;li=Zt.length<=.5*Dt?1:Math.ceil(Zt.paddedLength/_r)+1;for(let Ri=0;Ri<li;Ri++){const wi=Ri/Math.max(li-1,1),Ai=Zt.lerp(wi),ji=Ai.x+ni,kn=Ai.y+ni;Ze.push(ji,kn,Dt,0);const Pi=ji-Dt,Aa=kn-Dt,Za=ji+Dt,mo=kn+Dt;if(ft=ft&&this.isOffscreen(Pi,Aa,Za,mo),Ct=Ct||this.isInsideGrid(Pi,Aa,Za,mo),s!=="always"&&this.grid.hitTestCircle(ji,kn,Dt,s,re)&&(_t=!0,!V))return{circles:[],offscreen:!1,collisionDetected:_t}}}}return{circles:!V&&_t||!Ct||Xe<this.perspectiveRatioCutoff?[]:Ze,offscreen:ft,collisionDetected:_t}}projectPathToScreenSpace(s,h){const y=(function(_,E){const I=a.L();return a.aq(I,E.pitchedLabelPlaneMatrix),_.map((j=>{const V=qe(j.x,j.y,I,E.getElevation),J=E.transform.projectTileCoordinates(V.point.x,V.point.y,E.unwrappedTileID,E.getElevation);return J.point.x=(.5*J.point.x+.5)*E.width,J.point.y=(.5*-J.point.y+.5)*E.height,J}))})(s,h);return(function(_){let E=0,I=0,j=0,V=0;for(let J=0;J<_.length;J++)_[J].isOccluded?(j=J+1,V=0):(V++,V>I&&(I=V,E=j));return _.slice(E,E+I)})(y)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[],y=new a.a2;for(const ce of s){const oe=new a.P(ce.x+ni,ce.y+ni);y.extend(oe),h.push(oe)}const{minX:_,minY:E,maxX:I,maxY:j}=y,V=this.grid.query(_,E,I,j).concat(this.ignoredGrid.query(_,E,I,j)),J={},re={};for(const ce of V){const oe=ce.key;if(J[oe.bucketInstanceId]===void 0&&(J[oe.bucketInstanceId]={}),J[oe.bucketInstanceId][oe.featureIndex])continue;const be=[new a.P(ce.x1,ce.y1),new a.P(ce.x2,ce.y1),new a.P(ce.x2,ce.y2),new a.P(ce.x1,ce.y2)];a.az(h,be)&&(J[oe.bucketInstanceId][oe.featureIndex]=!0,re[oe.bucketInstanceId]===void 0&&(re[oe.bucketInstanceId]=[]),re[oe.bucketInstanceId].push(oe.featureIndex))}return re}insertCollisionBox(s,h,y,_,E,I){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:E,collisionGroupID:I,overlapMode:h},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,h,y,_,E,I){const j=y?this.ignoredGrid:this.grid,V={bucketInstanceId:_,featureIndex:E,collisionGroupID:I,overlapMode:h};for(let J=0;J<s.length;J+=4)j.insertCircle(V,s[J],s[J+1],s[J+2])}projectAndGetPerspectiveRatio(s,h,y,_,E){if(E){let I;_?(I=[s,h,_(s,h),1],a.aw(I,I,E)):(I=[s,h,0,1],Mi(I,I,E));const j=I[3];return{x:(I[0]/j+1)/2*this.transform.width+ni,y:(-I[1]/j+1)/2*this.transform.height+ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j*.5,isOccluded:!1,signedDistanceFromCamera:j}}{const I=this.transform.projectTileCoordinates(s,h,y,_);return{x:(I.point.x+1)/2*this.transform.width+ni,y:(1-I.point.y)/2*this.transform.height+ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5,isOccluded:I.isOccluded,signedDistanceFromCamera:I.signedDistanceFromCamera}}}getPerspectiveRatio(s,h,y,_){const E=this.transform.projectTileCoordinates(s,h,y,_);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(s,h,y,_){return y<ni||s>=this.screenRightBoundary||_<ni||h>this.screenBottomBoundary}isInsideGrid(s,h,y,_){return y>=0&&s<this.gridRightBoundary&&_>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const s=a.ag([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,h,y,_,E,I,j,V,J,re,ce){let oe=1,be=0,Ie=0,Ze=1;const We=s.anchorPointX+j[0],Xe=s.anchorPointY+j[1];if(I&&!E){const Lr=this.projectAndGetPerspectiveRatio(We+1,Xe,_,J,ce),_r=Lr.x-V.x,sn=Math.atan((Lr.y-V.y)/_r)+(_r<0?Math.PI:0),Un=Math.sin(sn),li=Math.cos(sn);oe=li,be=Un,Ie=-Un,Ze=li}else if(!I&&E){const Lr=me(this.transform);oe=Lr.vecEast[0],be=Lr.vecEast[1],Ie=Lr.vecSouth[0],Ze=Lr.vecSouth[1]}let it=V.x,pt=V.y,ct=h;E&&(it=We,pt=Xe,ct=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),ct*=this.transform.getPitchedTextCorrection(We,Xe,_),re||(ct*=a.ah(.5+V.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),re&&(it+=oe*re.x*ct+Ie*re.y*ct,pt+=be*re.x*ct+Ze*re.y*ct);const _t=s.x1*ct,Ct=s.x2*ct,ft=(_t+Ct)/2,Dt=s.y1*ct,nr=s.y2*ct,Ht=(Dt+nr)/2,Zt=[{offsetX:_t,offsetY:Dt},{offsetX:ft,offsetY:Dt},{offsetX:Ct,offsetY:Dt},{offsetX:Ct,offsetY:Ht},{offsetX:Ct,offsetY:nr},{offsetX:ft,offsetY:nr},{offsetX:_t,offsetY:nr},{offsetX:_t,offsetY:Ht}];let Qt=[];for(const{offsetX:Lr,offsetY:_r}of Zt)Qt.push(new a.P(it+oe*Lr+Ie*_r,pt+be*Lr+Ze*_r));let Or=!1;if(E){const Lr=Qt.map((_r=>this.projectAndGetPerspectiveRatio(_r.x,_r.y,_,J,ce)));Or=Lr.some((_r=>!_r.isOccluded)),Qt=Lr.map((_r=>new a.P(_r.x,_r.y)))}else Or=!0;return{box:a.aA(Qt),allPointsOccluded:!Or}}}class ea{constructor(s,h,y,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?h:-h))):_&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class hn{constructor(s,h,y,_,E){this.text=new ea(s?s.text:null,h,y,E),this.icon=new ea(s?s.icon:null,h,_,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Jn{constructor(s,h,y){this.text=s,this.icon=h,this.skipFade=y}}class qi{constructor(s,h,y,_,E){this.bucketInstanceId=s,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=_,this.tileID=E}}class ya{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const h=++this.maxGroupID;this.collisionGroups[s]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[s]}}function Di(S,s,h,y,_){const{horizontalAlign:E,verticalAlign:I}=a.aH(S);return new a.P(-(E-.5)*s+y[0]*_,-(I-.5)*h+y[1]*_)}class hi{constructor(s,h,y,_,E){this.transform=s.clone(),this.terrain=h,this.collisionIndex=new Qi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ya(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const h=this.terrain;return h?(y,_)=>h.getElevation(s,y,_):null}getBucketParts(s,h,y,_){const E=y.getBucket(h),I=y.latestFeatureIndex;if(!E||!I||h.id!==E.layerIds[0])return;const j=y.collisionBoxArray,V=E.layers[0].layout,J=E.layers[0].paint,re=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),ce=y.tileSize/a.$,oe=y.tileID.toUnwrapped(),be=V.get("text-rotation-alignment")==="map",Ie=a.aC(y,1,this.transform.zoom),Ze=a.aD(this.collisionIndex.transform,y,J.get("text-translate"),J.get("text-translate-anchor")),We=a.aD(this.collisionIndex.transform,y,J.get("icon-translate"),J.get("icon-translate-anchor")),Xe=Wt(be,this.transform,Ie);this.retainedQueryData[E.bucketInstanceId]=new qi(E.bucketInstanceId,I,E.sourceLayerIndex,E.index,y.tileID);const it={bucket:E,layout:V,translationText:Ze,translationIcon:We,unwrappedTileID:oe,pitchedLabelPlaneMatrix:Xe,scale:re,textPixelRatio:ce,holdingForFade:y.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.an(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(_)for(const pt of E.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:_t,symbolInstanceEnd:Ct}=pt;s.push({sortKey:ct,symbolInstanceStart:_t,symbolInstanceEnd:Ct,parameters:it})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:it})}attemptAnchorPlacement(s,h,y,_,E,I,j,V,J,re,ce,oe,be,Ie,Ze,We,Xe,it,pt,ct){const _t=a.aE[s.textAnchor],Ct=[s.textOffset0,s.textOffset1],ft=Di(_t,y,_,Ct,E),Dt=this.collisionIndex.placeCollisionBox(h,oe,V,J,re,j,I,We,ce.predicate,pt,ft,ct);if((!it||this.collisionIndex.placeCollisionBox(it,oe,V,J,re,j,I,Xe,ce.predicate,pt,ft,ct).placeable)&&Dt.placeable){let nr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(nr=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:Ct,width:y,height:_,anchor:_t,textBoxScale:E,prevAnchor:nr},this.markUsedJustification(Ie,_t,be,Ze),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Ze,be),this.placedOrientations[be.crossTileID]=Ze),{shift:ft,placedGlyphBoxes:Dt}}}placeLayerBucketPart(s,h,y){const{bucket:_,layout:E,translationText:I,translationIcon:j,unwrappedTileID:V,pitchedLabelPlaneMatrix:J,textPixelRatio:re,holdingForFade:ce,collisionBoxArray:oe,partiallyEvaluatedTextSize:be,collisionGroup:Ie}=s.parameters,Ze=E.get("text-optional"),We=E.get("icon-optional"),Xe=a.aF(E,"text-overlap","text-allow-overlap"),it=Xe==="always",pt=a.aF(E,"icon-overlap","icon-allow-overlap"),ct=pt==="always",_t=E.get("text-rotation-alignment")==="map",Ct=E.get("text-pitch-alignment")==="map",ft=E.get("icon-text-fit")!=="none",Dt=E.get("symbol-z-order")==="viewport-y",nr=it&&(ct||!_.hasIconData()||We),Ht=ct&&(it||!_.hasTextData()||Ze);!_.collisionArrays&&oe&&_.deserializeCollisionBoxes(oe);const Zt=this.retainedQueryData[_.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(Zt),Or=this.transform.getFastPathSimpleProjectionMatrix(Zt),Lr=(_r,sn,Un)=>{var li,Ri;if(h[_r.crossTileID])return;if(ce)return void(this.placements[_r.crossTileID]=new Jn(!1,!1,!1));let wi=!1,Ai=!1,ji=!0,kn=null,Pi={box:null,placeable:!1,offscreen:null,occluded:!1},Aa={placeable:!1},Za=null,mo=null,Lo=null,Ls=0,Yc=0,Jc=0;sn.textFeatureIndex?Ls=sn.textFeatureIndex:_r.useRuntimeCollisionCircles&&(Ls=_r.featureIndex),sn.verticalTextFeatureIndex&&(Yc=sn.verticalTextFeatureIndex);const Eh=sn.textBox;if(Eh){const il=go=>{let Do=a.ao.horizontal;if(_.allowVerticalPlacement&&!go&&this.prevPlacement){const Zl=this.prevPlacement.placedOrientations[_r.crossTileID];Zl&&(this.placedOrientations[_r.crossTileID]=Zl,Do=Zl,this.markUsedOrientation(_,Do,_r))}return Do},xu=(go,Do)=>{if(_.allowVerticalPlacement&&_r.numVerticalGlyphVertices>0&&sn.verticalTextBox){for(const Zl of _.writingModes)if(Zl===a.ao.vertical?(Pi=Do(),Aa=Pi):Pi=go(),Pi&&Pi.placeable)break}else Pi=go()},Ds=_r.textAnchorOffsetStartIndex,Qc=_r.textAnchorOffsetEndIndex;if(Qc===Ds){const go=(Do,Zl)=>{const yo=this.collisionIndex.placeCollisionBox(Do,Xe,re,Zt,V,Ct,_t,I,Ie.predicate,Qt,void 0,Or);return yo&&yo.placeable&&(this.markUsedOrientation(_,Zl,_r),this.placedOrientations[_r.crossTileID]=Zl),yo};xu((()=>go(Eh,a.ao.horizontal)),(()=>{const Do=sn.verticalTextBox;return _.allowVerticalPlacement&&_r.numVerticalGlyphVertices>0&&Do?go(Do,a.ao.vertical):{box:null,offscreen:null}})),il(Pi&&Pi.placeable)}else{let go=a.aE[(Ri=(li=this.prevPlacement)===null||li===void 0?void 0:li.variableOffsets[_r.crossTileID])===null||Ri===void 0?void 0:Ri.anchor];const Do=(yo,Cd,Ah)=>{const pc=yo.x2-yo.x1,wu=yo.y2-yo.y1,ef=_r.textBoxScale,ib=ft&&pt==="never"?Cd:null;let Il=null,ab=Xe==="never"?1:2,oy="never";go&&ab++;for(let qp=0;qp<ab;qp++){for(let Vp=Ds;Vp<Qc;Vp++){const tf=_.textAnchorOffsets.get(Vp);if(go&&tf.textAnchor!==go)continue;const mc=this.attemptAnchorPlacement(tf,yo,pc,wu,ef,_t,Ct,re,Zt,V,Ie,oy,_r,_,Ah,I,j,ib,Qt);if(mc&&(Il=mc.placedGlyphBoxes,Il&&Il.placeable))return wi=!0,kn=mc.shift,Il}go?go=null:oy=Xe}return y&&!Il&&(Il={box:this.collisionIndex.placeCollisionBox(Eh,"always",re,Zt,V,Ct,_t,I,Ie.predicate,Qt,void 0,Or).box,offscreen:!1,placeable:!1,occluded:!1}),Il};xu((()=>Do(Eh,sn.iconBox,a.ao.horizontal)),(()=>{const yo=sn.verticalTextBox;return _.allowVerticalPlacement&&(!Pi||!Pi.placeable)&&_r.numVerticalGlyphVertices>0&&yo?Do(yo,sn.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Pi&&(wi=Pi.placeable,ji=Pi.offscreen);const Zl=il(Pi&&Pi.placeable);if(!wi&&this.prevPlacement){const yo=this.prevPlacement.variableOffsets[_r.crossTileID];yo&&(this.variableOffsets[_r.crossTileID]=yo,this.markUsedJustification(_,yo.anchor,_r,Zl))}}}if(Za=Pi,wi=Za&&Za.placeable,ji=Za&&Za.offscreen,_r.useRuntimeCollisionCircles){const il=_.text.placedSymbolArray.get(_r.centerJustifiedTextSymbolIndex),xu=a.ap(_.textSizeData,be,il),Ds=E.get("text-padding");mo=this.collisionIndex.placeCollisionCircles(Xe,il,_.lineVertexArray,_.glyphOffsetArray,xu,V,J,y,Ct,Ie.predicate,_r.collisionCircleDiameter,Ds,I,Qt),mo.circles.length&&mo.collisionDetected&&!y&&a.w("Collisions detected, but collision boxes are not shown"),wi=it||mo.circles.length>0&&!mo.collisionDetected,ji=ji&&mo.offscreen}if(sn.iconFeatureIndex&&(Jc=sn.iconFeatureIndex),sn.iconBox){const il=xu=>this.collisionIndex.placeCollisionBox(xu,pt,re,Zt,V,Ct,_t,j,Ie.predicate,Qt,ft&&kn?kn:void 0,Or);Aa&&Aa.placeable&&sn.verticalIconBox?(Lo=il(sn.verticalIconBox),Ai=Lo.placeable):(Lo=il(sn.iconBox),Ai=Lo.placeable),ji=ji&&Lo.offscreen}const Ch=Ze||_r.numHorizontalGlyphVertices===0&&_r.numVerticalGlyphVertices===0,Bf=We||_r.numIconVertices===0;Ch||Bf?Bf?Ch||(Ai=Ai&&wi):wi=Ai&&wi:Ai=wi=Ai&&wi;const jf=Ai&&Lo.placeable;if(wi&&Za.placeable&&this.collisionIndex.insertCollisionBox(Za.box,Xe,E.get("text-ignore-placement"),_.bucketInstanceId,Aa&&Aa.placeable&&Yc?Yc:Ls,Ie.ID),jf&&this.collisionIndex.insertCollisionBox(Lo.box,pt,E.get("icon-ignore-placement"),_.bucketInstanceId,Jc,Ie.ID),mo&&wi&&this.collisionIndex.insertCollisionCircles(mo.circles,Xe,E.get("text-ignore-placement"),_.bucketInstanceId,Ls,Ie.ID),y&&this.storeCollisionData(_.bucketInstanceId,Un,sn,Za,Lo,mo),_r.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_r.crossTileID]=new Jn((wi||nr)&&!Za?.occluded,(Ai||Ht)&&!Lo?.occluded,ji||_.justReloaded),h[_r.crossTileID]=!0};if(Dt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _r=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let sn=_r.length-1;sn>=0;--sn){const Un=_r[sn];Lr(_.symbolInstances.get(Un),_.collisionArrays[Un],Un)}}else for(let _r=s.symbolInstanceStart;_r<s.symbolInstanceEnd;_r++)Lr(_.symbolInstances.get(_r),_.collisionArrays[_r],_r);_.justReloaded=!1}storeCollisionData(s,h,y,_,E,I){if(y.textBox||y.iconBox){let j,V;this.collisionBoxArrays.has(s)?j=this.collisionBoxArrays.get(s):(j=new Map,this.collisionBoxArrays.set(s,j)),j.has(h)?V=j.get(h):(V={text:null,icon:null},j.set(h,V)),y.textBox&&(V.text=_.box),y.iconBox&&(V.icon=E.box)}if(I){let j=this.collisionCircleArrays[s];j===void 0&&(j=this.collisionCircleArrays[s]=[]);for(let V=0;V<I.circles.length;V+=4)j.push(I.circles[V+0]-ni),j.push(I.circles[V+1]-ni),j.push(I.circles[V+2]),j.push(I.collisionDetected?1:0)}}markUsedJustification(s,h,y,_){let E;E=_===a.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.aG(h)];const I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const j of I)j>=0&&(s.text.placedSymbolArray.get(j).crossTileID=E>=0&&j!==E?0:y.crossTileID)}markUsedOrientation(s,h,y){const _=h===a.ao.horizontal||h===a.ao.horizontalOnly?h:0,E=h===a.ao.vertical?h:0,I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const j of I)s.text.placedSymbolArray.get(j).placedOrientation=_;y.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const _=h?h.symbolFadeChange(s):1,E=h?h.opacities:{},I=h?h.variableOffsets:{},j=h?h.placedOrientations:{};for(const V in this.placements){const J=this.placements[V],re=E[V];re?(this.opacities[V]=new hn(re,_,J.text,J.icon),y=y||J.text!==re.text.placed||J.icon!==re.icon.placed):(this.opacities[V]=new hn(null,_,J.text,J.icon,J.skipFade),y=y||J.text||J.icon)}for(const V in E){const J=E[V];if(!this.opacities[V]){const re=new hn(J,_,!1,!1);re.isHidden()||(this.opacities[V]=re,y=y||J.text.placed||J.icon.placed)}}for(const V in I)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=I[V]);for(const V in j)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=j[V]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:s)}updateLayerOpacities(s,h){const y={};for(const _ of h){const E=_.getBucket(s);E&&_.latestFeatureIndex&&s.id===E.layerIds[0]&&this.updateBucketOpacities(E,_.tileID,y,_.collisionBoxArray)}}updateBucketOpacities(s,h,y,_){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const E=s.layers[0],I=E.layout,j=new hn(null,0,!1,!1,!0),V=I.get("text-allow-overlap"),J=I.get("icon-allow-overlap"),re=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ce=I.get("text-rotation-alignment")==="map",oe=I.get("text-pitch-alignment")==="map",be=I.get("icon-text-fit")!=="none",Ie=new hn(null,0,V&&(J||!s.hasIconData()||I.get("icon-optional")),J&&(V||!s.hasTextData()||I.get("text-optional")),!0);!s.collisionArrays&&_&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(_);const Ze=(Xe,it,pt)=>{for(let ct=0;ct<it/4;ct++)Xe.opacityVertexArray.emplaceBack(pt);Xe.hasVisibleVertices=Xe.hasVisibleVertices||pt!==as},We=this.collisionBoxArrays.get(s.bucketInstanceId);for(let Xe=0;Xe<s.symbolInstances.length;Xe++){const it=s.symbolInstances.get(Xe),{numHorizontalGlyphVertices:pt,numVerticalGlyphVertices:ct,crossTileID:_t}=it;let Ct=this.opacities[_t];y[_t]?Ct=j:Ct||(Ct=Ie,this.opacities[_t]=Ct),y[_t]=!0;const ft=it.numIconVertices>0,Dt=this.placedOrientations[it.crossTileID],nr=Dt===a.ao.vertical,Ht=Dt===a.ao.horizontal||Dt===a.ao.horizontalOnly;if(pt>0||ct>0){const Qt=Wo(Ct.text);Ze(s.text,pt,nr?as:Qt),Ze(s.text,ct,Ht?as:Qt);const Or=Ct.text.isHidden();[it.rightJustifiedTextSymbolIndex,it.centerJustifiedTextSymbolIndex,it.leftJustifiedTextSymbolIndex].forEach((sn=>{sn>=0&&(s.text.placedSymbolArray.get(sn).hidden=Or||nr?1:0)})),it.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(it.verticalPlacedTextSymbolIndex).hidden=Or||Ht?1:0);const Lr=this.variableOffsets[it.crossTileID];Lr&&this.markUsedJustification(s,Lr.anchor,it,Dt);const _r=this.placedOrientations[it.crossTileID];_r&&(this.markUsedJustification(s,"left",it,_r),this.markUsedOrientation(s,_r,it))}if(ft){const Qt=Wo(Ct.icon),Or=!(be&&it.verticalPlacedIconSymbolIndex&&nr);it.placedIconSymbolIndex>=0&&(Ze(s.icon,it.numIconVertices,Or?Qt:as),s.icon.placedSymbolArray.get(it.placedIconSymbolIndex).hidden=Ct.icon.isHidden()),it.verticalPlacedIconSymbolIndex>=0&&(Ze(s.icon,it.numVerticalIconVertices,Or?as:Qt),s.icon.placedSymbolArray.get(it.verticalPlacedIconSymbolIndex).hidden=Ct.icon.isHidden())}const Zt=We&&We.has(Xe)?We.get(Xe):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Qt=s.collisionArrays[Xe];if(Qt){let Or=new a.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let Lr=!0;if(re){const _r=this.variableOffsets[_t];_r?(Or=Di(_r.anchor,_r.width,_r.height,_r.textOffset,_r.textBoxScale),ce&&Or._rotate(oe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Lr=!1}if(Qt.textBox||Qt.verticalTextBox){let _r;Qt.textBox&&(_r=nr),Qt.verticalTextBox&&(_r=Ht),Qa(s.textCollisionBox.collisionVertexArray,Ct.text.placed,!Lr||_r,Zt.text,Or.x,Or.y)}}if(Qt.iconBox||Qt.verticalIconBox){const Lr=!!(!Ht&&Qt.verticalIconBox);let _r;Qt.iconBox&&(_r=Lr),Qt.verticalIconBox&&(_r=!Lr),Qa(s.iconCollisionBox.collisionVertexArray,Ct.icon.placed,_r,Zt.icon,be?Or.x:0,be?Or.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>s}setStale(){this.stale=!0}}function Qa(S,s,h,y,_,E){y&&y.length!==0||(y=[0,0,0,0]);const I=y[0]-ni,j=y[1]-ni,V=y[2]-ni,J=y[3]-ni;S.emplaceBack(s?1:0,h?1:0,_||0,E||0,I,j),S.emplaceBack(s?1:0,h?1:0,_||0,E||0,V,j),S.emplaceBack(s?1:0,h?1:0,_||0,E||0,V,J),S.emplaceBack(s?1:0,h?1:0,_||0,E||0,I,J)}const io=Math.pow(2,25),uu=Math.pow(2,24),Hi=Math.pow(2,17),uc=Math.pow(2,16),$c=Math.pow(2,9),Hs=Math.pow(2,8),ml=Math.pow(2,1);function Wo(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const s=S.placed?1:0,h=Math.floor(127*S.opacity);return h*io+s*uu+h*Hi+s*uc+h*$c+s*Hs+h*ml+s}const as=0;class ia{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,h,y,_,E){const I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(h.getBucketParts(I,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort(((j,V)=>j.sortKey-V.sortKey)));this._currentPartIndex<I.length;)if(h.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,E())return!0;return!1}}class cu{constructor(s,h,y,_,E,I,j,V){this.placement=new hi(s,h,I,j,V),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(s,h,y){const _=w.now(),E=()=>!this._forceFullPlacement&&w.now()-_>2;for(;this._currentPlacementIndex>=0;){const I=h[s[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=j)&&(!I.maxzoom||I.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new ia(I)),this._inProgressLayer.continuePlacement(y[I.source],this.placement,this._showCollisionBoxes,I,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Bl=512/a.$/2;class jl{constructor(s,h,y){this.tileID=s,this.bucketInstanceId=y,this._symbolsByKey={};const _=new Map;for(let E=0;E<h.length;E++){const I=h.get(E),j=I.key,V=_.get(j);V?V.push(I):_.set(j,[I])}for(const[E,I]of _){const j={positions:I.map((V=>({x:Math.floor(V.anchorX*Bl),y:Math.floor(V.anchorY*Bl)}))),crossTileIDs:I.map((V=>V.crossTileID))};if(j.positions.length>128){const V=new a.aI(j.positions.length,16,Uint16Array);for(const{x:J,y:re}of j.positions)V.add(J,re);V.finish(),delete j.positions,j.index=V}this._symbolsByKey[E]=j}}getScaledCoordinates(s,h){const{x:y,y:_,z:E}=this.tileID.canonical,{x:I,y:j,z:V}=h.canonical,J=Bl/Math.pow(2,V-E),re=(j*a.$+s.anchorY)*J,ce=_*a.$*Bl;return{x:Math.floor((I*a.$+s.anchorX)*J-y*a.$*Bl),y:Math.floor(re-ce)}}findMatches(s,h,y){const _=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let E=0;E<s.length;E++){const I=s.get(E);if(I.crossTileID)continue;const j=this._symbolsByKey[I.key];if(!j)continue;const V=this.getScaledCoordinates(I,h);if(j.index){const J=j.index.range(V.x-_,V.y-_,V.x+_,V.y+_).sort();for(const re of J){const ce=j.crossTileIDs[re];if(!y[ce]){y[ce]=!0,I.crossTileID=ce;break}}}else if(j.positions)for(let J=0;J<j.positions.length;J++){const re=j.positions[J],ce=j.crossTileIDs[J];if(Math.abs(re.x-V.x)<=_&&Math.abs(re.y-V.y)<=_&&!y[ce]){y[ce]=!0,I.crossTileID=ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:s})=>s))}}class U{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class te{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const h=Math.round((s-this.lng)/360);if(h!==0)for(const y in this.indexes){const _=this.indexes[y],E={};for(const I in _){const j=_[I];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+h),E[j.tileID.key]=j}this.indexes[y]=E}this.lng=s}addBucket(s,h,y){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let E=0;E<h.symbolInstances.length;E++)h.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const _=this.usedCrossTileIDs[s.overscaledZ];for(const E in this.indexes){const I=this.indexes[E];if(Number(E)>s.overscaledZ)for(const j in I){const V=I[j];V.tileID.isChildOf(s)&&V.findMatches(h.symbolInstances,s,_)}else{const j=I[s.scaledTo(Number(E)).key];j&&j.findMatches(h.symbolInstances,s,_)}}for(let E=0;E<h.symbolInstances.length;E++){const I=h.symbolInstances.get(E);I.crossTileID||(I.crossTileID=y.generate(),_[I.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new jl(s,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(s,h){for(const y of h.getCrossTileIDsLists())for(const _ of y)delete this.usedCrossTileIDs[s][_]}removeStaleBuckets(s){let h=!1;for(const y in this.indexes){const _=this.indexes[y];for(const E in _)s[_[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,_[E]),delete _[E],h=!0)}return h}}class Re{constructor(){this.layerIndexes={},this.crossTileIDs=new U,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,h,y){let _=this.layerIndexes[s.id];_===void 0&&(_=this.layerIndexes[s.id]=new te);let E=!1;const I={};_.handleWrapJump(y);for(const j of h){const V=j.getBucket(s);V&&s.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(j.tileID,V,this.crossTileIDs)&&(E=!0),I[V.bucketInstanceId]=!0)}return _.removeStaleBuckets(I)&&(E=!0),E}pruneUnusedLayers(s){const h={};s.forEach((y=>{h[y]=!0}));for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}var dt="void main() {fragColor=vec4(1.0);}";const St={prelude:yt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:yt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:yt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yt(dt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:yt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:yt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yt(dt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:yt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:yt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:yt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:yt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:yt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:yt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yt(S,s){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=s.match(/in ([\w]+) ([\w]+)/g),_=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=E?E.concat(_):_,j={};return{fragmentSource:S=S.replace(h,((V,J,re,ce,oe)=>(j[oe]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
in ${re} ${ce} ${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = u_${oe};
#endif
`))),vertexSource:s=s.replace(h,((V,J,re,ce,oe)=>{const be=ce==="float"?"vec2":"vec4",Ie=oe.match(/color/)?"color":be;return j[oe]?J==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${re} ${be} a_${oe};
out ${re} ${ce} ${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${Ie}(a_${oe}, u_${oe}_t);
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:J==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${re} ${be} a_${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = a_${oe};
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = unpack_mix_${Ie}(a_${oe}, u_${oe}_t);
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`})),staticAttributes:y,staticUniforms:I}}class Bt{constructor(s,h,y){this.vertexBuffer=s,this.indexBuffer=h,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var xr=a.aJ([{name:"a_pos",type:"Int16",components:2}]);const Ar="#define PROJECTION_MERCATOR",jr="mercator";class fr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return jr}get shaderDefine(){return Ar}get shaderPreludeCode(){return St.projectionMercator}get vertexShaderPreludeCode(){return St.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,h,y,_,E){if(this._cachedMesh)return this._cachedMesh;const I=new a.aL;I.emplaceBack(0,0),I.emplaceBack(a.$,0),I.emplaceBack(0,a.$),I.emplaceBack(a.$,a.$);const j=s.createVertexBuffer(I,xr.members),V=a.aM.simpleSegment(0,0,4,2),J=new a.aN;J.emplaceBack(1,0,2),J.emplaceBack(1,2,3);const re=s.createIndexBuffer(J);return this._cachedMesh=new Bt(j,re,V),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Rr{constructor(s=0,h=0,y=0,_=0){if(isNaN(s)||s<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=h,this.left=y,this.right=_}interpolate(s,h,y){return h.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,h.top,y)),h.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,h.bottom,y)),h.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,h.left,y)),h.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,h.right,y)),this}getCenter(s,h){const y=a.ah((this.left+s-this.right)/2,0,s),_=a.ah((this.top+h-this.bottom)/2,0,h);return new a.P(y,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Rr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Pn(S,s){if(!S.renderWorldCopies||S.lngRange)return;const h=s.lng-S.center.lng;s.lng+=h>180?-360:h<-180?360:0}function bi(S){return Math.max(0,Math.floor(S))}class dn{constructor(s,h,y,_,E,I){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=I===void 0||!!I,this._minZoom=h||0,this._maxZoom=y||22,this._minPitch=_??0,this._maxPitch=E??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=bi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Rr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,h,y){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=bi(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Rr(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!y&&s.autoCalculateNearFarZ,h&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const h=a.aO(s,-180,180)*Math.PI/180;var y,_,E,I,j,V,J,re,ce;this._bearingInRadians!==h&&(this._unmodified=!1,this._bearingInRadians=h,this._calcMatrices(),this._rotationMatrix=d(),y=this._rotationMatrix,E=-this._bearingInRadians,I=(_=this._rotationMatrix)[0],j=_[1],V=_[2],J=_[3],re=Math.sin(E),ce=Math.cos(E),y[0]=I*ce+V*re,y[1]=j*ce+J*re,y[2]=I*-re+V*ce,y[3]=j*-re+J*ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const h=a.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==h&&(this._unmodified=!1,this._pitchInRadians=h,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const h=s/180*Math.PI;this._rollInRadians!==h&&(this._unmodified=!1,this._rollInRadians=h,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(s){s=a.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const h=this.getConstrained(this._center,s).zoom;this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this._tileZoom=Math.max(0,Math.floor(h)),this._scale=a.af(h),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,h){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=h,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,h,y){this._unmodified=!1,this._edgeInsets.interpolate(s,h,y),this._constrain(),this._calcMatrices()}resize(s,h,y=!0){this._width=s,this._height=h,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Pt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(s,h){return this._callbacks.getConstrained(s,h)}getCameraQueryGeometry(s,h){if(h.length===1)return[h[0],s];{const{minX:y,minY:_,maxX:E,maxY:I}=a.a2.fromPoints(h).extend(s);return[new a.P(y,_),new a.P(E,_),new a.P(E,I),new a.P(y,I),new a.P(y,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:h,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(h),this.setZoom(y),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.ag(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.ag(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,h,y,_){const E=y!==void 0?y:this.bearing,I=_=_!==void 0?_:this.pitch,j=a.a1.fromLngLat(s,h),V=-Math.cos(a.ae(I)),J=Math.sin(a.ae(I)),re=J*Math.sin(a.ae(E)),ce=-J*Math.cos(a.ae(E));let oe=this.elevation;const be=h-oe;let Ie;V*be>=0||Math.abs(V)<.1?(Ie=1e4,oe=h+Ie*V):Ie=-be/V;let Ze,We,Xe=a.aQ(1,j.y),it=0;do{if(it+=1,it>10)break;We=Ie/Xe,Ze=new a.a1(j.x+re*We,j.y+ce*We),Xe=1/Ze.meterInMercatorCoordinateUnits()}while(Math.abs(Ie-We*Xe)>1e-12);return{center:Ze.toLngLat(),elevation:oe,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/We/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const h=a.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/h,_=a.a1.fromLngLat(this.center,this.elevation),E=wt(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=s;const I=this.calculateCenterFromCameraLngLatAlt(E.toLngLat(),a.aQ(E.z,_.y),this.bearing,this.pitch);this._elevation=I.elevation,this._center=I.center,this.setZoom(I.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return wt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const h=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/h,s.canonical.y/h,1/h/a.$,1/h/a.$]}}class Yr{constructor(s,h){this.min=s,this.max=h,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(s){const h=[s%2==0,s<2],y=a.aT(this.min),_=a.aT(this.max);for(let E=0;E<h.length;E++)y[E]=h[E]?this.min[E]:this.center[E],_[E]=h[E]?this.center[E]:this.max[E];return _[2]=this.max[2],new Yr(y,_)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let h=!0;for(let y=0;y<s.planes.length;y++){const _=this.intersectsPlane(s.planes[y]);if(_===0)return 0;_===1&&(h=!1)}return h?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let h=s[3],y=s[3];for(let _=0;_<3;_++)s[_]>0?(h+=s[_]*this.min[_],y+=s[_]*this.max[_]):(y+=s[_]*this.min[_],h+=s[_]*this.max[_]);return h>=0?2:y<0?0:1}}class ur{distanceToTile2d(s,h,y,_){const E=_.distanceX([s,h]),I=_.distanceY([s,h]);return Math.hypot(E,I)}getWrap(s,h,y){return y}getTileBoundingVolume(s,h,y,_){var E,I;let j=0,V=0;if(_?.terrain){const re=new a.Z(s.z,h,s.z,s.x,s.y),ce=_.terrain.getMinMaxElevation(re);j=(E=ce.minElevation)!==null&&E!==void 0?E:Math.min(0,y),V=(I=ce.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}const J=1<<s.z;return new Yr([h+s.x/J,s.y/J,j],[h+(s.x+1)/J,(s.y+1)/J,V])}allowVariableZoom(s,h){const y=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,_=a.ah(78.5-y/2,0,60);return!!h.terrain||s.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class Kr{constructor(s,h,y){this.points=s,this.planes=h,this.aabb=y}static fromInvProjectionMatrix(s,h=1,y=0,_,E){const I=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],j=Math.pow(2,y),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((oe=>(function(be,Ie,Ze,We){const Xe=a.aw([],be,Ie),it=1/Xe[3]/Ze*We;return a.aY(Xe,Xe,[it,it,1/Xe[3],it])})(oe,s,h,j)));_&&(function(oe,be,Ie,Ze){const We=Ze?4:0,Xe=Ze?0:4;let it=0;const pt=[],ct=[];for(let ft=0;ft<4;ft++){const Dt=a.aU([],oe[ft+Xe],oe[ft+We]),nr=a.aZ(Dt);a.aR(Dt,Dt,1/nr),pt.push(nr),ct.push(Dt)}for(let ft=0;ft<4;ft++){const Dt=a.a_(oe[ft+We],ct[ft],Ie);it=Dt!==null&&Dt>=0?Math.max(it,Dt):Math.max(it,pt[ft])}const _t=(function(ft,Dt){const nr=a.aU([],ft[Dt[0]],ft[Dt[1]]),Ht=a.aU([],ft[Dt[2]],ft[Dt[1]]),Zt=[0,0,0,0];return a.aV(Zt,a.aW([],nr,Ht)),Zt[3]=-a.aX(Zt,ft[Dt[0]]),Zt})(oe,be),Ct=(function(ft,Dt){const nr=a.a$(ft),Ht=a.b0([],ft,1/nr),Zt=a.aU([],Dt,a.aR([],Ht,a.aX(Dt,Ht))),Qt=a.a$(Zt);if(Qt>0){const Or=Math.sqrt(1-Ht[3]*Ht[3]),Lr=a.aR([],Ht,-Ht[3]),_r=a.aS([],Lr,a.aR([],Zt,Or/Qt));return a.b1(Dt,_r)}return null})(Ie,_t);if(Ct!==null){const ft=Ct/a.aX(ct[0],_t);it=Math.min(it,ft)}for(let ft=0;ft<4;ft++){const Dt=Math.min(it,pt[ft]);oe[ft+Xe]=[oe[ft+We][0]+ct[ft][0]*Dt,oe[ft+We][1]+ct[ft][1]*Dt,oe[ft+We][2]+ct[ft][2]*Dt,1]}})(V,I[0],_,E);const J=I.map((oe=>{const be=a.aU([],V[oe[0]],V[oe[1]]),Ie=a.aU([],V[oe[2]],V[oe[1]]),Ze=a.aV([],a.aW([],be,Ie)),We=-a.aX(Ze,V[oe[1]]);return Ze.concat(We)})),re=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const oe of V)for(let be=0;be<3;be++)re[be]=Math.min(re[be],oe[be]),ce[be]=Math.max(ce[be],oe[be]);return new Kr(V,J,new Yr(re,ce))}}class bn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,y){return this._helper.interpolatePadding(s,h,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h,y=!0){this._helper.resize(s,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,h){}constructor(s,h,y,_,E){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new dn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(I,j)=>this.getConstrained(I,j)},s,h,y,_,E),this._coveringTilesDetailsProvider=new ur}clone(){const s=new bn;return s.apply(this),s}apply(s,h,y){this._helper.apply(s,h,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const h=[new a.b2(0,s)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new a.P(0,0)),_=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),I=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),j=Math.floor(Math.min(y.x,_.x,E.x,I.x)),V=Math.floor(Math.max(y.x,_.x,E.x,I.x)),J=1;for(let re=j-J;re<=V+J;re++)re!==0&&h.push(new a.b2(re,s))}return h}getCameraFrustum(){return Kr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const h=this.screenPointToLocation(this.centerPoint,s),y=s?s.getElevationForLngLatZoom(h,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(s,h){const y=a.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(h,y),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),I=a.a1.fromLngLat(s),j=new a.a1(I.x-(_.x-E.x),I.y-(_.y-E.y));this.setCenter(j?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,h){return h?this.coordinatePoint(a.a1.fromLngLat(s),h.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(s))}screenPointToLocation(s,h){var y;return(y=this.screenPointToMercatorCoordinate(s,h))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(s,h){if(h){const y=h.pointCoordinate(s);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,h){const y=h||0,_=[s.x,s.y,0,1],E=[s.x,s.y,1,1];a.aw(_,_,this._pixelMatrixInverse),a.aw(E,E,this._pixelMatrixInverse);const I=_[3],j=E[3],V=_[1]/I,J=E[1]/j,re=_[2]/I,ce=E[2]/j,oe=re===ce?0:(y-re)/(ce-re);return new a.a1(a.C.number(_[0]/I,E[0]/j,oe)/this.worldSize,a.C.number(V,J,oe)/this.worldSize,y)}coordinatePoint(s,h=0,y=this._pixelMatrix){const _=[s.x*this.worldSize,s.y*this.worldSize,h,1];return a.aw(_,_,y),new a.P(_[0]/_[3],_[1]/_[3])}getBounds(){const s=Math.max(0,this._helper._height/2-Ke(this));return new Pt().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,h){return h?h.pointCoordinate(s)!=null:s.y>this.height/2-Ke(this)}calculatePosMatrix(s,h=!1,y){var _;const E=(_=s.key)!==null&&_!==void 0?_:a.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),I=h?this._alignedPosMatrixCache:this._posMatrixCache;if(I.has(E)){const J=I.get(E);return y?J.f32:J.f64}const j=Qe(s,this.worldSize);a.O(j,h?this._alignedProjMatrix:this._viewProjMatrix,j);const V={f64:j,f32:new Float32Array(j)};return I.set(E,V),y?V.f32:V.f64}calculateFogMatrix(s){const h=s.key,y=this._fogMatrixCacheF32;if(y.has(h))return y.get(h);const _=Qe(s,this.worldSize);return a.O(_,this._fogMatrix,_),y.set(h,new Float32Array(_)),y.get(h)}getConstrained(s,h){h=a.ah(+h,this.minZoom,this.maxZoom);const y={center:new a.S(s.lng,s.lat),zoom:h};let _=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){const pt=179.9999999999;_=[-pt,pt]}const E=this.tileSize*a.af(y.zoom);let I=0,j=E,V=0,J=E,re=0,ce=0;const{x:oe,y:be}=this.size;if(this._helper._latRange){const pt=this._helper._latRange;I=a.U(pt[1])*E,j=a.U(pt[0])*E,j-I<be&&(re=be/(j-I))}_&&(V=a.aO(a.V(_[0])*E,0,E),J=a.aO(a.V(_[1])*E,0,E),J<V&&(J+=E),J-V<oe&&(ce=oe/(J-V)));const{x:Ie,y:Ze}=Me(E,s);let We,Xe;const it=Math.max(ce||0,re||0);if(it){const pt=new a.P(ce?(J+V)/2:Ie,re?(j+I)/2:Ze);return y.center=Ue(E,pt).wrap(),y.zoom+=a.ak(it),y}if(this._helper._latRange){const pt=be/2;Ze-pt<I&&(Xe=I+pt),Ze+pt>j&&(Xe=j-pt)}if(_){const pt=(V+J)/2;let ct=Ie;this._helper._renderWorldCopies&&(ct=a.aO(Ie,pt-E/2,pt+E/2));const _t=oe/2;ct-_t<V&&(We=V+_t),ct+_t>J&&(We=J-_t)}if(We!==void 0||Xe!==void 0){const pt=new a.P(We??Ie,Xe??Ze);y.center=Ue(E,pt).wrap()}return y}calculateCenterFromCameraLngLatAlt(s,h,y,_){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,y,_)}_calculateNearFarZIfNeeded(s,h,y){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=s-_*this._helper._pixelPerMeter/Math.cos(h),I=_<0?E:s,j=Math.PI/2+this.pitchInRadians,V=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),J=Math.sin(V)*I/Math.sin(a.ah(Math.PI-j-V,.01,Math.PI-.01)),re=Ke(this),ce=Math.atan(re/this._helper.cameraToCenterDistance),oe=a.ae(.75),be=ce>oe?2*ce*(.5+y.y/(2*re)):oe,Ie=Math.sin(be)*I/Math.sin(a.ah(Math.PI-j-be,.01,Math.PI-.01)),Ze=Math.min(J,Ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-h)*Ze+I),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,h=Me(this.worldSize,this.center),y=h.x,_=h.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;const E=a.ae(Math.min(this.pitch,he)),I=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E));let j;this._calculateNearFarZIfNeeded(I,E,s),j=new Float64Array(16),a.b4(j,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,j),j[8]=2*-s.x/this._helper._width,j[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b5(j),a.N(j,j,[1,-1,1]),a.M(j,j,[0,0,-this._helper.cameraToCenterDistance]),a.b6(j,j,-this.rollInRadians),a.b7(j,j,this.pitchInRadians),a.b6(j,j,-this.bearingInRadians),a.M(j,j,[-y,-_,0]),this._mercatorMatrix=a.N([],j,[this.worldSize,this.worldSize,this.worldSize]),a.N(j,j,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,j),a.M(j,j,[0,0,-this.elevation]),this._viewProjMatrix=j,this._invViewProjMatrix=a.aq([],j);const V=[0,0,-1,1];a.aw(V,V,this._invViewProjMatrix),this._cameraPosition=[V[0]/V[3],V[1]/V[3],V[2]/V[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,I,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-y,-_,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,j);const J=this._helper._width%2/2,re=this._helper._height%2/2,ce=Math.cos(this.bearingInRadians),oe=Math.sin(-this.bearingInRadians),be=y-Math.round(y)+ce*J+oe*re,Ie=_-Math.round(_)+ce*re+oe*J,Ze=new Float64Array(j);if(a.M(Ze,Ze,[be>.5?be-1:be,Ie>.5?Ie-1:Ie,0]),this._alignedProjMatrix=Ze,j=a.aq(new Float64Array(16),this._pixelMatrix),!j)throw new Error("failed to invert matrix");this._pixelMatrixInverse=j,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),h=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.aw(h,h,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.aj(1,this.center.lat)*this.worldSize;return wt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,h){const y=a.a1.fromLngLat(s),_=[y.x*this.worldSize,y.y*this.worldSize,h,1];return a.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(s){const{overscaledTileID:h,aligned:y,applyTerrainMatrix:_}=s,E=this._helper.getMercatorTileCoordinates(h),I=h?this.calculatePosMatrix(h,y,!0):null;let j;return j=h&&h.terrainRttPosMatrix32f&&_?h.terrainRttPosMatrix32f:I||a.b8(),{mainMatrix:j,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:j}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,h,y){return 1}transformLightDirection(s){return a.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,h,y,_){const E=this.calculatePosMatrix(y);let I;_?(I=[s,h,_(s,h),1],a.aw(I,I,E)):(I=[s,h,0,1],Mi(I,I,E));const j=I[3];return{point:new a.P(I[0]/j,I[1]/j),signedDistanceFromCamera:j,isOccluded:!1}}populateCache(s){for(const h of s)this.calculatePosMatrix(h)}getMatrixForModel(s,h){const y=a.a1.fromLngLat(s,h),_=y.meterInMercatorCoordinateUnits(),E=a.b9();return a.M(E,E,[y.x,y.y,y.z]),a.b6(E,E,Math.PI),a.b7(E,E,Math.PI/2),a.N(E,E,[-_,_,_]),E}getProjectionDataForCustomLayer(s=!0){const h=new a.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:h,applyGlobeMatrix:s}),_=Qe(h,this.worldSize);a.O(_,this._viewProjMatrix,_),y.tileMercatorCoords=[0,0,1,1];const E=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],I=a.ba();return a.N(I,_,E),y.fallbackMatrix=I,y.mainMatrix=I,y}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function va(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Gn(S){if(S.useSlerp)if(S.k<1){const s=a.bb(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),h=a.bb(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),y=new Float64Array(4);a.bc(y,s,h,S.k);const _=a.bd(y);S.tr.setRoll(_.roll),S.tr.setPitch(_.pitch),S.tr.setBearing(_.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);else S.tr.setRoll(a.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(a.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(a.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function aa(S,s,h,y,_){const E=_.padding,I=Me(_.worldSize,h.getNorthWest()),j=Me(_.worldSize,h.getNorthEast()),V=Me(_.worldSize,h.getSouthEast()),J=Me(_.worldSize,h.getSouthWest()),re=a.ae(-y),ce=I.rotate(re),oe=j.rotate(re),be=V.rotate(re),Ie=J.rotate(re),Ze=new a.P(Math.max(ce.x,oe.x,Ie.x,be.x),Math.max(ce.y,oe.y,Ie.y,be.y)),We=new a.P(Math.min(ce.x,oe.x,Ie.x,be.x),Math.min(ce.y,oe.y,Ie.y,be.y)),Xe=Ze.sub(We),it=(_.width-(E.left+E.right+s.left+s.right))/Xe.x,pt=(_.height-(E.top+E.bottom+s.top+s.bottom))/Xe.y;if(pt<0||it<0)return void va();const ct=Math.min(a.ak(_.scale*Math.min(it,pt)),S.maxZoom),_t=a.P.convert(S.offset),Ct=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ae(y)),ft=_t.add(Ct).mult(_.scale/a.af(ct));return{center:Ue(_.worldSize,I.add(V).div(2).sub(ft)),zoom:ct,bearing:y}}class ja{get useGlobeControls(){return!1}handlePanInertia(s,h){const y=s.mag(),_=Math.abs(Ke(h));return{easingOffset:s.mult(Math.min(.75*_/y,1)),easingCenter:h.center}}handleMapControlsRollPitchBearingZoom(s,h){s.bearingDelta&&h.setBearing(h.bearing+s.bearingDelta),s.pitchDelta&&h.setPitch(h.pitch+s.pitchDelta),s.rollDelta&&h.setRoll(h.roll+s.rollDelta),s.zoomDelta&&h.setZoom(h.zoom+s.zoomDelta)}handleMapControlsPan(s,h,y){s.around.distSqr(h.centerPoint)<.01||h.setLocationAtPoint(y,s.around)}cameraForBoxAndBearing(s,h,y,_,E){return aa(s,h,y,_,E)}handleJumpToCenterZoom(s,h){s.zoom!==(h.zoom!==void 0?+h.zoom:s.zoom)&&s.setZoom(+h.zoom),h.center!==void 0&&s.setCenter(a.S.convert(h.center))}handleEaseTo(s,h){const y=s.zoom,_=s.padding,E={roll:s.roll,pitch:s.pitch,bearing:s.bearing},I={roll:h.roll===void 0?s.roll:h.roll,pitch:h.pitch===void 0?s.pitch:h.pitch,bearing:h.bearing===void 0?s.bearing:h.bearing},j=h.zoom!==void 0,V=!s.isPaddingEqual(h.padding);let J=!1;const re=j?+h.zoom:s.zoom;let ce=s.centerPoint.add(h.offsetAsPoint);const oe=s.screenPointToLocation(ce),{center:be,zoom:Ie}=s.getConstrained(a.S.convert(h.center||oe),re??y);Pn(s,be);const Ze=Me(s.worldSize,oe),We=Me(s.worldSize,be).sub(Ze),Xe=a.af(Ie-y);return J=Ie!==y,{easeFunc:it=>{if(J&&s.setZoom(a.C.number(y,Ie,it)),a.be(E,I)||Gn({startEulerAngles:E,endEulerAngles:I,tr:s,k:it,useSlerp:E.roll!=I.roll}),V&&(s.interpolatePadding(_,h.padding,it),ce=s.centerPoint.add(h.offsetAsPoint)),h.around)s.setLocationAtPoint(h.around,h.aroundPoint);else{const pt=a.af(s.zoom-y),ct=Ie>y?Math.min(2,Xe):Math.max(.5,Xe),_t=Math.pow(ct,1-it),Ct=Ue(s.worldSize,Ze.add(We.mult(it*_t)).mult(pt));s.setLocationAtPoint(s.renderWorldCopies?Ct.wrap():Ct,ce)}},isZooming:J,elevationCenter:be}}handleFlyTo(s,h){const y=h.zoom!==void 0,_=s.zoom,E=s.getConstrained(a.S.convert(h.center||h.locationAtOffset),y?+h.zoom:_),I=E.center,j=E.zoom;Pn(s,I);const V=Me(s.worldSize,h.locationAtOffset),J=Me(s.worldSize,I).sub(V),re=J.mag(),ce=a.af(j-_);let oe;if(h.minZoom!==void 0){const be=Math.min(+h.minZoom,_,j),Ie=s.getConstrained(I,be).zoom;oe=a.af(Ie-_)}return{easeFunc:(be,Ie,Ze,We)=>{s.setZoom(be===1?j:_+a.ak(Ie));const Xe=be===1?I:Ue(s.worldSize,V.add(J.mult(Ze)).mult(Ie));s.setLocationAtPoint(s.renderWorldCopies?Xe.wrap():Xe,We)},scaleOfZoom:ce,targetCenter:I,scaleOfMinZoom:oe,pixelPathLength:re}}}class In{constructor(s,h,y){this.blendFunction=s,this.blendColor=h,this.mask=y}}In.Replace=[1,0],In.disabled=new In(In.Replace,a.bf.transparent,[!1,!1,!1,!1]),In.unblended=new In(In.Replace,a.bf.transparent,[!0,!0,!0,!0]),In.alphaBlended=new In([1,771],a.bf.transparent,[!0,!0,!0,!0]);const os=2305;class yn{constructor(s,h,y){this.enable=s,this.mode=h,this.frontFace=y}}yn.disabled=new yn(!1,1029,os),yn.backCCW=new yn(!0,1029,os),yn.frontCCW=new yn(!0,1028,os);class pn{constructor(s,h,y){this.func=s,this.mask=h,this.range=y}}pn.ReadOnly=!1,pn.ReadWrite=!0,pn.disabled=new pn(519,pn.ReadOnly,[0,1]);const Po=7680;class zn{constructor(s,h,y,_,E,I){this.test=s,this.ref=h,this.mask=y,this.fail=_,this.depthFail=E,this.pass=I}}zn.disabled=new zn({func:519,mask:0},0,0,Po,Po,Po);const ao=new WeakMap;function oo(S){var s;if(ao.has(S))return ao.get(S);{const h=(s=S.getParameter(S.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return ao.set(S,h),h}}class To{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const h=s.context,y=h.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const _=new a.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const E=new a.aN;E.emplaceBack(0,1,2),this._fullscreenTriangle=new Bt(h.createVertexBuffer(_,xr.members),h.createIndexBuffer(E),a.aM.simpleSegment(0,0,_.length,E.length)),this._resultBuffer=new Uint8Array(4),h.activeTexture.set(y.TEXTURE1);const I=y.createTexture();y.bindTexture(y.TEXTURE_2D,I),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=h.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(I),oo(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,h){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,h),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,h=s.gl;s.activeTexture.set(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,h){const y=this._cachedRenderContext.context,_=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,_.TRIANGLES,pn.disabled,zn.disabled,In.unblended,yn.disabled,((E,I)=>({u_input:E,u_output_expected:I}))(s,h),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&oo(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const E=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&oo(s)){const h=s.clientWaitSync(this._readbackQueue.sync,0,0);if(h===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(h===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=To._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let h=0;return h+=s[0]/256,h+=s[1]/65536,h+=s[2]/16777216,s[3]<127&&(h=-h),h/128}}const Ms=a.$/128;function gl(S,s){const h=S.granularity!==void 0?Math.max(S.granularity,1):1,y=h+(S.generateBorders?2:0),_=h+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),E=y+1,I=_+1,j=S.generateBorders?-1:0,V=S.generateBorders||S.extendToNorthPole?-1:0,J=h+(S.generateBorders?1:0),re=h+(S.generateBorders||S.extendToSouthPole?1:0),ce=E*I,oe=y*_*6,be=E*I>65536;if(be&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Ie=be||s==="32bit",Ze=new Int16Array(2*ce);let We=0;for(let pt=V;pt<=re;pt++)for(let ct=j;ct<=J;ct++){let _t=ct/h*a.$;ct===-1&&(_t=-Ms),ct===h+1&&(_t=a.$+Ms);let Ct=pt/h*a.$;pt===-1&&(Ct=S.extendToNorthPole?a.bh:-Ms),pt===h+1&&(Ct=S.extendToSouthPole?a.bi:a.$+Ms),Ze[We++]=_t,Ze[We++]=Ct}const Xe=Ie?new Uint32Array(oe):new Uint16Array(oe);let it=0;for(let pt=0;pt<_;pt++)for(let ct=0;ct<y;ct++){const _t=ct+1+pt*E,Ct=ct+(pt+1)*E,ft=ct+1+(pt+1)*E;Xe[it++]=ct+pt*E,Xe[it++]=Ct,Xe[it++]=_t,Xe[it++]=_t,Xe[it++]=Ct,Xe[it++]=ft}return{vertices:Ze.buffer.slice(0),indices:Xe.buffer.slice(0),uses32bitIndices:Ie}}const Ws=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class Zs{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return St.projectionGlobe}get vertexShaderPreludeCode(){return St.projectionMercator.vertexSource}get subdivisionGranularity(){return Ws}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new To(s));const h=a.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-h*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(h,y),E=w.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=E);const I=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(I))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,h,y,_,E){const I=(E==="stencil"?Ws.stencil:Ws.tile).getGranularityForZoomLevel(h.z);return this._getMesh(s,{granularity:I,generateBorders:y,extendToNorthPole:h.y===0&&_,extendToSouthPole:h.y===(1<<h.z)-1&&_})}_getMesh(s,h){const y=this._getMeshKey(h);if(y in this._tileMeshCache)return this._tileMeshCache[y];const _=(function(E,I){const j=gl(I,"16bit"),V=a.aL.deserialize({arrayBuffer:j.vertices,length:j.vertices.byteLength/2/2}),J=a.aN.deserialize({arrayBuffer:j.indices,length:j.indices.byteLength/2/3});return new Bt(E.createVertexBuffer(V,xr.members),E.createIndexBuffer(J),a.aM.simpleSegment(0,0,V.length,J.length))})(s,h);return this._tileMeshCache[y]=_,_}recalculate(s){}hasTransition(){const s=w.now();let h=!1;return h=h||(s-this._errorMeasurementLastChangeTime)/1e3<.7,h=h||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,h}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const yl=new a.r({type:new a.D(a.v.projection.type)});class Rs extends a.E{constructor(s){super(),this._transitionable=new a.t(yl),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new fr,this._verticalPerspectiveProjection=new Zs}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,h,y,_,E){return this.currentProjection.getMeshFromTileID(s,h,y,_,E)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function vl(S){const s=za(S.worldSize,S.center.lat);return 2*Math.PI*s}function Io(S,s,h,y,_){const E=1/(1<<_),I=s/a.$*E+y*E,j=a.bo((S/a.$*E+h*E)*Math.PI*2+Math.PI,2*Math.PI),V=2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI,J=Math.cos(V),re=new Float64Array(3);return re[0]=Math.sin(j)*J,re[1]=Math.sin(V),re[2]=Math.cos(j)*J,re}function Ei(S){return(function(s,h){const y=Math.cos(h),_=new Float64Array(3);return _[0]=Math.sin(s)*y,_[1]=Math.sin(h),_[2]=Math.cos(s)*y,_})(S.lng*Math.PI/180,S.lat*Math.PI/180)}function za(S,s){return S/(2*Math.PI)/Math.cos(s*Math.PI/180)}function X(S){const s=Math.asin(S[1])/Math.PI*180,h=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(h>1e-6){const y=S[0]/h,_=Math.acos(S[2]/h),E=(y>0?_:-_)/Math.PI*180;return new a.S(a.aO(E,-180,180),s)}return new a.S(0,s)}function Ae(S){return Math.cos(S*Math.PI/180)}function et(S,s){const h=Ae(S),y=Ae(s);return a.ak(y/h)}function It(S,s){const h=S.rotate(s.bearingInRadians),y=s.zoom+et(s.center.lat,0),_=a.bk(1/Ae(s.center.lat),1/Ae(Math.min(Math.abs(s.center.lat),60)),a.bn(y,7,3,0,1)),E=360/vl({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-h.x*E*_,a.ah(s.center.lat+h.y*E,-a.ai,a.ai))}function $t(S){const s=.5*S,h=Math.sin(s),y=Math.cos(s);return Math.log(h+y)-Math.log(y-h)}function pr(S,s,h,y){const _=S.lat+h*y;if(Math.abs(h)>1){const E=(Math.sign(S.lat+h)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,I=Math.abs(S.lat+h)*Math.PI/180,j=$t(E+y*(I-E)),V=$t(E),J=$t(I);return new a.S(S.lng+s*((j-V)/(J-V)),_)}return new a.S(S.lng+s*y,_)}class Er{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,h,y,_){const E=`${s.z}_${s.x}_${s.y}_${_?.terrain?"t":""}`,I=this._cache.get(E);if(I)return I;const j=this._cachePrevious.get(E);if(j)return this._cache.set(E,j),j;const V=this._boundingVolumeFactory(s,h,y,_);return this._cache.set(E,V),this._hadAnyChanges=!0,V}}class rn{constructor(s,h,y,_){this.min=y,this.max=_,this.points=s,this.planes=h}static fromAabb(s,h){const y=[];for(let _=0;_<8;_++)y.push([1&~_?s[0]:h[0],(_>>1&1)==1?h[1]:s[1],(_>>2&1)==1?h[2]:s[2]]);return new rn(y,[[-1,0,0,h[0]],[1,0,0,-s[0]],[0,-1,0,h[1]],[0,1,0,-s[1]],[0,0,-1,h[2]],[0,0,1,-s[2]]],s,h)}static fromCenterSizeAngles(s,h,y){const _=a.br([],y[0],y[1],y[2]),E=a.bs([],[h[0],0,0],_),I=a.bs([],[0,h[1],0],_),j=a.bs([],[0,0,h[2]],_),V=[...s],J=[...s];for(let ce=0;ce<8;ce++)for(let oe=0;oe<3;oe++){const be=s[oe]+E[oe]*(1&~ce?-1:1)+I[oe]*((ce>>1&1)==1?1:-1)+j[oe]*((ce>>2&1)==1?1:-1);V[oe]=Math.min(V[oe],be),J[oe]=Math.max(J[oe],be)}const re=[];for(let ce=0;ce<8;ce++){const oe=[...s];a.aS(oe,oe,a.aR([],E,1&~ce?-1:1)),a.aS(oe,oe,a.aR([],I,(ce>>1&1)==1?1:-1)),a.aS(oe,oe,a.aR([],j,(ce>>2&1)==1?1:-1)),re.push(oe)}return new rn(re,[[...E,-a.aX(E,re[0])],[...I,-a.aX(I,re[0])],[...j,-a.aX(j,re[0])],[-E[0],-E[1],-E[2],-a.aX(E,re[7])],[-I[0],-I[1],-I[2],-a.aX(I,re[7])],[-j[0],-j[1],-j[2],-a.aX(j,re[7])]],V,J)}intersectsFrustum(s){let h=!0;const y=this.points.length,_=this.planes.length,E=s.planes.length,I=s.points.length;for(let j=0;j<E;j++){const V=s.planes[j];let J=0;for(let re=0;re<y;re++){const ce=this.points[re];V[0]*ce[0]+V[1]*ce[1]+V[2]*ce[2]+V[3]>=0&&J++}if(J===0)return 0;J<y&&(h=!1)}if(h)return 2;for(let j=0;j<_;j++){const V=this.planes[j];let J=0;for(let re=0;re<I;re++){const ce=s.points[re];V[0]*ce[0]+V[1]*ce[1]+V[2]*ce[2]+V[3]>=0&&J++}if(J===0)return 0}return 1}intersectsPlane(s){const h=this.points.length;let y=0;for(let _=0;_<h;_++){const E=this.points[_];s[0]*E[0]+s[1]*E[1]+s[2]*E[2]+s[3]>=0&&y++}return y===h?2:y===0?0:1}}function Qr(S,s,h){const y=S-s;return y<0?-y:Math.max(0,y-h)}function Mn(S,s,h,y,_){const E=S-h;let I;return I=E<0?Math.min(-E,1+E-_):E>1?Math.min(Math.max(E-_,0),1-E):0,Math.max(I,Qr(s,y,_))}class On{constructor(){this._boundingVolumeCache=new Er(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,h,y,_){const E=1<<y.z,I=1/E,j=y.x/E,V=y.y/E;let J=2;return J=Math.min(J,Mn(s,h,j,V,I)),J=Math.min(J,Mn(s,h,j+.5,-V-I,I)),J=Math.min(J,Mn(s,h,j+.5,2-V-I,I)),J}getWrap(s,h,y){const _=1<<h.z,E=1/_,I=h.x/_,j=Qr(s.x,I,E),V=Qr(s.x,I-1,E),J=Qr(s.x,I+1,E),re=Math.min(j,V,J);return re===J?1:re===V?-1:0}allowVariableZoom(s,h){return Pr(s,h)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,h,y,_){return this._boundingVolumeCache.getTileBoundingVolume(s,h,y,_)}_computeTileBoundingVolume(s,h,y,_){var E,I;let j=0,V=0;if(_?.terrain){const J=new a.Z(s.z,h,s.z,s.x,s.y),re=_.terrain.getMinMaxElevation(J);j=(E=re.minElevation)!==null&&E!==void 0?E:Math.min(0,y),V=(I=re.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}if(j/=a.bu,V/=a.bu,j+=1,V+=1,s.z<=0)return rn.fromAabb([-V,-V,-V],[V,V,V]);if(s.z===1)return rn.fromAabb([s.x===0?-V:0,s.y===0?0:-V,-V],[s.x===0?0:V,s.y===0?V:0,V]);{const J=[Io(0,0,s.x,s.y,s.z),Io(a.$,0,s.x,s.y,s.z),Io(a.$,a.$,s.x,s.y,s.z),Io(0,a.$,s.x,s.y,s.z)],re=[];for(const Zt of J)re.push(a.aR([],Zt,V));if(V!==j)for(const Zt of J)re.push(a.aR([],Zt,j));s.y===0&&re.push([0,1,0]),s.y===(1<<s.z)-1&&re.push([0,-1,0]);const ce=[1,1,1],oe=[-1,-1,-1];for(const Zt of re)for(let Qt=0;Qt<3;Qt++)ce[Qt]=Math.min(ce[Qt],Zt[Qt]),oe[Qt]=Math.max(oe[Qt],Zt[Qt]);const be=Io(a.$/2,a.$/2,s.x,s.y,s.z),Ie=a.aW([],[0,1,0],be);a.aV(Ie,Ie);const Ze=a.aW([],be,Ie);a.aV(Ze,Ze);const We=a.aW([],J[2],J[1]);a.aV(We,We);const Xe=a.aW([],J[0],J[3]);a.aV(Xe,Xe),re.push(a.aR([],be,V)),s.y>=(1<<s.z)/2&&re.push(a.aR([],Io(a.$/2,0,s.x,s.y,s.z),V)),s.y<(1<<s.z)/2&&re.push(a.aR([],Io(a.$/2,a.$,s.x,s.y,s.z),V));const it=Xn(be,re),pt=Xn(Ze,re),ct=[-be[0],-be[1],-be[2],it.max],_t=[be[0],be[1],be[2],-it.min],Ct=[-Ze[0],-Ze[1],-Ze[2],pt.max],ft=[Ze[0],Ze[1],Ze[2],-pt.min],Dt=[...We,0],nr=[...Xe,0],Ht=[];return s.y===0?Ht.push(a.bt(nr,Dt,ct),a.bt(nr,Dt,_t)):Ht.push(a.bt(Ct,Dt,ct),a.bt(Ct,Dt,_t),a.bt(Ct,nr,ct),a.bt(Ct,nr,_t)),s.y===(1<<s.z)-1?Ht.push(a.bt(nr,Dt,ct),a.bt(nr,Dt,_t)):Ht.push(a.bt(ft,Dt,ct),a.bt(ft,Dt,_t),a.bt(ft,nr,ct),a.bt(ft,nr,_t)),new rn(Ht,[ct,_t,Ct,ft,Dt,nr],ce,oe)}}}function Xn(S,s){let h=1/0,y=-1/0;for(const _ of s){const E=a.aX(S,_);h=Math.min(h,E),y=Math.max(y,E)}return{min:h,max:y}}class Ni{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,y){return this._helper.interpolatePadding(s,h,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h){this._helper.resize(s,h)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new dn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,h)=>this.getConstrained(s,h)}),this._coveringTilesDetailsProvider=new On}clone(){const s=new Ni;return s.apply(this),s}apply(s,h){this._globeLatitudeErrorCorrectionRadians=h||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:h,applyGlobeMatrix:y}=s,_=this._helper.getMercatorTileCoordinates(h);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const h=this.pitchInRadians,y=this.cameraToCenterDistance/s,_=Math.sin(h)*y,E=Math.cos(h)*y+1,I=1/Math.sqrt(_*_+E*E)*1;let j=-_,V=E;const J=Math.sqrt(j*j+V*V);j/=J,V/=J;const re=[0,j,V];a.bw(re,re,[0,0,0],-this.bearingInRadians),a.bx(re,re,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(re,re,[0,0,0],this.center.lng*Math.PI/180);const ce=1/a.aZ(re);return a.aR(re,re,ce),[...re,-I*ce]}isLocationOccluded(s){return!this.isSurfacePointVisible(Ei(s))}transformLightDirection(s){const h=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,_=Math.cos(y),E=[Math.sin(h)*_,Math.sin(y),Math.cos(h)*_],I=[E[2],0,-E[0]],j=[0,0,0];a.aW(j,I,E),a.aV(I,I),a.aV(j,j);const V=[0,0,0];return a.aV(V,[I[0]*s[0]+j[0]*s[1]+E[0]*s[2],I[1]*s[0]+j[1]*s[1]+E[1]*s[2],I[2]*s[0]+j[2]*s[1]+E[2]*s[2]]),V}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,h,y){const _=(function(j,V,J){const re=1/(1<<J.z);return new a.a1(j/a.$*re+J.x*re,V/a.$*re+J.y*re)})(s,h,y.canonical),E=(I=_.y,[a.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI]);var I;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(s,h,y,_){const E=y.canonical,I=Io(s,h,E.x,E.y,E.z),j=1+(_?_(s,h):0)/a.bu,V=[I[0]*j,I[1]*j,I[2]*j,1];a.aw(V,V,this._globeViewProjMatrixNoCorrection);const J=this._cachedClippingPlane,re=J[0]*I[0]+J[1]*I[1]+J[2]*I[2]+J[3]<0;return{point:new a.P(V[0]/V[3],V[1]/V[3]),signedDistanceFromCamera:V[3],isOccluded:re}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=za(this.worldSize,this.center.lat),h=a.ba(),y=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b4(h,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;h[8]=2*-_.x/this._helper._width,h[9]=2*_.y/this._helper._height,this._projectionMatrix=a.b5(h),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,h),a.M(h,h,[0,0,-this.cameraToCenterDistance]),a.b6(h,h,this.rollInRadians),a.b7(h,h,-this.pitchInRadians),a.b6(h,h,this.bearingInRadians),a.M(h,h,[0,0,-s]);const E=a.bp();E[0]=s,E[1]=s,E[2]=s,a.b7(y,h,this.center.lat*Math.PI/180),a.bz(y,y,-this.center.lng*Math.PI/180),a.N(y,y,E),this._globeViewProjMatrixNoCorrection=y,a.b7(h,h,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(h,h,-this.center.lng*Math.PI/180),a.N(h,h,E),this._globeViewProjMatrix32f=new Float32Array(h),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const I=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bw(this._cameraPosition,this._cameraPosition,I,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,I,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,I,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,I,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,I,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const j=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(j,j,[1,1,-1]),this._cachedFrustum=Kr.fromInvProjectionMatrix(j,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const h=a.ba();return a.ag(h),h}getVisibleUnwrappedCoordinates(s){return[new a.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,h){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Ei(s);a.aR(y,y,1+h/a.bu);const _=a.bv();return a.aw(_,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(s){}getBounds(){const s=.5*this.width,h=.5*this.height,y=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,h),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,h)],_=[];for(const ce of y)_.push(this.unprojectScreenPoint(ce));let E=0,I=0,j=0,V=0;const J=this.center;for(const ce of _){const oe=a.bA(J.lng,ce.lng),be=a.bA(J.lat,ce.lat);oe<I&&(I=oe),oe>E&&(E=oe),be<V&&(V=be),be>j&&(j=be)}const re=[J.lng+I,J.lat+V,J.lng+E,J.lat+j];return this.isSurfacePointOnScreen([0,1,0])&&(re[3]=90,re[0]=-180,re[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(re[1]=-90,re[0]=-180,re[2]=180),new Pt(re)}getConstrained(s,h){const y=a.ah(s.lat,-a.ai,a.ai),_=a.ah(+h,this.minZoom+et(0,y),this.maxZoom);return{center:new a.S(s.lng,y),zoom:_}}calculateCenterFromCameraLngLatAlt(s,h,y,_){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,y,_)}setLocationAtPoint(s,h){const y=Ei(this.unprojectScreenPoint(h)),_=Ei(s),E=a.bp();a.bB(E);const I=a.bp();a.by(I,y,E,-this.center.lng*Math.PI/180),a.bx(I,I,E,this.center.lat*Math.PI/180);const j=_[0]*_[0]+_[2]*_[2],V=I[0]*I[0];if(j<V)return;const J=Math.sqrt(j-V),re=-J,ce=a.bC(_[0],_[2],I[0],J),oe=a.bC(_[0],_[2],I[0],re),be=a.bp();a.by(be,_,E,-ce);const Ie=a.bC(be[1],be[2],I[1],I[2]),Ze=a.bp();a.by(Ze,_,E,-oe);const We=a.bC(Ze[1],Ze[2],I[1],I[2]),Xe=.5*Math.PI,it=Ie>=-Xe&&Ie<=Xe,pt=We>=-Xe&&We<=Xe;let ct,_t;if(it&&pt){const nr=this.center.lng*Math.PI/180,Ht=this.center.lat*Math.PI/180;a.bD(ce,nr)+a.bD(Ie,Ht)<a.bD(oe,nr)+a.bD(We,Ht)?(ct=ce,_t=Ie):(ct=oe,_t=We)}else if(it)ct=ce,_t=Ie;else{if(!pt)return;ct=oe,_t=We}const Ct=ct/Math.PI*180,ft=_t/Math.PI*180,Dt=this.center.lat;this.setCenter(new a.S(Ct,a.ah(ft,-90,90))),this.setZoom(this.zoom+et(Dt,this.center.lat))}locationToScreenPoint(s,h){const y=Ei(s);if(h){const _=h.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aR(y,y,1+_/a.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(s){const h=a.bv();return a.aw(h,[...s,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],new a.P((.5*h[0]+.5)*this.width,(.5*-h[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,h){if(h){const y=h.pointCoordinate(s);if(y)return y}return a.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,h){var y;return(y=this.screenPointToMercatorCoordinate(s,h))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(s,h){const y=this._cameraPosition,_=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(y,_)}getRayDirectionFromPixel(s){const h=a.bv();h[0]=s.x/this.width*2-1,h[1]=-1*(s.y/this.height*2-1),h[2]=1,h[3]=1,a.aw(h,h,this._globeViewProjMatrixNoCorrectionInverted),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3];const y=a.bp();y[0]=h[0]-this._cameraPosition[0],y[1]=h[1]-this._cameraPosition[1],y[2]=h[2]-this._cameraPosition[2];const _=a.bp();return a.aV(_,y),_}isSurfacePointVisible(s){const h=this._cachedClippingPlane;return h[0]*s[0]+h[1]*s[1]+h[2]*s[2]+h[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const h=a.bv();return a.aw(h,[...s,1],this._globeViewProjMatrixNoCorrection),h[0]/=h[3],h[1]/=h[3],h[2]/=h[3],h[0]>-1&&h[0]<1&&h[1]>-1&&h[1]<1&&h[2]>-1&&h[2]<1}rayPlanetIntersection(s,h){const y=a.aX(s,h),_=a.bp(),E=a.bp();a.aR(E,h,y),a.aU(_,s,E);const I=1-a.aX(_,_);if(I<0)return null;const j=a.aX(s,s)-1,V=-y+(y<0?1:-1)*Math.sqrt(I),J=j/V,re=V;return{tMin:Math.min(J,re),tMax:Math.max(J,re)}}unprojectScreenPoint(s){const h=this._cameraPosition,y=this.getRayDirectionFromPixel(s),_=this.rayPlanetIntersection(h,y);if(_){const re=a.bp();a.aS(re,h,[y[0]*_.tMin,y[1]*_.tMin,y[2]*_.tMin]);const ce=a.bp();return a.aV(ce,re),X(ce)}const E=this._cachedClippingPlane,I=E[0]*y[0]+E[1]*y[1]+E[2]*y[2],j=-a.b1(E,h)/I,V=a.bp();if(j>0)a.aS(V,h,[y[0]*j,y[1]*j,y[2]*j]);else{const re=a.bp();a.aS(re,h,[2*y[0],2*y[1],2*y[2]]);const ce=a.b1(this._cachedClippingPlane,re);a.aU(V,re,[this._cachedClippingPlane[0]*ce,this._cachedClippingPlane[1]*ce,this._cachedClippingPlane[2]*ce])}const J=(function(re){const ce=a.bp();return ce[0]=re[0]*-re[3],ce[1]=re[1]*-re[3],ce[2]=re[2]*-re[3],{center:ce,radius:Math.sqrt(1-re[3]*re[3])}})(E);return X((function(re,ce,oe){const be=a.bp();a.aU(be,oe,re);const Ie=a.bp();return a.bq(Ie,re,be,ce/a.a$(be)),Ie})(J.center,J.radius,V))}getMatrixForModel(s,h){const y=a.S.convert(s),_=1/a.bu,E=a.b9();return a.bz(E,E,y.lng/180*Math.PI),a.b7(E,E,-y.lat/180*Math.PI),a.M(E,E,[0,0,1+h/a.bu]),a.b7(E,E,.5*Math.PI),a.N(E,E,[_,_,_]),E}getProjectionDataForCustomLayer(s=!0){const h=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return h.tileMercatorCoords=[0,0,1,1],h}getFastPathSimpleProjectionMatrix(s){}}class ta{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,h,y){return this._helper.interpolatePadding(s,h,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,h,y=!0){this._helper.resize(s,h,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,h){this._helper.overrideNearFarZ(s,h)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,h){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=h,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new dn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,h)=>this.getConstrained(s,h)}),this._globeness=1,this._mercatorTransform=new bn,this._verticalPerspectiveTransform=new Ni}clone(){const s=new ta;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const h=this._mercatorTransform.getProjectionData(s),y=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:h.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:h.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,h,y){const _=this._mercatorTransform.getPitchedTextCorrection(s,h,y),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,h,y);return a.bk(_,E,this._globeness)}projectTileCoordinates(s,h,y,_){return this.currentTransform.projectTileCoordinates(s,h,y,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,h){return this.currentTransform.lngLatToCameraDepth(s,h)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,h){return this.currentTransform.getConstrained(s,h)}calculateCenterFromCameraLngLatAlt(s,h,y,_){return this._helper.calculateCenterFromCameraLngLatAlt(s,h,y,_)}setLocationAtPoint(s,h){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,h),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,h),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,h){return this.currentTransform.locationToScreenPoint(s,h)}screenPointToMercatorCoordinate(s,h){return this.currentTransform.screenPointToMercatorCoordinate(s,h)}screenPointToLocation(s,h){return this.currentTransform.screenPointToLocation(s,h)}isPointOnMapSurface(s,h){return this.currentTransform.isPointOnMapSurface(s,h)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,h){return this.currentTransform.getMatrixForModel(s,h)}getProjectionDataForCustomLayer(s=!0){const h=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return h;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return y.fallbackMatrix=h.mainMatrix,y}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class $n{get useGlobeControls(){return!0}handlePanInertia(s,h){const y=It(s,h);return Math.abs(y.lng-h.center.lng)>180&&(y.lng=h.center.lng+179.5*Math.sign(y.lng-h.center.lng)),{easingCenter:y,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,h){const y=s.around,_=h.screenPointToLocation(y);s.bearingDelta&&h.setBearing(h.bearing+s.bearingDelta),s.pitchDelta&&h.setPitch(h.pitch+s.pitchDelta),s.rollDelta&&h.setRoll(h.roll+s.rollDelta);const E=h.zoom;s.zoomDelta&&h.setZoom(h.zoom+s.zoomDelta);const I=h.zoom-E;if(I===0)return;const j=a.bA(h.center.lng,_.lng),V=j/(Math.abs(j/180)+1),J=a.bA(h.center.lat,_.lat),re=h.getRayDirectionFromPixel(y),ce=h.cameraPosition,oe=-1*a.aX(ce,re),be=a.bp();a.aS(be,ce,[re[0]*oe,re[1]*oe,re[2]*oe]);const Ie=a.aZ(be)-1,Ze=Math.exp(.5*-Math.max(Ie-.3,0)),We=za(h.worldSize,h.center.lat)/Math.min(h.width,h.height),Xe=a.bn(We,.9,.5,1,.25),it=(1-a.af(-I))*Math.min(Ze,Xe),pt=h.center.lat,ct=h.zoom,_t=new a.S(h.center.lng+V*it,a.ah(h.center.lat+J*it,-a.ai,a.ai));h.setLocationAtPoint(_,y);const Ct=h.center,ft=a.bn(Math.abs(j),45,85,0,1),Dt=a.bn(We,.75,.35,0,1),nr=Math.pow(Math.max(ft,Dt),.25),Ht=a.bA(Ct.lng,_t.lng),Zt=a.bA(Ct.lat,_t.lat);h.setCenter(new a.S(Ct.lng+Ht*nr,Ct.lat+Zt*nr).wrap()),h.setZoom(ct+et(pt,h.center.lat))}handleMapControlsPan(s,h,y){if(!s.panDelta)return;const _=h.center.lat,E=h.zoom;h.setCenter(It(s.panDelta,h).wrap()),h.setZoom(E+et(_,h.center.lat))}cameraForBoxAndBearing(s,h,y,_,E){const I=aa(s,h,y,_,E),j=h.left/E.width*2-1,V=(E.width-h.right)/E.width*2-1,J=h.top/E.height*-2+1,re=(E.height-h.bottom)/E.height*-2+1,ce=a.bA(y.getWest(),y.getEast())<0,oe=ce?y.getEast():y.getWest(),be=ce?y.getWest():y.getEast(),Ie=Math.max(y.getNorth(),y.getSouth()),Ze=Math.min(y.getNorth(),y.getSouth()),We=oe+.5*a.bA(oe,be),Xe=Ie+.5*a.bA(Ie,Ze),it=E.clone();it.setCenter(I.center),it.setBearing(I.bearing),it.setPitch(0),it.setRoll(0),it.setZoom(I.zoom);const pt=it.modelViewProjectionMatrix,ct=[Ei(y.getNorthWest()),Ei(y.getNorthEast()),Ei(y.getSouthWest()),Ei(y.getSouthEast()),Ei(new a.S(be,Xe)),Ei(new a.S(oe,Xe)),Ei(new a.S(We,Ie)),Ei(new a.S(We,Ze))],_t=Ei(I.center);let Ct=Number.POSITIVE_INFINITY;for(const ft of ct)j<0&&(Ct=$n.getLesserNonNegativeNonNull(Ct,$n.solveVectorScale(ft,_t,pt,"x",j))),V>0&&(Ct=$n.getLesserNonNegativeNonNull(Ct,$n.solveVectorScale(ft,_t,pt,"x",V))),J>0&&(Ct=$n.getLesserNonNegativeNonNull(Ct,$n.solveVectorScale(ft,_t,pt,"y",J))),re<0&&(Ct=$n.getLesserNonNegativeNonNull(Ct,$n.solveVectorScale(ft,_t,pt,"y",re)));if(Number.isFinite(Ct)&&Ct!==0)return I.zoom=it.zoom+a.ak(Ct),I;va()}handleJumpToCenterZoom(s,h){const y=s.center.lat,_=s.getConstrained(h.center?a.S.convert(h.center):s.center,s.zoom).center;s.setCenter(_.wrap());const E=h.zoom!==void 0?+h.zoom:s.zoom+et(y,_.lat);s.zoom!==E&&s.setZoom(E)}handleEaseTo(s,h){const y=s.zoom,_=s.center,E=s.padding,I={roll:s.roll,pitch:s.pitch,bearing:s.bearing},j={roll:h.roll===void 0?s.roll:h.roll,pitch:h.pitch===void 0?s.pitch:h.pitch,bearing:h.bearing===void 0?s.bearing:h.bearing},V=h.zoom!==void 0,J=!s.isPaddingEqual(h.padding);let re=!1;const ce=h.center?a.S.convert(h.center):_,oe=s.getConstrained(ce,y).center;Pn(s,oe);const be=s.clone();be.setCenter(oe),be.setZoom(V?+h.zoom:y+et(_.lat,ce.lat)),be.setBearing(h.bearing);const Ie=new a.P(a.ah(s.centerPoint.x+h.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+h.offsetAsPoint.y,0,s.height));be.setLocationAtPoint(oe,Ie);const Ze=(h.offset&&h.offsetAsPoint.mag())>0?be.center:oe,We=V?+h.zoom:y+et(_.lat,Ze.lat),Xe=y+et(_.lat,0),it=We+et(Ze.lat,0),pt=a.bA(_.lng,Ze.lng),ct=a.bA(_.lat,Ze.lat),_t=a.af(it-Xe);return re=We!==y,{easeFunc:Ct=>{if(a.be(I,j)||Gn({startEulerAngles:I,endEulerAngles:j,tr:s,k:Ct,useSlerp:I.roll!=j.roll}),J&&s.interpolatePadding(E,h.padding,Ct),h.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(h.around,h.aroundPoint);else{const ft=it>Xe?Math.min(2,_t):Math.max(.5,_t),Dt=Math.pow(ft,1-Ct),nr=pr(_,pt,ct,Ct*Dt);s.setCenter(nr.wrap())}if(re){const ft=a.C.number(Xe,it,Ct)+et(0,s.center.lat);s.setZoom(ft)}},isZooming:re,elevationCenter:Ze}}handleFlyTo(s,h){const y=h.zoom!==void 0,_=s.center,E=s.zoom,I=s.padding,j=!s.isPaddingEqual(h.padding),V=s.getConstrained(a.S.convert(h.center||h.locationAtOffset),E).center,J=y?+h.zoom:s.zoom+et(s.center.lat,V.lat),re=s.clone();re.setCenter(V),re.setZoom(J),re.setBearing(h.bearing);const ce=new a.P(a.ah(s.centerPoint.x+h.offsetAsPoint.x,0,s.width),a.ah(s.centerPoint.y+h.offsetAsPoint.y,0,s.height));re.setLocationAtPoint(V,ce);const oe=re.center;Pn(s,oe);const be=(function(ct,_t,Ct){const ft=Ei(_t),Dt=Ei(Ct),nr=a.aX(ft,Dt),Ht=Math.acos(nr),Zt=vl(ct);return Ht/(2*Math.PI)*Zt})(s,_,oe),Ie=E+et(_.lat,0),Ze=J+et(oe.lat,0),We=a.af(Ze-Ie);let Xe;if(typeof h.minZoom=="number"){const ct=+h.minZoom+et(oe.lat,0),_t=Math.min(ct,Ie,Ze)+et(0,oe.lat),Ct=s.getConstrained(oe,_t).zoom+et(oe.lat,0);Xe=a.af(Ct-Ie)}const it=a.bA(_.lng,oe.lng),pt=a.bA(_.lat,oe.lat);return{easeFunc:(ct,_t,Ct,ft)=>{const Dt=pr(_,it,pt,Ct);j&&s.interpolatePadding(I,h.padding,ct);const nr=ct===1?oe:Dt;s.setCenter(nr.wrap());const Ht=Ie+a.ak(_t);s.setZoom(ct===1?J:Ht+et(0,nr.lat))},scaleOfZoom:We,targetCenter:oe,scaleOfMinZoom:Xe,pixelPathLength:be}}static solveVectorScale(s,h,y,_,E){const I=_==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],j=[y[3],y[7],y[11],y[15]],V=s[0]*I[0]+s[1]*I[1]+s[2]*I[2],J=s[0]*j[0]+s[1]*j[1]+s[2]*j[2],re=h[0]*I[0]+h[1]*I[1]+h[2]*I[2],ce=h[0]*j[0]+h[1]*j[1]+h[2]*j[2];return re+E*J===V+E*ce||j[3]*(V-re)+I[3]*(ce-J)+V*ce==re*J?null:(re+I[3]-E*ce-E*j[3])/(re-V-E*ce+E*J)}static getLesserNonNegativeNonNull(s,h){return h!==null&&h>=0&&h<s?h:s}}class fa{constructor(s){this._globe=s,this._mercatorCameraHelper=new ja,this._verticalPerspectiveCameraHelper=new $n}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,h){return this.currentHelper.handlePanInertia(s,h)}handleMapControlsRollPitchBearingZoom(s,h){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,h)}handleMapControlsPan(s,h,y){this.currentHelper.handleMapControlsPan(s,h,y)}cameraForBoxAndBearing(s,h,y,_,E){return this.currentHelper.cameraForBoxAndBearing(s,h,y,_,E)}handleJumpToCenterZoom(s,h){this.currentHelper.handleJumpToCenterZoom(s,h)}handleEaseTo(s,h){return this.currentHelper.handleEaseTo(s,h)}handleFlyTo(s,h){return this.currentHelper.handleFlyTo(s,h)}}const zi=(S,s)=>a.y(S,s&&s.filter((h=>h.identifier!=="source.canvas"))),Ma=a.bE();class ss extends a.E{constructor(s,h={}){var y,_;super(),this._rtlPluginLoaded=()=>{for(const I in this.sourceCaches){const j=this.sourceCaches[I].getSource().type;j!=="vector"&&j!=="geojson"||this.sourceCaches[I].reload()}},this.map=s,this.dispatcher=new $e(ke(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",((I,j)=>this.getGlyphs(I,j))),this.dispatcher.registerMessageHandler("GI",((I,j)=>this.getImages(I,j))),this.imageManager=new Y,this.imageManager.setEventedParent(this);const E=((y=s._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new ae(s._requestManager,h.localIdeographFontFamily,E),this.lineAtlas=new xe(256,512),this.crossTileSymbolIndex=new Re,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),gr().on(Kt,this._rtlPluginLoaded),this.on("data",(I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const j=this.sourceCaches[I.sourceId];if(!j)return;const V=j.getSource();if(V&&V.vectorLayerIds)for(const J in this._layers){const re=this._layers[J];re.source===V.id&&this._validateLayer(re)}}))}setGlobalStateProperty(s,h){var y,_,E;this._checkLoaded();const I=h===null?(E=(_=(y=this.stylesheet.state)===null||y===void 0?void 0:y[s])===null||_===void 0?void 0:_.default)!==null&&E!==void 0?E:null:h;if(a.bH(I,this._globalState[s]))return this;this._globalState[s]=I,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const h=[];for(const y in s)!a.bH(this._globalState[y],s[y].default)&&(h.push(y),this._globalState[y]=s[y].default);this._applyGlobalStateChanges(h)}_applyGlobalStateChanges(s){if(s.length===0)return;const h=new Set;for(const y in this._layers){const _=this._layers[y],E=_.getLayoutAffectingGlobalStateRefs(),I=_.getPaintAffectingGlobalStateRefs();for(const j of s)if(E.has(j)&&h.add(_.source),I.has(j))for(const{name:V,value:J}of I.get(j))this._updatePaintProperty(_,V,J)}for(const y in this.sourceCaches)h.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(s,h={},y){this.fire(new a.l("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const _=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const E=this._loadStyleRequest;a.j(_,this._loadStyleRequest).then((I=>{this._loadStyleRequest=null,this._load(I.data,h,y)})).catch((I=>{this._loadStyleRequest=null,I&&!E.signal.aborted&&this.fire(new a.k(I))}))}loadJSON(s,h={},y){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(s,h,y)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Ma,{validate:!1})}_load(s,h,y){var _,E;let I=h.transformStyle?h.transformStyle(y,s):s;if(!h.validate||!zi(this,a.z(I))){I=Object.assign({},I),this._loaded=!0,this.stylesheet=I;for(const j in I.sources)this.addSource(j,I.sources[j],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new ye(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new ge(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var s;const h=a.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",h),this._order=h.map((y=>y.id)),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(const y of h){const _=a.bJ(y);_.setEventedParent(this,{layer:{id:y.id}}),_.setGlobalState(this._globalState),this._layers[y.id]=_}}_loadSprite(s,h=!1,y=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(E,I,j,V){return a._(this,void 0,void 0,(function*(){const J=z(E),re=j>1?"@2x":"",ce={},oe={};for(const{id:be,url:Ie}of J){const Ze=I.transformRequest(Z(Ie,re,".json"),"SpriteJSON");ce[be]=a.j(Ze,V);const We=I.transformRequest(Z(Ie,re,".png"),"SpriteImage");oe[be]=D.getImage(We,V)}return yield Promise.all([...Object.values(ce),...Object.values(oe)]),(function(be,Ie){return a._(this,void 0,void 0,(function*(){const Ze={};for(const We in be){Ze[We]={};const Xe=w.getImageCanvasContext((yield Ie[We]).data),it=(yield be[We]).data;for(const pt in it){const{width:ct,height:_t,x:Ct,y:ft,sdf:Dt,pixelRatio:nr,stretchX:Ht,stretchY:Zt,content:Qt,textFitWidth:Or,textFitHeight:Lr}=it[pt];Ze[We][pt]={data:null,pixelRatio:nr,sdf:Dt,stretchX:Ht,stretchY:Zt,content:Qt,textFitWidth:Or,textFitHeight:Lr,spriteData:{width:ct,height:_t,x:Ct,y:ft,context:Xe}}}}return Ze}))})(ce,oe)}))})(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((E=>{if(this._spriteRequest=null,E)for(const I in E){this._spritesImagesIds[I]=[];const j=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter((V=>!(V in E))):[];for(const V of j)this.imageManager.removeImage(V),this._changedImages[V]=!0;for(const V in E[I]){const J=I==="default"?V:`${I}:${V}`;this._spritesImagesIds[I].push(J),J in this.imageManager.images?this.imageManager.updateImage(J,E[I][V],!1):this.imageManager.addImage(J,E[I][V]),h&&(this._changedImages[J]=!0)}}})).catch((E=>{this._spriteRequest=null,_=E,this.fire(new a.k(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),y&&y(_)}))}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const h=this.sourceCaches[s.source];if(!h)return;const y=s.sourceLayer;if(!y)return;const _=h.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.k(new Error(`Source layer "${y}" does not exist on source "${_.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,h=!1){const y=this._serializedAllLayers();if(!s||s.length===0)return Object.values(h?a.bK(y):y);const _=[];for(const E of s)if(y[E]){const I=h?a.bK(y[E]):y[E];_.push(I)}return _}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const h=Object.keys(this._layers);for(const y of h){const _=this._layers[y];_.type!=="custom"&&(s[y]=_.serialize())}return s}hasTransitions(){var s,h,y;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((h=this.sky)===null||h===void 0)&&h.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const h=this._changed;if(h){const _=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(_.length||E.length)&&this._updateWorkerLayers(_,E);for(const I in this._updatedSources){const j=this._updatedSources[I];if(j==="reload")this._reloadSource(I);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const y={};for(const _ in this.sourceCaches){const E=this.sourceCaches[_];y[_]=E.used,E.used=!1}for(const _ of this._order){const E=this._layers[_];E.recalculate(s,this._availableImages),!E.isHidden(s.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const _ in y){const E=this.sourceCaches[_];!!y[_]!=!!E.used&&E.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,h&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,h={}){var y;this._checkLoaded();const _=this.serialize();if(s=h.transformStyle?h.transformStyle(_,s):s,((y=h.validate)===null||y===void 0||y)&&zi(this,a.z(s)))return!1;(s=a.bK(s)).layers=a.bI(s.layers);const E=a.bL(_,s),I=this._getOperationsToPerform(E);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const j of I.operations)j();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const h=[],y=[];for(const _ of s)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":h.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":h.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":h.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":h.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":h.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":h.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":h.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":h.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":h.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":h.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":h.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":h.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":h.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":h.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":h.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":h.push((()=>{}));break;default:y.push(_.command)}return{operations:h,unimplemented:y}}addImage(s,h){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,h),this._afterImageUpdated(s)}updateImage(s,h){this.imageManager.updateImage(s,h)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,h,y={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(a.z.source,`sources.${s}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const _=this.sourceCaches[s]=new Mr(s,h,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:s}))),_.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${y}" is using it.`)));const h=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],h.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,h){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const y=this.sourceCaches[s].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(h),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,h,y={}){this._checkLoaded();const _=s.id;if(this.getLayer(_))return void this.fire(new a.k(new Error(`Layer "${_}" already exists on this map.`)));let E;if(s.type==="custom"){if(zi(this,a.bM(s)))return;E=a.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(_,s.source),s=a.bK(s),s=a.e(s,{source:_})),this._validate(a.z.layer,`layers.${_}`,s,{arrayIndex:-1},y))return;E=a.bJ(s),this._validateLayer(E),E.setEventedParent(this,{layer:{id:_}})}const I=h?this._order.indexOf(h):this._order.length;if(h&&I===-1)this.fire(new a.k(new Error(`Cannot add layer "${_}" before non-existing layer "${h}".`)));else{if(this._order.splice(I,0,_),this._layerOrderChanged=!0,this._layers[_]=E,this._removedLayers[_]&&E.source&&E.type!=="custom"){const j=this._removedLayers[_];delete this._removedLayers[_],j.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(s,h){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===h)return;const y=this._order.indexOf(s);this._order.splice(y,1);const _=h?this._order.indexOf(h):this._order.length;h&&_===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${h}".`))):(this._order.splice(_,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const h=this._layers[s];if(!h)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));h.setEventedParent(null);const y=this._order.indexOf(s);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=h,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],h.onRemove&&h.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,h,y){this._checkLoaded();const _=this.getLayer(s);_?_.minzoom===h&&_.maxzoom===y||(h!=null&&(_.minzoom=h),y!=null&&(_.maxzoom=y),this._updateLayer(_)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,h,y={}){this._checkLoaded();const _=this.getLayer(s);if(_){if(!a.bH(_.filter,h))return h==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(a.z.filter,`layers.${_.id}.filter`,h,null,y)||(_.setFilter(a.bK(h)),this._updateLayer(_)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bK(this.getLayer(s).filter)}setLayoutProperty(s,h,y,_={}){this._checkLoaded();const E=this.getLayer(s);E?a.bH(E.getLayoutProperty(h),y)||(E.setLayoutProperty(h,y,_),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,h){const y=this.getLayer(s);if(y)return y.getLayoutProperty(h);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,h,y,_={}){this._checkLoaded();const E=this.getLayer(s);E?a.bH(E.getPaintProperty(h),y)||this._updatePaintProperty(E,h,y,_):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,h,y,_={}){s.setPaintProperty(h,y,_)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,h){return this.getLayer(s).getPaintProperty(h)}setFeatureState(s,h){this._checkLoaded();const y=s.source,_=s.sourceLayer,E=this.sourceCaches[y];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const I=E.getSource().type;I==="geojson"&&_?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||_?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(_,s.id,h)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,h){this._checkLoaded();const y=s.source,_=this.sourceCaches[y];if(_===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const E=_.getSource().type,I=E==="vector"?s.sourceLayer:void 0;E!=="vector"||I?h&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(I,s.id,h):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const h=s.source,y=s.sourceLayer,_=this.sourceCaches[h];if(_!==void 0)return _.getSource().type!=="vector"||y?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(y,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bN(this.sourceCaches,(E=>E.serialize())),h=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,_=this.stylesheet;return a.bO({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:s,layers:h,terrain:y},(E=>E!==void 0))}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const h=I=>this._layers[I].type==="fill-extrusion",y={},_=[];for(let I=this._order.length-1;I>=0;I--){const j=this._order[I];if(h(j)){y[j]=I;for(const V of s){const J=V[j];if(J)for(const re of J)_.push(re)}}}_.sort(((I,j)=>j.intersectionZ-I.intersectionZ));const E=[];for(let I=this._order.length-1;I>=0;I--){const j=this._order[I];if(h(j))for(let V=_.length-1;V>=0;V--){const J=_[V].feature;if(y[J.layer.id]<I)break;E.push(J),_.pop()}else for(const V of s){const J=V[j];if(J)for(const re of J)E.push(re.feature)}}return E}queryRenderedFeatures(s,h,y){h&&h.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",h.filter,null,h);const _={};if(h&&h.layers){if(!(Array.isArray(h.layers)||h.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const J of h.layers){const re=this._layers[J];if(!re)return this.fire(new a.k(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];_[re.source]=!0}}const E=[];h.availableImages=this._availableImages;const I=this._serializedAllLayers(),j=h.layers instanceof Set?h.layers:Array.isArray(h.layers)?new Set(h.layers):null,V=Object.assign(Object.assign({},h),{layers:j});for(const J in this.sourceCaches)h.layers&&!_[J]||E.push(mt(this.sourceCaches[J],this._layers,I,s,V,y,this.map.terrain?(re,ce,oe)=>this.map.terrain.getElevation(re,ce,oe):void 0));return this.placement&&E.push((function(J,re,ce,oe,be,Ie,Ze){const We={},Xe=Ie.queryRenderedSymbols(oe),it=[];for(const pt of Object.keys(Xe).map(Number))it.push(Ze[pt]);it.sort(rt);for(const pt of it){const ct=pt.featureIndex.lookupSymbolFeatures(Xe[pt.bucketInstanceId],re,pt.bucketIndex,pt.sourceLayerIndex,be.filter,be.layers,be.availableImages,J);for(const _t in ct){const Ct=We[_t]=We[_t]||[],ft=ct[_t];ft.sort(((Dt,nr)=>{const Ht=pt.featureSortOrder;if(Ht){const Zt=Ht.indexOf(Dt.featureIndex);return Ht.indexOf(nr.featureIndex)-Zt}return nr.featureIndex-Dt.featureIndex}));for(const Dt of ft)Ct.push(Dt)}}return(function(pt,ct,_t){for(const Ct in pt)for(const ft of pt[Ct])Lt(ft,_t[ct[Ct].source]);return pt})(We,J,ce)})(this._layers,I,this.sourceCaches,s,V,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(s,h){h&&h.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",h.filter,null,h);const y=this.sourceCaches[s];return y?(function(_,E){const I=_.getRenderableIds().map((J=>_.getTileByID(J))),j=[],V={};for(let J=0;J<I.length;J++){const re=I[J],ce=re.tileID.canonical.key;V[ce]||(V[ce]=!0,re.querySourceFeatures(j,E))}return j})(y,h):[]}getLight(){return this.light.getLight()}setLight(s,h={}){this._checkLoaded();const y=this.light.getLight();let _=!1;for(const I in s)if(!a.bH(s[I],y[I])){_=!0;break}if(!_)return;const E={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,h),this.light.updateTransitions(E)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,h={}){this._checkLoaded();const y=this.getSky();let _=!1;if(!s&&!y)return;if(s&&!y)_=!0;else if(!s&&y)_=!0;else for(const I in s)if(!a.bH(s[I],y[I])){_=!0;break}if(!_)return;const E={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,h),this.sky.updateTransitions(E)}_setProjectionInternal(s){const h=(function(y){if(Array.isArray(y)){const _=new Rs({type:y});return{projection:_,transform:new ta,cameraHelper:new fa(_)}}switch(y){case"mercator":return{projection:new fr,transform:new bn,cameraHelper:new ja};case"globe":{const _=new Rs({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new ta,cameraHelper:new fa(_)}}case"vertical-perspective":return{projection:new Zs,transform:new Ni,cameraHelper:new $n};default:return a.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new fr,transform:new bn,cameraHelper:new ja}}})(s);this.projection=h.projection,this.map.migrateProjection(h.transform,h.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(s,h,y,_,E={}){return(!E||E.validate!==!1)&&zi(this,s.call(a.z,a.e({key:h,style:this.serialize(),value:y,styleSpec:a.v},_)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),gr().off(Kt,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const y=this.sourceCaches[h];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const h in this.sourceCaches)this.sourceCaches[h].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,h,y,_,E=!1){let I=!1,j=!1;const V={};for(const J of this._order){const re=this._layers[J];if(re.type!=="symbol")continue;if(!V[re.source]){const oe=this.sourceCaches[re.source];V[re.source]=oe.getRenderableIds(!0).map((be=>oe.getTileByID(be))).sort(((be,Ie)=>Ie.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ie.tileID)?-1:1)))}const ce=this.crossTileSymbolIndex.addLayer(re,V[re.source],s.center.lng);I=I||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),s.zoom))&&(this.pauseablePlacement=new cu(s,this.map.terrain,this._order,E,h,y,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),j=!0),I&&this.pauseablePlacement.placement.setStale()),j||I)for(const J of this._order){const re=this._layers[J];re.type==="symbol"&&this.placement.updateLayerOpacities(re,V[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,h){return a._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,h.icons),y}))}getGlyphs(s,h){return a._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(h.stacks),_=this.sourceCaches[h.source];return _&&_.setDependencies(h.tileID.key,h.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,h={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,h,y={},_){this._checkLoaded();const E=[{id:s,url:h}],I=[...z(this.stylesheet.sprite),...E];this._validate(a.z.sprite,"sprite",I,null,y)||(this.stylesheet.sprite=I,this._loadSprite(E,!0,_))}removeSprite(s){this._checkLoaded();const h=z(this.stylesheet.sprite);if(h.find((y=>y.id===s))){if(this._spritesImagesIds[s])for(const y of this._spritesImagesIds[s])this.imageManager.removeImage(y),this._changedImages[y]=!0;h.splice(h.findIndex((y=>y.id===s)),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return z(this.stylesheet.sprite)}setSprite(s,h={},y){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,h)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,y):(this._unloadSprite(),y&&y(null)))}}var Ks=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class fu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,h,y,_,E,I,j,V,J){this.context=s;let re=this.boundPaintVertexBuffers.length!==_.length;for(let ce=0;!re&&ce<_.length;ce++)this.boundPaintVertexBuffers[ce]!==_[ce]&&(re=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||re||this.boundIndexBuffer!==E||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==V||this.boundDynamicVertexBuffer3!==J?this.freshBind(h,y,_,E,I,j,V,J):(s.bindVertexArray.set(this.vao),j&&j.bind(),E&&E.dynamicDraw&&E.bind(),V&&V.bind(),J&&J.bind())}freshBind(s,h,y,_,E,I,j,V){const J=s.numAttributes,re=this.context,ce=re.gl;this.vao&&this.destroy(),this.vao=re.createVertexArray(),re.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=_,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=V,h.enableAttributes(ce,s);for(const oe of y)oe.enableAttributes(ce,s);I&&I.enableAttributes(ce,s),j&&j.enableAttributes(ce,s),V&&V.enableAttributes(ce,s),h.bind(),h.setVertexAttribPointers(ce,s,E);for(const oe of y)oe.bind(),oe.setVertexAttribPointers(ce,s,E);I&&(I.bind(),I.setVertexAttribPointers(ce,s,E)),_&&_.bind(),j&&(j.bind(),j.setVertexAttribPointers(ce,s,E)),V&&(V.bind(),V.setVertexAttribPointers(ce,s,E)),re.currentNumAttributes=J}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hu=(S,s,h,y,_)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:s,u_fog_color:h?h.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:h?h.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:h?h.calculateFogBlendOpacity(y):0,u_horizon_color:h?h.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:h?h.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),bl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function eo(S){const s=[];for(let h=0;h<S.length;h++){if(S[h]===null)continue;const y=S[h].split(" ");s.push(y.pop())}return s}class du{constructor(s,h,y,_,E,I,j,V,J=[]){const re=s.gl;this.program=re.createProgram();const ce=eo(h.staticAttributes),oe=y?y.getBinderAttributes():[],be=ce.concat(oe),Ie=St.prelude.staticUniforms?eo(St.prelude.staticUniforms):[],Ze=j.staticUniforms?eo(j.staticUniforms):[],We=h.staticUniforms?eo(h.staticUniforms):[],Xe=y?y.getBinderUniforms():[],it=Ie.concat(Ze).concat(We).concat(Xe),pt=[];for(const Ht of it)pt.indexOf(Ht)<0&&pt.push(Ht);const ct=y?y.defines():[];oo(re)&&ct.unshift("#version 300 es"),E&&ct.push("#define OVERDRAW_INSPECTOR;"),I&&ct.push("#define TERRAIN3D;"),V&&ct.push(V),J&&ct.push(...J);let _t=ct.concat(St.prelude.fragmentSource,j.fragmentSource,h.fragmentSource).join(`
`),Ct=ct.concat(St.prelude.vertexSource,j.vertexSource,h.vertexSource).join(`
`);oo(re)||(_t=(function(Ht){return Ht.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(_t),Ct=(function(Ht){return Ht.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ct));const ft=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(ft,_t),re.compileShader(ft),!re.getShaderParameter(ft,re.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${re.getShaderInfoLog(ft)}`);re.attachShader(this.program,ft);const Dt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(Dt,Ct),re.compileShader(Dt),!re.getShaderParameter(Dt,re.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${re.getShaderInfoLog(Dt)}`);re.attachShader(this.program,Dt),this.attributes={};const nr={};this.numAttributes=be.length;for(let Ht=0;Ht<this.numAttributes;Ht++)be[Ht]&&(re.bindAttribLocation(this.program,Ht,be[Ht]),this.attributes[be[Ht]]=Ht);if(re.linkProgram(this.program),!re.getProgramParameter(this.program,re.LINK_STATUS))throw new Error(`Program failed to link: ${re.getProgramInfoLog(this.program)}`);re.deleteShader(Dt),re.deleteShader(ft);for(let Ht=0;Ht<pt.length;Ht++){const Zt=pt[Ht];if(Zt&&!nr[Zt]){const Qt=re.getUniformLocation(this.program,Zt);Qt&&(nr[Zt]=Qt)}}this.fixedUniforms=_(s,nr),this.terrainUniforms=((Ht,Zt)=>({u_depth:new a.bP(Ht,Zt.u_depth),u_terrain:new a.bP(Ht,Zt.u_terrain),u_terrain_dim:new a.bg(Ht,Zt.u_terrain_dim),u_terrain_matrix:new a.bR(Ht,Zt.u_terrain_matrix),u_terrain_unpack:new a.bS(Ht,Zt.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Ht,Zt.u_terrain_exaggeration)}))(s,nr),this.projectionUniforms=((Ht,Zt)=>({u_projection_matrix:new a.bR(Ht,Zt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(Ht,Zt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(Ht,Zt.u_projection_clipping_plane),u_projection_transition:new a.bg(Ht,Zt.u_projection_transition),u_projection_fallback_matrix:new a.bR(Ht,Zt.u_projection_fallback_matrix)}))(s,nr),this.binderUniforms=y?y.getUniforms(s,nr):[]}draw(s,h,y,_,E,I,j,V,J,re,ce,oe,be,Ie,Ze,We,Xe,it,pt){const ct=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(y),s.setStencilMode(_),s.setColorMode(E),s.setCullFace(I),V){s.activeTexture.set(ct.TEXTURE2),ct.bindTexture(ct.TEXTURE_2D,V.depthTexture),s.activeTexture.set(ct.TEXTURE3),ct.bindTexture(ct.TEXTURE_2D,V.texture);for(const Ct in this.terrainUniforms)this.terrainUniforms[Ct].set(V[Ct])}if(J)for(const Ct in J)this.projectionUniforms[bl[Ct]].set(J[Ct]);if(j)for(const Ct in this.fixedUniforms)this.fixedUniforms[Ct].set(j[Ct]);We&&We.setUniforms(s,this.binderUniforms,Ie,{zoom:Ze});let _t=0;switch(h){case ct.LINES:_t=2;break;case ct.TRIANGLES:_t=3;break;case ct.LINE_STRIP:_t=1}for(const Ct of be.get()){const ft=Ct.vaos||(Ct.vaos={});(ft[re]||(ft[re]=new fu)).bind(s,this,ce,We?We.getPaintVertexBuffers():[],oe,Ct.vertexOffset,Xe,it,pt),ct.drawElements(h,Ct.primitiveLength*_t,ct.UNSIGNED_SHORT,Ct.primitiveOffset*_t*2)}}}function _l(S,s,h){const y=1/a.aC(h,1,s.transform.tileZoom),_=Math.pow(2,h.tileID.overscaledZ),E=h.tileSize*Math.pow(2,s.transform.tileZoom)/_,I=E*(h.tileID.canonical.x+h.tileID.wrap*_),j=E*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[y,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[I>>16,j>>16],u_pixel_coord_lower:[65535&I,65535&j]}}const Ra=(S,s,h,y)=>{const _=S.style.light,E=_.properties.get("position"),I=[E.x,E.y,E.z],j=a.bV();_.properties.get("anchor")==="viewport"&&a.bW(j,S.transform.bearingInRadians),a.bX(I,I,j);const V=S.transform.transformLightDirection(I),J=_.properties.get("color");return{u_lightpos:I,u_lightpos_globe:V,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+s,u_opacity:h,u_fill_translate:y}},wa=(S,s,h,y,_,E,I)=>a.e(Ra(S,s,h,y),_l(E,S,I),{u_height_factor:-Math.pow(2,_.overscaledZ)/I.tileSize/8}),$a=(S,s,h,y)=>a.e(_l(s,S,h),{u_fill_translate:y}),ba=(S,s)=>({u_world:S,u_fill_translate:s}),so=(S,s,h,y,_)=>a.e($a(S,s,h,_),{u_world:y}),zl=(S,s,h,y,_)=>{const E=S.transform;let I,j,V=0;if(h.paint.get("circle-pitch-alignment")==="map"){const J=a.aC(s,1,E.zoom);I=!0,j=[J,J],V=J/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*_}else I=!1,j=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+I,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:j,u_globe_extrude_scale:V,u_translate:y}},Wi=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),Uc=S=>({u_viewport_size:[S.width,S.height]}),Mo=(S,s=1)=>({u_color:S,u_overlay:0,u_overlay_scale:s}),xl=(S,s,h,y)=>{const _=a.aC(S,1,s)/(a.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:a.aC(S,1,s),u_intensity:h,u_globe_extrude_scale:_}},ha=(S,s,h,y)=>{const _=a.L();a.bY(_,0,S.width,S.height,0,0,1);const E=S.context.gl;return{u_matrix:_,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:h,u_color_ramp:y,u_opacity:s.paint.get("heatmap-opacity")}},ls=(S,s,h)=>{const y=h.paint.get("hillshade-accent-color");let _;switch(h.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const E=h.getIlluminationProperties();for(let I=0;I<E.directionRadians.length;I++)h.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[I]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:pu(0,s.tileID),u_exaggeration:h.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:y,u_method:_,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},Uu=(S,s)=>{const h=s.stride,y=a.L();return a.bY(y,0,a.$,-a.$,0,0,1),a.M(y,y,[0,-a.$,0]),{u_matrix:y,u_image:1,u_dimension:[h,h],u_zoom:S.overscaledZ,u_unpack:s.getUnpackVector()}};function pu(S,s){const h=Math.pow(2,s.canonical.z),y=s.canonical.y;return[new a.a1(0,y/h).toLngLat().lat,new a.a1(0,(y+1)/h).toLngLat().lat]}const Xs=(S,s,h=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:h,u_opacity:S.paint.get("color-relief-opacity")}),Ys=(S,s,h,y)=>{const _=S.transform;return{u_translation:Js(S,s,h),u_ratio:y/a.aC(s,1,_.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ua=(S,s,h,y,_)=>a.e(Ys(S,s,h,y),{u_image:0,u_image_height:_}),Sa=(S,s,h,y,_)=>{const E=S.transform,I=Oa(s,E);return{u_translation:Js(S,s,h),u_texsize:s.imageAtlasTexture.size,u_ratio:y/a.aC(s,1,E.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[I,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},us=(S,s,h,y,_,E)=>{const I=S.lineAtlas,j=Oa(s,S.transform),V=h.layout.get("line-cap")==="round",J=I.getDash(_.from,V),re=I.getDash(_.to,V),ce=J.width*E.fromScale,oe=re.width*E.toScale;return a.e(Ys(S,s,h,y),{u_patternscale_a:[j/ce,-J.height/2],u_patternscale_b:[j/oe,-re.height/2],u_sdfgamma:I.width/(256*Math.min(ce,oe)*S.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:re.y,u_mix:E.t})};function Oa(S,s){return 1/a.aC(S,1,s.tileZoom)}function Js(S,s,h){return a.aD(S.transform,s,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Ro=(S,s,h,y,_)=>{return{u_tl_parent:S,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(I=y.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(E=y.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:wl(y.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var E,I};function wl(S){S*=Math.PI/180;const s=Math.sin(S),h=Math.cos(S);return[(2*h+1)/3,(-Math.sqrt(3)*s-h+1)/3,(Math.sqrt(3)*s-h+1)/3]}const Zi=(S,s,h,y,_,E,I,j,V,J,re,ce,oe)=>{const be=I.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:be.cameraToCenterDistance,u_pitch:be.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:be.width/be.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_label_plane_matrix:j,u_coord_matrix:V,u_is_text:+re,u_pitch_with_map:+y,u_is_along_line:_,u_is_variable_anchor:E,u_texsize:ce,u_texture:0,u_translation:J,u_pitched_scale:oe}},mu=(S,s,h,y,_,E,I,j,V,J,re,ce,oe,be)=>{const Ie=I.transform;return a.e(Zi(S,s,h,y,_,E,I,j,V,J,re,ce,be),{u_gamma_scale:y?Math.cos(Ie.pitch*Math.PI/180)*Ie.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},vs=(S,s,h,y,_,E,I,j,V,J,re,ce,oe)=>a.e(mu(S,s,h,y,_,E,I,j,V,J,!0,re,0,oe),{u_texsize_icon:ce,u_texture_icon:1}),bs=(S,s)=>({u_opacity:S,u_color:s}),$l=(S,s,h,y,_)=>a.e((function(E,I,j,V){const J=j.imageManager.getPattern(E.from.toString()),re=j.imageManager.getPattern(E.to.toString()),{width:ce,height:oe}=j.imageManager.getPixelSize(),be=Math.pow(2,V.tileID.overscaledZ),Ie=V.tileSize*Math.pow(2,j.transform.tileZoom)/be,Ze=Ie*(V.tileID.canonical.x+V.tileID.wrap*be),We=Ie*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[ce,oe],u_mix:I.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/a.aC(V,1,j.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,We>>16],u_pixel_coord_lower:[65535&Ze,65535&We]}})(h,_,s,y),{u_opacity:S}),Ul=(S,s)=>{},_s={fillExtrusion:(S,s)=>({u_lightpos:new a.bT(S,s.u_lightpos),u_lightpos_globe:new a.bT(S,s.u_lightpos_globe),u_lightintensity:new a.bg(S,s.u_lightintensity),u_lightcolor:new a.bT(S,s.u_lightcolor),u_vertical_gradient:new a.bg(S,s.u_vertical_gradient),u_opacity:new a.bg(S,s.u_opacity),u_fill_translate:new a.bU(S,s.u_fill_translate)}),fillExtrusionPattern:(S,s)=>({u_lightpos:new a.bT(S,s.u_lightpos),u_lightpos_globe:new a.bT(S,s.u_lightpos_globe),u_lightintensity:new a.bg(S,s.u_lightintensity),u_lightcolor:new a.bT(S,s.u_lightcolor),u_vertical_gradient:new a.bg(S,s.u_vertical_gradient),u_height_factor:new a.bg(S,s.u_height_factor),u_opacity:new a.bg(S,s.u_opacity),u_fill_translate:new a.bU(S,s.u_fill_translate),u_image:new a.bP(S,s.u_image),u_texsize:new a.bU(S,s.u_texsize),u_pixel_coord_upper:new a.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(S,s.u_pixel_coord_lower),u_scale:new a.bT(S,s.u_scale),u_fade:new a.bg(S,s.u_fade)}),fill:(S,s)=>({u_fill_translate:new a.bU(S,s.u_fill_translate)}),fillPattern:(S,s)=>({u_image:new a.bP(S,s.u_image),u_texsize:new a.bU(S,s.u_texsize),u_pixel_coord_upper:new a.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(S,s.u_pixel_coord_lower),u_scale:new a.bT(S,s.u_scale),u_fade:new a.bg(S,s.u_fade),u_fill_translate:new a.bU(S,s.u_fill_translate)}),fillOutline:(S,s)=>({u_world:new a.bU(S,s.u_world),u_fill_translate:new a.bU(S,s.u_fill_translate)}),fillOutlinePattern:(S,s)=>({u_world:new a.bU(S,s.u_world),u_image:new a.bP(S,s.u_image),u_texsize:new a.bU(S,s.u_texsize),u_pixel_coord_upper:new a.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(S,s.u_pixel_coord_lower),u_scale:new a.bT(S,s.u_scale),u_fade:new a.bg(S,s.u_fade),u_fill_translate:new a.bU(S,s.u_fill_translate)}),circle:(S,s)=>({u_camera_to_center_distance:new a.bg(S,s.u_camera_to_center_distance),u_scale_with_map:new a.bP(S,s.u_scale_with_map),u_pitch_with_map:new a.bP(S,s.u_pitch_with_map),u_extrude_scale:new a.bU(S,s.u_extrude_scale),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(S,s.u_globe_extrude_scale),u_translate:new a.bU(S,s.u_translate)}),collisionBox:(S,s)=>({u_pixel_extrude_scale:new a.bU(S,s.u_pixel_extrude_scale)}),collisionCircle:(S,s)=>({u_viewport_size:new a.bU(S,s.u_viewport_size)}),debug:(S,s)=>({u_color:new a.bQ(S,s.u_color),u_overlay:new a.bP(S,s.u_overlay),u_overlay_scale:new a.bg(S,s.u_overlay_scale)}),depth:Ul,clippingMask:Ul,heatmap:(S,s)=>({u_extrude_scale:new a.bg(S,s.u_extrude_scale),u_intensity:new a.bg(S,s.u_intensity),u_globe_extrude_scale:new a.bg(S,s.u_globe_extrude_scale)}),heatmapTexture:(S,s)=>({u_matrix:new a.bR(S,s.u_matrix),u_world:new a.bU(S,s.u_world),u_image:new a.bP(S,s.u_image),u_color_ramp:new a.bP(S,s.u_color_ramp),u_opacity:new a.bg(S,s.u_opacity)}),hillshade:(S,s)=>({u_image:new a.bP(S,s.u_image),u_latrange:new a.bU(S,s.u_latrange),u_exaggeration:new a.bg(S,s.u_exaggeration),u_altitudes:new a.b_(S,s.u_altitudes),u_azimuths:new a.b_(S,s.u_azimuths),u_accent:new a.bQ(S,s.u_accent),u_method:new a.bP(S,s.u_method),u_shadows:new a.bZ(S,s.u_shadows),u_highlights:new a.bZ(S,s.u_highlights)}),hillshadePrepare:(S,s)=>({u_matrix:new a.bR(S,s.u_matrix),u_image:new a.bP(S,s.u_image),u_dimension:new a.bU(S,s.u_dimension),u_zoom:new a.bg(S,s.u_zoom),u_unpack:new a.bS(S,s.u_unpack)}),colorRelief:(S,s)=>({u_image:new a.bP(S,s.u_image),u_unpack:new a.bS(S,s.u_unpack),u_dimension:new a.bU(S,s.u_dimension),u_elevation_stops:new a.bP(S,s.u_elevation_stops),u_color_stops:new a.bP(S,s.u_color_stops),u_color_ramp_size:new a.bP(S,s.u_color_ramp_size),u_opacity:new a.bg(S,s.u_opacity)}),line:(S,s)=>({u_translation:new a.bU(S,s.u_translation),u_ratio:new a.bg(S,s.u_ratio),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(S,s.u_units_to_pixels)}),lineGradient:(S,s)=>({u_translation:new a.bU(S,s.u_translation),u_ratio:new a.bg(S,s.u_ratio),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(S,s.u_units_to_pixels),u_image:new a.bP(S,s.u_image),u_image_height:new a.bg(S,s.u_image_height)}),linePattern:(S,s)=>({u_translation:new a.bU(S,s.u_translation),u_texsize:new a.bU(S,s.u_texsize),u_ratio:new a.bg(S,s.u_ratio),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_image:new a.bP(S,s.u_image),u_units_to_pixels:new a.bU(S,s.u_units_to_pixels),u_scale:new a.bT(S,s.u_scale),u_fade:new a.bg(S,s.u_fade)}),lineSDF:(S,s)=>({u_translation:new a.bU(S,s.u_translation),u_ratio:new a.bg(S,s.u_ratio),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bU(S,s.u_units_to_pixels),u_patternscale_a:new a.bU(S,s.u_patternscale_a),u_patternscale_b:new a.bU(S,s.u_patternscale_b),u_sdfgamma:new a.bg(S,s.u_sdfgamma),u_image:new a.bP(S,s.u_image),u_tex_y_a:new a.bg(S,s.u_tex_y_a),u_tex_y_b:new a.bg(S,s.u_tex_y_b),u_mix:new a.bg(S,s.u_mix)}),raster:(S,s)=>({u_tl_parent:new a.bU(S,s.u_tl_parent),u_scale_parent:new a.bg(S,s.u_scale_parent),u_buffer_scale:new a.bg(S,s.u_buffer_scale),u_fade_t:new a.bg(S,s.u_fade_t),u_opacity:new a.bg(S,s.u_opacity),u_image0:new a.bP(S,s.u_image0),u_image1:new a.bP(S,s.u_image1),u_brightness_low:new a.bg(S,s.u_brightness_low),u_brightness_high:new a.bg(S,s.u_brightness_high),u_saturation_factor:new a.bg(S,s.u_saturation_factor),u_contrast_factor:new a.bg(S,s.u_contrast_factor),u_spin_weights:new a.bT(S,s.u_spin_weights),u_coords_top:new a.bS(S,s.u_coords_top),u_coords_bottom:new a.bS(S,s.u_coords_bottom)}),symbolIcon:(S,s)=>({u_is_size_zoom_constant:new a.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(S,s.u_is_size_feature_constant),u_size_t:new a.bg(S,s.u_size_t),u_size:new a.bg(S,s.u_size),u_camera_to_center_distance:new a.bg(S,s.u_camera_to_center_distance),u_pitch:new a.bg(S,s.u_pitch),u_rotate_symbol:new a.bP(S,s.u_rotate_symbol),u_aspect_ratio:new a.bg(S,s.u_aspect_ratio),u_fade_change:new a.bg(S,s.u_fade_change),u_label_plane_matrix:new a.bR(S,s.u_label_plane_matrix),u_coord_matrix:new a.bR(S,s.u_coord_matrix),u_is_text:new a.bP(S,s.u_is_text),u_pitch_with_map:new a.bP(S,s.u_pitch_with_map),u_is_along_line:new a.bP(S,s.u_is_along_line),u_is_variable_anchor:new a.bP(S,s.u_is_variable_anchor),u_texsize:new a.bU(S,s.u_texsize),u_texture:new a.bP(S,s.u_texture),u_translation:new a.bU(S,s.u_translation),u_pitched_scale:new a.bg(S,s.u_pitched_scale)}),symbolSDF:(S,s)=>({u_is_size_zoom_constant:new a.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(S,s.u_is_size_feature_constant),u_size_t:new a.bg(S,s.u_size_t),u_size:new a.bg(S,s.u_size),u_camera_to_center_distance:new a.bg(S,s.u_camera_to_center_distance),u_pitch:new a.bg(S,s.u_pitch),u_rotate_symbol:new a.bP(S,s.u_rotate_symbol),u_aspect_ratio:new a.bg(S,s.u_aspect_ratio),u_fade_change:new a.bg(S,s.u_fade_change),u_label_plane_matrix:new a.bR(S,s.u_label_plane_matrix),u_coord_matrix:new a.bR(S,s.u_coord_matrix),u_is_text:new a.bP(S,s.u_is_text),u_pitch_with_map:new a.bP(S,s.u_pitch_with_map),u_is_along_line:new a.bP(S,s.u_is_along_line),u_is_variable_anchor:new a.bP(S,s.u_is_variable_anchor),u_texsize:new a.bU(S,s.u_texsize),u_texture:new a.bP(S,s.u_texture),u_gamma_scale:new a.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_is_halo:new a.bP(S,s.u_is_halo),u_translation:new a.bU(S,s.u_translation),u_pitched_scale:new a.bg(S,s.u_pitched_scale)}),symbolTextAndIcon:(S,s)=>({u_is_size_zoom_constant:new a.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(S,s.u_is_size_feature_constant),u_size_t:new a.bg(S,s.u_size_t),u_size:new a.bg(S,s.u_size),u_camera_to_center_distance:new a.bg(S,s.u_camera_to_center_distance),u_pitch:new a.bg(S,s.u_pitch),u_rotate_symbol:new a.bP(S,s.u_rotate_symbol),u_aspect_ratio:new a.bg(S,s.u_aspect_ratio),u_fade_change:new a.bg(S,s.u_fade_change),u_label_plane_matrix:new a.bR(S,s.u_label_plane_matrix),u_coord_matrix:new a.bR(S,s.u_coord_matrix),u_is_text:new a.bP(S,s.u_is_text),u_pitch_with_map:new a.bP(S,s.u_pitch_with_map),u_is_along_line:new a.bP(S,s.u_is_along_line),u_is_variable_anchor:new a.bP(S,s.u_is_variable_anchor),u_texsize:new a.bU(S,s.u_texsize),u_texsize_icon:new a.bU(S,s.u_texsize_icon),u_texture:new a.bP(S,s.u_texture),u_texture_icon:new a.bP(S,s.u_texture_icon),u_gamma_scale:new a.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new a.bg(S,s.u_device_pixel_ratio),u_is_halo:new a.bP(S,s.u_is_halo),u_translation:new a.bU(S,s.u_translation),u_pitched_scale:new a.bg(S,s.u_pitched_scale)}),background:(S,s)=>({u_opacity:new a.bg(S,s.u_opacity),u_color:new a.bQ(S,s.u_color)}),backgroundPattern:(S,s)=>({u_opacity:new a.bg(S,s.u_opacity),u_image:new a.bP(S,s.u_image),u_pattern_tl_a:new a.bU(S,s.u_pattern_tl_a),u_pattern_br_a:new a.bU(S,s.u_pattern_br_a),u_pattern_tl_b:new a.bU(S,s.u_pattern_tl_b),u_pattern_br_b:new a.bU(S,s.u_pattern_br_b),u_texsize:new a.bU(S,s.u_texsize),u_mix:new a.bg(S,s.u_mix),u_pattern_size_a:new a.bU(S,s.u_pattern_size_a),u_pattern_size_b:new a.bU(S,s.u_pattern_size_b),u_scale_a:new a.bg(S,s.u_scale_a),u_scale_b:new a.bg(S,s.u_scale_b),u_pixel_coord_upper:new a.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(S,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(S,s.u_tile_units_to_pixels)}),terrain:(S,s)=>({u_texture:new a.bP(S,s.u_texture),u_ele_delta:new a.bg(S,s.u_ele_delta),u_fog_matrix:new a.bR(S,s.u_fog_matrix),u_fog_color:new a.bQ(S,s.u_fog_color),u_fog_ground_blend:new a.bg(S,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(S,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(S,s.u_horizon_color),u_horizon_fog_blend:new a.bg(S,s.u_horizon_fog_blend),u_is_globe_mode:new a.bg(S,s.u_is_globe_mode)}),terrainDepth:(S,s)=>({u_ele_delta:new a.bg(S,s.u_ele_delta)}),terrainCoords:(S,s)=>({u_texture:new a.bP(S,s.u_texture),u_terrain_coords_id:new a.bg(S,s.u_terrain_coords_id),u_ele_delta:new a.bg(S,s.u_ele_delta)}),projectionErrorMeasurement:(S,s)=>({u_input:new a.bg(S,s.u_input),u_output_expected:new a.bg(S,s.u_output_expected)}),atmosphere:(S,s)=>({u_sun_pos:new a.bT(S,s.u_sun_pos),u_atmosphere_blend:new a.bg(S,s.u_atmosphere_blend),u_globe_position:new a.bT(S,s.u_globe_position),u_globe_radius:new a.bg(S,s.u_globe_radius),u_inv_proj_matrix:new a.bR(S,s.u_inv_proj_matrix)}),sky:(S,s)=>({u_sky_color:new a.bQ(S,s.u_sky_color),u_horizon_color:new a.bQ(S,s.u_horizon_color),u_horizon:new a.bU(S,s.u_horizon),u_horizon_normal:new a.bU(S,s.u_horizon_normal),u_sky_horizon_blend:new a.bg(S,s.u_sky_horizon_blend),u_sky_blend:new a.bg(S,s.u_sky_blend)})};class ql{constructor(s,h,y){this.context=s;const _=s.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ft{constructor(s,h,y,_){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=_,this.context=s;const E=s.gl;this.buffer=E.createBuffer(),s.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,h){for(let y=0;y<this.attributes.length;y++){const _=h.attributes[this.attributes[y].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,h,y){for(let _=0;_<this.attributes.length;_++){const E=this.attributes[_],I=h.attributes[E.name];I!==void 0&&s.vertexAttribPointer(I,E.components,s[Qs[E.type]],!1,this.itemSize,E.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class qt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ur extends qt{getDefault(){return a.bf.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class nn extends qt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class si extends qt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class fn extends qt{getDefault(){return[!0,!0,!0,!0]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Tn extends qt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Hn extends qt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class _i extends qt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const h=this.current;(s.func!==h.func||s.ref!==h.ref||s.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class $i extends qt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class ra extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=s,this.dirty=!1}}class ka extends qt{getDefault(){return[0,1]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Zo extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=s,this.dirty=!1}}class lo extends qt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Os extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.BLEND):h.disable(h.BLEND),this.current=s,this.dirty=!1}}class el extends qt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Vl extends qt{getDefault(){return a.bf.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class tl extends qt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Gl extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=s,this.dirty=!1}}class Sl extends qt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class qu extends qt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class gu extends qt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class ri extends qt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class xi extends qt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Vu extends qt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Ko extends qt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class rl extends qt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class uo extends qt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class cs extends qt{getDefault(){return null}set(s){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class fs extends qt{getDefault(){return null}set(s){var h;if(s===this.current&&!this.dirty)return;const y=this.gl;oo(y)?y.bindVertexArray(s):(h=y.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class El extends qt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Gu extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class xs extends qt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Oo extends qt{constructor(s,h){super(s),this.context=s,this.parent=h}getDefault(){return null}}class cc extends Oo{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Cl extends Oo{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class En extends Oo{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const La="Framebuffer is not complete";class yu{constructor(s,h,y,_,E){this.context=s,this.width=h,this.height=y;const I=s.gl,j=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new cc(s,j),_)this.depthAttachment=E?new En(s,j):new Cl(s,j);else if(E)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error(La)}destroy(){const s=this.context.gl,h=this.colorAttachment.get();if(h&&s.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&s.deleteRenderbuffer(y)}s.deleteFramebuffer(this.framebuffer)}}class Hu{constructor(s){var h,y;if(this.gl=s,this.clearColor=new Ur(this),this.clearDepth=new nn(this),this.clearStencil=new si(this),this.colorMask=new fn(this),this.depthMask=new Tn(this),this.stencilMask=new Hn(this),this.stencilFunc=new _i(this),this.stencilOp=new $i(this),this.stencilTest=new ra(this),this.depthRange=new ka(this),this.depthTest=new Zo(this),this.depthFunc=new lo(this),this.blend=new Os(this),this.blendFunc=new el(this),this.blendColor=new Vl(this),this.blendEquation=new tl(this),this.cullFace=new Gl(this),this.cullFaceSide=new Sl(this),this.frontFace=new qu(this),this.program=new gu(this),this.activeTexture=new ri(this),this.viewport=new xi(this),this.bindFramebuffer=new Vu(this),this.bindRenderbuffer=new Ko(this),this.bindTexture=new rl(this),this.bindVertexBuffer=new uo(this),this.bindElementBuffer=new cs(this),this.bindVertexArray=new fs(this),this.pixelStoreUnpack=new El(this),this.pixelStoreUnpackPremultiplyAlpha=new Gu(this),this.pixelStoreUnpackFlipY=new xs(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),oo(s)){this.HALF_FLOAT=s.HALF_FLOAT;const _=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=s.RGBA16F)!==null&&h!==void 0?h:_?.RGBA16F_EXT,this.RGB16F=(y=s.RGB16F)!==null&&y!==void 0?y:_?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const _=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,h){return new ql(this,s,h)}createVertexBuffer(s,h,y){return new Ft(this,s,h,y)}createRenderbuffer(s,h,y){const _=this.gl,E=_.createRenderbuffer();return this.bindRenderbuffer.set(E),_.renderbufferStorage(_.RENDERBUFFER,s,h,y),this.bindRenderbuffer.set(null),E}createFramebuffer(s,h,y,_){return new yu(this,s,h,y,_)}clear({color:s,depth:h,stencil:y}){const _=this.gl;let E=0;s&&(E|=_.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(E|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(E|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),_.clear(E)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bH(s.blendFunction,In.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return oo(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var h;return oo(this.gl)?this.gl.deleteVertexArray(s):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let ws;function Hl(S,s,h,y,_){const E=S.context,I=S.transform,j=E.gl,V=S.useProgram("collisionBox"),J=[];let re=0,ce=0;for(let Xe=0;Xe<y.length;Xe++){const it=y[Xe],pt=s.getTile(it).getBucket(h);if(!pt)continue;const ct=_?pt.textCollisionBox:pt.iconCollisionBox,_t=pt.collisionCircleArray;_t.length>0&&(J.push({circleArray:_t,circleOffset:ce,coord:it}),re+=_t.length/4,ce=re),ct&&V.draw(E,j.LINES,pn.disabled,zn.disabled,S.colorModeForRenderPass(),yn.disabled,Wi(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(it),I.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),h.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,S.transform.zoom,null,null,ct.collisionVertexBuffer)}if(!_||!J.length)return;const oe=S.useProgram("collisionCircle"),be=new a.b$;be.resize(4*re),be._trim();let Ie=0;for(const Xe of J)for(let it=0;it<Xe.circleArray.length/4;it++){const pt=4*it,ct=Xe.circleArray[pt+0],_t=Xe.circleArray[pt+1],Ct=Xe.circleArray[pt+2],ft=Xe.circleArray[pt+3];be.emplace(Ie++,ct,_t,Ct,ft,0),be.emplace(Ie++,ct,_t,Ct,ft,1),be.emplace(Ie++,ct,_t,Ct,ft,2),be.emplace(Ie++,ct,_t,Ct,ft,3)}(!ws||ws.length<2*re)&&(ws=(function(Xe){const it=2*Xe,pt=new a.c1;pt.resize(it),pt._trim();for(let ct=0;ct<it;ct++){const _t=6*ct;pt.uint16[_t+0]=4*ct+0,pt.uint16[_t+1]=4*ct+1,pt.uint16[_t+2]=4*ct+2,pt.uint16[_t+3]=4*ct+2,pt.uint16[_t+4]=4*ct+3,pt.uint16[_t+5]=4*ct+0}return pt})(re));const Ze=E.createIndexBuffer(ws,!0),We=E.createVertexBuffer(be,a.c0.members,!0);for(const Xe of J){const it=Uc(S.transform);oe.draw(E,j.TRIANGLES,pn.disabled,zn.disabled,S.colorModeForRenderPass(),yn.disabled,it,S.style.map.terrain&&S.style.map.terrain.getTerrainData(Xe.coord),null,h.id,We,Ze,a.aM.simpleSegment(0,2*Xe.circleOffset,Xe.circleArray.length,Xe.circleArray.length/2),null,S.transform.zoom,null,null,null)}We.destroy(),Ze.destroy()}const gh=a.ag(new Float32Array(16));function yh(S,s,h,y,_,E){const{horizontalAlign:I,verticalAlign:j}=a.aH(S);return new a.P((-(I-.5)*s/_+y[0])*E,(-(j-.5)*h/_+y[1])*E)}function Np(S,s,h,y,_,E){const I=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let j=y.mult(E);h||(j=j.rotate(-_));const V=I.add(j);return qe(V.x,V.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(h){const j=Sn(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(S),V=Math.atan(j.y/j.x)+(j.x<0?Math.PI:0);return S.add(y.rotate(V))}return S.add(y)}function kf(S,s,h,y,_,E,I,j,V,J,re,ce){const oe=S.text.placedSymbolArray,be=S.text.dynamicLayoutVertexArray,Ie=S.icon.dynamicLayoutVertexArray,Ze={};be.clear();for(let We=0;We<oe.length;We++){const Xe=oe.get(We),it=Xe.hidden||!Xe.crossTileID||S.allowVerticalPlacement&&!Xe.placedOrientation?null:y[Xe.crossTileID];if(it){const pt=new a.P(Xe.anchorX,Xe.anchorY),ct={getElevation:ce,width:_.width,height:_.height,pitchedLabelPlaneMatrix:E,pitchWithMap:h,transform:_,tileAnchorPoint:pt,translation:J,unwrappedTileID:re},_t=h?Rn(pt.x,pt.y,ct):Sn(pt.x,pt.y,ct),Ct=je(_.cameraToCenterDistance,_t.signedDistanceFromCamera);let ft=a.ap(S.textSizeData,j,Xe)*Ct/a.aB;h&&(ft*=S.tilePixelRatio/I);const{width:Dt,height:nr,anchor:Ht,textOffset:Zt,textBoxScale:Qt}=it,Or=yh(Ht,Dt,nr,Zt,Qt,ft),Lr=_.getPitchedTextCorrection(pt.x+J[0],pt.y+J[1],re),_r=Np(_t.point,ct,s,Or,-_.bearingInRadians,Lr),sn=S.allowVerticalPlacement&&Xe.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Un=0;Un<Xe.numGlyphs;Un++)a.av(be,_r,sn);V&&Xe.associatedIconIndex>=0&&(Ze[Xe.associatedIconIndex]={shiftedAnchor:_r,angle:sn})}else vi(Xe.numGlyphs,be)}if(V){Ie.clear();const We=S.icon.placedSymbolArray;for(let Xe=0;Xe<We.length;Xe++){const it=We.get(Xe);if(it.hidden)vi(it.numGlyphs,Ie);else{const pt=Ze[Xe];if(pt)for(let ct=0;ct<it.numGlyphs;ct++)a.av(Ie,pt.shiftedAnchor,pt.angle);else vi(it.numGlyphs,Ie)}}S.icon.dynamicLayoutVertexBuffer.updateData(Ie)}S.text.dynamicLayoutVertexBuffer.updateData(be)}function qc(S,s,h){return h.iconsInText&&s?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function Wu(S,s,h,y,_,E,I,j,V,J,re,ce,oe){const be=S.context,Ie=be.gl,Ze=S.transform,We=j==="map",Xe=V==="map",it=j!=="viewport"&&h.layout.get("symbol-placement")!=="point",pt=We&&!Xe&&!it,ct=!h.layout.get("symbol-sort-key").isConstant();let _t=!1;const Ct=S.getDepthModeForSublayer(0,pn.ReadOnly),ft=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Dt=[],nr=Ze.getCircleRadiusCorrection();for(const Ht of y){const Zt=s.getTile(Ht),Qt=Zt.getBucket(h);if(!Qt)continue;const Or=_?Qt.text:Qt.icon;if(!Or||!Or.segments.get().length||!Or.hasVisibleVertices)continue;const Lr=Or.programConfigurations.get(h.id),_r=_||Qt.sdfIcons,sn=_?Qt.textSizeData:Qt.iconSizeData,Un=Xe||Ze.pitch!==0,li=S.useProgram(qc(_r,_,Qt),Lr),Ri=a.an(sn,Ze.zoom),wi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ht);let Ai,ji,kn,Pi,Aa=[0,0],Za=null;if(_)ji=Zt.glyphAtlasTexture,kn=Ie.LINEAR,Ai=Zt.glyphAtlasTexture.size,Qt.iconsInText&&(Aa=Zt.imageAtlasTexture.size,Za=Zt.imageAtlasTexture,Pi=Un||S.options.rotating||S.options.zooming||sn.kind==="composite"||sn.kind==="camera"?Ie.LINEAR:Ie.NEAREST);else{const go=h.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;ji=Zt.imageAtlasTexture,kn=_r||S.options.rotating||S.options.zooming||go||Un?Ie.LINEAR:Ie.NEAREST,Ai=Zt.imageAtlasTexture.size}const mo=a.aC(Zt,1,S.transform.zoom),Lo=Wt(We,S.transform,mo),Ls=a.L();a.aq(Ls,Lo);const Yc=ne(Xe,We,S.transform,mo),Jc=a.aD(Ze,Zt,E,I),Eh=Ze.getProjectionData({overscaledTileID:Ht,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),Ch=ft&&Qt.hasTextData(),Bf=h.layout.get("icon-text-fit")!=="none"&&Ch&&Qt.hasIconData();if(it){const go=S.style.map.terrain?(Zl,yo)=>S.style.map.terrain.getElevation(Ht,Zl,yo):null,Do=h.layout.get("text-rotation-alignment")==="map";Jt(Qt,S,_,Lo,Ls,Xe,J,Do,Ht.toUnwrapped(),Ze.width,Ze.height,Jc,go)}const jf=_&&ft||Bf,il=it||jf?gh:Xe?Lo:S.transform.clipSpaceToPixelsMatrix,xu=_r&&h.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ds;Ds=_r?Qt.iconsInText?vs(sn.kind,Ri,pt,Xe,it,jf,S,il,Yc,Jc,Ai,Aa,nr):mu(sn.kind,Ri,pt,Xe,it,jf,S,il,Yc,Jc,_,Ai,0,nr):Zi(sn.kind,Ri,pt,Xe,it,jf,S,il,Yc,Jc,_,Ai,nr);const Qc={program:li,buffers:Or,uniformValues:Ds,projectionData:Eh,atlasTexture:ji,atlasTextureIcon:Za,atlasInterpolation:kn,atlasInterpolationIcon:Pi,isSDF:_r,hasHalo:xu};if(ct&&Qt.canOverlap){_t=!0;const go=Or.segments.get();for(const Do of go)Dt.push({segments:new a.aM([Do]),sortKey:Do.sortKey,state:Qc,terrainData:wi})}else Dt.push({segments:Or.segments,sortKey:0,state:Qc,terrainData:wi})}_t&&Dt.sort(((Ht,Zt)=>Ht.sortKey-Zt.sortKey));for(const Ht of Dt){const Zt=Ht.state;if(be.activeTexture.set(Ie.TEXTURE0),Zt.atlasTexture.bind(Zt.atlasInterpolation,Ie.CLAMP_TO_EDGE),Zt.atlasTextureIcon&&(be.activeTexture.set(Ie.TEXTURE1),Zt.atlasTextureIcon&&Zt.atlasTextureIcon.bind(Zt.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),Zt.isSDF){const Qt=Zt.uniformValues;Zt.hasHalo&&(Qt.u_is_halo=1,fc(Zt.buffers,Ht.segments,h,S,Zt.program,Ct,re,ce,Qt,Zt.projectionData,Ht.terrainData)),Qt.u_is_halo=0}fc(Zt.buffers,Ht.segments,h,S,Zt.program,Ct,re,ce,Zt.uniformValues,Zt.projectionData,Ht.terrainData)}}function fc(S,s,h,y,_,E,I,j,V,J,re){const ce=y.context;_.draw(ce,ce.gl.TRIANGLES,E,I,j,yn.backCCW,V,re,J,h.id,S.layoutVertexBuffer,S.indexBuffer,s,h.paint,y.transform.zoom,S.programConfigurations.get(h.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function md(S,s,h,y,_){const E=S.context,I=E.gl,j=zn.disabled,V=new In([I.ONE,I.ONE],a.bf.transparent,[!0,!0,!0,!0]),J=s.getBucket(h);if(!J)return;const re=y.key;let ce=h.heatmapFbos.get(re);ce||(ce=Vc(E,s.tileSize,s.tileSize),h.heatmapFbos.set(re,ce)),E.bindFramebuffer.set(ce.framebuffer),E.viewport.set([0,0,s.tileSize,s.tileSize]),E.clear({color:a.bf.transparent});const oe=J.programConfigurations.get(h.id),be=S.useProgram("heatmap",oe,!_),Ie=S.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ze=S.style.map.terrain.getTerrainData(y);be.draw(E,I.TRIANGLES,pn.disabled,j,V,yn.disabled,xl(s,S.transform.zoom,h.paint.get("heatmap-intensity"),1),Ze,Ie,h.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,h.paint,S.transform.zoom,oe)}function Fp(S,s,h,y,_){const E=S.context,I=E.gl,j=S.transform;E.setColorMode(S.colorModeForRenderPass());const V=Lf(E,s),J=h.key,re=s.heatmapFbos.get(J);if(!re)return;E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,re.colorAttachment.get()),E.activeTexture.set(I.TEXTURE1),V.bind(I.LINEAR,I.CLAMP_TO_EDGE);const ce=j.getProjectionData({overscaledTileID:h,applyTerrainMatrix:_,applyGlobeMatrix:!y});S.useProgram("heatmapTexture").draw(E,I.TRIANGLES,pn.disabled,zn.disabled,S.colorModeForRenderPass(),yn.disabled,ha(S,s,0,1),null,ce,s.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,s.paint,j.zoom),re.destroy(),s.heatmapFbos.delete(J)}function Vc(S,s,h){var y,_;const E=S.gl,I=E.createTexture();E.bindTexture(E.TEXTURE_2D,I),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);const j=(y=S.HALF_FLOAT)!==null&&y!==void 0?y:E.UNSIGNED_BYTE,V=(_=S.RGBA16F)!==null&&_!==void 0?_:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,V,s,h,0,E.RGBA,j,null);const J=S.createFramebuffer(s,h,!1,!1);return J.colorAttachment.set(I),J}function Lf(S,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(S,s.colorRamp,S.gl.RGBA)),s.colorRampTexture}function Df(S,s,h,y,_){if(!h||!y||!y.imageAtlas)return;const E=y.imageAtlas.patternPositions;let I=E[h.to.toString()],j=E[h.from.toString()];if(!I&&j&&(I=j),!j&&I&&(j=I),!I||!j){const V=_.getPaintProperty(s);I=E[V],j=E[V]}I&&j&&S.setConstantPatternPositions(I,j)}function vh(S,s,h,y,_,E,I,j){const V=S.context.gl,J="fill-pattern",re=h.paint.get(J),ce=re&&re.constantOr(1),oe=h.getCrossfadeParameters();let be,Ie,Ze,We,Xe;const it=S.transform,pt=h.paint.get("fill-translate"),ct=h.paint.get("fill-translate-anchor");I?(Ie=ce&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",be=V.LINES):(Ie=ce?"fillPattern":"fill",be=V.TRIANGLES);const _t=re.constantOr(null);for(const Ct of y){const ft=s.getTile(Ct);if(ce&&!ft.patternsLoaded())continue;const Dt=ft.getBucket(h);if(!Dt)continue;const nr=Dt.programConfigurations.get(h.id),Ht=S.useProgram(Ie,nr),Zt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ct);ce&&(S.context.activeTexture.set(V.TEXTURE0),ft.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),nr.updatePaintBuffers(oe)),Df(nr,J,_t,ft,h);const Qt=it.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Or=a.aD(it,ft,pt,ct);if(I){We=Dt.indexBuffer2,Xe=Dt.segments2;const _r=[V.drawingBufferWidth,V.drawingBufferHeight];Ze=Ie==="fillOutlinePattern"&&ce?so(S,oe,ft,_r,Or):ba(_r,Or)}else We=Dt.indexBuffer,Xe=Dt.segments,Ze=ce?$a(S,oe,ft,Or):{u_fill_translate:Or};const Lr=S.stencilModeForClipping(Ct);Ht.draw(S.context,be,_,Lr,E,yn.backCCW,Ze,Zt,Qt,h.id,Dt.layoutVertexBuffer,We,Xe,h.paint,S.transform.zoom,nr)}}function gd(S,s,h,y,_,E,I,j){const V=S.context,J=V.gl,re="fill-extrusion-pattern",ce=h.paint.get(re),oe=ce.constantOr(1),be=h.getCrossfadeParameters(),Ie=h.paint.get("fill-extrusion-opacity"),Ze=ce.constantOr(null),We=S.transform;for(const Xe of y){const it=s.getTile(Xe),pt=it.getBucket(h);if(!pt)continue;const ct=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Xe),_t=pt.programConfigurations.get(h.id),Ct=S.useProgram(oe?"fillExtrusionPattern":"fillExtrusion",_t);oe&&(S.context.activeTexture.set(J.TEXTURE0),it.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),_t.updatePaintBuffers(be));const ft=We.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!j,applyTerrainMatrix:!0});Df(_t,re,Ze,it,h);const Dt=a.aD(We,it,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),nr=h.paint.get("fill-extrusion-vertical-gradient"),Ht=oe?wa(S,nr,Ie,Dt,Xe,be,it):Ra(S,nr,Ie,Dt);Ct.draw(V,V.gl.TRIANGLES,_,E,I,yn.backCCW,Ht,ct,ft,h.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,h.paint,S.transform.zoom,_t,S.style.map.terrain&&pt.centroidVertexBuffer)}}function hc(S,s,h,y,_,E,I,j,V){var J;const re=S.style.projection,ce=S.context,oe=S.transform,be=ce.gl,Ie=[`#define NUM_ILLUMINATION_SOURCES ${h.paint.get("hillshade-highlight-color").values.length}`],Ze=S.useProgram("hillshade",null,!1,Ie),We=!S.options.moving;for(const Xe of y){const it=s.getTile(Xe),pt=it.fbo;if(!pt)continue;const ct=re.getMeshFromTileID(ce,Xe.canonical,j,!0,"raster"),_t=(J=S.style.map.terrain)===null||J===void 0?void 0:J.getTerrainData(Xe);ce.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,pt.colorAttachment.get());const Ct=oe.getProjectionData({overscaledTileID:Xe,aligned:We,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Ze.draw(ce,be.TRIANGLES,E,_[Xe.overscaledZ],I,yn.backCCW,ls(S,it,h),_t,Ct,h.id,ct.vertexBuffer,ct.indexBuffer,ct.segments)}}function Nf(S,s,h,y,_,E,I,j,V){var J;const re=S.style.projection,ce=S.context,oe=S.transform,be=ce.gl,Ie=S.useProgram("colorRelief"),Ze=!S.options.moving;let We=!0,Xe=0;for(const it of y){const pt=s.getTile(it),ct=pt.dem;if(We){const Ht=be.getParameter(be.MAX_TEXTURE_SIZE),{elevationTexture:Zt,colorTexture:Qt}=h.getColorRampTextures(ce,Ht,ct.getUnpackVector());ce.activeTexture.set(be.TEXTURE1),Zt.bind(be.NEAREST,be.CLAMP_TO_EDGE),ce.activeTexture.set(be.TEXTURE4),Qt.bind(be.LINEAR,be.CLAMP_TO_EDGE),We=!1,Xe=Zt.size[0]}if(!ct||!ct.data)continue;const _t=ct.stride,Ct=ct.getPixels();if(ce.activeTexture.set(be.TEXTURE0),ce.pixelStoreUnpackPremultiplyAlpha.set(!1),pt.demTexture=pt.demTexture||S.getTileTexture(_t),pt.demTexture){const Ht=pt.demTexture;Ht.update(Ct,{premultiply:!1}),Ht.bind(be.LINEAR,be.CLAMP_TO_EDGE)}else pt.demTexture=new a.T(ce,Ct,be.RGBA,{premultiply:!1}),pt.demTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE);const ft=re.getMeshFromTileID(ce,it.canonical,j,!0,"raster"),Dt=(J=S.style.map.terrain)===null||J===void 0?void 0:J.getTerrainData(it),nr=oe.getProjectionData({overscaledTileID:it,aligned:Ze,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Ie.draw(ce,be.TRIANGLES,E,_[it.overscaledZ],I,yn.backCCW,Xs(h,pt.dem,Xe),Dt,nr,h.id,ft.vertexBuffer,ft.indexBuffer,ft.segments)}}const Gc=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Al(S,s,h,y,_,E,I,j,V=!1,J=!1){const re=y[y.length-1].overscaledZ,ce=S.context,oe=ce.gl,be=S.useProgram("raster"),Ie=S.transform,Ze=S.style.projection,We=S.colorModeForRenderPass(),Xe=!S.options.moving;for(const it of y){const pt=S.getDepthModeForSublayer(it.overscaledZ-re,h.paint.get("raster-opacity")===1?pn.ReadWrite:pn.ReadOnly,oe.LESS),ct=s.getTile(it);ct.registerFadeDuration(h.paint.get("raster-fade-duration"));const _t=s.findLoadedParent(it,0),Ct=s.findLoadedSibling(it),ft=yd(ct,_t||Ct||null,s,h,S.transform,S.style.map.terrain);let Dt,nr;const Ht=h.paint.get("raster-resampling")==="nearest"?oe.NEAREST:oe.LINEAR;ce.activeTexture.set(oe.TEXTURE0),ct.texture.bind(Ht,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),ce.activeTexture.set(oe.TEXTURE1),_t?(_t.texture.bind(Ht,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,_t.tileID.overscaledZ-ct.tileID.overscaledZ),nr=[ct.tileID.canonical.x*Dt%1,ct.tileID.canonical.y*Dt%1]):ct.texture.bind(Ht,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),ct.texture.useMipmap&&ce.extTextureFilterAnisotropic&&S.transform.pitch>20&&oe.texParameterf(oe.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax);const Zt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(it),Qt=Ie.getProjectionData({overscaledTileID:it,aligned:Xe,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),Or=Ro(nr||[0,0],Dt||1,ft,h,j),Lr=Ze.getMeshFromTileID(ce,it.canonical,E,I,"raster");be.draw(ce,oe.TRIANGLES,pt,_?_[it.overscaledZ]:zn.disabled,We,V?yn.frontCCW:yn.backCCW,Or,Zt,Qt,h.id,Lr.vertexBuffer,Lr.indexBuffer,Lr.segments)}}function yd(S,s,h,y,_,E){const I=y.paint.get("raster-fade-duration");if(!E&&I>0){const j=w.now(),V=(j-S.timeAdded)/I,J=s?(j-s.timeAdded)/I:-1,re=h.getSource(),ce=Pr(_,{tileSize:re.tileSize,roundZoom:re.roundZoom}),oe=!s||Math.abs(s.tileID.overscaledZ-ce)>Math.abs(S.tileID.overscaledZ-ce),be=oe&&S.refreshedUponExpiration?1:a.ah(oe?V:1-J,0,1);return S.refreshedUponExpiration&&V>=1&&(S.refreshedUponExpiration=!1),s?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const Bp=new a.bf(1,0,0,1),vd=new a.bf(0,1,0,1),bh=new a.bf(0,0,1,1),bd=new a.bf(1,0,1,1),ay=new a.bf(0,1,1,1);function _d(S,s,h,y){qa(S,0,s+h/2,S.transform.width,h,y)}function Fi(S,s,h,y){qa(S,s-h/2,0,h,S.transform.height,y)}function qa(S,s,h,y,_,E){const I=S.context,j=I.gl;j.enable(j.SCISSOR_TEST),j.scissor(s*S.pixelRatio,h*S.pixelRatio,y*S.pixelRatio,_*S.pixelRatio),I.clear({color:E}),j.disable(j.SCISSOR_TEST)}function Va(S,s,h){const y=S.context,_=y.gl,E=S.useProgram("debug"),I=pn.disabled,j=zn.disabled,V=S.colorModeForRenderPass(),J="$debug",re=S.style.map.terrain&&S.style.map.terrain.getTerrainData(h);y.activeTexture.set(_.TEXTURE0);const ce=s.getTileByID(h.key).latestRawTileData,oe=Math.floor((ce&&ce.byteLength||0)/1024),be=s.getTile(h).tileSize,Ie=512/Math.min(be,512)*(h.overscaledZ/S.transform.zoom)*.5;let Ze=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Ze+=` => ${h.overscaledZ}`),(function(Xe,it){Xe.initDebugOverlayCanvas();const pt=Xe.debugOverlayCanvas,ct=Xe.context.gl,_t=Xe.debugOverlayCanvas.getContext("2d");_t.clearRect(0,0,pt.width,pt.height),_t.shadowColor="white",_t.shadowBlur=2,_t.lineWidth=1.5,_t.strokeStyle="white",_t.textBaseline="top",_t.font="bold 36px Open Sans, sans-serif",_t.fillText(it,5,5),_t.strokeText(it,5,5),Xe.debugOverlayTexture.update(pt),Xe.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)})(S,`${Ze} ${oe}kB`);const We=S.transform.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(y,_.TRIANGLES,I,j,In.alphaBlended,yn.disabled,Mo(a.bf.transparent,Ie),null,We,J,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),E.draw(y,_.LINE_STRIP,I,j,V,yn.disabled,Mo(a.bf.red),re,We,J,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function _h(S,s,h,y){const{isRenderingGlobe:_}=y,E=S.context,I=E.gl,j=S.transform,V=S.colorModeForRenderPass(),J=S.getDepthModeFor3D(),re=S.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,S.width,S.height]);for(const ce of h){const oe=s.getTerrainMesh(ce.tileID),be=S.renderToTexture.getTexture(ce),Ie=s.getTerrainData(ce.tileID);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,be.texture);const Ze=s.getMeshFrameDelta(j.zoom),We=j.calculateFogMatrix(ce.tileID.toUnwrapped()),Xe=hu(Ze,We,S.style.sky,j.pitch,_),it=j.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(E,I.TRIANGLES,J,zn.disabled,V,yn.backCCW,Xe,Ie,it,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}function Hc(S,s){if(!s.mesh){const h=new a.aL;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(1,1),h.emplaceBack(-1,1);const y=new a.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),s.mesh=new Bt(S.createVertexBuffer(h,xr.members),S.createIndexBuffer(y),a.aM.simpleSegment(0,0,h.length,y.length))}return s.mesh}class vu{constructor(s,h){this.context=new Hu(s),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Mr.maxUnderzooming+Mr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Re}resize(s,h,y){if(this.width=Math.floor(s*y),this.height=Math.floor(h*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const s=this.context,h=new a.aL;h.emplaceBack(0,0),h.emplaceBack(a.$,0),h.emplaceBack(0,a.$),h.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(h,xr.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);const y=new a.aL;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(y,xr.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);const _=new a.c6;_.emplaceBack(0,0,0,0),_.emplaceBack(a.$,0,a.$,0),_.emplaceBack(0,a.$,0,a.$),_.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(_,Ks.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);const E=new a.aL;E.emplaceBack(0,0),E.emplaceBack(a.$,0),E.emplaceBack(0,a.$),E.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(E,xr.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);const I=new a.aL;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(I,xr.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);const j=new a.c7;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(j);const V=new a.aN;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(V);const J=this.context.gl;this.stencilClearMode=new zn({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO),this.tileExtentMesh=new Bt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,h=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=a.L();a.bY(y,0,this.width,this.height,0,0,1),a.N(y,y,[h.drawingBufferWidth,h.drawingBufferHeight,0]);const _={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(s,h.TRIANGLES,pn.disabled,this.stencilClearMode,In.disabled,yn.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,h,y){if(this.currentStencilSource===s.source||!s.isTileClipped()||!h||!h.length)return;this.currentStencilSource=s.source,this.nextStencilID+h.length>256&&this.clearStencil();const _=this.context;_.setColorMode(In.disabled),_.setDepthMode(pn.disabled);const E={};for(const I of h)E[I.key]=this.nextStencilID++;this._renderTileMasks(E,h,y,!0),this._renderTileMasks(E,h,y,!1),this._tileClippingMaskIDs=E}_renderTileMasks(s,h,y,_){const E=this.context,I=E.gl,j=this.style.projection,V=this.transform,J=this.useProgram("clippingMask");for(const re of h){const ce=s[re.key],oe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(re),be=j.getMeshFromTileID(this.context,re.canonical,_,!0,"stencil"),Ie=V.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!y,applyTerrainMatrix:!0});J.draw(E,I.TRIANGLES,pn.disabled,new zn({func:I.ALWAYS,mask:0},ce,255,I.KEEP,I.KEEP,I.REPLACE),In.disabled,y?yn.disabled:yn.backCCW,null,oe,Ie,"$clipping",be.vertexBuffer,be.indexBuffer,be.segments)}}_renderTilesDepthBuffer(){const s=this.context,h=s.gl,y=this.style.projection,_=this.transform,E=this.useProgram("depth"),I=this.getDepthModeFor3D(),j=bt(_,{tileSize:_.tileSize});for(const V of j){const J=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),re=y.getMeshFromTileID(this.context,V.canonical,!0,!0,"raster"),ce=_.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(s,h.TRIANGLES,I,zn.disabled,In.disabled,yn.backCCW,null,J,ce,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,h=this.context.gl;return new zn({func:h.NOTEQUAL,mask:255},s,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(s){const h=this.context.gl;return new zn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,h.KEEP,h.KEEP,h.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const h=this.context.gl,y=s.sort(((I,j)=>j.overscaledZ-I.overscaledZ)),_=y[y.length-1].overscaledZ,E=y[0].overscaledZ-_+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const I={};for(let j=0;j<E;j++)I[j+_]=new zn({func:h.GEQUAL,mask:255},j+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=E,[I,y]}return[{[_]:zn.disabled},y]}stencilConfigForOverlapTwoPass(s){const h=this.context.gl,y=s.sort(((I,j)=>j.overscaledZ-I.overscaledZ)),_=y[y.length-1].overscaledZ,E=y[0].overscaledZ-_+1;if(this.clearStencil(),E>1){const I={},j={};for(let V=0;V<E;V++)I[V+_]=new zn({func:h.GREATER,mask:255},E+1+V,255,h.KEEP,h.KEEP,h.REPLACE),j[V+_]=new zn({func:h.GREATER,mask:255},1+V,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID=2*E+1,[I,j,y]}return this.nextStencilID=3,[{[_]:new zn({func:h.GREATER,mask:255},2,255,h.KEEP,h.KEEP,h.REPLACE)},{[_]:new zn({func:h.GREATER,mask:255},1,255,h.KEEP,h.KEEP,h.REPLACE)},y]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new In([s.CONSTANT_COLOR,s.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?In.unblended:In.alphaBlended}getDepthModeForSublayer(s,h,y){if(!this.opaquePassEnabledForLayer())return pn.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new pn(y||this.context.gl.LEQUAL,h,[_,_])}getDepthModeFor3D(){return new pn(this.context.gl.LEQUAL,pn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,h){var y,_;this.style=s,this.options=h,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const E=this.style._order,I=this.style.sourceCaches,j={},V={},J={},re={isRenderingToTexture:!1,isRenderingGlobe:((y=s.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const oe in I){const be=I[oe];be.used&&be.prepare(this.context),j[oe]=be.getVisibleCoordinates(!1),V[oe]=j[oe].slice().reverse(),J[oe]=be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let oe=0;oe<E.length;oe++)if(this.style._layers[E[oe]].is3D()){this.opaquePassCutoff=oe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const oe of E){const be=this.style._layers[oe];if(!be.hasOffscreenPass()||be.isHidden(this.transform.zoom))continue;const Ie=V[be.source];(be.type==="custom"||Ie.length)&&this.renderLayer(this,I[be.source],be,Ie,re)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:oe=>this.useProgram(oe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(oe,be){const Ie=oe.context,Ze=Ie.gl,We=((Ct,ft,Dt)=>{const nr=Math.cos(ft.rollInRadians),Ht=Math.sin(ft.rollInRadians),Zt=Ke(ft),Qt=ft.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ct.properties.get("sky-color"),u_horizon_color:Ct.properties.get("horizon-color"),u_horizon:[(ft.width/2-Zt*Ht)*Dt,(ft.height/2+Zt*nr)*Dt],u_horizon_normal:[-Ht,nr],u_sky_horizon_blend:Ct.properties.get("sky-horizon-blend")*ft.height/2*Dt,u_sky_blend:Qt}})(be,oe.style.map.transform,oe.pixelRatio),Xe=new pn(Ze.LEQUAL,pn.ReadWrite,[0,1]),it=zn.disabled,pt=oe.colorModeForRenderPass(),ct=oe.useProgram("sky"),_t=Hc(Ie,be);ct.draw(Ie,Ze.TRIANGLES,Xe,it,pt,yn.disabled,We,null,void 0,"sky",_t.vertexBuffer,_t.indexBuffer,_t.segments)})(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){const oe=this.style._layers[E[this.currentLayer]],be=I[oe.source],Ie=j[oe.source];this._renderTileClippingMasks(oe,Ie,!1),this.renderLayer(this,be,oe,Ie,re)}this.renderPass="translucent";let ce=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){const oe=this.style._layers[E[this.currentLayer]],be=I[oe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(oe,re))continue;this.opaquePassEnabledForLayer()||ce||(ce=!0,re.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Ie=(oe.type==="symbol"?J:V)[oe.source];this._renderTileClippingMasks(oe,j[oe.source],!!this.renderToTexture),this.renderLayer(this,be,oe,Ie,re)}if(re.isRenderingGlobe&&(function(oe,be,Ie){const Ze=oe.context,We=Ze.gl,Xe=oe.useProgram("atmosphere"),it=new pn(We.LEQUAL,pn.ReadOnly,[0,1]),pt=oe.transform,ct=(function(Qt,Or){const Lr=Qt.properties.get("position"),_r=[-Lr.x,-Lr.y,-Lr.z],sn=a.ag(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(a.b6(sn,sn,Or.rollInRadians),a.b7(sn,sn,-Or.pitchInRadians),a.b6(sn,sn,Or.bearingInRadians),a.b7(sn,sn,Or.center.lat*Math.PI/180),a.bz(sn,sn,-Or.center.lng*Math.PI/180)),a.c5(_r,_r,sn),_r})(Ie,oe.transform),_t=pt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ct=be.properties.get("atmosphere-blend")*_t.projectionTransition;if(Ct===0)return;const ft=za(pt.worldSize,pt.center.lat),Dt=pt.inverseProjectionMatrix,nr=new Float64Array(4);nr[3]=1,a.aw(nr,nr,pt.modelViewProjectionMatrix),nr[0]/=nr[3],nr[1]/=nr[3],nr[2]/=nr[3],nr[3]=1,a.aw(nr,nr,Dt),nr[0]/=nr[3],nr[1]/=nr[3],nr[2]/=nr[3],nr[3]=1;const Ht=((Qt,Or,Lr,_r,sn)=>({u_sun_pos:Qt,u_atmosphere_blend:Or,u_globe_position:Lr,u_globe_radius:_r,u_inv_proj_matrix:sn}))(ct,Ct,[nr[0],nr[1],nr[2]],ft,Dt),Zt=Hc(Ze,be);Xe.draw(Ze,We.TRIANGLES,it,zn.disabled,In.alphaBlended,yn.disabled,Ht,null,null,"atmosphere",Zt.vertexBuffer,Zt.indexBuffer,Zt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const oe=(function(be,Ie){let Ze=null;const We=Object.values(be._layers).flatMap((ct=>ct.source&&!ct.isHidden(Ie)?[be.sourceCaches[ct.source]]:[])),Xe=We.filter((ct=>ct.getSource().type==="vector")),it=We.filter((ct=>ct.getSource().type!=="vector")),pt=ct=>{(!Ze||Ze.getSource().maxzoom<ct.getSource().maxzoom)&&(Ze=ct)};return Xe.forEach((ct=>pt(ct))),Ze||it.forEach((ct=>pt(ct))),Ze})(this.style,this.transform.zoom);oe&&(function(be,Ie,Ze){for(let We=0;We<Ze.length;We++)Va(be,Ie,Ze[We])})(this,oe,oe.getVisibleCoordinates())}this.options.showPadding&&(function(oe){const be=oe.transform.padding;_d(oe,oe.transform.height-(be.top||0),3,Bp),_d(oe,be.bottom||0,3,vd),Fi(oe,be.left||0,3,bh),Fi(oe,oe.transform.width-(be.right||0),3,bd);const Ie=oe.transform.centerPoint;(function(Ze,We,Xe,it){qa(Ze,We-1,Xe-10,2,20,it),qa(Ze,We-10,Xe-1,20,2,it)})(oe,Ie.x,oe.transform.height-Ie.y,ay)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=s?!a.c8(h,y):!a.c9(h,y)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(a.ca(h,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(E,I){const j=E.context,V=j.gl,J=E.transform,re=In.unblended,ce=new pn(V.LEQUAL,pn.ReadWrite,[0,1]),oe=I.sourceCache.getRenderableTiles(),be=E.useProgram("terrainDepth");j.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),j.clear({color:a.bf.transparent,depth:1});for(const Ie of oe){const Ze=I.getTerrainMesh(Ie.tileID),We=I.getTerrainData(Ie.tileID),Xe=J.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),it={u_ele_delta:I.getMeshFrameDelta(J.zoom)};be.draw(j,V.TRIANGLES,ce,zn.disabled,re,yn.backCCW,it,We,Xe,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain),(function(E,I){const j=E.context,V=j.gl,J=E.transform,re=In.unblended,ce=new pn(V.LEQUAL,pn.ReadWrite,[0,1]),oe=I.getCoordsTexture(),be=I.sourceCache.getRenderableTiles(),Ie=E.useProgram("terrainCoords");j.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),j.clear({color:a.bf.transparent,depth:1}),I.coordsIndex=[];for(const Ze of be){const We=I.getTerrainMesh(Ze.tileID),Xe=I.getTerrainData(Ze.tileID);j.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,oe.texture);const it={u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(J.zoom)},pt=J.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Ie.draw(j,V.TRIANGLES,ce,zn.disabled,re,yn.backCCW,it,Xe,pt,"terrain",We.vertexBuffer,We.indexBuffer,We.segments),I.coordsIndex.push(Ze.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain))}renderLayer(s,h,y,_,E){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(_||[]).length)&&(this.id=y.id,a.cb(y)?(function(I,j,V,J,re,ce){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:oe}=ce,be=zn.disabled,Ie=I.colorModeForRenderPass();(V._unevaluatedLayout.hasValue("text-variable-anchor")||V._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ze,We,Xe,it,pt,ct,_t,Ct,ft){const Dt=We.transform,nr=We.style.map.terrain,Ht=pt==="map",Zt=ct==="map";for(const Qt of Ze){const Or=it.getTile(Qt),Lr=Or.getBucket(Xe);if(!Lr||!Lr.text||!Lr.text.segments.get().length)continue;const _r=a.an(Lr.textSizeData,Dt.zoom),sn=a.aC(Or,1,We.transform.zoom),Un=Wt(Ht,We.transform,sn),li=Xe.layout.get("icon-text-fit")!=="none"&&Lr.hasIconData();if(_r){const Ri=Math.pow(2,Dt.zoom-Or.tileID.overscaledZ),wi=nr?(Ai,ji)=>nr.getElevation(Qt,Ai,ji):null;kf(Lr,Ht,Zt,ft,Dt,Un,Ri,_r,li,a.aD(Dt,Or,_t,Ct),Qt.toUnwrapped(),wi)}}})(J,I,V,j,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),re),V.paint.get("icon-opacity").constantOr(1)!==0&&Wu(I,j,V,J,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),be,Ie,oe),V.paint.get("text-opacity").constantOr(1)!==0&&Wu(I,j,V,J,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),be,Ie,oe),j.map.showCollisionBoxes&&(Hl(I,j,V,J,!0),Hl(I,j,V,J,!1))})(s,h,y,_,this.style.placement.variableOffsets,E):a.cc(y)?(function(I,j,V,J,re){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=V.paint.get("circle-opacity"),be=V.paint.get("circle-stroke-width"),Ie=V.paint.get("circle-stroke-opacity"),Ze=!V.layout.get("circle-sort-key").isConstant();if(oe.constantOr(1)===0&&(be.constantOr(1)===0||Ie.constantOr(1)===0))return;const We=I.context,Xe=We.gl,it=I.transform,pt=I.getDepthModeForSublayer(0,pn.ReadOnly),ct=zn.disabled,_t=I.colorModeForRenderPass(),Ct=[],ft=it.getCircleRadiusCorrection();for(let Dt=0;Dt<J.length;Dt++){const nr=J[Dt],Ht=j.getTile(nr),Zt=Ht.getBucket(V);if(!Zt)continue;const Qt=V.paint.get("circle-translate"),Or=V.paint.get("circle-translate-anchor"),Lr=a.aD(it,Ht,Qt,Or),_r=Zt.programConfigurations.get(V.id),sn=I.useProgram("circle",_r),Un=Zt.layoutVertexBuffer,li=Zt.indexBuffer,Ri=I.style.map.terrain&&I.style.map.terrain.getTerrainData(nr),wi={programConfiguration:_r,program:sn,layoutVertexBuffer:Un,indexBuffer:li,uniformValues:zl(I,Ht,V,Lr,ft),terrainData:Ri,projectionData:it.getProjectionData({overscaledTileID:nr,applyGlobeMatrix:!ce,applyTerrainMatrix:!0})};if(Ze){const Ai=Zt.segments.get();for(const ji of Ai)Ct.push({segments:new a.aM([ji]),sortKey:ji.sortKey,state:wi})}else Ct.push({segments:Zt.segments,sortKey:0,state:wi})}Ze&&Ct.sort(((Dt,nr)=>Dt.sortKey-nr.sortKey));for(const Dt of Ct){const{programConfiguration:nr,program:Ht,layoutVertexBuffer:Zt,indexBuffer:Qt,uniformValues:Or,terrainData:Lr,projectionData:_r}=Dt.state;Ht.draw(We,Xe.TRIANGLES,pt,ct,_t,yn.backCCW,Or,Lr,_r,V.id,Zt,Qt,Dt.segments,V.paint,I.transform.zoom,nr)}})(s,h,y,_,E):a.cd(y)?(function(I,j,V,J,re){if(V.paint.get("heatmap-opacity")===0)return;const ce=I.context,{isRenderingToTexture:oe,isRenderingGlobe:be}=re;if(I.style.map.terrain){for(const Ie of J){const Ze=j.getTile(Ie);j.hasRenderableParent(Ie)||(I.renderPass==="offscreen"?md(I,Ze,V,Ie,be):I.renderPass==="translucent"&&Fp(I,V,Ie,oe,be))}ce.viewport.set([0,0,I.width,I.height])}else I.renderPass==="offscreen"?(function(Ie,Ze,We,Xe){const it=Ie.context,pt=it.gl,ct=Ie.transform,_t=zn.disabled,Ct=new In([pt.ONE,pt.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(ft,Dt,nr){const Ht=ft.gl;ft.activeTexture.set(Ht.TEXTURE1),ft.viewport.set([0,0,Dt.width/4,Dt.height/4]);let Zt=nr.heatmapFbos.get(a.c2);Zt?(Ht.bindTexture(Ht.TEXTURE_2D,Zt.colorAttachment.get()),ft.bindFramebuffer.set(Zt.framebuffer)):(Zt=Vc(ft,Dt.width/4,Dt.height/4),nr.heatmapFbos.set(a.c2,Zt))})(it,Ie,We),it.clear({color:a.bf.transparent});for(let ft=0;ft<Xe.length;ft++){const Dt=Xe[ft];if(Ze.hasRenderableParent(Dt))continue;const nr=Ze.getTile(Dt),Ht=nr.getBucket(We);if(!Ht)continue;const Zt=Ht.programConfigurations.get(We.id),Qt=Ie.useProgram("heatmap",Zt),Or=ct.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Lr=ct.getCircleRadiusCorrection();Qt.draw(it,pt.TRIANGLES,pn.disabled,_t,Ct,yn.backCCW,xl(nr,ct.zoom,We.paint.get("heatmap-intensity"),Lr),null,Or,We.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,We.paint,ct.zoom,Zt)}it.viewport.set([0,0,Ie.width,Ie.height])})(I,j,V,J):I.renderPass==="translucent"&&(function(Ie,Ze){const We=Ie.context,Xe=We.gl;We.setColorMode(Ie.colorModeForRenderPass());const it=Ze.heatmapFbos.get(a.c2);it&&(We.activeTexture.set(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,it.colorAttachment.get()),We.activeTexture.set(Xe.TEXTURE1),Lf(We,Ze).bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Ie.useProgram("heatmapTexture").draw(We,Xe.TRIANGLES,pn.disabled,zn.disabled,Ie.colorModeForRenderPass(),yn.disabled,ha(Ie,Ze,0,1),null,null,Ze.id,Ie.viewportBuffer,Ie.quadTriangleIndexBuffer,Ie.viewportSegments,Ze.paint,Ie.transform.zoom))})(I,V)})(s,h,y,_,E):a.ce(y)?(function(I,j,V,J,re){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=V.paint.get("line-opacity"),be=V.paint.get("line-width");if(oe.constantOr(1)===0||be.constantOr(1)===0)return;const Ie=I.getDepthModeForSublayer(0,pn.ReadOnly),Ze=I.colorModeForRenderPass(),We=V.paint.get("line-dasharray"),Xe=V.paint.get("line-pattern"),it=Xe.constantOr(1),pt=V.paint.get("line-gradient"),ct=V.getCrossfadeParameters(),_t=it?"linePattern":We?"lineSDF":pt?"lineGradient":"line",Ct=I.context,ft=Ct.gl,Dt=I.transform;let nr=!0;for(const Ht of J){const Zt=j.getTile(Ht);if(it&&!Zt.patternsLoaded())continue;const Qt=Zt.getBucket(V);if(!Qt)continue;const Or=Qt.programConfigurations.get(V.id),Lr=I.context.program.get(),_r=I.useProgram(_t,Or),sn=nr||_r.program!==Lr,Un=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Ht),li=Xe.constantOr(null);if(li&&Zt.imageAtlas){const kn=Zt.imageAtlas,Pi=kn.patternPositions[li.to.toString()],Aa=kn.patternPositions[li.from.toString()];Pi&&Aa&&Or.setConstantPatternPositions(Pi,Aa)}const Ri=Dt.getProjectionData({overscaledTileID:Ht,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),wi=Dt.getPixelScale(),Ai=it?Sa(I,Zt,V,wi,ct):We?us(I,Zt,V,wi,We,ct):pt?Ua(I,Zt,V,wi,Qt.lineClipsArray.length):Ys(I,Zt,V,wi);if(it)Ct.activeTexture.set(ft.TEXTURE0),Zt.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Or.updatePaintBuffers(ct);else if(We&&(sn||I.lineAtlas.dirty))Ct.activeTexture.set(ft.TEXTURE0),I.lineAtlas.bind(Ct);else if(pt){const kn=Qt.gradients[V.id];let Pi=kn.texture;if(V.gradientVersion!==kn.version){let Aa=256;if(V.stepInterpolant){const Za=j.getSource().maxzoom,mo=Ht.canonical.z===Za?Math.ceil(1<<I.transform.maxZoom-Ht.canonical.z):1;Aa=a.ah(a.c3(Qt.maxLineLength/a.$*1024*mo),256,Ct.maxTextureSize)}kn.gradient=a.c4({expression:V.gradientExpression(),evaluationKey:"lineProgress",resolution:Aa,image:kn.gradient||void 0,clips:Qt.lineClipsArray}),kn.texture?kn.texture.update(kn.gradient):kn.texture=new a.T(Ct,kn.gradient,ft.RGBA),kn.version=V.gradientVersion,Pi=kn.texture}Ct.activeTexture.set(ft.TEXTURE0),Pi.bind(V.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}const ji=I.stencilModeForClipping(Ht);_r.draw(Ct,ft.TRIANGLES,Ie,ji,Ze,yn.disabled,Ai,Un,Ri,V.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,V.paint,I.transform.zoom,Or,Qt.layoutVertexBuffer2),nr=!1}})(s,h,y,_,E):a.cf(y)?(function(I,j,V,J,re){const ce=V.paint.get("fill-color"),oe=V.paint.get("fill-opacity");if(oe.constantOr(1)===0)return;const{isRenderingToTexture:be}=re,Ie=I.colorModeForRenderPass(),Ze=V.paint.get("fill-pattern"),We=I.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ce.constantOr(a.bf.transparent).a===1&&oe.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===We){const Xe=I.getDepthModeForSublayer(1,I.renderPass==="opaque"?pn.ReadWrite:pn.ReadOnly);vh(I,j,V,J,Xe,Ie,!1,be)}if(I.renderPass==="translucent"&&V.paint.get("fill-antialias")){const Xe=I.getDepthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,pn.ReadOnly);vh(I,j,V,J,Xe,Ie,!0,be)}})(s,h,y,_,E):a.cg(y)?(function(I,j,V,J,re){const ce=V.paint.get("fill-extrusion-opacity");if(ce===0)return;const{isRenderingToTexture:oe}=re;if(I.renderPass==="translucent"){const be=new pn(I.context.gl.LEQUAL,pn.ReadWrite,I.depthRangeFor3D);if(ce!==1||V.paint.get("fill-extrusion-pattern").constantOr(1))gd(I,j,V,J,be,zn.disabled,In.disabled,oe),gd(I,j,V,J,be,I.stencilModeFor3D(),I.colorModeForRenderPass(),oe);else{const Ie=I.colorModeForRenderPass();gd(I,j,V,J,be,zn.disabled,Ie,oe)}}})(s,h,y,_,E):a.ch(y)?(function(I,j,V,J,re){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=I.context,be=I.style.projection.useSubdivision,Ie=I.getDepthModeForSublayer(0,pn.ReadOnly),Ze=I.colorModeForRenderPass();if(I.renderPass==="offscreen")(function(We,Xe,it,pt,ct,_t,Ct){const ft=We.context,Dt=ft.gl;for(const nr of it){const Ht=Xe.getTile(nr),Zt=Ht.dem;if(!Zt||!Zt.data||!Ht.needsHillshadePrepare)continue;const Qt=Zt.dim,Or=Zt.stride,Lr=Zt.getPixels();if(ft.activeTexture.set(Dt.TEXTURE1),ft.pixelStoreUnpackPremultiplyAlpha.set(!1),Ht.demTexture=Ht.demTexture||We.getTileTexture(Or),Ht.demTexture){const sn=Ht.demTexture;sn.update(Lr,{premultiply:!1}),sn.bind(Dt.NEAREST,Dt.CLAMP_TO_EDGE)}else Ht.demTexture=new a.T(ft,Lr,Dt.RGBA,{premultiply:!1}),Ht.demTexture.bind(Dt.NEAREST,Dt.CLAMP_TO_EDGE);ft.activeTexture.set(Dt.TEXTURE0);let _r=Ht.fbo;if(!_r){const sn=new a.T(ft,{width:Qt,height:Qt,data:null},Dt.RGBA);sn.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE),_r=Ht.fbo=ft.createFramebuffer(Qt,Qt,!0,!1),_r.colorAttachment.set(sn.texture)}ft.bindFramebuffer.set(_r.framebuffer),ft.viewport.set([0,0,Qt,Qt]),We.useProgram("hillshadePrepare").draw(ft,Dt.TRIANGLES,ct,_t,Ct,yn.disabled,Uu(Ht.tileID,Zt),null,null,pt.id,We.rasterBoundsBuffer,We.quadTriangleIndexBuffer,We.rasterBoundsSegments),Ht.needsHillshadePrepare=!1}})(I,j,J,V,Ie,zn.disabled,Ze),oe.viewport.set([0,0,I.width,I.height]);else if(I.renderPass==="translucent")if(be){const[We,Xe,it]=I.stencilConfigForOverlapTwoPass(J);hc(I,j,V,it,We,Ie,Ze,!1,ce),hc(I,j,V,it,Xe,Ie,Ze,!0,ce)}else{const[We,Xe]=I.getStencilConfigForOverlapAndUpdateStencilID(J);hc(I,j,V,Xe,We,Ie,Ze,!1,ce)}})(s,h,y,_,E):a.ci(y)?(function(I,j,V,J,re){if(I.renderPass!=="translucent"||!J.length)return;const{isRenderingToTexture:ce}=re,oe=I.style.projection.useSubdivision,be=I.getDepthModeForSublayer(0,pn.ReadOnly),Ie=I.colorModeForRenderPass();if(oe){const[Ze,We,Xe]=I.stencilConfigForOverlapTwoPass(J);Nf(I,j,V,Xe,Ze,be,Ie,!1,ce),Nf(I,j,V,Xe,We,be,Ie,!0,ce)}else{const[Ze,We]=I.getStencilConfigForOverlapAndUpdateStencilID(J);Nf(I,j,V,We,Ze,be,Ie,!1,ce)}})(s,h,y,_,E):a.cj(y)?(function(I,j,V,J,re){if(I.renderPass!=="translucent"||V.paint.get("raster-opacity")===0||!J.length)return;const{isRenderingToTexture:ce}=re,oe=j.getSource(),be=I.style.projection.useSubdivision;if(oe instanceof Yt)Al(I,j,V,J,null,!1,!1,oe.tileCoords,oe.flippedWindingOrder,ce);else if(be){const[Ie,Ze,We]=I.stencilConfigForOverlapTwoPass(J);Al(I,j,V,We,Ie,!1,!0,Gc,!1,ce),Al(I,j,V,We,Ze,!0,!0,Gc,!1,ce)}else{const[Ie,Ze]=I.getStencilConfigForOverlapAndUpdateStencilID(J);Al(I,j,V,Ze,Ie,!1,!0,Gc,!1,ce)}})(s,h,y,_,E):a.ck(y)?(function(I,j,V,J,re){const ce=V.paint.get("background-color"),oe=V.paint.get("background-opacity");if(oe===0)return;const{isRenderingToTexture:be}=re,Ie=I.context,Ze=Ie.gl,We=I.style.projection,Xe=I.transform,it=Xe.tileSize,pt=V.paint.get("background-pattern");if(I.isPatternMissing(pt))return;const ct=!pt&&ce.a===1&&oe===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==ct)return;const _t=zn.disabled,Ct=I.getDepthModeForSublayer(0,ct==="opaque"?pn.ReadWrite:pn.ReadOnly),ft=I.colorModeForRenderPass(),Dt=I.useProgram(pt?"backgroundPattern":"background"),nr=J||bt(Xe,{tileSize:it,terrain:I.style.map.terrain});pt&&(Ie.activeTexture.set(Ze.TEXTURE0),I.imageManager.bind(I.context));const Ht=V.getCrossfadeParameters();for(const Zt of nr){const Qt=Xe.getProjectionData({overscaledTileID:Zt,applyGlobeMatrix:!be,applyTerrainMatrix:!0}),Or=pt?$l(oe,I,pt,{tileID:Zt,tileSize:it},Ht):bs(oe,ce),Lr=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Zt),_r=We.getMeshFromTileID(Ie,Zt.canonical,!1,!0,"raster");Dt.draw(Ie,Ze.TRIANGLES,Ct,_t,ft,yn.backCCW,Or,Lr,Qt,V.id,_r.vertexBuffer,_r.indexBuffer,_r.segments)}})(s,0,y,_,E):a.cl(y)&&(function(I,j,V,J){const{isRenderingGlobe:re}=J,ce=I.context,oe=V.implementation,be=I.style.projection,Ie=I.transform,Ze=Ie.getProjectionDataForCustomLayer(re),We={farZ:Ie.farZ,nearZ:Ie.nearZ,fov:Ie.fov*Math.PI/180,modelViewProjectionMatrix:Ie.modelViewProjectionMatrix,projectionMatrix:Ie.projectionMatrix,shaderData:{variantName:be.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${be.shaderPreludeCode.vertexSource}`,define:be.shaderDefine},defaultProjectionData:Ze},Xe=oe.renderingMode?oe.renderingMode:"2d";if(I.renderPass==="offscreen"){const it=oe.prerender;it&&(I.setCustomLayerDefaults(),ce.setColorMode(I.colorModeForRenderPass()),it.call(oe,ce.gl,We),ce.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),ce.setColorMode(I.colorModeForRenderPass()),ce.setStencilMode(zn.disabled);const it=Xe==="3d"?I.getDepthModeFor3D():I.getDepthModeForSublayer(0,pn.ReadOnly);ce.setDepthMode(it),oe.render(ce.gl,We),ce.setDirty(),I.setBaseState(),ce.bindFramebuffer.set(null)}})(s,0,y,E))}saveTileTexture(s){const h=this._tileTextures[s.size[0]];h?h.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const h=this._tileTextures[s];return h&&h.length>0?h.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const h=this.imageManager.getPattern(s.from.toString()),y=this.imageManager.getPattern(s.to.toString());return!h||!y}useProgram(s,h,y=!1,_=[]){this.cache=this.cache||{};const E=!!this.style.map.terrain,I=this.style.projection,j=y?St.projectionMercator:I.shaderPreludeCode,V=y?Ar:I.shaderDefine,J=s+(h?h.cacheKey:"")+`/${y?jr:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[J]||(this.cache[J]=new du(this.context,St[s],h,_s[s],this._showOverdrawInspector,E,j,V,_)),this.cache[J]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:h}=this.context.gl;return this.width!==s||this.height!==h}}function co(S,s){let h,y=!1,_=null,E=null;const I=()=>{_=null,y&&(S.apply(E,h),_=setTimeout(I,s),y=!1)};return(...j)=>(y=!0,E=this,h=j,_||I(),_)}class xh{constructor(s){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let y;return h.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(y=_)})),(y&&y[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(!this._isValidHash(h))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const y=h.join("/");let _=y;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${y}`);let E=window.location.hash.replace(_,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let I=window.location.href.replace(/(#.+)?$/,E);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=co(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const h=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,_=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,_),I=Math.round(h.lng*E)/E,j=Math.round(h.lat*E)/E,V=this._map.getBearing(),J=this._map.getPitch();let re="";if(re+=s?`/${I}/${j}/${y}`:`${y}/${j}/${I}`,(V||J)&&(re+="/"+Math.round(10*V)/10),J&&(re+=`/${Math.round(J)}`),this._hashName){const ce=this._hashName;let oe=!1;const be=window.location.hash.slice(1).split("&").map((Ie=>{const Ze=Ie.split("=")[0];return Ze===ce?(oe=!0,`${Ze}=${re}`):Ie})).filter((Ie=>Ie));return oe||be.push(`${ce}=${re}`),`#${be.join("&")}`}return`#${re}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch{return!1}const h=+s[0],y=+(s[3]||0),_=+(s[4]||0);return h>=this._map.getMinZoom()&&h<=this._map.getMaxZoom()&&y>=-180&&y<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const bu={linearity:.3,easing:a.cm(0,0,.3,1)},wh=a.e({deceleration:2500,maxSpeed:1400},bu),xd=a.e({deceleration:20,maxSpeed:1400},bu),wd=a.e({deceleration:1e3,maxSpeed:360},bu),Sd=a.e({deceleration:1e3,maxSpeed:90},bu),jp=a.e({deceleration:1e3,maxSpeed:360},bu);class Ff{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,h=w.now();for(;s.length>0&&h-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)h.zoom+=E.zoomDelta||0,h.bearing+=E.bearingDelta||0,h.pitch+=E.pitchDelta||0,h.roll+=E.rollDelta||0,E.panDelta&&h.pan._add(E.panDelta),E.around&&(h.around=E.around),E.pinchAround&&(h.pinchAround=E.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(h.pan.mag()){const E=Wl(h.pan.mag(),y,a.e({},wh,s||{})),I=h.pan.mult(E.amount/h.pan.mag()),j=this._map.cameraHelper.handlePanInertia(I,this._map.transform);_.center=j.easingCenter,_.offset=j.easingOffset,Ss(_,E)}if(h.zoom){const E=Wl(h.zoom,y,xd);_.zoom=this._map.transform.zoom+E.amount,Ss(_,E)}if(h.bearing){const E=Wl(h.bearing,y,wd);_.bearing=this._map.transform.bearing+a.ah(E.amount,-179,179),Ss(_,E)}if(h.pitch){const E=Wl(h.pitch,y,Sd);_.pitch=this._map.transform.pitch+E.amount,Ss(_,E)}if(h.roll){const E=Wl(h.roll,y,jp);_.roll=this._map.transform.roll+a.ah(E.amount,-179,179),Ss(_,E)}if(_.zoom||_.bearing){const E=h.pinchAround===void 0?h.around:h.pinchAround;_.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),a.e(_,{noMoveStart:!0})}}function Ss(S,s){(!S.duration||S.duration<s.duration)&&(S.duration=s.duration,S.easing=s.easing)}function Wl(S,s,h){const{maxSpeed:y,linearity:_,deceleration:E}=h,I=a.ah(S*_/(s/1e3),-y,y),j=Math.abs(I)/(E*_);return{easing:h.easing,duration:1e3*j,amount:I*(j/2)}}class Xo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,y,_={}){y=y instanceof MouseEvent?y:new MouseEvent(s,y);const E=x.mousePos(h.getCanvas(),y),I=h.unproject(E);super(s,a.e({point:E,lngLat:I,originalEvent:y},_)),this._defaultPrevented=!1,this.target=h}}class Wc extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,y){const _=s==="touchend"?y.changedTouches:y.touches,E=x.touchPos(h.getCanvasContainer(),_),I=E.map((V=>h.unproject(V))),j=E.reduce(((V,J,re,ce)=>V.add(J.div(ce.length))),new a.P(0,0));super(s,{points:E,point:j,lngLats:I,lngLat:h.unproject(j),originalEvent:y}),this._defaultPrevented=!1}}class Sh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,h,y){super(s,{originalEvent:y}),this._defaultPrevented=!1}}class zp{constructor(s,h){this._map=s,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Sh(s.type,this._map,s))}mousedown(s,h){return this._mousedownPos=h,this._firePreventable(new Xo(s.type,this._map,s))}mouseup(s){this._map.fire(new Xo(s.type,this._map,s))}click(s,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new Xo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Xo(s.type,this._map,s))}mouseover(s){this._map.fire(new Xo(s.type,this._map,s))}mouseout(s){this._map.fire(new Xo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Wc(s.type,this._map,s))}touchmove(s){this._map.fire(new Wc(s.type,this._map,s))}touchend(s){this._map.fire(new Wc(s.type,this._map,s))}touchcancel(s){this._map.fire(new Wc(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $p{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Xo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Xo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zc{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class Ed{constructor(s,h){this._map=s,this._tr=new Zc(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,h){this.isEnabled()&&s.shiftKey&&s.button===0&&(x.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(s,h){if(!this._active)return;const y=h;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=y,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const E=Math.min(_.x,y.x),I=Math.max(_.x,y.x),j=Math.min(_.y,y.y),V=Math.max(_.y,y.y);x.setTransform(this._box,`translate(${E}px,${j}px)`),this._box.style.width=I-E+"px",this._box.style.height=V-j+"px"}mouseupWindow(s,h){if(!this._active||s.button!==0)return;const y=this._startPos,_=h;if(this.reset(),x.suppressClick(),y.x!==_.x||y.y!==_.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:E=>E.fitScreenCoordinates(y,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,h){return this._map.fire(new a.l(s,{originalEvent:h}))}}function Kc(S,s){if(S.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${s.length}`);const h={};for(let y=0;y<S.length;y++)h[S[y].identifier]=s[y];return h}class Up{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),y.length===this.numTouches&&(this.centroid=(function(_){const E=new a.P(0,0);for(const I of _)E._add(I);return E.div(_.length)})(h),this.touches=Kc(y,h)))}touchmove(s,h,y){if(this.aborted||!this.centroid)return;const _=Kc(y,h);for(const E in this.touches){const I=_[E];(!I||I.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(s,h,y){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class hs{constructor(s){this.singleTap=new Up(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,h,y){this.singleTap.touchstart(s,h,y)}touchmove(s,h,y){this.singleTap.touchmove(s,h,y)}touchend(s,h,y){const _=this.singleTap.touchend(s,h,y);if(_){const E=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(_)<30;if(E&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Es{constructor(s){this._tr=new Zc(s),this._zoomIn=new hs({numTouches:1,numTaps:2}),this._zoomOut=new hs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,h,y){this._zoomIn.touchstart(s,h,y),this._zoomOut.touchstart(s,h,y)}touchmove(s,h,y){this._zoomIn.touchmove(s,h,y),this._zoomOut.touchmove(s,h,y)}touchend(s,h,y){const _=this._zoomIn.touchend(s,h,y),E=this._zoomOut.touchend(s,h,y),I=this._tr;return _?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(_)},{originalEvent:s})}):E?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(E)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xc{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const h=this._moveFunction(...s);if(h.bearingDelta||h.pitchDelta||h.rollDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(s,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(h)?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,h){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const _=Array.isArray(h)?h[0]:h;return!this._moved&&_.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(y,_))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&x.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Pl=0,dc=2,k={[Pl]:1,[dc]:2};class ${constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const h=x.mouseButton(s);this._eventButton=h}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!(function(h,y){const _=k[y];return h.buttons===void 0||(h.buttons&_)!==_})(s,this._eventButton)}isValidEndEvent(s){return x.mouseButton(s)===this._eventButton}}class ee{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class fe{constructor(s=new $({checkCorrectEvent:()=>!0}),h=new ee){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=h}_executeRelevantHandler(s,h,y){return s instanceof MouseEvent?h(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?y(s):void 0}startMove(s){this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.startMove(h)),(h=>this.oneFingerTouchMoveStateManager.startMove(h)))}endMove(s){this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.endMove(h)),(h=>this.oneFingerTouchMoveStateManager.endMove(h)))}isValidStartEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidStartEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidStartEvent(h)))}isValidMoveEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidMoveEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(h)))}isValidEndEvent(s){return this._executeRelevantHandler(s,(h=>this.mouseMoveStateManager.isValidEndEvent(h)),(h=>this.oneFingerTouchMoveStateManager.isValidEndEvent(h)))}}const Pe=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=s=>{s.preventDefault()}};class De{constructor(s,h){this._clickTolerance=s.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,h,y){return this._calculateTransform(s,h,y)}touchmove(s,h,y){if(this._active){if(!this._shouldBePrevented(y.length))return s.preventDefault(),this._calculateTransform(s,h,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,h,y){this._calculateTransform(s,h,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,h,y){y.length>0&&(this._active=!0);const _=Kc(y,h),E=new a.P(0,0),I=new a.P(0,0);let j=0;for(const J in _){const re=_[J],ce=this._touches[J];ce&&(E._add(re),I._add(re.sub(ce)),j++,_[J]=re)}if(this._touches=_,this._shouldBePrevented(j)||!I.mag())return;const V=I.div(j);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(j),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ne{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(s,h,y){if(!this._firstTwoTouches)return;s.preventDefault();const[_,E]=this._firstTwoTouches,I=Te(y,h,_),j=Te(y,h,E);if(!I||!j)return;const V=this._aroundCenter?null:I.add(j).div(2);return this._move([I,j],V,s)}touchend(s,h,y){if(!this._firstTwoTouches)return;const[_,E]=this._firstTwoTouches,I=Te(y,h,_),j=Te(y,h,E);I&&j||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Te(S,s,h){for(let y=0;y<S.length;y++)if(S[y].identifier===h)return s[y]}function Je(S,s){return Math.log(S/s)/Math.LN2}class st extends Ne{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,h){const y=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Je(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Je(this._distance,y),pinchAround:h}}}function kt(S,s){return 180*S.angleWith(s)/Math.PI}class tr extends Ne{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,h,y){const _=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kt(this._vector,_),pinchAround:h}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const h=25/(Math.PI*this._minDiameter)*360,y=kt(s,this._startVector);return Math.abs(y)<h}}function ot(S){return Math.abs(S.y)>Math.abs(S.x)}class zt extends Ne{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,h,y){super.touchstart(s,h,y),this._currentTouchCount=y.length}_start(s){this._lastPoints=s,ot(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,h,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=s[0].sub(this._lastPoints[0]),E=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,E,y.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(_.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(s,h,y){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,E=h.mag()>=2;if(!_&&!E)return;if(!_||!E)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const I=s.y>0==h.y>0;return ot(s)&&ot(h)&&I}}const Rt={panStep:100,bearingStep:15,pitchStep:10};class cr{constructor(s){this._tr=new Zc(s);const h=Rt;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let h=0,y=0,_=0,E=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:s.shiftKey?y=-1:(s.preventDefault(),E=-1);break;case 39:s.shiftKey?y=1:(s.preventDefault(),E=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(y=0,_=0),{cameraAnimation:j=>{const V=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:rr,zoom:h?Math.round(V.zoom)+h*(s.shiftKey?2:1):V.zoom,bearing:V.bearing+y*this._bearingStep,pitch:V.pitch+_*this._pitchStep,offset:[-E*this._panStep,-I*this._panStep],center:V.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rr(S){return S*(2-S)}const hr=4.000244140625,br=1/450;class kr{constructor(s,h){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=s,this._tr=new Zc(s),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=br}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let h=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const y=w.now(),_=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%hr==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),s.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=s,this._delta-=h,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=x.mousePos(this._map.getCanvas(),s),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(a.S.convert(y.center)):h,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const j=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=j),typeof this._targetZoom=="number"&&(this._targetZoom+=j)}if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>hr?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&V!==0&&(V=1/V);const J=typeof this._targetZoom!="number"?s.scale:a.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.ak(J*V)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,y=this._startZoom,_=this._easing;let E,I=!1;if(this._type==="wheel"&&y&&_){const j=w.now()-this._lastWheelEventTime,V=Math.min((j+5)/200,1),J=_(V);E=a.C.number(y,h,J),V<1?this._frameId||(this._frameId=!0):I=!0}else E=h,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!I,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let h=a.co;if(this._prevEase){const y=this._prevEase,_=(w.now()-y.start)/y.duration,E=y.easing(_+.01)-y.easing(_),I=.27/Math.sqrt(E*E+1e-4)*.01,j=Math.sqrt(.0729-I*I);h=a.cm(I,j,.25,1)}return this._prevEase={start:w.now(),duration:s,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Cr{constructor(s,h){this._clickZoom=s,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class _n{constructor(s){this._tr=new Zc(s),this.reset()}reset(){this._active=!1}dblclick(s,h){return s.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cn{constructor(){this._tap=new hs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,h,y){if(!this._swipePoint)if(this._tapTime){const _=h[0],E=s.timeStamp-this._tapTime<500,I=this._tapPoint.dist(_)<30;E&&I?y.length>0&&(this._swipePoint=_,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(s,h,y)}touchmove(s,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const _=h[0],E=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(s,h,y)}touchend(s,h,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const _=this._tap.touchend(s,h,y);_&&(this._tapTime=s.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(s,h,y){this._el=s,this._mousePan=h,this._touchPan=y}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class mn{constructor(s,h,y,_){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=h,this._mousePitch=y,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class di{constructor(s,h,y,_){this._el=s,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ga{constructor(s,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",s);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=h,this._container.appendChild(_);const E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=y,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,h){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Nn=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class Wr extends a.l{}function Xr(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class _a{constructor(s,h){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,E)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=_.type==="renderFrame"?void 0:_,j={needsRenderFrame:!1},V={},J={};for(const{handlerName:oe,handler:be,allowed:Ie}of this._handlers){if(!be.isEnabled())continue;let Ze;if(this._blockedByActive(J,Ie,oe))be.reset();else if(be[E||_.type]){if(a.cp(_,E||_.type)){const We=x.mousePos(this._map.getCanvas(),_);Ze=be[E||_.type](_,We)}else if(a.cq(_,E||_.type)){const We=this._getMapTouches(_.touches),Xe=x.touchPos(this._map.getCanvas(),We);Ze=be[E||_.type](_,Xe,We)}else a.cr(E||_.type)||(Ze=be[E||_.type](_));this.mergeHandlerResult(j,V,Ze,oe,I),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()}(Ze||be.isActive())&&(J[oe]=be)}const re={};for(const oe in this._previousActiveHandlers)J[oe]||(re[oe]=I);this._previousActiveHandlers=J,(Object.keys(re).length||Xr(j))&&(this._changes.push([j,V,re]),this._triggerRenderFrame()),(Object.keys(J).length||Xr(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=j;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ff(s),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,E,I]of this._listeners)x.addEventListener(_,E,_===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[s,h,y]of this._listeners)x.removeEventListener(s,h,s===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(s){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new zp(h,s));const _=h.boxZoom=new Ed(h,s);this._add("boxZoom",_),s.interactive&&s.boxZoom&&_.enable();const E=h.cooperativeGestures=new Ga(h,s.cooperativeGestures);this._add("cooperativeGestures",E),s.cooperativeGestures&&E.enable();const I=new Es(h),j=new _n(h);h.doubleClickZoom=new Cr(j,I),this._add("tapZoom",I),this._add("clickZoom",j),s.interactive&&s.doubleClickZoom&&h.doubleClickZoom.enable();const V=new cn;this._add("tapDragZoom",V);const J=h.touchPitch=new zt(h);this._add("touchPitch",J),s.interactive&&s.touchPitch&&h.touchPitch.enable(s.touchPitch);const re=()=>h.project(h.getCenter()),ce=(function({enable:ct,clickTolerance:_t,aroundCenter:Ct=!0,minPixelCenterThreshold:ft=100,rotateDegreesPerPixelMoved:Dt=.8},nr){const Ht=new $({checkCorrectEvent:Zt=>x.mouseButton(Zt)===0&&Zt.ctrlKey||x.mouseButton(Zt)===2&&!Zt.ctrlKey});return new Xc({clickTolerance:_t,move:(Zt,Qt)=>{const Or=nr();if(Ct&&Math.abs(Or.y-Zt.y)>ft)return{bearingDelta:a.cn(new a.P(Zt.x,Qt.y),Qt,Or)};let Lr=(Qt.x-Zt.x)*Dt;return Ct&&Qt.y<Or.y&&(Lr=-Lr),{bearingDelta:Lr}},moveStateManager:Ht,enable:ct,assignEvents:Pe})})(s,re),oe=(function({enable:ct,clickTolerance:_t,pitchDegreesPerPixelMoved:Ct=-.5}){const ft=new $({checkCorrectEvent:Dt=>x.mouseButton(Dt)===0&&Dt.ctrlKey||x.mouseButton(Dt)===2});return new Xc({clickTolerance:_t,move:(Dt,nr)=>({pitchDelta:(nr.y-Dt.y)*Ct}),moveStateManager:ft,enable:ct,assignEvents:Pe})})(s),be=(function({enable:ct,clickTolerance:_t,rollDegreesPerPixelMoved:Ct=.3},ft){const Dt=new $({checkCorrectEvent:nr=>x.mouseButton(nr)===2&&nr.ctrlKey});return new Xc({clickTolerance:_t,move:(nr,Ht)=>{const Zt=ft();let Qt=(Ht.x-nr.x)*Ct;return Ht.y<Zt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:Dt,enable:ct,assignEvents:Pe})})(s,re);h.dragRotate=new mn(s,ce,oe,be),this._add("mouseRotate",ce,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",be,["mousePitch"]),s.interactive&&s.dragRotate&&h.dragRotate.enable();const Ie=(function({enable:ct,clickTolerance:_t}){const Ct=new $({checkCorrectEvent:ft=>x.mouseButton(ft)===0&&!ft.ctrlKey});return new Xc({clickTolerance:_t,move:(ft,Dt)=>({around:Dt,panDelta:Dt.sub(ft)}),activateOnStart:!0,moveStateManager:Ct,enable:ct,assignEvents:Pe})})(s),Ze=new De(s,h);h.dragPan=new Qn(y,Ie,Ze),this._add("mousePan",Ie),this._add("touchPan",Ze,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&h.dragPan.enable(s.dragPan);const We=new tr,Xe=new st;h.touchZoomRotate=new di(y,Xe,We,V),this._add("touchRotate",We,["touchPan","touchZoom"]),this._add("touchZoom",Xe,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&h.touchZoomRotate.enable(s.touchZoomRotate);const it=h.scrollZoom=new kr(h,(()=>this._triggerRenderFrame()));this._add("scrollZoom",it,["mousePan"]),s.interactive&&s.scrollZoom&&h.scrollZoom.enable(s.scrollZoom);const pt=h.keyboard=new cr(h);this._add("keyboard",pt),s.interactive&&s.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new $p(h))}_add(s,h,y){this._handlers.push({handlerName:s,handler:h,allowed:y}),this._handlersById[s]=h}stop(s){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Nn(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,h,y){for(const _ in s)if(_!==y&&(!h||h.indexOf(_)<0))return!0;return!1}_getMapTouches(s){const h=[];for(const y of s)this._el.contains(y.target)&&h.push(y);return h}mergeHandlerResult(s,h,y,_,E){if(!y)return;a.e(s,y);const I={handlerName:_,originalEvent:y.originalEvent||E};y.zoomDelta!==void 0&&(h.zoom=I),y.panDelta!==void 0&&(h.drag=I),y.rollDelta!==void 0&&(h.roll=I),y.pitchDelta!==void 0&&(h.pitch=I),y.bearingDelta!==void 0&&(h.rotate=I)}_applyChanges(){const s={},h={},y={};for(const[_,E,I]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(s.rollDelta=(s.rollDelta||0)+_.rollDelta),_.around!==void 0&&(s.around=_.around),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),a.e(h,E),a.e(y,I);this._updateMapTransform(s,h,y),this._changes=[]}_updateMapTransform(s,h,y){const _=this._map,E=_._getTransformForUpdate(),I=_.terrain;if(!(Xr(s)||I&&this._terrainMovement))return this._fireEvents(h,y,!0);_._stop(!0);let{panDelta:j,zoomDelta:V,bearingDelta:J,pitchDelta:re,rollDelta:ce,around:oe,pinchAround:be}=s;be!==void 0&&(oe=be),oe=oe||_.transform.centerPoint,I&&!E.isPointOnMapSurface(oe)&&(oe=E.centerPoint);const Ie={panDelta:j,zoomDelta:V,rollDelta:ce,pitchDelta:re,bearingDelta:J,around:oe};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(oe)&&(oe=E.centerPoint);const Ze=oe.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(j?oe.sub(j):oe);I?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ie,E),this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?E.setCenter(E.screenPointToLocation(E.centerPoint.sub(j))):this._map.cameraHelper.handleMapControlsPan(Ie,E,Ze):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Ie,E,Ze))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Ie,E),this._map.cameraHelper.handleMapControlsPan(Ie,E,Ze)),_._applyUpdatedTransform(E),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(h,y,!0)}_fireEvents(s,h,y){const _=Nn(this._eventsInProgress),E=Nn(s),I={};for(const ce in s){const{originalEvent:oe}=s[ce];this._eventsInProgress[ce]||(I[`${ce}start`]=oe),this._eventsInProgress[ce]=s[ce]}!_&&E&&this._fireEvent("movestart",E.originalEvent);for(const ce in I)this._fireEvent(ce,I[ce]);E&&this._fireEvent("move",E.originalEvent);for(const ce in s){const{originalEvent:oe}=s[ce];this._fireEvent(ce,oe)}const j={};let V;for(const ce in this._eventsInProgress){const{handlerName:oe,originalEvent:be}=this._eventsInProgress[ce];this._handlersById[oe].isActive()||(delete this._eventsInProgress[ce],V=h[oe]||be,j[`${ce}end`]=V)}for(const ce in j)this._fireEvent(ce,j[ce]);const J=Nn(this._eventsInProgress),re=(_||E)&&!J;if(re&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ce)}if(y&&re){this._updatingCamera=!0;const ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),oe=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!ce||!ce.essential&&w.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:V})),oe(this._map.getBearing())&&this._map.resetNorth()):(oe(ce.bearing||this._map.getBearing())&&(ce.bearing=0),ce.freezeElevation=!0,this._map.easeTo(ce,{originalEvent:V})),this._updatingCamera=!1}}_fireEvent(s,h){this._map.fire(new a.l(s,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((s=>{delete this._frameId,this.handleEvent(new Wr("renderFrame",{timeStamp:s})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Wn extends a.E{constructor(s,h,y){super(),this._renderFrameCallback=()=>{const _=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=y.bearingSnap,this.cameraHelper=h,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(s,h){s.apply(this.transform),this.transform=s,this.cameraHelper=h}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,h){return this.jumpTo({center:s},h)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,h){return this.jumpTo({elevation:s},h),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,h,y){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},h),y)}panTo(s,h,y){return this.easeTo(a.e({center:s},h),y)}getZoom(){return this.transform.zoom}setZoom(s,h){return this.jumpTo({zoom:s},h),this}zoomTo(s,h,y){return this.easeTo(a.e({zoom:s},h),y)}zoomIn(s,h){return this.zoomTo(this.getZoom()+1,s,h),this}zoomOut(s,h){return this.zoomTo(this.getZoom()-1,s,h),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,h){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)).fire(new a.l("moveend",h))),this}getBearing(){return this.transform.bearing}setBearing(s,h){return this.jumpTo({bearing:s},h),this}getPadding(){return this.transform.padding}setPadding(s,h){return this.jumpTo({padding:s},h),this}rotateTo(s,h,y){return this.easeTo(a.e({bearing:s},h),y)}resetNorth(s,h){return this.rotateTo(0,a.e({duration:1e3},s),h),this}resetNorthPitch(s,h){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),h),this}snapToNorth(s,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,h):this}getPitch(){return this.transform.pitch}setPitch(s,h){return this.jumpTo({pitch:s},h),this}getRoll(){return this.transform.roll}setRoll(s,h){return this.jumpTo({roll:s},h),this}cameraForBounds(s,h){s=Pt.convert(s).adjustAntiMeridian();const y=h&&h.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),y,h)}_cameraForBoxAndBearing(s,h,y,_){const E={top:0,bottom:0,right:0,left:0};if(typeof(_=a.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const J=_.padding;_.padding={top:J,bottom:J,right:J,left:J}}const I=a.e(E,_.padding);_.padding=I;const j=this.transform,V=new Pt(s,h);return this.cameraHelper.cameraForBoxAndBearing(_,I,V,y,j)}fitBounds(s,h,y){return this._fitInternal(this.cameraForBounds(s,h),h,y)}fitScreenCoordinates(s,h,y,_,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(h)),y,_),_,E)}_fitInternal(s,h,y){return s?(delete(h=a.e(s,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(s,h){this.stop();const y=this._getTransformForUpdate();let _=!1,E=!1,I=!1;const j=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,s);const V=y.zoom!==j;return"elevation"in s&&y.elevation!==+s.elevation&&y.setElevation(+s.elevation),"bearing"in s&&y.bearing!==+s.bearing&&(_=!0,y.setBearing(+s.bearing)),"pitch"in s&&y.pitch!==+s.pitch&&(E=!0,y.setPitch(+s.pitch)),"roll"in s&&y.roll!==+s.roll&&(I=!0,y.setRoll(+s.roll)),s.padding==null||y.isPaddingEqual(s.padding)||y.setPadding(s.padding),this._applyUpdatedTransform(y),this.fire(new a.l("movestart",h)).fire(new a.l("move",h)),V&&this.fire(new a.l("zoomstart",h)).fire(new a.l("zoom",h)).fire(new a.l("zoomend",h)),_&&this.fire(new a.l("rotatestart",h)).fire(new a.l("rotate",h)).fire(new a.l("rotateend",h)),E&&this.fire(new a.l("pitchstart",h)).fire(new a.l("pitch",h)).fire(new a.l("pitchend",h)),I&&this.fire(new a.l("rollstart",h)).fire(new a.l("roll",h)).fire(new a.l("rollend",h)),this.fire(new a.l("moveend",h))}calculateCameraOptionsFromTo(s,h,y,_=0){const E=a.a1.fromLngLat(s,h),I=a.a1.fromLngLat(y,_),j=I.x-E.x,V=I.y-E.y,J=I.z-E.z,re=Math.hypot(j,V,J);if(re===0)throw new Error("Can't calculate camera options with same From and To");const ce=Math.hypot(j,V),oe=a.ak(this.transform.cameraToCenterDistance/re/this.transform.tileSize),be=180*Math.atan2(j,-V)/Math.PI;let Ie=180*Math.acos(ce/re)/Math.PI;return Ie=J<0?90-Ie:90+Ie,{center:I.toLngLat(),elevation:_,zoom:oe,pitch:Ie,bearing:be}}calculateCameraOptionsFromCameraLngLatAltRotation(s,h,y,_,E){const I=this.transform.calculateCenterFromCameraLngLatAlt(s,h,y,_);return{center:I.center,elevation:I.elevation,zoom:I.zoom,bearing:y,pitch:_,roll:E}}easeTo(s,h){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.co},s)).animate===!1||!s.essential&&w.prefersReducedMotion)&&(s.duration=0);const y=this._getTransformForUpdate(),_=this.getBearing(),E=y.pitch,I=y.roll,j="bearing"in s?this._normalizeBearing(s.bearing,_):_,V="pitch"in s?+s.pitch:E,J="roll"in s?this._normalizeBearing(s.roll,I):I,re="padding"in s?s.padding:y.padding,ce=a.P.convert(s.offset);let oe,be;s.around&&(oe=a.S.convert(s.around),be=y.locationToScreenPoint(oe));const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ze=this.cameraHelper.handleEaseTo(y,{bearing:j,pitch:V,roll:J,padding:re,around:oe,aroundPoint:be,offsetAsPoint:ce,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||_!==j,this._pitching=this._pitching||V!==E,this._rolling=this._rolling||J!==I,this._padding=!y.isPaddingEqual(re),this._zooming=this._zooming||Ze.isZooming,this._easeId=s.easeId,this._prepareEase(h,s.noMoveStart,Ie),this.terrain&&this._prepareElevation(Ze.elevationCenter),this._ease((We=>{Ze.easeFunc(We),this.terrain&&!s.freezeElevation&&this._updateElevation(We),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(We=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(h,We)}),s),this}_prepareEase(s,h,y={}){this._moving=!0,h||y.moving||this.fire(new a.l("movestart",s)),this._zooming&&!y.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!y.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!y.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!y.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&h!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(y-(h-(y*s+this._elevationStart))/(1-s)),this._elevationTarget=h}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const h=s.getCameraLngLat(),y=s.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(h,s.zoom):0;if(y<_){const E=this.calculateCameraOptionsFromTo(h,_,s.center,s.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(s){const h=[];if(h.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&h.push((_=>this.transformCameraUpdate(_))),!h.length)return;const y=s.clone();for(const _ of h){const E=y.clone(),{center:I,zoom:j,roll:V,pitch:J,bearing:re,elevation:ce}=_(E);I&&E.setCenter(I),ce!==void 0&&E.setElevation(ce),j!==void 0&&E.setZoom(j),V!==void 0&&E.setRoll(V),J!==void 0&&E.setPitch(J),re!==void 0&&E.setBearing(re),y.apply(E)}this.transform.apply(y)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const y=this._zooming,_=this._rotating,E=this._pitching,I=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new a.l("zoomend",s)),_&&this.fire(new a.l("rotateend",s)),E&&this.fire(new a.l("pitchend",s)),I&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,h){if(!s.essential&&w.prefersReducedMotion){const Qt=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Qt,h)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},s);const y=this._getTransformForUpdate(),_=y.bearing,E=y.pitch,I=y.roll,j=y.padding,V="bearing"in s?this._normalizeBearing(s.bearing,_):_,J="pitch"in s?+s.pitch:E,re="roll"in s?this._normalizeBearing(s.roll,I):I,ce="padding"in s?s.padding:y.padding,oe=a.P.convert(s.offset);let be=y.centerPoint.add(oe);const Ie=y.screenPointToLocation(be),Ze=this.cameraHelper.handleFlyTo(y,{bearing:V,pitch:J,roll:re,padding:ce,locationAtOffset:Ie,offsetAsPoint:oe,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let We=s.curve;const Xe=Math.max(y.width,y.height),it=Xe/Ze.scaleOfZoom,pt=Ze.pixelPathLength;typeof Ze.scaleOfMinZoom=="number"&&(We=Math.sqrt(Xe/Ze.scaleOfMinZoom/pt*2));const ct=We*We;function _t(Qt){const Or=(it*it-Xe*Xe+(Qt?-1:1)*ct*ct*pt*pt)/(2*(Qt?it:Xe)*ct*pt);return Math.log(Math.sqrt(Or*Or+1)-Or)}function Ct(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function ft(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const Dt=_t(!1);let nr=function(Qt){return ft(Dt)/ft(Dt+We*Qt)},Ht=function(Qt){return Xe*((ft(Dt)*(Ct(Or=Dt+We*Qt)/ft(Or))-Ct(Dt))/ct)/pt;var Or},Zt=(_t(!0)-Dt)/We;if(Math.abs(pt)<2e-6||!isFinite(Zt)){if(Math.abs(Xe-it)<1e-6)return this.easeTo(s,h);const Qt=it<Xe?-1:1;Zt=Math.abs(Math.log(it/Xe))/We,Ht=()=>0,nr=Or=>Math.exp(Qt*We*Or)}return s.duration="duration"in s?+s.duration:1e3*Zt/("screenSpeed"in s?+s.screenSpeed/We:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=_!==V,this._pitching=J!==E,this._rolling=re!==I,this._padding=!y.isPaddingEqual(ce),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(Ze.targetCenter),this._ease((Qt=>{const Or=Qt*Zt,Lr=1/nr(Or),_r=Ht(Or);this._rotating&&y.setBearing(a.C.number(_,V,Qt)),this._pitching&&y.setPitch(a.C.number(E,J,Qt)),this._rolling&&y.setRoll(a.C.number(I,re,Qt)),this._padding&&(y.interpolatePadding(j,ce,Qt),be=y.centerPoint.add(oe)),Ze.easeFunc(Qt,Lr,_r,be),this.terrain&&!s.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(y),this._fireMoveEvents(h)}),(()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(h)}),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,h){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,h)}return s||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(s,h,y){y.animate===!1||y.duration===0?(s(1),h()):(this._easeStart=w.now(),this._easeOptions=y,this._onEaseFrame=s,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,h){s=a.aO(s,-180,180);const y=Math.abs(s-h);return Math.abs(s-360-h)<y&&(s-=360),Math.abs(s+360-h)<y&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const pi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ki{constructor(s=pi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,h){const y=this._map._getUIString(`AttributionControl.${h}`);s.title=y,s.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const h=this._map.style.sourceCaches;for(const _ in h){const E=h[_];if(E.used||E.usedForTerrain){const I=E.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s=s.filter((_=>String(_).trim())),s.sort(((_,E)=>_.length-E.length)),s=s.filter(((_,E)=>{for(let I=E+1;I<s.length;I++)if(s[I].indexOf(_)>=0)return!1;return!0}));const y=s.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,s.length?(this._innerContainer.innerHTML=x.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fo{constructor(s={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const y=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");const h=x.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class da{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const h=++this._id;return this._queue.push({callback:s,id:h,cancelled:!1}),h}remove(s){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const _ of y)if(_.id===s)return void(_.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var oa=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Jr extends a.E{constructor(s){super(),this._lastTilesetChange=w.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,h){this.sourceCache.update(s,h),this._renderableTilesKeys=[];const y={};for(const _ of bt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),a.bY(_.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[_.key]=new yr(_,this.tileSize),this._lastTilesetChange=w.now());for(const _ in this._tiles)y[_]||delete this._tiles[_]}freeRtt(s){for(const h in this._tiles){const y=this._tiles[h];(!s||y.tileID.equals(s)||y.tileID.isChildOf(s)||s.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((s=>this.getTileByID(s)))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,h){return h?this._getTerrainCoordsForTileRanges(s,h):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const h={};for(const y of this._renderableTilesKeys){const _=this._tiles[y].tileID,E=s.clone(),I=a.ba();if(_.canonical.equals(s.canonical))a.bY(I,0,a.$,a.$,0,0,1);else if(_.canonical.isChildOf(s.canonical)){const j=_.canonical.z-s.canonical.z,V=_.canonical.x-(_.canonical.x>>j<<j),J=_.canonical.y-(_.canonical.y>>j<<j),re=a.$>>j;a.bY(I,0,re,re,0,0,1),a.M(I,I,[-V*re,-J*re,0])}else{if(!s.canonical.isChildOf(_.canonical))continue;{const j=s.canonical.z-_.canonical.z,V=s.canonical.x-(s.canonical.x>>j<<j),J=s.canonical.y-(s.canonical.y>>j<<j),re=a.$>>j;a.bY(I,0,a.$,a.$,0,0,1),a.M(I,I,[V*re,J*re,0]),a.N(I,I,[1/2**j,1/2**j,0])}}E.terrainRttPosMatrix32f=new Float32Array(I),h[y]=E}return h}_getTerrainCoordsForTileRanges(s,h){const y={};for(const _ of this._renderableTilesKeys){const E=this._tiles[_].tileID;if(!this._isWithinTileRanges(E,h))continue;const I=s.clone(),j=a.ba();if(E.canonical.z===s.canonical.z){const V=s.canonical.x-E.canonical.x,J=s.canonical.y-E.canonical.y;a.bY(j,0,a.$,a.$,0,0,1),a.M(j,j,[V*a.$,J*a.$,0])}else if(E.canonical.z>s.canonical.z){const V=E.canonical.z-s.canonical.z,J=E.canonical.x-(E.canonical.x>>V<<V),re=E.canonical.y-(E.canonical.y>>V<<V),ce=s.canonical.x-(E.canonical.x>>V),oe=s.canonical.y-(E.canonical.y>>V),be=a.$>>V;a.bY(j,0,be,be,0,0,1),a.M(j,j,[-J*be+ce*a.$,-re*be+oe*a.$,0])}else{const V=s.canonical.z-E.canonical.z,J=s.canonical.x-(s.canonical.x>>V<<V),re=s.canonical.y-(s.canonical.y>>V<<V),ce=(s.canonical.x>>V)-E.canonical.x,oe=(s.canonical.y>>V)-E.canonical.y,be=a.$<<V;a.bY(j,0,be,be,0,0,1),a.M(j,j,[J*a.$+ce*be,re*a.$+oe*be,0])}I.terrainRttPosMatrix32f=new Float32Array(j),y[_]=I}return y}getSourceTile(s,h){const y=this.sourceCache._source;let _=s.overscaledZ-this.deltaZoom;if(_>y.maxzoom&&(_=y.maxzoom),_<y.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(_).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!E||!E.dem)&&h)for(;_>=y.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(s.scaledTo(_--).key);return E}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,h){return h[s.canonical.z]&&s.canonical.x>=h[s.canonical.z].minTileX&&s.canonical.x<=h[s.canonical.z].maxTileX&&s.canonical.y>=h[s.canonical.z].minTileY&&s.canonical.y<=h[s.canonical.z].maxTileY}}class on{constructor(s,h,y){this._meshCache={},this.painter=s,this.sourceCache=new Jr(h),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,h,y,_=a.$){var E;if(!(h>=0&&h<_&&y>=0&&y<_))return 0;const I=this.getTerrainData(s),j=(E=I.tile)===null||E===void 0?void 0:E.dem;if(!j)return 0;const V=a.cs([],[h/_*a.$,y/_*a.$],I.u_terrain_matrix),J=[V[0]*j.dim,V[1]*j.dim],re=Math.floor(J[0]),ce=Math.floor(J[1]),oe=J[0]-re,be=J[1]-ce;return j.get(re,ce)*(1-oe)*(1-be)+j.get(re+1,ce)*oe*(1-be)+j.get(re,ce+1)*(1-oe)*be+j.get(re+1,ce+1)*oe*be}getElevationForLngLatZoom(s,h){if(!a.ct(h,s.wrap()))return 0;const{tileID:y,mercatorX:_,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(s,h);return this.getElevation(y,_%a.$,E%a.$,a.$)}getElevation(s,h,y,_=a.$){return this.getDEMElevation(s,h,y,_)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const _=this.painter.context,E=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(_,E,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(_,new a.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}const h=this.sourceCache.getSourceTile(s,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const _=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new a.T(_,h.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),h.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const y=h&&h+h.tileID.key+s.key;if(y&&!this._demMatrixCache[y]){const _=this.sourceCache.sourceCache._source.maxzoom;let E=s.canonical.z-h.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=_?E=s.canonical.z-_:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=s.canonical.x-(s.canonical.x>>E<<E),j=s.canonical.y-(s.canonical.y>>E<<E),V=a.cu(new Float64Array(16),[1/(a.$<<E),1/(a.$<<E),0]);a.M(V,V,[I*a.$,j*a.$,0]),this._demMatrixCache[s.key]={matrix:V,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(s){const h=this.painter,y=h.width/devicePixelRatio,_=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(h.context,{width:y,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(h.context,{width:y,height:_,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(y,_,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,y,_))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,I=0;E<this._coordsTextureSize;E++)for(let j=0;j<this._coordsTextureSize;j++,I+=4)h[I+0]=255&j,h[I+1]=255&E,h[I+2]=j>>8<<4|E>>8,h[I+3]=0;const y=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),_=new a.T(s,y,s.gl.RGBA,{premultiply:!1});return _.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),y=this.painter.context,_=y.gl,E=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(E,j-I-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null);const V=h[0]+(h[2]>>4<<8),J=h[1]+((15&h[2])<<8),re=this.coordsIndex[255-h[3]],ce=re&&this.sourceCache.getTileByID(re);if(!ce)return null;const oe=this._coordsTextureSize,be=(1<<ce.tileID.canonical.z)*oe;return new a.a1((ce.tileID.canonical.x*oe+V)/be+ce.tileID.wrap,(ce.tileID.canonical.y*oe+J)/be,this.getElevation(ce.tileID,V,J,oe))}depthAtPoint(s){const h=new Uint8Array(4),y=this.painter.context,_=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,h),y.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(s){var h;const y=((h=this.painter.style.projection)===null||h===void 0?void 0:h.transitionState)>0,_=y&&s.canonical.y===0,E=y&&s.canonical.y===(1<<s.canonical.z)-1,I=`m_${_?"n":""}_${E?"s":""}`;if(this._meshCache[I])return this._meshCache[I];const j=this.painter.context,V=new a.cv,J=new a.aN,re=this.meshSize,ce=a.$/re,oe=re*re;for(let ft=0;ft<=re;ft++)for(let Dt=0;Dt<=re;Dt++)V.emplaceBack(Dt*ce,ft*ce,0);for(let ft=0;ft<oe;ft+=re+1)for(let Dt=0;Dt<re;Dt++)J.emplaceBack(Dt+ft,re+Dt+ft+1,re+Dt+ft+2),J.emplaceBack(Dt+ft,re+Dt+ft+2,Dt+ft+1);const be=V.length,Ie=be+(re+1),Ze=(re+1)*re,We=_?a.bh:0,Xe=_?0:1,it=E?a.bi:a.$,pt=E?0:1;for(let ft=0;ft<=re;ft++)V.emplaceBack(ft*ce,We,Xe);for(let ft=0;ft<=re;ft++)V.emplaceBack(ft*ce,it,pt);for(let ft=0;ft<re;ft++)J.emplaceBack(Ze+ft,Ie+ft,Ie+ft+1),J.emplaceBack(Ze+ft,Ie+ft+1,Ze+ft+1),J.emplaceBack(0+ft,be+ft+1,be+ft),J.emplaceBack(0+ft,0+ft+1,be+ft+1);const ct=V.length,_t=ct+2*(re+1);for(const ft of[0,1])for(let Dt=0;Dt<=re;Dt++)for(const nr of[0,1])V.emplaceBack(ft*a.$,Dt*ce,nr);for(let ft=0;ft<2*re;ft+=2)J.emplaceBack(ct+ft,ct+ft+1,ct+ft+3),J.emplaceBack(ct+ft,ct+ft+3,ct+ft+2),J.emplaceBack(_t+ft,_t+ft+3,_t+ft+1),J.emplaceBack(_t+ft,_t+ft+2,_t+ft+3);const Ct=new Bt(j.createVertexBuffer(V,oa.members),j.createIndexBuffer(J),a.aM.simpleSegment(0,0,V.length,J.length));return this._meshCache[I]=Ct,Ct}getMeshFrameDelta(s){return 2*Math.PI*a.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,h){var y;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(s,h);return(y=this.getMinMaxElevation(_).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(s){const h=this.getTerrainData(s).tile,y={minElevation:null,maxElevation:null};return h&&h.dem&&(y.minElevation=h.dem.min*this.exaggeration,y.maxElevation=h.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(s,h){const y=a.a1.fromLngLat(s.wrap()),_=(1<<h)*a.$,E=y.x*_,I=y.y*_,j=Math.floor(E/a.$),V=Math.floor(I/a.$);return{tileID:new a.Z(h,0,h,j,V),mercatorX:E,mercatorY:I}}}class Ea{constructor(s,h,y){this._context=s,this._size=h,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(y.texture),{id:s,fbo:h,texture:y,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((h=>s.id!==h)),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((s=>!s.inUse))===!1}}const ii={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ci{constructor(s,h){this.painter=s,this.terrain=h,this.pool=new Ea(s.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter((y=>!s._layers[y].isHidden(h))),this._coordsAscending={};for(const y in s.sourceCaches){this._coordsAscending[y]={};const _=s.sourceCaches[y].getVisibleCoordinates(),E=s.sourceCaches[y].getSource(),I=E instanceof Yt?E.terrainTileRanges:null;for(const j of _){const V=this.terrain.sourceCache.getTerrainCoords(j,I);for(const J in V)this._coordsAscending[y][J]||(this._coordsAscending[y][J]=[]),this._coordsAscending[y][J].push(V[J])}}this._coordsAscendingStr={};for(const y of s._order){const _=s._layers[y],E=_.source;if(ii[_.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(const I in this._coordsAscending[E])this._coordsAscendingStr[E][I]=this._coordsAscending[E][I].map((j=>j.key)).sort().join()}}for(const y of this._renderableTiles)for(const _ in this._coordsAscendingStr){const E=this._coordsAscendingStr[_][y.tileID.key];E&&E!==y.rttCoords[_]&&(y.rtt=[])}}renderLayer(s,h){if(s.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},h),{isRenderingToTexture:!0}),_=s.type,E=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(ii[_]&&(this._prevType&&ii[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(s.id),!I))return!0;if(ii[this._prevType]||ii[_]&&I){this._prevType=_;const j=this._stacks.length-1,V=this._stacks[j]||[];for(const J of this._renderableTiles){if(this.pool.isFull()&&(_h(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(J),J.rtt[j]){const ce=this.pool.getObjectForId(J.rtt[j].id);if(ce.stamp===J.rtt[j].stamp){this.pool.useObject(ce);continue}}const re=this.pool.getOrCreateFreeObject();this.pool.useObject(re),this.pool.stampObject(re),J.rtt[j]={id:re.id,stamp:re.stamp},E.context.bindFramebuffer.set(re.fbo.framebuffer),E.context.clear({color:a.bf.transparent,stencil:0}),E.currentStencilSource=void 0;for(let ce=0;ce<V.length;ce++){const oe=E.style._layers[V[ce]],be=oe.source?this._coordsAscending[oe.source][J.tileID.key]:[J.tileID];E.context.viewport.set([0,0,re.fbo.width,re.fbo.height]),E._renderTileClippingMasks(oe,be,!0),E.renderLayer(E,E.style.sourceCaches[oe.source],oe,be,y),oe.source&&(J.rttCoords[oe.source]=this._coordsAscendingStr[oe.source][J.tileID.key])}}return _h(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),ii[_]}return!1}}const mi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bi=p,Vi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:pi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Tl={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class sa{constructor(s,h,y=!1){this.mousedown=E=>{this.startMove(E,x.mousePos(this.element,E)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,x.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHandler.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=h;const _=new fe;this._rotatePitchHandler=new Xc({clickTolerance:3,move:(E,I)=>{const j=h.getBoundingClientRect(),V=new a.P((j.bottom-j.top)/2,(j.right-j.left)/2);return{bearingDelta:a.cn(new a.P(E.x,I.y),I,V),pitchDelta:y?-.5*(I.y-E.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=s,x.addEventListener(h,"mousedown",this.mousedown),x.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(h,"touchcancel",this.reset)}startMove(s,h){this._rotatePitchHandler.dragStart(s,h),x.disableDrag()}move(s,h){const y=this.map,{bearingDelta:_,pitchDelta:E}=this._rotatePitchHandler.dragMove(s,h)||{};_&&y.setBearing(y.getBearing()+_),E&&y.setPitch(y.getPitch()+E)}off(){const s=this.element;x.removeEventListener(s,"mousedown",this.mousedown),x.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let ei;function Bn(S,s,h,y=!1){if(y||!h.getCoveringTilesDetailsProvider().allowWorldCopies())return S?.wrap();const _=new a.S(S.lng,S.lat);if(S=new a.S(S.lng,S.lat),s){const E=new a.S(S.lng-360,S.lat),I=new a.S(S.lng+360,S.lat),j=h.locationToScreenPoint(S).distSqr(s);h.locationToScreenPoint(E).distSqr(s)<j?S=E:h.locationToScreenPoint(I).distSqr(s)<j&&(S=I)}for(;Math.abs(S.lng-h.center.lng)>180;){const E=h.locationToScreenPoint(S);if(E.x>=0&&E.y>=0&&E.x<=h.width&&E.y<=h.height)break;S.lng>h.center.lng?S.lng-=360:S.lng+=360}return S.lng!==_.lng&&h.isPointOnMapSurface(h.locationToScreenPoint(S))?S:_}const Ca={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ho(S,s,h){const y=S.classList;for(const _ in Ca)y.remove(`maplibregl-${h}-anchor-${_}`);y.add(`maplibregl-${h}-anchor-${s}`)}class Ha extends a.E{constructor(s){if(super(),this._onKeyPress=h=>{const y=h.code,_=h.charCode||h.keyCode;y!=="Space"&&y!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=h=>{const y=h.originalEvent.target,_=this._element;this._popup&&(y===_||_.contains(y))&&this.togglePopup()},this._update=h=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(h?.type==="terrain"||h?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Bn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${Ca[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${_}`),w.frameAsync(new AbortController).then((()=>{this._updateOpacity(h&&h.type==="moveend")})).catch((()=>{}))},this._onMove=h=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div");const h=x.createNS("http://www.w3.org/2000/svg","svg"),y=41,_=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${y}px`),h.setAttributeNS(null,"width",`${_}px`),h.setAttributeNS(null,"viewBox",`0 0 ${_} ${y}`);const E=x.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const I=x.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const j=x.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Xe of V){const it=x.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",Xe.rx),it.setAttributeNS(null,"ry",Xe.ry),j.appendChild(it)}const J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);const re=x.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(re);const ce=x.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"fill","#000000");const oe=x.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ce.appendChild(oe);const be=x.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const Ie=x.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ze=x.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#000000"),Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962");const We=x.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#FFFFFF"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962"),Ie.appendChild(Ze),Ie.appendChild(We),I.appendChild(j),I.appendChild(J),I.appendChild(ce),I.appendChild(be),I.appendChild(Ie),h.appendChild(I),h.setAttributeNS(null,"height",y*this._scale+"px"),h.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(h),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(h=>{h.preventDefault()})),this._element.addEventListener("mousedown",(h=>{h.preventDefault()})),ho(this._element,this._anchor,"marker"),s&&s.className)for(const h of s.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var h,y;const _=(h=this._map)===null||h===void 0?void 0:h.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!_||E){const be=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==be&&(this._element.style.opacity=be))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const I=this._map,j=I.terrain.depthAtPoint(this._pos),V=I.terrain.getElevationForLngLatZoom(this._lngLat,I.transform.tileZoom);if(I.transform.lngLatToCameraDepth(this._lngLat,V)-j<.006)return void(this._element.style.opacity=this._opacity);const J=-this._offset.y/I.transform.pixelsPerMeter,re=Math.sin(I.getPitch()*Math.PI/180)*J,ce=I.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),oe=I.transform.lngLatToCameraDepth(this._lngLat,V+re)-ce>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&oe&&this._popup.remove(),this._element.style.opacity=oe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,h){return(this._opacity===void 0||s===void 0&&h===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const ds={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let po=0,Wa=!1;const ko={maxWidth:100,unit:"metric"};function Ui(S,s,h){const y=h&&h.maxWidth||100,_=S._container.clientHeight/2,E=S._container.clientWidth/2,I=S.unproject([E-y/2,_]),j=S.unproject([E+y/2,_]),V=Math.round(S.project(j).x-S.project(I).x),J=Math.min(y,V,S._container.clientWidth),re=I.distanceTo(j);if(h&&h.unit==="imperial"){const ce=3.2808*re;ce>5280?to(s,J,ce/5280,S._getUIString("ScaleControl.Miles")):to(s,J,ce,S._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?to(s,J,re/1852,S._getUIString("ScaleControl.NauticalMiles")):re>=1e3?to(s,J,re/1e3,S._getUIString("ScaleControl.Kilometers")):to(s,J,re,S._getUIString("ScaleControl.Meters"))}function to(S,s,h,y){const _=(function(E){const I=Math.pow(10,`${Math.floor(E)}`.length-1);let j=E/I;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(V){const J=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*J)/J})(j),I*j})(h);S.style.width=s*(_/h)+"px",S.innerHTML=`${_}&nbsp;${y}`}const ks={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},_u=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function nl(S){if(S){if(typeof S=="number"){const s=Math.round(Math.abs(S)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,S),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-S),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(S,0),right:new a.P(-S,0)}}if(S instanceof a.P||Array.isArray(S)){const s=a.P.convert(S);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(S.center||[0,0]),top:a.P.convert(S.top||[0,0]),"top-left":a.P.convert(S["top-left"]||[0,0]),"top-right":a.P.convert(S["top-right"]||[0,0]),bottom:a.P.convert(S.bottom||[0,0]),"bottom-left":a.P.convert(S["bottom-left"]||[0,0]),"bottom-right":a.P.convert(S["bottom-right"]||[0,0]),left:a.P.convert(S.left||[0,0]),right:a.P.convert(S.right||[0,0])}}return nl(new a.P(0,0))}const ro=p;u.AJAXError=a.cz,u.Event=a.l,u.Evented=a.E,u.LngLat=a.S,u.MercatorCoordinate=a.a1,u.Point=a.P,u.addProtocol=a.cA,u.config=a.a,u.removeProtocol=a.cB,u.AttributionControl=Ki,u.BoxZoomHandler=Ed,u.CanvasSource=tt,u.CooperativeGesturesHandler=Ga,u.DoubleClickZoomHandler=Cr,u.DragPanHandler=Qn,u.DragRotateHandler=mn,u.EdgeInsets=Rr,u.FullscreenControl=class extends a.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var s;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=h?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=dr,u.GeolocateControl=class extends a.E{constructor(S){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const h=new a.S(s.coords.longitude,s.coords.latitude),y=s.coords.accuracy,_=this._map.getBearing(),E=a.e({bearing:_},this.options.fitBoundsOptions),I=Pt.fromLngLat(h,y);this._map.fitBounds(I,E,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const h=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&Wa)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ha({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ha({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(h=>{const y=h?.[0]instanceof ResizeObserverEntry;h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},ds,S)}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(s=!1){if(ei!==void 0&&!s)return ei;if(window.navigator.permissions===void 0)return ei=!!window.navigator.geolocation,ei;try{ei=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ei=!!window.navigator.geolocation}return ei}))})().then((s=>this._finishSetupUI(s))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,po=0,Wa=!1}_isOutOfMapMaxBounds(S){const s=this._map.getMaxBounds(),h=S.coords;return s&&(h.longitude<s.getWest()||h.longitude>s.getEast()||h.latitude<s.getSouth()||h.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;const s=this._map.project(S),h=this._map.unproject([s.x+100,s.y]),y=S.distanceTo(h)/100,_=2*this._accuracy/y;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":po--,Wa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),po++,po>1?(S={maximumAge:6e5,timeout:0},Wa=!0):(S=this.options.positionOptions,Wa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;const s=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=x.create("button","maplibregl-ctrl-globe",this._container),x.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},u.Hash=xh,u.ImageSource=Yt,u.KeyboardHandler=cr,u.LngLatBounds=Pt,u.LogoControl=fo,u.Map=class extends Wn{constructor(S){var s,h;a.cw.mark(a.cx.create);const y=Object.assign(Object.assign(Object.assign({},Vi),S),{canvasContextAttributes:Object.assign(Object.assign({},Vi.canvasContextAttributes),S.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new bn,E=new ja;if(y.minZoom!==void 0&&_.setMinZoom(y.minZoom),y.maxZoom!==void 0&&_.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&_.setMinPitch(y.minPitch),y.maxPitch!==void 0&&_.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&_.setRenderWorldCopies(y.renderWorldCopies),super(_,E,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new da,this._controls=[],this._mapId=a.a7(),this._contextLost=j=>{j.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:j}))},this._contextRestored=j=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:j}))},this._onMapScroll=j=>{if(j.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},mi),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl((()=>this.isMoving())),this._requestManager=new q(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let j=!1;const V=co((J=>{this._trackResize&&!this._removed&&(this.resize(J),this.redraw())}),50);this._resizeObserver=new ResizeObserver((J=>{j?V(J):j=!0})),this._resizeObserver.observe(this._container)}this.handlers=new _a(this,y),this._hash=y.hash&&new xh(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,a.e({},y.fitBoundsOptions,{duration:0}))));const I=typeof y.style=="string"||((h=(s=y.style)===null||s===void 0?void 0:s.projection)===null||h===void 0?void 0:h.type)!=="globe";this.resize(null,I),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ki(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new fo,y.logoPosition),this.on("style.load",(()=>{if(I||this._resizeTransform(),this.transform.unmodified){const j=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(j)}})),this.on("data",(j=>{this._update(j.dataType==="style"),this.fire(new a.l(`${j.dataType}data`,j))})),this.on("dataloading",(j=>{this.fire(new a.l(`${j.dataType}dataloading`,j))})),this.on("dataabort",(j=>{this.fire(new a.l("sourcedataabort",j))}))}_getMapId(){return this._mapId}setGlobalStateProperty(S,s){return this.style.setGlobalStateProperty(S,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,s){if(s===void 0&&(s=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=S.onAdd(this);this._controls.push(S);const y=this._controlPositions[s];return s.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(S);return s>-1&&this._controls.splice(s,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return bt(this.transform,S)}calculateCameraOptionsFromTo(S,s,h,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,s,h,y)}resize(S,s=!0){const[h,y]=this._containerDimensions(),_=this._getClampedPixelRatio(h,y);if(this._resizeCanvas(h,y,_),this.painter.resize(h,y,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const j=this._getClampedPixelRatio(h,y);this._resizeCanvas(h,y,j),this.painter.resize(h,y,j)}this._resizeTransform(s);const E=!this._moving;return E&&(this.stop(),this.fire(new a.l("movestart",S)).fire(new a.l("move",S))),this.fire(new a.l("resize",S)),E&&this.fire(new a.l("moveend",S)),this}_resizeTransform(S=!0){var s;const[h,y]=this._containerDimensions();this.transform.resize(h,y,S),(s=this._requestedCameraState)===null||s===void 0||s.resize(h,y,S)}_getClampedPixelRatio(S,s){const{0:h,1:y}=this._maxCanvasSize,_=this.getPixelRatio(),E=S*_,I=s*_;return Math.min(E>h?h/E:1,I>y?y/I:1)*_}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Pt.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(a.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(a.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,s,h){if(S==="mouseenter"||S==="mouseover"){let y=!1;return{layers:s,listener:h,delegates:{mousemove:E=>{const I=s.filter((V=>this.getLayer(V))),j=I.length!==0?this.queryRenderedFeatures(E.point,{layers:I}):[];j.length?y||(y=!0,h.call(this,new Xo(S,this,E.originalEvent,{features:j}))):y=!1},mouseout:()=>{y=!1}}}}if(S==="mouseleave"||S==="mouseout"){let y=!1;return{layers:s,listener:h,delegates:{mousemove:I=>{const j=s.filter((V=>this.getLayer(V)));(j.length!==0?this.queryRenderedFeatures(I.point,{layers:j}):[]).length?y=!0:y&&(y=!1,h.call(this,new Xo(S,this,I.originalEvent)))},mouseout:I=>{y&&(y=!1,h.call(this,new Xo(S,this,I.originalEvent)))}}}}{const y=_=>{const E=s.filter((j=>this.getLayer(j))),I=E.length!==0?this.queryRenderedFeatures(_.point,{layers:E}):[];I.length&&(_.features=I,h.call(this,_),delete _.features)};return{layers:s,listener:h,delegates:{[S]:y}}}}_saveDelegatedListener(S,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(s)}_removeDelegatedListener(S,s,h){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const y=this._delegatedListeners[S];for(let _=0;_<y.length;_++){const E=y[_];if(E.listener===h&&E.layers.length===s.length&&E.layers.every((I=>s.includes(I)))){for(const I in E.delegates)this.off(I,E.delegates[I]);return void y.splice(_,1)}}}on(S,s,h){if(h===void 0)return super.on(S,s);const y=typeof s=="string"?[s]:s,_=this._createDelegatedListener(S,y,h);this._saveDelegatedListener(S,_);for(const E in _.delegates)this.on(E,_.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(S,y,h)}}}once(S,s,h){if(h===void 0)return super.once(S,s);const y=typeof s=="string"?[s]:s,_=this._createDelegatedListener(S,y,h);for(const E in _.delegates){const I=_.delegates[E];_.delegates[E]=(...j)=>{this._removeDelegatedListener(S,y,h),I(...j)}}this._saveDelegatedListener(S,_);for(const E in _.delegates)this.once(E,_.delegates[E]);return this}off(S,s,h){return h===void 0?super.off(S,s):(this._removeDelegatedListener(S,typeof s=="string"?[s]:s,h),this)}queryRenderedFeatures(S,s){if(!this.style)return[];let h;const y=S instanceof a.P||Array.isArray(S),_=y?S:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(y?{}:S)||{},_ instanceof a.P||typeof _[0]=="number")h=[a.P.convert(_)];else{const E=a.P.convert(_[0]),I=a.P.convert(_[1]);h=[E,new a.P(I.x,E.y),I,new a.P(E.x,I.y),E]}return this.style.queryRenderedFeatures(h,s,this.transform)}querySourceFeatures(S,s){return this.style.querySourceFeatures(S,s)}setStyle(S,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(S,s))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const s=this._locale[S];if(s==null)throw new Error(`Missing UI string '${S}'`);return s}_updateStyle(S,s){var h,y;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(S,s)));const _=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new ss(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,s,_):this.style.loadJSON(S,s,_),this):((y=(h=this.style)===null||h===void 0?void 0:h.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ss(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,s){if(typeof S=="string"){const h=this._requestManager.transformRequest(S,"Style");a.j(h,new AbortController).then((y=>{this._updateDiff(y.data,s)})).catch((y=>{y&&this.fire(new a.k(y))}))}else typeof S=="object"&&this._updateDiff(S,s)}_updateDiff(S,s){try{this.style.setState(S,s)&&this._update(!0)}catch(h){a.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(S,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(S,s){return this._lazyInitEmptyStyle(),this.style.addSource(S,s),this._update(!0)}isSourceLoaded(S){const s=this.style&&this.style.sourceCaches[S];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const s=this.style.sourceCaches[S.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&s.reload();for(const h in this.style._layers){const y=this.style._layers[h];y.type==="hillshade"&&y.source===S.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===S.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new on(this.painter,s,S),this.painter.renderToTexture=new Ci(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=h=>{var y;h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=h.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:S})),this}getTerrain(){var S,s;return(s=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const s in S){const h=S[s]._tiles;for(const y in h){const _=h[y];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,s,h){if(h){const y=this.getSource(h);if(!y)throw new Error(`There is no source with ID "${h}", cannot set LOD parameters`);y.calculateTileZoom=Gt(Math.max(1,S),Math.max(1,s))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=Gt(Math.max(1,S),Math.max(1,s));return this._update(!0),this}refreshTiles(S,s){const h=this.style.sourceCaches[S];if(!h)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);s===void 0?h.reload(!0):h.refreshTiles(s.map((y=>new a.a4(y.z,y.x,y.y))))}addImage(S,s,h={}){const{pixelRatio:y=1,sdf:_=!1,stretchX:E,stretchY:I,content:j,textFitWidth:V,textFitHeight:J}=h;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:re,height:ce,data:oe}=s,be=s;return this.style.addImage(S,{data:new a.R({width:re,height:ce},new Uint8Array(oe)),pixelRatio:y,stretchX:E,stretchY:I,content:j,textFitWidth:V,textFitHeight:J,sdf:_,version:0,userImage:be}),be.onAdd&&be.onAdd(this,S),this}}{const{width:re,height:ce,data:oe}=w.getImageData(s);this.style.addImage(S,{data:new a.R({width:re,height:ce},oe),pixelRatio:y,stretchX:E,stretchY:I,content:j,textFitWidth:V,textFitHeight:J,sdf:_,version:0})}}updateImage(S,s){const h=this.style.getImage(S);if(!h)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=s instanceof HTMLImageElement||a.b(s)?w.getImageData(s):s,{width:_,height:E,data:I}=y;if(_===void 0||E===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==h.data.width||E!==h.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(s instanceof HTMLImageElement||a.b(s));return h.data.replace(I,j),this.style.updateImage(S,h),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return D.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,s){return this._lazyInitEmptyStyle(),this.style.addLayer(S,s),this._update(!0)}moveLayer(S,s){return this.style.moveLayer(S,s),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,s,h){return this.style.setLayerZoomRange(S,s,h),this._update(!0)}setFilter(S,s,h={}){return this.style.setFilter(S,s,h),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,s,h,y={}){return this.style.setPaintProperty(S,s,h,y),this._update(!0)}getPaintProperty(S,s){return this.style.getPaintProperty(S,s)}setLayoutProperty(S,s,h,y={}){return this.style.setLayoutProperty(S,s,h,y),this._update(!0)}getLayoutProperty(S,s){return this.style.getLayoutProperty(S,s)}setGlyphs(S,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,s,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,s,h,(y=>{y||this._update(!0)})),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,s,(h=>{h||this._update(!0)})),this}setLight(S,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,s){return this.style.setFeatureState(S,s),this._update()}removeFeatureState(S,s){return this.style.removeFeatureState(S,s),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,s=0;return this._container&&(S=this._container.clientWidth||400,s=this._container.clientHeight||300),[S,s]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const s=this._canvasContainer=x.create("div","maplibregl-canvas-container",S);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),y=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],y);const _=this._controlContainer=x.create("div","maplibregl-control-container",S),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((I=>{E[I]=x.create("div",`maplibregl-ctrl-${I} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,s,h){this._canvas.width=Math.floor(h*S),this._canvas.height=Math.floor(h*s),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{s={requestedAttributes:S},y&&(s.statusMessage=y.statusMessage,s.type=y.type)}),{once:!0});let h=null;if(h=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!h){const y="Failed to initialize WebGL";throw s?(s.message=y,new Error(JSON.stringify(s))):new Error(y)}this.painter=new vu(h,this.transform),P.testSupport(h)}migrateProjection(S,s){super.migrateProjection(S,s),this.painter.transform=S,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var s,h,y,_,E;const I=this._idleTriggered?this._fadeDuration:0,j=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let V=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ce=this.transform.zoom,oe=w.now();this.style.zoomHistory.update(ce,oe);const be=new a.F(ce,{now:oe,fadeDuration:I,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Ie=be.crossFadingFactor();Ie===1&&Ie===this._crossFadingFactor||(V=!0,this._crossFadingFactor=Ie),this.style.update(be)}const J=((h=this.style.projection)===null||h===void 0?void 0:h.transitionState)>0!==j;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||J)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,J),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||V)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frame(this._frameRequest,(S=>{a.cw.frame(S),this._frameRequest=null;try{this._render(S)}catch(s){if(!a.cy(s)&&!(function(h){return h.message===La})(s))throw s}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Bi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},u.MapMouseEvent=Xo,u.MapTouchEvent=Wc,u.MapWheelEvent=Sh,u.Marker=Ha,u.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const s=this._map.getZoom(),h=s===this._map.getMaxZoom(),y=s===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,h)=>{const y=this._map._getUIString(`NavigationControl.${h}`);s.title=y,s.setAttribute("aria-label",y)},this.options=a.e({},Tl,S),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(s=>this._map.zoomIn({},{originalEvent:s}))),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(s=>this._map.zoomOut({},{originalEvent:s}))),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})})),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,s){const h=x.create("button",S,this._container);return h.type="button",h.addEventListener("click",s),h}},u.Popup=class extends a.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Bn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const h=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const _=nl(this.options.offset);if(!y){const I=this._container.offsetWidth,j=this._container.offsetHeight;let V;V=h.y+_.bottom.y<j?["top"]:h.y>this._map.transform.height-j?["bottom"]:[],h.x<I/2?V.push("left"):h.x>this._map.transform.width-I/2&&V.push("right"),y=V.length===0?"bottom":V.join("-")}let E=h.add(_[y]);this.options.subpixelPositioning||(E=E.round()),x.setTransform(this._container,`${Ca[y]} translate(${E.x}px,${E.y}px)`),ho(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(ks),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=a.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const s=document.createDocumentFragment(),h=document.createElement("body");let y;for(h.innerHTML=S;y=h.firstChild,y;)s.appendChild(y);return this.setDOMContent(s)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(_u);S&&S.focus()}},u.RasterDEMTileSource=lr,u.RasterTileSource=sr,u.ScaleControl=class{constructor(S){this._onMove=()=>{Ui(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Ui(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ko),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=kr,u.Style=ss,u.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=zt,u.TwoFingersTouchRotateHandler=tr,u.TwoFingersTouchZoomHandler=st,u.TwoFingersTouchZoomRotateHandler=di,u.VectorTileSource=Le,u.VideoSource=Ve,u.addSourceType=(S,s)=>a._(void 0,void 0,void 0,(function*(){if(Mt(S))throw new Error(`A source type called "${S}" already exists.`);((h,y)=>{lt[h]=y})(S,s)})),u.clearPrewarmedResources=function(){const S=_e;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(Fe),_e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.createTileMesh=gl,u.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return gr().getRTLTextPluginStatus()},u.getVersion=function(){return ro},u.getWorkerCount=function(){return He.workerCount},u.getWorkerUrl=function(){return a.a.WORKER_URL},u.importScriptInWorkers=function(S){return ht().broadcast("IS",S)},u.prewarm=function(){ke().acquire(Fe)},u.setMaxParallelImageRequests=function(S){a.a.MAX_PARALLEL_IMAGE_REQUESTS=S},u.setRTLTextPlugin=function(S,s){return gr().setRTLTextPlugin(S,s)},u.setWorkerCount=function(S){He.workerCount=S},u.setWorkerUrl=function(S){a.a.WORKER_URL=S}}));var o=r;return o}))})(d_)),d_.exports}var AX=CX();class PX{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,p,d,m)=>{if(!r.eventHandlers[a])return;typeof d=="string"&&(m=d,d={}),r.eventHandlers[a].push({handler:p,options:d});const v=[a,p];m&&typeof m=="string"&&(r.initRegisteredElements(m),r.registeredElements[m].wrapperEvents.push(v))},off:(a,p)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(d=>Object.is(d.handler,p)?!1:d))},fire:(a,p)=>{if(!r.eventHandlers[a])return;const d=p||window,m=new Event(a);r.eventHandlers[a].forEach(function(v){v.handler.call(d,m,r,p)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:p})=>({lng:a,lat:p}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,p)=>{(typeof r.registeredElements[a]>"u"||typeof p<"u"&&p)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,p,d)=>r.map.style?(d&&typeof d=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[d].sources.push(a.id)),r.map.addLayer(a,p),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,p,d)=>r.map.style?(d&&typeof d=="string"&&typeof a<"u"&&(r.initRegisteredElements(d),r.registeredElements[d].sources.push(a)),r.map.addSource(a,p),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,p,d,m)=>r.map.style?typeof d=="string"&&typeof m>"u"?r.addImage(a,p,void 0,d):(m&&typeof m=="string"&&typeof a<"u"&&(r.initRegisteredElements(m),r.registeredElements[m].images.push(a)),r.map.addImage(a,p,d),this):this,this.on=(a,p,d,m)=>{if(typeof d=="string"&&typeof p=="function")return r.on.call(r,a,void 0,p,d);let v=[a,p,d];return p||(v=[a,d]),m&&typeof m=="string"&&(r.initRegisteredElements(m),r.registeredElements[m].events.push(v)),r.map.on(...v),this},this.addControl=(a,p,d)=>(d&&typeof d=="string"&&(r.initRegisteredElements(d),r.registeredElements[d].controls.push(a)),r.map.addControl(a,p),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(p=>{r.map.style.getLayer(p)&&r.map.style.removeLayer(p)}),r.registeredElements[a].sources.forEach(p=>{r.map.style.getSource(p)&&r.map.style.removeSource(p)}),r.registeredElements[a].images.forEach(p=>{r.map.hasImage(p)&&r.map.style.removeImage(p)}),r.registeredElements[a].events.forEach(p=>{r.map.off(...p)}),r.registeredElements[a].controls.forEach(p=>{r.map.removeControl(p)}),r.registeredElements[a].wrapperEvents.forEach(p=>{r.wrapper.off(...p)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...p)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...p),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...p)=>r.map&&r.map.style?r.map.style[a](...p):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...p)=>r.map[a](...p))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...p)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...p)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(p=>{r.baseLayers.push(p.id),!r.firstSymbolLayer&&p.type==="symbol"&&(r.firstSymbolLayer=p.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new AX.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}function lh(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const Qu="$$material";function q_(){return q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q_.apply(null,arguments)}function TX(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function IX(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var MX=(function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(IX(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=TX(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),cl="-ms-",V_="-moz-",Xi="-webkit-",g$="comm",D3="rule",N3="decl",RX="@import",y$="@keyframes",OX="@layer",kX=Math.abs,cx=String.fromCharCode,LX=Object.assign;function DX(e,t){return $s(e,0)^45?(((t<<2^$s(e,0))<<2^$s(e,1))<<2^$s(e,2))<<2^$s(e,3):0}function v$(e){return e.trim()}function NX(e,t){return(e=t.exec(e))?e[0]:e}function Yi(e,t,r){return e.replace(t,r)}function bP(e,t){return e.indexOf(t)}function $s(e,t){return e.charCodeAt(t)|0}function Wv(e,t,r){return e.slice(t,r)}function uf(e){return e.length}function F3(e){return e.length}function wb(e,t){return t.push(e),e}function FX(e,t){return e.map(t).join("")}var fx=1,hg=1,b$=0,ru=0,ns=0,Sg="";function hx(e,t,r,n,i,o,u){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:fx,column:hg,length:u,return:""}}function Ey(e,t){return LX(hx("",null,null,"",null,null,0),e,{length:-e.length},t)}function BX(){return ns}function jX(){return ns=ru>0?$s(Sg,--ru):0,hg--,ns===10&&(hg=1,fx--),ns}function Du(){return ns=ru<b$?$s(Sg,ru++):0,hg++,ns===10&&(hg=1,fx++),ns}function yf(){return $s(Sg,ru)}function p_(){return ru}function _0(e,t){return Wv(Sg,e,t)}function Zv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _$(e){return fx=hg=1,b$=uf(Sg=e),ru=0,[]}function x$(e){return Sg="",e}function m_(e){return v$(_0(ru-1,_P(e===91?e+2:e===40?e+1:e)))}function zX(e){for(;(ns=yf())&&ns<33;)Du();return Zv(e)>2||Zv(ns)>3?"":" "}function $X(e,t){for(;--t&&Du()&&!(ns<48||ns>102||ns>57&&ns<65||ns>70&&ns<97););return _0(e,p_()+(t<6&&yf()==32&&Du()==32))}function _P(e){for(;Du();)switch(ns){case e:return ru;case 34:case 39:e!==34&&e!==39&&_P(ns);break;case 40:e===41&&_P(e);break;case 92:Du();break}return ru}function UX(e,t){for(;Du()&&e+ns!==57;)if(e+ns===84&&yf()===47)break;return"/*"+_0(t,ru-1)+"*"+cx(e===47?e:Du())}function qX(e){for(;!Zv(yf());)Du();return _0(e,ru)}function VX(e){return x$(g_("",null,null,null,[""],e=_$(e),0,[0],e))}function g_(e,t,r,n,i,o,u,a,p){for(var d=0,m=0,v=u,w=0,x=0,P=0,T=1,O=1,L=1,N=0,F="",D=i,q=o,z=n,Z=F;O;)switch(P=N,N=Du()){case 40:if(P!=108&&$s(Z,v-1)==58){bP(Z+=Yi(m_(N),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:Z+=m_(N);break;case 9:case 10:case 13:case 32:Z+=zX(P);break;case 92:Z+=$X(p_()-1,7);continue;case 47:switch(yf()){case 42:case 47:wb(GX(UX(Du(),p_()),t,r),p);break;default:Z+="/"}break;case 123*T:a[d++]=uf(Z)*L;case 125*T:case 59:case 0:switch(N){case 0:case 125:O=0;case 59+m:L==-1&&(Z=Yi(Z,/\f/g,"")),x>0&&uf(Z)-v&&wb(x>32?Ak(Z+";",n,r,v-1):Ak(Yi(Z," ","")+";",n,r,v-2),p);break;case 59:Z+=";";default:if(wb(z=Ck(Z,t,r,d,m,i,a,F,D=[],q=[],v),o),N===123)if(m===0)g_(Z,t,z,z,D,o,v,a,q);else switch(w===99&&$s(Z,3)===110?100:w){case 100:case 108:case 109:case 115:g_(e,z,z,n&&wb(Ck(e,z,z,0,0,i,a,F,i,D=[],v),q),i,q,v,a,n?D:q);break;default:g_(Z,z,z,z,[""],q,0,a,q)}}d=m=x=0,T=L=1,F=Z="",v=u;break;case 58:v=1+uf(Z),x=P;default:if(T<1){if(N==123)--T;else if(N==125&&T++==0&&jX()==125)continue}switch(Z+=cx(N),N*T){case 38:L=m>0?1:(Z+="\f",-1);break;case 44:a[d++]=(uf(Z)-1)*L,L=1;break;case 64:yf()===45&&(Z+=m_(Du())),w=yf(),m=v=uf(F=Z+=qX(p_())),N++;break;case 45:P===45&&uf(Z)==2&&(T=0)}}return o}function Ck(e,t,r,n,i,o,u,a,p,d,m){for(var v=i-1,w=i===0?o:[""],x=F3(w),P=0,T=0,O=0;P<n;++P)for(var L=0,N=Wv(e,v+1,v=kX(T=u[P])),F=e;L<x;++L)(F=v$(T>0?w[L]+" "+N:Yi(N,/&\f/g,w[L])))&&(p[O++]=F);return hx(e,t,r,i===0?D3:a,p,d,m)}function GX(e,t,r){return hx(e,t,r,g$,cx(BX()),Wv(e,2,-2),0)}function Ak(e,t,r,n){return hx(e,t,r,N3,Wv(e,0,n),Wv(e,n+1,-1),n)}function Jm(e,t){for(var r="",n=F3(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function HX(e,t,r,n){switch(e.type){case OX:if(e.children.length)break;case RX:case N3:return e.return=e.return||e.value;case g$:return"";case y$:return e.return=e.value+"{"+Jm(e.children,n)+"}";case D3:e.value=e.props.join(",")}return uf(r=Jm(e.children,n))?e.return=e.value+"{"+r+"}":""}function WX(e){var t=F3(e);return function(r,n,i,o){for(var u="",a=0;a<t;a++)u+=e[a](r,n,i,o)||"";return u}}function ZX(e){return function(t){t.root||(t=t.return)&&e(t)}}function w$(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var KX=function(t,r,n){for(var i=0,o=0;i=o,o=yf(),i===38&&o===12&&(r[n]=1),!Zv(o);)Du();return _0(t,ru)},XX=function(t,r){var n=-1,i=44;do switch(Zv(i)){case 0:i===38&&yf()===12&&(r[n]=1),t[n]+=KX(ru-1,r,n);break;case 2:t[n]+=m_(i);break;case 4:if(i===44){t[++n]=yf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=cx(i)}while(i=Du());return t},YX=function(t,r){return x$(XX(_$(t),r))},Pk=new WeakMap,JX=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Pk.get(n))&&!i){Pk.set(t,!0);for(var o=[],u=YX(r,o),a=n.props,p=0,d=0;p<u.length;p++)for(var m=0;m<a.length;m++,d++)t.props[d]=o[p]?u[p].replace(/&\f/g,a[m]):a[m]+" "+u[p]}}},QX=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function S$(e,t){switch(DX(e,t)){case 5103:return Xi+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xi+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Xi+e+V_+e+cl+e+e;case 6828:case 4268:return Xi+e+cl+e+e;case 6165:return Xi+e+cl+"flex-"+e+e;case 5187:return Xi+e+Yi(e,/(\w+).+(:[^]+)/,Xi+"box-$1$2"+cl+"flex-$1$2")+e;case 5443:return Xi+e+cl+"flex-item-"+Yi(e,/flex-|-self/,"")+e;case 4675:return Xi+e+cl+"flex-line-pack"+Yi(e,/align-content|flex-|-self/,"")+e;case 5548:return Xi+e+cl+Yi(e,"shrink","negative")+e;case 5292:return Xi+e+cl+Yi(e,"basis","preferred-size")+e;case 6060:return Xi+"box-"+Yi(e,"-grow","")+Xi+e+cl+Yi(e,"grow","positive")+e;case 4554:return Xi+Yi(e,/([^-])(transform)/g,"$1"+Xi+"$2")+e;case 6187:return Yi(Yi(Yi(e,/(zoom-|grab)/,Xi+"$1"),/(image-set)/,Xi+"$1"),e,"")+e;case 5495:case 3959:return Yi(e,/(image-set\([^]*)/,Xi+"$1$`$1");case 4968:return Yi(Yi(e,/(.+:)(flex-)?(.*)/,Xi+"box-pack:$3"+cl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xi+e+e;case 4095:case 3583:case 4068:case 2532:return Yi(e,/(.+)-inline(.+)/,Xi+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uf(e)-1-t>6)switch($s(e,t+1)){case 109:if($s(e,t+4)!==45)break;case 102:return Yi(e,/(.+:)(.+)-([^]+)/,"$1"+Xi+"$2-$3$1"+V_+($s(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~bP(e,"stretch")?S$(Yi(e,"stretch","fill-available"),t)+e:e}break;case 4949:if($s(e,t+1)!==115)break;case 6444:switch($s(e,uf(e)-3-(~bP(e,"!important")&&10))){case 107:return Yi(e,":",":"+Xi)+e;case 101:return Yi(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xi+($s(e,14)===45?"inline-":"")+"box$3$1"+Xi+"$2$3$1"+cl+"$2box$3")+e}break;case 5936:switch($s(e,t+11)){case 114:return Xi+e+cl+Yi(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Xi+e+cl+Yi(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Xi+e+cl+Yi(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Xi+e+cl+e+e}return e}var eY=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case N3:t.return=S$(t.value,t.length);break;case y$:return Jm([Ey(t,{value:Yi(t.value,"@","@"+Xi)})],i);case D3:if(t.length)return FX(t.props,function(o){switch(NX(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Jm([Ey(t,{props:[Yi(o,/:(read-\w+)/,":"+V_+"$1")]})],i);case"::placeholder":return Jm([Ey(t,{props:[Yi(o,/:(plac\w+)/,":"+Xi+"input-$1")]}),Ey(t,{props:[Yi(o,/:(plac\w+)/,":"+V_+"$1")]}),Ey(t,{props:[Yi(o,/:(plac\w+)/,cl+"input-$1")]})],i)}return""})}},tY=[eY],rY=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(T){var O=T.getAttribute("data-emotion");O.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var i=t.stylisPlugins||tY,o={},u,a=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(T){for(var O=T.getAttribute("data-emotion").split(" "),L=1;L<O.length;L++)o[O[L]]=!0;a.push(T)});var p,d=[JX,QX];{var m,v=[HX,ZX(function(T){m.insert(T)})],w=WX(d.concat(i,v)),x=function(O){return Jm(VX(O),w)};p=function(O,L,N,F){m=N,x(O?O+"{"+L.styles+"}":L.styles),F&&(P.inserted[L.name]=!0)}}var P={key:r,sheet:new MX({key:r,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:p};return P.sheet.hydrate(a),P},bw={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function nY(){if(Tk)return na;Tk=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,w=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,P=e?Symbol.for("react.lazy"):60116,T=e?Symbol.for("react.block"):60121,O=e?Symbol.for("react.fundamental"):60117,L=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function F(q){if(typeof q=="object"&&q!==null){var z=q.$$typeof;switch(z){case t:switch(q=q.type,q){case p:case d:case n:case o:case i:case v:return q;default:switch(q=q&&q.$$typeof,q){case a:case m:case P:case x:case u:return q;default:return z}}case r:return z}}}function D(q){return F(q)===d}return na.AsyncMode=p,na.ConcurrentMode=d,na.ContextConsumer=a,na.ContextProvider=u,na.Element=t,na.ForwardRef=m,na.Fragment=n,na.Lazy=P,na.Memo=x,na.Portal=r,na.Profiler=o,na.StrictMode=i,na.Suspense=v,na.isAsyncMode=function(q){return D(q)||F(q)===p},na.isConcurrentMode=D,na.isContextConsumer=function(q){return F(q)===a},na.isContextProvider=function(q){return F(q)===u},na.isElement=function(q){return typeof q=="object"&&q!==null&&q.$$typeof===t},na.isForwardRef=function(q){return F(q)===m},na.isFragment=function(q){return F(q)===n},na.isLazy=function(q){return F(q)===P},na.isMemo=function(q){return F(q)===x},na.isPortal=function(q){return F(q)===r},na.isProfiler=function(q){return F(q)===o},na.isStrictMode=function(q){return F(q)===i},na.isSuspense=function(q){return F(q)===v},na.isValidElementType=function(q){return typeof q=="string"||typeof q=="function"||q===n||q===d||q===o||q===i||q===v||q===w||typeof q=="object"&&q!==null&&(q.$$typeof===P||q.$$typeof===x||q.$$typeof===u||q.$$typeof===a||q.$$typeof===m||q.$$typeof===O||q.$$typeof===L||q.$$typeof===N||q.$$typeof===T)},na.typeOf=F,na}var Ik;function iY(){return Ik||(Ik=1,bw.exports=nY()),bw.exports}var _w,Mk;function aY(){if(Mk)return _w;Mk=1;var e=iY(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=n,o[e.Memo]=i;function u(P){return e.isMemo(P)?i:o[P.$$typeof]||t}var a=Object.defineProperty,p=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function x(P,T,O){if(typeof T!="string"){if(w){var L=v(T);L&&L!==w&&x(P,L,O)}var N=p(T);d&&(N=N.concat(d(T)));for(var F=u(P),D=u(T),q=0;q<N.length;++q){var z=N[q];if(!r[z]&&!(O&&O[z])&&!(D&&D[z])&&!(F&&F[z])){var Z=m(T,z);try{a(P,z,Z)}catch{}}}}return P}return _w=x,_w}aY();var oY=!0;function E$(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var B3=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||oY===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},j3=function(t,r,n){B3(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function sY(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var lY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},uY=/[A-Z]|^ms/g,cY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,C$=function(t){return t.charCodeAt(1)===45},Rk=function(t){return t!=null&&typeof t!="boolean"},xw=w$(function(e){return C$(e)?e:e.replace(uY,"-$&").toLowerCase()}),Ok=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(cY,function(n,i,o){return cf={name:i,styles:o,next:cf},i})}return lY[t]!==1&&!C$(t)&&typeof r=="number"&&r!==0?r+"px":r};function Kv(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return cf={name:i.name,styles:i.styles,next:cf},i.name;var o=r;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)cf={name:u.name,styles:u.styles,next:cf},u=u.next;var a=o.styles+";";return a}return fY(e,t,r)}case"function":{if(e!==void 0){var p=cf,d=r(e);return cf=p,Kv(e,t,d)}break}}var m=r;if(t==null)return m;var v=t[m];return v!==void 0?v:m}function fY(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Kv(e,t,r[i])+";";else for(var o in r){var u=r[o];if(typeof u!="object"){var a=u;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":Rk(a)&&(n+=xw(o)+":"+Ok(o,a)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(t==null||t[u[0]]===void 0))for(var p=0;p<u.length;p++)Rk(u[p])&&(n+=xw(o)+":"+Ok(o,u[p])+";");else{var d=Kv(e,t,u);switch(o){case"animation":case"animationName":{n+=xw(o)+":"+d+";";break}default:n+=o+"{"+d+"}"}}}return n}var kk=/label:\s*([^\s;{]+)\s*(;|$)/g,cf;function x0(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";cf=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=Kv(r,t,o);else{var u=o;i+=u[0]}for(var a=1;a<e.length;a++)if(i+=Kv(r,t,e[a]),n){var p=o;i+=p[a]}kk.lastIndex=0;for(var d="",m;(m=kk.exec(i))!==null;)d+="-"+m[1];var v=sY(i)+d;return{name:v,styles:i,next:cf}}var hY=function(t){return t()},A$=U_.useInsertionEffect?U_.useInsertionEffect:!1,P$=A$||hY,Lk=A$||M.useLayoutEffect,T$=M.createContext(typeof HTMLElement<"u"?rY({key:"css"}):null);T$.Provider;var z3=function(t){return M.forwardRef(function(r,n){var i=M.useContext(T$);return t(r,i,n)})},w0=M.createContext({}),$3={}.hasOwnProperty,xP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dY=function(t,r){var n={};for(var i in r)$3.call(r,i)&&(n[i]=r[i]);return n[xP]=t,n},pY=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return B3(r,n,i),P$(function(){return j3(r,n,i)}),null},mY=z3(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[xP],o=[n],u="";typeof e.className=="string"?u=E$(t.registered,o,e.className):e.className!=null&&(u=e.className+" ");var a=x0(o,void 0,M.useContext(w0));u+=t.key+"-"+a.name;var p={};for(var d in e)$3.call(e,d)&&d!=="css"&&d!==xP&&(p[d]=e[d]);return p.className=u,r&&(p.ref=r),M.createElement(M.Fragment,null,M.createElement(pY,{cache:t,serialized:a,isStringTag:typeof i=="string"}),M.createElement(i,p))}),gY=mY,Dk=function(t,r){var n=arguments;if(r==null||!$3.call(r,"css"))return M.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=gY,o[1]=dY(t,r);for(var u=2;u<i;u++)o[u]=n[u];return M.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Dk||(Dk={}));var yY=z3(function(e,t){var r=e.styles,n=x0([r],void 0,M.useContext(w0)),i=M.useRef();return Lk(function(){var o=t.key+"-global",u=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,p=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(u.before=t.sheet.tags[0]),p!==null&&(a=!0,p.setAttribute("data-emotion",o),u.hydrate([p])),i.current=[u,a],function(){u.flush()}},[t]),Lk(function(){var o=i.current,u=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&j3(t,n.next,!0),u.tags.length){var p=u.tags[u.tags.length-1].nextElementSibling;u.before=p,u.flush()}t.insert("",n,u,!1)},[t,n.name]),null});function U3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return x0(t)}function S0(){var e=U3.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var vY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,bY=w$(function(e){return vY.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),_Y=bY,xY=function(t){return t!=="theme"},Nk=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?_Y:xY},Fk=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(u){return t.__emotion_forwardProp(u)&&o(u)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},wY=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return B3(r,n,i),P$(function(){return j3(r,n,i)}),null},SY=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,u;r!==void 0&&(o=r.label,u=r.target);var a=Fk(t,r,n),p=a||Nk(i),d=!p("as");return function(){var m=arguments,v=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)v.push.apply(v,m);else{var w=m[0];v.push(w[0]);for(var x=m.length,P=1;P<x;P++)v.push(m[P],w[P])}var T=z3(function(O,L,N){var F=d&&O.as||i,D="",q=[],z=O;if(O.theme==null){z={};for(var Z in O)z[Z]=O[Z];z.theme=M.useContext(w0)}typeof O.className=="string"?D=E$(L.registered,q,O.className):O.className!=null&&(D=O.className+" ");var Q=x0(v.concat(q),L.registered,z);D+=L.key+"-"+Q.name,u!==void 0&&(D+=" "+u);var Y=d&&a===void 0?Nk(F):p,se={};for(var W in O)d&&W==="as"||Y(W)&&(se[W]=O[W]);return se.className=D,N&&(se.ref=N),M.createElement(M.Fragment,null,M.createElement(wY,{cache:L,serialized:Q,isStringTag:typeof F=="string"}),M.createElement(F,se))});return T.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",T.defaultProps=t.defaultProps,T.__emotion_real=T,T.__emotion_base=i,T.__emotion_styles=v,T.__emotion_forwardProp=a,Object.defineProperty(T,"toString",{value:function(){return"."+u}}),T.withComponent=function(O,L){var N=e(O,q_({},r,L,{shouldForwardProp:Fk(T,L,!0)}));return N.apply(void 0,v)},T}},EY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],wP=SY.bind(null);EY.forEach(function(e){wP[e]=wP(e)});var ww={exports:{}},Sw,Bk;function CY(){if(Bk)return Sw;Bk=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sw=e,Sw}var Ew,jk;function AY(){if(jk)return Ew;jk=1;var e=CY();function t(){}function r(){}return r.resetWarningCache=t,Ew=function(){function n(u,a,p,d,m,v){if(v!==e){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},Ew}var zk;function PY(){return zk||(zk=1,ww.exports=AY()()),ww.exports}var TY=PY();const tn=Us(TY);function IY(e){return e==null||Object.keys(e).length===0}function I$(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(IY(i)?r:i):t;return ze.jsx(yY,{styles:n})}function M$(e,t){return wP(e,t)}function MY(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const $k=[];function Hh(e){return $k[0]=e,x0($k)}var Cw={exports:{}},ma={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk;function RY(){if(Uk)return ma;Uk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function P(T){if(typeof T=="object"&&T!==null){var O=T.$$typeof;switch(O){case e:switch(T=T.type,T){case r:case i:case n:case p:case d:case w:return T;default:switch(T=T&&T.$$typeof,T){case u:case a:case v:case m:return T;case o:return T;default:return O}}case t:return O}}}return ma.ContextConsumer=o,ma.ContextProvider=u,ma.Element=e,ma.ForwardRef=a,ma.Fragment=r,ma.Lazy=v,ma.Memo=m,ma.Portal=t,ma.Profiler=i,ma.StrictMode=n,ma.Suspense=p,ma.SuspenseList=d,ma.isContextConsumer=function(T){return P(T)===o},ma.isContextProvider=function(T){return P(T)===u},ma.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===e},ma.isForwardRef=function(T){return P(T)===a},ma.isFragment=function(T){return P(T)===r},ma.isLazy=function(T){return P(T)===v},ma.isMemo=function(T){return P(T)===m},ma.isPortal=function(T){return P(T)===t},ma.isProfiler=function(T){return P(T)===i},ma.isStrictMode=function(T){return P(T)===n},ma.isSuspense=function(T){return P(T)===p},ma.isSuspenseList=function(T){return P(T)===d},ma.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===r||T===i||T===n||T===p||T===d||typeof T=="object"&&T!==null&&(T.$$typeof===v||T.$$typeof===m||T.$$typeof===u||T.$$typeof===o||T.$$typeof===a||T.$$typeof===x||T.getModuleId!==void 0)},ma.typeOf=P,ma}var qk;function OY(){return qk||(qk=1,Cw.exports=RY()),Cw.exports}var R$=OY();function df(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function O$(e){if(M.isValidElement(e)||R$.isValidElementType(e)||!df(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=O$(e[r])}),t}function is(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return df(e)&&df(t)&&Object.keys(t).forEach(i=>{M.isValidElement(t[i])||R$.isValidElementType(t[i])?n[i]=t[i]:df(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&df(e[i])?n[i]=is(e[i],t[i],r):r.clone?n[i]=df(t[i])?O$(t[i]):t[i]:n[i]=t[i]}),n}const kY=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function LY(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=kY(t),u=Object.keys(o);function a(w){return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${r})`}function p(w){return`@media (max-width:${(typeof t[w]=="number"?t[w]:w)-n/100}${r})`}function d(w,x){const P=u.indexOf(x);return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${r}) and (max-width:${(P!==-1&&typeof t[u[P]]=="number"?t[u[P]]:x)-n/100}${r})`}function m(w){return u.indexOf(w)+1<u.length?d(w,u[u.indexOf(w)+1]):a(w)}function v(w){const x=u.indexOf(w);return x===0?a(u[1]):x===u.length-1?p(u[x]):d(w,u[u.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:u,values:o,up:a,down:p,between:d,only:m,not:v,unit:r,...i}}function Vk(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function DY(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function NY(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function FY(e){const t=(o,u)=>o.replace("@media",u?`@container ${u}`:"@container");function r(o,u){o.up=(...a)=>t(e.breakpoints.up(...a),u),o.down=(...a)=>t(e.breakpoints.down(...a),u),o.between=(...a)=>t(e.breakpoints.between(...a),u),o.only=(...a)=>t(e.breakpoints.only(...a),u),o.not=(...a)=>{const p=t(e.breakpoints.not(...a),u);return p.includes("not all and")?p.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):p}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const BY={borderRadius:4};function yv(e,t){return t?is(e,t,{clone:!1}):e}const dx={xs:0,sm:600,md:900,lg:1200,xl:1536},Gk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${dx[e]}px)`},jY={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:dx[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Tc(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||Gk;return t.reduce((u,a,p)=>(u[o.up(o.keys[p])]=r(t[p]),u),{})}if(typeof t=="object"){const o=n.breakpoints||Gk;return Object.keys(t).reduce((u,a)=>{if(DY(o.keys,a)){const p=NY(n.containerQueries?n:jY,a);p&&(u[p]=r(t[a],a))}else if(Object.keys(o.values||dx).includes(a)){const p=o.up(a);u[p]=r(t[a],a)}else{const p=a;u[p]=t[p]}return u},{})}return r(t)}function k$(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function SP(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function zY(e,...t){const r=k$(e),n=[r,...t].reduce((i,o)=>is(i,o),{});return SP(Object.keys(r),n)}function $Y(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function Aw({values:e,breakpoints:t,base:r}){const n=r||$Y(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((u,a,p)=>(Array.isArray(e)?(u[a]=e[p]!=null?e[p]:e[o],o=p):typeof e=="object"?(u[a]=e[a]!=null?e[a]:e[o],o=a):u[a]=e,u),{})}function an(e){if(typeof e!="string")throw new Error(lh(7));return e.charAt(0).toUpperCase()+e.slice(1)}function px(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function G_(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=px(e,r)||n,t&&(i=t(i,n,e)),i}function Ho(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=u=>{if(u[t]==null)return null;const a=u[t],p=u.theme,d=px(p,n)||{};return Tc(u,a,v=>{let w=G_(d,i,v);return v===w&&typeof v=="string"&&(w=G_(d,i,`${t}${v==="default"?"":an(v)}`,v)),r===!1?w:{[r]:w}})};return o.propTypes={},o.filterProps=[t],o}function UY(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const qY={m:"margin",p:"padding"},VY={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Hk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},GY=UY(e=>{if(e.length>2)if(Hk[e])e=Hk[e];else return[e];const[t,r]=e.split(""),n=qY[t],i=VY[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),q3=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],V3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...q3,...V3];function E0(e,t,r,n){const i=px(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const u=Math.abs(o),a=i[u];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function mx(e){return E0(e,"spacing",8)}function up(e,t){return typeof t=="string"||t==null?t:e(t)}function HY(e,t){return r=>e.reduce((n,i)=>(n[i]=up(t,r),n),{})}function WY(e,t,r,n){if(!t.includes(r))return null;const i=GY(r),o=HY(i,n),u=e[r];return Tc(e,u,o)}function L$(e,t){const r=mx(e.theme);return Object.keys(e).map(n=>WY(e,t,n,r)).reduce(yv,{})}function _o(e){return L$(e,q3)}_o.propTypes={};_o.filterProps=q3;function xo(e){return L$(e,V3)}xo.propTypes={};xo.filterProps=V3;function D$(e=8,t=mx({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const u=t(o);return typeof u=="number"?`${u}px`:u}).join(" ");return r.mui=!0,r}function gx(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?yv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function Yu(e){return typeof e!="number"?e:`${e}px solid`}function sc(e,t){return Ho({prop:e,themeKey:"borders",transform:t})}const ZY=sc("border",Yu),KY=sc("borderTop",Yu),XY=sc("borderRight",Yu),YY=sc("borderBottom",Yu),JY=sc("borderLeft",Yu),QY=sc("borderColor"),eJ=sc("borderTopColor"),tJ=sc("borderRightColor"),rJ=sc("borderBottomColor"),nJ=sc("borderLeftColor"),iJ=sc("outline",Yu),aJ=sc("outlineColor"),yx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=E0(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:up(t,n)});return Tc(e,e.borderRadius,r)}return null};yx.propTypes={};yx.filterProps=["borderRadius"];gx(ZY,KY,XY,YY,JY,QY,eJ,tJ,rJ,nJ,yx,iJ,aJ);const vx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=E0(e.theme,"spacing",8),r=n=>({gap:up(t,n)});return Tc(e,e.gap,r)}return null};vx.propTypes={};vx.filterProps=["gap"];const bx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=E0(e.theme,"spacing",8),r=n=>({columnGap:up(t,n)});return Tc(e,e.columnGap,r)}return null};bx.propTypes={};bx.filterProps=["columnGap"];const _x=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=E0(e.theme,"spacing",8),r=n=>({rowGap:up(t,n)});return Tc(e,e.rowGap,r)}return null};_x.propTypes={};_x.filterProps=["rowGap"];const oJ=Ho({prop:"gridColumn"}),sJ=Ho({prop:"gridRow"}),lJ=Ho({prop:"gridAutoFlow"}),uJ=Ho({prop:"gridAutoColumns"}),cJ=Ho({prop:"gridAutoRows"}),fJ=Ho({prop:"gridTemplateColumns"}),hJ=Ho({prop:"gridTemplateRows"}),dJ=Ho({prop:"gridTemplateAreas"}),pJ=Ho({prop:"gridArea"});gx(vx,bx,_x,oJ,sJ,lJ,uJ,cJ,fJ,hJ,dJ,pJ);function Qm(e,t){return t==="grey"?t:e}const mJ=Ho({prop:"color",themeKey:"palette",transform:Qm}),gJ=Ho({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Qm}),yJ=Ho({prop:"backgroundColor",themeKey:"palette",transform:Qm});gx(mJ,gJ,yJ);function ku(e){return e<=1&&e!==0?`${e*100}%`:e}const vJ=Ho({prop:"width",transform:ku}),G3=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||dx[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:ku(r)}};return Tc(e,e.maxWidth,t)}return null};G3.filterProps=["maxWidth"];const bJ=Ho({prop:"minWidth",transform:ku}),_J=Ho({prop:"height",transform:ku}),xJ=Ho({prop:"maxHeight",transform:ku}),wJ=Ho({prop:"minHeight",transform:ku});Ho({prop:"size",cssProperty:"width",transform:ku});Ho({prop:"size",cssProperty:"height",transform:ku});const SJ=Ho({prop:"boxSizing"});gx(vJ,G3,bJ,_J,xJ,wJ,SJ);const C0={border:{themeKey:"borders",transform:Yu},borderTop:{themeKey:"borders",transform:Yu},borderRight:{themeKey:"borders",transform:Yu},borderBottom:{themeKey:"borders",transform:Yu},borderLeft:{themeKey:"borders",transform:Yu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yx},color:{themeKey:"palette",transform:Qm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Qm},backgroundColor:{themeKey:"palette",transform:Qm},p:{style:xo},pt:{style:xo},pr:{style:xo},pb:{style:xo},pl:{style:xo},px:{style:xo},py:{style:xo},padding:{style:xo},paddingTop:{style:xo},paddingRight:{style:xo},paddingBottom:{style:xo},paddingLeft:{style:xo},paddingX:{style:xo},paddingY:{style:xo},paddingInline:{style:xo},paddingInlineStart:{style:xo},paddingInlineEnd:{style:xo},paddingBlock:{style:xo},paddingBlockStart:{style:xo},paddingBlockEnd:{style:xo},m:{style:_o},mt:{style:_o},mr:{style:_o},mb:{style:_o},ml:{style:_o},mx:{style:_o},my:{style:_o},margin:{style:_o},marginTop:{style:_o},marginRight:{style:_o},marginBottom:{style:_o},marginLeft:{style:_o},marginX:{style:_o},marginY:{style:_o},marginInline:{style:_o},marginInlineStart:{style:_o},marginInlineEnd:{style:_o},marginBlock:{style:_o},marginBlockStart:{style:_o},marginBlockEnd:{style:_o},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vx},rowGap:{style:_x},columnGap:{style:bx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ku},maxWidth:{style:G3},minWidth:{transform:ku},height:{transform:ku},maxHeight:{transform:ku},minHeight:{transform:ku},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function EJ(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function CJ(e,t){return typeof e=="function"?e(t):e}function AJ(){function e(r,n,i,o){const u={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:p=r,themeKey:d,transform:m,style:v}=a;if(n==null)return null;if(d==="typography"&&n==="inherit")return{[r]:n};const w=px(i,d)||{};return v?v(u):Tc(u,n,P=>{let T=G_(w,m,P);return P===T&&typeof P=="string"&&(T=G_(w,m,`${r}${P==="default"?"":an(P)}`,P)),p===!1?T:{[p]:T}})}function t(r){const{sx:n,theme:i={},nested:o}=r||{};if(!n)return null;const u=i.unstable_sxConfig??C0;function a(p){let d=p;if(typeof p=="function")d=p(i);else if(typeof p!="object")return p;if(!d)return null;const m=k$(i.breakpoints),v=Object.keys(m);let w=m;return Object.keys(d).forEach(x=>{const P=CJ(d[x],i);if(P!=null)if(typeof P=="object")if(u[x])w=yv(w,e(x,P,i,u));else{const T=Tc({theme:i},P,O=>({[x]:O}));EJ(T,P)?w[x]=t({sx:P,theme:i,nested:!0}):w=yv(w,T)}else w=yv(w,e(x,P,i,u))}),!o&&i.modularCssLayers?{"@layer sx":Vk(i,SP(v,w))}:Vk(i,SP(v,w))}return Array.isArray(n)?n.map(a):a(n)}return t}const Kh=AJ();Kh.filterProps=["sx"];function PJ(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function xx(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...u}=e,a=LY(r),p=D$(i);let d=is({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:p,shape:{...BY,...o}},u);return d=FY(d),d.applyStyles=PJ,d=t.reduce((m,v)=>is(m,v),d),d.unstable_sxConfig={...C0,...u?.unstable_sxConfig},d.unstable_sx=function(v){return Kh({sx:v,theme:this})},d}function TJ(e){return Object.keys(e).length===0}function wx(e=null){const t=M.useContext(w0);return!t||TJ(t)?e:t}const IJ=xx();function Sx(e=IJ){return wx(e)}function Pw(e){const t=Hh(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function N$({styles:e,themeId:t,defaultTheme:r={}}){const n=Sx(r),i=t&&n[t]||n;let o=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(u=>Pw(typeof u=="function"?u(i):u)):o=Pw(o)),ze.jsx(I$,{styles:o})}const MJ=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??C0;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function H3(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=MJ(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...u)=>{const a=t(...u);return df(a)?{...n,...a}:n}:o={...n,...t},{...i,sx:o}}const Wk=e=>e,RJ=()=>{let e=Wk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Wk}}},W3=RJ();function F$(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=F$(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Br(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=F$(e))&&(n&&(n+=" "),n+=t);return n}function B$(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=M$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Kh);return M.forwardRef(function(p,d){const m=Sx(r),{className:v,component:w="div",...x}=H3(p);return ze.jsx(o,{as:w,ref:d,className:Br(v,i?i(n):n),theme:t&&m[t]||m,...x})})}const OJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function qn(e,t,r="Mui"){const n=OJ[t];return n?`${r}-${n}`:`${W3.generate(e)}-${t}`}function jn(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=qn(e,i,r)}),n}const kJ=jn("MuiBox",["root"]),LJ=B$({defaultClassName:kJ.root,generateClassName:W3.generate});function j$(e){const{variants:t,...r}=e,n={variants:t,style:Hh(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=Hh(i.style))}),n}const DJ=xx();function Tw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Yd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function NJ(e){return e?(t,r)=>r[e]:null}function FJ(e,t,r){e.theme=jJ(e.theme)?r:e.theme[t]||e.theme}function y_(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>y_(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?Yd(n.style,r):n.style;else{const{variants:o,...u}=n;i=r?Yd(Hh(u),r):u}return z$(e,n.variants,[i],r)}return n?.isProcessed?r?Yd(Hh(n.style),r):n.style:r?Yd(Hh(n),r):n}function z$(e,t,r=[],n=void 0){let i;e:for(let o=0;o<t.length;o+=1){const u=t[o];if(typeof u.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!u.props(i))continue}else for(const a in u.props)if(e[a]!==u.props[a]&&e.ownerState?.[a]!==u.props[a])continue e;typeof u.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?Yd(Hh(u.style(i)),n):u.style(i))):r.push(n?Yd(Hh(u.style),n):u.style)}return r}function $$(e={}){const{themeId:t,defaultTheme:r=DJ,rootShouldForwardProp:n=Tw,slotShouldForwardProp:i=Tw}=e;function o(a){FJ(a,t,r)}return(a,p={})=>{MY(a,z=>z.filter(Z=>Z!==Kh));const{name:d,slot:m,skipVariantsResolver:v,skipSx:w,overridesResolver:x=NJ($J(m)),...P}=p,T=d&&d.startsWith("Mui")||m?"components":"custom",O=v!==void 0?v:m&&m!=="Root"&&m!=="root"||!1,L=w||!1;let N=Tw;m==="Root"||m==="root"?N=n:m?N=i:zJ(a)&&(N=void 0);const F=M$(a,{shouldForwardProp:N,label:BJ(),...P}),D=z=>{if(z.__emotion_real===z)return z;if(typeof z=="function")return function(Q){return y_(Q,z,Q.theme.modularCssLayers?T:void 0)};if(df(z)){const Z=j$(z);return function(Y){return Z.variants?y_(Y,Z,Y.theme.modularCssLayers?T:void 0):Y.theme.modularCssLayers?Yd(Z.style,T):Z.style}}return z},q=(...z)=>{const Z=[],Q=z.map(D),Y=[];if(Z.push(o),d&&x&&Y.push(function(ae){const ue=ae.theme.components?.[d]?.styleOverrides;if(!ue)return null;const ye={};for(const Se in ue)ye[Se]=y_(ae,ue[Se],ae.theme.modularCssLayers?"theme":void 0);return x(ae,ye)}),d&&!O&&Y.push(function(ae){const ue=ae.theme?.components?.[d]?.variants;return ue?z$(ae,ue,[],ae.theme.modularCssLayers?"theme":void 0):null}),L||Y.push(Kh),Array.isArray(Q[0])){const G=Q.shift(),ae=new Array(Z.length).fill(""),le=new Array(Y.length).fill("");let ue;ue=[...ae,...G,...le],ue.raw=[...ae,...G.raw,...le],Z.unshift(ue)}const se=[...Z,...Q,...Y],W=F(...se);return a.muiName&&(W.muiName=a.muiName),W};return F.withConfig&&(q.withConfig=F.withConfig),q}}function BJ(e,t){return void 0}function jJ(e){for(const t in e)return!1;return!0}function zJ(e){return typeof e=="string"&&e.charCodeAt(0)>96}function $J(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const _p=$$();function Xv(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const u=e[o],a=t[o];if(!a)n[o]=u||{};else if(!u)n[o]=a;else{n[o]={...a};for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const d=p;n[o][d]=Xv(u[d],a[d],r)}}}else o==="className"&&r&&t.className?n.className=Br(e?.className,t?.className):o==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[o]===void 0&&(n[o]=e[o])}return n}function U$(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:Xv(t.components[r].defaultProps,n)}function Z3({props:e,name:t,defaultTheme:r,themeId:n}){let i=Sx(r);return n&&(i=i[n]||i),U$({theme:i,name:t,props:e})}const Nu=typeof window<"u"?M.useLayoutEffect:M.useEffect;function UJ(e,t,r,n,i){const[o,u]=M.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return Nu(()=>{if(!r)return;const a=r(e),p=()=>{u(a.matches)};return p(),a.addEventListener("change",p),()=>{a.removeEventListener("change",p)}},[e,r]),o}const qJ={...U_},q$=qJ.useSyncExternalStore;function VJ(e,t,r,n,i){const o=M.useCallback(()=>t,[t]),u=M.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:m}=n(e);return()=>m}return o},[o,e,n,i,r]),[a,p]=M.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const m=r(e);return[()=>m.matches,v=>(m.addEventListener("change",v),()=>{m.removeEventListener("change",v)})]},[o,r,e]);return q$(p,a,u)}function V$(e={}){const{themeId:t}=e;return function(n,i={}){let o=wx();o&&t&&(o=o[t]||o);const u=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:p=u?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:m=!1}=U$({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof n=="function"?n(o):n;return v=v.replace(/^@media( ?)/m,""),v.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(q$!==void 0?VJ:UJ)(v,a,p,d,m)}}V$();function GJ(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function K3(e,t=0,r=1){return GJ(e,t,r)}function HJ(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Xh(e){if(e.type)return e;if(e.charAt(0)==="#")return Xh(HJ(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(lh(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(lh(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const WJ=e=>{const t=Xh(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},tv=(e,t)=>{try{return WJ(e)}catch{return e}};function Ex(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function G$(e){e=Xh(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),u=(d,m=(d+r/30)%12)=>i-o*Math.max(Math.min(m-3,9-m,1),-1);let a="rgb";const p=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return e.type==="hsla"&&(a+="a",p.push(t[3])),Ex({type:a,values:p})}function EP(e){e=Xh(e);let t=e.type==="hsl"||e.type==="hsla"?Xh(G$(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ZJ(e,t){const r=EP(e),n=EP(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function H_(e,t){return e=Xh(e),t=K3(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Ex(e)}function Od(e,t,r){try{return H_(e,t)}catch{return e}}function Cx(e,t){if(e=Xh(e),t=K3(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Ex(e)}function la(e,t,r){try{return Cx(e,t)}catch{return e}}function Ax(e,t){if(e=Xh(e),t=K3(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ex(e)}function ua(e,t,r){try{return Ax(e,t)}catch{return e}}function CP(e,t=.15){return EP(e)>.5?Cx(e,t):Ax(e,t)}function Sb(e,t,r){try{return CP(e,t)}catch{return e}}const H$=M.createContext(null);function X3(){return M.useContext(H$)}const KJ=typeof Symbol=="function"&&Symbol.for,XJ=KJ?Symbol.for("mui.nested"):"__THEME_NESTED__";function YJ(e,t){return typeof t=="function"?t(e):{...e,...t}}function JJ(e){const{children:t,theme:r}=e,n=X3(),i=M.useMemo(()=>{const o=n===null?{...r}:YJ(n,r);return o!=null&&(o[XJ]=n!==null),o},[r,n]);return ze.jsx(H$.Provider,{value:i,children:t})}const W$=M.createContext();function QJ({value:e,...t}){return ze.jsx(W$.Provider,{value:e??!0,...t})}const Px=()=>M.useContext(W$)??!1,Z$=M.createContext(void 0);function eQ({value:e,children:t}){return ze.jsx(Z$.Provider,{value:e,children:t})}function tQ(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?Xv(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Xv(i,n,t.components.mergeClassNameAndStyle):n}function rQ({props:e,name:t}){const r=M.useContext(Z$);return tQ({props:e,name:t,theme:{components:r}})}let Zk=0;function nQ(e){const[t,r]=M.useState(e),n=e||t;return M.useEffect(()=>{t==null&&(Zk+=1,r(`mui-${Zk}`))},[t]),n}const iQ={...U_},Kk=iQ.useId;function xp(e){if(Kk!==void 0){const t=Kk();return e??t}return nQ(e)}function aQ(e){const t=wx(),r=xp()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Nu(()=>{const o=document.querySelector("head");if(!o)return;const u=o.firstChild;if(i){if(u&&u.hasAttribute?.("data-mui-layer-order")&&u.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,o.prepend(a)}else o.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?ze.jsx(N$,{styles:i}):null}const Xk={};function Yk(e,t,r,n=!1){return M.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),u=e?{...t,[e]:o}:o;return n?()=>u:u}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function K$(e){const{children:t,theme:r,themeId:n}=e,i=wx(Xk),o=X3()||Xk,u=Yk(n,i,r),a=Yk(n,o,r,!0),p=(n?u[n]:u).direction==="rtl",d=aQ(u);return ze.jsx(JJ,{theme:a,children:ze.jsx(w0.Provider,{value:u,children:ze.jsx(QJ,{value:p,children:ze.jsxs(eQ,{value:n?u[n].components:u.components,children:[d,t]})})})})}const Jk={theme:void 0};function oQ(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(Jk.theme=i.theme,o=j$(e(Jk)),t=o,r=i.theme),o}}const Y3="mode",J3="color-scheme",sQ="data-color-scheme";function lQ(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=Y3,colorSchemeStorageKey:o=J3,attribute:u=sQ,colorSchemeNode:a="document.documentElement",nonce:p}=e||{};let d="",m=u;if(u==="class"&&(m=".%s"),u==="data"&&(m="[data-%s]"),m.startsWith(".")){const w=m.substring(1);d+=`${a}.classList.remove('${w}'.replace('%s', light), '${w}'.replace('%s', dark));
      ${a}.classList.add('${w}'.replace('%s', colorScheme));`}const v=m.match(/\[([^[\]]+)\]/);if(v){const[w,x]=v[1].split("=");x||(d+=`${a}.removeAttribute('${w}'.replace('%s', light));
      ${a}.removeAttribute('${w}'.replace('%s', dark));`),d+=`
      ${a}.setAttribute('${w}'.replace('%s', colorScheme), ${x?`${x}.replace('%s', colorScheme)`:'""'});`}else d+=`${a}.setAttribute('${m}', colorScheme);`;return ze.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${o}-dark') || '${n}';
  const light = localStorage.getItem('${o}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${d}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function uQ(){}const cQ=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return uQ;const n=i=>{const o=i.newValue;i.key===e&&r(o)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function Iw(){}function Qk(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function X$(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function fQ(e){return X$(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function hQ(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=Y3,colorSchemeStorageKey:u=J3,storageWindow:a=typeof window>"u"?void 0:window,storageManager:p=cQ,noSsr:d=!1}=e,m=i.join(","),v=i.length>1,w=M.useMemo(()=>p?.({key:o,storageWindow:a}),[p,o,a]),x=M.useMemo(()=>p?.({key:`${u}-light`,storageWindow:a}),[p,u,a]),P=M.useMemo(()=>p?.({key:`${u}-dark`,storageWindow:a}),[p,u,a]),[T,O]=M.useState(()=>{const Q=w?.get(t)||t,Y=x?.get(r)||r,se=P?.get(n)||n;return{mode:Q,systemMode:Qk(Q),lightColorScheme:Y,darkColorScheme:se}}),[L,N]=M.useState(d||!v);M.useEffect(()=>{N(!0)},[]);const F=fQ(T),D=M.useCallback(Q=>{O(Y=>{if(Q===Y.mode)return Y;const se=Q??t;return w?.set(se),{...Y,mode:se,systemMode:Qk(se)}})},[w,t]),q=M.useCallback(Q=>{Q?typeof Q=="string"?Q&&!m.includes(Q)?console.error(`\`${Q}\` does not exist in \`theme.colorSchemes\`.`):O(Y=>{const se={...Y};return X$(Y,W=>{W==="light"&&(x?.set(Q),se.lightColorScheme=Q),W==="dark"&&(P?.set(Q),se.darkColorScheme=Q)}),se}):O(Y=>{const se={...Y},W=Q.light===null?r:Q.light,G=Q.dark===null?n:Q.dark;return W&&(m.includes(W)?(se.lightColorScheme=W,x?.set(W)):console.error(`\`${W}\` does not exist in \`theme.colorSchemes\`.`)),G&&(m.includes(G)?(se.darkColorScheme=G,P?.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),se}):O(Y=>(x?.set(r),P?.set(n),{...Y,lightColorScheme:r,darkColorScheme:n}))},[m,x,P,r,n]),z=M.useCallback(Q=>{T.mode==="system"&&O(Y=>{const se=Q?.matches?"dark":"light";return Y.systemMode===se?Y:{...Y,systemMode:se}})},[T.mode]),Z=M.useRef(z);return Z.current=z,M.useEffect(()=>{if(typeof window.matchMedia!="function"||!v)return;const Q=(...se)=>Z.current(...se),Y=window.matchMedia("(prefers-color-scheme: dark)");return Y.addListener(Q),Q(Y),()=>{Y.removeListener(Q)}},[v]),M.useEffect(()=>{if(v){const Q=w?.subscribe(W=>{(!W||["light","dark","system"].includes(W))&&D(W||t)})||Iw,Y=x?.subscribe(W=>{(!W||m.match(W))&&q({light:W})})||Iw,se=P?.subscribe(W=>{(!W||m.match(W))&&q({dark:W})})||Iw;return()=>{Q(),Y(),se()}}},[q,D,m,t,a,v,w,x,P]),{...T,mode:L?T.mode:void 0,systemMode:L?T.systemMode:void 0,colorScheme:L?F:void 0,setMode:D,setColorScheme:q}}const dQ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function pQ(e){const{themeId:t,theme:r={},modeStorageKey:n=Y3,colorSchemeStorageKey:i=J3,disableTransitionOnChange:o=!1,defaultColorScheme:u,resolveTheme:a}=e,p={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},d=M.createContext(void 0),m=()=>M.useContext(d)||p,v={},w={};function x(L){const{children:N,theme:F,modeStorageKey:D=n,colorSchemeStorageKey:q=i,disableTransitionOnChange:z=o,storageManager:Z,storageWindow:Q=typeof window>"u"?void 0:window,documentNode:Y=typeof document>"u"?void 0:document,colorSchemeNode:se=typeof document>"u"?void 0:document.documentElement,disableNestedContext:W=!1,disableStyleSheetGeneration:G=!1,defaultMode:ae="system",forceThemeRerender:le=!1,noSsr:ue}=L,ye=M.useRef(!1),Se=X3(),ge=M.useContext(d),xe=!!ge&&!W,Fe=M.useMemo(()=>F||(typeof r=="function"?r():r),[F]),He=Fe[t],pe=He||Fe,{colorSchemes:_e=v,components:Ce=w,cssVarPrefix:ke}=pe,$e=Object.keys(_e).filter(ar=>!!_e[ar]).join(","),ht=M.useMemo(()=>$e.split(","),[$e]),At=typeof u=="string"?u:u.light,mt=typeof u=="string"?u:u.dark,rt=_e[At]&&_e[mt]?ae:_e[pe.defaultColorScheme]?.palette?.mode||pe.palette?.mode,{mode:Lt,setMode:Tt,systemMode:Pt,lightColorScheme:ut,darkColorScheme:Le,colorScheme:sr,setColorScheme:lr}=hQ({supportedColorSchemes:ht,defaultLightColorScheme:At,defaultDarkColorScheme:mt,modeStorageKey:D,colorSchemeStorageKey:q,defaultMode:rt,storageManager:Z,storageWindow:Q,noSsr:ue});let dr=Lt,Yt=sr;xe&&(dr=ge.mode,Yt=ge.colorScheme);let Ve=Yt||pe.defaultColorScheme;pe.vars&&!le&&(Ve=pe.defaultColorScheme);const tt=M.useMemo(()=>{const ar=pe.generateThemeVars?.()||pe.vars,gr={...pe,components:Ce,colorSchemes:_e,cssVarPrefix:ke,vars:ar};if(typeof gr.generateSpacing=="function"&&(gr.spacing=gr.generateSpacing()),Ve){const yr=_e[Ve];yr&&typeof yr=="object"&&Object.keys(yr).forEach(Ye=>{yr[Ye]&&typeof yr[Ye]=="object"?gr[Ye]={...gr[Ye],...yr[Ye]}:gr[Ye]=yr[Ye]})}return a?a(gr):gr},[pe,Ve,Ce,_e,ke]),lt=pe.colorSchemeSelector;Nu(()=>{if(Yt&&se&&lt&&lt!=="media"){const ar=lt;let gr=lt;if(ar==="class"&&(gr=".%s"),ar==="data"&&(gr="[data-%s]"),ar?.startsWith("data-")&&!ar.includes("%s")&&(gr=`[${ar}="%s"]`),gr.startsWith("."))se.classList.remove(...ht.map(yr=>gr.substring(1).replace("%s",yr))),se.classList.add(gr.substring(1).replace("%s",Yt));else{const yr=gr.replace("%s",Yt).match(/\[([^\]]+)\]/);if(yr){const[Ye,de]=yr[1].split("=");de||ht.forEach(he=>{se.removeAttribute(Ye.replace(Yt,he))}),se.setAttribute(Ye,de?de.replace(/"|'/g,""):"")}else se.setAttribute(gr,Yt)}}},[Yt,lt,se,ht]),M.useEffect(()=>{let ar;if(z&&ye.current&&Y){const gr=Y.createElement("style");gr.appendChild(Y.createTextNode(dQ)),Y.head.appendChild(gr),window.getComputedStyle(Y.body),ar=setTimeout(()=>{Y.head.removeChild(gr)},1)}return()=>{clearTimeout(ar)}},[Yt,z,Y]),M.useEffect(()=>(ye.current=!0,()=>{ye.current=!1}),[]);const Mt=M.useMemo(()=>({allColorSchemes:ht,colorScheme:Yt,darkColorScheme:Le,lightColorScheme:ut,mode:dr,setColorScheme:lr,setMode:Tt,systemMode:Pt}),[ht,Yt,Le,ut,dr,lr,Tt,Pt,tt.colorSchemeSelector]);let Kt=!0;(G||pe.cssVariables===!1||xe&&Se?.cssVarPrefix===ke)&&(Kt=!1);const Ut=ze.jsxs(M.Fragment,{children:[ze.jsx(K$,{themeId:He?t:void 0,theme:tt,children:N}),Kt&&ze.jsx(I$,{styles:tt.generateStyleSheets?.()||[]})]});return xe?Ut:ze.jsx(d.Provider,{value:Mt,children:Ut})}const P=typeof u=="string"?u:u.light,T=typeof u=="string"?u:u.dark;return{CssVarsProvider:x,useColorScheme:m,getInitColorSchemeScript:L=>lQ({colorSchemeStorageKey:i,defaultLightColorScheme:P,defaultDarkColorScheme:T,modeStorageKey:n,...L})}}function mQ(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const eL=(e,t,r,n=[])=>{let i=e;t.forEach((o,u)=>{u===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},gQ=(e,t,r)=>{function n(i,o=[],u=[]){Object.entries(i).forEach(([a,p])=>{(!r||r&&!r([...o,a]))&&p!=null&&(typeof p=="object"&&Object.keys(p).length>0?n(p,[...o,a],Array.isArray(p)?[...u,a]:u):t([...o,a],p,u))})}n(e)},yQ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Mw(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},u={};return gQ(e,(a,p,d)=>{if((typeof p=="string"||typeof p=="number")&&(!n||!n(a,p))){const m=`--${r?`${r}-`:""}${a.join("-")}`,v=yQ(a,p);Object.assign(i,{[m]:v}),eL(o,a,`var(${m})`,d),eL(u,a,`var(${m}, ${v})`,d)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:u}}function vQ(e,t={}){const{getSelector:r=L,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:o}=t,{colorSchemes:u={},components:a,defaultColorScheme:p="light",...d}=e,{vars:m,css:v,varsWithDefaults:w}=Mw(d,t);let x=w;const P={},{[p]:T,...O}=u;if(Object.entries(O||{}).forEach(([D,q])=>{const{vars:z,css:Z,varsWithDefaults:Q}=Mw(q,t);x=is(x,Q),P[D]={css:Z,vars:z}}),T){const{css:D,vars:q,varsWithDefaults:z}=Mw(T,t);x=is(x,z),P[p]={css:D,vars:q}}function L(D,q){let z=i;if(i==="class"&&(z=".%s"),i==="data"&&(z="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(z=`[${i}="%s"]`),D){if(z==="media")return e.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${u[D]?.palette?.mode||D})`]:{":root":q}};if(z)return e.defaultColorScheme===D?`:root, ${z.replace("%s",String(D))}`:z.replace("%s",String(D))}return":root"}return{vars:x,generateThemeVars:()=>{let D={...m};return Object.entries(P).forEach(([,{vars:q}])=>{D=is(D,q)}),D},generateStyleSheets:()=>{const D=[],q=e.defaultColorScheme||"light";function z(Y,se){Object.keys(se).length&&D.push(typeof Y=="string"?{[Y]:{...se}}:Y)}z(r(void 0,{...v}),v);const{[q]:Z,...Q}=P;if(Z){const{css:Y}=Z,se=u[q]?.palette?.mode,W=!n&&se?{colorScheme:se,...Y}:{...Y};z(r(q,{...W}),W)}return Object.entries(Q).forEach(([Y,{css:se}])=>{const W=u[Y]?.palette?.mode,G=!n&&W?{colorScheme:W,...se}:{...se};z(r(Y,{...G}),G)}),o&&D.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),D}}}function bQ(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function Vn(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let u="",a=!0;for(let p=0;p<o.length;p+=1){const d=o[p];d&&(u+=(a===!0?"":" ")+t(d),a=!1,r&&r[d]&&(u+=" "+r[d]))}n[i]=u}return n}function v_(e,t){return M.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const _Q=xx(),xQ=_p("div",{name:"MuiStack",slot:"Root"});function wQ(e){return Z3({props:e,name:"MuiStack",defaultTheme:_Q})}function SQ(e,t){const r=M.Children.toArray(e).filter(Boolean);return r.reduce((n,i,o)=>(n.push(i),o<r.length-1&&n.push(M.cloneElement(t,{key:`separator-${o}`})),n),[])}const EQ=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],CQ=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Tc({theme:t},Aw({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n}))};if(e.spacing){const n=mx(t),i=Object.keys(t.breakpoints.values).reduce((p,d)=>((typeof e.spacing=="object"&&e.spacing[d]!=null||typeof e.direction=="object"&&e.direction[d]!=null)&&(p[d]=!0),p),{}),o=Aw({values:e.direction,base:i}),u=Aw({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((p,d,m)=>{if(!o[p]){const w=d>0?o[m[d-1]]:"column";o[p]=w}}),r=is(r,Tc({theme:t},u,(p,d)=>e.useFlexGap?{gap:up(n,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${EQ(d?o[d]:e.direction)}`]:up(n,p)}}))}return r=zY(t.breakpoints,r),r};function AQ(e={}){const{createStyledComponent:t=xQ,useThemeProps:r=wQ,componentName:n="MuiStack"}=e,i=()=>Vn({root:["root"]},p=>qn(n,p),{}),o=t(CQ);return M.forwardRef(function(p,d){const m=r(p),v=H3(m),{component:w="div",direction:x="column",spacing:P=0,divider:T,children:O,className:L,useFlexGap:N=!1,...F}=v,D={direction:x,spacing:P,useFlexGap:N},q=i();return ze.jsx(o,{as:w,ownerState:D,ref:d,className:Br(q.root,L),...F,children:T?SQ(O,T):O})})}const Yv={black:"#000",white:"#fff"},PQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},om={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},sm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Cy={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},lm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},um={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},cm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Y$(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yv.white,default:Yv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const J$=Y$();function Q$(){return{text:{primary:Yv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const AP=Q$();function tL(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=Ax(e.main,i):t==="dark"&&(e.dark=Cx(e.main,o)))}function rL(e,t,r,n,i){const o=i.light||i,u=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(u*100).toFixed(0)}%)`))}function TQ(e="light"){return e==="dark"?{main:lm[200],light:lm[50],dark:lm[400]}:{main:lm[700],light:lm[400],dark:lm[800]}}function IQ(e="light"){return e==="dark"?{main:om[200],light:om[50],dark:om[400]}:{main:om[500],light:om[300],dark:om[700]}}function MQ(e="light"){return e==="dark"?{main:sm[500],light:sm[300],dark:sm[700]}:{main:sm[700],light:sm[400],dark:sm[800]}}function RQ(e="light"){return e==="dark"?{main:um[400],light:um[300],dark:um[700]}:{main:um[700],light:um[500],dark:um[900]}}function OQ(e="light"){return e==="dark"?{main:cm[400],light:cm[300],dark:cm[700]}:{main:cm[800],light:cm[500],dark:cm[900]}}function kQ(e="light"){return e==="dark"?{main:Cy[400],light:Cy[300],dark:Cy[700]}:{main:"#ed6c02",light:Cy[500],dark:Cy[900]}}function LQ(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function Q3(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...o}=e,u=e.primary||TQ(t),a=e.secondary||IQ(t),p=e.error||MQ(t),d=e.info||RQ(t),m=e.success||OQ(t),v=e.warning||kQ(t);function w(O){return i?LQ(O):ZJ(O,AP.text.primary)>=r?AP.text.primary:J$.text.primary}const x=({color:O,name:L,mainShade:N=500,lightShade:F=300,darkShade:D=700})=>{if(O={...O},!O.main&&O[N]&&(O.main=O[N]),!O.hasOwnProperty("main"))throw new Error(lh(11,L?` (${L})`:"",N));if(typeof O.main!="string")throw new Error(lh(12,L?` (${L})`:"",JSON.stringify(O.main)));return i?(rL(i,O,"light",F,n),rL(i,O,"dark",D,n)):(tL(O,"light",F,n),tL(O,"dark",D,n)),O.contrastText||(O.contrastText=w(O.main)),O};let P;return t==="light"?P=Y$():t==="dark"&&(P=Q$()),is({common:{...Yv},mode:t,primary:x({color:u,name:"primary"}),secondary:x({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:p,name:"error"}),warning:x({color:v,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:m,name:"success"}),grey:PQ,contrastThreshold:r,getContrastText:w,augmentColor:x,tonalOffset:n,...P},o)}function DQ(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function NQ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function FQ(e){return Math.round(e*1e5)/1e5}const nL={textTransform:"uppercase"},iL='"Roboto", "Helvetica", "Arial", sans-serif';function e9(e,t){const{fontFamily:r=iL,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:u=500,fontWeightBold:a=700,htmlFontSize:p=16,allVariants:d,pxToRem:m,...v}=typeof t=="function"?t(e):t,w=n/14,x=m||(O=>`${O/p*w}rem`),P=(O,L,N,F,D)=>({fontFamily:r,fontWeight:O,fontSize:x(L),lineHeight:N,...r===iL?{letterSpacing:`${FQ(F/L)}em`}:{},...D,...d}),T={h1:P(i,96,1.167,-1.5),h2:P(i,60,1.2,-.5),h3:P(o,48,1.167,0),h4:P(o,34,1.235,.25),h5:P(o,24,1.334,0),h6:P(u,20,1.6,.15),subtitle1:P(o,16,1.75,.15),subtitle2:P(u,14,1.57,.1),body1:P(o,16,1.5,.15),body2:P(o,14,1.43,.15),button:P(u,14,1.75,.4,nL),caption:P(o,12,1.66,.4),overline:P(o,12,2.66,1,nL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return is({htmlFontSize:p,pxToRem:x,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:u,fontWeightBold:a,...T},v,{clone:!1})}const BQ=.2,jQ=.14,zQ=.12;function Ka(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${BQ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${jQ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${zQ})`].join(",")}const $Q=["none",Ka(0,2,1,-1,0,1,1,0,0,1,3,0),Ka(0,3,1,-2,0,2,2,0,0,1,5,0),Ka(0,3,3,-2,0,3,4,0,0,1,8,0),Ka(0,2,4,-1,0,4,5,0,0,1,10,0),Ka(0,3,5,-1,0,5,8,0,0,1,14,0),Ka(0,3,5,-1,0,6,10,0,0,1,18,0),Ka(0,4,5,-2,0,7,10,1,0,2,16,1),Ka(0,5,5,-3,0,8,10,1,0,3,14,2),Ka(0,5,6,-3,0,9,12,1,0,3,16,2),Ka(0,6,6,-3,0,10,14,1,0,4,18,3),Ka(0,6,7,-4,0,11,15,1,0,4,20,3),Ka(0,7,8,-4,0,12,17,2,0,5,22,4),Ka(0,7,8,-4,0,13,19,2,0,5,24,4),Ka(0,7,9,-4,0,14,21,2,0,5,26,4),Ka(0,8,9,-5,0,15,22,2,0,6,28,5),Ka(0,8,10,-5,0,16,24,2,0,6,30,5),Ka(0,8,11,-5,0,17,26,2,0,6,32,5),Ka(0,9,11,-5,0,18,28,2,0,7,34,6),Ka(0,9,12,-6,0,19,29,2,0,7,36,6),Ka(0,10,13,-6,0,20,31,3,0,8,38,7),Ka(0,10,13,-6,0,21,33,3,0,8,40,7),Ka(0,10,14,-6,0,22,35,3,0,8,42,7),Ka(0,11,14,-7,0,23,36,3,0,9,44,8),Ka(0,11,15,-7,0,24,38,3,0,9,46,8)],UQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},qQ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function aL(e){return`${Math.round(e)}ms`}function VQ(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function GQ(e){const t={...UQ,...e.easing},r={...qQ,...e.duration};return{getAutoHeightDuration:VQ,create:(i=["all"],o={})=>{const{duration:u=r.standard,easing:a=t.easeInOut,delay:p=0,...d}=o;return(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof u=="string"?u:aL(u)} ${a} ${typeof p=="string"?p:aL(p)}`).join(",")},...e,easing:t,duration:r}}const HQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function WQ(e){return df(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function t9(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[u,a]=i[o];!WQ(a)||u.startsWith("unstable_")?delete n[u]:df(a)&&(n[u]={...a},r(n[u]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function oL(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const ZQ=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function KQ(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:H_(t,ZQ(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${oL(r)})`:Ax(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${oL(r)})`:Cx(t,r)}})}function PP(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:u={},typography:a={},shape:p,colorSpace:d,...m}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(lh(20));const v=Q3({...o,colorSpace:d}),w=xx(e);let x=is(w,{mixins:NQ(w.breakpoints,n),palette:v,shadows:$Q.slice(),typography:e9(v,a),transitions:GQ(u),zIndex:{...HQ}});return x=is(x,m),x=t.reduce((P,T)=>is(P,T),x),x.unstable_sxConfig={...C0,...m?.unstable_sxConfig},x.unstable_sx=function(T){return Kh({sx:T,theme:this})},x.toRuntimeSource=t9,KQ(x),x}function TP(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const XQ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=TP(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function r9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function n9(e){return e==="dark"?XQ:[]}function YQ(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...o}=e,u=Q3({...t,colorSpace:i});return{palette:u,opacity:{...r9(u.mode),...r},overlays:n||n9(u.mode),...o}}function JQ(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const QQ=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],eee=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const u={};return QQ(e.cssVarPrefix).forEach(a=>{u[a]=r[a],delete r[a]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:u}}:o?{[o.replace("%s",t)]:u,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...u}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function tee(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function vr(e,t,r){!e[t]&&r&&(e[t]=r)}function rv(e){return typeof e!="string"||!e.startsWith("hsl")?e:G$(e)}function Uf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=tv(rv(e[t])))}function ree(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const nf=e=>{try{return e()}catch{}},nee=(e="mui")=>mQ(e);function Rw(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const o=i==="dark"?"dark":"light";if(!n){t[i]=YQ({...r,palette:{mode:o,...r?.palette},colorSpace:e});return}const{palette:u,...a}=PP({...n,palette:{mode:o,...r?.palette},colorSpace:e});return t[i]={...r,palette:u,opacity:{...r9(o),...r?.opacity},overlays:r?.overlays||n9(o)},a}function iee(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:u=!1,shouldSkipGeneratingVar:a=JQ,colorSchemeSelector:p=r.light&&r.dark?"media":void 0,rootSelector:d=":root",...m}=e,v=Object.keys(r)[0],w=n||(r.light&&v!=="light"?"light":v),x=nee(o),{[w]:P,light:T,dark:O,...L}=r,N={...L};let F=P;if((w==="dark"&&!("dark"in r)||w==="light"&&!("light"in r))&&(F=!0),!F)throw new Error(lh(21,w));let D;u&&(D="oklch");const q=Rw(D,N,F,m,w);T&&!N.light&&Rw(D,N,T,void 0,"light"),O&&!N.dark&&Rw(D,N,O,void 0,"dark");let z={defaultColorScheme:w,...q,cssVarPrefix:o,colorSchemeSelector:p,rootSelector:d,getCssVar:x,colorSchemes:N,font:{...DQ(q.typography),...q.font},spacing:ree(m.spacing)};Object.keys(z.colorSchemes).forEach(W=>{const G=z.colorSchemes[W].palette,ae=ue=>{const ye=ue.split("-"),Se=ye[1],ge=ye[2];return x(ue,G[Se][ge])};G.mode==="light"&&(vr(G.common,"background","#fff"),vr(G.common,"onBackground","#000")),G.mode==="dark"&&(vr(G.common,"background","#000"),vr(G.common,"onBackground","#fff"));function le(ue,ye,Se){if(D){let ge;return ue===Od&&(ge=`transparent ${((1-Se)*100).toFixed(0)}%`),ue===la&&(ge=`#000 ${(Se*100).toFixed(0)}%`),ue===ua&&(ge=`#fff ${(Se*100).toFixed(0)}%`),`color-mix(in ${D}, ${ye}, ${ge})`}return ue(ye,Se)}if(tee(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){vr(G.Alert,"errorColor",le(la,G.error.light,.6)),vr(G.Alert,"infoColor",le(la,G.info.light,.6)),vr(G.Alert,"successColor",le(la,G.success.light,.6)),vr(G.Alert,"warningColor",le(la,G.warning.light,.6)),vr(G.Alert,"errorFilledBg",ae("palette-error-main")),vr(G.Alert,"infoFilledBg",ae("palette-info-main")),vr(G.Alert,"successFilledBg",ae("palette-success-main")),vr(G.Alert,"warningFilledBg",ae("palette-warning-main")),vr(G.Alert,"errorFilledColor",nf(()=>G.getContrastText(G.error.main))),vr(G.Alert,"infoFilledColor",nf(()=>G.getContrastText(G.info.main))),vr(G.Alert,"successFilledColor",nf(()=>G.getContrastText(G.success.main))),vr(G.Alert,"warningFilledColor",nf(()=>G.getContrastText(G.warning.main))),vr(G.Alert,"errorStandardBg",le(ua,G.error.light,.9)),vr(G.Alert,"infoStandardBg",le(ua,G.info.light,.9)),vr(G.Alert,"successStandardBg",le(ua,G.success.light,.9)),vr(G.Alert,"warningStandardBg",le(ua,G.warning.light,.9)),vr(G.Alert,"errorIconColor",ae("palette-error-main")),vr(G.Alert,"infoIconColor",ae("palette-info-main")),vr(G.Alert,"successIconColor",ae("palette-success-main")),vr(G.Alert,"warningIconColor",ae("palette-warning-main")),vr(G.AppBar,"defaultBg",ae("palette-grey-100")),vr(G.Avatar,"defaultBg",ae("palette-grey-400")),vr(G.Button,"inheritContainedBg",ae("palette-grey-300")),vr(G.Button,"inheritContainedHoverBg",ae("palette-grey-A100")),vr(G.Chip,"defaultBorder",ae("palette-grey-400")),vr(G.Chip,"defaultAvatarColor",ae("palette-grey-700")),vr(G.Chip,"defaultIconColor",ae("palette-grey-700")),vr(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),vr(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),vr(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),vr(G.LinearProgress,"primaryBg",le(ua,G.primary.main,.62)),vr(G.LinearProgress,"secondaryBg",le(ua,G.secondary.main,.62)),vr(G.LinearProgress,"errorBg",le(ua,G.error.main,.62)),vr(G.LinearProgress,"infoBg",le(ua,G.info.main,.62)),vr(G.LinearProgress,"successBg",le(ua,G.success.main,.62)),vr(G.LinearProgress,"warningBg",le(ua,G.warning.main,.62)),vr(G.Skeleton,"bg",D?le(Od,G.text.primary,.11):`rgba(${ae("palette-text-primaryChannel")} / 0.11)`),vr(G.Slider,"primaryTrack",le(ua,G.primary.main,.62)),vr(G.Slider,"secondaryTrack",le(ua,G.secondary.main,.62)),vr(G.Slider,"errorTrack",le(ua,G.error.main,.62)),vr(G.Slider,"infoTrack",le(ua,G.info.main,.62)),vr(G.Slider,"successTrack",le(ua,G.success.main,.62)),vr(G.Slider,"warningTrack",le(ua,G.warning.main,.62));const ue=D?le(la,G.background.default,.6825):Sb(G.background.default,.8);vr(G.SnackbarContent,"bg",ue),vr(G.SnackbarContent,"color",nf(()=>D?AP.text.primary:G.getContrastText(ue))),vr(G.SpeedDialAction,"fabHoverBg",Sb(G.background.paper,.15)),vr(G.StepConnector,"border",ae("palette-grey-400")),vr(G.StepContent,"border",ae("palette-grey-400")),vr(G.Switch,"defaultColor",ae("palette-common-white")),vr(G.Switch,"defaultDisabledColor",ae("palette-grey-100")),vr(G.Switch,"primaryDisabledColor",le(ua,G.primary.main,.62)),vr(G.Switch,"secondaryDisabledColor",le(ua,G.secondary.main,.62)),vr(G.Switch,"errorDisabledColor",le(ua,G.error.main,.62)),vr(G.Switch,"infoDisabledColor",le(ua,G.info.main,.62)),vr(G.Switch,"successDisabledColor",le(ua,G.success.main,.62)),vr(G.Switch,"warningDisabledColor",le(ua,G.warning.main,.62)),vr(G.TableCell,"border",le(ua,le(Od,G.divider,1),.88)),vr(G.Tooltip,"bg",le(Od,G.grey[700],.92))}if(G.mode==="dark"){vr(G.Alert,"errorColor",le(ua,G.error.light,.6)),vr(G.Alert,"infoColor",le(ua,G.info.light,.6)),vr(G.Alert,"successColor",le(ua,G.success.light,.6)),vr(G.Alert,"warningColor",le(ua,G.warning.light,.6)),vr(G.Alert,"errorFilledBg",ae("palette-error-dark")),vr(G.Alert,"infoFilledBg",ae("palette-info-dark")),vr(G.Alert,"successFilledBg",ae("palette-success-dark")),vr(G.Alert,"warningFilledBg",ae("palette-warning-dark")),vr(G.Alert,"errorFilledColor",nf(()=>G.getContrastText(G.error.dark))),vr(G.Alert,"infoFilledColor",nf(()=>G.getContrastText(G.info.dark))),vr(G.Alert,"successFilledColor",nf(()=>G.getContrastText(G.success.dark))),vr(G.Alert,"warningFilledColor",nf(()=>G.getContrastText(G.warning.dark))),vr(G.Alert,"errorStandardBg",le(la,G.error.light,.9)),vr(G.Alert,"infoStandardBg",le(la,G.info.light,.9)),vr(G.Alert,"successStandardBg",le(la,G.success.light,.9)),vr(G.Alert,"warningStandardBg",le(la,G.warning.light,.9)),vr(G.Alert,"errorIconColor",ae("palette-error-main")),vr(G.Alert,"infoIconColor",ae("palette-info-main")),vr(G.Alert,"successIconColor",ae("palette-success-main")),vr(G.Alert,"warningIconColor",ae("palette-warning-main")),vr(G.AppBar,"defaultBg",ae("palette-grey-900")),vr(G.AppBar,"darkBg",ae("palette-background-paper")),vr(G.AppBar,"darkColor",ae("palette-text-primary")),vr(G.Avatar,"defaultBg",ae("palette-grey-600")),vr(G.Button,"inheritContainedBg",ae("palette-grey-800")),vr(G.Button,"inheritContainedHoverBg",ae("palette-grey-700")),vr(G.Chip,"defaultBorder",ae("palette-grey-700")),vr(G.Chip,"defaultAvatarColor",ae("palette-grey-300")),vr(G.Chip,"defaultIconColor",ae("palette-grey-300")),vr(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),vr(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),vr(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),vr(G.LinearProgress,"primaryBg",le(la,G.primary.main,.5)),vr(G.LinearProgress,"secondaryBg",le(la,G.secondary.main,.5)),vr(G.LinearProgress,"errorBg",le(la,G.error.main,.5)),vr(G.LinearProgress,"infoBg",le(la,G.info.main,.5)),vr(G.LinearProgress,"successBg",le(la,G.success.main,.5)),vr(G.LinearProgress,"warningBg",le(la,G.warning.main,.5)),vr(G.Skeleton,"bg",D?le(Od,G.text.primary,.13):`rgba(${ae("palette-text-primaryChannel")} / 0.13)`),vr(G.Slider,"primaryTrack",le(la,G.primary.main,.5)),vr(G.Slider,"secondaryTrack",le(la,G.secondary.main,.5)),vr(G.Slider,"errorTrack",le(la,G.error.main,.5)),vr(G.Slider,"infoTrack",le(la,G.info.main,.5)),vr(G.Slider,"successTrack",le(la,G.success.main,.5)),vr(G.Slider,"warningTrack",le(la,G.warning.main,.5));const ue=D?le(ua,G.background.default,.985):Sb(G.background.default,.98);vr(G.SnackbarContent,"bg",ue),vr(G.SnackbarContent,"color",nf(()=>D?J$.text.primary:G.getContrastText(ue))),vr(G.SpeedDialAction,"fabHoverBg",Sb(G.background.paper,.15)),vr(G.StepConnector,"border",ae("palette-grey-600")),vr(G.StepContent,"border",ae("palette-grey-600")),vr(G.Switch,"defaultColor",ae("palette-grey-300")),vr(G.Switch,"defaultDisabledColor",ae("palette-grey-600")),vr(G.Switch,"primaryDisabledColor",le(la,G.primary.main,.55)),vr(G.Switch,"secondaryDisabledColor",le(la,G.secondary.main,.55)),vr(G.Switch,"errorDisabledColor",le(la,G.error.main,.55)),vr(G.Switch,"infoDisabledColor",le(la,G.info.main,.55)),vr(G.Switch,"successDisabledColor",le(la,G.success.main,.55)),vr(G.Switch,"warningDisabledColor",le(la,G.warning.main,.55)),vr(G.TableCell,"border",le(la,le(Od,G.divider,1),.68)),vr(G.Tooltip,"bg",le(Od,G.grey[700],.92))}Uf(G.background,"default"),Uf(G.background,"paper"),Uf(G.common,"background"),Uf(G.common,"onBackground"),Uf(G,"divider"),Object.keys(G).forEach(ue=>{const ye=G[ue];ue!=="tonalOffset"&&ye&&typeof ye=="object"&&(ye.main&&vr(G[ue],"mainChannel",tv(rv(ye.main))),ye.light&&vr(G[ue],"lightChannel",tv(rv(ye.light))),ye.dark&&vr(G[ue],"darkChannel",tv(rv(ye.dark))),ye.contrastText&&vr(G[ue],"contrastTextChannel",tv(rv(ye.contrastText))),ue==="text"&&(Uf(G[ue],"primary"),Uf(G[ue],"secondary")),ue==="action"&&(ye.active&&Uf(G[ue],"active"),ye.selected&&Uf(G[ue],"selected")))})}),z=t.reduce((W,G)=>is(W,G),z);const Z={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:eee(z),enableContrastVars:u},{vars:Q,generateThemeVars:Y,generateStyleSheets:se}=vQ(z,Z);return z.vars=Q,Object.entries(z.colorSchemes[z.defaultColorScheme]).forEach(([W,G])=>{z[W]=G}),z.generateThemeVars=Y,z.generateStyleSheets=se,z.generateSpacing=function(){return D$(m.spacing,mx(this))},z.getColorSchemeSelector=bQ(p),z.spacing=z.generateSpacing(),z.shouldSkipGeneratingVar=a,z.unstable_sxConfig={...C0,...m?.unstable_sxConfig},z.unstable_sx=function(G){return Kh({sx:G,theme:this})},z.toRuntimeSource=t9,z}function sL(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:Q3({...r===!0?{}:r.palette,mode:t})})}function Yh(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r?.mode,...u}=e,a=o||"light",p=i?.[a],d={...i,...r?{[a]:{...typeof p!="boolean"&&p,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return PP(e,...t);let m=r;"palette"in e||d[a]&&(d[a]!==!0?m=d[a].palette:a==="dark"&&(m={mode:"dark"}));const v=PP({...e,palette:m},...t);return v.defaultColorScheme=a,v.colorSchemes=d,v.palette.mode==="light"&&(v.colorSchemes.light={...d.light!==!0&&d.light,palette:v.palette},sL(v,"dark",d.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:v.palette},sL(v,"light",d.light)),v}return!r&&!("light"in d)&&a==="light"&&(d.light=!0),iee({...u,colorSchemes:d,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const Tx=Yh();function Sf(){const e=Sx(Tx);return e[Qu]||e}function fi({props:e,name:t}){return Z3({props:e,name:t,defaultTheme:Tx,themeId:Qu})}function i9(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const hl=e=>i9(e)&&e!=="classes",er=$$({themeId:Qu,defaultTheme:Tx,rootShouldForwardProp:hl});function aee({theme:e,...t}){const r=Qu in e?e[Qu]:void 0;return ze.jsx(K$,{...t,themeId:r?Qu:void 0,theme:r||e})}const Eb={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:oee}=pQ({themeId:Qu,theme:()=>Yh({cssVariables:!0}),colorSchemeStorageKey:Eb.colorSchemeStorageKey,modeStorageKey:Eb.modeStorageKey,defaultColorScheme:{light:Eb.defaultLightColorScheme,dark:Eb.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:e9(e.palette,e.typography)};return t.unstable_sx=function(n){return Kh({sx:n,theme:this})},t}}),see=oee;function a9({theme:e,...t}){const r=M.useMemo(()=>{if(typeof e=="function")return e;const n=Qu in e?e[Qu]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?ze.jsx(aee,{theme:r,...t}):ze.jsx(see,{theme:e,...t})}const lee=Yh({palette:{mode:"light"}});Yh({palette:{mode:"dark"}});const uee=e=>({...lee,palette:{mode:e,primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}),cee=e=>{const t=uee(["light","dark"].includes(e)?e:"light");return Yh(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})},fee={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Fs=[];for(let e=0;e<256;++e)Fs.push((e+256).toString(16).slice(1));function hee(e,t=0){return(Fs[e[t+0]]+Fs[e[t+1]]+Fs[e[t+2]]+Fs[e[t+3]]+"-"+Fs[e[t+4]]+Fs[e[t+5]]+"-"+Fs[e[t+6]]+Fs[e[t+7]]+"-"+Fs[e[t+8]]+Fs[e[t+9]]+"-"+Fs[e[t+10]]+Fs[e[t+11]]+Fs[e[t+12]]+Fs[e[t+13]]+Fs[e[t+14]]+Fs[e[t+15]]).toLowerCase()}let Ow;const dee=new Uint8Array(16);function pee(){if(!Ow){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ow=crypto.getRandomValues.bind(crypto)}return Ow(dee)}const mee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lL={randomUUID:mee};function Jv(e,t,r){if(lL.randomUUID&&!e)return lL.randomUUID();e=e||{};const n=e.random??e.rng?.()??pee();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,hee(n)}const gee=Be.createContext({});function o9(e){const[t,r]=Be.useState([]),[n,i]=Be.useState([]),[o,u]=Be.useState([]),[a,p]=Be.useState(fee.sourceOptions_tiles[0]),d=M.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),m=T=>{if(!T)return;const O=[],L=[];T.layers.forEach((N,F)=>{N.type==="symbol"?L.push(N):(F===0&&(N.id=T.name||"background"),O.push(N))}),i(O),u(L)};M.useEffect(()=>{if(t.filter(T=>!T?.id).length){const T=[...t];T.forEach(O=>{O?.id||(O.id=Jv())}),r(T)}},[t]);const v=M.useCallback((T,O)=>{const L=t?.filter?.(N=>N.id===T);if(L.length>0){const N=[...t],F=L[0],D=t.indexOf(F),q=O(D);q>=0&&q<=t.length-1&&(N.splice(D,1),N.splice(q,0,F),r(N))}},[t]),w=M.useCallback(T=>{v(T,O=>O+1)},[v]),x=M.useCallback(T=>{v(T,O=>O-1)},[v]),P={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:o,setSymbolLayers:u,updateStyle:m,vtLayerConfig:d,tileUrl:a,setTileUrl:p,moveUp:x,moveDown:w,moveLayer:v};return ze.jsx(gee.Provider,{value:P,children:e.children})}o9.__docgenInfo={description:"",methods:[],displayName:"LayerContextProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Ix=Be.createContext({}),Mx=({children:e})=>{const[t,r]=M.useState(void 0),[n,i]=M.useState([]),o=M.useRef([]),u=M.useRef({}),a=m=>{if(m){typeof u.current[m]<"u"&&delete u.current[m];const v=o.current.indexOf(m);v>-1&&o.current.splice(v,1),i([...o.current]),o.current.length===0&&t&&r(void 0)}else a("anonymous_map")},d={map:t,setMap:m=>{if(r(m),n.length===0){const v="anonymous_map";i([...n,v]),u.current[v]=m}},maps:u.current,mapIds:n,registerMap:(m,v)=>{m&&v&&(u.current[m]=v,o.current.push(m),i([...o.current]),(!t||t?.cancelled===!0)&&r(v))},removeMap:a,mapExists:m=>m&&Object.keys(u.current).indexOf(m)===-1?!1:!(!m&&!t),getMap:m=>m&&n.indexOf(m)!==-1?u.current[m]:!m&&t?t:null};return ze.jsx(Ix.Provider,{value:d,children:ze.jsx(o9,{children:ze.jsx(a9,{theme:cee("light"),children:e})})})};Mx.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,methods:[],displayName:"MapComponentsProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const s9={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},A0=e=>{const t=M.useRef(null),r=M.useRef(null),n=M.useContext(Ix),i=M.useRef(e.mapId),o=M.useRef(!1),u=M.useRef(e.options?.style);return M.useEffect(()=>{const a=i.current;return()=>{o.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),M.useEffect(()=>{o.current||r.current&&(o.current=!0,e?.options?.style&&(u.current=JSON.stringify(e.options.style)),t.current=new PX({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:s9?.options?.style},container:r.current},onReady:(a,p)=>{a.once("load",()=>{p?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,p):n.setMap(p))})}}))},[e.options,e.mapId]),M.useEffect(()=>{if(t.current?.map&&e?.options?.style){const a=JSON.stringify(e.options.style);u.current!==a&&(u.current=a,t.current.map.setStyle(e.options.style))}},[e?.options?.style]),ze.jsx("div",{ref:r,className:"mapContainer",style:e.style})};A0.defaultProps=s9;A0.__docgenInfo={description:`Creates a MapLibreGlWrapper instance and registers it in MapContext
after the MapLibre-gl load event has fired.

MapLibreMap returns the html node that will be used by MapLibre-gl to render the map.
This Component must be kept unaware of any related components that interact with the MapLibre-gl
instance.

@category Map components`,methods:[],displayName:"MapLibreMap",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the MapLibreGl(Wrapper) instance in mapContext",defaultValue:{value:"undefined",computed:!0}},options:{required:!1,tsType:{name:"Partial",elements:[{name:"MapOptionsType"}],raw:"Partial<MapOptionsType>"},description:`Config object that is passed to the MapLibreGl constructor as first parameter.
See https://maplibre.org/maplibre-gl-js-docs/api/map/ for a formal documentation of al
available properties.`,defaultValue:{value:`{
	center: { lng: 8.607, lat: 53.1409349 },
	zoom: 11,
	container: '',
	style: {
		version: 8,
		name: 'blank',
		center: [0, 0],
		zoom: 0,
		sources: {},
		sprite: 'https://wms.wheregroup.com/tileserver/sprites/osm-bright',
		glyphs: 'https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf',
		layers: [
			{
				id: '_background',
				type: 'background',
				paint: {
					'background-color': 'rgba(0,0,0,0)',
				},
			},
		],
	},
}`,computed:!1}},style:{required:!1,tsType:{name:"object"},description:"css style definition passed to the map container DOM element"}}};function l9(e){const t=M.useContext(Ix),r=M.useRef(!1),n=M.useRef(null),[i,o]=M.useState(),u=M.useRef(void 0),[a,p]=M.useState([]),d=M.useRef(""),m=M.useRef(Jv()),v=M.useCallback(x=>!e?.filter?.includeBaseLayers&&x?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(x.id):x.id.includes(e.filter.matchLayerIds):!0,[e.filter]),w=M.useCallback(()=>{if(!n.current)return;const x=n.current.wrapper.layerState.filter(v),P=JSON.stringify(x);d.current!==P&&(d.current=P,p(x))},[v]);return M.useEffect(()=>{const x=m.current;return()=>{n.current&&(n.current.cleanup(x),n.current=null),r.current=!1}},[]),M.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(o(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{u.current!==n.current?.wrapper.viewportStateString&&o(n.current?.wrapper.viewportState)},m.current)),e?.watch?.layers&&(w(),n.current.wrapper.on("layerchange",w,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},m.current))}},[t.mapIds,t,e.mapId,w,e]),{layers:a,viewport:i}}l9.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function P0(e){const t=M.useContext(Ix),[r,n]=M.useState({map:void 0,ready:!1}),i=l9({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=M.useRef(null),u=M.useRef(Jv()),a=()=>{o.current&&o.current.cleanup(u.current)};return M.useEffect(()=>()=>{a(),o.current=null},[]),M.useEffect(()=>{if(o.current&&o.current.cancelled===!0&&(o.current=null,n({map:void 0,ready:!1})),!(o.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let p=!1;if(i?.layers?.forEach(d=>{d.id===e?.waitForLayer&&(p=!0)}),!p)return}o.current=t.getMap(e?.mapId),n({map:o.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:u.current,layers:i.layers,cleanup:a}}function uL(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function yee(e){return ze.jsx(N$,{...e,defaultTheme:Tx,themeId:Qu})}function eI(e){return function(r){return ze.jsx(yee,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function vee(){return H3}const gi=oQ;function Kn(e){return rQ(e)}function bee(e){return qn("MuiSvgIcon",e)}jn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _ee=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${an(t)}`,`fontSize${an(r)}`]};return Vn(i,bee,n)},xee=er("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${an(r.color)}`],t[`fontSize${an(r.fontSize)}`]]}})(gi(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),IP=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:u="inherit",component:a="svg",fontSize:p="medium",htmlColor:d,inheritViewBox:m=!1,titleAccess:v,viewBox:w="0 0 24 24",...x}=n,P=M.isValidElement(i)&&i.type==="svg",T={...n,color:u,component:a,fontSize:p,instanceFontSize:t.fontSize,inheritViewBox:m,viewBox:w,hasSvgAsChild:P},O={};m||(O.viewBox=w);const L=_ee(T);return ze.jsxs(xee,{as:a,className:Br(L.root,o),focusable:"false",color:d,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:r,...O,...x,...P&&i.props,ownerState:T,children:[P?i.props.children:i,v?ze.jsx("title",{children:v}):null]})});IP.muiName="SvgIcon";function yi(e,t){function r(n,i){return ze.jsx(IP,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=IP.muiName,M.memo(M.forwardRef(r))}function tI(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function fl(e){return e&&e.ownerDocument||document}function Ic(e){return fl(e).defaultView||window}function cL(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function W_(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:o}=M.useRef(t!==void 0),[u,a]=M.useState(r),p=o?t:u,d=M.useCallback(m=>{o||a(m)},[]);return[p,d]}function ec(e){const t=M.useRef(e);return Nu(()=>{t.current=e}),M.useRef((...r)=>(0,t.current)(...r)).current}function Ao(...e){const t=M.useRef(void 0),r=M.useCallback(n=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const u=o,a=u(n);return typeof a=="function"?a:()=>{u(null)}}return o.current=n,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},e);return M.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function wee(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function rI(e,t){if(!e)return t;function r(u,a){const p={};return Object.keys(a).forEach(d=>{wee(d,a[d])&&typeof u[d]=="function"&&(p[d]=(...m)=>{u[d](...m),a[d](...m)})}),p}if(typeof e=="function"||typeof t=="function")return u=>{const a=typeof t=="function"?t(u):t,p=typeof e=="function"?e({...u,...a}):e,d=Br(u?.className,a?.className,p?.className),m=r(p,a);return{...a,...p,...m,...!!d&&{className:d},...a?.style&&p?.style&&{style:{...a.style,...p.style}},...a?.sx&&p?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(p.sx)?p.sx:[p.sx]]}}};const n=t,i=r(e,n),o=Br(n?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function u9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},MP(e,t)}function c9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,MP(e,t)}var Rx=xX();const Cb=Us(Rx),fL={disabled:!1},Z_=Be.createContext(null);var See=function(t){return t.scrollTop},nv="unmounted",jd="exited",zd="entering",Sm="entered",RP="exiting",kc=(function(e){c9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=i,a=u&&!u.isMounting?n.enter:n.appear,p;return o.appearStatus=null,n.in?a?(p=jd,o.appearStatus=zd):p=Sm:n.unmountOnExit||n.mountOnEnter?p=nv:p=jd,o.state={status:p},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var u=i.in;return u&&o.status===nv?{status:jd}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var u=this.state.status;this.props.in?u!==zd&&u!==Sm&&(o=zd):(u===zd||u===Sm)&&(o=RP)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,u,a;return o=u=a=i,i!=null&&typeof i!="number"&&(o=i.exit,u=i.enter,a=i.appear!==void 0?i.appear:u),{exit:o,enter:u,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===zd){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Cb.findDOMNode(this);u&&See(u)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jd&&this.setState({status:nv})},r.performEnter=function(i){var o=this,u=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[Cb.findDOMNode(this),a],d=p[0],m=p[1],v=this.getTimeouts(),w=a?v.appear:v.enter;if(!i&&!u||fL.disabled){this.safeSetState({status:Sm},function(){o.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:zd},function(){o.props.onEntering(d,m),o.onTransitionEnd(w,function(){o.safeSetState({status:Sm},function(){o.props.onEntered(d,m)})})})},r.performExit=function(){var i=this,o=this.props.exit,u=this.getTimeouts(),a=this.props.nodeRef?void 0:Cb.findDOMNode(this);if(!o||fL.disabled){this.safeSetState({status:jd},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:RP},function(){i.props.onExiting(a),i.onTransitionEnd(u.exit,function(){i.safeSetState({status:jd},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,u=!0;return this.nextCallback=function(a){u&&(u=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:Cb.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!u||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],d=p[0],m=p[1];this.props.addEndListener(d,m)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===nv)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=u9(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Be.createElement(Z_.Provider,{value:null},typeof u=="function"?u(i,a):Be.cloneElement(Be.Children.only(u),a))},t})(Be.Component);kc.contextType=Z_;kc.propTypes={};function fm(){}kc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fm,onEntering:fm,onEntered:fm,onExit:fm,onExiting:fm,onExited:fm};kc.UNMOUNTED=nv;kc.EXITED=jd;kc.ENTERING=zd;kc.ENTERED=Sm;kc.EXITING=RP;function Eee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nI(e,t){var r=function(o){return t&&M.isValidElement(o)?t(o):o},n=Object.create(null);return e&&M.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function Cee(e,t){e=e||{},t=t||{};function r(m){return m in t?t[m]:e[m]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var u,a={};for(var p in t){if(n[p])for(u=0;u<n[p].length;u++){var d=n[p][u];a[n[p][u]]=r(d)}a[p]=r(p)}for(u=0;u<i.length;u++)a[i[u]]=r(i[u]);return a}function Jd(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Aee(e,t){return nI(e.children,function(r){return M.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Jd(r,"appear",e),enter:Jd(r,"enter",e),exit:Jd(r,"exit",e)})})}function Pee(e,t,r){var n=nI(e.children),i=Cee(t,n);return Object.keys(i).forEach(function(o){var u=i[o];if(M.isValidElement(u)){var a=o in t,p=o in n,d=t[o],m=M.isValidElement(d)&&!d.props.in;p&&(!a||m)?i[o]=M.cloneElement(u,{onExited:r.bind(null,u),in:!0,exit:Jd(u,"exit",e),enter:Jd(u,"enter",e)}):!p&&a&&!m?i[o]=M.cloneElement(u,{in:!1}):p&&a&&M.isValidElement(d)&&(i[o]=M.cloneElement(u,{onExited:r.bind(null,u),in:d.props.in,exit:Jd(u,"exit",e),enter:Jd(u,"enter",e)}))}}),i}var Tee=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Iee={component:"div",childFactory:function(t){return t}},iI=(function(e){c9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=o.handleExited.bind(Eee(o));return o.state={contextValue:{isMounting:!0},handleExited:u,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var u=o.children,a=o.handleExited,p=o.firstRender;return{children:p?Aee(i,a):Pee(i,u,a),firstRender:!1}},r.handleExited=function(i,o){var u=nI(this.props.children);i.key in u||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var p=q_({},a.children);return delete p[i.key],{children:p}}))},r.render=function(){var i=this.props,o=i.component,u=i.childFactory,a=u9(i,["component","childFactory"]),p=this.state.contextValue,d=Tee(this.state.children).map(u);return delete a.appear,delete a.enter,delete a.exit,o===null?Be.createElement(Z_.Provider,{value:p},d):Be.createElement(Z_.Provider,{value:p},Be.createElement(o,a,d))},t})(Be.Component);iI.propTypes={};iI.defaultProps=Iee;const hL={};function f9(e,t){const r=M.useRef(hL);return r.current===hL&&(r.current=e(t)),r}const Mee=[];function Ree(e){M.useEffect(e,Mee)}class Ox{static create(){return new Ox}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Qd(){const e=f9(Ox.create).current;return Ree(e.disposeEffect),e}const aI=e=>e.scrollTop;function dg(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function Oee(e){return qn("MuiPaper",e)}jn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const kee=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return Vn(o,Oee,i)},Lee=er("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(gi(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Lc=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiPaper"}),i=Sf(),{className:o,component:u="div",elevation:a=1,square:p=!1,variant:d="elevation",...m}=n,v={...n,component:u,elevation:a,square:p,variant:d},w=kee(v);return ze.jsx(Lee,{as:u,ownerState:v,className:Br(w.root,o),ref:r,...m,style:{...d==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${H_("#fff",TP(a))}, ${H_("#fff",TP(a))})`}},...m.style}})});function pg(e){return typeof e=="string"}function h9(e,t,r){return e===void 0||pg(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function d9(e,t,r){return typeof e=="function"?e(t,r):e}function K_(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function dL(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function p9(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const x=Br(r?.className,o,i?.className,n?.className),P={...r?.style,...i?.style,...n?.style},T={...r,...i,...n};return x.length>0&&(T.className=x),Object.keys(P).length>0&&(T.style=P),{props:T,internalRef:void 0}}const u=K_({...i,...n}),a=dL(n),p=dL(i),d=t(u),m=Br(d?.className,r?.className,o,i?.className,n?.className),v={...d?.style,...r?.style,...i?.style,...n?.style},w={...d,...r,...p,...a};return m.length>0&&(w.className=m),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:d.ref}}function Zn(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,internalForwardedProps:u,shouldForwardComponentProp:a=!1,...p}=t,{component:d,slots:m={[e]:void 0},slotProps:v={[e]:void 0},...w}=o,x=m[e]||n,P=d9(v[e],i),{props:{component:T,...O},internalRef:L}=p9({className:r,...p,externalForwardedProps:e==="root"?w:void 0,externalSlotProps:P}),N=Ao(L,P?.ref,t.ref),F=e==="root"?T||d:T,D=h9(x,{...e==="root"&&!d&&!m[e]&&u,...e!=="root"&&!m[e]&&u,...O,...F&&!a&&{as:F},...F&&a&&{component:F},ref:N},i);return[x,D]}function X_(e){try{return e.matches(":focus-visible")}catch{}return!1}class Y_{static create(){return new Y_}static use(){const t=f9(Y_.create).current,[r,n]=M.useState(!1);return t.shouldMount=r,t.setShouldMount=n,M.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Nee(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Dee(){return Y_.use()}function Nee(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function Fee(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:u,in:a,onExited:p,timeout:d}=e,[m,v]=M.useState(!1),w=Br(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),x={width:u,height:u,top:-(u/2)+o,left:-(u/2)+i},P=Br(r.child,m&&r.childLeaving,n&&r.childPulsate);return!a&&!m&&v(!0),M.useEffect(()=>{if(!a&&p!=null){const T=setTimeout(p,d);return()=>{clearTimeout(T)}}},[p,a,d]),ze.jsx("span",{className:w,style:x,children:ze.jsx("span",{className:P})})}const Ku=jn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),OP=550,Bee=80,jee=S0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,zee=S0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,$ee=S0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Uee=er("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),qee=er(Fee,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ku.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${jee};
    animation-duration: ${OP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Ku.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Ku.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ku.childLeaving} {
    opacity: 0;
    animation-name: ${zee};
    animation-duration: ${OP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Ku.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${$ee};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Vee=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:u,...a}=n,[p,d]=M.useState([]),m=M.useRef(0),v=M.useRef(null);M.useEffect(()=>{v.current&&(v.current(),v.current=null)},[p]);const w=M.useRef(!1),x=Qd(),P=M.useRef(null),T=M.useRef(null),O=M.useCallback(D=>{const{pulsate:q,rippleX:z,rippleY:Z,rippleSize:Q,cb:Y}=D;d(se=>[...se,ze.jsx(qee,{classes:{ripple:Br(o.ripple,Ku.ripple),rippleVisible:Br(o.rippleVisible,Ku.rippleVisible),ripplePulsate:Br(o.ripplePulsate,Ku.ripplePulsate),child:Br(o.child,Ku.child),childLeaving:Br(o.childLeaving,Ku.childLeaving),childPulsate:Br(o.childPulsate,Ku.childPulsate)},timeout:OP,pulsate:q,rippleX:z,rippleY:Z,rippleSize:Q},m.current)]),m.current+=1,v.current=Y},[o]),L=M.useCallback((D={},q={},z=()=>{})=>{const{pulsate:Z=!1,center:Q=i||q.pulsate,fakeElement:Y=!1}=q;if(D?.type==="mousedown"&&w.current){w.current=!1;return}D?.type==="touchstart"&&(w.current=!0);const se=Y?null:T.current,W=se?se.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,ae,le;if(Q||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)G=Math.round(W.width/2),ae=Math.round(W.height/2);else{const{clientX:ue,clientY:ye}=D.touches&&D.touches.length>0?D.touches[0]:D;G=Math.round(ue-W.left),ae=Math.round(ye-W.top)}if(Q)le=Math.sqrt((2*W.width**2+W.height**2)/3),le%2===0&&(le+=1);else{const ue=Math.max(Math.abs((se?se.clientWidth:0)-G),G)*2+2,ye=Math.max(Math.abs((se?se.clientHeight:0)-ae),ae)*2+2;le=Math.sqrt(ue**2+ye**2)}D?.touches?P.current===null&&(P.current=()=>{O({pulsate:Z,rippleX:G,rippleY:ae,rippleSize:le,cb:z})},x.start(Bee,()=>{P.current&&(P.current(),P.current=null)})):O({pulsate:Z,rippleX:G,rippleY:ae,rippleSize:le,cb:z})},[i,O,x]),N=M.useCallback(()=>{L({},{pulsate:!0})},[L]),F=M.useCallback((D,q)=>{if(x.clear(),D?.type==="touchend"&&P.current){P.current(),P.current=null,x.start(0,()=>{F(D,q)});return}P.current=null,d(z=>z.length>0?z.slice(1):z),v.current=q},[x]);return M.useImperativeHandle(r,()=>({pulsate:N,start:L,stop:F}),[N,L,F]),ze.jsx(Uee,{className:Br(Ku.root,o.root,u),ref:T,...a,children:ze.jsx(iI,{component:null,exit:!0,children:p})})});function Gee(e){return qn("MuiButtonBase",e)}const Hee=jn("MuiButtonBase",["root","disabled","focusVisible"]),Wee=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,u=Vn({root:["root",t&&"disabled",r&&"focusVisible"]},Gee,i);return r&&n&&(u.root+=` ${n}`),u},Zee=er("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Hee.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),kx=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:u,className:a,component:p="button",disabled:d=!1,disableRipple:m=!1,disableTouchRipple:v=!1,focusRipple:w=!1,focusVisibleClassName:x,LinkComponent:P="a",onBlur:T,onClick:O,onContextMenu:L,onDragLeave:N,onFocus:F,onFocusVisible:D,onKeyDown:q,onKeyUp:z,onMouseDown:Z,onMouseLeave:Q,onMouseUp:Y,onTouchEnd:se,onTouchMove:W,onTouchStart:G,tabIndex:ae=0,TouchRippleProps:le,touchRippleRef:ue,type:ye,...Se}=n,ge=M.useRef(null),xe=Dee(),Fe=Ao(xe.ref,ue),[He,pe]=M.useState(!1);d&&He&&pe(!1),M.useImperativeHandle(i,()=>({focusVisible:()=>{pe(!0),ge.current.focus()}}),[]);const _e=xe.shouldMount&&!m&&!d;M.useEffect(()=>{He&&w&&!m&&xe.pulsate()},[m,w,He,xe]);const Ce=qf(xe,"start",Z,v),ke=qf(xe,"stop",L,v),$e=qf(xe,"stop",N,v),ht=qf(xe,"stop",Y,v),At=qf(xe,"stop",lt=>{He&&lt.preventDefault(),Q&&Q(lt)},v),mt=qf(xe,"start",G,v),rt=qf(xe,"stop",se,v),Lt=qf(xe,"stop",W,v),Tt=qf(xe,"stop",lt=>{X_(lt.target)||pe(!1),T&&T(lt)},!1),Pt=ec(lt=>{ge.current||(ge.current=lt.currentTarget),X_(lt.target)&&(pe(!0),D&&D(lt)),F&&F(lt)}),ut=()=>{const lt=ge.current;return p&&p!=="button"&&!(lt.tagName==="A"&&lt.href)},Le=ec(lt=>{w&&!lt.repeat&&He&&lt.key===" "&&xe.stop(lt,()=>{xe.start(lt)}),lt.target===lt.currentTarget&&ut()&&lt.key===" "&&lt.preventDefault(),q&&q(lt),lt.target===lt.currentTarget&&ut()&&lt.key==="Enter"&&!d&&(lt.preventDefault(),O&&O(lt))}),sr=ec(lt=>{w&&lt.key===" "&&He&&!lt.defaultPrevented&&xe.stop(lt,()=>{xe.pulsate(lt)}),z&&z(lt),O&&lt.target===lt.currentTarget&&ut()&&lt.key===" "&&!lt.defaultPrevented&&O(lt)});let lr=p;lr==="button"&&(Se.href||Se.to)&&(lr=P);const dr={};lr==="button"?(dr.type=ye===void 0?"button":ye,dr.disabled=d):(!Se.href&&!Se.to&&(dr.role="button"),d&&(dr["aria-disabled"]=d));const Yt=Ao(r,ge),Ve={...n,centerRipple:o,component:p,disabled:d,disableRipple:m,disableTouchRipple:v,focusRipple:w,tabIndex:ae,focusVisible:He},tt=Wee(Ve);return ze.jsxs(Zee,{as:lr,className:Br(tt.root,a),ownerState:Ve,onBlur:Tt,onClick:O,onContextMenu:ke,onFocus:Pt,onKeyDown:Le,onKeyUp:sr,onMouseDown:Ce,onMouseLeave:At,onMouseUp:ht,onDragLeave:$e,onTouchEnd:rt,onTouchMove:Lt,onTouchStart:mt,ref:Yt,tabIndex:d?-1:ae,type:ye,...dr,...Se,children:[u,_e?ze.jsx(Vee,{ref:Fe,center:o,...le}):null]})});function qf(e,t,r,n=!1){return ec(i=>(r&&r(i),n||e[t](i),!0))}function Kee(e){return typeof e.main=="string"}function Xee(e,t=[]){if(!Kee(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Fl(e=[]){return([,t])=>t&&Xee(t,e)}function Yee(e){return qn("MuiAlert",e)}const pL=jn("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function Jee(e){return qn("MuiCircularProgress",e)}jn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Rh=44,kP=S0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,LP=S0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Qee=typeof kP!="string"?U3`
        animation: ${kP} 1.4s linear infinite;
      `:null,ete=typeof LP!="string"?U3`
        animation: ${LP} 1.4s ease-in-out infinite;
      `:null,tte=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${an(n)}`],svg:["svg"],circle:["circle",`circle${an(r)}`,i&&"circleDisableShrink"]};return Vn(o,Jee,t)},rte=er("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${an(r.color)}`]]}})(gi(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Qee||{animation:`${kP} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),nte=er("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ite=er("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${an(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(gi(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:ete||{animation:`${LP} 1.4s ease-in-out infinite`}}]}))),Eg=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:u=!1,size:a=40,style:p,thickness:d=3.6,value:m=0,variant:v="indeterminate",...w}=n,x={...n,color:o,disableShrink:u,size:a,thickness:d,value:m,variant:v},P=tte(x),T={},O={},L={};if(v==="determinate"){const N=2*Math.PI*((Rh-d)/2);T.strokeDasharray=N.toFixed(3),L["aria-valuenow"]=Math.round(m),T.strokeDashoffset=`${((100-m)/100*N).toFixed(3)}px`,O.transform="rotate(-90deg)"}return ze.jsx(rte,{className:Br(P.root,i),style:{width:a,height:a,...O,...p},ownerState:x,ref:r,role:"progressbar",...L,...w,children:ze.jsx(nte,{className:P.svg,ownerState:x,viewBox:`${Rh/2} ${Rh/2} ${Rh} ${Rh}`,children:ze.jsx(ite,{className:P.circle,style:T,ownerState:x,cx:Rh,cy:Rh,r:(Rh-d)/2,fill:"none",strokeWidth:d})})})});function ate(e){return qn("MuiIconButton",e)}const mL=jn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),ote=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o,loading:u}=e,a={root:["root",u&&"loading",r&&"disabled",n!=="default"&&`color${an(n)}`,i&&`edge${an(i)}`,`size${an(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Vn(a,ate,t)},ste=er(kx,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${an(r.color)}`],r.edge&&t[`edge${an(r.edge)}`],t[`size${an(r.size)}`]]}})(gi(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),gi(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${mL.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${mL.loading}`]:{color:"transparent"}}))),lte=er("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Go=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:u,color:a="default",disabled:p=!1,disableFocusRipple:d=!1,size:m="medium",id:v,loading:w=null,loadingIndicator:x,...P}=n,T=xp(v),O=x??ze.jsx(Eg,{"aria-labelledby":T,color:"inherit",size:16}),L={...n,edge:i,color:a,disabled:p,disableFocusRipple:d,loading:w,loadingIndicator:O,size:m},N=ote(L);return ze.jsxs(ste,{id:w?T:v,className:Br(N.root,u),centerRipple:!0,focusRipple:!d,disabled:p||w,ref:r,...P,ownerState:L,children:[typeof w=="boolean"&&ze.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:ze.jsx(lte,{className:N.loadingIndicator,ownerState:L,children:w&&O})}),o]})}),ute=yi(ze.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),cte=yi(ze.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),fte=yi(ze.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),hte=yi(ze.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),dte=yi(ze.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),pte=e=>{const{variant:t,color:r,severity:n,classes:i}=e,o={root:["root",`color${an(r||n)}`,`${t}${an(r||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Vn(o,Yee,i)},mte=er(Lc,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${an(r.color||r.severity)}`]]}})(gi(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,r=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Fl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:r(e.palette[n].light,.9),[`& .${pL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(Fl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${pL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(Fl(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)}}}))]}})),gte=er("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),yte=er("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),vte=er("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),gL={success:ze.jsx(ute,{fontSize:"inherit"}),warning:ze.jsx(cte,{fontSize:"inherit"}),error:ze.jsx(fte,{fontSize:"inherit"}),info:ze.jsx(hte,{fontSize:"inherit"})},bte=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiAlert"}),{action:i,children:o,className:u,closeText:a="Close",color:p,components:d={},componentsProps:m={},icon:v,iconMapping:w=gL,onClose:x,role:P="alert",severity:T="success",slotProps:O={},slots:L={},variant:N="standard",...F}=n,D={...n,color:p,severity:T,variant:N,colorSeverity:p||T},q=pte(D),z={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...L},slotProps:{...m,...O}},[Z,Q]=Zn("root",{ref:r,shouldForwardComponentProp:!0,className:Br(q.root,u),elementType:mte,externalForwardedProps:{...z,...F},ownerState:D,additionalProps:{role:P,elevation:0}}),[Y,se]=Zn("icon",{className:q.icon,elementType:gte,externalForwardedProps:z,ownerState:D}),[W,G]=Zn("message",{className:q.message,elementType:yte,externalForwardedProps:z,ownerState:D}),[ae,le]=Zn("action",{className:q.action,elementType:vte,externalForwardedProps:z,ownerState:D}),[ue,ye]=Zn("closeButton",{elementType:Go,externalForwardedProps:z,ownerState:D}),[Se,ge]=Zn("closeIcon",{elementType:dte,externalForwardedProps:z,ownerState:D});return ze.jsxs(Z,{...Q,children:[v!==!1?ze.jsx(Y,{...se,children:v||w[T]||gL[T]}):null,ze.jsx(W,{...G,children:o}),i!=null?ze.jsx(ae,{...le,children:i}):null,i==null&&x?ze.jsx(ae,{...le,children:ze.jsx(ue,{size:"small","aria-label":a,title:a,color:"inherit",onClick:x,...ye,children:ze.jsx(Se,{fontSize:"small",...ge})})}):null]})});function _te(e){return qn("MuiTypography",e)}const yL=jn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),xte={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},wte=vee(),Ste=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:u}=e,a={root:["root",o,e.align!=="inherit"&&`align${an(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Vn(a,_te,u)},Ete=er("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${an(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(gi(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${an(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),vL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qo=M.forwardRef(function(t,r){const{color:n,...i}=Kn({props:t,name:"MuiTypography"}),o=!xte[n],u=wte({...i,...o&&{color:n}}),{align:a="inherit",className:p,component:d,gutterBottom:m=!1,noWrap:v=!1,paragraph:w=!1,variant:x="body1",variantMapping:P=vL,...T}=u,O={...u,align:a,color:n,className:p,component:d,gutterBottom:m,noWrap:v,paragraph:w,variant:x,variantMapping:P},L=d||(w?"p":P[x]||vL[x])||"span",N=Ste(O);return ze.jsx(Ete,{as:L,ref:r,className:Br(N.root,p),...T,ownerState:O,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...T.style}})});function Cte(e){return qn("MuiAppBar",e)}jn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Ate=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${an(t)}`,`position${an(r)}`]};return Vn(i,Cte,n)},bL=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,Pte=er(Lc,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${an(r.position)}`],t[`color${an(r.color)}`]]}})(gi(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Fl(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?bL(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?bL(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Tte=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:u=!1,position:a="fixed",...p}=n,d={...n,color:o,position:a,enableColorOnDark:u},m=Ate(d);return ze.jsx(Pte,{square:!0,component:"header",ownerState:d,elevation:4,className:Br(m.root,i,a==="fixed"&&"mui-fixed"),ref:r,...p})});var eu="top",rc="bottom",nc="right",tu="left",oI="auto",T0=[eu,rc,nc,tu],mg="start",Qv="end",Ite="clippingParents",m9="viewport",Ay="popper",Mte="reference",_L=T0.reduce(function(e,t){return e.concat([t+"-"+mg,t+"-"+Qv])},[]),g9=[].concat(T0,[oI]).reduce(function(e,t){return e.concat([t,t+"-"+mg,t+"-"+Qv])},[]),Rte="beforeRead",Ote="read",kte="afterRead",Lte="beforeMain",Dte="main",Nte="afterMain",Fte="beforeWrite",Bte="write",jte="afterWrite",zte=[Rte,Ote,kte,Lte,Dte,Nte,Fte,Bte,jte];function wf(e){return e?(e.nodeName||"").toLowerCase():null}function Fu(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cp(e){var t=Fu(e).Element;return e instanceof t||e instanceof Element}function tc(e){var t=Fu(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function sI(e){if(typeof ShadowRoot>"u")return!1;var t=Fu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $te(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!tc(o)||!wf(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(u){var a=i[u];a===!1?o.removeAttribute(u):o.setAttribute(u,a===!0?"":a)}))})}function Ute(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=u.reduce(function(p,d){return p[d]="",p},{});!tc(i)||!wf(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(p){i.removeAttribute(p)}))})}}const qte={name:"applyStyles",enabled:!0,phase:"write",fn:$te,effect:Ute,requires:["computeStyles"]};function vf(e){return e.split("-")[0]}var ip=Math.max,J_=Math.min,gg=Math.round;function DP(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function y9(){return!/^((?!chrome|android).)*safari/i.test(DP())}function yg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&tc(e)&&(i=e.offsetWidth>0&&gg(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&gg(n.height)/e.offsetHeight||1);var u=cp(e)?Fu(e):window,a=u.visualViewport,p=!y9()&&r,d=(n.left+(p&&a?a.offsetLeft:0))/i,m=(n.top+(p&&a?a.offsetTop:0))/o,v=n.width/i,w=n.height/o;return{width:v,height:w,top:m,right:d+v,bottom:m+w,left:d,x:d,y:m}}function lI(e){var t=yg(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function v9(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&sI(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function uh(e){return Fu(e).getComputedStyle(e)}function Vte(e){return["table","td","th"].indexOf(wf(e))>=0}function rd(e){return((cp(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lx(e){return wf(e)==="html"?e:e.assignedSlot||e.parentNode||(sI(e)?e.host:null)||rd(e)}function xL(e){return!tc(e)||uh(e).position==="fixed"?null:e.offsetParent}function Gte(e){var t=/firefox/i.test(DP()),r=/Trident/i.test(DP());if(r&&tc(e)){var n=uh(e);if(n.position==="fixed")return null}var i=Lx(e);for(sI(i)&&(i=i.host);tc(i)&&["html","body"].indexOf(wf(i))<0;){var o=uh(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function I0(e){for(var t=Fu(e),r=xL(e);r&&Vte(r)&&uh(r).position==="static";)r=xL(r);return r&&(wf(r)==="html"||wf(r)==="body"&&uh(r).position==="static")?t:r||Gte(e)||t}function uI(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function vv(e,t,r){return ip(e,J_(t,r))}function Hte(e,t,r){var n=vv(e,t,r);return n>r?r:n}function b9(){return{top:0,right:0,bottom:0,left:0}}function _9(e){return Object.assign({},b9(),e)}function x9(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Wte=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,_9(typeof t!="number"?t:x9(t,T0))};function Zte(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,u=r.modifiersData.popperOffsets,a=vf(r.placement),p=uI(a),d=[tu,nc].indexOf(a)>=0,m=d?"height":"width";if(!(!o||!u)){var v=Wte(i.padding,r),w=lI(o),x=p==="y"?eu:tu,P=p==="y"?rc:nc,T=r.rects.reference[m]+r.rects.reference[p]-u[p]-r.rects.popper[m],O=u[p]-r.rects.reference[p],L=I0(o),N=L?p==="y"?L.clientHeight||0:L.clientWidth||0:0,F=T/2-O/2,D=v[x],q=N-w[m]-v[P],z=N/2-w[m]/2+F,Z=vv(D,z,q),Q=p;r.modifiersData[n]=(t={},t[Q]=Z,t.centerOffset=Z-z,t)}}function Kte(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||v9(t.elements.popper,i)&&(t.elements.arrow=i))}const Xte={name:"arrow",enabled:!0,phase:"main",fn:Zte,effect:Kte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vg(e){return e.split("-")[1]}var Yte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jte(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:gg(r*i)/i||0,y:gg(n*i)/i||0}}function wL(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,u=e.offsets,a=e.position,p=e.gpuAcceleration,d=e.adaptive,m=e.roundOffsets,v=e.isFixed,w=u.x,x=w===void 0?0:w,P=u.y,T=P===void 0?0:P,O=typeof m=="function"?m({x,y:T}):{x,y:T};x=O.x,T=O.y;var L=u.hasOwnProperty("x"),N=u.hasOwnProperty("y"),F=tu,D=eu,q=window;if(d){var z=I0(r),Z="clientHeight",Q="clientWidth";if(z===Fu(r)&&(z=rd(r),uh(z).position!=="static"&&a==="absolute"&&(Z="scrollHeight",Q="scrollWidth")),z=z,i===eu||(i===tu||i===nc)&&o===Qv){D=rc;var Y=v&&z===q&&q.visualViewport?q.visualViewport.height:z[Z];T-=Y-n.height,T*=p?1:-1}if(i===tu||(i===eu||i===rc)&&o===Qv){F=nc;var se=v&&z===q&&q.visualViewport?q.visualViewport.width:z[Q];x-=se-n.width,x*=p?1:-1}}var W=Object.assign({position:a},d&&Yte),G=m===!0?Jte({x,y:T},Fu(r)):{x,y:T};if(x=G.x,T=G.y,p){var ae;return Object.assign({},W,(ae={},ae[D]=N?"0":"",ae[F]=L?"0":"",ae.transform=(q.devicePixelRatio||1)<=1?"translate("+x+"px, "+T+"px)":"translate3d("+x+"px, "+T+"px, 0)",ae))}return Object.assign({},W,(t={},t[D]=N?T+"px":"",t[F]=L?x+"px":"",t.transform="",t))}function Qte(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,u=o===void 0?!0:o,a=r.roundOffsets,p=a===void 0?!0:a,d={placement:vf(t.placement),variation:vg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,wL(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,wL(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ere={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qte,data:{}};var Ab={passive:!0};function tre(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,u=n.resize,a=u===void 0?!0:u,p=Fu(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(m){m.addEventListener("scroll",r.update,Ab)}),a&&p.addEventListener("resize",r.update,Ab),function(){o&&d.forEach(function(m){m.removeEventListener("scroll",r.update,Ab)}),a&&p.removeEventListener("resize",r.update,Ab)}}const rre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tre,data:{}};var nre={left:"right",right:"left",bottom:"top",top:"bottom"};function b_(e){return e.replace(/left|right|bottom|top/g,function(t){return nre[t]})}var ire={start:"end",end:"start"};function SL(e){return e.replace(/start|end/g,function(t){return ire[t]})}function cI(e){var t=Fu(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function fI(e){return yg(rd(e)).left+cI(e).scrollLeft}function are(e,t){var r=Fu(e),n=rd(e),i=r.visualViewport,o=n.clientWidth,u=n.clientHeight,a=0,p=0;if(i){o=i.width,u=i.height;var d=y9();(d||!d&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:o,height:u,x:a+fI(e),y:p}}function ore(e){var t,r=rd(e),n=cI(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=ip(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=ip(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+fI(e),p=-n.scrollTop;return uh(i||r).direction==="rtl"&&(a+=ip(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:u,x:a,y:p}}function hI(e){var t=uh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function w9(e){return["html","body","#document"].indexOf(wf(e))>=0?e.ownerDocument.body:tc(e)&&hI(e)?e:w9(Lx(e))}function bv(e,t){var r;t===void 0&&(t=[]);var n=w9(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=Fu(n),u=i?[o].concat(o.visualViewport||[],hI(n)?n:[]):n,a=t.concat(u);return i?a:a.concat(bv(Lx(u)))}function NP(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sre(e,t){var r=yg(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function EL(e,t,r){return t===m9?NP(are(e,r)):cp(t)?sre(t,r):NP(ore(rd(e)))}function lre(e){var t=bv(Lx(e)),r=["absolute","fixed"].indexOf(uh(e).position)>=0,n=r&&tc(e)?I0(e):e;return cp(n)?t.filter(function(i){return cp(i)&&v9(i,n)&&wf(i)!=="body"}):[]}function ure(e,t,r,n){var i=t==="clippingParents"?lre(e):[].concat(t),o=[].concat(i,[r]),u=o[0],a=o.reduce(function(p,d){var m=EL(e,d,n);return p.top=ip(m.top,p.top),p.right=J_(m.right,p.right),p.bottom=J_(m.bottom,p.bottom),p.left=ip(m.left,p.left),p},EL(e,u,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function S9(e){var t=e.reference,r=e.element,n=e.placement,i=n?vf(n):null,o=n?vg(n):null,u=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,p;switch(i){case eu:p={x:u,y:t.y-r.height};break;case rc:p={x:u,y:t.y+t.height};break;case nc:p={x:t.x+t.width,y:a};break;case tu:p={x:t.x-r.width,y:a};break;default:p={x:t.x,y:t.y}}var d=i?uI(i):null;if(d!=null){var m=d==="y"?"height":"width";switch(o){case mg:p[d]=p[d]-(t[m]/2-r[m]/2);break;case Qv:p[d]=p[d]+(t[m]/2-r[m]/2);break}}return p}function e0(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,u=o===void 0?e.strategy:o,a=r.boundary,p=a===void 0?Ite:a,d=r.rootBoundary,m=d===void 0?m9:d,v=r.elementContext,w=v===void 0?Ay:v,x=r.altBoundary,P=x===void 0?!1:x,T=r.padding,O=T===void 0?0:T,L=_9(typeof O!="number"?O:x9(O,T0)),N=w===Ay?Mte:Ay,F=e.rects.popper,D=e.elements[P?N:w],q=ure(cp(D)?D:D.contextElement||rd(e.elements.popper),p,m,u),z=yg(e.elements.reference),Z=S9({reference:z,element:F,placement:i}),Q=NP(Object.assign({},F,Z)),Y=w===Ay?Q:z,se={top:q.top-Y.top+L.top,bottom:Y.bottom-q.bottom+L.bottom,left:q.left-Y.left+L.left,right:Y.right-q.right+L.right},W=e.modifiersData.offset;if(w===Ay&&W){var G=W[i];Object.keys(se).forEach(function(ae){var le=[nc,rc].indexOf(ae)>=0?1:-1,ue=[eu,rc].indexOf(ae)>=0?"y":"x";se[ae]+=G[ue]*le})}return se}function cre(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,u=r.padding,a=r.flipVariations,p=r.allowedAutoPlacements,d=p===void 0?g9:p,m=vg(n),v=m?a?_L:_L.filter(function(P){return vg(P)===m}):T0,w=v.filter(function(P){return d.indexOf(P)>=0});w.length===0&&(w=v);var x=w.reduce(function(P,T){return P[T]=e0(e,{placement:T,boundary:i,rootBoundary:o,padding:u})[vf(T)],P},{});return Object.keys(x).sort(function(P,T){return x[P]-x[T]})}function fre(e){if(vf(e)===oI)return[];var t=b_(e);return[SL(e),t,SL(t)]}function hre(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!0:u,p=r.fallbackPlacements,d=r.padding,m=r.boundary,v=r.rootBoundary,w=r.altBoundary,x=r.flipVariations,P=x===void 0?!0:x,T=r.allowedAutoPlacements,O=t.options.placement,L=vf(O),N=L===O,F=p||(N||!P?[b_(O)]:fre(O)),D=[O].concat(F).reduce(function(Ce,ke){return Ce.concat(vf(ke)===oI?cre(t,{placement:ke,boundary:m,rootBoundary:v,padding:d,flipVariations:P,allowedAutoPlacements:T}):ke)},[]),q=t.rects.reference,z=t.rects.popper,Z=new Map,Q=!0,Y=D[0],se=0;se<D.length;se++){var W=D[se],G=vf(W),ae=vg(W)===mg,le=[eu,rc].indexOf(G)>=0,ue=le?"width":"height",ye=e0(t,{placement:W,boundary:m,rootBoundary:v,altBoundary:w,padding:d}),Se=le?ae?nc:tu:ae?rc:eu;q[ue]>z[ue]&&(Se=b_(Se));var ge=b_(Se),xe=[];if(o&&xe.push(ye[G]<=0),a&&xe.push(ye[Se]<=0,ye[ge]<=0),xe.every(function(Ce){return Ce})){Y=W,Q=!1;break}Z.set(W,xe)}if(Q)for(var Fe=P?3:1,He=function(ke){var $e=D.find(function(ht){var At=Z.get(ht);if(At)return At.slice(0,ke).every(function(mt){return mt})});if($e)return Y=$e,"break"},pe=Fe;pe>0;pe--){var _e=He(pe);if(_e==="break")break}t.placement!==Y&&(t.modifiersData[n]._skip=!0,t.placement=Y,t.reset=!0)}}const dre={name:"flip",enabled:!0,phase:"main",fn:hre,requiresIfExists:["offset"],data:{_skip:!1}};function CL(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function AL(e){return[eu,nc,rc,tu].some(function(t){return e[t]>=0})}function pre(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,u=e0(t,{elementContext:"reference"}),a=e0(t,{altBoundary:!0}),p=CL(u,n),d=CL(a,i,o),m=AL(p),v=AL(d);t.modifiersData[r]={referenceClippingOffsets:p,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":v})}const mre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pre};function gre(e,t,r){var n=vf(e),i=[tu,eu].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=o[0],a=o[1];return u=u||0,a=(a||0)*i,[tu,nc].indexOf(n)>=0?{x:a,y:u}:{x:u,y:a}}function yre(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,u=g9.reduce(function(m,v){return m[v]=gre(v,t.rects,o),m},{}),a=u[t.placement],p=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=u}const vre={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yre};function bre(e){var t=e.state,r=e.name;t.modifiersData[r]=S9({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const _re={name:"popperOffsets",enabled:!0,phase:"read",fn:bre,data:{}};function xre(e){return e==="x"?"y":"x"}function wre(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!1:u,p=r.boundary,d=r.rootBoundary,m=r.altBoundary,v=r.padding,w=r.tether,x=w===void 0?!0:w,P=r.tetherOffset,T=P===void 0?0:P,O=e0(t,{boundary:p,rootBoundary:d,padding:v,altBoundary:m}),L=vf(t.placement),N=vg(t.placement),F=!N,D=uI(L),q=xre(D),z=t.modifiersData.popperOffsets,Z=t.rects.reference,Q=t.rects.popper,Y=typeof T=="function"?T(Object.assign({},t.rects,{placement:t.placement})):T,se=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(z){if(o){var ae,le=D==="y"?eu:tu,ue=D==="y"?rc:nc,ye=D==="y"?"height":"width",Se=z[D],ge=Se+O[le],xe=Se-O[ue],Fe=x?-Q[ye]/2:0,He=N===mg?Z[ye]:Q[ye],pe=N===mg?-Q[ye]:-Z[ye],_e=t.elements.arrow,Ce=x&&_e?lI(_e):{width:0,height:0},ke=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:b9(),$e=ke[le],ht=ke[ue],At=vv(0,Z[ye],Ce[ye]),mt=F?Z[ye]/2-Fe-At-$e-se.mainAxis:He-At-$e-se.mainAxis,rt=F?-Z[ye]/2+Fe+At+ht+se.mainAxis:pe+At+ht+se.mainAxis,Lt=t.elements.arrow&&I0(t.elements.arrow),Tt=Lt?D==="y"?Lt.clientTop||0:Lt.clientLeft||0:0,Pt=(ae=W?.[D])!=null?ae:0,ut=Se+mt-Pt-Tt,Le=Se+rt-Pt,sr=vv(x?J_(ge,ut):ge,Se,x?ip(xe,Le):xe);z[D]=sr,G[D]=sr-Se}if(a){var lr,dr=D==="x"?eu:tu,Yt=D==="x"?rc:nc,Ve=z[q],tt=q==="y"?"height":"width",lt=Ve+O[dr],Mt=Ve-O[Yt],Kt=[eu,tu].indexOf(L)!==-1,Ut=(lr=W?.[q])!=null?lr:0,ar=Kt?lt:Ve-Z[tt]-Q[tt]-Ut+se.altAxis,gr=Kt?Ve+Z[tt]+Q[tt]-Ut-se.altAxis:Mt,yr=x&&Kt?Hte(ar,Ve,gr):vv(x?ar:lt,Ve,x?gr:Mt);z[q]=yr,G[q]=yr-Ve}t.modifiersData[n]=G}}const Sre={name:"preventOverflow",enabled:!0,phase:"main",fn:wre,requiresIfExists:["offset"]};function Ere(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Cre(e){return e===Fu(e)||!tc(e)?cI(e):Ere(e)}function Are(e){var t=e.getBoundingClientRect(),r=gg(t.width)/e.offsetWidth||1,n=gg(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Pre(e,t,r){r===void 0&&(r=!1);var n=tc(t),i=tc(t)&&Are(t),o=rd(t),u=yg(e,i,r),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(n||!n&&!r)&&((wf(t)!=="body"||hI(o))&&(a=Cre(t)),tc(t)?(p=yg(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):o&&(p.x=fI(o))),{x:u.left+a.scrollLeft-p.x,y:u.top+a.scrollTop-p.y,width:u.width,height:u.height}}function Tre(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(a){if(!r.has(a)){var p=t.get(a);p&&i(p)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function Ire(e){var t=Tre(e);return zte.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function Mre(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Rre(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var PL={placement:"bottom",modifiers:[],strategy:"absolute"};function TL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ore(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?PL:i;return function(a,p,d){d===void 0&&(d=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},PL,o),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},v=[],w=!1,x={state:m,setOptions:function(L){var N=typeof L=="function"?L(m.options):L;T(),m.options=Object.assign({},o,m.options,N),m.scrollParents={reference:cp(a)?bv(a):a.contextElement?bv(a.contextElement):[],popper:bv(p)};var F=Ire(Rre([].concat(n,m.options.modifiers)));return m.orderedModifiers=F.filter(function(D){return D.enabled}),P(),x.update()},forceUpdate:function(){if(!w){var L=m.elements,N=L.reference,F=L.popper;if(TL(N,F)){m.rects={reference:Pre(N,I0(F),m.options.strategy==="fixed"),popper:lI(F)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(se){return m.modifiersData[se.name]=Object.assign({},se.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var q=m.orderedModifiers[D],z=q.fn,Z=q.options,Q=Z===void 0?{}:Z,Y=q.name;typeof z=="function"&&(m=z({state:m,options:Q,name:Y,instance:x})||m)}}}},update:Mre(function(){return new Promise(function(O){x.forceUpdate(),O(m)})}),destroy:function(){T(),w=!0}};if(!TL(a,p))return x;x.setOptions(d).then(function(O){!w&&d.onFirstUpdate&&d.onFirstUpdate(O)});function P(){m.orderedModifiers.forEach(function(O){var L=O.name,N=O.options,F=N===void 0?{}:N,D=O.effect;if(typeof D=="function"){var q=D({state:m,name:L,instance:x,options:F}),z=function(){};v.push(q||z)}})}function T(){v.forEach(function(O){return O()}),v=[]}return x}}var kre=[rre,_re,ere,qte,vre,dre,Sre,Xte,mre],Lre=Ore({defaultModifiers:kre});function E9(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,u=i?{}:d9(r,n),{props:a,internalRef:p}=p9({...o,externalSlotProps:u}),d=Ao(p,u?.ref,e.additionalProps?.ref);return h9(t,{...a,ref:d},n)}function nd(e){return parseInt(M.version,10)>=19?e?.props?.ref||null:e?.ref||null}function Dre(e){return typeof e=="function"?e():e}const C9=M.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[u,a]=M.useState(null),p=Ao(M.isValidElement(n)?nd(n):null,r);if(Nu(()=>{o||a(Dre(i)||document.body)},[i,o]),Nu(()=>{if(u&&!o)return cL(r,u),()=>{cL(r,null)}},[r,u,o]),o){if(M.isValidElement(n)){const d={ref:p};return M.cloneElement(n,d)}return n}return u&&Rx.createPortal(n,u)});function Nre(e){return qn("MuiPopper",e)}jn("MuiPopper",["root"]);function Fre(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function FP(e){return typeof e=="function"?e():e}function Bre(e){return e.nodeType!==void 0}const jre=e=>{const{classes:t}=e;return Vn({root:["root"]},Nre,t)},zre={},$re=M.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:o,disablePortal:u,modifiers:a,open:p,placement:d,popperOptions:m,popperRef:v,slotProps:w={},slots:x={},TransitionProps:P,ownerState:T,...O}=t,L=M.useRef(null),N=Ao(L,r),F=M.useRef(null),D=Ao(F,v),q=M.useRef(D);Nu(()=>{q.current=D},[D]),M.useImperativeHandle(v,()=>F.current,[]);const z=Fre(d,o),[Z,Q]=M.useState(z),[Y,se]=M.useState(FP(n));M.useEffect(()=>{F.current&&F.current.forceUpdate()}),M.useEffect(()=>{n&&se(FP(n))},[n]),Nu(()=>{if(!Y||!p)return;const ue=ge=>{Q(ge.placement)};let ye=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ge})=>{ue(ge)}}];a!=null&&(ye=ye.concat(a)),m&&m.modifiers!=null&&(ye=ye.concat(m.modifiers));const Se=Lre(Y,L.current,{placement:z,...m,modifiers:ye});return q.current(Se),()=>{Se.destroy(),q.current(null)}},[Y,u,a,p,m,z]);const W={placement:Z};P!==null&&(W.TransitionProps=P);const G=jre(t),ae=x.root??"div",le=E9({elementType:ae,externalSlotProps:w.root,externalForwardedProps:O,additionalProps:{role:"tooltip",ref:N},ownerState:t,className:G.root});return ze.jsx(ae,{...le,children:typeof i=="function"?i(W):i})}),Ure=M.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:u="ltr",disablePortal:a=!1,keepMounted:p=!1,modifiers:d,open:m,placement:v="bottom",popperOptions:w=zre,popperRef:x,style:P,transition:T=!1,slotProps:O={},slots:L={},...N}=t,[F,D]=M.useState(!0),q=()=>{D(!1)},z=()=>{D(!0)};if(!p&&!m&&(!T||F))return null;let Z;if(o)Z=o;else if(n){const se=FP(n);Z=se&&Bre(se)?fl(se).body:fl(null).body}const Q=!m&&p&&(!T||F)?"none":void 0,Y=T?{in:m,onEnter:q,onExited:z}:void 0;return ze.jsx(C9,{disablePortal:a,container:Z,children:ze.jsx($re,{anchorEl:n,direction:u,disablePortal:a,modifiers:d,ref:r,open:T?!F:m,placement:v,popperOptions:w,popperRef:x,slotProps:O,slots:L,...N,style:{position:"fixed",top:0,left:0,display:Q,...P},TransitionProps:Y,children:i})})}),qre=er(Ure,{name:"MuiPopper",slot:"Root"})({}),A9=M.forwardRef(function(t,r){const n=Px(),i=Kn({props:t,name:"MuiPopper"}),{anchorEl:o,component:u,components:a,componentsProps:p,container:d,disablePortal:m,keepMounted:v,modifiers:w,open:x,placement:P,popperOptions:T,popperRef:O,transition:L,slots:N,slotProps:F,...D}=i,q=N?.root??a?.Root,z={anchorEl:o,container:d,disablePortal:m,keepMounted:v,modifiers:w,open:x,placement:P,popperOptions:T,popperRef:O,transition:L,...D};return ze.jsx(qre,{as:u,direction:n?"rtl":"ltr",slots:{root:q},slotProps:F??p,...z,ref:r})});function Pb(e){return parseInt(e,10)||0}const Vre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Gre(e){for(const t in e)return!1;return!0}function IL(e){return Gre(e)||e.outerHeightStyle===0&&!e.overflowing}const Hre=M.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:u,value:a,...p}=t,{current:d}=M.useRef(a!=null),m=M.useRef(null),v=Ao(r,m),w=M.useRef(null),x=M.useRef(null),P=M.useCallback(()=>{const F=m.current,D=x.current;if(!F||!D)return;const z=Ic(F).getComputedStyle(F);if(z.width==="0px")return{outerHeightStyle:0,overflowing:!1};D.style.width=z.width,D.value=F.value||t.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");const Z=z.boxSizing,Q=Pb(z.paddingBottom)+Pb(z.paddingTop),Y=Pb(z.borderBottomWidth)+Pb(z.borderTopWidth),se=D.scrollHeight;D.value="x";const W=D.scrollHeight;let G=se;o&&(G=Math.max(Number(o)*W,G)),i&&(G=Math.min(Number(i)*W,G)),G=Math.max(G,W);const ae=G+(Z==="border-box"?Q+Y:0),le=Math.abs(G-se)<=1;return{outerHeightStyle:ae,overflowing:le}},[i,o,t.placeholder]),T=ec(()=>{const F=m.current,D=P();if(!F||!D||IL(D))return!1;const q=D.outerHeightStyle;return w.current!=null&&w.current!==q}),O=M.useCallback(()=>{const F=m.current,D=P();if(!F||!D||IL(D))return;const q=D.outerHeightStyle;w.current!==q&&(w.current=q,F.style.height=`${q}px`),F.style.overflow=D.overflowing?"hidden":""},[P]),L=M.useRef(-1);Nu(()=>{const F=tI(O),D=m?.current;if(!D)return;const q=Ic(D);q.addEventListener("resize",F);let z;return typeof ResizeObserver<"u"&&(z=new ResizeObserver(()=>{T()&&(z.unobserve(D),cancelAnimationFrame(L.current),O(),L.current=requestAnimationFrame(()=>{z.observe(D)}))}),z.observe(D)),()=>{F.clear(),cancelAnimationFrame(L.current),q.removeEventListener("resize",F),z&&z.disconnect()}},[P,O,T]),Nu(()=>{O()});const N=F=>{d||O();const D=F.target,q=D.value.length,z=D.value.endsWith(`
`),Z=D.selectionStart===q;z&&Z&&D.setSelectionRange(q,q),n&&n(F)};return ze.jsxs(M.Fragment,{children:[ze.jsx("textarea",{value:a,onChange:N,ref:v,rows:o,style:u,...p}),ze.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:x,tabIndex:-1,style:{...Vre.shadow,...u,paddingTop:0,paddingBottom:0}})]})});function Cg({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const Dx=M.createContext(void 0);function id(){return M.useContext(Dx)}function ML(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Q_(e,t=!1){return e&&(ML(e.value)&&e.value!==""||t&&ML(e.defaultValue)&&e.defaultValue!=="")}function Wre(e){return e.startAdornment}function Zre(e){return qn("MuiInputBase",e)}const bg=jn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var RL;const Nx=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${an(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},Fx=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},Kre=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:u,formControl:a,fullWidth:p,hiddenLabel:d,multiline:m,readOnly:v,size:w,startAdornment:x,type:P}=e,T={root:["root",`color${an(r)}`,n&&"disabled",i&&"error",p&&"fullWidth",u&&"focused",a&&"formControl",w&&w!=="medium"&&`size${an(w)}`,m&&"multiline",x&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",v&&"readOnly"],input:["input",n&&"disabled",P==="search"&&"inputTypeSearch",m&&"inputMultiline",w==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",x&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Vn(T,Zre,t)},Bx=er("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Nx})(gi(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${bg.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),jx=er("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Fx})(gi(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${bg.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${bg.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),OL=eI({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),dI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:u,className:a,color:p,components:d={},componentsProps:m={},defaultValue:v,disabled:w,disableInjectingGlobalStyles:x,endAdornment:P,error:T,fullWidth:O=!1,id:L,inputComponent:N="input",inputProps:F={},inputRef:D,margin:q,maxRows:z,minRows:Z,multiline:Q=!1,name:Y,onBlur:se,onChange:W,onClick:G,onFocus:ae,onKeyDown:le,onKeyUp:ue,placeholder:ye,readOnly:Se,renderSuffix:ge,rows:xe,size:Fe,slotProps:He={},slots:pe={},startAdornment:_e,type:Ce="text",value:ke,...$e}=n,ht=F.value!=null?F.value:ke,{current:At}=M.useRef(ht!=null),mt=M.useRef(),rt=M.useCallback(he=>{},[]),Lt=Ao(mt,D,F.ref,rt),[Tt,Pt]=M.useState(!1),ut=id(),Le=Cg({props:n,muiFormControl:ut,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Le.focused=ut?ut.focused:Tt,M.useEffect(()=>{!ut&&w&&Tt&&(Pt(!1),se&&se())},[ut,w,Tt,se]);const sr=ut&&ut.onFilled,lr=ut&&ut.onEmpty,dr=M.useCallback(he=>{Q_(he)?sr&&sr():lr&&lr()},[sr,lr]);Nu(()=>{At&&dr({value:ht})},[ht,dr,At]);const Yt=he=>{ae&&ae(he),F.onFocus&&F.onFocus(he),ut&&ut.onFocus?ut.onFocus(he):Pt(!0)},Ve=he=>{se&&se(he),F.onBlur&&F.onBlur(he),ut&&ut.onBlur?ut.onBlur(he):Pt(!1)},tt=(he,...Me)=>{if(!At){const Ue=he.target||mt.current;if(Ue==null)throw new Error(lh(1));dr({value:Ue.value})}F.onChange&&F.onChange(he,...Me),W&&W(he,...Me)};M.useEffect(()=>{dr(mt.current)},[]);const lt=he=>{mt.current&&he.currentTarget===he.target&&mt.current.focus(),G&&G(he)};let Mt=N,Kt=F;Q&&Mt==="input"&&(xe?Kt={type:void 0,minRows:xe,maxRows:xe,...Kt}:Kt={type:void 0,maxRows:z,minRows:Z,...Kt},Mt=Hre);const Ut=he=>{dr(he.animationName==="mui-auto-fill-cancel"?mt.current:{value:"x"})};M.useEffect(()=>{ut&&ut.setAdornedStart(!!_e)},[ut,_e]);const ar={...n,color:Le.color||"primary",disabled:Le.disabled,endAdornment:P,error:Le.error,focused:Le.focused,formControl:ut,fullWidth:O,hiddenLabel:Le.hiddenLabel,multiline:Q,size:Le.size,startAdornment:_e,type:Ce},gr=Kre(ar),yr=pe.root||d.Root||Bx,Ye=He.root||m.root||{},de=pe.input||d.Input||jx;return Kt={...Kt,...He.input??m.input},ze.jsxs(M.Fragment,{children:[!x&&typeof OL=="function"&&(RL||(RL=ze.jsx(OL,{}))),ze.jsxs(yr,{...Ye,ref:r,onClick:lt,...$e,...!pg(yr)&&{ownerState:{...ar,...Ye.ownerState}},className:Br(gr.root,Ye.className,a,Se&&"MuiInputBase-readOnly"),children:[_e,ze.jsx(Dx.Provider,{value:null,children:ze.jsx(de,{"aria-invalid":Le.error,"aria-describedby":i,autoComplete:o,autoFocus:u,defaultValue:v,disabled:Le.disabled,id:L,onAnimationStart:Ut,name:Y,placeholder:ye,readOnly:Se,required:Le.required,rows:xe,value:ht,onKeyDown:le,onKeyUp:ue,type:Ce,...Kt,...!pg(de)&&{as:Mt,ownerState:{...ar,...Kt.ownerState}},ref:Lt,className:Br(gr.input,Kt.className,Se&&"MuiInputBase-readOnly"),onBlur:Ve,onChange:tt,onFocus:Yt})}),P,ge?ge({...Le,startAdornment:_e}):null]})]})});function Xre(e){return qn("MuiInput",e)}const Py={...bg,...jn("MuiInput",["root","underline","input"])};function Yre(e){return qn("MuiOutlinedInput",e)}const af={...bg,...jn("MuiOutlinedInput",["root","notchedOutline","input"])};function Jre(e){return qn("MuiFilledInput",e)}const kd={...bg,...jn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Qre=yi(ze.jsx("path",{d:"M7 10l5 5 5-5z"})),ene=yi(ze.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function tne(e){return qn("MuiAvatar",e)}jn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const rne=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Vn({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},tne,t)},nne=er("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(gi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),ine=er("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),ane=er(ene,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function one({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,o]=M.useState(!1);return M.useEffect(()=>{if(!r&&!n)return;o(!1);let u=!0;const a=new Image;return a.onload=()=>{u&&o("loaded")},a.onerror=()=>{u&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{u=!1}},[e,t,r,n]),i}const BP=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:u,component:a="div",slots:p={},slotProps:d={},imgProps:m,sizes:v,src:w,srcSet:x,variant:P="circular",...T}=n;let O=null;const L={...n,component:a,variant:P},N=one({...m,...typeof d.img=="function"?d.img(L):d.img,src:w,srcSet:x}),F=w||x,D=F&&N!=="error";L.colorDefault=!D,delete L.ownerState;const q=rne(L),[z,Z]=Zn("root",{ref:r,className:Br(q.root,u),elementType:nne,externalForwardedProps:{slots:p,slotProps:d,component:a,...T},ownerState:L}),[Q,Y]=Zn("img",{className:q.img,elementType:ine,externalForwardedProps:{slots:p,slotProps:{img:{...m,...d.img}}},additionalProps:{alt:i,src:w,srcSet:x,sizes:v},ownerState:L}),[se,W]=Zn("fallback",{className:q.fallback,elementType:ane,externalForwardedProps:{slots:p,slotProps:d},shouldForwardComponentProp:!0,ownerState:L});return D?O=ze.jsx(Q,{...Y}):o||o===0?O=o:F&&i?O=i[0]:O=ze.jsx(se,{...W}),ze.jsx(z,{...Z,children:O})}),sne={entering:{opacity:1},entered:{opacity:1}},jP=M.forwardRef(function(t,r){const n=Sf(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:a,easing:p,in:d,onEnter:m,onEntered:v,onEntering:w,onExit:x,onExited:P,onExiting:T,style:O,timeout:L=i,TransitionComponent:N=kc,...F}=t,D=M.useRef(null),q=Ao(D,nd(a),r),z=le=>ue=>{if(le){const ye=D.current;ue===void 0?le(ye):le(ye,ue)}},Z=z(w),Q=z((le,ue)=>{aI(le);const ye=dg({style:O,timeout:L,easing:p},{mode:"enter"});le.style.webkitTransition=n.transitions.create("opacity",ye),le.style.transition=n.transitions.create("opacity",ye),m&&m(le,ue)}),Y=z(v),se=z(T),W=z(le=>{const ue=dg({style:O,timeout:L,easing:p},{mode:"exit"});le.style.webkitTransition=n.transitions.create("opacity",ue),le.style.transition=n.transitions.create("opacity",ue),x&&x(le)}),G=z(P),ae=le=>{o&&o(D.current,le)};return ze.jsx(N,{appear:u,in:d,nodeRef:D,onEnter:Q,onEntered:Y,onEntering:Z,onExit:W,onExited:G,onExiting:se,addEndListener:ae,timeout:L,...F,children:(le,{ownerState:ue,...ye})=>M.cloneElement(a,{style:{opacity:0,visibility:le==="exited"&&!d?"hidden":void 0,...sne[le],...O,...a.props.style},ref:q,...ye})})});function lne(e){return qn("MuiBackdrop",e)}jn("MuiBackdrop",["root","invisible"]);const une=e=>{const{classes:t,invisible:r}=e;return Vn({root:["root",r&&"invisible"]},lne,t)},cne=er("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),P9=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiBackdrop"}),{children:i,className:o,component:u="div",invisible:a=!1,open:p,components:d={},componentsProps:m={},slotProps:v={},slots:w={},TransitionComponent:x,transitionDuration:P,...T}=n,O={...n,component:u,invisible:a},L=une(O),N={transition:x,root:d.Root,...w},F={...m,...v},D={component:u,slots:N,slotProps:F},[q,z]=Zn("root",{elementType:cne,externalForwardedProps:D,className:Br(L.root,o),ownerState:O}),[Z,Q]=Zn("transition",{elementType:jP,externalForwardedProps:D,ownerState:O});return ze.jsx(Z,{in:p,timeout:P,...T,...Q,children:ze.jsx(q,{"aria-hidden":!0,...z,classes:L,ref:r,children:i})})}),fne=jn("MuiBox",["root"]),hne=Yh(),ad=B$({themeId:Qu,defaultTheme:hne,defaultClassName:fne.root,generateClassName:W3.generate});function dne(e){return qn("MuiButton",e)}const Ld=jn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),pne=M.createContext({}),mne=M.createContext(void 0),gne=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,loading:u,loadingPosition:a,classes:p}=e,d={root:["root",u&&"loading",o,`${o}${an(t)}`,`size${an(i)}`,`${o}Size${an(i)}`,`color${an(t)}`,r&&"disableElevation",n&&"fullWidth",u&&`loadingPosition${an(a)}`],startIcon:["icon","startIcon",`iconSize${an(i)}`],endIcon:["icon","endIcon",`iconSize${an(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=Vn(d,dne,p);return{...p,...m}},T9=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],yne=er(kx,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${an(r.color)}`],t[`size${an(r.size)}`],t[`${r.variant}Size${an(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(gi(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Ld.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ld.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Fl()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ld.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ld.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Ld.loading}`]:{color:"transparent"}}}]}})),vne=er("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${an(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...T9]})),bne=er("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${an(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...T9]})),_ne=er("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),kL=er("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Mc=M.forwardRef(function(t,r){const n=M.useContext(pne),i=M.useContext(mne),o=Xv(n,t),u=Kn({props:o,name:"MuiButton"}),{children:a,color:p="primary",component:d="button",className:m,disabled:v=!1,disableElevation:w=!1,disableFocusRipple:x=!1,endIcon:P,focusVisibleClassName:T,fullWidth:O=!1,id:L,loading:N=null,loadingIndicator:F,loadingPosition:D="center",size:q="medium",startIcon:z,type:Z,variant:Q="text",...Y}=u,se=xp(L),W=F??ze.jsx(Eg,{"aria-labelledby":se,color:"inherit",size:16}),G={...u,color:p,component:d,disabled:v,disableElevation:w,disableFocusRipple:x,fullWidth:O,loading:N,loadingIndicator:W,loadingPosition:D,size:q,type:Z,variant:Q},ae=gne(G),le=(z||N&&D==="start")&&ze.jsx(vne,{className:ae.startIcon,ownerState:G,children:z||ze.jsx(kL,{className:ae.loadingIconPlaceholder,ownerState:G})}),ue=(P||N&&D==="end")&&ze.jsx(bne,{className:ae.endIcon,ownerState:G,children:P||ze.jsx(kL,{className:ae.loadingIconPlaceholder,ownerState:G})}),ye=i||"",Se=typeof N=="boolean"?ze.jsx("span",{className:ae.loadingWrapper,style:{display:"contents"},children:N&&ze.jsx(_ne,{className:ae.loadingIndicator,ownerState:G,children:W})}):null;return ze.jsxs(yne,{ownerState:G,className:Br(n.className,ae.root,m,ye),component:d,disabled:v||N,focusRipple:!x,focusVisibleClassName:Br(ae.focusVisible,T),ref:r,type:Z,id:N?se:L,...Y,classes:ae,children:[le,D!=="end"&&Se,a,D==="end"&&Se,ue]})});function xne(e){return qn("MuiCard",e)}jn("MuiCard",["root"]);const wne=e=>{const{classes:t}=e;return Vn({root:["root"]},xne,t)},Sne=er(Lc,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),pI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiCard"}),{className:i,raised:o=!1,...u}=n,a={...n,raised:o},p=wne(a);return ze.jsx(Sne,{className:Br(p.root,i),elevation:o?8:void 0,ref:r,ownerState:a,...u})});function Ene(e){return qn("MuiCardContent",e)}jn("MuiCardContent",["root"]);const Cne=e=>{const{classes:t}=e;return Vn({root:["root"]},Ene,t)},Ane=er("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),mI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiCardContent"}),{className:i,component:o="div",...u}=n,a={...n,component:o},p=Cne(a);return ze.jsx(Ane,{as:o,className:Br(p.root,i),ownerState:a,ref:r,...u})});function Pne(e){return qn("PrivateSwitchBase",e)}jn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Tne=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${an(i)}`],input:["input"]};return Vn(o,Pne,t)},Ine=er(kx,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Mne=er("input",{name:"MuiSwitchBase",shouldForwardProp:hl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Rne=M.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,defaultChecked:u,disabled:a,disableFocusRipple:p=!1,edge:d=!1,icon:m,id:v,inputProps:w,inputRef:x,name:P,onBlur:T,onChange:O,onFocus:L,readOnly:N,required:F=!1,tabIndex:D,type:q,value:z,slots:Z={},slotProps:Q={},...Y}=t,[se,W]=W_({controlled:i,default:!!u,name:"SwitchBase",state:"checked"}),G=id(),ae=ke=>{L&&L(ke),G&&G.onFocus&&G.onFocus(ke)},le=ke=>{T&&T(ke),G&&G.onBlur&&G.onBlur(ke)},ue=ke=>{if(ke.nativeEvent.defaultPrevented)return;const $e=ke.target.checked;W($e),O&&O(ke,$e)};let ye=a;G&&typeof ye>"u"&&(ye=G.disabled);const Se=q==="checkbox"||q==="radio",ge={...t,checked:se,disabled:ye,disableFocusRipple:p,edge:d},xe=Tne(ge),Fe={slots:Z,slotProps:{input:w,...Q}},[He,pe]=Zn("root",{ref:r,elementType:Ine,className:xe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Fe,component:"span",...Y},getSlotProps:ke=>({...ke,onFocus:$e=>{ke.onFocus?.($e),ae($e)},onBlur:$e=>{ke.onBlur?.($e),le($e)}}),ownerState:ge,additionalProps:{centerRipple:!0,focusRipple:!p,disabled:ye,role:void 0,tabIndex:null}}),[_e,Ce]=Zn("input",{ref:x,elementType:Mne,className:xe.input,externalForwardedProps:Fe,getSlotProps:ke=>({...ke,onChange:$e=>{ke.onChange?.($e),ue($e)}}),ownerState:ge,additionalProps:{autoFocus:n,checked:i,defaultChecked:u,disabled:ye,id:Se?v:void 0,name:P,readOnly:N,required:F,tabIndex:D,type:q,...q==="checkbox"&&z===void 0?{}:{value:z}}});return ze.jsxs(He,{...pe,children:[ze.jsx(_e,{...Ce}),se?o:m]})}),One=yi(ze.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),kne=yi(ze.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Lne=yi(ze.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Dne(e){return qn("MuiCheckbox",e)}const kw=jn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Nne=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${an(n)}`,`size${an(i)}`]},u=Vn(o,Dne,t);return{...t,...u}},Fne=er(Rne,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${an(r.size)}`],r.color!=="default"&&t[`color${an(r.color)}`]]}})(gi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{[`&.${kw.checked}, &.${kw.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${kw.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Bne=ze.jsx(kne,{}),jne=ze.jsx(One,{}),zne=ze.jsx(Lne,{}),I9=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiCheckbox"}),{checkedIcon:i=Bne,color:o="primary",icon:u=jne,indeterminate:a=!1,indeterminateIcon:p=zne,inputProps:d,size:m="medium",disableRipple:v=!1,className:w,slots:x={},slotProps:P={},...T}=n,O=a?p:u,L=a?p:i,N={...n,disableRipple:v,color:o,indeterminate:a,size:m},F=Nne(N),D=P.input??d,[q,z]=Zn("root",{ref:r,elementType:Fne,className:Br(F.root,w),shouldForwardComponentProp:!0,externalForwardedProps:{slots:x,slotProps:P,...T},ownerState:N,additionalProps:{type:"checkbox",icon:M.cloneElement(O,{fontSize:O.props.fontSize??m}),checkedIcon:M.cloneElement(L,{fontSize:L.props.fontSize??m}),disableRipple:v,slots:x,slotProps:{input:rI(typeof D=="function"?D(N):D,{"data-indeterminate":a})}}});return ze.jsx(q,{...z,classes:F})});function LL(e){return e.substring(2).toLowerCase()}function $ne(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Une(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,u=M.useRef(!1),a=M.useRef(null),p=M.useRef(!1),d=M.useRef(!1);M.useEffect(()=>(setTimeout(()=>{p.current=!0},0),()=>{p.current=!1}),[]);const m=Ao(nd(t),a),v=ec(P=>{const T=d.current;d.current=!1;const O=fl(a.current);if(!p.current||!a.current||"clientX"in P&&$ne(P,O))return;if(u.current){u.current=!1;return}let L;P.composedPath?L=P.composedPath().includes(a.current):L=!O.documentElement.contains(P.target)||a.current.contains(P.target),!L&&(r||!T)&&i(P)}),w=P=>T=>{d.current=!0;const O=t.props[P];O&&O(T)},x={ref:m};return o!==!1&&(x[o]=w(o)),M.useEffect(()=>{if(o!==!1){const P=LL(o),T=fl(a.current),O=()=>{u.current=!0};return T.addEventListener(P,v),T.addEventListener("touchmove",O),()=>{T.removeEventListener(P,v),T.removeEventListener("touchmove",O)}}},[v,o]),n!==!1&&(x[n]=w(n)),M.useEffect(()=>{if(n!==!1){const P=LL(n),T=fl(a.current);return T.addEventListener(P,v),()=>{T.removeEventListener(P,v)}}},[v,n]),M.cloneElement(t,x)}const zP=typeof eI({})=="function",qne=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),Vne=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),M9=(e,t=!1)=>{const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([o,u])=>{const a=e.getColorSchemeSelector(o);a.startsWith("@")?r[a]={":root":{colorScheme:u.palette?.mode}}:r[a.replace(/\s*&/,"")]={colorScheme:u.palette?.mode}});let n={html:qne(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...Vne(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const i=e.components?.MuiCssBaseline?.styleOverrides;return i&&(n=[n,i]),n},__="mui-ecs",Gne=e=>{const t=M9(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${__})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([n,i])=>{const o=e.getColorSchemeSelector(n);o.startsWith("@")?r[o]={[`:root:not(:has(.${__}))`]:{colorScheme:i.palette?.mode}}:r[o.replace(/\s*&/,"")]={[`&:not(:has(.${__}))`]:{colorScheme:i.palette?.mode}}}),t},Hne=eI(zP?({theme:e,enableColorScheme:t})=>M9(e,t):({theme:e})=>Gne(e));function Wne(e){const t=Kn({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return ze.jsxs(M.Fragment,{children:[zP&&ze.jsx(Hne,{enableColorScheme:n}),!zP&&!n&&ze.jsx("span",{className:__,style:{display:"none"}}),r]})}function R9(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Zne(e){const t=fl(e);return t.body===e?Ic(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function _v(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function DL(e){return parseInt(Ic(e).getComputedStyle(e).paddingRight,10)||0}function Kne(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function NL(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,u=>{const a=!o.includes(u),p=!Kne(u);a&&p&&_v(u,i)})}function Lw(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function Xne(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(Zne(n)){const u=R9(Ic(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${DL(n)+u}px`;const a=fl(n).querySelectorAll(".mui-fixed");[].forEach.call(a,p=>{r.push({value:p.style.paddingRight,property:"padding-right",el:p}),p.style.paddingRight=`${DL(p)+u}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=fl(n).body;else{const u=n.parentElement,a=Ic(n);o=u?.nodeName==="HTML"&&a.getComputedStyle(u).overflowY==="scroll"?u:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:u,property:a})=>{o?u.style.setProperty(a,o):u.style.removeProperty(a)})}}function Yne(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class Jne{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&_v(t.modalRef,!1);const i=Yne(r);NL(r,t.mount,t.modalRef,i,!0);const o=Lw(this.containers,u=>u.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=Lw(this.containers,o=>o.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=Xne(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=Lw(this.containers,u=>u.modals.includes(t)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&_v(t.modalRef,r),NL(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const u=o.modals[o.modals.length-1];u.modalRef&&_v(u.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const Qne=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function eie(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function tie(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function rie(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||tie(e))}function nie(e){const t=[],r=[];return Array.from(e.querySelectorAll(Qne)).forEach((n,i)=>{const o=eie(n);o===-1||!rie(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function iie(){return!0}function aie(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=nie,isEnabled:u=iie,open:a}=e,p=M.useRef(!1),d=M.useRef(null),m=M.useRef(null),v=M.useRef(null),w=M.useRef(null),x=M.useRef(!1),P=M.useRef(null),T=Ao(nd(t),P),O=M.useRef(null);M.useEffect(()=>{!a||!P.current||(x.current=!r)},[r,a]),M.useEffect(()=>{if(!a||!P.current)return;const F=fl(P.current);return P.current.contains(F.activeElement)||(P.current.hasAttribute("tabIndex")||P.current.setAttribute("tabIndex","-1"),x.current&&P.current.focus()),()=>{i||(v.current&&v.current.focus&&(p.current=!0,v.current.focus()),v.current=null)}},[a]),M.useEffect(()=>{if(!a||!P.current)return;const F=fl(P.current),D=Z=>{O.current=Z,!(n||!u()||Z.key!=="Tab")&&F.activeElement===P.current&&Z.shiftKey&&(p.current=!0,m.current&&m.current.focus())},q=()=>{const Z=P.current;if(Z===null)return;if(!F.hasFocus()||!u()||p.current){p.current=!1;return}if(Z.contains(F.activeElement)||n&&F.activeElement!==d.current&&F.activeElement!==m.current)return;if(F.activeElement!==w.current)w.current=null;else if(w.current!==null)return;if(!x.current)return;let Q=[];if((F.activeElement===d.current||F.activeElement===m.current)&&(Q=o(P.current)),Q.length>0){const Y=!!(O.current?.shiftKey&&O.current?.key==="Tab"),se=Q[0],W=Q[Q.length-1];typeof se!="string"&&typeof W!="string"&&(Y?W.focus():se.focus())}else Z.focus()};F.addEventListener("focusin",q),F.addEventListener("keydown",D,!0);const z=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&q()},50);return()=>{clearInterval(z),F.removeEventListener("focusin",q),F.removeEventListener("keydown",D,!0)}},[r,n,i,u,a,o]);const L=F=>{v.current===null&&(v.current=F.relatedTarget),x.current=!0,w.current=F.target;const D=t.props.onFocus;D&&D(F)},N=F=>{v.current===null&&(v.current=F.relatedTarget),x.current=!0};return ze.jsxs(M.Fragment,{children:[ze.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:d,"data-testid":"sentinelStart"}),M.cloneElement(t,{ref:T,onFocus:L}),ze.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:m,"data-testid":"sentinelEnd"})]})}function oie(e){return typeof e=="function"?e():e}function sie(e){return e?e.props.hasOwnProperty("in"):!1}const FL=()=>{},Tb=new Jne;function lie(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:u,children:a,onClose:p,open:d,rootRef:m}=e,v=M.useRef({}),w=M.useRef(null),x=M.useRef(null),P=Ao(x,m),[T,O]=M.useState(!d),L=sie(a);let N=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(N=!1);const F=()=>fl(w.current),D=()=>(v.current.modalRef=x.current,v.current.mount=w.current,v.current),q=()=>{Tb.mount(D(),{disableScrollLock:n}),x.current&&(x.current.scrollTop=0)},z=ec(()=>{const ue=oie(t)||F().body;Tb.add(D(),ue),x.current&&q()}),Z=()=>Tb.isTopModal(D()),Q=ec(ue=>{w.current=ue,ue&&(d&&Z()?q():x.current&&_v(x.current,N))}),Y=M.useCallback(()=>{Tb.remove(D(),N)},[N]);M.useEffect(()=>()=>{Y()},[Y]),M.useEffect(()=>{d?z():(!L||!i)&&Y()},[d,Y,L,i,z]);const se=ue=>ye=>{ue.onKeyDown?.(ye),!(ye.key!=="Escape"||ye.which===229||!Z())&&(r||(ye.stopPropagation(),p&&p(ye,"escapeKeyDown")))},W=ue=>ye=>{ue.onClick?.(ye),ye.target===ye.currentTarget&&p&&p(ye,"backdropClick")};return{getRootProps:(ue={})=>{const ye=K_(e);delete ye.onTransitionEnter,delete ye.onTransitionExited;const Se={...ye,...ue};return{role:"presentation",...Se,onKeyDown:se(Se),ref:P}},getBackdropProps:(ue={})=>{const ye=ue;return{"aria-hidden":!0,...ye,onClick:W(ye),open:d}},getTransitionProps:()=>{const ue=()=>{O(!1),o&&o()},ye=()=>{O(!0),u&&u(),i&&Y()};return{onEnter:uL(ue,a?.props.onEnter??FL),onExited:uL(ye,a?.props.onExited??FL)}},rootRef:P,portalRef:Q,isTopModal:Z,exited:T,hasTransition:L}}function uie(e){return qn("MuiModal",e)}jn("MuiModal",["root","hidden","backdrop"]);const cie=e=>{const{open:t,exited:r,classes:n}=e;return Vn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},uie,n)},fie=er("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(gi(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),hie=er(P9,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),gI=M.forwardRef(function(t,r){const n=Kn({name:"MuiModal",props:t}),{BackdropComponent:i=hie,BackdropProps:o,classes:u,className:a,closeAfterTransition:p=!1,children:d,container:m,component:v,components:w={},componentsProps:x={},disableAutoFocus:P=!1,disableEnforceFocus:T=!1,disableEscapeKeyDown:O=!1,disablePortal:L=!1,disableRestoreFocus:N=!1,disableScrollLock:F=!1,hideBackdrop:D=!1,keepMounted:q=!1,onClose:z,onTransitionEnter:Z,onTransitionExited:Q,open:Y,slotProps:se={},slots:W={},theme:G,...ae}=n,le={...n,closeAfterTransition:p,disableAutoFocus:P,disableEnforceFocus:T,disableEscapeKeyDown:O,disablePortal:L,disableRestoreFocus:N,disableScrollLock:F,hideBackdrop:D,keepMounted:q},{getRootProps:ue,getBackdropProps:ye,getTransitionProps:Se,portalRef:ge,isTopModal:xe,exited:Fe,hasTransition:He}=lie({...le,rootRef:r}),pe={...le,exited:Fe},_e=cie(pe),Ce={};if(d.props.tabIndex===void 0&&(Ce.tabIndex="-1"),He){const{onEnter:rt,onExited:Lt}=Se();Ce.onEnter=rt,Ce.onExited=Lt}const ke={slots:{root:w.Root,backdrop:w.Backdrop,...W},slotProps:{...x,...se}},[$e,ht]=Zn("root",{ref:r,elementType:fie,externalForwardedProps:{...ke,...ae,component:v},getSlotProps:ue,ownerState:pe,className:Br(a,_e?.root,!pe.open&&pe.exited&&_e?.hidden)}),[At,mt]=Zn("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:ke,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:rt=>ye({...rt,onClick:Lt=>{rt?.onClick&&rt.onClick(Lt)}}),className:Br(o?.className,_e?.backdrop),ownerState:pe});return!q&&!Y&&(!He||Fe)?null:ze.jsx(C9,{ref:ge,container:m,disablePortal:L,children:ze.jsxs($e,{...ht,children:[!D&&i?ze.jsx(At,{...mt}):null,ze.jsx(aie,{disableEnforceFocus:T,disableAutoFocus:P,disableRestoreFocus:N,isEnabled:xe,open:Y,children:M.cloneElement(d,Ce)})]})})});function die(e){return qn("MuiDialog",e)}const Dw=jn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),O9=M.createContext({}),pie=er(P9,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),mie=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:o}=e,u={root:["root"],container:["container",`scroll${an(r)}`],paper:["paper",`paperScroll${an(r)}`,`paperWidth${an(String(n))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Vn(u,die,t)},gie=er(gI,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),yie=er("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${an(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),vie=er(Lc,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${an(r.scroll)}`],t[`paperWidth${an(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(gi(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Dw.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${Dw.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Dw.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),bie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDialog"}),i=Sf(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":a,"aria-modal":p=!0,BackdropComponent:d,BackdropProps:m,children:v,className:w,disableEscapeKeyDown:x=!1,fullScreen:P=!1,fullWidth:T=!1,maxWidth:O="sm",onClick:L,onClose:N,open:F,PaperComponent:D=Lc,PaperProps:q={},scroll:z="paper",slots:Z={},slotProps:Q={},TransitionComponent:Y=jP,transitionDuration:se=o,TransitionProps:W,...G}=n,ae={...n,disableEscapeKeyDown:x,fullScreen:P,fullWidth:T,maxWidth:O,scroll:z},le=mie(ae),ue=M.useRef(),ye=Pt=>{ue.current=Pt.target===Pt.currentTarget},Se=Pt=>{L&&L(Pt),ue.current&&(ue.current=null,N&&N(Pt,"backdropClick"))},ge=xp(a),xe=M.useMemo(()=>({titleId:ge}),[ge]),Fe={transition:Y,...Z},He={transition:W,paper:q,backdrop:m,...Q},pe={slots:Fe,slotProps:He},[_e,Ce]=Zn("root",{elementType:gie,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:ae,className:Br(le.root,w),ref:r}),[ke,$e]=Zn("backdrop",{elementType:pie,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:ae}),[ht,At]=Zn("paper",{elementType:vie,shouldForwardComponentProp:!0,externalForwardedProps:pe,ownerState:ae,className:Br(le.paper,q.className)}),[mt,rt]=Zn("container",{elementType:yie,externalForwardedProps:pe,ownerState:ae,className:le.container}),[Lt,Tt]=Zn("transition",{elementType:jP,externalForwardedProps:pe,ownerState:ae,additionalProps:{appear:!0,in:F,timeout:se,role:"presentation"}});return ze.jsx(_e,{closeAfterTransition:!0,slots:{backdrop:ke},slotProps:{backdrop:{transitionDuration:se,as:d,...$e}},disableEscapeKeyDown:x,onClose:N,open:F,onClick:Se,...Ce,...G,children:ze.jsx(Lt,{...Tt,children:ze.jsx(mt,{onMouseDown:ye,...rt,children:ze.jsx(ht,{as:D,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":ge,"aria-modal":p,...At,children:ze.jsx(O9.Provider,{value:xe,children:v})})})})})});function _ie(e){return qn("MuiDialogActions",e)}jn("MuiDialogActions",["root","spacing"]);const xie=e=>{const{classes:t,disableSpacing:r}=e;return Vn({root:["root",!r&&"spacing"]},_ie,t)},wie=er("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Sie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...u}=n,a={...n,disableSpacing:o},p=xie(a);return ze.jsx(wie,{className:Br(p.root,i),ownerState:a,ref:r,...u})});function Eie(e){return qn("MuiDialogContent",e)}jn("MuiDialogContent",["root","dividers"]);function Cie(e){return qn("MuiDialogTitle",e)}const Aie=jn("MuiDialogTitle",["root"]),Pie=e=>{const{classes:t,dividers:r}=e;return Vn({root:["root",r&&"dividers"]},Eie,t)},Tie=er("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(gi(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Aie.root} + &`]:{paddingTop:0}}}]}))),Iie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...u}=n,a={...n,dividers:o},p=Pie(a);return ze.jsx(Tie,{className:Br(p.root,i),ownerState:a,ref:r,...u})});function Mie(e){return qn("MuiDialogContentText",e)}jn("MuiDialogContentText",["root"]);const Rie=e=>{const{classes:t}=e,n=Vn({root:["root"]},Mie,t);return{...t,...n}},Oie=er(qo,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),kie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDialogContentText"}),{children:i,className:o,...u}=n,a=Rie(u);return ze.jsx(Oie,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:u,className:Br(a.root,o),...n,classes:a})}),Lie=e=>{const{classes:t}=e;return Vn({root:["root"]},Cie,t)},Die=er(qo,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Nie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDialogTitle"}),{className:i,id:o,...u}=n,a=n,p=Lie(a),{titleId:d=o}=M.useContext(O9);return ze.jsx(Die,{component:"h2",className:Br(p.root,i),ownerState:a,ref:r,variant:"h6",id:o??d,...u})}),BL=jn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Fie(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=Ic(t);let u;if(t.fakeTransform)u=t.fakeTransform;else{const d=o.getComputedStyle(t);u=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let a=0,p=0;if(u&&u!=="none"&&typeof u=="string"){const d=u.split("(")[1].split(")")[0].split(",");a=parseInt(d[4],10),p=parseInt(d[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+p-n.top}px)`:`translateY(${o.innerHeight+p-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-p}px)`:`translateY(-${n.top+n.height-p}px)`}function Bie(e){return typeof e=="function"?e():e}function Ib(e,t,r){const n=Bie(r),i=Fie(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const k9=M.forwardRef(function(t,r){const n=Sf(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:a=!0,children:p,container:d,direction:m="down",easing:v=i,in:w,onEnter:x,onEntered:P,onEntering:T,onExit:O,onExited:L,onExiting:N,style:F,timeout:D=o,TransitionComponent:q=kc,...z}=t,Z=M.useRef(null),Q=Ao(nd(p),Z,r),Y=ge=>xe=>{ge&&(xe===void 0?ge(Z.current):ge(Z.current,xe))},se=Y((ge,xe)=>{Ib(m,ge,d),aI(ge),x&&x(ge,xe)}),W=Y((ge,xe)=>{const Fe=dg({timeout:D,style:F,easing:v},{mode:"enter"});ge.style.webkitTransition=n.transitions.create("-webkit-transform",{...Fe}),ge.style.transition=n.transitions.create("transform",{...Fe}),ge.style.webkitTransform="none",ge.style.transform="none",T&&T(ge,xe)}),G=Y(P),ae=Y(N),le=Y(ge=>{const xe=dg({timeout:D,style:F,easing:v},{mode:"exit"});ge.style.webkitTransition=n.transitions.create("-webkit-transform",xe),ge.style.transition=n.transitions.create("transform",xe),Ib(m,ge,d),O&&O(ge)}),ue=Y(ge=>{ge.style.webkitTransition="",ge.style.transition="",L&&L(ge)}),ye=ge=>{u&&u(Z.current,ge)},Se=M.useCallback(()=>{Z.current&&Ib(m,Z.current,d)},[m,d]);return M.useEffect(()=>{if(w||m==="down"||m==="right")return;const ge=tI(()=>{Z.current&&Ib(m,Z.current,d)}),xe=Ic(Z.current);return xe.addEventListener("resize",ge),()=>{ge.clear(),xe.removeEventListener("resize",ge)}},[m,w,d]),M.useEffect(()=>{w||Se()},[w,Se]),ze.jsx(q,{nodeRef:Z,onEnter:se,onEntered:G,onEntering:W,onExit:le,onExited:ue,onExiting:ae,addEndListener:ye,appear:a,in:w,timeout:D,...z,children:(ge,{ownerState:xe,...Fe})=>M.cloneElement(p,{ref:Q,style:{visibility:ge==="exited"&&!w?"hidden":void 0,...F,...p.props.style},...Fe})})});function jie(e){return qn("MuiDrawer",e)}jn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const L9=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},zie=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${an(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${an(r)}`,n!=="temporary"&&`paperAnchorDocked${an(r)}`]};return Vn(i,jie,t)},$ie=er(gI,{name:"MuiDrawer",slot:"Root",overridesResolver:L9})(gi(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Uie=er("div",{shouldForwardProp:hl,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:L9})({flex:"0 0 auto"}),qie=er(Lc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${an(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${an(r.anchor)}`]]}})(gi(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),D9={left:"right",right:"left",top:"down",bottom:"up"};function Vie(e){return["left","right"].includes(e)}function Gie({direction:e},t){return e==="rtl"&&Vie(t)?D9[t]:t}const Hie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiDrawer"}),i=Sf(),o=Px(),u={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:p,children:d,className:m,elevation:v=16,hideBackdrop:w=!1,ModalProps:{BackdropProps:x,...P}={},onClose:T,open:O=!1,PaperProps:L={},SlideProps:N,TransitionComponent:F,transitionDuration:D=u,variant:q="temporary",slots:z={},slotProps:Z={},...Q}=n,Y=M.useRef(!1);M.useEffect(()=>{Y.current=!0},[]);const se=Gie({direction:o?"rtl":"ltr"},a),G={...n,anchor:a,elevation:v,open:O,variant:q,...Q},ae=zie(G),le={slots:{transition:F,...z},slotProps:{paper:L,transition:N,...Z,backdrop:rI(Z.backdrop||{...p,...x},{transitionDuration:D})}},[ue,ye]=Zn("root",{ref:r,elementType:$ie,className:Br(ae.root,ae.modal,m),shouldForwardComponentProp:!0,ownerState:G,externalForwardedProps:{...le,...Q,...P},additionalProps:{open:O,onClose:T,hideBackdrop:w,slots:{backdrop:le.slots.backdrop},slotProps:{backdrop:le.slotProps.backdrop}}}),[Se,ge]=Zn("paper",{elementType:qie,shouldForwardComponentProp:!0,className:Br(ae.paper,L.className),ownerState:G,externalForwardedProps:le,additionalProps:{elevation:q==="temporary"?v:0,square:!0,...q==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[xe,Fe]=Zn("docked",{elementType:Uie,ref:r,className:Br(ae.root,ae.docked,m),ownerState:G,externalForwardedProps:le,additionalProps:Q}),[He,pe]=Zn("transition",{elementType:k9,ownerState:G,externalForwardedProps:le,additionalProps:{in:O,direction:D9[se],timeout:D,appear:Y.current}}),_e=ze.jsx(Se,{...ge,children:d});if(q==="permanent")return ze.jsx(xe,{...Fe,children:_e});const Ce=ze.jsx(He,{...pe,children:_e});return q==="persistent"?ze.jsx(xe,{...Fe,children:Ce}):ze.jsx(ue,{...ye,children:Ce})}),Wie=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:o,hiddenLabel:u,multiline:a}=e,p={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${an(o)}`,u&&"hiddenLabel",a&&"multiline"],input:["input"]},d=Vn(p,Jre,t);return{...t,...d}},Zie=er(Bx,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Nx(e,t),!r.disableUnderline&&t.underline]}})(gi(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${kd.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${kd.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:u})=>!u.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kd.disabled}, .${kd.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${kd.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Fl()).map(([u])=>({props:{disableUnderline:!1,color:u},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[u]?.main}`}}})),{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:12}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:12}},{props:({ownerState:u})=>u.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:u,size:a})=>u.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Kie=er(jx,{name:"MuiFilledInput",slot:"Input",overridesResolver:Fx})(gi(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),yI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,hiddenLabel:p,inputComponent:d="input",multiline:m=!1,slotProps:v,slots:w={},type:x="text",...P}=n,T={...n,disableUnderline:i,fullWidth:a,inputComponent:d,multiline:m,type:x},O=Wie(n),L={root:{ownerState:T},input:{ownerState:T}},N=v??u?is(L,v??u):L,F=w.root??o.Root??Zie,D=w.input??o.Input??Kie;return ze.jsx(dI,{slots:{root:F,input:D},slotProps:N,fullWidth:a,inputComponent:d,multiline:m,ref:r,type:x,...P,classes:O})});yI.muiName="Input";function Xie(e){return qn("MuiFormControl",e)}jn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Yie=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${an(r)}`,n&&"fullWidth"]};return Vn(i,Xie,t)},Jie=er("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${an(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Qie=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiFormControl"}),{children:i,className:o,color:u="primary",component:a="div",disabled:p=!1,error:d=!1,focused:m,fullWidth:v=!1,hiddenLabel:w=!1,margin:x="none",required:P=!1,size:T="medium",variant:O="outlined",...L}=n,N={...n,color:u,component:a,disabled:p,error:d,fullWidth:v,hiddenLabel:w,margin:x,required:P,size:T,variant:O},F=Yie(N),[D,q]=M.useState(()=>{let ue=!1;return i&&M.Children.forEach(i,ye=>{if(!v_(ye,["Input","Select"]))return;const Se=v_(ye,["Select"])?ye.props.input:ye;Se&&Wre(Se.props)&&(ue=!0)}),ue}),[z,Z]=M.useState(()=>{let ue=!1;return i&&M.Children.forEach(i,ye=>{v_(ye,["Input","Select"])&&(Q_(ye.props,!0)||Q_(ye.props.inputProps,!0))&&(ue=!0)}),ue}),[Q,Y]=M.useState(!1);p&&Q&&Y(!1);const se=m!==void 0&&!p?m:Q;let W;M.useRef(!1);const G=M.useCallback(()=>{Z(!0)},[]),ae=M.useCallback(()=>{Z(!1)},[]),le=M.useMemo(()=>({adornedStart:D,setAdornedStart:q,color:u,disabled:p,error:d,filled:z,focused:se,fullWidth:v,hiddenLabel:w,size:T,onBlur:()=>{Y(!1)},onFocus:()=>{Y(!0)},onEmpty:ae,onFilled:G,registerEffect:W,required:P,variant:O}),[D,u,p,d,z,se,v,w,W,ae,G,P,T,O]);return ze.jsx(Dx.Provider,{value:le,children:ze.jsx(Jie,{as:a,ownerState:N,className:Br(F.root,o),ref:r,...L,children:i})})});function eae(e){return qn("MuiFormHelperText",e)}const jL=jn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var zL;const tae=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:u,focused:a,required:p}=e,d={root:["root",i&&"disabled",o&&"error",n&&`size${an(n)}`,r&&"contained",a&&"focused",u&&"filled",p&&"required"]};return Vn(d,eae,t)},rae=er("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${an(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(gi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${jL.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${jL.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),nae=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:u="p",disabled:a,error:p,filled:d,focused:m,margin:v,required:w,variant:x,...P}=n,T=id(),O=Cg({props:n,muiFormControl:T,states:["variant","size","disabled","error","filled","focused","required"]}),L={...n,component:u,contained:O.variant==="filled"||O.variant==="outlined",variant:O.variant,size:O.size,disabled:O.disabled,error:O.error,filled:O.filled,focused:O.focused,required:O.required};delete L.ownerState;const N=tae(L);return ze.jsx(rae,{as:u,className:Br(N.root,o),ref:r,...P,ownerState:L,children:i===" "?zL||(zL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function iae(e){return qn("MuiFormLabel",e)}const xv=jn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),aae=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:u,required:a}=e,p={root:["root",`color${an(r)}`,i&&"disabled",o&&"error",u&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return Vn(p,iae,t)},oae=er("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(gi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Fl()).map(([t])=>({props:{color:t},style:{[`&.${xv.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${xv.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${xv.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),sae=er("span",{name:"MuiFormLabel",slot:"Asterisk"})(gi(({theme:e})=>({[`&.${xv.error}`]:{color:(e.vars||e).palette.error.main}}))),lae=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiFormLabel"}),{children:i,className:o,color:u,component:a="label",disabled:p,error:d,filled:m,focused:v,required:w,...x}=n,P=id(),T=Cg({props:n,muiFormControl:P,states:["color","required","focused","disabled","error","filled"]}),O={...n,color:T.color||"primary",component:a,disabled:T.disabled,error:T.error,filled:T.filled,focused:T.focused,required:T.required},L=aae(O);return ze.jsxs(oae,{as:a,ownerState:O,className:Br(L.root,o),ref:r,...x,children:[i,T.required&&ze.jsxs(sae,{ownerState:O,"aria-hidden":!0,className:L.asterisk,children:["","*"]})]})});function $P(e){return`scale(${e}, ${e**2})`}const uae={entering:{opacity:1,transform:$P(1)},entered:{opacity:1,transform:"none"}},Nw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),t0=M.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:u,in:a,onEnter:p,onEntered:d,onEntering:m,onExit:v,onExited:w,onExiting:x,style:P,timeout:T="auto",TransitionComponent:O=kc,...L}=t,N=Qd(),F=M.useRef(),D=Sf(),q=M.useRef(null),z=Ao(q,nd(o),r),Z=ue=>ye=>{if(ue){const Se=q.current;ye===void 0?ue(Se):ue(Se,ye)}},Q=Z(m),Y=Z((ue,ye)=>{aI(ue);const{duration:Se,delay:ge,easing:xe}=dg({style:P,timeout:T,easing:u},{mode:"enter"});let Fe;T==="auto"?(Fe=D.transitions.getAutoHeightDuration(ue.clientHeight),F.current=Fe):Fe=Se,ue.style.transition=[D.transitions.create("opacity",{duration:Fe,delay:ge}),D.transitions.create("transform",{duration:Nw?Fe:Fe*.666,delay:ge,easing:xe})].join(","),p&&p(ue,ye)}),se=Z(d),W=Z(x),G=Z(ue=>{const{duration:ye,delay:Se,easing:ge}=dg({style:P,timeout:T,easing:u},{mode:"exit"});let xe;T==="auto"?(xe=D.transitions.getAutoHeightDuration(ue.clientHeight),F.current=xe):xe=ye,ue.style.transition=[D.transitions.create("opacity",{duration:xe,delay:Se}),D.transitions.create("transform",{duration:Nw?xe:xe*.666,delay:Nw?Se:Se||xe*.333,easing:ge})].join(","),ue.style.opacity=0,ue.style.transform=$P(.75),v&&v(ue)}),ae=Z(w),le=ue=>{T==="auto"&&N.start(F.current||0,ue),n&&n(q.current,ue)};return ze.jsx(O,{appear:i,in:a,nodeRef:q,onEnter:Y,onEntered:se,onEntering:Q,onExit:G,onExited:ae,onExiting:W,addEndListener:le,timeout:T==="auto"?null:T,...L,children:(ue,{ownerState:ye,...Se})=>M.cloneElement(o,{style:{opacity:0,transform:$P(.75),visibility:ue==="exited"&&!a?"hidden":void 0,...uae[ue],...P,...o.props.style},ref:z,...Se})})});t0&&(t0.muiSupportAuto=!0);const cae=e=>{const{classes:t,disableUnderline:r}=e,i=Vn({root:["root",!r&&"underline"],input:["input"]},Xre,t);return{...t,...i}},fae=er(Bx,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Nx(e,t),!r.disableUnderline&&t.underline]}})(gi(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Py.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Py.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Py.disabled}, .${Py.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Py.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Fl()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),hae=er(jx,{name:"MuiInput",slot:"Input",overridesResolver:Fx})({}),vI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,inputComponent:p="input",multiline:d=!1,slotProps:m,slots:v={},type:w="text",...x}=n,P=cae(n),O={root:{ownerState:{disableUnderline:i}}},L=m??u?is(m??u,O):O,N=v.root??o.Root??fae,F=v.input??o.Input??hae;return ze.jsx(dI,{slots:{root:N,input:F},slotProps:L,fullWidth:a,inputComponent:p,multiline:d,ref:r,type:w,...x,classes:P})});vI.muiName="Input";function dae(e){return qn("MuiInputAdornment",e)}const $L=jn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var UL;const pae=(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${an(r.position)}`],r.disablePointerEvents===!0&&t.disablePointerEvents,t[r.variant]]},mae=e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:n,position:i,size:o,variant:u}=e,a={root:["root",r&&"disablePointerEvents",i&&`position${an(i)}`,u,n&&"hiddenLabel",o&&`size${an(o)}`]};return Vn(a,dae,t)},gae=er("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:pae})(gi(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${$L.positionStart}&:not(.${$L.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),x_=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiInputAdornment"}),{children:i,className:o,component:u="div",disablePointerEvents:a=!1,disableTypography:p=!1,position:d,variant:m,...v}=n,w=id()||{};let x=m;m&&w.variant,w&&!x&&(x=w.variant);const P={...n,hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:a,position:d,variant:x},T=mae(P);return ze.jsx(Dx.Provider,{value:null,children:ze.jsx(gae,{as:u,ownerState:P,className:Br(T.root,o),ref:r,...v,children:typeof i=="string"&&!p?ze.jsx(qo,{color:"textSecondary",children:i}):ze.jsxs(M.Fragment,{children:[d==="start"?UL||(UL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):null,i]})})})});function yae(e){return qn("MuiInputLabel",e)}jn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const vae=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:u,required:a}=e,p={root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n&&n!=="medium"&&`size${an(n)}`,u],asterisk:[a&&"asterisk"]},d=Vn(p,yae,t);return{...t,...d}},bae=er(lae,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${xv.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(gi(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),_ae=M.forwardRef(function(t,r){const n=Kn({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:o,shrink:u,variant:a,className:p,...d}=n,m=id();let v=u;typeof v>"u"&&m&&(v=m.filled||m.focused||m.adornedStart);const w=Cg({props:n,muiFormControl:m,states:["size","variant","required","focused"]}),x={...n,disableAnimation:i,formControl:m,shrink:v,size:w.size,variant:w.variant,required:w.required,focused:w.focused},P=vae(x);return ze.jsx(bae,{"data-shrink":v,ref:r,className:Br(P.root,p),...d,ownerState:x,classes:P})}),oh=M.createContext({});function xae(e){return qn("MuiList",e)}jn("MuiList",["root","padding","dense","subheader"]);const wae=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return Vn({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},xae,t)},Sae=er("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),M0=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiList"}),{children:i,className:o,component:u="ul",dense:a=!1,disablePadding:p=!1,subheader:d,...m}=n,v=M.useMemo(()=>({dense:a}),[a]),w={...n,component:u,dense:a,disablePadding:p},x=wae(w);return ze.jsx(oh.Provider,{value:v,children:ze.jsxs(Sae,{as:u,className:Br(x.root,o),ref:r,ownerState:w,...m,children:[d,i]})})});function Eae(e){return qn("MuiListItem",e)}jn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const Cae=jn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Aae(e){return qn("MuiListItemSecondaryAction",e)}jn("MuiListItemSecondaryAction",["root","disableGutters"]);const Pae=e=>{const{disableGutters:t,classes:r}=e;return Vn({root:["root",t&&"disableGutters"]},Aae,r)},Tae=er("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),N9=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...o}=n,u=M.useContext(oh),a={...n,disableGutters:u.disableGutters},p=Pae(a);return ze.jsx(Tae,{className:Br(p.root,i),ownerState:a,ref:r,...o})});N9.muiName="ListItemSecondaryAction";const Iae=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Mae=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:o,divider:u,hasSecondaryAction:a}=e;return Vn({root:["root",n&&"dense",!i&&"gutters",!o&&"padding",u&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Eae,r)},Rae=er("div",{name:"MuiListItem",slot:"Root",overridesResolver:Iae})(gi(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${Cae.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Oae=er("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),bI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiListItem"}),{alignItems:i="center",children:o,className:u,component:a,components:p={},componentsProps:d={},ContainerComponent:m="li",ContainerProps:{className:v,...w}={},dense:x=!1,disableGutters:P=!1,disablePadding:T=!1,divider:O=!1,secondaryAction:L,slotProps:N={},slots:F={},...D}=n,q=M.useContext(oh),z=M.useMemo(()=>({dense:x||q.dense||!1,alignItems:i,disableGutters:P}),[i,q.dense,x,P]),Z=M.useRef(null),Q=M.Children.toArray(o),Y=Q.length&&v_(Q[Q.length-1],["ListItemSecondaryAction"]),se={...n,alignItems:i,dense:z.dense,disableGutters:P,disablePadding:T,divider:O,hasSecondaryAction:Y},W=Mae(se),G=Ao(Z,r),ae=F.root||p.Root||Rae,le=N.root||d.root||{},ue={className:Br(W.root,le.className,u),...D};let ye=a||"li";return Y?(ye=!ue.component&&!a?"div":ye,m==="li"&&(ye==="li"?ye="div":ue.component==="li"&&(ue.component="div")),ze.jsx(oh.Provider,{value:z,children:ze.jsxs(Oae,{as:m,className:Br(W.container,v),ref:G,ownerState:se,...w,children:[ze.jsx(ae,{...le,...!pg(ae)&&{as:ye,ownerState:{...se,...le.ownerState}},...ue,children:Q}),Q.pop()]})})):ze.jsx(oh.Provider,{value:z,children:ze.jsxs(ae,{...le,as:ye,ref:G,...!pg(ae)&&{ownerState:{...se,...le.ownerState}},...ue,children:[Q,L&&ze.jsx(N9,{children:L})]})})});function kae(e){return qn("MuiListItemIcon",e)}const qL=jn("MuiListItemIcon",["root","alignItemsFlexStart"]),Lae=e=>{const{alignItems:t,classes:r}=e;return Vn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},kae,r)},Dae=er("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(gi(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),R0=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiListItemIcon"}),{className:i,...o}=n,u=M.useContext(oh),a={...n,alignItems:u.alignItems},p=Lae(a);return ze.jsx(Dae,{className:Br(p.root,i),ownerState:a,ref:r,...o})});function Nae(e){return qn("MuiListItemText",e)}const Gm=jn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Fae=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return Vn({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Nae,t)},Bae=er("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${Gm.primary}`]:t.primary},{[`& .${Gm.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${yL.root}:where(& .${Gm.primary})`]:{display:"block"},[`.${yL.root}:where(& .${Gm.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),jae=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:u=!1,inset:a=!1,primary:p,primaryTypographyProps:d,secondary:m,secondaryTypographyProps:v,slots:w={},slotProps:x={},...P}=n,{dense:T}=M.useContext(oh);let O=p??i,L=m;const N={...n,disableTypography:u,inset:a,primary:!!O,secondary:!!L,dense:T},F=Fae(N),D={slots:w,slotProps:{primary:d,secondary:v,...x}},[q,z]=Zn("root",{className:Br(F.root,o),elementType:Bae,externalForwardedProps:{...D,...P},ownerState:N,ref:r}),[Z,Q]=Zn("primary",{className:F.primary,elementType:qo,externalForwardedProps:D,ownerState:N}),[Y,se]=Zn("secondary",{className:F.secondary,elementType:qo,externalForwardedProps:D,ownerState:N});return O!=null&&O.type!==qo&&!u&&(O=ze.jsx(Z,{variant:T?"body2":"body1",component:Q?.variant?void 0:"span",...Q,children:O})),L!=null&&L.type!==qo&&!u&&(L=ze.jsx(Y,{variant:"body2",color:"textSecondary",...se,children:L})),ze.jsxs(q,{...z,children:[O,L]})});function Fw(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function VL(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function F9(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function Ty(e,t,r,n,i,o){let u=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(u)return!1;u=!0}const p=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!F9(a,o)||p)a=i(e,a,r);else return a.focus(),!0}return!1}const B9=M.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:u,className:a,disabledItemsFocusable:p=!1,disableListWrap:d=!1,onKeyDown:m,variant:v="selectedMenu",...w}=t,x=M.useRef(null),P=M.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Nu(()=>{i&&x.current.focus()},[i]),M.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(F,{direction:D})=>{const q=!x.current.style.width;if(F.clientHeight<x.current.clientHeight&&q){const z=`${R9(Ic(F))}px`;x.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=z,x.current.style.width=`calc(100% + ${z})`}return x.current}}),[]);const T=F=>{const D=x.current,q=F.key;if(F.ctrlKey||F.metaKey||F.altKey){m&&m(F);return}const Z=fl(D).activeElement;if(q==="ArrowDown")F.preventDefault(),Ty(D,Z,d,p,Fw);else if(q==="ArrowUp")F.preventDefault(),Ty(D,Z,d,p,VL);else if(q==="Home")F.preventDefault(),Ty(D,null,d,p,Fw);else if(q==="End")F.preventDefault(),Ty(D,null,d,p,VL);else if(q.length===1){const Q=P.current,Y=q.toLowerCase(),se=performance.now();Q.keys.length>0&&(se-Q.lastTime>500?(Q.keys=[],Q.repeating=!0,Q.previousKeyMatched=!0):Q.repeating&&Y!==Q.keys[0]&&(Q.repeating=!1)),Q.lastTime=se,Q.keys.push(Y);const W=Z&&!Q.repeating&&F9(Z,Q);Q.previousKeyMatched&&(W||Ty(D,Z,!1,p,Fw,Q))?F.preventDefault():Q.previousKeyMatched=!1}m&&m(F)},O=Ao(x,r);let L=-1;M.Children.forEach(u,(F,D)=>{if(!M.isValidElement(F)){L===D&&(L+=1,L>=u.length&&(L=-1));return}F.props.disabled||(v==="selectedMenu"&&F.props.selected||L===-1)&&(L=D),L===D&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(L+=1,L>=u.length&&(L=-1))});const N=M.Children.map(u,(F,D)=>{if(D===L){const q={};return o&&(q.autoFocus=!0),F.props.tabIndex===void 0&&v==="selectedMenu"&&(q.tabIndex=0),M.cloneElement(F,q)}return F});return ze.jsx(M0,{role:"menu",ref:O,className:a,onKeyDown:T,tabIndex:i?0:-1,...w,children:N})});function zae(e){return qn("MuiPopover",e)}jn("MuiPopover",["root","paper"]);function GL(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function HL(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function WL(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Mb(e){return typeof e=="function"?e():e}const $ae=e=>{const{classes:t}=e;return Vn({root:["root"],paper:["paper"]},zae,t)},Uae=er(gI,{name:"MuiPopover",slot:"Root"})({}),j9=er(Lc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),z9=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:p="anchorEl",children:d,className:m,container:v,elevation:w=8,marginThreshold:x=16,open:P,PaperProps:T={},slots:O={},slotProps:L={},transformOrigin:N={vertical:"top",horizontal:"left"},TransitionComponent:F,transitionDuration:D="auto",TransitionProps:q={},disableScrollLock:z=!1,...Z}=n,Q=M.useRef(),Y={...n,anchorOrigin:u,anchorReference:p,elevation:w,marginThreshold:x,transformOrigin:N,TransitionComponent:F,transitionDuration:D,TransitionProps:q},se=$ae(Y),W=M.useCallback(()=>{if(p==="anchorPosition")return a;const rt=Mb(o),Tt=(rt&&rt.nodeType===1?rt:fl(Q.current).body).getBoundingClientRect();return{top:Tt.top+GL(Tt,u.vertical),left:Tt.left+HL(Tt,u.horizontal)}},[o,u.horizontal,u.vertical,a,p]),G=M.useCallback(rt=>({vertical:GL(rt,N.vertical),horizontal:HL(rt,N.horizontal)}),[N.horizontal,N.vertical]),ae=M.useCallback(rt=>{const Lt={width:rt.offsetWidth,height:rt.offsetHeight},Tt=G(Lt);if(p==="none")return{top:null,left:null,transformOrigin:WL(Tt)};const Pt=W();let ut=Pt.top-Tt.vertical,Le=Pt.left-Tt.horizontal;const sr=ut+Lt.height,lr=Le+Lt.width,dr=Ic(Mb(o)),Yt=dr.innerHeight-x,Ve=dr.innerWidth-x;if(x!==null&&ut<x){const tt=ut-x;ut-=tt,Tt.vertical+=tt}else if(x!==null&&sr>Yt){const tt=sr-Yt;ut-=tt,Tt.vertical+=tt}if(x!==null&&Le<x){const tt=Le-x;Le-=tt,Tt.horizontal+=tt}else if(lr>Ve){const tt=lr-Ve;Le-=tt,Tt.horizontal+=tt}return{top:`${Math.round(ut)}px`,left:`${Math.round(Le)}px`,transformOrigin:WL(Tt)}},[o,p,W,G,x]),[le,ue]=M.useState(P),ye=M.useCallback(()=>{const rt=Q.current;if(!rt)return;const Lt=ae(rt);Lt.top!==null&&rt.style.setProperty("top",Lt.top),Lt.left!==null&&(rt.style.left=Lt.left),rt.style.transformOrigin=Lt.transformOrigin,ue(!0)},[ae]);M.useEffect(()=>(z&&window.addEventListener("scroll",ye),()=>window.removeEventListener("scroll",ye)),[o,z,ye]);const Se=()=>{ye()},ge=()=>{ue(!1)};M.useEffect(()=>{P&&ye()}),M.useImperativeHandle(i,()=>P?{updatePosition:()=>{ye()}}:null,[P,ye]),M.useEffect(()=>{if(!P)return;const rt=tI(()=>{ye()}),Lt=Ic(Mb(o));return Lt.addEventListener("resize",rt),()=>{rt.clear(),Lt.removeEventListener("resize",rt)}},[o,P,ye]);let xe=D;const Fe={slots:{transition:F,...O},slotProps:{transition:q,paper:T,...L}},[He,pe]=Zn("transition",{elementType:t0,externalForwardedProps:Fe,ownerState:Y,getSlotProps:rt=>({...rt,onEntering:(Lt,Tt)=>{rt.onEntering?.(Lt,Tt),Se()},onExited:Lt=>{rt.onExited?.(Lt),ge()}}),additionalProps:{appear:!0,in:P}});D==="auto"&&!He.muiSupportAuto&&(xe=void 0);const _e=v||(o?fl(Mb(o)).body:void 0),[Ce,{slots:ke,slotProps:$e,...ht}]=Zn("root",{ref:r,elementType:Uae,externalForwardedProps:{...Fe,...Z},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:O.backdrop},slotProps:{backdrop:rI(typeof L.backdrop=="function"?L.backdrop(Y):L.backdrop,{invisible:!0})},container:_e,open:P},ownerState:Y,className:Br(se.root,m)}),[At,mt]=Zn("paper",{ref:Q,className:se.paper,elementType:j9,externalForwardedProps:Fe,shouldForwardComponentProp:!0,additionalProps:{elevation:w,style:le?void 0:{opacity:0}},ownerState:Y});return ze.jsx(Ce,{...ht,...!pg(Ce)&&{slots:ke,slotProps:$e,disableScrollLock:z},children:ze.jsx(He,{...pe,timeout:xe,children:ze.jsx(At,{...mt,children:d})})})});function qae(e){return qn("MuiMenu",e)}jn("MuiMenu",["root","paper","list"]);const Vae={vertical:"top",horizontal:"right"},Gae={vertical:"top",horizontal:"left"},Hae=e=>{const{classes:t}=e;return Vn({root:["root"],paper:["paper"],list:["list"]},qae,t)},Wae=er(z9,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),Zae=er(j9,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Kae=er(B9,{name:"MuiMenu",slot:"List"})({outline:0}),_I=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:u,disableAutoFocusItem:a=!1,MenuListProps:p={},onClose:d,open:m,PaperProps:v={},PopoverClasses:w,transitionDuration:x="auto",TransitionProps:{onEntering:P,...T}={},variant:O="selectedMenu",slots:L={},slotProps:N={},...F}=n,D=Px(),q={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:p,onEntering:P,PaperProps:v,transitionDuration:x,TransitionProps:T,variant:O},z=Hae(q),Z=i&&!a&&m,Q=M.useRef(null),Y=(xe,Fe)=>{Q.current&&Q.current.adjustStyleForScrollbar(xe,{direction:D?"rtl":"ltr"}),P&&P(xe,Fe)},se=xe=>{xe.key==="Tab"&&(xe.preventDefault(),d&&d(xe,"tabKeyDown"))};let W=-1;M.Children.map(o,(xe,Fe)=>{M.isValidElement(xe)&&(xe.props.disabled||(O==="selectedMenu"&&xe.props.selected||W===-1)&&(W=Fe))});const G={slots:L,slotProps:{list:p,transition:T,paper:v,...N}},ae=E9({elementType:L.root,externalSlotProps:N.root,ownerState:q,className:[z.root,u]}),[le,ue]=Zn("paper",{className:z.paper,elementType:Zae,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:q}),[ye,Se]=Zn("list",{className:Br(z.list,p.className),elementType:Kae,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:xe=>({...xe,onKeyDown:Fe=>{se(Fe),xe.onKeyDown?.(Fe)}}),ownerState:q}),ge=typeof G.slotProps.transition=="function"?G.slotProps.transition(q):G.slotProps.transition;return ze.jsx(Wae,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:D?"right":"left"},transformOrigin:D?Vae:Gae,slots:{root:L.root,paper:le,backdrop:L.backdrop,...L.transition&&{transition:L.transition}},slotProps:{root:ae,paper:ue,backdrop:typeof N.backdrop=="function"?N.backdrop(q):N.backdrop,transition:{...ge,onEntering:(...xe)=>{Y(...xe),ge?.onEntering?.(...xe)}}},open:m,ref:r,transitionDuration:x,ownerState:q,...F,classes:w,children:ze.jsx(ye,{actions:Q,autoFocus:i&&(W===-1||a),autoFocusItem:Z,variant:O,...Se,children:o})})});function Xae(e){return qn("MuiMenuItem",e)}const Iy=jn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Yae=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Jae=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:u}=e,p=Vn({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},Xae,u);return{...u,...p}},Qae=er(kx,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Yae})(gi(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Iy.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Iy.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Iy.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Iy.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Iy.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${BL.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${BL.inset}`]:{marginLeft:52},[`& .${Gm.root}`]:{marginTop:0,marginBottom:0},[`& .${Gm.inset}`]:{paddingLeft:36},[`& .${qL.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${qL.root} svg`]:{fontSize:"1.25rem"}}}]}))),xI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:u=!1,divider:a=!1,disableGutters:p=!1,focusVisibleClassName:d,role:m="menuitem",tabIndex:v,className:w,...x}=n,P=M.useContext(oh),T=M.useMemo(()=>({dense:u||P.dense||!1,disableGutters:p}),[P.dense,u,p]),O=M.useRef(null);Nu(()=>{i&&O.current&&O.current.focus()},[i]);const L={...n,dense:T.dense,divider:a,disableGutters:p},N=Jae(n),F=Ao(O,r);let D;return n.disabled||(D=v!==void 0?v:-1),ze.jsx(oh.Provider,{value:T,children:ze.jsx(Qae,{ref:F,role:m,tabIndex:D,component:o,focusVisibleClassName:Br(N.focusVisible,d),className:Br(N.root,w),...x,ownerState:L,classes:N})})});function eoe(e){return qn("MuiNativeSelect",e)}const wI=jn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),toe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${an(r)}`,o&&"iconOpen",n&&"disabled"]};return Vn(a,eoe,t)},$9=er("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${wI.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),roe=er($9,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:hl,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${wI.multiple}`]:t.multiple}]}})({}),U9=er("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${wI.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),noe=er(U9,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${an(r.variant)}`],r.open&&t.iconOpen]}})({}),ioe=M.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:u,inputRef:a,variant:p="standard",...d}=t,m={...t,disabled:i,variant:p,error:o},v=toe(m);return ze.jsxs(M.Fragment,{children:[ze.jsx(roe,{ownerState:m,className:Br(v.select,n),disabled:i,ref:a||r,...d}),t.multiple?null:ze.jsx(noe,{as:u,ownerState:m,className:v.icon})]})});var ZL;const aoe=er("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:hl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ooe=er("legend",{name:"MuiNotchedOutlined",shouldForwardProp:hl})(gi(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function soe(e){const{children:t,classes:r,className:n,label:i,notched:o,...u}=e,a=i!=null&&i!=="",p={...e,notched:o,withLabel:a};return ze.jsx(aoe,{"aria-hidden":!0,className:n,ownerState:p,...u,children:ze.jsx(ooe,{ownerState:p,children:a?ze.jsx("span",{children:i}):ZL||(ZL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const loe=e=>{const{classes:t}=e,n=Vn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Yre,t);return{...t,...n}},uoe=er(Bx,{shouldForwardProp:e=>hl(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Nx})(gi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${af.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${af.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${af.focused} .${af.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Fl()).map(([r])=>({props:{color:r},style:{[`&.${af.focused} .${af.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${af.error} .${af.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${af.disabled} .${af.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),coe=er(soe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(gi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),foe=er(jx,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Fx})(gi(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),SI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:u="input",label:a,multiline:p=!1,notched:d,slots:m={},slotProps:v={},type:w="text",...x}=n,P=loe(n),T=id(),O=Cg({props:n,muiFormControl:T,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),L={...n,color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:T,fullWidth:o,hiddenLabel:O.hiddenLabel,multiline:p,size:O.size,type:w},N=m.root??i.Root??uoe,F=m.input??i.Input??foe,[D,q]=Zn("notchedOutline",{elementType:coe,className:P.notchedOutline,shouldForwardComponentProp:!0,ownerState:L,externalForwardedProps:{slots:m,slotProps:v},additionalProps:{label:a!=null&&a!==""&&O.required?ze.jsxs(M.Fragment,{children:[a,"","*"]}):a}});return ze.jsx(dI,{slots:{root:N,input:F},slotProps:v,renderSuffix:z=>ze.jsx(D,{...q,notched:typeof d<"u"?d:!!(z.startAdornment||z.filled||z.focused)}),fullWidth:o,inputComponent:u,multiline:p,ref:r,type:w,...x,classes:{...P,notchedOutline:null}})});SI.muiName="Input";function q9(e){return qn("MuiSelect",e)}const My=jn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var KL;const hoe=er($9,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${My.select}`]:t.select},{[`&.${My.select}`]:t[r.variant]},{[`&.${My.error}`]:t.error},{[`&.${My.multiple}`]:t.multiple}]}})({[`&.${My.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),doe=er(U9,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${an(r.variant)}`],r.open&&t.iconOpen]}})({}),poe=er("input",{shouldForwardProp:e=>i9(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function XL(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function moe(e){return e==null||typeof e=="string"&&!e.trim()}const goe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${an(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Vn(a,q9,t)},yoe=M.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:u,children:a,className:p,defaultOpen:d,defaultValue:m,disabled:v,displayEmpty:w,error:x=!1,IconComponent:P,inputRef:T,labelId:O,MenuProps:L={},multiple:N,name:F,onBlur:D,onChange:q,onClose:z,onFocus:Z,onOpen:Q,open:Y,readOnly:se,renderValue:W,required:G,SelectDisplayProps:ae={},tabIndex:le,type:ue,value:ye,variant:Se="standard",...ge}=t,[xe,Fe]=W_({controlled:ye,default:m,name:"Select"}),[He,pe]=W_({controlled:Y,default:d,name:"Select"}),_e=M.useRef(null),Ce=M.useRef(null),[ke,$e]=M.useState(null),{current:ht}=M.useRef(Y!=null),[At,mt]=M.useState(),rt=Ao(r,T),Lt=M.useCallback(Qe=>{Ce.current=Qe,Qe&&$e(Qe)},[]),Tt=ke?.parentNode;M.useImperativeHandle(rt,()=>({focus:()=>{Ce.current.focus()},node:_e.current,value:xe}),[xe]),M.useEffect(()=>{d&&He&&ke&&!ht&&(mt(u?null:Tt.clientWidth),Ce.current.focus())},[ke,u]),M.useEffect(()=>{o&&Ce.current.focus()},[o]),M.useEffect(()=>{if(!O)return;const Qe=fl(Ce.current).getElementById(O);if(Qe){const wt=()=>{getSelection().isCollapsed&&Ce.current.focus()};return Qe.addEventListener("click",wt),()=>{Qe.removeEventListener("click",wt)}}},[O]);const Pt=(Qe,wt)=>{Qe?Q&&Q(wt):z&&z(wt),ht||(mt(u?null:Tt.clientWidth),pe(Qe))},ut=Qe=>{Qe.button===0&&(Qe.preventDefault(),Ce.current.focus(),Pt(!0,Qe))},Le=Qe=>{Pt(!1,Qe)},sr=M.Children.toArray(a),lr=Qe=>{const wt=sr.find(nt=>nt.props.value===Qe.target.value);wt!==void 0&&(Fe(wt.props.value),q&&q(Qe,wt))},dr=Qe=>wt=>{let nt;if(wt.currentTarget.hasAttribute("tabindex")){if(N){nt=Array.isArray(xe)?xe.slice():[];const Ot=xe.indexOf(Qe.props.value);Ot===-1?nt.push(Qe.props.value):nt.splice(Ot,1)}else nt=Qe.props.value;if(Qe.props.onClick&&Qe.props.onClick(wt),xe!==nt&&(Fe(nt),q)){const Ot=wt.nativeEvent||wt,Gt=new Ot.constructor(Ot.type,Ot);Object.defineProperty(Gt,"target",{writable:!0,value:{value:nt,name:F}}),q(Gt,Qe)}N||Pt(!1,wt)}},Yt=Qe=>{se||[" ","ArrowUp","ArrowDown","Enter"].includes(Qe.key)&&(Qe.preventDefault(),Pt(!0,Qe))},Ve=ke!==null&&He,tt=Qe=>{!Ve&&D&&(Object.defineProperty(Qe,"target",{writable:!0,value:{value:xe,name:F}}),D(Qe))};delete ge["aria-invalid"];let lt,Mt;const Kt=[];let Ut=!1;(Q_({value:xe})||w)&&(W?lt=W(xe):Ut=!0);const ar=sr.map(Qe=>{if(!M.isValidElement(Qe))return null;let wt;if(N){if(!Array.isArray(xe))throw new Error(lh(2));wt=xe.some(nt=>XL(nt,Qe.props.value)),wt&&Ut&&Kt.push(Qe.props.children)}else wt=XL(xe,Qe.props.value),wt&&Ut&&(Mt=Qe.props.children);return M.cloneElement(Qe,{"aria-selected":wt?"true":"false",onClick:dr(Qe),onKeyUp:nt=>{nt.key===" "&&nt.preventDefault(),Qe.props.onKeyUp&&Qe.props.onKeyUp(nt)},role:"option",selected:wt,value:void 0,"data-value":Qe.props.value})});Ut&&(N?Kt.length===0?lt=null:lt=Kt.reduce((Qe,wt,nt)=>(Qe.push(wt),nt<Kt.length-1&&Qe.push(", "),Qe),[]):lt=Mt);let gr=At;!u&&ht&&ke&&(gr=Tt.clientWidth);let yr;typeof le<"u"?yr=le:yr=v?null:0;const Ye=ae.id||(F?`mui-component-select-${F}`:void 0),de={...t,variant:Se,value:xe,open:Ve,error:x},he=goe(de),Me={...L.PaperProps,...typeof L.slotProps?.paper=="function"?L.slotProps.paper(de):L.slotProps?.paper},Ue={...L.MenuListProps,...typeof L.slotProps?.list=="function"?L.slotProps.list(de):L.slotProps?.list},Ke=xp();return ze.jsxs(M.Fragment,{children:[ze.jsx(hoe,{as:"div",ref:Lt,tabIndex:yr,role:"combobox","aria-controls":Ve?Ke:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":Ve?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[O,Ye].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":G?"true":void 0,"aria-invalid":x?"true":void 0,onKeyDown:Yt,onMouseDown:v||se?null:ut,onBlur:tt,onFocus:Z,...ae,ownerState:de,className:Br(ae.className,he.select,p),id:Ye,children:moe(lt)?KL||(KL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):lt}),ze.jsx(poe,{"aria-invalid":x,value:Array.isArray(xe)?xe.join(","):xe,name:F,ref:_e,"aria-hidden":!0,onChange:lr,tabIndex:-1,disabled:v,className:he.nativeInput,autoFocus:o,required:G,...ge,ownerState:de}),ze.jsx(doe,{as:P,className:he.icon,ownerState:de}),ze.jsx(_I,{id:`menu-${F||""}`,anchorEl:Tt,open:Ve,onClose:Le,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...L,slotProps:{...L.slotProps,list:{"aria-labelledby":O,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:Ke,...Ue},paper:{...Me,style:{minWidth:gr,...Me!=null?Me.style:null}}},children:ar})]})}),voe=e=>{const{classes:t}=e,n=Vn({root:["root"]},q9,t);return{...t,...n}},EI={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>hl(e)&&e!=="variant"},boe=er(vI,EI)(""),_oe=er(SI,EI)(""),xoe=er(yI,EI)(""),V9=M.forwardRef(function(t,r){const n=Kn({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:u={},className:a,defaultOpen:p=!1,displayEmpty:d=!1,IconComponent:m=Qre,id:v,input:w,inputProps:x,label:P,labelId:T,MenuProps:O,multiple:L=!1,native:N=!1,onClose:F,onOpen:D,open:q,renderValue:z,SelectDisplayProps:Z,variant:Q="outlined",...Y}=n,se=N?ioe:yoe,W=id(),G=Cg({props:n,muiFormControl:W,states:["variant","error"]}),ae=G.variant||Q,le={...n,variant:ae,classes:u},ue=voe(le),{root:ye,...Se}=ue,ge=w||{standard:ze.jsx(boe,{ownerState:le}),outlined:ze.jsx(_oe,{label:P,ownerState:le}),filled:ze.jsx(xoe,{ownerState:le})}[ae],xe=Ao(r,nd(ge));return ze.jsx(M.Fragment,{children:M.cloneElement(ge,{inputComponent:se,inputProps:{children:o,error:G.error,IconComponent:m,variant:ae,type:void 0,multiple:L,...N?{id:v}:{autoWidth:i,defaultOpen:p,displayEmpty:d,labelId:T,MenuProps:O,onClose:F,onOpen:D,open:q,renderValue:z,SelectDisplayProps:{id:v,...Z}},...x,classes:x?is(Se,x.classes):Se,...w?w.props.inputProps:{}},...(L&&N||d)&&ae==="outlined"?{notched:!0}:{},ref:xe,className:Br(ge.props.className,a,ue.root),...!w&&{variant:ae},...Y})})});V9.muiName="Select";function woe(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:o}=e,u=Qd();M.useEffect(()=>{if(!i)return;function L(N){N.defaultPrevented||N.key==="Escape"&&n?.(N,"escapeKeyDown")}return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[i,n]);const a=ec((L,N)=>{n?.(L,N)}),p=ec(L=>{!n||L==null||u.start(L,()=>{a(null,"timeout")})});M.useEffect(()=>(i&&p(t),u.clear),[i,t,p,u]);const d=L=>{n?.(L,"clickaway")},m=u.clear,v=M.useCallback(()=>{t!=null&&p(o??t*.5)},[t,o,p]),w=L=>N=>{const F=L.onBlur;F?.(N),v()},x=L=>N=>{const F=L.onFocus;F?.(N),m()},P=L=>N=>{const F=L.onMouseEnter;F?.(N),m()},T=L=>N=>{const F=L.onMouseLeave;F?.(N),v()};return M.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",v),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",m)}},[r,i,v,m]),{getRootProps:(L={})=>{const N={...K_(e),...K_(L)};return{role:"presentation",...L,...N,onBlur:w(N),onFocus:x(N),onMouseEnter:P(N),onMouseLeave:T(N)}},onClickAway:d}}function Soe(e){return qn("MuiSnackbarContent",e)}jn("MuiSnackbarContent",["root","message","action"]);const Eoe=e=>{const{classes:t}=e;return Vn({root:["root"],action:["action"],message:["message"]},Soe,t)},Coe=er(Lc,{name:"MuiSnackbarContent",slot:"Root"})(gi(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(CP(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:CP(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Aoe=er("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Poe=er("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Toe=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:u,role:a="alert",...p}=n,d=n,m=Eoe(d);return ze.jsxs(Coe,{role:a,elevation:6,className:Br(m.root,o),ownerState:d,ref:r,...p,children:[ze.jsx(Aoe,{className:m.message,ownerState:d,children:u}),i?ze.jsx(Poe,{className:m.action,ownerState:d,children:i}):null]})});function Ioe(e){return qn("MuiSnackbar",e)}jn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Moe=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${an(r.vertical)}${an(r.horizontal)}`]};return Vn(n,Ioe,t)},Roe=er("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${an(r.anchorOrigin.vertical)}${an(r.anchorOrigin.horizontal)}`]]}})(gi(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Ooe=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiSnackbar"}),i=Sf(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:a,horizontal:p}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:m,className:v,ClickAwayListenerProps:w,ContentProps:x,disableWindowBlurListener:P=!1,message:T,onBlur:O,onClose:L,onFocus:N,onMouseEnter:F,onMouseLeave:D,open:q,resumeHideDuration:z,slots:Z={},slotProps:Q={},TransitionComponent:Y,transitionDuration:se=o,TransitionProps:{onEnter:W,onExited:G,...ae}={},...le}=n,ue={...n,anchorOrigin:{vertical:a,horizontal:p},autoHideDuration:d,disableWindowBlurListener:P,TransitionComponent:Y,transitionDuration:se},ye=Moe(ue),{getRootProps:Se,onClickAway:ge}=woe({...ue}),[xe,Fe]=M.useState(!0),He=Pt=>{Fe(!0),G&&G(Pt)},pe=(Pt,ut)=>{Fe(!1),W&&W(Pt,ut)},_e={slots:{transition:Y,...Z},slotProps:{content:x,clickAwayListener:w,transition:ae,...Q}},[Ce,ke]=Zn("root",{ref:r,className:[ye.root,v],elementType:Roe,getSlotProps:Se,externalForwardedProps:{..._e,...le},ownerState:ue}),[$e,{ownerState:ht,...At}]=Zn("clickAwayListener",{elementType:Une,externalForwardedProps:_e,getSlotProps:Pt=>({onClickAway:(...ut)=>{const Le=ut[0];Pt.onClickAway?.(...ut),!Le?.defaultMuiPrevented&&ge(...ut)}}),ownerState:ue}),[mt,rt]=Zn("content",{elementType:Toe,shouldForwardComponentProp:!0,externalForwardedProps:_e,additionalProps:{message:T,action:u},ownerState:ue}),[Lt,Tt]=Zn("transition",{elementType:t0,externalForwardedProps:_e,getSlotProps:Pt=>({onEnter:(...ut)=>{Pt.onEnter?.(...ut),pe(...ut)},onExited:(...ut)=>{Pt.onExited?.(...ut),He(...ut)}}),additionalProps:{appear:!0,in:q,timeout:se,direction:a==="top"?"down":"up"},ownerState:ue});return!q&&xe?null:ze.jsx($e,{...At,...Z.clickAwayListener&&{ownerState:ht},children:ze.jsx(Ce,{...ke,children:ze.jsx(Lt,{...Tt,children:m||ze.jsx(mt,{...rt})})})})});function koe(e){return qn("MuiTooltip",e)}const wo=jn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Loe(e){return Math.round(e*1e5)/1e5}const Doe=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,u={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${an(o.split("-")[0])}`],arrow:["arrow"]};return Vn(u,koe,t)},Noe=er(A9,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(gi(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${wo.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${wo.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${wo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${wo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${wo.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${wo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${wo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${wo.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Foe=er("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${an(r.placement.split("-")[0])}`]]}})(gi(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${wo.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${wo.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${wo.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${wo.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Loe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${wo.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${wo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${wo.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${wo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${wo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${wo.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${wo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${wo.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${wo.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${wo.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Boe=er("span",{name:"MuiTooltip",slot:"Arrow"})(gi(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Rb=!1;const YL=new Ox;let Ry={x:0,y:0};function Ob(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const Ag=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:u,components:a={},componentsProps:p={},describeChild:d=!1,disableFocusListener:m=!1,disableHoverListener:v=!1,disableInteractive:w=!1,disableTouchListener:x=!1,enterDelay:P=100,enterNextDelay:T=0,enterTouchDelay:O=700,followCursor:L=!1,id:N,leaveDelay:F=0,leaveTouchDelay:D=1500,onClose:q,onOpen:z,open:Z,placement:Q="bottom",PopperComponent:Y,PopperProps:se={},slotProps:W={},slots:G={},title:ae,TransitionComponent:le,TransitionProps:ue,...ye}=n,Se=M.isValidElement(o)?o:ze.jsx("span",{children:o}),ge=Sf(),xe=Px(),[Fe,He]=M.useState(),[pe,_e]=M.useState(null),Ce=M.useRef(!1),ke=w||L,$e=Qd(),ht=Qd(),At=Qd(),mt=Qd(),[rt,Lt]=W_({controlled:Z,default:!1,name:"Tooltip",state:"open"});let Tt=rt;const Pt=xp(N),ut=M.useRef(),Le=ec(()=>{ut.current!==void 0&&(document.body.style.WebkitUserSelect=ut.current,ut.current=void 0),mt.clear()});M.useEffect(()=>Le,[Le]);const sr=Vr=>{YL.clear(),Rb=!0,Lt(!0),z&&!Tt&&z(Vr)},lr=ec(Vr=>{YL.start(800+F,()=>{Rb=!1}),Lt(!1),q&&Tt&&q(Vr),$e.start(ge.transitions.duration.shortest,()=>{Ce.current=!1})}),dr=Vr=>{Ce.current&&Vr.type!=="touchstart"||(Fe&&Fe.removeAttribute("title"),ht.clear(),At.clear(),P||Rb&&T?ht.start(Rb?T:P,()=>{sr(Vr)}):sr(Vr))},Yt=Vr=>{ht.clear(),At.start(F,()=>{lr(Vr)})},[,Ve]=M.useState(!1),tt=Vr=>{X_(Vr.target)||(Ve(!1),Yt(Vr))},lt=Vr=>{Fe||He(Vr.currentTarget),X_(Vr.target)&&(Ve(!0),dr(Vr))},Mt=Vr=>{Ce.current=!0;const gt=Se.props;gt.onTouchStart&&gt.onTouchStart(Vr)},Kt=Vr=>{Mt(Vr),At.clear(),$e.clear(),Le(),ut.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",mt.start(O,()=>{document.body.style.WebkitUserSelect=ut.current,dr(Vr)})},Ut=Vr=>{Se.props.onTouchEnd&&Se.props.onTouchEnd(Vr),Le(),At.start(D,()=>{lr(Vr)})};M.useEffect(()=>{if(!Tt)return;function Vr(gt){gt.key==="Escape"&&lr(gt)}return document.addEventListener("keydown",Vr),()=>{document.removeEventListener("keydown",Vr)}},[lr,Tt]);const ar=Ao(nd(Se),He,r);!ae&&ae!==0&&(Tt=!1);const gr=M.useRef(),yr=Vr=>{const gt=Se.props;gt.onMouseMove&&gt.onMouseMove(Vr),Ry={x:Vr.clientX,y:Vr.clientY},gr.current&&gr.current.update()},Ye={},de=typeof ae=="string";d?(Ye.title=!Tt&&de&&!v?ae:null,Ye["aria-describedby"]=Tt?Pt:null):(Ye["aria-label"]=de?ae:null,Ye["aria-labelledby"]=Tt&&!de?Pt:null);const he={...Ye,...ye,...Se.props,className:Br(ye.className,Se.props.className),onTouchStart:Mt,ref:ar,...L?{onMouseMove:yr}:{}},Me={};x||(he.onTouchStart=Kt,he.onTouchEnd=Ut),v||(he.onMouseOver=Ob(dr,he.onMouseOver),he.onMouseLeave=Ob(Yt,he.onMouseLeave),ke||(Me.onMouseOver=dr,Me.onMouseLeave=Yt)),m||(he.onFocus=Ob(lt,he.onFocus),he.onBlur=Ob(tt,he.onBlur),ke||(Me.onFocus=lt,Me.onBlur=tt));const Ue={...n,isRtl:xe,arrow:i,disableInteractive:ke,placement:Q,PopperComponentProp:Y,touch:Ce.current},Ke=typeof W.popper=="function"?W.popper(Ue):W.popper,Qe=M.useMemo(()=>{let Vr=[{name:"arrow",enabled:!!pe,options:{element:pe,padding:4}}];return se.popperOptions?.modifiers&&(Vr=Vr.concat(se.popperOptions.modifiers)),Ke?.popperOptions?.modifiers&&(Vr=Vr.concat(Ke.popperOptions.modifiers)),{...se.popperOptions,...Ke?.popperOptions,modifiers:Vr}},[pe,se.popperOptions,Ke?.popperOptions]),wt=Doe(Ue),nt=typeof W.transition=="function"?W.transition(Ue):W.transition,Ot={slots:{popper:a.Popper,transition:a.Transition??le,tooltip:a.Tooltip,arrow:a.Arrow,...G},slotProps:{arrow:W.arrow??p.arrow,popper:{...se,...Ke??p.popper},tooltip:W.tooltip??p.tooltip,transition:{...ue,...nt??p.transition}}},[Gt,ir]=Zn("popper",{elementType:Noe,externalForwardedProps:Ot,ownerState:Ue,className:Br(wt.popper,se?.className)}),[Pr,bt]=Zn("transition",{elementType:t0,externalForwardedProps:Ot,ownerState:Ue}),[Sr,Mr]=Zn("tooltip",{elementType:Foe,className:wt.tooltip,externalForwardedProps:Ot,ownerState:Ue}),[Nr,en]=Zn("arrow",{elementType:Boe,className:wt.arrow,externalForwardedProps:Ot,ownerState:Ue,ref:_e});return ze.jsxs(M.Fragment,{children:[M.cloneElement(Se,he),ze.jsx(Gt,{as:Y??A9,placement:Q,anchorEl:L?{getBoundingClientRect:()=>({top:Ry.y,left:Ry.x,right:Ry.x,bottom:Ry.y,width:0,height:0})}:Fe,popperRef:gr,open:Fe?Tt:!1,id:Pt,transition:!0,...Me,...ir,popperOptions:Qe,children:({TransitionProps:Vr})=>ze.jsx(Pr,{timeout:ge.transitions.duration.shorter,...Vr,...bt,children:ze.jsxs(Sr,{...Mr,children:[ae,i?ze.jsx(Nr,{...en}):null]})})})]})}),CI=AQ({createStyledComponent:er("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Kn({props:e,name:"MuiStack"})});function joe(e){return qn("MuiToolbar",e)}jn("MuiToolbar",["root","gutters","regular","dense"]);const zoe=e=>{const{classes:t,disableGutters:r,variant:n}=e;return Vn({root:["root",!r&&"gutters",n]},joe,t)},$oe=er("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(gi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),AI=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:u=!1,variant:a="regular",...p}=n,d={...n,component:o,disableGutters:u,variant:a},m=zoe(d);return ze.jsx($oe,{as:o,className:Br(m.root,i),ref:r,ownerState:d,...p})});function Uoe(e){return qn("MuiTextField",e)}jn("MuiTextField",["root"]);const qoe={standard:vI,filled:yI,outlined:SI},Voe=e=>{const{classes:t}=e;return Vn({root:["root"]},Uoe,t)},Goe=er(Qie,{name:"MuiTextField",slot:"Root"})({}),G9=M.forwardRef(function(t,r){const n=Kn({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:u,className:a,color:p="primary",defaultValue:d,disabled:m=!1,error:v=!1,FormHelperTextProps:w,fullWidth:x=!1,helperText:P,id:T,InputLabelProps:O,inputProps:L,InputProps:N,inputRef:F,label:D,maxRows:q,minRows:z,multiline:Z=!1,name:Q,onBlur:Y,onChange:se,onFocus:W,placeholder:G,required:ae=!1,rows:le,select:ue=!1,SelectProps:ye,slots:Se={},slotProps:ge={},type:xe,value:Fe,variant:He="outlined",...pe}=n,_e={...n,autoFocus:o,color:p,disabled:m,error:v,fullWidth:x,multiline:Z,required:ae,select:ue,variant:He},Ce=Voe(_e),ke=xp(T),$e=P&&ke?`${ke}-helper-text`:void 0,ht=D&&ke?`${ke}-label`:void 0,At=qoe[He],mt={slots:Se,slotProps:{input:N,inputLabel:O,htmlInput:L,formHelperText:w,select:ye,...ge}},rt={},Lt=mt.slotProps.inputLabel;He==="outlined"&&(Lt&&typeof Lt.shrink<"u"&&(rt.notched=Lt.shrink),rt.label=D),ue&&((!ye||!ye.native)&&(rt.id=void 0),rt["aria-describedby"]=void 0);const[Tt,Pt]=Zn("root",{elementType:Goe,shouldForwardComponentProp:!0,externalForwardedProps:{...mt,...pe},ownerState:_e,className:Br(Ce.root,a),ref:r,additionalProps:{disabled:m,error:v,fullWidth:x,required:ae,color:p,variant:He}}),[ut,Le]=Zn("input",{elementType:At,externalForwardedProps:mt,additionalProps:rt,ownerState:_e}),[sr,lr]=Zn("inputLabel",{elementType:_ae,externalForwardedProps:mt,ownerState:_e}),[dr,Yt]=Zn("htmlInput",{elementType:"input",externalForwardedProps:mt,ownerState:_e}),[Ve,tt]=Zn("formHelperText",{elementType:nae,externalForwardedProps:mt,ownerState:_e}),[lt,Mt]=Zn("select",{elementType:V9,externalForwardedProps:mt,ownerState:_e}),Kt=ze.jsx(ut,{"aria-describedby":$e,autoComplete:i,autoFocus:o,defaultValue:d,fullWidth:x,multiline:Z,name:Q,rows:le,maxRows:q,minRows:z,type:xe,value:Fe,id:ke,inputRef:F,onBlur:Y,onChange:se,onFocus:W,placeholder:G,inputProps:Yt,slots:{input:Se.htmlInput?dr:void 0},...Le});return ze.jsxs(Tt,{...Pt,children:[D!=null&&D!==""&&ze.jsx(sr,{htmlFor:ke,id:ht,...lr,children:D}),ue?ze.jsx(lt,{"aria-describedby":$e,id:ke,labelId:ht,value:Fe,input:Kt,...Mt,children:u}):Kt,P&&ze.jsx(Ve,{id:$e,...tt,children:P})]})}),zu=V$({themeId:Qu});function Hoe(e,t){const{disableHysteresis:r=!1,threshold:n=100,target:i}=t,o=e.current;return i&&(e.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!r&&o!==void 0&&e.current<o?!1:e.current>n}const Woe=typeof window<"u"?window:null;function H9(e={}){const{getTrigger:t=Hoe,target:r=Woe,...n}=e,i=M.useRef(),[o,u]=M.useState(()=>t(i,n));return M.useEffect(()=>{if(r===null)return u(!1);const a=()=>{u(t(i,{target:r,...n}))};return a(),r.addEventListener("scroll",a,{passive:!0}),()=>{r.removeEventListener("scroll",a,{passive:!0})}},[r,t,JSON.stringify(n)]),o}function ca(e){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(e)}var Rc=Uint8Array,Lu=Uint16Array,PI=Int32Array,TI=new Rc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),II=new Rc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),JL=new Rc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W9=function(e,t){for(var r=new Lu(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new PI(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},Z9=W9(TI,2),Zoe=Z9.b,UP=Z9.r;Zoe[28]=258,UP[258]=28;var Koe=W9(II,0),QL=Koe.r,qP=new Lu(32768);for(var Ba=0;Ba<32768;++Ba){var Oh=(Ba&43690)>>1|(Ba&21845)<<1;Oh=(Oh&52428)>>2|(Oh&13107)<<2,Oh=(Oh&61680)>>4|(Oh&3855)<<4,qP[Ba]=((Oh&65280)>>8|(Oh&255)<<8)>>1}var wv=(function(e,t,r){for(var n=e.length,i=0,o=new Lu(t);i<n;++i)e[i]&&++o[e[i]-1];var u=new Lu(t);for(i=1;i<t;++i)u[i]=u[i-1]+o[i-1]<<1;var a;if(r){a=new Lu(1<<t);var p=15-t;for(i=0;i<n;++i)if(e[i])for(var d=i<<4|e[i],m=t-e[i],v=u[e[i]-1]++<<m,w=v|(1<<m)-1;v<=w;++v)a[qP[v]>>p]=d}else for(a=new Lu(n),i=0;i<n;++i)e[i]&&(a[i]=qP[u[e[i]-1]++]>>15-e[i]);return a}),fp=new Rc(288);for(var Ba=0;Ba<144;++Ba)fp[Ba]=8;for(var Ba=144;Ba<256;++Ba)fp[Ba]=9;for(var Ba=256;Ba<280;++Ba)fp[Ba]=7;for(var Ba=280;Ba<288;++Ba)fp[Ba]=8;var e1=new Rc(32);for(var Ba=0;Ba<32;++Ba)e1[Ba]=5;var Xoe=wv(fp,9,0),Yoe=wv(e1,5,0),K9=function(e){return(e+7)/8|0},Joe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Rc(e.subarray(t,r))},Vf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Oy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Bw=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:Y9,l:0};if(i==1){var u=new Rc(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function(q,z){return q.f-z.f}),r.push({s:-1,f:25001});var a=r[0],p=r[1],d=0,m=1,v=2;for(r[0]={s:-1,f:a.f+p.f,l:a,r:p};m!=i-1;)a=r[r[d].f<r[v].f?d++:v++],p=r[d!=m&&r[d].f<r[v].f?d++:v++],r[m++]={s:-1,f:a.f+p.f,l:a,r:p};for(var w=o[0].s,n=1;n<i;++n)o[n].s>w&&(w=o[n].s);var x=new Lu(w+1),P=VP(r[m-1],x,0);if(P>t){var n=0,T=0,O=P-t,L=1<<O;for(o.sort(function(z,Z){return x[Z.s]-x[z.s]||z.f-Z.f});n<i;++n){var N=o[n].s;if(x[N]>t)T+=L-(1<<P-x[N]),x[N]=t;else break}for(T>>=O;T>0;){var F=o[n].s;x[F]<t?T-=1<<t-x[F]++-1:++n}for(;n>=0&&T;--n){var D=o[n].s;x[D]==t&&(--x[D],++T)}P=t}return{t:new Rc(x),l:P}},VP=function(e,t,r){return e.s==-1?Math.max(VP(e.l,t,r+1),VP(e.r,t,r+1)):t[e.s]=r},e4=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Lu(++t),n=0,i=e[0],o=1,u=function(p){r[n++]=p},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(i),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(i);o=1,i=e[a]}return{c:r.subarray(0,n),n:t}},ky=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},X9=function(e,t,r){var n=r.length,i=K9(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},t4=function(e,t,r,n,i,o,u,a,p,d,m){Vf(t,m++,r),++i[256];for(var v=Bw(i,15),w=v.t,x=v.l,P=Bw(o,15),T=P.t,O=P.l,L=e4(w),N=L.c,F=L.n,D=e4(T),q=D.c,z=D.n,Z=new Lu(19),Q=0;Q<N.length;++Q)++Z[N[Q]&31];for(var Q=0;Q<q.length;++Q)++Z[q[Q]&31];for(var Y=Bw(Z,7),se=Y.t,W=Y.l,G=19;G>4&&!se[JL[G-1]];--G);var ae=d+5<<3,le=ky(i,fp)+ky(o,e1)+u,ue=ky(i,w)+ky(o,T)+u+14+3*G+ky(Z,se)+2*Z[16]+3*Z[17]+7*Z[18];if(p>=0&&ae<=le&&ae<=ue)return X9(t,m,e.subarray(p,p+d));var ye,Se,ge,xe;if(Vf(t,m,1+(ue<le)),m+=2,ue<le){ye=wv(w,x,0),Se=w,ge=wv(T,O,0),xe=T;var Fe=wv(se,W,0);Vf(t,m,F-257),Vf(t,m+5,z-1),Vf(t,m+10,G-4),m+=14;for(var Q=0;Q<G;++Q)Vf(t,m+3*Q,se[JL[Q]]);m+=3*G;for(var He=[N,q],pe=0;pe<2;++pe)for(var _e=He[pe],Q=0;Q<_e.length;++Q){var Ce=_e[Q]&31;Vf(t,m,Fe[Ce]),m+=se[Ce],Ce>15&&(Vf(t,m,_e[Q]>>5&127),m+=_e[Q]>>12)}}else ye=Xoe,Se=fp,ge=Yoe,xe=e1;for(var Q=0;Q<a;++Q){var ke=n[Q];if(ke>255){var Ce=ke>>18&31;Oy(t,m,ye[Ce+257]),m+=Se[Ce+257],Ce>7&&(Vf(t,m,ke>>23&31),m+=TI[Ce]);var $e=ke&31;Oy(t,m,ge[$e]),m+=xe[$e],$e>3&&(Oy(t,m,ke>>5&8191),m+=II[$e])}else Oy(t,m,ye[ke]),m+=Se[ke]}return Oy(t,m,ye[256]),m+Se[256]},Qoe=new PI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y9=new Rc(0),ese=function(e,t,r,n,i,o){var u=o.z||e.length,a=new Rc(n+u+5*(1+Math.ceil(u/7e3))+i),p=a.subarray(n,a.length-i),d=o.l,m=(o.r||0)&7;if(t){m&&(p[0]=o.r>>3);for(var v=Qoe[t-1],w=v>>13,x=v&8191,P=(1<<r)-1,T=o.p||new Lu(32768),O=o.h||new Lu(P+1),L=Math.ceil(r/3),N=2*L,F=function(ut){return(e[ut]^e[ut+1]<<L^e[ut+2]<<N)&P},D=new PI(25e3),q=new Lu(288),z=new Lu(32),Z=0,Q=0,Y=o.i||0,se=0,W=o.w||0,G=0;Y+2<u;++Y){var ae=F(Y),le=Y&32767,ue=O[ae];if(T[le]=ue,O[ae]=le,W<=Y){var ye=u-Y;if((Z>7e3||se>24576)&&(ye>423||!d)){m=t4(e,p,0,D,q,z,Q,se,G,Y-G,m),se=Z=Q=0,G=Y;for(var Se=0;Se<286;++Se)q[Se]=0;for(var Se=0;Se<30;++Se)z[Se]=0}var ge=2,xe=0,Fe=x,He=le-ue&32767;if(ye>2&&ae==F(Y-He))for(var pe=Math.min(w,ye)-1,_e=Math.min(32767,Y),Ce=Math.min(258,ye);He<=_e&&--Fe&&le!=ue;){if(e[Y+ge]==e[Y+ge-He]){for(var ke=0;ke<Ce&&e[Y+ke]==e[Y+ke-He];++ke);if(ke>ge){if(ge=ke,xe=He,ke>pe)break;for(var $e=Math.min(He,ke-2),ht=0,Se=0;Se<$e;++Se){var At=Y-He+Se&32767,mt=T[At],rt=At-mt&32767;rt>ht&&(ht=rt,ue=At)}}}le=ue,ue=T[le],He+=le-ue&32767}if(xe){D[se++]=268435456|UP[ge]<<18|QL[xe];var Lt=UP[ge]&31,Tt=QL[xe]&31;Q+=TI[Lt]+II[Tt],++q[257+Lt],++z[Tt],W=Y+ge,++Z}else D[se++]=e[Y],++q[e[Y]]}}for(Y=Math.max(Y,W);Y<u;++Y)D[se++]=e[Y],++q[e[Y]];m=t4(e,p,d,D,q,z,Q,se,G,Y-G,m),d||(o.r=m&7|p[m/8|0]<<3,m-=7,o.h=O,o.p=T,o.i=Y,o.w=W)}else{for(var Y=o.w||0;Y<u+d;Y+=65535){var Pt=Y+65535;Pt>=u&&(p[m/8|0]=d,Pt=u),m=X9(p,m+1,e.subarray(Y,Pt))}o.i=u}return Joe(a,0,n+K9(m)+i)},J9=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length|0,u=0;u!=o;){for(var a=Math.min(u+2655,o);u<a;++u)i+=n+=r[u];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},tse=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),u=new Rc(o.length+e.length);u.set(o),u.set(e,o.length),e=u,i.w=o.length}return ese(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},Q9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},rse=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=J9();i.p(t.dictionary),Q9(e,2,i.d())}};function GP(e,t){t||(t={});var r=J9();r.p(e);var n=tse(e,t,t.dictionary?6:2,4);return rse(n,t),Q9(n,n.length-4,r.d()),n}var nse=typeof TextDecoder<"u"&&new TextDecoder,ise=0;try{nse.decode(Y9,{stream:!0}),ise=1}catch{}function ase(e){if(Array.isArray(e))return e}function ose(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,u,a=[],p=!0,d=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(p=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);p=!0);}catch(m){d=!0,i=m}finally{try{if(!p&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(d)throw i}}return a}}function r4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sse(e,t){if(e){if(typeof e=="string")return r4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r4(e,t):void 0}}function lse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4(e,t){return ase(e)||ose(e,t)||sse(e,t)||lse()}function i4(e,t="utf8"){return new TextDecoder(t).decode(e)}const use=new TextEncoder;function cse(e){return use.encode(e)}const fse=1024*8,hse=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),jw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class MI{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=fse,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,o=t.byteLength-i;let u=i;(ArrayBuffer.isView(t)||t instanceof MI)&&(t.byteLength!==t.buffer.byteLength&&(u=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=jw[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===hse&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const p=new jw[r](a.buffer);return this.offset+=n,p.reverse(),p}const u=new jw[r](o);return this.offset+=n,u}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return i4(this.readBytes(t))}decodeText(t=1,r="utf8"){return i4(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(cse(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Pg(e){let t=e.length;for(;--t>=0;)e[t]=0}const dse=3,pse=258,eU=29,mse=256,gse=mse+1+eU,tU=30,yse=512,vse=new Array((gse+2)*2);Pg(vse);const bse=new Array(tU*2);Pg(bse);const _se=new Array(yse);Pg(_se);const xse=new Array(pse-dse+1);Pg(xse);const wse=new Array(eU);Pg(wse);const Sse=new Array(tU);Pg(Sse);const Ese=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,u=0;for(;r!==0;){u=r>2e3?2e3:r,r-=u;do i=i+t[n++]|0,o=o+i|0;while(--u);i%=65521,o%=65521}return i|o<<16|0};var HP=Ese;const Cse=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Ase=new Uint32Array(Cse()),Pse=(e,t,r,n)=>{const i=Ase,o=n+r;e^=-1;for(let u=n;u<o;u++)e=e>>>8^i[(e^t[u])&255];return e^-1};var of=Pse,WP={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rU={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Tse=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ise=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Tse(r,n)&&(e[n]=r[n])}}return e},Mse=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let u=e[n];r.set(u,i),i+=u.length}return r},nU={assign:Ise,flattenChunks:Mse};let iU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{iU=!1}const r0=new Uint8Array(256);for(let e=0;e<256;e++)r0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r0[254]=r0[254]=1;var Rse=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,u=e.length,a=0;for(i=0;i<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const Ose=(e,t)=>{if(t<65534&&e.subarray&&iU)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var kse=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let u=e[n++];if(u<128){o[i++]=u;continue}let a=r0[u];if(a>4){o[i++]=65533,n+=a-1;continue}for(u&=a===2?31:a===3?15:7;a>1&&n<r;)u=u<<6|e[n++]&63,a--;if(a>1){o[i++]=65533;continue}u<65536?o[i++]=u:(u-=65536,o[i++]=55296|u>>10&1023,o[i++]=56320|u&1023)}return Ose(o,i)},Lse=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+r0[e[r]]>t?r:t},ZP={string2buf:Rse,buf2string:kse,utf8border:Lse};function Dse(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Nse=Dse;const kb=16209,Fse=16191;var Bse=function(t,r){let n,i,o,u,a,p,d,m,v,w,x,P,T,O,L,N,F,D,q,z,Z,Q,Y,se;const W=t.state;n=t.next_in,Y=t.input,i=n+(t.avail_in-5),o=t.next_out,se=t.output,u=o-(r-t.avail_out),a=o+(t.avail_out-257),p=W.dmax,d=W.wsize,m=W.whave,v=W.wnext,w=W.window,x=W.hold,P=W.bits,T=W.lencode,O=W.distcode,L=(1<<W.lenbits)-1,N=(1<<W.distbits)-1;e:do{P<15&&(x+=Y[n++]<<P,P+=8,x+=Y[n++]<<P,P+=8),F=T[x&L];t:for(;;){if(D=F>>>24,x>>>=D,P-=D,D=F>>>16&255,D===0)se[o++]=F&65535;else if(D&16){q=F&65535,D&=15,D&&(P<D&&(x+=Y[n++]<<P,P+=8),q+=x&(1<<D)-1,x>>>=D,P-=D),P<15&&(x+=Y[n++]<<P,P+=8,x+=Y[n++]<<P,P+=8),F=O[x&N];r:for(;;){if(D=F>>>24,x>>>=D,P-=D,D=F>>>16&255,D&16){if(z=F&65535,D&=15,P<D&&(x+=Y[n++]<<P,P+=8,P<D&&(x+=Y[n++]<<P,P+=8)),z+=x&(1<<D)-1,z>p){t.msg="invalid distance too far back",W.mode=kb;break e}if(x>>>=D,P-=D,D=o-u,z>D){if(D=z-D,D>m&&W.sane){t.msg="invalid distance too far back",W.mode=kb;break e}if(Z=0,Q=w,v===0){if(Z+=d-D,D<q){q-=D;do se[o++]=w[Z++];while(--D);Z=o-z,Q=se}}else if(v<D){if(Z+=d+v-D,D-=v,D<q){q-=D;do se[o++]=w[Z++];while(--D);if(Z=0,v<q){D=v,q-=D;do se[o++]=w[Z++];while(--D);Z=o-z,Q=se}}}else if(Z+=v-D,D<q){q-=D;do se[o++]=w[Z++];while(--D);Z=o-z,Q=se}for(;q>2;)se[o++]=Q[Z++],se[o++]=Q[Z++],se[o++]=Q[Z++],q-=3;q&&(se[o++]=Q[Z++],q>1&&(se[o++]=Q[Z++]))}else{Z=o-z;do se[o++]=se[Z++],se[o++]=se[Z++],se[o++]=se[Z++],q-=3;while(q>2);q&&(se[o++]=se[Z++],q>1&&(se[o++]=se[Z++]))}}else if((D&64)===0){F=O[(F&65535)+(x&(1<<D)-1)];continue r}else{t.msg="invalid distance code",W.mode=kb;break e}break}}else if((D&64)===0){F=T[(F&65535)+(x&(1<<D)-1)];continue t}else if(D&32){W.mode=Fse;break e}else{t.msg="invalid literal/length code",W.mode=kb;break e}break}}while(n<i&&o<a);q=P>>3,n-=q,P-=q<<3,x&=(1<<P)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),W.hold=x,W.bits=P};const hm=15,a4=852,o4=592,s4=0,zw=1,l4=2,jse=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),zse=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),$se=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Use=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),qse=(e,t,r,n,i,o,u,a)=>{const p=a.bits;let d=0,m=0,v=0,w=0,x=0,P=0,T=0,O=0,L=0,N=0,F,D,q,z,Z,Q=null,Y;const se=new Uint16Array(hm+1),W=new Uint16Array(hm+1);let G=null,ae,le,ue;for(d=0;d<=hm;d++)se[d]=0;for(m=0;m<n;m++)se[t[r+m]]++;for(x=p,w=hm;w>=1&&se[w]===0;w--);if(x>w&&(x=w),w===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(v=1;v<w&&se[v]===0;v++);for(x<v&&(x=v),O=1,d=1;d<=hm;d++)if(O<<=1,O-=se[d],O<0)return-1;if(O>0&&(e===s4||w!==1))return-1;for(W[1]=0,d=1;d<hm;d++)W[d+1]=W[d]+se[d];for(m=0;m<n;m++)t[r+m]!==0&&(u[W[t[r+m]]++]=m);if(e===s4?(Q=G=u,Y=20):e===zw?(Q=jse,G=zse,Y=257):(Q=$se,G=Use,Y=0),N=0,m=0,d=v,Z=o,P=x,T=0,q=-1,L=1<<x,z=L-1,e===zw&&L>a4||e===l4&&L>o4)return 1;for(;;){ae=d-T,u[m]+1<Y?(le=0,ue=u[m]):u[m]>=Y?(le=G[u[m]-Y],ue=Q[u[m]-Y]):(le=96,ue=0),F=1<<d-T,D=1<<P,v=D;do D-=F,i[Z+(N>>T)+D]=ae<<24|le<<16|ue|0;while(D!==0);for(F=1<<d-1;N&F;)F>>=1;if(F!==0?(N&=F-1,N+=F):N=0,m++,--se[d]===0){if(d===w)break;d=t[r+u[m]]}if(d>x&&(N&z)!==q){for(T===0&&(T=x),Z+=v,P=d-T,O=1<<P;P+T<w&&(O-=se[P+T],!(O<=0));)P++,O<<=1;if(L+=1<<P,e===zw&&L>a4||e===l4&&L>o4)return 1;q=N&z,i[q]=x<<24|P<<16|Z-o|0}}return N!==0&&(i[Z+N]=d-T<<24|64<<16|0),a.bits=x,0};var Sv=qse;const Vse=0,aU=1,oU=2,{Z_FINISH:u4,Z_BLOCK:Gse,Z_TREES:Lb,Z_OK:hp,Z_STREAM_END:Hse,Z_NEED_DICT:Wse,Z_STREAM_ERROR:ic,Z_DATA_ERROR:sU,Z_MEM_ERROR:lU,Z_BUF_ERROR:Zse,Z_DEFLATED:c4}=rU,zx=16180,f4=16181,h4=16182,d4=16183,p4=16184,m4=16185,g4=16186,y4=16187,v4=16188,b4=16189,t1=16190,Gf=16191,$w=16192,_4=16193,Uw=16194,x4=16195,w4=16196,S4=16197,E4=16198,Db=16199,Nb=16200,C4=16201,A4=16202,P4=16203,T4=16204,I4=16205,qw=16206,M4=16207,R4=16208,Xa=16209,uU=16210,cU=16211,Kse=852,Xse=592,Yse=15,Jse=Yse,O4=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Qse(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<zx||t.mode>cU?1:0},fU=e=>{if(wp(e))return ic;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=zx,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Kse),t.distcode=t.distdyn=new Int32Array(Xse),t.sane=1,t.back=-1,hp},hU=e=>{if(wp(e))return ic;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,fU(e)},dU=(e,t)=>{let r;if(wp(e))return ic;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ic:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,hU(e))},pU=(e,t)=>{if(!e)return ic;const r=new Qse;e.state=r,r.strm=e,r.window=null,r.mode=zx;const n=dU(e,t);return n!==hp&&(e.state=null),n},ele=e=>pU(e,Jse);let k4=!0,Vw,Gw;const tle=e=>{if(k4){Vw=new Int32Array(512),Gw=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Sv(aU,e.lens,0,288,Vw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Sv(oU,e.lens,0,32,Gw,0,e.work,{bits:5}),k4=!1}e.lencode=Vw,e.lenbits=9,e.distcode=Gw,e.distbits=5},mU=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},rle=(e,t)=>{let r,n,i,o,u,a,p,d,m,v,w,x,P,T,O=0,L,N,F,D,q,z,Z,Q;const Y=new Uint8Array(4);let se,W;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wp(e)||!e.output||!e.input&&e.avail_in!==0)return ic;r=e.state,r.mode===Gf&&(r.mode=$w),u=e.next_out,i=e.output,p=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=r.hold,m=r.bits,v=a,w=p,Q=hp;e:for(;;)switch(r.mode){case zx:if(r.wrap===0){r.mode=$w;break}for(;m<16;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,Y[0]=d&255,Y[1]=d>>>8&255,r.check=of(r.check,Y,2,0),d=0,m=0,r.mode=f4;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=Xa;break}if((d&15)!==c4){e.msg="unknown compression method",r.mode=Xa;break}if(d>>>=4,m-=4,Z=(d&15)+8,r.wbits===0&&(r.wbits=Z),Z>15||Z>r.wbits){e.msg="invalid window size",r.mode=Xa;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?b4:Gf,d=0,m=0;break;case f4:for(;m<16;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(r.flags=d,(r.flags&255)!==c4){e.msg="unknown compression method",r.mode=Xa;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Xa;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(Y[0]=d&255,Y[1]=d>>>8&255,r.check=of(r.check,Y,2,0)),d=0,m=0,r.mode=h4;case h4:for(;m<32;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(Y[0]=d&255,Y[1]=d>>>8&255,Y[2]=d>>>16&255,Y[3]=d>>>24&255,r.check=of(r.check,Y,4,0)),d=0,m=0,r.mode=d4;case d4:for(;m<16;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(Y[0]=d&255,Y[1]=d>>>8&255,r.check=of(r.check,Y,2,0)),d=0,m=0,r.mode=p4;case p4:if(r.flags&1024){for(;m<16;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(Y[0]=d&255,Y[1]=d>>>8&255,r.check=of(r.check,Y,2,0)),d=0,m=0}else r.head&&(r.head.extra=null);r.mode=m4;case m4:if(r.flags&1024&&(x=r.length,x>a&&(x=a),x&&(r.head&&(Z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+x),Z)),r.flags&512&&r.wrap&4&&(r.check=of(r.check,n,x,o)),a-=x,o+=x,r.length-=x),r.length))break e;r.length=0,r.mode=g4;case g4:if(r.flags&2048){if(a===0)break e;x=0;do Z=n[o+x++],r.head&&Z&&r.length<65536&&(r.head.name+=String.fromCharCode(Z));while(Z&&x<a);if(r.flags&512&&r.wrap&4&&(r.check=of(r.check,n,x,o)),a-=x,o+=x,Z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=y4;case y4:if(r.flags&4096){if(a===0)break e;x=0;do Z=n[o+x++],r.head&&Z&&r.length<65536&&(r.head.comment+=String.fromCharCode(Z));while(Z&&x<a);if(r.flags&512&&r.wrap&4&&(r.check=of(r.check,n,x,o)),a-=x,o+=x,Z)break e}else r.head&&(r.head.comment=null);r.mode=v4;case v4:if(r.flags&512){for(;m<16;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Xa;break}d=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Gf;break;case b4:for(;m<32;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}e.adler=r.check=O4(d),d=0,m=0,r.mode=t1;case t1:if(r.havedict===0)return e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=d,r.bits=m,Wse;e.adler=r.check=1,r.mode=Gf;case Gf:if(t===Gse||t===Lb)break e;case $w:if(r.last){d>>>=m&7,m-=m&7,r.mode=qw;break}for(;m<3;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}switch(r.last=d&1,d>>>=1,m-=1,d&3){case 0:r.mode=_4;break;case 1:if(tle(r),r.mode=Db,t===Lb){d>>>=2,m-=2;break e}break;case 2:r.mode=w4;break;case 3:e.msg="invalid block type",r.mode=Xa}d>>>=2,m-=2;break;case _4:for(d>>>=m&7,m-=m&7;m<32;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Xa;break}if(r.length=d&65535,d=0,m=0,r.mode=Uw,t===Lb)break e;case Uw:r.mode=x4;case x4:if(x=r.length,x){if(x>a&&(x=a),x>p&&(x=p),x===0)break e;i.set(n.subarray(o,o+x),u),a-=x,o+=x,p-=x,u+=x,r.length-=x;break}r.mode=Gf;break;case w4:for(;m<14;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(r.nlen=(d&31)+257,d>>>=5,m-=5,r.ndist=(d&31)+1,d>>>=5,m-=5,r.ncode=(d&15)+4,d>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Xa;break}r.have=0,r.mode=S4;case S4:for(;r.have<r.ncode;){for(;m<3;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.lens[G[r.have++]]=d&7,d>>>=3,m-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,se={bits:r.lenbits},Q=Sv(Vse,r.lens,0,19,r.lencode,0,r.work,se),r.lenbits=se.bits,Q){e.msg="invalid code lengths set",r.mode=Xa;break}r.have=0,r.mode=E4;case E4:for(;r.have<r.nlen+r.ndist;){for(;O=r.lencode[d&(1<<r.lenbits)-1],L=O>>>24,N=O>>>16&255,F=O&65535,!(L<=m);){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(F<16)d>>>=L,m-=L,r.lens[r.have++]=F;else{if(F===16){for(W=L+2;m<W;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(d>>>=L,m-=L,r.have===0){e.msg="invalid bit length repeat",r.mode=Xa;break}Z=r.lens[r.have-1],x=3+(d&3),d>>>=2,m-=2}else if(F===17){for(W=L+3;m<W;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}d>>>=L,m-=L,Z=0,x=3+(d&7),d>>>=3,m-=3}else{for(W=L+7;m<W;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}d>>>=L,m-=L,Z=0,x=11+(d&127),d>>>=7,m-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Xa;break}for(;x--;)r.lens[r.have++]=Z}}if(r.mode===Xa)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Xa;break}if(r.lenbits=9,se={bits:r.lenbits},Q=Sv(aU,r.lens,0,r.nlen,r.lencode,0,r.work,se),r.lenbits=se.bits,Q){e.msg="invalid literal/lengths set",r.mode=Xa;break}if(r.distbits=6,r.distcode=r.distdyn,se={bits:r.distbits},Q=Sv(oU,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,se),r.distbits=se.bits,Q){e.msg="invalid distances set",r.mode=Xa;break}if(r.mode=Db,t===Lb)break e;case Db:r.mode=Nb;case Nb:if(a>=6&&p>=258){e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=d,r.bits=m,Bse(e,w),u=e.next_out,i=e.output,p=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,d=r.hold,m=r.bits,r.mode===Gf&&(r.back=-1);break}for(r.back=0;O=r.lencode[d&(1<<r.lenbits)-1],L=O>>>24,N=O>>>16&255,F=O&65535,!(L<=m);){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(N&&(N&240)===0){for(D=L,q=N,z=F;O=r.lencode[z+((d&(1<<D+q)-1)>>D)],L=O>>>24,N=O>>>16&255,F=O&65535,!(D+L<=m);){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}d>>>=D,m-=D,r.back+=D}if(d>>>=L,m-=L,r.back+=L,r.length=F,N===0){r.mode=I4;break}if(N&32){r.back=-1,r.mode=Gf;break}if(N&64){e.msg="invalid literal/length code",r.mode=Xa;break}r.extra=N&15,r.mode=C4;case C4:if(r.extra){for(W=r.extra;m<W;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=A4;case A4:for(;O=r.distcode[d&(1<<r.distbits)-1],L=O>>>24,N=O>>>16&255,F=O&65535,!(L<=m);){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if((N&240)===0){for(D=L,q=N,z=F;O=r.distcode[z+((d&(1<<D+q)-1)>>D)],L=O>>>24,N=O>>>16&255,F=O&65535,!(D+L<=m);){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}d>>>=D,m-=D,r.back+=D}if(d>>>=L,m-=L,r.back+=L,N&64){e.msg="invalid distance code",r.mode=Xa;break}r.offset=F,r.extra=N&15,r.mode=P4;case P4:if(r.extra){for(W=r.extra;m<W;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Xa;break}r.mode=T4;case T4:if(p===0)break e;if(x=w-p,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Xa;break}x>r.wnext?(x-=r.wnext,P=r.wsize-x):P=r.wnext-x,x>r.length&&(x=r.length),T=r.window}else T=i,P=u-r.offset,x=r.length;x>p&&(x=p),p-=x,r.length-=x;do i[u++]=T[P++];while(--x);r.length===0&&(r.mode=Nb);break;case I4:if(p===0)break e;i[u++]=r.length,p--,r.mode=Nb;break;case qw:if(r.wrap){for(;m<32;){if(a===0)break e;a--,d|=n[o++]<<m,m+=8}if(w-=p,e.total_out+=w,r.total+=w,r.wrap&4&&w&&(e.adler=r.check=r.flags?of(r.check,i,w,u-w):HP(r.check,i,w,u-w)),w=p,r.wrap&4&&(r.flags?d:O4(d))!==r.check){e.msg="incorrect data check",r.mode=Xa;break}d=0,m=0}r.mode=M4;case M4:if(r.wrap&&r.flags){for(;m<32;){if(a===0)break e;a--,d+=n[o++]<<m,m+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Xa;break}d=0,m=0}r.mode=R4;case R4:Q=Hse;break e;case Xa:Q=sU;break e;case uU:return lU;case cU:default:return ic}return e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=d,r.bits=m,(r.wsize||w!==e.avail_out&&r.mode<Xa&&(r.mode<qw||t!==u4))&&mU(e,e.output,e.next_out,w-e.avail_out),v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,r.total+=w,r.wrap&4&&w&&(e.adler=r.check=r.flags?of(r.check,i,w,e.next_out-w):HP(r.check,i,w,e.next_out-w)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Gf?128:0)+(r.mode===Db||r.mode===Uw?256:0),(v===0&&w===0||t===u4)&&Q===hp&&(Q=Zse),Q},nle=e=>{if(wp(e))return ic;let t=e.state;return t.window&&(t.window=null),e.state=null,hp},ile=(e,t)=>{if(wp(e))return ic;const r=e.state;return(r.wrap&2)===0?ic:(r.head=t,t.done=!1,hp)},ale=(e,t)=>{const r=t.length;let n,i,o;return wp(e)||(n=e.state,n.wrap!==0&&n.mode!==t1)?ic:n.mode===t1&&(i=1,i=HP(i,t,r,0),i!==n.check)?sU:(o=mU(e,t,r,r),o?(n.mode=uU,lU):(n.havedict=1,hp))};var ole=hU,sle=dU,lle=fU,ule=ele,cle=pU,fle=rle,hle=nle,dle=ile,ple=ale,mle="pako inflate (from Nodeca project)",Qf={inflateReset:ole,inflateReset2:sle,inflateResetKeep:lle,inflateInit:ule,inflateInit2:cle,inflate:fle,inflateEnd:hle,inflateGetHeader:dle,inflateSetDictionary:ple,inflateInfo:mle};function gle(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var yle=gle;const gU=Object.prototype.toString,{Z_NO_FLUSH:vle,Z_FINISH:ble,Z_OK:n0,Z_STREAM_END:Hw,Z_NEED_DICT:Ww,Z_STREAM_ERROR:_le,Z_DATA_ERROR:L4,Z_MEM_ERROR:xle}=rU;function O0(e){this.options=nU.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nse,this.strm.avail_out=0;let r=Qf.inflateInit2(this.strm,t.windowBits);if(r!==n0)throw new Error(WP[r]);if(this.header=new yle,Qf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ZP.string2buf(t.dictionary):gU.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Qf.inflateSetDictionary(this.strm,t.dictionary),r!==n0)))throw new Error(WP[r])}O0.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,u,a;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?ble:vle,gU.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Qf.inflate(r,u),o===Ww&&i&&(o=Qf.inflateSetDictionary(r,i),o===n0?o=Qf.inflate(r,u):o===L4&&(o=Ww));r.avail_in>0&&o===Hw&&r.state.wrap>0&&e[r.next_in]!==0;)Qf.inflateReset(r),o=Qf.inflate(r,u);switch(o){case _le:case L4:case Ww:case xle:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===Hw))if(this.options.to==="string"){let p=ZP.utf8border(r.output,r.next_out),d=r.next_out-p,m=ZP.buf2string(r.output,p);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(p,p+d),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===n0&&a===0)){if(o===Hw)return o=Qf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};O0.prototype.onData=function(e){this.chunks.push(e)};O0.prototype.onEnd=function(e){e===n0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nU.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function wle(e,t){const r=new O0(t);if(r.push(e),r.err)throw r.msg||WP[r.err];return r.result}var Sle=O0,Ele=wle,Cle={Inflate:Sle,inflate:Ele};const{Inflate:Ale,inflate:Ple}=Cle;var D4=Ale,Tle=Ple;const yU=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;yU[e]=t}const N4=4294967295;function Ile(e,t,r){let n=e;for(let i=0;i<r;i++)n=yU[(n^t[i])&255]^n>>>8;return n}function Mle(e,t){return(Ile(N4,e,t)^N4)>>>0}function F4(e,t,r){const n=e.readUint32(),i=Mle(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function vU(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function bU(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function _U(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function xU(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(r[o]>>1)&255;for(;o<n;o++)t[o]=e[o]+(t[o-i]+r[o]>>1)&255}}function wU(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+r[o]&255;for(;o<n;o++)t[o]=e[o]+Rle(t[o-i],r[o],r[o-i])&255}}function Rle(e,t,r){const n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),u=Math.abs(n-r);return i<=o&&i<=u?e:o<=u?t:r}function Ole(e,t,r,n,i,o){switch(e){case 0:vU(t,r,i);break;case 1:bU(t,r,i,o);break;case 2:_U(t,r,n,i);break;case 3:xU(t,r,n,i,o);break;case 4:wU(t,r,n,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const kle=new Uint16Array([255]),Lle=new Uint8Array(kle.buffer),Dle=Lle[0]===255;function Nle(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,p=new Uint8Array(n*r*a);let d=0;for(let m=0;m<7;m++){const v=u[m],w=Math.ceil((r-v.x)/v.xStep),x=Math.ceil((n-v.y)/v.yStep);if(w<=0||x<=0)continue;const P=w*a,T=new Uint8Array(P);for(let O=0;O<x;O++){const L=t[d++],N=t.subarray(d,d+P);d+=P;const F=new Uint8Array(P);Ole(L,N,F,T,P,a),T.set(F);for(let D=0;D<w;D++){const q=v.x+D*v.xStep,z=v.y+O*v.yStep;if(!(q>=r||z>=n))for(let Z=0;Z<a;Z++)p[(z*r+q)*a+Z]=F[D*a+Z]}}}if(o===16){const m=new Uint16Array(p.buffer);if(Dle)for(let v=0;v<m.length;v++)m[v]=Fle(m[v]);return m}else return p}function Fle(e){return(e&255)<<8|e>>8&255}const Ble=new Uint16Array([255]),jle=new Uint8Array(Ble.buffer),zle=jle[0]===255,$le=new Uint8Array(0);function B4(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*r),p=new Uint8Array(n*a);let d=$le,m=0,v,w;for(let x=0;x<n;x++){switch(v=t.subarray(m+1,m+1+a),w=p.subarray(x*a,(x+1)*a),t[m]){case 0:vU(v,w,a);break;case 1:bU(v,w,a,u);break;case 2:_U(v,w,d,a);break;case 3:xU(v,w,d,a,u);break;case 4:wU(v,w,d,a,u);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}d=w,m+=a+1}if(o===16){const x=new Uint16Array(p.buffer);if(zle)for(let P=0;P<x.length;P++)x[P]=Ule(x[P]);return x}else return p}function Ule(e){return(e&255)<<8|e>>8&255}const w_=Uint8Array.of(137,80,78,71,13,10,26,10);function j4(e){if(!qle(e.readBytes(w_.length)))throw new Error("wrong PNG signature")}function qle(e){if(e.length<w_.length)return!1;for(let t=0;t<w_.length;t++)if(e[t]!==w_[t])return!1;return!0}const Vle="tEXt",Gle=0,SU=new TextDecoder("latin1");function Hle(e){if(Zle(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Wle=/^[\u0000-\u00FF]*$/;function Zle(e){if(!Wle.test(e))throw new Error("invalid latin1 text")}function Kle(e,t,r){const n=EU(t);e[n]=Xle(t,r-n.length-1)}function EU(e){for(e.mark();e.readByte()!==Gle;);const t=e.offset;e.reset();const r=SU.decode(e.readBytes(t-e.offset-1));return e.skip(1),Hle(r),r}function Xle(e,t){return SU.decode(e.readBytes(t))}const Pu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Zw={UNKNOWN:-1,DEFLATE:0},z4={UNKNOWN:-1,ADAPTIVE:0},Kw={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fb={NONE:0,BACKGROUND:1,PREVIOUS:2},Xw={SOURCE:0,OVER:1};class Yle extends MI{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new D4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Zw.UNKNOWN,this._filterMethod=z4.UNKNOWN,this._interlaceMethod=Kw.UNKNOWN,this._colorType=Pu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(j4(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(j4(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Vle:Kle(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?F4(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?F4(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=Jle(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case Pu.GREYSCALE:n=1;break;case Pu.TRUECOLOUR:n=3;break;case Pu.INDEXED_COLOUR:n=1;break;case Pu.GREYSCALE_ALPHA:n=2;break;case Pu.TRUECOLOUR_ALPHA:n=4;break;case Pu.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==Zw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Pu.GREYSCALE:case Pu.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Pu.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Pu.UNKNOWN:case Pu.GREYSCALE_ALPHA:case Pu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=EU(this),n=this.readUint8();if(n!==Zw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Tle(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=B4({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case Fb.NONE:break;case Fb.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const u=(i*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[u+a]=0}break;case Fb.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(o,u)=>{const a=((o+r.yOffset)*this._png.width+r.xOffset+u)*this._png.channels,p=(o*r.width+u)*this._png.channels;return{index:a,frameIndex:p}};switch(r.blendOp){case Xw.SOURCE:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(o,u);for(let d=0;d<this._png.channels;d++)t.data[a+d]=r.data[p+d]}break;case Xw.OVER:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(o,u);for(let d=0;d<this._png.channels;d++){const m=r.data[p+this._png.channels-1]/n,v=d%(this._png.channels-1)===0?1:r.data[p+d],w=Math.floor(m*v+(1-m)*t.data[a+d]);t.data[a+d]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==z4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Kw.NO_INTERLACE)this._png.data=B4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Kw.ADAM7)this._png.data=Nle({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fb.NONE,blendOp:Xw.SOURCE,data:t}),this._inflator=new D4,this._writingDataChunks=!1}}function Jle(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var $4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})($4||($4={}));function Qle(e,t){return new Yle(e,t).decode()}var Yn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Yw(){Yn.console&&typeof Yn.console.log=="function"&&Yn.console.log.apply(Yn.console,arguments)}var xa={log:Yw,warn:function(e){Yn.console&&(typeof Yn.console.warn=="function"?Yn.console.warn.apply(Yn.console,arguments):Yw.call(null,arguments))},error:function(e){Yn.console&&(typeof Yn.console.error=="function"?Yn.console.error.apply(Yn.console,arguments):Yw(e))}};function Jw(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$d(n.response,t,r)},n.onerror=function(){xa.error("could not download file")},n.send()}function U4(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $d=Yn.saveAs||((typeof window>"u"?"undefined":ca(window))!=="object"||window!==Yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Yn.URL||Yn.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?U4(i.href)?Jw(e,t,r):Bb(i,i.target="_blank"):Bb(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(U4(e))Jw(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Bb(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:ca(o)!=="object"&&(xa.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Jw(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(Yn.HTMLElement)||Yn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&o)&&(typeof FileReader>"u"?"undefined":ca(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var m=a.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},a.readAsDataURL(e)}else{var p=Yn.URL||Yn.webkitURL,d=p.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){p.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function CU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,u=i.exec(e);u&&(t=o(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),p=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),p.length==1&&(p="0"+p),d.length==1&&(d="0"+d),"#"+a+p+d}}var S_=Yn.atob.bind(Yn),q4=Yn.btoa.bind(Yn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Qw(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=ol(r,n,i,o,t[0],7,-680876936),o=ol(o,r,n,i,t[1],12,-389564586),i=ol(i,o,r,n,t[2],17,606105819),n=ol(n,i,o,r,t[3],22,-1044525330),r=ol(r,n,i,o,t[4],7,-176418897),o=ol(o,r,n,i,t[5],12,1200080426),i=ol(i,o,r,n,t[6],17,-1473231341),n=ol(n,i,o,r,t[7],22,-45705983),r=ol(r,n,i,o,t[8],7,1770035416),o=ol(o,r,n,i,t[9],12,-1958414417),i=ol(i,o,r,n,t[10],17,-42063),n=ol(n,i,o,r,t[11],22,-1990404162),r=ol(r,n,i,o,t[12],7,1804603682),o=ol(o,r,n,i,t[13],12,-40341101),i=ol(i,o,r,n,t[14],17,-1502002290),r=sl(r,n=ol(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=sl(o,r,n,i,t[6],9,-1069501632),i=sl(i,o,r,n,t[11],14,643717713),n=sl(n,i,o,r,t[0],20,-373897302),r=sl(r,n,i,o,t[5],5,-701558691),o=sl(o,r,n,i,t[10],9,38016083),i=sl(i,o,r,n,t[15],14,-660478335),n=sl(n,i,o,r,t[4],20,-405537848),r=sl(r,n,i,o,t[9],5,568446438),o=sl(o,r,n,i,t[14],9,-1019803690),i=sl(i,o,r,n,t[3],14,-187363961),n=sl(n,i,o,r,t[8],20,1163531501),r=sl(r,n,i,o,t[13],5,-1444681467),o=sl(o,r,n,i,t[2],9,-51403784),i=sl(i,o,r,n,t[7],14,1735328473),r=ll(r,n=sl(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=ll(o,r,n,i,t[8],11,-2022574463),i=ll(i,o,r,n,t[11],16,1839030562),n=ll(n,i,o,r,t[14],23,-35309556),r=ll(r,n,i,o,t[1],4,-1530992060),o=ll(o,r,n,i,t[4],11,1272893353),i=ll(i,o,r,n,t[7],16,-155497632),n=ll(n,i,o,r,t[10],23,-1094730640),r=ll(r,n,i,o,t[13],4,681279174),o=ll(o,r,n,i,t[0],11,-358537222),i=ll(i,o,r,n,t[3],16,-722521979),n=ll(n,i,o,r,t[6],23,76029189),r=ll(r,n,i,o,t[9],4,-640364487),o=ll(o,r,n,i,t[12],11,-421815835),i=ll(i,o,r,n,t[15],16,530742520),r=ul(r,n=ll(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=ul(o,r,n,i,t[7],10,1126891415),i=ul(i,o,r,n,t[14],15,-1416354905),n=ul(n,i,o,r,t[5],21,-57434055),r=ul(r,n,i,o,t[12],6,1700485571),o=ul(o,r,n,i,t[3],10,-1894986606),i=ul(i,o,r,n,t[10],15,-1051523),n=ul(n,i,o,r,t[1],21,-2054922799),r=ul(r,n,i,o,t[8],6,1873313359),o=ul(o,r,n,i,t[15],10,-30611744),i=ul(i,o,r,n,t[6],15,-1560198380),n=ul(n,i,o,r,t[13],21,1309151649),r=ul(r,n,i,o,t[4],6,-145523070),o=ul(o,r,n,i,t[11],10,-1120210379),i=ul(i,o,r,n,t[2],15,718787259),n=ul(n,i,o,r,t[9],21,-343485551),e[0]=Vh(r,e[0]),e[1]=Vh(n,e[1]),e[2]=Vh(i,e[2]),e[3]=Vh(o,e[3])}function $x(e,t,r,n,i,o){return t=Vh(Vh(t,e),Vh(n,o)),Vh(t<<i|t>>>32-i,r)}function ol(e,t,r,n,i,o,u){return $x(t&r|~t&n,e,t,i,o,u)}function sl(e,t,r,n,i,o,u){return $x(t&n|r&~n,e,t,i,o,u)}function ll(e,t,r,n,i,o,u){return $x(t^r^n,e,t,i,o,u)}function ul(e,t,r,n,i,o,u){return $x(r^(t|~n),e,t,i,o,u)}function AU(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Qw(n,eue(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Qw(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,Qw(n,i),n}function eue(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var V4="0123456789abcdef".split("");function tue(e){for(var t="",r=0;r<4;r++)t+=V4[e>>8*r+4&15]+V4[e>>8*r&15];return t}function rue(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function KP(e){return AU(e).map(rue).join("")}var nue=(function(e){for(var t=0;t<e.length;t++)e[t]=tue(e[t]);return e.join("")})(AU("hello"))!="5d41402abc4b2a76b9719d911017c592";function Vh(e,t){if(nue){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function XP(e,t){var r,n,i,o;if(e!==r){for(var u=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),a=[],p=0;p<256;p++)a[p]=p;var d=0;for(p=0;p<256;p++){var m=a[p];d=(d+m+u.charCodeAt(p))%256,a[p]=a[d],a[d]=m}r=e,n=a}else a=n;var v=t.length,w=0,x=0,P="";for(p=0;p<v;p++)x=(x+(m=a[w=(w+1)%256]))%256,a[w]=a[x],a[x]=m,u=a[(a[w]+a[x])%256],P+=String.fromCharCode(t.charCodeAt(p)^u);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var G4={print:4,modify:8,copy:16,"annot-forms":32};function Em(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(G4.perm!==void 0)throw new Error("Invalid permission: "+a);i+=G4[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),u=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^i)),this.encryptionKey=KP(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=XP(this.encryptionKey,this.padding)}function Cm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function H4(e){if(ca(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var u=t[r][o];try{u[0].apply(e,n)}catch(a){Yn.console&&xa.error("jsPDF PubSub Error",a.message,a)}u[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function r1(e){if(!(this instanceof r1))return new r1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function PU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vd(e,t,r,n,i){if(!(this instanceof Vd))return new Vd(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,PU.call(this,n,i)}function Hm(e,t,r,n,i){if(!(this instanceof Hm))return new Hm(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,PU.call(this,n,i)}function Dn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],u=[],a=1,p=16,d="S",m=null;ca(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(p=e.floatPrecision),d=e.defaultPathOperation||"S"),u=e.filters||(o===!0?["FlateEncode"]:u),n=n||"mm",r=(""+(r||"P")).toLowerCase();var v=e.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=H4;var P="1.3",T=x.__private__.getPdfVersion=function(){return P};x.__private__.setPdfVersion=function(X){P=X};var O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return O};var L=x.__private__.getPageFormat=function(X){return O[X]};i=i||"a4";var N="compat",F="advanced",D=N;function q(){this.saveGraphicsState(),Le(new xt(de,0,0,-de,0,Ei()*de).toString()+" cm"),this.setFontSize(this.getFontSize()/de),d="n",D=F}function z(){this.restoreGraphicsState(),d="S",D=N}var Z=x.__private__.combineFontStyleAndFontWeight=function(X,Ae){if(X=="bold"&&Ae=="normal"||X=="bold"&&Ae==400||X=="normal"&&Ae=="italic"||X=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(X=Ae==400||Ae==="normal"?X==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||X!=="normal"?(Ae==700?"bold":Ae)+""+X:"bold"),X};x.advancedAPI=function(X){var Ae=D===N;return Ae&&q.call(this),typeof X!="function"||(X(this),Ae&&z.call(this)),this},x.compatAPI=function(X){var Ae=D===F;return Ae&&z.call(this),typeof X!="function"||(X(this),Ae&&q.call(this)),this},x.isAdvancedAPI=function(){return D===F};var Q,Y=function(X){if(D!==F)throw new Error(X+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},se=x.roundToPrecision=x.__private__.roundToPrecision=function(X,Ae){var et=t||Ae;if(isNaN(X)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return X.toFixed(et).replace(/0+$/,"")};Q=x.hpf=x.__private__.hpf=typeof p=="number"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return se(X,p)}:p==="smart"?function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return se(X,X>-1&&X<1?16:5)}:function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.hpf");return se(X,16)};var W=x.f2=x.__private__.f2=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f2");return se(X,2)},G=x.__private__.f3=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.f3");return se(X,3)},ae=x.scale=x.__private__.scale=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.scale");return D===N?X*de:D===F?X:void 0},le=function(X){return ae((function(Ae){return D===N?Ei()-Ae:D===F?Ae:void 0})(X))};x.__private__.setPrecision=x.setPrecision=function(X){typeof parseInt(X,10)=="number"&&(t=parseInt(X,10))};var ue,ye="00000000000000000000000000000000",Se=x.__private__.getFileId=function(){return ye},ge=x.__private__.setFileId=function(X){return ye=X!==void 0&&/^[a-fA-F0-9]{32}$/.test(X)?X.toUpperCase():ye.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(ia=new Em(m.userPermissions,m.userPassword,m.ownerPassword,ye)),ye};x.setFileId=function(X){return ge(X),this},x.getFileId=function(){return Se()};var xe=x.__private__.convertDateToPDFDate=function(X){var Ae=X.getTimezoneOffset(),et=Ae<0?"+":"-",It=Math.floor(Math.abs(Ae/60)),$t=Math.abs(Ae%60),pr=[et,Ce(It),"'",Ce($t),"'"].join("");return["D:",X.getFullYear(),Ce(X.getMonth()+1),Ce(X.getDate()),Ce(X.getHours()),Ce(X.getMinutes()),Ce(X.getSeconds()),pr].join("")},Fe=x.__private__.convertPDFDateToDate=function(X){var Ae=parseInt(X.substr(2,4),10),et=parseInt(X.substr(6,2),10)-1,It=parseInt(X.substr(8,2),10),$t=parseInt(X.substr(10,2),10),pr=parseInt(X.substr(12,2),10),Er=parseInt(X.substr(14,2),10);return new Date(Ae,et,It,$t,pr,Er,0)},He=x.__private__.setCreationDate=function(X){var Ae;if(X===void 0&&(X=new Date),X instanceof Date)Ae=xe(X);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(X))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=X}return ue=Ae},pe=x.__private__.getCreationDate=function(X){var Ae=ue;return X==="jsDate"&&(Ae=Fe(ue)),Ae};x.setCreationDate=function(X){return He(X),this},x.getCreationDate=function(X){return pe(X)};var _e,Ce=x.__private__.padd2=function(X){return("0"+parseInt(X)).slice(-2)},ke=x.__private__.padd2Hex=function(X){return("00"+(X=X.toString())).substr(X.length)},$e=0,ht=[],At=[],mt=0,rt=[],Lt=[],Tt=!1,Pt=At;x.__private__.setCustomOutputDestination=function(X){Tt=!0,Pt=X};var ut=function(X){Tt||(Pt=X)};x.__private__.resetCustomOutputDestination=function(){Tt=!1,Pt=At};var Le=x.__private__.out=function(X){return X=X.toString(),mt+=X.length+1,Pt.push(X),Pt},sr=x.__private__.write=function(X){return Le(arguments.length===1?X.toString():Array.prototype.join.call(arguments," "))},lr=x.__private__.getArrayBuffer=function(X){for(var Ae=X.length,et=new ArrayBuffer(Ae),It=new Uint8Array(et);Ae--;)It[Ae]=X.charCodeAt(Ae);return et},dr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return dr};var Yt=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(X){return Yt=D===F?X/de:X,this};var Ve,tt=x.__private__.getFontSize=x.getFontSize=function(){return D===N?Yt:Yt*de},lt=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(X){return lt=X,this},x.__private__.getR2L=x.getR2L=function(){return lt};var Mt,Kt=x.__private__.setZoomMode=function(X){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(X))Ve=X;else if(isNaN(X)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(X)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+X+'" is not recognized.');Ve=X}else Ve=parseInt(X,10)};x.__private__.getZoomMode=function(){return Ve};var Ut,ar=x.__private__.setPageMode=function(X){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(X)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+X+'" is not recognized.');Mt=X};x.__private__.getPageMode=function(){return Mt};var gr=x.__private__.setLayoutMode=function(X){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(X)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+X+'" is not recognized.');Ut=X};x.__private__.getLayoutMode=function(){return Ut},x.__private__.setDisplayMode=x.setDisplayMode=function(X,Ae,et){return Kt(X),gr(Ae),ar(et),this};var yr={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(X){if(Object.keys(yr).indexOf(X)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yr[X]},x.__private__.getDocumentProperties=function(){return yr},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(X){for(var Ae in yr)yr.hasOwnProperty(Ae)&&X[Ae]&&(yr[Ae]=X[Ae]);return this},x.__private__.setDocumentProperty=function(X,Ae){if(Object.keys(yr).indexOf(X)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yr[X]=Ae};var Ye,de,he,Me,Ue,Ke={},Qe={},wt=[],nt={},Ot={},Gt={},ir={},Pr=null,bt=0,Sr=[],Mr=new H4(x),Nr=e.hotfixes||[],en={},Vr={},gt=[],xt=function X(Ae,et,It,$t,pr,Er){if(!(this instanceof X))return new X(Ae,et,It,$t,pr,Er);isNaN(Ae)&&(Ae=1),isNaN(et)&&(et=0),isNaN(It)&&(It=0),isNaN($t)&&($t=1),isNaN(pr)&&(pr=0),isNaN(Er)&&(Er=0),this._matrix=[Ae,et,It,$t,pr,Er]};Object.defineProperty(xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(X){this._matrix[0]=X}}),Object.defineProperty(xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(X){this._matrix[1]=X}}),Object.defineProperty(xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(X){this._matrix[2]=X}}),Object.defineProperty(xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(X){this._matrix[3]=X}}),Object.defineProperty(xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(X){this._matrix[4]=X}}),Object.defineProperty(xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(X){this._matrix[5]=X}}),Object.defineProperty(xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xt.prototype.join=function(X){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(X)},xt.prototype.multiply=function(X){var Ae=X.sx*this.sx+X.shy*this.shx,et=X.sx*this.shy+X.shy*this.sy,It=X.shx*this.sx+X.sy*this.shx,$t=X.shx*this.shy+X.sy*this.sy,pr=X.tx*this.sx+X.ty*this.shx+this.tx,Er=X.tx*this.shy+X.ty*this.sy+this.ty;return new xt(Ae,et,It,$t,pr,Er)},xt.prototype.decompose=function(){var X=this.sx,Ae=this.shy,et=this.shx,It=this.sy,$t=this.tx,pr=this.ty,Er=Math.sqrt(X*X+Ae*Ae),rn=(X/=Er)*et+(Ae/=Er)*It;et-=X*rn,It-=Ae*rn;var Qr=Math.sqrt(et*et+It*It);return rn/=Qr,X*(It/=Qr)<Ae*(et/=Qr)&&(X=-X,Ae=-Ae,rn=-rn,Er=-Er),{scale:new xt(Er,0,0,Qr,0,0),translate:new xt(1,0,0,1,$t,pr),rotate:new xt(X,Ae,-Ae,X,0,0),skew:new xt(1,0,rn,1,0,0)}},xt.prototype.toString=function(X){return this.join(" ")},xt.prototype.inversed=function(){var X=this.sx,Ae=this.shy,et=this.shx,It=this.sy,$t=this.tx,pr=this.ty,Er=1/(X*It-Ae*et),rn=It*Er,Qr=-Ae*Er,Mn=-et*Er,On=X*Er;return new xt(rn,Qr,Mn,On,-rn*$t-Mn*pr,-Qr*$t-On*pr)},xt.prototype.applyToPoint=function(X){var Ae=X.x*this.sx+X.y*this.shx+this.tx,et=X.x*this.shy+X.y*this.sy+this.ty;return new gl(Ae,et)},xt.prototype.applyToRectangle=function(X){var Ae=this.applyToPoint(X),et=this.applyToPoint(new gl(X.x+X.w,X.y+X.h));return new Ws(Ae.x,Ae.y,et.x-Ae.x,et.y-Ae.y)},xt.prototype.clone=function(){var X=this.sx,Ae=this.shy,et=this.shx,It=this.sy,$t=this.tx,pr=this.ty;return new xt(X,Ae,et,It,$t,pr)},x.Matrix=xt;var Wt=x.matrixMult=function(X,Ae){return Ae.multiply(X)},ne=new xt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ne;var me=function(X,Ae){if(!Ot[X]){var et=(Ae instanceof Vd?"Sh":"P")+(Object.keys(nt).length+1).toString(10);Ae.id=et,Ot[X]=et,nt[et]=Ae,Mr.publish("addPattern",Ae)}};x.ShadingPattern=Vd,x.TilingPattern=Hm,x.addShadingPattern=function(X,Ae){return Y("addShadingPattern()"),me(X,Ae),this},x.beginTilingPattern=function(X){Y("beginTilingPattern()"),yl(X.boundingBox[0],X.boundingBox[1],X.boundingBox[2]-X.boundingBox[0],X.boundingBox[3]-X.boundingBox[1],X.matrix)},x.endTilingPattern=function(X,Ae){Y("endTilingPattern()"),Ae.stream=Lt[_e].join(`
`),me(X,Ae),Mr.publish("endTilingPattern",Ae),gt.pop().restore()};var qe,je=x.__private__.newObject=function(){var X=jt();return Jt(X,!0),X},jt=x.__private__.newObjectDeferred=function(){return $e++,ht[$e]=function(){return mt},$e},Jt=function(X,Ae){return Ae=typeof Ae=="boolean"&&Ae,ht[X]=mt,Ae&&Le(X+" 0 obj"),X},Tr=x.__private__.newAdditionalObject=function(){var X={objId:jt(),content:""};return rt.push(X),X},zr=jt(),Vt=jt(),Ir=x.__private__.decodeColorString=function(X){var Ae=X.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length!==5||Ae[4]!=="k"&&Ae[4]!=="K"||(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var et=parseFloat(Ae[0]);Ae=[et,et,et,"r"]}for(var It="#",$t=0;$t<3;$t++)It+=("0"+Math.floor(255*parseFloat(Ae[$t])).toString(16)).slice(-2);return It},Dr=x.__private__.encodeColorString=function(X){var Ae;typeof X=="string"&&(X={ch1:X});var et=X.ch1,It=X.ch2,$t=X.ch3,pr=X.ch4,Er=X.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var rn=new CU(et);if(rn.ok)et=rn.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Qr=parseInt(et.substr(1),16);et=Qr>>16&255,It=Qr>>8&255,$t=255&Qr}if(It===void 0||pr===void 0&&et===It&&It===$t)Ae=typeof et=="string"?et+" "+Er[0]:X.precision===2?W(et/255)+" "+Er[0]:G(et/255)+" "+Er[0];else if(pr===void 0||ca(pr)==="object"){if(pr&&!isNaN(pr.a)&&pr.a===0)return["1.","1.","1.",Er[1]].join(" ");Ae=typeof et=="string"?[et,It,$t,Er[1]].join(" "):X.precision===2?[W(et/255),W(It/255),W($t/255),Er[1]].join(" "):[G(et/255),G(It/255),G($t/255),Er[1]].join(" ")}else Ae=typeof et=="string"?[et,It,$t,pr,Er[2]].join(" "):X.precision===2?[W(et),W(It),W($t),W(pr),Er[2]].join(" "):[G(et),G(It),G($t),G(pr),Er[2]].join(" ");return Ae},Sn=x.__private__.getFilters=function(){return u},vn=x.__private__.putStream=function(X){var Ae=(X=X||{}).data||"",et=X.filters||Sn(),It=X.alreadyAppliedFilters||[],$t=X.addLength1||!1,pr=Ae.length,Er=X.objectId,rn=function(fa){return fa};if(m!==null&&Er===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(rn=ia.encryptor(Er,0));var Qr={};et===!0&&(et=["FlateEncode"]);var Mn=X.additionalKeyValues||[],On=(Qr=Dn.API.processDataByFilters!==void 0?Dn.API.processDataByFilters(Ae,et):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(It)?It.join(" "):It.toString());if(Qr.data.length!==0&&(Mn.push({key:"Length",value:Qr.data.length}),$t===!0&&Mn.push({key:"Length1",value:pr})),On.length!=0)if(On.split("/").length-1==1)Mn.push({key:"Filter",value:On});else{Mn.push({key:"Filter",value:"["+On+"]"});for(var Xn=0;Xn<Mn.length;Xn+=1)if(Mn[Xn].key==="DecodeParms"){for(var Ni=[],ta=0;ta<Qr.reverseChain.split("/").length-1;ta+=1)Ni.push("null");Ni.push(Mn[Xn].value),Mn[Xn].value="["+Ni.join(" ")+"]"}}Le("<<");for(var $n=0;$n<Mn.length;$n++)Le("/"+Mn[$n].key+" "+Mn[$n].value);Le(">>"),Qr.data.length!==0&&(Le("stream"),Le(rn(Qr.data)),Le("endstream"))},Rn=x.__private__.putPage=function(X){var Ae=X.number,et=X.data,It=X.objId,$t=X.contentsObjId;Jt(It,!0),Le("<</Type /Page"),Le("/Parent "+X.rootDictionaryObjId+" 0 R"),Le("/Resources "+X.resourceDictionaryObjId+" 0 R"),Le("/MediaBox ["+parseFloat(Q(X.mediaBox.bottomLeftX))+" "+parseFloat(Q(X.mediaBox.bottomLeftY))+" "+Q(X.mediaBox.topRightX)+" "+Q(X.mediaBox.topRightY)+"]"),X.cropBox!==null&&Le("/CropBox ["+Q(X.cropBox.bottomLeftX)+" "+Q(X.cropBox.bottomLeftY)+" "+Q(X.cropBox.topRightX)+" "+Q(X.cropBox.topRightY)+"]"),X.bleedBox!==null&&Le("/BleedBox ["+Q(X.bleedBox.bottomLeftX)+" "+Q(X.bleedBox.bottomLeftY)+" "+Q(X.bleedBox.topRightX)+" "+Q(X.bleedBox.topRightY)+"]"),X.trimBox!==null&&Le("/TrimBox ["+Q(X.trimBox.bottomLeftX)+" "+Q(X.trimBox.bottomLeftY)+" "+Q(X.trimBox.topRightX)+" "+Q(X.trimBox.topRightY)+"]"),X.artBox!==null&&Le("/ArtBox ["+Q(X.artBox.bottomLeftX)+" "+Q(X.artBox.bottomLeftY)+" "+Q(X.artBox.topRightX)+" "+Q(X.artBox.topRightY)+"]"),typeof X.userUnit=="number"&&X.userUnit!==1&&Le("/UserUnit "+X.userUnit),Mr.publish("putPage",{objId:It,pageContext:Sr[Ae],pageNumber:Ae,page:et}),Le("/Contents "+$t+" 0 R"),Le(">>"),Le("endobj");var pr=et.join(`
`);return D===F&&(pr+=`
Q`),Jt($t,!0),vn({data:pr,filters:Sn(),objectId:$t}),Le("endobj"),It},$r=x.__private__.putPages=function(){var X,Ae,et=[];for(X=1;X<=bt;X++)Sr[X].objId=jt(),Sr[X].contentsObjId=jt();for(X=1;X<=bt;X++)et.push(Rn({number:X,data:Lt[X],objId:Sr[X].objId,contentsObjId:Sr[X].contentsObjId,mediaBox:Sr[X].mediaBox,cropBox:Sr[X].cropBox,bleedBox:Sr[X].bleedBox,trimBox:Sr[X].trimBox,artBox:Sr[X].artBox,userUnit:Sr[X].userUnit,rootDictionaryObjId:zr,resourceDictionaryObjId:Vt}));Jt(zr,!0),Le("<</Type /Pages");var It="/Kids [";for(Ae=0;Ae<bt;Ae++)It+=et[Ae]+" 0 R ";Le(It+"]"),Le("/Count "+bt),Le(">>"),Le("endobj"),Mr.publish("postPutPages")},Ii=function(X){Mr.publish("putFont",{font:X,out:Le,newObject:je,putStream:vn}),X.isAlreadyPutted!==!0&&(X.objectNumber=je(),Le("<<"),Le("/Type /Font"),Le("/BaseFont /"+Cm(X.postScriptName)),Le("/Subtype /Type1"),typeof X.encoding=="string"&&Le("/Encoding /"+X.encoding),Le("/FirstChar 32"),Le("/LastChar 255"),Le(">>"),Le("endobj"))},Li=function(X){X.objectNumber=je();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[Q(X.x),Q(X.y),Q(X.x+X.width),Q(X.y+X.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+X.matrix.toString()+"]"});var et=X.pages[1].join(`
`);vn({data:et,additionalKeyValues:Ae,objectId:X.objectNumber}),Le("endobj")},Ji=function(X,Ae){Ae||(Ae=21);var et=je(),It=(function(Er,rn){var Qr,Mn=[],On=1/(rn-1);for(Qr=0;Qr<1;Qr+=On)Mn.push(Qr);if(Mn.push(1),Er[0].offset!=0){var Xn={offset:0,color:Er[0].color};Er.unshift(Xn)}if(Er[Er.length-1].offset!=1){var Ni={offset:1,color:Er[Er.length-1].color};Er.push(Ni)}for(var ta="",$n=0,fa=0;fa<Mn.length;fa++){for(Qr=Mn[fa];Qr>Er[$n+1].offset;)$n++;var zi=Er[$n].offset,Ma=(Qr-zi)/(Er[$n+1].offset-zi),ss=Er[$n].color,Ks=Er[$n+1].color;ta+=ke(Math.round((1-Ma)*ss[0]+Ma*Ks[0]).toString(16))+ke(Math.round((1-Ma)*ss[1]+Ma*Ks[1]).toString(16))+ke(Math.round((1-Ma)*ss[2]+Ma*Ks[2]).toString(16))}return ta.trim()})(X.colors,Ae),$t=[];$t.push({key:"FunctionType",value:"0"}),$t.push({key:"Domain",value:"[0.0 1.0]"}),$t.push({key:"Size",value:"["+Ae+"]"}),$t.push({key:"BitsPerSample",value:"8"}),$t.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$t.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vn({data:It,additionalKeyValues:$t,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),Le("endobj"),X.objectNumber=je(),Le("<< /ShadingType "+X.type),Le("/ColorSpace /DeviceRGB");var pr="/Coords ["+Q(parseFloat(X.coords[0]))+" "+Q(parseFloat(X.coords[1]))+" ";X.type===2?pr+=Q(parseFloat(X.coords[2]))+" "+Q(parseFloat(X.coords[3])):pr+=Q(parseFloat(X.coords[2]))+" "+Q(parseFloat(X.coords[3]))+" "+Q(parseFloat(X.coords[4]))+" "+Q(parseFloat(X.coords[5])),Le(pr+="]"),X.matrix&&Le("/Matrix ["+X.matrix.toString()+"]"),Le("/Function "+et+" 0 R"),Le("/Extend [true true]"),Le(">>"),Le("endobj")},vi=function(X,Ae){var et=jt(),It=je();Ae.push({resourcesOid:et,objectOid:It}),X.objectNumber=It;var $t=[];$t.push({key:"Type",value:"/Pattern"}),$t.push({key:"PatternType",value:"1"}),$t.push({key:"PaintType",value:"1"}),$t.push({key:"TilingType",value:"1"}),$t.push({key:"BBox",value:"["+X.boundingBox.map(Q).join(" ")+"]"}),$t.push({key:"XStep",value:Q(X.xStep)}),$t.push({key:"YStep",value:Q(X.yStep)}),$t.push({key:"Resources",value:et+" 0 R"}),X.matrix&&$t.push({key:"Matrix",value:"["+X.matrix.toString()+"]"}),vn({data:X.stream,additionalKeyValues:$t,objectId:X.objectNumber}),Le("endobj")},Mi=function(X){for(var Ae in X.objectNumber=je(),Le("<<"),X)switch(Ae){case"opacity":Le("/ca "+W(X[Ae]));break;case"stroke-opacity":Le("/CA "+W(X[Ae]))}Le(">>"),Le("endobj")},ni=function(X){Jt(X.resourcesOid,!0),Le("<<"),Le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Ae in Le("/Font <<"),Ke)Ke.hasOwnProperty(Ae)&&(v===!1||v===!0&&w.hasOwnProperty(Ae))&&Le("/"+Ae+" "+Ke[Ae].objectNumber+" 0 R");Le(">>")})(),(function(){if(Object.keys(nt).length>0){for(var Ae in Le("/Shading <<"),nt)nt.hasOwnProperty(Ae)&&nt[Ae]instanceof Vd&&nt[Ae].objectNumber>=0&&Le("/"+Ae+" "+nt[Ae].objectNumber+" 0 R");Mr.publish("putShadingPatternDict"),Le(">>")}})(),(function(Ae){if(Object.keys(nt).length>0){for(var et in Le("/Pattern <<"),nt)nt.hasOwnProperty(et)&&nt[et]instanceof x.TilingPattern&&nt[et].objectNumber>=0&&nt[et].objectNumber<Ae&&Le("/"+et+" "+nt[et].objectNumber+" 0 R");Mr.publish("putTilingPatternDict"),Le(">>")}})(X.objectOid),(function(){if(Object.keys(Gt).length>0){var Ae;for(Ae in Le("/ExtGState <<"),Gt)Gt.hasOwnProperty(Ae)&&Gt[Ae].objectNumber>=0&&Le("/"+Ae+" "+Gt[Ae].objectNumber+" 0 R");Mr.publish("putGStateDict"),Le(">>")}})(),(function(){for(var Ae in Le("/XObject <<"),en)en.hasOwnProperty(Ae)&&en[Ae].objectNumber>=0&&Le("/"+Ae+" "+en[Ae].objectNumber+" 0 R");Mr.publish("putXobjectDict"),Le(">>")})(),Le(">>"),Le("endobj")},Qi=function(X){Qe[X.fontName]=Qe[X.fontName]||{},Qe[X.fontName][X.fontStyle]=X.id},ea=function(X,Ae,et,It,$t){var pr={id:"F"+(Object.keys(Ke).length+1).toString(10),postScriptName:X,fontName:Ae,fontStyle:et,encoding:It,isStandardFont:$t||!1,metadata:{}};return Mr.publish("addFont",{font:pr,instance:this}),Ke[pr.id]=pr,Qi(pr),pr.id},hn=x.__private__.pdfEscape=x.pdfEscape=function(X,Ae){return(function(et,It){var $t,pr,Er,rn,Qr,Mn,On,Xn,Ni;if(Er=(It=It||{}).sourceEncoding||"Unicode",Qr=It.outputEncoding,(It.autoencode||Qr)&&Ke[Ye].metadata&&Ke[Ye].metadata[Er]&&Ke[Ye].metadata[Er].encoding&&(rn=Ke[Ye].metadata[Er].encoding,!Qr&&Ke[Ye].encoding&&(Qr=Ke[Ye].encoding),!Qr&&rn.codePages&&(Qr=rn.codePages[0]),typeof Qr=="string"&&(Qr=rn[Qr]),Qr)){for(On=!1,Mn=[],$t=0,pr=et.length;$t<pr;$t++)(Xn=Qr[et.charCodeAt($t)])?Mn.push(String.fromCharCode(Xn)):Mn.push(et[$t]),Mn[$t].charCodeAt(0)>>8&&(On=!0);et=Mn.join("")}for($t=et.length;On===void 0&&$t!==0;)et.charCodeAt($t-1)>>8&&(On=!0),$t--;if(!On)return et;for(Mn=It.noBOM?[]:[254,255],$t=0,pr=et.length;$t<pr;$t++){if((Ni=(Xn=et.charCodeAt($t))>>8)>>8)throw new Error("Character at position "+$t+" of string '"+et+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mn.push(Ni),Mn.push(Xn-(Ni<<8))}return String.fromCharCode.apply(void 0,Mn)})(X,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jn=x.__private__.beginPage=function(X){Lt[++bt]=[],Sr[bt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(X[0]),topRightY:Number(X[1])}},Di(bt),ut(Lt[_e])},qi=function(X,Ae){var et,It,$t;switch(r=Ae||r,typeof X=="string"&&(et=L(X.toLowerCase()),Array.isArray(et)&&(It=et[0],$t=et[1])),Array.isArray(X)&&(It=X[0]*de,$t=X[1]*de),isNaN(It)&&(It=i[0],$t=i[1]),(It>14400||$t>14400)&&(xa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),It=Math.min(14400,It),$t=Math.min(14400,$t)),i=[It,$t],r.substr(0,1)){case"l":$t>It&&(i=[$t,It]);break;case"p":It>$t&&(i=[$t,It])}Jn(i),ur(dn),Le(os),oo!==0&&Le(oo+" J"),To!==0&&Le(To+" j"),Mr.publish("addPage",{pageNumber:bt})},ya=function(X){X>0&&X<=bt&&(Lt.splice(X,1),Sr.splice(X,1),bt--,_e>bt&&(_e=bt),this.setPage(_e))},Di=function(X){X>0&&X<=bt&&(_e=X)},hi=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Lt.length-1},Qa=function(X,Ae,et){var It,$t=void 0;return et=et||{},X=X!==void 0?X:Ke[Ye].fontName,Ae=Ae!==void 0?Ae:Ke[Ye].fontStyle,It=X.toLowerCase(),Qe[It]!==void 0&&Qe[It][Ae]!==void 0?$t=Qe[It][Ae]:Qe[X]!==void 0&&Qe[X][Ae]!==void 0?$t=Qe[X][Ae]:et.disableWarning===!1&&xa.warn("Unable to look up font label for font '"+X+"', '"+Ae+"'. Refer to getFontList() for available fonts."),$t||et.noFallback||($t=Qe.times[Ae])==null&&($t=Qe.times.normal),$t},io=x.__private__.putInfo=function(){var X=je(),Ae=function(It){return It};for(var et in m!==null&&(Ae=ia.encryptor(X,0)),Le("<<"),Le("/Producer ("+hn(Ae("jsPDF "+Dn.version))+")"),yr)yr.hasOwnProperty(et)&&yr[et]&&Le("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+hn(Ae(yr[et]))+")");Le("/CreationDate ("+hn(Ae(ue))+")"),Le(">>"),Le("endobj")},uu=x.__private__.putCatalog=function(X){var Ae=(X=X||{}).rootDictionaryObjId||zr;switch(je(),Le("<<"),Le("/Type /Catalog"),Le("/Pages "+Ae+" 0 R"),Ve||(Ve="fullwidth"),Ve){case"fullwidth":Le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Le("/OpenAction [3 0 R /Fit]");break;case"original":Le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+Ve;et.substr(et.length-1)==="%"&&(Ve=parseInt(Ve)/100),typeof Ve=="number"&&Le("/OpenAction [3 0 R /XYZ null null "+W(Ve)+"]")}switch(Ut||(Ut="continuous"),Ut){case"continuous":Le("/PageLayout /OneColumn");break;case"single":Le("/PageLayout /SinglePage");break;case"two":case"twoleft":Le("/PageLayout /TwoColumnLeft");break;case"tworight":Le("/PageLayout /TwoColumnRight")}Mt&&Le("/PageMode /"+Mt),Mr.publish("putCatalog"),Le(">>"),Le("endobj")},Hi=x.__private__.putTrailer=function(){Le("trailer"),Le("<<"),Le("/Size "+($e+1)),Le("/Root "+$e+" 0 R"),Le("/Info "+($e-1)+" 0 R"),m!==null&&Le("/Encrypt "+ia.oid+" 0 R"),Le("/ID [ <"+ye+"> <"+ye+"> ]"),Le(">>")},uc=x.__private__.putHeader=function(){Le("%PDF-"+P),Le("%")},$c=x.__private__.putXRef=function(){var X="0000000000";Le("xref"),Le("0 "+($e+1)),Le("0000000000 65535 f ");for(var Ae=1;Ae<=$e;Ae++)typeof ht[Ae]=="function"?Le((X+ht[Ae]()).slice(-10)+" 00000 n "):ht[Ae]!==void 0?Le((X+ht[Ae]).slice(-10)+" 00000 n "):Le("0000000000 00000 n ")},Hs=x.__private__.buildDocument=function(){var X;$e=0,mt=0,At=[],ht=[],rt=[],zr=jt(),Vt=jt(),ut(At),Mr.publish("buildDocument"),uc(),$r(),(function(){Mr.publish("putAdditionalObjects");for(var et=0;et<rt.length;et++){var It=rt[et];Jt(It.objId,!0),Le(It.content),Le("endobj")}Mr.publish("postPutAdditionalObjects")})(),X=[],(function(){for(var et in Ke)Ke.hasOwnProperty(et)&&(v===!1||v===!0&&w.hasOwnProperty(et))&&Ii(Ke[et])})(),(function(){var et;for(et in Gt)Gt.hasOwnProperty(et)&&Mi(Gt[et])})(),(function(){for(var et in en)en.hasOwnProperty(et)&&Li(en[et])})(),(function(et){var It;for(It in nt)nt.hasOwnProperty(It)&&(nt[It]instanceof Vd?Ji(nt[It]):nt[It]instanceof Hm&&vi(nt[It],et))})(X),Mr.publish("putResources"),X.forEach(ni),ni({resourcesOid:Vt,objectOid:Number.MAX_SAFE_INTEGER}),Mr.publish("postPutResources"),m!==null&&(ia.oid=je(),Le("<<"),Le("/Filter /Standard"),Le("/V "+ia.v),Le("/R "+ia.r),Le("/U <"+ia.toHexString(ia.U)+">"),Le("/O <"+ia.toHexString(ia.O)+">"),Le("/P "+ia.P),Le(">>"),Le("endobj")),io(),uu();var Ae=mt;return $c(),Hi(),Le("startxref"),Le(""+Ae),Le("%%EOF"),ut(Lt[_e]),At.join(`
`)},ml=x.__private__.getBlob=function(X){return new Blob([lr(X)],{type:"application/pdf"})},Wo=x.output=x.__private__.output=(qe=function(X,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",X){case void 0:return Hs();case"save":x.save(Ae.filename);break;case"arraybuffer":return lr(Hs());case"blob":return ml(Hs());case"bloburi":case"bloburl":if(Yn.URL!==void 0&&typeof Yn.URL.createObjectURL=="function")return Yn.URL&&Yn.URL.createObjectURL(ml(Hs()))||void 0;xa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",It=Hs();try{et=q4(It)}catch{et=q4(unescape(encodeURIComponent(It)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var $t="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",pr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&($t=Ae.pdfObjectUrl,pr="");var Er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$t+'"'+pr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",rn=Yn.open();return rn!==null&&rn.document.write(Er),rn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var Qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',Mn=Yn.open();if(Mn!==null){Mn.document.write(Qr);var On=this;Mn.document.documentElement.querySelector("#pdfViewer").onload=function(){Mn.document.title=Ae.filename,Mn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(On.output("bloburl"))}}return Mn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',Ni=Yn.open();if(Ni!==null&&(Ni.document.write(Xn),Ni.document.title=Ae.filename),Ni||typeof safari>"u")return Ni;break;case"datauri":case"dataurl":return Yn.document.location.href=this.output("datauristring",Ae);default:return null}},qe.foo=function(){try{return qe.apply(this,arguments)}catch(et){var X=et.stack||"";~X.indexOf(" at ")&&(X=X.split(" at ")[1]);var Ae="Error in function "+X.split(`
`)[0].split("<")[0]+": "+et.message;if(!Yn.console)throw new Error(Ae);Yn.console.error(Ae,et),Yn.alert&&alert(Ae)}},qe.foo.bar=qe,qe.foo),as=function(X){return Array.isArray(Nr)===!0&&Nr.indexOf(X)>-1};switch(n){case"pt":de=1;break;case"mm":de=72/25.4;break;case"cm":de=72/2.54;break;case"in":de=72;break;case"px":de=as("px_scaling")==1?.75:96/72;break;case"pc":case"em":de=12;break;case"ex":de=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);de=n}var ia=null;He(),ge();var cu=x.__private__.getPageInfo=x.getPageInfo=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Sr[X].objId,pageNumber:X,pageContext:Sr[X]}},Bl=x.__private__.getPageInfoByObjId=function(X){if(isNaN(X)||X%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in Sr)if(Sr[Ae].objId===X)break;return cu(Ae)},jl=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Sr[_e].objId,pageNumber:_e,pageContext:Sr[_e]}};x.addPage=function(){return qi.apply(this,arguments),this},x.setPage=function(){return Di.apply(this,arguments),ut.call(this,Lt[_e]),this},x.insertPage=function(X){return this.addPage(),this.movePage(_e,X),this},x.movePage=function(X,Ae){var et,It;if(X>Ae){et=Lt[X],It=Sr[X];for(var $t=X;$t>Ae;$t--)Lt[$t]=Lt[$t-1],Sr[$t]=Sr[$t-1];Lt[Ae]=et,Sr[Ae]=It,this.setPage(Ae)}else if(X<Ae){et=Lt[X],It=Sr[X];for(var pr=X;pr<Ae;pr++)Lt[pr]=Lt[pr+1],Sr[pr]=Sr[pr+1];Lt[Ae]=et,Sr[Ae]=It,this.setPage(Ae)}return this},x.deletePage=function(){return ya.apply(this,arguments),this},x.__private__.text=x.text=function(X,Ae,et,It,$t){var pr,Er,rn,Qr,Mn,On,Xn,Ni,ta,$n=(It=It||{}).scope||this;if(typeof X=="number"&&typeof Ae=="number"&&(typeof et=="string"||Array.isArray(et))){var fa=et;et=Ae,Ae=X,X=fa}if(arguments[3]instanceof xt==0?(rn=arguments[4],Qr=arguments[5],ca(Xn=arguments[3])==="object"&&Xn!==null||(typeof rn=="string"&&(Qr=rn,rn=null),typeof Xn=="string"&&(Qr=Xn,Xn=null),typeof Xn=="number"&&(rn=Xn,Xn=null),It={flags:Xn,angle:rn,align:Qr})):(Y("The transform parameter of text() with a Matrix value"),ta=$t),isNaN(Ae)||isNaN(et)||X==null)throw new Error("Invalid arguments passed to jsPDF.text");if(X.length===0)return $n;var zi,Ma="",ss=typeof It.lineHeightFactor=="number"?It.lineHeightFactor:bi,Ks=$n.internal.scaleFactor;function fu(fn){return fn=fn.split("	").join(Array(It.TabLen||9).join(" ")),hn(fn,Xn)}function hu(fn){for(var Tn,Hn=fn.concat(),_i=[],$i=Hn.length;$i--;)typeof(Tn=Hn.shift())=="string"?_i.push(Tn):Array.isArray(fn)&&(Tn.length===1||Tn[1]===void 0&&Tn[2]===void 0)?_i.push(Tn[0]):_i.push([Tn[0],Tn[1],Tn[2]]);return _i}function bl(fn,Tn){var Hn;if(typeof fn=="string")Hn=Tn(fn)[0];else if(Array.isArray(fn)){for(var _i,$i,ra=fn.concat(),ka=[],Zo=ra.length;Zo--;)typeof(_i=ra.shift())=="string"?ka.push(Tn(_i)[0]):Array.isArray(_i)&&typeof _i[0]=="string"&&($i=Tn(_i[0],_i[1],_i[2]),ka.push([$i[0],$i[1],$i[2]]));Hn=ka}return Hn}var eo=!1,du=!0;if(typeof X=="string")eo=!0;else if(Array.isArray(X)){var _l=X.concat();Er=[];for(var Ra,wa=_l.length;wa--;)(typeof(Ra=_l.shift())!="string"||Array.isArray(Ra)&&typeof Ra[0]!="string")&&(du=!1);eo=du}if(eo===!1)throw new Error('Type of text must be string or Array. "'+X+'" is not recognized.');typeof X=="string"&&(X=X.match(/[\r?\n]/)?X.split(/\r\n|\r|\n/g):[X]);var $a=Yt/$n.internal.scaleFactor,ba=$a*(ss-1);switch(It.baseline){case"bottom":et-=ba;break;case"top":et+=$a-ba;break;case"hanging":et+=$a-2*ba;break;case"middle":et+=$a/2-ba}if((On=It.maxWidth||0)>0&&(typeof X=="string"?X=$n.splitTextToSize(X,On):Object.prototype.toString.call(X)==="[object Array]"&&(X=X.reduce(function(fn,Tn){return fn.concat($n.splitTextToSize(Tn,On))},[]))),pr={text:X,x:Ae,y:et,options:It,mutex:{pdfEscape:hn,activeFontKey:Ye,fonts:Ke,activeFontSize:Yt}},Mr.publish("preProcessText",pr),X=pr.text,rn=(It=pr.options).angle,ta instanceof xt==0&&rn&&typeof rn=="number"){rn*=Math.PI/180,It.rotationDirection===0&&(rn=-rn),D===F&&(rn=-rn);var so=Math.cos(rn),zl=Math.sin(rn);ta=new xt(so,zl,-zl,so,0,0)}else rn&&rn instanceof xt&&(ta=rn);D!==F||ta||(ta=ne),(Mn=It.charSpace||zn)!==void 0&&(Ma+=Q(ae(Mn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ni=It.horizontalScale)!==void 0&&(Ma+=Q(100*Ni)+` Tz
`),It.lang;var Wi=-1,Uc=It.renderingMode!==void 0?It.renderingMode:It.stroke,Mo=$n.internal.getCurrentPageInfo().pageContext;switch(Uc){case 0:case!1:case"fill":Wi=0;break;case 1:case!0:case"stroke":Wi=1;break;case 2:case"fillThenStroke":Wi=2;break;case 3:case"invisible":Wi=3;break;case 4:case"fillAndAddForClipping":Wi=4;break;case 5:case"strokeAndAddPathForClipping":Wi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wi=6;break;case 7:case"addToPathForClipping":Wi=7}var xl=Mo.usedRenderingMode!==void 0?Mo.usedRenderingMode:-1;Wi!==-1?Ma+=Wi+` Tr
`:xl!==-1&&(Ma+=`0 Tr
`),Wi!==-1&&(Mo.usedRenderingMode=Wi),Qr=It.align||"left";var ha,ls=Yt*ss,Uu=$n.internal.pageSize.getWidth(),pu=Ke[Ye];Mn=It.charSpace||zn,On=It.maxWidth||0,Xn=Object.assign({autoencode:!0,noBOM:!0},It.flags);var Xs=[],Ys=function(fn){return $n.getStringUnitWidth(fn,{font:pu,charSpace:Mn,fontSize:Yt,doKerning:!1})*Yt/Ks};if(Object.prototype.toString.call(X)==="[object Array]"){var Ua;Er=hu(X),Qr!=="left"&&(ha=Er.map(Ys));var Sa,us=0;if(Qr==="right"){Ae-=ha[0],X=[],wa=Er.length;for(var Oa=0;Oa<wa;Oa++)Oa===0?(Sa=Gn(Ae),Ua=aa(et)):(Sa=ae(us-ha[Oa]),Ua=-ls),X.push([Er[Oa],Sa,Ua]),us=ha[Oa]}else if(Qr==="center"){Ae-=ha[0]/2,X=[],wa=Er.length;for(var Js=0;Js<wa;Js++)Js===0?(Sa=Gn(Ae),Ua=aa(et)):(Sa=ae((us-ha[Js])/2),Ua=-ls),X.push([Er[Js],Sa,Ua]),us=ha[Js]}else if(Qr==="left"){X=[],wa=Er.length;for(var Ro=0;Ro<wa;Ro++)X.push(Er[Ro])}else if(Qr==="justify"&&pu.encoding==="Identity-H"){X=[],wa=Er.length,On=On!==0?On:Uu;for(var wl=0,Zi=0;Zi<wa;Zi++)if(Ua=Zi===0?aa(et):-ls,Sa=Zi===0?Gn(Ae):wl,Zi<wa-1){var mu=ae((On-ha[Zi])/(Er[Zi].split(" ").length-1)),vs=Er[Zi].split(" ");X.push([vs[0]+" ",Sa,Ua]),wl=0;for(var bs=1;bs<vs.length;bs++){var $l=(Ys(vs[bs-1]+" "+vs[bs])-Ys(vs[bs]))*Ks+mu;bs==vs.length-1?X.push([vs[bs],$l,0]):X.push([vs[bs]+" ",$l,0]),wl-=$l}}else X.push([Er[Zi],Sa,Ua]);X.push(["",wl,0])}else{if(Qr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(X=[],wa=Er.length,On=On!==0?On:Uu,Zi=0;Zi<wa;Zi++)Ua=Zi===0?aa(et):-ls,Sa=Zi===0?Gn(Ae):0,Zi<wa-1?Xs.push(Q(ae((On-ha[Zi])/(Er[Zi].split(" ").length-1)))):Xs.push(0),X.push([Er[Zi],Sa,Ua])}}(typeof It.R2L=="boolean"?It.R2L:lt)===!0&&(X=bl(X,function(fn,Tn,Hn){return[fn.split("").reverse().join(""),Tn,Hn]})),pr={text:X,x:Ae,y:et,options:It,mutex:{pdfEscape:hn,activeFontKey:Ye,fonts:Ke,activeFontSize:Yt}},Mr.publish("postProcessText",pr),X=pr.text,zi=pr.mutex.isHex||!1;var Ul=Ke[Ye].encoding;Ul!=="WinAnsiEncoding"&&Ul!=="StandardEncoding"||(X=bl(X,function(fn,Tn,Hn){return[fu(fn),Tn,Hn]})),Er=hu(X),X=[];for(var _s,ql,Qs,Ft=Array.isArray(Er[0])?1:0,qt="",Ur=function(fn,Tn,Hn){var _i="";return Hn instanceof xt?(Hn=typeof It.angle=="number"?Wt(Hn,new xt(1,0,0,1,fn,Tn)):Wt(new xt(1,0,0,1,fn,Tn),Hn),D===F&&(Hn=Wt(new xt(1,0,0,-1,0,0),Hn)),_i=Hn.join(" ")+` Tm
`):_i=Q(fn)+" "+Q(Tn)+` Td
`,_i},nn=0;nn<Er.length;nn++){switch(qt="",Ft){case 1:Qs=(zi?"<":"(")+Er[nn][0]+(zi?">":")"),_s=parseFloat(Er[nn][1]),ql=parseFloat(Er[nn][2]);break;case 0:Qs=(zi?"<":"(")+Er[nn]+(zi?">":")"),_s=Gn(Ae),ql=aa(et)}Xs!==void 0&&Xs[nn]!==void 0&&(qt=Xs[nn]+` Tw
`),nn===0?X.push(qt+Ur(_s,ql,ta)+Qs):Ft===0?X.push(qt+Qs):Ft===1&&X.push(qt+Ur(_s,ql,ta)+Qs)}X=Ft===0?X.join(` Tj
T* `):X.join(` Tj
`),X+=` Tj
`;var si=`BT
/`;return si+=Ye+" "+Yt+` Tf
`,si+=Q(Yt*ss)+` TL
`,si+=pn+`
`,si+=Ma,si+=X,Le(si+="ET"),w[Ye]=!0,$n};var U=x.__private__.clip=x.clip=function(X){return Le(X==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return U("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Le("n"),this};var te=x.__private__.isValidStyle=function(X){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(X)!==-1&&(Ae=!0),Ae};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(X){return te(X)&&(d=X),this};var Re=x.__private__.getStyle=x.getStyle=function(X){var Ae=d;switch(X){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=X}return Ae},dt=x.close=function(){return Le("h"),this};x.stroke=function(){return Le("S"),this},x.fill=function(X){return St("f",X),this},x.fillEvenOdd=function(X){return St("f*",X),this},x.fillStroke=function(X){return St("B",X),this},x.fillStrokeEvenOdd=function(X){return St("B*",X),this};var St=function(X,Ae){ca(Ae)==="object"?xr(Ae,X):Le(X)},yt=function(X){X===null||D===F&&X===void 0||(X=Re(X),Le(X))};function Bt(X,Ae,et,It,$t){var pr=new Hm(Ae||this.boundingBox,et||this.xStep,It||this.yStep,this.gState,$t||this.matrix);pr.stream=this.stream;var Er=X+"$$"+this.cloneIndex+++"$$";return me(Er,pr),pr}var xr=function(X,Ae){var et=Ot[X.key],It=nt[et];if(It instanceof Vd)Le("q"),Le(Ar(Ae)),It.gState&&x.setGState(It.gState),Le(X.matrix.toString()+" cm"),Le("/"+et+" sh"),Le("Q");else if(It instanceof Hm){var $t=new xt(1,0,0,-1,0,Ei());X.matrix&&($t=$t.multiply(X.matrix||ne),et=Bt.call(It,X.key,X.boundingBox,X.xStep,X.yStep,$t).id),Le("q"),Le("/Pattern cs"),Le("/"+et+" scn"),It.gState&&x.setGState(It.gState),Le(Ae),Le("Q")}},Ar=function(X){switch(X){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},jr=x.moveTo=function(X,Ae){return Le(Q(ae(X))+" "+Q(le(Ae))+" m"),this},fr=x.lineTo=function(X,Ae){return Le(Q(ae(X))+" "+Q(le(Ae))+" l"),this},Rr=x.curveTo=function(X,Ae,et,It,$t,pr){return Le([Q(ae(X)),Q(le(Ae)),Q(ae(et)),Q(le(It)),Q(ae($t)),Q(le(pr)),"c"].join(" ")),this};x.__private__.line=x.line=function(X,Ae,et,It,$t){if(isNaN(X)||isNaN(Ae)||isNaN(et)||isNaN(It)||!te($t))throw new Error("Invalid arguments passed to jsPDF.line");return D===N?this.lines([[et-X,It-Ae]],X,Ae,[1,1],$t||"S"):this.lines([[et-X,It-Ae]],X,Ae,[1,1]).stroke()},x.__private__.lines=x.lines=function(X,Ae,et,It,$t,pr){var Er,rn,Qr,Mn,On,Xn,Ni,ta,$n,fa,zi,Ma;if(typeof X=="number"&&(Ma=et,et=Ae,Ae=X,X=Ma),It=It||[1,1],pr=pr||!1,isNaN(Ae)||isNaN(et)||!Array.isArray(X)||!Array.isArray(It)||!te($t)||typeof pr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(jr(Ae,et),Er=It[0],rn=It[1],Mn=X.length,fa=Ae,zi=et,Qr=0;Qr<Mn;Qr++)(On=X[Qr]).length===2?(fa=On[0]*Er+fa,zi=On[1]*rn+zi,fr(fa,zi)):(Xn=On[0]*Er+fa,Ni=On[1]*rn+zi,ta=On[2]*Er+fa,$n=On[3]*rn+zi,fa=On[4]*Er+fa,zi=On[5]*rn+zi,Rr(Xn,Ni,ta,$n,fa,zi));return pr&&dt(),yt($t),this},x.path=function(X){for(var Ae=0;Ae<X.length;Ae++){var et=X[Ae],It=et.c;switch(et.op){case"m":jr(It[0],It[1]);break;case"l":fr(It[0],It[1]);break;case"c":Rr.apply(this,It);break;case"h":dt()}}return this},x.__private__.rect=x.rect=function(X,Ae,et,It,$t){if(isNaN(X)||isNaN(Ae)||isNaN(et)||isNaN(It)||!te($t))throw new Error("Invalid arguments passed to jsPDF.rect");return D===N&&(It=-It),Le([Q(ae(X)),Q(le(Ae)),Q(ae(et)),Q(ae(It)),"re"].join(" ")),yt($t),this},x.__private__.triangle=x.triangle=function(X,Ae,et,It,$t,pr,Er){if(isNaN(X)||isNaN(Ae)||isNaN(et)||isNaN(It)||isNaN($t)||isNaN(pr)||!te(Er))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-X,It-Ae],[$t-et,pr-It],[X-$t,Ae-pr]],X,Ae,[1,1],Er,!0),this},x.__private__.roundedRect=x.roundedRect=function(X,Ae,et,It,$t,pr,Er){if(isNaN(X)||isNaN(Ae)||isNaN(et)||isNaN(It)||isNaN($t)||isNaN(pr)||!te(Er))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rn=4/3*(Math.SQRT2-1);return $t=Math.min($t,.5*et),pr=Math.min(pr,.5*It),this.lines([[et-2*$t,0],[$t*rn,0,$t,pr-pr*rn,$t,pr],[0,It-2*pr],[0,pr*rn,-$t*rn,pr,-$t,pr],[2*$t-et,0],[-$t*rn,0,-$t,-pr*rn,-$t,-pr],[0,2*pr-It],[0,-pr*rn,$t*rn,-pr,$t,-pr]],X+$t,Ae,[1,1],Er,!0),this},x.__private__.ellipse=x.ellipse=function(X,Ae,et,It,$t){if(isNaN(X)||isNaN(Ae)||isNaN(et)||isNaN(It)||!te($t))throw new Error("Invalid arguments passed to jsPDF.ellipse");var pr=4/3*(Math.SQRT2-1)*et,Er=4/3*(Math.SQRT2-1)*It;return jr(X+et,Ae),Rr(X+et,Ae-Er,X+pr,Ae-It,X,Ae-It),Rr(X-pr,Ae-It,X-et,Ae-Er,X-et,Ae),Rr(X-et,Ae+Er,X-pr,Ae+It,X,Ae+It),Rr(X+pr,Ae+It,X+et,Ae+Er,X+et,Ae),yt($t),this},x.__private__.circle=x.circle=function(X,Ae,et,It){if(isNaN(X)||isNaN(Ae)||isNaN(et)||!te(It))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(X,Ae,et,et,It)},x.setFont=function(X,Ae,et){return et&&(Ae=Z(Ae,et)),Ye=Qa(X,Ae,{disableWarning:!1}),this};var Pn=x.__private__.getFont=x.getFont=function(){return Ke[Qa.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var X,Ae,et={};for(X in Qe)if(Qe.hasOwnProperty(X))for(Ae in et[X]=[],Qe[X])Qe[X].hasOwnProperty(Ae)&&et[X].push(Ae);return et},x.addFont=function(X,Ae,et,It,$t){var pr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&pr.indexOf(arguments[3])!==-1?$t=arguments[3]:arguments[3]&&pr.indexOf(arguments[3])==-1&&(et=Z(et,It)),ea.call(this,X,Ae,et,$t=$t||"Identity-H")};var bi,dn=e.lineWidth||.200025,Yr=x.__private__.getLineWidth=x.getLineWidth=function(){return dn},ur=x.__private__.setLineWidth=x.setLineWidth=function(X){return dn=X,Le(Q(ae(X))+" w"),this};x.__private__.setLineDash=Dn.API.setLineDash=Dn.API.setLineDashPattern=function(X,Ae){if(X=X||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(X))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return X=X.map(function(et){return Q(ae(et))}).join(" "),Ae=Q(ae(Ae)),Le("["+X+"] "+Ae+" d"),this};var Kr=x.__private__.getLineHeight=x.getLineHeight=function(){return Yt*bi};x.__private__.getLineHeight=x.getLineHeight=function(){return Yt*bi};var bn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(X){return typeof(X=X||1.15)=="number"&&(bi=X),this},va=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return bi};bn(e.lineHeight);var Gn=x.__private__.getHorizontalCoordinate=function(X){return ae(X)},aa=x.__private__.getVerticalCoordinate=function(X){return D===F?X:Sr[_e].mediaBox.topRightY-Sr[_e].mediaBox.bottomLeftY-ae(X)},ja=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(X){return Q(Gn(X))},In=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(X){return Q(aa(X))},os=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Ir(os)},x.__private__.setStrokeColor=x.setDrawColor=function(X,Ae,et,It){return os=Dr({ch1:X,ch2:Ae,ch3:et,ch4:It,pdfColorType:"draw",precision:2}),Le(os),this};var yn=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Ir(yn)},x.__private__.setFillColor=x.setFillColor=function(X,Ae,et,It){return yn=Dr({ch1:X,ch2:Ae,ch3:et,ch4:It,pdfColorType:"fill",precision:2}),Le(yn),this};var pn=e.textColor||"0 g",Po=x.__private__.getTextColor=x.getTextColor=function(){return Ir(pn)};x.__private__.setTextColor=x.setTextColor=function(X,Ae,et,It){return pn=Dr({ch1:X,ch2:Ae,ch3:et,ch4:It,pdfColorType:"text",precision:3}),this};var zn=e.charSpace,ao=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(zn||0)};x.__private__.setCharSpace=x.setCharSpace=function(X){if(isNaN(X))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zn=X,this};var oo=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(X){var Ae=x.CapJoinStyles[X];if(Ae===void 0)throw new Error("Line cap style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oo=Ae,Le(Ae+" J"),this};var To=0;x.__private__.setLineJoin=x.setLineJoin=function(X){var Ae=x.CapJoinStyles[X];if(Ae===void 0)throw new Error("Line join style of '"+X+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return To=Ae,Le(Ae+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(X){if(X=X||0,isNaN(X))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Le(Q(ae(X))+" M"),this},x.GState=r1,x.setGState=function(X){(X=typeof X=="string"?Gt[ir[X]]:Ms(null,X)).equals(Pr)||(Le("/"+X.id+" gs"),Pr=X)};var Ms=function(X,Ae){if(!X||!ir[X]){var et=!1;for(var It in Gt)if(Gt.hasOwnProperty(It)&&Gt[It].equals(Ae)){et=!0;break}if(et)Ae=Gt[It];else{var $t="GS"+(Object.keys(Gt).length+1).toString(10);Gt[$t]=Ae,Ae.id=$t}return X&&(ir[X]=Ae.id),Mr.publish("addGState",Ae),Ae}};x.addGState=function(X,Ae){return Ms(X,Ae),this},x.saveGraphicsState=function(){return Le("q"),wt.push({key:Ye,size:Yt,color:pn}),this},x.restoreGraphicsState=function(){Le("Q");var X=wt.pop();return Ye=X.key,Yt=X.size,pn=X.color,Pr=null,this},x.setCurrentTransformationMatrix=function(X){return Le(X.toString()+" cm"),this},x.comment=function(X){return Le("#"+X),this};var gl=function(X,Ae){var et=X||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(pr){isNaN(pr)||(et=parseFloat(pr))}});var It=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return It},set:function(pr){isNaN(pr)||(It=parseFloat(pr))}});var $t="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $t},set:function(pr){$t=pr.toString()}}),this},Ws=function(X,Ae,et,It){gl.call(this,X,Ae),this.type="rect";var $t=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $t},set:function(Er){isNaN(Er)||($t=parseFloat(Er))}});var pr=It||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return pr},set:function(Er){isNaN(Er)||(pr=parseFloat(Er))}}),this},Zs=function(){this.page=bt,this.currentPage=_e,this.pages=Lt.slice(0),this.pagesContext=Sr.slice(0),this.x=he,this.y=Me,this.matrix=Ue,this.width=vl(_e),this.height=Ei(_e),this.outputDestination=Pt,this.id="",this.objectNumber=-1};Zs.prototype.restore=function(){bt=this.page,_e=this.currentPage,Sr=this.pagesContext,Lt=this.pages,he=this.x,Me=this.y,Ue=this.matrix,Io(_e,this.width),za(_e,this.height),Pt=this.outputDestination};var yl=function(X,Ae,et,It,$t){gt.push(new Zs),bt=_e=0,Lt=[],he=X,Me=Ae,Ue=$t,Jn([et,It])};for(var Rs in x.beginFormObject=function(X,Ae,et,It,$t){return yl(X,Ae,et,It,$t),this},x.endFormObject=function(X){return(function(Ae){if(Vr[Ae])gt.pop().restore();else{var et=new Zs,It="Xo"+(Object.keys(en).length+1).toString(10);et.id=It,Vr[Ae]=It,en[It]=et,Mr.publish("addFormObject",et),gt.pop().restore()}})(X),this},x.doFormObject=function(X,Ae){var et=en[Vr[X]];return Le("q"),Le(Ae.toString()+" cm"),Le("/"+et.id+" Do"),Le("Q"),this},x.getFormObject=function(X){var Ae=en[Vr[X]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},x.save=function(X,Ae){return X=X||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?($d(ml(Hs()),X),typeof $d.unload=="function"&&Yn.setTimeout&&setTimeout($d.unload,911),this):new Promise(function(et,It){try{var $t=$d(ml(Hs()),X);typeof $d.unload=="function"&&Yn.setTimeout&&setTimeout($d.unload,911),et($t)}catch(pr){It(pr.message)}})},Dn.API)Dn.API.hasOwnProperty(Rs)&&(Rs==="events"&&Dn.API.events.length?(function(X,Ae){var et,It,$t;for($t=Ae.length-1;$t!==-1;$t--)et=Ae[$t][0],It=Ae[$t][1],X.subscribe.apply(X,[et].concat(typeof It=="function"?[It]:It))})(Mr,Dn.API.events):x[Rs]=Dn.API[Rs]);var vl=x.getPageWidth=function(X){return(Sr[X=X||_e].mediaBox.topRightX-Sr[X].mediaBox.bottomLeftX)/de},Io=x.setPageWidth=function(X,Ae){Sr[X].mediaBox.topRightX=Ae*de+Sr[X].mediaBox.bottomLeftX},Ei=x.getPageHeight=function(X){return(Sr[X=X||_e].mediaBox.topRightY-Sr[X].mediaBox.bottomLeftY)/de},za=x.setPageHeight=function(X,Ae){Sr[X].mediaBox.topRightY=Ae*de+Sr[X].mediaBox.bottomLeftY};return x.internal={pdfEscape:hn,getStyle:Re,getFont:Pn,getFontSize:tt,getCharSpace:ao,getTextColor:Po,getLineHeight:Kr,getLineHeightFactor:va,getLineWidth:Yr,write:sr,getHorizontalCoordinate:Gn,getVerticalCoordinate:aa,getCoordinateString:ja,getVerticalCoordinateString:In,collections:{},newObject:je,newAdditionalObject:Tr,newObjectDeferred:jt,newObjectDeferredBegin:Jt,getFilters:Sn,putStream:vn,events:Mr,scaleFactor:de,pageSize:{getWidth:function(){return vl(_e)},setWidth:function(X){Io(_e,X)},getHeight:function(){return Ei(_e)},setHeight:function(X){za(_e,X)}},encryptionOptions:m,encryption:ia,getEncryptor:function(X){return m!==null?ia.encryptor(X,0):function(Ae){return Ae}},output:Wo,getNumberOfPages:hi,pages:Lt,out:Le,f2:W,f3:G,getPageInfo:cu,getPageInfoByObjId:Bl,getCurrentPageInfo:jl,getPDFVersion:T,Point:gl,Rectangle:Ws,Matrix:xt,hasHotfix:as},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return vl(_e)},set:function(X){Io(_e,X)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Ei(_e)},set:function(X){za(_e,X)},enumerable:!0,configurable:!0}),(function(X){for(var Ae=0,et=dr.length;Ae<et;Ae++){var It=ea.call(this,X[Ae][0],X[Ae][1],X[Ae][2],dr[Ae][3],!0);v===!1&&(w[It]=!0);var $t=X[Ae][0].split("-");Qi({id:It,fontName:$t[0],fontStyle:$t[1]||""})}Mr.publish("addFonts",{fonts:Ke,dictionary:Qe})}).call(x,dr),Ye="F1",qi(i,r),Mr.publish("initialized"),x}Em.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Em.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Em.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Em.prototype.processOwnerPassword=function(e,t){return XP(KP(t).substr(0,5),e)},Em.prototype.encryptor=function(e,t){var r=KP(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return XP(r,n)}},r1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ca(e)!==ca(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Dn.API={events:[]},Dn.version="3.0.2";var So=Dn.API,RI=1,Sp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ai=function(e){return e.toFixed(2)},kh=function(e){return e.toFixed(5)};So.__acroform__={};var au=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},W4=function(e){return e*RI},sf=function(e){var t=new IU,r=xn.internal.getHeight(e)||0,n=xn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ai(n)),Number(ai(r))],t},iue=So.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},aue=So.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},oue=So.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},jo=So.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return oue(e,t-1)},zo=So.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iue(e,t-1)},$o=So.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return aue(e,t-1)},sue=So.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],u=e[2],a=e[3],p={};return p.lowerLeft_X=r(i)||0,p.lowerLeft_Y=n(o+a)||0,p.upperRight_X=r(i+u)||0,p.upperRight_Y=n(o)||0,[Number(ai(p.lowerLeft_X)),Number(ai(p.lowerLeft_Y)),Number(ai(p.upperRight_X)),Number(ai(p.upperRight_Y))]},lue=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=YP(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+ai(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=sf(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},YP=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(W){return W.split(`
`)}):i.map(function(W){return[W]});var o=r,u=xn.internal.getHeight(e)||0;u=u<0?-u:u;var a=xn.internal.getWidth(e)||0;a=a<0?-a:a;var p=function(W,G,ae){if(W+1<i.length){var le=G+" "+i[W+1][0];return jb(le,e,ae).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var d,m,v=jb("3",e,o).height,w=e.multiline?u-o:(u-v)/2,x=w+=2,P=0,T=0,O=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+jb(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var L="",N=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var D=!1;if(i[F].length!==1&&O!==i[F].length-1){if((v+2)*(N+2)+2>u)continue e;L+=i[F][O],D=!0,T=F,F--}else{L=(L+=i[F][O]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var q=parseInt(F),z=p(q,L,o),Z=F>=i.length-1;if(z&&!Z){L+=" ",O=0;continue}if(z||Z){if(Z)T=q;else if(e.multiline&&(v+2)*(N+2)+2>u)continue e}else{if(!e.multiline||(v+2)*(N+2)+2>u)continue e;T=q}}for(var Q="",Y=P;Y<=T;Y++){var se=i[Y];if(e.multiline){if(Y===T){Q+=se[O]+" ",O=(O+1)%se.length;continue}if(Y===P){Q+=se[se.length-1]+" ";continue}}Q+=se[0]+" "}switch(Q=Q.substr(Q.length-1)==" "?Q.substr(0,Q.length-1):Q,m=jb(Q,e,o).width,e.textAlign){case"right":d=a-m-2;break;case"center":d=(a-m)/2;break;default:d=2}t+=ai(d)+" "+ai(x)+` Td
`,t+="("+Sp(Q)+`) Tj
`,t+=-ai(d)+` 0 Td
`,x=-(o+2),m=0,P=D?T:T+1,N++,L=""}break}return n.text=t,n.fontSize=o,n},jb=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},uue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},cue=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},fue=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Dc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(uue)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");RI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new MU,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&cue(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var u in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(u)){var a=n[u],p=[],d=a.Rect;if(a.Rect&&(a.Rect=sue(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=xn.createDefaultAppearanceStream(a),ca(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(p=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var m=lue(a);p.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(a.appearanceStreamContent){var v="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var x=a.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var P=x[u];typeof P=="function"&&(P=P.call(i,a)),v+="/"+u+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=x)=="function"&&(P=P.call(i,a)),v+="/"+u+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);v+=">>"}p.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:p,objectId:a.objId}),i.internal.out("endobj")}o&&(function(T,O){for(var L in T)if(T.hasOwnProperty(L)){var N=L,F=T[L];O.internal.newObjectDeferredBegin(F.objId,!0),ca(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete T[N]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},TU=So.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(u){return u};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),ca(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+Sp(n(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},e5=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Sp(n(e))+")"},mf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mf.prototype.toString=function(){return this.objId+" 0 R"},mf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},mf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:TU(i,this.objId,this.scope)}):i instanceof mf?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var IU=function(){mf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};au(IU,mf);var MU=function(){mf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Sp(r(e))+")"}},set:function(r){e=r}})};au(MU,mf);var Dc=function e(){mf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');t=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jo(t,3)},set:function(L){L?this.F=zo(t,3):this.F=$o(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');r=L}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(L){n=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(L){n[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(L){n[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(L){n[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(L){n[3]=L}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof n1)return;o="FieldObject"+e.FieldNum++}var L=function(N){return N};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+Sp(L(o))+")"},set:function(L){o=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(L){o=L}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(L){u=L}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(L){a=L}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(L){p=L}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/RI:d},set:function(L){d=L}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(L){m=L}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof n1||this instanceof ap))return e5(v,this.objId,this.scope)},set:function(L){L=L.toString(),v=L}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Is==0?e5(w,this.objId,this.scope):w},set:function(L){L=L.toString(),w=this instanceof Is==0?L.substr(0,1)==="("?dm(L.substr(1,L.length-2)):dm(L):L}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?dm(w.substr(1,w.length-1)):w},set:function(L){L=L.toString(),w=this instanceof Is==1?"/"+L:L}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Is==0?e5(x,this.objId,this.scope):x},set:function(L){L=L.toString(),x=this instanceof Is==0?L.substr(0,1)==="("?dm(L.substr(1,L.length-2)):dm(L):L}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?dm(x.substr(1,x.length-1)):x},set:function(L){L=L.toString(),x=this instanceof Is==1?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(L){L=!!L,T=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(L){P=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,1)},set:function(L){L?this.Ff=zo(this.Ff,1):this.Ff=$o(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,2)},set:function(L){L?this.Ff=zo(this.Ff,2):this.Ff=$o(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,3)},set:function(L){L?this.Ff=zo(this.Ff,3):this.Ff=$o(this.Ff,3)}});var O=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(O!==null)return O},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');O=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(O){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:O=2;break;case"center":case 1:O=1;break;default:O=0}}})};au(Dc,mf);var eg=function(){Dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TU(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(o,u,a){a||(a=1);for(var p,d=[];p=u.exec(o);)d.push(p[a]);return d})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,18)},set:function(r){r?this.Ff=zo(this.Ff,18):this.Ff=$o(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=zo(this.Ff,19):this.Ff=$o(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,20)},set:function(r){r?(this.Ff=zo(this.Ff,20),t.sort()):this.Ff=$o(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,22)},set:function(r){r?this.Ff=zo(this.Ff,22):this.Ff=$o(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,23)},set:function(r){r?this.Ff=zo(this.Ff,23):this.Ff=$o(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,27)},set:function(r){r?this.Ff=zo(this.Ff,27):this.Ff=$o(this.Ff,27)}}),this.hasAppearanceStream=!1};au(eg,Dc);var tg=function(){eg.call(this),this.fontName="helvetica",this.combo=!1};au(tg,eg);var rg=function(){tg.call(this),this.combo=!0};au(rg,tg);var E_=function(){rg.call(this),this.edit=!0};au(E_,rg);var Is=function(){Dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,15)},set:function(r){r?this.Ff=zo(this.Ff,15):this.Ff=$o(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,16)},set:function(r){r?this.Ff=zo(this.Ff,16):this.Ff=$o(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,17)},set:function(r){r?this.Ff=zo(this.Ff,17):this.Ff=$o(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,26)},set:function(r){r?this.Ff=zo(this.Ff,26):this.Ff=$o(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+Sp(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){ca(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};au(Is,Dc);var C_=function(){Is.call(this),this.pushButton=!0};au(C_,Is);var ng=function(){Is.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};au(ng,Is);var n1=function(){var e,t;Dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),n)u.push("/"+o+" ("+Sp(i(n[o]))+")");return u.push(">>"),u.join(`
`)},set:function(i){ca(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};au(n1,Dc),ng.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ng.prototype.createOption=function(e){var t=new n1;return t.Parent=this,t.optionName=e,this.Kids.push(t),hue.call(this.scope,t),t};var A_=function(){Is.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xn.CheckBox.createAppearanceStream()};au(A_,Is);var ap=function(){Dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,13)},set:function(t){t?this.Ff=zo(this.Ff,13):this.Ff=$o(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,21)},set:function(t){t?this.Ff=zo(this.Ff,21):this.Ff=$o(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,23)},set:function(t){t?this.Ff=zo(this.Ff,23):this.Ff=$o(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,24)},set:function(t){t?this.Ff=zo(this.Ff,24):this.Ff=$o(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,25)},set:function(t){t?this.Ff=zo(this.Ff,25):this.Ff=$o(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,26)},set:function(t){t?this.Ff=zo(this.Ff,26):this.Ff=$o(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};au(ap,Dc);var P_=function(){ap.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jo(this.Ff,14)},set:function(e){e?this.Ff=zo(this.Ff,14):this.Ff=$o(this.Ff,14)}}),this.password=!0};au(P_,ap);var xn={CheckBox:{createAppearanceStream:function(){return{N:{On:xn.CheckBox.YesNormal},D:{On:xn.CheckBox.YesPushDown,Off:xn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=YP(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ai(xn.internal.getWidth(e))+" "+ai(xn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ai(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=sf(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=xn.internal.getHeight(e),u=xn.internal.getWidth(e),a=YP(e,e.caption);return i.push("1 g"),i.push("0 0 "+ai(u)+" "+ai(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ai(u-1)+" "+ai(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+ai(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ai(xn.internal.getWidth(e))+" "+ai(xn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xn.RadioButton.Circle.YesNormal,t.D[e]=xn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=sf(e);t.scope=e.scope;var r=[],n=xn.internal.getWidth(e)<=xn.internal.getHeight(e)?xn.internal.getWidth(e)/4:xn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=xn.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+kh(xn.internal.getWidth(e)/2)+" "+kh(xn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=[],n=xn.internal.getWidth(e)<=xn.internal.getHeight(e)?xn.internal.getWidth(e)/4:xn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*xn.internal.Bezier_C).toFixed(5)),u=Number((n*xn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kh(xn.internal.getWidth(e)/2)+" "+kh(xn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+kh(xn.internal.getWidth(e)/2)+" "+kh(xn.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=[],n=xn.internal.getWidth(e)<=xn.internal.getHeight(e)?xn.internal.getWidth(e)/4:xn.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*xn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+kh(xn.internal.getWidth(e)/2)+" "+kh(xn.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xn.RadioButton.Cross.YesNormal,t.D[e]=xn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=sf(e);t.scope=e.scope;var r=[],n=xn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ai(xn.internal.getWidth(e)-2)+" "+ai(xn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ai(n.x1.x)+" "+ai(n.x1.y)+" m"),r.push(ai(n.x2.x)+" "+ai(n.x2.y)+" l"),r.push(ai(n.x4.x)+" "+ai(n.x4.y)+" m"),r.push(ai(n.x3.x)+" "+ai(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=xn.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ai(xn.internal.getWidth(e))+" "+ai(xn.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ai(xn.internal.getWidth(e)-2)+" "+ai(xn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ai(r.x1.x)+" "+ai(r.x1.y)+" m"),n.push(ai(r.x2.x)+" "+ai(r.x2.y)+" l"),n.push(ai(r.x4.x)+" "+ai(r.x4.y)+" m"),n.push(ai(r.x3.x)+" "+ai(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=sf(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ai(xn.internal.getWidth(e))+" "+ai(xn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};xn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xn.internal.getWidth(e),r=xn.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},xn.internal.getWidth=function(e){var t=0;return ca(e)==="object"&&(t=W4(e.Rect[2])),t},xn.internal.getHeight=function(e){var t=0;return ca(e)==="object"&&(t=W4(e.Rect[3])),t};var hue=So.addField=function(e){if(fue(this,e),!(e instanceof Dc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};So.AcroFormChoiceField=eg,So.AcroFormListBox=tg,So.AcroFormComboBox=rg,So.AcroFormEditBox=E_,So.AcroFormButton=Is,So.AcroFormPushButton=C_,So.AcroFormRadioButton=ng,So.AcroFormCheckBox=A_,So.AcroFormTextField=ap,So.AcroFormPasswordField=P_,So.AcroFormAppearance=xn,So.AcroForm={ChoiceField:eg,ListBox:tg,ComboBox:rg,EditBox:E_,Button:Is,PushButton:C_,RadioButton:ng,CheckBox:A_,TextField:ap,PasswordField:P_,Appearance:xn},Dn.AcroForm={ChoiceField:eg,ListBox:tg,ComboBox:rg,EditBox:E_,Button:Is,PushButton:C_,RadioButton:ng,CheckBox:A_,TextField:ap,PasswordField:P_,Appearance:xn};Dn.AcroForm;function RU(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(W,G){var ae,le,ue,ye,Se,ge=r;if((G=G||r)==="RGBA"||W.data!==void 0&&W.data instanceof Uint8ClampedArray&&"height"in W&&"width"in W)return"RGBA";if(z(W))for(Se in n)for(ue=n[Se],ae=0;ae<ue.length;ae+=1){for(ye=!0,le=0;le<ue[ae].length;le+=1)if(ue[ae][le]!==void 0&&ue[ae][le]!==W[le]){ye=!1;break}if(ye===!0){ge=Se;break}}else for(Se in n)for(ue=n[Se],ae=0;ae<ue.length;ae+=1){for(ye=!0,le=0;le<ue[ae].length;le+=1)if(ue[ae][le]!==void 0&&ue[ae][le]!==W.charCodeAt(le)){ye=!1;break}if(ye===!0){ge=Se;break}}return ge===r&&G!==r&&(ge=G),ge},o=function W(G){for(var ae=this.internal.write,le=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var ye=[];if(ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Image"}),ye.push({key:"Width",value:G.width}),ye.push({key:"Height",value:G.height}),G.colorSpace===L.INDEXED?ye.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(ye.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===L.DEVICE_CMYK&&ye.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ye.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&ye.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var Se="",ge=0,xe=G.transparency.length;ge<xe;ge++)Se+=G.transparency[ge]+" "+G.transparency[ge]+" ";ye.push({key:"Mask",value:"["+Se+"]"})}G.sMask!==void 0&&ye.push({key:"SMask",value:G.objectId+1+" 0 R"});var Fe=G.filter!==void 0?["/"+G.filter]:void 0;if(le({data:G.data,additionalKeyValues:ye,alreadyAppliedFilters:Fe,objectId:G.objectId}),ae("endobj"),"sMask"in G&&G.sMask!==void 0){var He=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,pe={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:He,data:G.sMask};"filter"in G&&(pe.filter=G.filter),W.call(this,pe)}if(G.colorSpace===L.INDEXED){var _e=this.internal.newObject();le({data:Q(new Uint8Array(G.palette)),objectId:_e}),ae("endobj")}},u=function(){var W=this.internal.collections[t+"images"];for(var G in W)o.call(this,W[G])},a=function(){var W,G=this.internal.collections[t+"images"],ae=this.internal.write;for(var le in G)ae("/I"+(W=G[le]).index,W.objectId,"0","R")},p=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",a))},d=function(){var W=this.internal.collections[t+"images"];return p.call(this),W},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},v=function(W){return typeof e["process"+W.toUpperCase()]=="function"},w=function(W){return ca(W)==="object"&&W.nodeType===1},x=function(W,G){if(W.nodeName==="IMG"&&W.hasAttribute("src")){var ae=""+W.getAttribute("src");if(ae.indexOf("data:image/")===0)return S_(unescape(ae).split("base64,").pop());var le=e.loadFile(ae,!0);if(le!==void 0)return le}if(W.nodeName==="CANVAS"){if(W.width===0||W.height===0)throw new Error("Given canvas must have data. Canvas width: "+W.width+", height: "+W.height);var ue;switch(G){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return S_(W.toDataURL(ue,1).split("base64,").pop())}},P=function(W){var G=this.internal.collections[t+"images"];if(G){for(var ae in G)if(W===G[ae].alias)return G[ae]}},T=function(W,G,ae){return W||G||(W=-96,G=-96),W<0&&(W=-1*ae.width*72/W/this.internal.scaleFactor),G<0&&(G=-1*ae.height*72/G/this.internal.scaleFactor),W===0&&(W=G*ae.width/ae.height),G===0&&(G=W*ae.height/ae.width),[W,G]},O=function(W,G,ae,le,ue,ye){var Se=T.call(this,ae,le,ue),ge=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Fe=d.call(this);if(ae=Se[0],le=Se[1],Fe[ue.index]=ue,ye){ye*=Math.PI/180;var He=Math.cos(ye),pe=Math.sin(ye),_e=function(ke){return ke.toFixed(4)},Ce=[_e(He),_e(pe),_e(-1*pe),_e(He),0,0,"cm"]}this.internal.write("q"),ye?(this.internal.write([1,"0","0",1,ge(W),xe(G+le),"cm"].join(" ")),this.internal.write(Ce.join(" ")),this.internal.write([ge(ae),"0","0",ge(le),"0","0","cm"].join(" "))):this.internal.write([ge(ae),"0","0",ge(le),ge(W),xe(G+le),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},L=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(W){var G,ae,le=0;if(typeof W=="string")for(ae=W.length,G=0;G<ae;G++)le=(le<<5)-le+W.charCodeAt(G),le|=0;else if(z(W))for(ae=W.byteLength/2,G=0;G<ae;G++)le=(le<<5)-le+W[G],le|=0;return le},D=e.__addimage__.validateStringAsBase64=function(W){(W=W||"").toString().trim();var G=!0;return W.length===0&&(G=!1),W.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(W.substr(0,W.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(W.substr(-2))===!1&&(G=!1),G},q=e.__addimage__.extractImageFromDataUrl=function(W){if(W==null||!(W=W.trim()).startsWith("data:"))return null;var G=W.indexOf(",");return G<0?null:W.substring(0,G).trim().endsWith("base64")?W.substring(G+1):null};e.__addimage__.isArrayBuffer=function(W){return W instanceof ArrayBuffer};var z=e.__addimage__.isArrayBufferView=function(W){return W instanceof Int8Array||W instanceof Uint8Array||W instanceof Uint8ClampedArray||W instanceof Int16Array||W instanceof Uint16Array||W instanceof Int32Array||W instanceof Uint32Array||W instanceof Float32Array||W instanceof Float64Array},Z=e.__addimage__.binaryStringToUint8Array=function(W){for(var G=W.length,ae=new Uint8Array(G),le=0;le<G;le++)ae[le]=W.charCodeAt(le);return ae},Q=e.__addimage__.arrayBufferToBinaryString=function(W){for(var G="",ae=z(W)?W:new Uint8Array(W),le=0;le<ae.length;le+=8192)G+=String.fromCharCode.apply(null,ae.subarray(le,le+8192));return G};e.addImage=function(){var W,G,ae,le,ue,ye,Se,ge,xe;if(typeof arguments[1]=="number"?(G=r,ae=arguments[1],le=arguments[2],ue=arguments[3],ye=arguments[4],Se=arguments[5],ge=arguments[6],xe=arguments[7]):(G=arguments[1],ae=arguments[2],le=arguments[3],ue=arguments[4],ye=arguments[5],Se=arguments[6],ge=arguments[7],xe=arguments[8]),ca(W=arguments[0])==="object"&&!w(W)&&"imageData"in W){var Fe=W;W=Fe.imageData,G=Fe.format||G||r,ae=Fe.x||ae||0,le=Fe.y||le||0,ue=Fe.w||Fe.width||ue,ye=Fe.h||Fe.height||ye,Se=Fe.alias||Se,ge=Fe.compression||ge,xe=Fe.rotation||Fe.angle||xe}var He=this.internal.getFilters();if(ge===void 0&&He.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(ae)||isNaN(le))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var pe=Y.call(this,W,G,Se,ge);return O.call(this,ae,le,ue,ye,pe,xe),this};var Y=function(W,G,ae,le){var ue,ye,Se;if(typeof W=="string"&&i(W)===r){W=unescape(W);var ge=se(W,!1);(ge!==""||(ge=e.loadFile(W,!0))!==void 0)&&(W=ge)}if(w(W)&&(W=x(W,G)),G=i(W,G),!v(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((Se=ae)==null||Se.length===0)&&(ae=(function(xe){return typeof xe=="string"||z(xe)?F(xe):z(xe.data)?F(xe.data):null})(W)),(ue=P.call(this,ae))||(W instanceof Uint8Array||G==="RGBA"||(ye=W,W=Z(W)),ue=this["process"+G.toUpperCase()](W,m.call(this),ae,(function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in e.image_compression?xe:N.NONE})(le),ye)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},se=e.__addimage__.convertBase64ToBinaryString=function(W,G){G=typeof G!="boolean"||G;var ae,le="";if(typeof W=="string"){var ue;ae=(ue=q(W))!==null&&ue!==void 0?ue:W;try{le=S_(ae)}catch(ye){if(G)throw D(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ye.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};e.getImageProperties=function(W){var G,ae,le="";if(w(W)&&(W=x(W)),typeof W=="string"&&i(W)===r&&((le=se(W,!1))===""&&(le=e.loadFile(W)||""),W=le),ae=i(W),!v(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(W instanceof Uint8Array||(W=Z(W)),!(G=this["process"+ae.toUpperCase()](W)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=ae,G}})(Dn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Dn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,u=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,m=!1,v=0;v<d.length&&!m;v++)switch((n=d[v]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var w=0;w<d.length;w++){n=d[w];var x=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),O=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(T.objId),N=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+x(L(n.contents))+")",o+=" /Popup "+O.objId+" 0 R",o+=" /P "+p.objId+" 0 R",o+=" /T ("+x(L(N))+") >>",T.content=o;var F=T.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(o+=" /Open true"),o+=" >>",O.content=o,this.internal.write(T.objId,"0 R",O.objId,"0 R");break;case"freetext":i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+x(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+x(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var z=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+z+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,u){var a=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:p(r),y:d(n),w:p(r+i),h:d(n+o)},options:u,type:"link"})},e.textWithLink=function(r,n,i,o){var u,a,p=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var m=this.splitTextToSize(r,a).length;u=Math.ceil(d*m)}else a=p,u=d;return this.text(r,n,i,o),i+=.2*d,o.align==="center"&&(n-=p/2),o.align==="right"&&(n-=p),this.link(n,i-d,a,u,o),p},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Dn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(T){return t[T.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},a=e.__arabicParser__.isArabicEndLetter=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length<=2},p=e.__arabicParser__.isArabicAlfLetter=function(T){return u(T)&&i.indexOf(T.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length==4},v=e.__arabicParser__.resolveLigatures=function(T){var O=0,L=r,N="",F=0;for(O=0;O<T.length;O+=1)L[T.charCodeAt(O)]!==void 0?(F++,typeof(L=L[T.charCodeAt(O)])=="number"&&(N+=String.fromCharCode(L),L=r,F=0),O===T.length-1&&(L=r,N+=T.charAt(O-(F-1)),O-=F-1,F=0)):(L=r,N+=T.charAt(O-F),O-=F,F=0);return N};e.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&n[T.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(T,O,L){return u(T)?o(T)===!1?-1:!d(T)||!u(O)&&!u(L)||!u(L)&&a(O)||a(T)&&!u(O)||a(T)&&p(O)||a(T)&&a(O)?0:m(T)&&u(O)&&!a(O)&&u(L)&&d(L)?3:a(T)||!u(L)?1:2:-1},x=function(T){var O=0,L=0,N=0,F="",D="",q="",z=(T=T||"").split("\\s+"),Z=[];for(O=0;O<z.length;O+=1){for(Z.push(""),L=0;L<z[O].length;L+=1)F=z[O][L],D=z[O][L-1],q=z[O][L+1],u(F)?(N=w(F,D,q),Z[O]+=N!==-1?String.fromCharCode(t[F.charCodeAt(0)][N]):F):Z[O]+=F;Z[O]=v(Z[O])}return Z.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var T,O=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(O)){var N=0;for(L=[],N=0;N<O.length;N+=1)Array.isArray(O[N])?L.push([x(O[N][0]),O[N][1],O[N][2]]):L.push([x(O[N])]);T=L}else T=x(O);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};e.events.push(["preProcessText",P])})(Dn.API),Dn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(a){u=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Dn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(T){p=T}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(T){d=T}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(T){m=T}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(T){P=T}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(p){return n.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},e.getTextDimensions=function(p,d){n.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),v=d.font||this.getFont(),w=d.scaleFactor||this.internal.scaleFactor,x=0,P=0,T=0,O=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var L=d.maxWidth;L>0?typeof p=="string"?p=this.splitTextToSize(p,L):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(F,D){return F.concat(O.splitTextToSize(D,L))},[])):p=Array.isArray(p)?p:[p];for(var N=0;N<p.length;N++)x<(T=this.getStringUnitWidth(p[N],{font:v})*m)&&(x=T);return x!==0&&(P=p.length),{w:x/=w,h:Math.max((P*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var p=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var p;p=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===p.lineNumber?(p.x=(d.x||0)+(d.width||0),p.y=d.y||0):d.y+d.height+p.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=v.top,x&&w&&(this.printHeaderRow(p.lineNumber,!0),p.y+=w[0].height)):p.y=d.y+d.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,r===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-m,p.y+m,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+m,{align:"center",baseline:"top",maxWidth:p.width-m-m}):this.text(p.text,p.x+m,p.y+m,{align:"left",baseline:"top",maxWidth:p.width-m-m})),this.internal.__cell__.lastCell=p,this};e.table=function(p,d,m,v,w){if(n.call(this),!m)throw new Error("No data for PDF table.");var x,P,T,O,L=[],N=[],F=[],D={},q={},z=[],Z=[],Q=(w=w||{}).autoSize||!1,Y=w.printHeaders!==!1,se=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,W=w.margins||Object.assign({width:this.getPageWidth()},t),G=typeof w.padding=="number"?w.padding:3,ae=w.headerBackgroundColor||"#c8c8c8",le=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=W,this.internal.__cell__.table_font_size=se,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=le,this.setFontSize(se),v==null)N=L=Object.keys(m[0]),F=L.map(function(){return"left"});else if(Array.isArray(v)&&ca(v[0])==="object")for(L=v.map(function(Fe){return Fe.name}),N=v.map(function(Fe){return Fe.prompt||Fe.name||""}),F=v.map(function(Fe){return Fe.align||"left"}),x=0;x<v.length;x+=1)q[v[x].name]=.7499990551181103*v[x].width;else Array.isArray(v)&&typeof v[0]=="string"&&(N=L=v,F=L.map(function(){return"left"}));if(Q||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<L.length;x+=1){for(D[O=L[x]]=m.map(function(Fe){return Fe[O]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(N[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=D[O],this.setFont(void 0,"normal"),T=0;T<P.length;T+=1)z.push(this.getTextDimensions(P[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[O]=Math.max.apply(null,z)+G+G,z=[]}if(Y){var ue={};for(x=0;x<L.length;x+=1)ue[L[x]]={},ue[L[x]].text=N[x],ue[L[x]].align=F[x];var ye=a.call(this,ue,q);Z=L.map(function(Fe){return new o(p,d,q[Fe],ye,ue[Fe].text,void 0,ue[Fe].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Se=v.reduce(function(Fe,He){return Fe[He.name]=He.align,Fe},{});for(x=0;x<m.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:m[x]},this);var ge=a.call(this,m[x],q);for(T=0;T<L.length;T+=1){var xe=m[x][L[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:T,data:xe},this),u.call(this,new o(p,d,q[L[T]],ge,xe,x+2,Se[L[T]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=d,this};var a=function(p,d){var m=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(p).map(function(x){var P=p[x];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,d[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/w+m+m},this).reduce(function(x,P){return Math.max(x,P)},0)};e.setTableHeaderRow=function(p){n.call(this),this.internal.__cell__.tableHeaderRow=p},e.printHeaderRow=function(p,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,w.push(m)),m.lineNumber=p;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(P)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),r=!1}})(Dn.API);var OU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kU=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],JP=RU(kU),LU=[100,200,300,400,500,600,700,800,900],due=RU(LU);function t5(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return OU[o=o||"normal"]?o:"normal"})(e.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),i=(function(o){return typeof JP[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function Z4(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var pue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},K4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function X4(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Y4(e){return e.trimLeft()}function mue(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function gue(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zb,J4,Q4,pm,$b,eD,tD,rD,r5=["times"];function nD(e,t,r,n){var i=4,o=aD;switch(n){case Dn.API.image_compression.FAST:i=1,o=iD;break;case Dn.API.image_compression.MEDIUM:i=6,o=oD;break;case Dn.API.image_compression.SLOW:i=9,o=sD}e=(function(a,p,d,m){for(var v,w=a.length/p,x=new Uint8Array(a.length+w),P=[yue,iD,aD,oD,sD],T=0;T<w;T+=1){var O=T*p,L=a.subarray(O,O+p);if(m)x.set(m(L,d,v),O+T);else{for(var N=P.length,F=[],D=0;D<N;D+=1)F[D]=P[D](L,d,v);var q=bue(F.concat());x.set(F[q],O+T)}v=L}return x})(e,t,r,o);var u=GP(e,{level:i});return Dn.API.__addimage__.arrayBufferToBinaryString(u)}function yue(e){var t=Array.apply([],e);return t.unshift(0),t}function iD(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var o=e[i-t]||0;n[i+1]=e[i]-o+256&255}return n}function aD(e,t,r){var n=e.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var u=r&&r[o]||0;i[o+1]=e[o]-u+256&255}return i}function oD(e,t,r){var n=e.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var u=e[o-t]||0,a=r&&r[o]||0;i[o+1]=e[o]+256-(u+a>>>1)&255}return i}function sD(e,t,r){var n=e.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var u=vue(e[o-t]||0,r&&r[o]||0,r&&r[o-t]||0);i[o+1]=e[o]-u+256&255}return i}function vue(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=i&&n<=o?e:i<=o?t:r}function bue(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function n5(e,t,r){var n=t*r,i=Math.floor(n/8),o=16-(n-8*i+r),u=(1<<r)-1;return DU(e,i)>>o&u}function lD(e,t,r,n){var i=r*n,o=Math.floor(i/8),u=16-(i-8*o+n),a=(1<<n)-1,p=(t&a)<<u;(function(d,m,v){if(m+1<d.byteLength)d.setUint16(m,v,!1);else{var w=v>>8&255;d.setUint8(m,w)}})(e,o,DU(e,o)&~(a<<u)&65535|p)}function DU(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function _ue(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,u=1<<1+(7&i);e[t++],e[t++];var a=null,p=null;o&&(a=t,p=u,t+=3*u);var d=!0,m=[],v=0,w=null,x=0,P=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((W=e[t++])>=0))throw Error("Invalid block size");if(W===0)break;t+=W}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var T=e[t++];v=e[t++]|e[t++]<<8,w=e[t++],1&T||(w=null),x=T>>2&7,t++;break;case 254:for(;;){if(!((W=e[t++])>=0))throw Error("Invalid block size");if(W===0)break;t+=W}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var O=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,D=e[t++],q=D>>6&1,z=1<<1+(7&D),Z=a,Q=p,Y=!1;D>>7&&(Y=!0,Z=t,Q=z,t+=3*z);var se=t;for(t++;;){var W;if(!((W=e[t++])>=0))throw Error("Invalid block size");if(W===0)break;t+=W}m.push({x:O,y:L,width:N,height:F,has_local_palette:Y,palette_offset:Z,palette_size:Q,data_offset:se,data_length:t-se,transparent_index:w,interlaced:!!q,delay:v,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return P},this.frameInfo=function(G){if(G<0||G>=m.length)throw new Error("Frame index out of range.");return m[G]},this.decodeAndBlitFrameBGRA=function(G,ae){var le=this.frameInfo(G),ue=le.width*le.height,ye=new Uint8Array(ue);uD(e,le.data_offset,ye,ue);var Se=le.palette_offset,ge=le.transparent_index;ge===null&&(ge=256);var xe=le.width,Fe=r-xe,He=xe,pe=4*(le.y*r+le.x),_e=4*((le.y+le.height)*r+le.x),Ce=pe,ke=4*Fe;le.interlaced===!0&&(ke+=4*r*7);for(var $e=8,ht=0,At=ye.length;ht<At;++ht){var mt=ye[ht];if(He===0&&(He=xe,(Ce+=ke)>=_e&&(ke=4*Fe+4*r*($e-1),Ce=pe+(xe+Fe)*($e<<1),$e>>=1)),mt===ge)Ce+=4;else{var rt=e[Se+3*mt],Lt=e[Se+3*mt+1],Tt=e[Se+3*mt+2];ae[Ce++]=Tt,ae[Ce++]=Lt,ae[Ce++]=rt,ae[Ce++]=255}--He}},this.decodeAndBlitFrameRGBA=function(G,ae){var le=this.frameInfo(G),ue=le.width*le.height,ye=new Uint8Array(ue);uD(e,le.data_offset,ye,ue);var Se=le.palette_offset,ge=le.transparent_index;ge===null&&(ge=256);var xe=le.width,Fe=r-xe,He=xe,pe=4*(le.y*r+le.x),_e=4*((le.y+le.height)*r+le.x),Ce=pe,ke=4*Fe;le.interlaced===!0&&(ke+=4*r*7);for(var $e=8,ht=0,At=ye.length;ht<At;++ht){var mt=ye[ht];if(He===0&&(He=xe,(Ce+=ke)>=_e&&(ke=4*Fe+4*r*($e-1),Ce=pe+(xe+Fe)*($e<<1),$e>>=1)),mt===ge)Ce+=4;else{var rt=e[Se+3*mt],Lt=e[Se+3*mt+1],Tt=e[Se+3*mt+2];ae[Ce++]=rt,ae[Ce++]=Lt,ae[Ce++]=Tt,ae[Ce++]=255}--He}}}function uD(e,t,r,n){for(var i=e[t++],o=1<<i,u=o+1,a=u+1,p=i+1,d=(1<<p)-1,m=0,v=0,w=0,x=e[t++],P=new Int32Array(4096),T=null;;){for(;m<16&&x!==0;)v|=e[t++]<<m,m+=8,x===1?x=e[t++]:--x;if(m<p)break;var O=v&d;if(v>>=p,m-=p,O!==o){if(O===u)break;for(var L=O<a?O:T,N=0,F=L;F>o;)F=P[F]>>8,++N;var D=F;if(w+N+(L!==O?1:0)>n)return void xa.log("Warning, gif stream longer than expected.");r[w++]=D;var q=w+=N;for(L!==O&&(r[w++]=D),F=L;N--;)F=P[F],r[--q]=255&F,F>>=8;T!==null&&a<4096&&(P[a++]=T<<8|D,a>=d+1&&p<12&&(++p,d=d<<1|1)),T=O}else a=u+1,d=(1<<(p=i+1))-1,T=null}return w!==n&&xa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function i5(e){var t,r,n,i,o,u=Math.floor,a=new Array(64),p=new Array(64),d=new Array(64),m=new Array(64),v=new Array(65535),w=new Array(65535),x=new Array(64),P=new Array(64),T=[],O=0,L=7,N=new Array(64),F=new Array(64),D=new Array(64),q=new Array(256),z=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],W=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ye(pe,_e){for(var Ce=0,ke=0,$e=new Array,ht=1;ht<=16;ht++){for(var At=1;At<=pe[ht];At++)$e[_e[ke]]=[],$e[_e[ke]][0]=Ce,$e[_e[ke]][1]=ht,ke++,Ce++;Ce*=2}return $e}function Se(pe){for(var _e=pe[0],Ce=pe[1]-1;Ce>=0;)_e&1<<Ce&&(O|=1<<L),Ce--,--L<0&&(O==255?(ge(255),ge(0)):ge(O),L=7,O=0)}function ge(pe){T.push(pe)}function xe(pe){ge(pe>>8&255),ge(255&pe)}function Fe(pe,_e,Ce,ke,$e){for(var ht,At=$e[0],mt=$e[240],rt=(function(Yt,Ve){var tt,lt,Mt,Kt,Ut,ar,gr,yr,Ye,de,he=0;for(Ye=0;Ye<8;++Ye){tt=Yt[he],lt=Yt[he+1],Mt=Yt[he+2],Kt=Yt[he+3],Ut=Yt[he+4],ar=Yt[he+5],gr=Yt[he+6];var Me=tt+(yr=Yt[he+7]),Ue=tt-yr,Ke=lt+gr,Qe=lt-gr,wt=Mt+ar,nt=Mt-ar,Ot=Kt+Ut,Gt=Kt-Ut,ir=Me+Ot,Pr=Me-Ot,bt=Ke+wt,Sr=Ke-wt;Yt[he]=ir+bt,Yt[he+4]=ir-bt;var Mr=.707106781*(Sr+Pr);Yt[he+2]=Pr+Mr,Yt[he+6]=Pr-Mr;var Nr=.382683433*((ir=Gt+nt)-(Sr=Qe+Ue)),en=.5411961*ir+Nr,Vr=1.306562965*Sr+Nr,gt=.707106781*(bt=nt+Qe),xt=Ue+gt,Wt=Ue-gt;Yt[he+5]=Wt+en,Yt[he+3]=Wt-en,Yt[he+1]=xt+Vr,Yt[he+7]=xt-Vr,he+=8}for(he=0,Ye=0;Ye<8;++Ye){tt=Yt[he],lt=Yt[he+8],Mt=Yt[he+16],Kt=Yt[he+24],Ut=Yt[he+32],ar=Yt[he+40],gr=Yt[he+48];var ne=tt+(yr=Yt[he+56]),me=tt-yr,qe=lt+gr,je=lt-gr,jt=Mt+ar,Jt=Mt-ar,Tr=Kt+Ut,zr=Kt-Ut,Vt=ne+Tr,Ir=ne-Tr,Dr=qe+jt,Sn=qe-jt;Yt[he]=Vt+Dr,Yt[he+32]=Vt-Dr;var vn=.707106781*(Sn+Ir);Yt[he+16]=Ir+vn,Yt[he+48]=Ir-vn;var Rn=.382683433*((Vt=zr+Jt)-(Sn=je+me)),$r=.5411961*Vt+Rn,Ii=1.306562965*Sn+Rn,Li=.707106781*(Dr=Jt+je),Ji=me+Li,vi=me-Li;Yt[he+40]=vi+$r,Yt[he+24]=vi-$r,Yt[he+8]=Ji+Ii,Yt[he+56]=Ji-Ii,he++}for(Ye=0;Ye<64;++Ye)de=Yt[Ye]*Ve[Ye],x[Ye]=de>0?de+.5|0:de-.5|0;return x})(pe,_e),Lt=0;Lt<64;++Lt)P[Z[Lt]]=rt[Lt];var Tt=P[0]-Ce;Ce=P[0],Tt==0?Se(ke[0]):(Se(ke[w[ht=32767+Tt]]),Se(v[ht]));for(var Pt=63;Pt>0&&P[Pt]==0;)Pt--;if(Pt==0)return Se(At),Ce;for(var ut,Le=1;Le<=Pt;){for(var sr=Le;P[Le]==0&&Le<=Pt;)++Le;var lr=Le-sr;if(lr>=16){ut=lr>>4;for(var dr=1;dr<=ut;++dr)Se(mt);lr&=15}ht=32767+P[Le],Se($e[(lr<<4)+w[ht]]),Se(v[ht]),Le++}return Pt!=63&&Se(At),Ce}function He(pe){pe=Math.min(Math.max(pe,1),100),o!=pe&&((function(_e){for(var Ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ke=0;ke<64;ke++){var $e=u((Ce[ke]*_e+50)/100);$e=Math.min(Math.max($e,1),255),a[Z[ke]]=$e}for(var ht=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],At=0;At<64;At++){var mt=u((ht[At]*_e+50)/100);mt=Math.min(Math.max(mt,1),255),p[Z[At]]=mt}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Lt=0,Tt=0;Tt<8;Tt++)for(var Pt=0;Pt<8;Pt++)d[Lt]=1/(a[Z[Lt]]*rt[Tt]*rt[Pt]*8),m[Lt]=1/(p[Z[Lt]]*rt[Tt]*rt[Pt]*8),Lt++})(pe<50?Math.floor(5e3/pe):Math.floor(200-2*pe)),o=pe)}this.encode=function(pe,_e){_e&&He(_e),T=new Array,O=0,L=7,xe(65496),xe(65504),xe(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),xe(1),xe(1),ge(0),ge(0),(function(){xe(65499),xe(132),ge(0);for(var lt=0;lt<64;lt++)ge(a[lt]);ge(1);for(var Mt=0;Mt<64;Mt++)ge(p[Mt])})(),(function(lt,Mt){xe(65472),xe(17),ge(8),xe(Mt),xe(lt),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)})(pe.width,pe.height),(function(){xe(65476),xe(418),ge(0);for(var lt=0;lt<16;lt++)ge(Q[lt+1]);for(var Mt=0;Mt<=11;Mt++)ge(Y[Mt]);ge(16);for(var Kt=0;Kt<16;Kt++)ge(se[Kt+1]);for(var Ut=0;Ut<=161;Ut++)ge(W[Ut]);ge(1);for(var ar=0;ar<16;ar++)ge(G[ar+1]);for(var gr=0;gr<=11;gr++)ge(ae[gr]);ge(17);for(var yr=0;yr<16;yr++)ge(le[yr+1]);for(var Ye=0;Ye<=161;Ye++)ge(ue[Ye])})(),xe(65498),xe(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var Ce=0,ke=0,$e=0;O=0,L=7,this.encode.displayName="_encode_";for(var ht,At,mt,rt,Lt,Tt,Pt,ut,Le,sr=pe.data,lr=pe.width,dr=pe.height,Yt=4*lr,Ve=0;Ve<dr;){for(ht=0;ht<Yt;){for(Lt=Yt*Ve+ht,Pt=-1,ut=0,Le=0;Le<64;Le++)Tt=Lt+(ut=Le>>3)*Yt+(Pt=4*(7&Le)),Ve+ut>=dr&&(Tt-=Yt*(Ve+1+ut-dr)),ht+Pt>=Yt&&(Tt-=ht+Pt-Yt+4),At=sr[Tt++],mt=sr[Tt++],rt=sr[Tt++],N[Le]=(z[At]+z[mt+256|0]+z[rt+512|0]>>16)-128,F[Le]=(z[At+768|0]+z[mt+1024|0]+z[rt+1280|0]>>16)-128,D[Le]=(z[At+1280|0]+z[mt+1536|0]+z[rt+1792|0]>>16)-128;Ce=Fe(N,d,Ce,t,n),ke=Fe(F,m,ke,r,i),$e=Fe(D,m,$e,r,i),ht+=32}Ve+=8}if(L>=0){var tt=[];tt[1]=L+1,tt[0]=(1<<L+1)-1,Se(tt)}return xe(65497),new Uint8Array(T)},e=e||50,(function(){for(var pe=String.fromCharCode,_e=0;_e<256;_e++)q[_e]=pe(_e)})(),t=ye(Q,Y),r=ye(G,ae),n=ye(se,W),i=ye(le,ue),(function(){for(var pe=1,_e=2,Ce=1;Ce<=15;Ce++){for(var ke=pe;ke<_e;ke++)w[32767+ke]=Ce,v[32767+ke]=[],v[32767+ke][1]=Ce,v[32767+ke][0]=ke;for(var $e=-(_e-1);$e<=-pe;$e++)w[32767+$e]=Ce,v[32767+$e]=[],v[32767+$e][1]=Ce,v[32767+$e][0]=_e-1+$e;pe<<=1,_e<<=1}})(),(function(){for(var pe=0;pe<256;pe++)z[pe]=19595*pe,z[pe+256|0]=38470*pe,z[pe+512|0]=7471*pe+32768,z[pe+768|0]=-11059*pe,z[pe+1024|0]=-21709*pe,z[pe+1280|0]=32768*pe+8421375,z[pe+1536|0]=-27439*pe,z[pe+1792|0]=-5329*pe})(),He(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _c(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cD(e){function t(Y){if(!Y)throw Error("assert :P")}function r(Y,se,W){for(var G=0;4>G;G++)if(Y[se+G]!=W.charCodeAt(G))return!0;return!1}function n(Y,se,W,G,ae){for(var le=0;le<ae;le++)Y[se+le]=W[G+le]}function i(Y,se,W,G){for(var ae=0;ae<G;ae++)Y[se+ae]=W}function o(Y){return new Int32Array(Y)}function u(Y,se){for(var W=[],G=0;G<Y;G++)W.push(new se);return W}function a(Y,se){var W=[];return(function G(ae,le,ue){for(var ye=ue[le],Se=0;Se<ye&&(ae.push(ue.length>le+1?[]:new se),!(ue.length<le+1));Se++)G(ae[Se],le+1,ue)})(W,0,Y),W}var p=function(){var Y=this;function se(k,$){for(var ee=1<<$-1>>>0;k&ee;)ee>>>=1;return ee?(k&ee-1)+ee:k}function W(k,$,ee,fe,Pe){t(!(fe%ee));do k[$+(fe-=ee)]=Pe;while(0<fe)}function G(k,$,ee,fe,Pe){if(t(2328>=Pe),512>=Pe)var De=o(512);else if((De=o(Pe))==null)return 0;return(function(Ne,Te,Je,st,kt,tr){var ot,zt,Rt=Te,cr=1<<Je,rr=o(16),hr=o(16);for(t(kt!=0),t(st!=null),t(Ne!=null),t(0<Je),zt=0;zt<kt;++zt){if(15<st[zt])return 0;++rr[st[zt]]}if(rr[0]==kt)return 0;for(hr[1]=0,ot=1;15>ot;++ot){if(rr[ot]>1<<ot)return 0;hr[ot+1]=hr[ot]+rr[ot]}for(zt=0;zt<kt;++zt)ot=st[zt],0<st[zt]&&(tr[hr[ot]++]=zt);if(hr[15]==1)return(st=new ae).g=0,st.value=tr[0],W(Ne,Rt,1,cr,st),cr;var br,kr=-1,Cr=cr-1,_n=0,cn=1,Qn=1,mn=1<<Je;for(zt=0,ot=1,kt=2;ot<=Je;++ot,kt<<=1){if(cn+=Qn<<=1,0>(Qn-=rr[ot]))return 0;for(;0<rr[ot];--rr[ot])(st=new ae).g=ot,st.value=tr[zt++],W(Ne,Rt+_n,kt,mn,st),_n=se(_n,ot)}for(ot=Je+1,kt=2;15>=ot;++ot,kt<<=1){if(cn+=Qn<<=1,0>(Qn-=rr[ot]))return 0;for(;0<rr[ot];--rr[ot]){if(st=new ae,(_n&Cr)!=kr){for(Rt+=mn,br=1<<(kr=ot)-Je;15>kr&&!(0>=(br-=rr[kr]));)++kr,br<<=1;cr+=mn=1<<(br=kr-Je),Ne[Te+(kr=_n&Cr)].g=br+Je,Ne[Te+kr].value=Rt-Te-kr}st.g=ot-Je,st.value=tr[zt++],W(Ne,Rt+(_n>>Je),kt,mn,st),_n=se(_n,ot)}}return cn!=2*hr[15]-1?0:cr})(k,$,ee,fe,Pe,De)}function ae(){this.value=this.g=0}function le(){this.value=this.g=0}function ue(){this.G=u(5,ae),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Oa,le)}function ye(k,$,ee,fe){t(k!=null),t($!=null),t(2147483648>fe),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=$,k.pa=ee,k.Jd=$,k.Yc=ee+fe,k.Zc=4<=fe?ee+fe-4+1:ee,At(k)}function Se(k,$){for(var ee=0;0<$--;)ee|=rt(k,128)<<$;return ee}function ge(k,$){var ee=Se(k,$);return mt(k)?-ee:ee}function xe(k,$,ee,fe){var Pe,De=0;for(t(k!=null),t($!=null),t(4294967288>fe),k.Sb=fe,k.Ra=0,k.u=0,k.h=0,4<fe&&(fe=4),Pe=0;Pe<fe;++Pe)De+=$[ee+Pe]<<8*Pe;k.Ra=De,k.bb=fe,k.oa=$,k.pa=ee}function Fe(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<wl-8>>>0,++k.bb,k.u-=8;ke(k)&&(k.h=1,k.u=0)}function He(k,$){if(t(0<=$),!k.h&&$<=Ro){var ee=Ce(k)&Js[$];return k.u+=$,Fe(k),ee}return k.h=1,k.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _e(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ce(k){return k.Ra>>>(k.u&wl-1)>>>0}function ke(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>wl}function $e(k,$){k.u=$,k.h=ke(k)}function ht(k){k.u>=Zi&&(t(k.u>=Zi),Fe(k))}function At(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function mt(k){return Se(k,1)}function rt(k,$){var ee=k.Ca;0>k.b&&At(k);var fe=k.b,Pe=ee*$>>>8,De=(k.I>>>fe>Pe)+0;for(De?(ee-=Pe,k.I-=Pe+1<<fe>>>0):ee=Pe+1,fe=ee,Pe=0;256<=fe;)Pe+=8,fe>>=8;return fe=7^Pe+mu[fe],k.b-=fe,k.Ca=(ee<<fe)-1,De}function Lt(k,$,ee){k[$+0]=ee>>24&255,k[$+1]=ee>>16&255,k[$+2]=ee>>8&255,k[$+3]=255&ee}function Tt(k,$){return k[$+0]|k[$+1]<<8}function Pt(k,$){return Tt(k,$)|k[$+2]<<16}function ut(k,$){return Tt(k,$)|Tt(k,$+2)<<16}function Le(k,$){var ee=1<<$;return t(k!=null),t(0<$),k.X=o(ee),k.X==null?0:(k.Mb=32-$,k.Xa=$,1)}function sr(k,$){t(k!=null),t($!=null),t(k.Xa==$.Xa),n($.X,0,k.X,0,1<<$.Xa)}function lr(){this.X=[],this.Xa=this.Mb=0}function dr(k,$,ee,fe){t(ee!=null),t(fe!=null);var Pe=ee[0],De=fe[0];return Pe==0&&(Pe=(k*De+$/2)/$),De==0&&(De=($*Pe+k/2)/k),0>=Pe||0>=De?0:(ee[0]=Pe,fe[0]=De,1)}function Yt(k,$){return k+(1<<$)-1>>>$}function Ve(k,$){return((4278255360&k)+(4278255360&$)>>>0&4278255360)+((16711935&k)+(16711935&$)>>>0&16711935)>>>0}function tt(k,$){Y[$]=function(ee,fe,Pe,De,Ne,Te,Je){var st;for(st=0;st<Ne;++st){var kt=Y[k](Te[Je+st-1],Pe,De+st);Te[Je+st]=Ve(ee[fe+st],kt)}}}function lt(){this.ud=this.hd=this.jd=0}function Mt(k,$){return((4278124286&(k^$))>>>1)+(k&$)>>>0}function Kt(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function Ut(k,$){return Kt(k+(k-$+.5>>1))}function ar(k,$,ee){return Math.abs($-ee)-Math.abs(k-ee)}function gr(k,$,ee,fe,Pe,De,Ne){for(fe=De[Ne-1],ee=0;ee<Pe;++ee)De[Ne+ee]=fe=Ve(k[$+ee],fe)}function yr(k,$,ee,fe,Pe){var De;for(De=0;De<ee;++De){var Ne=k[$+De],Te=Ne>>8&255,Je=16711935&(Je=(Je=16711935&Ne)+((Te<<16)+Te));fe[Pe+De]=(4278255360&Ne)+Je>>>0}}function Ye(k,$){$.jd=255&k,$.hd=k>>8&255,$.ud=k>>16&255}function de(k,$,ee,fe,Pe,De){var Ne;for(Ne=0;Ne<fe;++Ne){var Te=$[ee+Ne],Je=Te>>>8,st=Te,kt=255&(kt=(kt=Te>>>16)+((k.jd<<24>>24)*(Je<<24>>24)>>>5));st=255&(st=(st+=(k.hd<<24>>24)*(Je<<24>>24)>>>5)+((k.ud<<24>>24)*(kt<<24>>24)>>>5)),Pe[De+Ne]=(4278255360&Te)+(kt<<16)+st}}function he(k,$,ee,fe,Pe){Y[$]=function(De,Ne,Te,Je,st,kt,tr,ot,zt){for(Je=tr;Je<ot;++Je)for(tr=0;tr<zt;++tr)st[kt++]=Pe(Te[fe(De[Ne++])])},Y[k]=function(De,Ne,Te,Je,st,kt,tr){var ot=8>>De.b,zt=De.Ea,Rt=De.K[0],cr=De.w;if(8>ot)for(De=(1<<De.b)-1,cr=(1<<ot)-1;Ne<Te;++Ne){var rr,hr=0;for(rr=0;rr<zt;++rr)rr&De||(hr=fe(Je[st++])),kt[tr++]=Pe(Rt[hr&cr]),hr>>=ot}else Y["VP8LMapColor"+ee](Je,st,Rt,cr,kt,tr,Ne,Te,zt)}}function Me(k,$,ee,fe,Pe){for(ee=$+ee;$<ee;){var De=k[$++];fe[Pe++]=De>>16&255,fe[Pe++]=De>>8&255,fe[Pe++]=255&De}}function Ue(k,$,ee,fe,Pe){for(ee=$+ee;$<ee;){var De=k[$++];fe[Pe++]=De>>16&255,fe[Pe++]=De>>8&255,fe[Pe++]=255&De,fe[Pe++]=De>>24&255}}function Ke(k,$,ee,fe,Pe){for(ee=$+ee;$<ee;){var De=(Ne=k[$++])>>16&240|Ne>>12&15,Ne=240&Ne|Ne>>28&15;fe[Pe++]=De,fe[Pe++]=Ne}}function Qe(k,$,ee,fe,Pe){for(ee=$+ee;$<ee;){var De=(Ne=k[$++])>>16&248|Ne>>13&7,Ne=Ne>>5&224|Ne>>3&31;fe[Pe++]=De,fe[Pe++]=Ne}}function wt(k,$,ee,fe,Pe){for(ee=$+ee;$<ee;){var De=k[$++];fe[Pe++]=255&De,fe[Pe++]=De>>8&255,fe[Pe++]=De>>16&255}}function nt(k,$,ee,fe,Pe,De){if(De==0)for(ee=$+ee;$<ee;)Lt(fe,((De=k[$++])[0]>>24|De[1]>>8&65280|De[2]<<8&16711680|De[3]<<24)>>>0),Pe+=32;else n(fe,Pe,k,$,ee)}function Ot(k,$){Y[$][0]=Y[k+"0"],Y[$][1]=Y[k+"1"],Y[$][2]=Y[k+"2"],Y[$][3]=Y[k+"3"],Y[$][4]=Y[k+"4"],Y[$][5]=Y[k+"5"],Y[$][6]=Y[k+"6"],Y[$][7]=Y[k+"7"],Y[$][8]=Y[k+"8"],Y[$][9]=Y[k+"9"],Y[$][10]=Y[k+"10"],Y[$][11]=Y[k+"11"],Y[$][12]=Y[k+"12"],Y[$][13]=Y[k+"13"],Y[$][14]=Y[k+"0"],Y[$][15]=Y[k+"0"]}function Gt(k){return k==kf||k==qc||k==Wu||k==fc}function ir(){this.eb=[],this.size=this.A=this.fb=0}function Pr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ir,this.f.kb=new Pr,this.sd=null}function Sr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nr(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function en(k,$){var ee=k.T,fe=$.ba.f.RGBA,Pe=fe.eb,De=fe.fb+k.ka*fe.A,Ne=co[$.ba.S],Te=k.y,Je=k.O,st=k.f,kt=k.N,tr=k.ea,ot=k.W,zt=$.cc,Rt=$.dc,cr=$.Mc,rr=$.Nc,hr=k.ka,br=k.ka+k.T,kr=k.U,Cr=kr+1>>1;for(hr==0?Ne(Te,Je,null,null,st,kt,tr,ot,st,kt,tr,ot,Pe,De,null,null,kr):(Ne($.ec,$.fc,Te,Je,zt,Rt,cr,rr,st,kt,tr,ot,Pe,De-fe.A,Pe,De,kr),++ee);hr+2<br;hr+=2)zt=st,Rt=kt,cr=tr,rr=ot,kt+=k.Rc,ot+=k.Rc,De+=2*fe.A,Ne(Te,(Je+=2*k.fa)-k.fa,Te,Je,zt,Rt,cr,rr,st,kt,tr,ot,Pe,De-fe.A,Pe,De,kr);return Je+=k.fa,k.j+br<k.o?(n($.ec,$.fc,Te,Je,kr),n($.cc,$.dc,st,kt,Cr),n($.Mc,$.Nc,tr,ot,Cr),ee--):1&br||Ne(Te,Je,null,null,st,kt,tr,ot,st,kt,tr,ot,Pe,De+fe.A,null,null,kr),ee}function Vr(k,$,ee){var fe=k.F,Pe=[k.J];if(fe!=null){var De=k.U,Ne=$.ba.S,Te=Ne==gh||Ne==Wu;$=$.ba.f.RGBA;var Je=[0],st=k.ka;Je[0]=k.T,k.Kb&&(st==0?--Je[0]:(--st,Pe[0]-=k.width),k.j+k.ka+k.T==k.o&&(Je[0]=k.o-k.j-st));var kt=$.eb;st=$.fb+st*$.A,k=uo(fe,Pe[0],k.width,De,Je,kt,st+(Te?0:3),$.A),t(ee==Je),k&&Gt(Ne)&&Ko(kt,st,Te,De,Je,$.A)}return 0}function gt(k){var $=k.ma,ee=$.ba.S,fe=11>ee,Pe=ee==Hu||ee==Hl||ee==gh||ee==yh||ee==12||Gt(ee);if($.memory=null,$.Ib=null,$.Jb=null,$.Nd=null,!Ua($.Oa,k,Pe?11:12))return 0;if(Pe&&Gt(ee)&&du(),k.da)alert("todo:use_scaling");else{if(fe){if($.Ib=Nr,k.Kb){if(ee=k.U+1>>1,$.memory=o(k.U+2*ee),$.memory==null)return 0;$.ec=$.memory,$.fc=0,$.cc=$.ec,$.dc=$.fc+k.U,$.Mc=$.cc,$.Nc=$.dc+ee,$.Ib=en,du()}}else alert("todo:EmitYUV");Pe&&($.Jb=Vr,fe&&bl())}if(fe&&!Sh){for(k=0;256>k;++k)zp[k]=89858*(k-128)+Ss>>Ff,Ed[k]=-22014*(k-128)+Ss,Zc[k]=-45773*(k-128),$p[k]=113618*(k-128)+Ss>>Ff;for(k=Wl;k<Xo;++k)$=76283*(k-16)+Ss>>Ff,Kc[k-Wl]=ha($,255),Up[k-Wl]=ha($+8>>4,15);Sh=1}return 1}function xt(k){var $=k.ma,ee=k.U,fe=k.T;return t(!(1&k.ka)),0>=ee||0>=fe?0:(ee=$.Ib(k,$),$.Jb!=null&&$.Jb(k,$,ee),$.Dc+=ee,1)}function Wt(k){k.ma.memory=null}function ne(k,$,ee,fe){return He(k,8)!=47?0:($[0]=He(k,14)+1,ee[0]=He(k,14)+1,fe[0]=He(k,1),He(k,3)!=0?0:!k.h)}function me(k,$){if(4>k)return k+1;var ee=k-2>>1;return(2+(1&k)<<ee)+He($,ee)+1}function qe(k,$){return 120<$?$-120:1<=(ee=((ee=vh[$-1])>>4)*k+(8-(15&ee)))?ee:1;var ee}function je(k,$,ee){var fe=Ce(ee),Pe=k[$+=255&fe].g-8;return 0<Pe&&($e(ee,ee.u+8),fe=Ce(ee),$+=k[$].value,$+=fe&(1<<Pe)-1),$e(ee,ee.u+k[$].g),k[$].value}function jt(k,$,ee){return ee.g+=k.g,ee.value+=k.value<<$>>>0,t(8>=ee.g),k.g}function Jt(k,$,ee){var fe=k.xc;return t(($=fe==0?0:k.vc[k.md*(ee>>fe)+($>>fe)])<k.Wb),k.Ya[$]}function Tr(k,$,ee,fe){var Pe=k.ab,De=k.c*$,Ne=k.C;$=Ne+$;var Te=ee,Je=fe;for(fe=k.Ta,ee=k.Ua;0<Pe--;){var st=k.gc[Pe],kt=Ne,tr=$,ot=Te,zt=Je,Rt=(Je=fe,Te=ee,st.Ea);switch(t(kt<tr),t(tr<=st.nc),st.hc){case 2:$l(ot,zt,(tr-kt)*Rt,Je,Te);break;case 0:var cr=kt,rr=tr,hr=Je,br=Te,kr=(mn=st).Ea;cr==0&&(vs(ot,zt,null,null,1,hr,br),gr(ot,zt+1,0,0,kr-1,hr,br+1),zt+=kr,br+=kr,++cr);for(var Cr=1<<mn.b,_n=Cr-1,cn=Yt(kr,mn.b),Qn=mn.K,mn=mn.w+(cr>>mn.b)*cn;cr<rr;){var di=Qn,Ga=mn,Nn=1;for(bs(ot,zt,hr,br-kr,1,hr,br);Nn<kr;){var Wr=(Nn&~_n)+Cr;Wr>kr&&(Wr=kr),(0,Ft[di[Ga++]>>8&15])(ot,zt+ +Nn,hr,br+Nn-kr,Wr-Nn,hr,br+Nn),Nn=Wr}zt+=kr,br+=kr,++cr&_n||(mn+=cn)}tr!=st.nc&&n(Je,Te-Rt,Je,Te+(tr-kt-1)*Rt,Rt);break;case 1:for(Rt=ot,rr=zt,kr=(ot=st.Ea)-(br=ot&~(hr=(zt=1<<st.b)-1)),cr=Yt(ot,st.b),Cr=st.K,st=st.w+(kt>>st.b)*cr;kt<tr;){for(_n=Cr,cn=st,Qn=new lt,mn=rr+br,di=rr+ot;rr<mn;)Ye(_n[cn++],Qn),qt(Qn,Rt,rr,zt,Je,Te),rr+=zt,Te+=zt;rr<di&&(Ye(_n[cn++],Qn),qt(Qn,Rt,rr,kr,Je,Te),rr+=kr,Te+=kr),++kt&hr||(st+=cr)}break;case 3:if(ot==Je&&zt==Te&&0<st.b){for(rr=Je,ot=Rt=Te+(tr-kt)*Rt-(br=(tr-kt)*Yt(st.Ea,st.b)),zt=Je,hr=Te,cr=[],br=(kr=br)-1;0<=br;--br)cr[br]=zt[hr+br];for(br=kr-1;0<=br;--br)rr[ot+br]=cr[br];Ul(st,kt,tr,Je,Rt,Je,Te)}else Ul(st,kt,tr,ot,zt,Je,Te)}Te=fe,Je=ee}Je!=ee&&n(fe,ee,Te,Je,De)}function zr(k,$){var ee=k.V,fe=k.Ba+k.c*k.C,Pe=$-k.C;if(t($<=k.l.o),t(16>=Pe),0<Pe){var De=k.l,Ne=k.Ta,Te=k.Ua,Je=De.width;if(Tr(k,Pe,ee,fe),Pe=Te=[Te],t((ee=k.C)<(fe=$)),t(De.v<De.va),fe>De.o&&(fe=De.o),ee<De.j){var st=De.j-ee;ee=De.j,Pe[0]+=st*Je}if(ee>=fe?ee=0:(Pe[0]+=4*De.v,De.ka=ee-De.j,De.U=De.va-De.v,De.T=fe-ee,ee=1),ee){if(Te=Te[0],11>(ee=k.ca).S){var kt=ee.f.RGBA,tr=(fe=ee.S,Pe=De.U,De=De.T,st=kt.eb,kt.A),ot=De;for(kt=kt.fb+k.Ma*kt.A;0<ot--;){var zt=Ne,Rt=Te,cr=Pe,rr=st,hr=kt;switch(fe){case yu:Ur(zt,Rt,cr,rr,hr);break;case Hu:nn(zt,Rt,cr,rr,hr);break;case kf:nn(zt,Rt,cr,rr,hr),Ko(rr,hr,0,cr,1,0);break;case ws:Tn(zt,Rt,cr,rr,hr);break;case Hl:nt(zt,Rt,cr,rr,hr,1);break;case qc:nt(zt,Rt,cr,rr,hr,1),Ko(rr,hr,0,cr,1,0);break;case gh:nt(zt,Rt,cr,rr,hr,0);break;case Wu:nt(zt,Rt,cr,rr,hr,0),Ko(rr,hr,1,cr,1,0);break;case yh:si(zt,Rt,cr,rr,hr);break;case fc:si(zt,Rt,cr,rr,hr),rl(rr,hr,cr,1,0);break;case Np:fn(zt,Rt,cr,rr,hr);break;default:t(0)}Te+=Je,kt+=tr}k.Ma+=De}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=ee.height)}}k.C=$,t(k.C<=k.i)}function Vt(k){var $;if(0<k.ua)return 0;for($=0;$<k.Wb;++$){var ee=k.Ya[$].G,fe=k.Ya[$].H;if(0<ee[1][fe[1]+0].g||0<ee[2][fe[2]+0].g||0<ee[3][fe[3]+0].g)return 0}return 1}function Ir(k,$,ee,fe,Pe,De){if(k.Z!=0){var Ne=k.qd,Te=k.rd;for(t(vu[k.Z]!=null);$<ee;++$)vu[k.Z](Ne,Te,fe,Pe,fe,Pe,De),Ne=fe,Te=Pe,Pe+=De;k.qd=Ne,k.rd=Te}}function Dr(k,$){var ee=k.l.ma,fe=ee.Z==0||ee.Z==1?k.l.j:k.C;if(fe=k.C<fe?fe:k.C,t($<=k.l.o),$>fe){var Pe=k.l.width,De=ee.ca,Ne=ee.tb+Pe*fe,Te=k.V,Je=k.Ba+k.c*fe,st=k.gc;t(k.ab==1),t(st[0].hc==3),ql(st[0],fe,$,Te,Je,De,Ne),Ir(ee,fe,$,De,Ne,Pe)}k.C=k.Ma=$}function Sn(k,$,ee,fe,Pe,De,Ne){var Te=k.$/fe,Je=k.$%fe,st=k.m,kt=k.s,tr=ee+k.$,ot=tr;Pe=ee+fe*Pe;var zt=ee+fe*De,Rt=280+kt.ua,cr=k.Pb?Te:16777216,rr=0<kt.ua?kt.Wa:null,hr=kt.wc,br=tr<zt?Jt(kt,Je,Te):null;t(k.C<De),t(zt<=Pe);var kr=!1;e:for(;;){for(;kr||tr<zt;){var Cr=0;if(Te>=cr){var _n=tr-ee;t((cr=k).Pb),cr.wd=cr.m,cr.xd=_n,0<cr.s.ua&&sr(cr.s.Wa,cr.s.vb),cr=Te+hc}if(Je&hr||(br=Jt(kt,Je,Te)),t(br!=null),br.Qb&&($[tr]=br.qb,kr=!0),!kr)if(ht(st),br.jc){Cr=st,_n=$;var cn=tr,Qn=br.pd[Ce(Cr)&Oa-1];t(br.jc),256>Qn.g?($e(Cr,Cr.u+Qn.g),_n[cn]=Qn.value,Cr=0):($e(Cr,Cr.u+Qn.g-256),t(256<=Qn.value),Cr=Qn.value),Cr==0&&(kr=!0)}else Cr=je(br.G[0],br.H[0],st);if(st.h)break;if(kr||256>Cr){if(!kr)if(br.nd)$[tr]=(br.qb|Cr<<8)>>>0;else{if(ht(st),kr=je(br.G[1],br.H[1],st),ht(st),_n=je(br.G[2],br.H[2],st),cn=je(br.G[3],br.H[3],st),st.h)break;$[tr]=(cn<<24|kr<<16|Cr<<8|_n)>>>0}if(kr=!1,++tr,++Je>=fe&&(Je=0,++Te,Ne!=null&&Te<=De&&!(Te%16)&&Ne(k,Te),rr!=null))for(;ot<tr;)Cr=$[ot++],rr.X[(506832829*Cr&4294967295)>>>rr.Mb]=Cr}else if(280>Cr){if(Cr=me(Cr-256,st),_n=je(br.G[4],br.H[4],st),ht(st),_n=qe(fe,_n=me(_n,st)),st.h)break;if(tr-ee<_n||Pe-tr<Cr)break e;for(cn=0;cn<Cr;++cn)$[tr+cn]=$[tr+cn-_n];for(tr+=Cr,Je+=Cr;Je>=fe;)Je-=fe,++Te,Ne!=null&&Te<=De&&!(Te%16)&&Ne(k,Te);if(t(tr<=Pe),Je&hr&&(br=Jt(kt,Je,Te)),rr!=null)for(;ot<tr;)Cr=$[ot++],rr.X[(506832829*Cr&4294967295)>>>rr.Mb]=Cr}else{if(!(Cr<Rt))break e;for(kr=Cr-280,t(rr!=null);ot<tr;)Cr=$[ot++],rr.X[(506832829*Cr&4294967295)>>>rr.Mb]=Cr;Cr=tr,t(!(kr>>>(_n=rr).Xa)),$[Cr]=_n.X[kr],kr=!0}kr||t(st.h==ke(st))}if(k.Pb&&st.h&&tr<Pe)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&sr(k.s.vb,k.s.Wa);else{if(st.h)break e;Ne?.(k,Te>De?De:Te),k.a=0,k.$=tr-ee}return 1}return k.a=3,0}function vn(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var $=k.Wa;$!=null&&($.X=null),k.vb=null,t(k!=null)}function Rn(){var k=new Ni;return k==null?null:(k.a=0,k.xb=Hc,Ot("Predictor","VP8LPredictors"),Ot("Predictor","VP8LPredictors_C"),Ot("PredictorAdd","VP8LPredictorsAdd"),Ot("PredictorAdd","VP8LPredictorsAdd_C"),$l=yr,qt=de,Ur=Me,nn=Ue,si=Ke,fn=Qe,Tn=wt,Y.VP8LMapColor32b=_s,Y.VP8LMapColor8b=Qs,k)}function $r(k,$,ee,fe,Pe){var De=1,Ne=[k],Te=[$],Je=fe.m,st=fe.s,kt=null,tr=0;e:for(;;){if(ee)for(;De&&He(Je,1);){var ot=Ne,zt=Te,Rt=fe,cr=1,rr=Rt.m,hr=Rt.gc[Rt.ab],br=He(rr,2);if(Rt.Oc&1<<br)De=0;else{switch(Rt.Oc|=1<<br,hr.hc=br,hr.Ea=ot[0],hr.nc=zt[0],hr.K=[null],++Rt.ab,t(4>=Rt.ab),br){case 0:case 1:hr.b=He(rr,3)+2,cr=$r(Yt(hr.Ea,hr.b),Yt(hr.nc,hr.b),0,Rt,hr.K),hr.K=hr.K[0];break;case 3:var kr,Cr=He(rr,8)+1,_n=16<Cr?0:4<Cr?1:2<Cr?2:3;if(ot[0]=Yt(hr.Ea,_n),hr.b=_n,kr=cr=$r(Cr,1,0,Rt,hr.K)){var cn,Qn=Cr,mn=hr,di=1<<(8>>mn.b),Ga=o(di);if(Ga==null)kr=0;else{var Nn=mn.K[0],Wr=mn.w;for(Ga[0]=mn.K[0][0],cn=1;cn<1*Qn;++cn)Ga[cn]=Ve(Nn[Wr+cn],Ga[cn-1]);for(;cn<4*di;++cn)Ga[cn]=0;mn.K[0]=null,mn.K[0]=Ga,kr=1}}cr=kr;break;case 2:break;default:t(0)}De=cr}}if(Ne=Ne[0],Te=Te[0],De&&He(Je,1)&&!(De=1<=(tr=He(Je,4))&&11>=tr)){fe.a=3;break e}var Xr;if(Xr=De)t:{var _a,Wn,pi,Ki=fe,fo=Ne,da=Te,oa=tr,Jr=ee,on=Ki.m,Ea=Ki.s,ii=[null],Ci=1,mi=0,Bi=gd[oa];r:for(;;){if(Jr&&He(on,1)){var Vi=He(on,3)+2,Tl=Yt(fo,Vi),sa=Yt(da,Vi),ei=Tl*sa;if(!$r(Tl,sa,0,Ki,ii))break r;for(ii=ii[0],Ea.xc=Vi,_a=0;_a<ei;++_a){var Bn=ii[_a]>>8&65535;ii[_a]=Bn,Bn>=Ci&&(Ci=Bn+1)}}if(on.h)break r;for(Wn=0;5>Wn;++Wn){var Ca=Vc[Wn];!Wn&&0<oa&&(Ca+=1<<oa),mi<Ca&&(mi=Ca)}var ho=u(Ci*Bi,ae),Ha=Ci,ds=u(Ha,ue);if(ds==null)var po=null;else t(65536>=Ha),po=ds;var Wa=o(mi);if(po==null||Wa==null||ho==null){Ki.a=1;break r}var ko=ho;for(_a=pi=0;_a<Ci;++_a){var Ui=po[_a],to=Ui.G,ks=Ui.H,_u=0,nl=1,ro=0;for(Wn=0;5>Wn;++Wn){Ca=Vc[Wn],to[Wn]=ko,ks[Wn]=pi,!Wn&&0<oa&&(Ca+=1<<oa);i:{var S,s=Ca,h=Ki,y=Wa,_=ko,E=pi,I=0,j=h.m,V=He(j,1);if(i(y,0,0,s),V){var J=He(j,1)+1,re=He(j,1),ce=He(j,re==0?1:8);y[ce]=1,J==2&&(y[ce=He(j,8)]=1);var oe=1}else{var be=o(19),Ie=He(j,4)+4;if(19<Ie){h.a=3;var Ze=0;break i}for(S=0;S<Ie;++S)be[Df[S]]=He(j,3);var We=void 0,Xe=void 0,it=h,pt=be,ct=s,_t=y,Ct=0,ft=it.m,Dt=8,nr=u(128,ae);n:for(;G(nr,0,7,pt,19);){if(He(ft,1)){var Ht=2+2*He(ft,3);if((We=2+He(ft,Ht))>ct)break n}else We=ct;for(Xe=0;Xe<ct&&We--;){ht(ft);var Zt=nr[0+(127&Ce(ft))];$e(ft,ft.u+Zt.g);var Qt=Zt.value;if(16>Qt)_t[Xe++]=Qt,Qt!=0&&(Dt=Qt);else{var Or=Qt==16,Lr=Qt-16,_r=Fp[Lr],sn=He(ft,md[Lr])+_r;if(Xe+sn>ct)break n;for(var Un=Or?Dt:0;0<sn--;)_t[Xe++]=Un}}Ct=1;break n}Ct||(it.a=3),oe=Ct}(oe=oe&&!j.h)&&(I=G(_,E,8,y,s)),oe&&I!=0?Ze=I:(h.a=3,Ze=0)}if(Ze==0)break r;if(nl&&Lf[Wn]==1&&(nl=ko[pi].g==0),_u+=ko[pi].g,pi+=Ze,3>=Wn){var li,Ri=Wa[0];for(li=1;li<Ca;++li)Wa[li]>Ri&&(Ri=Wa[li]);ro+=Ri}}if(Ui.nd=nl,Ui.Qb=0,nl&&(Ui.qb=(to[3][ks[3]+0].value<<24|to[1][ks[1]+0].value<<16|to[2][ks[2]+0].value)>>>0,_u==0&&256>to[0][ks[0]+0].value&&(Ui.Qb=1,Ui.qb+=to[0][ks[0]+0].value<<8)),Ui.jc=!Ui.Qb&&6>ro,Ui.jc){var wi,Ai=Ui;for(wi=0;wi<Oa;++wi){var ji=wi,kn=Ai.pd[ji],Pi=Ai.G[0][Ai.H[0]+ji];256<=Pi.value?(kn.g=Pi.g+256,kn.value=Pi.value):(kn.g=0,kn.value=0,ji>>=jt(Pi,8,kn),ji>>=jt(Ai.G[1][Ai.H[1]+ji],16,kn),ji>>=jt(Ai.G[2][Ai.H[2]+ji],0,kn),jt(Ai.G[3][Ai.H[3]+ji],24,kn))}}}Ea.vc=ii,Ea.Wb=Ci,Ea.Ya=po,Ea.yc=ho,Xr=1;break t}Xr=0}if(!(De=Xr)){fe.a=3;break e}if(0<tr){if(st.ua=1<<tr,!Le(st.Wa,tr)){fe.a=1,De=0;break e}}else st.ua=0;var Aa=fe,Za=Ne,mo=Te,Lo=Aa.s,Ls=Lo.xc;if(Aa.c=Za,Aa.i=mo,Lo.md=Yt(Za,Ls),Lo.wc=Ls==0?-1:(1<<Ls)-1,ee){fe.xb=_h;break e}if((kt=o(Ne*Te))==null){fe.a=1,De=0;break e}De=(De=Sn(fe,kt,0,Ne,Te,Te,null))&&!Je.h;break e}return De?(Pe!=null?Pe[0]=kt:(t(kt==null),t(ee)),fe.$=0,ee||vn(st)):vn(st),De}function Ii(k,$){var ee=k.c*k.i,fe=ee+$+16*$;return t(k.c<=$),k.V=o(fe),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+ee+$,1)}function Li(k,$){var ee=k.C,fe=$-ee,Pe=k.V,De=k.Ba+k.c*ee;for(t($<=k.l.o);0<fe;){var Ne=16<fe?16:fe,Te=k.l.ma,Je=k.l.width,st=Je*Ne,kt=Te.ca,tr=Te.tb+Je*ee,ot=k.Ta,zt=k.Ua;Tr(k,Ne,Pe,De),cs(ot,zt,kt,tr,st),Ir(Te,ee,ee+Ne,kt,tr,Je),fe-=Ne,Pe+=Ne*k.c,ee+=Ne}t(ee==$),k.C=k.Ma=$}function Ji(){this.ub=this.yd=this.td=this.Rb=0}function vi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Mi(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ni(){this.Yb=(function(){var k=[];return(function $(ee,fe,Pe){for(var De=Pe[fe],Ne=0;Ne<De&&(ee.push(Pe.length>fe+1?[]:0),!(Pe.length<fe+1));Ne++)$(ee[Ne],fe+1,Pe)})(k,0,[3,11]),k})()}function Qi(){this.jb=o(3),this.Wc=a([4,8],ni),this.Xc=a([4,17],ni)}function ea(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function hn(){this.ld=this.La=this.dd=this.tc=0}function Jn(){this.Na=this.la=0}function qi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ya(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Di(){this.uc=this.M=this.Nb=0,this.wa=Array(new hn),this.Y=0,this.ya=Array(new ya),this.aa=0,this.l=new io}function hi(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Qa(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new Ji,this.Kc=new vi,this.ed=new ea,this.Qa=new Mi,this.Ic=this.$c=this.Aa=0,this.D=new Di,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,pe),this.ia=0,this.pb=u(4,qi),this.Pa=new Qi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hi),this.Hd=0,this.rb=Array(new Jn),this.sb=0,this.wa=Array(new hn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ya),this.L=this.aa=0,this.gd=a([4,2],hn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function io(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function uu(){var k=new Qa;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Al||(Al=Hs)),k}function Hi(k,$,ee){return k.a==0&&(k.a=$,k.sc=ee,k.cb=0),0}function uc(k,$,ee){return 3<=ee&&k[$+0]==157&&k[$+1]==1&&k[$+2]==42}function $c(k,$){if(k==null)return 0;if(k.a=0,k.sc="OK",$==null)return Hi(k,2,"null VP8Io passed to VP8GetHeaders()");var ee=$.data,fe=$.w,Pe=$.ha;if(4>Pe)return Hi(k,7,"Truncated header.");var De=ee[fe+0]|ee[fe+1]<<8|ee[fe+2]<<16,Ne=k.Od;if(Ne.Rb=!(1&De),Ne.td=De>>1&7,Ne.yd=De>>4&1,Ne.ub=De>>5,3<Ne.td)return Hi(k,3,"Incorrect keyframe parameters.");if(!Ne.yd)return Hi(k,4,"Frame not displayable.");fe+=3,Pe-=3;var Te=k.Kc;if(Ne.Rb){if(7>Pe)return Hi(k,7,"cannot parse picture header");if(!uc(ee,fe,Pe))return Hi(k,3,"Bad code word");Te.c=16383&(ee[fe+4]<<8|ee[fe+3]),Te.Td=ee[fe+4]>>6,Te.i=16383&(ee[fe+6]<<8|ee[fe+5]),Te.Ud=ee[fe+6]>>6,fe+=7,Pe-=7,k.za=Te.c+15>>4,k.Ub=Te.i+15>>4,$.width=Te.c,$.height=Te.i,$.Da=0,$.j=0,$.v=0,$.va=$.width,$.o=$.height,$.da=0,$.ib=$.width,$.hb=$.height,$.U=$.width,$.T=$.height,i((De=k.Pa).jb,0,255,De.jb.length),t((De=k.Qa)!=null),De.Cb=0,De.Bb=0,De.Fb=1,i(De.Zb,0,0,De.Zb.length),i(De.Lb,0,0,De.Lb)}if(Ne.ub>Pe)return Hi(k,7,"bad partition length");ye(De=k.m,ee,fe,Ne.ub),fe+=Ne.ub,Pe-=Ne.ub,Ne.Rb&&(Te.Ld=mt(De),Te.Kd=mt(De)),Te=k.Qa;var Je,st=k.Pa;if(t(De!=null),t(Te!=null),Te.Cb=mt(De),Te.Cb){if(Te.Bb=mt(De),mt(De)){for(Te.Fb=mt(De),Je=0;4>Je;++Je)Te.Zb[Je]=mt(De)?ge(De,7):0;for(Je=0;4>Je;++Je)Te.Lb[Je]=mt(De)?ge(De,6):0}if(Te.Bb)for(Je=0;3>Je;++Je)st.jb[Je]=mt(De)?Se(De,8):255}else Te.Bb=0;if(De.Ka)return Hi(k,3,"cannot parse segment header");if((Te=k.ed).zd=mt(De),Te.Tb=Se(De,6),Te.wb=Se(De,3),Te.Pc=mt(De),Te.Pc&&mt(De)){for(st=0;4>st;++st)mt(De)&&(Te.vd[st]=ge(De,6));for(st=0;4>st;++st)mt(De)&&(Te.od[st]=ge(De,6))}if(k.L=Te.Tb==0?0:Te.zd?1:2,De.Ka)return Hi(k,3,"cannot parse filter header");var kt=Pe;if(Pe=Je=fe,fe=Je+kt,Te=kt,k.Xb=(1<<Se(k.m,2))-1,kt<3*(st=k.Xb))ee=7;else{for(Je+=3*st,Te-=3*st,kt=0;kt<st;++kt){var tr=ee[Pe+0]|ee[Pe+1]<<8|ee[Pe+2]<<16;tr>Te&&(tr=Te),ye(k.Jc[+kt],ee,Je,tr),Je+=tr,Te-=tr,Pe+=3}ye(k.Jc[+st],ee,Je,Te),ee=Je<fe?0:5}if(ee!=0)return Hi(k,ee,"cannot parse partitions");for(ee=Se(Je=k.m,7),Pe=mt(Je)?ge(Je,4):0,fe=mt(Je)?ge(Je,4):0,Te=mt(Je)?ge(Je,4):0,st=mt(Je)?ge(Je,4):0,Je=mt(Je)?ge(Je,4):0,kt=k.Qa,tr=0;4>tr;++tr){if(kt.Cb){var ot=kt.Zb[tr];kt.Fb||(ot+=ee)}else{if(0<tr){k.pb[tr]=k.pb[0];continue}ot=ee}var zt=k.pb[tr];zt.Sc[0]=Nf[ha(ot+Pe,127)],zt.Sc[1]=Gc[ha(ot+0,127)],zt.Eb[0]=2*Nf[ha(ot+fe,127)],zt.Eb[1]=101581*Gc[ha(ot+Te,127)]>>16,8>zt.Eb[1]&&(zt.Eb[1]=8),zt.Qc[0]=Nf[ha(ot+st,117)],zt.Qc[1]=Gc[ha(ot+Je,127)],zt.lc=ot+Je}if(!Ne.Rb)return Hi(k,4,"Not a key frame.");for(mt(De),Ne=k.Pa,ee=0;4>ee;++ee){for(Pe=0;8>Pe;++Pe)for(fe=0;3>fe;++fe)for(Te=0;11>Te;++Te)st=rt(De,ay[ee][Pe][fe][Te])?Se(De,8):bh[ee][Pe][fe][Te],Ne.Wc[ee][Pe].Yb[fe][Te]=st;for(Pe=0;17>Pe;++Pe)Ne.Xc[ee][Pe]=Ne.Wc[ee][_d[Pe]]}return k.kc=mt(De),k.kc&&(k.Bd=Se(De,8)),k.cb=1}function Hs(k,$,ee,fe,Pe,De,Ne){var Te=$[Pe].Yb[ee];for(ee=0;16>Pe;++Pe){if(!rt(k,Te[ee+0]))return Pe;for(;!rt(k,Te[ee+1]);)if(Te=$[++Pe].Yb[0],ee=0,Pe==16)return 16;var Je=$[Pe+1].Yb;if(rt(k,Te[ee+2])){var st=k,kt=0;if(rt(st,(ot=Te)[(tr=ee)+3]))if(rt(st,ot[tr+6])){for(Te=0,tr=2*(kt=rt(st,ot[tr+8]))+(ot=rt(st,ot[tr+9+kt])),kt=0,ot=yd[tr];ot[Te];++Te)kt+=kt+rt(st,ot[Te]);kt+=3+(8<<tr)}else rt(st,ot[tr+7])?(kt=7+2*rt(st,165),kt+=rt(st,145)):kt=5+rt(st,159);else kt=rt(st,ot[tr+4])?3+rt(st,ot[tr+5]):2;Te=Je[2]}else kt=1,Te=Je[1];Je=Ne+Bp[Pe],0>(st=k).b&&At(st);var tr,ot=st.b,zt=(tr=st.Ca>>1)-(st.I>>ot)>>31;--st.b,st.Ca+=zt,st.Ca|=1,st.I-=(tr+1&zt)<<ot,De[Je]=((kt^zt)-zt)*fe[(0<Pe)+0]}return 16}function ml(k){var $=k.rb[k.sb-1];$.la=0,$.Na=0,i(k.zc,0,0,k.zc.length),k.ja=0}function Wo(k,$,ee,fe,Pe){Pe=k[$+ee+32*fe]+(Pe>>3),k[$+ee+32*fe]=-256&Pe?0>Pe?0:255:Pe}function as(k,$,ee,fe,Pe,De){Wo(k,$,0,ee,fe+Pe),Wo(k,$,1,ee,fe+De),Wo(k,$,2,ee,fe-De),Wo(k,$,3,ee,fe-Pe)}function ia(k){return(20091*k>>16)+k}function cu(k,$,ee,fe){var Pe,De=0,Ne=o(16);for(Pe=0;4>Pe;++Pe){var Te=k[$+0]+k[$+8],Je=k[$+0]-k[$+8],st=(35468*k[$+4]>>16)-ia(k[$+12]),kt=ia(k[$+4])+(35468*k[$+12]>>16);Ne[De+0]=Te+kt,Ne[De+1]=Je+st,Ne[De+2]=Je-st,Ne[De+3]=Te-kt,De+=4,$++}for(Pe=De=0;4>Pe;++Pe)Te=(k=Ne[De+0]+4)+Ne[De+8],Je=k-Ne[De+8],st=(35468*Ne[De+4]>>16)-ia(Ne[De+12]),Wo(ee,fe,0,0,Te+(kt=ia(Ne[De+4])+(35468*Ne[De+12]>>16))),Wo(ee,fe,1,0,Je+st),Wo(ee,fe,2,0,Je-st),Wo(ee,fe,3,0,Te-kt),De++,fe+=32}function Bl(k,$,ee,fe){var Pe=k[$+0]+4,De=35468*k[$+4]>>16,Ne=ia(k[$+4]),Te=35468*k[$+1]>>16;as(ee,fe,0,Pe+Ne,k=ia(k[$+1]),Te),as(ee,fe,1,Pe+De,k,Te),as(ee,fe,2,Pe-De,k,Te),as(ee,fe,3,Pe-Ne,k,Te)}function jl(k,$,ee,fe,Pe){cu(k,$,ee,fe),Pe&&cu(k,$+16,ee,fe+4)}function U(k,$,ee,fe){_i(k,$+0,ee,fe,1),_i(k,$+32,ee,fe+128,1)}function te(k,$,ee,fe){var Pe;for(k=k[$+0]+4,Pe=0;4>Pe;++Pe)for($=0;4>$;++$)Wo(ee,fe,$,Pe,k)}function Re(k,$,ee,fe){k[$+0]&&ka(k,$+0,ee,fe),k[$+16]&&ka(k,$+16,ee,fe+4),k[$+32]&&ka(k,$+32,ee,fe+128),k[$+48]&&ka(k,$+48,ee,fe+128+4)}function dt(k,$,ee,fe){var Pe,De=o(16);for(Pe=0;4>Pe;++Pe){var Ne=k[$+0+Pe]+k[$+12+Pe],Te=k[$+4+Pe]+k[$+8+Pe],Je=k[$+4+Pe]-k[$+8+Pe],st=k[$+0+Pe]-k[$+12+Pe];De[0+Pe]=Ne+Te,De[8+Pe]=Ne-Te,De[4+Pe]=st+Je,De[12+Pe]=st-Je}for(Pe=0;4>Pe;++Pe)Ne=(k=De[0+4*Pe]+3)+De[3+4*Pe],Te=De[1+4*Pe]+De[2+4*Pe],Je=De[1+4*Pe]-De[2+4*Pe],st=k-De[3+4*Pe],ee[fe+0]=Ne+Te>>3,ee[fe+16]=st+Je>>3,ee[fe+32]=Ne-Te>>3,ee[fe+48]=st-Je>>3,fe+=64}function St(k,$,ee){var fe,Pe=$-32,De=En,Ne=255-k[Pe-1];for(fe=0;fe<ee;++fe){var Te,Je=De,st=Ne+k[$-1];for(Te=0;Te<ee;++Te)k[$+Te]=Je[st+k[Pe+Te]];$+=32}}function yt(k,$){St(k,$,4)}function Bt(k,$){St(k,$,8)}function xr(k,$){St(k,$,16)}function Ar(k,$){var ee;for(ee=0;16>ee;++ee)n(k,$+32*ee,k,$-32,16)}function jr(k,$){var ee;for(ee=16;0<ee;--ee)i(k,$,k[$-1],16),$+=32}function fr(k,$,ee){var fe;for(fe=0;16>fe;++fe)i($,ee+32*fe,k,16)}function Rr(k,$){var ee,fe=16;for(ee=0;16>ee;++ee)fe+=k[$-1+32*ee]+k[$+ee-32];fr(fe>>5,k,$)}function Pn(k,$){var ee,fe=8;for(ee=0;16>ee;++ee)fe+=k[$-1+32*ee];fr(fe>>4,k,$)}function bi(k,$){var ee,fe=8;for(ee=0;16>ee;++ee)fe+=k[$+ee-32];fr(fe>>4,k,$)}function dn(k,$){fr(128,k,$)}function Yr(k,$,ee){return k+2*$+ee+2>>2}function ur(k,$){var ee,fe=$-32;for(fe=new Uint8Array([Yr(k[fe-1],k[fe+0],k[fe+1]),Yr(k[fe+0],k[fe+1],k[fe+2]),Yr(k[fe+1],k[fe+2],k[fe+3]),Yr(k[fe+2],k[fe+3],k[fe+4])]),ee=0;4>ee;++ee)n(k,$+32*ee,fe,0,fe.length)}function Kr(k,$){var ee=k[$-1],fe=k[$-1+32],Pe=k[$-1+64],De=k[$-1+96];Lt(k,$+0,16843009*Yr(k[$-1-32],ee,fe)),Lt(k,$+32,16843009*Yr(ee,fe,Pe)),Lt(k,$+64,16843009*Yr(fe,Pe,De)),Lt(k,$+96,16843009*Yr(Pe,De,De))}function bn(k,$){var ee,fe=4;for(ee=0;4>ee;++ee)fe+=k[$+ee-32]+k[$-1+32*ee];for(fe>>=3,ee=0;4>ee;++ee)i(k,$+32*ee,fe,4)}function va(k,$){var ee=k[$-1+0],fe=k[$-1+32],Pe=k[$-1+64],De=k[$-1-32],Ne=k[$+0-32],Te=k[$+1-32],Je=k[$+2-32],st=k[$+3-32];k[$+0+96]=Yr(fe,Pe,k[$-1+96]),k[$+1+96]=k[$+0+64]=Yr(ee,fe,Pe),k[$+2+96]=k[$+1+64]=k[$+0+32]=Yr(De,ee,fe),k[$+3+96]=k[$+2+64]=k[$+1+32]=k[$+0+0]=Yr(Ne,De,ee),k[$+3+64]=k[$+2+32]=k[$+1+0]=Yr(Te,Ne,De),k[$+3+32]=k[$+2+0]=Yr(Je,Te,Ne),k[$+3+0]=Yr(st,Je,Te)}function Gn(k,$){var ee=k[$+1-32],fe=k[$+2-32],Pe=k[$+3-32],De=k[$+4-32],Ne=k[$+5-32],Te=k[$+6-32],Je=k[$+7-32];k[$+0+0]=Yr(k[$+0-32],ee,fe),k[$+1+0]=k[$+0+32]=Yr(ee,fe,Pe),k[$+2+0]=k[$+1+32]=k[$+0+64]=Yr(fe,Pe,De),k[$+3+0]=k[$+2+32]=k[$+1+64]=k[$+0+96]=Yr(Pe,De,Ne),k[$+3+32]=k[$+2+64]=k[$+1+96]=Yr(De,Ne,Te),k[$+3+64]=k[$+2+96]=Yr(Ne,Te,Je),k[$+3+96]=Yr(Te,Je,Je)}function aa(k,$){var ee=k[$-1+0],fe=k[$-1+32],Pe=k[$-1+64],De=k[$-1-32],Ne=k[$+0-32],Te=k[$+1-32],Je=k[$+2-32],st=k[$+3-32];k[$+0+0]=k[$+1+64]=De+Ne+1>>1,k[$+1+0]=k[$+2+64]=Ne+Te+1>>1,k[$+2+0]=k[$+3+64]=Te+Je+1>>1,k[$+3+0]=Je+st+1>>1,k[$+0+96]=Yr(Pe,fe,ee),k[$+0+64]=Yr(fe,ee,De),k[$+0+32]=k[$+1+96]=Yr(ee,De,Ne),k[$+1+32]=k[$+2+96]=Yr(De,Ne,Te),k[$+2+32]=k[$+3+96]=Yr(Ne,Te,Je),k[$+3+32]=Yr(Te,Je,st)}function ja(k,$){var ee=k[$+0-32],fe=k[$+1-32],Pe=k[$+2-32],De=k[$+3-32],Ne=k[$+4-32],Te=k[$+5-32],Je=k[$+6-32],st=k[$+7-32];k[$+0+0]=ee+fe+1>>1,k[$+1+0]=k[$+0+64]=fe+Pe+1>>1,k[$+2+0]=k[$+1+64]=Pe+De+1>>1,k[$+3+0]=k[$+2+64]=De+Ne+1>>1,k[$+0+32]=Yr(ee,fe,Pe),k[$+1+32]=k[$+0+96]=Yr(fe,Pe,De),k[$+2+32]=k[$+1+96]=Yr(Pe,De,Ne),k[$+3+32]=k[$+2+96]=Yr(De,Ne,Te),k[$+3+64]=Yr(Ne,Te,Je),k[$+3+96]=Yr(Te,Je,st)}function In(k,$){var ee=k[$-1+0],fe=k[$-1+32],Pe=k[$-1+64],De=k[$-1+96];k[$+0+0]=ee+fe+1>>1,k[$+2+0]=k[$+0+32]=fe+Pe+1>>1,k[$+2+32]=k[$+0+64]=Pe+De+1>>1,k[$+1+0]=Yr(ee,fe,Pe),k[$+3+0]=k[$+1+32]=Yr(fe,Pe,De),k[$+3+32]=k[$+1+64]=Yr(Pe,De,De),k[$+3+64]=k[$+2+64]=k[$+0+96]=k[$+1+96]=k[$+2+96]=k[$+3+96]=De}function os(k,$){var ee=k[$-1+0],fe=k[$-1+32],Pe=k[$-1+64],De=k[$-1+96],Ne=k[$-1-32],Te=k[$+0-32],Je=k[$+1-32],st=k[$+2-32];k[$+0+0]=k[$+2+32]=ee+Ne+1>>1,k[$+0+32]=k[$+2+64]=fe+ee+1>>1,k[$+0+64]=k[$+2+96]=Pe+fe+1>>1,k[$+0+96]=De+Pe+1>>1,k[$+3+0]=Yr(Te,Je,st),k[$+2+0]=Yr(Ne,Te,Je),k[$+1+0]=k[$+3+32]=Yr(ee,Ne,Te),k[$+1+32]=k[$+3+64]=Yr(fe,ee,Ne),k[$+1+64]=k[$+3+96]=Yr(Pe,fe,ee),k[$+1+96]=Yr(De,Pe,fe)}function yn(k,$){var ee;for(ee=0;8>ee;++ee)n(k,$+32*ee,k,$-32,8)}function pn(k,$){var ee;for(ee=0;8>ee;++ee)i(k,$,k[$-1],8),$+=32}function Po(k,$,ee){var fe;for(fe=0;8>fe;++fe)i($,ee+32*fe,k,8)}function zn(k,$){var ee,fe=8;for(ee=0;8>ee;++ee)fe+=k[$+ee-32]+k[$-1+32*ee];Po(fe>>4,k,$)}function ao(k,$){var ee,fe=4;for(ee=0;8>ee;++ee)fe+=k[$+ee-32];Po(fe>>3,k,$)}function oo(k,$){var ee,fe=4;for(ee=0;8>ee;++ee)fe+=k[$-1+32*ee];Po(fe>>3,k,$)}function To(k,$){Po(128,k,$)}function Ms(k,$,ee){var fe=k[$-ee],Pe=k[$+0],De=3*(Pe-fe)+cc[1020+k[$-2*ee]-k[$+ee]],Ne=Cl[112+(De+4>>3)];k[$-ee]=En[255+fe+Cl[112+(De+3>>3)]],k[$+0]=En[255+Pe-Ne]}function gl(k,$,ee,fe){var Pe=k[$+0],De=k[$+ee];return La[255+k[$-2*ee]-k[$-ee]]>fe||La[255+De-Pe]>fe}function Ws(k,$,ee,fe){return 4*La[255+k[$-ee]-k[$+0]]+La[255+k[$-2*ee]-k[$+ee]]<=fe}function Zs(k,$,ee,fe,Pe){var De=k[$-3*ee],Ne=k[$-2*ee],Te=k[$-ee],Je=k[$+0],st=k[$+ee],kt=k[$+2*ee],tr=k[$+3*ee];return 4*La[255+Te-Je]+La[255+Ne-st]>fe?0:La[255+k[$-4*ee]-De]<=Pe&&La[255+De-Ne]<=Pe&&La[255+Ne-Te]<=Pe&&La[255+tr-kt]<=Pe&&La[255+kt-st]<=Pe&&La[255+st-Je]<=Pe}function yl(k,$,ee,fe){var Pe=2*fe+1;for(fe=0;16>fe;++fe)Ws(k,$+fe,ee,Pe)&&Ms(k,$+fe,ee)}function Rs(k,$,ee,fe){var Pe=2*fe+1;for(fe=0;16>fe;++fe)Ws(k,$+fe*ee,1,Pe)&&Ms(k,$+fe*ee,1)}function vl(k,$,ee,fe){var Pe;for(Pe=3;0<Pe;--Pe)yl(k,$+=4*ee,ee,fe)}function Io(k,$,ee,fe){var Pe;for(Pe=3;0<Pe;--Pe)Rs(k,$+=4,ee,fe)}function Ei(k,$,ee,fe,Pe,De,Ne,Te){for(De=2*De+1;0<Pe--;){if(Zs(k,$,ee,De,Ne))if(gl(k,$,ee,Te))Ms(k,$,ee);else{var Je=k,st=$,kt=ee,tr=Je[st-2*kt],ot=Je[st-kt],zt=Je[st+0],Rt=Je[st+kt],cr=Je[st+2*kt],rr=27*(br=cc[1020+3*(zt-ot)+cc[1020+tr-Rt]])+63>>7,hr=18*br+63>>7,br=9*br+63>>7;Je[st-3*kt]=En[255+Je[st-3*kt]+br],Je[st-2*kt]=En[255+tr+hr],Je[st-kt]=En[255+ot+rr],Je[st+0]=En[255+zt-rr],Je[st+kt]=En[255+Rt-hr],Je[st+2*kt]=En[255+cr-br]}$+=fe}}function za(k,$,ee,fe,Pe,De,Ne,Te){for(De=2*De+1;0<Pe--;){if(Zs(k,$,ee,De,Ne))if(gl(k,$,ee,Te))Ms(k,$,ee);else{var Je=k,st=$,kt=ee,tr=Je[st-kt],ot=Je[st+0],zt=Je[st+kt],Rt=Cl[112+(4+(cr=3*(ot-tr))>>3)],cr=Cl[112+(cr+3>>3)],rr=Rt+1>>1;Je[st-2*kt]=En[255+Je[st-2*kt]+rr],Je[st-kt]=En[255+tr+cr],Je[st+0]=En[255+ot-Rt],Je[st+kt]=En[255+zt-rr]}$+=fe}}function X(k,$,ee,fe,Pe,De){Ei(k,$,ee,1,16,fe,Pe,De)}function Ae(k,$,ee,fe,Pe,De){Ei(k,$,1,ee,16,fe,Pe,De)}function et(k,$,ee,fe,Pe,De){var Ne;for(Ne=3;0<Ne;--Ne)za(k,$+=4*ee,ee,1,16,fe,Pe,De)}function It(k,$,ee,fe,Pe,De){var Ne;for(Ne=3;0<Ne;--Ne)za(k,$+=4,1,ee,16,fe,Pe,De)}function $t(k,$,ee,fe,Pe,De,Ne,Te){Ei(k,$,Pe,1,8,De,Ne,Te),Ei(ee,fe,Pe,1,8,De,Ne,Te)}function pr(k,$,ee,fe,Pe,De,Ne,Te){Ei(k,$,1,Pe,8,De,Ne,Te),Ei(ee,fe,1,Pe,8,De,Ne,Te)}function Er(k,$,ee,fe,Pe,De,Ne,Te){za(k,$+4*Pe,Pe,1,8,De,Ne,Te),za(ee,fe+4*Pe,Pe,1,8,De,Ne,Te)}function rn(k,$,ee,fe,Pe,De,Ne,Te){za(k,$+4,1,Pe,8,De,Ne,Te),za(ee,fe+4,1,Pe,8,De,Ne,Te)}function Qr(){this.ba=new bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Mn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function On(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xn(){this.ua=0,this.Wa=new lr,this.vb=new lr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new ae}function Ni(){this.xb=this.a=0,this.l=new io,this.ca=new bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _e,this.Pb=0,this.wd=new _e,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xn,this.ab=0,this.gc=u(4,On),this.Oc=0}function ta(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new io,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $n(k,$,ee,fe,Pe,De,Ne){for(k=k==null?0:k[$+0],$=0;$<Ne;++$)Pe[De+$]=k+ee[fe+$]&255,k=Pe[De+$]}function fa(k,$,ee,fe,Pe,De,Ne){var Te;if(k==null)$n(null,null,ee,fe,Pe,De,Ne);else for(Te=0;Te<Ne;++Te)Pe[De+Te]=k[$+Te]+ee[fe+Te]&255}function zi(k,$,ee,fe,Pe,De,Ne){if(k==null)$n(null,null,ee,fe,Pe,De,Ne);else{var Te,Je=k[$+0],st=Je,kt=Je;for(Te=0;Te<Ne;++Te)st=kt+(Je=k[$+Te])-st,kt=ee[fe+Te]+(-256&st?0>st?0:255:st)&255,st=Je,Pe[De+Te]=kt}}function Ma(k,$,ee,fe){var Pe=$.width,De=$.o;if(t(k!=null&&$!=null),0>ee||0>=fe||ee+fe>De)return null;if(!k.Cc){if(k.ga==null){var Ne;if(k.ga=new ta,(Ne=k.ga==null)||(Ne=$.width*$.o,t(k.Gb.length==0),k.Gb=o(Ne),k.Uc=0,k.Gb==null?Ne=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,Ne=1),Ne=!Ne),!Ne){Ne=k.ga;var Te=k.Fa,Je=k.P,st=k.qc,kt=k.mb,tr=k.nb,ot=Je+1,zt=st-1,Rt=Ne.l;if(t(Te!=null&&kt!=null&&$!=null),vu[0]=null,vu[1]=$n,vu[2]=fa,vu[3]=zi,Ne.ca=kt,Ne.tb=tr,Ne.c=$.width,Ne.i=$.height,t(0<Ne.c&&0<Ne.i),1>=st)$=0;else if(Ne.$a=3&Te[Je+0],Ne.Z=Te[Je+0]>>2&3,Ne.Lc=Te[Je+0]>>4&3,Je=Te[Je+0]>>6&3,0>Ne.$a||1<Ne.$a||4<=Ne.Z||1<Ne.Lc||Je)$=0;else if(Rt.put=xt,Rt.ac=gt,Rt.bc=Wt,Rt.ma=Ne,Rt.width=$.width,Rt.height=$.height,Rt.Da=$.Da,Rt.v=$.v,Rt.va=$.va,Rt.j=$.j,Rt.o=$.o,Ne.$a)e:{t(Ne.$a==1),$=Rn();t:for(;;){if($==null){$=0;break e}if(t(Ne!=null),Ne.mc=$,$.c=Ne.c,$.i=Ne.i,$.l=Ne.l,$.l.ma=Ne,$.l.width=Ne.c,$.l.height=Ne.i,$.a=0,xe($.m,Te,ot,zt),!$r(Ne.c,Ne.i,1,$,null)||($.ab==1&&$.gc[0].hc==3&&Vt($.s)?(Ne.ic=1,Te=$.c*$.i,$.Ta=null,$.Ua=0,$.V=o(Te),$.Ba=0,$.V==null?($.a=1,$=0):$=1):(Ne.ic=0,$=Ii($,Ne.c)),!$))break t;$=1;break e}Ne.mc=null,$=0}else $=zt>=Ne.c*Ne.i;Ne=!$}if(Ne)return null;k.ga.Lc!=1?k.Ga=0:fe=De-ee}t(k.ga!=null),t(ee+fe<=De);e:{if($=(Te=k.ga).c,De=Te.l.o,Te.$a==0){if(ot=k.rc,zt=k.Vc,Rt=k.Fa,Je=k.P+1+ee*$,st=k.mb,kt=k.nb+ee*$,t(Je<=k.P+k.qc),Te.Z!=0)for(t(vu[Te.Z]!=null),Ne=0;Ne<fe;++Ne)vu[Te.Z](ot,zt,Rt,Je,st,kt,$),ot=st,zt=kt,kt+=$,Je+=$;else for(Ne=0;Ne<fe;++Ne)n(st,kt,Rt,Je,$),ot=st,zt=kt,kt+=$,Je+=$;k.rc=ot,k.Vc=zt}else{if(t(Te.mc!=null),$=ee+fe,t((Ne=Te.mc)!=null),t($<=Ne.i),Ne.C>=$)$=1;else if(Te.ic||bl(),Te.ic){Te=Ne.V,ot=Ne.Ba,zt=Ne.c;var cr=Ne.i,rr=(Rt=1,Je=Ne.$/zt,st=Ne.$%zt,kt=Ne.m,tr=Ne.s,Ne.$),hr=zt*cr,br=zt*$,kr=tr.wc,Cr=rr<br?Jt(tr,st,Je):null;t(rr<=hr),t($<=cr),t(Vt(tr));t:for(;;){for(;!kt.h&&rr<br;){if(st&kr||(Cr=Jt(tr,st,Je)),t(Cr!=null),ht(kt),256>(cr=je(Cr.G[0],Cr.H[0],kt)))Te[ot+rr]=cr,++rr,++st>=zt&&(st=0,++Je<=$&&!(Je%16)&&Dr(Ne,Je));else{if(!(280>cr)){Rt=0;break t}cr=me(cr-256,kt);var _n,cn=je(Cr.G[4],Cr.H[4],kt);if(ht(kt),!(rr>=(cn=qe(zt,cn=me(cn,kt)))&&hr-rr>=cr)){Rt=0;break t}for(_n=0;_n<cr;++_n)Te[ot+rr+_n]=Te[ot+rr+_n-cn];for(rr+=cr,st+=cr;st>=zt;)st-=zt,++Je<=$&&!(Je%16)&&Dr(Ne,Je);rr<br&&st&kr&&(Cr=Jt(tr,st,Je))}t(kt.h==ke(kt))}Dr(Ne,Je>$?$:Je);break t}!Rt||kt.h&&rr<hr?(Rt=0,Ne.a=kt.h?5:3):Ne.$=rr,$=Rt}else $=Sn(Ne,Ne.V,Ne.Ba,Ne.c,Ne.i,$,Li);if(!$){fe=0;break e}}ee+fe>=De&&(k.Cc=1),fe=1}if(!fe)return null;if(k.Cc&&((fe=k.ga)!=null&&(fe.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+ee*Pe}function ss(k,$,ee,fe,Pe,De){for(;0<Pe--;){var Ne,Te=k,Je=$+(ee?1:0),st=k,kt=$+(ee?0:3);for(Ne=0;Ne<fe;++Ne){var tr=st[kt+4*Ne];tr!=255&&(tr*=32897,Te[Je+4*Ne+0]=Te[Je+4*Ne+0]*tr>>23,Te[Je+4*Ne+1]=Te[Je+4*Ne+1]*tr>>23,Te[Je+4*Ne+2]=Te[Je+4*Ne+2]*tr>>23)}$+=De}}function Ks(k,$,ee,fe,Pe){for(;0<fe--;){var De;for(De=0;De<ee;++De){var Ne=k[$+2*De+0],Te=15&(st=k[$+2*De+1]),Je=4369*Te,st=(240&st|st>>4)*Je>>16;k[$+2*De+0]=(240&Ne|Ne>>4)*Je>>16&240|(15&Ne|Ne<<4)*Je>>16>>4&15,k[$+2*De+1]=240&st|Te}$+=Pe}}function fu(k,$,ee,fe,Pe,De,Ne,Te){var Je,st,kt=255;for(st=0;st<Pe;++st){for(Je=0;Je<fe;++Je){var tr=k[$+Je];De[Ne+4*Je]=tr,kt&=tr}$+=ee,Ne+=Te}return kt!=255}function hu(k,$,ee,fe,Pe){var De;for(De=0;De<Pe;++De)ee[fe+De]=k[$+De]>>8}function bl(){Ko=ss,rl=Ks,uo=fu,cs=hu}function eo(k,$,ee){Y[k]=function(fe,Pe,De,Ne,Te,Je,st,kt,tr,ot,zt,Rt,cr,rr,hr,br,kr){var Cr,_n=kr-1>>1,cn=Te[Je+0]|st[kt+0]<<16,Qn=tr[ot+0]|zt[Rt+0]<<16;t(fe!=null);var mn=3*cn+Qn+131074>>2;for($(fe[Pe+0],255&mn,mn>>16,cr,rr),De!=null&&(mn=3*Qn+cn+131074>>2,$(De[Ne+0],255&mn,mn>>16,hr,br)),Cr=1;Cr<=_n;++Cr){var di=Te[Je+Cr]|st[kt+Cr]<<16,Ga=tr[ot+Cr]|zt[Rt+Cr]<<16,Nn=cn+di+Qn+Ga+524296,Wr=Nn+2*(di+Qn)>>3;mn=Wr+cn>>1,cn=(Nn=Nn+2*(cn+Ga)>>3)+di>>1,$(fe[Pe+2*Cr-1],255&mn,mn>>16,cr,rr+(2*Cr-1)*ee),$(fe[Pe+2*Cr-0],255&cn,cn>>16,cr,rr+(2*Cr-0)*ee),De!=null&&(mn=Nn+Qn>>1,cn=Wr+Ga>>1,$(De[Ne+2*Cr-1],255&mn,mn>>16,hr,br+(2*Cr-1)*ee),$(De[Ne+2*Cr+0],255&cn,cn>>16,hr,br+(2*Cr+0)*ee)),cn=di,Qn=Ga}1&kr||(mn=3*cn+Qn+131074>>2,$(fe[Pe+kr-1],255&mn,mn>>16,cr,rr+(kr-1)*ee),De!=null&&(mn=3*Qn+cn+131074>>2,$(De[Ne+kr-1],255&mn,mn>>16,hr,br+(kr-1)*ee)))}}function du(){co[yu]=xh,co[Hu]=wh,co[ws]=bu,co[Hl]=xd,co[gh]=wd,co[yh]=Sd,co[Np]=jp,co[kf]=wh,co[qc]=xd,co[Wu]=wd,co[fc]=Sd}function _l(k){return k&-16384?0>k?0:255:k>>Wc}function Ra(k,$){return _l((19077*k>>8)+(26149*$>>8)-14234)}function wa(k,$,ee){return _l((19077*k>>8)-(6419*$>>8)-(13320*ee>>8)+8708)}function $a(k,$){return _l((19077*k>>8)+(33050*$>>8)-17685)}function ba(k,$,ee,fe,Pe){fe[Pe+0]=Ra(k,ee),fe[Pe+1]=wa(k,$,ee),fe[Pe+2]=$a(k,$)}function so(k,$,ee,fe,Pe){fe[Pe+0]=$a(k,$),fe[Pe+1]=wa(k,$,ee),fe[Pe+2]=Ra(k,ee)}function zl(k,$,ee,fe,Pe){var De=wa(k,$,ee);$=De<<3&224|$a(k,$)>>3,fe[Pe+0]=248&Ra(k,ee)|De>>5,fe[Pe+1]=$}function Wi(k,$,ee,fe,Pe){var De=240&$a(k,$)|15;fe[Pe+0]=240&Ra(k,ee)|wa(k,$,ee)>>4,fe[Pe+1]=De}function Uc(k,$,ee,fe,Pe){fe[Pe+0]=255,ba(k,$,ee,fe,Pe+1)}function Mo(k,$,ee,fe,Pe){so(k,$,ee,fe,Pe),fe[Pe+3]=255}function xl(k,$,ee,fe,Pe){ba(k,$,ee,fe,Pe),fe[Pe+3]=255}function ha(k,$){return 0>k?0:k>$?$:k}function ls(k,$,ee){Y[k]=function(fe,Pe,De,Ne,Te,Je,st,kt,tr){for(var ot=kt+(-2&tr)*ee;kt!=ot;)$(fe[Pe+0],De[Ne+0],Te[Je+0],st,kt),$(fe[Pe+1],De[Ne+0],Te[Je+0],st,kt+ee),Pe+=2,++Ne,++Je,kt+=2*ee;1&tr&&$(fe[Pe+0],De[Ne+0],Te[Je+0],st,kt)}}function Uu(k,$,ee){return ee==0?k==0?$==0?6:5:$==0?4:0:ee}function pu(k,$,ee,fe,Pe){switch(k>>>30){case 3:_i($,ee,fe,Pe,0);break;case 2:$i($,ee,fe,Pe);break;case 1:ka($,ee,fe,Pe)}}function Xs(k,$){var ee,fe,Pe=$.M,De=$.Nb,Ne=k.oc,Te=k.pc+40,Je=k.oc,st=k.pc+584,kt=k.oc,tr=k.pc+600;for(ee=0;16>ee;++ee)Ne[Te+32*ee-1]=129;for(ee=0;8>ee;++ee)Je[st+32*ee-1]=129,kt[tr+32*ee-1]=129;for(0<Pe?Ne[Te-1-32]=Je[st-1-32]=kt[tr-1-32]=129:(i(Ne,Te-32-1,127,21),i(Je,st-32-1,127,9),i(kt,tr-32-1,127,9)),fe=0;fe<k.za;++fe){var ot=$.ya[$.aa+fe];if(0<fe){for(ee=-1;16>ee;++ee)n(Ne,Te+32*ee-4,Ne,Te+32*ee+12,4);for(ee=-1;8>ee;++ee)n(Je,st+32*ee-4,Je,st+32*ee+4,4),n(kt,tr+32*ee-4,kt,tr+32*ee+4,4)}var zt=k.Gd,Rt=k.Hd+fe,cr=ot.ad,rr=ot.Hc;if(0<Pe&&(n(Ne,Te-32,zt[Rt].y,0,16),n(Je,st-32,zt[Rt].f,0,8),n(kt,tr-32,zt[Rt].ea,0,8)),ot.Za){var hr=Ne,br=Te-32+16;for(0<Pe&&(fe>=k.za-1?i(hr,br,zt[Rt].y[15],4):n(hr,br,zt[Rt+1].y,0,4)),ee=0;4>ee;ee++)hr[br+128+ee]=hr[br+256+ee]=hr[br+384+ee]=hr[br+0+ee];for(ee=0;16>ee;++ee,rr<<=2)hr=Ne,br=Te+hs[ee],qa[ot.Ob[ee]](hr,br),pu(rr,cr,16*+ee,hr,br)}else if(hr=Uu(fe,Pe,ot.Ob[0]),Fi[hr](Ne,Te),rr!=0)for(ee=0;16>ee;++ee,rr<<=2)pu(rr,cr,16*+ee,Ne,Te+hs[ee]);for(ee=ot.Gc,hr=Uu(fe,Pe,ot.Dd),Va[hr](Je,st),Va[hr](kt,tr),rr=cr,hr=Je,br=st,255&(ot=0|ee)&&(170&ot?ra(rr,256,hr,br):Zo(rr,256,hr,br)),ot=kt,rr=tr,255&(ee>>=8)&&(170&ee?ra(cr,320,ot,rr):Zo(cr,320,ot,rr)),Pe<k.Ub-1&&(n(zt[Rt].y,0,Ne,Te+480,16),n(zt[Rt].f,0,Je,st+224,8),n(zt[Rt].ea,0,kt,tr+224,8)),ee=8*De*k.B,zt=k.sa,Rt=k.ta+16*fe+16*De*k.R,cr=k.qa,ot=k.ra+8*fe+ee,rr=k.Ha,hr=k.Ia+8*fe+ee,ee=0;16>ee;++ee)n(zt,Rt+ee*k.R,Ne,Te+32*ee,16);for(ee=0;8>ee;++ee)n(cr,ot+ee*k.B,Je,st+32*ee,8),n(rr,hr+ee*k.B,kt,tr+32*ee,8)}}function Ys(k,$,ee,fe,Pe,De,Ne,Te,Je){var st=[0],kt=[0],tr=0,ot=Je!=null?Je.kd:0,zt=Je??new Mn;if(k==null||12>ee)return 7;zt.data=k,zt.w=$,zt.ha=ee,$=[$],ee=[ee],zt.gb=[zt.gb];e:{var Rt=$,cr=ee,rr=zt.gb;if(t(k!=null),t(cr!=null),t(rr!=null),rr[0]=0,12<=cr[0]&&!r(k,Rt[0],"RIFF")){if(r(k,Rt[0]+8,"WEBP")){rr=3;break e}var hr=ut(k,Rt[0]+4);if(12>hr||4294967286<hr){rr=3;break e}if(ot&&hr>cr[0]-8){rr=7;break e}rr[0]=hr,Rt[0]+=12,cr[0]-=12}rr=0}if(rr!=0)return rr;for(hr=0<zt.gb[0],ee=ee[0];;){e:{var br=k;cr=$,rr=ee;var kr=st,Cr=kt,_n=Rt=[0];if((mn=tr=[tr])[0]=0,8>rr[0])rr=7;else{if(!r(br,cr[0],"VP8X")){if(ut(br,cr[0]+4)!=10){rr=3;break e}if(18>rr[0]){rr=7;break e}var cn=ut(br,cr[0]+8),Qn=1+Pt(br,cr[0]+12);if(2147483648<=Qn*(br=1+Pt(br,cr[0]+15))){rr=3;break e}_n!=null&&(_n[0]=cn),kr!=null&&(kr[0]=Qn),Cr!=null&&(Cr[0]=br),cr[0]+=18,rr[0]-=18,mn[0]=1}rr=0}}if(tr=tr[0],Rt=Rt[0],rr!=0)return rr;if(cr=!!(2&Rt),!hr&&tr)return 3;if(De!=null&&(De[0]=!!(16&Rt)),Ne!=null&&(Ne[0]=cr),Te!=null&&(Te[0]=0),Ne=st[0],Rt=kt[0],tr&&cr&&Je==null){rr=0;break}if(4>ee){rr=7;break}if(hr&&tr||!hr&&!tr&&!r(k,$[0],"ALPH")){ee=[ee],zt.na=[zt.na],zt.P=[zt.P],zt.Sa=[zt.Sa];e:{cn=k,rr=$,hr=ee;var mn=zt.gb;kr=zt.na,Cr=zt.P,_n=zt.Sa,Qn=22,t(cn!=null),t(hr!=null),br=rr[0];var di=hr[0];for(t(kr!=null),t(_n!=null),kr[0]=null,Cr[0]=null,_n[0]=0;;){if(rr[0]=br,hr[0]=di,8>di){rr=7;break e}var Ga=ut(cn,br+4);if(4294967286<Ga){rr=3;break e}var Nn=8+Ga+1&-2;if(Qn+=Nn,0<mn&&Qn>mn){rr=3;break e}if(!r(cn,br,"VP8 ")||!r(cn,br,"VP8L")){rr=0;break e}if(di[0]<Nn){rr=7;break e}r(cn,br,"ALPH")||(kr[0]=cn,Cr[0]=br+8,_n[0]=Ga),br+=Nn,di-=Nn}}if(ee=ee[0],zt.na=zt.na[0],zt.P=zt.P[0],zt.Sa=zt.Sa[0],rr!=0)break}ee=[ee],zt.Ja=[zt.Ja],zt.xa=[zt.xa];e:if(mn=k,rr=$,hr=ee,kr=zt.gb[0],Cr=zt.Ja,_n=zt.xa,cn=rr[0],br=!r(mn,cn,"VP8 "),Qn=!r(mn,cn,"VP8L"),t(mn!=null),t(hr!=null),t(Cr!=null),t(_n!=null),8>hr[0])rr=7;else{if(br||Qn){if(mn=ut(mn,cn+4),12<=kr&&mn>kr-12){rr=3;break e}if(ot&&mn>hr[0]-8){rr=7;break e}Cr[0]=mn,rr[0]+=8,hr[0]-=8,_n[0]=Qn}else _n[0]=5<=hr[0]&&mn[cn+0]==47&&!(mn[cn+4]>>5),Cr[0]=hr[0];rr=0}if(ee=ee[0],zt.Ja=zt.Ja[0],zt.xa=zt.xa[0],$=$[0],rr!=0)break;if(4294967286<zt.Ja)return 3;if(Te==null||cr||(Te[0]=zt.xa?2:1),Ne=[Ne],Rt=[Rt],zt.xa){if(5>ee){rr=7;break}Te=Ne,ot=Rt,cr=De,k==null||5>ee?k=0:5<=ee&&k[$+0]==47&&!(k[$+4]>>5)?(hr=[0],mn=[0],kr=[0],xe(Cr=new _e,k,$,ee),ne(Cr,hr,mn,kr)?(Te!=null&&(Te[0]=hr[0]),ot!=null&&(ot[0]=mn[0]),cr!=null&&(cr[0]=kr[0]),k=1):k=0):k=0}else{if(10>ee){rr=7;break}Te=Rt,k==null||10>ee||!uc(k,$+3,ee-3)?k=0:(ot=k[$+0]|k[$+1]<<8|k[$+2]<<16,cr=16383&(k[$+7]<<8|k[$+6]),k=16383&(k[$+9]<<8|k[$+8]),1&ot||3<(ot>>1&7)||!(ot>>4&1)||ot>>5>=zt.Ja||!cr||!k?k=0:(Ne&&(Ne[0]=cr),Te&&(Te[0]=k),k=1))}if(!k||(Ne=Ne[0],Rt=Rt[0],tr&&(st[0]!=Ne||kt[0]!=Rt)))return 3;Je!=null&&(Je[0]=zt,Je.offset=$-Je.w,t(4294967286>$-Je.w),t(Je.offset==Je.ha-ee));break}return rr==0||rr==7&&tr&&Je==null?(De!=null&&(De[0]|=zt.na!=null&&0<zt.na.length),fe!=null&&(fe[0]=Ne),Pe!=null&&(Pe[0]=Rt),0):rr}function Ua(k,$,ee){var fe=$.width,Pe=$.height,De=0,Ne=0,Te=fe,Je=Pe;if($.Da=k!=null&&0<k.Da,$.Da&&(Te=k.cd,Je=k.bd,De=k.v,Ne=k.j,11>ee||(De&=-2,Ne&=-2),0>De||0>Ne||0>=Te||0>=Je||De+Te>fe||Ne+Je>Pe))return 0;if($.v=De,$.j=Ne,$.va=De+Te,$.o=Ne+Je,$.U=Te,$.T=Je,$.da=k!=null&&0<k.da,$.da){if(!dr(Te,Je,ee=[k.ib],De=[k.hb]))return 0;$.ib=ee[0],$.hb=De[0]}return $.ob=k!=null&&k.ob,$.Kb=k==null||!k.Sd,$.da&&($.ob=$.ib<3*fe/4&&$.hb<3*Pe/4,$.Kb=0),1}function Sa(k){if(k==null)return 2;if(11>k.S){var $=k.f.RGBA;$.fb+=(k.height-1)*$.A,$.A=-$.A}else $=k.f.kb,k=k.height,$.O+=(k-1)*$.fa,$.fa=-$.fa,$.N+=(k-1>>1)*$.Ab,$.Ab=-$.Ab,$.W+=(k-1>>1)*$.Db,$.Db=-$.Db,$.F!=null&&($.J+=(k-1)*$.lb,$.lb=-$.lb);return 0}function us(k,$,ee,fe){if(fe==null||0>=k||0>=$)return 2;if(ee!=null){if(ee.Da){var Pe=ee.cd,De=ee.bd,Ne=-2&ee.v,Te=-2&ee.j;if(0>Ne||0>Te||0>=Pe||0>=De||Ne+Pe>k||Te+De>$)return 2;k=Pe,$=De}if(ee.da){if(!dr(k,$,Pe=[ee.ib],De=[ee.hb]))return 2;k=Pe[0],$=De[0]}}fe.width=k,fe.height=$;e:{var Je=fe.width,st=fe.height;if(k=fe.S,0>=Je||0>=st||!(k>=yu&&13>k))k=2;else{if(0>=fe.Rd&&fe.sd==null){Ne=De=Pe=$=0;var kt=(Te=Je*dc[k])*st;if(11>k||(De=(st+1)/2*($=(Je+1)/2),k==12&&(Ne=(Pe=Je)*st)),(st=o(kt+2*De+Ne))==null){k=1;break e}fe.sd=st,11>k?((Je=fe.f.RGBA).eb=st,Je.fb=0,Je.A=Te,Je.size=kt):((Je=fe.f.kb).y=st,Je.O=0,Je.fa=Te,Je.Fd=kt,Je.f=st,Je.N=0+kt,Je.Ab=$,Je.Cd=De,Je.ea=st,Je.W=0+kt+De,Je.Db=$,Je.Ed=De,k==12&&(Je.F=st,Je.J=0+kt+2*De),Je.Tc=Ne,Je.lb=Pe)}if($=1,Pe=fe.S,De=fe.width,Ne=fe.height,Pe>=yu&&13>Pe)if(11>Pe)k=fe.f.RGBA,$&=(Te=Math.abs(k.A))*(Ne-1)+De<=k.size,$&=Te>=De*dc[Pe],$&=k.eb!=null;else{k=fe.f.kb,Te=(De+1)/2,kt=(Ne+1)/2,Je=Math.abs(k.fa),st=Math.abs(k.Ab);var tr=Math.abs(k.Db),ot=Math.abs(k.lb),zt=ot*(Ne-1)+De;$&=Je*(Ne-1)+De<=k.Fd,$&=st*(kt-1)+Te<=k.Cd,$=($&=tr*(kt-1)+Te<=k.Ed)&Je>=De&st>=Te&tr>=Te,$&=k.y!=null,$&=k.f!=null,$&=k.ea!=null,Pe==12&&($&=ot>=De,$&=zt<=k.Tc,$&=k.F!=null)}else $=0;k=$?0:2}}return k!=0||ee!=null&&ee.fd&&(k=Sa(fe)),k}var Oa=64,Js=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ro=24,wl=32,Zi=8,mu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];tt("Predictor0","PredictorAdd0"),Y.Predictor0=function(){return 4278190080},Y.Predictor1=function(k){return k},Y.Predictor2=function(k,$,ee){return $[ee+0]},Y.Predictor3=function(k,$,ee){return $[ee+1]},Y.Predictor4=function(k,$,ee){return $[ee-1]},Y.Predictor5=function(k,$,ee){return Mt(Mt(k,$[ee+1]),$[ee+0])},Y.Predictor6=function(k,$,ee){return Mt(k,$[ee-1])},Y.Predictor7=function(k,$,ee){return Mt(k,$[ee+0])},Y.Predictor8=function(k,$,ee){return Mt($[ee-1],$[ee+0])},Y.Predictor9=function(k,$,ee){return Mt($[ee+0],$[ee+1])},Y.Predictor10=function(k,$,ee){return Mt(Mt(k,$[ee-1]),Mt($[ee+0],$[ee+1]))},Y.Predictor11=function(k,$,ee){var fe=$[ee+0];return 0>=ar(fe>>24&255,k>>24&255,($=$[ee-1])>>24&255)+ar(fe>>16&255,k>>16&255,$>>16&255)+ar(fe>>8&255,k>>8&255,$>>8&255)+ar(255&fe,255&k,255&$)?fe:k},Y.Predictor12=function(k,$,ee){var fe=$[ee+0];return(Kt((k>>24&255)+(fe>>24&255)-(($=$[ee-1])>>24&255))<<24|Kt((k>>16&255)+(fe>>16&255)-($>>16&255))<<16|Kt((k>>8&255)+(fe>>8&255)-($>>8&255))<<8|Kt((255&k)+(255&fe)-(255&$)))>>>0},Y.Predictor13=function(k,$,ee){var fe=$[ee-1];return(Ut((k=Mt(k,$[ee+0]))>>24&255,fe>>24&255)<<24|Ut(k>>16&255,fe>>16&255)<<16|Ut(k>>8&255,fe>>8&255)<<8|Ut(255&k,255&fe))>>>0};var vs=Y.PredictorAdd0;Y.PredictorAdd1=gr,tt("Predictor2","PredictorAdd2"),tt("Predictor3","PredictorAdd3"),tt("Predictor4","PredictorAdd4"),tt("Predictor5","PredictorAdd5"),tt("Predictor6","PredictorAdd6"),tt("Predictor7","PredictorAdd7"),tt("Predictor8","PredictorAdd8"),tt("Predictor9","PredictorAdd9"),tt("Predictor10","PredictorAdd10"),tt("Predictor11","PredictorAdd11"),tt("Predictor12","PredictorAdd12"),tt("Predictor13","PredictorAdd13");var bs=Y.PredictorAdd2;he("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),he("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var $l,Ul=Y.ColorIndexInverseTransform,_s=Y.MapARGB,ql=Y.VP8LColorIndexInverseTransformAlpha,Qs=Y.MapAlpha,Ft=Y.VP8LPredictorsAdd=[];Ft.length=16,(Y.VP8LPredictors=[]).length=16,(Y.VP8LPredictorsAdd_C=[]).length=16,(Y.VP8LPredictors_C=[]).length=16;var qt,Ur,nn,si,fn,Tn,Hn,_i,$i,ra,ka,Zo,lo,Os,el,Vl,tl,Gl,Sl,qu,gu,ri,xi,Vu,Ko,rl,uo,cs,fs=o(511),El=o(2041),Gu=o(225),xs=o(767),Oo=0,cc=El,Cl=Gu,En=xs,La=fs,yu=0,Hu=1,ws=2,Hl=3,gh=4,yh=5,Np=6,kf=7,qc=8,Wu=9,fc=10,md=[2,3,7],Fp=[3,3,11],Vc=[280,256,256,256,40],Lf=[0,1,1,1,0],Df=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],vh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gd=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hc=8,Nf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Gc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Al=null,yd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Bp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ay=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_d=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fi=[],qa=[],Va=[],_h=1,Hc=2,vu=[],co=[];eo("UpsampleRgbLinePair",ba,3),eo("UpsampleBgrLinePair",so,3),eo("UpsampleRgbaLinePair",xl,4),eo("UpsampleBgraLinePair",Mo,4),eo("UpsampleArgbLinePair",Uc,4),eo("UpsampleRgba4444LinePair",Wi,2),eo("UpsampleRgb565LinePair",zl,2);var xh=Y.UpsampleRgbLinePair,bu=Y.UpsampleBgrLinePair,wh=Y.UpsampleRgbaLinePair,xd=Y.UpsampleBgraLinePair,wd=Y.UpsampleArgbLinePair,Sd=Y.UpsampleRgba4444LinePair,jp=Y.UpsampleRgb565LinePair,Ff=16,Ss=1<<Ff-1,Wl=-227,Xo=482,Wc=6,Sh=0,zp=o(256),$p=o(256),Zc=o(256),Ed=o(256),Kc=o(Xo-Wl),Up=o(Xo-Wl);ls("YuvToRgbRow",ba,3),ls("YuvToBgrRow",so,3),ls("YuvToRgbaRow",xl,4),ls("YuvToBgraRow",Mo,4),ls("YuvToArgbRow",Uc,4),ls("YuvToRgba4444Row",Wi,2),ls("YuvToRgb565Row",zl,2);var hs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Es=[0,2,8],Xc=[8,7,6,4,4,2,2,2,1,1,1,1],Pl=1;this.WebPDecodeRGBA=function(k,$,ee,fe,Pe){var De=Hu,Ne=new Qr,Te=new bt;Ne.ba=Te,Te.S=De,Te.width=[Te.width],Te.height=[Te.height];var Je=Te.width,st=Te.height,kt=new Sr;if(kt==null||k==null)var tr=2;else t(kt!=null),tr=Ys(k,$,ee,kt.width,kt.height,kt.Pd,kt.Qd,kt.format,null);if(tr!=0?Je=0:(Je!=null&&(Je[0]=kt.width[0]),st!=null&&(st[0]=kt.height[0]),Je=1),Je){Te.width=Te.width[0],Te.height=Te.height[0],fe!=null&&(fe[0]=Te.width),Pe!=null&&(Pe[0]=Te.height);e:{if(fe=new io,(Pe=new Mn).data=k,Pe.w=$,Pe.ha=ee,Pe.kd=1,$=[0],t(Pe!=null),((k=Ys(Pe.data,Pe.w,Pe.ha,null,null,null,$,null,Pe))==0||k==7)&&$[0]&&(k=4),($=k)==0){if(t(Ne!=null),fe.data=Pe.data,fe.w=Pe.w+Pe.offset,fe.ha=Pe.ha-Pe.offset,fe.put=xt,fe.ac=gt,fe.bc=Wt,fe.ma=Ne,Pe.xa){if((k=Rn())==null){Ne=1;break e}if((function(ot,zt){var Rt=[0],cr=[0],rr=[0];t:for(;;){if(ot==null)return 0;if(zt==null)return ot.a=2,0;if(ot.l=zt,ot.a=0,xe(ot.m,zt.data,zt.w,zt.ha),!ne(ot.m,Rt,cr,rr)){ot.a=3;break t}if(ot.xb=Hc,zt.width=Rt[0],zt.height=cr[0],!$r(Rt[0],cr[0],1,ot,null))break t;return 1}return t(ot.a!=0),0})(k,fe)){if(fe=($=us(fe.width,fe.height,Ne.Oa,Ne.ba))==0){t:{fe=k;r:for(;;){if(fe==null){fe=0;break t}if(t(fe.s.yc!=null),t(fe.s.Ya!=null),t(0<fe.s.Wb),t((ee=fe.l)!=null),t((Pe=ee.ma)!=null),fe.xb!=0){if(fe.ca=Pe.ba,fe.tb=Pe.tb,t(fe.ca!=null),!Ua(Pe.Oa,ee,Hl)){fe.a=2;break r}if(!Ii(fe,ee.width)||ee.da)break r;if((ee.da||Gt(fe.ca.S))&&bl(),11>fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),fe.ca.f.kb.F!=null&&bl()),fe.Pb&&0<fe.s.ua&&fe.s.vb.X==null&&!Le(fe.s.vb,fe.s.Wa.Xa)){fe.a=1;break r}fe.xb=0}if(!Sn(fe,fe.V,fe.Ba,fe.c,fe.i,ee.o,zr))break r;Pe.Dc=fe.Ma,fe=1;break t}t(fe.a!=0),fe=0}fe=!fe}fe&&($=k.a)}else $=k.a}else{if((k=new uu)==null){Ne=1;break e}if(k.Fa=Pe.na,k.P=Pe.P,k.qc=Pe.Sa,$c(k,fe)){if(($=us(fe.width,fe.height,Ne.Oa,Ne.ba))==0){if(k.Aa=0,ee=Ne.Oa,t((Pe=k)!=null),ee!=null){if(0<(Je=0>(Je=ee.Md)?0:100<Je?255:255*Je/100)){for(st=kt=0;4>st;++st)12>(tr=Pe.pb[st]).lc&&(tr.ia=Je*Xc[0>tr.lc?0:tr.lc]>>3),kt|=tr.ia;kt&&(alert("todo:VP8InitRandom"),Pe.ia=1)}Pe.Ga=ee.Id,100<Pe.Ga?Pe.Ga=100:0>Pe.Ga&&(Pe.Ga=0)}(function(ot,zt){if(ot==null)return 0;if(zt==null)return Hi(ot,2,"NULL VP8Io parameter in VP8Decode().");if(!ot.cb&&!$c(ot,zt))return 0;if(t(ot.cb),zt.ac==null||zt.ac(zt)){zt.ob&&(ot.L=0);var Rt=Es[ot.L];if(ot.L==2?(ot.yb=0,ot.zb=0):(ot.yb=zt.v-Rt>>4,ot.zb=zt.j-Rt>>4,0>ot.yb&&(ot.yb=0),0>ot.zb&&(ot.zb=0)),ot.Va=zt.o+15+Rt>>4,ot.Hb=zt.va+15+Rt>>4,ot.Hb>ot.za&&(ot.Hb=ot.za),ot.Va>ot.Ub&&(ot.Va=ot.Ub),0<ot.L){var cr=ot.ed;for(Rt=0;4>Rt;++Rt){var rr;if(ot.Qa.Cb){var hr=ot.Qa.Lb[Rt];ot.Qa.Fb||(hr+=cr.Tb)}else hr=cr.Tb;for(rr=0;1>=rr;++rr){var br=ot.gd[Rt][rr],kr=hr;if(cr.Pc&&(kr+=cr.vd[0],rr&&(kr+=cr.od[0])),0<(kr=0>kr?0:63<kr?63:kr)){var Cr=kr;0<cr.wb&&(Cr=4<cr.wb?Cr>>2:Cr>>1)>9-cr.wb&&(Cr=9-cr.wb),1>Cr&&(Cr=1),br.dd=Cr,br.tc=2*kr+Cr,br.ld=40<=kr?2:15<=kr?1:0}else br.tc=0;br.La=rr}}}Rt=0}else Hi(ot,6,"Frame setup failed"),Rt=ot.a;if(Rt=Rt==0){if(Rt){ot.$c=0,0<ot.Aa||(ot.Ic=Pl);t:{Rt=ot.Ic,cr=4*(Cr=ot.za);var _n=32*Cr,cn=Cr+1,Qn=0<ot.L?Cr*(0<ot.Aa?2:1):0,mn=(ot.Aa==2?2:1)*Cr;if((br=cr+832+(rr=3*(16*Rt+Es[ot.L])/2*_n)+(hr=ot.Fa!=null&&0<ot.Fa.length?ot.Kc.c*ot.Kc.i:0))!=br)Rt=0;else{if(br>ot.Vb){if(ot.Vb=0,ot.Ec=o(br),ot.Fc=0,ot.Ec==null){Rt=Hi(ot,1,"no memory during frame initialization.");break t}ot.Vb=br}br=ot.Ec,kr=ot.Fc,ot.Ac=br,ot.Bc=kr,kr+=cr,ot.Gd=u(_n,hi),ot.Hd=0,ot.rb=u(cn+1,Jn),ot.sb=1,ot.wa=Qn?u(Qn,hn):null,ot.Y=0,ot.D.Nb=0,ot.D.wa=ot.wa,ot.D.Y=ot.Y,0<ot.Aa&&(ot.D.Y+=Cr),t(!0),ot.oc=br,ot.pc=kr,kr+=832,ot.ya=u(mn,ya),ot.aa=0,ot.D.ya=ot.ya,ot.D.aa=ot.aa,ot.Aa==2&&(ot.D.aa+=Cr),ot.R=16*Cr,ot.B=8*Cr,Cr=(_n=Es[ot.L])*ot.R,_n=_n/2*ot.B,ot.sa=br,ot.ta=kr+Cr,ot.qa=ot.sa,ot.ra=ot.ta+16*Rt*ot.R+_n,ot.Ha=ot.qa,ot.Ia=ot.ra+8*Rt*ot.B+_n,ot.$c=0,kr+=rr,ot.mb=hr?br:null,ot.nb=hr?kr:null,t(kr+hr<=ot.Fc+ot.Vb),ml(ot),i(ot.Ac,ot.Bc,0,cr),Rt=1}}if(Rt){if(zt.ka=0,zt.y=ot.sa,zt.O=ot.ta,zt.f=ot.qa,zt.N=ot.ra,zt.ea=ot.Ha,zt.Vd=ot.Ia,zt.fa=ot.R,zt.Rc=ot.B,zt.F=null,zt.J=0,!Oo){for(Rt=-255;255>=Rt;++Rt)fs[255+Rt]=0>Rt?-Rt:Rt;for(Rt=-1020;1020>=Rt;++Rt)El[1020+Rt]=-128>Rt?-128:127<Rt?127:Rt;for(Rt=-112;112>=Rt;++Rt)Gu[112+Rt]=-16>Rt?-16:15<Rt?15:Rt;for(Rt=-255;510>=Rt;++Rt)xs[255+Rt]=0>Rt?0:255<Rt?255:Rt;Oo=1}Hn=dt,_i=jl,ra=U,ka=te,Zo=Re,$i=Bl,lo=X,Os=Ae,el=$t,Vl=pr,tl=et,Gl=It,Sl=Er,qu=rn,gu=yl,ri=Rs,xi=vl,Vu=Io,qa[0]=bn,qa[1]=yt,qa[2]=ur,qa[3]=Kr,qa[4]=va,qa[5]=aa,qa[6]=Gn,qa[7]=ja,qa[8]=os,qa[9]=In,Fi[0]=Rr,Fi[1]=xr,Fi[2]=Ar,Fi[3]=jr,Fi[4]=Pn,Fi[5]=bi,Fi[6]=dn,Va[0]=zn,Va[1]=Bt,Va[2]=yn,Va[3]=pn,Va[4]=oo,Va[5]=ao,Va[6]=To,Rt=1}else Rt=0}Rt&&(Rt=(function(di,Ga){for(di.M=0;di.M<di.Va;++di.M){var Nn,Wr=di.Jc[di.M&di.Xb],Xr=di.m,_a=di;for(Nn=0;Nn<_a.za;++Nn){var Wn=Xr,pi=_a,Ki=pi.Ac,fo=pi.Bc+4*Nn,da=pi.zc,oa=pi.ya[pi.aa+Nn];if(pi.Qa.Bb?oa.$b=rt(Wn,pi.Pa.jb[0])?2+rt(Wn,pi.Pa.jb[2]):rt(Wn,pi.Pa.jb[1]):oa.$b=0,pi.kc&&(oa.Ad=rt(Wn,pi.Bd)),oa.Za=!rt(Wn,145)+0,oa.Za){var Jr=oa.Ob,on=0;for(pi=0;4>pi;++pi){var Ea,ii=da[0+pi];for(Ea=0;4>Ea;++Ea){ii=bd[Ki[fo+Ea]][ii];for(var Ci=vd[rt(Wn,ii[0])];0<Ci;)Ci=vd[2*Ci+rt(Wn,ii[Ci])];ii=-Ci,Ki[fo+Ea]=ii}n(Jr,on,Ki,fo,4),on+=4,da[0+pi]=ii}}else ii=rt(Wn,156)?rt(Wn,128)?1:3:rt(Wn,163)?2:0,oa.Ob[0]=ii,i(Ki,fo,ii,4),i(da,0,ii,4);oa.Dd=rt(Wn,142)?rt(Wn,114)?rt(Wn,183)?1:3:2:0}if(_a.m.Ka)return Hi(di,7,"Premature end-of-partition0 encountered.");for(;di.ja<di.za;++di.ja){if(_a=Wr,Wn=(Xr=di).rb[Xr.sb-1],Ki=Xr.rb[Xr.sb+Xr.ja],Nn=Xr.ya[Xr.aa+Xr.ja],fo=Xr.kc?Nn.Ad:0)Wn.la=Ki.la=0,Nn.Za||(Wn.Na=Ki.Na=0),Nn.Hc=0,Nn.Gc=0,Nn.ia=0;else{var mi,Bi;if(Wn=Ki,Ki=_a,fo=Xr.Pa.Xc,da=Xr.ya[Xr.aa+Xr.ja],oa=Xr.pb[da.$b],pi=da.ad,Jr=0,on=Xr.rb[Xr.sb-1],ii=Ea=0,i(pi,Jr,0,384),da.Za)var Vi=0,Tl=fo[3];else{Ci=o(16);var sa=Wn.Na+on.Na;if(sa=Al(Ki,fo[1],sa,oa.Eb,0,Ci,0),Wn.Na=on.Na=(0<sa)+0,1<sa)Hn(Ci,0,pi,Jr);else{var ei=Ci[0]+3>>3;for(Ci=0;256>Ci;Ci+=16)pi[Jr+Ci]=ei}Vi=1,Tl=fo[0]}var Bn=15&Wn.la,Ca=15&on.la;for(Ci=0;4>Ci;++Ci){var ho=1&Ca;for(ei=Bi=0;4>ei;++ei)Bn=Bn>>1|(ho=(sa=Al(Ki,Tl,sa=ho+(1&Bn),oa.Sc,Vi,pi,Jr))>Vi)<<7,Bi=Bi<<2|(3<sa?3:1<sa?2:pi[Jr+0]!=0),Jr+=16;Bn>>=4,Ca=Ca>>1|ho<<7,Ea=(Ea<<8|Bi)>>>0}for(Tl=Bn,Vi=Ca>>4,mi=0;4>mi;mi+=2){for(Bi=0,Bn=Wn.la>>4+mi,Ca=on.la>>4+mi,Ci=0;2>Ci;++Ci){for(ho=1&Ca,ei=0;2>ei;++ei)sa=ho+(1&Bn),Bn=Bn>>1|(ho=0<(sa=Al(Ki,fo[2],sa,oa.Qc,0,pi,Jr)))<<3,Bi=Bi<<2|(3<sa?3:1<sa?2:pi[Jr+0]!=0),Jr+=16;Bn>>=2,Ca=Ca>>1|ho<<5}ii|=Bi<<4*mi,Tl|=Bn<<4<<mi,Vi|=(240&Ca)<<mi}Wn.la=Tl,on.la=Vi,da.Hc=Ea,da.Gc=ii,da.ia=43690&ii?0:oa.ia,fo=!(Ea|ii)}if(0<Xr.L&&(Xr.wa[Xr.Y+Xr.ja]=Xr.gd[Nn.$b][Nn.Za],Xr.wa[Xr.Y+Xr.ja].La|=!fo),_a.Ka)return Hi(di,7,"Premature end-of-file encountered.")}if(ml(di),Xr=Ga,_a=1,Nn=(Wr=di).D,Wn=0<Wr.L&&Wr.M>=Wr.zb&&Wr.M<=Wr.Va,Wr.Aa==0)t:{if(Nn.M=Wr.M,Nn.uc=Wn,Xs(Wr,Nn),_a=1,Nn=(Bi=Wr.D).Nb,Wn=(ii=Es[Wr.L])*Wr.R,Ki=ii/2*Wr.B,Ci=16*Nn*Wr.R,ei=8*Nn*Wr.B,fo=Wr.sa,da=Wr.ta-Wn+Ci,oa=Wr.qa,pi=Wr.ra-Ki+ei,Jr=Wr.Ha,on=Wr.Ia-Ki+ei,Ca=(Bn=Bi.M)==0,Ea=Bn>=Wr.Va-1,Wr.Aa==2&&Xs(Wr,Bi),Bi.uc)for(ho=(sa=Wr).D.M,t(sa.D.uc),Bi=sa.yb;Bi<sa.Hb;++Bi){Vi=Bi,Tl=ho;var Ha=(ds=(ro=sa).D).Nb;mi=ro.R;var ds=ds.wa[ds.Y+Vi],po=ro.sa,Wa=ro.ta+16*Ha*mi+16*Vi,ko=ds.dd,Ui=ds.tc;if(Ui!=0)if(t(3<=Ui),ro.L==1)0<Vi&&ri(po,Wa,mi,Ui+4),ds.La&&Vu(po,Wa,mi,Ui),0<Tl&&gu(po,Wa,mi,Ui+4),ds.La&&xi(po,Wa,mi,Ui);else{var to=ro.B,ks=ro.qa,_u=ro.ra+8*Ha*to+8*Vi,nl=ro.Ha,ro=ro.Ia+8*Ha*to+8*Vi;Ha=ds.ld,0<Vi&&(Os(po,Wa,mi,Ui+4,ko,Ha),Vl(ks,_u,nl,ro,to,Ui+4,ko,Ha)),ds.La&&(Gl(po,Wa,mi,Ui,ko,Ha),qu(ks,_u,nl,ro,to,Ui,ko,Ha)),0<Tl&&(lo(po,Wa,mi,Ui+4,ko,Ha),el(ks,_u,nl,ro,to,Ui+4,ko,Ha)),ds.La&&(tl(po,Wa,mi,Ui,ko,Ha),Sl(ks,_u,nl,ro,to,Ui,ko,Ha))}}if(Wr.ia&&alert("todo:DitherRow"),Xr.put!=null){if(Bi=16*Bn,Bn=16*(Bn+1),Ca?(Xr.y=Wr.sa,Xr.O=Wr.ta+Ci,Xr.f=Wr.qa,Xr.N=Wr.ra+ei,Xr.ea=Wr.Ha,Xr.W=Wr.Ia+ei):(Bi-=ii,Xr.y=fo,Xr.O=da,Xr.f=oa,Xr.N=pi,Xr.ea=Jr,Xr.W=on),Ea||(Bn-=ii),Bn>Xr.o&&(Bn=Xr.o),Xr.F=null,Xr.J=null,Wr.Fa!=null&&0<Wr.Fa.length&&Bi<Bn&&(Xr.J=Ma(Wr,Xr,Bi,Bn-Bi),Xr.F=Wr.mb,Xr.F==null&&Xr.F.length==0)){_a=Hi(Wr,3,"Could not decode alpha data.");break t}Bi<Xr.j&&(ii=Xr.j-Bi,Bi=Xr.j,t(!(1&ii)),Xr.O+=Wr.R*ii,Xr.N+=Wr.B*(ii>>1),Xr.W+=Wr.B*(ii>>1),Xr.F!=null&&(Xr.J+=Xr.width*ii)),Bi<Bn&&(Xr.O+=Xr.v,Xr.N+=Xr.v>>1,Xr.W+=Xr.v>>1,Xr.F!=null&&(Xr.J+=Xr.v),Xr.ka=Bi-Xr.j,Xr.U=Xr.va-Xr.v,Xr.T=Bn-Bi,_a=Xr.put(Xr))}Nn+1!=Wr.Ic||Ea||(n(Wr.sa,Wr.ta-Wn,fo,da+16*Wr.R,Wn),n(Wr.qa,Wr.ra-Ki,oa,pi+8*Wr.B,Ki),n(Wr.Ha,Wr.Ia-Ki,Jr,on+8*Wr.B,Ki))}if(!_a)return Hi(di,6,"Output aborted.")}return 1})(ot,zt)),zt.bc!=null&&zt.bc(zt),Rt&=1}return Rt?(ot.cb=0,Rt):0})(k,fe)||($=k.a)}}else $=k.a}$==0&&Ne.Oa!=null&&Ne.Oa.fd&&($=Sa(Ne.ba))}Ne=$}De=Ne!=0?null:11>De?Te.f.RGBA.eb:Te.f.kb.y}else De=null;return De};var dc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(Y,se){for(var W="",G=0;G<4;G++)W+=String.fromCharCode(Y[se++]);return W}function m(Y,se){return Y[se+0]|Y[se+1]<<8}function v(Y,se){return(Y[se+0]|Y[se+1]<<8|Y[se+2]<<16)>>>0}function w(Y,se){return(Y[se+0]|Y[se+1]<<8|Y[se+2]<<16|Y[se+3]<<24)>>>0}new p;var x=[0],P=[0],T=[],O=new p,L=e,N=(function(Y,se){var W={},G=0,ae=!1,le=0,ue=0;if(W.frames=[],!(function(pe,_e){for(var Ce=0;Ce<4;Ce++)if(pe[_e+Ce]!="RIFF".charCodeAt(Ce))return!0;return!1})(Y,se)){for(w(Y,se+=4),se+=8;se<Y.length;){var ye=d(Y,se),Se=w(Y,se+=4);se+=4;var ge=Se+(1&Se);switch(ye){case"VP8 ":case"VP8L":W.frames[G]===void 0&&(W.frames[G]={}),(He=W.frames[G]).src_off=ae?ue:se-8,He.src_size=le+Se+8,G++,ae&&(ae=!1,le=0,ue=0);break;case"VP8X":(He=W.header={}).feature_flags=Y[se];var xe=se+4;He.canvas_width=1+v(Y,xe),xe+=3,He.canvas_height=1+v(Y,xe),xe+=3;break;case"ALPH":ae=!0,le=ge+8,ue=se-8;break;case"ANIM":(He=W.header).bgcolor=w(Y,se),xe=se+4,He.loop_count=m(Y,xe),xe+=2;break;case"ANMF":var Fe,He;(He=W.frames[G]={}).offset_x=2*v(Y,se),se+=3,He.offset_y=2*v(Y,se),se+=3,He.width=1+v(Y,se),se+=3,He.height=1+v(Y,se),se+=3,He.duration=v(Y,se),se+=3,Fe=Y[se++],He.dispose=1&Fe,He.blend=Fe>>1&1}ye!="ANMF"&&(se+=ge)}return W}})(L,0);N.response=L,N.rgbaoutput=!0,N.dataurl=!1;var F=N.header?N.header:null,D=N.frames?N.frames:null;if(F){F.loop_counter=F.loop_count,x=[F.canvas_height],P=[F.canvas_width];for(var q=0;q<D.length&&D[q].blend!=0;q++);}var z=D[0],Z=O.WebPDecodeRGBA(L,z.src_off,z.src_size,P,x);z.rgba=Z,z.imgwidth=P[0],z.imgheight=x[0];for(var Q=0;Q<P[0]*x[0]*4;Q++)T[Q]=Z[Q];return this.width=P,this.height=x,this.data=T,this}(function(e){var t,r,n,i,o,u,a,p,d,m=function(pe){return pe=pe||{},this.isStrokeTransparent=pe.isStrokeTransparent||!1,this.strokeOpacity=pe.strokeOpacity||1,this.strokeStyle=pe.strokeStyle||"#000000",this.fillStyle=pe.fillStyle||"#000000",this.isFillTransparent=pe.isFillTransparent||!1,this.fillOpacity=pe.fillOpacity||1,this.font=pe.font||"10px sans-serif",this.textBaseline=pe.textBaseline||"alphabetic",this.textAlign=pe.textAlign||"left",this.lineWidth=pe.lineWidth||1,this.lineJoin=pe.lineJoin||"miter",this.lineCap=pe.lineCap||"butt",this.path=pe.path||[],this.transform=pe.transform!==void 0?pe.transform.clone():new p,this.globalCompositeOperation=pe.globalCompositeOperation||"normal",this.globalAlpha=pe.globalAlpha||1,this.clip_path=pe.clip_path||[],this.currentPoint=pe.currentPoint||new u,this.miterLimit=pe.miterLimit||10,this.lastPoint=pe.lastPoint||new u,this.lineDashOffset=pe.lineDashOffset||0,this.lineDash=pe.lineDash||[],this.margin=pe.margin||[0,0,0,0],this.prevPageLastElemOffset=pe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof pe.ignoreClearRect!="boolean"||pe.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,a=this.internal.Rectangle,p=this.internal.Matrix,d=new m}]);var v=function(pe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var _e=pe;Object.defineProperty(this,"pdf",{get:function(){return _e}});var Ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ce},set:function(ut){Ce=!!ut}});var ke=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ke},set:function(ut){ke=!!ut}});var $e=0;Object.defineProperty(this,"posX",{get:function(){return $e},set:function(ut){isNaN(ut)||($e=ut)}});var ht=0;Object.defineProperty(this,"posY",{get:function(){return ht},set:function(ut){isNaN(ut)||(ht=ut)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ut){var Le;typeof ut=="number"?Le=[ut,ut,ut,ut]:((Le=new Array(4))[0]=ut[0],Le[1]=ut.length>=2?ut[1]:Le[0],Le[2]=ut.length>=3?ut[2]:Le[0],Le[3]=ut.length>=4?ut[3]:Le[1]),d.margin=Le}});var At=!1;Object.defineProperty(this,"autoPaging",{get:function(){return At},set:function(ut){At=ut}});var mt=0;Object.defineProperty(this,"lastBreak",{get:function(){return mt},set:function(ut){mt=ut}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(ut){rt=ut}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ut){ut instanceof m&&(d=ut)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ut){d.path=ut}});var Lt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Lt},set:function(ut){Lt=ut}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ut){var Le;Le=w(ut),this.ctx.fillStyle=Le.style,this.ctx.isFillTransparent=Le.a===0,this.ctx.fillOpacity=Le.a,this.pdf.setFillColor(Le.r,Le.g,Le.b,{a:Le.a}),this.pdf.setTextColor(Le.r,Le.g,Le.b,{a:Le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ut){var Le=w(ut);this.ctx.strokeStyle=Le.style,this.ctx.isStrokeTransparent=Le.a===0,this.ctx.strokeOpacity=Le.a,Le.a===0?this.pdf.setDrawColor(255,255,255):(Le.a,this.pdf.setDrawColor(Le.r,Le.g,Le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ut){["butt","round","square"].indexOf(ut)!==-1&&(this.ctx.lineCap=ut,this.pdf.setLineCap(ut))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ut){isNaN(ut)||(this.ctx.lineWidth=ut,this.pdf.setLineWidth(ut))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ut){["bevel","round","miter"].indexOf(ut)!==-1&&(this.ctx.lineJoin=ut,this.pdf.setLineJoin(ut))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ut){isNaN(ut)||(this.ctx.miterLimit=ut,this.pdf.setMiterLimit(ut))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ut){this.ctx.textBaseline=ut}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ut){["right","end","center","left","start"].indexOf(ut)!==-1&&(this.ctx.textAlign=ut)}});var Tt=null,Pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pt},set:function(ut){Tt=null,Pt=ut}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ut){var Le;if(this.ctx.font=ut,(Le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ut))!==null){var sr=Le[1];Le[2];var lr=Le[3],dr=Le[4];Le[5];var Yt=Le[6],Ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dr)[2];dr=Math.floor(Ve==="px"?parseFloat(dr)*this.pdf.internal.scaleFactor:Ve==="em"?parseFloat(dr)*this.pdf.getFontSize():parseFloat(dr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dr);var tt=(function(de){var he,Me,Ue=[],Ke=de.trim();if(Ke==="")return r5;if(Ke in K4)return[K4[Ke]];for(;Ke!=="";){switch(Me=null,he=(Ke=Y4(Ke)).charAt(0)){case'"':case"'":Me=mue(Ke.substring(1),he);break;default:Me=gue(Ke)}if(Me===null||(Ue.push(Me[0]),(Ke=Y4(Me[1]))!==""&&Ke.charAt(0)!==","))return r5;Ke=Ke.replace(/^,/,"")}return Ue})(Yt);if(this.fontFaces){var lt=(function(de,he){if(Tt===null){var Me=(function(Ue){var Ke=[];return Object.keys(Ue).forEach(function(Qe){Ue[Qe].forEach(function(wt){var nt=null;switch(wt){case"bold":nt={family:Qe,weight:"bold"};break;case"italic":nt={family:Qe,style:"italic"};break;case"bolditalic":nt={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":nt={family:Qe}}nt!==null&&(nt.ref={name:Qe,style:wt},Ke.push(nt))})}),Ke})(de.getFontList());Tt=(function(Ue){for(var Ke={},Qe=0;Qe<Ue.length;++Qe){var wt=t5(Ue[Qe]),nt=wt.family,Ot=wt.stretch,Gt=wt.style,ir=wt.weight;Ke[nt]=Ke[nt]||{},Ke[nt][Ot]=Ke[nt][Ot]||{},Ke[nt][Ot][Gt]=Ke[nt][Ot][Gt]||{},Ke[nt][Ot][Gt][ir]=wt}return Ke})(Me.concat(he))}return Tt})(this.pdf,this.fontFaces),Mt=tt.map(function(de){return{family:de,stretch:"normal",weight:lr,style:sr}}),Kt=(function(de,he,Me){for(var Ue=(Me=Me||{}).defaultFontFamily||"times",Ke=Object.assign({},pue,Me.genericFontFamilies||{}),Qe=null,wt=null,nt=0;nt<he.length;++nt)if(Ke[(Qe=t5(he[nt])).family]&&(Qe.family=Ke[Qe.family]),de.hasOwnProperty(Qe.family)){wt=de[Qe.family];break}if(!(wt=wt||de[Ue]))throw new Error("Could not find a font-family for the rule '"+X4(Qe)+"' and default family '"+Ue+"'.");if(wt=(function(Ot,Gt){if(Gt[Ot])return Gt[Ot];var ir=JP[Ot],Pr=ir<=JP.normal?-1:1,bt=Z4(Gt,kU,ir,Pr);if(!bt)throw new Error("Could not find a matching font-stretch value for "+Ot);return bt})(Qe.stretch,wt),wt=(function(Ot,Gt){if(Gt[Ot])return Gt[Ot];for(var ir=OU[Ot],Pr=0;Pr<ir.length;++Pr)if(Gt[ir[Pr]])return Gt[ir[Pr]];throw new Error("Could not find a matching font-style for "+Ot)})(Qe.style,wt),!(wt=(function(Ot,Gt){if(Gt[Ot])return Gt[Ot];if(Ot===400&&Gt[500])return Gt[500];if(Ot===500&&Gt[400])return Gt[400];var ir=due[Ot],Pr=Z4(Gt,LU,ir,Ot<400?-1:1);if(!Pr)throw new Error("Could not find a matching font-weight for value "+Ot);return Pr})(Qe.weight,wt)))throw new Error("Failed to resolve a font for the rule '"+X4(Qe)+"'.");return wt})(lt,Mt);this.pdf.setFont(Kt.ref.name,Kt.ref.style)}else{var Ut="";(lr==="bold"||parseInt(lr,10)>=700||sr==="bold")&&(Ut="bold"),sr==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var ar="",gr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yr=0;yr<tt.length;yr++){if(this.pdf.internal.getFont(tt[yr],Ut,{noFallback:!0,disableWarning:!0})!==void 0){ar=tt[yr];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont(tt[yr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ar=tt[yr],Ut="bold";else if(this.pdf.internal.getFont(tt[yr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ar=tt[yr],Ut="normal";break}}if(ar===""){for(var Ye=0;Ye<tt.length;Ye++)if(gr[tt[Ye]]){ar=gr[tt[Ye]];break}}ar=ar===""?"Times":ar,this.pdf.setFont(ar,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ut){this.ctx.globalCompositeOperation=ut}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ut){this.ctx.globalAlpha=ut}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ut){this.ctx.lineDashOffset=ut,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ut){this.ctx.lineDash=ut,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ut){this.ctx.ignoreClearRect=!!ut}})};v.prototype.setLineDash=function(pe){this.lineDash=pe},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){D.call(this,"fill",!1)},v.prototype.stroke=function(){D.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(pe,_e){if(isNaN(pe)||isNaN(_e))throw xa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ce=this.ctx.transform.applyToPoint(new u(pe,_e));this.path.push({type:"mt",x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new u(pe,_e)},v.prototype.closePath=function(){var pe=new u(0,0),_e=0;for(_e=this.path.length-1;_e!==-1;_e--)if(this.path[_e].type==="begin"&&ca(this.path[_e+1])==="object"&&typeof this.path[_e+1].x=="number"){pe=new u(this.path[_e+1].x,this.path[_e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(pe.x,pe.y)},v.prototype.lineTo=function(pe,_e){if(isNaN(pe)||isNaN(_e))throw xa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ce=this.ctx.transform.applyToPoint(new u(pe,_e));this.path.push({type:"lt",x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new u(Ce.x,Ce.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},v.prototype.quadraticCurveTo=function(pe,_e,Ce,ke){if(isNaN(Ce)||isNaN(ke)||isNaN(pe)||isNaN(_e))throw xa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $e=this.ctx.transform.applyToPoint(new u(Ce,ke)),ht=this.ctx.transform.applyToPoint(new u(pe,_e));this.path.push({type:"qct",x1:ht.x,y1:ht.y,x:$e.x,y:$e.y}),this.ctx.lastPoint=new u($e.x,$e.y)},v.prototype.bezierCurveTo=function(pe,_e,Ce,ke,$e,ht){if(isNaN($e)||isNaN(ht)||isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke))throw xa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var At=this.ctx.transform.applyToPoint(new u($e,ht)),mt=this.ctx.transform.applyToPoint(new u(pe,_e)),rt=this.ctx.transform.applyToPoint(new u(Ce,ke));this.path.push({type:"bct",x1:mt.x,y1:mt.y,x2:rt.x,y2:rt.y,x:At.x,y:At.y}),this.ctx.lastPoint=new u(At.x,At.y)},v.prototype.arc=function(pe,_e,Ce,ke,$e,ht){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke)||isNaN($e))throw xa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ht=!!ht,!this.ctx.transform.isIdentity){var At=this.ctx.transform.applyToPoint(new u(pe,_e));pe=At.x,_e=At.y;var mt=this.ctx.transform.applyToPoint(new u(0,Ce)),rt=this.ctx.transform.applyToPoint(new u(0,0));Ce=Math.sqrt(Math.pow(mt.x-rt.x,2)+Math.pow(mt.y-rt.y,2))}Math.abs($e-ke)>=2*Math.PI&&(ke=0,$e=2*Math.PI),this.path.push({type:"arc",x:pe,y:_e,radius:Ce,startAngle:ke,endAngle:$e,counterclockwise:ht})},v.prototype.arcTo=function(pe,_e,Ce,ke,$e){throw new Error("arcTo not implemented.")},v.prototype.rect=function(pe,_e,Ce,ke){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke))throw xa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(pe,_e),this.lineTo(pe+Ce,_e),this.lineTo(pe+Ce,_e+ke),this.lineTo(pe,_e+ke),this.lineTo(pe,_e),this.lineTo(pe+Ce,_e),this.lineTo(pe,_e)},v.prototype.fillRect=function(pe,_e,Ce,ke){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke))throw xa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var $e={};this.lineCap!=="butt"&&($e.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&($e.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(pe,_e,Ce,ke),this.fill(),$e.hasOwnProperty("lineCap")&&(this.lineCap=$e.lineCap),$e.hasOwnProperty("lineJoin")&&(this.lineJoin=$e.lineJoin)}},v.prototype.strokeRect=function(pe,_e,Ce,ke){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke))throw xa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(pe,_e,Ce,ke),this.stroke())},v.prototype.clearRect=function(pe,_e,Ce,ke){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke))throw xa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(pe,_e,Ce,ke))},v.prototype.save=function(pe){pe=typeof pe!="boolean"||pe;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,Ce=0;Ce<this.pdf.internal.getNumberOfPages();Ce++)this.pdf.setPage(Ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(_e),pe){this.ctx.fontSize=this.pdf.internal.getFontSize();var ke=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ke}},v.prototype.restore=function(pe){pe=typeof pe!="boolean"||pe;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,Ce=0;Ce<this.pdf.internal.getNumberOfPages();Ce++)this.pdf.setPage(Ce+1),this.pdf.internal.out("Q");this.pdf.setPage(_e),pe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(pe){var _e,Ce,ke,$e;if(pe.isCanvasGradient===!0&&(pe=pe.getColor()),!pe)return{r:0,g:0,b:0,a:0,style:pe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(pe))_e=0,Ce=0,ke=0,$e=0;else{var ht=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(pe);if(ht!==null)_e=parseInt(ht[1]),Ce=parseInt(ht[2]),ke=parseInt(ht[3]),$e=1;else if((ht=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(pe))!==null)_e=parseInt(ht[1]),Ce=parseInt(ht[2]),ke=parseInt(ht[3]),$e=parseFloat(ht[4]);else{if($e=1,typeof pe=="string"&&pe.charAt(0)!=="#"){var At=new CU(pe);pe=At.ok?At.toHex():"#000000"}pe.length===4?(_e=pe.substring(1,2),_e+=_e,Ce=pe.substring(2,3),Ce+=Ce,ke=pe.substring(3,4),ke+=ke):(_e=pe.substring(1,3),Ce=pe.substring(3,5),ke=pe.substring(5,7)),_e=parseInt(_e,16),Ce=parseInt(Ce,16),ke=parseInt(ke,16)}}return{r:_e,g:Ce,b:ke,a:$e,style:pe}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(pe,_e,Ce,ke){if(isNaN(_e)||isNaN(Ce)||typeof pe!="string")throw xa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ke=isNaN(ke)?void 0:ke,!x.call(this)){var $e=ge(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:pe,x:_e,y:Ce,scale:ht,angle:$e,align:this.textAlign,maxWidth:ke})}},v.prototype.strokeText=function(pe,_e,Ce,ke){if(isNaN(_e)||isNaN(Ce)||typeof pe!="string")throw xa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){ke=isNaN(ke)?void 0:ke;var $e=ge(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:pe,x:_e,y:Ce,scale:ht,renderingMode:"stroke",angle:$e,align:this.textAlign,maxWidth:ke})}},v.prototype.measureText=function(pe){if(typeof pe!="string")throw xa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var _e=this.pdf,Ce=this.pdf.internal.scaleFactor,ke=_e.internal.getFontSize(),$e=_e.getStringUnitWidth(pe)*ke/_e.internal.scaleFactor;return new function(ht){var At=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return At}}),this}({width:$e*=Math.round(96*Ce/72*1e4)/1e4})},v.prototype.scale=function(pe,_e){if(isNaN(pe)||isNaN(_e))throw xa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ce=new p(pe,0,0,_e,0,0);this.ctx.transform=this.ctx.transform.multiply(Ce)},v.prototype.rotate=function(pe){if(isNaN(pe))throw xa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var _e=new p(Math.cos(pe),Math.sin(pe),-Math.sin(pe),Math.cos(pe),0,0);this.ctx.transform=this.ctx.transform.multiply(_e)},v.prototype.translate=function(pe,_e){if(isNaN(pe)||isNaN(_e))throw xa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ce=new p(1,0,0,1,pe,_e);this.ctx.transform=this.ctx.transform.multiply(Ce)},v.prototype.transform=function(pe,_e,Ce,ke,$e,ht){if(isNaN(pe)||isNaN(_e)||isNaN(Ce)||isNaN(ke)||isNaN($e)||isNaN(ht))throw xa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var At=new p(pe,_e,Ce,ke,$e,ht);this.ctx.transform=this.ctx.transform.multiply(At)},v.prototype.setTransform=function(pe,_e,Ce,ke,$e,ht){pe=isNaN(pe)?1:pe,_e=isNaN(_e)?0:_e,Ce=isNaN(Ce)?0:Ce,ke=isNaN(ke)?1:ke,$e=isNaN($e)?0:$e,ht=isNaN(ht)?0:ht,this.ctx.transform=new p(pe,_e,Ce,ke,$e,ht)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(pe,_e,Ce,ke,$e,ht,At,mt,rt){var Lt=this.pdf.getImageProperties(pe),Tt=1,Pt=1,ut=1,Le=1;ke!==void 0&&mt!==void 0&&(ut=mt/ke,Le=rt/$e,Tt=Lt.width/ke*mt/ke,Pt=Lt.height/$e*rt/$e),ht===void 0&&(ht=_e,At=Ce,_e=0,Ce=0),ke!==void 0&&mt===void 0&&(mt=ke,rt=$e),ke===void 0&&mt===void 0&&(mt=Lt.width,rt=Lt.height);for(var sr,lr=this.ctx.transform.decompose(),dr=ge(lr.rotate.shx),Yt=new p,Ve=(Yt=(Yt=(Yt=Yt.multiply(lr.translate)).multiply(lr.skew)).multiply(lr.scale)).applyToRectangle(new a(ht-_e*ut,At-Ce*Le,ke*Tt,$e*Pt)),tt=O.call(this,Ve),lt=[],Mt=0;Mt<tt.length;Mt+=1)lt.indexOf(tt[Mt])===-1&&lt.push(tt[Mt]);if(F(lt),this.autoPaging)for(var Kt=lt[0],Ut=lt[lt.length-1],ar=Kt;ar<Ut+1;ar++){this.pdf.setPage(ar);var gr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=ar===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],he=ar===1?0:Ye+(ar-2)*de;if(this.ctx.clip_path.length!==0){var Me=this.path;sr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(sr,this.posX+this.margin[3],-he+yr+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Me}var Ue=JSON.parse(JSON.stringify(Ve));Ue=N([Ue],this.posX+this.margin[3],-he+yr+this.ctx.prevPageLastElemOffset)[0];var Ke=(ar>Kt||ar<Ut)&&T.call(this);Ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gr,de,null).clip().discardPath()),this.pdf.addImage(pe,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,dr),Ke&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(pe,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,dr)};var O=function(pe,_e,Ce){var ke=[];_e=_e||this.pdf.internal.pageSize.width,Ce=Ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $e=this.posY+this.ctx.prevPageLastElemOffset;switch(pe.type){default:case"mt":case"lt":ke.push(Math.floor((pe.y+$e)/Ce)+1);break;case"arc":ke.push(Math.floor((pe.y+$e-pe.radius)/Ce)+1),ke.push(Math.floor((pe.y+$e+pe.radius)/Ce)+1);break;case"qct":var ht=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,pe.x1,pe.y1,pe.x,pe.y);ke.push(Math.floor((ht.y+$e)/Ce)+1),ke.push(Math.floor((ht.y+ht.h+$e)/Ce)+1);break;case"bct":var At=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,pe.x1,pe.y1,pe.x2,pe.y2,pe.x,pe.y);ke.push(Math.floor((At.y+$e)/Ce)+1),ke.push(Math.floor((At.y+At.h+$e)/Ce)+1);break;case"rect":ke.push(Math.floor((pe.y+$e)/Ce)+1),ke.push(Math.floor((pe.y+pe.h+$e)/Ce)+1)}for(var mt=0;mt<ke.length;mt+=1)for(;this.pdf.internal.getNumberOfPages()<ke[mt];)L.call(this);return ke},L=function(){var pe=this.fillStyle,_e=this.strokeStyle,Ce=this.font,ke=this.lineCap,$e=this.lineWidth,ht=this.lineJoin;this.pdf.addPage(),this.fillStyle=pe,this.strokeStyle=_e,this.font=Ce,this.lineCap=ke,this.lineWidth=$e,this.lineJoin=ht},N=function(pe,_e,Ce){for(var ke=0;ke<pe.length;ke++)switch(pe[ke].type){case"bct":pe[ke].x2+=_e,pe[ke].y2+=Ce;case"qct":pe[ke].x1+=_e,pe[ke].y1+=Ce;default:pe[ke].x+=_e,pe[ke].y+=Ce}return pe},F=function(pe){return pe.sort(function(_e,Ce){return _e-Ce})},D=function(pe,_e){for(var Ce,ke,$e=this.fillStyle,ht=this.strokeStyle,At=this.lineCap,mt=this.lineWidth,rt=Math.abs(mt*this.ctx.transform.scaleX),Lt=this.lineJoin,Tt=JSON.parse(JSON.stringify(this.path)),Pt=JSON.parse(JSON.stringify(this.path)),ut=[],Le=0;Le<Pt.length;Le++)if(Pt[Le].x!==void 0)for(var sr=O.call(this,Pt[Le]),lr=0;lr<sr.length;lr+=1)ut.indexOf(sr[lr])===-1&&ut.push(sr[lr]);for(var dr=0;dr<ut.length;dr++)for(;this.pdf.internal.getNumberOfPages()<ut[dr];)L.call(this);if(F(ut),this.autoPaging)for(var Yt=ut[0],Ve=ut[ut.length-1],tt=Yt;tt<Ve+1;tt++){this.pdf.setPage(tt),this.fillStyle=$e,this.strokeStyle=ht,this.lineCap=At,this.lineWidth=rt,this.lineJoin=Lt;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=tt===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ar=tt===1?0:Kt+(tt-2)*Ut;if(this.ctx.clip_path.length!==0){var gr=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Ce,this.posX+this.margin[3],-ar+Mt+this.ctx.prevPageLastElemOffset),q.call(this,pe,!0),this.path=gr}if(ke=JSON.parse(JSON.stringify(Tt)),this.path=N(ke,this.posX+this.margin[3],-ar+Mt+this.ctx.prevPageLastElemOffset),_e===!1||tt===0){var yr=(tt>Yt||tt<Ve)&&T.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Ut,null).clip().discardPath()),q.call(this,pe,_e),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}else this.lineWidth=rt,q.call(this,pe,_e),this.lineWidth=mt;this.path=Tt},q=function(pe,_e){if((pe!=="stroke"||_e||!P.call(this))&&(pe==="stroke"||_e||!x.call(this))){for(var Ce,ke,$e=[],ht=this.path,At=0;At<ht.length;At++){var mt=ht[At];switch(mt.type){case"begin":$e.push({begin:!0});break;case"close":$e.push({close:!0});break;case"mt":$e.push({start:mt,deltas:[],abs:[]});break;case"lt":var rt=$e.length;if(ht[At-1]&&!isNaN(ht[At-1].x)&&(Ce=[mt.x-ht[At-1].x,mt.y-ht[At-1].y],rt>0)){for(;rt>=0;rt--)if($e[rt-1].close!==!0&&$e[rt-1].begin!==!0){$e[rt-1].deltas.push(Ce),$e[rt-1].abs.push(mt);break}}break;case"bct":Ce=[mt.x1-ht[At-1].x,mt.y1-ht[At-1].y,mt.x2-ht[At-1].x,mt.y2-ht[At-1].y,mt.x-ht[At-1].x,mt.y-ht[At-1].y],$e[$e.length-1].deltas.push(Ce);break;case"qct":var Lt=ht[At-1].x+2/3*(mt.x1-ht[At-1].x),Tt=ht[At-1].y+2/3*(mt.y1-ht[At-1].y),Pt=mt.x+2/3*(mt.x1-mt.x),ut=mt.y+2/3*(mt.y1-mt.y),Le=mt.x,sr=mt.y;Ce=[Lt-ht[At-1].x,Tt-ht[At-1].y,Pt-ht[At-1].x,ut-ht[At-1].y,Le-ht[At-1].x,sr-ht[At-1].y],$e[$e.length-1].deltas.push(Ce);break;case"arc":$e.push({deltas:[],abs:[],arc:!0}),Array.isArray($e[$e.length-1].abs)&&$e[$e.length-1].abs.push(mt)}}ke=_e?null:pe==="stroke"?"stroke":"fill";for(var lr=!1,dr=0;dr<$e.length;dr++)if($e[dr].arc)for(var Yt=$e[dr].abs,Ve=0;Ve<Yt.length;Ve++){var tt=Yt[Ve];tt.type==="arc"?Q.call(this,tt.x,tt.y,tt.radius,tt.startAngle,tt.endAngle,tt.counterclockwise,void 0,_e,!lr):ae.call(this,tt.x,tt.y),lr=!0}else if($e[dr].close===!0)this.pdf.internal.out("h"),lr=!1;else if($e[dr].begin!==!0){var lt=$e[dr].start.x,Mt=$e[dr].start.y;le.call(this,$e[dr].deltas,lt,Mt),lr=!0}ke&&Y.call(this,ke),_e&&se.call(this)}},z=function(pe){var _e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ce=_e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return pe-Ce;case"top":return pe+_e-Ce;case"hanging":return pe+_e-2*Ce;case"middle":return pe+_e/2-Ce;default:return pe}},Z=function(pe){return pe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var pe=function(){};return pe.colorStops=[],pe.addColorStop=function(_e,Ce){this.colorStops.push([_e,Ce])},pe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},pe.isCanvasGradient=!0,pe},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Q=function(pe,_e,Ce,ke,$e,ht,At,mt,rt){for(var Lt=ye.call(this,Ce,ke,$e,ht),Tt=0;Tt<Lt.length;Tt++){var Pt=Lt[Tt];Tt===0&&(rt?W.call(this,Pt.x1+pe,Pt.y1+_e):ae.call(this,Pt.x1+pe,Pt.y1+_e)),ue.call(this,pe,_e,Pt.x2,Pt.y2,Pt.x3,Pt.y3,Pt.x4,Pt.y4)}mt?se.call(this):Y.call(this,At)},Y=function(pe){switch(pe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},se=function(){this.pdf.clip(),this.pdf.discardPath()},W=function(pe,_e){this.pdf.internal.out(r(pe)+" "+n(_e)+" m")},G=function(pe){var _e;switch(pe.align){case"right":case"end":_e="right";break;case"center":_e="center";break;default:_e="left"}var Ce=this.pdf.getTextDimensions(pe.text),ke=z.call(this,pe.y),$e=Z.call(this,ke)-Ce.h,ht=this.ctx.transform.applyToPoint(new u(pe.x,ke)),At=this.ctx.transform.decompose(),mt=new p;mt=(mt=(mt=mt.multiply(At.translate)).multiply(At.skew)).multiply(At.scale);for(var rt,Lt,Tt,Pt=this.ctx.transform.applyToRectangle(new a(pe.x,ke,Ce.w,Ce.h)),ut=mt.applyToRectangle(new a(pe.x,$e,Ce.w,Ce.h)),Le=O.call(this,ut),sr=[],lr=0;lr<Le.length;lr+=1)sr.indexOf(Le[lr])===-1&&sr.push(Le[lr]);if(F(sr),this.autoPaging)for(var dr=sr[0],Yt=sr[sr.length-1],Ve=dr;Ve<Yt+1;Ve++){this.pdf.setPage(Ve);var tt=Ve===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],Kt=Mt-this.margin[0],Ut=this.pdf.internal.pageSize.width-this.margin[1],ar=Ut-this.margin[3],gr=Ve===1?0:lt+(Ve-2)*Kt;if(this.ctx.clip_path.length!==0){var yr=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(rt,this.posX+this.margin[3],-1*gr+tt),q.call(this,"fill",!0),this.path=yr}var Ye=N([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-gr+tt+this.ctx.prevPageLastElemOffset)[0];pe.scale>=.01&&(Lt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Lt*pe.scale),Tt=this.lineWidth,this.lineWidth=Tt*pe.scale);var de=this.autoPaging!=="text";if(de||Ye.y+Ye.h<=Mt){if(de||Ye.y>=tt&&Ye.x<=Ut){var he=de?pe.text:this.pdf.splitTextToSize(pe.text,pe.maxWidth||Ut-Ye.x)[0],Me=N([JSON.parse(JSON.stringify(Pt))],this.posX+this.margin[3],-gr+tt+this.ctx.prevPageLastElemOffset)[0],Ue=de&&(Ve>dr||Ve<Yt)&&T.call(this);Ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ar,Kt,null).clip().discardPath()),this.pdf.text(he,Me.x,Me.y,{angle:pe.angle,align:_e,renderingMode:pe.renderingMode}),Ue&&this.pdf.restoreGraphicsState()}}else Ye.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-Ye.y);pe.scale>=.01&&(this.pdf.setFontSize(Lt),this.lineWidth=Tt)}else pe.scale>=.01&&(Lt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Lt*pe.scale),Tt=this.lineWidth,this.lineWidth=Tt*pe.scale),this.pdf.text(pe.text,ht.x+this.posX,ht.y+this.posY,{angle:pe.angle,align:_e,renderingMode:pe.renderingMode,maxWidth:pe.maxWidth}),pe.scale>=.01&&(this.pdf.setFontSize(Lt),this.lineWidth=Tt)},ae=function(pe,_e,Ce,ke){Ce=Ce||0,ke=ke||0,this.pdf.internal.out(r(pe+Ce)+" "+n(_e+ke)+" l")},le=function(pe,_e,Ce){return this.pdf.lines(pe,_e,Ce,null,null)},ue=function(pe,_e,Ce,ke,$e,ht,At,mt){this.pdf.internal.out([t(i(Ce+pe)),t(o(ke+_e)),t(i($e+pe)),t(o(ht+_e)),t(i(At+pe)),t(o(mt+_e)),"c"].join(" "))},ye=function(pe,_e,Ce,ke){for(var $e=2*Math.PI,ht=Math.PI/2;_e>Ce;)_e-=$e;var At=Math.abs(Ce-_e);At<$e&&ke&&(At=$e-At);for(var mt=[],rt=ke?-1:1,Lt=_e;At>1e-5;){var Tt=Lt+rt*Math.min(At,ht);mt.push(Se.call(this,pe,Lt,Tt)),At-=Math.abs(Tt-Lt),Lt=Tt}return mt},Se=function(pe,_e,Ce){var ke=(Ce-_e)/2,$e=pe*Math.cos(ke),ht=pe*Math.sin(ke),At=$e,mt=-ht,rt=At*At+mt*mt,Lt=rt+At*$e+mt*ht,Tt=4/3*(Math.sqrt(2*rt*Lt)-Lt)/(At*ht-mt*$e),Pt=At-Tt*mt,ut=mt+Tt*At,Le=Pt,sr=-ut,lr=ke+_e,dr=Math.cos(lr),Yt=Math.sin(lr);return{x1:pe*Math.cos(_e),y1:pe*Math.sin(_e),x2:Pt*dr-ut*Yt,y2:Pt*Yt+ut*dr,x3:Le*dr-sr*Yt,y3:Le*Yt+sr*dr,x4:pe*Math.cos(Ce),y4:pe*Math.sin(Ce)}},ge=function(pe){return 180*pe/Math.PI},xe=function(pe,_e,Ce,ke,$e,ht){var At=pe+.5*(Ce-pe),mt=_e+.5*(ke-_e),rt=$e+.5*(Ce-$e),Lt=ht+.5*(ke-ht),Tt=Math.min(pe,$e,At,rt),Pt=Math.max(pe,$e,At,rt),ut=Math.min(_e,ht,mt,Lt),Le=Math.max(_e,ht,mt,Lt);return new a(Tt,ut,Pt-Tt,Le-ut)},Fe=function(pe,_e,Ce,ke,$e,ht,At,mt){var rt,Lt,Tt,Pt,ut,Le,sr,lr,dr,Yt,Ve,tt,lt,Mt,Kt=Ce-pe,Ut=ke-_e,ar=$e-Ce,gr=ht-ke,yr=At-$e,Ye=mt-ht;for(Lt=0;Lt<41;Lt++)dr=(sr=(Tt=pe+(rt=Lt/40)*Kt)+rt*((ut=Ce+rt*ar)-Tt))+rt*(ut+rt*($e+rt*yr-ut)-sr),Yt=(lr=(Pt=_e+rt*Ut)+rt*((Le=ke+rt*gr)-Pt))+rt*(Le+rt*(ht+rt*Ye-Le)-lr),Lt==0?(Ve=dr,tt=Yt,lt=dr,Mt=Yt):(Ve=Math.min(Ve,dr),tt=Math.min(tt,Yt),lt=Math.max(lt,dr),Mt=Math.max(Mt,Yt));return new a(Math.round(Ve),Math.round(tt),Math.round(lt-Ve),Math.round(Mt-tt))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var pe,_e,Ce=(pe=this.ctx.lineDash,_e=this.ctx.lineDashOffset,JSON.stringify({lineDash:pe,lineDashOffset:_e}));this.prevLineDash!==Ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ce)}}})(Dn.API),(function(e){var t=function(u){var a,p,d,m,v,w,x,P,T,O;for(p=[],d=0,m=(u+=a="\0\0\0\0".slice(u.length%4||4)).length;m>d;d+=4)(v=(u.charCodeAt(d)<<24)+(u.charCodeAt(d+1)<<16)+(u.charCodeAt(d+2)<<8)+u.charCodeAt(d+3))!==0?(w=(v=((v=((v=((v=(v-(O=v%85))/85)-(T=v%85))/85)-(P=v%85))/85)-(x=v%85))/85)%85,p.push(w+33,x+33,P+33,T+33,O+33)):p.push(122);return(function(L,N){for(var F=N;F>0;F--)L.pop()})(p,a.length),String.fromCharCode.apply(String,p)+"~>"},r=function(u){var a,p,d,m,v,w=String,x="length",P=255,T="charCodeAt",O="slice",L="replace";for(u[O](-2),u=u[O](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),d=[],m=0,v=(u+=a="uuuuu"[O](u[x]%5||5))[x];v>m;m+=5)p=52200625*(u[T](m)-33)+614125*(u[T](m+1)-33)+7225*(u[T](m+2)-33)+85*(u[T](m+3)-33)+(u[T](m+4)-33),d.push(P&p>>24,P&p>>16,P&p>>8,P&p);return(function(N,F){for(var D=F;D>0;D--)N.pop()})(d,a[x]),w.fromCharCode.apply(w,d)},n=function(u){return u.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),a.test(u)===!1)return"";for(var p="",d=0;d<u.length;d+=2)p+=String.fromCharCode("0x"+(u[d]+u[d+1]));return p},o=function(u){for(var a=new Uint8Array(u.length),p=u.length;p--;)a[p]=u.charCodeAt(p);return(a=GP(a)).reduce(function(d,m){return d+String.fromCharCode(m)},"")};e.processDataByFilters=function(u,a){var p=0,d=u||"",m=[];for(typeof(a=a||[])=="string"&&(a=[a]),p=0;p<a.length;p+=1)switch(a[p]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[p]+'" is not implemented')}return{data:d,reverseChain:m.reverse().join(" ")}}})(Dn.API),(function(e){e.loadFile=function(t,r,n){return(function(i,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var a=void 0;try{a=(function(p,d,m){var v=new XMLHttpRequest,w=0,x=function(P){var T=P.length,O=[],L=String.fromCharCode;for(w=0;w<T;w+=1)O.push(L(255&P.charCodeAt(w)));return O.join("")};if(v.open("GET",p,!d),v.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(v.onload=function(){v.status===200?m(x(this.responseText)):m(void 0)}),v.send(null),d&&v.status===200)return x(v.responseText)})(i,o,u)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(Dn.API),(function(e){function t(){return(Yn.html2canvas?Promise.resolve(Yn.html2canvas):yw(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Yn.DOMPurify?Promise.resolve(Yn.DOMPurify):yw(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var p=ca(a);return p==="undefined"?"undefined":p==="string"||a instanceof String?"string":p==="number"||a instanceof Number?"number":p==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":p==="object"?"object":"unknown"},i=function(a,p){var d=document.createElement(a);for(var m in p.className&&(d.className=p.className),p.innerHTML&&p.dompurify&&(d.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)d.style[m]=p.style[m];return d},o=function a(p,d){for(var m=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),v=p.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(a(v,d));return p.nodeType===1&&(p.nodeName==="CANVAS"?(m.width=p.width,m.height=p.height,m.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(m.value=p.value),m.addEventListener("load",function(){m.scrollTop=p.scrollTop,m.scrollLeft=p.scrollLeft},!0)),m},u=function a(p){var d=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),m=a.convert(Promise.resolve(),d);return(m=m.setProgress(1,a,1,[a])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(a,p){return a.__proto__=p||u.prototype,a},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(a,p){return this.then(function(){switch(p=p||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),p){case"string":return this.then(r).then(function(d){return this.set({src:i("div",{innerHTML:a,dompurify:d})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},u.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,p(this.prop.container,d)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var d=this.opt.jsPDF,m=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var P=m[x],T=P.src.find(function(O){return O.format==="truetype"});T&&d.addFont(T.url,P.ref.name,P.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,d.context2d.save(!0),p(this.prop.container,w)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(a,p,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(a,p):this.outputPdf(a,p)},u.prototype.outputPdf=function(a,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,p)})},u.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},u.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(a){if(n(a)!=="object")return this;var p=Object.keys(a||{}).map(function(d){if(d in u.template.prop)return function(){this.prop[d]=a[d]};switch(d){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[d]=a[d]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(a,p){return this.then(function(){var d=a in u.template.prop?this.prop[a]:this.opt[a];return p?p(d):d})},u.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},u.prototype.setPageSize=function(a){function p(d,m){return Math.floor(d*m/72*96)}return this.then(function(){(a=a||Dn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:p(a.inner.width,a.k),height:p(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},u.prototype.setProgress=function(a,p,d,m){return a!=null&&(this.progress.val=a),p!=null&&(this.progress.state=p),d!=null&&(this.progress.n=d),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(a,p,d,m){return this.setProgress(a?this.progress.val+a:null,p||null,d?this.progress.n+d:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(a,p){var d=this;return this.thenCore(a,p,function(m,v){return d.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(w){return d.updateProgress(null,m),w}).then(m,v).then(function(w){return d.updateProgress(1),w})})},u.prototype.thenCore=function(a,p,d){d=d||Promise.prototype.then;var m=this;a&&(a=a.bind(m)),p&&(p=p.bind(m));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),w=d.call(v,a,p);return u.convert(w,m.__proto__)},u.prototype.thenExternal=function(a,p){return Promise.prototype.then.call(this,a,p)},u.prototype.thenList=function(a){var p=this;return a.forEach(function(d){p=p.thenCore(d)}),p},u.prototype.catch=function(a){a&&(a=a.bind(this));var p=Promise.prototype.catch.call(this,a);return u.convert(p,this)},u.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},u.prototype.error=function(a){return this.then(function(){throw new Error(a)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Dn.getPageSize=function(a,p,d){if(ca(a)==="object"){var m=a;a=m.orientation,p=m.unit||p,d=m.format||d}p=p||"mm",d=d||"a4",a=(""+(a||"P")).toLowerCase();var v,w=(""+d).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+p}var P,T=0,O=0;if(x.hasOwnProperty(w))T=x[w][1]/v,O=x[w][0]/v;else try{T=d[1],O=d[0]}catch{throw new Error("Invalid format: "+d)}if(a==="p"||a==="portrait")a="p",O>T&&(P=O,O=T,T=P);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",T>O&&(P=O,O=T,T=P)}return{width:O,height:T,unit:p,k:v,orientation:a}},e.html=function(a,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(t5):null;var d=new u(p);return p.worker?d:d.from(a).doCallback()}})(Dn.API),Dn.API.addJS=function(e){return Q4=e,this.internal.events.subscribe("postPutResources",function(){zb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Q4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zb!==void 0&&J4!==void 0&&this.internal.out("/Names <</JavaScript "+zb+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var u=i[o],a=n.exec(u);if(a!=null){var p=a[1];r.internal.newObjectDeferredBegin(p,!1)}r.internal.write(u)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(o=0;o<d;o++){var v=r.internal.newObject();m.push(v);var w=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<m.length;o++)r.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var u={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(u),u},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var u=n.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var a=this.count=this.count_r({count:0},u);if(a>0&&this.line("/Count "+a),u.options&&u.options.pageNumber){var p=r.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(Dn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,u,a){var p,d=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=u||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,p=(function(v){for(var w,x=256*v.charCodeAt(4)+v.charCodeAt(5),P=v.length,T={width:0,height:0,numcomponents:1},O=4;O<P;O+=2){if(O+=x,t.indexOf(v.charCodeAt(O+1))!==-1){w=256*v.charCodeAt(O+5)+v.charCodeAt(O+6),T={width:256*v.charCodeAt(O+7)+v.charCodeAt(O+8),height:w,numcomponents:v.charCodeAt(O+9)};break}x=256*v.charCodeAt(O+2)+v.charCodeAt(O+3)}return T})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),p.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}m={data:r,width:p.width,height:p.height,colorSpace:a,bitsPerComponent:8,filter:d,index:n,alias:i}}return m}})(Dn.API),Dn.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=Qle(e,{checkCrc:!0}),u=o.width,a=o.height,p=o.channels,d=o.palette,m=o.depth;i=d&&p===1?(function(Z){for(var Q=Z.width,Y=Z.height,se=Z.data,W=Z.palette,G=Z.depth,ae=!1,le=[],ue=[],ye=void 0,Se=!1,ge=0,xe=0;xe<W.length;xe++){var Fe=n4(W[xe],4),He=Fe[0],pe=Fe[1],_e=Fe[2],Ce=Fe[3];le.push(He,pe,_e),Ce!=null&&(Ce===0?(ge++,ue.length<1&&ue.push(xe)):Ce<255&&(Se=!0))}if(Se||ge>1){ae=!0,ue=void 0;var ke=Q*Y;ye=new Uint8Array(ke);for(var $e=new DataView(se.buffer),ht=0;ht<ke;ht++){var At=n5($e,ht,G),mt=n4(W[At],4)[3];ye[ht]=mt}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:se,alphaBytes:ye,needSMask:ae,palette:le,mask:ue}})(o):p===2||p===4?(function(Z){for(var Q=Z.data,Y=Z.width,se=Z.height,W=Z.channels,G=Z.depth,ae=W===2?"DeviceGray":"DeviceRGB",le=W-1,ue=Y*se,ye=le,Se=ue*ye,ge=1*ue,xe=Math.ceil(Se*G/8),Fe=Math.ceil(ge*G/8),He=new Uint8Array(xe),pe=new Uint8Array(Fe),_e=new DataView(Q.buffer),Ce=new DataView(He.buffer),ke=new DataView(pe.buffer),$e=!1,ht=0;ht<ue;ht++){for(var At=ht*W,mt=0;mt<ye;mt++)lD(Ce,n5(_e,At+mt,G),ht*ye+mt,G);var rt=n5(_e,At+ye,G);rt<(1<<G)-1&&($e=!0),lD(ke,rt,1*ht,G)}return{colorSpace:ae,colorsPerPixel:le,colorBytes:He,alphaBytes:pe,needSMask:$e}})(o):(function(Z){var Q=Z.data,Y=Z.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:Q instanceof Uint8Array?Q:new Uint8Array(Q.buffer),needSMask:!1}})(o);var v,w,x,P=i,T=P.colorSpace,O=P.colorsPerPixel,L=P.colorBytes,N=P.alphaBytes,F=P.needSMask,D=P.palette,q=P.mask,z=null;return n!==Dn.API.image_compression.NONE&&typeof GP=="function"?(z=(function(Z){var Q;switch(Z){case Dn.API.image_compression.FAST:Q=11;break;case Dn.API.image_compression.MEDIUM:Q=13;break;case Dn.API.image_compression.SLOW:Q=14;break;default:Q=12}return Q})(n),v=this.decode.FLATE_DECODE,w="/Predictor ".concat(z," "),e=nD(L,u*O,O,n),F&&(x=nD(N,u,1,n))):(v=void 0,w="",e=L,F&&(x=N)),w+="/Colors ".concat(O," /BitsPerComponent ").concat(m," /Columns ").concat(u),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:v,decodeParameters:w,transparency:q,palette:D,sMask:x,predictor:z,width:u,height:a,bitsPerComponent:m,colorSpace:T}}},(function(e){e.processGIF89A=function(t,r,n,i){var o=new _ue(t),u=o.width,a=o.height,p=[];o.decodeAndBlitFrameRGBA(0,p);var d={data:p,width:u,height:a},m=new i5(100).encode(d,100);return e.processJPEG.call(this,m,r,n,i)},e.processGIF87A=e.processGIF89A})(Dn.API),_c.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_c.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){xa.log("bit decode error:"+r)}},_c.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var p=this.palette[o>>7-a&1];this.data[u+4*a]=p.blue,this.data[u+4*a+1]=p.green,this.data[u+4*a+2]=p.red,this.data[u+4*a+3]=255}r!==0&&(this.pos+=4-r)}},_c.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+2*i*4,a=o>>4,p=15&o,d=this.palette[a];if(this.data[u]=d.blue,this.data[u+1]=d.green,this.data[u+2]=d.red,this.data[u+3]=255,2*i+1>=this.width)break;d=this.palette[p],this.data[u+4]=d.blue,this.data[u+4+1]=d.green,this.data[u+4+2]=d.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},_c.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var u=this.palette[i];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},_c.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,p=(o>>10&t)/t*255|0,d=o>>15?255:0,m=n*this.width*4+4*i;this.data[m]=p,this.data[m+1]=a,this.data[m+2]=u,this.data[m+3]=d}this.pos+=e}},_c.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(u&t)/t*255|0,p=(u>>5&r)/r*255|0,d=(u>>11)/t*255|0,m=i*this.width*4+4*o;this.data[m]=d,this.data[m+1]=p,this.data[m+2]=a,this.data[m+3]=255}this.pos+=e}},_c.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=255}this.pos+=this.width%4}},_c.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=u}},_c.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var o=new _c(t,!1),u=o.width,a=o.height,p={data:o.getData(),width:u,height:a},d=new i5(100).encode(p,100);return e.processJPEG.call(this,d,r,n,i)}})(Dn.API),cD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var o=new cD(t),u=o.width,a=o.height,p={data:o.getData(),width:u,height:a},d=new i5(100).encode(p,100);return e.processJPEG.call(this,d,r,n,i)}})(Dn.API),Dn.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),u=new Uint8Array(i/4),a=0,p=0,d=0;d<i;d+=4){var m=n[d],v=n[d+1],w=n[d+2],x=n[d+3];o[a++]=m,o[a++]=v,o[a++]=w,u[p++]=x}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:P,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Dn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pm=Dn.API,$b=pm.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,p=a.fof?a.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,m=d.fof?d.fof:1,v=t.doKerning!==!1,w=0,x=e.length,P=0,T=a[0]||p,O=[];for(r=0;r<x;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?O.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+u*(1e3/o)||0)/1e3):(w=v&&ca(d[n])==="object"&&!isNaN(parseInt(d[n][P],10))?d[n][P]/m:0,O.push((a[n]||T)/p+w)),P=n;return O},eD=pm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return pm.processArabic&&(e=pm.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:$b.apply(this,arguments).reduce(function(o,u){return o+u},0)},tD=function(e,t,r,n){for(var i=[],o=0,u=e.length,a=0;o!==u&&a+t[o]<r;)a+=t[o],o++;i.push(e.slice(0,o));var p=o;for(a=0;o!==u;)a+t[o]>n&&(i.push(e.slice(p,o)),a=0,p=o),a+=t[o],o++;return p!==o&&i.push(e.slice(p,o)),i},rD=function(e,t,r){r||(r={});var n,i,o,u,a,p,d,m=[],v=[m],w=r.textIndent||0,x=0,P=0,T=e.split(" "),O=$b.apply(this,[" ",r])[0];if(p=r.lineIndent===-1?T[0].length+2:r.lineIndent||0){var L=Array(p).join(" "),N=[];T.map(function(D){(D=D.split(/\s*\n/)).length>1?N=N.concat(D.map(function(q,z){return(z&&q.length?`
`:"")+q})):N.push(D[0])}),T=N,p=eD.apply(this,[L,r])}for(o=0,u=T.length;o<u;o++){var F=0;if(n=T[o],p&&n[0]==`
`&&(n=n.substr(1),F=1),w+x+(P=(i=$b.apply(this,[n,r])).reduce(function(D,q){return D+q},0))>t||F){if(P>t){for(a=tD.apply(this,[n,i,t-(w+x),t]),m.push(a.shift()),m=[a.pop()];a.length;)v.push([a.shift()]);P=i.slice(n.length-(m[0]?m[0].length:0)).reduce(function(D,q){return D+q},0)}else m=[n];v.push(m),w=P+p,x=O}else m.push(n),w+=x+P,x=O}return d=p?function(D,q){return(q?L:"")+D.join(" ")}:function(D){return D.join(" ")},v.map(d)},pm.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var v=this.internal.getFont(m.fontName,m.fontStyle),w="Unicode";return v.metadata[w]?{widths:v.metadata[w].widths||{0:1},kerning:v.metadata[w].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,p,d=[];for(a=0,p=n.length;a<p;a++)d=d.concat(rD.apply(this,[n[a],u,o]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[r[o]]=t[o],i[t[o]]=r[o];var u=function(w){return"0x"+parseInt(w,10).toString(16)},a=e.__fontmetrics__.compress=function(w){var x,P,T,O,L=["{"];for(var N in w){if(x=w[N],isNaN(parseInt(N,10))?P="'"+N+"'":(N=parseInt(N,10),P=(P=u(N).slice(2)).slice(0,-1)+i[P.slice(-1)]),typeof x=="number")x<0?(T=u(x).slice(3),O="-"):(T=u(x).slice(2),O=""),T=O+T.slice(0,-1)+i[T.slice(-1)];else{if(ca(x)!=="object")throw new Error("Don't know what to do with value type "+ca(x)+".");T=a(x)}L.push(P+T)}return L.push("}"),L.join("")},p=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,P,T,O,L={},N=1,F=L,D=[],q="",z="",Z=w.length-1,Q=1;Q<Z;Q+=1)(O=w[Q])=="'"?x?(T=x.join(""),x=void 0):x=[]:x?x.push(O):O=="{"?(D.push([F,T]),F={},T=void 0):O=="}"?((P=D.pop())[0][P[1]]=F,T=void 0,F=P[0]):O=="-"?N=-1:T===void 0?n.hasOwnProperty(O)?(q+=n[O],T=parseInt(q,16)*N,N=1,q=""):q+=O:n.hasOwnProperty(O)?(z+=n[O],F[T]=parseInt(z,16)*N,N=1,T=void 0,z=""):z+=O;return L},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},v={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var x=w.font,P=v.Unicode[x.postScriptName];P&&(x.metadata.Unicode={},x.metadata.Unicode.widths=P.widths,x.metadata.Unicode.kerning=P.kerning);var T=m.Unicode[x.postScriptName];T&&(x.metadata.Unicode.encoding=T,x.encoding=T.codePages[0])}])})(Dn.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(S_(a)),u.metadata=e.API.TTFFont.open(a),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,n)}}])})(Dn),Dn.API.addSvgAsImage=function(e,t,r,n,i,o,u,a){if(isNaN(t)||isNaN(r))throw xa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw xa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=n,p.height=i;var d=p.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,p.width,p.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Yn.canvg?Promise.resolve(Yn.canvg):yw(()=>import("./index.es-CKiEIchA.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)).catch(function(w){return Promise.reject(new Error("Could not load canvg: "+w))}).then(function(w){return w.default?w.default:w}).then(function(w){return w.fromString(d,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(m)}).then(function(){v.addImage(p.toDataURL("image/jpeg",1),t,r,n,i,u,a)})},Dn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},Dn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(u),p=[],d=0,m=0,v=0;function w(P,T){var O,L=!1;for(O=0;O<P.length;O+=1)P[O]===T&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=a.length;for(v=0;v<x;v+=1)r[a[v]].value=r[a[v]].defaultValue,r[a[v]].explicitSet=!1}if(ca(e)==="object"){for(i in e)if(o=e[i],w(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&w(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(d=0;d<o.length;d+=1)if(n=!0,o[d].length===1&&typeof o[d][0]=="number")p.push(String(o[d]-1));else if(o[d].length>1){for(m=0;m<o[d].length;m+=1)typeof o[d][m]!="number"&&(n=!1);n===!0&&p.push([o[d][0]-1,o[d][1]-1].join(" "))}r[i].value="["+p.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,T=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?T.push("/"+P+" /"+r[P].value):T.push("/"+P+" "+r[P].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+u.length+a.length+i.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+u+a+p),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Dn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(o,u){for(var a,p=u.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],v=0,w=o.length;v<w;++v){if(a=u.metadata.characterToGlyph(o.charCodeAt(v)),u.metadata.glyIdsUsed.push(a),u.metadata.toUnicode[a]=o.charCodeAt(v),p.indexOf(a)==-1&&(p.push(a),p.push([parseInt(u.metadata.widthOfGlyph(a),10)])),a=="0")return m.join("");a=a.toString(16),m.push(d[4-a.length],a)}return m.join("")},n=function(o){var u,a,p,d,m,v,w;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],v=0,w=(a=Object.keys(o).sort(function(x,P){return x-P})).length;v<w;v++)u=a[v],p.length>=100&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(d=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+d+">"));return p.length&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(u){var a=u.font,p=u.out,d=u.newObject,m=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var v=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),x="",P=0;P<w.length;P++)x+=String.fromCharCode(w[P]);var T=d();m({data:x,addLength1:!0,objectId:T}),p("endobj");var O=d();m({data:n(a.metadata.toUnicode),addLength1:!0,objectId:O}),p("endobj");var L=d();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Cm(a.fontName)),p("/FontFile2 "+T+" 0 R"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/Flags "+a.metadata.flags),p("/StemV "+a.metadata.stemV),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p(">>"),p("endobj");var N=d();p("<<"),p("/Type /Font"),p("/BaseFont /"+Cm(a.fontName)),p("/FontDescriptor "+L+" 0 R"),p("/W "+e.API.PDFObject.convert(v)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+a.encoding+")"),p(">>"),p(">>"),p("endobj"),a.objectNumber=d(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+O+" 0 R"),p("/BaseFont /"+Cm(a.fontName)),p("/Encoding /"+a.encoding),p("/DescendantFonts ["+N+" 0 R]"),p(">>"),p("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(u){var a=u.font,p=u.out,d=u.newObject,m=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var v=a.metadata.rawData,w="",x=0;x<v.length;x++)w+=String.fromCharCode(v[x]);var P=d();m({data:w,addLength1:!0,objectId:P}),p("endobj");var T=d();m({data:n(a.metadata.toUnicode),addLength1:!0,objectId:T}),p("endobj");var O=d();p("<<"),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p("/StemV "+a.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+P+" 0 R"),p("/Flags 96"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/FontName /"+Cm(a.fontName)),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p(">>"),p("endobj"),a.objectNumber=d();for(var L=0;L<a.metadata.hmtx.widths.length;L++)a.metadata.hmtx.widths[L]=parseInt(a.metadata.hmtx.widths[L]*(1e3/a.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+Cm(a.fontName)+"/FontDescriptor "+O+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),p("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var u,a=o.text||"",p=o.x,d=o.y,m=o.options||{},v=o.mutex||{},w=v.pdfEscape,x=v.activeFontKey,P=v.fonts,T=x,O="",L=0,N="",F=P[T].encoding;if(P[T].encoding!=="Identity-H")return{text:a,x:p,y:d,options:m,mutex:v};for(N=a,T=x,Array.isArray(a)&&(N=a[0]),L=0;L<N.length;L+=1)P[T].metadata.hasOwnProperty("cmap")&&(u=P[T].metadata.cmap.unicode.codeMap[N[L].charCodeAt(0)]),u||N[L].charCodeAt(0)<256&&P[T].metadata.hasOwnProperty("Unicode")?O+=N[L]:O+="";var D="";return parseInt(T.slice(1))<14||F==="WinAnsiEncoding"?D=w(O,T).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(D=r(O,P[T])),v.isHex=!0,{text:D,x:p,y:d,options:m,mutex:v}};t.events.push(["postProcessText",function(o){var u=o.text||"",a=[],p={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var d=0;for(d=0;d<u.length;d+=1)Array.isArray(u[d])&&u[d].length===3?a.push([i(Object.assign({},p,{text:u[d][0]})).text,u[d][1],u[d][2]]):a.push(i(Object.assign({},p,{text:u[d]})).text);o.text=a}else o.text=i(Object.assign({},p,{text:u})).text}])})(Dn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Dn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,u,a,p,d,m,v=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},O=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,F=0;this.__bidiEngine__={};var D=function(W){var G=W.charCodeAt(),ae=G>>8,le=T[ae];return le!==void 0?v[256*le+(255&G)]:ae===252||ae===253?"AL":L.test(ae)?"L":ae===8?"R":"N"},q=function(W){for(var G,ae=0;ae<W.length;ae++){if((G=D(W.charAt(ae)))==="L")return!1;if(G==="R")return!0}return!1},z=function(W,G,ae,le){var ue,ye,Se,ge,xe=G[le];switch(xe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"N":case"AN":break;case"EN":N&&(xe="AN");break;case"AL":N=!0,xe="R";break;case"WS":case"BN":xe="N";break;case"CS":le<1||le+1>=G.length||(ue=ae[le-1])!=="EN"&&ue!=="AN"||(ye=G[le+1])!=="EN"&&ye!=="AN"?xe="N":N&&(ye="AN"),xe=ye===ue?ye:"N";break;case"ES":xe=(ue=le>0?ae[le-1]:"B")==="EN"&&le+1<G.length&&G[le+1]==="EN"?"EN":"N";break;case"ET":if(le>0&&ae[le-1]==="EN"){xe="EN";break}if(N){xe="N";break}for(Se=le+1,ge=G.length;Se<ge&&G[Se]==="ET";)Se++;xe=Se<ge&&G[Se]==="EN"?"EN":"N";break;case"NSM":if(u&&!a){for(ge=G.length,Se=le+1;Se<ge&&G[Se]==="NSM";)Se++;if(Se<ge){var Fe=W[le],He=Fe>=1425&&Fe<=2303||Fe===64286;if(ue=G[Se],He&&(ue==="R"||ue==="AL")){xe="R";break}}}xe=le<1||(ue=G[le-1])==="B"?"N":ae[le-1];break;case"B":N=!1,i=!0,xe=F;break;case"S":o=!0,xe="N"}return xe},Z=function(W,G,ae){var le=W.split("");return ae&&Q(le,ae,{hiLevel:F}),le.reverse(),G&&G.reverse(),le.join("")},Q=function(W,G,ae){var le,ue,ye,Se,ge,xe=-1,Fe=W.length,He=0,pe=[],_e=F?x:w,Ce=[];for(N=!1,i=!1,o=!1,ue=0;ue<Fe;ue++)Ce[ue]=D(W[ue]);for(ye=0;ye<Fe;ye++){if(ge=He,pe[ye]=z(W,Ce,pe,ye),le=240&(He=_e[ge][P[pe[ye]]]),He&=15,G[ye]=Se=_e[He][5],le>0)if(le===16){for(ue=xe;ue<ye;ue++)G[ue]=1;xe=-1}else xe=-1;if(_e[He][6])xe===-1&&(xe=ye);else if(xe>-1){for(ue=xe;ue<ye;ue++)G[ue]=Se;xe=-1}Ce[ye]==="B"&&(G[ye]=0),ae.hiLevel|=Se}o&&(function(ke,$e,ht){for(var At=0;At<ht;At++)if(ke[At]==="S"){$e[At]=F;for(var mt=At-1;mt>=0&&ke[mt]==="WS";mt--)$e[mt]=F}})(Ce,G,Fe)},Y=function(W,G,ae,le,ue){if(!(ue.hiLevel<W)){if(W===1&&F===1&&!i)return G.reverse(),void(ae&&ae.reverse());for(var ye,Se,ge,xe,Fe=G.length,He=0;He<Fe;){if(le[He]>=W){for(ge=He+1;ge<Fe&&le[ge]>=W;)ge++;for(xe=He,Se=ge-1;xe<Se;xe++,Se--)ye=G[xe],G[xe]=G[Se],G[Se]=ye,ae&&(ye=ae[xe],ae[xe]=ae[Se],ae[Se]=ye);He=ge}He++}}},se=function(W,G,ae){var le=W.split(""),ue={hiLevel:F};return ae||(ae=[]),Q(le,ae,ue),(function(ye,Se,ge){if(ge.hiLevel!==0&&m)for(var xe,Fe=0;Fe<ye.length;Fe++)Se[Fe]===1&&(xe=O.indexOf(ye[Fe]))>=0&&(ye[Fe]=O[xe+1])})(le,ae,ue),Y(2,le,G,ae,ue),Y(1,le,G,ae,ue),le.join("")};return this.__bidiEngine__.doBidiReorder=function(W,G,ae){if((function(ue,ye){if(ye)for(var Se=0;Se<ue.length;Se++)ye[Se]=Se;a===void 0&&(a=q(ue)),d===void 0&&(d=q(ue))})(W,G),u||!p||d)if(u&&p&&a^d)F=a?1:0,W=Z(W,G,ae);else if(!u&&p&&d)F=a?1:0,W=se(W,G,ae),W=Z(W,G);else if(!u||a||p||d){if(u&&!p&&a^d)W=Z(W,G),a?(F=0,W=se(W,G,ae)):(F=1,W=se(W,G,ae),W=Z(W,G));else if(u&&a&&!p&&d)F=1,W=se(W,G,ae),W=Z(W,G);else if(!u&&!p&&a^d){var le=m;a?(F=1,W=se(W,G,ae),F=0,m=!1,W=se(W,G,ae),m=le):(F=0,W=se(W,G,ae),W=Z(W,G),F=1,m=!1,W=se(W,G,ae),m=le,W=Z(W,G))}}else F=0,W=se(W,G,ae);else F=a?1:0,W=se(W,G,ae);return W},this.__bidiEngine__.setOptions=function(W){W&&(u=W.isInputVisual,p=W.isOutputVisual,a=W.isInputRtl,d=W.isOutputRtl,m=W.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(u=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?u.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):u.push([r.doBidiReorder(i[a])]);n.text=u}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(Dn),Dn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Jh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Due(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new xue(this.contents),this.head=new Sue(this),this.name=new Tue(this),this.cmap=new NU(this),this.toUnicode={},this.hhea=new Eue(this),this.maxp=new Iue(this),this.hmtx=new Mue(this),this.post=new Aue(this),this.os2=new Cue(this),this.loca=new Lue(this),this.glyf=new Rue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,a,p,d;for(d=[],u=0,a=(p=this.bbox).length;u<a;u++)t=p[u],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,u,a;for(u=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return u*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Nc,Jh=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,u,a,p;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),a=this.readByte(),p=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^u)+256*(255^a)+(255^p)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*u+256*a+p},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e})(),xue=(function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,u,a,p,d,m,v,w,x,P,T;for(T in x=Object.keys(r).length,p=Math.log(2),v=16*Math.floor(Math.log(x)/p),u=Math.floor(v/p),m=16*x-v,(i=new Jh).writeInt(this.scalarType),i.writeShort(x),i.writeShort(v),i.writeShort(u),i.writeShort(m),o=16*x,d=i.pos+o,a=null,P=[],r)for(w=r[T],i.writeString(T),i.writeInt(e(w)),i.writeInt(d),i.writeInt(w.length),P=P.concat(w),T==="head"&&(a=d),d+=w.length;d%4;)P.push(0),d++;return i.write(P),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,u;for(r=FU.call(r);r.length%4;)r.push(0);for(o=new Jh(r),i=0,n=0,u=r.length;n<u;n=n+=4)i+=o.readUInt32();return 4294967295&i},t})(),wue={}.hasOwnProperty,Ef=function(e,t){for(var r in t)wue.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Nc=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Sue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Jh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),fD=(function(){function e(t,r){var n,i,o,u,a,p,d,m,v,w,x,P,T,O,L,N,F;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=t.readByte();break;case 4:for(x=t.readUInt16(),w=x/2,t.pos+=6,o=(function(){var D,q;for(q=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)q.push(t.readUInt16());return q})(),t.pos+=2,T=(function(){var D,q;for(q=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)q.push(t.readUInt16());return q})(),d=(function(){var D,q;for(q=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)q.push(t.readUInt16());return q})(),m=(function(){var D,q;for(q=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)q.push(t.readUInt16());return q})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var D,q;for(q=[],p=D=0;0<=i?D<i:D>i;p=0<=i?++D:--D)q.push(t.readUInt16());return q})(),p=L=0,F=o.length;L<F;p=++L)for(O=o[p],n=N=P=T[p];P<=O?N<=O:N>=O;n=P<=O?++N:--N)m[p]===0?u=n+d[p]:(u=a[m[p]/2+(n-P)-(w-p)]||0)!==0&&(u+=d[p]),this.codeMap[n]=65535&u}t.pos=v}return e.encode=function(t,r){var n,i,o,u,a,p,d,m,v,w,x,P,T,O,L,N,F,D,q,z,Z,Q,Y,se,W,G,ae,le,ue,ye,Se,ge,xe,Fe,He,pe,_e,Ce,ke,$e,ht,At,mt,rt,Lt,Tt;switch(le=new Jh,u=Object.keys(t).sort(function(Pt,ut){return Pt-ut}),r){case"macroman":for(T=0,O=(function(){var Pt=[];for(P=0;P<256;++P)Pt.push(0);return Pt})(),N={0:0},o={},ue=0,xe=u.length;ue<xe;ue++)N[mt=t[i=u[ue]]]==null&&(N[mt]=++T),o[i]={old:t[i],new:N[t[i]]},O[i]=N[t[i]];return le.writeUInt16(1),le.writeUInt16(0),le.writeUInt32(12),le.writeUInt16(0),le.writeUInt16(262),le.writeUInt16(0),le.write(O),{charMap:o,subtable:le.data,maxGlyphID:T+1};case"unicode":for(G=[],v=[],F=0,N={},n={},L=d=null,ye=0,Fe=u.length;ye<Fe;ye++)N[q=t[i=u[ye]]]==null&&(N[q]=++F),n[i]={old:q,new:N[q]},a=N[q]-i,L!=null&&a===d||(L&&v.push(L),G.push(i),d=a),L=i;for(L&&v.push(L),v.push(65535),G.push(65535),se=2*(Y=G.length),Q=2*Math.pow(Math.log(Y)/Math.LN2,2),w=Math.log(Q/2)/Math.LN2,Z=2*Y-Q,p=[],z=[],x=[],P=Se=0,He=G.length;Se<He;P=++Se){if(W=G[P],m=v[P],W===65535){p.push(0),z.push(0);break}if(W-(ae=n[W].new)>=32768)for(p.push(0),z.push(2*(x.length+Y-P)),i=ge=W;W<=m?ge<=m:ge>=m;i=W<=m?++ge:--ge)x.push(n[i].new);else p.push(ae-W),z.push(0)}for(le.writeUInt16(3),le.writeUInt16(1),le.writeUInt32(12),le.writeUInt16(4),le.writeUInt16(16+8*Y+2*x.length),le.writeUInt16(0),le.writeUInt16(se),le.writeUInt16(Q),le.writeUInt16(w),le.writeUInt16(Z),ht=0,pe=v.length;ht<pe;ht++)i=v[ht],le.writeUInt16(i);for(le.writeUInt16(0),At=0,_e=G.length;At<_e;At++)i=G[At],le.writeUInt16(i);for(rt=0,Ce=p.length;rt<Ce;rt++)a=p[rt],le.writeUInt16(a);for(Lt=0,ke=z.length;Lt<ke;Lt++)D=z[Lt],le.writeUInt16(D);for(Tt=0,$e=x.length;Tt<$e;Tt++)T=x[Tt],le.writeUInt16(T);return{charMap:n,subtable:le.data,maxGlyphID:F+1}}},e})(),NU=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new fD(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=fD.encode(t,r),(i=new Jh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),Eue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Cue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Aue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var u,a,p;for(p=[],o=u=0,a=this.file.maxp.numGlyphs;0<=a?u<a:u>a;o=0<=a?++u:--u)p.push(t.readUInt32());return p}).call(this)}},e})(),Pue=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Tue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,o,u,a,p,d,m,v,w;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(p={},o=m=0,v=n.length;m<v;o=++m)i=n[o],t.pos=i.offset,d=t.readString(i.length),u=new Pue(d,i),p[w=i.nameID]==null&&(p[w]=[]),p[i.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},e})(),Iue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Mue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,o,u,a,p;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,m;for(m=[],r=d=0;0<=i?d<i:d>i;r=0<=i?++d:--d)m.push(t.readInt16());return m})(),this.widths=(function(){var d,m,v,w;for(w=[],d=0,m=(v=this.metrics).length;d<m;d++)o=v[d],w.push(o.advance);return w}).call(this),n=this.widths[this.widths.length-1],p=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)p.push(this.widths.push(n));return p},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),FU=[].slice,Rue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,o,u,a,p,d,m,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,u=(a=new Jh(r.read(i))).readShort(),d=a.readShort(),v=a.readShort(),p=a.readShort(),m=a.readShort(),this.cache[t]=u===-1?new kue(a,d,v,p,m):new Oue(a,u,d,v,p,m),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,o,u,a,p;for(u=[],o=[],a=0,p=r.length;a<p;a++)i=t[r[a]],o.push(u.length),i&&(u=u.concat(i.encode(n)));return o.push(u.length),{table:u,offsets:o}},e})(),Oue=(function(){function e(t,r,n,i,o,u){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),kue=(function(){function e(t,r,n,i,o){var u,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;a=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&a;)u.pos+=1&a?4:2,128&a?u.pos+=8:64&a?u.pos+=4:8&a&&(u.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Jh(FU.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Lue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ef(e,Nc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,u=0;u<n.length;++u)if(n[u]=i,o<r.length&&r[o]==u){++o,n[u]=i;var a=this.offsets[u],p=this.offsets[u+1]-a;p>0&&(i+=p)}for(var d=new Array(4*n.length),m=0;m<n.length;++m)d[4*m+3]=255&n[m],d[4*m+2]=(65280&n[m])>>8,d[4*m+1]=(16711680&n[m])>>16,d[4*m]=(4278190080&n[m])>>24;return d},e})(),Due=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,u,a,p;for(i={},u=0,a=t.length;u<a;u++)i[o=t[u]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in p=this.glyphsFor(r))n=p[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,u,a,p,d,m,v,w,x,P,T,O,L;for(i in n=NU.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),x={0:0},L=n.charMap)x[(p=L[i]).old]=p.new;for(P in w=n.maxGlyphID,u)P in x||(x[P]=w++);return m=(function(N){var F,D;for(F in D={},N)D[N[F]]=F;return D})(x),v=Object.keys(m).sort(function(N,F){return N-F}),T=(function(){var N,F,D;for(D=[],N=0,F=v.length;N<F;N++)a=v[N],D.push(m[a]);return D})(),o=this.font.glyf.encode(u,T,x),d=this.font.loca.encode(o.offsets,T),O={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(O["OS/2"]=this.font.os2.raw()),this.font.directory.encode(O)},e})();Dn.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,u;if(Array.isArray(r))return"["+(function(){var a,p,d;for(d=[],a=0,p=r.length;a<p;a++)n=r[a],d.push(t.convert(n));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)u=r[i],o.push("/"+i+" "+t.convert(u));return o.push(">>"),o.join(`
`)}return""+r},t})();Be.createContext({});function BU(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Nue(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hD(e[0])||!hD(e[1]))throw new Error("coordinates must contain numbers");return BU({type:"Point",coordinates:e},t,r)}function Fue(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function hD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function jU(e,t,r){if(e!==null)for(var n,i,o,u,a,p,d,m=0,v=0,w,x=e.type,P=x==="FeatureCollection",T=x==="Feature",O=P?e.features.length:1,L=0;L<O;L++){d=P?e.features[L].geometry:T?e.geometry:e,w=d?d.type==="GeometryCollection":!1,a=w?d.geometries.length:1;for(var N=0;N<a;N++){var F=0,D=0;if(u=w?d.geometries[N]:d,u!==null){p=u.coordinates;var q=u.type;switch(m=q==="Polygon"||q==="MultiPolygon"?1:0,q){case null:break;case"Point":if(t(p,v,L,F,D)===!1)return!1;v++,F++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(t(p[n],v,L,F,D)===!1)return!1;v++,q==="MultiPoint"&&F++}q==="LineString"&&F++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(i=0;i<p[n].length-m;i++){if(t(p[n][i],v,L,F,D)===!1)return!1;v++}q==="MultiLineString"&&F++,q==="Polygon"&&D++}q==="Polygon"&&F++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(D=0,i=0;i<p[n].length;i++){for(o=0;o<p[n][i].length-m;o++){if(t(p[n][i][o],v,L,F,D)===!1)return!1;v++}D++}F++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(jU(u.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function zU(e,t={}){let r=0,n=0,i=0;return jU(e,function(o){r+=o[0],n+=o[1],i++}),Nue([r/i,n/i],t.properties)}var T_={exports:{}},Bue=T_.exports,dD;function jue(){return dD||(dD=1,(function(e,t){(function(r,n){e.exports=n()})(Bue,(function(){var r=function(U,te){var Re={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},dt={on:function(yt,Bt,xr){if(Re[yt]===void 0)throw new Error("Invalid event type: "+yt);Re[yt].push({selector:Bt,fn:xr})},render:function(yt){te.store.featureChanged(yt)}},St=function(yt,Bt){for(var xr=Re[yt],Ar=xr.length;Ar--;){var jr=xr[Ar];if(jr.selector(Bt)){jr.fn.call(dt,Bt)||te.store.render(),te.ui.updateMapClasses();break}}};return U.start.call(dt),{render:U.render,stop:function(){U.stop&&U.stop()},trash:function(){U.trash&&(U.trash(),te.store.render())},combineFeatures:function(){U.combineFeatures&&U.combineFeatures()},uncombineFeatures:function(){U.uncombineFeatures&&U.uncombineFeatures()},drag:function(yt){St("drag",yt)},click:function(yt){St("click",yt)},mousemove:function(yt){St("mousemove",yt)},mousedown:function(yt){St("mousedown",yt)},mouseup:function(yt){St("mouseup",yt)},mouseout:function(yt){St("mouseout",yt)},keydown:function(yt){St("keydown",yt)},keyup:function(yt){St("keyup",yt)},touchstart:function(yt){St("touchstart",yt)},touchmove:function(yt){St("touchmove",yt)},touchend:function(yt){St("touchend",yt)},tap:function(yt){St("tap",yt)}}};function n(U){return U&&U.__esModule&&Object.prototype.hasOwnProperty.call(U,"default")?U.default:U}function i(U){if(U.__esModule)return U;var te=U.default;if(typeof te=="function"){var Re=function dt(){if(this instanceof dt){var St=[null];St.push.apply(St,arguments);var yt=Function.bind.apply(te,St);return new yt}return te.apply(this,arguments)};Re.prototype=te.prototype}else Re={};return Object.defineProperty(Re,"__esModule",{value:!0}),Object.keys(U).forEach((function(dt){var St=Object.getOwnPropertyDescriptor(U,dt);Object.defineProperty(Re,dt,St.get?St:{enumerable:!0,get:function(){return U[dt]}})})),Re}var o={},u={RADIUS:6378137},a=u;function p(U){var te=0;if(U&&U.length>0){te+=Math.abs(d(U[0]));for(var Re=1;Re<U.length;Re++)te-=Math.abs(d(U[Re]))}return te}function d(U){var te,Re,dt,St,yt,Bt,xr=0,Ar=U.length;if(Ar>2){for(Bt=0;Bt<Ar;Bt++)Bt===Ar-2?(dt=Ar-2,St=Ar-1,yt=0):Bt===Ar-1?(dt=Ar-1,St=0,yt=1):(dt=Bt,St=Bt+1,yt=Bt+2),te=U[dt],Re=U[St],xr+=(m(U[yt][0])-m(te[0]))*Math.sin(m(Re[1]));xr=xr*a.RADIUS*a.RADIUS/2}return xr}function m(U){return U*Math.PI/180}o.geometry=function U(te){var Re,dt=0;switch(te.type){case"Polygon":return p(te.coordinates);case"MultiPolygon":for(Re=0;Re<te.coordinates.length;Re++)dt+=p(te.coordinates[Re]);return dt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Re=0;Re<te.geometries.length;Re++)dt+=U(te.geometries[Re]);return dt}},o.ring=d;var v={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},w={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},x={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},T={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},O={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},L={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},N={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},F={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},D={ACTIVE:"true",INACTIVE:"false"},q=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],z=-85,Z=Object.freeze({__proto__:null,classes:v,sources:w,cursors:x,types:P,geojsonTypes:T,modes:O,events:L,updateActions:N,meta:F,activeStates:D,interactions:q,LAT_MIN:-90,LAT_RENDERED_MIN:z,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Q={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Y(U,te){var Re=Q[U.geometry.type]-Q[te.geometry.type];return Re===0&&U.geometry.type===T.POLYGON?U.area-te.area:Re}function se(U){return U.map((function(te){return te.geometry.type===T.POLYGON&&(te.area=o.geometry({type:T.FEATURE,property:{},geometry:te.geometry})),te})).sort(Y).map((function(te){return delete te.area,te}))}function W(U,te){return te===void 0&&(te=0),[[U.point.x-te,U.point.y-te],[U.point.x+te,U.point.y+te]]}function G(U){if(this._items={},this._nums={},this._length=U?U.length:0,U)for(var te=0,Re=U.length;te<Re;te++)this.add(U[te]),U[te]!==void 0&&(typeof U[te]=="string"?this._items[U[te]]=te:this._nums[U[te]]=te)}G.prototype.add=function(U){return this.has(U)||(this._length++,typeof U=="string"?this._items[U]=this._length:this._nums[U]=this._length),this},G.prototype.delete=function(U){return this.has(U)===!1||(this._length--,delete this._items[U],delete this._nums[U]),this},G.prototype.has=function(U){return(typeof U=="string"||typeof U=="number")&&(this._items[U]!==void 0||this._nums[U]!==void 0)},G.prototype.values=function(){var U=this,te=[];return Object.keys(this._items).forEach((function(Re){te.push({k:Re,v:U._items[Re]})})),Object.keys(this._nums).forEach((function(Re){te.push({k:JSON.parse(Re),v:U._nums[Re]})})),te.sort((function(Re,dt){return Re.v-dt.v})).map((function(Re){return Re.k}))},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ae=[F.FEATURE,F.MIDPOINT,F.VERTEX],le={click:function(U,te,Re){return ue(U,te,Re,Re.options.clickBuffer)},touch:function(U,te,Re){return ue(U,te,Re,Re.options.touchBuffer)}};function ue(U,te,Re,dt){if(Re.map===null)return[];var St=U?W(U,dt):te,yt={};Re.options.styles&&(yt.layers=Re.options.styles.map((function(jr){return jr.id})).filter((function(jr){return Re.map.getLayer(jr)!=null})));var Bt=Re.map.queryRenderedFeatures(St,yt).filter((function(jr){return ae.indexOf(jr.properties.meta)!==-1})),xr=new G,Ar=[];return Bt.forEach((function(jr){var fr=jr.properties.id;xr.has(fr)||(xr.add(fr),Ar.push(jr))})),se(Ar)}function ye(U,te){var Re=le.click(U,null,te),dt={mouse:x.NONE};return Re[0]&&(dt.mouse=Re[0].properties.active===D.ACTIVE?x.MOVE:x.POINTER,dt.feature=Re[0].properties.meta),te.events.currentModeName().indexOf("draw")!==-1&&(dt.mouse=x.ADD),te.ui.queueMapClasses(dt),te.ui.updateMapClasses(),Re[0]}function Se(U,te){var Re=U.x-te.x,dt=U.y-te.y;return Math.sqrt(Re*Re+dt*dt)}function ge(U,te,Re){Re===void 0&&(Re={});var dt=Re.fineTolerance!=null?Re.fineTolerance:4,St=Re.grossTolerance!=null?Re.grossTolerance:12,yt=Re.interval!=null?Re.interval:500;U.point=U.point||te.point,U.time=U.time||te.time;var Bt=Se(U.point,te.point);return Bt<dt||Bt<St&&te.time-U.time<yt}function xe(U,te,Re){Re===void 0&&(Re={});var dt=Re.tolerance!=null?Re.tolerance:25,St=Re.interval!=null?Re.interval:250;return U.point=U.point||te.point,U.time=U.time||te.time,Se(U.point,te.point)<dt&&te.time-U.time<St}var Fe={exports:{}},He=Fe.exports=function(U,te){if(te||(te=16),U===void 0&&(U=128),U<=0)return"0";for(var Re=Math.log(Math.pow(2,U))/Math.log(te),dt=2;Re===1/0;dt*=2)Re=Math.log(Math.pow(2,U/dt))/Math.log(te)*dt;var St=Re-Math.floor(Re),yt="";for(dt=0;dt<Math.floor(Re);dt++)yt=Math.floor(Math.random()*te).toString(te)+yt;if(St){var Bt=Math.pow(te,St);yt=Math.floor(Math.random()*Bt).toString(te)+yt}var xr=parseInt(yt,te);return xr!==1/0&&xr>=Math.pow(2,U)?He(U,te):yt};He.rack=function(U,te,Re){var dt=function(yt){var Bt=0;do{if(Bt++>10){if(!Re)throw new Error("too many ID collisions, use more bits");U+=Re}var xr=He(U,te)}while(Object.hasOwnProperty.call(St,xr));return St[xr]=yt,xr},St=dt.hats={};return dt.get=function(yt){return dt.hats[yt]},dt.set=function(yt,Bt){return dt.hats[yt]=Bt,dt},dt.bits=U||128,dt.base=te||16,dt};var pe=n(Fe.exports),_e=function(U,te){this.ctx=U,this.properties=te.properties||{},this.coordinates=te.geometry.coordinates,this.id=te.id||pe(),this.type=te.geometry.type};_e.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},_e.prototype.incomingCoords=function(U){this.setCoordinates(U)},_e.prototype.setCoordinates=function(U){this.coordinates=U,this.changed()},_e.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},_e.prototype.setProperty=function(U,te){this.properties[U]=te},_e.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:T.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},_e.prototype.internal=function(U){var te={id:this.id,meta:F.FEATURE,"meta:type":this.type,active:D.INACTIVE,mode:U};if(this.ctx.options.userProperties)for(var Re in this.properties)te["user_"+Re]=this.properties[Re];return{type:T.FEATURE,properties:te,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ce=function(U,te){_e.call(this,U,te)};(Ce.prototype=Object.create(_e.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ce.prototype.updateCoordinate=function(U,te,Re){this.coordinates=arguments.length===3?[te,Re]:[U,te],this.changed()},Ce.prototype.getCoordinate=function(){return this.getCoordinates()};var ke=function(U,te){_e.call(this,U,te)};(ke.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length>1},ke.prototype.addCoordinate=function(U,te,Re){this.changed();var dt=parseInt(U,10);this.coordinates.splice(dt,0,[te,Re])},ke.prototype.getCoordinate=function(U){var te=parseInt(U,10);return JSON.parse(JSON.stringify(this.coordinates[te]))},ke.prototype.removeCoordinate=function(U){this.changed(),this.coordinates.splice(parseInt(U,10),1)},ke.prototype.updateCoordinate=function(U,te,Re){var dt=parseInt(U,10);this.coordinates[dt]=[te,Re],this.changed()};var $e=function(U,te){_e.call(this,U,te),this.coordinates=this.coordinates.map((function(Re){return Re.slice(0,-1)}))};($e.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function(U){return U.length>2}))},$e.prototype.incomingCoords=function(U){this.coordinates=U.map((function(te){return te.slice(0,-1)})),this.changed()},$e.prototype.setCoordinates=function(U){this.coordinates=U,this.changed()},$e.prototype.addCoordinate=function(U,te,Re){this.changed();var dt=U.split(".").map((function(St){return parseInt(St,10)}));this.coordinates[dt[0]].splice(dt[1],0,[te,Re])},$e.prototype.removeCoordinate=function(U){this.changed();var te=U.split(".").map((function(dt){return parseInt(dt,10)})),Re=this.coordinates[te[0]];Re&&(Re.splice(te[1],1),Re.length<3&&this.coordinates.splice(te[0],1))},$e.prototype.getCoordinate=function(U){var te=U.split(".").map((function(dt){return parseInt(dt,10)})),Re=this.coordinates[te[0]];return JSON.parse(JSON.stringify(Re[te[1]]))},$e.prototype.getCoordinates=function(){return this.coordinates.map((function(U){return U.concat([U[0]])}))},$e.prototype.updateCoordinate=function(U,te,Re){this.changed();var dt=U.split("."),St=parseInt(dt[0],10),yt=parseInt(dt[1],10);this.coordinates[St]===void 0&&(this.coordinates[St]=[]),this.coordinates[St][yt]=[te,Re]};var ht={MultiPoint:Ce,MultiLineString:ke,MultiPolygon:$e},At=function(U,te,Re,dt,St){var yt=Re.split("."),Bt=parseInt(yt[0],10),xr=yt[1]?yt.slice(1).join("."):null;return U[Bt][te](xr,dt,St)},mt=function(U,te){if(_e.call(this,U,te),delete this.coordinates,this.model=ht[te.geometry.type],this.model===void 0)throw new TypeError(te.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(te.geometry.coordinates)};function rt(U){this.map=U.map,this.drawConfig=JSON.parse(JSON.stringify(U.options||{})),this._ctx=U}(mt.prototype=Object.create(_e.prototype))._coordinatesToFeatures=function(U){var te=this,Re=this.model.bind(this);return U.map((function(dt){return new Re(te.ctx,{id:pe(),type:T.FEATURE,properties:{},geometry:{coordinates:dt,type:te.type.replace("Multi","")}})}))},mt.prototype.isValid=function(){return this.features.every((function(U){return U.isValid()}))},mt.prototype.setCoordinates=function(U){this.features=this._coordinatesToFeatures(U),this.changed()},mt.prototype.getCoordinate=function(U){return At(this.features,"getCoordinate",U)},mt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(U){return U.type===T.POLYGON?U.getCoordinates():U.coordinates}))))},mt.prototype.updateCoordinate=function(U,te,Re){At(this.features,"updateCoordinate",U,te,Re),this.changed()},mt.prototype.addCoordinate=function(U,te,Re){At(this.features,"addCoordinate",U,te,Re),this.changed()},mt.prototype.removeCoordinate=function(U){At(this.features,"removeCoordinate",U),this.changed()},mt.prototype.getFeatures=function(){return this.features},rt.prototype.setSelected=function(U){return this._ctx.store.setSelected(U)},rt.prototype.setSelectedCoordinates=function(U){var te=this;this._ctx.store.setSelectedCoordinates(U),U.reduce((function(Re,dt){return Re[dt.feature_id]===void 0&&(Re[dt.feature_id]=!0,te._ctx.store.get(dt.feature_id).changed()),Re}),{})},rt.prototype.getSelected=function(){return this._ctx.store.getSelected()},rt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},rt.prototype.isSelected=function(U){return this._ctx.store.isSelected(U)},rt.prototype.getFeature=function(U){return this._ctx.store.get(U)},rt.prototype.select=function(U){return this._ctx.store.select(U)},rt.prototype.deselect=function(U){return this._ctx.store.deselect(U)},rt.prototype.deleteFeature=function(U,te){return te===void 0&&(te={}),this._ctx.store.delete(U,te)},rt.prototype.addFeature=function(U){return this._ctx.store.add(U)},rt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},rt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},rt.prototype.setActionableState=function(U){U===void 0&&(U={});var te={trash:U.trash||!1,combineFeatures:U.combineFeatures||!1,uncombineFeatures:U.uncombineFeatures||!1};return this._ctx.events.actionable(te)},rt.prototype.changeMode=function(U,te,Re){return te===void 0&&(te={}),Re===void 0&&(Re={}),this._ctx.events.changeMode(U,te,Re)},rt.prototype.updateUIClasses=function(U){return this._ctx.ui.queueMapClasses(U)},rt.prototype.activateUIButton=function(U){return this._ctx.ui.setActiveButton(U)},rt.prototype.featuresAt=function(U,te,Re){if(Re===void 0&&(Re="click"),Re!=="click"&&Re!=="touch")throw new Error("invalid buffer type");return le[Re](U,te,this._ctx)},rt.prototype.newFeature=function(U){var te=U.geometry.type;return te===T.POINT?new Ce(this._ctx,U):te===T.LINE_STRING?new ke(this._ctx,U):te===T.POLYGON?new $e(this._ctx,U):new mt(this._ctx,U)},rt.prototype.isInstanceOf=function(U,te){if(U===T.POINT)return te instanceof Ce;if(U===T.LINE_STRING)return te instanceof ke;if(U===T.POLYGON)return te instanceof $e;if(U==="MultiFeature")return te instanceof mt;throw new Error("Unknown feature class: "+U)},rt.prototype.doRender=function(U){return this._ctx.store.featureChanged(U)},rt.prototype.onSetup=function(){},rt.prototype.onDrag=function(){},rt.prototype.onClick=function(){},rt.prototype.onMouseMove=function(){},rt.prototype.onMouseDown=function(){},rt.prototype.onMouseUp=function(){},rt.prototype.onMouseOut=function(){},rt.prototype.onKeyUp=function(){},rt.prototype.onKeyDown=function(){},rt.prototype.onTouchStart=function(){},rt.prototype.onTouchMove=function(){},rt.prototype.onTouchEnd=function(){},rt.prototype.onTap=function(){},rt.prototype.onStop=function(){},rt.prototype.onTrash=function(){},rt.prototype.onCombineFeature=function(){},rt.prototype.onUncombineFeature=function(){},rt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Lt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Tt=Object.keys(Lt);function Pt(U){var te=Object.keys(U);return function(Re,dt){dt===void 0&&(dt={});var St={},yt=te.reduce((function(Bt,xr){return Bt[xr]=U[xr],Bt}),new rt(Re));return{start:function(){var Bt=this;St=yt.onSetup(dt),Tt.forEach((function(xr){var Ar,jr=Lt[xr],fr=function(){return!1};U[jr]&&(fr=function(){return!0}),Bt.on(xr,fr,(Ar=jr,function(Rr){return yt[Ar](St,Rr)}))}))},stop:function(){yt.onStop(St)},trash:function(){yt.onTrash(St)},combineFeatures:function(){yt.onCombineFeatures(St)},uncombineFeatures:function(){yt.onUncombineFeatures(St)},render:function(Bt,xr){yt.toDisplayFeatures(St,Bt,xr)}}}}function ut(U){return[].concat(U).filter((function(te){return te!==void 0}))}function Le(){var U=this;if(!(U.ctx.map&&U.ctx.map.getSource(w.HOT)!==void 0))return Ar();var te=U.ctx.events.currentModeName();U.ctx.ui.queueMapClasses({mode:te});var Re=[],dt=[];U.isDirty?dt=U.getAllIds():(Re=U.getChangedIds().filter((function(jr){return U.get(jr)!==void 0})),dt=U.sources.hot.filter((function(jr){return jr.properties.id&&Re.indexOf(jr.properties.id)===-1&&U.get(jr.properties.id)!==void 0})).map((function(jr){return jr.properties.id}))),U.sources.hot=[];var St=U.sources.cold.length;U.sources.cold=U.isDirty?[]:U.sources.cold.filter((function(jr){var fr=jr.properties.id||jr.properties.parent;return Re.indexOf(fr)===-1}));var yt=St!==U.sources.cold.length||dt.length>0;function Bt(jr,fr){var Rr=U.get(jr).internal(te);U.ctx.events.currentModeRender(Rr,(function(Pn){U.sources[fr].push(Pn)}))}if(Re.forEach((function(jr){return Bt(jr,"hot")})),dt.forEach((function(jr){return Bt(jr,"cold")})),yt&&U.ctx.map.getSource(w.COLD).setData({type:T.FEATURE_COLLECTION,features:U.sources.cold}),U.ctx.map.getSource(w.HOT).setData({type:T.FEATURE_COLLECTION,features:U.sources.hot}),U._emitSelectionChange&&(U.ctx.map.fire(L.SELECTION_CHANGE,{features:U.getSelected().map((function(jr){return jr.toGeoJSON()})),points:U.getSelectedCoordinates().map((function(jr){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:jr.coordinates}}}))}),U._emitSelectionChange=!1),U._deletedFeaturesToEmit.length){var xr=U._deletedFeaturesToEmit.map((function(jr){return jr.toGeoJSON()}));U._deletedFeaturesToEmit=[],U.ctx.map.fire(L.DELETE,{features:xr})}function Ar(){U.isDirty=!1,U.clearChangedIds()}Ar(),U.ctx.map.fire(L.RENDER,{})}function sr(U){var te,Re=this;this._features={},this._featureIds=new G,this._selectedFeatureIds=new G,this._selectedCoordinates=[],this._changedFeatureIds=new G,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=U,this.sources={hot:[],cold:[]},this.render=function(){te||(te=requestAnimationFrame((function(){te=null,Le.call(Re)})))},this.isDirty=!1}function lr(U,te){var Re=U._selectedCoordinates.filter((function(dt){return U._selectedFeatureIds.has(dt.feature_id)}));U._selectedCoordinates.length===Re.length||te.silent||(U._emitSelectionChange=!0),U._selectedCoordinates=Re}sr.prototype.createRenderBatch=function(){var U=this,te=this.render,Re=0;return this.render=function(){Re++},function(){U.render=te,Re>0&&U.render()}},sr.prototype.setDirty=function(){return this.isDirty=!0,this},sr.prototype.featureChanged=function(U){return this._changedFeatureIds.add(U),this},sr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},sr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},sr.prototype.getAllIds=function(){return this._featureIds.values()},sr.prototype.add=function(U){return this.featureChanged(U.id),this._features[U.id]=U,this._featureIds.add(U.id),this},sr.prototype.delete=function(U,te){var Re=this;return te===void 0&&(te={}),ut(U).forEach((function(dt){Re._featureIds.has(dt)&&(Re._featureIds.delete(dt),Re._selectedFeatureIds.delete(dt),te.silent||Re._deletedFeaturesToEmit.indexOf(Re._features[dt])===-1&&Re._deletedFeaturesToEmit.push(Re._features[dt]),delete Re._features[dt],Re.isDirty=!0)})),lr(this,te),this},sr.prototype.get=function(U){return this._features[U]},sr.prototype.getAll=function(){var U=this;return Object.keys(this._features).map((function(te){return U._features[te]}))},sr.prototype.select=function(U,te){var Re=this;return te===void 0&&(te={}),ut(U).forEach((function(dt){Re._selectedFeatureIds.has(dt)||(Re._selectedFeatureIds.add(dt),Re._changedFeatureIds.add(dt),te.silent||(Re._emitSelectionChange=!0))})),this},sr.prototype.deselect=function(U,te){var Re=this;return te===void 0&&(te={}),ut(U).forEach((function(dt){Re._selectedFeatureIds.has(dt)&&(Re._selectedFeatureIds.delete(dt),Re._changedFeatureIds.add(dt),te.silent||(Re._emitSelectionChange=!0))})),lr(this,te),this},sr.prototype.clearSelected=function(U){return U===void 0&&(U={}),this.deselect(this._selectedFeatureIds.values(),{silent:U.silent}),this},sr.prototype.setSelected=function(U,te){var Re=this;return te===void 0&&(te={}),U=ut(U),this.deselect(this._selectedFeatureIds.values().filter((function(dt){return U.indexOf(dt)===-1})),{silent:te.silent}),this.select(U.filter((function(dt){return!Re._selectedFeatureIds.has(dt)})),{silent:te.silent}),this},sr.prototype.setSelectedCoordinates=function(U){return this._selectedCoordinates=U,this._emitSelectionChange=!0,this},sr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},sr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},sr.prototype.getSelected=function(){var U=this;return this._selectedFeatureIds.values().map((function(te){return U.get(te)}))},sr.prototype.getSelectedCoordinates=function(){var U=this;return this._selectedCoordinates.map((function(te){return{coordinates:U.get(te.feature_id).getCoordinate(te.coord_path)}}))},sr.prototype.isSelected=function(U){return this._selectedFeatureIds.has(U)},sr.prototype.setFeatureProperty=function(U,te,Re){this.get(U).setProperty(te,Re),this.featureChanged(U)},sr.prototype.storeMapConfig=function(){var U=this;q.forEach((function(te){U.ctx.map[te]&&(U._mapInitialConfig[te]=U.ctx.map[te].isEnabled())}))},sr.prototype.restoreMapConfig=function(){var U=this;Object.keys(this._mapInitialConfig).forEach((function(te){U._mapInitialConfig[te]?U.ctx.map[te].enable():U.ctx.map[te].disable()}))},sr.prototype.getInitialConfigValue=function(U){return this._mapInitialConfig[U]===void 0||this._mapInitialConfig[U]};var dr=function(){for(var U=arguments,te={},Re=0;Re<arguments.length;Re++){var dt=U[Re];for(var St in dt)Yt.call(dt,St)&&(te[St]=dt[St])}return te},Yt=Object.prototype.hasOwnProperty,Ve=n(dr),tt=["mode","feature","mouse"];function lt(U){var te=null,Re=null,dt={onRemove:function(){return U.map.off("load",dt.connect),clearInterval(Re),dt.removeLayers(),U.store.restoreMapConfig(),U.ui.removeButtons(),U.events.removeEventListeners(),U.ui.clearMapClasses(),U.boxZoomInitial&&U.map.boxZoom.enable(),U.map=null,U.container=null,U.store=null,te&&te.parentNode&&te.parentNode.removeChild(te),te=null,this},connect:function(){U.map.off("load",dt.connect),clearInterval(Re),dt.addLayers(),U.store.storeMapConfig(),U.events.addEventListeners()},onAdd:function(St){var yt=St.fire;return St.fire=function(Bt,xr){var Ar=arguments;return yt.length===1&&arguments.length!==1&&(Ar=[Ve({},{type:Bt},xr)]),yt.apply(St,Ar)},U.map=St,U.events=(function(Bt){var xr=Object.keys(Bt.options.modes).reduce((function(ur,Kr){return ur[Kr]=Pt(Bt.options.modes[Kr]),ur}),{}),Ar={},jr={},fr={},Rr=null,Pn=null;fr.drag=function(ur,Kr){Kr({point:ur.point,time:new Date().getTime()})?(Bt.ui.queueMapClasses({mouse:x.DRAG}),Pn.drag(ur)):ur.originalEvent.stopPropagation()},fr.mousedrag=function(ur){fr.drag(ur,(function(Kr){return!ge(Ar,Kr)}))},fr.touchdrag=function(ur){fr.drag(ur,(function(Kr){return!xe(jr,Kr)}))},fr.mousemove=function(ur){if((ur.originalEvent.buttons!==void 0?ur.originalEvent.buttons:ur.originalEvent.which)===1)return fr.mousedrag(ur);var Kr=ye(ur,Bt);ur.featureTarget=Kr,Pn.mousemove(ur)},fr.mousedown=function(ur){Ar={time:new Date().getTime(),point:ur.point};var Kr=ye(ur,Bt);ur.featureTarget=Kr,Pn.mousedown(ur)},fr.mouseup=function(ur){var Kr=ye(ur,Bt);ur.featureTarget=Kr,ge(Ar,{point:ur.point,time:new Date().getTime()})?Pn.click(ur):Pn.mouseup(ur)},fr.mouseout=function(ur){Pn.mouseout(ur)},fr.touchstart=function(ur){if(Bt.options.touchEnabled){jr={time:new Date().getTime(),point:ur.point};var Kr=le.touch(ur,null,Bt)[0];ur.featureTarget=Kr,Pn.touchstart(ur)}},fr.touchmove=function(ur){if(Bt.options.touchEnabled)return Pn.touchmove(ur),fr.touchdrag(ur)},fr.touchend=function(ur){if(ur.originalEvent.preventDefault(),Bt.options.touchEnabled){var Kr=le.touch(ur,null,Bt)[0];ur.featureTarget=Kr,xe(jr,{time:new Date().getTime(),point:ur.point})?Pn.tap(ur):Pn.touchend(ur)}};var bi=function(ur){return!(ur===8||ur===46||ur>=48&&ur<=57)};function dn(ur,Kr,bn){bn===void 0&&(bn={}),Pn.stop();var va=xr[ur];if(va===void 0)throw new Error(ur+" is not valid");Rr=ur;var Gn=va(Bt,Kr);Pn=r(Gn,Bt),bn.silent||Bt.map.fire(L.MODE_CHANGE,{mode:ur}),Bt.store.setDirty(),Bt.store.render()}fr.keydown=function(ur){(ur.srcElement||ur.target).classList.contains("mapboxgl-canvas")&&(ur.keyCode!==8&&ur.keyCode!==46||!Bt.options.controls.trash?bi(ur.keyCode)?Pn.keydown(ur):ur.keyCode===49&&Bt.options.controls.point?dn(O.DRAW_POINT):ur.keyCode===50&&Bt.options.controls.line_string?dn(O.DRAW_LINE_STRING):ur.keyCode===51&&Bt.options.controls.polygon&&dn(O.DRAW_POLYGON):(ur.preventDefault(),Pn.trash()))},fr.keyup=function(ur){bi(ur.keyCode)&&Pn.keyup(ur)},fr.zoomend=function(){Bt.store.changeZoom()},fr.data=function(ur){if(ur.dataType==="style"){var Kr=Bt.setup,bn=Bt.map,va=Bt.options,Gn=Bt.store;va.styles.some((function(aa){return bn.getLayer(aa.id)}))||(Kr.addLayers(),Gn.setDirty(),Gn.render())}};var Yr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Rr=Bt.options.defaultMode,Pn=r(xr[Rr](Bt),Bt)},changeMode:dn,actionable:function(ur){var Kr=!1;Object.keys(ur).forEach((function(bn){if(Yr[bn]===void 0)throw new Error("Invalid action type");Yr[bn]!==ur[bn]&&(Kr=!0),Yr[bn]=ur[bn]})),Kr&&Bt.map.fire(L.ACTIONABLE,{actions:Yr})},currentModeName:function(){return Rr},currentModeRender:function(ur,Kr){return Pn.render(ur,Kr)},fire:function(ur,Kr){fr[ur]&&fr[ur](Kr)},addEventListeners:function(){Bt.map.on("mousemove",fr.mousemove),Bt.map.on("mousedown",fr.mousedown),Bt.map.on("mouseup",fr.mouseup),Bt.map.on("data",fr.data),Bt.map.on("touchmove",fr.touchmove),Bt.map.on("touchstart",fr.touchstart),Bt.map.on("touchend",fr.touchend),Bt.container.addEventListener("mouseout",fr.mouseout),Bt.options.keybindings&&(Bt.container.addEventListener("keydown",fr.keydown),Bt.container.addEventListener("keyup",fr.keyup))},removeEventListeners:function(){Bt.map.off("mousemove",fr.mousemove),Bt.map.off("mousedown",fr.mousedown),Bt.map.off("mouseup",fr.mouseup),Bt.map.off("data",fr.data),Bt.map.off("touchmove",fr.touchmove),Bt.map.off("touchstart",fr.touchstart),Bt.map.off("touchend",fr.touchend),Bt.container.removeEventListener("mouseout",fr.mouseout),Bt.options.keybindings&&(Bt.container.removeEventListener("keydown",fr.keydown),Bt.container.removeEventListener("keyup",fr.keyup))},trash:function(ur){Pn.trash(ur)},combineFeatures:function(){Pn.combineFeatures()},uncombineFeatures:function(){Pn.uncombineFeatures()},getMode:function(){return Rr}}})(U),U.ui=(function(Bt){var xr={},Ar=null,jr={mode:null,feature:null,mouse:null},fr={mode:null,feature:null,mouse:null};function Rr(ur){fr=Ve(fr,ur)}function Pn(){var ur,Kr;if(Bt.container){var bn=[],va=[];tt.forEach((function(Gn){fr[Gn]!==jr[Gn]&&(bn.push(Gn+"-"+jr[Gn]),fr[Gn]!==null&&va.push(Gn+"-"+fr[Gn]))})),bn.length>0&&(ur=Bt.container.classList).remove.apply(ur,bn),va.length>0&&(Kr=Bt.container.classList).add.apply(Kr,va),jr=Ve(jr,fr)}}function bi(ur,Kr){Kr===void 0&&(Kr={});var bn=document.createElement("button");return bn.className=v.CONTROL_BUTTON+" "+Kr.className,bn.setAttribute("title",Kr.title),Kr.container.appendChild(bn),bn.addEventListener("click",(function(va){if(va.preventDefault(),va.stopPropagation(),va.target===Ar)return dn(),void Kr.onDeactivate();Yr(ur),Kr.onActivate()}),!0),bn}function dn(){Ar&&(Ar.classList.remove(v.ACTIVE_BUTTON),Ar=null)}function Yr(ur){dn();var Kr=xr[ur];Kr&&Kr&&ur!=="trash"&&(Kr.classList.add(v.ACTIVE_BUTTON),Ar=Kr)}return{setActiveButton:Yr,queueMapClasses:Rr,updateMapClasses:Pn,clearMapClasses:function(){Rr({mode:null,feature:null,mouse:null}),Pn()},addButtons:function(){var ur=Bt.options.controls,Kr=document.createElement("div");return Kr.className=v.CONTROL_GROUP+" "+v.CONTROL_BASE,ur&&(ur[P.LINE]&&(xr[P.LINE]=bi(P.LINE,{container:Kr,className:v.CONTROL_BUTTON_LINE,title:"LineString tool "+(Bt.options.keybindings?"(l)":""),onActivate:function(){return Bt.events.changeMode(O.DRAW_LINE_STRING)},onDeactivate:function(){return Bt.events.trash()}})),ur[P.POLYGON]&&(xr[P.POLYGON]=bi(P.POLYGON,{container:Kr,className:v.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Bt.options.keybindings?"(p)":""),onActivate:function(){return Bt.events.changeMode(O.DRAW_POLYGON)},onDeactivate:function(){return Bt.events.trash()}})),ur[P.POINT]&&(xr[P.POINT]=bi(P.POINT,{container:Kr,className:v.CONTROL_BUTTON_POINT,title:"Marker tool "+(Bt.options.keybindings?"(m)":""),onActivate:function(){return Bt.events.changeMode(O.DRAW_POINT)},onDeactivate:function(){return Bt.events.trash()}})),ur.trash&&(xr.trash=bi("trash",{container:Kr,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Bt.events.trash()}})),ur.combine_features&&(xr.combine_features=bi("combineFeatures",{container:Kr,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Bt.events.combineFeatures()}})),ur.uncombine_features&&(xr.uncombine_features=bi("uncombineFeatures",{container:Kr,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Bt.events.uncombineFeatures()}}))),Kr},removeButtons:function(){Object.keys(xr).forEach((function(ur){var Kr=xr[ur];Kr.parentNode&&Kr.parentNode.removeChild(Kr),delete xr[ur]}))}}})(U),U.container=St.getContainer(),U.store=new sr(U),te=U.ui.addButtons(),U.options.boxSelect&&(U.boxZoomInitial=St.boxZoom.isEnabled(),St.boxZoom.disable(),St.dragPan.disable(),St.dragPan.enable()),St.loaded()?dt.connect():(St.on("load",dt.connect),Re=setInterval((function(){St.loaded()&&dt.connect()}),16)),U.events.start(),te},addLayers:function(){U.map.addSource(w.COLD,{data:{type:T.FEATURE_COLLECTION,features:[]},type:"geojson"}),U.map.addSource(w.HOT,{data:{type:T.FEATURE_COLLECTION,features:[]},type:"geojson"}),U.options.styles.forEach((function(St){U.map.addLayer(St)})),U.store.setDirty(!0),U.store.render()},removeLayers:function(){U.options.styles.forEach((function(St){U.map.getLayer(St.id)&&U.map.removeLayer(St.id)})),U.map.getSource(w.COLD)&&U.map.removeSource(w.COLD),U.map.getSource(w.HOT)&&U.map.removeSource(w.HOT)}};return U.setup=dt,dt}var Mt=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Kt(U){return function(te){var Re=te.featureTarget;return!!Re&&!!Re.properties&&Re.properties.meta===U}}function Ut(U){return!!U.originalEvent&&!!U.originalEvent.shiftKey&&U.originalEvent.button===0}function ar(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.active===D.ACTIVE&&U.featureTarget.properties.meta===F.FEATURE}function gr(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.active===D.INACTIVE&&U.featureTarget.properties.meta===F.FEATURE}function yr(U){return U.featureTarget===void 0}function Ye(U){return!!U.featureTarget&&!!U.featureTarget.properties&&U.featureTarget.properties.meta===F.FEATURE}function de(U){var te=U.featureTarget;return!!te&&!!te.properties&&te.properties.meta===F.VERTEX}function he(U){return!!U.originalEvent&&U.originalEvent.shiftKey===!0}function Me(U){return U.keyCode===27}function Ue(U){return U.keyCode===13}var Ke=Object.freeze({__proto__:null,isOfMetaType:Kt,isShiftMousedown:Ut,isActiveFeature:ar,isInactiveFeature:gr,noTarget:yr,isFeature:Ye,isVertex:de,isShiftDown:he,isEscapeKey:Me,isEnterKey:Ue,isTrue:function(){return!0}}),Qe=wt;function wt(U,te){this.x=U,this.y=te}wt.prototype={clone:function(){return new wt(this.x,this.y)},add:function(U){return this.clone()._add(U)},sub:function(U){return this.clone()._sub(U)},multByPoint:function(U){return this.clone()._multByPoint(U)},divByPoint:function(U){return this.clone()._divByPoint(U)},mult:function(U){return this.clone()._mult(U)},div:function(U){return this.clone()._div(U)},rotate:function(U){return this.clone()._rotate(U)},rotateAround:function(U,te){return this.clone()._rotateAround(U,te)},matMult:function(U){return this.clone()._matMult(U)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(U){return this.x===U.x&&this.y===U.y},dist:function(U){return Math.sqrt(this.distSqr(U))},distSqr:function(U){var te=U.x-this.x,Re=U.y-this.y;return te*te+Re*Re},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(U){return Math.atan2(this.y-U.y,this.x-U.x)},angleWith:function(U){return this.angleWithSep(U.x,U.y)},angleWithSep:function(U,te){return Math.atan2(this.x*te-this.y*U,this.x*U+this.y*te)},_matMult:function(U){var te=U[0]*this.x+U[1]*this.y,Re=U[2]*this.x+U[3]*this.y;return this.x=te,this.y=Re,this},_add:function(U){return this.x+=U.x,this.y+=U.y,this},_sub:function(U){return this.x-=U.x,this.y-=U.y,this},_mult:function(U){return this.x*=U,this.y*=U,this},_div:function(U){return this.x/=U,this.y/=U,this},_multByPoint:function(U){return this.x*=U.x,this.y*=U.y,this},_divByPoint:function(U){return this.x/=U.x,this.y/=U.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var U=this.y;return this.y=this.x,this.x=-U,this},_rotate:function(U){var te=Math.cos(U),Re=Math.sin(U),dt=te*this.x-Re*this.y,St=Re*this.x+te*this.y;return this.x=dt,this.y=St,this},_rotateAround:function(U,te){var Re=Math.cos(U),dt=Math.sin(U),St=te.x+Re*(this.x-te.x)-dt*(this.y-te.y),yt=te.y+dt*(this.x-te.x)+Re*(this.y-te.y);return this.x=St,this.y=yt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},wt.convert=function(U){return U instanceof wt?U:Array.isArray(U)?new wt(U[0],U[1]):U};var nt=n(Qe);function Ot(U,te){var Re=te.getBoundingClientRect();return new nt(U.clientX-Re.left-(te.clientLeft||0),U.clientY-Re.top-(te.clientTop||0))}function Gt(U,te,Re,dt){return{type:T.FEATURE,properties:{meta:F.VERTEX,parent:U,coord_path:Re,active:dt?D.ACTIVE:D.INACTIVE},geometry:{type:T.POINT,coordinates:te}}}function ir(U,te,Re){var dt=te.geometry.coordinates,St=Re.geometry.coordinates;if(dt[1]>85||dt[1]<z||St[1]>85||St[1]<z)return null;var yt={lng:(dt[0]+St[0])/2,lat:(dt[1]+St[1])/2};return{type:T.FEATURE,properties:{meta:F.MIDPOINT,parent:U,lng:yt.lng,lat:yt.lat,coord_path:Re.properties.coord_path},geometry:{type:T.POINT,coordinates:[yt.lng,yt.lat]}}}function Pr(U,te,Re){te===void 0&&(te={}),Re===void 0&&(Re=null);var dt,St=U.geometry,yt=St.type,Bt=St.coordinates,xr=U.properties&&U.properties.id,Ar=[];function jr(Rr,Pn){var bi="",dn=null;Rr.forEach((function(Yr,ur){var Kr=Pn!=null?Pn+"."+ur:String(ur),bn=Gt(xr,Yr,Kr,fr(Kr));if(te.midpoints&&dn){var va=ir(xr,dn,bn);va&&Ar.push(va)}dn=bn;var Gn=JSON.stringify(Yr);bi!==Gn&&Ar.push(bn),ur===0&&(bi=Gn)}))}function fr(Rr){return!!te.selectedPaths&&te.selectedPaths.indexOf(Rr)!==-1}return yt===T.POINT?Ar.push(Gt(xr,Bt,Re,fr(Re))):yt===T.POLYGON?Bt.forEach((function(Rr,Pn){jr(Rr,Re!==null?Re+"."+Pn:String(Pn))})):yt===T.LINE_STRING?jr(Bt,Re):yt.indexOf(T.MULTI_PREFIX)===0&&(dt=yt.replace(T.MULTI_PREFIX,""),Bt.forEach((function(Rr,Pn){var bi={type:T.FEATURE,properties:U.properties,geometry:{type:dt,coordinates:Rr}};Ar=Ar.concat(Pr(bi,te,Pn))}))),Ar}var bt={enable:function(U){setTimeout((function(){U.map&&U.map.doubleClickZoom&&U._ctx&&U._ctx.store&&U._ctx.store.getInitialConfigValue&&U._ctx.store.getInitialConfigValue("doubleClickZoom")&&U.map.doubleClickZoom.enable()}),0)},disable:function(U){setTimeout((function(){U.map&&U.map.doubleClickZoom&&U.map.doubleClickZoom.disable()}),0)}},Sr={exports:{}},Mr=function(U){if(!U||!U.type)return null;var te=Nr[U.type];if(!te)return null;if(te==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:U}]};if(te==="feature")return{type:"FeatureCollection",features:[U]};if(te==="featurecollection")return U},Nr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},en=n(Mr),Vr=Object.freeze({__proto__:null,default:function U(te){switch(te&&te.type||null){case"FeatureCollection":return te.features=te.features.reduce((function(Re,dt){return Re.concat(U(dt))}),[]),te;case"Feature":return te.geometry?U(te.geometry).map((function(Re){var dt={type:"Feature",properties:JSON.parse(JSON.stringify(te.properties)),geometry:Re};return te.id!==void 0&&(dt.id=te.id),dt})):[te];case"MultiPoint":return te.coordinates.map((function(Re){return{type:"Point",coordinates:Re}}));case"MultiPolygon":return te.coordinates.map((function(Re){return{type:"Polygon",coordinates:Re}}));case"MultiLineString":return te.coordinates.map((function(Re){return{type:"LineString",coordinates:Re}}));case"GeometryCollection":return te.geometries.map(U).reduce((function(Re,dt){return Re.concat(dt)}),[]);case"Point":case"Polygon":case"LineString":return[te]}}}),gt=Mr,xt=i(Vr),Wt=function(U){return(function te(Re){return Array.isArray(Re)&&Re.length&&typeof Re[0]=="number"?[Re]:Re.reduce((function(dt,St){return Array.isArray(St)&&Array.isArray(St[0])?dt.concat(te(St)):(dt.push(St),dt)}),[])})(U)};xt instanceof Function||(xt=xt.default);var ne={exports:{}},me=ne.exports=function(U){return new qe(U)};function qe(U){this.value=U}function je(U,te,Re){var dt=[],St=[],yt=!0;return(function Bt(xr){var Ar=Re?jt(xr):xr,jr={},fr=!0,Rr={node:Ar,node_:xr,path:[].concat(dt),parent:St[St.length-1],parents:St,key:dt.slice(-1)[0],isRoot:dt.length===0,level:dt.length,circular:null,update:function(dn,Yr){Rr.isRoot||(Rr.parent.node[Rr.key]=dn),Rr.node=dn,Yr&&(fr=!1)},delete:function(dn){delete Rr.parent.node[Rr.key],dn&&(fr=!1)},remove:function(dn){zr(Rr.parent.node)?Rr.parent.node.splice(Rr.key,1):delete Rr.parent.node[Rr.key],dn&&(fr=!1)},keys:null,before:function(dn){jr.before=dn},after:function(dn){jr.after=dn},pre:function(dn){jr.pre=dn},post:function(dn){jr.post=dn},stop:function(){yt=!1},block:function(){fr=!1}};if(!yt)return Rr;function Pn(){if(typeof Rr.node=="object"&&Rr.node!==null){Rr.keys&&Rr.node_===Rr.node||(Rr.keys=Jt(Rr.node)),Rr.isLeaf=Rr.keys.length==0;for(var dn=0;dn<St.length;dn++)if(St[dn].node_===xr){Rr.circular=St[dn];break}}else Rr.isLeaf=!0,Rr.keys=null;Rr.notLeaf=!Rr.isLeaf,Rr.notRoot=!Rr.isRoot}Pn();var bi=te.call(Rr,Rr.node);return bi!==void 0&&Rr.update&&Rr.update(bi),jr.before&&jr.before.call(Rr,Rr.node),fr&&(typeof Rr.node!="object"||Rr.node===null||Rr.circular||(St.push(Rr),Pn(),Vt(Rr.keys,(function(dn,Yr){dt.push(dn),jr.pre&&jr.pre.call(Rr,Rr.node[dn],dn);var ur=Bt(Rr.node[dn]);Re&&Ir.call(Rr.node,dn)&&(Rr.node[dn]=ur.node),ur.isLast=Yr==Rr.keys.length-1,ur.isFirst=Yr==0,jr.post&&jr.post.call(Rr,ur),dt.pop()})),St.pop()),jr.after&&jr.after.call(Rr,Rr.node)),Rr})(U).node}function jt(U){if(typeof U=="object"&&U!==null){var te;if(zr(U))te=[];else if(Tr(U)==="[object Date]")te=new Date(U.getTime?U.getTime():U);else if((function(St){return Tr(St)==="[object RegExp]"})(U))te=new RegExp(U);else if((function(St){return Tr(St)==="[object Error]"})(U))te={message:U.message};else if((function(St){return Tr(St)==="[object Boolean]"})(U))te=new Boolean(U);else if((function(St){return Tr(St)==="[object Number]"})(U))te=new Number(U);else if((function(St){return Tr(St)==="[object String]"})(U))te=new String(U);else if(Object.create&&Object.getPrototypeOf)te=Object.create(Object.getPrototypeOf(U));else if(U.constructor===Object)te={};else{var Re=U.constructor&&U.constructor.prototype||U.__proto__||{},dt=function(){};dt.prototype=Re,te=new dt}return Vt(Jt(U),(function(St){te[St]=U[St]})),te}return U}qe.prototype.get=function(U){for(var te=this.value,Re=0;Re<U.length;Re++){var dt=U[Re];if(!te||!Ir.call(te,dt)){te=void 0;break}te=te[dt]}return te},qe.prototype.has=function(U){for(var te=this.value,Re=0;Re<U.length;Re++){var dt=U[Re];if(!te||!Ir.call(te,dt))return!1;te=te[dt]}return!0},qe.prototype.set=function(U,te){for(var Re=this.value,dt=0;dt<U.length-1;dt++){var St=U[dt];Ir.call(Re,St)||(Re[St]={}),Re=Re[St]}return Re[U[dt]]=te,te},qe.prototype.map=function(U){return je(this.value,U,!0)},qe.prototype.forEach=function(U){return this.value=je(this.value,U,!1),this.value},qe.prototype.reduce=function(U,te){var Re=arguments.length===1,dt=Re?this.value:te;return this.forEach((function(St){this.isRoot&&Re||(dt=U.call(this,dt,St))})),dt},qe.prototype.paths=function(){var U=[];return this.forEach((function(te){U.push(this.path)})),U},qe.prototype.nodes=function(){var U=[];return this.forEach((function(te){U.push(this.node)})),U},qe.prototype.clone=function(){var U=[],te=[];return(function Re(dt){for(var St=0;St<U.length;St++)if(U[St]===dt)return te[St];if(typeof dt=="object"&&dt!==null){var yt=jt(dt);return U.push(dt),te.push(yt),Vt(Jt(dt),(function(Bt){yt[Bt]=Re(dt[Bt])})),U.pop(),te.pop(),yt}return dt})(this.value)};var Jt=Object.keys||function(U){var te=[];for(var Re in U)te.push(Re);return te};function Tr(U){return Object.prototype.toString.call(U)}var zr=Array.isArray||function(U){return Object.prototype.toString.call(U)==="[object Array]"},Vt=function(U,te){if(U.forEach)return U.forEach(te);for(var Re=0;Re<U.length;Re++)te(U[Re],Re,U)};Vt(Jt(qe.prototype),(function(U){me[U]=function(te){var Re=[].slice.call(arguments,1),dt=new qe(te);return dt[U].apply(dt,Re)}}));var Ir=Object.hasOwnProperty||function(U,te){return te in U},Dr=ne.exports,Sn=vn;function vn(U){if(!(this instanceof vn))return new vn(U);this._bbox=U||[1/0,1/0,-1/0,-1/0],this._valid=!!U}vn.prototype.include=function(U){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],U[0]),this._bbox[1]=Math.min(this._bbox[1],U[1]),this._bbox[2]=Math.max(this._bbox[2],U[0]),this._bbox[3]=Math.max(this._bbox[3],U[1]),this},vn.prototype.equals=function(U){var te;return te=U instanceof vn?U.bbox():U,this._bbox[0]==te[0]&&this._bbox[1]==te[1]&&this._bbox[2]==te[2]&&this._bbox[3]==te[3]},vn.prototype.center=function(U){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},vn.prototype.union=function(U){var te;return this._valid=!0,te=U instanceof vn?U.bbox():U,this._bbox[0]=Math.min(this._bbox[0],te[0]),this._bbox[1]=Math.min(this._bbox[1],te[1]),this._bbox[2]=Math.max(this._bbox[2],te[2]),this._bbox[3]=Math.max(this._bbox[3],te[3]),this},vn.prototype.bbox=function(){return this._valid?this._bbox:null},vn.prototype.contains=function(U){if(!U)return this._fastContains();if(!this._valid)return null;var te=U[0],Re=U[1];return this._bbox[0]<=te&&this._bbox[1]<=Re&&this._bbox[2]>=te&&this._bbox[3]>=Re},vn.prototype.intersect=function(U){return this._valid?(te=U instanceof vn?U.bbox():U,!(this._bbox[0]>te[2]||this._bbox[2]<te[0]||this._bbox[3]<te[1]||this._bbox[1]>te[3])):null;var te},vn.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var U="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",U)},vn.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Rn=function(U){if(!U)return[];var te=xt(gt(U)),Re=[];return te.features.forEach((function(dt){dt.geometry&&(Re=Re.concat(Wt(dt.geometry.coordinates)))})),Re},$r=Dr,Ii=Sn,Li={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ji=Object.keys(Li);function vi(U){for(var te=Ii(),Re=Rn(U),dt=0;dt<Re.length;dt++)te.include(Re[dt]);return te}Sr.exports=function(U){return vi(U).bbox()},Sr.exports.polygon=function(U){return vi(U).polygon()},Sr.exports.bboxify=function(U){return $r(U).map((function(te){te&&Ji.some((function(Re){return!!te[Re]&&Li[Re].indexOf(te.type)!==-1}))&&(te.bbox=vi(te).bbox(),this.update(te))}))};var Mi=n(Sr.exports),ni=-90;function Qi(U,te){var Re=ni,dt=90,St=ni,yt=90,Bt=270,xr=-270;U.forEach((function(jr){var fr=Mi(jr),Rr=fr[1],Pn=fr[3],bi=fr[0],dn=fr[2];Rr>Re&&(Re=Rr),Pn<dt&&(dt=Pn),Pn>St&&(St=Pn),Rr<yt&&(yt=Rr),bi<Bt&&(Bt=bi),dn>xr&&(xr=dn)}));var Ar=te;return Re+Ar.lat>85&&(Ar.lat=85-Re),St+Ar.lat>90&&(Ar.lat=90-St),dt+Ar.lat<-85&&(Ar.lat=-85-dt),yt+Ar.lat<ni&&(Ar.lat=ni-yt),Bt+Ar.lng<=-270&&(Ar.lng+=360*Math.ceil(Math.abs(Ar.lng)/360)),xr+Ar.lng>=270&&(Ar.lng-=360*Math.ceil(Math.abs(Ar.lng)/360)),Ar}function ea(U,te){var Re=Qi(U.map((function(dt){return dt.toGeoJSON()})),te);U.forEach((function(dt){var St,yt=dt.getCoordinates(),Bt=function(Ar){var jr={lng:Ar[0]+Re.lng,lat:Ar[1]+Re.lat};return[jr.lng,jr.lat]},xr=function(Ar){return Ar.map((function(jr){return Bt(jr)}))};dt.type===T.POINT?St=Bt(yt):dt.type===T.LINE_STRING||dt.type===T.MULTI_POINT?St=yt.map(Bt):dt.type===T.POLYGON||dt.type===T.MULTI_LINE_STRING?St=yt.map(xr):dt.type===T.MULTI_POLYGON&&(St=yt.map((function(Ar){return Ar.map((function(jr){return xr(jr)}))}))),dt.incomingCoords(St)}))}var hn={onSetup:function(U){var te=this,Re={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:U.featureIds||[]};return this.setSelected(Re.initiallySelectedFeatureIds.filter((function(dt){return te.getFeature(dt)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Re},fireUpdate:function(){this.map.fire(L.UPDATE,{action:N.MOVE,features:this.getSelected().map((function(U){return U.toGeoJSON()}))})},fireActionable:function(){var U=this,te=this.getSelected(),Re=te.filter((function(xr){return U.isInstanceOf("MultiFeature",xr)})),dt=!1;if(te.length>1){dt=!0;var St=te[0].type.replace("Multi","");te.forEach((function(xr){xr.type.replace("Multi","")!==St&&(dt=!1)}))}var yt=Re.length>0,Bt=te.length>0;this.setActionableState({combineFeatures:dt,uncombineFeatures:yt,trash:Bt})},getUniqueIds:function(U){return U.length?U.map((function(te){return te.properties.id})).filter((function(te){return te!==void 0})).reduce((function(te,Re){return te.add(Re),te}),new G).values():[]},stopExtendedInteractions:function(U){U.boxSelectElement&&(U.boxSelectElement.parentNode&&U.boxSelectElement.parentNode.removeChild(U.boxSelectElement),U.boxSelectElement=null),this.map.dragPan.enable(),U.boxSelecting=!1,U.canBoxSelect=!1,U.dragMoving=!1,U.canDragMove=!1},onStop:function(){bt.enable(this)},onMouseMove:function(U,te){return Ye(te)&&U.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(U),!0},onMouseOut:function(U){return!U.dragMoving||this.fireUpdate()}};hn.onTap=hn.onClick=function(U,te){return yr(te)?this.clickAnywhere(U,te):Kt(F.VERTEX)(te)?this.clickOnVertex(U,te):Ye(te)?this.clickOnFeature(U,te):void 0},hn.clickAnywhere=function(U){var te=this,Re=this.getSelectedIds();Re.length&&(this.clearSelectedFeatures(),Re.forEach((function(dt){return te.doRender(dt)}))),bt.enable(this),this.stopExtendedInteractions(U)},hn.clickOnVertex=function(U,te){this.changeMode(O.DIRECT_SELECT,{featureId:te.featureTarget.properties.parent,coordPath:te.featureTarget.properties.coord_path,startPos:te.lngLat}),this.updateUIClasses({mouse:x.MOVE})},hn.startOnActiveFeature=function(U,te){this.stopExtendedInteractions(U),this.map.dragPan.disable(),this.doRender(te.featureTarget.properties.id),U.canDragMove=!0,U.dragMoveLocation=te.lngLat},hn.clickOnFeature=function(U,te){var Re=this;bt.disable(this),this.stopExtendedInteractions(U);var dt=he(te),St=this.getSelectedIds(),yt=te.featureTarget.properties.id,Bt=this.isSelected(yt);if(!dt&&Bt&&this.getFeature(yt).type!==T.POINT)return this.changeMode(O.DIRECT_SELECT,{featureId:yt});Bt&&dt?(this.deselect(yt),this.updateUIClasses({mouse:x.POINTER}),St.length===1&&bt.enable(this)):!Bt&&dt?(this.select(yt),this.updateUIClasses({mouse:x.MOVE})):Bt||dt||(St.forEach((function(xr){return Re.doRender(xr)})),this.setSelected(yt),this.updateUIClasses({mouse:x.MOVE})),this.doRender(yt)},hn.onMouseDown=function(U,te){return ar(te)?this.startOnActiveFeature(U,te):this.drawConfig.boxSelect&&Ut(te)?this.startBoxSelect(U,te):void 0},hn.startBoxSelect=function(U,te){this.stopExtendedInteractions(U),this.map.dragPan.disable(),U.boxSelectStartLocation=Ot(te.originalEvent,this.map.getContainer()),U.canBoxSelect=!0},hn.onTouchStart=function(U,te){if(ar(te))return this.startOnActiveFeature(U,te)},hn.onDrag=function(U,te){return U.canDragMove?this.dragMove(U,te):this.drawConfig.boxSelect&&U.canBoxSelect?this.whileBoxSelect(U,te):void 0},hn.whileBoxSelect=function(U,te){U.boxSelecting=!0,this.updateUIClasses({mouse:x.ADD}),U.boxSelectElement||(U.boxSelectElement=document.createElement("div"),U.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild(U.boxSelectElement));var Re=Ot(te.originalEvent,this.map.getContainer()),dt=Math.min(U.boxSelectStartLocation.x,Re.x),St=Math.max(U.boxSelectStartLocation.x,Re.x),yt=Math.min(U.boxSelectStartLocation.y,Re.y),Bt=Math.max(U.boxSelectStartLocation.y,Re.y),xr="translate("+dt+"px, "+yt+"px)";U.boxSelectElement.style.transform=xr,U.boxSelectElement.style.WebkitTransform=xr,U.boxSelectElement.style.width=St-dt+"px",U.boxSelectElement.style.height=Bt-yt+"px"},hn.dragMove=function(U,te){U.dragMoving=!0,te.originalEvent.stopPropagation();var Re={lng:te.lngLat.lng-U.dragMoveLocation.lng,lat:te.lngLat.lat-U.dragMoveLocation.lat};ea(this.getSelected(),Re),U.dragMoveLocation=te.lngLat},hn.onTouchEnd=hn.onMouseUp=function(U,te){var Re=this;if(U.dragMoving)this.fireUpdate();else if(U.boxSelecting){var dt=[U.boxSelectStartLocation,Ot(te.originalEvent,this.map.getContainer())],St=this.featuresAt(null,dt,"click"),yt=this.getUniqueIds(St).filter((function(Bt){return!Re.isSelected(Bt)}));yt.length&&(this.select(yt),yt.forEach((function(Bt){return Re.doRender(Bt)})),this.updateUIClasses({mouse:x.MOVE}))}this.stopExtendedInteractions(U)},hn.toDisplayFeatures=function(U,te,Re){te.properties.active=this.isSelected(te.properties.id)?D.ACTIVE:D.INACTIVE,Re(te),this.fireActionable(),te.properties.active===D.ACTIVE&&te.geometry.type!==T.POINT&&Pr(te).forEach(Re)},hn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},hn.onCombineFeatures=function(){var U=this.getSelected();if(!(U.length===0||U.length<2)){for(var te=[],Re=[],dt=U[0].type.replace("Multi",""),St=0;St<U.length;St++){var yt=U[St];if(yt.type.replace("Multi","")!==dt)return;yt.type.includes("Multi")?yt.getCoordinates().forEach((function(xr){te.push(xr)})):te.push(yt.getCoordinates()),Re.push(yt.toGeoJSON())}if(Re.length>1){var Bt=this.newFeature({type:T.FEATURE,properties:Re[0].properties,geometry:{type:"Multi"+dt,coordinates:te}});this.addFeature(Bt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Bt.id]),this.map.fire(L.COMBINE_FEATURES,{createdFeatures:[Bt.toGeoJSON()],deletedFeatures:Re})}this.fireActionable()}},hn.onUncombineFeatures=function(){var U=this,te=this.getSelected();if(te.length!==0){for(var Re=[],dt=[],St=function(Bt){var xr=te[Bt];U.isInstanceOf("MultiFeature",xr)&&(xr.getFeatures().forEach((function(Ar){U.addFeature(Ar),Ar.properties=xr.properties,Re.push(Ar.toGeoJSON()),U.select([Ar.id])})),U.deleteFeature(xr.id,{silent:!0}),dt.push(xr.toGeoJSON()))},yt=0;yt<te.length;yt++)St(yt);Re.length>1&&this.map.fire(L.UNCOMBINE_FEATURES,{createdFeatures:Re,deletedFeatures:dt}),this.fireActionable()}};var Jn=Kt(F.VERTEX),qi=Kt(F.MIDPOINT),ya={fireUpdate:function(){this.map.fire(L.UPDATE,{action:N.CHANGE_COORDINATES,features:this.getSelected().map((function(U){return U.toGeoJSON()}))})},fireActionable:function(U){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:U.selectedCoordPaths.length>0})},startDragging:function(U,te){this.map.dragPan.disable(),U.canDragMove=!0,U.dragMoveLocation=te.lngLat},stopDragging:function(U){this.map.dragPan.enable(),U.dragMoving=!1,U.canDragMove=!1,U.dragMoveLocation=null},onVertex:function(U,te){this.startDragging(U,te);var Re=te.featureTarget.properties,dt=U.selectedCoordPaths.indexOf(Re.coord_path);he(te)||dt!==-1?he(te)&&dt===-1&&U.selectedCoordPaths.push(Re.coord_path):U.selectedCoordPaths=[Re.coord_path];var St=this.pathsToCoordinates(U.featureId,U.selectedCoordPaths);this.setSelectedCoordinates(St)},onMidpoint:function(U,te){this.startDragging(U,te);var Re=te.featureTarget.properties;U.feature.addCoordinate(Re.coord_path,Re.lng,Re.lat),this.fireUpdate(),U.selectedCoordPaths=[Re.coord_path]},pathsToCoordinates:function(U,te){return te.map((function(Re){return{feature_id:U,coord_path:Re}}))},onFeature:function(U,te){U.selectedCoordPaths.length===0?this.startDragging(U,te):this.stopDragging(U)},dragFeature:function(U,te,Re){ea(this.getSelected(),Re),U.dragMoveLocation=te.lngLat},dragVertex:function(U,te,Re){for(var dt=U.selectedCoordPaths.map((function(xr){return U.feature.getCoordinate(xr)})),St=Qi(dt.map((function(xr){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:xr}}})),Re),yt=0;yt<dt.length;yt++){var Bt=dt[yt];U.feature.updateCoordinate(U.selectedCoordPaths[yt],Bt[0]+St.lng,Bt[1]+St.lat)}},clickNoTarget:function(){this.changeMode(O.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(O.SIMPLE_SELECT)},clickActiveFeature:function(U){U.selectedCoordPaths=[],this.clearSelectedCoordinates(),U.feature.changed()},onSetup:function(U){var te=U.featureId,Re=this.getFeature(te);if(!Re)throw new Error("You must provide a featureId to enter direct_select mode");if(Re.type===T.POINT)throw new TypeError("direct_select mode doesn't handle point features");var dt={featureId:te,feature:Re,dragMoveLocation:U.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:U.coordPath?[U.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(te,dt.selectedCoordPaths)),this.setSelected(te),bt.disable(this),this.setActionableState({trash:!0}),dt},onStop:function(){bt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(U,te,Re){U.featureId===te.properties.id?(te.properties.active=D.ACTIVE,Re(te),Pr(te,{map:this.map,midpoints:!0,selectedPaths:U.selectedCoordPaths}).forEach(Re)):(te.properties.active=D.INACTIVE,Re(te)),this.fireActionable(U)},onTrash:function(U){U.selectedCoordPaths.sort((function(te,Re){return Re.localeCompare(te,"en",{numeric:!0})})).forEach((function(te){return U.feature.removeCoordinate(te)})),this.fireUpdate(),U.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(U),U.feature.isValid()===!1&&(this.deleteFeature([U.featureId]),this.changeMode(O.SIMPLE_SELECT,{}))},onMouseMove:function(U,te){var Re=ar(te),dt=Jn(te),St=qi(te),yt=U.selectedCoordPaths.length===0;return Re&&yt||dt&&!yt?this.updateUIClasses({mouse:x.MOVE}):this.updateUIClasses({mouse:x.NONE}),(dt||Re||St)&&U.dragMoving&&this.fireUpdate(),this.stopDragging(U),!0},onMouseOut:function(U){return U.dragMoving&&this.fireUpdate(),!0}};ya.onTouchStart=ya.onMouseDown=function(U,te){return Jn(te)?this.onVertex(U,te):ar(te)?this.onFeature(U,te):qi(te)?this.onMidpoint(U,te):void 0},ya.onDrag=function(U,te){if(U.canDragMove===!0){U.dragMoving=!0,te.originalEvent.stopPropagation();var Re={lng:te.lngLat.lng-U.dragMoveLocation.lng,lat:te.lngLat.lat-U.dragMoveLocation.lat};U.selectedCoordPaths.length>0?this.dragVertex(U,te,Re):this.dragFeature(U,te,Re),U.dragMoveLocation=te.lngLat}},ya.onClick=function(U,te){return yr(te)?this.clickNoTarget(U,te):ar(te)?this.clickActiveFeature(U,te):gr(te)?this.clickInactive(U,te):void this.stopDragging(U)},ya.onTap=function(U,te){return yr(te)?this.clickNoTarget(U,te):ar(te)?this.clickActiveFeature(U,te):gr(te)?this.clickInactive(U,te):void 0},ya.onTouchEnd=ya.onMouseUp=function(U){U.dragMoving&&this.fireUpdate(),this.stopDragging(U)};var Di={};function hi(U,te){return!!U.lngLat&&U.lngLat.lng===te[0]&&U.lngLat.lat===te[1]}Di.onSetup=function(){var U=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:[]}});return this.addFeature(U),this.clearSelectedFeatures(),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:U}},Di.stopDrawingAndRemove=function(U){this.deleteFeature([U.point.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},Di.onTap=Di.onClick=function(U,te){this.updateUIClasses({mouse:x.MOVE}),U.point.updateCoordinate("",te.lngLat.lng,te.lngLat.lat),this.map.fire(L.CREATE,{features:[U.point.toGeoJSON()]}),this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.point.id]})},Di.onStop=function(U){this.activateUIButton(),U.point.getCoordinate().length||this.deleteFeature([U.point.id],{silent:!0})},Di.toDisplayFeatures=function(U,te,Re){var dt=te.properties.id===U.point.id;if(te.properties.active=dt?D.ACTIVE:D.INACTIVE,!dt)return Re(te)},Di.onTrash=Di.stopDrawingAndRemove,Di.onKeyUp=function(U,te){if(Me(te)||Ue(te))return this.stopDrawingAndRemove(U,te)};var Qa={onSetup:function(){var U=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.POLYGON,coordinates:[[]]}});return this.addFeature(U),this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:U,currentVertexPosition:0}},clickAnywhere:function(U,te){if(U.currentVertexPosition>0&&hi(te,U.polygon.coordinates[0][U.currentVertexPosition-1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.polygon.id]});this.updateUIClasses({mouse:x.ADD}),U.polygon.updateCoordinate("0."+U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),U.currentVertexPosition++,U.polygon.updateCoordinate("0."+U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function(U){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.polygon.id]})},onMouseMove:function(U,te){U.polygon.updateCoordinate("0."+U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),de(te)&&this.updateUIClasses({mouse:x.POINTER})}};Qa.onTap=Qa.onClick=function(U,te){return de(te)?this.clickOnVertex(U,te):this.clickAnywhere(U,te)},Qa.onKeyUp=function(U,te){Me(te)?(this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)):Ue(te)&&this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.polygon.id]})},Qa.onStop=function(U){this.updateUIClasses({mouse:x.NONE}),bt.enable(this),this.activateUIButton(),this.getFeature(U.polygon.id)!==void 0&&(U.polygon.removeCoordinate("0."+U.currentVertexPosition),U.polygon.isValid()?this.map.fire(L.CREATE,{features:[U.polygon.toGeoJSON()]}):(this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},Qa.toDisplayFeatures=function(U,te,Re){var dt=te.properties.id===U.polygon.id;if(te.properties.active=dt?D.ACTIVE:D.INACTIVE,!dt)return Re(te);if(te.geometry.coordinates.length!==0){var St=te.geometry.coordinates[0].length;if(!(St<3)){if(te.properties.meta=F.FEATURE,Re(Gt(U.polygon.id,te.geometry.coordinates[0][0],"0.0",!1)),St>3){var yt=te.geometry.coordinates[0].length-3;Re(Gt(U.polygon.id,te.geometry.coordinates[0][yt],"0."+yt,!1))}if(St<=4){var Bt=[[te.geometry.coordinates[0][0][0],te.geometry.coordinates[0][0][1]],[te.geometry.coordinates[0][1][0],te.geometry.coordinates[0][1][1]]];if(Re({type:T.FEATURE,properties:te.properties,geometry:{coordinates:Bt,type:T.LINE_STRING}}),St===3)return}return Re(te)}}},Qa.onTrash=function(U){this.deleteFeature([U.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)};var io={onSetup:function(U){var te,Re,dt=(U=U||{}).featureId,St="forward";if(dt){if(!(te=this.getFeature(dt)))throw new Error("Could not find a feature with the provided featureId");var yt=U.from;if(yt&&yt.type==="Feature"&&yt.geometry&&yt.geometry.type==="Point"&&(yt=yt.geometry),yt&&yt.type==="Point"&&yt.coordinates&&yt.coordinates.length===2&&(yt=yt.coordinates),!yt||!Array.isArray(yt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Bt=te.coordinates.length-1;if(te.coordinates[Bt][0]===yt[0]&&te.coordinates[Bt][1]===yt[1])Re=Bt+1,te.addCoordinate.apply(te,[Re].concat(te.coordinates[Bt]));else{if(te.coordinates[0][0]!==yt[0]||te.coordinates[0][1]!==yt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");St="backwards",Re=0,te.addCoordinate.apply(te,[Re].concat(te.coordinates[0]))}}else te=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.LINE_STRING,coordinates:[]}}),Re=0,this.addFeature(te);return this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:te,currentVertexPosition:Re,direction:St}},clickAnywhere:function(U,te){if(U.currentVertexPosition>0&&hi(te,U.line.coordinates[U.currentVertexPosition-1])||U.direction==="backwards"&&hi(te,U.line.coordinates[U.currentVertexPosition+1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.line.id]});this.updateUIClasses({mouse:x.ADD}),U.line.updateCoordinate(U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),U.direction==="forward"?(U.currentVertexPosition++,U.line.updateCoordinate(U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)):U.line.addCoordinate(0,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function(U){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.line.id]})},onMouseMove:function(U,te){U.line.updateCoordinate(U.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),de(te)&&this.updateUIClasses({mouse:x.POINTER})}};io.onTap=io.onClick=function(U,te){if(de(te))return this.clickOnVertex(U,te);this.clickAnywhere(U,te)},io.onKeyUp=function(U,te){Ue(te)?this.changeMode(O.SIMPLE_SELECT,{featureIds:[U.line.id]}):Me(te)&&(this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT))},io.onStop=function(U){bt.enable(this),this.activateUIButton(),this.getFeature(U.line.id)!==void 0&&(U.line.removeCoordinate(""+U.currentVertexPosition),U.line.isValid()?this.map.fire(L.CREATE,{features:[U.line.toGeoJSON()]}):(this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},io.onTrash=function(U){this.deleteFeature([U.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},io.toDisplayFeatures=function(U,te,Re){var dt=te.properties.id===U.line.id;if(te.properties.active=dt?D.ACTIVE:D.INACTIVE,!dt)return Re(te);te.geometry.coordinates.length<2||(te.properties.meta=F.FEATURE,Re(Gt(U.line.id,te.geometry.coordinates[U.direction==="forward"?te.geometry.coordinates.length-2:1],""+(U.direction==="forward"?te.geometry.coordinates.length-2:1),!1)),Re(te))};var uu={simple_select:hn,direct_select:ya,draw_point:Di,draw_polygon:Qa,draw_line_string:io},Hi={defaultMode:O.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Mt,modes:uu,controls:{},userProperties:!1},uc={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},$c={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Hs(U,te){return U.map((function(Re){return Re.source?Re:Ve(Re,{id:Re.id+"."+te,source:te==="hot"?w.HOT:w.COLD})}))}var ml={exports:{}};(function(U,te){var Re="__lodash_hash_undefined__",dt=9007199254740991,St="[object Arguments]",yt="[object Array]",Bt="[object Boolean]",xr="[object Date]",Ar="[object Error]",jr="[object Function]",fr="[object Map]",Rr="[object Number]",Pn="[object Object]",bi="[object Promise]",dn="[object RegExp]",Yr="[object Set]",ur="[object String]",Kr="[object Symbol]",bn="[object WeakMap]",va="[object ArrayBuffer]",Gn="[object DataView]",aa=/^\[object .+?Constructor\]$/,ja=/^(?:0|[1-9]\d*)$/,In={};In["[object Float32Array]"]=In["[object Float64Array]"]=In["[object Int8Array]"]=In["[object Int16Array]"]=In["[object Int32Array]"]=In["[object Uint8Array]"]=In["[object Uint8ClampedArray]"]=In["[object Uint16Array]"]=In["[object Uint32Array]"]=!0,In[St]=In[yt]=In[va]=In[Bt]=In[Gn]=In[xr]=In[Ar]=In[jr]=In[fr]=In[Rr]=In[Pn]=In[dn]=In[Yr]=In[ur]=In[bn]=!1;var os=typeof qh=="object"&&qh&&qh.Object===Object&&qh,yn=typeof self=="object"&&self&&self.Object===Object&&self,pn=os||yn||Function("return this")(),Po=te&&!te.nodeType&&te,zn=Po&&U&&!U.nodeType&&U,ao=zn&&zn.exports===Po,oo=ao&&os.process,To=(function(){try{return oo&&oo.binding&&oo.binding("util")}catch{}})(),Ms=To&&To.isTypedArray;function gl(Ft,qt){for(var Ur=-1,nn=Ft==null?0:Ft.length;++Ur<nn;)if(qt(Ft[Ur],Ur,Ft))return!0;return!1}function Ws(Ft){var qt=-1,Ur=Array(Ft.size);return Ft.forEach((function(nn,si){Ur[++qt]=[si,nn]})),Ur}function Zs(Ft){var qt=-1,Ur=Array(Ft.size);return Ft.forEach((function(nn){Ur[++qt]=nn})),Ur}var yl,Rs,vl,Io=Array.prototype,Ei=Function.prototype,za=Object.prototype,X=pn["__core-js_shared__"],Ae=Ei.toString,et=za.hasOwnProperty,It=(yl=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+yl:"",$t=za.toString,pr=RegExp("^"+Ae.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Er=ao?pn.Buffer:void 0,rn=pn.Symbol,Qr=pn.Uint8Array,Mn=za.propertyIsEnumerable,On=Io.splice,Xn=rn?rn.toStringTag:void 0,Ni=Object.getOwnPropertySymbols,ta=Er?Er.isBuffer:void 0,$n=(Rs=Object.keys,vl=Object,function(Ft){return Rs(vl(Ft))}),fa=Sa(pn,"DataView"),zi=Sa(pn,"Map"),Ma=Sa(pn,"Promise"),ss=Sa(pn,"Set"),Ks=Sa(pn,"WeakMap"),fu=Sa(Object,"create"),hu=Ro(fa),bl=Ro(zi),eo=Ro(Ma),du=Ro(ss),_l=Ro(Ks),Ra=rn?rn.prototype:void 0,wa=Ra?Ra.valueOf:void 0;function $a(Ft){var qt=-1,Ur=Ft==null?0:Ft.length;for(this.clear();++qt<Ur;){var nn=Ft[qt];this.set(nn[0],nn[1])}}function ba(Ft){var qt=-1,Ur=Ft==null?0:Ft.length;for(this.clear();++qt<Ur;){var nn=Ft[qt];this.set(nn[0],nn[1])}}function so(Ft){var qt=-1,Ur=Ft==null?0:Ft.length;for(this.clear();++qt<Ur;){var nn=Ft[qt];this.set(nn[0],nn[1])}}function zl(Ft){var qt=-1,Ur=Ft==null?0:Ft.length;for(this.__data__=new so;++qt<Ur;)this.add(Ft[qt])}function Wi(Ft){var qt=this.__data__=new ba(Ft);this.size=qt.size}function Uc(Ft,qt){var Ur=mu(Ft),nn=!Ur&&Zi(Ft),si=!Ur&&!nn&&vs(Ft),fn=!Ur&&!nn&&!si&&ql(Ft),Tn=Ur||nn||si||fn,Hn=Tn?(function(ra,ka){for(var Zo=-1,lo=Array(ra);++Zo<ra;)lo[Zo]=ka(Zo);return lo})(Ft.length,String):[],_i=Hn.length;for(var $i in Ft)!et.call(Ft,$i)||Tn&&($i=="length"||si&&($i=="offset"||$i=="parent")||fn&&($i=="buffer"||$i=="byteLength"||$i=="byteOffset")||Js($i,_i))||Hn.push($i);return Hn}function Mo(Ft,qt){for(var Ur=Ft.length;Ur--;)if(wl(Ft[Ur][0],qt))return Ur;return-1}function xl(Ft){return Ft==null?Ft===void 0?"[object Undefined]":"[object Null]":Xn&&Xn in Object(Ft)?(function(qt){var Ur=et.call(qt,Xn),nn=qt[Xn];try{qt[Xn]=void 0;var si=!0}catch{}var fn=$t.call(qt);return si&&(Ur?qt[Xn]=nn:delete qt[Xn]),fn})(Ft):(function(qt){return $t.call(qt)})(Ft)}function ha(Ft){return _s(Ft)&&xl(Ft)==St}function ls(Ft,qt,Ur,nn,si){return Ft===qt||(Ft==null||qt==null||!_s(Ft)&&!_s(qt)?Ft!=Ft&&qt!=qt:(function(fn,Tn,Hn,_i,$i,ra){var ka=mu(fn),Zo=mu(Tn),lo=ka?yt:Oa(fn),Os=Zo?yt:Oa(Tn),el=(lo=lo==St?Pn:lo)==Pn,Vl=(Os=Os==St?Pn:Os)==Pn,tl=lo==Os;if(tl&&vs(fn)){if(!vs(Tn))return!1;ka=!0,el=!1}if(tl&&!el)return ra||(ra=new Wi),ka||ql(fn)?Xs(fn,Tn,Hn,_i,$i,ra):(function(ri,xi,Vu,Ko,rl,uo,cs){switch(Vu){case Gn:if(ri.byteLength!=xi.byteLength||ri.byteOffset!=xi.byteOffset)return!1;ri=ri.buffer,xi=xi.buffer;case va:return!(ri.byteLength!=xi.byteLength||!uo(new Qr(ri),new Qr(xi)));case Bt:case xr:case Rr:return wl(+ri,+xi);case Ar:return ri.name==xi.name&&ri.message==xi.message;case dn:case ur:return ri==xi+"";case fr:var fs=Ws;case Yr:var El=1&Ko;if(fs||(fs=Zs),ri.size!=xi.size&&!El)return!1;var Gu=cs.get(ri);if(Gu)return Gu==xi;Ko|=2,cs.set(ri,xi);var xs=Xs(fs(ri),fs(xi),Ko,rl,uo,cs);return cs.delete(ri),xs;case Kr:if(wa)return wa.call(ri)==wa.call(xi)}return!1})(fn,Tn,lo,Hn,_i,$i,ra);if(!(1&Hn)){var Gl=el&&et.call(fn,"__wrapped__"),Sl=Vl&&et.call(Tn,"__wrapped__");if(Gl||Sl){var qu=Gl?fn.value():fn,gu=Sl?Tn.value():Tn;return ra||(ra=new Wi),$i(qu,gu,Hn,_i,ra)}}return tl?(ra||(ra=new Wi),(function(ri,xi,Vu,Ko,rl,uo){var cs=1&Vu,fs=Ys(ri),El=fs.length,Gu=Ys(xi).length;if(El!=Gu&&!cs)return!1;for(var xs=El;xs--;){var Oo=fs[xs];if(!(cs?Oo in xi:et.call(xi,Oo)))return!1}var cc=uo.get(ri);if(cc&&uo.get(xi))return cc==xi;var Cl=!0;uo.set(ri,xi),uo.set(xi,ri);for(var En=cs;++xs<El;){var La=ri[Oo=fs[xs]],yu=xi[Oo];if(Ko)var Hu=cs?Ko(yu,La,Oo,xi,ri,uo):Ko(La,yu,Oo,ri,xi,uo);if(!(Hu===void 0?La===yu||rl(La,yu,Vu,Ko,uo):Hu)){Cl=!1;break}En||(En=Oo=="constructor")}if(Cl&&!En){var ws=ri.constructor,Hl=xi.constructor;ws==Hl||!("constructor"in ri)||!("constructor"in xi)||typeof ws=="function"&&ws instanceof ws&&typeof Hl=="function"&&Hl instanceof Hl||(Cl=!1)}return uo.delete(ri),uo.delete(xi),Cl})(fn,Tn,Hn,_i,$i,ra)):!1})(Ft,qt,Ur,nn,ls,si))}function Uu(Ft){return!(!Ul(Ft)||(function(qt){return!!It&&It in qt})(Ft))&&(bs(Ft)?pr:aa).test(Ro(Ft))}function pu(Ft){if(Ur=(qt=Ft)&&qt.constructor,nn=typeof Ur=="function"&&Ur.prototype||za,qt!==nn)return $n(Ft);var qt,Ur,nn,si=[];for(var fn in Object(Ft))et.call(Ft,fn)&&fn!="constructor"&&si.push(fn);return si}function Xs(Ft,qt,Ur,nn,si,fn){var Tn=1&Ur,Hn=Ft.length,_i=qt.length;if(Hn!=_i&&!(Tn&&_i>Hn))return!1;var $i=fn.get(Ft);if($i&&fn.get(qt))return $i==qt;var ra=-1,ka=!0,Zo=2&Ur?new zl:void 0;for(fn.set(Ft,qt),fn.set(qt,Ft);++ra<Hn;){var lo=Ft[ra],Os=qt[ra];if(nn)var el=Tn?nn(Os,lo,ra,qt,Ft,fn):nn(lo,Os,ra,Ft,qt,fn);if(el!==void 0){if(el)continue;ka=!1;break}if(Zo){if(!gl(qt,(function(Vl,tl){if(Gl=tl,!Zo.has(Gl)&&(lo===Vl||si(lo,Vl,Ur,nn,fn)))return Zo.push(tl);var Gl}))){ka=!1;break}}else if(lo!==Os&&!si(lo,Os,Ur,nn,fn)){ka=!1;break}}return fn.delete(Ft),fn.delete(qt),ka}function Ys(Ft){return(function(qt,Ur,nn){var si=Ur(qt);return mu(qt)?si:(function(fn,Tn){for(var Hn=-1,_i=Tn.length,$i=fn.length;++Hn<_i;)fn[$i+Hn]=Tn[Hn];return fn})(si,nn(qt))})(Ft,Qs,us)}function Ua(Ft,qt){var Ur,nn,si=Ft.__data__;return((nn=typeof(Ur=qt))=="string"||nn=="number"||nn=="symbol"||nn=="boolean"?Ur!=="__proto__":Ur===null)?si[typeof qt=="string"?"string":"hash"]:si.map}function Sa(Ft,qt){var Ur=(function(nn,si){return nn?.[si]})(Ft,qt);return Uu(Ur)?Ur:void 0}$a.prototype.clear=function(){this.__data__=fu?fu(null):{},this.size=0},$a.prototype.delete=function(Ft){var qt=this.has(Ft)&&delete this.__data__[Ft];return this.size-=qt?1:0,qt},$a.prototype.get=function(Ft){var qt=this.__data__;if(fu){var Ur=qt[Ft];return Ur===Re?void 0:Ur}return et.call(qt,Ft)?qt[Ft]:void 0},$a.prototype.has=function(Ft){var qt=this.__data__;return fu?qt[Ft]!==void 0:et.call(qt,Ft)},$a.prototype.set=function(Ft,qt){var Ur=this.__data__;return this.size+=this.has(Ft)?0:1,Ur[Ft]=fu&&qt===void 0?Re:qt,this},ba.prototype.clear=function(){this.__data__=[],this.size=0},ba.prototype.delete=function(Ft){var qt=this.__data__,Ur=Mo(qt,Ft);return!(Ur<0)&&(Ur==qt.length-1?qt.pop():On.call(qt,Ur,1),--this.size,!0)},ba.prototype.get=function(Ft){var qt=this.__data__,Ur=Mo(qt,Ft);return Ur<0?void 0:qt[Ur][1]},ba.prototype.has=function(Ft){return Mo(this.__data__,Ft)>-1},ba.prototype.set=function(Ft,qt){var Ur=this.__data__,nn=Mo(Ur,Ft);return nn<0?(++this.size,Ur.push([Ft,qt])):Ur[nn][1]=qt,this},so.prototype.clear=function(){this.size=0,this.__data__={hash:new $a,map:new(zi||ba),string:new $a}},so.prototype.delete=function(Ft){var qt=Ua(this,Ft).delete(Ft);return this.size-=qt?1:0,qt},so.prototype.get=function(Ft){return Ua(this,Ft).get(Ft)},so.prototype.has=function(Ft){return Ua(this,Ft).has(Ft)},so.prototype.set=function(Ft,qt){var Ur=Ua(this,Ft),nn=Ur.size;return Ur.set(Ft,qt),this.size+=Ur.size==nn?0:1,this},zl.prototype.add=zl.prototype.push=function(Ft){return this.__data__.set(Ft,Re),this},zl.prototype.has=function(Ft){return this.__data__.has(Ft)},Wi.prototype.clear=function(){this.__data__=new ba,this.size=0},Wi.prototype.delete=function(Ft){var qt=this.__data__,Ur=qt.delete(Ft);return this.size=qt.size,Ur},Wi.prototype.get=function(Ft){return this.__data__.get(Ft)},Wi.prototype.has=function(Ft){return this.__data__.has(Ft)},Wi.prototype.set=function(Ft,qt){var Ur=this.__data__;if(Ur instanceof ba){var nn=Ur.__data__;if(!zi||nn.length<199)return nn.push([Ft,qt]),this.size=++Ur.size,this;Ur=this.__data__=new so(nn)}return Ur.set(Ft,qt),this.size=Ur.size,this};var us=Ni?function(Ft){return Ft==null?[]:(Ft=Object(Ft),(function(qt,Ur){for(var nn=-1,si=qt==null?0:qt.length,fn=0,Tn=[];++nn<si;){var Hn=qt[nn];Ur(Hn,nn,qt)&&(Tn[fn++]=Hn)}return Tn})(Ni(Ft),(function(qt){return Mn.call(Ft,qt)})))}:function(){return[]},Oa=xl;function Js(Ft,qt){return!!(qt=qt??dt)&&(typeof Ft=="number"||ja.test(Ft))&&Ft>-1&&Ft%1==0&&Ft<qt}function Ro(Ft){if(Ft!=null){try{return Ae.call(Ft)}catch{}try{return Ft+""}catch{}}return""}function wl(Ft,qt){return Ft===qt||Ft!=Ft&&qt!=qt}(fa&&Oa(new fa(new ArrayBuffer(1)))!=Gn||zi&&Oa(new zi)!=fr||Ma&&Oa(Ma.resolve())!=bi||ss&&Oa(new ss)!=Yr||Ks&&Oa(new Ks)!=bn)&&(Oa=function(Ft){var qt=xl(Ft),Ur=qt==Pn?Ft.constructor:void 0,nn=Ur?Ro(Ur):"";if(nn)switch(nn){case hu:return Gn;case bl:return fr;case eo:return bi;case du:return Yr;case _l:return bn}return qt});var Zi=ha((function(){return arguments})())?ha:function(Ft){return _s(Ft)&&et.call(Ft,"callee")&&!Mn.call(Ft,"callee")},mu=Array.isArray,vs=ta||function(){return!1};function bs(Ft){if(!Ul(Ft))return!1;var qt=xl(Ft);return qt==jr||qt=="[object GeneratorFunction]"||qt=="[object AsyncFunction]"||qt=="[object Proxy]"}function $l(Ft){return typeof Ft=="number"&&Ft>-1&&Ft%1==0&&Ft<=dt}function Ul(Ft){var qt=typeof Ft;return Ft!=null&&(qt=="object"||qt=="function")}function _s(Ft){return Ft!=null&&typeof Ft=="object"}var ql=Ms?(function(Ft){return function(qt){return Ft(qt)}})(Ms):function(Ft){return _s(Ft)&&$l(Ft.length)&&!!In[xl(Ft)]};function Qs(Ft){return(qt=Ft)!=null&&$l(qt.length)&&!bs(qt)?Uc(Ft):pu(Ft);var qt}U.exports=function(Ft,qt){return ls(Ft,qt)}})(ml,ml.exports);var Wo=n(ml.exports);function as(U,te){return U.length===te.length&&JSON.stringify(U.map((function(Re){return Re})).sort())===JSON.stringify(te.map((function(Re){return Re})).sort())}var ia={Polygon:$e,LineString:ke,Point:Ce,MultiPolygon:mt,MultiLineString:mt,MultiPoint:mt},cu=Object.freeze({__proto__:null,CommonSelectors:Ke,constrainFeatureMovement:Qi,createMidPoint:ir,createSupplementaryPoints:Pr,createVertex:Gt,doubleClickZoom:bt,euclideanDistance:Se,featuresAt:le,getFeatureAtAndSetCursors:ye,isClick:ge,isEventAtCoordinates:hi,isTap:xe,mapEventToBoundingBox:W,ModeHandler:r,moveFeatures:ea,sortFeatures:se,stringSetsAreEqual:as,StringSet:G,theme:Mt,toDenseArray:ut}),Bl=function(U,te){var Re={options:U=(function(St){St===void 0&&(St={});var yt=Ve(St);return St.controls||(yt.controls={}),St.displayControlsDefault===!1?yt.controls=Ve($c,St.controls):yt.controls=Ve(uc,St.controls),(yt=Ve(Hi,yt)).styles=Hs(yt.styles,"cold").concat(Hs(yt.styles,"hot")),yt})(U)};te=(function(St,yt){return yt.modes=O,yt.getFeatureIdsAt=function(Bt){return le.click({point:Bt},null,St).map((function(xr){return xr.properties.id}))},yt.getSelectedIds=function(){return St.store.getSelectedIds()},yt.getSelected=function(){return{type:T.FEATURE_COLLECTION,features:St.store.getSelectedIds().map((function(Bt){return St.store.get(Bt)})).map((function(Bt){return Bt.toGeoJSON()}))}},yt.getSelectedPoints=function(){return{type:T.FEATURE_COLLECTION,features:St.store.getSelectedCoordinates().map((function(Bt){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:Bt.coordinates}}}))}},yt.set=function(Bt){if(Bt.type===void 0||Bt.type!==T.FEATURE_COLLECTION||!Array.isArray(Bt.features))throw new Error("Invalid FeatureCollection");var xr=St.store.createRenderBatch(),Ar=St.store.getAllIds().slice(),jr=yt.add(Bt),fr=new G(jr);return(Ar=Ar.filter((function(Rr){return!fr.has(Rr)}))).length&&yt.delete(Ar),xr(),jr},yt.add=function(Bt){var xr=JSON.parse(JSON.stringify(en(Bt))).features.map((function(Ar){if(Ar.id=Ar.id||pe(),Ar.geometry===null)throw new Error("Invalid geometry: null");if(St.store.get(Ar.id)===void 0||St.store.get(Ar.id).type!==Ar.geometry.type){var jr=ia[Ar.geometry.type];if(jr===void 0)throw new Error("Invalid geometry type: "+Ar.geometry.type+".");var fr=new jr(St,Ar);St.store.add(fr)}else{var Rr=St.store.get(Ar.id);Rr.properties=Ar.properties,Wo(Rr.properties,Ar.properties)||St.store.featureChanged(Rr.id),Wo(Rr.getCoordinates(),Ar.geometry.coordinates)||Rr.incomingCoords(Ar.geometry.coordinates)}return Ar.id}));return St.store.render(),xr},yt.get=function(Bt){var xr=St.store.get(Bt);if(xr)return xr.toGeoJSON()},yt.getAll=function(){return{type:T.FEATURE_COLLECTION,features:St.store.getAll().map((function(Bt){return Bt.toGeoJSON()}))}},yt.delete=function(Bt){return St.store.delete(Bt,{silent:!0}),yt.getMode()!==O.DIRECT_SELECT||St.store.getSelectedIds().length?St.store.render():St.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}),yt},yt.deleteAll=function(){return St.store.delete(St.store.getAllIds(),{silent:!0}),yt.getMode()===O.DIRECT_SELECT?St.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}):St.store.render(),yt},yt.changeMode=function(Bt,xr){return xr===void 0&&(xr={}),Bt===O.SIMPLE_SELECT&&yt.getMode()===O.SIMPLE_SELECT?(as(xr.featureIds||[],St.store.getSelectedIds())||(St.store.setSelected(xr.featureIds,{silent:!0}),St.store.render()),yt):(Bt===O.DIRECT_SELECT&&yt.getMode()===O.DIRECT_SELECT&&xr.featureId===St.store.getSelectedIds()[0]||St.events.changeMode(Bt,xr,{silent:!0}),yt)},yt.getMode=function(){return St.events.getMode()},yt.trash=function(){return St.events.trash({silent:!0}),yt},yt.combineFeatures=function(){return St.events.combineFeatures({silent:!0}),yt},yt.uncombineFeatures=function(){return St.events.uncombineFeatures({silent:!0}),yt},yt.setFeatureProperty=function(Bt,xr,Ar){return St.store.setFeatureProperty(Bt,xr,Ar),yt},yt})(Re,te),Re.api=te;var dt=lt(Re);return te.onAdd=dt.onAdd,te.onRemove=dt.onRemove,te.types=P,te.options=U,te};function jl(U){Bl(U,this)}return jl.modes=uu,jl.constants=Z,jl.lib=cu,jl}))})(T_)),T_.exports}var zue=jue();const pD=Us(zue);function $ue(){const e=zu(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const Uue=e=>{const t=M.useRef(null),r=P0({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=M.useRef(!1),[i,o]=M.useState(!1),[u,a]=M.useState(),p=$ue(),d=M.useCallback(m=>{console.log("MlFeatureEditor mode change to "+m.mode),typeof e.onFinish=="function"&&m.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return M.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new pD({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},pD.modes),userProperties:!0,styles:p}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",d,r.componentId),o(!0))},[r.map,e,n,d]),M.useEffect(()=>{if(!r.map||!i||!t.current)return;const m=v=>{const w=v?.features||[];a(w),e.onChange&&e.onChange(w)};return r.map.on("draw.create",m,r.componentId),r.map.on("draw.update",m,r.componentId),r.map.on("draw.delete",m,r.componentId),()=>{r.map&&(r.map.map.off("draw.create",m),r.map.map.off("draw.update",m),r.map.map.off("draw.delete",m))}},[i,r.map,e.onChange]),M.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),M.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:u,drawToolsReady:i,draw:t.current}},I_=e=>(Uue({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),ze.jsx(ze.Fragment,{}));I_.__docgenInfo={description:"",methods:[],displayName:"MlFeatureEditor",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`},geojson:{required:!1,tsType:{name:"Feature"},description:"Input GeoJson data at initialization"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(para: Feature[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Feature"}],raw:"Feature[]"},name:"para"}],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`},onFinish:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`},mode:{required:!1,tsType:{name:"MapboxDraw.Modes"},description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`}}};const mD=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function que(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function Vue(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function QP(e){const t=P0({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=M.useRef(""),n=M.useRef(""),i=M.useRef(""),[o,u]=M.useState(),a=M.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),p=M.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...que(e),id:a.current},Vue(e,t),t.componentId)}catch(v){console.error("Failed to add layer:",v)}u(()=>t.map?.map.getLayer(a.current));const d=()=>{t.map?.map.getLayer(a.current)||p()};t.map.on("styledata",d,t.componentId);const m=(v,w,{source_id:x})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===x&&p()};t.map.wrapper.on("addsource",m,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return M.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(mD.indexOf(e.options.type)===-1||mD.indexOf(e.options.type)!==-1&&e.options.type===r.current)||p())},[t.map,t.mapIsReady,e,p]),M.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),M.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let d;const m=JSON.stringify(e.options.layout);if(e.options.layout&&m!==i.current){const w=JSON.parse(i.current);for(d in e.options.layout)e.options.layout?.[d]&&e.options.layout[d]!==w[d]&&t.map.map.setLayoutProperty(a.current,d,e.options.layout[d]);i.current=m}const v=JSON.stringify(e.options.paint);if(v!==n.current){const w=JSON.parse(n.current);for(d in e.options.paint)e.options.paint?.[d]&&e.options.paint[d]!==w[d]&&t.map.map.setPaintProperty(a.current,d,e.options.paint[d]);n.current=v}},[e.options,t.map]),M.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),M.useEffect(()=>()=>{t.cleanup()},[]),M.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const d=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&p()};t.map.on("sourcedataloading",d);const m=(v,w,{source_id:x})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===x&&p()};return t.map.wrapper.on("addsource",m),()=>{t?.map&&(t.map.off("sourcedataloading",d),t.map.wrapper.off("addsource",m))}},[t.map,e.options?.source]),M.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onClick;return t.map?.on("click",a.current,d),()=>{d&&t?.map&&t.map?.off("click",a.current,d)}},[t.map,e.onClick]),M.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onHover;return t.map?.on("mousemove",a.current,d),()=>{d&&t?.map&&t.map?.off("mousemove",a.current,d)}},[t.map,e.onHover]),M.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const d=e.onLeave;return t.map?.on("mouseleave",a.current,d),()=>{d&&t?.map&&t.map?.off("mouseleave",a.current,d)}},[t.map,e.onLeave]),{map:t.map,layer:o,layerId:a.current,componentId:t.componentId,mapHook:t}}QP.defaultProps={};const Gue=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},gD={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},$U=e=>e?.type==="Feature"?gD?.[e?.geometry?.type]?gD[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?$U(e.features[0]):"circle":"fill";function Hue(e){const t=P0({mapId:e.mapId}),[r,n]=M.useState(),i=M.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),o=M.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,p]of Object.entries(t.map.style._layers))p.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),u=M.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&o(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,o]);return M.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),M.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,u())},[t.map,e,u]),M.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||u()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,u]),M.useEffect(()=>()=>{o()},[o]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const Ev=e=>{const t=e.type||$U(e.geojson),r=M.useRef(e.layerId||"MlGeoJsonLayer-"+Jv()),n=`label-${r.current}`;return M.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+Jv()},[e.layerId]),Hue({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),QP({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||Gue(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),QP({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),ze.jsx(ze.Fragment,{})};Ev.__docgenInfo={description:`Adds source and layer to display GeoJSON data on the map.

@component`,methods:[],displayName:"MlGeoJsonLayer",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`},layerId:{required:!1,tsType:{name:"string"},description:"Id of the new layer and source that are added to the MapLibre instance"},geojson:{required:!1,tsType:{name:"union",raw:"Feature | FeatureCollection | undefined",elements:[{name:"Feature"},{name:"FeatureCollection"},{name:"undefined"}]},description:"GeoJSON data that is supposed to be rendered by this component."},type:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['type']",raw:"LayerSpecification['type']"},{name:"RasterLayerSpecification['type']",raw:"RasterLayerSpecification['type']"}],raw:"Exclude<LayerSpecification['type'], RasterLayerSpecification['type']>"},description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`},paint:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['paint']",raw:"LayerSpecification['paint']"},{name:"RasterLayerSpecification['paint']",raw:"RasterLayerSpecification['paint']"}],raw:"Exclude<LayerSpecification['paint'], RasterLayerSpecification['paint']>"},description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`},layout:{required:!1,tsType:{name:"LayerSpecification['layout']",raw:"LayerSpecification['layout']"},description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`},options:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Javascript object that is spread into the addLayer commands first parameter."},defaultPaintOverrides:{required:!1,tsType:{name:"signature",type:"object",raw:`{
	circle?: CircleLayerSpecification['paint'];
	fill?: FillLayerSpecification['paint'];
	line?: LineLayerSpecification['paint'];
}`,signature:{properties:[{key:"circle",value:{name:"CircleLayerSpecification['paint']",raw:"CircleLayerSpecification['paint']",required:!1}},{key:"fill",value:{name:"FillLayerSpecification['paint']",raw:"FillLayerSpecification['paint']",required:!1}},{key:"line",value:{name:"LineLayerSpecification['paint']",raw:"LineLayerSpecification['paint']",required:!1}}]}},description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.'},labelProp:{required:!1,tsType:{name:"string"},description:"Property name in the GeoJSON object to be used as a label."},labelOptions:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Label configuration options."},onHover:{required:!1,tsType:{name:"useLayerProps['onHover']",raw:"useLayerProps['onHover']"},description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered."},onClick:{required:!1,tsType:{name:"useLayerProps['onClick']",raw:"useLayerProps['onClick']"},description:"Click event handler that is executed whenever a geometry rendered by this component is clicked."},onLeave:{required:!1,tsType:{name:"useLayerProps['onLeave']",raw:"useLayerProps['onLeave']"},description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`}}};er(M0)({marginTop:"15px"});const UU=yi(ze.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Wue=yi(ze.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));_p(bI)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});_p(R0)({minWidth:"30px"});_p(Go)({marginRight:"0px",padding:"0px"});_p(I9)({padding:0,marginRight:"5px"});_p(LJ)(({open:e})=>({display:e?"block":"none"}));_p(M0)({marginLeft:"50px"});var Kl={},mm={},a5,yD;function qU(){if(yD)return a5;yD=1;var e=typeof qh=="object"&&qh&&qh.Object===Object&&qh;return a5=e,a5}var o5,vD;function Cf(){if(vD)return o5;vD=1;var e=qU(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return o5=r,o5}var s5,bD;function Tg(){if(bD)return s5;bD=1;var e=Cf(),t=e.Symbol;return s5=t,s5}var l5,_D;function Zue(){if(_D)return l5;_D=1;var e=Tg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(u){var a=r.call(u,i),p=u[i];try{u[i]=void 0;var d=!0}catch{}var m=n.call(u);return d&&(a?u[i]=p:delete u[i]),m}return l5=o,l5}var u5,xD;function Kue(){if(xD)return u5;xD=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return u5=r,u5}var c5,wD;function Ep(){if(wD)return c5;wD=1;var e=Tg(),t=Zue(),r=Kue(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function u(a){return a==null?a===void 0?i:n:o&&o in Object(a)?t(a):r(a)}return c5=u,c5}var f5,SD;function $u(){if(SD)return f5;SD=1;var e=Array.isArray;return f5=e,f5}var h5,ED;function Af(){if(ED)return h5;ED=1;function e(t){return t!=null&&typeof t=="object"}return h5=e,h5}var d5,CD;function Xue(){if(CD)return d5;CD=1;var e=Ep(),t=$u(),r=Af(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return d5=i,d5}var p5,AD;function Yue(){if(AD)return p5;AD=1;function e(t){return function(r,n,i){for(var o=-1,u=Object(r),a=i(r),p=a.length;p--;){var d=a[t?p:++o];if(n(u[d],d,u)===!1)break}return r}}return p5=e,p5}var m5,PD;function VU(){if(PD)return m5;PD=1;var e=Yue(),t=e();return m5=t,m5}var g5,TD;function Jue(){if(TD)return g5;TD=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return g5=e,g5}var y5,ID;function Que(){if(ID)return y5;ID=1;var e=Ep(),t=Af(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return y5=n,y5}var v5,MD;function Ux(){if(MD)return v5;MD=1;var e=Que(),t=Af(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(u){return t(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return v5=o,v5}var iv={exports:{}},b5,RD;function ece(){if(RD)return b5;RD=1;function e(){return!1}return b5=e,b5}iv.exports;var OD;function qx(){return OD||(OD=1,(function(e,t){var r=Cf(),n=ece(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,d=p||n;e.exports=d})(iv,iv.exports)),iv.exports}var _5,kD;function Ig(){if(kD)return _5;kD=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return _5=r,_5}var x5,LD;function OI(){if(LD)return x5;LD=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return x5=t,x5}var w5,DD;function tce(){if(DD)return w5;DD=1;var e=Ep(),t=OI(),r=Af(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",u="[object Date]",a="[object Error]",p="[object Function]",d="[object Map]",m="[object Number]",v="[object Object]",w="[object RegExp]",x="[object Set]",P="[object String]",T="[object WeakMap]",O="[object ArrayBuffer]",L="[object DataView]",N="[object Float32Array]",F="[object Float64Array]",D="[object Int8Array]",q="[object Int16Array]",z="[object Int32Array]",Z="[object Uint8Array]",Q="[object Uint8ClampedArray]",Y="[object Uint16Array]",se="[object Uint32Array]",W={};W[N]=W[F]=W[D]=W[q]=W[z]=W[Z]=W[Q]=W[Y]=W[se]=!0,W[n]=W[i]=W[O]=W[o]=W[L]=W[u]=W[a]=W[p]=W[d]=W[m]=W[v]=W[w]=W[x]=W[P]=W[T]=!1;function G(ae){return r(ae)&&t(ae.length)&&!!W[e(ae)]}return w5=G,w5}var S5,ND;function kI(){if(ND)return S5;ND=1;function e(t){return function(r){return t(r)}}return S5=e,S5}var av={exports:{}};av.exports;var FD;function LI(){return FD||(FD=1,(function(e,t){var r=qU(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(av,av.exports)),av.exports}var E5,BD;function DI(){if(BD)return E5;BD=1;var e=tce(),t=kI(),r=LI(),n=r&&r.isTypedArray,i=n?t(n):e;return E5=i,E5}var C5,jD;function GU(){if(jD)return C5;jD=1;var e=Jue(),t=Ux(),r=$u(),n=qx(),i=Ig(),o=DI(),u=Object.prototype,a=u.hasOwnProperty;function p(d,m){var v=r(d),w=!v&&t(d),x=!v&&!w&&n(d),P=!v&&!w&&!x&&o(d),T=v||w||x||P,O=T?e(d.length,String):[],L=O.length;for(var N in d)(m||a.call(d,N))&&!(T&&(N=="length"||x&&(N=="offset"||N=="parent")||P&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,L)))&&O.push(N);return O}return C5=p,C5}var A5,zD;function NI(){if(zD)return A5;zD=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return A5=t,A5}var P5,$D;function HU(){if($D)return P5;$D=1;function e(t,r){return function(n){return t(r(n))}}return P5=e,P5}var T5,UD;function rce(){if(UD)return T5;UD=1;var e=HU(),t=e(Object.keys,Object);return T5=t,T5}var I5,qD;function nce(){if(qD)return I5;qD=1;var e=NI(),t=rce(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var u=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&u.push(a);return u}return I5=i,I5}var M5,VD;function Pf(){if(VD)return M5;VD=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return M5=e,M5}var R5,GD;function FI(){if(GD)return R5;GD=1;var e=Ep(),t=Pf(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function u(a){if(!t(a))return!1;var p=e(a);return p==n||p==i||p==r||p==o}return R5=u,R5}var O5,HD;function Mg(){if(HD)return O5;HD=1;var e=FI(),t=OI();function r(n){return n!=null&&t(n.length)&&!e(n)}return O5=r,O5}var k5,WD;function k0(){if(WD)return k5;WD=1;var e=GU(),t=nce(),r=Mg();function n(i){return r(i)?e(i):t(i)}return k5=n,k5}var L5,ZD;function WU(){if(ZD)return L5;ZD=1;var e=VU(),t=k0();function r(n,i){return n&&e(n,i,t)}return L5=r,L5}var D5,KD;function Vx(){if(KD)return D5;KD=1;function e(t){return t}return D5=e,D5}var N5,XD;function ice(){if(XD)return N5;XD=1;var e=Vx();function t(r){return typeof r=="function"?r:e}return N5=t,N5}var F5,YD;function BI(){if(YD)return F5;YD=1;var e=WU(),t=ice();function r(n,i){return n&&e(n,t(i))}return F5=r,F5}var B5,JD;function jI(){if(JD)return B5;JD=1;var e=HU(),t=e(Object.getPrototypeOf,Object);return B5=t,B5}var j5,QD;function ZU(){if(QD)return j5;QD=1;var e=Ep(),t=jI(),r=Af(),n="[object Object]",i=Function.prototype,o=Object.prototype,u=i.toString,a=o.hasOwnProperty,p=u.call(Object);function d(m){if(!r(m)||e(m)!=n)return!1;var v=t(m);if(v===null)return!0;var w=a.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&u.call(w)==p}return j5=d,j5}var z5,e6;function zI(){if(e6)return z5;e6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return z5=e,z5}var $5,t6;function ace(){if(t6)return $5;t6=1;function e(){this.__data__=[],this.size=0}return $5=e,$5}var U5,r6;function Rg(){if(r6)return U5;r6=1;function e(t,r){return t===r||t!==t&&r!==r}return U5=e,U5}var q5,n6;function Gx(){if(n6)return q5;n6=1;var e=Rg();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return q5=t,q5}var V5,i6;function oce(){if(i6)return V5;i6=1;var e=Gx(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,u=e(o,i);if(u<0)return!1;var a=o.length-1;return u==a?o.pop():r.call(o,u,1),--this.size,!0}return V5=n,V5}var G5,a6;function sce(){if(a6)return G5;a6=1;var e=Gx();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return G5=t,G5}var H5,o6;function lce(){if(o6)return H5;o6=1;var e=Gx();function t(r){return e(this.__data__,r)>-1}return H5=t,H5}var W5,s6;function uce(){if(s6)return W5;s6=1;var e=Gx();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return W5=t,W5}var Z5,l6;function Hx(){if(l6)return Z5;l6=1;var e=ace(),t=oce(),r=sce(),n=lce(),i=uce();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Z5=o,Z5}var K5,u6;function cce(){if(u6)return K5;u6=1;var e=Hx();function t(){this.__data__=new e,this.size=0}return K5=t,K5}var X5,c6;function fce(){if(c6)return X5;c6=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return X5=e,X5}var Y5,f6;function hce(){if(f6)return Y5;f6=1;function e(t){return this.__data__.get(t)}return Y5=e,Y5}var J5,h6;function dce(){if(h6)return J5;h6=1;function e(t){return this.__data__.has(t)}return J5=e,J5}var Q5,d6;function pce(){if(d6)return Q5;d6=1;var e=Cf(),t=e["__core-js_shared__"];return Q5=t,Q5}var eS,p6;function mce(){if(p6)return eS;p6=1;var e=pce(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return eS=r,eS}var tS,m6;function KU(){if(m6)return tS;m6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return tS=r,tS}var rS,g6;function gce(){if(g6)return rS;g6=1;var e=FI(),t=mce(),r=Pf(),n=KU(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,u=Function.prototype,a=Object.prototype,p=u.toString,d=a.hasOwnProperty,m=RegExp("^"+p.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(w){if(!r(w)||t(w))return!1;var x=e(w)?m:o;return x.test(n(w))}return rS=v,rS}var nS,y6;function yce(){if(y6)return nS;y6=1;function e(t,r){return t?.[r]}return nS=e,nS}var iS,v6;function Cp(){if(v6)return iS;v6=1;var e=gce(),t=yce();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return iS=r,iS}var aS,b6;function $I(){if(b6)return aS;b6=1;var e=Cp(),t=Cf(),r=e(t,"Map");return aS=r,aS}var oS,_6;function Wx(){if(_6)return oS;_6=1;var e=Cp(),t=e(Object,"create");return oS=t,oS}var sS,x6;function vce(){if(x6)return sS;x6=1;var e=Wx();function t(){this.__data__=e?e(null):{},this.size=0}return sS=t,sS}var lS,w6;function bce(){if(w6)return lS;w6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return lS=e,lS}var uS,S6;function _ce(){if(S6)return uS;S6=1;var e=Wx(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var u=this.__data__;if(e){var a=u[o];return a===t?void 0:a}return n.call(u,o)?u[o]:void 0}return uS=i,uS}var cS,E6;function xce(){if(E6)return cS;E6=1;var e=Wx(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return cS=n,cS}var fS,C6;function wce(){if(C6)return fS;C6=1;var e=Wx(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return fS=r,fS}var hS,A6;function Sce(){if(A6)return hS;A6=1;var e=vce(),t=bce(),r=_ce(),n=xce(),i=wce();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,hS=o,hS}var dS,P6;function Ece(){if(P6)return dS;P6=1;var e=Sce(),t=Hx(),r=$I();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return dS=n,dS}var pS,T6;function Cce(){if(T6)return pS;T6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return pS=e,pS}var mS,I6;function Zx(){if(I6)return mS;I6=1;var e=Cce();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return mS=t,mS}var gS,M6;function Ace(){if(M6)return gS;M6=1;var e=Zx();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return gS=t,gS}var yS,R6;function Pce(){if(R6)return yS;R6=1;var e=Zx();function t(r){return e(this,r).get(r)}return yS=t,yS}var vS,O6;function Tce(){if(O6)return vS;O6=1;var e=Zx();function t(r){return e(this,r).has(r)}return vS=t,vS}var bS,k6;function Ice(){if(k6)return bS;k6=1;var e=Zx();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return bS=t,bS}var _S,L6;function UI(){if(L6)return _S;L6=1;var e=Ece(),t=Ace(),r=Pce(),n=Tce(),i=Ice();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var d=u[a];this.set(d[0],d[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,_S=o,_S}var xS,D6;function Mce(){if(D6)return xS;D6=1;var e=Hx(),t=$I(),r=UI(),n=200;function i(o,u){var a=this.__data__;if(a instanceof e){var p=a.__data__;if(!t||p.length<n-1)return p.push([o,u]),this.size=++a.size,this;a=this.__data__=new r(p)}return a.set(o,u),this.size=a.size,this}return xS=i,xS}var wS,N6;function Kx(){if(N6)return wS;N6=1;var e=Hx(),t=cce(),r=fce(),n=hce(),i=dce(),o=Mce();function u(a){var p=this.__data__=new e(a);this.size=p.size}return u.prototype.clear=t,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,wS=u,wS}var SS,F6;function Rce(){if(F6)return SS;F6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return SS=t,SS}var ES,B6;function Oce(){if(B6)return ES;B6=1;function e(t){return this.__data__.has(t)}return ES=e,ES}var CS,j6;function kce(){if(j6)return CS;j6=1;var e=UI(),t=Rce(),r=Oce();function n(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new e;++o<u;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,CS=n,CS}var AS,z6;function Lce(){if(z6)return AS;z6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return AS=e,AS}var PS,$6;function Dce(){if($6)return PS;$6=1;function e(t,r){return t.has(r)}return PS=e,PS}var TS,U6;function XU(){if(U6)return TS;U6=1;var e=kce(),t=Lce(),r=Dce(),n=1,i=2;function o(u,a,p,d,m,v){var w=p&n,x=u.length,P=a.length;if(x!=P&&!(w&&P>x))return!1;var T=v.get(u),O=v.get(a);if(T&&O)return T==a&&O==u;var L=-1,N=!0,F=p&i?new e:void 0;for(v.set(u,a),v.set(a,u);++L<x;){var D=u[L],q=a[L];if(d)var z=w?d(q,D,L,a,u,v):d(D,q,L,u,a,v);if(z!==void 0){if(z)continue;N=!1;break}if(F){if(!t(a,function(Z,Q){if(!r(F,Q)&&(D===Z||m(D,Z,p,d,v)))return F.push(Q)})){N=!1;break}}else if(!(D===q||m(D,q,p,d,v))){N=!1;break}}return v.delete(u),v.delete(a),N}return TS=o,TS}var IS,q6;function YU(){if(q6)return IS;q6=1;var e=Cf(),t=e.Uint8Array;return IS=t,IS}var MS,V6;function Nce(){if(V6)return MS;V6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return MS=e,MS}var RS,G6;function Fce(){if(G6)return RS;G6=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return RS=e,RS}var OS,H6;function Bce(){if(H6)return OS;H6=1;var e=Tg(),t=YU(),r=Rg(),n=XU(),i=Nce(),o=Fce(),u=1,a=2,p="[object Boolean]",d="[object Date]",m="[object Error]",v="[object Map]",w="[object Number]",x="[object RegExp]",P="[object Set]",T="[object String]",O="[object Symbol]",L="[object ArrayBuffer]",N="[object DataView]",F=e?e.prototype:void 0,D=F?F.valueOf:void 0;function q(z,Z,Q,Y,se,W,G){switch(Q){case N:if(z.byteLength!=Z.byteLength||z.byteOffset!=Z.byteOffset)return!1;z=z.buffer,Z=Z.buffer;case L:return!(z.byteLength!=Z.byteLength||!W(new t(z),new t(Z)));case p:case d:case w:return r(+z,+Z);case m:return z.name==Z.name&&z.message==Z.message;case x:case T:return z==Z+"";case v:var ae=i;case P:var le=Y&u;if(ae||(ae=o),z.size!=Z.size&&!le)return!1;var ue=G.get(z);if(ue)return ue==Z;Y|=a,G.set(z,Z);var ye=n(ae(z),ae(Z),Y,se,W,G);return G.delete(z),ye;case O:if(D)return D.call(z)==D.call(Z)}return!1}return OS=q,OS}var kS,W6;function qI(){if(W6)return kS;W6=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return kS=e,kS}var LS,Z6;function JU(){if(Z6)return LS;Z6=1;var e=qI(),t=$u();function r(n,i,o){var u=i(n);return t(n)?u:e(u,o(n))}return LS=r,LS}var DS,K6;function jce(){if(K6)return DS;K6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,u=[];++n<i;){var a=t[n];r(a,n,t)&&(u[o++]=a)}return u}return DS=e,DS}var NS,X6;function QU(){if(X6)return NS;X6=1;function e(){return[]}return NS=e,NS}var FS,Y6;function VI(){if(Y6)return FS;Y6=1;var e=jce(),t=QU(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(u){return u==null?[]:(u=Object(u),e(i(u),function(a){return n.call(u,a)}))}:t;return FS=o,FS}var BS,J6;function eq(){if(J6)return BS;J6=1;var e=JU(),t=VI(),r=k0();function n(i){return e(i,r,t)}return BS=n,BS}var jS,Q6;function zce(){if(Q6)return jS;Q6=1;var e=eq(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a,p,d,m){var v=a&t,w=e(o),x=w.length,P=e(u),T=P.length;if(x!=T&&!v)return!1;for(var O=x;O--;){var L=w[O];if(!(v?L in u:n.call(u,L)))return!1}var N=m.get(o),F=m.get(u);if(N&&F)return N==u&&F==o;var D=!0;m.set(o,u),m.set(u,o);for(var q=v;++O<x;){L=w[O];var z=o[L],Z=u[L];if(p)var Q=v?p(Z,z,L,u,o,m):p(z,Z,L,o,u,m);if(!(Q===void 0?z===Z||d(z,Z,a,p,m):Q)){D=!1;break}q||(q=L=="constructor")}if(D&&!q){var Y=o.constructor,se=u.constructor;Y!=se&&"constructor"in o&&"constructor"in u&&!(typeof Y=="function"&&Y instanceof Y&&typeof se=="function"&&se instanceof se)&&(D=!1)}return m.delete(o),m.delete(u),D}return jS=i,jS}var zS,eN;function $ce(){if(eN)return zS;eN=1;var e=Cp(),t=Cf(),r=e(t,"DataView");return zS=r,zS}var $S,tN;function Uce(){if(tN)return $S;tN=1;var e=Cp(),t=Cf(),r=e(t,"Promise");return $S=r,$S}var US,rN;function qce(){if(rN)return US;rN=1;var e=Cp(),t=Cf(),r=e(t,"Set");return US=r,US}var qS,nN;function Vce(){if(nN)return qS;nN=1;var e=Cp(),t=Cf(),r=e(t,"WeakMap");return qS=r,qS}var VS,iN;function Xx(){if(iN)return VS;iN=1;var e=$ce(),t=$I(),r=Uce(),n=qce(),i=Vce(),o=Ep(),u=KU(),a="[object Map]",p="[object Object]",d="[object Promise]",m="[object Set]",v="[object WeakMap]",w="[object DataView]",x=u(e),P=u(t),T=u(r),O=u(n),L=u(i),N=o;return(e&&N(new e(new ArrayBuffer(1)))!=w||t&&N(new t)!=a||r&&N(r.resolve())!=d||n&&N(new n)!=m||i&&N(new i)!=v)&&(N=function(F){var D=o(F),q=D==p?F.constructor:void 0,z=q?u(q):"";if(z)switch(z){case x:return w;case P:return a;case T:return d;case O:return m;case L:return v}return D}),VS=N,VS}var GS,aN;function Gce(){if(aN)return GS;aN=1;var e=Kx(),t=XU(),r=Bce(),n=zce(),i=Xx(),o=$u(),u=qx(),a=DI(),p=1,d="[object Arguments]",m="[object Array]",v="[object Object]",w=Object.prototype,x=w.hasOwnProperty;function P(T,O,L,N,F,D){var q=o(T),z=o(O),Z=q?m:i(T),Q=z?m:i(O);Z=Z==d?v:Z,Q=Q==d?v:Q;var Y=Z==v,se=Q==v,W=Z==Q;if(W&&u(T)){if(!u(O))return!1;q=!0,Y=!1}if(W&&!Y)return D||(D=new e),q||a(T)?t(T,O,L,N,F,D):r(T,O,Z,L,N,F,D);if(!(L&p)){var G=Y&&x.call(T,"__wrapped__"),ae=se&&x.call(O,"__wrapped__");if(G||ae){var le=G?T.value():T,ue=ae?O.value():O;return D||(D=new e),F(le,ue,L,N,D)}}return W?(D||(D=new e),n(T,O,L,N,F,D)):!1}return GS=P,GS}var HS,oN;function GI(){if(oN)return HS;oN=1;var e=Gce(),t=Af();function r(n,i,o,u,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,u,r,a)}return HS=r,HS}var WS,sN;function Hce(){if(sN)return WS;sN=1;var e=Kx(),t=GI(),r=1,n=2;function i(o,u,a,p){var d=a.length,m=d,v=!p;if(o==null)return!m;for(o=Object(o);d--;){var w=a[d];if(v&&w[2]?w[1]!==o[w[0]]:!(w[0]in o))return!1}for(;++d<m;){w=a[d];var x=w[0],P=o[x],T=w[1];if(v&&w[2]){if(P===void 0&&!(x in o))return!1}else{var O=new e;if(p)var L=p(P,T,x,o,u,O);if(!(L===void 0?t(T,P,r|n,p,O):L))return!1}}return!0}return WS=i,WS}var ZS,lN;function tq(){if(lN)return ZS;lN=1;var e=Pf();function t(r){return r===r&&!e(r)}return ZS=t,ZS}var KS,uN;function Wce(){if(uN)return KS;uN=1;var e=tq(),t=k0();function r(n){for(var i=t(n),o=i.length;o--;){var u=i[o],a=n[u];i[o]=[u,a,e(a)]}return i}return KS=r,KS}var XS,cN;function rq(){if(cN)return XS;cN=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return XS=e,XS}var YS,fN;function Zce(){if(fN)return YS;fN=1;var e=Hce(),t=Wce(),r=rq();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(u){return u===i||e(u,i,o)}}return YS=n,YS}var JS,hN;function Yx(){if(hN)return JS;hN=1;var e=Ep(),t=Af(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return JS=n,JS}var QS,dN;function HI(){if(dN)return QS;dN=1;var e=$u(),t=Yx(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,u){if(e(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||u!=null&&o in Object(u)}return QS=i,QS}var eE,pN;function nq(){if(pN)return eE;pN=1;var e=UI(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var u=arguments,a=i?i.apply(this,u):u[0],p=o.cache;if(p.has(a))return p.get(a);var d=n.apply(this,u);return o.cache=p.set(a,d)||p,d};return o.cache=new(r.Cache||e),o}return r.Cache=e,eE=r,eE}var tE,mN;function Kce(){if(mN)return tE;mN=1;var e=nq(),t=500;function r(n){var i=e(n,function(u){return o.size===t&&o.clear(),u}),o=i.cache;return i}return tE=r,tE}var rE,gN;function Xce(){if(gN)return rE;gN=1;var e=Kce(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(u,a,p,d){o.push(p?d.replace(r,"$1"):a||u)}),o});return rE=n,rE}var nE,yN;function Yce(){if(yN)return nE;yN=1;var e=Tg(),t=zI(),r=$u(),n=Yx(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function u(a){if(typeof a=="string")return a;if(r(a))return t(a,u)+"";if(n(a))return o?o.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}return nE=u,nE}var iE,vN;function Jce(){if(vN)return iE;vN=1;var e=Yce();function t(r){return r==null?"":e(r)}return iE=t,iE}var aE,bN;function L0(){if(bN)return aE;bN=1;var e=$u(),t=HI(),r=Xce(),n=Jce();function i(o,u){return e(o)?o:t(o,u)?[o]:r(n(o))}return aE=i,aE}var oE,_N;function Og(){if(_N)return oE;_N=1;var e=Yx();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return oE=t,oE}var sE,xN;function Jx(){if(xN)return sE;xN=1;var e=L0(),t=Og();function r(n,i){i=e(i,n);for(var o=0,u=i.length;n!=null&&o<u;)n=n[t(i[o++])];return o&&o==u?n:void 0}return sE=r,sE}var lE,wN;function WI(){if(wN)return lE;wN=1;var e=Jx();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return lE=t,lE}var uE,SN;function Qce(){if(SN)return uE;SN=1;function e(t,r){return t!=null&&r in Object(t)}return uE=e,uE}var cE,EN;function efe(){if(EN)return cE;EN=1;var e=L0(),t=Ux(),r=$u(),n=Ig(),i=OI(),o=Og();function u(a,p,d){p=e(p,a);for(var m=-1,v=p.length,w=!1;++m<v;){var x=o(p[m]);if(!(w=a!=null&&d(a,x)))break;a=a[x]}return w||++m!=v?w:(v=a==null?0:a.length,!!v&&i(v)&&n(x,v)&&(r(a)||t(a)))}return cE=u,cE}var fE,CN;function iq(){if(CN)return fE;CN=1;var e=Qce(),t=efe();function r(n,i){return n!=null&&t(n,i,e)}return fE=r,fE}var hE,AN;function tfe(){if(AN)return hE;AN=1;var e=GI(),t=WI(),r=iq(),n=HI(),i=tq(),o=rq(),u=Og(),a=1,p=2;function d(m,v){return n(m)&&i(v)?o(u(m),v):function(w){var x=t(w,m);return x===void 0&&x===v?r(w,m):e(v,x,a|p)}}return hE=d,hE}var dE,PN;function rfe(){if(PN)return dE;PN=1;function e(t){return function(r){return r?.[t]}}return dE=e,dE}var pE,TN;function nfe(){if(TN)return pE;TN=1;var e=Jx();function t(r){return function(n){return e(n,r)}}return pE=t,pE}var mE,IN;function ife(){if(IN)return mE;IN=1;var e=rfe(),t=nfe(),r=HI(),n=Og();function i(o){return r(o)?e(n(o)):t(o)}return mE=i,mE}var gE,MN;function afe(){if(MN)return gE;MN=1;var e=Zce(),t=tfe(),r=Vx(),n=$u(),i=ife();function o(u){return typeof u=="function"?u:u==null?r:typeof u=="object"?n(u)?t(u[0],u[1]):e(u):i(u)}return gE=o,gE}var yE,RN;function ofe(){if(RN)return yE;RN=1;var e=Mg();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var u=i.length,a=n?u:-1,p=Object(i);(n?a--:++a<u)&&o(p[a],a,p)!==!1;);return i}}return yE=t,yE}var vE,ON;function sfe(){if(ON)return vE;ON=1;var e=WU(),t=ofe(),r=t(e);return vE=r,vE}var bE,kN;function lfe(){if(kN)return bE;kN=1;var e=sfe(),t=Mg();function r(n,i){var o=-1,u=t(n)?Array(n.length):[];return e(n,function(a,p,d){u[++o]=i(a,p,d)}),u}return bE=r,bE}var _E,LN;function ufe(){if(LN)return _E;LN=1;var e=zI(),t=afe(),r=lfe(),n=$u();function i(o,u){var a=n(o)?e:r;return a(o,t(u,3))}return _E=i,_E}var DN;function cfe(){if(DN)return mm;DN=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.flattenNames=void 0;var e=Xue(),t=p(e),r=BI(),n=p(r),i=ZU(),o=p(i),u=ufe(),a=p(u);function p(m){return m&&m.__esModule?m:{default:m}}var d=mm.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=[];return(0,a.default)(v,function(x){Array.isArray(x)?m(x).map(function(P){return w.push(P)}):(0,o.default)(x)?(0,n.default)(x,function(P,T){P===!0&&w.push(T),w.push(T+"-"+P)}):(0,t.default)(x)&&w.push(x)}),w};return mm.default=d,mm}var gm={},xE,NN;function ffe(){if(NN)return xE;NN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return xE=e,xE}var wE,FN;function aq(){if(FN)return wE;FN=1;var e=Cp(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return wE=t,wE}var SE,BN;function ZI(){if(BN)return SE;BN=1;var e=aq();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return SE=t,SE}var EE,jN;function KI(){if(jN)return EE;jN=1;var e=ZI(),t=Rg(),r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a){var p=o[u];(!(n.call(o,u)&&t(p,a))||a===void 0&&!(u in o))&&e(o,u,a)}return EE=i,EE}var CE,zN;function D0(){if(zN)return CE;zN=1;var e=KI(),t=ZI();function r(n,i,o,u){var a=!o;o||(o={});for(var p=-1,d=i.length;++p<d;){var m=i[p],v=u?u(o[m],n[m],m,o,n):void 0;v===void 0&&(v=n[m]),a?t(o,m,v):e(o,m,v)}return o}return CE=r,CE}var AE,$N;function hfe(){if($N)return AE;$N=1;var e=D0(),t=k0();function r(n,i){return n&&e(i,t(i),n)}return AE=r,AE}var PE,UN;function dfe(){if(UN)return PE;UN=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return PE=e,PE}var TE,qN;function pfe(){if(qN)return TE;qN=1;var e=Pf(),t=NI(),r=dfe(),n=Object.prototype,i=n.hasOwnProperty;function o(u){if(!e(u))return r(u);var a=t(u),p=[];for(var d in u)d=="constructor"&&(a||!i.call(u,d))||p.push(d);return p}return TE=o,TE}var IE,VN;function kg(){if(VN)return IE;VN=1;var e=GU(),t=pfe(),r=Mg();function n(i){return r(i)?e(i,!0):t(i)}return IE=n,IE}var ME,GN;function mfe(){if(GN)return ME;GN=1;var e=D0(),t=kg();function r(n,i){return n&&e(i,t(i),n)}return ME=r,ME}var ov={exports:{}};ov.exports;var HN;function oq(){return HN||(HN=1,(function(e,t){var r=Cf(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(d,m){if(m)return d.slice();var v=d.length,w=a?a(v):new d.constructor(v);return d.copy(w),w}e.exports=p})(ov,ov.exports)),ov.exports}var RE,WN;function sq(){if(WN)return RE;WN=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return RE=e,RE}var OE,ZN;function gfe(){if(ZN)return OE;ZN=1;var e=D0(),t=VI();function r(n,i){return e(n,t(n),i)}return OE=r,OE}var kE,KN;function lq(){if(KN)return kE;KN=1;var e=qI(),t=jI(),r=VI(),n=QU(),i=Object.getOwnPropertySymbols,o=i?function(u){for(var a=[];u;)e(a,r(u)),u=t(u);return a}:n;return kE=o,kE}var LE,XN;function yfe(){if(XN)return LE;XN=1;var e=D0(),t=lq();function r(n,i){return e(n,t(n),i)}return LE=r,LE}var DE,YN;function vfe(){if(YN)return DE;YN=1;var e=JU(),t=lq(),r=kg();function n(i){return e(i,r,t)}return DE=n,DE}var NE,JN;function bfe(){if(JN)return NE;JN=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return NE=r,NE}var FE,QN;function XI(){if(QN)return FE;QN=1;var e=YU();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return FE=t,FE}var BE,eF;function _fe(){if(eF)return BE;eF=1;var e=XI();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return BE=t,BE}var jE,tF;function xfe(){if(tF)return jE;tF=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return jE=t,jE}var zE,rF;function wfe(){if(rF)return zE;rF=1;var e=Tg(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return zE=n,zE}var $E,nF;function uq(){if(nF)return $E;nF=1;var e=XI();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return $E=t,$E}var UE,iF;function Sfe(){if(iF)return UE;iF=1;var e=XI(),t=_fe(),r=xfe(),n=wfe(),i=uq(),o="[object Boolean]",u="[object Date]",a="[object Map]",p="[object Number]",d="[object RegExp]",m="[object Set]",v="[object String]",w="[object Symbol]",x="[object ArrayBuffer]",P="[object DataView]",T="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",D="[object Uint8Array]",q="[object Uint8ClampedArray]",z="[object Uint16Array]",Z="[object Uint32Array]";function Q(Y,se,W){var G=Y.constructor;switch(se){case x:return e(Y);case o:case u:return new G(+Y);case P:return t(Y,W);case T:case O:case L:case N:case F:case D:case q:case z:case Z:return i(Y,W);case a:return new G;case p:case v:return new G(Y);case d:return r(Y);case m:return new G;case w:return n(Y)}}return UE=Q,UE}var qE,aF;function Efe(){if(aF)return qE;aF=1;var e=Pf(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return qE=r,qE}var VE,oF;function cq(){if(oF)return VE;oF=1;var e=Efe(),t=jI(),r=NI();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return VE=n,VE}var GE,sF;function Cfe(){if(sF)return GE;sF=1;var e=Xx(),t=Af(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return GE=n,GE}var HE,lF;function Afe(){if(lF)return HE;lF=1;var e=Cfe(),t=kI(),r=LI(),n=r&&r.isMap,i=n?t(n):e;return HE=i,HE}var WE,uF;function Pfe(){if(uF)return WE;uF=1;var e=Xx(),t=Af(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return WE=n,WE}var ZE,cF;function Tfe(){if(cF)return ZE;cF=1;var e=Pfe(),t=kI(),r=LI(),n=r&&r.isSet,i=n?t(n):e;return ZE=i,ZE}var KE,fF;function Ife(){if(fF)return KE;fF=1;var e=Kx(),t=ffe(),r=KI(),n=hfe(),i=mfe(),o=oq(),u=sq(),a=gfe(),p=yfe(),d=eq(),m=vfe(),v=Xx(),w=bfe(),x=Sfe(),P=cq(),T=$u(),O=qx(),L=Afe(),N=Pf(),F=Tfe(),D=k0(),q=kg(),z=1,Z=2,Q=4,Y="[object Arguments]",se="[object Array]",W="[object Boolean]",G="[object Date]",ae="[object Error]",le="[object Function]",ue="[object GeneratorFunction]",ye="[object Map]",Se="[object Number]",ge="[object Object]",xe="[object RegExp]",Fe="[object Set]",He="[object String]",pe="[object Symbol]",_e="[object WeakMap]",Ce="[object ArrayBuffer]",ke="[object DataView]",$e="[object Float32Array]",ht="[object Float64Array]",At="[object Int8Array]",mt="[object Int16Array]",rt="[object Int32Array]",Lt="[object Uint8Array]",Tt="[object Uint8ClampedArray]",Pt="[object Uint16Array]",ut="[object Uint32Array]",Le={};Le[Y]=Le[se]=Le[Ce]=Le[ke]=Le[W]=Le[G]=Le[$e]=Le[ht]=Le[At]=Le[mt]=Le[rt]=Le[ye]=Le[Se]=Le[ge]=Le[xe]=Le[Fe]=Le[He]=Le[pe]=Le[Lt]=Le[Tt]=Le[Pt]=Le[ut]=!0,Le[ae]=Le[le]=Le[_e]=!1;function sr(lr,dr,Yt,Ve,tt,lt){var Mt,Kt=dr&z,Ut=dr&Z,ar=dr&Q;if(Yt&&(Mt=tt?Yt(lr,Ve,tt,lt):Yt(lr)),Mt!==void 0)return Mt;if(!N(lr))return lr;var gr=T(lr);if(gr){if(Mt=w(lr),!Kt)return u(lr,Mt)}else{var yr=v(lr),Ye=yr==le||yr==ue;if(O(lr))return o(lr,Kt);if(yr==ge||yr==Y||Ye&&!tt){if(Mt=Ut||Ye?{}:P(lr),!Kt)return Ut?p(lr,i(Mt,lr)):a(lr,n(Mt,lr))}else{if(!Le[yr])return tt?lr:{};Mt=x(lr,yr,Kt)}}lt||(lt=new e);var de=lt.get(lr);if(de)return de;lt.set(lr,Mt),F(lr)?lr.forEach(function(Ue){Mt.add(sr(Ue,dr,Yt,Ue,lr,lt))}):L(lr)&&lr.forEach(function(Ue,Ke){Mt.set(Ke,sr(Ue,dr,Yt,Ke,lr,lt))});var he=ar?Ut?m:d:Ut?q:D,Me=gr?void 0:he(lr);return t(Me||lr,function(Ue,Ke){Me&&(Ke=Ue,Ue=lr[Ke]),r(Mt,Ke,sr(Ue,dr,Yt,Ke,lr,lt))}),Mt}return KE=sr,KE}var XE,hF;function Mfe(){if(hF)return XE;hF=1;var e=Ife(),t=1,r=4;function n(i){return e(i,t|r)}return XE=n,XE}var dF;function Rfe(){if(dF)return gm;dF=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.mergeClasses=void 0;var e=BI(),t=o(e),r=Mfe(),n=o(r),i=Object.assign||function(a){for(var p=1;p<arguments.length;p++){var d=arguments[p];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var u=gm.mergeClasses=function(p){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=p.default&&(0,n.default)(p.default)||{};return d.map(function(v){var w=p[v];return w&&(0,t.default)(w,function(x,P){m[P]||(m[P]={}),m[P]=i({},m[P],w[P])}),v}),m};return gm.default=u,gm}var ym={},pF;function Ofe(){if(pF)return ym;pF=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.autoprefix=void 0;var e=BI(),t=n(e),r=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u};function n(u){return u&&u.__esModule?u:{default:u}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var p=a&&a.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(a,p){var d=p[a];return d||{extend:a}}},o=ym.autoprefix=function(a){var p={};return(0,t.default)(a,function(d,m){var v={};(0,t.default)(d,function(w,x){var P=i[x];P?v=r({},v,P(w)):v[x]=w}),p[m]=v}),p};return ym.default=o,ym}var vm={},mF;function kfe(){if(mF)return vm;mF=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.hover=void 0;var e=Object.assign||function(p){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=ux(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function o(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function u(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var a=vm.hover=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){u(w,v);function w(){var x,P,T,O;i(this,w);for(var L=arguments.length,N=Array(L),F=0;F<L;F++)N[F]=arguments[F];return O=(P=(T=o(this,(x=w.__proto__||Object.getPrototypeOf(w)).call.apply(x,[this].concat(N))),T),T.state={hover:!1},T.handleMouseOver=function(){return T.setState({hover:!0})},T.handleMouseOut=function(){return T.setState({hover:!1})},T.render=function(){return r.default.createElement(m,{onMouseOver:T.handleMouseOver,onMouseOut:T.handleMouseOut},r.default.createElement(d,e({},T.props,T.state)))},P),o(T,O)}return w})(r.default.Component)};return vm.default=a,vm}var bm={},gF;function Lfe(){if(gF)return bm;gF=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.active=void 0;var e=Object.assign||function(p){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=ux(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,d){if(!(p instanceof d))throw new TypeError("Cannot call a class as a function")}function o(p,d){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:p}function u(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);p.prototype=Object.create(d&&d.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(p,d):p.__proto__=d)}var a=bm.active=function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){u(w,v);function w(){var x,P,T,O;i(this,w);for(var L=arguments.length,N=Array(L),F=0;F<L;F++)N[F]=arguments[F];return O=(P=(T=o(this,(x=w.__proto__||Object.getPrototypeOf(w)).call.apply(x,[this].concat(N))),T),T.state={active:!1},T.handleMouseDown=function(){return T.setState({active:!0})},T.handleMouseUp=function(){return T.setState({active:!1})},T.render=function(){return r.default.createElement(m,{onMouseDown:T.handleMouseDown,onMouseUp:T.handleMouseUp},r.default.createElement(d,e({},T.props,T.state)))},P),o(T,O)}return w})(r.default.Component)};return bm.default=a,bm}var Ub={},yF;function Dfe(){if(yF)return Ub;yF=1,Object.defineProperty(Ub,"__esModule",{value:!0});var e=function(r,n){var i={},o=function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=p};return r===0&&o("first-child"),r===n-1&&o("last-child"),(r===0||r%2===0)&&o("even"),Math.abs(r%2)===1&&o("odd"),o("nth-child",r),i};return Ub.default=e,Ub}var vF;function Nfe(){if(vF)return Kl;vF=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.ReactCSS=Kl.loop=Kl.handleActive=Kl.handleHover=Kl.hover=void 0;var e=cfe(),t=w(e),r=Rfe(),n=w(r),i=Ofe(),o=w(i),u=kfe(),a=w(u),p=Lfe(),d=w(p),m=Dfe(),v=w(m);function w(P){return P&&P.__esModule?P:{default:P}}Kl.hover=a.default,Kl.handleHover=a.default,Kl.handleActive=d.default,Kl.loop=v.default;var x=Kl.ReactCSS=function(T){for(var O=arguments.length,L=Array(O>1?O-1:0),N=1;N<O;N++)L[N-1]=arguments[N];var F=(0,t.default)(L),D=(0,n.default)(T,F);return(0,o.default)(D)};return Kl.default=x,Kl}var YI=Nfe();const ti=Us(YI);var Ffe=function(t,r,n,i,o){var u=o.clientWidth,a=o.clientHeight,p=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,d=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,m=p-(o.getBoundingClientRect().left+window.pageXOffset),v=d-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var w=void 0;if(v<0?w=0:v>a?w=1:w=Math.round(v*100/a)/100,r.a!==w)return{h:r.h,s:r.s,l:r.l,a:w,source:"rgb"}}else{var x=void 0;if(m<0?x=0:m>u?x=1:x=Math.round(m*100/u)/100,i!==x)return{h:r.h,s:r.s,l:r.l,a:x,source:"rgb"}}return null},YE={},Bfe=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var u=o.getContext("2d");return u?(u.fillStyle=t,u.fillRect(0,0,o.width,o.height),u.fillStyle=r,u.fillRect(0,0,n,n),u.translate(n,n),u.fillRect(0,0,n,n),o.toDataURL()):null},jfe=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(YE[o])return YE[o];var u=Bfe(t,r,n,i);return YE[o]=u,u},bF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lg=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,u=t.borderRadius,a=t.boxShadow,p=t.children,d=ti({default:{grid:{borderRadius:u,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+jfe(r,n,i,o.canvas)+") center left"}}});return M.isValidElement(p)?Be.cloneElement(p,bF({},p.props,{style:bF({},p.props.style,d.grid)})):Be.createElement("div",{style:d.grid})};Lg.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var zfe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$fe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Ufe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var JI=(function(e){qfe(t,e);function t(){var r,n,i,o;Ufe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return o=(n=(i=_F(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(d){var m=Ffe(d,i.props.hsl,i.props.direction,i.props.a,i.container);m&&typeof i.props.onChange=="function"&&i.props.onChange(m,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),_F(i,o)}return $fe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=ti({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:zfe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Be.createElement("div",{style:o.alpha},Be.createElement("div",{style:o.checkboard},Be.createElement(Lg,{renderers:this.props.renderers})),Be.createElement("div",{style:o.gradient}),Be.createElement("div",{style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Be.createElement("div",{style:o.pointer},this.props.pointer?Be.createElement(this.props.pointer,this.props):Be.createElement("div",{style:o.slider}))))}}]),t})(M.PureComponent||M.Component),Vfe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Gfe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wfe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Zfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Kfe=1,fq=38,Xfe=40,Yfe=[fq,Xfe],Jfe=function(t){return Yfe.indexOf(t)>-1},Qfe=function(t){return Number(String(t).replace(/%/g,""))},ehe=1,ki=(function(e){Zfe(t,e);function t(r){Hfe(this,t);var n=Wfe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=Qfe(i.target.value);if(!isNaN(o)&&Jfe(i.keyCode)){var u=n.getArrowOffset(),a=i.keyCode===fq?o+u:o-u;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+ehe++,n}return Vfe(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return Gfe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Kfe}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=ti({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Be.createElement("div",{style:i.wrap},Be.createElement("input",{id:this.inputId,style:i.input,ref:function(u){return n.input=u},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Be.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(M.PureComponent||M.Component),the=function(t,r,n,i){var o=i.clientWidth,u=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=a-(i.getBoundingClientRect().left+window.pageXOffset),m=p-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var v=void 0;if(m<0)v=359;else if(m>u)v=0;else{var w=-(m*100/u)+100;v=360*w/100}if(n.h!==v)return{h:v,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var x=void 0;if(d<0)x=0;else if(d>o)x=359;else{var P=d*100/o;x=360*P/100}if(n.h!==x)return{h:x,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},rhe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function nhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ihe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Dg=(function(e){ihe(t,e);function t(){var r,n,i,o;nhe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return o=(n=(i=xF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(d){var m=the(d,i.props.direction,i.props.hsl,i.container);m&&typeof i.props.onChange=="function"&&i.props.onChange(m,d)},i.handleMouseDown=function(d){i.handleChange(d),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),xF(i,o)}return rhe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,u=ti({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return Be.createElement("div",{style:u.hue},Be.createElement("div",{className:"hue-"+o,style:u.container,ref:function(p){return n.container=p},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Be.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Be.createElement("div",{style:u.pointer},this.props.pointer?Be.createElement(this.props.pointer,this.props):Be.createElement("div",{style:u.slider}))))}}]),t})(M.PureComponent||M.Component);function ahe(){this.__data__=[],this.size=0}function N0(e,t){return e===t||e!==e&&t!==t}function Qx(e,t){for(var r=e.length;r--;)if(N0(e[r][0],t))return r;return-1}var ohe=Array.prototype,she=ohe.splice;function lhe(e){var t=this.__data__,r=Qx(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():she.call(t,r,1),--this.size,!0}function uhe(e){var t=this.__data__,r=Qx(t,e);return r<0?void 0:t[r][1]}function che(e){return Qx(this.__data__,e)>-1}function fhe(e,t){var r=this.__data__,n=Qx(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function dh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dh.prototype.clear=ahe;dh.prototype.delete=lhe;dh.prototype.get=uhe;dh.prototype.has=che;dh.prototype.set=fhe;function hhe(){this.__data__=new dh,this.size=0}function dhe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function phe(e){return this.__data__.get(e)}function mhe(e){return this.__data__.has(e)}var hq=typeof global=="object"&&global&&global.Object===Object&&global,ghe=typeof self=="object"&&self&&self.Object===Object&&self,Fc=hq||ghe||Function("return this")(),Qh=Fc.Symbol,dq=Object.prototype,yhe=dq.hasOwnProperty,vhe=dq.toString,Ly=Qh?Qh.toStringTag:void 0;function bhe(e){var t=yhe.call(e,Ly),r=e[Ly];try{e[Ly]=void 0;var n=!0}catch{}var i=vhe.call(e);return n&&(t?e[Ly]=r:delete e[Ly]),i}var _he=Object.prototype,xhe=_he.toString;function whe(e){return xhe.call(e)}var She="[object Null]",Ehe="[object Undefined]",wF=Qh?Qh.toStringTag:void 0;function Ap(e){return e==null?e===void 0?Ehe:She:wF&&wF in Object(e)?bhe(e):whe(e)}function ac(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Che="[object AsyncFunction]",Ahe="[object Function]",Phe="[object GeneratorFunction]",The="[object Proxy]";function QI(e){if(!ac(e))return!1;var t=Ap(e);return t==Ahe||t==Phe||t==Che||t==The}var JE=Fc["__core-js_shared__"],SF=(function(){var e=/[^.]+$/.exec(JE&&JE.keys&&JE.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Ihe(e){return!!SF&&SF in e}var Mhe=Function.prototype,Rhe=Mhe.toString;function Pp(e){if(e!=null){try{return Rhe.call(e)}catch{}try{return e+""}catch{}}return""}var Ohe=/[\\^$.*+?()[\]{}|]/g,khe=/^\[object .+?Constructor\]$/,Lhe=Function.prototype,Dhe=Object.prototype,Nhe=Lhe.toString,Fhe=Dhe.hasOwnProperty,Bhe=RegExp("^"+Nhe.call(Fhe).replace(Ohe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jhe(e){if(!ac(e)||Ihe(e))return!1;var t=QI(e)?Bhe:khe;return t.test(Pp(e))}function zhe(e,t){return e?.[t]}function Tp(e,t){var r=zhe(e,t);return jhe(r)?r:void 0}var i0=Tp(Fc,"Map"),a0=Tp(Object,"create");function $he(){this.__data__=a0?a0(null):{},this.size=0}function Uhe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qhe="__lodash_hash_undefined__",Vhe=Object.prototype,Ghe=Vhe.hasOwnProperty;function Hhe(e){var t=this.__data__;if(a0){var r=t[e];return r===qhe?void 0:r}return Ghe.call(t,e)?t[e]:void 0}var Whe=Object.prototype,Zhe=Whe.hasOwnProperty;function Khe(e){var t=this.__data__;return a0?t[e]!==void 0:Zhe.call(t,e)}var Xhe="__lodash_hash_undefined__";function Yhe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=a0&&t===void 0?Xhe:t,this}function dp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dp.prototype.clear=$he;dp.prototype.delete=Uhe;dp.prototype.get=Hhe;dp.prototype.has=Khe;dp.prototype.set=Yhe;function Jhe(){this.size=0,this.__data__={hash:new dp,map:new(i0||dh),string:new dp}}function Qhe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function e2(e,t){var r=e.__data__;return Qhe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ede(e){var t=e2(this,e).delete(e);return this.size-=t?1:0,t}function tde(e){return e2(this,e).get(e)}function rde(e){return e2(this,e).has(e)}function nde(e,t){var r=e2(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ph(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ph.prototype.clear=Jhe;ph.prototype.delete=ede;ph.prototype.get=tde;ph.prototype.has=rde;ph.prototype.set=nde;var ide=200;function ade(e,t){var r=this.__data__;if(r instanceof dh){var n=r.__data__;if(!i0||n.length<ide-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ph(n)}return r.set(e,t),this.size=r.size,this}function bf(e){var t=this.__data__=new dh(e);this.size=t.size}bf.prototype.clear=hhe;bf.prototype.delete=dhe;bf.prototype.get=phe;bf.prototype.has=mhe;bf.prototype.set=ade;var i1=(function(){try{var e=Tp(Object,"defineProperty");return e({},"",{}),e}catch{}})();function eM(e,t,r){t=="__proto__"&&i1?i1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function eT(e,t,r){(r!==void 0&&!N0(e[t],r)||r===void 0&&!(t in e))&&eM(e,t,r)}function ode(e){return function(t,r,n){for(var i=-1,o=Object(t),u=n(t),a=u.length;a--;){var p=u[++i];if(r(o[p],p,o)===!1)break}return t}}var pq=ode(),mq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,EF=mq&&typeof module=="object"&&module&&!module.nodeType&&module,sde=EF&&EF.exports===mq,CF=sde?Fc.Buffer:void 0;CF&&CF.allocUnsafe;function lde(e,t){return e.slice()}var a1=Fc.Uint8Array;function ude(e){var t=new e.constructor(e.byteLength);return new a1(t).set(new a1(e)),t}function cde(e,t){var r=ude(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function fde(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var AF=Object.create,hde=(function(){function e(){}return function(t){if(!ac(t))return{};if(AF)return AF(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function gq(e,t){return function(r){return e(t(r))}}var yq=gq(Object.getPrototypeOf,Object),dde=Object.prototype;function tM(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||dde;return e===r}function pde(e){return typeof e.constructor=="function"&&!tM(e)?hde(yq(e)):{}}function ed(e){return e!=null&&typeof e=="object"}var mde="[object Arguments]";function PF(e){return ed(e)&&Ap(e)==mde}var vq=Object.prototype,gde=vq.hasOwnProperty,yde=vq.propertyIsEnumerable,o1=PF((function(){return arguments})())?PF:function(e){return ed(e)&&gde.call(e,"callee")&&!yde.call(e,"callee")},Bu=Array.isArray,vde=9007199254740991;function rM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vde}function Ng(e){return e!=null&&rM(e.length)&&!QI(e)}function bde(e){return ed(e)&&Ng(e)}function _de(){return!1}var bq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,TF=bq&&typeof module=="object"&&module&&!module.nodeType&&module,xde=TF&&TF.exports===bq,IF=xde?Fc.Buffer:void 0,wde=IF?IF.isBuffer:void 0,s1=wde||_de,Sde="[object Object]",Ede=Function.prototype,Cde=Object.prototype,_q=Ede.toString,Ade=Cde.hasOwnProperty,Pde=_q.call(Object);function Tde(e){if(!ed(e)||Ap(e)!=Sde)return!1;var t=yq(e);if(t===null)return!0;var r=Ade.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&_q.call(r)==Pde}var Ide="[object Arguments]",Mde="[object Array]",Rde="[object Boolean]",Ode="[object Date]",kde="[object Error]",Lde="[object Function]",Dde="[object Map]",Nde="[object Number]",Fde="[object Object]",Bde="[object RegExp]",jde="[object Set]",zde="[object String]",$de="[object WeakMap]",Ude="[object ArrayBuffer]",qde="[object DataView]",Vde="[object Float32Array]",Gde="[object Float64Array]",Hde="[object Int8Array]",Wde="[object Int16Array]",Zde="[object Int32Array]",Kde="[object Uint8Array]",Xde="[object Uint8ClampedArray]",Yde="[object Uint16Array]",Jde="[object Uint32Array]",Na={};Na[Vde]=Na[Gde]=Na[Hde]=Na[Wde]=Na[Zde]=Na[Kde]=Na[Xde]=Na[Yde]=Na[Jde]=!0;Na[Ide]=Na[Mde]=Na[Ude]=Na[Rde]=Na[qde]=Na[Ode]=Na[kde]=Na[Lde]=Na[Dde]=Na[Nde]=Na[Fde]=Na[Bde]=Na[jde]=Na[zde]=Na[$de]=!1;function Qde(e){return ed(e)&&rM(e.length)&&!!Na[Ap(e)]}function epe(e){return function(t){return e(t)}}var xq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cv=xq&&typeof module=="object"&&module&&!module.nodeType&&module,tpe=Cv&&Cv.exports===xq,QE=tpe&&hq.process,MF=(function(){try{var e=Cv&&Cv.require&&Cv.require("util").types;return e||QE&&QE.binding&&QE.binding("util")}catch{}})(),RF=MF&&MF.isTypedArray,nM=RF?epe(RF):Qde;function tT(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var rpe=Object.prototype,npe=rpe.hasOwnProperty;function ipe(e,t,r){var n=e[t];(!(npe.call(e,t)&&N0(n,r))||r===void 0&&!(t in e))&&eM(e,t,r)}function ape(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],p=void 0;p===void 0&&(p=e[a]),i?eM(r,a,p):ipe(r,a,p)}return r}function ope(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var spe=9007199254740991,lpe=/^(?:0|[1-9]\d*)$/;function iM(e,t){var r=typeof e;return t=t??spe,!!t&&(r=="number"||r!="symbol"&&lpe.test(e))&&e>-1&&e%1==0&&e<t}var upe=Object.prototype,cpe=upe.hasOwnProperty;function wq(e,t){var r=Bu(e),n=!r&&o1(e),i=!r&&!n&&s1(e),o=!r&&!n&&!i&&nM(e),u=r||n||i||o,a=u?ope(e.length,String):[],p=a.length;for(var d in e)(t||cpe.call(e,d))&&!(u&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||iM(d,p)))&&a.push(d);return a}function fpe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var hpe=Object.prototype,dpe=hpe.hasOwnProperty;function ppe(e){if(!ac(e))return fpe(e);var t=tM(e),r=[];for(var n in e)n=="constructor"&&(t||!dpe.call(e,n))||r.push(n);return r}function Sq(e){return Ng(e)?wq(e,!0):ppe(e)}function mpe(e){return ape(e,Sq(e))}function gpe(e,t,r,n,i,o,u){var a=tT(e,r),p=tT(t,r),d=u.get(p);if(d){eT(e,r,d);return}var m=o?o(a,p,r+"",e,t,u):void 0,v=m===void 0;if(v){var w=Bu(p),x=!w&&s1(p),P=!w&&!x&&nM(p);m=p,w||x||P?Bu(a)?m=a:bde(a)?m=fde(a):x?(v=!1,m=lde(p)):P?(v=!1,m=cde(p)):m=[]:Tde(p)||o1(p)?(m=a,o1(a)?m=mpe(a):(!ac(a)||QI(a))&&(m=pde(p))):v=!1}v&&(u.set(p,m),i(m,p,n,o,u),u.delete(p)),eT(e,r,m)}function Eq(e,t,r,n,i){e!==t&&pq(t,function(o,u){if(i||(i=new bf),ac(o))gpe(e,t,u,r,Eq,n,i);else{var a=n?n(tT(e,u),o,u+"",e,t,i):void 0;a===void 0&&(a=o),eT(e,u,a)}},Sq)}function t2(e){return e}function ype(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var OF=Math.max;function vpe(e,t,r){return t=OF(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=OF(n.length-t,0),u=Array(o);++i<o;)u[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(u),ype(e,this,a)}}function bpe(e){return function(){return e}}var _pe=i1?function(e,t){return i1(e,"toString",{configurable:!0,enumerable:!1,value:bpe(t),writable:!0})}:t2,xpe=800,wpe=16,Spe=Date.now;function Epe(e){var t=0,r=0;return function(){var n=Spe(),i=wpe-(n-r);if(r=n,i>0){if(++t>=xpe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Cpe=Epe(_pe);function Ape(e,t){return Cpe(vpe(e,t,t2),e+"")}function Ppe(e,t,r){if(!ac(r))return!1;var n=typeof t;return(n=="number"?Ng(r)&&iM(t,r.length):n=="string"&&t in r)?N0(r[t],e):!1}function Tpe(e){return Ape(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,u&&Ppe(r[0],r[1],u)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var ou=Tpe(function(e,t,r){Eq(e,t,r)}),F0=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,u=t.styles,a=u===void 0?{}:u,p=ti(ou({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return Be.createElement("div",{style:p.wrap},Be.createElement("div",{style:p.bg}),Be.createElement("div",{style:p.content},o))};F0.propTypes={background:tn.string,zDepth:tn.oneOf([0,1,2,3,4,5]),radius:tn.number,styles:tn.object};F0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var eC=function(){return Fc.Date.now()},Ipe=/\s/;function Mpe(e){for(var t=e.length;t--&&Ipe.test(e.charAt(t)););return t}var Rpe=/^\s+/;function Ope(e){return e&&e.slice(0,Mpe(e)+1).replace(Rpe,"")}var kpe="[object Symbol]";function r2(e){return typeof e=="symbol"||ed(e)&&Ap(e)==kpe}var kF=NaN,Lpe=/^[-+]0x[0-9a-f]+$/i,Dpe=/^0b[01]+$/i,Npe=/^0o[0-7]+$/i,Fpe=parseInt;function LF(e){if(typeof e=="number")return e;if(r2(e))return kF;if(ac(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ac(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Ope(e);var r=Dpe.test(e);return r||Npe.test(e)?Fpe(e.slice(2),r?2:8):Lpe.test(e)?kF:+e}var Bpe="Expected a function",jpe=Math.max,zpe=Math.min;function Cq(e,t,r){var n,i,o,u,a,p,d=0,m=!1,v=!1,w=!0;if(typeof e!="function")throw new TypeError(Bpe);t=LF(t)||0,ac(r)&&(m=!!r.leading,v="maxWait"in r,o=v?jpe(LF(r.maxWait)||0,t):o,w="trailing"in r?!!r.trailing:w);function x(z){var Z=n,Q=i;return n=i=void 0,d=z,u=e.apply(Q,Z),u}function P(z){return d=z,a=setTimeout(L,t),m?x(z):u}function T(z){var Z=z-p,Q=z-d,Y=t-Z;return v?zpe(Y,o-Q):Y}function O(z){var Z=z-p,Q=z-d;return p===void 0||Z>=t||Z<0||v&&Q>=o}function L(){var z=eC();if(O(z))return N(z);a=setTimeout(L,T(z))}function N(z){return a=void 0,w&&n?x(z):(n=i=void 0,u)}function F(){a!==void 0&&clearTimeout(a),d=0,n=p=i=a=void 0}function D(){return a===void 0?u:N(eC())}function q(){var z=eC(),Z=O(z);if(n=arguments,i=this,p=z,Z){if(a===void 0)return P(p);if(v)return clearTimeout(a),a=setTimeout(L,t),x(p)}return a===void 0&&(a=setTimeout(L,t)),u}return q.cancel=F,q.flush=D,q}var $pe="Expected a function";function Upe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError($pe);return ac(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Cq(e,t,{leading:n,maxWait:t,trailing:i})}var qpe=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,u=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,d=a-(n.getBoundingClientRect().left+window.pageXOffset),m=p-(n.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>o&&(d=o),m<0?m=0:m>u&&(m=u);var v=d/o,w=1-m/u;return{h:r.h,s:v,v:w,a:r.a,source:"hsv"}},Vpe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Gpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hpe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Wpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n2=(function(e){Wpe(t,e);function t(r){Gpe(this,t);var n=Hpe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,qpe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=Upe(function(i,o,u){i(o,u)},50),n}return Vpe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,u=i.white,a=i.black,p=i.pointer,d=i.circle,m=ti({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:u,black:a,pointer:p,circle:d}},{custom:!!this.props.style});return Be.createElement("div",{style:m.color,ref:function(w){return n.container=w},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Be.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Be.createElement("div",{style:m.white,className:"saturation-white"},Be.createElement("div",{style:m.black,className:"saturation-black"}),Be.createElement("div",{style:m.pointer},this.props.pointer?Be.createElement(this.props.pointer,this.props):Be.createElement("div",{style:m.circle}))))}}]),t})(M.PureComponent||M.Component);function Zpe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Kpe=gq(Object.keys,Object),Xpe=Object.prototype,Ype=Xpe.hasOwnProperty;function Jpe(e){if(!tM(e))return Kpe(e);var t=[];for(var r in Object(e))Ype.call(e,r)&&r!="constructor"&&t.push(r);return t}function aM(e){return Ng(e)?wq(e):Jpe(e)}function Qpe(e,t){return e&&pq(e,t,aM)}function eme(e,t){return function(r,n){if(r==null)return r;if(!Ng(r))return e(r,n);for(var i=r.length,o=-1,u=Object(r);++o<i&&n(u[o],o,u)!==!1;);return r}}var Aq=eme(Qpe);function tme(e){return typeof e=="function"?e:t2}function rme(e,t){var r=Bu(e)?Zpe:Aq;return r(e,tme(t))}function l1(e){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l1(e)}var nme=/^\s+/,ime=/\s+$/;function An(e,t){if(e=e||"",t=t||{},e instanceof An)return e;if(!(this instanceof An))return new An(e,t);var r=ame(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}An.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,u,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?u=n/12.92:u=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*u+.0722*a},setAlpha:function(t){return this._a=Pq(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=NF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=NF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=DF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=DF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return FF(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return ume(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ja(this._r,255)*100)+"%",g:Math.round(Ja(this._g,255)*100)+"%",b:Math.round(Ja(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ja(this._r,255)*100)+"%, "+Math.round(Ja(this._g,255)*100)+"%, "+Math.round(Ja(this._b,255)*100)+"%)":"rgba("+Math.round(Ja(this._r,255)*100)+"%, "+Math.round(Ja(this._g,255)*100)+"%, "+Math.round(Ja(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:xme[FF(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+BF(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=An(t);n="#"+BF(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return An(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(dme,arguments)},brighten:function(){return this._applyModification(pme,arguments)},darken:function(){return this._applyModification(mme,arguments)},desaturate:function(){return this._applyModification(cme,arguments)},saturate:function(){return this._applyModification(fme,arguments)},greyscale:function(){return this._applyModification(hme,arguments)},spin:function(){return this._applyModification(gme,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(bme,arguments)},complement:function(){return this._applyCombination(yme,arguments)},monochromatic:function(){return this._applyCombination(_me,arguments)},splitcomplement:function(){return this._applyCombination(vme,arguments)},triad:function(){return this._applyCombination(jF,[3])},tetrad:function(){return this._applyCombination(jF,[4])}};An.fromRatio=function(e,t){if(l1(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=sv(e[n]));e=r}return An(e,t)};function ame(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,u=!1,a=!1;return typeof e=="string"&&(e=Cme(e)),l1(e)=="object"&&(Hf(e.r)&&Hf(e.g)&&Hf(e.b)?(t=ome(e.r,e.g,e.b),u=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Hf(e.h)&&Hf(e.s)&&Hf(e.v)?(n=sv(e.s),i=sv(e.v),t=lme(e.h,n,i),u=!0,a="hsv"):Hf(e.h)&&Hf(e.s)&&Hf(e.l)&&(n=sv(e.s),o=sv(e.l),t=sme(e.h,n,o),u=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Pq(r),{ok:u,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function ome(e,t,r){return{r:Ja(e,255)*255,g:Ja(t,255)*255,b:Ja(r,255)*255}}function DF(e,t,r){e=Ja(e,255),t=Ja(t,255),r=Ja(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=(n+i)/2;if(n==i)o=u=0;else{var p=n-i;switch(u=a>.5?p/(2-n-i):p/(n+i),n){case e:o=(t-r)/p+(t<r?6:0);break;case t:o=(r-e)/p+2;break;case r:o=(e-t)/p+4;break}o/=6}return{h:o,s:u,l:a}}function sme(e,t,r){var n,i,o;e=Ja(e,360),t=Ja(t,100),r=Ja(r,100);function u(d,m,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?d+(m-d)*6*v:v<1/2?m:v<2/3?d+(m-d)*(2/3-v)*6:d}if(t===0)n=i=o=r;else{var a=r<.5?r*(1+t):r+t-r*t,p=2*r-a;n=u(p,a,e+1/3),i=u(p,a,e),o=u(p,a,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function NF(e,t,r){e=Ja(e,255),t=Ja(t,255),r=Ja(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=n,p=n-i;if(u=n===0?0:p/n,n==i)o=0;else{switch(n){case e:o=(t-r)/p+(t<r?6:0);break;case t:o=(r-e)/p+2;break;case r:o=(e-t)/p+4;break}o/=6}return{h:o,s:u,v:a}}function lme(e,t,r){e=Ja(e,360)*6,t=Ja(t,100),r=Ja(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),u=r*(1-i*t),a=r*(1-(1-i)*t),p=n%6,d=[r,u,o,o,a,r][p],m=[a,r,r,u,o,o][p],v=[o,o,a,r,r,u][p];return{r:d*255,g:m*255,b:v*255}}function FF(e,t,r,n){var i=[Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function ume(e,t,r,n,i){var o=[Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16)),Ac(Tq(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function BF(e,t,r,n){var i=[Ac(Tq(n)),Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16))];return i.join("")}An.equals=function(e,t){return!e||!t?!1:An(e).toRgbString()==An(t).toRgbString()};An.random=function(){return An.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function cme(e,t){t=t===0?0:t||10;var r=An(e).toHsl();return r.s-=t/100,r.s=i2(r.s),An(r)}function fme(e,t){t=t===0?0:t||10;var r=An(e).toHsl();return r.s+=t/100,r.s=i2(r.s),An(r)}function hme(e){return An(e).desaturate(100)}function dme(e,t){t=t===0?0:t||10;var r=An(e).toHsl();return r.l+=t/100,r.l=i2(r.l),An(r)}function pme(e,t){t=t===0?0:t||10;var r=An(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),An(r)}function mme(e,t){t=t===0?0:t||10;var r=An(e).toHsl();return r.l-=t/100,r.l=i2(r.l),An(r)}function gme(e,t){var r=An(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,An(r)}function yme(e){var t=An(e).toHsl();return t.h=(t.h+180)%360,An(t)}function jF(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=An(e).toHsl(),n=[An(e)],i=360/t,o=1;o<t;o++)n.push(An({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function vme(e){var t=An(e).toHsl(),r=t.h;return[An(e),An({h:(r+72)%360,s:t.s,l:t.l}),An({h:(r+216)%360,s:t.s,l:t.l})]}function bme(e,t,r){t=t||6,r=r||30;var n=An(e).toHsl(),i=360/r,o=[An(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(An(n));return o}function _me(e,t){t=t||6;for(var r=An(e).toHsv(),n=r.h,i=r.s,o=r.v,u=[],a=1/t;t--;)u.push(An({h:n,s:i,v:o})),o=(o+a)%1;return u}An.mix=function(e,t,r){r=r===0?0:r||50;var n=An(e).toRgb(),i=An(t).toRgb(),o=r/100,u={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return An(u)};An.readability=function(e,t){var r=An(e),n=An(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};An.isReadable=function(e,t,r){var n=An.readability(e,t),i,o;switch(o=!1,i=Ame(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};An.mostReadable=function(e,t,r){var n=null,i=0,o,u,a,p;r=r||{},u=r.includeFallbackColors,a=r.level,p=r.size;for(var d=0;d<t.length;d++)o=An.readability(e,t[d]),o>i&&(i=o,n=An(t[d]));return An.isReadable(e,n,{level:a,size:p})||!u?n:(r.includeFallbackColors=!1,An.mostReadable(e,["#fff","#000"],r))};var rT=An.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},xme=An.hexNames=wme(rT);function wme(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function Pq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ja(e,t){Sme(e)&&(e="100%");var r=Eme(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function i2(e){return Math.min(1,Math.max(0,e))}function Tu(e){return parseInt(e,16)}function Sme(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Eme(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ac(e){return e.length==1?"0"+e:""+e}function sv(e){return e<=1&&(e=e*100+"%"),e}function Tq(e){return Math.round(parseFloat(e)*255).toString(16)}function zF(e){return Tu(e)/255}var xc=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Hf(e){return!!xc.CSS_UNIT.exec(e)}function Cme(e){e=e.replace(nme,"").replace(ime,"").toLowerCase();var t=!1;if(rT[e])e=rT[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=xc.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=xc.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=xc.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=xc.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=xc.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=xc.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=xc.hex8.exec(e))?{r:Tu(r[1]),g:Tu(r[2]),b:Tu(r[3]),a:zF(r[4]),format:t?"name":"hex8"}:(r=xc.hex6.exec(e))?{r:Tu(r[1]),g:Tu(r[2]),b:Tu(r[3]),format:t?"name":"hex"}:(r=xc.hex4.exec(e))?{r:Tu(r[1]+""+r[1]),g:Tu(r[2]+""+r[2]),b:Tu(r[3]+""+r[3]),a:zF(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=xc.hex3.exec(e))?{r:Tu(r[1]+""+r[1]),g:Tu(r[2]+""+r[2]),b:Tu(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function Ame(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var $F=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return rme(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var u=/^\d+%$/;u.test(t[o])&&(i+=1)}}),n===i?t:!1},lv=function(t,r){var n=t.hex?An(t.hex):An(t),i=n.toHsl(),o=n.toHsv(),u=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var p=a==="000000"&&u.a===0;return{hsl:i,hex:p?"transparent":"#"+a,rgb:u,hsv:o,oldHue:t.h||r||i.h,source:t.source}},od=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&An(t).isValid()},oM=function(t){if(!t)return"#fff";var r=lv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},tC=function(t,r){var n=t.replace("","");return An(r+" ("+n+")")._ok},Dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pme=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Tme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ime(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var su=function(t){var r=(function(n){Mme(i,n);function i(o){Tme(this,i);var u=Ime(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return u.handleChange=function(a,p){var d=$F(a);if(d){var m=lv(a,a.h||u.state.oldHue);u.setState(m),u.props.onChangeComplete&&u.debounce(u.props.onChangeComplete,m,p),u.props.onChange&&u.props.onChange(m,p)}},u.handleSwatchHover=function(a,p){var d=$F(a);if(d){var m=lv(a,a.h||u.state.oldHue);u.props.onSwatchHover&&u.props.onSwatchHover(m,p)}},u.state=Dy({},lv(o.color,0)),u.debounce=Cq(function(a,p,d){a(p,d)},100),u}return Pme(i,[{key:"render",value:function(){var u={};return this.props.onSwatchHover&&(u.onSwatchHover=this.handleSwatchHover),Be.createElement(t,Dy({},this.props,this.state,{onChange:this.handleChange},u))}}],[{key:"getDerivedStateFromProps",value:function(u,a){return Dy({},lv(u.color,a.oldHue))}}]),i})(M.PureComponent||M.Component);return r.propTypes=Dy({},t.propTypes),r.defaultProps=Dy({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},Rme=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ome=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function kme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Lme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Dme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){Lme(i,n);function i(){var o,u,a,p;kme(this,i);for(var d=arguments.length,m=Array(d),v=0;v<d;v++)m[v]=arguments[v];return p=(u=(a=UF(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(m))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},u),UF(a,p)}return Ome(i,[{key:"render",value:function(){return Be.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},Be.createElement(t,Rme({},this.props,this.state)))}}]),i})(Be.Component)},qF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nme=13,Fme=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,u=t.onHover,a=t.title,p=a===void 0?r:a,d=t.children,m=t.focus,v=t.focusStyle,w=v===void 0?{}:v,x=r==="transparent",P=ti({default:{swatch:qF({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,m?w:{})}}),T=function(D){return o(r,D)},O=function(D){return D.keyCode===Nme&&o(r,D)},L=function(D){return u(r,D)},N={};return u&&(N.onMouseOver=L),Be.createElement("div",qF({style:P.swatch,onClick:T,title:p,tabIndex:0,onKeyDown:O},N),d,x&&Be.createElement(Lg,{borderRadius:P.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Ip=Dme(Fme);var Bme=function(t){var r=t.direction,n=ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Be.createElement("div",{style:n.picker})},jme=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iq=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,u=t.onChange,a=t.direction,p=t.style,d=t.renderers,m=t.pointer,v=t.className,w=v===void 0?"":v,x=ti({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:p}}});return Be.createElement("div",{style:x.picker,className:"alpha-picker "+w},Be.createElement(JI,jme({},x.alpha,{rgb:r,hsl:n,pointer:m,renderers:d,onChange:u,direction:a})))};Iq.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Bme};su(Iq);function Mq(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var zme="__lodash_hash_undefined__";function $me(e){return this.__data__.set(e,zme),this}function Ume(e){return this.__data__.has(e)}function u1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ph;++t<r;)this.add(e[t])}u1.prototype.add=u1.prototype.push=$me;u1.prototype.has=Ume;function qme(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Vme(e,t){return e.has(t)}var Gme=1,Hme=2;function Rq(e,t,r,n,i,o){var u=r&Gme,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var d=o.get(e),m=o.get(t);if(d&&m)return d==t&&m==e;var v=-1,w=!0,x=r&Hme?new u1:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var P=e[v],T=t[v];if(n)var O=u?n(T,P,v,t,e,o):n(P,T,v,e,t,o);if(O!==void 0){if(O)continue;w=!1;break}if(x){if(!qme(t,function(L,N){if(!Vme(x,N)&&(P===L||i(P,L,r,n,o)))return x.push(N)})){w=!1;break}}else if(!(P===T||i(P,T,r,n,o))){w=!1;break}}return o.delete(e),o.delete(t),w}function Wme(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Zme(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Kme=1,Xme=2,Yme="[object Boolean]",Jme="[object Date]",Qme="[object Error]",ege="[object Map]",tge="[object Number]",rge="[object RegExp]",nge="[object Set]",ige="[object String]",age="[object Symbol]",oge="[object ArrayBuffer]",sge="[object DataView]",VF=Qh?Qh.prototype:void 0,rC=VF?VF.valueOf:void 0;function lge(e,t,r,n,i,o,u){switch(r){case sge:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oge:return!(e.byteLength!=t.byteLength||!o(new a1(e),new a1(t)));case Yme:case Jme:case tge:return N0(+e,+t);case Qme:return e.name==t.name&&e.message==t.message;case rge:case ige:return e==t+"";case ege:var a=Wme;case nge:var p=n&Kme;if(a||(a=Zme),e.size!=t.size&&!p)return!1;var d=u.get(e);if(d)return d==t;n|=Xme,u.set(e,t);var m=Rq(a(e),a(t),n,i,o,u);return u.delete(e),m;case age:if(rC)return rC.call(e)==rC.call(t)}return!1}function uge(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function cge(e,t,r){var n=t(e);return Bu(e)?n:uge(n,r(e))}function fge(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o}function hge(){return[]}var dge=Object.prototype,pge=dge.propertyIsEnumerable,GF=Object.getOwnPropertySymbols,mge=GF?function(e){return e==null?[]:(e=Object(e),fge(GF(e),function(t){return pge.call(e,t)}))}:hge;function HF(e){return cge(e,aM,mge)}var gge=1,yge=Object.prototype,vge=yge.hasOwnProperty;function bge(e,t,r,n,i,o){var u=r&gge,a=HF(e),p=a.length,d=HF(t),m=d.length;if(p!=m&&!u)return!1;for(var v=p;v--;){var w=a[v];if(!(u?w in t:vge.call(t,w)))return!1}var x=o.get(e),P=o.get(t);if(x&&P)return x==t&&P==e;var T=!0;o.set(e,t),o.set(t,e);for(var O=u;++v<p;){w=a[v];var L=e[w],N=t[w];if(n)var F=u?n(N,L,w,t,e,o):n(L,N,w,e,t,o);if(!(F===void 0?L===N||i(L,N,r,n,o):F)){T=!1;break}O||(O=w=="constructor")}if(T&&!O){var D=e.constructor,q=t.constructor;D!=q&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof q=="function"&&q instanceof q)&&(T=!1)}return o.delete(e),o.delete(t),T}var nT=Tp(Fc,"DataView"),iT=Tp(Fc,"Promise"),aT=Tp(Fc,"Set"),oT=Tp(Fc,"WeakMap"),WF="[object Map]",_ge="[object Object]",ZF="[object Promise]",KF="[object Set]",XF="[object WeakMap]",YF="[object DataView]",xge=Pp(nT),wge=Pp(i0),Sge=Pp(iT),Ege=Pp(aT),Cge=Pp(oT),Dh=Ap;(nT&&Dh(new nT(new ArrayBuffer(1)))!=YF||i0&&Dh(new i0)!=WF||iT&&Dh(iT.resolve())!=ZF||aT&&Dh(new aT)!=KF||oT&&Dh(new oT)!=XF)&&(Dh=function(e){var t=Ap(e),r=t==_ge?e.constructor:void 0,n=r?Pp(r):"";if(n)switch(n){case xge:return YF;case wge:return WF;case Sge:return ZF;case Ege:return KF;case Cge:return XF}return t});var Age=1,JF="[object Arguments]",QF="[object Array]",qb="[object Object]",Pge=Object.prototype,e8=Pge.hasOwnProperty;function Tge(e,t,r,n,i,o){var u=Bu(e),a=Bu(t),p=u?QF:Dh(e),d=a?QF:Dh(t);p=p==JF?qb:p,d=d==JF?qb:d;var m=p==qb,v=d==qb,w=p==d;if(w&&s1(e)){if(!s1(t))return!1;u=!0,m=!1}if(w&&!m)return o||(o=new bf),u||nM(e)?Rq(e,t,r,n,i,o):lge(e,t,p,r,n,i,o);if(!(r&Age)){var x=m&&e8.call(e,"__wrapped__"),P=v&&e8.call(t,"__wrapped__");if(x||P){var T=x?e.value():e,O=P?t.value():t;return o||(o=new bf),i(T,O,r,n,o)}}return w?(o||(o=new bf),bge(e,t,r,n,i,o)):!1}function sM(e,t,r,n,i){return e===t?!0:e==null||t==null||!ed(e)&&!ed(t)?e!==e&&t!==t:Tge(e,t,r,n,sM,i)}var Ige=1,Mge=2;function Rge(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var u=r[i];if(u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){u=r[i];var a=u[0],p=e[a],d=u[1];if(u[2]){if(p===void 0&&!(a in e))return!1}else{var m=new bf,v;if(!(v===void 0?sM(d,p,Ige|Mge,n,m):v))return!1}}return!0}function Oq(e){return e===e&&!ac(e)}function Oge(e){for(var t=aM(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Oq(i)]}return t}function kq(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function kge(e){var t=Oge(e);return t.length==1&&t[0][2]?kq(t[0][0],t[0][1]):function(r){return r===e||Rge(r,e,t)}}var Lge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dge=/^\w*$/;function lM(e,t){if(Bu(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||r2(e)?!0:Dge.test(e)||!Lge.test(e)||t!=null&&e in Object(t)}var Nge="Expected a function";function uM(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Nge);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(uM.Cache||ph),r}uM.Cache=ph;var Fge=500;function Bge(e){var t=uM(e,function(n){return r.size===Fge&&r.clear(),n}),r=t.cache;return t}var jge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zge=/\\(\\)?/g,$ge=Bge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jge,function(r,n,i,o){t.push(i?o.replace(zge,"$1"):n||r)}),t}),t8=Qh?Qh.prototype:void 0,r8=t8?t8.toString:void 0;function Lq(e){if(typeof e=="string")return e;if(Bu(e))return Mq(e,Lq)+"";if(r2(e))return r8?r8.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Uge(e){return e==null?"":Lq(e)}function Dq(e,t){return Bu(e)?e:lM(e,t)?[e]:$ge(Uge(e))}function a2(e){if(typeof e=="string"||r2(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Nq(e,t){t=Dq(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[a2(t[r++])];return r&&r==n?e:void 0}function qge(e,t,r){var n=e==null?void 0:Nq(e,t);return n===void 0?r:n}function Vge(e,t){return e!=null&&t in Object(e)}function Gge(e,t,r){t=Dq(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var u=a2(t[n]);if(!(o=e!=null&&r(e,u)))break;e=e[u]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&rM(i)&&iM(u,i)&&(Bu(e)||o1(e)))}function Hge(e,t){return e!=null&&Gge(e,t,Vge)}var Wge=1,Zge=2;function Kge(e,t){return lM(e)&&Oq(t)?kq(a2(e),t):function(r){var n=qge(r,e);return n===void 0&&n===t?Hge(r,e):sM(t,n,Wge|Zge)}}function Xge(e){return function(t){return t?.[e]}}function Yge(e){return function(t){return Nq(t,e)}}function Jge(e){return lM(e)?Xge(a2(e)):Yge(e)}function Qge(e){return typeof e=="function"?e:e==null?t2:typeof e=="object"?Bu(e)?Kge(e[0],e[1]):kge(e):Jge(e)}function eye(e,t){var r=-1,n=Ng(e)?Array(e.length):[];return Aq(e,function(i,o,u){n[++r]=t(i,o,u)}),n}function Mp(e,t){var r=Bu(e)?Mq:eye;return r(e,Qge(t))}var tye=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=ti({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Be.createElement("div",{style:o.swatches},Mp(r,function(u){return Be.createElement(Ip,{key:u,color:u,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+u}})}),Be.createElement("div",{style:o.clear}))},cM=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,p=t.styles,d=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=i==="transparent",x=function(O,L){od(O)&&r({hex:O,source:"hex"},L)},P=ti(ou({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:oM(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},d),{"hide-triangle":a==="hide"});return Be.createElement("div",{style:P.card,className:"block-picker "+v},Be.createElement("div",{style:P.triangle}),Be.createElement("div",{style:P.head},w&&Be.createElement(Lg,{borderRadius:"6px 6px 0 0"}),Be.createElement("div",{style:P.label},i)),Be.createElement("div",{style:P.body},Be.createElement(tye,{colors:o,onClick:x,onSwatchHover:n}),Be.createElement(ki,{style:{input:P.input},value:i,onChange:x})))};cM.propTypes={width:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.string),triangle:tn.oneOf(["top","hide"]),styles:tn.object};cM.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};su(cM);var Am={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Pm={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Tm={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Im={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Mm={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Rm={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Om={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},km={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Lm={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},uv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Dm={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Nm={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Fm={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Bm={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},jm={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},zm={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},$m={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Um={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},Fq=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,u=t.active,a=t.circleSize,p=t.circleSpacing,d=ti({default:{swatch:{width:a,height:a,marginRight:p,marginBottom:p,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:u});return Be.createElement("div",{style:d.swatch},Be.createElement(Ip,{style:d.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+r}}))};Fq.defaultProps={circleSize:28,circleSpacing:14};const rye=YI.handleHover(Fq);var fM=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,u=t.hex,a=t.circleSize,p=t.styles,d=p===void 0?{}:p,m=t.circleSpacing,v=t.className,w=v===void 0?"":v,x=ti(ou({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-m,marginBottom:-m}}},d)),P=function(O,L){return n({hex:O,source:"hex"},L)};return Be.createElement("div",{style:x.card,className:"circle-picker "+w},Mp(o,function(T){return Be.createElement(rye,{key:T,color:T,onClick:P,onSwatchHover:i,active:u===T.toLowerCase(),circleSize:a,circleSpacing:m})}))};fM.propTypes={width:tn.oneOfType([tn.string,tn.number]),circleSize:tn.number,circleSpacing:tn.number,styles:tn.object};fM.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Am[500],Pm[500],Tm[500],Im[500],Mm[500],Rm[500],Om[500],km[500],Lm[500],uv[500],Dm[500],Nm[500],Fm[500],Bm[500],jm[500],zm[500],$m[500],Um[500]],styles:{}};su(fM);function n8(e){return e===void 0}var Vb={},i8;function nye(){if(i8)return Vb;i8=1,Object.defineProperty(Vb,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u},t=ux(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var d in u)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(u,d)&&(p[d]=u[d]);return p}var o=24;return Vb.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,d=u.width,m=d===void 0?o:d,v=u.height,w=v===void 0?o:v,x=u.style,P=x===void 0?{}:x,T=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:p,width:m,height:w},P)},T),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Vb}var iye=nye();const aye=Us(iye);var oye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bq=(function(e){uye(t,e);function t(r){sye(this,t);var n=lye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?od(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(n8(i.s)?n.props.hsl.s:i.s),l:Number(n8(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return oye(t,[{key:"render",value:function(){var n=this,i=ti({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=Be.createElement("div",{style:i.fields,className:"flexbox-fix"},Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=Be.createElement("div",{style:i.fields,className:"flexbox-fix"},Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Be.createElement("div",{style:i.alpha},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=Be.createElement("div",{style:i.fields,className:"flexbox-fix"},Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Be.createElement("div",{style:i.field},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Be.createElement("div",{style:i.alpha},Be.createElement(ki,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Be.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,Be.createElement("div",{style:i.toggle},Be.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},Be.createElement(aye,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(Be.Component);Bq.defaultProps={view:"hex"};var a8=function(){var t=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Be.createElement("div",{style:t.picker})},cye=function(){var t=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Be.createElement("div",{style:t.picker})},hM=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,u=t.hsl,a=t.hsv,p=t.hex,d=t.renderers,m=t.styles,v=m===void 0?{}:m,w=t.className,x=w===void 0?"":w,P=t.defaultView,T=ti(ou({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:i});return Be.createElement("div",{style:T.picker,className:"chrome-picker "+x},Be.createElement("div",{style:T.saturation},Be.createElement(n2,{style:T.Saturation,hsl:u,hsv:a,pointer:cye,onChange:n})),Be.createElement("div",{style:T.body},Be.createElement("div",{style:T.controls,className:"flexbox-fix"},Be.createElement("div",{style:T.color},Be.createElement("div",{style:T.swatch},Be.createElement("div",{style:T.active}),Be.createElement(Lg,{renderers:d}))),Be.createElement("div",{style:T.toggles},Be.createElement("div",{style:T.hue},Be.createElement(Dg,{style:T.Hue,hsl:u,pointer:a8,onChange:n})),Be.createElement("div",{style:T.alpha},Be.createElement(JI,{style:T.Alpha,rgb:o,hsl:u,pointer:a8,renderers:d,onChange:n})))),Be.createElement(Bq,{rgb:o,hsl:u,hex:p,view:P,onChange:n,disableAlpha:i})))};hM.propTypes={width:tn.oneOfType([tn.string,tn.number]),disableAlpha:tn.bool,styles:tn.object,defaultView:tn.oneOf(["hex","rgb","hsl"])};hM.defaultProps={width:225,disableAlpha:!1,styles:{}};su(hM);var fye=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.active,a=ti({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:oM(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Be.createElement(Ip,{style:a.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},Be.createElement("div",{style:a.dot}))},hye=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=ti({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),u=function(p,d){p.r||p.g||p.b?i({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},d):i({hex:p.hex,source:"hex"},d)};return Be.createElement("div",{style:o.fields,className:"flexbox-fix"},Be.createElement("div",{style:o.active}),Be.createElement(ki,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:u}),Be.createElement(ki,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:u}),Be.createElement(ki,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:u}),Be.createElement(ki,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:u}))},dM=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,u=t.rgb,a=t.styles,p=a===void 0?{}:a,d=t.className,m=d===void 0?"":d,v=ti(ou({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},p)),w=function(P,T){P.hex?od(P.hex)&&r({hex:P.hex,source:"hex"},T):r(P,T)};return Be.createElement(F0,{style:v.Compact,styles:p},Be.createElement("div",{style:v.compact,className:"compact-picker "+m},Be.createElement("div",null,Mp(i,function(x){return Be.createElement(fye,{key:x,color:x,active:x.toLowerCase()===o,onClick:w,onSwatchHover:n})}),Be.createElement("div",{style:v.clear})),Be.createElement(hye,{hex:o,rgb:u,onChange:w})))};dM.propTypes={colors:tn.arrayOf(tn.string),styles:tn.object};dM.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};su(dM);var dye=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,u={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ti({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:u}},{hover:r});return Be.createElement("div",{style:a.swatch},Be.createElement(Ip,{color:n,onClick:i,onHover:o,focusStyle:u}))};const pye=YI.handleHover(dye);var pM=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,u=t.triangle,a=t.styles,p=a===void 0?{}:a,d=t.className,m=d===void 0?"":d,v=ti(ou({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},p),{"hide-triangle":u==="hide","top-left-triangle":u==="top-left","top-right-triangle":u==="top-right","bottom-left-triangle":u==="bottom-left","bottom-right-triangle":u==="bottom-right"}),w=function(P,T){return i({hex:P,source:"hex"},T)};return Be.createElement("div",{style:v.card,className:"github-picker "+m},Be.createElement("div",{style:v.triangleShadow}),Be.createElement("div",{style:v.triangle}),Mp(n,function(x){return Be.createElement(pye,{color:x,key:x,onClick:w,onSwatchHover:o})}))};pM.propTypes={width:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.string),triangle:tn.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:tn.object};pM.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};su(pM);var mye=function(t){var r=t.direction,n=ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Be.createElement("div",{style:n.picker})},gye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mM=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,u=t.direction,a=t.pointer,p=t.styles,d=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(ou({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},d)),x=function(T){return i({a:1,h:T.h,l:.5,s:1})};return Be.createElement("div",{style:w.picker,className:"hue-picker "+v},Be.createElement(Dg,gye({},w.hue,{hsl:o,pointer:a,onChange:x,direction:u})))};mM.propTypes={styles:tn.object};mM.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:mye,styles:{}};su(mM);var yye=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,u=o===void 0?{}:o,a=t.className,p=a===void 0?"":a,d=ti(ou({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},u)),m=function(w,x){w.hex?od(w.hex)&&r({hex:w.hex,source:"hex"},x):(w.r||w.g||w.b)&&r({r:w.r||i.r,g:w.g||i.g,b:w.b||i.b,source:"rgb"},x)};return Be.createElement(F0,{styles:u},Be.createElement("div",{style:d.material,className:"material-picker "+p},Be.createElement(ki,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:m}),Be.createElement("div",{style:d.split,className:"flexbox-fix"},Be.createElement("div",{style:d.third},Be.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:i.r,onChange:m})),Be.createElement("div",{style:d.third},Be.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:i.g,onChange:m})),Be.createElement("div",{style:d.third},Be.createElement(ki,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:i.b,onChange:m})))))};su(yye);var vye=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,u=ti({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(d,m){d["#"]?od(d["#"])&&r({hex:d["#"],source:"hex"},m):d.r||d.g||d.b?r({r:d.r||n.r,g:d.g||n.g,b:d.b||n.b,source:"rgb"},m):(d.h||d.s||d.v)&&r({h:d.h||i.h,s:d.s||i.s,v:d.v||i.v,source:"hsv"},m)};return Be.createElement("div",{style:u.fields},Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),Be.createElement("div",{style:u.divider}),Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:a}),Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:a}),Be.createElement(ki,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:a}),Be.createElement("div",{style:u.divider}),Be.createElement(ki,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),Be.createElement("div",{style:u.fieldSymbols},Be.createElement("div",{style:u.symbol},""),Be.createElement("div",{style:u.symbol},"%"),Be.createElement("div",{style:u.symbol},"%")))},bye=function(t){var r=t.hsl,n=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return Be.createElement("div",{style:n.picker})},_ye=function(){var t=ti({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Be.createElement("div",{style:t.pointer},Be.createElement("div",{style:t.left},Be.createElement("div",{style:t.leftInside})),Be.createElement("div",{style:t.right},Be.createElement("div",{style:t.rightInside})))},o8=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,u=ti({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return Be.createElement("div",{style:u.button,onClick:r},n||i)},xye=function(t){var r=t.rgb,n=t.currentColor,i=ti({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Be.createElement("div",null,Be.createElement("div",{style:i.label},"new"),Be.createElement("div",{style:i.swatches},Be.createElement("div",{style:i.new}),Be.createElement("div",{style:i.current})),Be.createElement("div",{style:i.label},"current"))},wye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Sye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gM=(function(e){Cye(t,e);function t(r){Sye(this,t);var n=Eye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return wye(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,u=n.className,a=u===void 0?"":u,p=ti(ou({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return Be.createElement("div",{style:p.picker,className:"photoshop-picker "+a},Be.createElement("div",{style:p.head},this.props.header),Be.createElement("div",{style:p.body,className:"flexbox-fix"},Be.createElement("div",{style:p.saturation},Be.createElement(n2,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:bye,onChange:this.props.onChange})),Be.createElement("div",{style:p.hue},Be.createElement(Dg,{direction:"vertical",hsl:this.props.hsl,pointer:_ye,onChange:this.props.onChange})),Be.createElement("div",{style:p.controls},Be.createElement("div",{style:p.top,className:"flexbox-fix"},Be.createElement("div",{style:p.previews},Be.createElement(xye,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Be.createElement("div",{style:p.actions},Be.createElement(o8,{label:"OK",onClick:this.props.onAccept,active:!0}),Be.createElement(o8,{label:"Cancel",onClick:this.props.onCancel}),Be.createElement(vye,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(Be.Component);gM.propTypes={header:tn.string,styles:tn.object};gM.defaultProps={header:"Color Picker",styles:{}};su(gM);var Aye=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.disableAlpha,a=ti({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),p=function(m,v){m.hex?od(m.hex)&&r({hex:m.hex,source:"hex"},v):m.r||m.g||m.b?r({r:m.r||n.r,g:m.g||n.g,b:m.b||n.b,a:n.a,source:"rgb"},v):m.a&&(m.a<0?m.a=0:m.a>100&&(m.a=100),m.a/=100,r({h:i.h,s:i.s,l:i.l,a:m.a,source:"rgb"},v))};return Be.createElement("div",{style:a.fields,className:"flexbox-fix"},Be.createElement("div",{style:a.double},Be.createElement(ki,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:p})),Be.createElement("div",{style:a.single},Be.createElement(ki,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:p,dragLabel:"true",dragMax:"255"})),Be.createElement("div",{style:a.single},Be.createElement(ki,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:p,dragLabel:"true",dragMax:"255"})),Be.createElement("div",{style:a.single},Be.createElement(ki,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:p,dragLabel:"true",dragMax:"255"})),Be.createElement("div",{style:a.alpha},Be.createElement(ki,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:p,dragLabel:"true",dragMax:"100"})))},Pye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jq=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=ti({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(d,m){i({hex:d,source:"hex"},m)};return Be.createElement("div",{style:u.colors,className:"flexbox-fix"},r.map(function(p){var d=typeof p=="string"?{color:p}:p,m=""+d.color+(d.title||"");return Be.createElement("div",{key:m,style:u.swatchWrap},Be.createElement(Ip,Pye({},d,{style:u.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+d.color}})))}))};jq.propTypes={colors:tn.arrayOf(tn.oneOfType([tn.string,tn.shape({color:tn.string,title:tn.string})])).isRequired};var Tye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yM=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,u=t.hsl,a=t.onChange,p=t.onSwatchHover,d=t.disableAlpha,m=t.presetColors,v=t.renderers,w=t.styles,x=w===void 0?{}:w,P=t.className,T=P===void 0?"":P,O=ti(ou({default:Tye({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},x),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},x),{disableAlpha:d});return Be.createElement("div",{style:O.picker,className:"sketch-picker "+T},Be.createElement("div",{style:O.saturation},Be.createElement(n2,{style:O.Saturation,hsl:u,hsv:o,onChange:a})),Be.createElement("div",{style:O.controls,className:"flexbox-fix"},Be.createElement("div",{style:O.sliders},Be.createElement("div",{style:O.hue},Be.createElement(Dg,{style:O.Hue,hsl:u,onChange:a})),Be.createElement("div",{style:O.alpha},Be.createElement(JI,{style:O.Alpha,rgb:n,hsl:u,renderers:v,onChange:a}))),Be.createElement("div",{style:O.color},Be.createElement(Lg,null),Be.createElement("div",{style:O.activeColor}))),Be.createElement(Aye,{rgb:n,hsl:u,hex:i,onChange:a,disableAlpha:d}),Be.createElement(jq,{colors:m,onClick:a,onSwatchHover:p}))};yM.propTypes={disableAlpha:tn.bool,width:tn.oneOfType([tn.string,tn.number]),styles:tn.object};yM.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};su(yM);var Ny=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,u=t.active,a=t.first,p=t.last,d=ti({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:u,first:a,last:p}),m=function(w){return o({h:r.h,s:.5,l:n,source:"hsl"},w)};return Be.createElement("div",{style:d.swatch,onClick:m})},Iye=function(t){var r=t.onClick,n=t.hsl,i=ti({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return Be.createElement("div",{style:i.swatches},Be.createElement("div",{style:i.swatch},Be.createElement(Ny,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),Be.createElement("div",{style:i.swatch},Be.createElement(Ny,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),Be.createElement("div",{style:i.swatch},Be.createElement(Ny,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),Be.createElement("div",{style:i.swatch},Be.createElement(Ny,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),Be.createElement("div",{style:i.swatch},Be.createElement(Ny,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),Be.createElement("div",{style:i.clear}))},Mye=function(){var t=ti({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Be.createElement("div",{style:t.picker})},vM=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,u=o===void 0?{}:o,a=t.className,p=a===void 0?"":a,d=ti(ou({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},u));return Be.createElement("div",{style:d.wrap||{},className:"slider-picker "+p},Be.createElement("div",{style:d.hue},Be.createElement(Dg,{style:d.Hue,hsl:r,pointer:i,onChange:n})),Be.createElement("div",{style:d.swatches},Be.createElement(Iye,{hsl:r,onClick:n})))};vM.propTypes={styles:tn.object};vM.defaultProps={pointer:Mye,styles:{}};su(vM);var Gb={},s8;function Rye(){if(s8)return Gb;s8=1,Object.defineProperty(Gb,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(u[d]=p[d])}return u},t=ux(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var d in u)a.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(u,d)&&(p[d]=u[d]);return p}var o=24;return Gb.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,d=u.width,m=d===void 0?o:d,v=u.height,w=v===void 0?o:v,x=u.style,P=x===void 0?{}:x,T=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:p,width:m,height:w},P)},T),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Gb}var Oye=Rye();const kye=Us(Oye);var Lye=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.first,a=t.last,p=t.active,d=ti({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:oM(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:u,last:a,active:p,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Be.createElement(Ip,{color:r,style:d.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},Be.createElement("div",{style:d.check},Be.createElement(kye,null)))},Dye=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,u=ti({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Be.createElement("div",{style:u.group},Mp(i,function(a,p){return Be.createElement(Lye,{key:a,color:a,active:a.toLowerCase()===o,first:p===0,last:p===i.length-1,onClick:r,onSwatchHover:n})}))},bM=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,u=t.colors,a=t.hex,p=t.styles,d=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(ou({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},d)),x=function(T,O){return i({hex:T,source:"hex"},O)};return Be.createElement("div",{style:w.picker,className:"swatches-picker "+v},Be.createElement(F0,null,Be.createElement("div",{style:w.overflow},Be.createElement("div",{style:w.body},Mp(u,function(P){return Be.createElement(Dye,{key:P.toString(),group:P,active:a,onClick:x,onSwatchHover:o})}),Be.createElement("div",{style:w.clear})))))};bM.propTypes={width:tn.oneOfType([tn.string,tn.number]),height:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.arrayOf(tn.string)),styles:tn.object};bM.defaultProps={width:320,height:240,colors:[[Am[900],Am[700],Am[500],Am[300],Am[100]],[Pm[900],Pm[700],Pm[500],Pm[300],Pm[100]],[Tm[900],Tm[700],Tm[500],Tm[300],Tm[100]],[Im[900],Im[700],Im[500],Im[300],Im[100]],[Mm[900],Mm[700],Mm[500],Mm[300],Mm[100]],[Rm[900],Rm[700],Rm[500],Rm[300],Rm[100]],[Om[900],Om[700],Om[500],Om[300],Om[100]],[km[900],km[700],km[500],km[300],km[100]],[Lm[900],Lm[700],Lm[500],Lm[300],Lm[100]],["#194D33",uv[700],uv[500],uv[300],uv[100]],[Dm[900],Dm[700],Dm[500],Dm[300],Dm[100]],[Nm[900],Nm[700],Nm[500],Nm[300],Nm[100]],[Fm[900],Fm[700],Fm[500],Fm[300],Fm[100]],[Bm[900],Bm[700],Bm[500],Bm[300],Bm[100]],[jm[900],jm[700],jm[500],jm[300],jm[100]],[zm[900],zm[700],zm[500],zm[300],zm[100]],[$m[900],$m[700],$m[500],$m[300],$m[100]],[Um[900],Um[700],Um[500],Um[300],Um[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};su(bM);var _M=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,p=t.styles,d=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(ou({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},d),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),x=function(T,O){od(T)&&r({hex:T,source:"hex"},O)};return Be.createElement("div",{style:w.card,className:"twitter-picker "+v},Be.createElement("div",{style:w.triangleShadow}),Be.createElement("div",{style:w.triangle}),Be.createElement("div",{style:w.body},Mp(o,function(P,T){return Be.createElement(Ip,{key:T,color:P,hex:P,style:w.swatch,onClick:x,onHover:n,focusStyle:{boxShadow:"0 0 4px "+P}})}),Be.createElement("div",{style:w.hash},"#"),Be.createElement(ki,{label:null,style:{input:w.input},value:i.replace("#",""),onChange:x}),Be.createElement("div",{style:w.clear})))};_M.propTypes={width:tn.oneOfType([tn.string,tn.number]),triangle:tn.oneOf(["hide","top-left","top-right"]),colors:tn.arrayOf(tn.string),styles:tn.object};_M.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};su(_M);var xM=function(t){var r=ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return Be.createElement("div",{style:r.picker})};xM.propTypes={hsl:tn.shape({h:tn.number,s:tn.number,l:tn.number,a:tn.number})};xM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var wM=function(t){var r=ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Be.createElement("div",{style:r.picker})};wM.propTypes={hsl:tn.shape({h:tn.number,s:tn.number,l:tn.number,a:tn.number})};wM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Nye=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.hsv,a=function(x,P){if(x.hex)od(x.hex)&&r({hex:x.hex,source:"hex"},P);else if(x.rgb){var T=x.rgb.split(",");tC(x.rgb,"rgb")&&r({r:T[0],g:T[1],b:T[2],a:1,source:"rgb"},P)}else if(x.hsv){var O=x.hsv.split(",");tC(x.hsv,"hsv")&&(O[2]=O[2].replace("%",""),O[1]=O[1].replace("%",""),O[0]=O[0].replace("",""),O[1]==1?O[1]=.01:O[2]==1&&(O[2]=.01),r({h:Number(O[0]),s:Number(O[1]),v:Number(O[2]),source:"hsv"},P))}else if(x.hsl){var L=x.hsl.split(",");tC(x.hsl,"hsl")&&(L[2]=L[2].replace("%",""),L[1]=L[1].replace("%",""),L[0]=L[0].replace("",""),v[1]==1?v[1]=.01:v[2]==1&&(v[2]=.01),r({h:Number(L[0]),s:Number(L[1]),v:Number(L[2]),source:"hsl"},P))}},p=ti({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),d=n.r+", "+n.g+", "+n.b,m=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",v=Math.round(u.h)+", "+Math.round(u.s*100)+"%, "+Math.round(u.v*100)+"%";return Be.createElement("div",{style:p.wrap,className:"flexbox-fix"},Be.createElement("div",{style:p.fields},Be.createElement("div",{style:p.double},Be.createElement(ki,{style:{input:p.input,label:p.label},label:"hex",value:o,onChange:a})),Be.createElement("div",{style:p.column},Be.createElement("div",{style:p.single},Be.createElement(ki,{style:{input:p.input2,label:p.label2},label:"rgb",value:d,onChange:a})),Be.createElement("div",{style:p.single},Be.createElement(ki,{style:{input:p.input2,label:p.label2},label:"hsv",value:v,onChange:a})),Be.createElement("div",{style:p.single},Be.createElement(ki,{style:{input:p.input2,label:p.label2},label:"hsl",value:m,onChange:a})))))},SM=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,u=t.hsv,a=t.hex,p=t.header,d=t.styles,m=d===void 0?{}:d,v=t.className,w=v===void 0?"":v,x=ti(ou({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},m));return Be.createElement("div",{style:x.picker,className:"google-picker "+w},Be.createElement("div",{style:x.head},p),Be.createElement("div",{style:x.swatch}),Be.createElement("div",{style:x.saturation},Be.createElement(n2,{hsl:o,hsv:u,pointer:xM,onChange:n})),Be.createElement("div",{style:x.body},Be.createElement("div",{style:x.controls,className:"flexbox-fix"},Be.createElement("div",{style:x.hue},Be.createElement(Dg,{style:x.Hue,hsl:o,radius:"4px",pointer:wM,onChange:n}))),Be.createElement(Nye,{rgb:i,hsl:o,hex:a,hsv:u,onChange:n})))};SM.propTypes={width:tn.oneOfType([tn.string,tn.number]),styles:tn.object,header:tn.string};SM.defaultProps={width:652,styles:{},header:"Color picker"};su(SM);er(Lc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});er(ad)({marginLeft:"61px"});er(bI)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}));er(Go)({padding:"4px",marginTop:"-3px"});er(R0)({minWidth:"30px"});er(I9)({padding:0});var l8;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(l8||(l8={}));const Fye=Object.freeze({x:0,y:0});var Wm;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Wm||(Wm={}));var u8;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(u8||(u8={}));var Ju;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ju||(Ju={}));Ju.Space,Ju.Enter,Ju.Esc,Ju.Space,Ju.Enter,Ju.Tab;var c8;(function(e){e[e.RightClick=2]="RightClick"})(c8||(c8={}));var f8;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(f8||(f8={}));var h8;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(h8||(h8={}));Wm.Backward+"",Wm.Forward+"",Wm.Backward+"",Wm.Forward+"";var sT;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(sT||(sT={}));var lT;(function(e){e.Optimized="optimized"})(lT||(lT={}));sT.WhileDragging,lT.Optimized;({...Fye});var d8;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(d8||(d8={}));Ju.Down,Ju.Right,Ju.Up,Ju.Left;er(Go)({padding:"4px",marginTop:"-3px"});er(Go)({marginLeft:"20px"});er("div")(()=>({display:"flex",alignItems:"center"}));er(ad)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));er(ad)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}}));er(ad)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}}));er(ad)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}}));er(Mc)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"}));var Oi={},Ps={},p8;function Fg(){if(p8)return Ps;p8=1;function e(L,N,F){if(F===void 0&&(F=Array.prototype),L&&typeof F.find=="function")return F.find.call(L,N);for(var D=0;D<L.length;D++)if(r(L,D)){var q=L[D];if(N.call(void 0,q,D,L))return q}}function t(L,N){return N===void 0&&(N=Object),N&&typeof N.getOwnPropertyDescriptors=="function"&&(L=N.create(null,N.getOwnPropertyDescriptors(L))),N&&typeof N.freeze=="function"?N.freeze(L):L}function r(L,N){return Object.prototype.hasOwnProperty.call(L,N)}function n(L,N){if(L===null||typeof L!="object")throw new TypeError("target is not an object");for(var F in N)r(N,F)&&(L[F]=N[F]);return L}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(L){return r(i,L.toLowerCase())}var u=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(L){return r(u,L.toLowerCase())}var p=t({script:!1,style:!1,textarea:!0,title:!0});function d(L){var N=L.toLowerCase();return r(p,N)&&!p[N]}function m(L){var N=L.toLowerCase();return r(p,N)&&p[N]}function v(L){return L===x.HTML}function w(L){return v(L)||L===x.XML_XHTML_APPLICATION}var x=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),P=Object.keys(x).map(function(L){return x[L]});function T(L){return P.indexOf(L)>-1}var O=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ps.assign=n,Ps.find=e,Ps.freeze=t,Ps.HTML_BOOLEAN_ATTRIBUTES=i,Ps.HTML_RAW_TEXT_ELEMENTS=p,Ps.HTML_VOID_ELEMENTS=u,Ps.hasDefaultHTMLNamespace=w,Ps.hasOwn=r,Ps.isHTMLBooleanAttribute=o,Ps.isHTMLRawTextElement=d,Ps.isHTMLEscapableRawTextElement=m,Ps.isHTMLMimeType=v,Ps.isHTMLVoidElement=a,Ps.isValidMimeType=T,Ps.MIME_TYPE=x,Ps.NAMESPACE=O,Ps}var _m={},m8;function o2(){if(m8)return _m;m8=1;var e=Fg();function t(w,x){w.prototype=Object.create(Error.prototype,{constructor:{value:w},name:{value:w.name,enumerable:!0,writable:x}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(w){return typeof w=="number"&&w>=1&&w<=25}function o(w){return typeof w=="string"&&w.substring(w.length-r.Error.length)===r.Error}function u(w,x){i(w)?(this.name=n[w],this.message=x||""):(this.message=w,this.name=o(x)?x:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,u)}t(u,!0),Object.defineProperties(u.prototype,{code:{enumerable:!0,get:function(){var w=n.indexOf(this.name);return i(w)?w:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},p=Object.entries(a),d=0;d<p.length;d++){var m=p[d][0];u[m]=p[d][1]}function v(w,x){this.message=w,this.locator=x,Error.captureStackTrace&&Error.captureStackTrace(this,v)}return t(v),_m.DOMException=u,_m.DOMExceptionName=r,_m.ExceptionCode=a,_m.ParseError=v,_m}var bo={},ci={},g8;function zq(){if(g8)return ci;g8=1;function e(Mr){try{typeof Mr!="function"&&(Mr=RegExp);var Nr=new Mr("","u").exec("");return!!Nr&&Nr[0].length===2}catch{}return!1}var t=e();function r(Mr){if(Mr.source[0]!=="[")throw new Error(Mr+" can not be used with chars");return Mr.source.slice(1,Mr.source.lastIndexOf("]"))}function n(Mr,Nr){if(Mr.source[0]!=="[")throw new Error("/"+Mr.source+"/ can not be used with chars_without");if(!Nr||typeof Nr!="string")throw new Error(JSON.stringify(Nr)+" is not a valid search");if(Mr.source.indexOf(Nr)===-1)throw new Error('"'+Nr+'" is not is /'+Mr.source+"/");if(Nr==="-"&&Mr.source.indexOf(Nr)!==1)throw new Error('"'+Nr+'" is not at the first postion of /'+Mr.source+"/");return new RegExp(Mr.source.replace(Nr,""),t?"u":"")}function i(Mr){var Nr=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(en){var Vr=typeof en=="string";if(Vr&&Nr===void 0&&en==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return Vr?en:en.source}).join(""),t?"mu":"m")}function o(Mr){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var u="",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var p=/[\x20\x09\x0D\x0A]/,d=r(p),m=i(p,"+"),v=i(p,"*"),w=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(w=i("[",r(w),"\\u{10000}-\\u{10FFFF}","]"));var x=r(w),P=i("[",x,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),T=i(w,P,"*"),O=i(P,"+"),L=i("&",T,";"),N=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),F=o(L,"|",N),D=i("%",T,";"),q=o(i('"',o(/[^%&"]/,"|",D,"|",F),"*",'"'),"|",i("'",o(/[^%&']/,"|",D,"|",F),"*","'")),z=o('"',o(/[^<&"]/,"|",F),"*",'"',"|","'",o(/[^<&']/,"|",F),"*","'"),Z=n(w,":"),Q=n(P,":"),Y=i(Z,Q,"*"),se=i(Y,o(":",Y),"?"),W=i("^",se,"$"),G=i("(",se,")"),ae=o(/"[^"]*"|'[^']*'/),le=i(/^<\?/,"(",T,")",o(m,"(",a,"*?)"),"?",/\?>/),ue=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,ye=o('"',ue,'*"',"|","'",n(ue,"'"),"*'"),Se="<!--",ge="-->",xe=i(Se,o(n(a,"-"),"|",i("-",n(a,"-"))),"*",ge),Fe="#PCDATA",He=o(i(/\(/,v,Fe,o(v,/\|/,v,se),"*",v,/\)\*/),"|",i(/\(/,v,Fe,v,/\)/)),pe=/[?*+]?/,_e=i(/\([^>]+\)/,pe),Ce=o("EMPTY","|","ANY","|",He,"|",_e),ke="<!ELEMENT",$e=i(ke,m,o(se,"|",D),m,o(Ce,"|",D),v,">"),ht=i("NOTATION",m,/\(/,v,T,o(v,/\|/,v,T),"*",v,/\)/),At=i(/\(/,v,O,o(v,/\|/,v,O),"*",v,/\)/),mt=o(ht,"|",At),rt=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",mt),Lt=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",m),"?",z)),Tt=o(m,T,m,rt,m,Lt),Pt="<!ATTLIST",ut=i(Pt,m,T,Tt,"*",v,">"),Le="about:legacy-compat",sr=o('"'+Le+'"',"|","'"+Le+"'"),lr="SYSTEM",dr="PUBLIC",Yt=o(o(lr,m,ae),"|",o(dr,m,ye,m,ae)),Ve=i("^",o(o(lr,m,"(?<SystemLiteralOnly>",ae,")"),"|",o(dr,m,"(?<PubidLiteral>",ye,")",m,"(?<SystemLiteral>",ae,")"))),tt=o(m,"NDATA",m,T),lt=o(q,"|",o(Yt,tt,"?")),Mt="<!ENTITY",Kt=i(Mt,m,T,m,lt,v,">"),Ut=o(q,"|",Yt),ar=i(Mt,m,"%",m,T,m,Ut,v,">"),gr=o(Kt,"|",ar),yr=i(dr,m,ye),Ye=i("<!NOTATION",m,T,m,o(Yt,"|",yr),v,">"),de=i(v,"=",v),he=/1[.]\d+/,Me=i(m,"version",de,o("'",he,"'","|",'"',he,'"')),Ue=/[A-Za-z][-A-Za-z0-9._]*/,Ke=o(m,"encoding",de,o('"',Ue,'"',"|","'",Ue,"'")),Qe=o(m,"standalone",de,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),wt=i(/^<\?xml/,Me,Ke,"?",Qe,"?",v,/\?>/),nt="<!DOCTYPE",Ot="<![CDATA[",Gt="]]>",ir=/<!\[CDATA\[/,Pr=/\]\]>/,bt=i(a,"*?",Pr),Sr=i(ir,bt);return ci.chars=r,ci.chars_without=n,ci.detectUnicodeSupport=e,ci.reg=i,ci.regg=o,ci.ABOUT_LEGACY_COMPAT=Le,ci.ABOUT_LEGACY_COMPAT_SystemLiteral=sr,ci.AttlistDecl=ut,ci.CDATA_START=Ot,ci.CDATA_END=Gt,ci.CDSect=Sr,ci.Char=a,ci.Comment=xe,ci.COMMENT_START=Se,ci.COMMENT_END=ge,ci.DOCTYPE_DECL_START=nt,ci.elementdecl=$e,ci.EntityDecl=gr,ci.EntityValue=q,ci.ExternalID=Yt,ci.ExternalID_match=Ve,ci.Name=T,ci.NotationDecl=Ye,ci.Reference=F,ci.PEReference=D,ci.PI=le,ci.PUBLIC=dr,ci.PubidLiteral=ye,ci.QName=se,ci.QName_exact=W,ci.QName_group=G,ci.S=m,ci.SChar_s=d,ci.S_OPT=v,ci.SYSTEM=lr,ci.SystemLiteral=ae,ci.UNICODE_REPLACEMENT_CHARACTER=u,ci.UNICODE_SUPPORT=t,ci.XMLDecl=wt,ci}var y8;function $q(){if(y8)return bo;y8=1;var e=Fg(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.isHTMLVoidElement,a=e.MIME_TYPE,p=e.NAMESPACE,d=Symbol(),m=o2(),v=m.DOMException,w=m.DOMExceptionName,x=zq();function P(ne){if(ne!==d)throw new TypeError("Illegal constructor")}function T(ne){return ne!==""}function O(ne){return ne?ne.split(/[\t\n\f\r ]+/).filter(T):[]}function L(ne,me){return n(ne,me)||(ne[me]=!0),ne}function N(ne){if(!ne)return[];var me=O(ne);return Object.keys(me.reduce(L,{}))}function F(ne){return function(me){return ne&&ne.indexOf(me)!==-1}}function D(ne){if(!x.QName_exact.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+ne+'"')}function q(ne,me){D(me),ne=ne||null;var qe=null,je=me;if(me.indexOf(":")>=0){var jt=me.split(":");qe=jt[0],je=jt[1]}if(qe!==null&&ne===null)throw new v(v.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(qe==="xml"&&ne!==e.NAMESPACE.XML)throw new v(v.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((qe==="xmlns"||me==="xmlns")&&ne!==e.NAMESPACE.XMLNS)throw new v(v.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(ne===e.NAMESPACE.XMLNS&&qe!=="xmlns"&&me!=="xmlns")throw new v(v.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[ne,qe,je]}function z(ne,me){for(var qe in ne)n(ne,qe)&&(me[qe]=ne[qe])}function Z(ne,me){var qe=ne.prototype;if(!(qe instanceof me)){let je=function(){};je.prototype=me.prototype,je=new je,z(qe,je),ne.prototype=qe=je}qe.constructor!=ne&&(typeof ne!="function"&&console.error("unknown Class:"+ne),qe.constructor=ne)}var Q={},Y=Q.ELEMENT_NODE=1,se=Q.ATTRIBUTE_NODE=2,W=Q.TEXT_NODE=3,G=Q.CDATA_SECTION_NODE=4,ae=Q.ENTITY_REFERENCE_NODE=5,le=Q.ENTITY_NODE=6,ue=Q.PROCESSING_INSTRUCTION_NODE=7,ye=Q.COMMENT_NODE=8,Se=Q.DOCUMENT_NODE=9,ge=Q.DOCUMENT_TYPE_NODE=10,xe=Q.DOCUMENT_FRAGMENT_NODE=11,Fe=Q.NOTATION_NODE=12,He=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function pe(ne,me){if(me.length<ne.length)return pe(me,ne);var qe=null;for(var je in ne){if(ne[je]!==me[je])return qe;qe=ne[je]}return qe}function _e(ne){return ne.guid||(ne.guid=Math.random()),ne.guid}function Ce(){}Ce.prototype={length:0,item:function(ne){return ne>=0&&ne<this.length?this[ne]:null},toString:function(ne){for(var me=[],qe=0;qe<this.length;qe++)Vr(this[qe],me,ne);return me.join("")},filter:function(ne){return Array.prototype.filter.call(this,ne)},indexOf:function(ne){return Array.prototype.indexOf.call(this,ne)}},Ce.prototype[Symbol.iterator]=function(){var ne=this,me=0;return{next:function(){return me<ne.length?{value:ne[me++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function ke(ne,me){this._node=ne,this._refresh=me,$e(this)}function $e(ne){var me=ne._node._inc||ne._node.ownerDocument._inc;if(ne._inc!==me){var qe=ne._refresh(ne._node);if(Wt(ne,"length",qe.length),!ne.$$length||qe.length<ne.$$length)for(var je=qe.length;je in ne;je++)n(ne,je)&&delete ne[je];z(qe,ne),ne._inc=me}}ke.prototype.item=function(ne){return $e(this),this[ne]||null},Z(ke,Ce);function ht(){}function At(ne,me){for(var qe=0;qe<ne.length;){if(ne[qe]===me)return qe;qe++}}function mt(ne,me,qe,je){if(je?me[At(me,je)]=qe:(me[me.length]=qe,me.length++),ne){qe.ownerElement=ne;var jt=ne.ownerDocument;jt&&(je&&lr(jt,ne,je),sr(jt,ne,qe))}}function rt(ne,me,qe){var je=At(me,qe);if(je>=0){for(var jt=me.length-1;je<=jt;)me[je]=me[++je];if(me.length=jt,ne){var Jt=ne.ownerDocument;Jt&&lr(Jt,ne,qe),qe.ownerElement=null}}}ht.prototype={length:0,item:Ce.prototype.item,getNamedItem:function(ne){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase());for(var me=0;me<this.length;){var qe=this[me];if(qe.nodeName===ne)return qe;me++}return null},setNamedItem:function(ne){var me=ne.ownerElement;if(me&&me!==this._ownerElement)throw new v(v.INUSE_ATTRIBUTE_ERR);var qe=this.getNamedItemNS(ne.namespaceURI,ne.localName);return qe===ne?ne:(mt(this._ownerElement,this,ne,qe),qe)},setNamedItemNS:function(ne){return this.setNamedItem(ne)},removeNamedItem:function(ne){var me=this.getNamedItem(ne);if(!me)throw new v(v.NOT_FOUND_ERR,ne);return rt(this._ownerElement,this,me),me},removeNamedItemNS:function(ne,me){var qe=this.getNamedItemNS(ne,me);if(!qe)throw new v(v.NOT_FOUND_ERR,ne?ne+" : "+me:me);return rt(this._ownerElement,this,qe),qe},getNamedItemNS:function(ne,me){ne||(ne=null);for(var qe=0;qe<this.length;){var je=this[qe];if(je.localName===me&&je.namespaceURI===ne)return je;qe++}return null}},ht.prototype[Symbol.iterator]=function(){var ne=this,me=0;return{next:function(){return me<ne.length?{value:ne[me++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Lt(){}Lt.prototype={hasFeature:function(ne,me){return!0},createDocument:function(ne,me,qe){var je=a.XML_APPLICATION;ne===p.HTML?je=a.XML_XHTML_APPLICATION:ne===p.SVG&&(je=a.XML_SVG_IMAGE);var jt=new Le(d,{contentType:je});if(jt.implementation=this,jt.childNodes=new Ce,jt.doctype=qe||null,qe&&jt.appendChild(qe),me){var Jt=jt.createElementNS(ne,me);jt.appendChild(Jt)}return jt},createDocumentType:function(ne,me,qe,je){D(ne);var jt=new nt(d);return jt.name=ne,jt.nodeName=ne,jt.publicId=me||"",jt.systemId=qe||"",jt.internalSubset=je||"",jt.childNodes=new Ce,jt},createHTMLDocument:function(ne){var me=new Le(d,{contentType:a.HTML});if(me.implementation=this,me.childNodes=new Ce,ne!==!1){me.doctype=this.createDocumentType("html"),me.doctype.ownerDocument=me,me.appendChild(me.doctype);var qe=me.createElement("html");me.appendChild(qe);var je=me.createElement("head");if(qe.appendChild(je),typeof ne=="string"){var jt=me.createElement("title");jt.appendChild(me.createTextNode(ne)),je.appendChild(jt)}qe.appendChild(me.createElement("body"))}return me}};function Tt(ne){P(ne)}Tt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var ne=this.getRootNode();return ne&&ne.nodeType===ne.DOCUMENT_NODE},contains:function(ne){if(!ne)return!1;var me=ne;do{if(this===me)return!0;me=ne.parentNode}while(me);return!1},getRootNode:function(ne){var me=this;do{if(!me.parentNode)return me;me=me.parentNode}while(me)},isEqualNode:function(ne){if(!ne||this.nodeType!==ne.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==ne.name||this.publicId!==ne.publicId||this.systemId!==ne.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==ne.namespaceURI||this.prefix!==ne.prefix||this.localName!==ne.localName||this.attributes.length!==ne.attributes.length)return!1;for(var me=0;me<this.attributes.length;me++){var qe=this.attributes.item(me);if(!qe.isEqualNode(ne.getAttributeNodeNS(qe.namespaceURI,qe.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==ne.namespaceURI||this.localName!==ne.localName||this.value!==ne.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==ne.target||this.data!==ne.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==ne.data)return!1;break}if(this.childNodes.length!==ne.childNodes.length)return!1;for(var me=0;me<this.childNodes.length;me++)if(!this.childNodes[me].isEqualNode(ne.childNodes[me]))return!1;return!0},isSameNode:function(ne){return this===ne},insertBefore:function(ne,me){return de(this,ne,me)},replaceChild:function(ne,me){de(this,ne,me,Ye),me&&this.removeChild(me)},removeChild:function(ne){return Yt(this,ne)},appendChild:function(ne){return this.insertBefore(ne,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(ne){return xt(this.ownerDocument||this,this,ne)},normalize:function(){for(var ne=this.firstChild;ne;){var me=ne.nextSibling;me&&me.nodeType==W&&ne.nodeType==W?(this.removeChild(me),ne.appendData(me.data)):(ne.normalize(),ne=me)}},isSupported:function(ne,me){return this.ownerDocument.implementation.hasFeature(ne,me)},lookupPrefix:function(ne){for(var me=this;me;){var qe=me._nsMap;if(qe){for(var je in qe)if(n(qe,je)&&qe[je]===ne)return je}me=me.nodeType==se?me.ownerDocument:me.parentNode}return null},lookupNamespaceURI:function(ne){for(var me=this;me;){var qe=me._nsMap;if(qe&&n(qe,ne))return qe[ne];me=me.nodeType==se?me.ownerDocument:me.parentNode}return null},isDefaultNamespace:function(ne){var me=this.lookupPrefix(ne);return me==null},compareDocumentPosition:function(ne){if(this===ne)return 0;var me=ne,qe=this,je=null,jt=null;if(me instanceof Me&&(je=me,me=je.ownerElement),qe instanceof Me&&(jt=qe,qe=jt.ownerElement,je&&me&&qe===me))for(var Jt=0,Tr;Tr=qe.attributes[Jt];Jt++){if(Tr===je)return He.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+He.DOCUMENT_POSITION_PRECEDING;if(Tr===jt)return He.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+He.DOCUMENT_POSITION_FOLLOWING}if(!me||!qe||qe.ownerDocument!==me.ownerDocument)return He.DOCUMENT_POSITION_DISCONNECTED+He.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(_e(qe.ownerDocument)>_e(me.ownerDocument)?He.DOCUMENT_POSITION_FOLLOWING:He.DOCUMENT_POSITION_PRECEDING);if(jt&&me===qe)return He.DOCUMENT_POSITION_CONTAINS+He.DOCUMENT_POSITION_PRECEDING;if(je&&me===qe)return He.DOCUMENT_POSITION_CONTAINED_BY+He.DOCUMENT_POSITION_FOLLOWING;for(var zr=[],Vt=me.parentNode;Vt;){if(!jt&&Vt===qe)return He.DOCUMENT_POSITION_CONTAINED_BY+He.DOCUMENT_POSITION_FOLLOWING;zr.push(Vt),Vt=Vt.parentNode}zr.reverse();for(var Ir=[],Dr=qe.parentNode;Dr;){if(!je&&Dr===me)return He.DOCUMENT_POSITION_CONTAINS+He.DOCUMENT_POSITION_PRECEDING;Ir.push(Dr),Dr=Dr.parentNode}Ir.reverse();var Sn=pe(zr,Ir);for(var vn in Sn.childNodes){var Rn=Sn.childNodes[vn];if(Rn===qe)return He.DOCUMENT_POSITION_FOLLOWING;if(Rn===me)return He.DOCUMENT_POSITION_PRECEDING;if(Ir.indexOf(Rn)>=0)return He.DOCUMENT_POSITION_FOLLOWING;if(zr.indexOf(Rn)>=0)return He.DOCUMENT_POSITION_PRECEDING}return 0}};function Pt(ne){return ne=="<"&&"&lt;"||ne==">"&&"&gt;"||ne=="&"&&"&amp;"||ne=='"'&&"&quot;"||"&#"+ne.charCodeAt()+";"}z(Q,Tt),z(Q,Tt.prototype),z(He,Tt),z(He,Tt.prototype);function ut(ne,me){if(me(ne))return!0;if(ne=ne.firstChild)do if(ut(ne,me))return!0;while(ne=ne.nextSibling)}function Le(ne,me){P(ne);var qe=me||{};this.ownerDocument=this,this.contentType=qe.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function sr(ne,me,qe){ne&&ne._inc++;var je=qe.namespaceURI;je===p.XMLNS&&(me._nsMap[qe.prefix?qe.localName:""]=qe.value)}function lr(ne,me,qe,je){ne&&ne._inc++;var jt=qe.namespaceURI;jt===p.XMLNS&&delete me._nsMap[qe.prefix?qe.localName:""]}function dr(ne,me,qe){if(ne&&ne._inc){ne._inc++;var je=me.childNodes;if(qe&&!qe.nextSibling)je[je.length++]=qe;else{for(var jt=me.firstChild,Jt=0;jt;)je[Jt++]=jt,jt=jt.nextSibling;je.length=Jt,delete je[je.length]}}}function Yt(ne,me){if(ne!==me.parentNode)throw new v(v.NOT_FOUND_ERR,"child's parent is not parent");var qe=me.previousSibling,je=me.nextSibling;return qe?qe.nextSibling=je:ne.firstChild=je,je?je.previousSibling=qe:ne.lastChild=qe,dr(ne.ownerDocument,ne),me.parentNode=null,me.previousSibling=null,me.nextSibling=null,me}function Ve(ne){return ne&&(ne.nodeType===Tt.DOCUMENT_NODE||ne.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||ne.nodeType===Tt.ELEMENT_NODE)}function tt(ne){return ne&&(ne.nodeType===Tt.CDATA_SECTION_NODE||ne.nodeType===Tt.COMMENT_NODE||ne.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||ne.nodeType===Tt.DOCUMENT_TYPE_NODE||ne.nodeType===Tt.ELEMENT_NODE||ne.nodeType===Tt.PROCESSING_INSTRUCTION_NODE||ne.nodeType===Tt.TEXT_NODE)}function lt(ne){return ne&&ne.nodeType===Tt.DOCUMENT_TYPE_NODE}function Mt(ne){return ne&&ne.nodeType===Tt.ELEMENT_NODE}function Kt(ne){return ne&&ne.nodeType===Tt.TEXT_NODE}function Ut(ne,me){var qe=ne.childNodes||[];if(t(qe,Mt)||lt(me))return!1;var je=t(qe,lt);return!(me&&je&&qe.indexOf(je)>qe.indexOf(me))}function ar(ne,me){var qe=ne.childNodes||[];function je(Jt){return Mt(Jt)&&Jt!==me}if(t(qe,je))return!1;var jt=t(qe,lt);return!(me&&jt&&qe.indexOf(jt)>qe.indexOf(me))}function gr(ne,me,qe){if(!Ve(ne))throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+ne.nodeType);if(qe&&qe.parentNode!==ne)throw new v(v.NOT_FOUND_ERR,"child not in parent");if(!tt(me)||lt(me)&&ne.nodeType!==Tt.DOCUMENT_NODE)throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected node type "+me.nodeType+" for parent node type "+ne.nodeType)}function yr(ne,me,qe){var je=ne.childNodes||[],jt=me.childNodes||[];if(me.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var Jt=jt.filter(Mt);if(Jt.length>1||t(jt,Kt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Jt.length===1&&!Ut(ne,qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Mt(me)&&!Ut(ne,qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(lt(me)){if(t(je,lt))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Tr=t(je,Mt);if(qe&&je.indexOf(Tr)<je.indexOf(qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!qe&&Tr)throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function Ye(ne,me,qe){var je=ne.childNodes||[],jt=me.childNodes||[];if(me.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var Jt=jt.filter(Mt);if(Jt.length>1||t(jt,Kt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(Jt.length===1&&!ar(ne,qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Mt(me)&&!ar(ne,qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(lt(me)){if(t(je,function(Vt){return lt(Vt)&&Vt!==qe}))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var Tr=t(je,Mt);if(qe&&je.indexOf(Tr)<je.indexOf(qe))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function de(ne,me,qe,je){gr(ne,me,qe),ne.nodeType===Tt.DOCUMENT_NODE&&(je||yr)(ne,me,qe);var jt=me.parentNode;if(jt&&jt.removeChild(me),me.nodeType===xe){var Jt=me.firstChild;if(Jt==null)return me;var Tr=me.lastChild}else Jt=Tr=me;var zr=qe?qe.previousSibling:ne.lastChild;Jt.previousSibling=zr,Tr.nextSibling=qe,zr?zr.nextSibling=Jt:ne.firstChild=Jt,qe==null?ne.lastChild=Tr:qe.previousSibling=Tr;do Jt.parentNode=ne;while(Jt!==Tr&&(Jt=Jt.nextSibling));return dr(ne.ownerDocument||ne,ne,me),me.nodeType==xe&&(me.firstChild=me.lastChild=null),me}Le.prototype={implementation:null,nodeName:"#document",nodeType:Se,doctype:null,documentElement:null,_inc:1,insertBefore:function(ne,me){if(ne.nodeType===xe){for(var qe=ne.firstChild;qe;){var je=qe.nextSibling;this.insertBefore(qe,me),qe=je}return ne}return de(this,ne,me),ne.ownerDocument=this,this.documentElement===null&&ne.nodeType===Y&&(this.documentElement=ne),ne},removeChild:function(ne){var me=Yt(this,ne);return me===this.documentElement&&(this.documentElement=null),me},replaceChild:function(ne,me){de(this,ne,me,Ye),ne.ownerDocument=this,me&&this.removeChild(me),Mt(ne)&&(this.documentElement=ne)},importNode:function(ne,me){return gt(this,ne,me)},getElementById:function(ne){var me=null;return ut(this.documentElement,function(qe){if(qe.nodeType==Y&&qe.getAttribute("id")==ne)return me=qe,!0}),me},createElement:function(ne){var me=new he(d);me.ownerDocument=this,this.type==="html"&&(ne=ne.toLowerCase()),r(this.contentType)&&(me.namespaceURI=p.HTML),me.nodeName=ne,me.tagName=ne,me.localName=ne,me.childNodes=new Ce;var qe=me.attributes=new ht;return qe._ownerElement=me,me},createDocumentFragment:function(){var ne=new Pr(d);return ne.ownerDocument=this,ne.childNodes=new Ce,ne},createTextNode:function(ne){var me=new Ke(d);return me.ownerDocument=this,me.childNodes=new Ce,me.appendData(ne),me},createComment:function(ne){var me=new Qe(d);return me.ownerDocument=this,me.childNodes=new Ce,me.appendData(ne),me},createCDATASection:function(ne){var me=new wt(d);return me.ownerDocument=this,me.childNodes=new Ce,me.appendData(ne),me},createProcessingInstruction:function(ne,me){var qe=new bt(d);return qe.ownerDocument=this,qe.childNodes=new Ce,qe.nodeName=qe.target=ne,qe.nodeValue=qe.data=me,qe},createAttribute:function(ne){if(!x.QName_exact.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in name "'+ne+'"');return this.type==="html"&&(ne=ne.toLowerCase()),this._createAttribute(ne)},_createAttribute:function(ne){var me=new Me(d);return me.ownerDocument=this,me.childNodes=new Ce,me.name=ne,me.nodeName=ne,me.localName=ne,me.specified=!0,me},createEntityReference:function(ne){if(!x.Name.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'not a valid xml name "'+ne+'"');if(this.type==="html")throw new v("document is an html document",w.NotSupportedError);var me=new ir(d);return me.ownerDocument=this,me.childNodes=new Ce,me.nodeName=ne,me},createElementNS:function(ne,me){var qe=q(ne,me),je=new he(d),jt=je.attributes=new ht;return je.childNodes=new Ce,je.ownerDocument=this,je.nodeName=me,je.tagName=me,je.namespaceURI=qe[0],je.prefix=qe[1],je.localName=qe[2],jt._ownerElement=je,je},createAttributeNS:function(ne,me){var qe=q(ne,me),je=new Me(d);return je.ownerDocument=this,je.childNodes=new Ce,je.nodeName=me,je.name=me,je.specified=!0,je.namespaceURI=qe[0],je.prefix=qe[1],je.localName=qe[2],je}},Z(Le,Tt);function he(ne){P(ne),this._nsMap=Object.create(null)}he.prototype={nodeType:Y,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===p.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(ne){return!!this.getAttributeNode(ne)},getAttribute:function(ne){var me=this.getAttributeNode(ne);return me?me.value:null},getAttributeNode:function(ne){return this._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase()),this.attributes.getNamedItem(ne)},setAttribute:function(ne,me){this._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase());var qe=this.getAttributeNode(ne);qe?qe.value=qe.nodeValue=""+me:(qe=this.ownerDocument._createAttribute(ne),qe.value=qe.nodeValue=""+me,this.setAttributeNode(qe))},removeAttribute:function(ne){var me=this.getAttributeNode(ne);me&&this.removeAttributeNode(me)},setAttributeNode:function(ne){return this.attributes.setNamedItem(ne)},setAttributeNodeNS:function(ne){return this.attributes.setNamedItemNS(ne)},removeAttributeNode:function(ne){return this.attributes.removeNamedItem(ne.nodeName)},removeAttributeNS:function(ne,me){var qe=this.getAttributeNodeNS(ne,me);qe&&this.removeAttributeNode(qe)},hasAttributeNS:function(ne,me){return this.getAttributeNodeNS(ne,me)!=null},getAttributeNS:function(ne,me){var qe=this.getAttributeNodeNS(ne,me);return qe?qe.value:null},setAttributeNS:function(ne,me,qe){var je=q(ne,me),jt=je[2],Jt=this.getAttributeNodeNS(ne,jt);Jt?Jt.value=Jt.nodeValue=""+qe:(Jt=this.ownerDocument.createAttributeNS(ne,me),Jt.value=Jt.nodeValue=""+qe,this.setAttributeNode(Jt))},getAttributeNodeNS:function(ne,me){return this.attributes.getNamedItemNS(ne,me)},getElementsByClassName:function(ne){var me=N(ne);return new ke(this,function(qe){var je=[];return me.length>0&&ut(qe,function(jt){if(jt!==qe&&jt.nodeType===Y){var Jt=jt.getAttribute("class");if(Jt){var Tr=ne===Jt;if(!Tr){var zr=N(Jt);Tr=me.every(F(zr))}Tr&&je.push(jt)}}}),je})},getElementsByTagName:function(ne){var me=(this.nodeType===Se?this:this.ownerDocument).type==="html",qe=ne.toLowerCase();return new ke(this,function(je){var jt=[];return ut(je,function(Jt){if(!(Jt===je||Jt.nodeType!==Y))if(ne==="*")jt.push(Jt);else{var Tr=Jt.getQualifiedName(),zr=me&&Jt.namespaceURI===p.HTML?qe:ne;Tr===zr&&jt.push(Jt)}}),jt})},getElementsByTagNameNS:function(ne,me){return new ke(this,function(qe){var je=[];return ut(qe,function(jt){jt!==qe&&jt.nodeType===Y&&(ne==="*"||jt.namespaceURI===ne)&&(me==="*"||jt.localName==me)&&je.push(jt)}),je})}},Le.prototype.getElementsByClassName=he.prototype.getElementsByClassName,Le.prototype.getElementsByTagName=he.prototype.getElementsByTagName,Le.prototype.getElementsByTagNameNS=he.prototype.getElementsByTagNameNS,Z(he,Tt);function Me(ne){P(ne),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}Me.prototype.nodeType=se,Z(Me,Tt);function Ue(ne){P(ne)}Ue.prototype={data:"",substringData:function(ne,me){return this.data.substring(ne,ne+me)},appendData:function(ne){ne=this.data+ne,this.nodeValue=this.data=ne,this.length=ne.length},insertData:function(ne,me){this.replaceData(ne,0,me)},deleteData:function(ne,me){this.replaceData(ne,me,"")},replaceData:function(ne,me,qe){var je=this.data.substring(0,ne),jt=this.data.substring(ne+me);qe=je+qe+jt,this.nodeValue=this.data=qe,this.length=qe.length}},Z(Ue,Tt);function Ke(ne){P(ne)}Ke.prototype={nodeName:"#text",nodeType:W,splitText:function(ne){var me=this.data,qe=me.substring(ne);me=me.substring(0,ne),this.data=this.nodeValue=me,this.length=me.length;var je=this.ownerDocument.createTextNode(qe);return this.parentNode&&this.parentNode.insertBefore(je,this.nextSibling),je}},Z(Ke,Ue);function Qe(ne){P(ne)}Qe.prototype={nodeName:"#comment",nodeType:ye},Z(Qe,Ue);function wt(ne){P(ne)}wt.prototype={nodeName:"#cdata-section",nodeType:G},Z(wt,Ke);function nt(ne){P(ne)}nt.prototype.nodeType=ge,Z(nt,Tt);function Ot(ne){P(ne)}Ot.prototype.nodeType=Fe,Z(Ot,Tt);function Gt(ne){P(ne)}Gt.prototype.nodeType=le,Z(Gt,Tt);function ir(ne){P(ne)}ir.prototype.nodeType=ae,Z(ir,Tt);function Pr(ne){P(ne)}Pr.prototype.nodeName="#document-fragment",Pr.prototype.nodeType=xe,Z(Pr,Tt);function bt(ne){P(ne)}bt.prototype.nodeType=ue,Z(bt,Ue);function Sr(){}Sr.prototype.serializeToString=function(ne,me){return Mr.call(ne,me)},Tt.prototype.toString=Mr;function Mr(ne){var me=[],qe=this.nodeType===Se&&this.documentElement||this,je=qe.prefix,jt=qe.namespaceURI;if(jt&&je==null){var je=qe.lookupPrefix(jt);if(je==null)var Jt=[{namespace:jt,prefix:null}]}return Vr(this,me,ne,Jt),me.join("")}function Nr(ne,me,qe){var je=ne.prefix||"",jt=ne.namespaceURI;if(!jt||je==="xml"&&jt===p.XML||jt===p.XMLNS)return!1;for(var Jt=qe.length;Jt--;){var Tr=qe[Jt];if(Tr.prefix===je)return Tr.namespace!==jt}return!0}function en(ne,me,qe){ne.push(" ",me,'="',qe.replace(/[<>&"\t\n\r]/g,Pt),'"')}function Vr(ne,me,qe,je){je||(je=[]);var jt=ne.nodeType===Se?ne:ne.ownerDocument,Jt=jt.type==="html";if(qe)if(ne=qe(ne),ne){if(typeof ne=="string"){me.push(ne);return}}else return;switch(ne.nodeType){case Y:var Tr=ne.attributes,zr=Tr.length,Mi=ne.firstChild,Vt=ne.tagName,Ir=Vt;if(!Jt&&!ne.prefix&&ne.namespaceURI){for(var Dr,Sn=0;Sn<Tr.length;Sn++)if(Tr.item(Sn).name==="xmlns"){Dr=Tr.item(Sn).value;break}if(!Dr)for(var vn=je.length-1;vn>=0;vn--){var Rn=je[vn];if(Rn.prefix===""&&Rn.namespace===ne.namespaceURI){Dr=Rn.namespace;break}}if(Dr!==ne.namespaceURI)for(var vn=je.length-1;vn>=0;vn--){var Rn=je[vn];if(Rn.namespace===ne.namespaceURI){Rn.prefix&&(Ir=Rn.prefix+":"+Vt);break}}}me.push("<",Ir);for(var $r=0;$r<zr;$r++){var Ii=Tr.item($r);Ii.prefix=="xmlns"?je.push({prefix:Ii.localName,namespace:Ii.value}):Ii.nodeName=="xmlns"&&je.push({prefix:"",namespace:Ii.value})}for(var $r=0;$r<zr;$r++){var Ii=Tr.item($r);if(Nr(Ii,Jt,je)){var Li=Ii.prefix||"",Ji=Ii.namespaceURI;en(me,Li?"xmlns:"+Li:"xmlns",Ji),je.push({prefix:Li,namespace:Ji})}Vr(Ii,me,qe,je)}if(Vt===Ir&&Nr(ne,Jt,je)){var Li=ne.prefix||"",Ji=ne.namespaceURI;en(me,Li?"xmlns:"+Li:"xmlns",Ji),je.push({prefix:Li,namespace:Ji})}var vi=!Mi;if(vi&&(Jt||ne.namespaceURI===p.HTML)&&(vi=u(Vt)),vi)me.push("/>");else{if(me.push(">"),Jt&&o(Vt))for(;Mi;)Mi.data?me.push(Mi.data):Vr(Mi,me,qe,je.slice()),Mi=Mi.nextSibling;else for(;Mi;)Vr(Mi,me,qe,je.slice()),Mi=Mi.nextSibling;me.push("</",Ir,">")}return;case Se:case xe:for(var Mi=ne.firstChild;Mi;)Vr(Mi,me,qe,je.slice()),Mi=Mi.nextSibling;return;case se:return en(me,ne.name,ne.value);case W:return me.push(ne.data.replace(/[<&>]/g,Pt));case G:return me.push(x.CDATA_START,ne.data,x.CDATA_END);case ye:return me.push(x.COMMENT_START,ne.data,x.COMMENT_END);case ge:var ni=ne.publicId,Qi=ne.systemId;me.push(x.DOCTYPE_DECL_START," ",ne.name),ni?(me.push(" ",x.PUBLIC," ",ni),Qi&&Qi!=="."&&me.push(" ",Qi)):Qi&&Qi!=="."&&me.push(" ",x.SYSTEM," ",Qi),ne.internalSubset&&me.push(" [",ne.internalSubset,"]"),me.push(">");return;case ue:return me.push("<?",ne.target," ",ne.data,"?>");case ae:return me.push("&",ne.nodeName,";");default:me.push("??",ne.nodeName)}}function gt(ne,me,qe){var je;switch(me.nodeType){case Y:je=me.cloneNode(!1),je.ownerDocument=ne;case xe:break;case se:qe=!0;break}if(je||(je=me.cloneNode(!1)),je.ownerDocument=ne,je.parentNode=null,qe)for(var jt=me.firstChild;jt;)je.appendChild(gt(ne,jt,qe)),jt=jt.nextSibling;return je}function xt(ne,me,qe){var je=new me.constructor(d);for(var jt in me)if(n(me,jt)){var Jt=me[jt];typeof Jt!="object"&&Jt!=je[jt]&&(je[jt]=Jt)}switch(me.childNodes&&(je.childNodes=new Ce),je.ownerDocument=ne,je.nodeType){case Y:var Tr=me.attributes,zr=je.attributes=new ht,Vt=Tr.length;zr._ownerElement=je;for(var Ir=0;Ir<Vt;Ir++)je.setAttributeNode(xt(ne,Tr.item(Ir),!0));break;case se:qe=!0}if(qe)for(var Dr=me.firstChild;Dr;)je.appendChild(xt(ne,Dr,qe)),Dr=Dr.nextSibling;return je}function Wt(ne,me,qe){ne[me]=qe}try{if(Object.defineProperty){let ne=function(me){switch(me.nodeType){case Y:case xe:var qe=[];for(me=me.firstChild;me;)me.nodeType!==7&&me.nodeType!==8&&qe.push(ne(me)),me=me.nextSibling;return qe.join("");default:return me.nodeValue}};Object.defineProperty(ke.prototype,"length",{get:function(){return $e(this),this.$$length}}),Object.defineProperty(Tt.prototype,"textContent",{get:function(){return ne(this)},set:function(me){switch(this.nodeType){case Y:case xe:for(;this.firstChild;)this.removeChild(this.firstChild);(me||String(me))&&this.appendChild(this.ownerDocument.createTextNode(me));break;default:this.data=me,this.value=me,this.nodeValue=me}}}),Wt=function(me,qe,je){me["$$"+qe]=je}}}catch{}return bo._updateLiveList=$e,bo.Attr=Me,bo.CDATASection=wt,bo.CharacterData=Ue,bo.Comment=Qe,bo.Document=Le,bo.DocumentFragment=Pr,bo.DocumentType=nt,bo.DOMImplementation=Lt,bo.Element=he,bo.Entity=Gt,bo.EntityReference=ir,bo.LiveNodeList=ke,bo.NamedNodeMap=ht,bo.Node=Tt,bo.NodeList=Ce,bo.Notation=Ot,bo.Text=Ke,bo.ProcessingInstruction=bt,bo.XMLSerializer=Sr,bo}var Dd={},nC={},v8;function Bye(){return v8||(v8=1,(function(e){var t=Fg().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(nC)),nC}var Fy={},b8;function jye(){if(b8)return Fy;b8=1;var e=Fg(),t=zq(),r=o2(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.hasOwn,a=e.NAMESPACE,p=r.ParseError,d=r.DOMException,m=0,v=1,w=2,x=3,P=4,T=5,O=6,L=7;function N(){}N.prototype={parse:function(ue,ye,Se){var ge=this.domBuilder;ge.startDocument(),Y(ye,ye=Object.create(null)),D(ue,ye,Se,ge,this.errorHandler),ge.endDocument()}};var F=/&#?\w+;?/g;function D(ue,ye,Se,ge,xe){var Fe=i(ge.mimeType);ue.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&xe.warning("Unicode replacement character detected, source encoding issues?");function He(de){if(de>65535){de-=65536;var he=55296+(de>>10),Me=56320+(de&1023);return String.fromCharCode(he,Me)}else return String.fromCharCode(de)}function pe(de){var he=de[de.length-1]===";"?de:de+";";if(!Fe&&he!==de)return xe.error("EntityRef: expecting ;"),de;var Me=t.Reference.exec(he);if(!Me||Me[0].length!==he.length)return xe.error("entity not matching Reference production: "+de),de;var Ue=he.slice(1,-1);return u(Se,Ue)?Se[Ue]:Ue.charAt(0)==="#"?He(parseInt(Ue.substring(1).replace("x","0x"))):(xe.error("entity not found:"+de),de)}function _e(de){if(de>Lt){var he=ue.substring(Lt,de).replace(F,pe);ht&&At(Lt),ge.characters(he,0,de-Lt),Lt=de}}var Ce=0,ke=0,$e=/\r\n?|\n|$/g,ht=ge.locator;function At(de,he){for(;de>=ke&&(he=$e.exec(ue));)Ce=ke,ke=he.index+he[0].length,ht.lineNumber++;ht.columnNumber=de-Ce+1}for(var mt=[{currentNSMap:ye}],rt=[],Lt=0;;){try{var Tt=ue.indexOf("<",Lt);if(Tt<0){if(!Fe&&rt.length>0)return xe.fatalError("unclosed xml tag(s): "+rt.join(", "));if(!ue.substring(Lt).match(/^\s*$/)){var Pt=ge.doc,ut=Pt.createTextNode(ue.substring(Lt));if(Pt.documentElement)return xe.error("Extra content at the end of the document");Pt.appendChild(ut),ge.currentElement=ut}return}if(Tt>Lt){var Le=ue.substring(Lt,Tt);!Fe&&rt.length===0&&(Le=Le.replace(new RegExp(t.S_OPT.source,"g"),""),Le&&xe.error("Unexpected content outside root element: '"+Le+"'")),_e(Tt)}switch(ue.charAt(Tt+1)){case"/":var Ut=ue.indexOf(">",Tt+2),sr=ue.substring(Tt+2,Ut>0?Ut:void 0);if(!sr)return xe.fatalError("end tag name missing");var lr=Ut>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(sr);if(!lr)return xe.fatalError('end tag name contains invalid characters: "'+sr+'"');if(!ge.currentElement&&!ge.doc.documentElement)return;var dr=rt[rt.length-1]||ge.currentElement.tagName||ge.doc.documentElement.tagName||"";if(dr!==lr[1]){var Yt=lr[1].toLowerCase();if(!Fe||dr.toLowerCase()!==Yt)return xe.fatalError('Opening and ending tag mismatch: "'+dr+'" != "'+sr+'"')}var Ve=mt.pop();rt.pop();var tt=Ve.localNSMap;if(ge.endElement(Ve.uri,Ve.localName,dr),tt)for(var lt in tt)u(tt,lt)&&ge.endPrefixMapping(lt);Ut++;break;case"?":ht&&At(Tt),Ut=ae(ue,Tt,ge,xe);break;case"!":ht&&At(Tt),Ut=G(ue,Tt,ge,xe,Fe);break;default:ht&&At(Tt);var Mt=new le,Kt=mt[mt.length-1].currentNSMap,Ut=z(ue,Tt,Mt,Kt,pe,xe,Fe),ar=Mt.length;if(Mt.closed||(Fe&&e.isHTMLVoidElement(Mt.tagName)?Mt.closed=!0:rt.push(Mt.tagName)),ht&&ar){for(var gr=q(ht,{}),yr=0;yr<ar;yr++){var Ye=Mt[yr];At(Ye.offset),Ye.locator=q(ht,{})}ge.locator=gr,Z(Mt,ge,Kt)&&mt.push(Mt),ge.locator=ht}else Z(Mt,ge,Kt)&&mt.push(Mt);Fe&&!Mt.closed?Ut=Q(ue,Ut,Mt.tagName,pe,ge):Ut++}}catch(de){if(de instanceof p)throw de;if(de instanceof d)throw new p(de.name+": "+de.message,ge.locator,de);xe.error("element parse error: "+de),Ut=-1}Ut>Lt?Lt=Ut:_e(Math.max(Tt,Lt)+1)}}function q(ue,ye){return ye.lineNumber=ue.lineNumber,ye.columnNumber=ue.columnNumber,ye}function z(ue,ye,Se,ge,xe,Fe,He){function pe(At,mt,rt){if(u(Se.attributeNames,At))return Fe.fatalError("Attribute "+At+" redefined");if(!He&&mt.indexOf("<")>=0)return Fe.fatalError("Unescaped '<' not allowed in attributes values");Se.addValue(At,mt.replace(/[\t\n\r]/g," ").replace(F,xe),rt)}for(var _e,Ce,ke=++ye,$e=m;;){var ht=ue.charAt(ke);switch(ht){case"=":if($e===v)_e=ue.slice(ye,ke),$e=x;else if($e===w)$e=x;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if($e===x||$e===v)if($e===v&&(Fe.warning('attribute value must after "="'),_e=ue.slice(ye,ke)),ye=ke+1,ke=ue.indexOf(ht,ye),ke>0)Ce=ue.slice(ye,ke),pe(_e,Ce,ye-1),$e=T;else throw new Error("attribute value no end '"+ht+"' match");else if($e==P)Ce=ue.slice(ye,ke),pe(_e,Ce,ye),Fe.warning('attribute "'+_e+'" missed start quot('+ht+")!!"),ye=ke+1,$e=T;else throw new Error('attribute value must after "="');break;case"/":switch($e){case m:Se.setTagName(ue.slice(ye,ke));case T:case O:case L:$e=L,Se.closed=!0;case P:case v:break;case w:Se.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Fe.error("unexpected end of input"),$e==m&&Se.setTagName(ue.slice(ye,ke)),ke;case">":switch($e){case m:Se.setTagName(ue.slice(ye,ke));case T:case O:case L:break;case P:case v:Ce=ue.slice(ye,ke),Ce.slice(-1)==="/"&&(Se.closed=!0,Ce=Ce.slice(0,-1));case w:$e===w&&(Ce=_e),$e==P?(Fe.warning('attribute "'+Ce+'" missed quot(")!'),pe(_e,Ce,ye)):(He||Fe.warning('attribute "'+Ce+'" missed value!! "'+Ce+'" instead!!'),pe(Ce,Ce,ye));break;case x:if(!He)return Fe.fatalError(`AttValue: ' or " expected`)}return ke;case"":ht=" ";default:if(ht<=" ")switch($e){case m:Se.setTagName(ue.slice(ye,ke)),$e=O;break;case v:_e=ue.slice(ye,ke),$e=w;break;case P:var Ce=ue.slice(ye,ke);Fe.warning('attribute "'+Ce+'" missed quot(")!!'),pe(_e,Ce,ye);case T:$e=O;break}else switch($e){case w:He||Fe.warning('attribute "'+_e+'" missed value!! "'+_e+'" instead2!!'),pe(_e,_e,ye),ye=ke,$e=v;break;case T:Fe.warning('attribute space is required"'+_e+'"!!');case O:$e=v,ye=ke;break;case x:$e=P,ye=ke;break;case L:throw new Error("elements closed character '/' and '>' must be connected to")}}ke++}}function Z(ue,ye,Se){for(var ge=ue.tagName,xe=null,$e=ue.length;$e--;){var Fe=ue[$e],He=Fe.qName,pe=Fe.value,ht=He.indexOf(":");if(ht>0)var _e=Fe.prefix=He.slice(0,ht),Ce=He.slice(ht+1),ke=_e==="xmlns"&&Ce;else Ce=He,_e=null,ke=He==="xmlns"&&"";Fe.localName=Ce,ke!==!1&&(xe==null&&(xe=Object.create(null),Y(Se,Se=Object.create(null))),Se[ke]=xe[ke]=pe,Fe.uri=a.XMLNS,ye.startPrefixMapping(ke,pe))}for(var $e=ue.length;$e--;)Fe=ue[$e],Fe.prefix&&(Fe.prefix==="xml"&&(Fe.uri=a.XML),Fe.prefix!=="xmlns"&&(Fe.uri=Se[Fe.prefix]));var ht=ge.indexOf(":");ht>0?(_e=ue.prefix=ge.slice(0,ht),Ce=ue.localName=ge.slice(ht+1)):(_e=null,Ce=ue.localName=ge);var At=ue.uri=Se[_e||""];if(ye.startElement(At,Ce,ge,ue),ue.closed){if(ye.endElement(At,Ce,ge),xe)for(_e in xe)u(xe,_e)&&ye.endPrefixMapping(_e)}else return ue.currentNSMap=Se,ue.localNSMap=xe,!0}function Q(ue,ye,Se,ge,xe){var Fe=n(Se);if(Fe||o(Se)){var He=ue.indexOf("</"+Se+">",ye),pe=ue.substring(ye+1,He);return Fe&&(pe=pe.replace(F,ge)),xe.characters(pe,0,pe.length),He}return ye+1}function Y(ue,ye){for(var Se in ue)u(ue,Se)&&(ye[Se]=ue[Se])}function se(ue,ye){var Se=ye;function ge(ke){return ke=ke||0,ue.charAt(Se+ke)}function xe(ke){ke=ke||1,Se+=ke}function Fe(){for(var ke=0;Se<ue.length;){var $e=ge();if($e!==" "&&$e!==`
`&&$e!=="	"&&$e!=="\r")return ke;ke++,xe()}return-1}function He(){return ue.substring(Se)}function pe(ke){return ue.substring(Se,Se+ke.length)===ke}function _e(ke){return ue.substring(Se,Se+ke.length).toUpperCase()===ke.toUpperCase()}function Ce(ke){var $e=t.reg("^",ke),ht=$e.exec(He());return ht?(xe(ht[0].length),ht[0]):null}return{char:ge,getIndex:function(){return Se},getMatch:Ce,getSource:function(){return ue},skip:xe,skipBlanks:Fe,substringFromIndex:He,substringStartsWith:pe,substringStartsWithCaseInsensitive:_e}}function W(ue,ye){function Se(pe,_e){var Ce=t.PI.exec(pe.substringFromIndex());return Ce?Ce[1].toLowerCase()==="xml"?_e.fatalError("xml declaration is only allowed at the start of the document, but found at position "+pe.getIndex()):(pe.skip(Ce[0].length),Ce[0]):_e.fatalError("processing instruction is not well-formed at position "+pe.getIndex())}var ge=ue.getSource();if(ue.char()==="["){ue.skip(1);for(var xe=ue.getIndex();ue.getIndex()<ge.length;){if(ue.skipBlanks(),ue.char()==="]"){var Fe=ge.substring(xe,ue.getIndex());return ue.skip(1),Fe}var He=null;if(ue.char()==="<"&&ue.char(1)==="!")switch(ue.char(2)){case"E":ue.char(3)==="L"?He=ue.getMatch(t.elementdecl):ue.char(3)==="N"&&(He=ue.getMatch(t.EntityDecl));break;case"A":He=ue.getMatch(t.AttlistDecl);break;case"N":He=ue.getMatch(t.NotationDecl);break;case"-":He=ue.getMatch(t.Comment);break}else if(ue.char()==="<"&&ue.char(1)==="?")He=Se(ue,ye);else if(ue.char()==="%")He=ue.getMatch(t.PEReference);else return ye.fatalError("Error detected in Markup declaration");if(!He)return ye.fatalError("Error in internal subset at position "+ue.getIndex())}return ye.fatalError("doctype internal subset is not well-formed, missing ]")}}function G(ue,ye,Se,ge,xe){var Fe=se(ue,ye);switch(xe?Fe.char(2).toUpperCase():Fe.char(2)){case"-":var He=Fe.getMatch(t.Comment);return He?(Se.comment(He,t.COMMENT_START.length,He.length-t.COMMENT_START.length-t.COMMENT_END.length),Fe.getIndex()):ge.fatalError("comment is not well-formed at position "+Fe.getIndex());case"[":var pe=Fe.getMatch(t.CDSect);return pe?!xe&&!Se.currentElement?ge.fatalError("CDATA outside of element"):(Se.startCDATA(),Se.characters(pe,t.CDATA_START.length,pe.length-t.CDATA_START.length-t.CDATA_END.length),Se.endCDATA(),Fe.getIndex()):ge.fatalError("Invalid CDATA starting at position "+ye);case"D":{if(Se.doc&&Se.doc.documentElement)return ge.fatalError("Doctype not allowed inside or after documentElement at position "+Fe.getIndex());if(xe?!Fe.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!Fe.substringStartsWith(t.DOCTYPE_DECL_START))return ge.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+Fe.getIndex());if(Fe.skip(t.DOCTYPE_DECL_START.length),Fe.skipBlanks()<1)return ge.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+Fe.getIndex());var _e={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(_e.name=Fe.getMatch(t.Name),!_e.name)return ge.fatalError("doctype name missing or contains unexpected characters at position "+Fe.getIndex());if(xe&&_e.name.toLowerCase()!=="html"&&ge.warning("Unexpected DOCTYPE in HTML document at position "+Fe.getIndex()),Fe.skipBlanks(),Fe.substringStartsWith(t.PUBLIC)||Fe.substringStartsWith(t.SYSTEM)){var Ce=t.ExternalID_match.exec(Fe.substringFromIndex());if(!Ce)return ge.fatalError("doctype external id is not well-formed at position "+Fe.getIndex());Ce.groups.SystemLiteralOnly!==void 0?_e.systemId=Ce.groups.SystemLiteralOnly:(_e.systemId=Ce.groups.SystemLiteral,_e.publicId=Ce.groups.PubidLiteral),Fe.skip(Ce[0].length)}else if(xe&&Fe.substringStartsWithCaseInsensitive(t.SYSTEM)){if(Fe.skip(t.SYSTEM.length),Fe.skipBlanks()<1)return ge.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+Fe.getIndex());if(_e.systemId=Fe.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!_e.systemId)return ge.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+Fe.getIndex())}return xe&&_e.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(_e.systemId)&&ge.warning("Unexpected doctype.systemId in HTML document at position "+Fe.getIndex()),xe||(Fe.skipBlanks(),_e.internalSubset=W(Fe,ge)),Fe.skipBlanks(),Fe.char()!==">"?ge.fatalError("doctype not terminated with > at position "+Fe.getIndex()):(Fe.skip(1),Se.startDTD(_e.name,_e.publicId,_e.systemId,_e.internalSubset),Se.endDTD(),Fe.getIndex())}default:return ge.fatalError('Not well-formed XML starting with "<!" at position '+ye)}}function ae(ue,ye,Se,ge){var xe=ue.substring(ye).match(t.PI);if(!xe)return ge.fatalError("Invalid processing instruction starting at position "+ye);if(xe[1].toLowerCase()==="xml"){if(ye>0)return ge.fatalError("processing instruction at position "+ye+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(ue.substring(ye)))return ge.fatalError("xml declaration is not well-formed")}return Se.processingInstruction(xe[1],xe[2]),ye+xe[0].length}function le(){this.attributeNames=Object.create(null)}return le.prototype={setTagName:function(ue){if(!t.QName_exact.test(ue))throw new Error("invalid tagName:"+ue);this.tagName=ue},addValue:function(ue,ye,Se){if(!t.QName_exact.test(ue))throw new Error("invalid attribute:"+ue);this.attributeNames[ue]=this.length,this[this.length++]={qName:ue,value:ye,offset:Se}},length:0,getLocalName:function(ue){return this[ue].localName},getLocator:function(ue){return this[ue].locator},getQName:function(ue){return this[ue].qName},getURI:function(ue){return this[ue].uri},getValue:function(ue){return this[ue].value}},Fy.XMLReader=N,Fy.parseUtils=se,Fy.parseDoctypeCommentOrCData=G,Fy}var _8;function zye(){if(_8)return Dd;_8=1;var e=Fg(),t=$q(),r=o2(),n=Bye(),i=jye(),o=t.DOMImplementation,u=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,p=e.isValidMimeType,d=e.MIME_TYPE,m=e.NAMESPACE,v=r.ParseError,w=i.XMLReader;function x(z){return z.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function P(z){if(z=z||{},z.locator===void 0&&(z.locator=!0),this.assign=z.assign||e.assign,this.domHandler=z.domHandler||T,this.onError=z.onError||z.errorHandler,z.errorHandler&&typeof z.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");z.errorHandler&&z.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=z.normalizeLineEndings||x,this.locator=!!z.locator,this.xmlns=this.assign(Object.create(null),z.xmlns)}P.prototype.parseFromString=function(z,Z){if(!p(Z))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+Z+'" is not valid.');var Q=this.assign(Object.create(null),this.xmlns),Y=n.XML_ENTITIES,se=Q[""]||null;u(Z)?(Y=n.HTML_ENTITIES,se=m.HTML):Z===d.XML_SVG_IMAGE&&(se=m.SVG),Q[""]=se,Q.xml=Q.xml||m.XML;var W=new this.domHandler({mimeType:Z,defaultNamespace:se,onError:this.onError}),G=this.locator?{}:void 0;this.locator&&W.setDocumentLocator(G);var ae=new w;ae.errorHandler=W,ae.domBuilder=W;var le=!e.isHTMLMimeType(Z);return le&&typeof z!="string"&&ae.errorHandler.fatalError("source is not a string"),ae.parse(this.normalizeLineEndings(String(z)),Q,Y),W.doc.documentElement||ae.errorHandler.fatalError("missing root element"),W.doc};function T(z){var Z=z||{};this.mimeType=Z.mimeType||d.XML_APPLICATION,this.defaultNamespace=Z.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=Z.onError}function O(z,Z){Z.lineNumber=z.lineNumber,Z.columnNumber=z.columnNumber}T.prototype={startDocument:function(){var z=new o;this.doc=a(this.mimeType)?z.createHTMLDocument(!1):z.createDocument(this.defaultNamespace,"")},startElement:function(z,Z,Q,Y){var se=this.doc,W=se.createElementNS(z,Q||Z),G=Y.length;F(this,W),this.currentElement=W,this.locator&&O(this.locator,W);for(var ae=0;ae<G;ae++){var z=Y.getURI(ae),le=Y.getValue(ae),Q=Y.getQName(ae),ue=se.createAttributeNS(z,Q);this.locator&&O(Y.getLocator(ae),ue),ue.value=ue.nodeValue=le,W.setAttributeNode(ue)}},endElement:function(z,Z,Q){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(z,Z){},endPrefixMapping:function(z){},processingInstruction:function(z,Z){var Q=this.doc.createProcessingInstruction(z,Z);this.locator&&O(this.locator,Q),F(this,Q)},ignorableWhitespace:function(z,Z,Q){},characters:function(z,Z,Q){if(z=N.apply(this,arguments),z){if(this.cdata)var Y=this.doc.createCDATASection(z);else var Y=this.doc.createTextNode(z);this.currentElement?this.currentElement.appendChild(Y):/^\s*$/.test(z)&&this.doc.appendChild(Y),this.locator&&O(this.locator,Y)}},skippedEntity:function(z){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(z){z&&(z.lineNumber=0),this.locator=z},comment:function(z,Z,Q){z=N.apply(this,arguments);var Y=this.doc.createComment(z);this.locator&&O(this.locator,Y),F(this,Y)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(z,Z,Q,Y){var se=this.doc.implementation;if(se&&se.createDocumentType){var W=se.createDocumentType(z,Z,Q,Y);this.locator&&O(this.locator,W),F(this,W),this.doc.doctype=W}},reportError:function(z,Z){if(typeof this.onError=="function")try{this.onError(z,Z,this)}catch(Q){throw new v("Reporting "+z+' "'+Z+'" caused '+Q,this.locator)}else console.error("[xmldom "+z+"]	"+Z,L(this.locator))},warning:function(z){this.reportError("warning",z)},error:function(z){this.reportError("error",z)},fatalError:function(z){throw this.reportError("fatalError",z),new v(z,this.locator)}};function L(z){if(z)return`
@#[line:`+z.lineNumber+",col:"+z.columnNumber+"]"}function N(z,Z,Q){return typeof z=="string"?z.substr(Z,Q):z.length>=Z+Q||Z?new java.lang.String(z,Z,Q)+"":z}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(z){T.prototype[z]=function(){return null}});function F(z,Z){z.currentElement?z.currentElement.appendChild(Z):z.doc.appendChild(Z)}function D(z){if(z==="error")throw"onErrorStopParsing"}function q(){throw"onWarningStopParsing"}return Dd.__DOMHandler=T,Dd.DOMParser=P,Dd.normalizeLineEndings=x,Dd.onErrorStopParsing=D,Dd.onWarningStopParsing=q,Dd}var x8;function $ye(){if(x8)return Oi;x8=1;var e=Fg();Oi.assign=e.assign,Oi.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,Oi.isHTMLMimeType=e.isHTMLMimeType,Oi.isValidMimeType=e.isValidMimeType,Oi.MIME_TYPE=e.MIME_TYPE,Oi.NAMESPACE=e.NAMESPACE;var t=o2();Oi.DOMException=t.DOMException,Oi.DOMExceptionName=t.DOMExceptionName,Oi.ExceptionCode=t.ExceptionCode,Oi.ParseError=t.ParseError;var r=$q();Oi.Attr=r.Attr,Oi.CDATASection=r.CDATASection,Oi.CharacterData=r.CharacterData,Oi.Comment=r.Comment,Oi.Document=r.Document,Oi.DocumentFragment=r.DocumentFragment,Oi.DocumentType=r.DocumentType,Oi.DOMImplementation=r.DOMImplementation,Oi.Element=r.Element,Oi.Entity=r.Entity,Oi.EntityReference=r.EntityReference,Oi.LiveNodeList=r.LiveNodeList,Oi.NamedNodeMap=r.NamedNodeMap,Oi.Node=r.Node,Oi.NodeList=r.NodeList,Oi.Notation=r.Notation,Oi.ProcessingInstruction=r.ProcessingInstruction,Oi.Text=r.Text,Oi.XMLSerializer=r.XMLSerializer;var n=zye();return Oi.DOMParser=n.DOMParser,Oi.normalizeLineEndings=n.normalizeLineEndings,Oi.onErrorStopParsing=n.onErrorStopParsing,Oi.onWarningStopParsing=n.onWarningStopParsing,Oi}var Uye=$ye();(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(D){if(!D||!D.length)return 0;for(var q=0,z=0;q<D.length;q++)z=(z<<5)-z+D.charCodeAt(q)|0;return z}function i(D,q){return D.getElementsByTagName(q)}function o(D,q){return D.getAttribute(q)}function u(D,q){return parseFloat(o(D,q))}function a(D,q){const z=i(D,q);return z.length?z[0]:null}function p(D){return D.normalize&&D.normalize(),D}function d(D){for(var q=0,z=[];q<D.length;q++)z[q]=parseFloat(D[q]);return z}function m(D){return D&&p(D),D&&D.textContent||""}function v(D,q){let z={},Z,Q;for(Q=0;Q<q.length;Q++)Z=a(D,q[Q]),Z&&(z[q[Q]]=m(Z));return z}function w(D,q){for(const z in q)D[z]=q[z]}function x(D){return d(D.replace(e,"").split(","))}function P(D){const q=D.replace(t,"").split(r),z=[];for(let Z=0;Z<q.length;Z++)z.push(x(q[Z]));return z}function T(D){let q=[u(D,"lon"),u(D,"lat")],z=a(D,"ele"),Z=a(D,"gpxtpx:hr")||a(D,"hr"),Q=a(D,"time"),Y;return z&&(Y=parseFloat(m(z)),isNaN(Y)||q.push(Y)),{coordinates:q,time:Q?m(Q):null,heartRate:Z?parseFloat(m(Z)):null}}function O(){return{type:"FeatureCollection",features:[]}}let L;if(typeof XMLSerializer<"u")L=new XMLSerializer;else{const D=typeof process=="object"&&!process.browser,q=typeof Titanium=="object";if(typeof exports=="object"&&(D||q))L=Uye.XMLSerializer;else throw new Error("Unable to initialize serializer")}function N(D){return D.xml!==void 0?D.xml:L.serializeToString(D)}return{kml:function(D){const q=O(),z={},Z={},Q={},Y=["Polygon","LineString","Point","Track","gx:Track"],se=i(D,"Placemark"),W=i(D,"Style"),G=i(D,"StyleMap");for(let ge=0;ge<W.length;ge++){const xe=n(N(W[ge])).toString(16);z["#"+o(W[ge],"id")]=xe,Z[xe]=W[ge]}for(let ge=0;ge<G.length;ge++){z["#"+o(G[ge],"id")]=n(N(G[ge])).toString(16);const xe=i(G[ge],"Pair"),Fe={};for(let He=0;He<xe.length;He++)Fe[m(a(xe[He],"key"))]=m(a(xe[He],"styleUrl"));Q["#"+o(G[ge],"id")]=Fe}for(let ge=0;ge<se.length;ge++)q.features=q.features.concat(Se(se[ge]));function ae(ge){let xe,Fe;return ge=ge||"",ge.substr(0,1)==="#"&&(ge=ge.substr(1)),(ge.length===6||ge.length===3)&&(xe=ge),ge.length===8&&(Fe=parseInt(ge.substr(0,2),16)/255,xe="#"+ge.substr(6,2)+ge.substr(4,2)+ge.substr(2,2)),[xe,isNaN(Fe)?void 0:Fe]}function le(ge){return d(ge.split(" "))}function ue(ge){let xe=i(ge,"coord"),Fe=[],He=[];xe.length===0&&(xe=i(ge,"gx:coord"));for(let _e=0;_e<xe.length;_e++)Fe.push(le(m(xe[_e])));const pe=i(ge,"when");for(let _e=0;_e<pe.length;_e++)He.push(m(pe[_e]));return{coords:Fe,times:He}}function ye(ge){let xe,Fe,He,pe,_e,Ce=[],ke=[];if(a(ge,"MultiGeometry"))return ye(a(ge,"MultiGeometry"));if(a(ge,"MultiTrack"))return ye(a(ge,"MultiTrack"));if(a(ge,"gx:MultiTrack"))return ye(a(ge,"gx:MultiTrack"));for(He=0;He<Y.length;He++)if(Fe=i(ge,Y[He]),Fe){for(pe=0;pe<Fe.length;pe++)if(xe=Fe[pe],Y[He]==="Point")Ce.push({type:"Point",coordinates:x(m(a(xe,"coordinates")))});else if(Y[He]==="LineString")Ce.push({type:"LineString",coordinates:P(m(a(xe,"coordinates")))});else if(Y[He]==="Polygon"){const $e=i(xe,"LinearRing"),ht=[];for(_e=0;_e<$e.length;_e++)ht.push(P(m(a($e[_e],"coordinates"))));Ce.push({type:"Polygon",coordinates:ht})}else if(Y[He]==="Track"||Y[He]==="gx:Track"){const $e=ue(xe);Ce.push({type:"LineString",coordinates:$e.coords}),$e.times.length&&ke.push($e.times)}}return{geoms:Ce,coordTimes:ke}}function Se(ge){let xe=ye(ge),Fe,He={},pe=m(a(ge,"name")),_e=m(a(ge,"address")),Ce=m(a(ge,"styleUrl")),ke=m(a(ge,"description")),$e=a(ge,"TimeSpan"),ht=a(ge,"TimeStamp"),At=a(ge,"ExtendedData"),mt=a(ge,"LineStyle"),rt=a(ge,"PolyStyle"),Lt=a(ge,"visibility");if(!xe.geoms.length)return[];if(pe&&(He.name=pe),_e&&(He.address=_e),Ce){Ce[0]!=="#"&&(Ce="#"+Ce),He.styleUrl=Ce,z[Ce]&&(He.styleHash=z[Ce]),Q[Ce]&&(He.styleMapHash=Q[Ce],He.styleHash=z[Q[Ce].normal]);const Pt=Z[He.styleHash];if(Pt){mt||(mt=a(Pt,"LineStyle")),rt||(rt=a(Pt,"PolyStyle"));const ut=a(Pt,"IconStyle");if(ut){const Le=a(ut,"Icon");if(Le){const sr=m(a(Le,"href"));sr&&(He.icon=sr)}}}}if(ke&&(He.description=ke),$e){const Pt=m(a($e,"begin")),ut=m(a($e,"end"));He.timespan={begin:Pt,end:ut}}if(ht&&(He.timestamp=m(a(ht,"when"))),mt){const Pt=ae(m(a(mt,"color"))),ut=Pt[0],Le=Pt[1],sr=parseFloat(m(a(mt,"width")));ut&&(He.stroke=ut),isNaN(Le)||(He["stroke-opacity"]=Le),isNaN(sr)||(He["stroke-width"]=sr)}if(rt){const Pt=ae(m(a(rt,"color"))),ut=Pt[0],Le=Pt[1],sr=m(a(rt,"fill")),lr=m(a(rt,"outline"));ut&&(He.fill=ut),isNaN(Le)||(He["fill-opacity"]=Le),sr&&(He["fill-opacity"]=sr==="1"?He["fill-opacity"]||1:0),lr&&(He["stroke-opacity"]=lr==="1"?He["stroke-opacity"]||1:0)}if(At){const Pt=i(At,"Data"),ut=i(At,"SimpleData");for(Fe=0;Fe<Pt.length;Fe++)He[Pt[Fe].getAttribute("name")]=m(a(Pt[Fe],"value"));for(Fe=0;Fe<ut.length;Fe++)He[ut[Fe].getAttribute("name")]=m(ut[Fe])}Lt&&(He.visibility=m(Lt)),xe.coordTimes.length&&(He.coordTimes=xe.coordTimes.length===1?xe.coordTimes[0]:xe.coordTimes);const Tt={type:"Feature",geometry:xe.geoms.length===1?xe.geoms[0]:{type:"GeometryCollection",geometries:xe.geoms},properties:He};return o(ge,"id")&&(Tt.id=o(ge,"id")),[Tt]}return q},gpx:function(D){let q,z=i(D,"trk"),Z=i(D,"rte"),Q=i(D,"wpt"),Y=O(),se;for(q=0;q<z.length;q++)se=ae(z[q]),se&&Y.features.push(se);for(q=0;q<Z.length;q++)se=le(Z[q]),se&&Y.features.push(se);for(q=0;q<Q.length;q++)Y.features.push(ue(Q[q]));function W(ge,xe){for(let Fe=0;Fe<xe;Fe++)ge.push(null);return ge}function G(ge,xe){const Fe=i(ge,xe),He=[],pe=[],_e=[],Ce=Fe.length;if(Ce<2)return{};for(let ke=0;ke<Ce;ke++){const $e=T(Fe[ke]);He.push($e.coordinates),$e.time&&pe.push($e.time),($e.heartRate||_e.length)&&(_e.length||W(_e,ke),_e.push($e.heartRate||null))}return{line:He,times:pe,heartRates:_e}}function ae(ge){let xe=i(ge,"trkseg"),Fe=[],He=[],pe=[],_e;for(let ke=0;ke<xe.length;ke++)if(_e=G(xe[ke],"trkpt"),_e&&(_e.line&&Fe.push(_e.line),_e.times&&_e.times.length&&He.push(_e.times),pe.length||_e.heartRates&&_e.heartRates.length)){if(!pe.length)for(let $e=0;$e<ke;$e++)pe.push(W([],Fe[$e].length));_e.heartRates&&_e.heartRates.length?pe.push(_e.heartRates):pe.push(W([],_e.line.length||0))}if(Fe.length===0)return;const Ce=Se(ge);return w(Ce,ye(a(ge,"extensions"))),He.length&&(Ce.coordTimes=Fe.length===1?He[0]:He),pe.length&&(Ce.heartRates=Fe.length===1?pe[0]:pe),{type:"Feature",properties:Ce,geometry:{type:Fe.length===1?"LineString":"MultiLineString",coordinates:Fe.length===1?Fe[0]:Fe}}}function le(ge){const xe=G(ge,"rtept");if(!xe.line)return;const Fe=Se(ge);return w(Fe,ye(a(ge,"extensions"))),{type:"Feature",properties:Fe,geometry:{type:"LineString",coordinates:xe.line}}}function ue(ge){const xe=Se(ge);return w(xe,v(ge,["sym"])),{type:"Feature",properties:xe,geometry:{type:"Point",coordinates:T(ge).coordinates}}}function ye(ge){const xe={};if(ge){const Fe=a(ge,"line");if(Fe){const He=m(a(Fe,"color")),pe=parseFloat(m(a(Fe,"opacity"))),_e=parseFloat(m(a(Fe,"width")));He&&(xe.stroke=He),isNaN(pe)||(xe["stroke-opacity"]=pe),isNaN(_e)||(xe["stroke-width"]=_e*96/25.4)}}return xe}function Se(ge){const xe=v(ge,["name","cmt","desc","type","time","keywords"]),Fe=i(ge,"link");Fe.length&&(xe.links=[]);for(let He=0,pe;He<Fe.length;He++)pe={href:o(Fe[He],"href")},w(pe,v(Fe[He],["text","type"])),xe.links.push(pe);return xe}return Y}}})();const qye=Be.createContext({});qye.Provider;const Vye=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e};Vye();/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Si=e=>e!==void 0,Uq=(e,t,r)=>t in e?e[t]:e[t]=r;const c1={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function EM(e,t){return qq(e,t,[]).join("")}function qq(e,t,r){if(e.nodeType===c1.CDATA_SECTION||e.nodeType===c1.TEXT)r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)qq(n,t,r)}return r}function Gye(e,t,r,n){for(var i=Hye(t);i;i=Wye(i)){var o=i.namespaceURI||null,u=e[o];if(Si(u)){var a=u[i.localName];Si(a)&&a.call(n,i,r)}}}function Hye(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==c1.ELEMENT;)t=t.nextSibling;return t}function Wye(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==c1.ELEMENT;)t=t.nextSibling;return t}function qs(e,t,r){return Zye(e,t,r)}function Zye(e,t,r){var n=Si(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function Vq(e,t){return(function(r,n){var i=e.call(Si(t)?t:this,r,n);if(Si(i)){var o=n[n.length-1];o.push(i)}})}function Vs(e,t,r,n,i){return n.push(e),Gye(t,r,n,i),n.pop()}function Cn(e,t,r){return(function(n,i){let o=e.call(Si(r)?r:this,n,i);if(Si(o)){var u=i[i.length-1],a=Si(t)?t:n.localName;u[a]=o}})}function Xl(e,t,r){return(function(n,i){var o=e.call(Si(r)?r:this,n,i);if(Si(o)){var u=i[i.length-1],a=Si(t)?t:n.localName,p=Uq(u,a,[]);p.push(o)}})}const Kye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Xye(e){return e.replace(Kye,"")}function op(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Si(t[1])||!1}function Zm(e){return ih(EM(e,!1))}function ih(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function iC(e){return f1(EM(e,!1))}function f1(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Gi(e){return Xye(EM(e,!1))}const Yye="http://www.w3.org/1999/xlink";function CM(e){return e.getAttributeNS(Yye,"href")}function Jye(e,t){return Vs({},Eve,e,t)}function Gq(e){return[ih(e.getAttribute("minx")),ih(e.getAttribute("miny")),ih(e.getAttribute("maxx")),ih(e.getAttribute("maxy"))]}function Qye(e,t){const r=Gq(e),n=[ih(e.getAttribute("resx")),ih(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function eve(e,t){const r=Gq(e);if(!(!Si(r[0])||!Si(r[1])||!Si(r[2])||!Si(r[3])))return r}function tve(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function rve(e,t){const r=Vs({},Cve,e,t);if(!Si(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,u=r.northBoundLatitude;if(!(!Si(n)||!Si(i)||!Si(o)||!Si(u)))return[n,i,o,u]}function nve(e,t){return Vs({},vve,e,t)}function ive(e,t){return Vs({},bve,e,t)}function ave(e,t){return Vs({},_ve,e,t)}function ove(e,t){return Vs({},xve,e,t)}function sve(e,t){return Vs({},wve,e,t)}function lve(e,t){return Vs([],Sve,e,t)}function uve(e,t){const r=op(e.getAttribute("queryable"));return Vs({queryable:Si(r)?r:!1},Zq,e,t)}function cve(e,t){var r=t[t.length-1];const n=Vs({},Zq,e,t);if(!Si(n))return;let i=op(e.getAttribute("queryable"));Si(i)||(i=r.queryable),n.queryable=Si(i)?i:!1;let o=f1(e.getAttribute("cascaded"));Si(o)||(o=r.cascaded),n.cascaded=o;let u=op(e.getAttribute("opaque"));Si(u)||(u=r.opaque),n.opaque=Si(u)?u:!1;let a=op(e.getAttribute("noSubsets"));Si(a)||(a=r.noSubsets),n.noSubsets=Si(a)?a:!1;let p=ih(e.getAttribute("fixedWidth"));Si(p)||(p=r.fixedWidth),n.fixedWidth=p;let d=ih(e.getAttribute("fixedHeight"));Si(d)||(d=r.fixedHeight),n.fixedHeight=d;const m=["Style","CRS","AuthorityURL"];for(let w=0,x=m.length;w<x;w++){const P=m[w],T=r[P];if(Si(T)){let O=Uq(n,P,[]);O=O.concat(T),n[P]=O}}const v=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let w=0,x=v.length;w<x;w++){const P=v[w],T=n[P];if(!Si(T)){const O=r[P];n[P]=O}}return n}function fve(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:op(e.getAttribute("multipleValues")),nearestValue:op(e.getAttribute("nearestValue")),current:op(e.getAttribute("current")),values:Gi(e)}}function ch(e,t){return Vs({},Rve,e,t)}function hve(e,t){return Vs({},Ave,e,t)}function dve(e,t){return Vs({},Tve,e,t)}function pve(e,t){return Vs({},Ive,e,t)}function aC(e,t){return Vs({},Pve,e,t)}function Hq(e,t){var r=ch(e,t);if(Si(r)){const n=[f1(e.getAttribute("width")),f1(e.getAttribute("height"))];return r.size=n,r}}function mve(e,t){var r=ch(e,t);if(Si(r))return r.name=e.getAttribute("name"),r}function gve(e,t){var r=ch(e,t);if(Si(r))return r.type=e.getAttribute("type"),r}function yve(e,t){return Vs({},Mve,e,t)}function Wq(e,t){return Vs([],Ove,e,t)}const Gs=[null,"http://www.opengis.net/wms"];qs(Gs,{Service:Cn(ive),Capability:Cn(nve)});const vve=qs(Gs,{Request:Cn(hve),Exception:Cn(lve),Layer:Cn(uve)}),bve=qs(Gs,{Name:Cn(Gi),Title:Cn(Gi),Abstract:Cn(Gi),KeywordList:Cn(Wq),OnlineResource:Cn(CM),ContactInformation:Cn(ave),Fees:Cn(Gi),AccessConstraints:Cn(Gi),LayerLimit:Cn(iC),MaxWidth:Cn(iC),MaxHeight:Cn(iC)}),_ve=qs(Gs,{ContactPersonPrimary:Cn(ove),ContactPosition:Cn(Gi),ContactAddress:Cn(sve),ContactVoiceTelephone:Cn(Gi),ContactFacsimileTelephone:Cn(Gi),ContactElectronicMailAddress:Cn(Gi)}),xve=qs(Gs,{ContactPerson:Cn(Gi),ContactOrganization:Cn(Gi)}),wve=qs(Gs,{AddressType:Cn(Gi),Address:Cn(Gi),City:Cn(Gi),StateOrProvince:Cn(Gi),PostCode:Cn(Gi),Country:Cn(Gi)}),Sve=qs(Gs,{Format:Vq(Gi)}),Zq=qs(Gs,{Name:Cn(Gi),Title:Cn(Gi),Abstract:Cn(Gi),KeywordList:Cn(Wq),CRS:Xl(Gi),SRS:Xl(Gi),EX_GeographicBoundingBox:Cn(rve),LatLonBoundingBox:Cn(eve),BoundingBox:Xl(Qye),Dimension:Xl(fve),Attribution:Cn(Jye),AuthorityURL:Xl(mve),Identifier:Xl(Gi),MetadataURL:Xl(gve),DataURL:Xl(ch),FeatureListURL:Xl(ch),Style:Xl(yve),MinScaleDenominator:Cn(Zm),MaxScaleDenominator:Cn(Zm),ScaleHint:Cn(tve),Layer:Xl(cve)}),Eve=qs(Gs,{Title:Cn(Gi),OnlineResource:Cn(CM),LogoURL:Cn(Hq)}),Cve=qs(Gs,{westBoundLongitude:Cn(Zm),eastBoundLongitude:Cn(Zm),southBoundLatitude:Cn(Zm),northBoundLatitude:Cn(Zm)}),Ave=qs(Gs,{GetCapabilities:Cn(aC),GetMap:Cn(aC),GetFeatureInfo:Cn(aC)}),Pve=qs(Gs,{Format:Xl(Gi),DCPType:Xl(dve)}),Tve=qs(Gs,{HTTP:Cn(pve)}),Ive=qs(Gs,{Get:Cn(ch),Post:Cn(ch)}),Mve=qs(Gs,{Name:Cn(Gi),Title:Cn(Gi),Abstract:Cn(Gi),LegendURL:Xl(Hq),StyleSheetURL:Cn(ch),StyleURL:Cn(ch)}),Rve=qs(Gs,{Format:Cn(Gi),OnlineResource:Cn(CM)}),Ove=qs(Gs,{Keyword:Vq(Gi)});function Kq(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function kve(e,t){var r=Kq(e);return function(n,i){return t(r(n),i,e)}}function Lve(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function AM(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(d,m){var v,w,x=i(d,function(P,T){if(v)return v(P,T-1);w=P,v=m?kve(P,m):Kq(P)});return x.columns=w,x}function i(d,m){var v={},w={},x=[],P=d.length,T=0,O=0,L,N;function F(){if(T>=P)return w;if(N)return N=!1,v;var q=T,z;if(d.charCodeAt(q)===34){for(var Z=q;Z++<P;)if(d.charCodeAt(Z)===34){if(d.charCodeAt(Z+1)!==34)break;++Z}return T=Z+2,z=d.charCodeAt(Z+1),z===13?(N=!0,d.charCodeAt(Z+2)===10&&++T):z===10&&(N=!0),d.slice(q+1,Z).replace(/""/g,'"')}for(;T<P;){var Q=1;if(z=d.charCodeAt(T++),z===10)N=!0;else if(z===13)N=!0,d.charCodeAt(T)===10&&(++T,++Q);else if(z!==r)continue;return d.slice(q,T-Q)}return d.slice(q)}for(;(L=F())!==w;){for(var D=[];L!==v&&L!==w;)D.push(L),L=F();m&&(D=m(D,O++))==null||x.push(D)}return x}function o(d,m){return m==null&&(m=Lve(d)),[m.map(p).join(e)].concat(d.map(function(v){return m.map(function(w){return p(v[w])}).join(e)})).join(`
`)}function u(d){return d.map(a).join(`
`)}function a(d){return d.map(p).join(e)}function p(d){return d==null?"":t.test(d+="")?'"'+d.replace(/\"/g,'""')+'"':d}return{parse:n,parseRows:i,format:o,formatRows:u}}var s2=AM(","),Dve=s2.parse,Nve=s2.parseRows,Fve=s2.format,Bve=s2.formatRows,l2=AM("	"),jve=l2.parse,zve=l2.parseRows,$ve=l2.format,Uve=l2.formatRows;const qve=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Fve,csvFormatRows:Bve,csvParse:Dve,csvParseRows:Nve,dsvFormat:AM,tsvFormat:$ve,tsvFormatRows:Uve,tsvParse:jve,tsvParseRows:zve},Symbol.toStringTag,{value:"Module"})),Vve=_X(qve);var Nd={exports:{}},w8;function Gve(){if(w8)return Nd.exports;w8=1,Nd.exports=e,Nd.exports.pair=o,Nd.exports.format=r,Nd.exports.formatPair=t,Nd.exports.coordToDMS=n;function e(a,p){var d=i(a,p);return d===null?null:d.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,p){var d=n(a,p);return d.whole+" "+(d.minutes?d.minutes+"' ":"")+(d.seconds?d.seconds+'" ':"")+d.dir}function n(a,p){var d={lat:["N","S"],lon:["E","W"]}[p]||"",m=d[a>=0?0:1],v=Math.abs(a),w=Math.floor(v),x=v-w,P=x*60,T=Math.floor(P),O=Math.floor((P-T)*60);return{whole:w,minutes:T,seconds:O,dir:m}}function i(a,p){if(p||(p="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var d=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,m=a.match(d);if(!m)return null;var v=m[0],w;if(m[1]&&m[5]?(w=m[1],v=v.slice(0,-1)):w=m[1]||m[5],w&&p.indexOf(w)===-1)return null;var x=m[2]?parseFloat(m[2]):0,P=m[3]?parseFloat(m[3])/60:0,T=m[4]?parseFloat(m[4])/3600:0,O=x<0?-1:1;return(w==="S"||w==="W")&&(O*=-1),{val:(Math.abs(x)+P+T)*O,dim:w,matched:v,remain:a.slice(v.length)}}function o(a,p){a=a.trim();var d=i(a,p);if(!d)return null;a=d.remain.trim();var m=i(a,p);return!m||m.remain?null:d.dim?u(d.val,m.val,d.dim):[d.val,m.val]}function u(a,p,d){if(d==="N"||d==="S")return[a,p];if(d==="W"||d==="E")return[p,a]}return Nd.exports}var oC,S8;function Hve(){if(S8)return oC;S8=1;var e=Vve,t=Gve(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(O,L){var N,F,D;for(var q in O)F=q.match(L),F&&(!N||F[0].length/q.length>D)&&(D=F[0].length/q.length,N=q);return N}function o(O){return i(O,r)}function u(O){return i(O,n)}function a(O){return!!O.match(r)}function p(O){return!!O.match(n)}function d(O){return typeof O=="object"?Object.keys(O).length:0}function m(O){var L=[",",";","	","|"],N=[];return L.forEach(function(F){var D=e.dsvFormat(F).parse(O);if(D.length>=1){for(var q=d(D[0]),z=0;z<D.length;z++)if(d(D[z])!==q)return;N.push({delimiter:F,arity:Object.keys(D[0]).length})}}),N.length?N.sort(function(F,D){return D.arity-F.arity})[0].delimiter:null}function v(O){return delete O.columns,O}function w(O){var L=m(O);return L?v(e.dsvFormat(L).parse(O)):null}function x(O,L,N){N||(N=L,L={}),L.delimiter=L.delimiter||",";var F=L.latfield||"",D=L.lonfield||"",q=L.crs||"",z=[],Z={type:"FeatureCollection",features:z};if(q!==""&&(Z.crs={type:"name",properties:{name:q}}),L.delimiter==="auto"&&typeof O=="string"&&(L.delimiter=m(O),!L.delimiter)){N({type:"Error",message:"Could not autodetect delimiter"});return}var Q=L.numericFields?L.numericFields.split(","):null,Y=typeof O=="string"?e.dsvFormat(L.delimiter).parse(O,function(ge){if(Q)for(var xe in ge)Q.includes(xe)&&(ge[xe]=+ge[xe]);return ge}):O;if(!Y.length){N(null,Z);return}var se=[],W;F||(F=o(Y[0])),D||(D=u(Y[0]));var G=!F||!D;if(G){for(W=0;W<Y.length;W++)z.push({type:"Feature",properties:Y[W],geometry:null});N(se.length?se:null,Z);return}for(W=0;W<Y.length;W++)if(Y[W][D]!==void 0&&Y[W][F]!==void 0){var ae=Y[W][D],le=Y[W][F],ue,ye,Se;Se=t(ae,"EW"),Se&&(ae=Se),Se=t(le,"NS"),Se&&(le=Se),ue=parseFloat(ae),ye=parseFloat(le),isNaN(ue)||isNaN(ye)?se.push({message:"A row contained an invalid value for latitude or longitude",row:Y[W],index:W}):(L.includeLatLon||(delete Y[W][D],delete Y[W][F]),z.push({type:"Feature",properties:Y[W],geometry:{type:"Point",coordinates:[parseFloat(ue),parseFloat(ye)]}}))}N(se.length?se:null,Z)}function P(O){for(var L=O.features,N={type:"Feature",geometry:{type:"LineString",coordinates:[]}},F=0;F<L.length;F++)N.geometry.coordinates.push(L[F].geometry.coordinates);return N.properties=L.reduce(function(D,q){for(var z in q.properties)D[z]||(D[z]=[]),D[z].push(q.properties[z]);return D},{}),{type:"FeatureCollection",features:[N]}}function T(O){for(var L=O.features,N={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},F=0;F<L.length;F++)N.geometry.coordinates[0].push(L[F].geometry.coordinates);return N.properties=L.reduce(function(D,q){for(var z in q.properties)D[z]||(D[z]=[]),D[z].push(q.properties[z]);return D},{}),{type:"FeatureCollection",features:[N]}}return oC={isLon:p,isLat:a,guessLatHeader:o,guessLonHeader:u,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:w,csv2geojson:x,toLine:P,toPolygon:T},oC}Hve();var kl={},E8;function B0(){if(E8)return kl;E8=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.purgeProps=e,kl.first=t,kl.last=r,kl.coordsToKey=n,kl.addToMap=i,kl.removeFromMap=o,kl.getFirstFromMap=u,kl.isRing=a,kl.ringDirection=p,kl.pointInsidePolygon=d,kl.strArrayArrayToFloat=m,kl.strArrayToFloat=v;function e(w,x){if(w){const P=Object.assign({},w);if(x)for(const T of x)delete P[T];return P}return{}}function t(w){return w[0]}function r(w){return w[w.length-1]}function n(w){return w.join(",")}function i(w,x,P){const T=w[x];T?T.push(P):w[x]=[P]}function o(w,x,P){const T=w[x];let O=-1;T&&(O=T.indexOf(P)),O>=0&&T.splice(O,1)}function u(w,x){const P=w[x];return P&&P.length>0?P[0]:null}function a(w){return w.length>3&&n(t(w))===n(r(w))}function p(w,x,P){x=x||0,P=P||1;const T=w.reduce((Y,se,W)=>w[Y][x||0]>se[x||0]?Y:W,0),O=T<=0?w.length-2:T-1,L=T>=w.length-1?1:T+1,N=w[O][x],F=w[T][x],D=w[L][x],q=w[O][P],z=w[T][P],Z=w[L][P];return(F-N)*(Z-q)-(D-N)*(z-q)<0?"clockwise":"counterclockwise"}function d(w,x,P,T){P=P||0,T=T||1;let O=!1;for(let L=0,N=x.length-1;L<x.length;N=L++)(x[L][P]<=w[P]&&w[P]<x[N][P]||x[N][P]<=w[P]&&w[P]<x[L][P])&&w[T]<(x[N][T]-x[L][T])*(w[P]-x[L][P])/(x[N][P]-x[L][P])+x[L][T]&&(O=!O);return O}function m(w){return w.map(v)}function v(w){return w.map(parseFloat)}return kl}var By={},C8;function Wve(){if(C8)return By;C8=1,Object.defineProperty(By,"__esModule",{value:!0}),By.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function r(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class n{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,u,a){a=a?a+".":"";const p=/<([^ >\/]+)(.*?)>/mg,d=[];let m=p.exec(o);for(;m;){const v=m[1],w={$tag:v},x=a+v,P=m[2].trim();let T=!1;(P.endsWith("/")||v.startsWith("?")||v.startsWith("!"))&&(T=!0);const O=/([^ ]+?)="(.+?)"/g,L=/([^ ]+?)='(.+?)'/g;let N=O.exec(P),F=!1;for(;N;)F=!0,w[N[1]]=N[2],N=O.exec(P);if(!F)for(N=L.exec(P);N;)F=!0,w[N[1]]=N[2],N=L.exec(P);if(!F&&P!==""&&(w.text=P),this.progressive&&this.emit(`<${x}>`,w,u),!T){const D=new RegExp(`([^]+?)</${v}>`,"g");D.lastIndex=p.lastIndex;const q=D.exec(o);if(q&&q[1]){p.lastIndex=D.lastIndex;const z=this.parse(q[1],w,x);z.length>0?w.$innerNodes=z:w.$innerText=q[1]}}this.queryParent&&u&&this.parentMap.set(w,u),this.progressive&&this.emit(`</${x}>`,w,u),d.push(w),m=p.exec(o)}return d}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,u){if(e(o)){const a=t(o);a.exp&&(u.condition=r(a.exp)),o=a.evt}this.$addListener(o,u)}removeListener(o,u){e(o)&&(o=t(o).evt),this.$removeListener(o,u)}on(o,u){this.addListener(o,u)}off(o,u){this.removeListener(o,u)}$addListener(o,u){const a=this.evtListeners[o];a?a.push(u):this.evtListeners[o]=[u]}$removeListener(o,u){const a=this.evtListeners[o];let p=-1;a&&(p=a.indexOf(u)),p>=0&&a.splice(p,1)}emit(o,...u){const a=this.evtListeners[o];if(a)for(const p of a)p.condition?p.condition.apply(null,u)===!0&&p.apply(null,u):p.apply(null,u)}}return By.XmlParser=n,By}var jy={},zy={},A8;function PM(){if(A8)return zy;A8=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return zy.OsmObject=e,zy}var P8;function Xq(){if(P8)return jy;P8=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.Node=void 0;const e=PM(),t=B0();class r extends e.OsmObject{constructor(i,o){super("node",i,o)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return jy.Node=r,jy}var Fd={},$y={},T8;function Yq(){if(T8)return $y;T8=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.LateBinder=void 0;class e{constructor(r,n,i,o){this.container=r,this.valueFunc=n,this.ctx=i,this.args=o}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return $y.LateBinder=e,$y}const Zve={},Kve={whitelist:["services","rest_area","escape","elevator"]},Xve={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Yve={},Jve={whitelist:["riverbank","dock","boatyard","dam"]},Qve={},e0e={},t0e={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},r0e={whitelist:["station","turntable","roundhouse","platform"]},n0e={},i0e={},a0e={blacklist:["cutline","embankment","pipeline"]},o0e={whitelist:["plant","substation","generator","transformer"]},s0e={},l0e={},u0e={blacklist:["taxiway"]},c0e={},f0e={},h0e={},d0e={},p0e={},m0e={},g0e={},y0e={},v0e={},b0e={building:Zve,highway:Kve,natural:Xve,landuse:Yve,waterway:Jve,amenity:Qve,leisure:e0e,barrier:t0e,railway:r0e,area:n0e,boundary:i0e,man_made:a0e,power:o0e,place:s0e,shop:l0e,aeroway:u0e,tourism:c0e,historic:f0e,public_transport:h0e,office:d0e,"building:part":{},military:p0e,ruins:m0e,"area:highway":{},craft:g0e,golf:y0e,indoor:v0e};var I8;function Jq(){if(I8)return Fd;I8=1;var e=Fd&&Fd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Way=void 0;const t=PM(),r=Yq(),n=B0(),i=e(b0e);class o extends t.OsmObject{constructor(a,p){super("way",a,p),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const p=new r.LateBinder(this.latLngArray,d=>{const m=this.refElems.get(`node/${d}`);if(m)return m.refCount++,m.getLatLng()},this,[a]);this.latLngArray.push(p),this.refElems.addBinder(p)}addTags(a){super.addTags(a);for(const[p,d]of Object.entries(a))this.analyzeTag(p,d)}addTag(a,p){super.addTag(a,p),this.analyzeTag(a,p)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const p=(0,n.strArrayArrayToFloat)(a),d={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:p}};return this.isPolygon&&(0,n.isRing)(p)?((0,n.ringDirection)(p)!=="counterclockwise"&&p.reverse(),d.geometry={type:"Polygon",coordinates:[p]},[d]):[d]}return[]}analyzeTag(a,p){const d=i.default[a];d&&(this.isPolygon=!0,d.whitelist?this.isPolygon=d.whitelist.indexOf(p)>=0:d.blacklist&&(this.isPolygon=!(d.blacklist.indexOf(p)>=0)))}}return Fd.Way=o,Fd}var Uy={},qy={},M8;function _0e(){if(M8)return qy;M8=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.WayCollection=void 0;const e=B0();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let o=i,u;do{let a=this.getNextWay(o);u=a.next;let p=a.mergeType;if(u)switch(this.splice(this.indexOf(u),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(u)),u),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(u)),u),p){case 0:o=o.concat(u.slice(1));break;case 1:u.reverse(),o=o.concat(u.slice(1));break;case 2:o.reverse(),o=o.concat(u.slice(1));break;case 3:o=u.concat(o.slice(1));break}}while(u);n.push((0,e.strArrayArrayToFloat)(o)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),o=(0,e.coordsToKey)((0,e.first)(n));let u=this.length>0?this[0]:null;if(u){const a=(0,e.coordsToKey)((0,e.first)(u)),p=(0,e.coordsToKey)((0,e.last)(u));if(i===a)return{next:u,mergeType:0};if(i===p)return{next:u,mergeType:1};if(o===a)return{next:u,mergeType:2};if(o===p)return{next:u,mergeType:3}}return u=(0,e.getFirstFromMap)(this.firstMap,i),u?{next:u,mergeType:0}:(u=(0,e.getFirstFromMap)(this.lastMap,i),{next:u,mergeType:1})}toRings(n){const i=this.mergeWays(),o=[];let u=i.shift();for(;u;)(0,e.isRing)(u)&&((0,e.ringDirection)(u)!==n&&u.reverse(),o.push(u)),u=i.shift();return o}}return qy.WayCollection=t,qy}var R8;function x0e(){if(R8)return Uy;R8=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.Relation=void 0;const e=PM(),t=Jq(),r=Xq(),n=_0e(),i=Yq(),o=B0();class u extends e.OsmObject{constructor(p,d){super("relation",p,d),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(p){this.bounds=p}addMember(p){switch(p.type){case"relation":let d=new i.LateBinder(this.relations,v=>{const w=this.refElems.get(`relation/${v}`);if(w)return w.refCount++,w},this,[p.ref]);this.relations.push(d),this.refElems.addBinder(d);break;case"way":if(p.role||(p.role=""),p.geometry){const v=new t.Way(p.ref,this.refElems);v.setLatLngArray(p.geometry),v.refCount++,this.ways.push(v),this.roles.push(p.role)}else if(p.nodes){const v=new t.Way(p.ref,this.refElems);for(const w of p.nodes)v.addNodeRef(w);v.refCount++,this.ways.push(v),this.roles.push(p.role)}else{let v=new i.LateBinder(this.ways,w=>{const x=this.refElems.get(`way/${w}`);if(x)return x.refCount++,x},this,[p.ref]);this.ways.push(v),this.roles.push(p.role),this.refElems.addBinder(v)}break;case"node":let m=null;if(p.lat&&p.lon){m=new r.Node(p.ref,this.refElems),m.setLatLng({lon:p.lon,lat:p.lat}),p.tags&&m.addTags(p.tags);for(const[v,w]of Object.entries(p))["id","type","lat","lon"].indexOf(v)<0&&m.addProp(v,w);m.refCount++,this.nodes.push(m)}else{let v=new i.LateBinder(this.nodes,w=>{const x=this.refElems.get(`node/${w}`);if(x)return x.refCount++,x},this,[p.ref]);this.nodes.push(v),this.refElems.addBinder(v)}break}}constructStringGeometry(p){const d=p?p.mergeWays():[];return d.length===0?null:{type:"MultiLineString",coordinates:d}}constructPolygonGeometry(p,d){const m=p?p.toRings("counterclockwise"):[],v=d?d.toRings("clockwise"):[];if(m.length>0){const w=[];let x;for(x of m)w.push([x]);for(x=v.shift();x;){for(const P in m)if((0,o.pointInsidePolygon)((0,o.first)(x),m[P])){w[P].push(x);break}x=v.shift()}return w.length===1?{type:"Polygon",coordinates:w[0]}:{type:"MultiPolygon",coordinates:w}}return null}toFeatureArray(){const p=[],d=[];let m=[];for(const w of this.relations)if(w)for(let x=0;x<w.ways.length;x++){const P=w.ways[x];this.ways.push(P),this.roles.push(w.roles[x])}let v={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete v.bbox,this.roles.some(w=>w==="outer")){const w=new n.WayCollection,x=new n.WayCollection;for(let O=0;O<this.ways.length;O++){const L=this.ways[O],N=this.roles[O];N==="outer"?w.addWay(L):N==="inner"&&x.addWay(L)}let P=Object.assign({},v),T=this.constructPolygonGeometry(w,x);T&&(P.geometry=T,p.push(P))}else{const w=new n.WayCollection;for(let P of this.ways)w.addWay(P);let x=this.constructStringGeometry(w);if(x){let P=Object.assign({},v);P.geometry=x,d.push(P)}}for(let w of this.nodes)m=m.concat(w.toFeatureArray());return[...p,...d,...m]}}return Uy.Relation=u,Uy}var Vy={},O8;function w0e(){if(O8)return Vy;O8=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return Vy.RefElements=e,Vy}var sC,k8;function S0e(){if(k8)return sC;k8=1;const e=B0(),t=Wve(),r=Xq(),n=Jq(),i=x0e(),o=w0e();function u(v){if(!v)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let w=v.excludeWay===void 0||v.excludeWay,x=!!v.completeFeature,P=!!v.renderTagged;return{completeFeature:x,renderTagged:P,excludeWay:w}}function a(v){return v.elements?"json":v.indexOf("<osm")>=0?"xml":v.trim().startsWith("{")?"json-raw":"invalid"}function p(v,w){for(const x of v.elements)switch(x.type){case"node":const P=new r.Node(x.id,w);x.tags&&P.addTags(x.tags),P.addProps((0,e.purgeProps)(x,["id","type","tags","lat","lon"])),P.setLatLng(x);break;case"way":const T=new n.Way(x.id,w);if(x.tags&&T.addTags(x.tags),T.addProps((0,e.purgeProps)(x,["id","type","tags","nodes","geometry"])),x.geometry)T.setLatLngArray(x.geometry);else if(x.nodes)for(const L of x.nodes)T.addNodeRef(L);break;case"relation":const O=new i.Relation(x.id,w);if(x.bounds&&O.setBounds([parseFloat(x.bounds.minlon),parseFloat(x.bounds.minlat),parseFloat(x.bounds.maxlon),parseFloat(x.bounds.maxlat)]),x.tags&&O.addTags(x.tags),O.addProps((0,e.purgeProps)(x,["id","type","tags","bounds","members"])),x.members)for(const L of x.members)O.addMember(L)}}function d(v,w){const x=new t.XmlParser({progressive:!0});x.on("</osm.node>",P=>{const T=new r.Node(P.id,w);for(const[O,L]of Object.entries(P))!O.startsWith("$")&&["id","lon","lat"].indexOf(O)<0&&T.addProp(O,L);if(T.setLatLng(P),P.$innerNodes)for(const O of P.$innerNodes)O.$tag==="tag"&&T.addTag(O.k,O.v)}),x.on("</osm.way>",P=>{const T=new n.Way(P.id,w);for(const[O,L]of Object.entries(P))!O.startsWith("$")&&["id"].indexOf(O)<0&&T.addProp(O,L);if(P.$innerNodes)for(const O of P.$innerNodes)O.$tag==="nd"?O.lon&&O.lat?T.addLatLng(O):O.ref&&T.addNodeRef(O.ref):O.$tag==="tag"&&T.addTag(O.k,O.v)}),x.on("<osm.relation>",P=>new i.Relation(P.id,w)),x.on("</osm.relation.member>",(P,T)=>{const O=w.get(`relation/${T?.id}`),L={type:P.type,role:P.role?P.role:"",ref:P.ref};if(P.lat&&P.lon){L.lat=P.lat,L.lon=P.lon,L.tags={};for(const[N,F]of Object.entries(P))!N.startsWith("$")&&["type","lat","lon"].indexOf(N)<0&&(L[N]=F)}if(P.$innerNodes){const N=[],F=[];for(const D of P.$innerNodes)D.lat&&D.lon?N.push(D):D.ref&&F.push(D.ref);N.length>0?L.geometry=N:F.length>0&&(L.nodes=F)}O.addMember(L)}),x.on("</osm.relation.bounds>",(P,T)=>{w.get(`relation/${T?.id}`).setBounds([parseFloat(P.minlon),parseFloat(P.minlat),parseFloat(P.maxlon),parseFloat(P.maxlat)])}),x.on("</osm.relation.tag>",(P,T)=>{w.get(`relation/${T?.id}`).addTag(P.k,P.v)}),x.parse(v)}function m(v,w){let{completeFeature:x,renderTagged:P,excludeWay:T}=u(w),O=a(v);const L=new o.RefElements;let N=[];O==="json-raw"&&(v=JSON.parse(v),v.elements?O="json":O="invalid"),O==="json"?p(v,L):O==="xml"&&d(v,L),L.bindAll();for(const F of L.values()){if(F.refCount>0&&(!F.hasTag||!P||F instanceof n.Way&&T))continue;const D=F.toFeatureArray();if(F instanceof i.Relation&&!x&&D.length>0)return D[0].geometry;N=N.concat(D)}return{type:"FeatureCollection",features:N}}return sC=m,sC}S0e();var L8;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(L8||(L8={}));const E0e=Be.createContext({});E0e.Provider;var C0e={value:()=>{}};function Qq(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new M_(r)}function M_(e){this._=e}function A0e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}M_.prototype=Qq.prototype={constructor:M_,on:function(e,t){var r=this._,n=A0e(e+"",r),i,o=-1,u=n.length;if(arguments.length<2){for(;++o<u;)if((i=(e=n[o]).type)&&(i=P0e(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<u;)if(i=(e=n[o]).type)r[i]=D8(r[i],e.name,t);else if(t==null)for(i in r)r[i]=D8(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new M_(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function P0e(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function D8(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=C0e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var uT="http://www.w3.org/1999/xhtml";const N8={svg:"http://www.w3.org/2000/svg",xhtml:uT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u2(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),N8.hasOwnProperty(t)?{space:N8[t],local:e}:e}function T0e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===uT&&t.documentElement.namespaceURI===uT?t.createElement(e):t.createElementNS(r,e)}}function I0e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eV(e){var t=u2(e);return(t.local?I0e:T0e)(t)}function M0e(){}function TM(e){return e==null?M0e:function(){return this.querySelector(e)}}function R0e(e){typeof e!="function"&&(e=TM(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=new Array(u),p,d,m=0;m<u;++m)(p=o[m])&&(d=e.call(p,p.__data__,m,o))&&("__data__"in p&&(d.__data__=p.__data__),a[m]=d);return new Oc(n,this._parents)}function O0e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function k0e(){return[]}function tV(e){return e==null?k0e:function(){return this.querySelectorAll(e)}}function L0e(e){return function(){return O0e(e.apply(this,arguments))}}function D0e(e){typeof e=="function"?e=L0e(e):e=tV(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var u=t[o],a=u.length,p,d=0;d<a;++d)(p=u[d])&&(n.push(e.call(p,p.__data__,d,u)),i.push(p));return new Oc(n,i)}function rV(e){return function(){return this.matches(e)}}function nV(e){return function(t){return t.matches(e)}}var N0e=Array.prototype.find;function F0e(e){return function(){return N0e.call(this.children,e)}}function B0e(){return this.firstElementChild}function j0e(e){return this.select(e==null?B0e:F0e(typeof e=="function"?e:nV(e)))}var z0e=Array.prototype.filter;function $0e(){return Array.from(this.children)}function U0e(e){return function(){return z0e.call(this.children,e)}}function q0e(e){return this.selectAll(e==null?$0e:U0e(typeof e=="function"?e:nV(e)))}function V0e(e){typeof e!="function"&&(e=rV(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],p,d=0;d<u;++d)(p=o[d])&&e.call(p,p.__data__,d,o)&&a.push(p);return new Oc(n,this._parents)}function iV(e){return new Array(e.length)}function G0e(){return new Oc(this._enter||this._groups.map(iV),this._parents)}function h1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}h1.prototype={constructor:h1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function H0e(e){return function(){return e}}function W0e(e,t,r,n,i,o){for(var u=0,a,p=t.length,d=o.length;u<d;++u)(a=t[u])?(a.__data__=o[u],n[u]=a):r[u]=new h1(e,o[u]);for(;u<p;++u)(a=t[u])&&(i[u]=a)}function Z0e(e,t,r,n,i,o,u){var a,p,d=new Map,m=t.length,v=o.length,w=new Array(m),x;for(a=0;a<m;++a)(p=t[a])&&(w[a]=x=u.call(p,p.__data__,a,t)+"",d.has(x)?i[a]=p:d.set(x,p));for(a=0;a<v;++a)x=u.call(e,o[a],a,o)+"",(p=d.get(x))?(n[a]=p,p.__data__=o[a],d.delete(x)):r[a]=new h1(e,o[a]);for(a=0;a<m;++a)(p=t[a])&&d.get(w[a])===p&&(i[a]=p)}function K0e(e){return e.__data__}function X0e(e,t){if(!arguments.length)return Array.from(this,K0e);var r=t?Z0e:W0e,n=this._parents,i=this._groups;typeof e!="function"&&(e=H0e(e));for(var o=i.length,u=new Array(o),a=new Array(o),p=new Array(o),d=0;d<o;++d){var m=n[d],v=i[d],w=v.length,x=Y0e(e.call(m,m&&m.__data__,d,n)),P=x.length,T=a[d]=new Array(P),O=u[d]=new Array(P),L=p[d]=new Array(w);r(m,v,T,O,L,x,t);for(var N=0,F=0,D,q;N<P;++N)if(D=T[N]){for(N>=F&&(F=N+1);!(q=O[F])&&++F<P;);D._next=q||null}}return u=new Oc(u,n),u._enter=a,u._exit=p,u}function Y0e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J0e(){return new Oc(this._exit||this._groups.map(iV),this._parents)}function Q0e(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function ebe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,u=Math.min(i,o),a=new Array(i),p=0;p<u;++p)for(var d=r[p],m=n[p],v=d.length,w=a[p]=new Array(v),x,P=0;P<v;++P)(x=d[P]||m[P])&&(w[P]=x);for(;p<i;++p)a[p]=r[p];return new Oc(a,this._parents)}function tbe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],u;--i>=0;)(u=n[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function rbe(e){e||(e=nbe);function t(v,w){return v&&w?e(v.__data__,w.__data__):!v-!w}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var u=r[o],a=u.length,p=i[o]=new Array(a),d,m=0;m<a;++m)(d=u[m])&&(p[m]=d);p.sort(t)}return new Oc(i,this._parents).order()}function nbe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ibe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function abe(){return Array.from(this)}function obe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var u=n[i];if(u)return u}return null}function sbe(){let e=0;for(const t of this)++e;return e}function lbe(){return!this.node()}function ube(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,u=i.length,a;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function cbe(e){return function(){this.removeAttribute(e)}}function fbe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hbe(e,t){return function(){this.setAttribute(e,t)}}function dbe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function pbe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function mbe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function gbe(e,t){var r=u2(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?fbe:cbe:typeof t=="function"?r.local?mbe:pbe:r.local?dbe:hbe)(r,t))}function aV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ybe(e){return function(){this.style.removeProperty(e)}}function vbe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function bbe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function _be(e,t,r){return arguments.length>1?this.each((t==null?ybe:typeof t=="function"?bbe:vbe)(e,t,r??"")):_g(this.node(),e)}function _g(e,t){return e.style.getPropertyValue(t)||aV(e).getComputedStyle(e,null).getPropertyValue(t)}function xbe(e){return function(){delete this[e]}}function wbe(e,t){return function(){this[e]=t}}function Sbe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Ebe(e,t){return arguments.length>1?this.each((t==null?xbe:typeof t=="function"?Sbe:wbe)(e,t)):this.node()[e]}function oV(e){return e.trim().split(/^|\s+/)}function IM(e){return e.classList||new sV(e)}function sV(e){this._node=e,this._names=oV(e.getAttribute("class")||"")}sV.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lV(e,t){for(var r=IM(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function uV(e,t){for(var r=IM(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function Cbe(e){return function(){lV(this,e)}}function Abe(e){return function(){uV(this,e)}}function Pbe(e,t){return function(){(t.apply(this,arguments)?lV:uV)(this,e)}}function Tbe(e,t){var r=oV(e+"");if(arguments.length<2){for(var n=IM(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?Pbe:t?Cbe:Abe)(r,t))}function Ibe(){this.textContent=""}function Mbe(e){return function(){this.textContent=e}}function Rbe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Obe(e){return arguments.length?this.each(e==null?Ibe:(typeof e=="function"?Rbe:Mbe)(e)):this.node().textContent}function kbe(){this.innerHTML=""}function Lbe(e){return function(){this.innerHTML=e}}function Dbe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Nbe(e){return arguments.length?this.each(e==null?kbe:(typeof e=="function"?Dbe:Lbe)(e)):this.node().innerHTML}function Fbe(){this.nextSibling&&this.parentNode.appendChild(this)}function Bbe(){return this.each(Fbe)}function jbe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zbe(){return this.each(jbe)}function $be(e){var t=typeof e=="function"?e:eV(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ube(){return null}function qbe(e,t){var r=typeof e=="function"?e:eV(e),n=t==null?Ube:typeof t=="function"?t:TM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Vbe(){var e=this.parentNode;e&&e.removeChild(this)}function Gbe(){return this.each(Vbe)}function Hbe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wbe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zbe(e){return this.select(e?Wbe:Hbe)}function Kbe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Xbe(e){return function(t){e.call(this,t,this.__data__)}}function Ybe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Jbe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function Qbe(e,t,r){return function(){var n=this.__on,i,o=Xbe(t);if(n){for(var u=0,a=n.length;u<a;++u)if((i=n[u]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function e_e(e,t,r){var n=Ybe(e+""),i,o=n.length,u;if(arguments.length<2){var a=this.node().__on;if(a){for(var p=0,d=a.length,m;p<d;++p)for(i=0,m=a[p];i<o;++i)if((u=n[i]).type===m.type&&u.name===m.name)return m.value}return}for(a=t?Qbe:Jbe,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function cV(e,t,r){var n=aV(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function t_e(e,t){return function(){return cV(this,e,t)}}function r_e(e,t){return function(){return cV(this,e,t.apply(this,arguments))}}function n_e(e,t){return this.each((typeof t=="function"?r_e:t_e)(e,t))}function*i_e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,u;i<o;++i)(u=n[i])&&(yield u)}var a_e=[null];function Oc(e,t){this._groups=e,this._parents=t}function j0(){return new Oc([[document.documentElement]],a_e)}function o_e(){return this}Oc.prototype=j0.prototype={constructor:Oc,select:R0e,selectAll:D0e,selectChild:j0e,selectChildren:q0e,filter:V0e,data:X0e,enter:G0e,exit:J0e,join:Q0e,merge:ebe,selection:o_e,order:tbe,sort:rbe,call:ibe,nodes:abe,node:obe,size:sbe,empty:lbe,each:ube,attr:gbe,style:_be,property:Ebe,classed:Tbe,text:Obe,html:Nbe,raise:Bbe,lower:zbe,append:$be,insert:qbe,remove:Gbe,clone:Zbe,datum:Kbe,on:e_e,dispatch:n_e,[Symbol.iterator]:i_e};function MM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function fV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function z0(){}var o0=.7,d1=1/o0,ig="\\s*([+-]?\\d+)\\s*",s0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s_e=/^#([0-9a-f]{3,8})$/,l_e=new RegExp(`^rgb\\(${ig},${ig},${ig}\\)$`),u_e=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),c_e=new RegExp(`^rgba\\(${ig},${ig},${ig},${s0}\\)$`),f_e=new RegExp(`^rgba\\(${_f},${_f},${_f},${s0}\\)$`),h_e=new RegExp(`^hsl\\(${s0},${_f},${_f}\\)$`),d_e=new RegExp(`^hsla\\(${s0},${_f},${_f},${s0}\\)$`),F8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};MM(z0,l0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:B8,formatHex:B8,formatHex8:p_e,formatHsl:m_e,formatRgb:j8,toString:j8});function B8(){return this.rgb().formatHex()}function p_e(){return this.rgb().formatHex8()}function m_e(){return hV(this).formatHsl()}function j8(){return this.rgb().formatRgb()}function l0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=s_e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?z8(t):r===3?new Ql(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=l_e.exec(e))?new Ql(t[1],t[2],t[3],1):(t=u_e.exec(e))?new Ql(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=c_e.exec(e))?Hb(t[1],t[2],t[3],t[4]):(t=f_e.exec(e))?Hb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h_e.exec(e))?q8(t[1],t[2]/100,t[3]/100,1):(t=d_e.exec(e))?q8(t[1],t[2]/100,t[3]/100,t[4]):F8.hasOwnProperty(e)?z8(F8[e]):e==="transparent"?new Ql(NaN,NaN,NaN,0):null}function z8(e){return new Ql(e>>16&255,e>>8&255,e&255,1)}function Hb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ql(e,t,r,n)}function g_e(e){return e instanceof z0||(e=l0(e)),e?(e=e.rgb(),new Ql(e.r,e.g,e.b,e.opacity)):new Ql}function cT(e,t,r,n){return arguments.length===1?g_e(e):new Ql(e,t,r,n??1)}function Ql(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}MM(Ql,cT,fV(z0,{brighter(e){return e=e==null?d1:Math.pow(d1,e),new Ql(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new Ql(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ql(sp(this.r),sp(this.g),sp(this.b),p1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$8,formatHex:$8,formatHex8:y_e,formatRgb:U8,toString:U8}));function $8(){return`#${ep(this.r)}${ep(this.g)}${ep(this.b)}`}function y_e(){return`#${ep(this.r)}${ep(this.g)}${ep(this.b)}${ep((isNaN(this.opacity)?1:this.opacity)*255)}`}function U8(){const e=p1(this.opacity);return`${e===1?"rgb(":"rgba("}${sp(this.r)}, ${sp(this.g)}, ${sp(this.b)}${e===1?")":`, ${e})`}`}function p1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ep(e){return e=sp(e),(e<16?"0":"")+e.toString(16)}function q8(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wc(e,t,r,n)}function hV(e){if(e instanceof wc)return new wc(e.h,e.s,e.l,e.opacity);if(e instanceof z0||(e=l0(e)),!e)return new wc;if(e instanceof wc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),u=NaN,a=o-i,p=(o+i)/2;return a?(t===o?u=(r-n)/a+(r<n)*6:r===o?u=(n-t)/a+2:u=(t-r)/a+4,a/=p<.5?o+i:2-o-i,u*=60):a=p>0&&p<1?0:u,new wc(u,a,p,e.opacity)}function v_e(e,t,r,n){return arguments.length===1?hV(e):new wc(e,t,r,n??1)}function wc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}MM(wc,v_e,fV(z0,{brighter(e){return e=e==null?d1:Math.pow(d1,e),new wc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new wc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Ql(lC(e>=240?e-240:e+120,i,n),lC(e,i,n),lC(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new wc(V8(this.h),Wb(this.s),Wb(this.l),p1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=p1(this.opacity);return`${e===1?"hsl(":"hsla("}${V8(this.h)}, ${Wb(this.s)*100}%, ${Wb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function V8(e){return e=(e||0)%360,e<0?e+360:e}function Wb(e){return Math.max(0,Math.min(1,e||0))}function lC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const dV=e=>()=>e;function b_e(e,t){return function(r){return e+r*t}}function __e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function x_e(e){return(e=+e)==1?pV:function(t,r){return r-t?__e(t,r,e):dV(isNaN(t)?r:t)}}function pV(e,t){var r=t-e;return r?b_e(e,r):dV(isNaN(e)?t:e)}const G8=(function e(t){var r=x_e(t);function n(i,o){var u=r((i=cT(i)).r,(o=cT(o)).r),a=r(i.g,o.g),p=r(i.b,o.b),d=pV(i.opacity,o.opacity);return function(m){return i.r=u(m),i.g=a(m),i.b=p(m),i.opacity=d(m),i+""}}return n.gamma=e,n})(1);function Nh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var fT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uC=new RegExp(fT.source,"g");function w_e(e){return function(){return e}}function S_e(e){return function(t){return e(t)+""}}function E_e(e,t){var r=fT.lastIndex=uC.lastIndex=0,n,i,o,u=-1,a=[],p=[];for(e=e+"",t=t+"";(n=fT.exec(e))&&(i=uC.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[u]?a[u]+=o:a[++u]=o),(n=n[0])===(i=i[0])?a[u]?a[u]+=i:a[++u]=i:(a[++u]=null,p.push({i:u,x:Nh(n,i)})),r=uC.lastIndex;return r<t.length&&(o=t.slice(r),a[u]?a[u]+=o:a[++u]=o),a.length<2?p[0]?S_e(p[0].x):w_e(t):(t=p.length,function(d){for(var m=0,v;m<t;++m)a[(v=p[m]).i]=v.x(d);return a.join("")})}var H8=180/Math.PI,hT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mV(e,t,r,n,i,o){var u,a,p;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(p=e*r+t*n)&&(r-=e*p,n-=t*p),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,p/=a),e*n<t*r&&(e=-e,t=-t,p=-p,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*H8,skewX:Math.atan(p)*H8,scaleX:u,scaleY:a}}var Zb;function C_e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hT:mV(t.a,t.b,t.c,t.d,t.e,t.f)}function A_e(e){return e==null||(Zb||(Zb=document.createElementNS("http://www.w3.org/2000/svg","g")),Zb.setAttribute("transform",e),!(e=Zb.transform.baseVal.consolidate()))?hT:(e=e.matrix,mV(e.a,e.b,e.c,e.d,e.e,e.f))}function gV(e,t,r,n){function i(d){return d.length?d.pop()+" ":""}function o(d,m,v,w,x,P){if(d!==v||m!==w){var T=x.push("translate(",null,t,null,r);P.push({i:T-4,x:Nh(d,v)},{i:T-2,x:Nh(m,w)})}else(v||w)&&x.push("translate("+v+t+w+r)}function u(d,m,v,w){d!==m?(d-m>180?m+=360:m-d>180&&(d+=360),w.push({i:v.push(i(v)+"rotate(",null,n)-2,x:Nh(d,m)})):m&&v.push(i(v)+"rotate("+m+n)}function a(d,m,v,w){d!==m?w.push({i:v.push(i(v)+"skewX(",null,n)-2,x:Nh(d,m)}):m&&v.push(i(v)+"skewX("+m+n)}function p(d,m,v,w,x,P){if(d!==v||m!==w){var T=x.push(i(x)+"scale(",null,",",null,")");P.push({i:T-4,x:Nh(d,v)},{i:T-2,x:Nh(m,w)})}else(v!==1||w!==1)&&x.push(i(x)+"scale("+v+","+w+")")}return function(d,m){var v=[],w=[];return d=e(d),m=e(m),o(d.translateX,d.translateY,m.translateX,m.translateY,v,w),u(d.rotate,m.rotate,v,w),a(d.skewX,m.skewX,v,w),p(d.scaleX,d.scaleY,m.scaleX,m.scaleY,v,w),d=m=null,function(x){for(var P=-1,T=w.length,O;++P<T;)v[(O=w[P]).i]=O.x(x);return v.join("")}}}var P_e=gV(C_e,"px, ","px)","deg)"),T_e=gV(A_e,", ",")",")"),xg=0,cv=0,Gy=0,yV=1e3,m1,fv,g1=0,pp=0,c2=0,u0=typeof performance=="object"&&performance.now?performance:Date,vV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function RM(){return pp||(vV(I_e),pp=u0.now()+c2)}function I_e(){pp=0}function y1(){this._call=this._time=this._next=null}y1.prototype=bV.prototype={constructor:y1,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?RM():+r)+(t==null?0:+t),!this._next&&fv!==this&&(fv?fv._next=this:m1=this,fv=this),this._call=e,this._time=r,dT()},stop:function(){this._call&&(this._call=null,this._time=1/0,dT())}};function bV(e,t,r){var n=new y1;return n.restart(e,t,r),n}function M_e(){RM(),++xg;for(var e=m1,t;e;)(t=pp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xg}function W8(){pp=(g1=u0.now())+c2,xg=cv=0;try{M_e()}finally{xg=0,O_e(),pp=0}}function R_e(){var e=u0.now(),t=e-g1;t>yV&&(c2-=t,g1=e)}function O_e(){for(var e,t=m1,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:m1=r);fv=e,dT(n)}function dT(e){if(!xg){cv&&(cv=clearTimeout(cv));var t=e-pp;t>24?(e<1/0&&(cv=setTimeout(W8,e-u0.now()-c2)),Gy&&(Gy=clearInterval(Gy))):(Gy||(g1=u0.now(),Gy=setInterval(R_e,yV)),xg=1,vV(W8))}}function Z8(e,t,r){var n=new y1;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var k_e=Qq("start","end","cancel","interrupt"),L_e=[],_V=0,K8=1,pT=2,R_=3,X8=4,mT=5,O_=6;function f2(e,t,r,n,i,o){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;D_e(e,r,{name:t,index:n,group:i,on:k_e,tween:L_e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:_V})}function OM(e,t){var r=Bc(e,t);if(r.state>_V)throw new Error("too late; already scheduled");return r}function Tf(e,t){var r=Bc(e,t);if(r.state>R_)throw new Error("too late; already running");return r}function Bc(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function D_e(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=bV(o,0,r.time);function o(d){r.state=K8,r.timer.restart(u,r.delay,r.time),r.delay<=d&&u(d-r.delay)}function u(d){var m,v,w,x;if(r.state!==K8)return p();for(m in n)if(x=n[m],x.name===r.name){if(x.state===R_)return Z8(u);x.state===X8?(x.state=O_,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[m]):+m<t&&(x.state=O_,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[m])}if(Z8(function(){r.state===R_&&(r.state=X8,r.timer.restart(a,r.delay,r.time),a(d))}),r.state=pT,r.on.call("start",e,e.__data__,r.index,r.group),r.state===pT){for(r.state=R_,i=new Array(w=r.tween.length),m=0,v=-1;m<w;++m)(x=r.tween[m].value.call(e,e.__data__,r.index,r.group))&&(i[++v]=x);i.length=v+1}}function a(d){for(var m=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(p),r.state=mT,1),v=-1,w=i.length;++v<w;)i[v].call(e,m);r.state===mT&&(r.on.call("end",e,e.__data__,r.index,r.group),p())}function p(){r.state=O_,r.timer.stop(),delete n[t];for(var d in n)return;delete e.__transition}}function N_e(e,t){var r=e.__transition,n,i,o=!0,u;if(r){t=t==null?null:t+"";for(u in r){if((n=r[u]).name!==t){o=!1;continue}i=n.state>pT&&n.state<mT,n.state=O_,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[u]}o&&delete e.__transition}}function F_e(e){return this.each(function(){N_e(this,e)})}function B_e(e,t){var r,n;return function(){var i=Tf(this,e),o=i.tween;if(o!==r){n=r=o;for(var u=0,a=n.length;u<a;++u)if(n[u].name===t){n=n.slice(),n.splice(u,1);break}}i.tween=n}}function j_e(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=Tf(this,e),u=o.tween;if(u!==n){i=(n=u).slice();for(var a={name:t,value:r},p=0,d=i.length;p<d;++p)if(i[p].name===t){i[p]=a;break}p===d&&i.push(a)}o.tween=i}}function z_e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Bc(this.node(),r).tween,i=0,o=n.length,u;i<o;++i)if((u=n[i]).name===e)return u.value;return null}return this.each((t==null?B_e:j_e)(r,e,t))}function kM(e,t,r){var n=e._id;return e.each(function(){var i=Tf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Bc(i,n).value[t]}}function xV(e,t){var r;return(typeof t=="number"?Nh:t instanceof l0?G8:(r=l0(t))?(t=r,G8):E_e)(e,t)}function $_e(e){return function(){this.removeAttribute(e)}}function U_e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function q_e(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttribute(e);return u===i?null:u===n?o:o=t(n=u,r)}}function V_e(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttributeNS(e.space,e.local);return u===i?null:u===n?o:o=t(n=u,r)}}function G_e(e,t,r){var n,i,o;return function(){var u,a=r(this),p;return a==null?void this.removeAttribute(e):(u=this.getAttribute(e),p=a+"",u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a)))}}function H_e(e,t,r){var n,i,o;return function(){var u,a=r(this),p;return a==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),p=a+"",u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a)))}}function W_e(e,t){var r=u2(e),n=r==="transform"?T_e:xV;return this.attrTween(e,typeof t=="function"?(r.local?H_e:G_e)(r,n,kM(this,"attr."+e,t)):t==null?(r.local?U_e:$_e)(r):(r.local?V_e:q_e)(r,n,t))}function Z_e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function K_e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function X_e(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&K_e(e,o)),r}return i._value=t,i}function Y_e(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&Z_e(e,o)),r}return i._value=t,i}function J_e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=u2(e);return this.tween(r,(n.local?X_e:Y_e)(n,t))}function Q_e(e,t){return function(){OM(this,e).delay=+t.apply(this,arguments)}}function e1e(e,t){return t=+t,function(){OM(this,e).delay=t}}function t1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Q_e:e1e)(t,e)):Bc(this.node(),t).delay}function r1e(e,t){return function(){Tf(this,e).duration=+t.apply(this,arguments)}}function n1e(e,t){return t=+t,function(){Tf(this,e).duration=t}}function i1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r1e:n1e)(t,e)):Bc(this.node(),t).duration}function a1e(e,t){if(typeof t!="function")throw new Error;return function(){Tf(this,e).ease=t}}function o1e(e){var t=this._id;return arguments.length?this.each(a1e(t,e)):Bc(this.node(),t).ease}function s1e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Tf(this,e).ease=r}}function l1e(e){if(typeof e!="function")throw new Error;return this.each(s1e(this._id,e))}function u1e(e){typeof e!="function"&&(e=rV(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],p,d=0;d<u;++d)(p=o[d])&&e.call(p,p.__data__,d,o)&&a.push(p);return new fh(n,this._parents,this._name,this._id)}function c1e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),u=new Array(n),a=0;a<o;++a)for(var p=t[a],d=r[a],m=p.length,v=u[a]=new Array(m),w,x=0;x<m;++x)(w=p[x]||d[x])&&(v[x]=w);for(;a<n;++a)u[a]=t[a];return new fh(u,this._parents,this._name,this._id)}function f1e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function h1e(e,t,r){var n,i,o=f1e(t)?OM:Tf;return function(){var u=o(this,e),a=u.on;a!==n&&(i=(n=a).copy()).on(t,r),u.on=i}}function d1e(e,t){var r=this._id;return arguments.length<2?Bc(this.node(),r).on.on(e):this.each(h1e(r,e,t))}function p1e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function m1e(){return this.on("end.remove",p1e(this._id))}function g1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=TM(e));for(var n=this._groups,i=n.length,o=new Array(i),u=0;u<i;++u)for(var a=n[u],p=a.length,d=o[u]=new Array(p),m,v,w=0;w<p;++w)(m=a[w])&&(v=e.call(m,m.__data__,w,a))&&("__data__"in m&&(v.__data__=m.__data__),d[w]=v,f2(d[w],t,r,w,d,Bc(m,r)));return new fh(o,this._parents,t,r)}function y1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=tV(e));for(var n=this._groups,i=n.length,o=[],u=[],a=0;a<i;++a)for(var p=n[a],d=p.length,m,v=0;v<d;++v)if(m=p[v]){for(var w=e.call(m,m.__data__,v,p),x,P=Bc(m,r),T=0,O=w.length;T<O;++T)(x=w[T])&&f2(x,t,r,T,w,P);o.push(w),u.push(m)}return new fh(o,u,t,r)}var v1e=j0.prototype.constructor;function b1e(){return new v1e(this._groups,this._parents)}function _1e(e,t){var r,n,i;return function(){var o=_g(this,e),u=(this.style.removeProperty(e),_g(this,e));return o===u?null:o===r&&u===n?i:i=t(r=o,n=u)}}function wV(e){return function(){this.style.removeProperty(e)}}function x1e(e,t,r){var n,i=r+"",o;return function(){var u=_g(this,e);return u===i?null:u===n?o:o=t(n=u,r)}}function w1e(e,t,r){var n,i,o;return function(){var u=_g(this,e),a=r(this),p=a+"";return a==null&&(p=a=(this.style.removeProperty(e),_g(this,e))),u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a))}}function S1e(e,t){var r,n,i,o="style."+t,u="end."+o,a;return function(){var p=Tf(this,e),d=p.on,m=p.value[o]==null?a||(a=wV(t)):void 0;(d!==r||i!==m)&&(n=(r=d).copy()).on(u,i=m),p.on=n}}function E1e(e,t,r){var n=(e+="")=="transform"?P_e:xV;return t==null?this.styleTween(e,_1e(e,n)).on("end.style."+e,wV(e)):typeof t=="function"?this.styleTween(e,w1e(e,n,kM(this,"style."+e,t))).each(S1e(this._id,e)):this.styleTween(e,x1e(e,n,t),r).on("end.style."+e,null)}function C1e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function A1e(e,t,r){var n,i;function o(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&C1e(e,u,r)),n}return o._value=t,o}function P1e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,A1e(e,t,r??""))}function T1e(e){return function(){this.textContent=e}}function I1e(e){return function(){var t=e(this);this.textContent=t??""}}function M1e(e){return this.tween("text",typeof e=="function"?I1e(kM(this,"text",e)):T1e(e==null?"":e+""))}function R1e(e){return function(t){this.textContent=e.call(this,t)}}function O1e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&R1e(i)),t}return n._value=e,n}function k1e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,O1e(e))}function L1e(){for(var e=this._name,t=this._id,r=SV(),n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,p,d=0;d<a;++d)if(p=u[d]){var m=Bc(p,t);f2(p,e,r,d,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new fh(n,this._parents,e,r)}function D1e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,u){var a={value:u},p={value:function(){--i===0&&o()}};r.each(function(){var d=Tf(this,n),m=d.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(p)),d.on=t}),i===0&&o()})}var N1e=0;function fh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function SV(){return++N1e}var Wf=j0.prototype;fh.prototype={constructor:fh,select:g1e,selectAll:y1e,selectChild:Wf.selectChild,selectChildren:Wf.selectChildren,filter:u1e,merge:c1e,selection:b1e,transition:L1e,call:Wf.call,nodes:Wf.nodes,node:Wf.node,size:Wf.size,empty:Wf.empty,each:Wf.each,on:d1e,attr:W_e,attrTween:J_e,style:E1e,styleTween:P1e,text:M1e,textTween:k1e,remove:m1e,tween:z_e,delay:t1e,duration:i1e,ease:o1e,easeVarying:l1e,end:D1e,[Symbol.iterator]:Wf[Symbol.iterator]};function F1e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var B1e={time:null,delay:0,duration:250,ease:F1e};function j1e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function z1e(e){var t,r;e instanceof fh?(t=e._id,e=e._name):(t=SV(),(r=B1e).time=RM(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,p,d=0;d<a;++d)(p=u[d])&&f2(p,e,t,d,u,r||j1e(p,t));return new fh(n,this._parents,e,t)}j0.prototype.interrupt=F_e;j0.prototype.transition=z1e;function hv(e,t,r){this.k=e,this.x=t,this.y=r}hv.prototype={constructor:hv,scale:function(e){return e===1?this:new hv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hv.prototype;er(Go)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});const $1e=yi(ze.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),U1e=yi(ze.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),q1e=yi(ze.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}));function Bs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var V1e=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y8=V1e,cC=()=>Math.random().toString(36).substring(7).split("").join("."),G1e={INIT:`@@redux/INIT${cC()}`,REPLACE:`@@redux/REPLACE${cC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${cC()}`},v1=G1e;function LM(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function EV(e,t,r){if(typeof e!="function")throw new Error(Bs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bs(1));return r(EV)(e,t)}let n=e,i=t,o=new Map,u=o,a=0,p=!1;function d(){u===o&&(u=new Map,o.forEach((O,L)=>{u.set(L,O)}))}function m(){if(p)throw new Error(Bs(3));return i}function v(O){if(typeof O!="function")throw new Error(Bs(4));if(p)throw new Error(Bs(5));let L=!0;d();const N=a++;return u.set(N,O),function(){if(L){if(p)throw new Error(Bs(6));L=!1,d(),u.delete(N),o=null}}}function w(O){if(!LM(O))throw new Error(Bs(7));if(typeof O.type>"u")throw new Error(Bs(8));if(typeof O.type!="string")throw new Error(Bs(17));if(p)throw new Error(Bs(9));try{p=!0,i=n(i,O)}finally{p=!1}return(o=u).forEach(N=>{N()}),O}function x(O){if(typeof O!="function")throw new Error(Bs(10));n=O,w({type:v1.REPLACE})}function P(){const O=v;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(Bs(11));function N(){const D=L;D.next&&D.next(m())}return N(),{unsubscribe:O(N)}},[Y8](){return this}}}return w({type:v1.INIT}),{dispatch:w,subscribe:v,getState:m,replaceReducer:x,[Y8]:P}}function H1e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:v1.INIT})>"u")throw new Error(Bs(12));if(typeof r(void 0,{type:v1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bs(13))})}function W1e(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let i;try{H1e(r)}catch(o){i=o}return function(u={},a){if(i)throw i;let p=!1;const d={};for(let m=0;m<n.length;m++){const v=n[m],w=r[v],x=u[v],P=w(x,a);if(typeof P>"u")throw a&&a.type,new Error(Bs(14));d[v]=P,p=p||P!==x}return p=p||n.length!==Object.keys(u).length,p?d:u}}function b1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Z1e(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Bs(15))};const u={getState:i.getState,dispatch:(p,...d)=>o(p,...d)},a=e.map(p=>p(u));return o=b1(...a)(i.dispatch),{...i,dispatch:o}}}function K1e(e){return LM(e)&&"type"in e&&typeof e.type=="string"}var CV=Symbol.for("immer-nothing"),J8=Symbol.for("immer-draftable"),ju=Symbol.for("immer-state");function Sc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wg=Object.getPrototypeOf;function mp(e){return!!e&&!!e[ju]}function hh(e){return e?AV(e)||Array.isArray(e)||!!e[J8]||!!e.constructor?.[J8]||$0(e)||d2(e):!1}var X1e=Object.prototype.constructor.toString();function AV(e){if(!e||typeof e!="object")return!1;const t=wg(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===X1e}function _1(e,t){h2(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function h2(e){const t=e[ju];return t?t.type_:Array.isArray(e)?1:$0(e)?2:d2(e)?3:0}function gT(e,t){return h2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function PV(e,t,r){const n=h2(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Y1e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $0(e){return e instanceof Map}function d2(e){return e instanceof Set}function Ud(e){return e.copy_||e.base_}function yT(e,t){if($0(e))return new Map(e);if(d2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=AV(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ju];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const u=i[o],a=n[u];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[u]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[u]})}return Object.create(wg(e),n)}else{const n=wg(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function DM(e,t=!1){return p2(e)||mp(e)||!hh(e)||(h2(e)>1&&Object.defineProperties(e,{set:{value:Kb},add:{value:Kb},clear:{value:Kb},delete:{value:Kb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>DM(r,!0))),e}function Kb(){Sc(2)}function p2(e){return Object.isFrozen(e)}var J1e={};function gp(e){const t=J1e[e];return t||Sc(0,e),t}var c0;function TV(){return c0}function Q1e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Q8(e,t){t&&(gp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vT(e){bT(e),e.drafts_.forEach(exe),e.drafts_=null}function bT(e){e===c0&&(c0=e.parent_)}function eB(e){return c0=Q1e(c0,e)}function exe(e){const t=e[ju];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tB(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ju].modified_&&(vT(t),Sc(4)),hh(e)&&(e=x1(t,e),t.parent_||w1(t,e)),t.patches_&&gp("Patches").generateReplacementPatches_(r[ju].base_,e,t.patches_,t.inversePatches_)):e=x1(t,r,[]),vT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==CV?e:void 0}function x1(e,t,r){if(p2(t))return t;const n=t[ju];if(!n)return _1(t,(i,o)=>rB(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return w1(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,u=!1;n.type_===3&&(o=new Set(i),i.clear(),u=!0),_1(o,(a,p)=>rB(e,n,i,a,p,r,u)),w1(e,i,!1),r&&e.patches_&&gp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function rB(e,t,r,n,i,o,u){if(mp(i)){const a=o&&t&&t.type_!==3&&!gT(t.assigned_,n)?o.concat(n):void 0,p=x1(e,i,a);if(PV(r,n,p),mp(p))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(hh(i)&&!p2(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;x1(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&($0(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&w1(e,i)}}function w1(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&DM(t,r)}function txe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:TV(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=NM;r&&(i=[n],o=f0);const{revoke:u,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=u,a}var NM={get(e,t){if(t===ju)return e;const r=Ud(e);if(!gT(r,t))return rxe(e,r,t);const n=r[t];return e.finalized_||!hh(n)?n:n===fC(e.base_,t)?(hC(e),e.copy_[t]=xT(n,e)):n},has(e,t){return t in Ud(e)},ownKeys(e){return Reflect.ownKeys(Ud(e))},set(e,t,r){const n=IV(Ud(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=fC(Ud(e),t),o=i?.[ju];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Y1e(r,i)&&(r!==void 0||gT(e.base_,t)))return!0;hC(e),_T(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return fC(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hC(e),_T(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ud(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Sc(11)},getPrototypeOf(e){return wg(e.base_)},setPrototypeOf(){Sc(12)}},f0={};_1(NM,(e,t)=>{f0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});f0.deleteProperty=function(e,t){return f0.set.call(this,e,t,void 0)};f0.set=function(e,t,r){return NM.set.call(this,e[0],t,r,e[0])};function fC(e,t){const r=e[ju];return(r?Ud(r):e)[t]}function rxe(e,t,r){const n=IV(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function IV(e,t){if(!(t in e))return;let r=wg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=wg(r)}}function _T(e){e.modified_||(e.modified_=!0,e.parent_&&_T(e.parent_))}function hC(e){e.copy_||(e.copy_=yT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nxe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(p=o,...d){return u.produce(p,m=>r.call(this,m,...d))}}typeof r!="function"&&Sc(6),n!==void 0&&typeof n!="function"&&Sc(7);let i;if(hh(t)){const o=eB(this),u=xT(t,void 0);let a=!0;try{i=r(u),a=!1}finally{a?vT(o):bT(o)}return Q8(o,n),tB(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===CV&&(i=void 0),this.autoFreeze_&&DM(i,!0),n){const o=[],u=[];gp("Patches").generateReplacementPatches_(t,i,o,u),n(o,u)}return i}else Sc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...a)=>this.produceWithPatches(u,p=>t(p,...a));let n,i;return[this.produce(t,r,(u,a)=>{n=u,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){hh(e)||Sc(8),mp(e)&&(e=ixe(e));const t=eB(this),r=xT(e,void 0);return r[ju].isManual_=!0,bT(t),r}finishDraft(e,t){const r=e&&e[ju];(!r||!r.isManual_)&&Sc(9);const{scope_:n}=r;return Q8(n,t),tB(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=gp("Patches").applyPatches_;return mp(e)?n(e,t):this.produce(e,i=>n(i,t))}};function xT(e,t){const r=$0(e)?gp("MapSet").proxyMap_(e,t):d2(e)?gp("MapSet").proxySet_(e,t):txe(e,t);return(t?t.scope_:TV()).drafts_.push(r),r}function ixe(e){return mp(e)||Sc(10,e),MV(e)}function MV(e){if(!hh(e)||p2(e))return e;const t=e[ju];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=yT(e,t.scope_.immer_.useStrictShallowCopy_)}else r=yT(e,!0);return _1(r,(n,i)=>{PV(r,n,MV(i))}),t&&(t.finalized_=!1),r}var axe=new nxe,RV=axe.produce;function OV(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var oxe=OV(),sxe=OV,lxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?b1:b1.apply(null,arguments)};function nB(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(sh(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>K1e(n)&&n.type===e,r}var kV=class dv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dv.prototype)}static get[Symbol.species](){return dv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dv(...t[0].concat(this)):new dv(...t.concat(this))}};function iB(e){return hh(e)?RV(e,()=>{}):e}function Xb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function uxe(e){return typeof e=="boolean"}var cxe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let u=new kV;return r&&(uxe(r)?u.push(oxe):u.push(sxe(r.extraArgument))),u},fxe="RTK_autoBatch",aB=e=>t=>{setTimeout(t,e)},hxe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,u=!1;const a=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:aB(10):e.type==="callback"?e.queueNotification:aB(e.timeout),d=()=>{u=!1,o&&(o=!1,a.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const v=()=>i&&m(),w=n.subscribe(v);return a.add(m),()=>{w(),a.delete(m)}},dispatch(m){try{return i=!m?.meta?.[fxe],o=!i,o&&(u||(u=!0,p(d))),n.dispatch(m)}finally{i=!0}}})},dxe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new kV(e);return n&&i.push(hxe(typeof n=="object"?n:void 0)),i};function pxe(e){const t=cxe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(LM(r))a=W1e(r);else throw new Error(sh(1));let p;typeof n=="function"?p=n(t):p=t();let d=b1;i&&(d=lxe({trace:!1,...typeof i=="object"&&i}));const m=Z1e(...p),v=dxe(m);let w=typeof u=="function"?u(v):v();const x=d(...w);return EV(a,o,x)}function LV(e){const t={},r=[];let n;const i={addCase(o,u){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(sh(28));if(a in t)throw new Error(sh(29));return t[a]=u,i},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),i},addMatcher(o,u){return r.push({matcher:o,reducer:u}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function mxe(e){return typeof e=="function"}function gxe(e,t){let[r,n,i]=LV(t),o;if(mxe(e))o=()=>iB(e());else{const a=iB(e);o=()=>a}function u(a=o(),p){let d=[r[p.type],...n.filter(({matcher:m})=>m(p)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,v)=>{if(v)if(mp(m)){const x=v(m,p);return x===void 0?m:x}else{if(hh(m))return RV(m,w=>v(w,p));{const w=v(m,p);if(w===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return m},a)}return u.getInitialState=o,u}var yxe=Symbol.for("rtk-slice-createasyncthunk");function vxe(e,t){return`${e}/${t}`}function bxe({creators:e}={}){const t=e?.asyncThunk?.[yxe];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(sh(11));const u=(typeof n.reducers=="function"?n.reducers(wxe()):n.reducers)||{},a=Object.keys(u),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(F,D){const q=typeof F=="string"?F:F.type;if(!q)throw new Error(sh(12));if(q in p.sliceCaseReducersByType)throw new Error(sh(13));return p.sliceCaseReducersByType[q]=D,d},addMatcher(F,D){return p.sliceMatchers.push({matcher:F,reducer:D}),d},exposeAction(F,D){return p.actionCreators[F]=D,d},exposeCaseReducer(F,D){return p.sliceCaseReducersByName[F]=D,d}};a.forEach(F=>{const D=u[F],q={reducerName:F,type:vxe(i,F),createNotation:typeof n.reducers=="function"};Exe(D)?Axe(q,D,d,t):Sxe(q,D,d)});function m(){const[F={},D=[],q=void 0]=typeof n.extraReducers=="function"?LV(n.extraReducers):[n.extraReducers],z={...F,...p.sliceCaseReducersByType};return gxe(n.initialState,Z=>{for(let Q in z)Z.addCase(Q,z[Q]);for(let Q of p.sliceMatchers)Z.addMatcher(Q.matcher,Q.reducer);for(let Q of D)Z.addMatcher(Q.matcher,Q.reducer);q&&Z.addDefaultCase(q)})}const v=F=>F,w=new Map,x=new WeakMap;let P;function T(F,D){return P||(P=m()),P(F,D)}function O(){return P||(P=m()),P.getInitialState()}function L(F,D=!1){function q(Z){let Q=Z[F];return typeof Q>"u"&&D&&(Q=Xb(x,q,O)),Q}function z(Z=v){const Q=Xb(w,D,()=>new WeakMap);return Xb(Q,Z,()=>{const Y={};for(const[se,W]of Object.entries(n.selectors??{}))Y[se]=_xe(W,Z,()=>Xb(x,Z,O),D);return Y})}return{reducerPath:F,getSelectors:z,get selectors(){return z(q)},selectSlice:q}}const N={name:i,reducer:T,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:O,...L(o),injectInto(F,{reducerPath:D,...q}={}){const z=D??o;return F.inject({reducerPath:z,reducer:T},q),{...N,...L(z,!0)}}};return N}}function _xe(e,t,r,n){function i(o,...u){let a=t(o);return typeof a>"u"&&n&&(a=r()),e(a,...u)}return i.unwrapped=e,i}var xxe=bxe();function wxe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Sxe({type:e,reducerName:t,createNotation:r},n,i){let o,u;if("reducer"in n){if(r&&!Cxe(n))throw new Error(sh(17));o=n.reducer,u=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?nB(e,u):nB(e))}function Exe(e){return e._reducerDefinitionType==="asyncThunk"}function Cxe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Axe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(sh(18));const{payloadCreator:o,fulfilled:u,pending:a,rejected:p,settled:d,options:m}=r,v=i(e,o,m);n.exposeAction(t,v),u&&n.addCase(v.fulfilled,u),a&&n.addCase(v.pending,a),p&&n.addCase(v.rejected,p),d&&n.addMatcher(v.settled,d),n.exposeCaseReducer(t,{fulfilled:u||Yb,pending:a||Yb,rejected:p||Yb,settled:d||Yb})}function Yb(){}function sh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function DV(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&DV(e,n.layers,n)})}const Pxe={mapConfigs:{}},NV=xxe({name:"mapConfig",initialState:Pxe,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let o=0;o<i.layers.length;o++)if(i.layers[o].uuid===n.uuid){i.layers[o]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const o=i.layers.findIndex(u=>u.uuid===n);o!==-1&&(delete i.layers[o],DV(function(u,a){a&&a.layers&&(a.layers=a.layers.filter(p=>p.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,o=e.mapConfigs[r];if(o){const u=o.layers.findIndex(a=>a.uuid===n);if(u!==-1){const a=o.layers[u];if(a){const p=[...o.layers];a.type==="folder"&&o.layerOrder.forEach(d=>{d.uuid===n&&d.layers?.forEach(m=>{const v=o.layers.findIndex(x=>x.uuid===m.uuid),w=p[v];p[v]={...w,masterVisible:i},w?.type==="vt"&&w?.config?.layers&&(w.config.layers=w.config.layers.map(x=>({...x,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(d=>({...d,masterVisible:i}))),e.mapConfigs[r].layers=p}}}}}});pxe({reducer:{mapConfig:NV.reducer}});const{setMapConfig:mje,removeMapConfig:gje,setLayerInMapConfig:yje,removeLayerFromMapConfig:vje,updateLayerOrder:bje,setMasterVisible:_je}=NV.actions;er(Lc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});er(ad)({marginLeft:"61px"});er(Go)({padding:"4px",marginTop:"-3px"});er(Go)({marginLeft:"20px"});er(bI)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});er(R0)({minWidth:"30px"});er(Go)({marginRight:"0px",padding:"0px"});er(ad)(({open:e})=>({display:e?"block":"none"}));er(M0)({marginLeft:"50px"});er(M0)({marginTop:"15px"});var FM=M.createContext(void 0);FM.displayName="AuthContext";var m2={loginUrl:"/login",afterLoginUrl:"/"},lc=function(){return M.useContext(FM)},Bg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yp=typeof window>"u"||"Deno"in globalThis;function Dl(){}function Txe(e,t){return typeof e=="function"?e(t):e}function wT(e){return typeof e=="number"&&e>=0&&e!==1/0}function FV(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Wh(e,t){return typeof e=="function"?e(t):e}function Xu(e,t){return typeof e=="function"?e(t):e}function oB(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:u,stale:a}=e;if(u){if(n){if(t.queryHash!==BM(u,t.options))return!1}else if(!h0(t.queryKey,u))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function sB(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(vp(t.options.mutationKey)!==vp(o))return!1}else if(!h0(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function BM(e,t){return(t?.queryKeyHashFn||vp)(e)}function vp(e){return JSON.stringify(e,(t,r)=>ST(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function h0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>h0(e[r],t[r])):!1}var Ixe=Object.prototype.hasOwnProperty;function BV(e,t){if(e===t)return e;const r=lB(e)&&lB(t);if(!r&&!(ST(e)&&ST(t)))return t;const i=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),u=o.length,a=r?new Array(u):{};let p=0;for(let d=0;d<u;d++){const m=r?d:o[d],v=e[m],w=t[m];if(v===w){a[m]=v,(r?d<i:Ixe.call(e,m))&&p++;continue}if(v===null||w===null||typeof v!="object"||typeof w!="object"){a[m]=w;continue}const x=BV(v,w);a[m]=x,x===v&&p++}return i===u&&p===i?e:a}function S1(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function lB(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ST(e){if(!uB(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!uB(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function uB(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mxe(e){return new Promise(t=>{setTimeout(t,e)})}function ET(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?BV(e,t):t}function Rxe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Oxe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var jM=Symbol();function jV(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===jM?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function zV(e,t){return typeof e=="function"?e(...t):!!e}var kxe=class extends Bg{#t;#e;#r;constructor(){super(),this.#r=e=>{if(!yp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},zM=new kxe,Lxe=class extends Bg{#t=!0;#e;#r;constructor(){super(),this.#r=e=>{if(!yp&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#t}},E1=new Lxe;function CT(){let e,t;const r=new Promise((i,o)=>{e=i,t=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Dxe(e){return Math.min(1e3*2**e,3e4)}function $V(e){return(e??"online")==="online"?E1.isOnline():!0}var AT=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function UV(e){let t=!1,r=0,n;const i=CT(),o=()=>i.status!=="pending",u=T=>{if(!o()){const O=new AT(T);w(O),e.onCancel?.(O)}},a=()=>{t=!0},p=()=>{t=!1},d=()=>zM.isFocused()&&(e.networkMode==="always"||E1.isOnline())&&e.canRun(),m=()=>$V(e.networkMode)&&e.canRun(),v=T=>{o()||(n?.(),i.resolve(T))},w=T=>{o()||(n?.(),i.reject(T))},x=()=>new Promise(T=>{n=O=>{(o()||d())&&T(O)},e.onPause?.()}).then(()=>{n=void 0,o()||e.onContinue?.()}),P=()=>{if(o())return;let T;const O=r===0?e.initialPromise:void 0;try{T=O??e.fn()}catch(L){T=Promise.reject(L)}Promise.resolve(T).then(v).catch(L=>{if(o())return;const N=e.retry??(yp?0:3),F=e.retryDelay??Dxe,D=typeof F=="function"?F(r,L):F,q=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,L);if(t||!q){w(L);return}r++,e.onFail?.(r,L),Mxe(D).then(()=>d()?void 0:x()).then(()=>{t?w(L):P()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(n?.(),i),cancelRetry:a,continueRetry:p,canStart:m,start:()=>(m()?P():x().then(P),i)}}var Nxe=e=>setTimeout(e,0);function Fxe(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=Nxe;const o=a=>{t?e.push(a):i(()=>{r(a)})},u=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(p=>{r(p)})})})};return{batch:a=>{let p;t++;try{p=a()}finally{t--,t||u()}return p},batchCalls:a=>(...p)=>{o(()=>{a(...p)})},schedule:o,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var Uo=Fxe(),qV=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wT(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yp?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},Bxe=class extends qV{#t;#e;#r;#n;#i;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=jxe(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=ET(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Dl).catch(Dl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Xu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Wh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!FV(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(p=>p.options.queryFn);a&&this.setOptions(a.options)}const r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const a=jV(this.options,t),d=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#s=!1,this.options.persister?this.options.persister(a,d,this):a(d)},u=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(a),a})();this.options.behavior?.onFetch(u,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#a({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=UV({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:a=>{a instanceof AT&&a.revert&&this.setState({...this.#e,fetchStatus:"idle"}),r.abort()},onFail:(a,p)=>{this.#a({type:"failed",failureCount:a,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const a=await this.#i.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof AT){if(a.silent)return this.#i.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#a({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...VV(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Uo.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function VV(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$V(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function jxe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zxe=class extends Bg{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,r){const n=t.queryKey,i=t.queryHash??BM(n,t);let o=this.get(i);return o||(o=new Bxe({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Uo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>oB(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>oB(e,r)):t}notify(e){Uo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Uo.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Uo.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$xe=class extends qV{#t;#e;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||GV(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})};this.#r=UV({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)t();else{this.#n({type:"pending",variables:e,isPaused:n}),await this.#e.config.onMutate?.(e,this);const o=await this.options.onMutate?.(e);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:n})}const i=await this.#r.start();return await this.#e.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,e,this.state.context,this),await this.options.onError?.(i,e,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,e,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#e.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Uo.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function GV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uxe=class extends Bg{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(e,t,r){const n=new $xe({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=Jb(e);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=Jb(e);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Jb(e);if(typeof t=="string"){const n=this.#e.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=Jb(e);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Uo.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>sB(t,r))}findAll(e={}){return this.getAll().filter(t=>sB(e,t))}notify(e){Uo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Uo.batch(()=>Promise.all(e.map(t=>t.continue().catch(Dl))))}};function Jb(e){return e.options.scope?.id}function cB(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},p=0;const d=async()=>{let m=!1;const v=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},w=jV(t.options,t.fetchOptions),x=async(P,T,O)=>{if(m)return Promise.reject();if(T==null&&P.pages.length)return Promise.resolve(P);const N=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:T,direction:O?"backward":"forward",meta:t.options.meta};return v(z),z})(),F=await w(N),{maxPages:D}=t.options,q=O?Oxe:Rxe;return{pages:q(P.pages,F,D),pageParams:q(P.pageParams,T,D)}};if(i&&o.length){const P=i==="backward",T=P?qxe:fB,O={pages:o,pageParams:u},L=T(n,O);a=await x(O,L,P)}else{const P=e??o.length;do{const T=p===0?u[0]??n.initialPageParam:fB(n,a);if(p>0&&T==null)break;a=await x(a,T),p++}while(p<P)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function fB(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function qxe(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Vxe=class{#t;#e;#r;#n;#i;#o;#s;#a;constructor(e={}){this.#t=e.queryCache||new zxe,this.#e=e.mutationCache||new Uxe,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=zM.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=E1.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#t.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Wh(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),o=this.#t.get(n.queryHash)?.state.data,u=Txe(t,o);if(u!==void 0)return this.#t.build(this,n).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return Uo.batch(()=>this.#t.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;Uo.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#t;return Uo.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Uo.batch(()=>this.#t.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Dl).catch(Dl)}invalidateQueries(e,t={}){return Uo.batch(()=>(this.#t.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Uo.batch(()=>this.#t.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Dl)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Dl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Wh(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Dl).catch(Dl)}fetchInfiniteQuery(e){return e.behavior=cB(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Dl).catch(Dl)}ensureInfiniteQueryData(e){return e.behavior=cB(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return E1.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(vp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{h0(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(vp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{h0(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=BM(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jM&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Gxe=class extends Bg{constructor(e,t){super(),this.options=t,this.#t=e,this.#a=null,this.#s=CT(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#r=void 0;#n=void 0;#i;#o;#s;#a;#m;#h;#d;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),hB(this.#e,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return PT(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return PT(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#x(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xu(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!S1(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&dB(this.#e,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#e!==r||Xu(this.options.enabled,this.#e)!==Xu(t.enabled,this.#e)||Wh(this.options.staleTime,this.#e)!==Wh(t.staleTime,this.#e))&&this.#g();const i=this.#y();n&&(this.#e!==r||Xu(this.options.enabled,this.#e)!==Xu(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),r=this.createResult(t,e);return Wxe(this,r)&&(this.#n=r,this.#o=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#f(e){this.#w();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Dl)),t}#g(){this.#_();const e=Wh(this.options.staleTime,this.#e);if(yp||this.#n.isStale||!wT(e))return;const r=FV(this.#n.dataUpdatedAt,e)+1;this.#u=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#x(),this.#l=e,!(yp||Xu(this.options.enabled,this.#e)===!1||!wT(this.#l)||this.#l===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||zM.isFocused())&&this.#f()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#_(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#x(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#e,n=this.options,i=this.#n,o=this.#i,u=this.#o,p=e!==r?e.state:this.#r,{state:d}=e;let m={...d},v=!1,w;if(t._optimisticResults){const Q=this.hasListeners(),Y=!Q&&hB(e,t),se=Q&&dB(e,r,t,n);(Y||se)&&(m={...m,...VV(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:P,status:T}=m;w=m.data;let O=!1;if(t.placeholderData!==void 0&&w===void 0&&T==="pending"){let Q;i?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(Q=i.data,O=!0):Q=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,Q!==void 0&&(T="success",w=ET(i?.data,Q,t),v=!0)}if(t.select&&w!==void 0&&!O)if(i&&w===o?.data&&t.select===this.#m)w=this.#h;else try{this.#m=t.select,w=t.select(w),w=ET(i?.data,w,t),this.#h=w,this.#a=null}catch(Q){this.#a=Q}this.#a&&(x=this.#a,w=this.#h,P=Date.now(),T="error");const L=m.fetchStatus==="fetching",N=T==="pending",F=T==="error",D=N&&L,q=w!==void 0,Z={status:T,fetchStatus:m.fetchStatus,isPending:N,isSuccess:T==="success",isError:F,isInitialLoading:D,isLoading:D,data:w,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:P,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>p.dataUpdateCount||m.errorUpdateCount>p.errorUpdateCount,isFetching:L,isRefetching:L&&!N,isLoadingError:F&&!q,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:F&&q,isStale:$M(e,t),refetch:this.refetch,promise:this.#s,isEnabled:Xu(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const Q=W=>{Z.status==="error"?W.reject(Z.error):Z.data!==void 0&&W.resolve(Z.data)},Y=()=>{const W=this.#s=Z.promise=CT();Q(W)},se=this.#s;switch(se.status){case"pending":e.queryHash===r.queryHash&&Q(se);break;case"fulfilled":(Z.status==="error"||Z.data!==se.value)&&Y();break;case"rejected":(Z.status!=="error"||Z.error!==se.reason)&&Y();break}}return Z}updateResult(){const e=this.#n,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#o=this.options,this.#i.data!==void 0&&(this.#d=this.#e),S1(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const o=new Set(i??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(u=>{const a=u;return this.#n[a]!==e[a]&&o.has(a)})};this.#S({listeners:r()})}#w(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){Uo.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Hxe(e,t){return Xu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hB(e,t){return Hxe(e,t)||e.state.data!==void 0&&PT(e,t,t.refetchOnMount)}function PT(e,t,r){if(Xu(t.enabled,e)!==!1&&Wh(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&$M(e,t)}return!1}function dB(e,t,r,n){return(e!==t||Xu(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&$M(e,r)}function $M(e,t){return Xu(t.enabled,e)!==!1&&e.isStaleByTime(Wh(t.staleTime,e))}function Wxe(e,t){return!S1(e.getCurrentResult(),t)}var Zxe=class extends Bg{#t;#e=void 0;#r;#n;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),S1(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&vp(r.mutationKey)!==vp(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#o()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??GV();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Uo.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,r,n),this.#n.onSettled?.(t.data,null,r,n)):t?.type==="error"&&(this.#n.onError?.(t.error,r,n),this.#n.onSettled?.(void 0,t.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},HV=M.createContext(void 0),If=e=>{const t=M.useContext(HV);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Kxe=({client:e,children:t})=>(M.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ze.jsx(HV.Provider,{value:e,children:t})),WV=M.createContext(!1),Xxe=()=>M.useContext(WV);WV.Provider;function Yxe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Jxe=M.createContext(Yxe()),Qxe=()=>M.useContext(Jxe),e2e=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},t2e=e=>{M.useEffect(()=>{e.clearReset()},[e])},r2e=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||zV(r,[e.error,n])),n2e=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},i2e=(e,t)=>e.isLoading&&e.isFetching&&!t,a2e=(e,t)=>e?.suspense&&t.isPending,pB=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function o2e(e,t,r){const n=Xxe(),i=Qxe(),o=If(),u=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=n?"isRestoring":"optimistic",n2e(u),e2e(u,i),t2e(i);const a=!o.getQueryCache().get(u.queryHash),[p]=M.useState(()=>new t(o,u)),d=p.getOptimisticResult(u),m=!n&&e.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(v=>{const w=m?p.subscribe(Uo.batchCalls(v)):Dl;return p.updateResult(),w},[p,m]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),M.useEffect(()=>{p.setOptions(u)},[u,p]),a2e(u,d))throw pB(u,p,i);if(r2e({result:d,errorResetBoundary:i,throwOnError:u.throwOnError,query:o.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(u,d),u.experimental_prefetchInRender&&!yp&&i2e(d,n)&&(a?pB(u,p,i):o.getQueryCache().get(u.queryHash)?.promise)?.catch(Dl).finally(()=>{p.updateResult()}),u.notifyOnChangeProps?d:p.trackResult(d)}function Rp(e,t){return o2e(e,Gxe)}function ZV(e,t){const r=If(),[n]=M.useState(()=>new Zxe(r,e));M.useEffect(()=>{n.setOptions(e)},[n,e]);const i=M.useSyncExternalStore(M.useCallback(u=>n.subscribe(Uo.batchCalls(u)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=M.useCallback((u,a)=>{n.mutate(u,a).catch(Dl)},[n]);if(i.error&&zV(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var KV=e=>{throw TypeError(e)},s2e=(e,t,r)=>t.has(e)||KV("Cannot "+r),dC=(e,t,r)=>(s2e(e,t,"read from private field"),r?r.call(e):t.get(e)),l2e=(e,t,r)=>t.has(e)?KV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),mB="popstate";function u2e(e={}){function t(i,o){let{pathname:u="/",search:a="",hash:p=""}=Mf(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),d0("",{pathname:u,search:a,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){let u=i.document.querySelector("base"),a="";if(u&&u.getAttribute("href")){let p=i.location.href,d=p.indexOf("#");a=d===-1?p:p.slice(0,d)}return a+"#"+(typeof o=="string"?o:td(o))}function n(i,o){Eo(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return f2e(t,r,n,e)}function oi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Eo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function c2e(){return Math.random().toString(36).substring(2,10)}function gB(e,t){return{usr:e.state,key:e.key,idx:t}}function d0(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Mf(t):t,state:r,key:t&&t.key||n||c2e()}}function td({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function f2e(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,u=i.history,a="POP",p=null,d=m();d==null&&(d=0,u.replaceState({...u.state,idx:d},""));function m(){return(u.state||{idx:null}).idx}function v(){a="POP";let O=m(),L=O==null?null:O-d;d=O,p&&p({action:a,location:T.location,delta:L})}function w(O,L){a="PUSH";let N=d0(T.location,O,L);r&&r(N,O),d=m()+1;let F=gB(N,d),D=T.createHref(N);try{u.pushState(F,"",D)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(D)}o&&p&&p({action:a,location:T.location,delta:1})}function x(O,L){a="REPLACE";let N=d0(T.location,O,L);r&&r(N,O),d=m();let F=gB(N,d),D=T.createHref(N);u.replaceState(F,"",D),o&&p&&p({action:a,location:T.location,delta:0})}function P(O){return XV(O)}let T={get action(){return a},get location(){return e(i,u)},listen(O){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(mB,v),p=O,()=>{i.removeEventListener(mB,v),p=null}},createHref(O){return t(i,O)},createURL:P,encodeLocation(O){let L=P(O);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:w,replace:x,go(O){return u.go(O)}};return T}function XV(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),oi(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:td(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var pv,yB=class{constructor(e){if(l2e(this,pv,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(dC(this,pv).has(e))return dC(this,pv).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){dC(this,pv).set(e,t)}};pv=new WeakMap;var h2e=new Set(["lazy","caseSensitive","path","id","index","children"]);function d2e(e){return h2e.has(e)}var p2e=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function m2e(e){return p2e.has(e)}function g2e(e){return e.index===!0}function p0(e,t,r=[],n={},i=!1){return e.map((o,u)=>{let a=[...r,String(u)],p=typeof o.id=="string"?o.id:a.join("-");if(oi(o.index!==!0||!o.children,"Cannot specify children on an index route"),oi(i||!n[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),g2e(o)){let d={...o,...t(o),id:p};return n[p]=d,d}else{let d={...o,...t(o),id:p,children:void 0};return n[p]=d,o.children&&(d.children=p0(o.children,t,a,n,i)),d}})}function jh(e,t,r="/"){return k_(e,t,r,!1)}function k_(e,t,r,n){let i=typeof t=="string"?Mf(t):t,o=nu(i.pathname||"/",r);if(o==null)return null;let u=YV(e);v2e(u);let a=null;for(let p=0;a==null&&p<u.length;++p){let d=QV(o);a=P2e(u[p],d,n)}return a}function y2e(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function YV(e,t=[],r=[],n="",i=!1){let o=(u,a,p=i,d)=>{let m={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:a,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&p)return;oi(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let v=xf([n,m.relativePath]),w=r.concat(m);u.children&&u.children.length>0&&(oi(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),YV(u.children,t,w,v,p)),!(u.path==null&&!u.index)&&t.push({path:v,score:C2e(v,u.index),routesMeta:w})};return e.forEach((u,a)=>{if(u.path===""||!u.path?.includes("?"))o(u,a);else for(let p of JV(u.path))o(u,a,!0,p)}),t}function JV(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let u=JV(n.join("/")),a=[];return a.push(...u.map(p=>p===""?o:[o,p].join("/"))),i&&a.push(...u),a.map(p=>e.startsWith("/")&&p===""?"/":p)}function v2e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:A2e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var b2e=/^:[\w-]+$/,_2e=3,x2e=2,w2e=1,S2e=10,E2e=-2,vB=e=>e==="*";function C2e(e,t){let r=e.split("/"),n=r.length;return r.some(vB)&&(n+=E2e),t&&(n+=x2e),r.filter(i=>!vB(i)).reduce((i,o)=>i+(b2e.test(o)?_2e:o===""?w2e:S2e),n)}function A2e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function P2e(e,t,r=!1){let{routesMeta:n}=e,i={},o="/",u=[];for(let a=0;a<n.length;++a){let p=n[a],d=a===n.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=m0({path:p.relativePath,caseSensitive:p.caseSensitive,end:d},m),w=p.route;if(!v&&d&&r&&!n[n.length-1].route.index&&(v=m0({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!v)return null;Object.assign(i,v.params),u.push({params:i,pathname:xf([o,v.pathname]),pathnameBase:O2e(xf([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=xf([o,v.pathnameBase]))}return u}function m0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=T2e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((d,{paramName:m,isOptional:v},w)=>{if(m==="*"){let P=a[w]||"";u=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const x=a[w];return v&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:u,pattern:e}}function T2e(e,t=!1,r=!0){Eo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,a,p)=>(n.push({paramName:a,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function QV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Eo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function nu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function I2e({basename:e,pathname:t}){return t==="/"?e:xf([e,t])}function M2e(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Mf(e):e;return{pathname:r?r.startsWith("/")?r:R2e(r,t):t,search:k2e(n),hash:L2e(i)}}function R2e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function pC(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function g2(e){let t=eG(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function y2(e,t,r,n=!1){let i;typeof e=="string"?i=Mf(e):(i={...e},oi(!i.pathname||!i.pathname.includes("?"),pC("?","pathname","search",i)),oi(!i.pathname||!i.pathname.includes("#"),pC("#","pathname","hash",i)),oi(!i.search||!i.search.includes("#"),pC("#","search","hash",i)));let o=e===""||i.pathname==="",u=o?"/":i.pathname,a;if(u==null)a=r;else{let v=t.length-1;if(!n&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;i.pathname=w.join("/")}a=v>=0?t[v]:"/"}let p=M2e(i,a),d=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(d||m)&&(p.pathname+="/"),p}var xf=e=>e.join("/").replace(/\/\/+/g,"/"),O2e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),k2e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,L2e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,C1=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function g0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var tG=["POST","PUT","PATCH","DELETE"],D2e=new Set(tG),N2e=["GET",...tG],F2e=new Set(N2e),B2e=new Set([301,302,303,307,308]),j2e=new Set([307,308]),mC={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},z2e={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},$2e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UM=e=>$2e.test(e),U2e=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),rG="remix-router-transitions",nG=Symbol("ResetLoaderData");function q2e(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";oi(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],i=e.mapRouteProperties||U2e,o={},u=p0(e.routes,i,void 0,o),a,p=e.basename||"/";p.startsWith("/")||(p=`/${p}`);let d=e.dataStrategy||Z2e,m={...e.future},v=null,w=new Set,x=null,P=null,T=null,O=e.hydrationData!=null,L=jh(u,e.history.location,p),N=!1,F=null,D;if(L==null&&!e.patchRoutesOnNavigation){let gt=Zu(404,{pathname:e.history.location.pathname}),{matches:xt,route:Wt}=Qb(u);D=!0,L=xt,F={[Wt.id]:gt}}else if(L&&!e.hydrationData&&Mr(L,u,e.history.location.pathname).active&&(L=null),L)if(L.some(gt=>gt.route.lazy))D=!1;else if(!L.some(gt=>gt.route.loader))D=!0;else{let gt=e.hydrationData?e.hydrationData.loaderData:null,xt=e.hydrationData?e.hydrationData.errors:null;if(xt){let Wt=L.findIndex(ne=>xt[ne.route.id]!==void 0);D=L.slice(0,Wt+1).every(ne=>!IT(ne.route,gt,xt))}else D=L.every(Wt=>!IT(Wt.route,gt,xt))}else{D=!1,L=[];let gt=Mr(null,u,e.history.location.pathname);gt.active&&gt.matches&&(N=!0,L=gt.matches)}let q,z={historyAction:e.history.action,location:e.history.location,matches:L,initialized:D,navigation:mC,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},Z="POP",Q=!1,Y,se=!1,W=new Map,G=null,ae=!1,le=!1,ue=new Set,ye=new Map,Se=0,ge=-1,xe=new Map,Fe=new Set,He=new Map,pe=new Map,_e=new Set,Ce=new Map,ke,$e=null;function ht(){if(v=e.history.listen(({action:gt,location:xt,delta:Wt})=>{if(ke){ke(),ke=void 0;return}Eo(Ce.size===0||Wt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=Ot({currentLocation:z.location,nextLocation:xt,historyAction:gt});if(ne&&Wt!=null){let me=new Promise(qe=>{ke=qe});e.history.go(Wt*-1),nt(ne,{state:"blocked",location:xt,proceed(){nt(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:xt}),me.then(()=>e.history.go(Wt))},reset(){let qe=new Map(z.blockers);qe.set(ne,qm),rt({blockers:qe})}});return}return ut(gt,xt)}),r){uwe(t,W);let gt=()=>cwe(t,W);t.addEventListener("pagehide",gt),G=()=>t.removeEventListener("pagehide",gt)}return z.initialized||ut("POP",z.location,{initialHydration:!0}),q}function At(){v&&v(),G&&G(),w.clear(),Y&&Y.abort(),z.fetchers.forEach((gt,xt)=>Ye(xt)),z.blockers.forEach((gt,xt)=>wt(xt))}function mt(gt){return w.add(gt),()=>w.delete(gt)}function rt(gt,xt={}){gt.matches&&(gt.matches=gt.matches.map(me=>{let qe=o[me.route.id],je=me.route;return je.element!==qe.element||je.errorElement!==qe.errorElement||je.hydrateFallbackElement!==qe.hydrateFallbackElement?{...me,route:qe}:me})),z={...z,...gt};let Wt=[],ne=[];z.fetchers.forEach((me,qe)=>{me.state==="idle"&&(_e.has(qe)?Wt.push(qe):ne.push(qe))}),_e.forEach(me=>{!z.fetchers.has(me)&&!ye.has(me)&&Wt.push(me)}),[...w].forEach(me=>me(z,{deletedFetchers:Wt,viewTransitionOpts:xt.viewTransitionOpts,flushSync:xt.flushSync===!0})),Wt.forEach(me=>Ye(me)),ne.forEach(me=>z.fetchers.delete(me))}function Lt(gt,xt,{flushSync:Wt}={}){let ne=z.actionData!=null&&z.navigation.formMethod!=null&&Jl(z.navigation.formMethod)&&z.navigation.state==="loading"&&gt.state?._isRedirect!==!0,me;xt.actionData?Object.keys(xt.actionData).length>0?me=xt.actionData:me=null:ne?me=z.actionData:me=null;let qe=xt.loaderData?TB(z.loaderData,xt.loaderData,xt.matches||[],xt.errors):z.loaderData,je=z.blockers;je.size>0&&(je=new Map(je),je.forEach((zr,Vt)=>je.set(Vt,qm)));let jt=ae?!1:Sr(gt,xt.matches||z.matches),Jt=Q===!0||z.navigation.formMethod!=null&&Jl(z.navigation.formMethod)&&gt.state?._isRedirect!==!0;a&&(u=a,a=void 0),ae||Z==="POP"||(Z==="PUSH"?e.history.push(gt,gt.state):Z==="REPLACE"&&e.history.replace(gt,gt.state));let Tr;if(Z==="POP"){let zr=W.get(z.location.pathname);zr&&zr.has(gt.pathname)?Tr={currentLocation:z.location,nextLocation:gt}:W.has(gt.pathname)&&(Tr={currentLocation:gt,nextLocation:z.location})}else if(se){let zr=W.get(z.location.pathname);zr?zr.add(gt.pathname):(zr=new Set([gt.pathname]),W.set(z.location.pathname,zr)),Tr={currentLocation:z.location,nextLocation:gt}}rt({...xt,actionData:me,loaderData:qe,historyAction:Z,location:gt,initialized:!0,navigation:mC,revalidation:"idle",restoreScrollPosition:jt,preventScrollReset:Jt,blockers:je},{viewTransitionOpts:Tr,flushSync:Wt===!0}),Z="POP",Q=!1,se=!1,ae=!1,le=!1,$e?.resolve(),$e=null}async function Tt(gt,xt){if(typeof gt=="number"){e.history.go(gt);return}let Wt=TT(z.location,z.matches,p,gt,xt?.fromRouteId,xt?.relative),{path:ne,submission:me,error:qe}=bB(!1,Wt,xt),je=z.location,jt=d0(z.location,ne,xt&&xt.state);jt={...jt,...e.history.encodeLocation(jt)};let Jt=xt&&xt.replace!=null?xt.replace:void 0,Tr="PUSH";Jt===!0?Tr="REPLACE":Jt===!1||me!=null&&Jl(me.formMethod)&&me.formAction===z.location.pathname+z.location.search&&(Tr="REPLACE");let zr=xt&&"preventScrollReset"in xt?xt.preventScrollReset===!0:void 0,Vt=(xt&&xt.flushSync)===!0,Ir=Ot({currentLocation:je,nextLocation:jt,historyAction:Tr});if(Ir){nt(Ir,{state:"blocked",location:jt,proceed(){nt(Ir,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),Tt(gt,xt)},reset(){let Dr=new Map(z.blockers);Dr.set(Ir,qm),rt({blockers:Dr})}});return}await ut(Tr,jt,{submission:me,pendingError:qe,preventScrollReset:zr,replace:xt&&xt.replace,enableViewTransition:xt&&xt.viewTransition,flushSync:Vt})}function Pt(){$e||($e=fwe()),Ut(),rt({revalidation:"loading"});let gt=$e.promise;return z.navigation.state==="submitting"?gt:z.navigation.state==="idle"?(ut(z.historyAction,z.location,{startUninterruptedRevalidation:!0}),gt):(ut(Z||z.historyAction,z.navigation.location,{overrideNavigation:z.navigation,enableViewTransition:se===!0}),gt)}async function ut(gt,xt,Wt){Y&&Y.abort(),Y=null,Z=gt,ae=(Wt&&Wt.startUninterruptedRevalidation)===!0,bt(z.location,z.matches),Q=(Wt&&Wt.preventScrollReset)===!0,se=(Wt&&Wt.enableViewTransition)===!0;let ne=a||u,me=Wt&&Wt.overrideNavigation,qe=Wt?.initialHydration&&z.matches&&z.matches.length>0&&!N?z.matches:jh(ne,xt,p),je=(Wt&&Wt.flushSync)===!0;if(qe&&z.initialized&&!le&&rwe(z.location,xt)&&!(Wt&&Wt.submission&&Jl(Wt.submission.formMethod))){Lt(xt,{matches:qe},{flushSync:je});return}let jt=Mr(qe,ne,xt.pathname);if(jt.active&&jt.matches&&(qe=jt.matches),!qe){let{error:vn,notFoundMatches:Rn,route:$r}=Gt(xt.pathname);Lt(xt,{matches:Rn,loaderData:{},errors:{[$r.id]:vn}},{flushSync:je});return}Y=new AbortController;let Jt=Vm(e.history,xt,Y.signal,Wt&&Wt.submission),Tr=e.unstable_getContext?await e.unstable_getContext():new yB,zr;if(Wt&&Wt.pendingError)zr=[zh(qe).route.id,{type:"error",error:Wt.pendingError}];else if(Wt&&Wt.submission&&Jl(Wt.submission.formMethod)){let vn=await Le(Jt,xt,Wt.submission,qe,Tr,jt.active,Wt&&Wt.initialHydration===!0,{replace:Wt.replace,flushSync:je});if(vn.shortCircuited)return;if(vn.pendingActionResult){let[Rn,$r]=vn.pendingActionResult;if(Mu($r)&&g0($r.error)&&$r.error.status===404){Y=null,Lt(xt,{matches:vn.matches,loaderData:{},errors:{[Rn]:$r.error}});return}}qe=vn.matches||qe,zr=vn.pendingActionResult,me=gC(xt,Wt.submission),je=!1,jt.active=!1,Jt=Vm(e.history,Jt.url,Jt.signal)}let{shortCircuited:Vt,matches:Ir,loaderData:Dr,errors:Sn}=await sr(Jt,xt,qe,Tr,jt.active,me,Wt&&Wt.submission,Wt&&Wt.fetcherSubmission,Wt&&Wt.replace,Wt&&Wt.initialHydration===!0,je,zr);Vt||(Y=null,Lt(xt,{matches:Ir||qe,...IB(zr),loaderData:Dr,errors:Sn}))}async function Le(gt,xt,Wt,ne,me,qe,je,jt={}){Ut();let Jt=swe(xt,Wt);if(rt({navigation:Jt},{flushSync:jt.flushSync===!0}),qe){let Vt=await Nr(ne,xt.pathname,gt.signal);if(Vt.type==="aborted")return{shortCircuited:!0};if(Vt.type==="error"){if(Vt.partialMatches.length===0){let{matches:Dr,route:Sn}=Qb(u);return{matches:Dr,pendingActionResult:[Sn.id,{type:"error",error:Vt.error}]}}let Ir=zh(Vt.partialMatches).route.id;return{matches:Vt.partialMatches,pendingActionResult:[Ir,{type:"error",error:Vt.error}]}}else if(Vt.matches)ne=Vt.matches;else{let{notFoundMatches:Ir,error:Dr,route:Sn}=Gt(xt.pathname);return{matches:Ir,pendingActionResult:[Sn.id,{type:"error",error:Dr}]}}}let Tr,zr=L_(ne,xt);if(!zr.route.action&&!zr.route.lazy)Tr={type:"error",error:Zu(405,{method:gt.method,pathname:xt.pathname,routeId:zr.route.id})};else{let Vt=ag(i,o,gt,ne,zr,je?[]:n,me),Ir=await Mt(gt,Vt,me,null);if(Tr=Ir[zr.route.id],!Tr){for(let Dr of ne)if(Ir[Dr.route.id]){Tr=Ir[Dr.route.id];break}}if(gt.signal.aborted)return{shortCircuited:!0}}if(tp(Tr)){let Vt;return jt&&jt.replace!=null?Vt=jt.replace:Vt=CB(Tr.response.headers.get("Location"),new URL(gt.url),p)===z.location.pathname+z.location.search,await lt(gt,Tr,!0,{submission:Wt,replace:Vt}),{shortCircuited:!0}}if(Mu(Tr)){let Vt=zh(ne,zr.route.id);return(jt&&jt.replace)!==!0&&(Z="PUSH"),{matches:ne,pendingActionResult:[Vt.route.id,Tr,zr.route.id]}}return{matches:ne,pendingActionResult:[zr.route.id,Tr]}}async function sr(gt,xt,Wt,ne,me,qe,je,jt,Jt,Tr,zr,Vt){let Ir=qe||gC(xt,je),Dr=je||jt||RB(Ir),Sn=!ae&&!Tr;if(me){if(Sn){let qi=lr(Vt);rt({navigation:Ir,...qi!==void 0?{actionData:qi}:{}},{flushSync:zr})}let Jn=await Nr(Wt,xt.pathname,gt.signal);if(Jn.type==="aborted")return{shortCircuited:!0};if(Jn.type==="error"){if(Jn.partialMatches.length===0){let{matches:ya,route:Di}=Qb(u);return{matches:ya,loaderData:{},errors:{[Di.id]:Jn.error}}}let qi=zh(Jn.partialMatches).route.id;return{matches:Jn.partialMatches,loaderData:{},errors:{[qi]:Jn.error}}}else if(Jn.matches)Wt=Jn.matches;else{let{error:qi,notFoundMatches:ya,route:Di}=Gt(xt.pathname);return{matches:ya,loaderData:{},errors:{[Di.id]:qi}}}}let vn=a||u,{dsMatches:Rn,revalidatingFetchers:$r}=_B(gt,ne,i,o,e.history,z,Wt,Dr,xt,Tr?[]:n,Tr===!0,le,ue,_e,He,Fe,vn,p,e.patchRoutesOnNavigation!=null,Vt);if(ge=++Se,!e.dataStrategy&&!Rn.some(Jn=>Jn.shouldLoad)&&!Rn.some(Jn=>Jn.route.unstable_middleware)&&$r.length===0){let Jn=Ue();return Lt(xt,{matches:Wt,loaderData:{},errors:Vt&&Mu(Vt[1])?{[Vt[0]]:Vt[1].error}:null,...IB(Vt),...Jn?{fetchers:new Map(z.fetchers)}:{}},{flushSync:zr}),{shortCircuited:!0}}if(Sn){let Jn={};if(!me){Jn.navigation=Ir;let qi=lr(Vt);qi!==void 0&&(Jn.actionData=qi)}$r.length>0&&(Jn.fetchers=dr($r)),rt(Jn,{flushSync:zr})}$r.forEach(Jn=>{he(Jn.key),Jn.controller&&ye.set(Jn.key,Jn.controller)});let Ii=()=>$r.forEach(Jn=>he(Jn.key));Y&&Y.signal.addEventListener("abort",Ii);let{loaderResults:Li,fetcherResults:Ji}=await Kt(Rn,$r,gt,ne);if(gt.signal.aborted)return{shortCircuited:!0};Y&&Y.signal.removeEventListener("abort",Ii),$r.forEach(Jn=>ye.delete(Jn.key));let vi=e_(Li);if(vi)return await lt(gt,vi.result,!0,{replace:Jt}),{shortCircuited:!0};if(vi=e_(Ji),vi)return Fe.add(vi.key),await lt(gt,vi.result,!0,{replace:Jt}),{shortCircuited:!0};let{loaderData:Mi,errors:ni}=PB(z,Wt,Li,Vt,$r,Ji);Tr&&z.errors&&(ni={...z.errors,...ni});let Qi=Ue(),ea=Ke(ge),hn=Qi||ea||$r.length>0;return{matches:Wt,loaderData:Mi,errors:ni,...hn?{fetchers:new Map(z.fetchers)}:{}}}function lr(gt){if(gt&&!Mu(gt[1]))return{[gt[0]]:gt[1].data};if(z.actionData)return Object.keys(z.actionData).length===0?null:z.actionData}function dr(gt){return gt.forEach(xt=>{let Wt=z.fetchers.get(xt.key),ne=Hy(void 0,Wt?Wt.data:void 0);z.fetchers.set(xt.key,ne)}),new Map(z.fetchers)}async function Yt(gt,xt,Wt,ne){he(gt);let me=(ne&&ne.flushSync)===!0,qe=a||u,je=TT(z.location,z.matches,p,Wt,xt,ne?.relative),jt=jh(qe,je,p),Jt=Mr(jt,qe,je);if(Jt.active&&Jt.matches&&(jt=Jt.matches),!jt){gr(gt,xt,Zu(404,{pathname:je}),{flushSync:me});return}let{path:Tr,submission:zr,error:Vt}=bB(!0,je,ne);if(Vt){gr(gt,xt,Vt,{flushSync:me});return}let Ir=e.unstable_getContext?await e.unstable_getContext():new yB,Dr=(ne&&ne.preventScrollReset)===!0;if(zr&&Jl(zr.formMethod)){await Ve(gt,xt,Tr,jt,Ir,Jt.active,me,Dr,zr);return}He.set(gt,{routeId:xt,path:Tr}),await tt(gt,xt,Tr,jt,Ir,Jt.active,me,Dr,zr)}async function Ve(gt,xt,Wt,ne,me,qe,je,jt,Jt){Ut(),He.delete(gt);let Tr=z.fetchers.get(gt);ar(gt,lwe(Jt,Tr),{flushSync:je});let zr=new AbortController,Vt=Vm(e.history,Wt,zr.signal,Jt);if(qe){let hi=await Nr(ne,new URL(Vt.url).pathname,Vt.signal,gt);if(hi.type==="aborted")return;if(hi.type==="error"){gr(gt,xt,hi.error,{flushSync:je});return}else if(hi.matches)ne=hi.matches;else{gr(gt,xt,Zu(404,{pathname:Wt}),{flushSync:je});return}}let Ir=L_(ne,Wt);if(!Ir.route.action&&!Ir.route.lazy){let hi=Zu(405,{method:Jt.formMethod,pathname:Wt,routeId:xt});gr(gt,xt,hi,{flushSync:je});return}ye.set(gt,zr);let Dr=Se,Sn=ag(i,o,Vt,ne,Ir,n,me),Rn=(await Mt(Vt,Sn,me,gt))[Ir.route.id];if(Vt.signal.aborted){ye.get(gt)===zr&&ye.delete(gt);return}if(_e.has(gt)){if(tp(Rn)||Mu(Rn)){ar(gt,Lh(void 0));return}}else{if(tp(Rn))if(ye.delete(gt),ge>Dr){ar(gt,Lh(void 0));return}else return Fe.add(gt),ar(gt,Hy(Jt)),lt(Vt,Rn,!1,{fetcherSubmission:Jt,preventScrollReset:jt});if(Mu(Rn)){gr(gt,xt,Rn.error);return}}let $r=z.navigation.location||z.location,Ii=Vm(e.history,$r,zr.signal),Li=a||u,Ji=z.navigation.state!=="idle"?jh(Li,z.navigation.location,p):z.matches;oi(Ji,"Didn't find any matches after fetcher action");let vi=++Se;xe.set(gt,vi);let Mi=Hy(Jt,Rn.data);z.fetchers.set(gt,Mi);let{dsMatches:ni,revalidatingFetchers:Qi}=_B(Ii,me,i,o,e.history,z,Ji,Jt,$r,n,!1,le,ue,_e,He,Fe,Li,p,e.patchRoutesOnNavigation!=null,[Ir.route.id,Rn]);Qi.filter(hi=>hi.key!==gt).forEach(hi=>{let Qa=hi.key,io=z.fetchers.get(Qa),uu=Hy(void 0,io?io.data:void 0);z.fetchers.set(Qa,uu),he(Qa),hi.controller&&ye.set(Qa,hi.controller)}),rt({fetchers:new Map(z.fetchers)});let ea=()=>Qi.forEach(hi=>he(hi.key));zr.signal.addEventListener("abort",ea);let{loaderResults:hn,fetcherResults:Jn}=await Kt(ni,Qi,Ii,me);if(zr.signal.aborted)return;if(zr.signal.removeEventListener("abort",ea),xe.delete(gt),ye.delete(gt),Qi.forEach(hi=>ye.delete(hi.key)),z.fetchers.has(gt)){let hi=Lh(Rn.data);z.fetchers.set(gt,hi)}let qi=e_(hn);if(qi)return lt(Ii,qi.result,!1,{preventScrollReset:jt});if(qi=e_(Jn),qi)return Fe.add(qi.key),lt(Ii,qi.result,!1,{preventScrollReset:jt});let{loaderData:ya,errors:Di}=PB(z,Ji,hn,void 0,Qi,Jn);Ke(vi),z.navigation.state==="loading"&&vi>ge?(oi(Z,"Expected pending action"),Y&&Y.abort(),Lt(z.navigation.location,{matches:Ji,loaderData:ya,errors:Di,fetchers:new Map(z.fetchers)})):(rt({errors:Di,loaderData:TB(z.loaderData,ya,Ji,Di),fetchers:new Map(z.fetchers)}),le=!1)}async function tt(gt,xt,Wt,ne,me,qe,je,jt,Jt){let Tr=z.fetchers.get(gt);ar(gt,Hy(Jt,Tr?Tr.data:void 0),{flushSync:je});let zr=new AbortController,Vt=Vm(e.history,Wt,zr.signal);if(qe){let $r=await Nr(ne,new URL(Vt.url).pathname,Vt.signal,gt);if($r.type==="aborted")return;if($r.type==="error"){gr(gt,xt,$r.error,{flushSync:je});return}else if($r.matches)ne=$r.matches;else{gr(gt,xt,Zu(404,{pathname:Wt}),{flushSync:je});return}}let Ir=L_(ne,Wt);ye.set(gt,zr);let Dr=Se,Sn=ag(i,o,Vt,ne,Ir,n,me),Rn=(await Mt(Vt,Sn,me,gt))[Ir.route.id];if(ye.get(gt)===zr&&ye.delete(gt),!Vt.signal.aborted){if(_e.has(gt)){ar(gt,Lh(void 0));return}if(tp(Rn))if(ge>Dr){ar(gt,Lh(void 0));return}else{Fe.add(gt),await lt(Vt,Rn,!1,{preventScrollReset:jt});return}if(Mu(Rn)){gr(gt,xt,Rn.error);return}ar(gt,Lh(Rn.data))}}async function lt(gt,xt,Wt,{submission:ne,fetcherSubmission:me,preventScrollReset:qe,replace:je}={}){xt.response.headers.has("X-Remix-Revalidate")&&(le=!0);let jt=xt.response.headers.get("Location");oi(jt,"Expected a Location header on the redirect Response"),jt=CB(jt,new URL(gt.url),p);let Jt=d0(z.location,jt,{_isRedirect:!0});if(r){let Sn=!1;if(xt.response.headers.has("X-Remix-Reload-Document"))Sn=!0;else if(UM(jt)){const vn=XV(jt,!0);Sn=vn.origin!==t.location.origin||nu(vn.pathname,p)==null}if(Sn){je?t.location.replace(jt):t.location.assign(jt);return}}Y=null;let Tr=je===!0||xt.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:zr,formAction:Vt,formEncType:Ir}=z.navigation;!ne&&!me&&zr&&Vt&&Ir&&(ne=RB(z.navigation));let Dr=ne||me;if(j2e.has(xt.response.status)&&Dr&&Jl(Dr.formMethod))await ut(Tr,Jt,{submission:{...Dr,formAction:jt},preventScrollReset:qe||Q,enableViewTransition:Wt?se:void 0});else{let Sn=gC(Jt,ne);await ut(Tr,Jt,{overrideNavigation:Sn,fetcherSubmission:me,preventScrollReset:qe||Q,enableViewTransition:Wt?se:void 0})}}async function Mt(gt,xt,Wt,ne){let me,qe={};try{me=await X2e(d,gt,xt,ne,Wt,!1)}catch(je){return xt.filter(jt=>jt.shouldLoad).forEach(jt=>{qe[jt.route.id]={type:"error",error:je}}),qe}if(gt.signal.aborted)return qe;for(let[je,jt]of Object.entries(me))if(awe(jt)){let Jt=jt.result;qe[je]={type:"redirect",response:ewe(Jt,gt,je,xt,p)}}else qe[je]=await Q2e(jt);return qe}async function Kt(gt,xt,Wt,ne){let me=Mt(Wt,gt,ne,null),qe=Promise.all(xt.map(async Jt=>{if(Jt.matches&&Jt.match&&Jt.request&&Jt.controller){let zr=(await Mt(Jt.request,Jt.matches,ne,Jt.key))[Jt.match.route.id];return{[Jt.key]:zr}}else return Promise.resolve({[Jt.key]:{type:"error",error:Zu(404,{pathname:Jt.path})}})})),je=await me,jt=(await qe).reduce((Jt,Tr)=>Object.assign(Jt,Tr),{});return{loaderResults:je,fetcherResults:jt}}function Ut(){le=!0,He.forEach((gt,xt)=>{ye.has(xt)&&ue.add(xt),he(xt)})}function ar(gt,xt,Wt={}){z.fetchers.set(gt,xt),rt({fetchers:new Map(z.fetchers)},{flushSync:(Wt&&Wt.flushSync)===!0})}function gr(gt,xt,Wt,ne={}){let me=zh(z.matches,xt);Ye(gt),rt({errors:{[me.route.id]:Wt},fetchers:new Map(z.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function yr(gt){return pe.set(gt,(pe.get(gt)||0)+1),_e.has(gt)&&_e.delete(gt),z.fetchers.get(gt)||z2e}function Ye(gt){let xt=z.fetchers.get(gt);ye.has(gt)&&!(xt&&xt.state==="loading"&&xe.has(gt))&&he(gt),He.delete(gt),xe.delete(gt),Fe.delete(gt),_e.delete(gt),ue.delete(gt),z.fetchers.delete(gt)}function de(gt){let xt=(pe.get(gt)||0)-1;xt<=0?(pe.delete(gt),_e.add(gt)):pe.set(gt,xt),rt({fetchers:new Map(z.fetchers)})}function he(gt){let xt=ye.get(gt);xt&&(xt.abort(),ye.delete(gt))}function Me(gt){for(let xt of gt){let Wt=yr(xt),ne=Lh(Wt.data);z.fetchers.set(xt,ne)}}function Ue(){let gt=[],xt=!1;for(let Wt of Fe){let ne=z.fetchers.get(Wt);oi(ne,`Expected fetcher: ${Wt}`),ne.state==="loading"&&(Fe.delete(Wt),gt.push(Wt),xt=!0)}return Me(gt),xt}function Ke(gt){let xt=[];for(let[Wt,ne]of xe)if(ne<gt){let me=z.fetchers.get(Wt);oi(me,`Expected fetcher: ${Wt}`),me.state==="loading"&&(he(Wt),xe.delete(Wt),xt.push(Wt))}return Me(xt),xt.length>0}function Qe(gt,xt){let Wt=z.blockers.get(gt)||qm;return Ce.get(gt)!==xt&&Ce.set(gt,xt),Wt}function wt(gt){z.blockers.delete(gt),Ce.delete(gt)}function nt(gt,xt){let Wt=z.blockers.get(gt)||qm;oi(Wt.state==="unblocked"&&xt.state==="blocked"||Wt.state==="blocked"&&xt.state==="blocked"||Wt.state==="blocked"&&xt.state==="proceeding"||Wt.state==="blocked"&&xt.state==="unblocked"||Wt.state==="proceeding"&&xt.state==="unblocked",`Invalid blocker state transition: ${Wt.state} -> ${xt.state}`);let ne=new Map(z.blockers);ne.set(gt,xt),rt({blockers:ne})}function Ot({currentLocation:gt,nextLocation:xt,historyAction:Wt}){if(Ce.size===0)return;Ce.size>1&&Eo(!1,"A router only supports one blocker at a time");let ne=Array.from(Ce.entries()),[me,qe]=ne[ne.length-1],je=z.blockers.get(me);if(!(je&&je.state==="proceeding")&&qe({currentLocation:gt,nextLocation:xt,historyAction:Wt}))return me}function Gt(gt){let xt=Zu(404,{pathname:gt}),Wt=a||u,{matches:ne,route:me}=Qb(Wt);return{notFoundMatches:ne,route:me,error:xt}}function ir(gt,xt,Wt){if(x=gt,T=xt,P=Wt||null,!O&&z.navigation===mC){O=!0;let ne=Sr(z.location,z.matches);ne!=null&&rt({restoreScrollPosition:ne})}return()=>{x=null,T=null,P=null}}function Pr(gt,xt){return P&&P(gt,xt.map(ne=>y2e(ne,z.loaderData)))||gt.key}function bt(gt,xt){if(x&&T){let Wt=Pr(gt,xt);x[Wt]=T()}}function Sr(gt,xt){if(x){let Wt=Pr(gt,xt),ne=x[Wt];if(typeof ne=="number")return ne}return null}function Mr(gt,xt,Wt){if(e.patchRoutesOnNavigation)if(gt){if(Object.keys(gt[0].params).length>0)return{active:!0,matches:k_(xt,Wt,p,!0)}}else return{active:!0,matches:k_(xt,Wt,p,!0)||[]};return{active:!1,matches:null}}async function Nr(gt,xt,Wt,ne){if(!e.patchRoutesOnNavigation)return{type:"success",matches:gt};let me=gt;for(;;){let qe=a==null,je=a||u,jt=o;try{await e.patchRoutesOnNavigation({signal:Wt,path:xt,matches:me,fetcherKey:ne,patch:(zr,Vt)=>{Wt.aborted||xB(zr,Vt,je,jt,i,!1)}})}catch(zr){return{type:"error",error:zr,partialMatches:me}}finally{qe&&!Wt.aborted&&(u=[...u])}if(Wt.aborted)return{type:"aborted"};let Jt=jh(je,xt,p);if(Jt)return{type:"success",matches:Jt};let Tr=k_(je,xt,p,!0);if(!Tr||me.length===Tr.length&&me.every((zr,Vt)=>zr.route.id===Tr[Vt].route.id))return{type:"success",matches:null};me=Tr}}function en(gt){o={},a=p0(gt,i,void 0,o)}function Vr(gt,xt,Wt=!1){let ne=a==null;xB(gt,xt,a||u,o,i,Wt),ne&&(u=[...u],rt({}))}return q={get basename(){return p},get future(){return m},get state(){return z},get routes(){return u},get window(){return t},initialize:ht,subscribe:mt,enableScrollRestoration:ir,navigate:Tt,fetch:Yt,revalidate:Pt,createHref:gt=>e.history.createHref(gt),encodeLocation:gt=>e.history.encodeLocation(gt),getFetcher:yr,deleteFetcher:de,dispose:At,getBlocker:Qe,deleteBlocker:wt,patchRoutes:Vr,_internalFetchControllers:ye,_internalSetRoutes:en,_internalSetStateDoNotUseOrYouWillBreakYourApp(gt){rt(gt)}},q}function V2e(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function TT(e,t,r,n,i,o){let u,a;if(i){u=[];for(let d of t)if(u.push(d),d.route.id===i){a=d;break}}else u=t,a=t[t.length-1];let p=y2(n||".",g2(u),nu(e.pathname,r)||e.pathname,o==="path");if(n==null&&(p.search=e.search,p.hash=e.hash),(n==null||n===""||n===".")&&a){let d=qM(p.search);if(a.route.index&&!d)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&d){let m=new URLSearchParams(p.search),v=m.getAll("index");m.delete("index"),v.filter(x=>x).forEach(x=>m.append("index",x));let w=m.toString();p.search=w?`?${w}`:""}}return r!=="/"&&(p.pathname=I2e({basename:r,pathname:p.pathname})),td(p)}function bB(e,t,r){if(!r||!V2e(r))return{path:t};if(r.formMethod&&!owe(r.formMethod))return{path:t,error:Zu(405,{method:r.formMethod})};let n=()=>({path:t,error:Zu(400,{type:"invalid-body"})}),o=(r.formMethod||"get").toUpperCase(),u=uG(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Jl(o))return n();let v=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((w,[x,P])=>`${w}${x}=${P}
`,""):String(r.body);return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:v}}}else if(r.formEncType==="application/json"){if(!Jl(o))return n();try{let v=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:v,text:void 0}}}catch{return n()}}}oi(typeof FormData=="function","FormData is not available in this environment");let a,p;if(r.formData)a=RT(r.formData),p=r.formData;else if(r.body instanceof FormData)a=RT(r.body),p=r.body;else if(r.body instanceof URLSearchParams)a=r.body,p=AB(a);else if(r.body==null)a=new URLSearchParams,p=new FormData;else try{a=new URLSearchParams(r.body),p=AB(a)}catch{return n()}let d={formMethod:o,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Jl(d.formMethod))return{path:t,submission:d};let m=Mf(t);return e&&m.search&&qM(m.search)&&a.append("index",""),m.search=`?${a}`,{path:td(m),submission:d}}function _B(e,t,r,n,i,o,u,a,p,d,m,v,w,x,P,T,O,L,N,F){let D=F?Mu(F[1])?F[1].error:F[1].data:void 0,q=i.createURL(o.location),z=i.createURL(p),Z;if(m&&o.errors){let ae=Object.keys(o.errors)[0];Z=u.findIndex(le=>le.route.id===ae)}else if(F&&Mu(F[1])){let ae=F[0];Z=u.findIndex(le=>le.route.id===ae)-1}let Q=F?F[1].statusCode:void 0,Y=Q&&Q>=400,se={currentUrl:q,currentParams:o.matches[0]?.params||{},nextUrl:z,nextParams:u[0].params,...a,actionResult:D,actionStatus:Q},W=u.map((ae,le)=>{let{route:ue}=ae,ye=null;if(Z!=null&&le>Z?ye=!1:ue.lazy?ye=!0:ue.loader==null?ye=!1:m?ye=IT(ue,o.loaderData,o.errors):G2e(o.loaderData,o.matches[le],ae)&&(ye=!0),ye!==null)return MT(r,n,e,ae,d,t,ye);let Se=Y?!1:v||q.pathname+q.search===z.pathname+z.search||q.search!==z.search||H2e(o.matches[le],ae),ge={...se,defaultShouldRevalidate:Se},xe=A1(ae,ge);return MT(r,n,e,ae,d,t,xe,ge)}),G=[];return P.forEach((ae,le)=>{if(m||!u.some(pe=>pe.route.id===ae.routeId)||x.has(le))return;let ue=o.fetchers.get(le),ye=ue&&ue.state!=="idle"&&ue.data===void 0,Se=jh(O,ae.path,L);if(!Se){if(N&&ye)return;G.push({key:le,routeId:ae.routeId,path:ae.path,matches:null,match:null,request:null,controller:null});return}if(T.has(le))return;let ge=L_(Se,ae.path),xe=new AbortController,Fe=Vm(i,ae.path,xe.signal),He=null;if(w.has(le))w.delete(le),He=ag(r,n,Fe,Se,ge,d,t);else if(ye)v&&(He=ag(r,n,Fe,Se,ge,d,t));else{let pe={...se,defaultShouldRevalidate:Y?!1:v};A1(ge,pe)&&(He=ag(r,n,Fe,Se,ge,d,t,pe))}He&&G.push({key:le,routeId:ae.routeId,path:ae.path,matches:He,match:ge,request:Fe,controller:xe})}),{dsMatches:W,revalidatingFetchers:G}}function IT(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&e.id in t,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function G2e(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function H2e(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function A1(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function xB(e,t,r,n,i,o){let u;if(e){let d=n[e];oi(d,`No route found to patch children into: routeId = ${e}`),d.children||(d.children=[]),u=d.children}else u=r;let a=[],p=[];if(t.forEach(d=>{let m=u.find(v=>iG(d,v));m?p.push({existingRoute:m,newRoute:d}):a.push(d)}),a.length>0){let d=p0(a,i,[e||"_","patch",String(u?.length||"0")],n);u.push(...d)}if(o&&p.length>0)for(let d=0;d<p.length;d++){let{existingRoute:m,newRoute:v}=p[d],w=m,[x]=p0([v],i,[],{},!0);Object.assign(w,{element:x.element?x.element:w.element,errorElement:x.errorElement?x.errorElement:w.errorElement,hydrateFallbackElement:x.hydrateFallbackElement?x.hydrateFallbackElement:w.hydrateFallbackElement})}}function iG(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>t.children?.some(i=>iG(r,i))):!1}var wB=new WeakMap,aG=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let i=r[t.id];if(oi(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[e];if(!o)return;let u=wB.get(i);u||(u={},wB.set(i,u));let a=u[e];if(a)return a;let p=(async()=>{let d=d2e(e),v=i[e]!==void 0&&e!=="hasErrorBoundary";if(d)Eo(!d,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),u[e]=Promise.resolve();else if(v)Eo(!1,`Route "${i.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let w=await o();w!=null&&(Object.assign(i,{[e]:w}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[e]=void 0,Object.values(i.lazy).every(w=>w===void 0)&&(i.lazy=void 0))})();return u[e]=p,p},SB=new WeakMap;function W2e(e,t,r,n,i){let o=r[e.id];if(oi(o,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let m=SB.get(o);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let v=(async()=>{oi(typeof e.lazy=="function","No lazy route function found");let w=await e.lazy(),x={};for(let P in w){let T=w[P];if(T===void 0)continue;let O=m2e(P),N=o[P]!==void 0&&P!=="hasErrorBoundary";O?Eo(!O,"Route property "+P+" is not a supported property to be returned from a lazy route function. This property will be ignored."):N?Eo(!N,`Route "${o.id}" has a static property "${P}" defined but its lazy function is also returning a value for this property. The lazy route property "${P}" will be ignored.`):x[P]=T}Object.assign(o,x),Object.assign(o,{...n(o),lazy:void 0})})();return SB.set(o,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(e.lazy),a=[],p;for(let m of u){if(i&&i.includes(m))continue;let v=aG({key:m,route:e,manifest:r,mapRouteProperties:n});v&&(a.push(v),m===t&&(p=v))}let d=a.length>0?Promise.all(a).then(()=>{}):void 0;return d?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:p}}async function EB(e){let t=e.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(t.map(i=>i.resolve()))).forEach((i,o)=>{r[t[o].route.id]=i}),r}async function Z2e(e){return e.matches.some(t=>t.route.unstable_middleware)?oG(e,()=>EB(e)):EB(e)}function oG(e,t){return K2e(e,t,n=>n,nwe,r);function r(n,i,o){if(o)return Promise.resolve(Object.assign(o.value,{[i]:{type:"error",result:n}}));{let{matches:u}=e,a=Math.min(u.findIndex(d=>d.route.id===i)||0,u.findIndex(d=>d.unstable_shouldCallHandler())||0),p=zh(u,u[a].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:n}})}}}async function K2e(e,t,r,n,i){let{matches:o,request:u,params:a,context:p}=e,d=o.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(w=>[v.route.id,w]):[]);return await sG({request:u,params:a,context:p},d,t,r,n,i)}async function sG(e,t,r,n,i,o,u=0){let{request:a}=e;if(a.signal.aborted)throw a.signal.reason??new Error(`Request aborted: ${a.method} ${a.url}`);let p=t[u];if(!p)return await r();let[d,m]=p,v,w=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await sG(e,t,r,n,i,o,u+1)},v.value}catch(x){return v={value:await o(x,d,v)},v.value}};try{let x=await m(e,w),P=x!=null?n(x):void 0;return i(P)?P:v?P??v.value:(v={value:await w()},v.value)}catch(x){return await o(x,d,v)}}function lG(e,t,r,n,i){let o=aG({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:e}),u=W2e(n.route,Jl(r.method)?"action":"loader",t,e,i);return{middleware:o,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function MT(e,t,r,n,i,o,u,a=null){let p=!1,d=lG(e,t,r,n,i);return{...n,_lazyPromises:d,shouldLoad:u,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(m){return p=!0,a?typeof m=="boolean"?A1(n,{...a,defaultShouldRevalidate:m}):A1(n,a):u},resolve(m){return p||u||m&&!Jl(r.method)&&(n.route.lazy||n.route.loader)?Y2e({request:r,match:n,lazyHandlerPromise:d?.handler,lazyRoutePromise:d?.route,handlerOverride:m,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function ag(e,t,r,n,i,o,u,a=null){return n.map(p=>p.route.id!==i.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:lG(e,t,r,p,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:MT(e,t,r,p,o,u,!0,a))}async function X2e(e,t,r,n,i,o){r.some(d=>d._lazyPromises?.middleware)&&await Promise.all(r.map(d=>d._lazyPromises?.middleware));let u={request:t,params:r[0].params,context:i,matches:r},p=await e({...u,fetcherKey:n,unstable_runClientMiddleware:d=>{let m=u;return oG(m,()=>d({...m,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(d=>[d._lazyPromises?.handler,d._lazyPromises?.route]))}catch{}return p}async function Y2e({request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:o}){let u,a,p=Jl(e.method),d=p?"action":"loader",m=v=>{let w,x=new Promise((O,L)=>w=L);a=()=>w(),e.signal.addEventListener("abort",a);let P=O=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${d}" [routeId: ${t.route.id}]`)):v({request:e,params:t.params,context:o},...O!==void 0?[O]:[]),T=(async()=>{try{return{type:"data",result:await(i?i(L=>P(L)):P())}}catch(O){return{type:"error",result:O}}})();return Promise.race([T,x])};try{let v=p?t.route.action:t.route.loader;if(r||n)if(v){let w,[x]=await Promise.all([m(v).catch(P=>{w=P}),r,n]);if(w!==void 0)throw w;u=x}else{await r;let w=p?t.route.action:t.route.loader;if(w)[u]=await Promise.all([m(w),n]);else if(d==="action"){let x=new URL(e.url),P=x.pathname+x.search;throw Zu(405,{method:e.method,pathname:P,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(v)u=await m(v);else{let w=new URL(e.url),x=w.pathname+w.search;throw Zu(404,{pathname:x})}}catch(v){return{type:"error",result:v}}finally{a&&e.signal.removeEventListener("abort",a)}return u}async function J2e(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function Q2e(e){let{result:t,type:r}=e;if(cG(t)){let n;try{n=await J2e(t)}catch(i){return{type:"error",error:i}}return r==="error"?{type:"error",error:new C1(t.status,t.statusText,n),statusCode:t.status,headers:t.headers}:{type:"data",data:n,statusCode:t.status,headers:t.headers}}return r==="error"?MB(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new C1(t.init?.status||500,void 0,t.data),statusCode:g0(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:g0(t)?t.status:void 0}:MB(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function ewe(e,t,r,n,i){let o=e.headers.get("Location");if(oi(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!UM(o)){let u=n.slice(0,n.findIndex(a=>a.route.id===r)+1);o=TT(new URL(t.url),u,i,o),e.headers.set("Location",o)}return e}function CB(e,t,r){if(UM(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),o=nu(i.pathname,r)!=null;if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function Vm(e,t,r,n){let i=e.createURL(uG(t)).toString(),o={signal:r};if(n&&Jl(n.formMethod)){let{formMethod:u,formEncType:a}=n;o.method=u.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(n.json)):a==="text/plain"?o.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?o.body=RT(n.formData):o.body=n.formData}return new Request(i,o)}function RT(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function AB(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function twe(e,t,r,n=!1,i=!1){let o={},u=null,a,p=!1,d={},m=r&&Mu(r[1])?r[1].error:void 0;return e.forEach(v=>{if(!(v.route.id in t))return;let w=v.route.id,x=t[w];if(oi(!tp(x),"Cannot handle redirect results in processLoaderData"),Mu(x)){let P=x.error;if(m!==void 0&&(P=m,m=void 0),u=u||{},i)u[w]=P;else{let T=zh(e,w);u[T.route.id]==null&&(u[T.route.id]=P)}n||(o[w]=nG),p||(p=!0,a=g0(x.error)?x.error.status:500),x.headers&&(d[w]=x.headers)}else o[w]=x.data,x.statusCode&&x.statusCode!==200&&!p&&(a=x.statusCode),x.headers&&(d[w]=x.headers)}),m!==void 0&&r&&(u={[r[0]]:m},r[2]&&(o[r[2]]=void 0)),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:d}}function PB(e,t,r,n,i,o){let{loaderData:u,errors:a}=twe(t,r,n);return i.filter(p=>!p.matches||p.matches.some(d=>d.shouldLoad)).forEach(p=>{let{key:d,match:m,controller:v}=p;if(v&&v.signal.aborted)return;let w=o[d];if(oi(w,"Did not find corresponding fetcher result"),Mu(w)){let x=zh(e.matches,m?.route.id);a&&a[x.route.id]||(a={...a,[x.route.id]:w.error}),e.fetchers.delete(d)}else if(tp(w))oi(!1,"Unhandled fetcher revalidation redirect");else{let x=Lh(w.data);e.fetchers.set(d,x)}}),{loaderData:u,errors:a}}function TB(e,t,r,n){let i=Object.entries(t).filter(([,o])=>o!==nG).reduce((o,[u,a])=>(o[u]=a,o),{});for(let o of r){let u=o.route.id;if(!t.hasOwnProperty(u)&&e.hasOwnProperty(u)&&o.route.loader&&(i[u]=e[u]),n&&n.hasOwnProperty(u))break}return i}function IB(e){return e?Mu(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function zh(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Qb(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Zu(e,{pathname:t,routeId:r,method:n,type:i,message:o}={}){let u="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(u="Bad Request",n&&t&&r?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):e===403?(u="Forbidden",a=`Route "${r}" does not match URL "${t}"`):e===404?(u="Not Found",a=`No route matches URL "${t}"`):e===405&&(u="Method Not Allowed",n&&t&&r?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new C1(e||500,u,new Error(a),!0)}function e_(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(tp(i))return{key:n,result:i}}}function uG(e){let t=typeof e=="string"?Mf(e):e;return td({...t,hash:""})}function rwe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function nwe(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&iwe(r))}function iwe(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function awe(e){return cG(e.result)&&B2e.has(e.result.status)}function Mu(e){return e.type==="error"}function tp(e){return(e&&e.type)==="redirect"}function MB(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function cG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function owe(e){return F2e.has(e.toUpperCase())}function Jl(e){return D2e.has(e.toUpperCase())}function qM(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function L_(e,t){let r=typeof t=="string"?Mf(t).search:t.search;if(e[e.length-1].route.index&&qM(r||""))return e[e.length-1];let n=eG(e);return n[n.length-1]}function RB(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:o,json:u}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function gC(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function swe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Hy(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function lwe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Lh(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function uwe(e,t){try{let r=e.sessionStorage.getItem(rG);if(r){let n=JSON.parse(r);for(let[i,o]of Object.entries(n||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function cwe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(rG,JSON.stringify(r))}catch(n){Eo(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function fwe(){let e,t,r=new Promise((n,i)=>{e=async o=>{n(o);try{await r}catch{}},t=async o=>{i(o);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var sd=M.createContext(null);sd.displayName="DataRouter";var jg=M.createContext(null);jg.displayName="DataRouterState";M.createContext(!1);var VM=M.createContext({isTransitioning:!1});VM.displayName="ViewTransition";var fG=M.createContext(new Map);fG.displayName="Fetchers";var hwe=M.createContext(null);hwe.displayName="Await";var jc=M.createContext(null);jc.displayName="Navigation";var U0=M.createContext(null);U0.displayName="Location";var zc=M.createContext({outlet:null,matches:[],isDataRoute:!1});zc.displayName="Route";var GM=M.createContext(null);GM.displayName="RouteError";function dwe(e,{relative:t}={}){oi(ld(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=M.useContext(jc),{hash:i,pathname:o,search:u}=q0(e,{relative:t}),a=o;return r!=="/"&&(a=o==="/"?r:xf([r,o])),n.createHref({pathname:a,search:u,hash:i})}function ld(){return M.useContext(U0)!=null}function dl(){return oi(ld(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(U0).location}function pwe(e){oi(ld(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:t}=dl();return M.useMemo(()=>m0(e,QV(t)),[t,e])}var hG="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dG(e){M.useContext(jc).static||M.useLayoutEffect(e)}function ud(){let{isDataRoute:e}=M.useContext(zc);return e?Pwe():mwe()}function mwe(){oi(ld(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(sd),{basename:t,navigator:r}=M.useContext(jc),{matches:n}=M.useContext(zc),{pathname:i}=dl(),o=JSON.stringify(g2(n)),u=M.useRef(!1);return dG(()=>{u.current=!0}),M.useCallback((p,d={})=>{if(Eo(u.current,hG),!u.current)return;if(typeof p=="number"){r.go(p);return}let m=y2(p,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:xf([t,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[t,r,o,i,e])}M.createContext(null);function pG(){let{matches:e}=M.useContext(zc),t=e[e.length-1];return t?t.params:{}}function q0(e,{relative:t}={}){let{matches:r}=M.useContext(zc),{pathname:n}=dl(),i=JSON.stringify(g2(r));return M.useMemo(()=>y2(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function gwe(e,t){return mG(e,t)}function mG(e,t,r,n,i){oi(ld(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(jc),{matches:u}=M.useContext(zc),a=u[u.length-1],p=a?a.params:{},d=a?a.pathname:"/",m=a?a.pathnameBase:"/",v=a&&a.route;{let N=v&&v.path||"";vG(d,!v||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let w=dl(),x;if(t){let N=typeof t=="string"?Mf(t):t;oi(m==="/"||N.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=w;let P=x.pathname||"/",T=P;if(m!=="/"){let N=m.replace(/^\//,"").split("/");T="/"+P.replace(/^\//,"").split("/").slice(N.length).join("/")}let O=jh(e,{pathname:T});Eo(v||O!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Eo(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=xwe(O&&O.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:xf([m,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:xf([m,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,r,n,i);return t&&L?M.createElement(U0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},L):L}function ywe(){let e=Ewe(),t=g0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),r?M.createElement("pre",{style:i},r):null,u)}var vwe=M.createElement(ywe,null),bwe=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?M.createElement(zc.Provider,{value:this.props.routeContext},M.createElement(GM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _we({routeContext:e,match:t,children:r}){let n=M.useContext(sd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(zc.Provider,{value:e},r)}function xwe(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,u=r?.errors;if(u!=null){let d=o.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);oi(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let a=!1,p=-1;if(r)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=d),m.route.id){let{loaderData:v,errors:w}=r,x=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||x){a=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((d,m,v)=>{let w,x=!1,P=null,T=null;r&&(w=u&&m.route.id?u[m.route.id]:void 0,P=m.route.errorElement||vwe,a&&(p<0&&v===0?(vG("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,T=null):p===v&&(x=!0,T=m.route.hydrateFallbackElement||null)));let O=t.concat(o.slice(0,v+1)),L=()=>{let N;return w?N=P:x?N=T:m.route.Component?N=M.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=d,M.createElement(_we,{match:m,routeContext:{outlet:d,matches:O,isDataRoute:r!=null},children:N})};return r&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?M.createElement(bwe,{location:r.location,revalidation:r.revalidation,component:P,error:w,children:L(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:n}):L()},null)}function HM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gG(e){let t=M.useContext(sd);return oi(t,HM(e)),t}function yG(e){let t=M.useContext(jg);return oi(t,HM(e)),t}function wwe(e){let t=M.useContext(zc);return oi(t,HM(e)),t}function WM(e){let t=wwe(e),r=t.matches[t.matches.length-1];return oi(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Swe(){return WM("useRouteId")}function Ewe(){let e=M.useContext(GM),t=yG("useRouteError"),r=WM("useRouteError");return e!==void 0?e:t.errors?.[r]}var Cwe=0;function Awe(e){let{router:t,basename:r}=gG("useBlocker"),n=yG("useBlocker"),[i,o]=M.useState(""),u=M.useCallback(a=>{if(typeof e!="function")return!!e;if(r==="/")return e(a);let{currentLocation:p,nextLocation:d,historyAction:m}=a;return e({currentLocation:{...p,pathname:nu(p.pathname,r)||p.pathname},nextLocation:{...d,pathname:nu(d.pathname,r)||d.pathname},historyAction:m})},[r,e]);return M.useEffect(()=>{let a=String(++Cwe);return o(a),()=>t.deleteBlocker(a)},[t]),M.useEffect(()=>{i!==""&&t.getBlocker(i,u)},[t,i,u]),i&&n.blockers.has(i)?n.blockers.get(i):qm}function Pwe(){let{router:e}=gG("useNavigate"),t=WM("useNavigate"),r=M.useRef(!1);return dG(()=>{r.current=!0}),M.useCallback(async(i,o={})=>{Eo(r.current,hG),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var OB={};function vG(e,t,r){!t&&!OB[e]&&(OB[e]=!0,Eo(!1,r))}var kB={};function LB(e,t){!e&&!kB[t]&&(kB[t]=!0,console.warn(t))}function Twe(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Eo(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:M.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Eo(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:M.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Eo(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:M.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Iwe=["HydrateFallback","hydrateFallbackElement"],Mwe=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Rwe({router:e,flushSync:t,unstable_onError:r}){let[n,i]=M.useState(e.state),[o,u]=M.useState(),[a,p]=M.useState({isTransitioning:!1}),[d,m]=M.useState(),[v,w]=M.useState(),[x,P]=M.useState(),T=M.useRef(new Map),O=M.useCallback(q=>{i(z=>(q.errors&&r&&Object.entries(q.errors).forEach(([Z,Q])=>{z.errors?.[Z]!==Q&&r(Q)}),q))},[r]),L=M.useCallback((q,{deletedFetchers:z,flushSync:Z,viewTransitionOpts:Q})=>{q.fetchers.forEach((se,W)=>{se.data!==void 0&&T.current.set(W,se.data)}),z.forEach(se=>T.current.delete(se)),LB(Z===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Y=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(LB(Q==null||Y,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!Q||!Y){t&&Z?t(()=>O(q)):M.startTransition(()=>O(q));return}if(t&&Z){t(()=>{v&&(d&&d.resolve(),v.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})});let se=e.window.document.startViewTransition(()=>{t(()=>O(q))});se.finished.finally(()=>{t(()=>{m(void 0),w(void 0),u(void 0),p({isTransitioning:!1})})}),t(()=>w(se));return}v?(d&&d.resolve(),v.skipTransition(),P({state:q,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation})):(u(q),p({isTransitioning:!0,flushSync:!1,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation}))},[e.window,t,v,d,O]);M.useLayoutEffect(()=>e.subscribe(L),[e,L]),M.useEffect(()=>{a.isTransitioning&&!a.flushSync&&m(new Mwe)},[a]),M.useEffect(()=>{if(d&&o&&e.window){let q=o,z=d.promise,Z=e.window.document.startViewTransition(async()=>{M.startTransition(()=>O(q)),await z});Z.finished.finally(()=>{m(void 0),w(void 0),u(void 0),p({isTransitioning:!1})}),w(Z)}},[o,d,e.window,O]),M.useEffect(()=>{d&&o&&n.location.key===o.location.key&&d.resolve()},[d,v,n.location,o]),M.useEffect(()=>{!a.isTransitioning&&x&&(u(x.state),p({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),P(void 0))},[a.isTransitioning,x]);let N=M.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:q=>e.navigate(q),push:(q,z,Z)=>e.navigate(q,{state:z,preventScrollReset:Z?.preventScrollReset}),replace:(q,z,Z)=>e.navigate(q,{replace:!0,state:z,preventScrollReset:Z?.preventScrollReset})}),[e]),F=e.basename||"/",D=M.useMemo(()=>({router:e,navigator:N,static:!1,basename:F,unstable_onError:r}),[e,N,F,r]);return M.createElement(M.Fragment,null,M.createElement(sd.Provider,{value:D},M.createElement(jg.Provider,{value:n},M.createElement(fG.Provider,{value:T.current},M.createElement(VM.Provider,{value:a},M.createElement(Dwe,{basename:F,location:n.location,navigationType:n.historyAction,navigator:N},M.createElement(Owe,{routes:e.routes,future:e.future,state:n,unstable_onError:r})))))),null)}var Owe=M.memo(kwe);function kwe({routes:e,future:t,state:r,unstable_onError:n}){return mG(e,void 0,r,n,t)}function Lwe({to:e,replace:t,state:r,relative:n}){oi(ld(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=M.useContext(jc);Eo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(zc),{pathname:u}=dl(),a=ud(),p=y2(e,g2(o),u,n==="path"),d=JSON.stringify(p);return M.useEffect(()=>{a(JSON.parse(d),{replace:t,state:r,relative:n})},[a,d,n,t,r]),null}function Iu(e){oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dwe({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:o=!1}){oi(!ld(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),a=M.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof r=="string"&&(r=Mf(r));let{pathname:p="/",search:d="",hash:m="",state:v=null,key:w="default"}=r,x=M.useMemo(()=>{let P=nu(p,u);return P==null?null:{location:{pathname:P,search:d,hash:m,state:v,key:w},navigationType:n}},[u,p,d,m,v,w,n]);return Eo(x!=null,`<Router basename="${u}"> is not able to match the URL "${p}${d}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:M.createElement(jc.Provider,{value:a},M.createElement(U0.Provider,{children:t,value:x}))}function mv({children:e,location:t}){return gwe(OT(e),t)}function OT(e,t=[]){let r=[];return M.Children.forEach(e,(n,i)=>{if(!M.isValidElement(n))return;let o=[...t,i];if(n.type===M.Fragment){r.push.apply(r,OT(n.props.children,o));return}oi(n.type===Iu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=OT(n.props.children,o)),r.push(u)}),r}var D_="get",N_="application/x-www-form-urlencoded";function v2(e){return e!=null&&typeof e.tagName=="string"}function Nwe(e){return v2(e)&&e.tagName.toLowerCase()==="button"}function Fwe(e){return v2(e)&&e.tagName.toLowerCase()==="form"}function Bwe(e){return v2(e)&&e.tagName.toLowerCase()==="input"}function jwe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zwe(e,t){return e.button===0&&(!t||t==="_self")&&!jwe(e)}var t_=null;function $we(){if(t_===null)try{new FormData(document.createElement("form"),0),t_=!1}catch{t_=!0}return t_}var Uwe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yC(e){return e!=null&&!Uwe.has(e)?(Eo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${N_}"`),null):e}function qwe(e,t){let r,n,i,o,u;if(Fwe(e)){let a=e.getAttribute("action");n=a?nu(a,t):null,r=e.getAttribute("method")||D_,i=yC(e.getAttribute("enctype"))||N_,o=new FormData(e)}else if(Nwe(e)||Bwe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||a.getAttribute("action");if(n=p?nu(p,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||D_,i=yC(e.getAttribute("formenctype"))||yC(a.getAttribute("enctype"))||N_,o=new FormData(a,e),!$we()){let{name:d,type:m,value:v}=e;if(m==="image"){let w=d?`${d}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else d&&o.append(d,v)}}else{if(v2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=D_,n=null,i=N_,u=e}return o&&i==="text/plain"&&(u=o,o=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZM(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vwe(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&nu(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Gwe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hwe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Wwe(e,t,r){let n=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let u=await Gwe(o,r);return u.links?u.links():[]}return[]}));return Ywe(n.flat(1).filter(Hwe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function DB(e,t,r,n,i,o){let u=(p,d)=>r[d]?p.route.id!==r[d].route.id:!0,a=(p,d)=>r[d].pathname!==p.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==p.params["*"];return o==="assets"?t.filter((p,d)=>u(p,d)||a(p,d)):o==="data"?t.filter((p,d)=>{let m=n.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(u(p,d)||a(p,d))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Zwe(e,t,{includeHydrateFallback:r}={}){return Kwe(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Kwe(e){return[...new Set(e)]}function Xwe(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Ywe(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let o=JSON.stringify(Xwe(i));return r.has(o)||(r.add(o),n.push({key:o,link:i})),n},[])}function bG(){let e=M.useContext(sd);return ZM(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Jwe(){let e=M.useContext(jg);return ZM(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var KM=M.createContext(void 0);KM.displayName="FrameworkContext";function _G(){let e=M.useContext(KM);return ZM(e,"You must render this element inside a <HydratedRouter> element"),e}function Qwe(e,t){let r=M.useContext(KM),[n,i]=M.useState(!1),[o,u]=M.useState(!1),{onFocus:a,onBlur:p,onMouseEnter:d,onMouseLeave:m,onTouchStart:v}=t,w=M.useRef(null);M.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let T=L=>{L.forEach(N=>{u(N.isIntersecting)})},O=new IntersectionObserver(T,{threshold:.5});return w.current&&O.observe(w.current),()=>{O.disconnect()}}},[e]),M.useEffect(()=>{if(n){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[n]);let x=()=>{i(!0)},P=()=>{i(!1),u(!1)};return r?e!=="intent"?[o,w,{}]:[o,w,{onFocus:Wy(a,x),onBlur:Wy(p,P),onMouseEnter:Wy(d,x),onMouseLeave:Wy(m,P),onTouchStart:Wy(v,x)}]:[!1,w,{}]}function Wy(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function e5e({page:e,...t}){let{router:r}=bG(),n=M.useMemo(()=>jh(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?M.createElement(r5e,{page:e,matches:n,...t}):null}function t5e(e){let{manifest:t,routeModules:r}=_G(),[n,i]=M.useState([]);return M.useEffect(()=>{let o=!1;return Wwe(e,t,r).then(u=>{o||i(u)}),()=>{o=!0}},[e,t,r]),n}function r5e({page:e,matches:t,...r}){let n=dl(),{manifest:i,routeModules:o}=_G(),{basename:u}=bG(),{loaderData:a,matches:p}=Jwe(),d=M.useMemo(()=>DB(e,t,p,i,n,"data"),[e,t,p,i,n]),m=M.useMemo(()=>DB(e,t,p,i,n,"assets"),[e,t,p,i,n]),v=M.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let P=new Set,T=!1;if(t.forEach(L=>{let N=i.routes[L.route.id];!N||!N.hasLoader||(!d.some(F=>F.route.id===L.route.id)&&L.route.id in a&&o[L.route.id]?.shouldRevalidate||N.hasClientLoader?T=!0:P.add(L.route.id))}),P.size===0)return[];let O=Vwe(e,u,"data");return T&&P.size>0&&O.searchParams.set("_routes",t.filter(L=>P.has(L.route.id)).map(L=>L.route.id).join(",")),[O.pathname+O.search]},[u,a,n,i,d,t,e,o]),w=M.useMemo(()=>Zwe(m,i),[m,i]),x=t5e(m);return M.createElement(M.Fragment,null,v.map(P=>M.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...r})),w.map(P=>M.createElement("link",{key:P,rel:"modulepreload",href:P,...r})),x.map(({key:P,link:T})=>M.createElement("link",{key:P,nonce:r.nonce,...T})))}function n5e(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var xG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xG&&(window.__reactRouterVersion="7.8.2")}catch{}function i5e(e,t){return q2e({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:u2e({window:t?.window}),hydrationData:t?.hydrationData||a5e(),routes:e,mapRouteProperties:Twe,hydrationRouteProperties:Iwe,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function a5e(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:o5e(e.errors)}),e}function o5e(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new C1(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let u=new o(i.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let o=new Error(i.message);o.stack="",r[n]=o}}else r[n]=i;return r}var wG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zg=M.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:o,replace:u,state:a,target:p,to:d,preventScrollReset:m,viewTransition:v,...w},x){let{basename:P}=M.useContext(jc),T=typeof d=="string"&&wG.test(d),O,L=!1;if(typeof d=="string"&&T&&(O=d,xG))try{let Y=new URL(window.location.href),se=d.startsWith("//")?new URL(Y.protocol+d):new URL(d),W=nu(se.pathname,P);se.origin===Y.origin&&W!=null?d=W+se.search+se.hash:L=!0}catch{Eo(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=dwe(d,{relative:i}),[F,D,q]=Qwe(n,w),z=c5e(d,{replace:u,state:a,target:p,preventScrollReset:m,relative:i,viewTransition:v});function Z(Y){t&&t(Y),Y.defaultPrevented||z(Y)}let Q=M.createElement("a",{...w,...q,href:O||N,onClick:L||o?t:Z,ref:n5e(x,D),target:p,"data-discover":!T&&r==="render"?"true":void 0});return F&&!T?M.createElement(M.Fragment,null,Q,M.createElement(e5e,{page:N})):Q});zg.displayName="Link";var s5e=M.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:o,to:u,viewTransition:a,children:p,...d},m){let v=q0(u,{relative:d.relative}),w=dl(),x=M.useContext(jg),{navigator:P,basename:T}=M.useContext(jc),O=x!=null&&m5e(v)&&a===!0,L=P.encodeLocation?P.encodeLocation(v).pathname:v.pathname,N=w.pathname,F=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(N=N.toLowerCase(),F=F?F.toLowerCase():null,L=L.toLowerCase()),F&&T&&(F=nu(F,T)||F);const D=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let q=N===L||!i&&N.startsWith(L)&&N.charAt(D)==="/",z=F!=null&&(F===L||!i&&F.startsWith(L)&&F.charAt(L.length)==="/"),Z={isActive:q,isPending:z,isTransitioning:O},Q=q?t:void 0,Y;typeof n=="function"?Y=n(Z):Y=[n,q?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let se=typeof o=="function"?o(Z):o;return M.createElement(zg,{...d,"aria-current":Q,className:Y,ref:m,style:se,to:u,viewTransition:a},typeof p=="function"?p(Z):p)});s5e.displayName="NavLink";var l5e=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:o,method:u=D_,action:a,onSubmit:p,relative:d,preventScrollReset:m,viewTransition:v,...w},x)=>{let P=d5e(),T=p5e(a,{relative:d}),O=u.toLowerCase()==="get"?"get":"post",L=typeof a=="string"&&wG.test(a),N=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let D=F.nativeEvent.submitter,q=D?.getAttribute("formmethod")||u;P(D||F.currentTarget,{fetcherKey:t,method:q,navigate:r,replace:i,state:o,relative:d,preventScrollReset:m,viewTransition:v})};return M.createElement("form",{ref:x,method:O,action:T,onSubmit:n?p:N,...w,"data-discover":!L&&e==="render"?"true":void 0})});l5e.displayName="Form";function u5e(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SG(e){let t=M.useContext(sd);return oi(t,u5e(e)),t}function c5e(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:u}={}){let a=ud(),p=dl(),d=q0(e,{relative:o});return M.useCallback(m=>{if(zwe(m,t)){m.preventDefault();let v=r!==void 0?r:td(p)===td(d);a(e,{replace:v,state:n,preventScrollReset:i,relative:o,viewTransition:u})}},[p,a,d,r,n,t,e,i,o,u])}var f5e=0,h5e=()=>`__${String(++f5e)}__`;function d5e(){let{router:e}=SG("useSubmit"),{basename:t}=M.useContext(jc),r=Swe();return M.useCallback(async(n,i={})=>{let{action:o,method:u,encType:a,formData:p,body:d}=qwe(n,t);if(i.navigate===!1){let m=i.fetcherKey||h5e();await e.fetch(m,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function p5e(e,{relative:t}={}){let{basename:r}=M.useContext(jc),n=M.useContext(zc);oi(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...q0(e||".",{relative:t})},u=dl();if(e==null){o.search=u.search;let a=new URLSearchParams(o.search),p=a.getAll("index");if(p.some(m=>m==="")){a.delete("index"),p.filter(v=>v).forEach(v=>a.append("index",v));let m=a.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:xf([r,o.pathname])),td(o)}function m5e(e,{relative:t}={}){let r=M.useContext(VM);oi(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=SG("useViewTransitionState"),i=q0(e,{relative:t});if(!r.isTransitioning)return!1;let o=nu(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=nu(r.nextLocation.pathname,n)||r.nextLocation.pathname;return m0(i.pathname,u)!=null||m0(i.pathname,o)!=null}function g5e(e){return M.createElement(Rwe,{flushSync:Rx.flushSync,...e})}var y5e="RaStore",v5e=function(){if(typeof window>"u"||window.localStorage==null)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch{return!1}},kT=v5e(),b5e=function(e,t){e===void 0&&(e="1"),t===void 0&&(t="");var r="".concat(y5e).concat(t),n=r.length,i={},o=function(a,p){Object.keys(i).forEach(function(d){i[d]&&i[d].key===a&&i[d].callback(p)})},u=function(a){var p;if(((p=a.key)===null||p===void 0?void 0:p.substring(0,n))===r){var d=a.key.substring(n+1),m=a.newValue?NB(a.newValue):void 0;Object.keys(i).forEach(function(v){i[v]&&i[v].key===d&&(m===null?i[v].callback(void 0):i[v].callback(m??void 0))})}};return{setup:function(){if(kT){var a=Zf().getItem("".concat(r,".version"));if(a&&a!==e){var p=Zf();Object.keys(p).forEach(function(d){d.startsWith(r)&&p.removeItem(d)})}Zf().setItem("".concat(r,".version"),e),window.addEventListener("storage",u)}},teardown:function(){kT&&window.removeEventListener("storage",u)},getItem:function(a,p){var d=Zf().getItem("".concat(r,".").concat(a));return d==null?p:NB(d)},setItem:function(a,p){p===void 0?Zf().removeItem("".concat(r,".").concat(a)):Zf().setItem("".concat(r,".").concat(a),JSON.stringify(p)),o(a,p)},removeItem:function(a){Zf().removeItem("".concat(r,".").concat(a)),o(a,void 0)},removeItems:function(a){var p=Zf();Object.keys(p).forEach(function(d){if(d.startsWith("".concat(r,".").concat(a))){p.removeItem(d);var m=d.substring(n+1);o(m,void 0)}})},reset:function(){var a=Zf();Object.keys(a).forEach(function(p){if(p.startsWith(r)){a.removeItem(p);var d=p.substring(n+1);o(d,void 0)}})},subscribe:function(a,p){var d=Math.random().toString();return i[d]={key:a,callback:p},function(){delete i[d]}}}},NB=function(e){try{return JSON.parse(e)}catch{return e}},_5e=(function(){function e(){this.valuesMap=new Map}return e.prototype.getItem=function(t){return this.valuesMap.has(t)?String(this.valuesMap.get(t)):null},e.prototype.setItem=function(t,r){this.valuesMap.set(t,r)},e.prototype.removeItem=function(t){this.valuesMap.delete(t)},e.prototype.removeItems=function(t){var r=this;this.valuesMap.forEach(function(n,i){i.startsWith(t)&&r.valuesMap.delete(i)})},e.prototype.clear=function(){this.valuesMap.clear()},e.prototype.key=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");var r=Array.from(this.valuesMap.keys());return r[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.valuesMap.size},enumerable:!1,configurable:!0}),e})(),x5e=new _5e,Zf=function(){return kT?window.localStorage:x5e},vC,FB;function EG(){if(FB)return vC;FB=1;var e=KI(),t=L0(),r=Ig(),n=Pf(),i=Og();function o(u,a,p,d){if(!n(u))return u;a=t(a,u);for(var m=-1,v=a.length,w=v-1,x=u;x!=null&&++m<v;){var P=i(a[m]),T=p;if(P==="__proto__"||P==="constructor"||P==="prototype")return u;if(m!=w){var O=x[P];T=d?d(O,P,x):void 0,T===void 0&&(T=n(O)?O:r(a[m+1])?[]:{})}e(x,P,T),x=x[P]}return u}return vC=o,vC}var bC,BB;function w5e(){if(BB)return bC;BB=1;var e=EG();function t(r,n,i){return r==null?r:e(r,n,i)}return bC=t,bC}var S5e=w5e();const E5e=Us(S5e);var _C,jB;function C5e(){if(jB)return _C;jB=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return _C=e,_C}var xC,zB;function A5e(){if(zB)return xC;zB=1;function e(t,r,n){var i=-1,o=t.length;r<0&&(r=-r>o?0:o+r),n=n>o?o:n,n<0&&(n+=o),o=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(o);++i<o;)u[i]=t[i+r];return u}return xC=e,xC}var wC,$B;function P5e(){if($B)return wC;$B=1;var e=Jx(),t=A5e();function r(n,i){return i.length<2?n:e(n,t(i,0,-1))}return wC=r,wC}var SC,UB;function CG(){if(UB)return SC;UB=1;var e=L0(),t=C5e(),r=P5e(),n=Og();function i(o,u){return u=e(u,o),o=r(o,u),o==null||delete o[n(t(u))]}return SC=i,SC}var EC,qB;function T5e(){if(qB)return EC;qB=1;var e=CG();function t(r,n){return r==null?!0:e(r,n)}return EC=t,EC}var I5e=T5e();const CC=Us(I5e);var M5e=WI();const Pc=Us(M5e);var AG=function(e){e===void 0&&(e={});var t={},r=function(n,i){Object.keys(t).forEach(function(o){t[o]&&t[o].key===n&&t[o].callback(i)})};return{setup:function(){},teardown:function(){Object.keys(e).forEach(function(n){return delete e[n]})},getItem:function(n,i){return Pc(e,n,i)},setItem:function(n,i){E5e(e,n,i),r(n,i)},removeItem:function(n){CC(e,n),r(n,void 0)},removeItems:function(n){var i=VB(e);Object.keys(i).forEach(function(o){o.startsWith(n)&&(CC(e,o),r(o,void 0))})},reset:function(){var n=VB(e);Object.keys(n).forEach(function(i){CC(e,i),r(i,void 0)})},subscribe:function(n,i){var o=Math.random().toString();return t[o]={key:n,callback:i},function(){delete t[o]}}}},VB=function(e){var t={};function r(n,i){if(Object(n)!==n)t[i]=n;else if(Array.isArray(n))t[i]=n;else{var o=!0;for(var u in n)o=!1,r(n[u],i?i+"."+u:u);o&&i&&(t[i]={})}}return r(e,""),t},R5e=AG(),PG=M.createContext(R5e),O5e=function(e){var t=e.value,r=e.children;return M.useEffect(function(){return t.setup(),function(){t.teardown()}},[t]),M.createElement(PG.Provider,{value:t},r)},b2=function(){return M.useContext(PG)},AC,GB;function k5e(){if(GB)return AC;GB=1;var e=GI();function t(r,n){return e(r,n)}return AC=t,AC}var L5e=k5e();const XM=Us(L5e);var HB=function(e,t){return e&&t?String.prototype.replace.call(e,D5e,function(r,n){return!t.hasOwnProperty(n)||t[n]==null?r:t[n]}):e},D5e=/%\{(.*?)\}/g,N5e={translate:function(e,t){return t?._?HB(t._,t):HB(e,t)},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},YM=M.createContext(N5e);YM.displayName="I18nContext";var TG=M.createContext(function(){}),F5e=M.createContext(null),IG=M.createContext({notifications:[],addNotification:function(){},takeNotification:function(){},resetNotifications:function(){},setNotifications:function(){}}),WB=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},B5e=function(e){var t=e.children,r=M.useState([]),n=r[0],i=r[1],o=M.useCallback(function(d){i(function(m){return WB(WB([],m,!0),[d],!1)})},[]),u=M.useCallback(function(){if(n.length!==0){var d=n[0],m=n.slice(1);return i(m),d}},[n]),a=M.useCallback(function(){i([])},[]),p=M.useMemo(function(){return{notifications:n,addNotification:o,takeNotification:u,resetNotifications:a,setNotifications:i}},[n]);return M.createElement(IG.Provider,{value:p},M.createElement(TG.Provider,{value:o},t))},j5e=function(){return M.useContext(TG)},MG=function(){return M.useContext(IG)},z5e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Rf=function(){var e=j5e();return M.useCallback(function(t,r){r===void 0&&(r={});var n=r.type,i=n===void 0?"info":n,o=z5e(r,["type"]);e({message:t,type:i,notificationOptions:o})},[e])},$5e=function(e){var t=e.value,r=t===void 0?U5e:t,n=e.children,i=Op("locale")[0],o=Rf(),u=M.useState(0),a=u[0],p=u[1],d=M.useState(i===r.getLocale()),m=d[0],v=d[1];return M.useEffect(function(){i&&r.getLocale()!==i?new Promise(function(w){w(r.changeLocale(i))}).then(function(){p(function(w){return w+1}),v(!0)}).catch(function(w){v(!0),o("ra.notification.i18n_error",{type:"error"}),console.error(w)}):v(!0)},[r,i,o]),m?M.createElement(YM.Provider,{value:r,key:a},n):null},U5e={translate:function(e){return e},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},JM=function(){return M.useContext(YM)},Ti=function(){var e=JM(),t=M.useCallback(function(r,n){return e.translate(r,n)},[e]);return e?t:q5e},q5e=function(e){return e},PC,ZB;function RG(){if(ZB)return PC;ZB=1;var e=ZI(),t=Rg();function r(n,i,o){(o!==void 0&&!t(n[i],o)||o===void 0&&!(i in n))&&e(n,i,o)}return PC=r,PC}var TC,KB;function V5e(){if(KB)return TC;KB=1;var e=Mg(),t=Af();function r(n){return t(n)&&e(n)}return TC=r,TC}var IC,XB;function OG(){if(XB)return IC;XB=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return IC=e,IC}var MC,YB;function G5e(){if(YB)return MC;YB=1;var e=D0(),t=kg();function r(n){return e(n,t(n))}return MC=r,MC}var RC,JB;function H5e(){if(JB)return RC;JB=1;var e=RG(),t=oq(),r=uq(),n=sq(),i=cq(),o=Ux(),u=$u(),a=V5e(),p=qx(),d=FI(),m=Pf(),v=ZU(),w=DI(),x=OG(),P=G5e();function T(O,L,N,F,D,q,z){var Z=x(O,N),Q=x(L,N),Y=z.get(Q);if(Y){e(O,N,Y);return}var se=q?q(Z,Q,N+"",O,L,z):void 0,W=se===void 0;if(W){var G=u(Q),ae=!G&&p(Q),le=!G&&!ae&&w(Q);se=Q,G||ae||le?u(Z)?se=Z:a(Z)?se=n(Z):ae?(W=!1,se=t(Q,!0)):le?(W=!1,se=r(Q,!0)):se=[]:v(Q)||o(Q)?(se=Z,o(Z)?se=P(Z):(!m(Z)||d(Z))&&(se=i(Q))):W=!1}W&&(z.set(Q,se),D(se,Q,F,q,z),z.delete(Q)),e(O,N,se)}return RC=T,RC}var OC,QB;function W5e(){if(QB)return OC;QB=1;var e=Kx(),t=RG(),r=VU(),n=H5e(),i=Pf(),o=kg(),u=OG();function a(p,d,m,v,w){p!==d&&r(d,function(x,P){if(w||(w=new e),i(x))n(p,d,P,m,a,v,w);else{var T=v?v(u(p,P),x,P+"",p,d,w):void 0;T===void 0&&(T=x),t(p,P,T)}},o)}return OC=a,OC}var kC,ej;function Z5e(){if(ej)return kC;ej=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return kC=e,kC}var LC,tj;function kG(){if(tj)return LC;tj=1;var e=Z5e(),t=Math.max;function r(n,i,o){return i=t(i===void 0?n.length-1:i,0),function(){for(var u=arguments,a=-1,p=t(u.length-i,0),d=Array(p);++a<p;)d[a]=u[i+a];a=-1;for(var m=Array(i+1);++a<i;)m[a]=u[a];return m[i]=o(d),e(n,this,m)}}return LC=r,LC}var DC,rj;function K5e(){if(rj)return DC;rj=1;function e(t){return function(){return t}}return DC=e,DC}var NC,nj;function X5e(){if(nj)return NC;nj=1;var e=K5e(),t=aq(),r=Vx(),n=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:r;return NC=n,NC}var FC,ij;function Y5e(){if(ij)return FC;ij=1;var e=800,t=16,r=Date.now;function n(i){var o=0,u=0;return function(){var a=r(),p=t-(a-u);if(u=a,p>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return FC=n,FC}var BC,aj;function LG(){if(aj)return BC;aj=1;var e=X5e(),t=Y5e(),r=t(e);return BC=r,BC}var jC,oj;function DG(){if(oj)return jC;oj=1;var e=Vx(),t=kG(),r=LG();function n(i,o){return r(t(i,o,e),i+"")}return jC=n,jC}var zC,sj;function NG(){if(sj)return zC;sj=1;var e=Rg(),t=Mg(),r=Ig(),n=Pf();function i(o,u,a){if(!n(a))return!1;var p=typeof u;return(p=="number"?t(a)&&r(u,a.length):p=="string"&&u in a)?e(a[u],o):!1}return zC=i,zC}var $C,lj;function J5e(){if(lj)return $C;lj=1;var e=DG(),t=NG();function r(n){return e(function(i,o){var u=-1,a=o.length,p=a>1?o[a-1]:void 0,d=a>2?o[2]:void 0;for(p=n.length>3&&typeof p=="function"?(a--,p):void 0,d&&t(o[0],o[1],d)&&(p=a<3?void 0:p,a=1),i=Object(i);++u<a;){var m=o[u];m&&n(i,m,u,p)}return i})}return $C=r,$C}var UC,uj;function Q5e(){if(uj)return UC;uj=1;var e=W5e(),t=J5e(),r=t(function(n,i,o){e(n,i,o)});return UC=r,UC}var eSe=Q5e();const FG=Us(eSe);var BG=function(){var e=JM(),t=M.useMemo(function(){return e.getLocale()},[e]);return Op("locale",t)},tSe=function(){var e=BG()[0];return e},jG=function(e){var t,r=JM(),n=M.useMemo(function(){return r?.getLocales?r?.getLocales():[]},[r]);return(t=e?.locales)!==null&&t!==void 0?t:n},Av=function(){return Av=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Av.apply(this,arguments)},lp=function(e){var t=e.resourceI18nKey,r=e.baseI18nKey,n=e.userText,i=e.options,o=Ti();return n!==void 0?typeof n!="string"?n:o(n,Av({_:n},i)):t?o(t,Av(Av({},i),{_:o(r,i)})):o(r,i)},zG=M.createContext(""),rSe=function(e){var t=e.children,r=e.basename;return M.createElement(zG.Provider,{value:r},t)},nSe=function(e){var t=e.basename,r=t===void 0?"":t,n=e.children,i=ld(),o=i?iSe:oSe;return M.createElement(rSe,{basename:i?r:""},M.createElement(o,{basename:r},n))},iSe=function(e){var t=e.children;return M.createElement(M.Fragment,null,t)},aSe={v7_startTransition:!1,v7_relativeSplatPath:!1},oSe=function(e){var t=e.children,r=e.basename,n=i5e([{path:"*",element:M.createElement(M.Fragment,null,t)}],{basename:r,future:{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1}});return M.createElement(g5e,{router:n,future:aSe})},mh=function(){return M.useContext(zG)},V0=function(){var e=mh();return M.useCallback(function(t){var r=t.resource,n=t.id,i=t.type;if(["list","create","edit","show"].includes(i)&&!r)throw new Error("Cannot create a link without a resource. You must provide the resource name.");switch(i){case"list":return ff("".concat(e,"/").concat(r));case"create":return ff("".concat(e,"/").concat(r,"/create"));case"edit":return n==null?ff("".concat(e,"/").concat(r)):ff("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n)));case"show":return n==null?ff("".concat(e,"/").concat(r)):ff("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n),"/show"));default:return i}},[e])},ff=function(e){return e.replace("//","/")},$G=M.createContext(void 0),lu=function(e){var t=M.useContext($G);return e&&e.resource||t},QM=M.createContext(void 0);QM.displayName="RecordContext";var eR=function(e){var t=e.children,r=e.value;return M.createElement(QM.Provider,{value:r},t)},pl=function(e){var t=M.useContext(QM);return e&&e.record||t},P1=function(){return P1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P1.apply(this,arguments)},sSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},UG=M.createContext({definitions:{},register:function(){},unregister:function(){}}),lSe=function(e){var t=e.definitions,r=t===void 0?{}:t,n=e.children,i=M.useState(r),o=i[0],u=i[1],a=M.useCallback(function(m){u(function(v){var w;return XM(v[m.name],m)?v:P1(P1({},v),(w={},w[m.name]=m,w))})},[]),p=M.useCallback(function(m){u(function(v){var w=v,x=m.name;w[x];var P=sSe(w,[typeof x=="symbol"?x:x+""]);return P})},[]),d=M.useMemo(function(){return{definitions:o,register:a,unregister:p}},[o]);return M.createElement(UG.Provider,{value:d},n)},qG=function(){return M.useContext(UG)},G0=function(){return qG().definitions},Pv=function(){return Pv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pv.apply(this,arguments)},H0=function(){var e=ud(),t=mh(),r=V0();return M.useCallback(function(n,i,o,u,a){var p;if(i===void 0&&(i=""),a===void 0&&(a={}),n)if(typeof n=="function"){var d=n(i,o,u),m=typeof d=="string"?"".concat(t).concat(d.startsWith("/")?"":"/").concat(d):Pv({pathname:"".concat(t).concat(!((p=d.pathname)===null||p===void 0)&&p.startsWith("/")?"":"/").concat(d.pathname)},d);e(m,{state:Pv({_scrollToTop:!0},a)});return}else if(typeof n=="string"&&n.startsWith("http")&&window){window.location.href=n;return}else{e(r({resource:i,id:o,type:n}),{state:n==="list"?a:Pv({_scrollToTop:!0},a)});return}else return},[e,t,r])},VG=function(e){var t=dl().pathname,r=M.useRef(t);M.useEffect(function(){t!==r.current&&e()},[t,e])},uSe=function(){var e=dl();M.useEffect(function(){var t;!((t=e.state)===null||t===void 0)&&t._scrollToTop&&typeof window<"u"&&typeof window.scrollTo=="function"&&window.scrollTo(0,0)},[e])},T1=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},cSe="GET_LIST",fSe="GET_ONE",hSe="GET_MANY",dSe="GET_MANY_REFERENCE",pSe="CREATE",mSe="UPDATE",gSe="UPDATE_MANY",ySe="DELETE",vSe="DELETE_MANY",bSe=["getOne","create","update"],_Se=["getList","getMany","getManyReference"],xSe=T1(T1([],_Se,!0),["updateMany","deleteMany"],!1);T1(T1([],bSe,!0),xSe,!0);var tR={create:function(){return Promise.resolve({data:null})},delete:function(){return Promise.resolve({data:null})},deleteMany:function(){return Promise.resolve({data:[]})},getList:function(){return Promise.resolve({data:[],total:0})},getMany:function(){return Promise.resolve({data:[]})},getManyReference:function(){return Promise.resolve({data:[],total:0})},getOne:function(){return Promise.resolve({data:null})},update:function(){return Promise.resolve({data:null})},updateMany:function(){return Promise.resolve({data:[]})}},cj={create:pSe,delete:ySe,deleteMany:vSe,getList:cSe,getMany:hSe,getManyReference:dSe,getOne:fSe,update:mSe,updateMany:gSe},wSe=function(e){var t=new Proxy(tR,{get:function(r,n){return function(i,o){if(Object.keys(cj).includes(n.toString())){var u=cj[n.toString()];return e(u,i,o)}return e(n.toString(),i,o)}},apply:function(r,n,i){return e.apply(e,i)}});return t},rR=M.createContext(null);rR.displayName="DataProviderContext";var qC={},VC,fj;function SSe(){return fj||(fj=1,VC=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),VC}var GC,hj;function ESe(){if(hj)return GC;hj=1;var e="%[a-f0-9]{2}",t=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function n(u,a){try{return[decodeURIComponent(u.join(""))]}catch{}if(u.length===1)return u;a=a||1;var p=u.slice(0,a),d=u.slice(a);return Array.prototype.concat.call([],n(p),n(d))}function i(u){try{return decodeURIComponent(u)}catch{for(var a=u.match(t)||[],p=1;p<a.length;p++)u=n(a,p).join(""),a=u.match(t)||[];return u}}function o(u){for(var a={"%FE%FF":"","%FF%FE":""},p=r.exec(u);p;){try{a[p[0]]=decodeURIComponent(p[0])}catch{var d=i(p[0]);d!==p[0]&&(a[p[0]]=d)}p=r.exec(u)}a["%C2"]="";for(var m=Object.keys(a),v=0;v<m.length;v++){var w=m[v];u=u.replace(new RegExp(w,"g"),a[w])}return u}return GC=function(u){if(typeof u!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof u+"`");try{return u=u.replace(/\+/g," "),decodeURIComponent(u)}catch{return o(u)}},GC}var HC,dj;function CSe(){return dj||(dj=1,HC=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}),HC}var WC,pj;function ASe(){return pj||(pj=1,WC=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var u=n[o],a=e[u];(i?t.indexOf(u)!==-1:t(u,a,e))&&(r[u]=a)}return r}),WC}var mj;function PSe(){return mj||(mj=1,(function(e){const t=SSe(),r=ESe(),n=CSe(),i=ASe(),o=N=>N==null,u=Symbol("encodeFragmentIdentifier");function a(N){switch(N.arrayFormat){case"index":return F=>(D,q)=>{const z=D.length;return q===void 0||N.skipNull&&q===null||N.skipEmptyString&&q===""?D:q===null?[...D,[m(F,N),"[",z,"]"].join("")]:[...D,[m(F,N),"[",m(z,N),"]=",m(q,N)].join("")]};case"bracket":return F=>(D,q)=>q===void 0||N.skipNull&&q===null||N.skipEmptyString&&q===""?D:q===null?[...D,[m(F,N),"[]"].join("")]:[...D,[m(F,N),"[]=",m(q,N)].join("")];case"colon-list-separator":return F=>(D,q)=>q===void 0||N.skipNull&&q===null||N.skipEmptyString&&q===""?D:q===null?[...D,[m(F,N),":list="].join("")]:[...D,[m(F,N),":list=",m(q,N)].join("")];case"comma":case"separator":case"bracket-separator":{const F=N.arrayFormat==="bracket-separator"?"[]=":"=";return D=>(q,z)=>z===void 0||N.skipNull&&z===null||N.skipEmptyString&&z===""?q:(z=z===null?"":z,q.length===0?[[m(D,N),F,m(z,N)].join("")]:[[q,m(z,N)].join(N.arrayFormatSeparator)])}default:return F=>(D,q)=>q===void 0||N.skipNull&&q===null||N.skipEmptyString&&q===""?D:q===null?[...D,m(F,N)]:[...D,[m(F,N),"=",m(q,N)].join("")]}}function p(N){let F;switch(N.arrayFormat){case"index":return(D,q,z)=>{if(F=/\[(\d*)\]$/.exec(D),D=D.replace(/\[\d*\]$/,""),!F){z[D]=q;return}z[D]===void 0&&(z[D]={}),z[D][F[1]]=q};case"bracket":return(D,q,z)=>{if(F=/(\[\])$/.exec(D),D=D.replace(/\[\]$/,""),!F){z[D]=q;return}if(z[D]===void 0){z[D]=[q];return}z[D]=[].concat(z[D],q)};case"colon-list-separator":return(D,q,z)=>{if(F=/(:list)$/.exec(D),D=D.replace(/:list$/,""),!F){z[D]=q;return}if(z[D]===void 0){z[D]=[q];return}z[D]=[].concat(z[D],q)};case"comma":case"separator":return(D,q,z)=>{const Z=typeof q=="string"&&q.includes(N.arrayFormatSeparator),Q=typeof q=="string"&&!Z&&v(q,N).includes(N.arrayFormatSeparator);q=Q?v(q,N):q;const Y=Z||Q?q.split(N.arrayFormatSeparator).map(se=>v(se,N)):q===null?q:v(q,N);z[D]=Y};case"bracket-separator":return(D,q,z)=>{const Z=/(\[\])$/.test(D);if(D=D.replace(/\[\]$/,""),!Z){z[D]=q&&v(q,N);return}const Q=q===null?[]:q.split(N.arrayFormatSeparator).map(Y=>v(Y,N));if(z[D]===void 0){z[D]=Q;return}z[D]=[].concat(z[D],Q)};default:return(D,q,z)=>{if(z[D]===void 0){z[D]=q;return}z[D]=[].concat(z[D],q)}}}function d(N){if(typeof N!="string"||N.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(N,F){return F.encode?F.strict?t(N):encodeURIComponent(N):N}function v(N,F){return F.decode?r(N):N}function w(N){return Array.isArray(N)?N.sort():typeof N=="object"?w(Object.keys(N)).sort((F,D)=>Number(F)-Number(D)).map(F=>N[F]):N}function x(N){const F=N.indexOf("#");return F!==-1&&(N=N.slice(0,F)),N}function P(N){let F="";const D=N.indexOf("#");return D!==-1&&(F=N.slice(D)),F}function T(N){N=x(N);const F=N.indexOf("?");return F===-1?"":N.slice(F+1)}function O(N,F){return F.parseNumbers&&!Number.isNaN(Number(N))&&typeof N=="string"&&N.trim()!==""?N=Number(N):F.parseBooleans&&N!==null&&(N.toLowerCase()==="true"||N.toLowerCase()==="false")&&(N=N.toLowerCase()==="true"),N}function L(N,F){F=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},F),d(F.arrayFormatSeparator);const D=p(F),q=Object.create(null);if(typeof N!="string"||(N=N.trim().replace(/^[?#&]/,""),!N))return q;for(const z of N.split("&")){if(z==="")continue;let[Z,Q]=n(F.decode?z.replace(/\+/g," "):z,"=");Q=Q===void 0?null:["comma","separator","bracket-separator"].includes(F.arrayFormat)?Q:v(Q,F),D(v(Z,F),Q,q)}for(const z of Object.keys(q)){const Z=q[z];if(typeof Z=="object"&&Z!==null)for(const Q of Object.keys(Z))Z[Q]=O(Z[Q],F);else q[z]=O(Z,F)}return F.sort===!1?q:(F.sort===!0?Object.keys(q).sort():Object.keys(q).sort(F.sort)).reduce((z,Z)=>{const Q=q[Z];return Q&&typeof Q=="object"&&!Array.isArray(Q)?z[Z]=w(Q):z[Z]=Q,z},Object.create(null))}e.extract=T,e.parse=L,e.stringify=(N,F)=>{if(!N)return"";F=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},F),d(F.arrayFormatSeparator);const D=Q=>F.skipNull&&o(N[Q])||F.skipEmptyString&&N[Q]==="",q=a(F),z={};for(const Q of Object.keys(N))D(Q)||(z[Q]=N[Q]);const Z=Object.keys(z);return F.sort!==!1&&Z.sort(F.sort),Z.map(Q=>{const Y=N[Q];return Y===void 0?"":Y===null?m(Q,F):Array.isArray(Y)?Y.length===0&&F.arrayFormat==="bracket-separator"?m(Q,F)+"[]":Y.reduce(q(Q),[]).join("&"):m(Q,F)+"="+m(Y,F)}).filter(Q=>Q.length>0).join("&")},e.parseUrl=(N,F)=>{F=Object.assign({decode:!0},F);const[D,q]=n(N,"#");return Object.assign({url:D.split("?")[0]||"",query:L(T(N),F)},F&&F.parseFragmentIdentifier&&q?{fragmentIdentifier:v(q,F)}:{})},e.stringifyUrl=(N,F)=>{F=Object.assign({encode:!0,strict:!0,[u]:!0},F);const D=x(N.url).split("?")[0]||"",q=e.extract(N.url),z=e.parse(q,{sort:!1}),Z=Object.assign(z,N.query);let Q=e.stringify(Z,F);Q&&(Q=`?${Q}`);let Y=P(N.url);return N.fragmentIdentifier&&(Y=`#${F[u]?m(N.fragmentIdentifier,F):N.fragmentIdentifier}`),`${D}${Q}${Y}`},e.pick=(N,F,D)=>{D=Object.assign({parseFragmentIdentifier:!0,[u]:!1},D);const{url:q,query:z,fragmentIdentifier:Z}=e.parseUrl(N,D);return e.stringifyUrl({url:q,query:i(z,F),fragmentIdentifier:Z},D)},e.exclude=(N,F,D)=>{const q=Array.isArray(F)?z=>!F.includes(z):(z,Z)=>!F(z,Z);return e.pick(N,q,D)}})(qC)),qC}var TSe=PSe(),ZC={exports:{}},gj;function ISe(){return gj||(gj=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(p,d,m){this.fn=p,this.context=d,this.once=m||!1}function o(p,d,m,v,w){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new i(m,v||p,w),P=r?r+d:d;return p._events[P]?p._events[P].fn?p._events[P]=[p._events[P],x]:p._events[P].push(x):(p._events[P]=x,p._eventsCount++),p}function u(p,d){--p._eventsCount===0?p._events=new n:delete p._events[d]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],m,v;if(this._eventsCount===0)return d;for(v in m=this._events)t.call(m,v)&&d.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},a.prototype.listeners=function(d){var m=r?r+d:d,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var w=0,x=v.length,P=new Array(x);w<x;w++)P[w]=v[w].fn;return P},a.prototype.listenerCount=function(d){var m=r?r+d:d,v=this._events[m];return v?v.fn?1:v.length:0},a.prototype.emit=function(d,m,v,w,x,P){var T=r?r+d:d;if(!this._events[T])return!1;var O=this._events[T],L=arguments.length,N,F;if(O.fn){switch(O.once&&this.removeListener(d,O.fn,void 0,!0),L){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,m),!0;case 3:return O.fn.call(O.context,m,v),!0;case 4:return O.fn.call(O.context,m,v,w),!0;case 5:return O.fn.call(O.context,m,v,w,x),!0;case 6:return O.fn.call(O.context,m,v,w,x,P),!0}for(F=1,N=new Array(L-1);F<L;F++)N[F-1]=arguments[F];O.fn.apply(O.context,N)}else{var D=O.length,q;for(F=0;F<D;F++)switch(O[F].once&&this.removeListener(d,O[F].fn,void 0,!0),L){case 1:O[F].fn.call(O[F].context);break;case 2:O[F].fn.call(O[F].context,m);break;case 3:O[F].fn.call(O[F].context,m,v);break;case 4:O[F].fn.call(O[F].context,m,v,w);break;default:if(!N)for(q=1,N=new Array(L-1);q<L;q++)N[q-1]=arguments[q];O[F].fn.apply(O[F].context,N)}}return!0},a.prototype.on=function(d,m,v){return o(this,d,m,v,!1)},a.prototype.once=function(d,m,v){return o(this,d,m,v,!0)},a.prototype.removeListener=function(d,m,v,w){var x=r?r+d:d;if(!this._events[x])return this;if(!m)return u(this,x),this;var P=this._events[x];if(P.fn)P.fn===m&&(!w||P.once)&&(!v||P.context===v)&&u(this,x);else{for(var T=0,O=[],L=P.length;T<L;T++)(P[T].fn!==m||w&&!P[T].once||v&&P[T].context!==v)&&O.push(P[T]);O.length?this._events[x]=O.length===1?O[0]:O:u(this,x)}return this},a.prototype.removeAllListeners=function(d){var m;return d?(m=r?r+d:d,this._events[m]&&u(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(ZC)),ZC.exports}var MSe=ISe();const RSe=Us(MSe),yj=new RSe;var GG=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},HG=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},KC,WG=function(){var e=lc(),t=qg(),r=Rf(),n=ud(),i=M.useCallback(function(u){u.startsWith("http")?window.location.href=u:n(u)},[n]),o=M.useCallback(function(u){return GG(void 0,void 0,void 0,function(){var a,p,d,m,v;return HG(this,function(w){switch(w.label){case 0:if(!e)return[2,OSe()];w.label=1;case 1:return w.trys.push([1,3,,8]),[4,e.checkError(u)];case 2:return w.sent(),[2,!1];case 3:if(a=w.sent(),p=(v=a?.logoutUser)!==null&&v!==void 0?v:!0,KC)return[2,!0];if(KC=setTimeout(function(){KC=void 0},0),d=a&&a.redirectTo!=null?a.redirectTo:u&&u.redirectTo?u.redirectTo:void 0,m=!(a&&a.message===!1||u&&u.message===!1||d?.startsWith("http")),!m)return[3,7];w.label=4;case 4:return w.trys.push([4,6,,7]),[4,e.checkAuth({})];case 5:return w.sent(),p?r(vj(a,"ra.notification.logged_out"),{type:"error"}):r(vj(a,"ra.notification.not_authorized"),{type:"error"}),[3,7];case 6:return w.sent(),[3,7];case 7:return p?t({},d):d&&i(d),[2,!0];case 8:return[2]}})})},[e,t,r,i]);return o},OSe=function(){return GG(void 0,void 0,void 0,function(){return HG(this,function(e){return[2,!1]})})},vj=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},kSe=function(e){var t=e.data,r=e.queryClient,n=e.staleTime,i=n===void 0?1e3:n,o=Date.now()+i;Object.keys(t).forEach(function(u){t[u].forEach(function(p){!p||p.id==null||r.setQueryData([u,"getOne",{id:String(p.id)}],p,{updatedAt:o})});var a=t[u].map(function(p){return String(p.id)});r.setQueryData([u,"getMany",{ids:a}],t[u],{updatedAt:o})})},LSe=["getList","getMany","getManyReference"],nR=function(){var e=M.useContext(rR)||tR,t=If(),r=WG(),n=M.useMemo(function(){return new Proxy(e,{get:function(i,o){if(!(typeof o=="symbol"||o==="then"))return o==="supportAbortSignal"?e.supportAbortSignal:function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];var p=o.toString();if(typeof e[p]!="function")throw new Error("Unknown dataProvider function: ".concat(p));try{return e[p].apply(e,u).then(function(d){var m;return!((m=d?.meta)===null||m===void 0)&&m.prefetched&&kSe({data:d?.meta.prefetched,queryClient:t}),d}).catch(function(d){return r(d).then(function(m){if(m)return{data:LSe.includes(p)?[]:{}};throw d})})}catch{throw new Error("The dataProvider threw an error. It should return a rejected Promise instead.")}}}})},[e,r,t]);return n},DSe=function(){var e=If(),t=Be.useRef(!1),r=Be.useRef(e.isFetching()>0),n=Be.useRef(e.isMutating()>0),i=Be.useState(r.current||n.current),o=i[0],u=i[1];return Be.useEffect(function(){t.current=!0;var a=e.getQueryCache().subscribe(Uo.batchCalls(function(){t.current&&(r.current=e.isFetching()>0,u(r.current||n.current))})),p=e.getMutationCache().subscribe(Uo.batchCalls(function(){t.current&&(n.current=e.isMutating()>0,u(r.current||n.current))}));return function(){t.current=!1,a(),p()}},[e]),o},NSe=function(){var e=If();return M.useCallback(function(){e.invalidateQueries()},[e])},LT=function(){return LT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},LT.apply(this,arguments)},FSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ZG=function(e,t,r){var n=t.id,i=t.meta;r===void 0&&(r={});var o=nR(),u=r.onError,a=u===void 0?XC:u,p=r.onSuccess,d=p===void 0?XC:p,m=r.onSettled,v=m===void 0?XC:m,w=r.enabled,x=FSe(r,["onError","onSuccess","onSettled","enabled"]),P=Co(d),T=Co(a),O=Co(v),L=Rp(LT({queryKey:[e,"getOne",{id:String(n),meta:i}],queryFn:function(N){return n==null?Promise.reject("useGetOne: id cannot be null"):o.getOne(e,{id:n,meta:i,signal:o.supportAbortSignal===!0?N.signal:void 0}).then(function(F){var D=F.data;return D})},enabled:w??n!=null},x));return M.useEffect(function(){L.data===void 0||L.error!=null||L.isFetching||P(L.data)},[P,L.data,L.error,L.isFetching]),M.useEffect(function(){L.error==null||L.isFetching||T(L.error)},[T,L.error,L.isFetching]),M.useEffect(function(){L.status==="pending"||L.isFetching||O(L.data,L.error)},[O,L.data,L.error,L.status,L.isFetching]),L},XC=function(){},YC,bj;function BSe(){if(bj)return YC;bj=1;var e=Tg(),t=Ux(),r=$u(),n=e?e.isConcatSpreadable:void 0;function i(o){return r(o)||t(o)||!!(n&&o&&o[n])}return YC=i,YC}var JC,_j;function jSe(){if(_j)return JC;_j=1;var e=qI(),t=BSe();function r(n,i,o,u,a){var p=-1,d=n.length;for(o||(o=t),a||(a=[]);++p<d;){var m=n[p];i>0&&o(m)?i>1?r(m,i-1,o,u,a):e(a,m):u||(a[a.length]=m)}return a}return JC=r,JC}var DT=function(){return DT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},DT.apply(this,arguments)},zSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KG=function(e){var t=e.record,r=e.redirect,n=r===void 0?"list":r,i=e.mutationMode,o=e.mutationOptions,u=o===void 0?{}:o,a=e.successMessage,p=u.meta,d=zSe(u,["meta"]),m=lu(e),v=Rf(),w=QG(m),x=H0(),P=Ti(),T=wCe(m,void 0,{onSuccess:function(){v(a??"resources.".concat(m,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:P("ra.notification.deleted",{smart_count:1})},undoable:i==="undoable"}),t&&w([t.id]),x(n,m)},onError:function(F){v(typeof F=="string"?F:F?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof F=="string"?F:F?.message?F.message:void 0}})}}),O=T[0],L=T[1].isPending,N=M.useCallback(function(){if(!t)throw new Error("The record cannot be deleted because no record has been passed");O(m,{id:t.id,previousData:t,meta:p},DT({mutationMode:i},d))},[O,p,i,d,t,m]);return M.useMemo(function(){return{isPending:L,isLoading:L,handleDelete:N}},[L,N])},XG=M.createContext({}),$Se=function(e){var t=e.children,r=e.value;return M.createElement(XG.Provider,{value:r},t)},QC,xj;function USe(){if(xj)return QC;xj=1;var e=Jx(),t=EG(),r=L0();function n(i,o,u){for(var a=-1,p=o.length,d={};++a<p;){var m=o[a],v=e(i,m);u(v,m)&&t(d,r(m,i),v)}return d}return QC=n,QC}var eA,wj;function qSe(){if(wj)return eA;wj=1;var e=USe(),t=iq();function r(n,i){return e(n,i,function(o,u){return t(n,u)})}return eA=r,eA}var tA,Sj;function VSe(){if(Sj)return tA;Sj=1;var e=jSe();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return tA=t,tA}var rA,Ej;function YG(){if(Ej)return rA;Ej=1;var e=VSe(),t=kG(),r=LG();function n(i){return r(t(i,void 0,e),i+"")}return rA=n,rA}var nA,Cj;function GSe(){if(Cj)return nA;Cj=1;var e=qSe(),t=YG(),r=t(function(n,i){return n==null?{}:e(n,i)});return nA=r,nA}var HSe=GSe();const WSe=Us(HSe);var ZSe=function(e){var t=M.useMemo(function(){return WSe(e,["save","saving","mutationMode","registerMutationMiddleware","unregisterMutationMiddleware"])},[e.save,e.saving,e.mutationMode,e.registerMutationMiddleware,e.unregisterMutationMiddleware]);return t},iR=function(e){return M.useContext(XG)},Zy=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},KSe=function(){var e=M.useRef([]),t=M.useCallback(function(o){e.current.push(o)},[]),r=M.useCallback(function(o){e.current=e.current.filter(function(u){return u!==o})},[]),n=M.useCallback(function(o){var u=Zy([],e.current,!0);return function(){for(var a=[],p=0;p<arguments.length;p++)a[p]=arguments[p];var d=u.length-1,m=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return d--,d>=0?u[d].apply(u,Zy(Zy([],v,!1),[m],!1)):o.apply(void 0,v)};return u.length>0?u[d].apply(u,Zy(Zy([],a,!1),[m],!1)):o.apply(void 0,a)}},[]),i=M.useMemo(function(){return{registerMutationMiddleware:t,getMutateWithMiddlewares:n,unregisterMutationMiddleware:r}},[t,n,r]);return i},Tv=function(){return Tv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tv.apply(this,arguments)},Aj=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},Pj=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Tj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},XSe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.mutationMode,o=i===void 0?"undoable":i,u=e.mutationOptions,a=u===void 0?{}:u,p=e.queryOptions,d=p===void 0?{}:p,m=e.redirect,v=m===void 0?YSe:m,w=e.transform,x=lu(e);if(!x)throw new Error("useEditController requires a non-empty resource prop or context");var P=X0({enabled:!r}).isPending,T=BH({action:"edit",resource:x,enabled:!r&&!P}).isPending,O=Ug(x),L=Ti(),N=Rf(),F=H0(),D=pG().id;if(!D&&!n)throw new Error("useEditController requires an id prop or a route with an /:id? parameter.");var q=n??D,z=d.meta,Z=Tj(d,["meta"]),Q=a.meta,Y=a.onSuccess,se=a.onError,W=Tj(a,["meta","onSuccess","onError"]);(z||Q)&&JSON.stringify(z)!==JSON.stringify(Q)&&v===!1&&console.warn("When not redirecting after editing, query meta and mutation meta should be the same, or you will have data update issues.");var G=KSe(),ae=G.registerMutationMiddleware,le=G.getMutateWithMiddlewares,ue=G.unregisterMutationMiddleware,ye=ZG(x,{id:q,meta:z},Tv({enabled:!P&&!T||r,onError:function(){N("ra.notification.item_doesnt_exist",{type:"error"}),F("list",x)},refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:!1},Z)),Se=ye.data,ge=ye.error,xe=ye.isLoading,Fe=ye.isFetching,He=ye.isPaused,pe=ye.isPending,_e=ye.isPlaceholderData,Ce=ye.refetch;if(Se&&Se.id&&Se.id!=q)throw new Error("useEditController: Fetched record's id attribute (".concat(Se.id,") must match the requested 'id' (").concat(q,")"));var ke=$g(),$e=O(Se),ht=L("resources.".concat(x,".page.edit"),{id:q,record:Se,recordRepresentation:typeof $e=="string"?$e:"",_:L("ra.page.edit",{name:ke(x,1),id:q,record:Se,recordRepresentation:typeof $e=="string"?$e:""})}),At={id:q,previousData:Se},mt=xCe(x,At,Tv(Tv({onSuccess:function(Pt,ut,Le){return Aj(void 0,void 0,void 0,function(){return Pj(this,function(sr){return Y?[2,Y(Pt,ut,Le)]:(N("resources.".concat(x,".notifications.updated"),{type:"info",messageArgs:{smart_count:1,_:L("ra.notification.updated",{smart_count:1})},undoable:o==="undoable"}),F(v,x,Pt.id,Pt),[2])})})},onError:function(Pt,ut,Le){var sr;if(se)return se(Pt,ut,Le);var lr=(sr=Pt?.body)===null||sr===void 0?void 0:sr.errors,dr=!!lr&&Object.keys(lr).length>0;(!dr||o!=="pessimistic")&&N(typeof Pt=="string"?Pt:Pt.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof Pt=="string"?Pt:Pt instanceof Error||typeof Pt=="object"&&Pt!==null&&Pt.hasOwnProperty("message")?Pt.message:void 0}})}},W),{mutationMode:o,returnPromise:o==="pessimistic",getMutateWithMiddlewares:le})),rt=mt[0],Lt=mt[1].isPending,Tt=M.useCallback(function(Pt,ut){var Le=ut===void 0?{}:ut,sr=Le.onSuccess,lr=Le.onError,dr=Le.transform,Yt=Le.meta;return Promise.resolve(dr?dr(Pt,{previousData:At.previousData}):w?w(Pt,{previousData:At.previousData}):Pt).then(function(Ve){return Aj(void 0,void 0,void 0,function(){var tt,lt;return Pj(this,function(Mt){switch(Mt.label){case 0:return Mt.trys.push([0,2,,3]),[4,rt(x,{id:q,data:Ve,meta:Yt??Q,previousData:Se},{onError:lr,onSuccess:sr})];case 1:return Mt.sent(),[3,3];case 2:return tt=Mt.sent(),((lt=tt.body)===null||lt===void 0?void 0:lt.errors)!=null?[2,tt.body.errors]:[3,3];case 3:return[2]}})})})},[q,Q,Se,x,w,rt,At.previousData]);return{defaultTitle:ht,error:ge,isFetching:Fe,isLoading:xe,isPaused:He,isPending:pe,isPlaceholderData:_e,mutationMode:o,record:Se,redirect:v,refetch:Ce,registerMutationMiddleware:ae,resource:x,save:Tt,saving:Lt,unregisterMutationMiddleware:ue}},YSe="list",JG=function(e){var t=e.value,r=e.children;return t?M.createElement(eR,{value:t},r):r},aR=M.createContext(null);aR.displayName="EditContext";var JSe=function(e){var t=e.children,r=e.value;return M.createElement(aR.Provider,{value:r},M.createElement($Se,{value:ZSe(r)},M.createElement(eR,{value:r&&r.record},t)))},QSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},eEe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,o=QSe(e,["children","loading","offline","render"]),u=XSe(o),a=FH({resource:u.resource,action:"edit"});if(!i&&!t)throw new Error("<EditBase> requires either a 'render' prop or 'children' prop");var p=u.isPaused,d=u.isPending,m=a&&!o.disableAuthentication&&r!==!1&&r!==void 0,v=p&&d&&n!==!1&&n!==void 0;return M.createElement(IH,{value:o.resource},M.createElement(JSe,{value:u},m?r:v?n:i?i(u):t))},tEe=function(){var e=M.useContext(aR);if(!e)throw new Error("useEditContext must be used inside an EditContextProvider");return e},xm=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},rEe=function(e){var t=e.resource,r=t===void 0?"":t,n=e.disableSyncWithStore,i=n===void 0?!1:n,o="".concat(r,".selectedIds"),u=M.useState(iA),a=u[0],p=u[1],d=Op(o,iA),m=d[0],v=d[1],w=uAe(o),x=i?a:m,P=i?p:v,T=M.useCallback(function(){i?p(iA):w()},[i,w]),O=M.useMemo(function(){return{select:function(L){L&&P(xm([],L,!0))},unselect:function(L){!L||L.length===0||P(function(N){return Array.isArray(N)?N.filter(function(F){return!L.includes(F)}):[]})},toggle:function(L){typeof L>"u"||P(function(N){if(!Array.isArray(N))return xm([],N,!0);var F=N.indexOf(L);return F>-1?xm(xm([],N.slice(0,F),!0),N.slice(F+1),!0):xm(xm([],N,!0),[L],!1)})},clearSelection:function(){T()}}},[P,T]);return[x,O]},iA=[];function nEe(e,t){e===void 0&&(e=0),t===void 0&&(t="");var r=M.useState(!1),n=r[0],i=r[1];return M.useEffect(function(){i(!1);var o=setTimeout(function(){i(!0)},e);return function(){clearTimeout(o)}},[t,e,i]),n}var aA,Ij;function iEe(){if(Ij)return aA;Ij=1;var e=DG(),t=Rg(),r=NG(),n=kg(),i=Object.prototype,o=i.hasOwnProperty,u=e(function(a,p){a=Object(a);var d=-1,m=p.length,v=m>2?p[2]:void 0;for(v&&r(p[0],p[1],v)&&(m=1);++d<m;)for(var w=p[d],x=n(w),P=-1,T=x.length;++P<T;){var O=x[P],L=a[O];(L===void 0||t(L,i[O])&&!o.call(a,O))&&(a[O]=w[O])}return a});return aA=u,aA}var aEe=iEe();const oEe=Us(aEe);var QG=function(e){var t=rEe(e?{resource:e}:{disableSyncWithStore:!0}),r=t[1].unselect;return M.useCallback(function(n){r(n)},[r])},sEe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lEe=function(e){e.cellClassName,e.className,e.emptyText,e.fullWidth,e.headerClassName,e.label,e.linkType,e.link,e.locale,e.record,e.refetch,e.resource,e.sortable,e.sortBy,e.sortByOrder,e.source,e.textAlign,e.translateChoice;var t=sEe(e,["cellClassName","className","emptyText","fullWidth","headerClassName","label","linkType","link","locale","record","refetch","resource","sortable","sortBy","sortByOrder","source","textAlign","translateChoice"]);return t},W0=e=>e.type==="checkbox",rp=e=>e instanceof Date,Nl=e=>e==null;const eH=e=>typeof e=="object";var Vo=e=>!Nl(e)&&!Array.isArray(e)&&eH(e)&&!rp(e),tH=e=>Vo(e)&&e.target?W0(e.target)?e.target.checked:e.target.value:e,uEe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rH=(e,t)=>e.has(uEe(t)),cEe=e=>{const t=e.constructor&&e.constructor.prototype;return Vo(t)&&t.hasOwnProperty("isPrototypeOf")},oR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ys(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(oR&&(e instanceof Blob||n))&&(r||Vo(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!cEe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=ys(e[i]));else return e;return t}var _2=e=>/^\w*$/.test(e),Bo=e=>e===void 0,sR=e=>Array.isArray(e)?e.filter(Boolean):[],lR=e=>sR(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ln=(e,t,r)=>{if(!t||!Vo(e))return r;const n=(_2(t)?[t]:lR(t)).reduce((i,o)=>Nl(i)?i:i[o],e);return Bo(n)||n===e?Bo(e[t])?r:e[t]:n},Ru=e=>typeof e=="boolean",Ia=(e,t,r)=>{let n=-1;const i=_2(t)?[t]:lR(t),o=i.length,u=o-1;for(;++n<o;){const a=i[n];let p=r;if(n!==u){const d=e[a];p=Vo(d)||Array.isArray(d)?d:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=p,e=e[a]}};const I1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ec={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Kf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},uR=Be.createContext(null);uR.displayName="HookFormContext";const Z0=()=>Be.useContext(uR),fEe=e=>{const{children:t,...r}=e;return Be.createElement(uR.Provider,{value:r},t)};var nH=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const u=o;return t._proxyFormState[u]!==Ec.all&&(t._proxyFormState[u]=!n||Ec.all),r&&(r[u]=!0),e[u]}});return i};const cR=typeof window<"u"?Be.useLayoutEffect:Be.useEffect;function x2(e){const t=Z0(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[u,a]=Be.useState(r._formState),p=Be.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return cR(()=>r._subscribe({name:i,formState:p.current,exact:o,callback:d=>{!n&&a({...r._formState,...d})}}),[i,n,o]),Be.useEffect(()=>{p.current.isValid&&r._setValid(!0)},[r]),Be.useMemo(()=>nH(u,r,p.current,!1),[u,r])}var gf=e=>typeof e=="string",iH=(e,t,r,n,i)=>gf(e)?(n&&t.watch.add(e),ln(r,e,i)):Array.isArray(e)?e.map(o=>(n&&t.watch.add(o),ln(r,o))):(n&&(t.watchAll=!0),r),NT=e=>Nl(e)||!eH(e);function nh(e,t,r=new WeakSet){if(NT(e)||NT(t))return e===t;if(rp(e)&&rp(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const o of n){const u=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const a=t[o];if(rp(u)&&rp(a)||Vo(u)&&Vo(a)||Array.isArray(u)&&Array.isArray(a)?!nh(u,a,r):u!==a)return!1}}return!0}function hEe(e){const t=Z0(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:u,compute:a}=e||{},p=Be.useRef(i),d=Be.useRef(a),m=Be.useRef(void 0);d.current=a;const v=Be.useMemo(()=>r._getWatch(n,p.current),[r,n]),[w,x]=Be.useState(d.current?d.current(v):v);return cR(()=>r._subscribe({name:n,formState:{values:!0},exact:u,callback:P=>{if(!o){const T=iH(n,r._names,P.values||r._formValues,!1,p.current);if(d.current){const O=d.current(T);nh(O,m.current)||(x(O),m.current=O)}else x(T)}}}),[r,o,n,u]),Be.useEffect(()=>r._removeUnmounted()),w}function dEe(e){const t=Z0(),{name:r,disabled:n,control:i=t.control,shouldUnregister:o,defaultValue:u}=e,a=rH(i._names.array,r),p=Be.useMemo(()=>ln(i._formValues,r,ln(i._defaultValues,r,u)),[i,r,u]),d=hEe({control:i,name:r,defaultValue:p,exact:!0}),m=x2({control:i,name:r,exact:!0}),v=Be.useRef(e),w=Be.useRef(i.register(r,{...e.rules,value:d,...Ru(e.disabled)?{disabled:e.disabled}:{}}));v.current=e;const x=Be.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ln(m.errors,r)},isDirty:{enumerable:!0,get:()=>!!ln(m.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ln(m.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ln(m.validatingFields,r)},error:{enumerable:!0,get:()=>ln(m.errors,r)}}),[m,r]),P=Be.useCallback(N=>w.current.onChange({target:{value:tH(N),name:r},type:I1.CHANGE}),[r]),T=Be.useCallback(()=>w.current.onBlur({target:{value:ln(i._formValues,r),name:r},type:I1.BLUR}),[r,i._formValues]),O=Be.useCallback(N=>{const F=ln(i._fields,r);F&&N&&(F._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:D=>N.setCustomValidity(D),reportValidity:()=>N.reportValidity()})},[i._fields,r]),L=Be.useMemo(()=>({name:r,value:d,...Ru(n)||m.disabled?{disabled:m.disabled||n}:{},onChange:P,onBlur:T,ref:O}),[r,n,m.disabled,P,T,O,d]);return Be.useEffect(()=>{const N=i._options.shouldUnregister||o;i.register(r,{...v.current.rules,...Ru(v.current.disabled)?{disabled:v.current.disabled}:{}});const F=(D,q)=>{const z=ln(i._fields,D);z&&z._f&&(z._f.mount=q)};if(F(r,!0),N){const D=ys(ln(i._options.defaultValues,r));Ia(i._defaultValues,r,D),Bo(ln(i._formValues,r))&&Ia(i._formValues,r,D)}return!a&&i.register(r),()=>{(a?N&&!i._state.action:N)?i.unregister(r):F(r,!1)}},[r,i,a,o]),Be.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Be.useMemo(()=>({field:L,formState:m,fieldState:x}),[L,m,x])}var pEe=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},Iv=e=>Array.isArray(e)?e:[e],Mj=()=>{let e=[];return{get observers(){return e},next:i=>{for(const o of e)o.next&&o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}},Yl=e=>Vo(e)&&!Object.keys(e).length,fR=e=>e.type==="file",Cc=e=>typeof e=="function",M1=e=>{if(!oR)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},aH=e=>e.type==="select-multiple",hR=e=>e.type==="radio",mEe=e=>hR(e)||W0(e),oA=e=>M1(e)&&e.isConnected;function gEe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Bo(e)?n++:e[t[n++]];return e}function yEe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Bo(e[t]))return!1;return!0}function rs(e,t){const r=Array.isArray(t)?t:_2(t)?[t]:lR(t),n=r.length===1?e:gEe(e,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(Vo(n)&&Yl(n)||Array.isArray(n)&&yEe(n))&&rs(e,r.slice(0,-1)),e}var oH=e=>{for(const t in e)if(Cc(e[t]))return!0;return!1};function R1(e,t={}){const r=Array.isArray(e);if(Vo(e)||r)for(const n in e)Array.isArray(e[n])||Vo(e[n])&&!oH(e[n])?(t[n]=Array.isArray(e[n])?[]:{},R1(e[n],t[n])):Nl(e[n])||(t[n]=!0);return t}function sH(e,t,r){const n=Array.isArray(e);if(Vo(e)||n)for(const i in e)Array.isArray(e[i])||Vo(e[i])&&!oH(e[i])?Bo(t)||NT(r[i])?r[i]=Array.isArray(e[i])?R1(e[i],[]):{...R1(e[i])}:sH(e[i],Nl(t)?{}:t[i],r[i]):r[i]=!nh(e[i],t[i]);return r}var Ky=(e,t)=>sH(e,t,R1(t));const Rj={value:!1,isValid:!1},Oj={value:!0,isValid:!0};var lH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Bo(e[0].attributes.value)?Bo(e[0].value)||e[0].value===""?Oj:{value:e[0].value,isValid:!0}:Oj:Rj}return Rj},uH=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Bo(e)?e:t?e===""?NaN:e&&+e:r&&gf(e)?new Date(e):n?n(e):e;const kj={isValid:!1,value:null};var cH=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,kj):kj;function Lj(e){const t=e.ref;return fR(t)?t.files:hR(t)?cH(e.refs).value:aH(t)?[...t.selectedOptions].map(({value:r})=>r):W0(t)?lH(e.refs).value:uH(Bo(t.value)?e.ref.value:t.value,e)}var vEe=(e,t,r,n)=>{const i={};for(const o of e){const u=ln(t,o);u&&Ia(i,o,u._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},O1=e=>e instanceof RegExp,Xy=e=>Bo(e)?e:O1(e)?e.source:Vo(e)?O1(e.value)?e.value.source:e.value:e,Dj=e=>({isOnSubmit:!e||e===Ec.onSubmit,isOnBlur:e===Ec.onBlur,isOnChange:e===Ec.onChange,isOnAll:e===Ec.all,isOnTouch:e===Ec.onTouched});const Nj="AsyncFunction";var bEe=e=>!!e&&!!e.validate&&!!(Cc(e.validate)&&e.validate.constructor.name===Nj||Vo(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Nj)),_Ee=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Fj=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Mv=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const o=ln(e,i);if(o){const{_f:u,...a}=o;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(Mv(a,t))break}else if(Vo(a)&&Mv(a,t))break}}};function Bj(e,t,r){const n=ln(e,r);if(n||_2(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),u=ln(t,o),a=ln(e,o);if(u&&!Array.isArray(u)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};i.pop()}return{name:r}}var xEe=(e,t,r,n)=>{r(e);const{name:i,...o}=e;return Yl(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(u=>t[u]===(!n||Ec.all))},wEe=(e,t,r)=>!e||!t||e===t||Iv(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),SEe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,EEe=(e,t)=>!sR(ln(e,t)).length&&rs(e,t),CEe=(e,t,r)=>{const n=Iv(ln(e,r));return Ia(n,"root",t[r]),Ia(e,r,n),e},F_=e=>gf(e);function jj(e,t,r="validate"){if(F_(e)||Array.isArray(e)&&e.every(F_)||Ru(e)&&!e)return{type:r,message:F_(e)?e:"",ref:t}}var wm=e=>Vo(e)&&!O1(e)?e:{value:e,message:""},zj=async(e,t,r,n,i,o)=>{const{ref:u,refs:a,required:p,maxLength:d,minLength:m,min:v,max:w,pattern:x,validate:P,name:T,valueAsNumber:O,mount:L}=e._f,N=ln(r,T);if(!L||t.has(T))return{};const F=a?a[0]:u,D=G=>{i&&F.reportValidity&&(F.setCustomValidity(Ru(G)?"":G||""),F.reportValidity())},q={},z=hR(u),Z=W0(u),Q=z||Z,Y=(O||fR(u))&&Bo(u.value)&&Bo(N)||M1(u)&&u.value===""||N===""||Array.isArray(N)&&!N.length,se=pEe.bind(null,T,n,q),W=(G,ae,le,ue=Kf.maxLength,ye=Kf.minLength)=>{const Se=G?ae:le;q[T]={type:G?ue:ye,message:Se,ref:u,...se(G?ue:ye,Se)}};if(o?!Array.isArray(N)||!N.length:p&&(!Q&&(Y||Nl(N))||Ru(N)&&!N||Z&&!lH(a).isValid||z&&!cH(a).isValid)){const{value:G,message:ae}=F_(p)?{value:!!p,message:p}:wm(p);if(G&&(q[T]={type:Kf.required,message:ae,ref:F,...se(Kf.required,ae)},!n))return D(ae),q}if(!Y&&(!Nl(v)||!Nl(w))){let G,ae;const le=wm(w),ue=wm(v);if(!Nl(N)&&!isNaN(N)){const ye=u.valueAsNumber||N&&+N;Nl(le.value)||(G=ye>le.value),Nl(ue.value)||(ae=ye<ue.value)}else{const ye=u.valueAsDate||new Date(N),Se=Fe=>new Date(new Date().toDateString()+" "+Fe),ge=u.type=="time",xe=u.type=="week";gf(le.value)&&N&&(G=ge?Se(N)>Se(le.value):xe?N>le.value:ye>new Date(le.value)),gf(ue.value)&&N&&(ae=ge?Se(N)<Se(ue.value):xe?N<ue.value:ye<new Date(ue.value))}if((G||ae)&&(W(!!G,le.message,ue.message,Kf.max,Kf.min),!n))return D(q[T].message),q}if((d||m)&&!Y&&(gf(N)||o&&Array.isArray(N))){const G=wm(d),ae=wm(m),le=!Nl(G.value)&&N.length>+G.value,ue=!Nl(ae.value)&&N.length<+ae.value;if((le||ue)&&(W(le,G.message,ae.message),!n))return D(q[T].message),q}if(x&&!Y&&gf(N)){const{value:G,message:ae}=wm(x);if(O1(G)&&!N.match(G)&&(q[T]={type:Kf.pattern,message:ae,ref:u,...se(Kf.pattern,ae)},!n))return D(ae),q}if(P){if(Cc(P)){const G=await P(N,r),ae=jj(G,F);if(ae&&(q[T]={...ae,...se(Kf.validate,ae.message)},!n))return D(ae.message),q}else if(Vo(P)){let G={};for(const ae in P){if(!Yl(G)&&!n)break;const le=jj(await P[ae](N,r),F,ae);le&&(G={...le,...se(ae,le.message)},D(le.message),n&&(q[T]=G))}if(!Yl(G)&&(q[T]={ref:F,...G},!n))return q}}return D(!0),q};const AEe={mode:Ec.onSubmit,reValidateMode:Ec.onChange,shouldFocusError:!0};function PEe(e={}){let t={...AEe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=Vo(t.defaultValues)||Vo(t.values)?ys(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:ys(i),u={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,d=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...m};const w={array:Mj(),state:Mj()},x=t.criteriaMode===Ec.all,P=Ve=>tt=>{clearTimeout(d),d=setTimeout(Ve,tt)},T=async Ve=>{if(!t.disabled&&(m.isValid||v.isValid||Ve)){const tt=t.resolver?Yl((await Z()).errors):await Y(n,!0);tt!==r.isValid&&w.state.next({isValid:tt})}},O=(Ve,tt)=>{!t.disabled&&(m.isValidating||m.validatingFields||v.isValidating||v.validatingFields)&&((Ve||Array.from(a.mount)).forEach(lt=>{lt&&(tt?Ia(r.validatingFields,lt,tt):rs(r.validatingFields,lt))}),w.state.next({validatingFields:r.validatingFields,isValidating:!Yl(r.validatingFields)}))},L=(Ve,tt=[],lt,Mt,Kt=!0,Ut=!0)=>{if(Mt&&lt&&!t.disabled){if(u.action=!0,Ut&&Array.isArray(ln(n,Ve))){const ar=lt(ln(n,Ve),Mt.argA,Mt.argB);Kt&&Ia(n,Ve,ar)}if(Ut&&Array.isArray(ln(r.errors,Ve))){const ar=lt(ln(r.errors,Ve),Mt.argA,Mt.argB);Kt&&Ia(r.errors,Ve,ar),EEe(r.errors,Ve)}if((m.touchedFields||v.touchedFields)&&Ut&&Array.isArray(ln(r.touchedFields,Ve))){const ar=lt(ln(r.touchedFields,Ve),Mt.argA,Mt.argB);Kt&&Ia(r.touchedFields,Ve,ar)}(m.dirtyFields||v.dirtyFields)&&(r.dirtyFields=Ky(i,o)),w.state.next({name:Ve,isDirty:W(Ve,tt),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ia(o,Ve,tt)},N=(Ve,tt)=>{Ia(r.errors,Ve,tt),w.state.next({errors:r.errors})},F=Ve=>{r.errors=Ve,w.state.next({errors:r.errors,isValid:!1})},D=(Ve,tt,lt,Mt)=>{const Kt=ln(n,Ve);if(Kt){const Ut=ln(o,Ve,Bo(lt)?ln(i,Ve):lt);Bo(Ut)||Mt&&Mt.defaultChecked||tt?Ia(o,Ve,tt?Ut:Lj(Kt._f)):le(Ve,Ut),u.mount&&T()}},q=(Ve,tt,lt,Mt,Kt)=>{let Ut=!1,ar=!1;const gr={name:Ve};if(!t.disabled){if(!lt||Mt){(m.isDirty||v.isDirty)&&(ar=r.isDirty,r.isDirty=gr.isDirty=W(),Ut=ar!==gr.isDirty);const yr=nh(ln(i,Ve),tt);ar=!!ln(r.dirtyFields,Ve),yr?rs(r.dirtyFields,Ve):Ia(r.dirtyFields,Ve,!0),gr.dirtyFields=r.dirtyFields,Ut=Ut||(m.dirtyFields||v.dirtyFields)&&ar!==!yr}if(lt){const yr=ln(r.touchedFields,Ve);yr||(Ia(r.touchedFields,Ve,lt),gr.touchedFields=r.touchedFields,Ut=Ut||(m.touchedFields||v.touchedFields)&&yr!==lt)}Ut&&Kt&&w.state.next(gr)}return Ut?gr:{}},z=(Ve,tt,lt,Mt)=>{const Kt=ln(r.errors,Ve),Ut=(m.isValid||v.isValid)&&Ru(tt)&&r.isValid!==tt;if(t.delayError&&lt?(p=P(()=>N(Ve,lt)),p(t.delayError)):(clearTimeout(d),p=null,lt?Ia(r.errors,Ve,lt):rs(r.errors,Ve)),(lt?!nh(Kt,lt):Kt)||!Yl(Mt)||Ut){const ar={...Mt,...Ut&&Ru(tt)?{isValid:tt}:{},errors:r.errors,name:Ve};r={...r,...ar},w.state.next(ar)}},Z=async Ve=>{O(Ve,!0);const tt=await t.resolver(o,t.context,vEe(Ve||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return O(Ve),tt},Q=async Ve=>{const{errors:tt}=await Z(Ve);if(Ve)for(const lt of Ve){const Mt=ln(tt,lt);Mt?Ia(r.errors,lt,Mt):rs(r.errors,lt)}else r.errors=tt;return tt},Y=async(Ve,tt,lt={valid:!0})=>{for(const Mt in Ve){const Kt=Ve[Mt];if(Kt){const{_f:Ut,...ar}=Kt;if(Ut){const gr=a.array.has(Ut.name),yr=Kt._f&&bEe(Kt._f);yr&&m.validatingFields&&O([Mt],!0);const Ye=await zj(Kt,a.disabled,o,x,t.shouldUseNativeValidation&&!tt,gr);if(yr&&m.validatingFields&&O([Mt]),Ye[Ut.name]&&(lt.valid=!1,tt))break;!tt&&(ln(Ye,Ut.name)?gr?CEe(r.errors,Ye,Ut.name):Ia(r.errors,Ut.name,Ye[Ut.name]):rs(r.errors,Ut.name))}!Yl(ar)&&await Y(ar,tt,lt)}}return lt.valid},se=()=>{for(const Ve of a.unMount){const tt=ln(n,Ve);tt&&(tt._f.refs?tt._f.refs.every(lt=>!oA(lt)):!oA(tt._f.ref))&&ht(Ve)}a.unMount=new Set},W=(Ve,tt)=>!t.disabled&&(Ve&&tt&&Ia(o,Ve,tt),!nh(Fe(),i)),G=(Ve,tt,lt)=>iH(Ve,a,{...u.mount?o:Bo(tt)?i:gf(Ve)?{[Ve]:tt}:tt},lt,tt),ae=Ve=>sR(ln(u.mount?o:i,Ve,t.shouldUnregister?ln(i,Ve,[]):[])),le=(Ve,tt,lt={})=>{const Mt=ln(n,Ve);let Kt=tt;if(Mt){const Ut=Mt._f;Ut&&(!Ut.disabled&&Ia(o,Ve,uH(tt,Ut)),Kt=M1(Ut.ref)&&Nl(tt)?"":tt,aH(Ut.ref)?[...Ut.ref.options].forEach(ar=>ar.selected=Kt.includes(ar.value)):Ut.refs?W0(Ut.ref)?Ut.refs.forEach(ar=>{(!ar.defaultChecked||!ar.disabled)&&(Array.isArray(Kt)?ar.checked=!!Kt.find(gr=>gr===ar.value):ar.checked=Kt===ar.value||!!Kt)}):Ut.refs.forEach(ar=>ar.checked=ar.value===Kt):fR(Ut.ref)?Ut.ref.value="":(Ut.ref.value=Kt,Ut.ref.type||w.state.next({name:Ve,values:ys(o)})))}(lt.shouldDirty||lt.shouldTouch)&&q(Ve,Kt,lt.shouldTouch,lt.shouldDirty,!0),lt.shouldValidate&&xe(Ve)},ue=(Ve,tt,lt)=>{for(const Mt in tt){if(!tt.hasOwnProperty(Mt))return;const Kt=tt[Mt],Ut=Ve+"."+Mt,ar=ln(n,Ut);(a.array.has(Ve)||Vo(Kt)||ar&&!ar._f)&&!rp(Kt)?ue(Ut,Kt,lt):le(Ut,Kt,lt)}},ye=(Ve,tt,lt={})=>{const Mt=ln(n,Ve),Kt=a.array.has(Ve),Ut=ys(tt);Ia(o,Ve,Ut),Kt?(w.array.next({name:Ve,values:ys(o)}),(m.isDirty||m.dirtyFields||v.isDirty||v.dirtyFields)&&lt.shouldDirty&&w.state.next({name:Ve,dirtyFields:Ky(i,o),isDirty:W(Ve,Ut)})):Mt&&!Mt._f&&!Nl(Ut)?ue(Ve,Ut,lt):le(Ve,Ut,lt),Fj(Ve,a)&&w.state.next({...r,name:Ve}),w.state.next({name:u.mount?Ve:void 0,values:ys(o)})},Se=async Ve=>{u.mount=!0;const tt=Ve.target;let lt=tt.name,Mt=!0;const Kt=ln(n,lt),Ut=yr=>{Mt=Number.isNaN(yr)||rp(yr)&&isNaN(yr.getTime())||nh(yr,ln(o,lt,yr))},ar=Dj(t.mode),gr=Dj(t.reValidateMode);if(Kt){let yr,Ye;const de=tt.type?Lj(Kt._f):tH(Ve),he=Ve.type===I1.BLUR||Ve.type===I1.FOCUS_OUT,Me=!_Ee(Kt._f)&&!t.resolver&&!ln(r.errors,lt)&&!Kt._f.deps||SEe(he,ln(r.touchedFields,lt),r.isSubmitted,gr,ar),Ue=Fj(lt,a,he);Ia(o,lt,de),he?(!tt||!tt.readOnly)&&(Kt._f.onBlur&&Kt._f.onBlur(Ve),p&&p(0)):Kt._f.onChange&&Kt._f.onChange(Ve);const Ke=q(lt,de,he),Qe=!Yl(Ke)||Ue;if(!he&&w.state.next({name:lt,type:Ve.type,values:ys(o)}),Me)return(m.isValid||v.isValid)&&(t.mode==="onBlur"?he&&T():he||T()),Qe&&w.state.next({name:lt,...Ue?{}:Ke});if(!he&&Ue&&w.state.next({...r}),t.resolver){const{errors:wt}=await Z([lt]);if(Ut(de),Mt){const nt=Bj(r.errors,n,lt),Ot=Bj(wt,n,nt.name||lt);yr=Ot.error,lt=Ot.name,Ye=Yl(wt)}}else O([lt],!0),yr=(await zj(Kt,a.disabled,o,x,t.shouldUseNativeValidation))[lt],O([lt]),Ut(de),Mt&&(yr?Ye=!1:(m.isValid||v.isValid)&&(Ye=await Y(n,!0)));Mt&&(Kt._f.deps&&xe(Kt._f.deps),z(lt,Ye,yr,Ke))}},ge=(Ve,tt)=>{if(ln(r.errors,tt)&&Ve.focus)return Ve.focus(),1},xe=async(Ve,tt={})=>{let lt,Mt;const Kt=Iv(Ve);if(t.resolver){const Ut=await Q(Bo(Ve)?Ve:Kt);lt=Yl(Ut),Mt=Ve?!Kt.some(ar=>ln(Ut,ar)):lt}else Ve?(Mt=(await Promise.all(Kt.map(async Ut=>{const ar=ln(n,Ut);return await Y(ar&&ar._f?{[Ut]:ar}:ar)}))).every(Boolean),!(!Mt&&!r.isValid)&&T()):Mt=lt=await Y(n);return w.state.next({...!gf(Ve)||(m.isValid||v.isValid)&&lt!==r.isValid?{}:{name:Ve},...t.resolver||!Ve?{isValid:lt}:{},errors:r.errors}),tt.shouldFocus&&!Mt&&Mv(n,ge,Ve?Kt:a.mount),Mt},Fe=Ve=>{const tt={...u.mount?o:i};return Bo(Ve)?tt:gf(Ve)?ln(tt,Ve):Ve.map(lt=>ln(tt,lt))},He=(Ve,tt)=>({invalid:!!ln((tt||r).errors,Ve),isDirty:!!ln((tt||r).dirtyFields,Ve),error:ln((tt||r).errors,Ve),isValidating:!!ln(r.validatingFields,Ve),isTouched:!!ln((tt||r).touchedFields,Ve)}),pe=Ve=>{Ve&&Iv(Ve).forEach(tt=>rs(r.errors,tt)),w.state.next({errors:Ve?r.errors:{}})},_e=(Ve,tt,lt)=>{const Mt=(ln(n,Ve,{_f:{}})._f||{}).ref,Kt=ln(r.errors,Ve)||{},{ref:Ut,message:ar,type:gr,...yr}=Kt;Ia(r.errors,Ve,{...yr,...tt,ref:Mt}),w.state.next({name:Ve,errors:r.errors,isValid:!1}),lt&&lt.shouldFocus&&Mt&&Mt.focus&&Mt.focus()},Ce=(Ve,tt)=>Cc(Ve)?w.state.subscribe({next:lt=>"values"in lt&&Ve(G(void 0,tt),lt)}):G(Ve,tt,!0),ke=Ve=>w.state.subscribe({next:tt=>{wEe(Ve.name,tt.name,Ve.exact)&&xEe(tt,Ve.formState||m,lr,Ve.reRenderRoot)&&Ve.callback({values:{...o},...r,...tt,defaultValues:i})}}).unsubscribe,$e=Ve=>(u.mount=!0,v={...v,...Ve.formState},ke({...Ve,formState:v})),ht=(Ve,tt={})=>{for(const lt of Ve?Iv(Ve):a.mount)a.mount.delete(lt),a.array.delete(lt),tt.keepValue||(rs(n,lt),rs(o,lt)),!tt.keepError&&rs(r.errors,lt),!tt.keepDirty&&rs(r.dirtyFields,lt),!tt.keepTouched&&rs(r.touchedFields,lt),!tt.keepIsValidating&&rs(r.validatingFields,lt),!t.shouldUnregister&&!tt.keepDefaultValue&&rs(i,lt);w.state.next({values:ys(o)}),w.state.next({...r,...tt.keepDirty?{isDirty:W()}:{}}),!tt.keepIsValid&&T()},At=({disabled:Ve,name:tt})=>{(Ru(Ve)&&u.mount||Ve||a.disabled.has(tt))&&(Ve?a.disabled.add(tt):a.disabled.delete(tt))},mt=(Ve,tt={})=>{let lt=ln(n,Ve);const Mt=Ru(tt.disabled)||Ru(t.disabled);return Ia(n,Ve,{...lt||{},_f:{...lt&&lt._f?lt._f:{ref:{name:Ve}},name:Ve,mount:!0,...tt}}),a.mount.add(Ve),lt?At({disabled:Ru(tt.disabled)?tt.disabled:t.disabled,name:Ve}):D(Ve,!0,tt.value),{...Mt?{disabled:tt.disabled||t.disabled}:{},...t.progressive?{required:!!tt.required,min:Xy(tt.min),max:Xy(tt.max),minLength:Xy(tt.minLength),maxLength:Xy(tt.maxLength),pattern:Xy(tt.pattern)}:{},name:Ve,onChange:Se,onBlur:Se,ref:Kt=>{if(Kt){mt(Ve,tt),lt=ln(n,Ve);const Ut=Bo(Kt.value)&&Kt.querySelectorAll&&Kt.querySelectorAll("input,select,textarea")[0]||Kt,ar=mEe(Ut),gr=lt._f.refs||[];if(ar?gr.find(yr=>yr===Ut):Ut===lt._f.ref)return;Ia(n,Ve,{_f:{...lt._f,...ar?{refs:[...gr.filter(oA),Ut,...Array.isArray(ln(i,Ve))?[{}]:[]],ref:{type:Ut.type,name:Ve}}:{ref:Ut}}}),D(Ve,!1,void 0,Ut)}else lt=ln(n,Ve,{}),lt._f&&(lt._f.mount=!1),(t.shouldUnregister||tt.shouldUnregister)&&!(rH(a.array,Ve)&&u.action)&&a.unMount.add(Ve)}}},rt=()=>t.shouldFocusError&&Mv(n,ge,a.mount),Lt=Ve=>{Ru(Ve)&&(w.state.next({disabled:Ve}),Mv(n,(tt,lt)=>{const Mt=ln(n,lt);Mt&&(tt.disabled=Mt._f.disabled||Ve,Array.isArray(Mt._f.refs)&&Mt._f.refs.forEach(Kt=>{Kt.disabled=Mt._f.disabled||Ve}))},0,!1))},Tt=(Ve,tt)=>async lt=>{let Mt;lt&&(lt.preventDefault&&lt.preventDefault(),lt.persist&&lt.persist());let Kt=ys(o);if(w.state.next({isSubmitting:!0}),t.resolver){const{errors:Ut,values:ar}=await Z();r.errors=Ut,Kt=ys(ar)}else await Y(n);if(a.disabled.size)for(const Ut of a.disabled)rs(Kt,Ut);if(rs(r.errors,"root"),Yl(r.errors)){w.state.next({errors:{}});try{await Ve(Kt,lt)}catch(Ut){Mt=Ut}}else tt&&await tt({...r.errors},lt),rt(),setTimeout(rt);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Yl(r.errors)&&!Mt,submitCount:r.submitCount+1,errors:r.errors}),Mt)throw Mt},Pt=(Ve,tt={})=>{ln(n,Ve)&&(Bo(tt.defaultValue)?ye(Ve,ys(ln(i,Ve))):(ye(Ve,tt.defaultValue),Ia(i,Ve,ys(tt.defaultValue))),tt.keepTouched||rs(r.touchedFields,Ve),tt.keepDirty||(rs(r.dirtyFields,Ve),r.isDirty=tt.defaultValue?W(Ve,ys(ln(i,Ve))):W()),tt.keepError||(rs(r.errors,Ve),m.isValid&&T()),w.state.next({...r}))},ut=(Ve,tt={})=>{const lt=Ve?ys(Ve):i,Mt=ys(lt),Kt=Yl(Ve),Ut=Kt?i:Mt;if(tt.keepDefaultValues||(i=lt),!tt.keepValues){if(tt.keepDirtyValues){const ar=new Set([...a.mount,...Object.keys(Ky(i,o))]);for(const gr of Array.from(ar))ln(r.dirtyFields,gr)?Ia(Ut,gr,ln(o,gr)):ye(gr,ln(Ut,gr))}else{if(oR&&Bo(Ve))for(const ar of a.mount){const gr=ln(n,ar);if(gr&&gr._f){const yr=Array.isArray(gr._f.refs)?gr._f.refs[0]:gr._f.ref;if(M1(yr)){const Ye=yr.closest("form");if(Ye){Ye.reset();break}}}}if(tt.keepFieldsRef)for(const ar of a.mount)ye(ar,ln(Ut,ar));else n={}}o=t.shouldUnregister?tt.keepDefaultValues?ys(i):{}:ys(Ut),w.array.next({values:{...Ut}}),w.state.next({values:{...Ut}})}a={mount:tt.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!tt.keepIsValid||!!tt.keepDirtyValues,u.watch=!!t.shouldUnregister,w.state.next({submitCount:tt.keepSubmitCount?r.submitCount:0,isDirty:Kt?!1:tt.keepDirty?r.isDirty:!!(tt.keepDefaultValues&&!nh(Ve,i)),isSubmitted:tt.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Kt?{}:tt.keepDirtyValues?tt.keepDefaultValues&&o?Ky(i,o):r.dirtyFields:tt.keepDefaultValues&&Ve?Ky(i,Ve):tt.keepDirty?r.dirtyFields:{},touchedFields:tt.keepTouched?r.touchedFields:{},errors:tt.keepErrors?r.errors:{},isSubmitSuccessful:tt.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Le=(Ve,tt)=>ut(Cc(Ve)?Ve(o):Ve,tt),sr=(Ve,tt={})=>{const lt=ln(n,Ve),Mt=lt&&lt._f;if(Mt){const Kt=Mt.refs?Mt.refs[0]:Mt.ref;Kt.focus&&(Kt.focus(),tt.shouldSelect&&Cc(Kt.select)&&Kt.select())}},lr=Ve=>{r={...r,...Ve}},Yt={control:{register:mt,unregister:ht,getFieldState:He,handleSubmit:Tt,setError:_e,_subscribe:ke,_runSchema:Z,_focusError:rt,_getWatch:G,_getDirty:W,_setValid:T,_setFieldArray:L,_setDisabledField:At,_setErrors:F,_getFieldArray:ae,_reset:ut,_resetDefaultValues:()=>Cc(t.defaultValues)&&t.defaultValues().then(Ve=>{Le(Ve,t.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:se,_disableForm:Lt,_subjects:w,_proxyFormState:m,get _fields(){return n},get _formValues(){return o},get _state(){return u},set _state(Ve){u=Ve},get _defaultValues(){return i},get _names(){return a},set _names(Ve){a=Ve},get _formState(){return r},get _options(){return t},set _options(Ve){t={...t,...Ve}}},subscribe:$e,trigger:xe,register:mt,handleSubmit:Tt,watch:Ce,setValue:ye,getValues:Fe,reset:Le,resetField:Pt,clearErrors:pe,unregister:ht,setError:_e,setFocus:sr,getFieldState:He};return{...Yt,formControl:Yt}}function TEe(e={}){const t=Be.useRef(void 0),r=Be.useRef(void 0),[n,i]=Be.useState({isDirty:!1,isValidating:!1,isLoading:Cc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Cc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Cc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...a}=PEe(e);t.current={...a,formState:n}}const o=t.current.control;return o._options=e,cR(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),o._formState.isReady=!0,u},[o]),Be.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),Be.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),Be.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),Be.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),Be.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==n.isDirty&&o._subjects.state.next({isDirty:u})}},[o,n.isDirty]),Be.useEffect(()=>{e.values&&!nh(e.values,r.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),r.current=e.values,i(u=>({...u}))):o._resetDefaultValues()},[o,e.values]),Be.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=nH(n,o),t.current}var fH=M.createContext(void 0),$j=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},IEe=function(e){var t=e.children,r=M.useRef({}),n=M.useRef({}),i=M.useMemo(function(){return{subscribe:function(o,u){return n.current[o]||(n.current[o]=[]),n.current[o].push(u),function(){n.current[o]=n.current[o].filter(function(a){return a!==u})}},getGroupFields:function(o){return r.current[o]||[]},registerGroup:function(o){r.current[o]=r.current[o]||[]},unregisterGroup:function(o){delete r[o]},registerField:function(o,u){u!=null&&((r.current[u]||[]).includes(o)||(r.current[u]=$j($j([],r.current[u]||[],!0),[o],!1),n.current[u]&&n.current[u].forEach(function(a){return a()})))},unregisterField:function(o,u){if(u!=null)if(!r.current[u])console.warn("Invalid form group ".concat(u));else{var a=new Set(r.current[u]);a.delete(o),r.current[u]=Array.from(a),n.current[u]&&n.current[u].forEach(function(p){return p()})}}}},[]);return M.createElement(fH.Provider,{value:i},t)},MEe=function(e,t,r){var n=Ti(),i=x2(r?{control:r}:void 0),o=i.isSubmitSuccessful,u=i.dirtyFields,a=Object.keys(u).length>0,p=M.useState(!1),d=p[0],m=p[1],v=!e||!a||o,w=Awe(function(x){var P=x.currentLocation,T=x.nextLocation;if(v)return!1;var O=t||P.pathname,L=T.pathname.startsWith(O),N=T.pathname.startsWith("".concat(O,"/show")),F=L&&!N;return!F});M.useEffect(function(){if(w.state==="blocked"){if(v){w.proceed();return}m(!0)}},[w.state]),M.useEffect(function(){if(d){var x=window.confirm(n("ra.message.unsaved_changes"));x?w.proceed&&w.proceed():w.reset&&w.reset()}m(!1)},[d,n]),M.useEffect(function(){var x=function(P){P.preventDefault(),P.returnValue=!0};if(!v)return window.addEventListener("beforeunload",x),function(){window.removeEventListener("beforeunload",x)}},[v])},REe=function(e){var t=e.enable,r=t===void 0?!0:t,n=e.formRootPathName,i=e.formControl;return MEe(r,n,i),null};function OEe(e,t){var r=FG({},kEe(e,t),t);return r}function kEe(e,t){return typeof e=="object"?e:typeof e=="function"?e(t):{}}var Fh=function(){return Fh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fh.apply(this,arguments)},LEe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},DEe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},NEe=function(e){return function(t){return LEe(void 0,void 0,void 0,function(){var r,n;return DEe(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return r=i.sent(),!r||k1(r)?[2,{values:t,errors:{}}]:(n=FT(r),!n||k1(n)?[2,{values:t,errors:{}}]:[2,{values:{},errors:n}])}})})}},FT=function(e){return Object.keys(e).reduce(function(t,r){var n,i,o;if(Array.isArray(e[r])){var u=!1,a=e[r].map(function(p){return k1(p)||(u=!0),FT(p)});return u?Fh(Fh({},t),(n={},n[r]=a,n)):t}return k1(e[r])?t:typeof e[r]=="object"&&!hH(e[r])?Fh(Fh({},t),(i={},i[r]=FT(e[r]),i)):Fh(Fh({},t),(o={},o[r]=FEe(e[r]),o))},{})},FEe=function(e){return{type:"manual",message:hH(e)?e:{message:e}}},hH=function(e){return Object.keys(e).includes("message")&&Object.keys(e).includes("args")},k1=function(e){return e==null||Object.getOwnPropertyNames(e).length===0},dH=function(e,t){var r=function(n,i){Object.entries(n).forEach(function(o){var u=o[0],a=o[1];if(typeof a=="object"){r(a,"".concat(i).concat(u,"."));return}t("".concat(i).concat(u),{type:"server",message:a.toString()})})};r(e,"")},BEe=function(e,t){t===void 0&&(t=!0);var r=x2(e?{control:e}:void 0),n=r.submitCount,i=r.errors,o=M.useRef(n),u=Rf();M.useEffect(function(){var a,p;if(n>o.current&&t&&(o.current=n,Object.keys(i).length>0)){var d=typeof((p=(a=i.root)===null||a===void 0?void 0:a.serverError)===null||p===void 0?void 0:p.message)=="string"?i.root.serverError.message:void 0;u(d||"ra.message.invalid_form",{type:"error"})}},[i,n,u,t])},jEe=function(e,t){t===void 0&&(t={});var r={};return Object.keys(e).forEach(function(n){e[n]==null||e[n]===""?t.hasOwnProperty(n)&&(r[n]=null):r[n]=e[n]}),r},pH=function(e){e===void 0&&(e={});var t=e.searchSource,r=e.stateSource,n=dl(),i=M.useState(function(){return Uj(n,{stateSource:r,searchSource:t})}),o=i[0],u=i[1],a=M.useRef(o);return M.useEffect(function(){var p=Uj(n,{stateSource:r,searchSource:t});XM(p,a.current)||(a.current=p,u(p))},[n,r,t]),o},Uj=function(e,t){var r=e.state,n=e.search,i=t===void 0?{}:t,o=i.searchSource,u=o===void 0?"source":o,a=i.stateSource,p=a===void 0?"record":a;if(r&&r[p])return r[p];if(n)try{var d=TSe.parse(n),m=d[u];if(m)return Array.isArray(m)?(console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`)),null):JSON.parse(m)}catch{console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`))}return null},BT=function(){return BT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},BT.apply(this,arguments)},zEe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},$Ee=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},UEe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},qEe=function(e){var t=e.criteriaMode,r=t===void 0?"firstError":t,n=e.defaultValues;e.formRootPathname;var i=e.resolver,o=e.reValidateMode,u=o===void 0?"onChange":o,a=e.onSubmit,p=e.sanitizeEmptyValues,d=e.validate,m=e.disableInvalidFormNotification,v=UEe(e,["criteriaMode","defaultValues","formRootPathname","resolver","reValidateMode","onSubmit","sanitizeEmptyValues","validate","disableInvalidFormNotification"]),w=iR(),x=pl(e),P=M.useMemo(function(){return OEe(n,x)},[JSON.stringify({defaultValues:typeof n=="function"?"function":n,record:x})]),T=i||(d?NEe(d):void 0),O=TEe(BT({criteriaMode:r,values:P,reValidateMode:u,resolver:T},v)),L=M.useRef(O);BEe(O.control,!m);var N=pH(),F=M.useRef(!1),D=O.reset;M.useEffect(function(){N&&!F.current&&(D(FG({},P,N),{keepDefaultValues:!0}),F.current=!0)},[P,N,D]);var q=M.useCallback(function(Z,Q){return zEe(void 0,void 0,void 0,function(){var Y,se;return $Ee(this,function(W){switch(W.label){case 0:return se=p?jEe(Z,x):Z,a?[4,a(se,Q)]:[3,2];case 1:Y=W.sent(),W.label=2;case 2:return a==null&&w?.save?[4,w.save(se,Q)]:[3,4];case 3:Y=W.sent(),W.label=4;case 4:return Y!=null&&dH(Y,L.current.setError),[2]}})})},[a,w,p,x]),z=M.useCallback(function(Z){Z.defaultPrevented||(Z.stopPropagation(),O.handleSubmit(q)(Z))},[O,q]);return{form:O,handleSubmit:q,formHandleSubmit:z}},jT=function(){return jT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jT.apply(this,arguments)};function mH(e){var t=e.children,r=e.id,n=e.className,i=e.noValidate,o=i===void 0?!1:i,u=e.formRootPathname,a=e.warnWhenUnsavedChanges,p=e.WarnWhenUnsavedChangesComponent,d=p===void 0?REe:p,m=pl(e),v=lu(e),w=qEe(e),x=w.form,P=w.formHandleSubmit,T=M.useMemo(function(){return{getSource:function(N){return N},getLabel:function(N){return"resources.".concat(v,".fields.").concat(N)}}},[v]),O=M.useContext(sd),L=M.useContext(jg);return M.createElement(JG,{value:m},M.createElement(XCe,{value:T},M.createElement(fEe,jT({},x),M.createElement(IEe,null,M.createElement("form",{onSubmit:P,noValidate:o,id:r,className:n},t),a&&O&&L&&M.createElement(d,{enable:!0,formRootPathName:u,formControl:x.control})))))}var VEe=M.createContext(null),GEe=function(){var e=M.useContext(fH);return e},HEe=function(){var e=M.useContext(VEe);return e},WEe=function(e){var t=e.inputProps,r=e.isArrayInput,n=e.fieldArrayInputControl,i=t.defaultValue,o=t.source,u=t.disabled,a=MH(o),p=pl(t),d=Z0(),m=d.getValues,v=d.resetField,w=d.formState,x=d.reset,P=Pc(p,a),T=Pc(m(),a),O=w.dirtyFields,L=Object.keys(O).includes(a);M.useEffect(function(){if(!(i==null||T!=null||u||P!==void 0||L)){var N=a.split(".").some(function(q){return ZEe.test(q)});if(N){var F=a.split(".").slice(0,-1).join("."),D=Pc(m(),F);if(D==null)return}if(r){if(!n)throw new Error("useApplyInputDefaultValues: No fieldArrayInputControl passed in props for array input usage");n.replace(i),x({},{keepValues:!0});return}v(a,{defaultValue:i})}})},ZEe=/^\d+$/,KEe=nq();const gH=Us(KEe);var XEe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,cd=function(e){return typeof e>"u"||e===null||e===""||Array.isArray(e)&&e.length===0};function YEe(e){return e?e.hasOwnProperty("message"):!1}var fd=function(e,t,r,n){return typeof e=="function"?e({args:t,value:r,values:n}):t?{message:e,args:t}:e},hd=function(e){return gH(e,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return JSON.stringify(t)})},JEe=function(e){return typeof e=="function"},QEe=function(e,t){return function(r,n,i){var o=e(r,n,i);return o?typeof o=="string"||YEe(o)?o:o.then(function(u){return u||t(r,n,i)}):t(r,n,i)}},eCe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(Array.isArray(e[0])?e[0]:e).filter(JEe);return r.reduce(QEe,function(){return null})},qj=hd(function(e){return e===void 0&&(e="ra.validation.required"),Object.assign(function(t,r){return cd(t)?fd(e,void 0,t,r):void 0},{isRequired:!0})});hd(function(e,t){return t===void 0&&(t="ra.validation.minLength"),function(r,n){return!cd(r)&&r.length<e?fd(t,{min:e},r,n):void 0}});hd(function(e,t){return t===void 0&&(t="ra.validation.maxLength"),function(r,n){return!cd(r)&&r.length>e?fd(t,{max:e},r,n):void 0}});hd(function(e,t){return t===void 0&&(t="ra.validation.minValue"),function(r,n){return!cd(r)&&r<e?fd(t,{min:e},r,n):void 0}});hd(function(e,t){return t===void 0&&(t="ra.validation.maxValue"),function(r,n){return!cd(r)&&r>e?fd(t,{max:e},r,n):void 0}});hd(function(e){return e===void 0&&(e="ra.validation.number"),function(t,r){return!cd(t)&&isNaN(Number(t))?fd(e,void 0,t,r):void 0}});var tCe=gH(function(e,t){return t===void 0&&(t="ra.validation.regex"),function(r,n){return!cd(r)&&typeof r=="string"&&!e.test(r)?fd(t,{pattern:e},r,n):void 0}},function(e,t){return e.toString()+t});hd(function(e){return e===void 0&&(e="ra.validation.email"),tCe(XEe,e)});var rCe=function(e){var t=e.args;return{message:"ra.validation.oneOf",args:t}};hd(function(e,t){return t===void 0&&(t=rCe),function(r,n){return!cd(r)&&e.indexOf(r)===-1?fd(t,{list:e},r,n):void 0}});var nCe=function(e){return e&&e.isRequired?!0:Array.isArray(e)?!!e.find(function(t){return t.isRequired}):!1},zT=function(){return zT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zT.apply(this,arguments)},Vj="@@react-admin@@",iCe=function(e){var t=e.error,r=t,n=Ti();if(typeof t=="string"&&t.startsWith(Vj)&&(r=JSON.parse(t.substring(Vj.length))),r.message){var i=r,o=i.message,u=i.args;return M.createElement(M.Fragment,null,n(o,zT({_:o},u)))}return M.createElement(M.Fragment,null,n(r,{_:r}))},Gd=function(){return Gd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gd.apply(this,arguments)},aCe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,[])).next())})},oCe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},sCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lCe=function(e){return e??""},uCe=function(e){return e===""?null:e},yH=function(e){var t=e.defaultValue,r=e.format,n=r===void 0?lCe:r,i=e.id,o=e.isRequired,u=e.name,a=e.onBlur,p=e.onChange,d=e.parse,m=d===void 0?uCe:d,v=e.source,w=e.validate,x=sCe(e,["defaultValue","format","id","isRequired","name","onBlur","onChange","parse","source","validate"]),P=MH(v),T=u||P,O=HEe(),L=GEe(),N=pl(),F=Co(m),D=M.useId();M.useEffect(function(){if(!(!L||O==null))return L.registerField(P,O),function(){L.unregisterField(P,O)}},[L,O,P]);var q=Array.isArray(w)?eCe(w):w,z=dEe(Gd({name:T,defaultValue:Pc(N,P,t),rules:{validate:function(ae,le){return aCe(void 0,void 0,void 0,function(){var ue;return oCe(this,function(ye){switch(ye.label){case 0:return q?[4,q(ae,le,Gd(Gd({},e),{finalSource:P}))]:[2,!0];case 1:return ue=ye.sent(),ue?[2,"@@react-admin@@".concat(JSON.stringify(ue))]:[2,!0]}})})}}},x)),Z=z.field,Q=z.fieldState,Y=z.formState;WEe({inputProps:e});var se=Co(function(){for(var ae=[],le=0;le<arguments.length;le++)ae[le]=arguments[le];Z.onBlur(),a&&a.apply(void 0,ae)}),W=Co(function(){for(var ae,le,ue,ye,Se,ge=[],xe=0;xe<arguments.length;xe++)ge[xe]=arguments[xe];var Fe=e.type==="checkbox"&&((le=(ae=ge[0])===null||ae===void 0?void 0:ae.target)===null||le===void 0?void 0:le.value)==="on"?ge[0].target.checked:(Se=(ye=(ue=ge[0])===null||ue===void 0?void 0:ue.target)===null||ye===void 0?void 0:ye.value)!==null&&Se!==void 0?Se:ge[0];Z.onChange(F?F(Fe):Fe),p&&p.apply(void 0,ge)}),G=Gd(Gd({},Z),{value:n?n(Z.value):Z.value,onBlur:se,onChange:W});return{id:i||D,field:G,fieldState:Q,formState:Y,isRequired:o||nCe(w)}},cCe=function(e){var t=e.children,r=e.value;return r?M.createElement($G.Provider,{value:r},t):t},fCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},hCe=function(e){e.afterSubmit,e.allowNull,e.alwaysOn,e.beforeSubmit,e.component,e.data,e.defaultValue,e.error,e.format,e.formatOnBlur,e.initializeForm,e.input,e.isEqual,e.isRequired,e.label,e.limitChoicesToValue,e.locale,e.meta,e.multiple,e.name,e.options,e.optionText,e.optionValue,e.parse,e.record,e.ref,e.refetch,e.render,e.resource,e.setFilter,e.setPagination,e.setSort,e.shouldUnregister,e.source,e.submitError,e.subscription,e.textAlign,e.translate,e.translateChoice,e.validate,e.validateFields,e.value;var t=fCe(e,["afterSubmit","allowNull","alwaysOn","beforeSubmit","component","data","defaultValue","error","format","formatOnBlur","initializeForm","input","isEqual","isRequired","label","limitChoicesToValue","locale","meta","multiple","name","options","optionText","optionValue","parse","record","ref","refetch","render","resource","setFilter","setPagination","setSort","shouldUnregister","source","submitError","subscription","textAlign","translate","translateChoice","validate","validateFields","value"]);return t},$T=function(){return $T=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$T.apply(this,arguments)},dCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},pCe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.queryOptions,o=i===void 0?{}:i,u=lu(e);if(!u)throw new Error("useShowController requires a non-empty resource prop or context");var a=X0({enabled:!r}).isPending,p=BH({action:"show",resource:u,enabled:!r&&!a}).isPending,d=Ug(u),m=Ti(),v=Rf(),w=H0(),x=pG().id;if(!x&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var P=n??x,T=o.meta,O=dCe(o,["meta"]),L=ZG(u,{id:P,meta:T},$T({enabled:!a&&!p||r,onError:function(){v("ra.notification.item_doesnt_exist",{type:"error"}),w("list",u)},retry:!1},O)),N=L.data,F=L.error,D=L.isLoading,q=L.isFetching,z=L.isPaused,Z=L.isPending,Q=L.isPlaceholderData,Y=L.refetch;if(N&&N.id&&N.id!=P)throw new Error("useShowController: Fetched record's id attribute (".concat(N.id,") must match the requested 'id' (").concat(P,")"));var se=$g(),W=d(N),G=m("resources.".concat(u,".page.show"),{id:P,record:N,recordRepresentation:typeof W=="string"?W:"",_:m("ra.page.show",{name:se(u,1),id:P,record:N,recordRepresentation:typeof W=="string"?W:""})});return{defaultTitle:G,error:F,isLoading:D,isFetching:q,isPaused:z,isPending:Z,isPlaceholderData:Q,record:N,refetch:Y,resource:u}},dR=M.createContext(null);dR.displayName="ShowContext";var mCe=function(e){var t=e.children,r=e.value;return M.createElement(dR.Provider,{value:r},M.createElement(eR,{value:r&&r.record},t))},gCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},yCe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,o=gCe(e,["children","loading","offline","render"]),u=pCe(o),a=FH({resource:u.resource,action:"show"});if(!i&&!t)throw new Error("<ShowBase> requires either a `render` prop or `children` prop");var p=u.isPaused,d=u.isPending,m=a&&!o.disableAuthentication&&r!==!1&&r!==void 0,v=p&&d&&n!==!1&&n!==void 0;return M.createElement(IH,{value:o.resource},M.createElement(mCe,{value:u},m?r:v?n:i?i(u):t))},vCe=function(){var e=M.useContext(dR);if(!e)throw new Error("useShowContext must be used inside a ShowContextProvider");return e},vH=M.createContext(function(){}),bH=M.createContext(function(){}),Gj=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},bCe=function(e){var t=e.children,r=M.useState([]),n=r[0],i=r[1],o=M.useCallback(function(a){i(function(p){return Gj(Gj([],p,!0),[a],!1)})},[]),u=M.useCallback(function(){if(n.length!==0){var a=n[0],p=n.slice(1);return i(p),a}},[n]);return M.createElement(bH.Provider,{value:u},M.createElement(vH.Provider,{value:o},t))},_H=function(){return M.useContext(vH)},_Ce=function(){return M.useContext(bH)},ga=function(){return ga=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ga.apply(this,arguments)},Hj=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},Wj=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Zj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},r_=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},xCe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=nR(),i=If(),o=_H(),u=t.id,a=t.data,p=t.meta,d=r.mutationMode,m=d===void 0?"pessimistic":d,v=r.getMutateWithMiddlewares,w=Zj(r,["mutationMode","getMutateWithMiddlewares"]),x=M.useRef(m);M.useEffect(function(){x.current=m},[m]);var P=M.useRef(t);M.useEffect(function(){P.current=t},[t]);var T=M.useRef([]),O=M.useRef(n.update),L=M.useRef(),N=M.useRef(),F=M.useRef(!1),D=function(Q){var Y=Q.resource,se=Q.id,W=Q.data,G=Q.meta,ae=Date.now(),le=x.current==="undoable"?ae+5*1e3:ae,ue=JSON.parse(JSON.stringify(W)),ye=function(Se){if(!Se)return Se;var ge=Se.findIndex(function(xe){return xe.id==se});return ge===-1?Se:r_(r_(r_([],Se.slice(0,ge),!0),[ga(ga({},Se[ge]),ue)],!1),Se.slice(ge+1),!0)};i.setQueryData([Y,"getOne",{id:String(se),meta:G}],function(Se){return ga(ga({},Se),ue)},{updatedAt:le}),i.setQueriesData({queryKey:[Y,"getList"]},function(Se){return Se&&Se.data?ga(ga({},Se),{data:ye(Se.data)}):Se},{updatedAt:le}),i.setQueriesData({queryKey:[Y,"getInfiniteList"]},function(Se){return Se&&Se.pages?ga(ga({},Se),{pages:Se.pages.map(function(ge){return ga(ga({},ge),{data:ye(ge.data)})})}):Se},{updatedAt:le}),i.setQueriesData({queryKey:[Y,"getMany"]},function(Se){return Se&&Se.length>0?ye(Se):Se},{updatedAt:le}),i.setQueriesData({queryKey:[Y,"getManyReference"]},function(Se){return Se&&Se.data?{data:ye(Se.data),total:Se.total}:Se},{updatedAt:le})},q=ZV(ga(ga({mutationKey:[e,"update",t],mutationFn:function(Q){var Y=Q===void 0?{}:Q,se=Y.resource,W=se===void 0?e:se,G=Y.id,ae=G===void 0?P.current.id:G,le=Y.data,ue=le===void 0?P.current.data:le,ye=Y.meta,Se=ye===void 0?P.current.meta:ye,ge=Y.previousData,xe=ge===void 0?P.current.previousData:ge;if(!W)throw new Error("useUpdate mutation requires a non-empty resource");if(ae==null)throw new Error("useUpdate mutation requires a non-empty id");if(!ue)throw new Error("useUpdate mutation requires a non-empty data object");return O.current(W,{id:ae,data:ue,previousData:xe,meta:Se}).then(function(Fe){var He=Fe.data;return He})}},w),{onMutate:function(Q){return Hj(void 0,void 0,void 0,function(){var Y;return Wj(this,function(se){switch(se.label){case 0:return w.onMutate?[4,w.onMutate(Q)]:[3,2];case 1:return Y=se.sent()||{},[2,ga({snapshot:T.current},Y)];case 2:return[2,{snapshot:T.current}]}})})},onError:function(Q,Y,se){if(Y===void 0&&(Y={}),(x.current==="optimistic"||x.current==="undoable")&&se.snapshot.forEach(function(W){var G=W[0],ae=W[1];i.setQueryData(G,ae)}),L.current)return L.current(Q,Y,se);if(w.onError)return w.onError(Q,Y,se)},onSuccess:function(Q,Y,se){if(Y===void 0&&(Y={}),x.current==="pessimistic"){var W=Y.resource,G=W===void 0?e:W,ae=Y.id,le=ae===void 0?u:ae,ue=Y.meta,ye=ue===void 0?p:ue;D({resource:G,id:le,data:Q,meta:ye}),w.onSuccess&&!F.current&&w.onSuccess(Q,Y,se)}},onSettled:function(Q,Y,se,W){if(se===void 0&&(se={}),(x.current==="optimistic"||x.current==="undoable")&&W.snapshot.forEach(function(G){var ae=G[0];i.invalidateQueries({queryKey:ae})}),N.current)return N.current(Q,Y,se,W);if(w.onSettled)return w.onSettled(Q,Y,se,W)}})),z=function(){for(var Q=[],Y=0;Y<arguments.length;Y++)Q[Y]=arguments[Y];return Hj(void 0,r_([],Q,!0),void 0,function(se,W,G){var ae,le,ue,ye,Se,ge,xe,Fe,He,pe,_e,Ce,ke,$e,ht;return se===void 0&&(se=e),W===void 0&&(W={}),G===void 0&&(G={}),Wj(this,function(At){switch(At.label){case 0:return ae=G.mutationMode,le=G.returnPromise,ue=le===void 0?w.returnPromise:le,ye=G.onError,Se=G.onSettled,ge=G.onSuccess,xe=Zj(G,["mutationMode","returnPromise","onError","onSettled","onSuccess"]),v?O.current=v(n.update.bind(n)):O.current=n.update,F.current=!!ge,L.current=ye,N.current=Se,P.current=t,ae&&(x.current=ae),ue&&x.current!=="pessimistic"&&console.warn("The returnPromise parameter can only be used if the mutationMode is set to pessimistic"),x.current==="pessimistic"?ue?[2,q.mutateAsync(ga({resource:se},W),ga({onSuccess:ge},xe))]:[2,q.mutate(ga({resource:se},W),ga({onSuccess:ge},xe))]:(Fe=W.id,He=Fe===void 0?u:Fe,pe=W.data,_e=pe===void 0?a:pe,Ce=W.meta,ke=Ce===void 0?p:Ce,$e=i.getQueryData([se,"getOne",{id:String(He),meta:ke}]),ht=[[se,"getOne",{id:String(He),meta:ke}],[se,"getList"],[se,"getInfiniteList"],[se,"getMany"],[se,"getManyReference"]],T.current=ht.reduce(function(mt,rt){return mt.concat(i.getQueriesData({queryKey:rt}))},[]),[4,Promise.all(T.current.map(function(mt){var rt=mt[0];return i.cancelQueries({queryKey:rt})}))]);case 1:return At.sent(),D({resource:se,id:He,data:_e,meta:ke}),setTimeout(function(){ge?ge(ga(ga({},$e),_e),ga({resource:se},W),{snapshot:T.current}):w.onSuccess&&!F.current&&w.onSuccess(ga(ga({},$e),_e),ga({resource:se},W),{snapshot:T.current})},0),x.current==="optimistic"?[2,q.mutate(ga({resource:se},W))]:(o(function(mt){var rt=mt.isUndo;rt?T.current.forEach(function(Lt){var Tt=Lt[0],Pt=Lt[1];i.setQueryData(Tt,Pt)}):q.mutate(ga({resource:se},W))}),[2])}})})},Z=M.useMemo(function(){return ga({isLoading:q.isPending},q)},[q]);return[Co(z),Z]},Ll=function(){return Ll=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ll.apply(this,arguments)},Kj=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},Xj=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Yj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},sA=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},wCe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=nR(),i=If(),o=_H(),u=t.id,a=t.previousData,p=r.mutationMode,d=p===void 0?"pessimistic":p,m=Yj(r,["mutationMode"]),v=M.useRef(d);M.useEffect(function(){v.current=d},[d]);var w=M.useRef(t);M.useEffect(function(){w.current=t},[t]);var x=M.useRef([]),P=M.useRef(!1),T=M.useRef(!1),O=M.useRef(!1),L=function(q){var z=q.resource,Z=q.id,Q=Date.now(),Y=v.current==="undoable"?Q+5*1e3:Q,se=function(W){if(!W)return W;var G=W.findIndex(function(ae){return ae.id==Z});return G===-1?W:sA(sA([],W.slice(0,G),!0),W.slice(G+1),!0)};i.setQueriesData({queryKey:[z,"getList"]},function(W){if(!W||!W.data)return W;var G=se(W.data),ae=G.length<W.data.length;return ae?{data:G,total:W.total?W.total-1:void 0,pageInfo:W.pageInfo}:W},{updatedAt:Y}),i.setQueriesData({queryKey:[z,"getInfiniteList"]},function(W){return!W||!W.pages?W:Ll(Ll({},W),{pages:W.pages.map(function(G){var ae=se(G.data),le=ae.length<G.data.length;return le?Ll(Ll({},G),{data:ae,total:G.total?G.total-1:void 0,pageInfo:G.pageInfo}):G})})},{updatedAt:Y}),i.setQueriesData({queryKey:[z,"getMany"]},function(W){return W&&W.length>0?se(W):W},{updatedAt:Y}),i.setQueriesData({queryKey:[z,"getManyReference"]},function(W){if(!W||!W.data)return W;var G=se(W.data),ae=G.length<W.data.length;return ae?{data:G,total:W.total-1}:W},{updatedAt:Y})},N=ZV(Ll(Ll({mutationKey:[e,"delete",t],mutationFn:function(q){var z=q===void 0?{}:q,Z=z.resource,Q=Z===void 0?e:Z,Y=z.id,se=Y===void 0?w.current.id:Y,W=z.previousData,G=W===void 0?w.current.previousData:W,ae=z.meta,le=ae===void 0?w.current.meta:ae;if(!Q)throw new Error("useDelete mutation requires a non-empty resource");if(se==null)throw new Error("useDelete mutation requires a non-empty id");return n.delete(Q,{id:se,previousData:G,meta:le}).then(function(ue){var ye=ue.data;return ye})}},m),{onMutate:function(q){return Kj(void 0,void 0,void 0,function(){var z;return Xj(this,function(Z){switch(Z.label){case 0:return m.onMutate?[4,m.onMutate(q)]:[3,2];case 1:return z=Z.sent()||{},[2,Ll({snapshot:x.current},z)];case 2:return[2,{snapshot:x.current}]}})})},onError:function(q,z,Z){if(z===void 0&&(z={}),(v.current==="optimistic"||v.current==="undoable")&&Z.snapshot.forEach(function(Q){var Y=Q[0],se=Q[1];i.setQueryData(Y,se)}),m.onError&&!P.current)return m.onError(q,z,Z)},onSuccess:function(q,z,Z){if(z===void 0&&(z={}),v.current==="pessimistic"){var Q=z.resource,Y=Q===void 0?e:Q,se=z.id,W=se===void 0?u:se;L({resource:Y,id:W}),m.onSuccess&&!T.current&&m.onSuccess(q,z,Z)}},onSettled:function(q,z,Z,Q){if(Z===void 0&&(Z={}),Q.snapshot.forEach(function(Y){var se=Y[0];i.invalidateQueries({queryKey:se})}),m.onSettled&&!O.current)return m.onSettled(q,z,Z,Q)}})),F=function(){for(var q=[],z=0;z<arguments.length;z++)q[z]=arguments[z];return Kj(void 0,sA([],q,!0),void 0,function(Z,Q,Y){var se,W,G,ae,le,ue,ye;return Z===void 0&&(Z=e),Q===void 0&&(Q={}),Y===void 0&&(Y={}),Xj(this,function(Se){switch(Se.label){case 0:return se=Y.mutationMode,W=Yj(Y,["mutationMode"]),P.current=!!Y.onError,T.current=!!Y.onSuccess,O.current=!!Y.onSettled,w.current=t,se&&(v.current=se),G=Q.id,ae=G===void 0?u:G,le=Q.previousData,ue=le===void 0?a:le,ye=[[Z,"getList"],[Z,"getInfiniteList"],[Z,"getMany"],[Z,"getManyReference"]],x.current=ye.reduce(function(ge,xe){return ge.concat(i.getQueriesData({queryKey:xe}))},[]),v.current==="pessimistic"?[2,N.mutate(Ll({resource:Z},Q),W)]:[4,Promise.all(x.current.map(function(ge){var xe=ge[0];return i.cancelQueries({queryKey:xe})}))];case 1:return Se.sent(),L({resource:Z,id:ae}),setTimeout(function(){Y.onSuccess?Y.onSuccess(ue,Ll({resource:Z},Q),{snapshot:x.current}):m.onSuccess&&m.onSuccess(ue,Ll({resource:Z},Q),{snapshot:x.current})},0),v.current==="optimistic"?[2,N.mutate(Ll({resource:Z},Q),{onSettled:Y.onSettled,onError:Y.onError})]:(o(function(ge){var xe=ge.isUndo;xe?x.current.forEach(function(Fe){var He=Fe[0],pe=Fe[1];i.setQueryData(He,pe)}):N.mutate(Ll({resource:Z},Q),{onSettled:Y.onSettled,onError:Y.onError})}),[2])}})})},D=M.useMemo(function(){return Ll({isLoading:N.isPending},N)},[N]);return[Co(F),D]},xH=M.createContext(void 0),SCe=function(e){var t=e.children,r=M.useState(!1),n=r[0],i=r[1],o=M.useState(null),u=o[0],a=o[1],p=M.useState(null),d=p[0],m=p[1],v=M.useState(null),w=v[0],x=v[1],P=M.useState(null),T=P[0],O=P[1],L=M.useState(),N=L[0],F=L[1],D=M.useCallback(function(){return i(!0)},[]),q=M.useCallback(function(){i(!1),a(null)},[]),z=M.useCallback(function(Q,Y){O(Q),F(Y)},[]),Z=M.useMemo(function(){return{editor:u,setEditor:a,preferenceKey:d,setPreferenceKey:m,title:T,titleOptions:N,setTitle:z,isEnabled:n,disable:q,enable:D,path:w,setPath:x}},[q,D,u,d,n,w,x,T,N,z]);return M.createElement(xH.Provider,{value:Z},t)},ECe=AG(),CCe=function(e){var t=e.authProvider,r=e.basename,n=e.dataProvider,i=n===void 0?tR:n,o=e.i18nProvider,u=e.store,a=u===void 0?ECe:u,p=e.children,d=e.queryClient;if(!i)throw new Error(`Missing dataProvider prop.
React-admin requires a valid dataProvider function to work.`);var m=M.useMemo(function(){return d||new Vxe},[d]),v=M.useMemo(function(){return t instanceof Function?AAe(t):t},[t]),w=M.useMemo(function(){return i instanceof Function?wSe(i):i},[i]);return M.createElement(FM.Provider,{value:v},M.createElement(rR.Provider,{value:w},M.createElement(O5e,{value:a},M.createElement(SCe,null,M.createElement(Kxe,{client:m},M.createElement(nSe,{basename:r},M.createElement($5e,{value:o},M.createElement(B5e,null,M.createElement(bCe,null,M.createElement(lSe,null,p))))))))))};const ACe=M.createContext(null),lA={didCatch:!1,error:null};class wH extends M.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=lA}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:o,reason:"imperative-api"}),this.setState(lA)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&PCe(t.resetKeys,i)){var o,u;(o=(u=this.props).onReset)===null||o===void 0||o.call(u,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(lA)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:o,error:u}=this.state;let a=t;if(o){const p={error:u,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")a=r(p);else if(n)a=M.createElement(n,p);else if(i!==void 0)a=i;else throw u}return M.createElement(ACe.Provider,{value:{didCatch:o,error:u,resetErrorBoundary:this.resetErrorBoundary}},a)}}function PCe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Hd=function(){return Hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hd.apply(this,arguments)},TCe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},ICe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},MCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},RCe={},SH=function(e,t){e===void 0&&(e=RCe),t===void 0&&(t={staleTime:300*1e3});var r=lc(),n=WG(),i=t??{},o=i.onSuccess,u=i.onError,a=i.onSettled,p=MCe(i,["onSuccess","onError","onSettled"]),d=Rp(Hd({queryKey:["auth","getPermissions",e],queryFn:function(P){return TCe(void 0,[P],void 0,function(T){var O,L=T.signal;return ICe(this,function(N){switch(N.label){case 0:return!r||!r.getPermissions?[2,[]]:[4,r.getPermissions(Hd(Hd({},e),{signal:L}))];case 1:return O=N.sent(),[2,O??null]}})})}},p)),m=Co(o??Jj),v=Co(a??Jj),w=Co(u??(function(P){n(P)}));M.useEffect(function(){d.data===void 0||d.isFetching||m(d.data)},[m,d.data,d.isFetching]),M.useEffect(function(){d.error==null||d.isFetching||w(d.error)},[w,d.error,d.isFetching]),M.useEffect(function(){d.status==="pending"||d.isFetching||v(d.data,d.error)},[v,d.data,d.error,d.status,d.isFetching]);var x=M.useMemo(function(){return Hd(Hd({},d),{permissions:d.data})},[d]);return!r||!r.getPermissions?EH:x},Jj=function(){},EH={permissions:void 0,data:void 0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(EH)}},UT=function(){return UT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UT.apply(this,arguments)},Qj=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},ez=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},OCe=function(e){var t=SH(),r=t.permissions,n=t.isPending,i=kCe(e,r,n),o=i[0],u=i[1];return DCe(o.resources,r),{customRoutesWithLayout:o.customRoutesWithLayout,customRoutesWithoutLayout:o.customRoutesWithoutLayout,status:u,resources:o.resources}},kCe=function(e,t,r){var n=qg(),i=LCe(gv(e)),o=i[0],u=i[1],a=i[2],p=M.useState(function(){return NCe(UT({children:e},o))}),d=p[0],m=p[1];if(!d)throw new Error("Status should be defined");return M.useEffect(function(){var v=function(x){return Qj(void 0,void 0,void 0,function(){var P;return ez(this,function(T){try{P=x(t),P?.then?P.then(function(O){a(gv(O)),m("ready")}):(a(gv(P)),m("ready"))}catch(O){console.error(O),n()}return[2]})})},w=function(){return Qj(void 0,void 0,void 0,function(){var x,P;return ez(this,function(T){return x=CH(e),P=gv(e),u(P),m(x?"loading":P.resources.length>0||P.customRoutesWithLayout.length>0||P.customRoutesWithoutLayout.length>0?"ready":"empty"),x&&v(x),[2]})})};r||w()},[e,n,r,a,t,u,m]),[o,d]},LCe=function(e){var t=M.useState(e),r=t[0],n=t[1],i=M.useCallback(function(o){n(function(u){return{customRoutesWithLayout:u.customRoutesWithLayout.concat(o.customRoutesWithLayout),customRoutesWithoutLayout:u.customRoutesWithoutLayout.concat(o.customRoutesWithoutLayout),resources:u.resources.concat(o.resources)}})},[]);return[r,n,i]},DCe=function(e,t){var r=qG(),n=r.register,i=r.unregister;M.useEffect(function(){return e.forEach(function(o){if(typeof o.type.registerResource=="function"){var u=o.type.registerResource(o.props,t);n(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")}),function(){e.forEach(function(o){if(typeof o.type.registerResource=="function"){var u=o.type.registerResource(o.props,t);i(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")})}},[t,n,e,i])},NCe=function(e){var t=e.children,r=e.resources,n=e.customRoutesWithLayout,i=e.customRoutesWithoutLayout;return CH(t)?"loading":r.length>0||n.length>0||i.length>0?"ready":"empty"},CH=function(e){var t=Array.isArray(e)?e:[e],r=t.filter(function(n){return typeof n=="function"});if(r.length>1)throw new Error("You can only provide one function child to AdminRouter");return r.length===0?null:r[0]},gv=function(e){var t=[],r=[],n=[];return typeof e=="function"?{customRoutesWithLayout:[],customRoutesWithoutLayout:[],resources:[]}:(M.Children.forEach(e,function(i){if(M.isValidElement(i)){if(i.type===M.Fragment){var o=gv(i.props.children);t.push.apply(t,o.customRoutesWithLayout),r.push.apply(r,o.customRoutesWithoutLayout),n.push.apply(n,o.resources)}if(i.type.raName==="CustomRoutes"){var u=i;u.props.noLayout?r.push(u.props.children):t.push(u.props.children)}else i.type.raName==="Resource"&&n.push(i)}}),{customRoutesWithLayout:t,customRoutesWithoutLayout:r,resources:n})},AH=M.createContext(!1),FCe=AH.Provider,BCe=function(){return M.useContext(AH)},L1=function(){return L1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},L1.apply(this,arguments)},tz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},rz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},jCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},zCe=function(e){var t=lc(),r=pl(e),n=e.action,i=e.resources,o=jCe(e,["action","resources"]),u=Rp(L1({queryKey:["auth","canAccess",i,n,r],queryFn:function(d){return tz(void 0,[d],void 0,function(m){var v,w,x=m.signal;return rz(this,function(P){switch(P.label){case 0:return[4,Promise.all(i.map(function(T){return tz(void 0,void 0,void 0,function(){var O;return rz(this,function(L){switch(L.label){case 0:return!t||!t.canAccess?[2,{canAccess:!0,resource:T}]:[4,t.canAccess({resource:T,action:n,record:r,signal:t.supportAbortSignal?x:void 0})];case 1:return O=L.sent(),[2,{canAccess:O,resource:T}]}})})}))];case 1:return v=P.sent(),w=v.reduce(function(T,O){var L=O.resource,N=O.canAccess;return T[L]=N,T},{}),[2,w]}})})}},o)),a=M.useMemo(function(){return L1({canAccess:u.data},u)},[u]),p=M.useMemo(function(){return{canAccess:i.reduce(function(d,m){return d[m]=!0,d},{}),isPending:!1,isError:!1,error:null}},[i]);return!t||!t.canAccess?p:a},$Ce=function(){var e=X0().isPending,t=G0(),r=Object.keys(t).filter(function(a){return t[a].hasList}),n=zCe({action:"list",resources:r,enabled:!e}),i=n.canAccess,o=n.isPending,u=r.find(function(a){return i&&i[a]===!0});return{resource:u,isPending:o}},UCe=function(e){var t=e.loading,r=$Ce(),n=r.resource,i=r.isPending,o=V0();if(i)return M.createElement(t,null);if(n)return M.createElement(Lwe,{to:o({resource:n,type:"list"}),replace:!0})},qCe=function(e){uSe();var t=OCe(e.children),r=t.customRoutesWithLayout,n=t.customRoutesWithoutLayout,i=t.status,o=t.resources,u=e.layout,a=e.catchAll,p=e.dashboard,d=e.loading,m=e.requireAuth,v=e.ready,w=e.authenticationError,x=w===void 0?nz:w,P=e.accessDenied,T=P===void 0?nz:P,O=yR(void 0,!1,{enabled:m}),L=O.authenticated,N=O.isPending;if(i==="empty"){if(!v)throw new Error("The admin is empty. Please provide an empty component, or pass Resource or CustomRoutes as children.");return M.createElement(v,null)}return i==="loading"||m&&N?M.createElement(mv,null,n,M.createElement(Iu,{path:"*",element:M.createElement("div",{style:{height:"100vh"}},M.createElement(d,null))})):m&&(N||!L)?M.createElement(mv,null,n,M.createElement(Iu,{path:"*",element:M.createElement(MAe,null)})):M.createElement(mv,null,n,M.createElement(Iu,{path:"/*",element:M.createElement(FCe,{value:!!p},M.createElement(u,null,M.createElement(mv,null,r,M.Children.map(o,function(F){return M.createElement(Iu,{key:F.props.name,path:"".concat(F.props.name,"/*"),element:F})}),M.createElement(Iu,{path:"/",element:p?M.createElement(bAe,{authParams:VCe,component:p,loading:d}):M.createElement(UCe,{loading:d})}),M.createElement(Iu,{path:"/authentication-error",element:M.createElement(x,null)}),M.createElement(Iu,{path:"/access-denied",element:M.createElement(T,null)}),M.createElement(Iu,{path:"*",element:M.createElement(a,null)}))))}))},VCe={params:{route:"dashboard"}},nz=function(){return null},PH=M.createContext("React Admin"),GCe=PH.Provider,pR=function(){return M.useContext(PH)},HCe=function(e){var t=e.children;return M.createElement(M.Fragment,null,t)},WCe=function(e){var t=e.error,r=e.errorInfo,n=e.resetErrorBoundary;return VG(n),M.createElement("div",null,M.createElement("h1",null,"Error"),M.createElement("pre",null,t.message,r?.componentStack))},ZCe=function(e){var t=M.useState({}),r=t[0],n=t[1],i=e.authCallbackPage,o=i===void 0?!1:i,u=e.catchAll,a=u===void 0?n_:u,p=e.children,d=e.dashboard,m=e.disableTelemetry,v=m===void 0?!1:m,w=e.error,x=w===void 0?WCe:w,P=e.layout,T=P===void 0?HCe:P,O=e.loading,L=O===void 0?n_:O,N=e.loginPage,F=N===void 0?!1:N,D=e.ready,q=D===void 0?nAe:D,z=e.requireAuth,Z=z===void 0?!1:z,Q=e.title,Y=Q===void 0?"React Admin":Q,se=e.authenticationError,W=se===void 0?n_:se,G=e.accessDenied,ae=G===void 0?n_:G;M.useEffect(function(){if(!(v||typeof window>"u"||typeof window.location>"u"||typeof Image>"u")){var ue=new Image;ue.src="https://react-admin-telemetry.marmelab.com/react-admin-telemetry?domain=".concat(window.location.hostname)}},[v]);var le=function(ue,ye){return n(ye)};return M.createElement(GCe,{value:Y},M.createElement(wH,{onError:le,fallbackRender:function(ue){var ye=ue.error,Se=ue.resetErrorBoundary;return M.createElement("div",{style:{minHeight:"100vh"}},M.createElement(x,{error:ye,errorInfo:r,resetErrorBoundary:Se}))}},M.createElement(mv,null,F!==!1&&F!==!0?M.createElement(Iu,{path:"/login",element:iz(F)}):null,o!==!1&&o!==!0?M.createElement(Iu,{path:"/auth-callback",element:iz(o)}):null,M.createElement(Iu,{path:"/*",element:M.createElement(qCe,{catchAll:a,dashboard:d,layout:T,loading:L,requireAuth:Z,ready:q,authenticationError:W,accessDenied:ae},p)}))))},iz=function(e){return M.isValidElement(e)?e:M.createElement(e)},n_=function(){return null},TH=function(e){return null};TH.raName="CustomRoutes";var IH=function(e){var t=e.value,r=e.children;return t?M.createElement(cCe,{value:t},r):r},mR=M.createContext(void 0),KCe={getSource:function(e){return e},getLabel:function(e){return e}},XCe=mR.Provider,YCe=function(){var e=M.useContext(mR);return e||KCe},JCe=function(){return M.useContext(mR)},QCe=M.createContext(void 0),eAe=function(e){var t=e.children,r=e.value;return M.createElement(QCe.Provider,{value:r},t)},Ts={},az;function tAe(){if(az)return Ts;az=1;/*!
 * inflection
 * Copyright(c) 2011 Ben Lin <ben@dreamerslab.com>
 * MIT Licensed
 *
 * @fileoverview
 * A port of inflection-js to node.js module.
 */Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.pluralize=v,Ts.singularize=w,Ts.inflect=x,Ts.camelize=P,Ts.underscore=T,Ts.humanize=O,Ts.capitalize=L,Ts.dasherize=N,Ts.titleize=F,Ts.demodulize=D,Ts.tableize=q,Ts.classify=z,Ts.foreignKey=Z,Ts.ordinalize=Q,Ts.transform=se;const e=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","minus","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],t={plural:{men:new RegExp("^(m|wom)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),databases:new RegExp("(database)s$","gi"),drives:new RegExp("(drive)s$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),aves:new RegExp("([a])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopuses:new RegExp("(octop|vir)uses$","gi"),aliases:new RegExp("(alias|canvas|status|campus)es$","gi"),summonses:new RegExp("^(summons|bonus)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),criteria:new RegExp("^(criteri)a$","gi"),genera:new RegExp("^genera$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m|wom)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),drive:new RegExp("(drive)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status|canvas|campus)$","gi"),summons:new RegExp("^(summons|bonus)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),focus:new RegExp("^(focus)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),criterion:new RegExp("^(criteri)on$","gi"),genus:new RegExp("^genus$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},r=[[t.plural.men],[t.plural.people],[t.plural.children],[t.plural.tia],[t.plural.analyses],[t.plural.databases],[t.plural.drives],[t.plural.hives],[t.plural.curves],[t.plural.lrves],[t.plural.foves],[t.plural.aeiouyies],[t.plural.series],[t.plural.movies],[t.plural.xes],[t.plural.mice],[t.plural.buses],[t.plural.oes],[t.plural.shoes],[t.plural.crises],[t.plural.octopuses],[t.plural.aliases],[t.plural.summonses],[t.plural.oxen],[t.plural.matrices],[t.plural.feet],[t.plural.teeth],[t.plural.geese],[t.plural.quizzes],[t.plural.whereases],[t.plural.criteria],[t.plural.genera],[t.singular.man,"$1en"],[t.singular.person,"$1ople"],[t.singular.child,"$1ren"],[t.singular.drive,"$1s"],[t.singular.ox,"$1en"],[t.singular.axis,"$1es"],[t.singular.octopus,"$1uses"],[t.singular.alias,"$1es"],[t.singular.summons,"$1es"],[t.singular.bus,"$1ses"],[t.singular.buffalo,"$1oes"],[t.singular.tium,"$1a"],[t.singular.sis,"ses"],[t.singular.ffe,"$1$2ves"],[t.singular.focus,"$1es"],[t.singular.hive,"$1ves"],[t.singular.aeiouyy,"$1ies"],[t.singular.matrix,"$1ices"],[t.singular.vertex,"$1ices"],[t.singular.x,"$1es"],[t.singular.mouse,"$1ice"],[t.singular.foot,"feet"],[t.singular.tooth,"teeth"],[t.singular.goose,"geese"],[t.singular.quiz,"$1zes"],[t.singular.whereas,"$1es"],[t.singular.criterion,"$1a"],[t.singular.genus,"genera"],[t.singular.s,"s"],[t.singular.common,"s"]],n=[[t.singular.man],[t.singular.person],[t.singular.child],[t.singular.drive],[t.singular.ox],[t.singular.axis],[t.singular.octopus],[t.singular.alias],[t.singular.summons],[t.singular.bus],[t.singular.buffalo],[t.singular.tium],[t.singular.sis],[t.singular.ffe],[t.singular.focus],[t.singular.hive],[t.singular.aeiouyy],[t.singular.x],[t.singular.matrix],[t.singular.mouse],[t.singular.foot],[t.singular.tooth],[t.singular.goose],[t.singular.quiz],[t.singular.whereas],[t.singular.criterion],[t.singular.genus],[t.plural.men,"$1an"],[t.plural.people,"$1rson"],[t.plural.children,"$1"],[t.plural.databases,"$1"],[t.plural.drives,"$1"],[t.plural.genera,"genus"],[t.plural.criteria,"$1on"],[t.plural.tia,"$1um"],[t.plural.analyses,"$1$2sis"],[t.plural.hives,"$1ve"],[t.plural.curves,"$1"],[t.plural.lrves,"$1f"],[t.plural.aves,"$1ve"],[t.plural.foves,"$1fe"],[t.plural.movies,"$1ovie"],[t.plural.aeiouyies,"$1y"],[t.plural.series,"$1eries"],[t.plural.xes,"$1"],[t.plural.mice,"$1ouse"],[t.plural.buses,"$1"],[t.plural.oes,"$1"],[t.plural.shoes,"$1"],[t.plural.crises,"$1is"],[t.plural.octopuses,"$1us"],[t.plural.aliases,"$1"],[t.plural.summonses,"$1"],[t.plural.oxen,"$1"],[t.plural.matrices,"$1ix"],[t.plural.vertices,"$1ex"],[t.plural.feet,"foot"],[t.plural.teeth,"tooth"],[t.plural.geese,"goose"],[t.plural.quizzes,"$1"],[t.plural.whereases,"$1"],[t.plural.ss,"ss"],[t.plural.s,""]],i=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],o=new RegExp("(_ids|_id)$","g"),u=new RegExp("_","g"),a=new RegExp("[ _]","g"),p=new RegExp("([A-Z])","g"),d=new RegExp("^_");function m(W,G,ae,le){if(le)return le;if(ae.includes(W.toLocaleLowerCase()))return W;for(const ue of G)if(W.match(ue[0]))return ue[1]!==void 0?W.replace(ue[0],ue[1]):W;return W}function v(W,G){return m(W,r,e,G)}function w(W,G){return m(W,n,e,G)}function x(W,G,ae,le){return isNaN(G)?W:G===1?m(W,n,e,ae):m(W,r,e,le)}function P(W,G){const ae=W.split("/"),le=ae.length;let ue,ye,Se,ge;for(let xe=0;xe<le;xe++){for(ue=ae[xe].split("_"),ye=0,Se=ue.length;ye<Se;ye++)ye!==0&&(ue[ye]=ue[ye].toLowerCase()),ge=ue[ye].charAt(0),ge=G&&xe===0&&ye===0?ge.toLowerCase():ge.toUpperCase(),ue[ye]=ge+ue[ye].substring(1);ae[xe]=ue.join("")}return ae.join("::")}function T(W,G){if(G&&W===W.toUpperCase())return W;const ae=W.split("::"),le=ae.length;for(let ue=0;ue<le;ue++)ae[ue]=ae[ue].replace(p,"_$1"),ae[ue]=ae[ue].replace(d,"");return ae.join("/").toLowerCase()}function O(W,G){return W=W.toLowerCase(),W=W.replace(o,""),W=W.replace(u," "),G||(W=L(W)),W}function L(W){return W=W.toLowerCase(),W.substring(0,1).toUpperCase()+W.substring(1)}function N(W){return W.replace(a,"-")}function F(W){W=W.toLowerCase().replace(u," ");const G=W.split(" "),ae=G.length;let le,ue;for(let ye=0;ye<ae;ye++){le=G[ye].split("-"),ue=le.length;for(let Se=0;Se<ue;Se++)i.indexOf(le[Se].toLowerCase())<0&&(le[Se]=L(le[Se]));G[ye]=le.join("-")}return W=G.join(" "),W=W.substring(0,1).toUpperCase()+W.substring(1),W}function D(W){const G=W.split("::");return G[G.length-1]}function q(W){return W=T(W),W=v(W),W}function z(W){return W=P(W),W=w(W),W}function Z(W,G){return W=D(W),W=T(W)+(G?"":"_")+"id",W}function Q(W){const G=W.split(" "),ae=G.length;for(let le=0;le<ae;le++){const ue=parseInt(G[le],10);if(!isNaN(ue)){const ye=G[le].substring(G[le].length-2),Se=G[le].substring(G[le].length-1);let ge="th";ye!="11"&&ye!="12"&&ye!="13"&&(Se==="1"?ge="st":Se==="2"?ge="nd":Se==="3"&&(ge="rd")),G[le]+=ge}}return G.join(" ")}const Y={pluralize:v,singularize:w,camelize:P,underscore:T,humanize:O,capitalize:L,dasherize:N,titleize:F,demodulize:D,tableize:q,classify:z,foreignKey:Z,ordinalize:Q};function se(W,G){const ae=G.length;for(let le=0;le<ae;le++){const ue=G[le],ye=Y[ue];ye&&(W=ye(W))}return W}return Ts}var bp=tAe(),$g=function(){var e=Ti(),t=G0();return function(r,n){n===void 0&&(n=2);var i=t[r],o=e("resources.".concat(r,".name"),{smart_count:n,_:i&&i.options&&i.options.label?e(i.options.label,{smart_count:n,_:i.options.label}):bp.humanize(bp.inflect(r,n))});return o}},K0=function(e){var t=lu(e),r=G0(),n=e||{},i=n.hasCreate,o=n.hasEdit,u=n.hasList,a=n.hasShow,p=n.recordRepresentation,d=M.useMemo(function(){return oEe({},{hasCreate:i,hasEdit:o,hasList:u,hasShow:a,recordRepresentation:p},t?r[t]:{})},[t,r,i,o,u,a,p]);return d},Ug=function(e){var t=K0({resource:e}).recordRepresentation;return M.useCallback(function(r){return r?typeof t=="function"?t(r):typeof t=="string"?Pc(r,t):M.isValidElement(t)?t:r?.name!=null&&r?.name!==""?r.name:r?.title!=null&&r?.title!==""?r.title:r?.label!=null&&r?.label!==""?r.label:r?.reference!=null&&r?.reference!==""?r.reference:"#".concat(r.id):""},[t])},MH=function(e){var t=YCe();return t.getSource(e)},rAe=function(){var e=Ti(),t=lu(),r=JCe();return M.useCallback(function(n){var i=n.source,o=n.label,u=n.resource;return o===!1||o===""?null:o&&typeof o!="string"?o:e.apply(void 0,iAe({label:o,defaultLabel:i?r?.getLabel(i):void 0,resource:u,resourceFromContext:t,source:i}))},[t,e,r])},RH=function(e){var t=e.source,r=e.label,n=e.resource,i=e.isRequired,o=rAe();if(r===!0)throw new Error("Label parameter must be a string, a ReactElement or false");return r===!1||r===""?null:r!=null&&typeof r!="string"?r:M.createElement("span",null,o({label:r,resource:n,source:t}),i&&M.createElement("span",{"aria-hidden":"true"},"*"))};RH.displayName="FieldTitle";const OH=M.memo(RH),nAe=(function(){return M.createElement("span",null)}),gR=(function(e,t){});var iAe=function(e){if(!e)return[""];var t=e.label,r=e.defaultLabel,n=e.resource,i=e.resourceFromContext,o=e.source;if(typeof t<"u")return[t,{_:t}];if(typeof o>"u")return[""];var u=aAe(o),a=u.sourceWithoutDigits,p=u.sourceSuffix,d=bp.transform(p.replace(/\./g," "),["underscore","humanize"]);return n?[oz(n,a),{_:d}]:r?[r,{_:d}]:[oz(i||"undefined",a),{_:d}]},oz=function(e,t){return"resources.".concat(e,".fields.").concat(t)},aAe=function(e){var t=e.replace(/\.\d+\./g,"."),r=e.split("."),n;r.forEach(function(o,u){oAe(o)&&(n=u)});var i=n!=null?r.slice(n+1).join("."):e;return{sourceWithoutDigits:t,sourceSuffix:i}},oAe=function(e){for(var t=e.length-1;t>=0;t--){var r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0},sAe=typeof window<"u"?M.useLayoutEffect:M.useEffect,Co=function(e){var t=M.useRef(function(){throw new Error("Cannot call an event handler while rendering.")});return sAe(function(){t.current=e}),M.useCallback(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.current.apply(t,r)},[])},lAe=function(e){var t=e.defaultValue,r=e.source,n=pl(e);return Pc(n,r,t)};function Op(e,t){var r=b2(),n=r.getItem,i=r.setItem,o=r.subscribe,u=M.useState(function(){return n(e,t)}),a=u[0],p=u[1];M.useEffect(function(){var m=n(e,t);XM(a,m)||p(m);var v=o(e,function(w){p(typeof w>"u"?t:w)});return function(){return v()}},[e,o,t,n,a]);var d=Co(function(m,v){var w=typeof m=="function"?m(a):m;i(e,typeof w>"u"?typeof v>"u"?t:v:w)});return[a,d]}var uAe=function(e){var t=b2().removeItem;return M.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},cAe=function(e){var t=b2().removeItems;return M.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},fAe=function(){var e=b2().reset;return e},qg=function(){var e=lc(),t=If(),r=fAe(),n=ud(),i=M.useRef(n),o=dl(),u=M.useRef(o),a=mh(),p=ff("".concat(a,"/").concat(m2.loginUrl));M.useEffect(function(){u.current=o,i.current=n},[o,n]);var d=M.useCallback(function(m,v,w){return m===void 0&&(m={}),v===void 0&&(v=p),w===void 0&&(w=!0),e?e.logout(m).then(function(x){if(x===!1||v===!1){r(),t.clear();return}var P=x||v;if(P?.startsWith("http"))return r(),t.clear(),window.location.href=P,P;var T=P.split("?"),O={pathname:T[0]},L={};return w&&u.current&&u.current.pathname&&(L={state:{nextPathname:u.current.pathname,nextSearch:u.current.search}}),T[1]&&(O.search=T[1]),setTimeout(function(){i.current(O,L),r(),t.clear()},0),x}):(i.current({pathname:p},{state:{nextPathname:u.current&&u.current.pathname}}),r(),t.clear(),Promise.resolve())},[e,r,p,t]);return d},Wd=function(){return Wd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wd.apply(this,arguments)},hAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},dAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},pAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},sz={},yR=function(e,t,r){e===void 0&&(e=sz),t===void 0&&(t=!1),r===void 0&&(r=sz);var n=lc(),i=qg(),o=mh(),u=Rf(),a=r.onSuccess,p=r.onError,d=r.onSettled,m=pAe(r,["onSuccess","onError","onSettled"]),v=Rp(Wd({queryKey:["auth","checkAuth",e],queryFn:function(O){return hAe(void 0,[O],void 0,function(L){var N,F=L.signal;return dAe(this,function(D){switch(D.label){case 0:if(!n)return[2,!0];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,n.checkAuth(Wd(Wd({},e),{signal:F}))];case 2:return D.sent(),[2,!0];case 3:throw N=D.sent(),N??new Error;case 4:return[2]}})})},retry:!1},m)),w=Co(a??lz),x=Co(d??lz),P=Co(p??(function(O){if(t){var L=ff("".concat(o,"/").concat(m2.loginUrl));i({},O&&O.redirectTo!=null?O.redirectTo:L);var N=O&&O.message===!1;!N&&u(mAe(O,"ra.auth.auth_check_error"),{type:"error"})}}));M.useEffect(function(){v.data===void 0||v.isFetching||r.enabled!==!1&&w(v.data)},[w,v.data,v.isFetching,r.enabled]),M.useEffect(function(){v.error==null||v.isFetching||r.enabled!==!1&&P(v.error)},[P,v.error,v.isFetching,r.enabled]),M.useEffect(function(){v.status==="pending"||v.isFetching||r.enabled!==!1&&x(v.data,v.error)},[x,v.data,v.error,v.status,v.isFetching,r.enabled]);var T=M.useMemo(function(){return Wd(Wd({},v),{authenticated:v.error?!1:v.data})},[v]);return n!=null?T:kH},mAe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},lz=function(){},kH={authenticated:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(kH)}},gAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},X0=function(e){e===void 0&&(e={});var t=e.params,r=e.logoutOnFailure,n=r===void 0?!0:r,i=gAe(e,["params","logoutOnFailure"]);return yR(t??yAe,n,i)},yAe={},Rv=function(){return Rv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rv.apply(this,arguments)},vAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},uz=function(e){return M.Children.count(e)===0},bAe=function(e){var t=e.authParams,r=e.children,n=e.render,i=e.component,o=e.loading,u=o===void 0?null:o;e.staticContext;var a=vAe(e,["authParams","children","render","component","loading","staticContext"]);gR(n&&r&&!uz(r)||n&&i||i&&r&&!uz(r),"You should only use one of the `component`, `render` and `children` props in <WithPermissions>");var p=X0(t).isPending,d=SH(t,{enabled:!p}),m=d.permissions,v=d.isPending;if(p||v)return u?M.createElement(u,null):null;if(i)return M.createElement(i,Rv({permissions:m},a));if(n)return n(Rv({permissions:m},a));if(r)return r(Rv({permissions:m},a))},_Ae=function(){var e=lc(),t=If(),r=dl(),n=r.state,i=ud(),o=mh(),u=MG().resetNotifications,a=n&&n.nextPathname,p=n&&n.nextSearch,d=ff("".concat(o,"/").concat(m2.afterLoginUrl)),m=M.useCallback(function(v,w){return v===void 0&&(v={}),e?e.login(v).then(function(x){if(u(),t.invalidateQueries({queryKey:["auth","getPermissions"]}),x&&x.hasOwnProperty("redirectTo"))x&&i(x.redirectTo);else{var P=w||a+p||d;i(P)}return x}):(u(),i(d),Promise.resolve())},[e,t,i,a,p,u,d]);return m},xAe="AUTH_LOGIN",wAe="AUTH_CHECK",SAe="AUTH_ERROR",EAe="AUTH_LOGOUT",CAe="AUTH_GET_PERMISSIONS";const AAe=(function(e){var t=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.apply(null,r)};return t.login=function(r){return e(xAe,r)},t.logout=function(r){return e(EAe,r)},t.checkAuth=function(r){return e(wAe,r)},t.checkError=function(r){return e(SAe,r)},t.getPermissions=function(r){return e(CAe,r)},t});var Yf=function(){return Yf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Yf.apply(this,arguments)},PAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},TAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},IAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Y0=function(e){var t=lc(),r=lu(e);if(!r)throw new Error("useCanAccess must be used inside a <Resource> component or provide a resource prop");var n=pl(e);e.record;var i=IAe(e,["record"]),o=!!t?.canAccess,u=Rp(Yf({queryKey:["auth","canAccess",Yf(Yf({},i),{recordId:n?.id,resource:r})],queryFn:function(p){return PAe(void 0,[p],void 0,function(d){var m=d.signal;return TAe(this,function(v){return!t||!t.canAccess?[2,!0]:[2,t.canAccess(Yf(Yf({},e),{record:n,resource:r,signal:t.supportAbortSignal?m:void 0}))]})})},enabled:o},e)),a=M.useMemo(function(){return Yf(Yf({},u),{canAccess:u.data})},[u]);return o?a:LH},LH={canAccess:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(LH)}},MAe=function(){var e=qg();return M.useEffect(function(){e()},[e]),null},DH=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},NH=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},RAe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},OAe=function(){var e=lc(),t=Rf(),r=qg(),n=mh(),i=ff("".concat(n,"/").concat(m2.loginUrl)),o=M.useCallback(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return DH(void 0,RAe([],u,!0),void 0,function(p,d,m){var v,w;return p===void 0&&(p={}),d===void 0&&(d=!0),m===void 0&&(m=i),NH(this,function(x){switch(x.label){case 0:if(!e)return[2,kAe()];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,e.checkAuth(p)];case 2:return[2,x.sent()];case 3:throw v=x.sent(),d&&(r({},v&&v.redirectTo!=null?v.redirectTo:m),w=v&&v.message===!1,!w&&t(LAe(v,"ra.auth.auth_check_error"),{type:"error"})),v;case 4:return[2]}})})},[e,r,t,i]);return o},kAe=function(){return DH(void 0,void 0,void 0,function(){return NH(this,function(e){return[2,void 0]})})},LAe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},Ov=function(){return Ov=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ov.apply(this,arguments)},DAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},NAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},FAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},BAe={id:""},jAe={staleTime:300*1e3},zAe=function(e){e===void 0&&(e=jAe);var t=lc(),r=e.onSuccess,n=e.onError,i=e.onSettled,o=FAe(e,["onSuccess","onError","onSettled"]),u=Rp(Ov({queryKey:["auth","getIdentity"],queryFn:function(m){return DAe(void 0,[m],void 0,function(v){var w=v.signal;return NAe(this,function(x){return t&&typeof t.getIdentity=="function"?[2,t.getIdentity({signal:w})]:[2,BAe]})})}},o)),a=Co(r??uA),p=Co(n??uA),d=Co(i??uA);return M.useEffect(function(){u.data===void 0||u.isFetching||a(u.data)},[a,u.data,u.isFetching]),M.useEffect(function(){u.error==null||u.isFetching||p(u.error)},[p,u.error,u.isFetching]),M.useEffect(function(){u.status==="pending"||u.isFetching||d(u.data,u.error)},[d,u.data,u.error,u.status,u.isFetching]),M.useMemo(function(){return Ov(Ov({},u),{identity:u.data})},[u])},uA=function(){},qT=function(){return qT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qT.apply(this,arguments)},$Ae=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},UAe=function(e){var t=lc(),r=H0(),n=dl(),i=n.state,o=i&&i.nextPathname,u=i&&i.nextSearch,a=o?o+u:"/",p={},d=p.onSuccess,m=p.onError,v=p.onSettled,w=$Ae(p,["onSuccess","onError","onSettled"]),x,P=Rp(qT({queryKey:["auth","handleCallback"],queryFn:function(N){var F=N.signal;return x||(x=t&&typeof t.handleCallback=="function"?t.handleCallback({signal:F}).then(function(D){return D??null}):Promise.resolve()),x},retry:!1},w)),T=Co(d??(function(N){var F,D=localStorage.getItem(qAe),q=(F=N?.redirectTo)!==null&&F!==void 0?F:D;q!==!1&&r(q??a)})),O=Co(m??cz),L=Co(v??cz);return M.useEffect(function(){P.error==null||P.isFetching||O(P.error)},[O,P.error,P.isFetching]),M.useEffect(function(){P.data===void 0||P.isFetching||T(P.data)},[T,P.data,P.isFetching]),M.useEffect(function(){P.status==="pending"||P.isFetching||L(P.data,P.error)},[L,P.data,P.error,P.status,P.isFetching]),P},qAe="@react-admin/nextPathname",cz=function(){},VAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},FH=function(e){var t=e.action,r=VAe(e,["action"]),n=If(),i=lc(),o=lu(r);if(!i)return!1;var u=n.getQueryState(["auth","checkAuth",{}]),a=n.getQueryState(["auth","canAccess",{action:t,resource:o}]);return!!(u?.status==="pending"||i.canAccess&&a?.status==="pending")},GAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},BH=function(e){var t=Y0(e),r=t.canAccess;t.data;var n=t.error,i=GAe(t,["canAccess","data","error"]),o=ud(),u=mh();return M.useEffect(function(){i.isPending||r===!1&&o("".concat(u,"/access-denied"))},[u,r,o,i.isPending]),M.useEffect(function(){n&&o("".concat(u,"/authentication-error"))},[u,o,n]),i},jH=M.createContext(""),zH=function(e){var t=e.value,r=t===void 0?"":t,n=e.children;return M.createElement(jH.Provider,{value:r},n)},HAe=function(){return M.useContext(jH)};function $H(e,t){e===void 0&&(e=""),t===void 0&&(t=void 0);var r=HAe();if(!r)throw new Error("usePreference cannot be used outside of a Configurable component. Did you forget to wrap your component with <Configurable>? If you don't want to use Configurable, you can use the useStore hook instead.");return Op(r&&e?"".concat(r,".").concat(e):r??e,t)}var vR=function(){var e=M.useContext(xH);if(!e)throw new Error("usePreferencesEditor must be used within a PreferencesEditorContextProvider");return e},WAe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},ZAe=function(e,t){var r=$H(e,t),n=r[0],i=r[1],o=M.useState(n),u=o[0],a=o[1];M.useEffect(function(){a(n||t)},[n,t]);var p=function(v){a(v.target.value===""?t:v.target.value)},d=function(){i(u)},m=function(v){var w;if(v.key==="Enter"){i(u);var x=v.target.form;if(x){var P=WAe([],x,!0).indexOf(v.target);(w=x.elements[P+1])===null||w===void 0||w.focus()}v.preventDefault()}};return{value:u,onChange:p,onBlur:d,onKeyDown:m}},KAe=function(e,t){var r=vR();if(!r)throw new Error("useSetInspectorTitle cannot be called outside of a PreferencesEditorContext");var n=r.setTitle;M.useEffect(function(){n(e,t)},[e,JSON.stringify(t),n])};const bR=yi(ze.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}));var kv=function(){return kv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kv.apply(this,arguments)},UH=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Vg=function(e){var t=fi({props:e,name:qH}),r=t.alignIcon,n=r===void 0?"left":r,i=t.children,o=t.className,u=t.disabled,a=t.label,p=t.color,d=p===void 0?"primary":p,m=t.size,v=m===void 0?"small":m,w=t.to,x=UH(t,["alignIcon","children","className","disabled","label","color","size","to"]),P=Ti(),T=a;typeof a=="string"&&(T=P(a,{_:a}));var O=YAe(w),L=zu(function(N){return N.breakpoints.down("sm")});return L?a&&!u?M.createElement(Ag,{title:T},M.createElement(Go,kv({"aria-label":typeof T=="string"?T:void 0,className:o,color:d,size:"large"},O,x),i)):M.createElement(Go,kv({className:o,color:d,disabled:u,size:"large"},O,x),i):M.createElement(XAe,kv({className:o,color:d,size:v,"aria-label":typeof T=="string"?T:void 0,disabled:u,startIcon:n==="left"&&i?i:void 0,endIcon:n==="right"&&i?i:void 0},O,x),T)},qH="RaButton",XAe=er(Mc,{name:qH,overridesResolver:function(e,t){return t.root}})({"&.MuiButton-sizeSmall":{lineHeight:1.5}}),YAe=function(e){if(e!=null){if(typeof e=="string")return{to:e};var t=e.redirect,r=e.replace,n=e.state,i=UH(e,["redirect","replace","state"]);return{to:i,redirect:t,replace:r,state:n}}};const JAe=yi(ze.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}));var VT=function(){return VT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},VT.apply(this,arguments)},QAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ePe=function(e){var t=fi({props:e,name:VH}),r=t.icon,n=r===void 0?rPe:r,i=t.label;t.record,t.resource;var o=t.scrollToTop,u=o===void 0?!0:o,a=QAe(t,["icon","label","record","resource","scrollToTop"]),p=lu(t);if(!p)throw new Error("<ShowButton> components should be used inside a <Resource> component or provided the resource prop.");var d=pl(t),m=V0(),v=Y0({action:"show",resource:p,record:d}),w=v.canAccess,x=v.isPending,P=$g(),T=Ug(),O=T(d),L=typeof O=="string"?O:O?.toString(),N=lp({resourceI18nKey:"resources.".concat(p,".action.show"),baseI18nKey:"ra.action.show",options:{name:P(p,1),recordRepresentation:L},userText:i});return!d||!w||x?null:M.createElement(aPe,VT({component:zg,to:m({type:"show",resource:p,id:d.id}),state:tPe[String(u)],label:M.createElement(M.Fragment,null,N),"aria-label":typeof N=="string"?N:void 0,onClick:nPe},a),n)},tPe={true:{_scrollToTop:!0},false:{}},rPe=M.createElement(JAe,null),nPe=function(e){return e.stopPropagation()},iPe=M.memo(ePe,function(e,t){return e.resource===t.resource&&(e.record&&t.record?e.record.id===t.record.id:e.record==t.record)&&e.label===t.label&&e.disabled===t.disabled}),VH="RaShowButton",aPe=er(Vg,{name:VH,overridesResolver:function(e,t){return t.root}})({}),GT=function(){return GT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},GT.apply(this,arguments)},oPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},i_,sPe=function(e){var t=fi({props:e,name:Lv}),r=t.className,n=t.icon,i=n===void 0?uPe:n,o=t.textPrimary,u=o===void 0?"ra.page.access_denied":o,a=t.textSecondary,p=a===void 0?"ra.message.access_denied":a,d=oPe(t,["className","icon","textPrimary","textSecondary"]),m=Ti();return M.createElement(lPe,GT({className:Br(y0.root,r)},d),M.createElement("div",{className:y0.message},i,M.createElement(qo,{variant:"h5",sx:{mt:3,color:"text.secondary"}},m(u,{_:u})),M.createElement(qo,{variant:"body2"},m(p,{_:p}))))},Lv="RaAccessDenied",y0={root:"".concat(Lv,"-root"),icon:"".concat(Lv,"-icon"),message:"".concat(Lv,"-message")},lPe=er("div",{name:Lv,overridesResolver:function(e,t){return t.root}})((i_={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},i_["& .".concat(y0.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},i_["& .".concat(y0.icon)]={width:"9em",height:"9em"},i_)),uPe=M.createElement(bR,{className:y0.icon}),J0=function(){var e=zu(function(t){return t?.breakpoints.down("sm")},{noSsr:!0});return Op("sidebar.open",!e)},cPe=function(e){var t=fi({props:e,name:D1}),r=Ti(),n=t.className,i=J0(),o=i[0],u=i[1];return M.createElement(Ag,{className:n,title:r(o?"ra.action.close_menu":"ra.action.open_menu",{_:"Open/Close menu"}),enterDelay:500},M.createElement(fPe,{color:"inherit",onClick:function(){return u(!o)}},M.createElement(q1e,{classes:{root:o?N1.menuButtonIconOpen:N1.menuButtonIconClosed}})))},D1="RaSidebarToggleButton",N1={menuButtonIconClosed:"".concat(D1,"-menuButtonIconClosed"),menuButtonIconOpen:"".concat(D1,"-menuButtonIconOpen")},fPe=er(Go,{name:D1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(N1.menuButtonIconClosed)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},t["& .".concat(N1.menuButtonIconOpen)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},t}),HT=function(){return HT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},HT.apply(this,arguments)},hPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},a_,cA,dPe=function(e){var t=fi({props:e,name:Dv}),r=t.className,n=t.onClick,i=t.sx,o=hPe(t,["className","onClick","sx"]),u=DSe(),a=Sf();return M.createElement(pPe,{className:r,sx:i},M.createElement(I3e,{className:"".concat(og.loadedIcon," ").concat(u&&og.loadedLoading),onClick:n}),u&&M.createElement(Eg,HT({className:Br("app-loader",og.loader),color:"inherit",size:a.spacing(2),thickness:6},o)))},Dv="RaLoadingIndicator",og={loader:"".concat(Dv,"-loader"),loadedLoading:"".concat(Dv,"-loadedLoading"),loadedIcon:"".concat(Dv,"-loadedIcon")},pPe=er("div",{name:Dv,overridesResolver:function(e,t){return t.root}})((a_={position:"relative"},a_["& .".concat(og.loadedIcon)]=(cA={},cA["&.".concat(og.loadedLoading)]={opacity:0},cA),a_["& .".concat(og.loader)]={position:"absolute",top:"30%",left:"30%"},a_));const mPe=yi(ze.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),gPe=yi(ze.jsx("path",{d:"M13 3h-2v10h2zm4.83 2.17-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83"}));var WT=function(){return WT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},WT.apply(this,arguments)},yPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},fA,vPe=M.forwardRef(function(t,r){var n=fi({props:t,name:_R}),i=n.className,o=n.redirectTo,u=n.icon,a=yPe(n,["className","redirectTo","icon"]),p=yR().authenticated,d=zu(function(x){return x.breakpoints.down("sm")}),m=Ti(),v=qg(),w=M.useCallback(function(){return v(null,o,!1)},[o,v]);return p?M.createElement(bPe,WT({className:Br("logout",i),onClick:w,ref:r,component:d?"span":"li"},a),M.createElement(R0,{className:GH.icon},u||M.createElement(gPe,{fontSize:"small"})),M.createElement(jae,null,m("ra.auth.logout",{_:"Logout"}))):null}),_R="RaLogout",GH={icon:"".concat(_R,"-icon")},bPe=er(xI,{name:_R,overridesResolver:function(e,t){return t.root}})((fA={},fA["& .".concat(GH.icon)]={},fA)),HH=function(e){var t=fi({props:e,name:F1}),r=M.useState(null),n=r[0],i=r[1],o=Ti(),u=zAe(),a=u.isPending,p=u.identity,d=lc(),m=zu(function(z){return z.breakpoints.up("sm")}),v=t.children,w=v===void 0?d?M.createElement(vPe,null):null:v,x=t.className,P=t.label,T=P===void 0?"ra.auth.user_menu":P,O=t.icon,L=O===void 0?xPe:O,N=function(z){return i(z.currentTarget)},F=M.useCallback(function(){return i(null)},[]),D=M.useMemo(function(){return{onClose:F}},[F]);if(!w)return null;var q=!!n;return M.createElement(_Pe,{className:x},m&&!a&&p?.fullName?M.createElement(Mc,{"aria-label":T&&o(T,{_:T}),className:Nv.userButton,color:"inherit",startIcon:p.avatar?M.createElement(BP,{className:Nv.avatar,src:p.avatar,alt:p.fullName}):L,onClick:N,variant:"text"},p.fullName):M.createElement(Ag,{title:T&&o(T,{_:"Profile"})},M.createElement(Go,{"aria-label":T&&o(T,{_:"Profile"}),"aria-owns":q?"menu-appbar":void 0,"aria-haspopup":!0,color:"inherit",onClick:N},!a&&p?.avatar?M.createElement(BP,{className:Nv.avatar,src:p.avatar,alt:p.fullName}):L)),M.createElement(eAe,{value:D},M.createElement(_I,{id:"menu-appbar",disableScrollLock:!0,anchorEl:n,anchorOrigin:wPe,transformOrigin:SPe,open:q,onClose:F},w)))},F1="RaUserMenu",Nv={userButton:"".concat(F1,"-userButton"),avatar:"".concat(F1,"-avatar")},_Pe=er("div",{name:F1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(Nv.userButton)]={textTransform:"none",marginInlineStart:r.spacing(.5)},t["& .".concat(Nv.avatar)]={width:r.spacing(3),height:r.spacing(3)},t}),xPe=M.createElement(mPe,null),wPe={vertical:"bottom",horizontal:"right"},SPe={vertical:"top",horizontal:"right"},EPe=function(e){var t=e.children,r=e.className,n=H9();return M.createElement(k9,{appear:!1,direction:"down",in:!n,className:r},t)},ZT=function(){return ZT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZT.apply(this,arguments)},CPe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},APe=function(e){return M.createElement(qo,ZT({variant:"h6",color:"inherit",id:"react-admin-title"},e,{sx:CPe([{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}],Array.isArray(e.sx)?e.sx:[e.sx],!0)}))},WH=M.createContext({}),w2=function(e){var t={},r=t.lightTheme,n=t.darkTheme,i=t.defaultTheme,o=M.useContext(WH);return{lightTheme:r||o.lightTheme,darkTheme:n||o.darkTheme,defaultTheme:i??o.defaultTheme}};const PPe=yi(ze.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),TPe=yi(ze.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}));var ZH=function(e){var t=w2().darkTheme,r=zu("(prefers-color-scheme: dark)",{noSsr:!0}),n=Op("theme",e??(r&&t?"dark":"light")),i=n[0],o=n[1];return[t!=null?i:"light",o]},IPe=function(e){var t=e.children,r=w2(),n=r.lightTheme,i=r.darkTheme,o=r.defaultTheme,u=zu("(prefers-color-scheme: dark)",{noSsr:!0}),a=ZH(o||(u&&i?"dark":"light"))[0],p=M.useMemo(function(){try{return Yh(a==="dark"?i:n)}catch(d){return console.warn("Failed to reuse custom theme from store",d),Yh()}},[a,n,i]);return M.createElement(a9,{theme:p},t)},KH={typography:{h6:{fontWeight:400}},sidebar:{width:240,closedWidth:50},components:{MuiAutocomplete:{defaultProps:{fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiTextField:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiFormControl:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0}},MuiTableCell:{styleOverrides:{root:{"&.MuiTableCell-paddingCheckbox":{padding:"0 8px 0 8px"}}}},RaSimpleFormIterator:{defaultProps:{fullWidth:!0}},RaTranslatableInputs:{defaultProps:{fullWidth:!0}}}},XH=is(KH,{palette:{background:{default:"#fafafb"},secondary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}},components:{MuiFilledInput:{styleOverrides:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)","&$disabled":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}}}}),MPe=is(KH,{palette:{mode:"dark",primary:{main:"#90caf9"},background:{default:"#313131"}}}),KT=function(){return KT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KT.apply(this,arguments)},RPe=function(){var e=fi({props:{},name:YH}),t=Ti(),r=w2(),n=r.darkTheme,i=r.defaultTheme,o=zu("(prefers-color-scheme: dark)",{noSsr:!0}),u=ZH(i||(o&&n?"dark":"light")),a=u[0],p=u[1],d=function(){p(a==="dark"?"light":"dark")},m=t("ra.action.toggle_theme",{_:"Toggle Theme"});return Be.createElement(Ag,{title:m,enterDelay:300},Be.createElement(OPe,KT({color:"inherit",onClick:d,"aria-label":m},e),a==="dark"?Be.createElement(TPe,null):Be.createElement(PPe,null)))},YH="RaToggleThemeButton",OPe=er(Go,{name:YH,overridesResolver:function(e,t){return t.root}})({}),XT=function(){return XT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XT.apply(this,arguments)},kPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},JH=M.memo(function(e){var t=fi({props:e,name:Km}),r=t.alwaysOn,n=t.children,i=t.className,o=t.color,u=o===void 0?"secondary":o,a=t.toolbar,p=a===void 0?DPe:a,d=t.userMenu,m=d===void 0?NPe:d,v=t.container,w=v===void 0?r?"div":EPe:v,x=kPe(t,["alwaysOn","children","className","color","toolbar","userMenu","container"]),P=zu(function(T){return T.breakpoints.down("sm")});return M.createElement(w,{className:i},M.createElement(FPe,XT({className:np.appBar,color:u},x),M.createElement(AI,{disableGutters:!0,variant:P?"regular":"dense",className:np.toolbar},M.createElement(cPe,{className:np.menuButton}),M.Children.count(n)===0?M.createElement(APe,{className:np.title}):n,p,typeof m=="boolean"?m===!0?M.createElement(HH,null):null:m)))}),LPe=function(){var e=jG(),t=w2().darkTheme;return M.createElement(M.Fragment,null,e&&e.length>1?M.createElement(E3e,null):null,t&&M.createElement(RPe,null),M.createElement(dPe,null))},DPe=M.createElement(LPe,null),NPe=M.createElement(HH,null),Km="RaAppBar",np={appBar:"".concat(Km,"-appBar"),toolbar:"".concat(Km,"-toolbar"),menuButton:"".concat(Km,"-menuButton"),title:"".concat(Km,"-title")},FPe=er(Tte,{name:Km,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n=e.theme;return t={},t["& .".concat(np.toolbar)]=(r={padding:"0 ".concat(n.spacing(1))},r[n.breakpoints.down("md")]={minHeight:n.spacing(6)},r),t["& .".concat(np.menuButton)]={marginRight:"0.2em"},t["& .".concat(np.title)]={},t});const BPe=yi([ze.jsx("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),ze.jsx("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")]);var B1=function(){return B1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},B1.apply(this,arguments)},jPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},QH=function(e){var t=e.title,r=e.defaultTitle,n=e.className,i=jPe(e,["title","defaultTitle","className"]),o=Ti();return M.createElement("span",{className:n},t?typeof t=="string"?M.createElement("span",B1({},i),o(t,{_:t})):t:M.createElement("span",B1({},i),r))};const zPe=yi(ze.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}));var $Pe=function(e){var t=fi({props:e,name:Fv}),r=t.children,n=t.editor,i=t.preferenceKey,o=t.openButtonLabel,u=o===void 0?"ra.configurable.customize":o,a=t.sx,p="preferences.".concat(i),d=vR(),m=!!d,v=Ti(),w=d||{},x=w.isEnabled,P=w.setEditor,T=w.preferenceKey,O=w.setPreferenceKey,L=p===T,N=M.useRef(L),F=M.useRef(null),D=M.useState(!1),q=D[0],z=D[1];if(M.useEffect(function(){N.current=L},[L]),M.useEffect(function(){return function(){N.current&&(O&&O(null),P&&P(null))}},[P,O]),!m)return r;var Z=function(){if(!P)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");if(P(M.cloneElement(n,{preferenceKey:p,key:p})),!O)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");O(p)},Q=function(){z(!0)},Y=function(){z(!1)};return M.createElement(zH,{value:p},M.createElement(UPe,{className:Br(eh.root,x&&eh.editMode,L&&eh.editorActive),sx:a,ref:F,onMouseEnter:x?Q:void 0,onMouseLeave:x?Y:void 0},r),M.createElement(z9,{open:!!x&&(q||L),sx:{pointerEvents:"none","& .MuiPaper-root":{pointerEvents:"auto",borderRadius:10,padding:"2px",lineHeight:0,backgroundColor:"warning.light",color:"warning.contrastText","&:hover":{cursor:"pointer"}}},anchorEl:F.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},onClose:Y,PaperProps:{elevation:1,onMouseEnter:Q,onMouseLeave:Y,title:v(u),onClick:Z},disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:!0,disableScrollLock:!0,marginThreshold:8},M.createElement(zPe,{fontSize:"12px"})))},Fv="RaConfigurable",eh={root:"".concat(Fv,"-root"),editMode:"".concat(Fv,"-editMode"),editorActive:"".concat(Fv,"-editorActive")},UPe=er("span",{name:Fv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative",display:"inline-block"},t["&.".concat(eh.editMode)]={transition:r.transitions.create("outline"),outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 30%) solid 2px")},t["&.".concat(eh.editMode,":hover ")]={outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 50%) solid 2px")},t["&.".concat(eh.editMode,".").concat(eh.editorActive," , &.").concat(eh.editMode,".").concat(eh.editorActive,":hover ")]={outline:"".concat((r.vars||r).palette.warning.main," solid 2px")},t});const qPe=yi(ze.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),VPe=yi(ze.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}));var GPe=function(){var e=Ti();return KAe("ra.configurable.inspector.title",{_:"Inspector"}),M.createElement(qo,null,e("ra.configurable.inspector.content",{_:"Hover the application UI elements to configure them"}))},eW=function(){var e=vR(),t=e.isEnabled,r=e.disable,n=e.title,i=e.titleOptions,o=e.editor,u=e.preferenceKey,a=M.useRef(!1),p=cAe(u),d=Sf(),m=Ti(),v=M.useState(0),w=v[0],x=v[1],P=Op("ra.inspector.position",{x:document?.body.clientWidth-d.breakpoints.values.sm/2-8,y:8}),T=P[0],O=P[1],L=M.useState(),N=L[0],F=L[1],D=function(Z){var Q=document?.elementFromPoint(Z.clientX,Z.clientY);Q?.id==="inspector-dialog-title"&&(a.current=!0,Z.dataTransfer.effectAllowed="move",Z.dataTransfer.setData("inspector",""),setTimeout(function(){Z.target.classList.add("hide")},0),F({x:Z.clientX-T.x,y:Z.clientY-T.y}))},q=function(Z){a.current&&N&&(O({x:Z.clientX-N.x,y:Z.clientY-N.y}),Z.target.classList.remove("hide"),a.current=!1)};M.useEffect(function(){if(t){var Z=function(Q){Q.dataTransfer.types.includes("inspector")&&Q.preventDefault()};return document?.addEventListener("dragover",Z),function(){document?.removeEventListener("dragover",Z)}}},[t]),M.useEffect(function(){if(t){var Z=function(){window?.requestAnimationFrame(function(){O(function(Q){return{x:Math.min(Q.x,document?.body.clientWidth-d.breakpoints.values.sm/2-8),y:Math.min(Q.y,window?.innerHeight-50)}})})};return Z(),window?.addEventListener("resize",Z),function(){window?.removeEventListener("resize",Z)}}},[t,O,d.breakpoints.values.sm]);var z=function(){p(),x(function(Z){return Z+1})};return t?M.createElement(HPe,{className:Bv.modal,elevation:3,draggable:!0,onDragStart:D,onDragEnd:q,sx:{left:T.x,top:T.y}},M.createElement("div",{className:Bv.title},M.createElement(qo,{id:"inspector-dialog-title",variant:"overline",component:"div",sx:{py:1,px:2,flex:"1"}},n&&m(n,i)),M.createElement("span",{id:"inspector-toolbar"}),u&&M.createElement(Go,{"aria-label":m("ra.action.remove"),onClick:z,size:"small"},M.createElement(VPe,{fontSize:"inherit"})),M.createElement(Go,{"aria-label":m("ra.action.close"),onClick:r,size:"small",sx:{mr:1}},M.createElement(qPe,{fontSize:"inherit"}))),M.createElement("div",{className:Bv.content,key:w},M.createElement(zH,{value:u},o||M.createElement(GPe,null)))):null},B_="RaInspector",Bv={modal:"".concat(B_,"-modal"),title:"".concat(B_,"-title"),content:"".concat(B_,"-content")},HPe=er(Lc,{name:B_,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"fixed",zIndex:r.zIndex.modal+1,width:r.breakpoints.values.sm/2,transition:r.transitions.create(["height","width"]),"&.hide":{display:"none"}},t["& .".concat(Bv.title)]={display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},t["& .".concat(Bv.content)]={overflowY:"auto",maxHeight:"75vh",padding:r.spacing(2),paddingTop:0},t});eW.displayName="Inspector";var Gh=function(){return Gh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gh.apply(this,arguments)},tW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},WPe=function(){var e=ZAe("","");return M.createElement("form",null,M.createElement(G9,Gh({label:"title",variant:"filled",size:"small",fullWidth:!0,sx:{mb:1}},e)))},ZPe=function(e){var t=e.preferenceKey,r=e.title,n=e.defaultTitle,i=tW(e,["preferenceKey","title","defaultTitle"]),o=dl().pathname;return M.createElement($Pe,{editor:M.createElement(WPe,null),preferenceKey:t||"".concat(o,".title"),sx:{"&.RaConfigurable-editMode":{margin:"2px"}}},M.createElement(KPe,Gh({title:r,defaultTitle:n},i)))},KPe=function(e){var t=e.title,r=e.defaultTitle,n=tW(e,["title","defaultTitle"]),i=$H()[0],o=Ti(),u=pl();return typeof i=="string"?M.createElement("span",Gh({className:n.className},n),o(i,Gh(Gh({},u),{_:i}))):M.createElement(M.Fragment,null,M.createElement(QH,Gh({title:t,defaultTitle:r},n)))},j1=function(){return j1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},j1.apply(this,arguments)},XPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Q0=function(e){var t=e.defaultTitle,r=e.title,n=e.preferenceKey,i=XPe(e,["defaultTitle","title","preferenceKey"]),o=M.useState(function(){return typeof document<"u"?document.getElementById("react-admin-title"):null}),u=o[0],a=o[1];if(M.useEffect(function(){a(function(d){var m=typeof document<"u"&&document.body.contains(d);return d&&m?d:typeof document<"u"?document.getElementById("react-admin-title"):null})},[]),!u)return null;gR(!t&&!r,"Missing title prop in <Title> element");var p=n===!1?M.createElement(QH,j1({title:r,defaultTitle:t},i)):M.createElement(ZPe,j1({title:r,defaultTitle:t,preferenceKey:n},i));return M.createElement(M.Fragment,null,Rx.createPortal(p,u))},YT=function(){return YT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},YT.apply(this,arguments)},YPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},o_,JPe=function(e){var t=fi({props:e,name:jv}),r=t.className,n=t.icon,i=n===void 0?eTe:n,o=t.textPrimary,u=o===void 0?"ra.page.authentication_error":o,a=t.textSecondary,p=a===void 0?"ra.message.authentication_error":a,d=YPe(t,["className","icon","textPrimary","textSecondary"]),m=Ti(),v=pR();return M.createElement(QPe,YT({className:Br(v0.root,r)},d),M.createElement(Q0,{defaultTitle:v}),M.createElement("div",{className:v0.message},i,M.createElement(qo,{variant:"h5",sx:{mt:3,color:"text.secondary"}},m(u,{_:u})),M.createElement(qo,{variant:"body2"},m(p,{_:p}))))},jv="RaAuthenticationError",v0={root:"".concat(jv,"-root"),icon:"".concat(jv,"-icon"),message:"".concat(jv,"-message")},QPe=er("div",{name:jv,overridesResolver:function(e,t){return t.root}})((o_={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},o_["& .".concat(v0.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},o_["& .".concat(v0.icon)]={width:"9em",height:"9em"},o_)),eTe=M.createElement(BPe,{className:v0.icon});const tTe=yi(ze.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),rTe=yi(ze.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}));var zv=function(){return zv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zv.apply(this,arguments)},nTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},iTe=function(e){var t,r=fi({props:e,name:z1}),n=r.className,i=r.isOpen,o=i===void 0?!1:i,u=r.loading,a=r.title,p=r.content,d=r.cancel,m=d===void 0?"ra.action.cancel":d,v=r.confirm,w=v===void 0?"ra.action.confirm":v,x=r.confirmColor,P=x===void 0?"primary":x,T=r.ConfirmIcon,O=T===void 0?tTe:T,L=r.CancelIcon,N=L===void 0?rTe:L,F=r.onClose,D=r.onConfirm,q=r.translateOptions,z=q===void 0?{}:q,Z=r.titleTranslateOptions,Q=Z===void 0?z:Z,Y=r.contentTranslateOptions,se=Y===void 0?z:Y,W=nTe(r,["className","isOpen","loading","title","content","cancel","confirm","confirmColor","ConfirmIcon","CancelIcon","onClose","onConfirm","translateOptions","titleTranslateOptions","contentTranslateOptions"]),G=Ti(),ae=M.useCallback(function(ue){ue.stopPropagation(),D(ue)},[D]),le=M.useCallback(function(ue){ue.stopPropagation()},[]);return M.createElement(aTe,zv({className:n,open:o,onClose:F,onClick:le,"aria-labelledby":"alert-dialog-title"},W),M.createElement(Nie,{id:"alert-dialog-title"},typeof a=="string"?G(a,zv({_:a},Q)):a),M.createElement(Iie,null,typeof p=="string"?M.createElement(kie,null,G(p,zv({_:p},se))):p),M.createElement(Sie,null,M.createElement(Mc,{disabled:u,onClick:F,startIcon:M.createElement(N,null)},G(m,{_:m})),M.createElement(Mc,{disabled:u,onClick:ae,className:Br("ra-confirm",(t={},t[$1.confirmWarning]=P==="warning",t[$1.confirmPrimary]=P==="primary",t)),autoFocus:!0,startIcon:M.createElement(O,null)},G(w,{_:w}))))},z1="RaConfirm",$1={confirmPrimary:"".concat(z1,"-confirmPrimary"),confirmWarning:"".concat(z1,"-confirmWarning")},aTe=er(bie,{name:z1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat($1.confirmPrimary)]={color:(r.vars||r).palette.primary.main},t["& .".concat($1.confirmWarning)]={color:(r.vars||r).palette.error.main,"&:hover":{backgroundColor:"color-mix(in srgb, ".concat((r.vars||r).palette.error.main,", transparent 12%)"),"@media (hover: none)":{backgroundColor:"transparent"}}},t});const oTe=yi(ze.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),rW=["shift","alt","meta","mod","ctrl","control"],sTe={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Zh(e){return(sTe[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function nW(e){return rW.includes(e)}function hA(e,t=","){return e.toLowerCase().split(t)}function dA(e,t="+",r=">",n=!1,i){let o=[],u=!1;e.includes(r)?(u=!0,o=e.toLocaleLowerCase().split(r).map(d=>Zh(d))):o=e.toLocaleLowerCase().split(t).map(d=>Zh(d));const a={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod"),useKey:n},p=o.filter(d=>!rW.includes(d));return{...a,keys:p,description:i,isSequence:u}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&iW([Zh(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&aW([Zh(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{ah.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{ah.clear()},0)}));const ah=new Set;function xR(e){return Array.isArray(e)}function lTe(e,t=","){return(xR(e)?e:e.split(t)).every(r=>ah.has(r.trim().toLowerCase()))}function iW(e){const t=Array.isArray(e)?e:[e];ah.has("meta")&&ah.forEach(r=>!nW(r)&&ah.delete(r.toLowerCase())),t.forEach(r=>ah.add(r.toLowerCase()))}function aW(e){const t=Array.isArray(e)?e:[e];e==="meta"?ah.clear():t.forEach(r=>ah.delete(r.toLowerCase()))}function uTe(e,t,r){(typeof r=="function"&&r(e,t)||r===!0)&&e.preventDefault()}function cTe(e,t,r){return typeof r=="function"?r(e,t):r===!0||r===void 0}function fTe(e){return oW(e,["input","textarea","select"])}function oW(e,t=!1){const{target:r,composed:n}=e;let i;return hTe(r)&&n?i=e.composedPath()[0]&&e.composedPath()[0].tagName:i=r&&r.tagName,xR(t)?!!(i&&t&&t.some(o=>o.toLowerCase()===i.toLowerCase())):!!(i&&t&&t)}function hTe(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function dTe(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(r=>t.includes(r))||e.includes("*"):!0}const pTe=(e,t,r=!1)=>{const{alt:n,meta:i,mod:o,shift:u,ctrl:a,keys:p,useKey:d}=t,{code:m,key:v,ctrlKey:w,metaKey:x,shiftKey:P,altKey:T}=e,O=Zh(m);if(d&&p?.length===1&&p.includes(v))return!0;if(!(p!=null&&p.includes(O))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(O))return!1;if(!r){if(n!==T&&O!=="alt"||u!==P&&O!=="shift")return!1;if(o){if(!x&&!w)return!1}else if(i!==x&&O!=="meta"&&O!=="os"||a!==w&&O!=="ctrl"&&O!=="control")return!1}return p&&p.length===1&&p.includes(O)?!0:p?lTe(p):!p},mTe=M.createContext(void 0),gTe=()=>M.useContext(mTe);function sW(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((r,n)=>r&&sW(e[n],t[n]),!0):e===t}const yTe=M.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),vTe=()=>M.useContext(yTe);function bTe(e){const t=M.useRef(void 0);return sW(t.current,e)||(t.current=e),t.current}const fz=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},_Te=typeof window<"u"?M.useLayoutEffect:M.useEffect;function xTe(e,t,r,n){const i=M.useRef(null),o=M.useRef(!1),u=r instanceof Array?n instanceof Array?void 0:n:r,a=xR(e)?e.join(u?.delimiter):e,p=r instanceof Array?r:n instanceof Array?n:void 0,d=M.useCallback(t,p??[]),m=M.useRef(d);p?m.current=d:m.current=t;const v=bTe(u),{activeScopes:w}=vTe(),x=gTe();return _Te(()=>{if(v?.enabled===!1||!dTe(w,v?.scopes))return;let P=[],T;const O=(D,q=!1)=>{var z;if(!(fTe(D)&&!oW(D,v?.enableOnFormTags))){if(i.current!==null){const Z=i.current.getRootNode();if((Z instanceof Document||Z instanceof ShadowRoot)&&Z.activeElement!==i.current&&!i.current.contains(Z.activeElement)){fz(D);return}}(z=D.target)!=null&&z.isContentEditable&&!(v!=null&&v.enableOnContentEditable)||hA(a,v?.delimiter).forEach(Z=>{var Q,Y,se,W;if(Z.includes(v?.splitKey??"+")&&Z.includes(v?.sequenceSplitKey??">")){console.warn(`Hotkey ${Z} contains both ${v?.splitKey??"+"} and ${v?.sequenceSplitKey??">"} which is not supported.`);return}const G=dA(Z,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description);if(G.isSequence){T=setTimeout(()=>{P=[]},v?.sequenceTimeoutMs??1e3);const ae=G.useKey?D.key:Zh(D.code);if(nW(ae.toLowerCase()))return;P.push(ae);const le=(Q=G.keys)==null?void 0:Q[P.length-1];if(ae!==le){P=[],T&&clearTimeout(T);return}P.length===((Y=G.keys)==null?void 0:Y.length)&&(m.current(D,G),T&&clearTimeout(T),P=[])}else if(pTe(D,G,v?.ignoreModifiers)||(se=G.keys)!=null&&se.includes("*")){if((W=v?.ignoreEventWhen)!=null&&W.call(v,D)||q&&o.current)return;if(uTe(D,G,v?.preventDefault),!cTe(D,G,v?.enabled)){fz(D);return}m.current(D,G),q||(o.current=!0)}})}},L=D=>{D.code!==void 0&&(iW(Zh(D.code)),(v?.keydown===void 0&&v?.keyup!==!0||v!=null&&v.keydown)&&O(D))},N=D=>{D.code!==void 0&&(aW(Zh(D.code)),o.current=!1,v!=null&&v.keyup&&O(D,!0))},F=i.current||u?.document||document;return F.addEventListener("keyup",N,u?.eventListenerOptions),F.addEventListener("keydown",L,u?.eventListenerOptions),x&&hA(a,v?.delimiter).forEach(D=>x.addHotkey(dA(D,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description))),()=>{F.removeEventListener("keyup",N,u?.eventListenerOptions),F.removeEventListener("keydown",L,u?.eventListenerOptions),x&&hA(a,v?.delimiter).forEach(D=>x.removeHotkey(dA(D,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description))),P=[],T&&clearTimeout(T)}},[a,v,w]),i}var JT=function(){return JT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},JT.apply(this,arguments)},wTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},STe=function(e){var t=e.className,r=e.keyboardShortcut,n=wTe(e,["className","keyboardShortcut"]);return r?M.createElement(ETe,JT({className:Br(QT.root,t)},n),r.split(">").map(function(i,o,u){return M.createElement(M.Fragment,{key:"".concat(i,"-").concat(o)},i.split("+").map(function(a,p){return M.createElement(M.Fragment,{key:"".concat(a,"-").concat(p)},M.createElement(qo,{component:"kbd",className:QT.kbd,key:a},hz[a]?hz[a]:a.toUpperCase()))}),o<u.length-1?M.createElement(M.Fragment,null,""):null)})):null},hz={meta:"",mod:"",ctrl:"",shift:"",alt:"",enter:"",esc:"",escape:"",backspace:"",delete:"",tab:"",space:"",up:"",down:"",left:"",right:"",home:"",end:"",pageup:"",pagedown:""},dz="RaKeyboardShortcut",QT={root:"".concat(dz,"-root"),kbd:"".concat(dz,"-kbd")},ETe=er("div")(function(e){var t,r=e.theme;return t={opacity:.7},t["& .".concat(QT.kbd)]={padding:"4px 5px",display:"inline-block",whiteSpace:"nowrap",margin:"0 1px",fontSize:"11px",lineHeight:"10px",color:r.palette.text.primary,verticalAlign:"middle",border:"1px solid ".concat(r.palette.divider),borderRadius:6,boxShadow:"inset 0 -1px 0 ".concat(r.palette.divider)},t}),b0=function(){return b0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b0.apply(this,arguments)},CTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},wR=M.forwardRef(function(e,t){var r=fi({props:e,name:Xm}),n=r.className,i=r.primaryText,o=r.leftIcon,u=r.onClick;r.sidebarIsOpen;var a=r.tooltipProps,p=r.children,d=r.keyboardShortcut,m=r.keyboardShortcutRepresentation,v=CTe(r,["className","primaryText","leftIcon","onClick","sidebarIsOpen","tooltipProps","children","keyboardShortcut","keyboardShortcutRepresentation"]),w=zu(function(Y){return Y.breakpoints.down("md")}),x=Ti(),P=mh(),T=J0(),O=T[0],L=T[1],N=M.useCallback(function(Y){w&&L(!1),u&&u(Y)},[L,w,u]),F=(typeof r.to=="string"?r.to:r.to.pathname)||"",D=pwe({path:F,end:F==="".concat(P,"/")}),q=M.useRef(null),z=Ao(q,t),Z=Co(function(){var Y;return(Y=q.current)===null||Y===void 0?void 0:Y.click()});xTe(d??[],Z,{enabled:d!=null});var Q=function(){var Y;return Be.createElement(ATe,b0({className:Br(n,hf.root,(Y={},Y[hf.active]=!!D,Y)),component:PTe,ref:z,tabIndex:0},v,{onClick:N}),o&&Be.createElement(R0,{className:hf.icon},o),Be.createElement(qo,{variant:"inherit",noWrap:!0,sx:{flexGrow:1}},p||(typeof i=="string"?x(i,{_:i}):i)),d?m??Be.createElement(STe,{className:hf.shortcut,keyboardShortcut:d}):null)};return O?Q():Be.createElement(Ag,b0({title:typeof i=="string"?x(i,{_:i}):i,placement:"right"},a),Q())}),Xm="RaMenuItemLink",hf={root:"".concat(Xm,"-root"),active:"".concat(Xm,"-active"),icon:"".concat(Xm,"-icon"),shortcut:"".concat(Xm,"-shortcut")},ATe=er(xI,{name:Xm,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={color:(r.vars||r).palette.text.secondary},t["& .".concat(hf.icon)]={color:(r.vars||r).palette.text.secondary},t["& .".concat(hf.shortcut)]={color:(r.vars||r).palette.text.secondary,fontSize:r.typography.body2.fontSize,opacity:0,display:"none",transition:"opacity 0.3s"},t["&:hover .".concat(hf.shortcut)]={opacity:.7,display:"inline-flex"},t["&.".concat(hf.active)]={color:(r.vars||r).palette.text.primary},t["& .".concat(hf.icon)]={minWidth:r.spacing(5)},t[".MuiList-dense > & > .".concat(hf.icon)]={minWidth:r.spacing(3.5)},t}),PTe=M.forwardRef(function(e,t){return Be.createElement(zg,b0({ref:t},e))}),e3=function(){return e3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},e3.apply(this,arguments)},TTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lW=function(e){var t=mh(),r=e.leftIcon,n=r===void 0?Be.createElement(oTe,null):r,i=e.to,o=i===void 0?"".concat(t,"/"):i,u=e.primaryText,a=u===void 0?"ra.page.dashboard":u,p=TTe(e,["leftIcon","to","primaryText"]);return Be.createElement(wR,e3({leftIcon:n,to:o,primaryText:a},p))};const ITe=yi(ze.jsx("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"})),uW=yi(ze.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}));var t3=function(){return t3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t3.apply(this,arguments)},MTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},cW=function(e){var t=fi({props:e,name:Jf}),r=t.error,n=t.errorComponent,i=t.errorInfo,o=t.resetErrorBoundary,u=t.className,a=MTe(t,["error","errorComponent","errorInfo","resetErrorBoundary","className"]),p=Ti(),d=pR();return VG(o),n?M.createElement(n,{error:r,errorInfo:i,title:d}):M.createElement(M.Fragment,null,d&&M.createElement(Q0,{title:d}),M.createElement(RTe,t3({className:u},a),M.createElement("h1",{className:lf.title,role:"alert"},M.createElement(ITe,{className:lf.icon}),p("ra.page.error")),M.createElement("div",null,p("ra.message.error")),!1,M.createElement("div",{className:lf.toolbar},M.createElement(Mc,{variant:"contained",startIcon:M.createElement(uW,null),onClick:OTe},p("ra.action.back")))))},Jf="RaError",lf={title:"".concat(Jf,"-title"),icon:"".concat(Jf,"-icon"),panel:"".concat(Jf,"-panel"),panelSummary:"".concat(Jf,"-panelSummary"),panelDetails:"".concat(Jf,"-panelDetails"),toolbar:"".concat(Jf,"-toolbar"),advice:"".concat(Jf,"-advice")},RTe=er("div",{name:Jf,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},t[r.breakpoints.down("md")]={padding:"1em"},t.fontFamily="Roboto, sans-serif",t.opacity=.5,t["& .".concat(lf.title)]={display:"flex",alignItems:"center"},t["& .".concat(lf.icon)]={width:"2em",height:"2em",marginRight:"0.5em"},t["& .".concat(lf.panel)]={marginTop:"1em",maxWidth:"60em"},t["& .".concat(lf.panelSummary)]={userSelect:"all"},t["& .".concat(lf.panelDetails)]={whiteSpace:"pre-wrap"},t["& .".concat(lf.toolbar)]={marginTop:"2em"},t["& .".concat(lf.advice)]={marginTop:"2em"},t});function OTe(){window.history.go(-1)}var U1=function(){return U1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},U1.apply(this,arguments)},kTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},fW=function(e){var t=fi({props:e,name:js}),r=t.appBarAlwaysOn,n=t.children;t.closedSize,t.size;var i=kTe(t,["appBarAlwaysOn","children","closedSize","size"]),o=zu(function(v){return v.breakpoints.down("sm")}),u=J0(),a=u[0],p=u[1];tSe();var d=H9(),m=function(){return p(!a)};return o?M.createElement(pz,U1({variant:"temporary",open:a,onClose:m,classes:zs},i),n):M.createElement(pz,U1({variant:"permanent",open:a,onClose:m,classes:zs,className:Br(d&&!r?zs.appBarCollapsed:"",a?LTe:DTe)},i),M.createElement("div",{className:zs.fixed},n))},js="RaSidebar",zs={docked:"".concat(js,"-docked"),paper:"".concat(js,"-paper"),paperAnchorLeft:"".concat(js,"-paperAnchorLeft"),paperAnchorRight:"".concat(js,"-paperAnchorRight"),paperAnchorTop:"".concat(js,"-paperAnchorTop"),paperAnchorBottom:"".concat(js,"-paperAnchorBottom"),paperAnchorDockedLeft:"".concat(js,"-paperAnchorDockedLeft"),paperAnchorDockedTop:"".concat(js,"-paperAnchorDockedTop"),paperAnchorDockedRight:"".concat(js,"-paperAnchorDockedRight"),paperAnchorDockedBottom:"".concat(js,"-paperAnchorDockedBottom"),modal:"".concat(js,"-modal"),fixed:"".concat(js,"-fixed"),appBarCollapsed:"".concat(js,"-appBarCollapsed")},LTe="".concat(js,"-open"),DTe="".concat(js,"-closed"),pz=er(Hie,{name:js,slot:"Root",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(){return!0}})(function(e){var t,r,n,i=e.open,o=e.theme;return t={height:"calc(100vh - 3em)",marginTop:0,transition:o.transitions.create("margin",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.enteringScreen})},t["&.".concat(zs.appBarCollapsed)]=(r={marginTop:o.spacing(-6)},r[o.breakpoints.down("sm")]={marginTop:o.spacing(-7)},r.transition=o.transitions.create("margin",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen}),r),t["& .".concat(zs.docked)]={},t["& .".concat(zs.paper)]={},t["& .".concat(zs.paperAnchorLeft)]={},t["& .".concat(zs.paperAnchorRight)]={},t["& .".concat(zs.paperAnchorTop)]={},t["& .".concat(zs.paperAnchorBottom)]={},t["& .".concat(zs.paperAnchorDockedLeft)]={},t["& .".concat(zs.paperAnchorDockedTop)]={},t["& .".concat(zs.paperAnchorDockedRight)]={},t["& .".concat(zs.paperAnchorDockedBottom)]={},t["& .".concat(zs.modal)]={},t["& .".concat(zs.fixed)]={position:"fixed",height:"calc(100vh - 3em)",overflowX:"hidden",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}},t["& .MuiPaper-root"]=(n={position:"relative",width:i?Pc(o,"sidebar.width",hW):Pc(o,"sidebar.closedWidth",dW),transition:o.transitions.create("width",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen}),backgroundColor:"transparent",borderRight:"none"},n[o.breakpoints.only("xs")]={marginTop:0,height:"100vh",position:"inherit",backgroundColor:(o.vars||o).palette.background.default},n[o.breakpoints.up("md")]={border:"none"},n.zIndex="inherit",n),t}),hW=240,dW=55;const NTe=yi(ze.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}));var r3=function(){return r3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r3.apply(this,arguments)},FTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},pW=function(e){var t=e.name,r=FTe(e,["name"]),n=G0(),i=Y0({action:"list",resource:t}),o=i.canAccess,u=i.error,a=i.isPending,p=$g(),d=V0();return!n||!n[t]||a||o===!1||u!=null?null:M.createElement(wR,r3({to:d({resource:t,type:"list"}),state:{_scrollToTop:!0},primaryText:M.createElement(M.Fragment,null,p(t,2)),leftIcon:n[t].icon?M.createElement(n[t].icon):M.createElement(NTe,null)},r))},mW=function(){var e=G0();return M.createElement(M.Fragment,null,Object.keys(e).filter(function(t){return e[t].hasList}).map(function(t){return M.createElement(pW,{key:t,name:t})}))},n3=function(){return n3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},n3.apply(this,arguments)},BTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Gg=function(e){var t,r=fi({props:e,name:q1}),n=r.children,i=r.className;r.hasDashboard;var o=BTe(r,["children","className","hasDashboard"]),u=BCe(),a=J0()[0];return M.createElement(jTe,n3({className:Br((t={},t[V1.open]=a,t[V1.closed]=!a,t),i)},o),u&&!n&&M.createElement(lW,null),n??M.createElement(mW,null))};Gg.Item=wR;Gg.DashboardItem=lW;Gg.ResourceItem=pW;Gg.ResourceItems=mW;var q1="RaMenu",V1={open:"".concat(q1,"-open"),closed:"".concat(q1,"-closed")},jTe=er(B9,{name:q1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"flex-start"},t[r.breakpoints.only("xs")]={marginTop:0},t.transition=r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),t["&.".concat(V1.open)]={width:Pc(r,"sidebar.width",hW)},t["&.".concat(V1.closed)]={width:Pc(r,"sidebar.closedWidth",dW)},t}),i3=function(){return i3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i3.apply(this,arguments)},zTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Hg=function(e){var t=fi({props:e,name:G1}),r=t.className,n=t.loadingPrimary,i=n===void 0?"ra.page.loading":n,o=t.loadingSecondary,u=o===void 0?"ra.message.loading":o,a=t.timeout,p=a===void 0?1e3:a,d=zTe(t,["className","loadingPrimary","loadingSecondary","timeout"]),m=nEe(p),v=Ti();return m?M.createElement($Te,i3({className:r},d),M.createElement("div",{className:H1.message},M.createElement(Eg,{className:H1.icon}),M.createElement(qo,{variant:"h5",sx:{mt:3,color:"text.secondary"}},v(i,{_:i})),M.createElement(qo,{variant:"body2"},v(u,{_:u})))):null},G1="RaLoading",H1={icon:"".concat(G1,"-icon"),message:"".concat(G1,"-message")},$Te=er("div",{name:G1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},t["& .".concat(H1.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",color:(r.vars||r).palette.text.disabled,paddingTop:"1em",paddingBottom:"1em"},t["& .".concat(H1.icon)]={width:"9em",height:"9em"},t}),a3=function(){return a3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a3.apply(this,arguments)},UTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},qTe=function(e){var t=fi({props:e,name:$v}),r=t.appBar,n=r===void 0?JH:r,i=t.appBarAlwaysOn,o=t.children,u=t.className,a=t.error,p=t.menu,d=p===void 0?Gg:p,m=t.sidebar,v=m===void 0?fW:m,w=UTe(t,["appBar","appBarAlwaysOn","children","className","error","menu","sidebar"]),x=M.useState(void 0),P=x[0],T=x[1],O=function(L,N){T(N)};return Be.createElement(VTe,a3({className:Br("layout",u)},w),Be.createElement(B3e,null),Be.createElement("div",{className:sg.appFrame},Be.createElement(n,{alwaysOn:i}),Be.createElement("main",{className:sg.contentWithSidebar},Be.createElement(v,{appBarAlwaysOn:i},Be.createElement(d,null)),Be.createElement("div",{id:"main-content",className:sg.content},Be.createElement(wH,{onError:O,fallbackRender:function(L){var N=L.error,F=L.resetErrorBoundary;return Be.createElement(cW,{error:N,errorComponent:a,errorInfo:P,resetErrorBoundary:F})}},Be.createElement(M.Suspense,{fallback:Be.createElement(Hg,null)},o)))),Be.createElement(eW,null)))},$v="RaLayout",sg={appFrame:"".concat($v,"-appFrame"),contentWithSidebar:"".concat($v,"-contentWithSidebar"),content:"".concat($v,"-content")},VTe=er("div",{name:$v,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n,i=e.theme;return t={display:"flex",flexDirection:"column",zIndex:1,minHeight:"100vh",backgroundColor:(i.vars||i).palette.background.default,position:"relative",minWidth:"fit-content",width:"100%"},t["& .".concat(sg.appFrame)]=(r={display:"flex",flexDirection:"column",flexGrow:1,marginTop:i.spacing(6)},r[i.breakpoints.down("sm")]={marginTop:i.spacing(7)},r),t["& .".concat(sg.contentWithSidebar)]={display:"flex",flexGrow:1,transition:i.transitions.create("margin",{easing:i.transitions.easing.easeOut,duration:i.transitions.duration.enteringScreen})},t["& .".concat(sg.content)]=(n={backgroundColor:(i.vars||i).palette.background.default,zIndex:2,display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0,padding:0},n[i.breakpoints.up("xs")]={paddingRight:i.spacing(1),paddingLeft:i.spacing(1)},n),t}),o3=function(){return o3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o3.apply(this,arguments)},GTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},HTe=function(e){var t=e.loadingPrimary,r=t===void 0?"ra.page.loading":t,n=e.loadingSecondary,i=n===void 0?"ra.message.loading":n,o=GTe(e,["loadingPrimary","loadingSecondary"]);return M.createElement(Hg,o3({loadingPrimary:r,loadingSecondary:i},o))};const WTe=yi([ze.jsx("circle",{cx:"7",cy:"6",r:"2"},"0"),ze.jsx("path",{d:"M11.15 12c-.31-.22-.59-.46-.82-.72l-1.4-1.55c-.19-.21-.43-.38-.69-.5-.29-.14-.62-.23-.96-.23h-.03C6.01 9 5 10.01 5 11.25V12H2v8c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-8zM7 20H5v-6h2zm4 0H9v-6h2zm4 0h-2v-6h2zm4 0h-2v-6h2zm-.35-14.14-.07-.07c-.57-.62-.82-1.41-.67-2.2L18 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71m-4 0-.07-.07c-.57-.62-.82-1.41-.67-2.2L14 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71"},"1")]);var s3=function(){return s3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s3.apply(this,arguments)},ZTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KTe=function(e){var t=fi({props:e,name:Uv}),r=Ti(),n=X0().isPending,i=pR();return n?M.createElement(Hg,null):M.createElement(YTe,s3({},XTe(t)),M.createElement(Q0,{defaultTitle:i}),M.createElement("div",{className:lg.message},M.createElement(WTe,{className:lg.icon}),M.createElement("h1",null,r("ra.page.not_found")),M.createElement("div",null,r("ra.message.not_found"),".")),M.createElement("div",{className:lg.toolbar},M.createElement(Mc,{variant:"contained",startIcon:M.createElement(uW,null),onClick:JTe},r("ra.action.back"))))},XTe=function(e){e.staticContext,e.history,e.location,e.match;var t=ZTe(e,["staticContext","history","location","match"]);return t},Uv="RaNotFound",lg={icon:"".concat(Uv,"-icon"),message:"".concat(Uv,"-message"),toolbar:"".concat(Uv,"-toolbar")},YTe=er("div",{name:Uv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("md")]={height:"100vh",marginTop:"-3em"},t["& .".concat(lg.icon)]={width:"9em",height:"9em"},t["& .".concat(lg.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t["& .".concat(lg.toolbar)]={textAlign:"center",marginTop:"2em"},t});function JTe(){window.history.go(-1)}var l3=function(){return l3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l3.apply(this,arguments)},mz=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},QTe={vertical:"bottom",horizontal:"center"},e3e=function(e){var t,r=fi({props:e,name:Zd}),n=r.className,i=r.type,o=i===void 0?"info":i,u=r.autoHideDuration,a=u===void 0?4e3:u,p=r.multiLine,d=p===void 0?!1:p,m=r.anchorOrigin,v=m===void 0?QTe:m,w=mz(r,["className","type","autoHideDuration","multiLine","anchorOrigin"]),x=MG(),P=x.notifications,T=x.takeNotification,O=_Ce(),L=M.useState(!1),N=L[0],F=L[1],D=M.useState(void 0),q=D[0],z=D[1],Z=Ti();M.useEffect(function(){var Fe;if(P.length&&!q){var He=T();He&&(z(He),F(!0))}if(q){var pe=function(_e){_e.preventDefault();var Ce="";return _e.returnValue=Ce,Ce};if(!((Fe=q?.notificationOptions)===null||Fe===void 0)&&Fe.undoable)return window.addEventListener("beforeunload",pe),function(){window.removeEventListener("beforeunload",pe)}}},[P,q,N,T]);var Q=M.useCallback(function(){F(!1)},[F]),Y=M.useCallback(function(){var Fe;if(q&&(!((Fe=q.notificationOptions)===null||Fe===void 0)&&Fe.undoable)){var He=O();He?He({isUndo:!1}):yj.emit("end",{isUndo:!1})}z(void 0)},[q,O]),se=M.useCallback(function(){var Fe=O();Fe?Fe({isUndo:!0}):yj.emit("end",{isUndo:!0}),F(!1)},[O]);if(!q)return null;var W=q.message,G=q.type,ae=q.notificationOptions,le=ae||{},ue=le.autoHideDuration,ye=le.messageArgs,Se=le.multiLine,ge=le.undoable,xe=mz(le,["autoHideDuration","messageArgs","multiLine","undoable"]);return M.createElement(F5e.Provider,{value:Q},M.createElement(t3e,l3({className:n,open:N,message:W&&typeof W=="string"&&Z(W,ye),autoHideDuration:ue===void 0?a:ue??void 0,disableWindowBlurListener:ge,TransitionProps:{onExited:Y},onClose:Q,ContentProps:{className:Br($h[G||o],(t={},t[$h.multiLine]=Se||d,t))},action:ge?M.createElement(Mc,{color:"primary",className:$h.undo,size:"small",onClick:se},M.createElement(M.Fragment,null,Z("ra.action.undo"))):null,anchorOrigin:v},w,xe),W&&typeof W!="string"&&M.isValidElement(W)?W:void 0))},Zd="RaNotification",$h={success:"".concat(Zd,"-success"),error:"".concat(Zd,"-error"),warning:"".concat(Zd,"-warning"),undo:"".concat(Zd,"-undo"),multiLine:"".concat(Zd,"-multiLine")},t3e=er(Ooe,{name:Zd,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme,n=e.type;return t={},t["& .".concat($h.success)]={backgroundColor:r?.palette.success.main,color:r?.palette.success.contrastText},t["& .".concat($h.error)]={backgroundColor:r?.palette.error.main,color:r?.palette.error.contrastText},t["& .".concat($h.warning)]={backgroundColor:r?.palette.warning.main,color:r?.palette.warning.contrastText},t["& .".concat($h.undo)]={color:n==="success"?r?.palette.success.contrastText:r?.palette.primary.light},t["& .".concat($h.multiLine)]={whiteSpace:"pre-wrap"},t}),u3=function(){return u3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},u3.apply(this,arguments)},r3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gW=function(e){var t=fi({props:e,name:yW}),r=zu(function(n){return n.breakpoints.down("sm")});return M.createElement(n3e,u3({disableGutters:!0,variant:r?"regular":"dense"},i3e(t)))},yW="RaTopToolbar",n3e=er(AI,{name:yW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",justifyContent:"flex-end",alignItems:"flex-end",gap:r.spacing(1),whiteSpace:"nowrap",flex:"0 1 auto",padding:r.spacing(.5),paddingBottom:r.spacing(1)},t[r.breakpoints.down("md")]={flex:"0 1 100%"},t[r.breakpoints.down("sm")]={backgroundColor:(r.vars||r).palette.background.paper,padding:0,paddingBottom:0},t}),i3e=function(e){e.hasCreate;var t=r3e(e,["hasCreate"]);return t},c3=function(){return c3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c3.apply(this,arguments)},a3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},o3e=function(e){var t=fi({props:e,name:vW}),r=t.label,n=t.className,i=t.icon,o=i===void 0?s3e:i,u=t.onClick,a=t.redirect,p=a===void 0?"list":a,d=t.mutationOptions,m=t.color,v=m===void 0?"error":m,w=t.successMessage,x=a3e(t,["label","className","icon","onClick","redirect","mutationOptions","color","successMessage"]),P=pl(t),T=lu(t);if(!T)throw new Error("<DeleteWithUndoButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var O=KG({record:P,resource:T,redirect:p,mutationMode:"undoable",mutationOptions:d,successMessage:w}),L=O.isPending,N=O.handleDelete,F=function(Y){Y.stopPropagation(),N(),u&&u(Y)},D=Ti(),q=Ug(T),z=q(P),Z=D("resources.".concat(T,".forcedCaseName"),{smart_count:1,_:bp.humanize(D("resources.".concat(T,".name"),{smart_count:1,_:T?bp.singularize(T):void 0}),!0)});M.isValidElement(z)&&(z="#".concat(P?.id));var Q=lp({resourceI18nKey:"resources.".concat(T,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:Z,recordRepresentation:z},userText:r});return M.createElement(l3e,c3({onClick:F,disabled:L,label:M.createElement(M.Fragment,null,Q),"aria-label":typeof Q=="string"?Q:void 0,className:Br("ra-delete-button",n),key:"button",color:v},x),o)},s3e=M.createElement(UU,null),vW="RaDeleteWithUndoButton",l3e=er(Vg,{name:vW,overridesResolver:function(e,t){return t.root}})({}),Kd=function(){return Kd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kd.apply(this,arguments)},gz=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},u3e=function(e){var t=fi({props:e,name:bW}),r=t.className,n=t.confirmTitle,i=t.confirmContent,o=t.confirmColor,u=o===void 0?"primary":o,a=t.icon,p=a===void 0?c3e:a,d=t.label,m=t.mutationMode,v=m===void 0?"pessimistic":m;t.onClick;var w=t.redirect,x=w===void 0?"list":w,P=t.translateOptions,T=P===void 0?{}:P,O=t.titleTranslateOptions,L=O===void 0?T:O,N=t.contentTranslateOptions,F=N===void 0?T:N,D=t.mutationOptions,q=t.color,z=q===void 0?"error":q,Z=t.successMessage,Q=gz(t,["className","confirmTitle","confirmContent","confirmColor","icon","label","mutationMode","onClick","redirect","translateOptions","titleTranslateOptions","contentTranslateOptions","mutationOptions","color","successMessage"]),Y=Ti(),se=pl(t),W=lu(t),G=Rf(),ae=QG(W),le=H0(),ue=Be.useState(!1),ye=ue[0],Se=ue[1];if(!W)throw new Error("<DeleteWithConfirmButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var ge=D||{},xe=ge.onSuccess,Fe=ge.onError,He=gz(ge,["onSuccess","onError"]),pe=KG({record:se,redirect:x,mutationMode:v,mutationOptions:Kd(Kd({},He),{onSuccess:function(Pt,ut,Le){Se(!1),xe?xe(Pt,ut,Le):(G(Z??"resources.".concat(W,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:Y("ra.notification.deleted",{smart_count:1})},undoable:v==="undoable"}),se&&ae([se.id]),le(x,W))},onError:function(Pt,ut,Le){Se(!1),Fe?Fe(Pt,ut,Le):G(typeof Pt=="string"?Pt:Pt?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof Pt=="string"?Pt:Pt?.message?Pt.message:void 0}})}}),resource:W,successMessage:Z}),_e=pe.isPending,Ce=pe.handleDelete,ke=function(Pt){Pt.stopPropagation(),Se(!0)},$e=function(){Se(!1)},ht=Ug(W),At=ht(se),mt=Y("resources.".concat(W,".forcedCaseName"),{smart_count:1,_:bp.humanize(Y("resources.".concat(W,".name"),{smart_count:1,_:W?bp.singularize(W):void 0}),!0)});M.isValidElement(At)&&(At="#".concat(se?.id));var rt=lp({resourceI18nKey:"resources.".concat(W,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:mt,recordRepresentation:At},userText:d}),Lt=lp({resourceI18nKey:"resources.".concat(W,".message.delete_title"),baseI18nKey:"ra.message.delete_title",options:Kd({recordRepresentation:At,name:mt,id:se?.id},L),userText:n}),Tt=lp({resourceI18nKey:"resources.".concat(W,".message.delete_content"),baseI18nKey:"ra.message.delete_content",options:Kd({recordRepresentation:At,name:mt,id:se?.id},F),userText:i});return Be.createElement(M.Fragment,null,Be.createElement(f3e,Kd({onClick:ke,label:Be.createElement(Be.Fragment,null,rt),"aria-label":typeof rt=="string"?rt:void 0,className:Br("ra-delete-button",r),key:"button",color:z},Q),p),Be.createElement(iTe,{isOpen:ye,loading:_e,title:Be.createElement(Be.Fragment,null,Lt),content:Be.createElement(Be.Fragment,null,Tt),confirmColor:u,onConfirm:Ce,onClose:$e}))},c3e=Be.createElement(UU,null),bW="RaDeleteWithConfirmButton",f3e=er(Vg,{name:bW,overridesResolver:function(e,t){return t.root}})({}),W1=function(){return W1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W1.apply(this,arguments)},h3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},d3e=function(e){var t=fi({name:p3e,props:e}),r=t.mutationMode,n=h3e(t,["mutationMode"]),i=pl(t),o=lu(t);if(!o)throw new Error("<DeleteButton> components should be used inside a <Resource> component or provided the resource prop.");var u=Y0({action:"delete",resource:o,record:i}),a=u.canAccess,p=u.isPending,d=iR();if(!i||i.id==null||!a||p)return null;var m=r||(d?.mutationMode?d.mutationMode:"undoable");return m==="undoable"?M.createElement(o3e,W1({record:i},n)):M.createElement(u3e,W1({mutationMode:m,record:i},n))},p3e="RaDeleteButton";const m3e=yi(ze.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}));var f3=function(){return f3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f3.apply(this,arguments)},g3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},y3e=function(e){var t=fi({props:e,name:SR}),r=t.icon,n=r===void 0?b3e:r,i=t.label,o=t.scrollToTop,u=o===void 0?!0:o,a=t.className,p=g3e(t,["icon","label","scrollToTop","className"]),d=lu(t);if(!d)throw new Error("<EditButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var m=pl(t),v=V0(),w=Y0({action:"edit",resource:d,record:m}),x=w.canAccess,P=w.isPending,T=$g(),O=Ug(),L=O(m),N=typeof L=="string"?L:L?.toString(),F=lp({resourceI18nKey:"resources.".concat(d,".action.edit"),baseI18nKey:"ra.action.edit",options:{name:T(d,1),recordRepresentation:N},userText:i});return!m||!x||P?null:M.createElement(w3e,f3({component:zg,to:v({type:"edit",resource:d,id:m.id}),state:v3e[String(u)],label:M.createElement(M.Fragment,null,F),"aria-label":typeof F=="string"?F:void 0,onClick:_3e,className:Br(x3e.root,a)},p),n)},v3e={true:{_scrollToTop:!0},false:{}},b3e=M.createElement(m3e,null),_3e=function(e){return e.stopPropagation()},SR="RaEditButton",x3e={root:"".concat(SR,"-root")},w3e=er(Vg,{name:SR,overridesResolver:function(e,t){return t.root}})({});const S3e=yi(ze.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"}));var E3e=function(e){var t=fi({props:e,name:_W}),r=t.icon,n=r===void 0?C3e:r,i=t.languages,o=M.useState(null),u=o[0],a=o[1],p=jG({locales:i}),d=BG(),m=d[0],v=d[1],w=function(O){var L=p.find(function(N){return N.locale===O});return L?L.name:""},x=function(O){return function(){v(O),a(null)}},P=function(O){a(O.currentTarget)},T=function(){a(null)};return M.createElement(A3e,{component:"span"},M.createElement(Mc,{color:"inherit",variant:"text","aria-controls":"simple-menu","aria-label":"","aria-haspopup":"true",onClick:P,startIcon:n,endIcon:M.createElement(Wue,{fontSize:"small"})},w(m)),M.createElement(_I,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:!!u,onClose:T},p.map(function(O){return M.createElement(xI,{key:O.locale,onClick:x(O.locale),selected:O.locale===m},O.name)})))},C3e=M.createElement(S3e,null),_W="RaLocalesMenuButton",A3e=er("span",{name:_W,overridesResolver:function(e,t){return t.root}})({});const P3e=yi(ze.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}));var h3=function(){return h3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},h3.apply(this,arguments)},T3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},I3e=function(e){var t=e.label,r=t===void 0?"ra.action.refresh":t,n=e.icon,i=n===void 0?M3e:n,o=e.onClick,u=e.className,a=T3e(e,["label","icon","onClick","className"]),p=NSe(),d=Ti(),m=M.useCallback(function(v){v.preventDefault(),p(),typeof o=="function"&&o(v)},[p,o]);return M.createElement(Ag,{title:r&&d(r,{_:"Refresh"})},M.createElement(Go,h3({"aria-label":r&&d(r,{_:"Refresh"}),className:u,color:"inherit",onClick:m},a),i))},M3e=M.createElement(P3e,null);const R3e=yi(ze.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}));var qv=function(){return qv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qv.apply(this,arguments)},yz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},vz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},O3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},k3e=function(e){var t=fi({props:e,name:xW}),r=t.color,n=r===void 0?"primary":r,i=t.icon,o=i===void 0?D3e:i;t.invalid;var u=t.label,a=u===void 0?"ra.action.save":u,p=t.onClick,d=t.mutationOptions,m=t.disabled,v=t.type,w=v===void 0?"submit":v,x=t.transform,P=t.variant,T=P===void 0?"contained":P,O=t.alwaysEnable,L=O===void 0?!1:O,N=O3e(t,["color","icon","invalid","label","onClick","mutationOptions","disabled","type","transform","variant","alwaysEnable"]),F=Ti(),D=Z0(),q=iR(),z=x2(),Z=z.dirtyFields,Q=z.isValidating,Y=z.isSubmitting,se=Object.keys(Z).length>0,W=pH(),G=F3e(L===!1||L===void 0?void 0:!L,m||!se&&W==null||Q||Y);gR(w==="submit"&&(d&&(d.onSuccess||d.onError)||x),'Cannot use <SaveButton mutationOptions> props on a button of type "submit". To override the default mutation options on a particular save button, set the <SaveButton type="button"> prop, or set mutationOptions in the main view component (<Create> or <Edit>).');var ae=M.useCallback(function(ye){return yz(void 0,void 0,void 0,function(){var Se;return vz(this,function(ge){switch(ge.label){case 0:return q?.save?[4,q.save(ye,qv(qv({},d),{transform:x}))]:[3,2];case 1:Se=ge.sent(),ge.label=2;case 2:return Se!=null&&dH(Se,D.setError),[2]}})})},[D.setError,q,d,x]),le=M.useCallback(function(ye){return yz(void 0,void 0,void 0,function(){return vz(this,function(Se){switch(Se.label){case 0:return p&&p(ye),ye.defaultPrevented?[2]:w!=="button"?[3,2]:(ye.stopPropagation(),[4,D.handleSubmit(ae)(ye)]);case 1:Se.sent(),Se.label=2;case 2:return[2]}})})},[p,w,D,ae]),ue=a&&F(a,{_:a});return M.createElement(N3e,qv({variant:T,type:w,color:n,"aria-label":ue,disabled:G,onClick:le},N),Y?M.createElement(Eg,{sx:L3e,size:14,thickness:3,color:"inherit"}):o,ue)},L3e={"&.MuiCircularProgress-root":{marginRight:"10px",marginLeft:"2px"}},D3e=M.createElement(R3e,null),xW="RaSaveButton",N3e=er(Mc,{name:xW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative"},t["& .MuiSvgIcon-root, & .MuiIcon-root, & .MuiCircularProgress-root"]={marginRight:r.spacing(1)},t["& .MuiSvgIcon-root, & .MuiIcon-root"]={fontSize:18},t}),F3e=function(e,t){return typeof e>"u"?t:e},d3=function(){return d3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},d3.apply(this,arguments)},B3e=function(e){var t=fi({props:e,name:wW});return Be.createElement(j3e,d3({onClick:z3e,className:"skip-nav-button",label:"ra.navigation.skip_nav",variant:"contained"},t))},wW="RaSkipNavigationButton",j3e=er(Vg,{name:wW,overridesResolver:function(e,t){return t.root}})(function(e){var t=e.theme;return{position:"fixed",padding:t.spacing(1),backgroundColor:(t.vars||t).palette.background.default,color:(t.vars||t).palette.primary.contrastText,transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.leavingScreen}),left:t.spacing(2),top:t.spacing(-10),zIndex:5e3,"&:hover":{opacity:.8,backgroundColor:(t.vars||t).palette.background.default},"&:focus":{top:t.spacing(2),transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})}}}),z3e=function(){if(!(typeof document>"u")){var e=document.getElementById("main-content");e&&(e.setAttribute("tabIndex","-1"),e.focus(),e.blur(),e.removeAttribute("tabIndex"))}},p3=function(){return p3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p3.apply(this,arguments)},$3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},U3e=function(e){var t=fi({props:e,name:ER}),r=t.className,n=t.title,i=n===void 0?"ra.page.error":n,o=t.message,u=o===void 0?"ra.message.auth_error":o,a=$3e(t,["className","title","message"]),p=Ti();return M.createElement(q3e,p3({className:r},a),M.createElement("div",{className:SW.message},M.createElement("h1",null,p(i,{_:i})),M.createElement("div",null,p(u,{_:u})),M.createElement(Vg,{component:zg,to:"/login",label:"ra.auth.sign_in"},M.createElement(bR,null))))},ER="RaAuthError",SW={message:"".concat(ER,"-message")},q3e=er("div",{name:ER,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("xl")]={height:"100vh",marginTop:"-3em"},t["& .".concat(SW.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t}),V3e=function(){var e=UAe().error;return e?M.createElement(U3e,{message:e?e.message:void 0}):M.createElement(Hg,null)},G3e=function(e){var t=e.helperText,r=e.error,n=Ti();return r?M.createElement(iCe,{error:r}):t===!1?null:M.isValidElement(t)?t:typeof t=="string"&&t.length>0?M.createElement(M.Fragment,null,n(t,{_:t})):M.createElement("span",{dangerouslySetInnerHTML:H3e})},H3e={__html:"&#8203;"},Z1=function(){return Z1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Z1.apply(this,arguments)},W3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},s_,EW=function(e){var t,r,n,i=Z3({props:e,name:K1}),o=i.children,u=i.className,a=u===void 0?"":u,p=i.color,d=i.component,m=d===void 0?"span":d,v=i.fullWidth,w=i.isRequired,x=i.label,P=i.resource,T=i.source,O=i.TypographyProps,L=W3e(i,["children","className","color","component","fullWidth","isRequired","label","resource","source","TypographyProps"]);return M.createElement(Z3e,Z1({component:m,className:Br(a,(t={},t[X1.fullWidth]=v,t))},L),x!==!1&&o.props.label!==!1&&typeof o.type!="string"&&((r=o.type)===null||r===void 0?void 0:r.displayName)!=="Labeled"&&((n=o.type)===null||n===void 0?void 0:n.displayName)!=="Labeled"?M.createElement(qo,Z1({sx:p?{color:p}:{color:function(N){return(N.vars||N).palette.text.secondary}},className:X1.label},O),M.createElement(OH,{label:x||o.props.label,source:T||o.props.source,resource:P,isRequired:w})):null,o)};EW.displayName="Labeled";var K1="RaLabeled",X1={label:"".concat(K1,"-label"),fullWidth:"".concat(K1,"-fullWidth")},Z3e=er(CI,{name:K1,overridesResolver:function(e,t){return t.root}})((s_={display:"inline-flex",marginBottom:"0.2em"},s_["&.".concat(X1.fullWidth)]={width:"100%"},s_["& .".concat(X1.label)]={fontSize:"0.75em",marginBottom:"0.2em"},s_)),m3=function(){return m3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m3.apply(this,arguments)},K3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},CW=function(e){var t,r=e.icon,n=e.message,i=e.variant,o=i===void 0?"standard":i,u=K3e(e,["icon","message","variant"]),a=lu(e),p=$g(),d=lp({baseI18nKey:"ra.notification.offline",resourceI18nKey:a?"resources.".concat(a,".notification.offline"):void 0,userText:n,options:{name:a?p(a,0):void 0,_:"No connectivity. Could not fetch data."}});return M.createElement(X3e,m3({className:Br(y3.root,(t={},t[y3.inline]=o==="inline",t)),severity:"warning",variant:o==="inline"?"outlined":o,icon:o==="inline"?!1:r},u),M.createElement(qo,{variant:"body2"},d))},g3="RaOffline",y3={root:"".concat(g3,"-root"),inline:"".concat(g3,"-inline")},X3e=er(bte,{name:g3,overridesResolver:function(e,t){return t.root}})(function(){var e;return e={},e["&.".concat(y3.inline)]={border:"none",display:"inline-flex",padding:0,margin:0},e});const bz=yi(ze.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));var Y1=function(){return Y1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Y1.apply(this,arguments)},_z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Bd,AW=M.forwardRef(function(e,t){var r=fi({props:e,name:"MuiTextField"}),n=fi({props:r,name:Xd}),i=n.clearAlwaysVisible,o=n.InputProps,u=n.value,a=n.resettable,p=n.disabled,d=n.readOnly,m=n.variant,v=n.margin,w=n.className,x=_z(n,["clearAlwaysVisible","InputProps","value","resettable","disabled","readOnly","variant","margin","className"]),P=Ti(),T=n.onChange,O=M.useCallback(function(se){se.preventDefault(),T&&T("")},[T]),L=pf.clearButton,N=pf.clearIcon,F=pf.inputAdornedEnd,D=pf.selectAdornment,q=pf.visibleClearIcon,z=o||{},Z=z.endAdornment,Q=_z(z,["endAdornment"]);if(i&&Z)throw new Error("ResettableTextField cannot display both an endAdornment and a clear button always visible");var Y=function(){var se;return a?u?M.createElement(x_,{position:"end",className:n.select?D:void 0},M.createElement(Go,{className:L,"aria-label":P("ra.action.clear_input_value"),title:P("ra.action.clear_input_value"),onClick:O,onMouseDown:Y3e,disabled:p||d,size:"large"},M.createElement(bz,{className:Br(N,(se={},se[q]=i||u,se))}))):i?M.createElement(x_,{position:"end",className:n.select?D:void 0},M.createElement(Go,{className:L,"aria-label":P("ra.action.clear_input_value"),title:P("ra.action.clear_input_value"),disabled:!0,size:"large"},M.createElement(bz,{className:Br(N,q)}))):Z||M.createElement(x_,{position:"end",className:n.select?D:void 0},M.createElement("span",{className:L},"")):Z};return M.createElement(Q3e,Y1({value:u,InputProps:Y1({readOnly:d,classes:n.select&&m==="filled"?{adornedEnd:F}:{},endAdornment:Y()},Q),disabled:p||d,variant:m,margin:v,className:w},x,{inputRef:t}))});AW.displayName="ResettableTextField";var Y3e=function(e){e.preventDefault()},Xd="RaResettableTextField",pf={clearIcon:"".concat(Xd,"-clearIcon"),visibleClearIcon:"".concat(Xd,"-visibleClearIcon"),clearButton:"".concat(Xd,"-clearButton"),selectAdornment:"".concat(Xd,"-selectAdornment"),inputAdornedEnd:"".concat(Xd,"-inputAdornedEnd")},J3e=(Bd={},Bd["& .".concat(pf.clearIcon)]={height:16,width:0},Bd["& .".concat(pf.visibleClearIcon)]={width:16},Bd["& .".concat(pf.clearButton)]={height:24,width:24,padding:0},Bd["& .".concat(pf.selectAdornment)]={position:"absolute",right:24},Bd["& .".concat(pf.inputAdornedEnd)]={paddingRight:0},Bd),Q3e=er(G9,{name:Xd,overridesResolver:function(e,t){return t.root}})(J3e),eIe=function(e){var t,r=M.memo(e);return r.displayName=(t=e.displayName)===null||t===void 0?void 0:t.replace("Impl",""),r},v3=function(){return v3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v3.apply(this,arguments)},tIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},PW=function(e){var t=fi({props:e,name:TW}),r=t.className,n=t.emptyText,i=tIe(t,["className","emptyText"]),o=Ti(),u=lAe(t);return M.createElement(rIe,v3({component:"span",variant:"body2",className:r},lEe(i)),u!=null&&typeof u!="string"?u.toString():u||(n?o(n,{_:n}):null))};PW.displayName="TextFieldImpl";var oc=eIe(PW),TW="RaTextField",rIe=er(qo,{name:TW,overridesResolver:function(e,t){return t.root}})({}),J1=function(){return J1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},J1.apply(this,arguments)},nIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},iu=function(e){var t=fi({props:e,name:IW}),r=t.className,n=t.defaultValue,i=t.label,o=t.format,u=t.helperText,a=t.onBlur,p=t.onChange,d=t.parse,m=t.resource,v=t.source,w=t.validate,x=nIe(t,["className","defaultValue","label","format","helperText","onBlur","onChange","parse","resource","source","validate"]),P=yH(J1({defaultValue:n,format:o,parse:d,resource:m,source:v,type:"text",validate:w,onBlur:a,onChange:p},x)),T=P.field,O=P.fieldState,L=O.error,N=O.invalid,F=P.id,D=P.isRequired,q=u!==!1||N;return M.createElement(iIe,J1({id:F},T,{className:Br("ra-input","ra-input-".concat(v),r),label:i!==""&&i!==!1?M.createElement(OH,{label:i,source:v,resource:m,isRequired:D}):null,error:N,helperText:q?M.createElement(G3e,{error:L?.message,helperText:u}):null},hCe(x)))},IW="RaTextInput",iIe=er(AW,{name:IW,overridesResolver:function(e,t){return t.root}})({});const aIe=yi(ze.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),oIe=yi(ze.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));var b3=function(){return b3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b3.apply(this,arguments)},sIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},lIe=function(e){var t=fi({props:e,name:MW}),r=t.initiallyVisible,n=r===void 0?!1:r,i=sIe(t,["initiallyVisible"]),o=M.useState(n),u=o[0],a=o[1],p=Ti(),d=function(){a(!u)};return M.createElement(uIe,b3({type:u?"text":"password",size:"small",InputProps:{endAdornment:M.createElement(x_,{position:"end"},M.createElement(Go,{"aria-label":p(u?"ra.input.password.toggle_visible":"ra.input.password.toggle_hidden"),onClick:d,size:"small"},u?M.createElement(aIe,{fontSize:"small"}):M.createElement(oIe,{fontSize:"small"})))}},i))},MW="RaPasswordInput",uIe=er(iu,{name:MW,overridesResolver:function(e,t){return t.root}})({}),cIe=function(e){var t=fi({props:e,name:Vv}),r=t.redirectTo,n=t.className,i=t.sx,o=t.children,u=M.useState(!1),a=u[0],p=u[1],d=_Ae(),m=Ti(),v=Rf(),w=function(x){p(!0),d(x,r).then(function(){p(!1)}).catch(function(P){p(!1),v(typeof P=="string"?P:typeof P>"u"||!P.message?"ra.auth.sign_in_error":P.message,{type:"error",messageArgs:{_:typeof P=="string"?P:P&&P.message?P.message:void 0}})})};return M.createElement(fIe,{onSubmit:w,mode:"onChange",noValidate:!0,className:n,sx:i},M.createElement(mI,{className:ug.content},o||M.createElement(M.Fragment,null,M.createElement(iu,{autoFocus:!0,source:"username",label:m("ra.auth.username"),autoComplete:"username",validate:qj()}),M.createElement(lIe,{source:"password",label:m("ra.auth.password"),autoComplete:"current-password",validate:qj()})),M.createElement(Mc,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:ug.button},a?M.createElement(Eg,{className:ug.icon,size:19,thickness:3}):m("ra.auth.sign_in"))))},Vv="RaLoginForm",ug={content:"".concat(Vv,"-content"),button:"".concat(Vv,"-button"),icon:"".concat(Vv,"-icon")},fIe=er(mH,{name:Vv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(ug.content)]={width:300,paddingBottom:"".concat(r.spacing(2),"!important")},t["& .".concat(ug.button)]={marginTop:r.spacing(2)},t["& .".concat(ug.icon)]={margin:r.spacing(.3)},t}),_3=function(){return _3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_3.apply(this,arguments)},hIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},dIe=function(e){var t=fi({props:e,name:Gv}),r=t.children,n=r===void 0?pIe:r,i=t.backgroundImage,o=t.avatarIcon,u=o===void 0?mIe:o,a=hIe(t,["children","backgroundImage","avatarIcon"]),p=M.useRef(null),d=!1,m=OAe(),v=ud();M.useEffect(function(){m({},!1).then(function(){v("/")}).catch(function(){})},[m,v]);var w=function(){!d&&p.current&&(p.current.style.backgroundImage="url(".concat(i,")"),d=!0)},x=function(){if(i){var P=new Image;P.onload=w,P.src=i}};return M.useEffect(function(){d||x()}),M.createElement(gIe,_3({},a,{ref:p}),M.createElement(pI,{className:cg.card},M.createElement("div",{className:cg.avatar},M.createElement(BP,{className:cg.icon},u)),n))},pIe=M.createElement(cIe,null),mIe=M.createElement(bR,null),Gv="RaLogin",cg={card:"".concat(Gv,"-card"),avatar:"".concat(Gv,"-avatar"),icon:"".concat(Gv,"-icon")},gIe=er("div",{name:Gv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},t["& .".concat(cg.card)]={minWidth:300,marginTop:"6em"},t["& .".concat(cg.avatar)]={margin:"1em",display:"flex",justifyContent:"center"},t["& .".concat(cg.icon)]={backgroundColor:(r.vars||r).palette.secondary[500]},t}),x3=function(){return x3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},x3.apply(this,arguments)},yIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},vIe=function(e){var t=K0(e).hasShow;return M.createElement(gW,x3({},bIe(e)),t&&M.createElement(iPe,null))},bIe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=yIe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},Q1=function(){return Q1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Q1.apply(this,arguments)},_Ie=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Yy,xIe=M.createElement(vIe,null),wIe=M.createElement(CW,null),SIe=function(e){var t,r=e.actions,n=e.aside,i=e.children,o=e.render,u=e.className,a=e.component,p=a===void 0?pI:a,d=e.emptyWhileLoading,m=d===void 0?!1:d,v=e.offline,w=v===void 0?wIe:v,x=e.title,P=_Ie(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),T=K0().hasShow,O=tEe(),L=O.resource,N=O.defaultTitle,F=O.record,D=O.isPaused,q=O.isPending,z=typeof r>"u"&&T?xIe:r;return D&&q&&w!==void 0&&w!==!1?M.createElement(xz,Q1({className:Br("edit-page",u)},P),M.createElement("div",{className:Br(th.main,th.noActions)},M.createElement(p,{className:th.card},w),n)):!F&&q&&m?null:M.createElement(xz,Q1({className:Br("edit-page",u)},P),x!==!1&&M.createElement(Q0,{title:x,defaultTitle:N,preferenceKey:"".concat(L,".edit.title")}),z,M.createElement("div",{className:Br(th.main,(t={},t[th.noActions]=!z,t))},M.createElement(p,{className:th.card},o?o(O):F?i:M.createElement(mI,null,"")),n))},j_="RaEdit",th={main:"".concat(j_,"-main"),noActions:"".concat(j_,"-noActions"),card:"".concat(j_,"-card")},xz=er("div",{name:j_,overridesResolver:function(e,t){return t.root}})((Yy={},Yy["& .".concat(th.main)]={display:"flex",alignItems:"flex-start"},Yy["& .".concat(th.noActions)]={marginTop:"1em"},Yy["& .".concat(th.card)]={flex:"1 1 auto"},Yy)),w3=function(){return w3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},w3.apply(this,arguments)},EIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Wg=function(e){var t=fi({props:e,name:AIe}),r=t.resource,n=t.id,i=t.mutationMode,o=t.mutationOptions,u=t.queryOptions,a=t.redirect,p=t.transform,d=t.disableAuthentication,m=t.loading,v=m===void 0?CIe:m,w=EIe(t,["resource","id","mutationMode","mutationOptions","queryOptions","redirect","transform","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Edit> requires either a `render` prop or `children` prop");return M.createElement(eEe,{resource:r,id:n,mutationMode:i,mutationOptions:o,queryOptions:u,redirect:a,transform:p,disableAuthentication:d,loading:v,offline:!1},M.createElement(SIe,w3({},w)))},CIe=M.createElement(Hg,null),AIe="RaEdit",S3=function(){return S3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},S3.apply(this,arguments)},PIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},TIe=function(e){var t,r=fi({props:e,name:Hv}),n=r.children,i=r.className,o=r.resource,u=PIe(r,["children","className","resource"]),a=zu(function(p){return p.breakpoints.down("sm")});return M.createElement(IIe,S3({className:Br((t={},t[fg.mobileToolbar]=a,t[fg.desktopToolbar]=!a,t),i),role:"toolbar"},u),M.Children.count(n)===0?M.createElement("div",{className:fg.defaultToolbar},M.createElement(k3e,null),M.createElement(d3e,{resource:o})):n)},Hv="RaToolbar",fg={desktopToolbar:"".concat(Hv,"-desktopToolbar"),mobileToolbar:"".concat(Hv,"-mobileToolbar"),defaultToolbar:"".concat(Hv,"-defaultToolbar")},IIe=er(AI,{name:Hv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={backgroundColor:(r.vars||r).palette.divider},t["&.".concat(fg.desktopToolbar)]={},t["&.".concat(fg.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},t["& .".concat(fg.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},t}),ex=function(){return ex=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ex.apply(this,arguments)},RW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Zg=function(e){var t=fi({props:e,name:OW}),r=t.children,n=t.className,i=t.component,o=i===void 0?MIe:i,u=t.sx,a=t.toolbar,p=a===void 0?RIe:a,d=RW(t,["children","className","component","sx","toolbar"]);return M.createElement(mH,ex({},d),M.createElement(o,{className:n,sx:u},M.createElement(CI,ex({},OIe(t),{sx:{alignItems:"flex-start"}}),r)),p!==!1?p:null)},OW="RaSimpleForm",MIe=er(mI,{name:OW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={paddingBottom:"5em"},t}),RIe=M.createElement(TIe,null),OIe=function(e){e.children,e.className,e.component,e.criteriaMode,e.defaultValues,e.delayError,e.onSubmit,e.record,e.resource,e.reValidateMode,e.sx,e.toolbar,e.validate,e.resetOptions,e.resolver,e.sanitizeEmptyValues,e.shouldFocusError,e.shouldUnregister,e.shouldUseNativeValidation,e.warnWhenUnsavedChanges;var t=RW(e,["children","className","component","criteriaMode","defaultValues","delayError","onSubmit","record","resource","reValidateMode","sx","toolbar","validate","resetOptions","resolver","sanitizeEmptyValues","shouldFocusError","shouldUnregister","shouldUseNativeValidation","warnWhenUnsavedChanges"]);return t},E3=function(){return E3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},E3.apply(this,arguments)},kIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},LIe=function(e){var t=K0(e).hasEdit;return M.createElement(gW,E3({},DIe(e)),t&&M.createElement(y3e,null))},DIe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=kIe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},tx=function(){return tx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tx.apply(this,arguments)},NIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Jy,FIe=M.createElement(LIe,null),BIe=M.createElement(CW,null),jIe=function(e){var t,r=e.actions,n=e.aside,i=e.children,o=e.render,u=e.className,a=e.component,p=a===void 0?pI:a,d=e.emptyWhileLoading,m=d===void 0?!1:d,v=e.offline,w=v===void 0?BIe:v,x=e.title,P=NIe(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),T=vCe(),O=T.resource,L=T.defaultTitle,N=T.isPaused,F=T.isPending,D=T.record,q=K0().hasEdit,z=typeof r>"u"&&q?FIe:r;return N&&F&&w!==void 0&&w!==!1?M.createElement(wz,tx({className:Br("show-page",u)},P),M.createElement("div",{className:Br(rh.main,rh.noActions)},M.createElement(p,{className:rh.card},w),n)):!D&&m?null:M.createElement(wz,tx({className:Br("show-page",u)},P),x!==!1&&M.createElement(Q0,{title:x,defaultTitle:L,preferenceKey:"".concat(O,".show.title")}),z!==!1&&z,M.createElement("div",{className:Br(rh.main,(t={},t[rh.noActions]=!z,t))},M.createElement(p,{className:rh.card},o?o(T):i),n))},z_="RaShow",rh={main:"".concat(z_,"-main"),noActions:"".concat(z_,"-noActions"),card:"".concat(z_,"-card")},wz=er("div",{name:z_,overridesResolver:function(e,t){return t.root}})((Jy={},Jy["& .".concat(rh.main)]={display:"flex"},Jy["& .".concat(rh.noActions)]={marginTop:"1em"},Jy["& .".concat(rh.card)]={flex:"1 1 auto"},Jy)),C3=function(){return C3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},C3.apply(this,arguments)},zIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Kg=function(e){var t=fi({props:e,name:UIe}),r=t.id,n=t.resource,i=t.queryOptions,o=t.disableAuthentication,u=t.loading,a=u===void 0?$Ie:u,p=zIe(t,["id","resource","queryOptions","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Show> requires either a `render` prop or `children` prop");return M.createElement(yCe,{id:r,disableAuthentication:o,queryOptions:i,resource:n,loading:a,offline:!1},M.createElement(jIe,C3({},p)))},$Ie=M.createElement(Hg,null),UIe="RaShow",A3=function(){return A3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},A3.apply(this,arguments)},kW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Xg=function(e){var t=fi({props:e,name:rx}),r=t.className,n=t.children,i=t.spacing,o=i===void 0?1:i,u=t.sx,a=kW(t,["className","children","spacing","sx"]),p=pl(t);return p?M.createElement(JG,{value:t.record},M.createElement(qIe,{className:r,sx:u},M.createElement(CI,A3({spacing:o},VIe(a),{className:nx.stack}),M.Children.map(n,function(d){return d&&M.isValidElement(d)?M.createElement(EW,{key:d.props.source,className:Br("ra-field",d.props.source&&"ra-field-".concat(d.props.source),nx.row,d.props.className)},d):null})))):null},rx="RaSimpleShowLayout",nx={stack:"".concat(rx,"-stack"),row:"".concat(rx,"-row")},qIe=er("div",{name:rx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={flex:1,padding:"".concat(r.spacing(1)," ").concat(r.spacing(2))},t["& .".concat(nx.stack)]={},t["& .".concat(nx.row)]={display:"inline"},t}),VIe=function(e){e.record,e.resource,e.initialValues,e.translate;var t=kW(e,["record","resource","initialValues","translate"]);return t},P3=function(){return P3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P3.apply(this,arguments)},GIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},HIe=function(e){var t=e.accessDenied,r=t===void 0?sPe:t,n=e.authCallbackPage,i=n===void 0?V3e:n,o=e.authenticationError,u=o===void 0?JPe:o,a=e.catchAll,p=a===void 0?KTe:a,d=e.error,m=d===void 0?cW:d,v=e.layout,w=v===void 0?qTe:v,x=e.loading,P=x===void 0?HTe:x,T=e.loginPage,O=T===void 0?dIe:T,L=e.notification,N=L===void 0?e3e:L,F=GIe(e,["accessDenied","authCallbackPage","authenticationError","catchAll","error","layout","loading","loginPage","notification"]);return M.createElement(Wne,{enableColorScheme:!0},M.createElement(ZCe,P3({accessDenied:r,authCallbackPage:i,authenticationError:u,catchAll:p,error:m,layout:w,loading:P,loginPage:O},F)),M.createElement(N))},T3=function(){return T3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T3.apply(this,arguments)},WIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},LW=function(e){var t=e.theme,r=e.lightTheme,n=r===void 0?XH:r,i=e.darkTheme,o=e.defaultTheme,u=e.children,a=WIe(e,["theme","lightTheme","darkTheme","defaultTheme","children"]);return M.createElement(CCe,T3({},a),M.createElement(WH.Provider,{value:{lightTheme:t||n,darkTheme:t&&!i?void 0:!i&&i!==null?MPe:i??void 0,defaultTheme:o}},M.createElement(IPe,null,u)))};LW.displayName="AdminContext";var ZIe={ra:{action:{add_filter:"Add filter",add:"Add",back:"Go Back",bulk_actions:"1 item selected |||| %{smart_count} items selected",cancel:"Cancel",clear_array_input:"Clear the list",clear_input_value:"Clear value",clone:"Clone",confirm:"Confirm",create:"Create",create_item:"Create %{item}",delete:"Delete",edit:"Edit",export:"Export",list:"List",refresh:"Refresh",remove_filter:"Remove this filter",remove_all_filters:"Remove all filters",remove:"Remove",save:"Save",search:"Search",search_columns:"Search columns",select_all:"Select all",select_all_button:"Select all",select_row:"Select this row",show:"Show",sort:"Sort",undo:"Undo",unselect:"Unselect",expand:"Expand",close:"Close",open_menu:"Open menu",close_menu:"Close menu",update:"Update",move_up:"Move up",move_down:"Move down",open:"Open",toggle_theme:"Toggle light/dark mode",select_columns:"Columns",update_application:"Reload Application"},boolean:{true:"Yes",false:"No",null:""},page:{create:"Create %{name}",dashboard:"Dashboard",edit:"%{name} %{recordRepresentation}",error:"Something went wrong",list:"%{name}",loading:"Loading",not_found:"Not Found",show:"%{name} %{recordRepresentation}",empty:"No %{name} yet.",invite:"Do you want to add one?",access_denied:"Access denied",authentication_error:"Authentication error"},input:{file:{upload_several:"Drop some files to upload, or click to select one.",upload_single:"Drop a file to upload, or click to select it."},image:{upload_several:"Drop some pictures to upload, or click to select one.",upload_single:"Drop a picture to upload, or click to select it."},references:{all_missing:"Unable to find references data.",many_missing:"At least one of the associated references no longer appears to be available.",single_missing:"Associated reference no longer appears to be available."},password:{toggle_visible:"Hide password",toggle_hidden:"Show password"}},message:{about:"About",access_denied:"You don't have the right permissions to access this page",are_you_sure:"Are you sure?",authentication_error:"The authentication server returned an error and your credentials could not be checked.",auth_error:"An error occurred while validating the authentication token.",bulk_delete_content:"Are you sure you want to delete this %{name}? |||| Are you sure you want to delete these %{smart_count} items?",bulk_delete_title:"Delete %{name} |||| Delete %{smart_count} %{name}",bulk_update_content:"Are you sure you want to update %{name} %{recordRepresentation}? |||| Are you sure you want to update these %{smart_count} items?",bulk_update_title:"Update %{name} %{recordRepresentation} |||| Update %{smart_count} %{name}",clear_array_input:"Are you sure you want to clear the whole list?",delete_content:"Are you sure you want to delete this %{name}?",delete_title:"Delete %{name} %{recordRepresentation}",details:"Details",error:"A client error occurred and your request couldn't be completed.",invalid_form:"The form is not valid. Please check for errors",loading:"Please wait",no:"No",not_found:"Either you typed a wrong URL, or you followed a bad link.",select_all_limit_reached:"There are too many elements to select them all. Only the first %{max} elements were selected.",unsaved_changes:"Some of your changes weren't saved. Are you sure you want to ignore them?",yes:"Yes",placeholder_data_warning:"Network issue: Data refresh failed."},navigation:{clear_filters:"Clear filters",no_filtered_results:"No %{name} found using the current filters.",no_results:"No %{name} found",no_more_results:"The page number %{page} is out of boundaries. Try the previous page.",page_out_of_boundaries:"Page number %{page} out of boundaries",page_out_from_end:"Cannot go after last page",page_out_from_begin:"Cannot go before page 1",page_range_info:"%{offsetBegin}-%{offsetEnd} of %{total}",partial_page_range_info:"%{offsetBegin}-%{offsetEnd} of more than %{offsetEnd}",current_page:"Page %{page}",page:"Go to page %{page}",first:"Go to first page",last:"Go to last page",next:"Go to next page",previous:"Go to previous page",page_rows_per_page:"Rows per page:",skip_nav:"Skip to content"},sort:{sort_by:"Sort by %{field_lower_first} %{order}",ASC:"ascending",DESC:"descending"},auth:{auth_check_error:"Please login to continue",user_menu:"Profile",username:"Username",password:"Password",email:"Email",sign_in:"Sign in",sign_in_error:"Authentication failed, please retry",logout:"Logout"},notification:{updated:"Element updated |||| %{smart_count} elements updated",created:"Element created",deleted:"Element deleted |||| %{smart_count} elements deleted",bad_item:"Incorrect element",item_doesnt_exist:"Element does not exist",http_error:"Server communication error",data_provider_error:"dataProvider error. Check the console for details.",i18n_error:"Cannot load the translations for the specified language",canceled:"Action cancelled",logged_out:"Your session has ended, please reconnect.",not_authorized:"You're not authorized to access this resource.",application_update_available:"A new version is available.",offline:"No connectivity. Could not fetch data."},validation:{required:"Required",minLength:"Must be %{min} characters at least",maxLength:"Must be %{max} characters or less",minValue:"Must be at least %{min}",maxValue:"Must be %{max} or less",number:"Must be a number",email:"Must be a valid email",oneOf:"Must be one of: %{options}",regex:"Must match a specific format (regexp): %{pattern}",unique:"Must be unique"},saved_queries:{label:"Saved queries",query_name:"Query name",new_label:"Save current query...",new_dialog_title:"Save current query as",remove_label:"Remove saved query",remove_label_with_name:'Remove query "%{name}"',remove_dialog_title:"Remove saved query?",remove_message:"Are you sure you want to remove that item from your list of saved queries?",help:"Filter the list and save this query for later"},configurable:{customize:"Customize",configureMode:"Configure this page",inspector:{title:"Inspector",content:"Hover the application UI elements to configure them",reset:"Reset Settings",hideAll:"Hide All",showAll:"Show All"},Datagrid:{title:"Datagrid",unlabeled:"Unlabeled column #%{column}"},SimpleForm:{title:"Form",unlabeled:"Unlabeled input #%{input}"},SimpleList:{title:"List",primaryText:"Primary text",secondaryText:"Secondary text",tertiaryText:"Tertiary text"}}}},pA,Sz;function DW(){if(Sz)return pA;Sz=1;var e=Object.prototype.toString;return pA=function(r){var n=e.call(r),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&e.call(r.callee)==="[object Function]"),i},pA}var mA,Ez;function KIe(){if(Ez)return mA;Ez=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=DW(),i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(w){var x=w.constructor;return x&&x.prototype===w},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=(function(){if(typeof window>"u")return!1;for(var w in window)try{if(!d["$"+w]&&t.call(window,w)&&window[w]!==null&&typeof window[w]=="object")try{p(window[w])}catch{return!0}}catch{return!0}return!1})(),v=function(w){if(typeof window>"u"||!m)return p(w);try{return p(w)}catch{return!1}};e=function(x){var P=x!==null&&typeof x=="object",T=r.call(x)==="[object Function]",O=n(x),L=P&&r.call(x)==="[object String]",N=[];if(!P&&!T&&!O)throw new TypeError("Object.keys called on a non-object");var F=u&&T;if(L&&x.length>0&&!t.call(x,0))for(var D=0;D<x.length;++D)N.push(String(D));if(O&&x.length>0)for(var q=0;q<x.length;++q)N.push(String(q));else for(var z in x)!(F&&z==="prototype")&&t.call(x,z)&&N.push(String(z));if(o)for(var Z=v(x),Q=0;Q<a.length;++Q)!(Z&&a[Q]==="constructor")&&t.call(x,a[Q])&&N.push(a[Q]);return N}}return mA=e,mA}var gA,Cz;function XIe(){if(Cz)return gA;Cz=1;var e=Array.prototype.slice,t=DW(),r=Object.keys,n=r?function(u){return r(u)}:KIe(),i=Object.keys;return n.shim=function(){if(Object.keys){var u=(function(){var a=Object.keys(arguments);return a&&a.length===arguments.length})(1,2);u||(Object.keys=function(p){return t(p)?i(e.call(p)):i(p)})}else Object.keys=n;return Object.keys||n},gA=n,gA}var yA,Az;function S2(){if(Az)return yA;Az=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return yA=e,yA}var vA,Pz;function NW(){return Pz||(Pz=1,vA=SyntaxError),vA}var bA,Tz;function eb(){return Tz||(Tz=1,bA=TypeError),bA}var _A,Iz;function YIe(){return Iz||(Iz=1,_A=Object.getOwnPropertyDescriptor),_A}var xA,Mz;function E2(){if(Mz)return xA;Mz=1;var e=YIe();if(e)try{e([],"length")}catch{e=null}return xA=e,xA}var wA,Rz;function FW(){if(Rz)return wA;Rz=1;var e=S2(),t=NW(),r=eb(),n=E2();return wA=function(o,u,a){if(!o||typeof o!="object"&&typeof o!="function")throw new r("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,v=arguments.length>6?arguments[6]:!1,w=!!n&&n(o,u);if(e)e(o,u,{configurable:m===null&&w?w.configurable:!m,enumerable:p===null&&w?w.enumerable:!p,value:a,writable:d===null&&w?w.writable:!d});else if(v||!p&&!d&&!m)o[u]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},wA}var SA,Oz;function BW(){if(Oz)return SA;Oz=1;var e=S2(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},SA=t,SA}var EA,kz;function jW(){if(kz)return EA;kz=1;var e=XIe(),t=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,n=Array.prototype.concat,i=FW(),o=function(d){return typeof d=="function"&&r.call(d)==="[object Function]"},u=BW()(),a=function(d,m,v,w){if(m in d){if(w===!0){if(d[m]===v)return}else if(!o(w)||!w())return}u?i(d,m,v,!0):i(d,m,v)},p=function(d,m){var v=arguments.length>2?arguments[2]:{},w=e(m);t&&(w=n.call(w,Object.getOwnPropertySymbols(m)));for(var x=0;x<w.length;x+=1)a(d,w[x],m[w[x]],v[w[x]])};return p.supportsDescriptors=!!u,EA=p,EA}var CA={exports:{}},AA,Lz;function zW(){return Lz||(Lz=1,AA=Object),AA}var PA,Dz;function JIe(){return Dz||(Dz=1,PA=Error),PA}var TA,Nz;function QIe(){return Nz||(Nz=1,TA=EvalError),TA}var IA,Fz;function eMe(){return Fz||(Fz=1,IA=RangeError),IA}var MA,Bz;function tMe(){return Bz||(Bz=1,MA=ReferenceError),MA}var RA,jz;function rMe(){return jz||(jz=1,RA=URIError),RA}var OA,zz;function nMe(){return zz||(zz=1,OA=Math.abs),OA}var kA,$z;function iMe(){return $z||($z=1,kA=Math.floor),kA}var LA,Uz;function aMe(){return Uz||(Uz=1,LA=Math.max),LA}var DA,qz;function oMe(){return qz||(qz=1,DA=Math.min),DA}var NA,Vz;function sMe(){return Vz||(Vz=1,NA=Math.pow),NA}var FA,Gz;function lMe(){return Gz||(Gz=1,FA=Math.round),FA}var BA,Hz;function uMe(){return Hz||(Hz=1,BA=Number.isNaN||function(t){return t!==t}),BA}var jA,Wz;function cMe(){if(Wz)return jA;Wz=1;var e=uMe();return jA=function(r){return e(r)||r===0?r:r<0?-1:1},jA}var zA,Zz;function fMe(){return Zz||(Zz=1,zA=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var u=Object.getOwnPropertySymbols(t);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),zA}var $A,Kz;function hMe(){if(Kz)return $A;Kz=1;var e=typeof Symbol<"u"&&Symbol,t=fMe();return $A=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},$A}var UA,Xz;function $W(){return Xz||(Xz=1,UA=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),UA}var qA,Yz;function UW(){if(Yz)return qA;Yz=1;var e=zW();return qA=e.getPrototypeOf||null,qA}var VA,Jz;function dMe(){if(Jz)return VA;Jz=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(p,d){for(var m=[],v=0;v<p.length;v+=1)m[v]=p[v];for(var w=0;w<d.length;w+=1)m[w+p.length]=d[w];return m},o=function(p,d){for(var m=[],v=d,w=0;v<p.length;v+=1,w+=1)m[w]=p[v];return m},u=function(a,p){for(var d="",m=0;m<a.length;m+=1)d+=a[m],m+1<a.length&&(d+=p);return d};return VA=function(p){var d=this;if(typeof d!="function"||t.apply(d)!==n)throw new TypeError(e+d);for(var m=o(arguments,1),v,w=function(){if(this instanceof v){var L=d.apply(this,i(m,arguments));return Object(L)===L?L:this}return d.apply(p,i(m,arguments))},x=r(0,d.length-m.length),P=[],T=0;T<x;T++)P[T]="$"+T;if(v=Function("binder","return function ("+u(P,",")+"){ return binder.apply(this,arguments); }")(w),d.prototype){var O=function(){};O.prototype=d.prototype,v.prototype=new O,O.prototype=null}return v},VA}var GA,Qz;function tb(){if(Qz)return GA;Qz=1;var e=dMe();return GA=Function.prototype.bind||e,GA}var HA,e7;function CR(){return e7||(e7=1,HA=Function.prototype.call),HA}var WA,t7;function AR(){return t7||(t7=1,WA=Function.prototype.apply),WA}var ZA,r7;function pMe(){return r7||(r7=1,ZA=typeof Reflect<"u"&&Reflect&&Reflect.apply),ZA}var KA,n7;function qW(){if(n7)return KA;n7=1;var e=tb(),t=AR(),r=CR(),n=pMe();return KA=n||e.call(r,t),KA}var XA,i7;function PR(){if(i7)return XA;i7=1;var e=tb(),t=eb(),r=CR(),n=qW();return XA=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(e,r,o)},XA}var YA,a7;function mMe(){if(a7)return YA;a7=1;var e=PR(),t=E2(),r;try{r=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var n=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return YA=n&&typeof n.get=="function"?e([n.get]):typeof o=="function"?function(a){return o(a==null?a:i(a))}:!1,YA}var JA,o7;function gMe(){if(o7)return JA;o7=1;var e=$W(),t=UW(),r=mMe();return JA=e?function(i){return e(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:r?function(i){return r(i)}:null,JA}var QA,s7;function VW(){if(s7)return QA;s7=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=tb();return QA=r.call(e,t),QA}var eP,l7;function GW(){if(l7)return eP;l7=1;var e,t=zW(),r=JIe(),n=QIe(),i=eMe(),o=tMe(),u=NW(),a=eb(),p=rMe(),d=nMe(),m=iMe(),v=aMe(),w=oMe(),x=sMe(),P=lMe(),T=cMe(),O=Function,L=function(mt){try{return O('"use strict"; return ('+mt+").constructor;")()}catch{}},N=E2(),F=S2(),D=function(){throw new a},q=N?(function(){try{return arguments.callee,D}catch{try{return N(arguments,"callee").get}catch{return D}}})():D,z=hMe()(),Z=gMe(),Q=UW(),Y=$W(),se=AR(),W=CR(),G={},ae=typeof Uint8Array>"u"||!Z?e:Z(Uint8Array),le={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":z&&Z?Z([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":G,"%AsyncGenerator%":G,"%AsyncGeneratorFunction%":G,"%AsyncIteratorPrototype%":G,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":O,"%GeneratorFunction%":G,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":z&&Z?Z(Z([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!z||!Z?e:Z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":N,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!z||!Z?e:Z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":z&&Z?Z(""[Symbol.iterator]()):e,"%Symbol%":z?Symbol:e,"%SyntaxError%":u,"%ThrowTypeError%":q,"%TypedArray%":ae,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":W,"%Function.prototype.apply%":se,"%Object.defineProperty%":F,"%Object.getPrototypeOf%":Q,"%Math.abs%":d,"%Math.floor%":m,"%Math.max%":v,"%Math.min%":w,"%Math.pow%":x,"%Math.round%":P,"%Math.sign%":T,"%Reflect.getPrototypeOf%":Y};if(Z)try{null.error}catch(mt){var ue=Z(Z(mt));le["%Error.prototype%"]=ue}var ye=function mt(rt){var Lt;if(rt==="%AsyncFunction%")Lt=L("async function () {}");else if(rt==="%GeneratorFunction%")Lt=L("function* () {}");else if(rt==="%AsyncGeneratorFunction%")Lt=L("async function* () {}");else if(rt==="%AsyncGenerator%"){var Tt=mt("%AsyncGeneratorFunction%");Tt&&(Lt=Tt.prototype)}else if(rt==="%AsyncIteratorPrototype%"){var Pt=mt("%AsyncGenerator%");Pt&&Z&&(Lt=Z(Pt.prototype))}return le[rt]=Lt,Lt},Se={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ge=tb(),xe=VW(),Fe=ge.call(W,Array.prototype.concat),He=ge.call(se,Array.prototype.splice),pe=ge.call(W,String.prototype.replace),_e=ge.call(W,String.prototype.slice),Ce=ge.call(W,RegExp.prototype.exec),ke=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$e=/\\(\\)?/g,ht=function(rt){var Lt=_e(rt,0,1),Tt=_e(rt,-1);if(Lt==="%"&&Tt!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(Tt==="%"&&Lt!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var Pt=[];return pe(rt,ke,function(ut,Le,sr,lr){Pt[Pt.length]=sr?pe(lr,$e,"$1"):Le||ut}),Pt},At=function(rt,Lt){var Tt=rt,Pt;if(xe(Se,Tt)&&(Pt=Se[Tt],Tt="%"+Pt[0]+"%"),xe(le,Tt)){var ut=le[Tt];if(ut===G&&(ut=ye(Tt)),typeof ut>"u"&&!Lt)throw new a("intrinsic "+rt+" exists, but is not available. Please file an issue!");return{alias:Pt,name:Tt,value:ut}}throw new u("intrinsic "+rt+" does not exist!")};return eP=function(rt,Lt){if(typeof rt!="string"||rt.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Lt!="boolean")throw new a('"allowMissing" argument must be a boolean');if(Ce(/^%?[^%]*%?$/,rt)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Tt=ht(rt),Pt=Tt.length>0?Tt[0]:"",ut=At("%"+Pt+"%",Lt),Le=ut.name,sr=ut.value,lr=!1,dr=ut.alias;dr&&(Pt=dr[0],He(Tt,Fe([0,1],dr)));for(var Yt=1,Ve=!0;Yt<Tt.length;Yt+=1){var tt=Tt[Yt],lt=_e(tt,0,1),Mt=_e(tt,-1);if((lt==='"'||lt==="'"||lt==="`"||Mt==='"'||Mt==="'"||Mt==="`")&&lt!==Mt)throw new u("property names with quotes must have matching quotes");if((tt==="constructor"||!Ve)&&(lr=!0),Pt+="."+tt,Le="%"+Pt+"%",xe(le,Le))sr=le[Le];else if(sr!=null){if(!(tt in sr)){if(!Lt)throw new a("base intrinsic for "+rt+" exists, but the property is not available.");return}if(N&&Yt+1>=Tt.length){var Kt=N(sr,tt);Ve=!!Kt,Ve&&"get"in Kt&&!("originalValue"in Kt.get)?sr=Kt.get:sr=sr[tt]}else Ve=xe(sr,tt),sr=sr[tt];Ve&&!lr&&(le[Le]=sr)}}return sr},eP}var tP,u7;function yMe(){if(u7)return tP;u7=1;var e=GW(),t=FW(),r=BW()(),n=E2(),i=eb(),o=e("%Math.floor%");return tP=function(a,p){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||o(p)!==p)throw new i("`length` must be a positive 32-bit integer");var d=arguments.length>2&&!!arguments[2],m=!0,v=!0;if("length"in a&&n){var w=n(a,"length");w&&!w.configurable&&(m=!1),w&&!w.writable&&(v=!1)}return(m||v||!d)&&(r?t(a,"length",p,!0,!0):t(a,"length",p)),a},tP}var rP,c7;function vMe(){if(c7)return rP;c7=1;var e=tb(),t=AR(),r=qW();return rP=function(){return r(e,t,arguments)},rP}var f7;function bMe(){return f7||(f7=1,(function(e){var t=yMe(),r=S2(),n=PR(),i=vMe();e.exports=function(u){var a=n(arguments),p=u.length-(arguments.length-1);return t(a,1+(p>0?p:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(CA)),CA.exports}var nP,h7;function _Me(){if(h7)return nP;h7=1;var e=eb();return nP=function(r){if(r==null)throw new e(arguments.length>0&&arguments[1]||"Cannot call method on "+r);return r},nP}var iP,d7;function xMe(){if(d7)return iP;d7=1;var e=GW(),t=PR(),r=t([e("%String.prototype.indexOf%")]);return iP=function(i,o){var u=e(i,!!o);return typeof u=="function"&&r(i,".prototype.")>-1?t([u]):u},iP}var aP,p7;function HW(){if(p7)return aP;p7=1;var e=_Me(),t=xMe(),r=t("Object.prototype.propertyIsEnumerable"),n=t("Array.prototype.push");return aP=function(o){var u=e(o),a=[];for(var p in u)r(u,p)&&n(a,[p,u[p]]);return a},aP}var oP,m7;function WW(){if(m7)return oP;m7=1;var e=HW();return oP=function(){return typeof Object.entries=="function"?Object.entries:e},oP}var sP,g7;function wMe(){if(g7)return sP;g7=1;var e=WW(),t=jW();return sP=function(){var n=e();return t(Object,{entries:n},{entries:function(){return Object.entries!==n}}),n},sP}var lP,y7;function SMe(){if(y7)return lP;y7=1;var e=jW(),t=bMe(),r=HW(),n=WW(),i=wMe(),o=t(n(),Object);return e(o,{getPolyfill:n,implementation:r,shim:i}),lP=o,lP}var uP,v7;function EMe(){if(v7)return uP;v7=1;var e=function(){};return uP=e,uP}var cP,b7;function CMe(){if(b7)return cP;b7=1;var e=SMe(),t=EMe(),r=VW(),n=function(D){t(!1,D)},i=String.prototype.replace,o=String.prototype.split,u="||||",a=function(F){var D=F%100,q=D%10;return D!==11&&q===1?0:2<=q&&q<=4&&!(D>=12&&D<=14)?1:2},p={pluralTypes:{arabic:function(F){if(F<3)return F;var D=F%100;return D>=3&&D<=10?3:D>=11?4:5},bosnian_serbian:a,chinese:function(){return 0},croatian:a,french:function(F){return F>=2?1:0},german:function(F){return F!==1?1:0},russian:a,lithuanian:function(F){return F%10===1&&F%100!==11?0:F%10>=2&&F%10<=9&&(F%100<11||F%100>19)?1:2},czech:function(F){return F===1?0:F>=2&&F<=4?1:2},polish:function(F){if(F===1)return 0;var D=F%10;return 2<=D&&D<=4&&(F%100<10||F%100>=20)?1:2},icelandic:function(F){return F%10!==1||F%100===11?1:0},slovenian:function(F){var D=F%100;return D===1?0:D===2?1:D===3||D===4?2:3},romanian:function(F){if(F===1)return 0;var D=F%100;return F===0||D>=2&&D<=19?1:2},ukrainian:a},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function d(F){for(var D={},q=e(F),z=0;z<q.length;z+=1)for(var Z=q[z][0],Q=q[z][1],Y=0;Y<Q.length;Y+=1)D[Q[Y]]=Z;return D}function m(F,D){var q=d(F.pluralTypeToLanguages);return q[D]||q[o.call(D,/-/,1)[0]]||q.en}function v(F,D,q){return F.pluralTypes[D](q)}function w(){var F={};return function(D,q){var z=F[q];return z&&!D.pluralTypes[z]&&(z=null,F[q]=z),z||(z=m(D,q),z&&(F[q]=z)),z}}function x(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(F){var D=F&&F.prefix||"%{",q=F&&F.suffix||"}";if(D===u||q===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(x(D)+"(.*?)"+x(q),"g")}var T=w(),O=/%\{(.*?)\}/g;function L(F,D,q,z,Z,Q){if(typeof F!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(D==null)return F;var Y=F,se=z||O,W=Q||i,G=typeof D=="number"?{smart_count:D}:D;if(G.smart_count!=null&&F){var ae=Z||p,le=o.call(F,u),ue=q||"en",ye=T(ae,ue),Se=v(ae,ye,G.smart_count);Y=i.call(le[Se]||le[0],/^[^\S]*|[^\S]*$/g,"")}return Y=W.call(Y,se,function(ge,xe){return!r(G,xe)||G[xe]==null?ge:G[xe]}),Y}function N(F){var D=F||{};this.phrases={},this.extend(D.phrases||{}),this.currentLocale=D.locale||"en";var q=D.allowMissing?L:null;this.onMissingKey=typeof D.onMissingKey=="function"?D.onMissingKey:q,this.warn=D.warn||n,this.replaceImplementation=D.replace||i,this.tokenRegex=P(D.interpolation),this.pluralRules=D.pluralRules||p}return N.prototype.locale=function(F){return F&&(this.currentLocale=F),this.currentLocale},N.prototype.extend=function(F,D){for(var q=e(F||{}),z=0;z<q.length;z+=1){var Z=q[z][0],Q=q[z][1],Y=D?D+"."+Z:Z;typeof Q=="object"?this.extend(Q,Y):this.phrases[Y]=Q}},N.prototype.unset=function(F,D){if(typeof F=="string")delete this.phrases[F];else for(var q=e(F||{}),z=0;z<q.length;z+=1){var Z=q[z][0],Q=q[z][1],Y=D?D+"."+Z:Z;typeof Q=="object"?this.unset(Q,Y):delete this.phrases[Y]}},N.prototype.clear=function(){this.phrases={}},N.prototype.replace=function(F){this.clear(),this.extend(F)},N.prototype.t=function(F,D){var q,z,Z=D??{};if(typeof this.phrases[F]=="string")q=this.phrases[F];else if(typeof Z._=="string")q=Z._;else if(this.onMissingKey){var Q=this.onMissingKey;z=Q(F,Z,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+F+'"'),z=F;return typeof q=="string"&&(z=L(q,Z,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),z},N.prototype.has=function(F){return r(this.phrases,F)},N.transformPhrase=function(D,q,z){return L(D,q,z)},cP=N,cP}var AMe=CMe();const _7=Us(AMe);var Ym=function(){return Ym=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ym.apply(this,arguments)};const PMe=(function(e,t,r,n){r===void 0&&(r=[{locale:"en",name:"English"}]),n===void 0&&(n={});var i=t,o=e(t);if(o instanceof Promise)throw new Error("The i18nProvider returned a Promise for the messages of the default locale (".concat(t,"). Please update your i18nProvider to return the messages of the default locale in a synchronous way."));var u,a;Array.isArray(r)?(u=r,a=n):(u=[{locale:"en",name:"English"}],a=r);var p=new _7(Ym({locale:i,phrases:Ym({"":""},o)},a)),d=p.t.bind(p);return{translate:function(m,v){return v===void 0&&(v={}),d(m,v)},changeLocale:function(m){return Promise.resolve(e(m)).then(function(v){i=m;var w=new _7(Ym({locale:m,phrases:Ym({"":""},v)},n));d=w.t.bind(w)})},getLocale:function(){return i},getLocales:function(){return u}}});var TMe=PMe(function(){return ZIe},"en",[{name:"en",value:"English"}],{allowMissing:!0}),IMe=b5e(),MMe=function(e){var t=e.accessDenied,r=e.authCallbackPage,n=e.authenticationError,i=e.authProvider,o=e.basename,u=e.catchAll,a=e.children,p=e.darkTheme,d=e.dashboard,m=e.dataProvider,v=e.defaultTheme,w=e.disableTelemetry,x=e.error,P=e.i18nProvider,T=P===void 0?TMe:P,O=e.layout,L=e.lightTheme,N=e.loading,F=e.loginPage,D=e.notification,q=e.queryClient,z=e.ready,Z=e.requireAuth,Q=e.store,Y=Q===void 0?IMe:Q,se=e.theme,W=e.title,G=W===void 0?"React Admin":W;return M.createElement(LW,{authProvider:i,basename:o,darkTheme:p,dataProvider:m,defaultTheme:v,i18nProvider:T,lightTheme:L,queryClient:q,store:Y,theme:se},M.createElement(HIe,{accessDenied:t,authCallbackPage:r,authenticationError:n,catchAll:u,dashboard:d,disableTelemetry:w,error:x,layout:O,loading:N,loginPage:F,notification:D,ready:z,requireAuth:Z,title:G},a))},Qy={exports:{}},x7;function RMe(){if(x7)return Qy.exports;x7=1,Qy.exports=r,Qy.exports.parse=r,Qy.exports.stringify=n;var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,t=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function r(i){var o=i.split(";"),u=o.pop(),a=(o.shift()||"").split("=").pop(),p=0;function d(z){var Z=u.substring(p).match(z);return Z?(p+=Z[0].length,Z[0]):null}function m(z){return z&&a.match(/\d+/)&&(z.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),z}function v(){d(/^\s*/)}function w(){v();for(var z=0,Z=[],Q=[Z],Y=Z,se;se=d(/^(\()/)||d(/^(\))/)||d(/^(,)/)||d(t);){if(se==="(")Q.push(Y),Y=[],Q[Q.length-1].push(Y),z++;else if(se===")"){if(Y.length===0||(Y=Q.pop(),!Y))return null;if(z--,z===0)break}else if(se===",")Y=[],Q[Q.length-1].push(Y);else if(!se.split(/\s/g).some(isNaN))Array.prototype.push.apply(Y,se.split(/\s/g).map(parseFloat));else return null;v()}return z!==0?null:Z}function x(){for(var z=[],Z,Q;Q=d(t)||d(/^(,)/);)Q===","?(z.push(Z),Z=[]):Q.split(/\s/g).some(isNaN)||(Z||(Z=[]),Array.prototype.push.apply(Z,Q.split(/\s/g).map(parseFloat))),v();if(Z)z.push(Z);else return null;return z.length?z:null}function P(){if(!d(/^(point(\sz)?)/i)||(v(),!d(/^(\()/)))return null;var z=x();return!z||(v(),!d(/^(\))/))?null:{type:"Point",coordinates:z[0]}}function T(){if(!d(/^(multipoint)/i))return null;v();var z=u.substring(u.indexOf("(")+1,u.length-1).replace(/\(/g,"").replace(/\)/g,"");u="MULTIPOINT ("+z+")";var Z=w();return Z?(v(),{type:"MultiPoint",coordinates:Z}):null}function O(){if(!d(/^(multilinestring)/i))return null;v();var z=w();return z?(v(),{type:"MultiLineString",coordinates:z}):null}function L(){if(!d(/^(linestring(\sz)?)/i)||(v(),!d(/^(\()/)))return null;var z=x();return!z||!d(/^(\))/)?null:{type:"LineString",coordinates:z}}function N(){if(!d(/^(polygon(\sz)?)/i))return null;v();var z=w();return z?{type:"Polygon",coordinates:z}:null}function F(){if(!d(/^(multipolygon)/i))return null;v();var z=w();return z?{type:"MultiPolygon",coordinates:z}:null}function D(){var z=[],Z;if(!d(/^(geometrycollection)/i)||(v(),!d(/^(\()/)))return null;for(;Z=q();)z.push(Z),v(),d(/^(,)/),v();return d(/^(\))/)?{type:"GeometryCollection",geometries:z}:null}function q(){return P()||L()||N()||T()||O()||F()||D()}return m(q())}function n(i){i.type==="Feature"&&(i=i.geometry);function o(m){return m.join(" ")}function u(m){return m.map(o).join(", ")}function a(m){return m.map(u).map(d).join(", ")}function p(m){return m.map(a).map(d).join(", ")}function d(m){return"("+m+")"}switch(i.type){case"Point":return"POINT ("+o(i.coordinates)+")";case"LineString":return"LINESTRING ("+u(i.coordinates)+")";case"Polygon":return"POLYGON ("+a(i.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+u(i.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+p(i.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+a(i.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+i.geometries.map(n).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return Qy.exports}var Uh=RMe();function ix(e){const t=e?.source,r=pl(),n=P0({mapId:e?.mapId}),[i,o]=M.useState(),[u,a]=M.useState(),p=yH(e),{field:{onChange:d}}=p;return M.useEffect(()=>{if(typeof r>"u"||!r[t])return;const m={type:"Feature",properties:{},geometry:Uh.parse(r[t])};o(m),a(m)},[r,e.source]),M.useEffect(()=>{if(n.map&&typeof r<"u"&&r[t]){const m=zU(Uh.parse(r[t]));m?.geometry?.coordinates&&n.map.setCenter(m.geometry.coordinates)}},[n.map]),ze.jsxs(ze.Fragment,{children:[e.embeddedMap&&ze.jsx(A0,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:Array.isArray(e?.MapLibreMapProps?.options?.center)&&e.MapLibreMapProps.options.center.length===2?[e.MapLibreMapProps.options.center[0],e.MapLibreMapProps.options.center[1]]:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),e.type==="point"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"circle-radius":8,"circle-color":"#6f6f96","circle-stroke-color":"white","circle-stroke-width":3,"circle-opacity":.8}},type:"circle",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_point",onChange:m=>{typeof m[0]<"u"&&d(Uh.stringify(m[0]))}})]}),e.type==="polygon"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"fill-color":"#6f6f96","fill-opacity":.6}},type:"fill",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_polygon",onChange:m=>{typeof m[0]<"u"&&d(Uh.stringify(m[0]))}})]}),e.type==="line"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"line-width":6,"line-color":"#6f6f96","line-opacity":.6}},type:"line",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_line_string",onChange:m=>{typeof m[0]<"u"&&d(Uh.stringify(m[0]))}})]})]})}ix.defaultProps={type:"point",embeddedMap:!0};ix.__docgenInfo={description:"",methods:[],displayName:"GeospatialInputMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},geometrytype:{required:!1,tsType:{name:"union",raw:"'point' | 'line' | 'polygon'",elements:[{name:"literal",value:"'point'"},{name:"literal",value:"'line'"},{name:"literal",value:"'polygon'"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},mapId:{required:!1,tsType:{name:"string"},description:""},type:{defaultValue:{value:"'point'",computed:!1},required:!1}},composes:["InputProps"]};function dd(e){return ze.jsx(ze.Fragment,{children:e.embeddedMap?ze.jsx(Mx,{children:ze.jsx(ix,{...e})}):ze.jsx(ix,{...e})})}dd.defaultProps={embeddedMap:!0};dd.__docgenInfo={description:"",methods:[],displayName:"GeospatialInput",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};var OMe=Object.defineProperty,kMe=(e,t,r)=>t in e?OMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ou=(e,t,r)=>kMe(e,typeof t!="symbol"?t+"":t,r),l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var LMe=Array.isArray,kp=LMe,DMe=typeof l_=="object"&&l_&&l_.Object===Object&&l_,ZW=DMe,NMe=ZW,FMe=typeof self=="object"&&self&&self.Object===Object&&self,BMe=NMe||FMe||Function("return this")(),Of=BMe,jMe=Of,zMe=jMe.Symbol,rb=zMe,w7=rb,KW=Object.prototype,$Me=KW.hasOwnProperty,UMe=KW.toString,ev=w7?w7.toStringTag:void 0;function qMe(e){var t=$Me.call(e,ev),r=e[ev];try{e[ev]=void 0;var n=!0}catch{}var i=UMe.call(e);return n&&(t?e[ev]=r:delete e[ev]),i}var VMe=qMe,GMe=Object.prototype,HMe=GMe.toString;function WMe(e){return HMe.call(e)}var ZMe=WMe,S7=rb,KMe=VMe,XMe=ZMe,YMe="[object Null]",JMe="[object Undefined]",E7=S7?S7.toStringTag:void 0;function QMe(e){return e==null?e===void 0?JMe:YMe:E7&&E7 in Object(e)?KMe(e):XMe(e)}var nb=QMe;function eRe(e){return e!=null&&typeof e=="object"}var Lp=eRe,tRe=nb,rRe=Lp,nRe="[object Symbol]";function iRe(e){return typeof e=="symbol"||rRe(e)&&tRe(e)==nRe}var IR=iRe,aRe=kp,oRe=IR,sRe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lRe=/^\w*$/;function uRe(e,t){if(aRe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||oRe(e)?!0:lRe.test(e)||!sRe.test(e)||t!=null&&e in Object(t)}var cRe=uRe;function fRe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Yg=fRe,hRe=nb,dRe=Yg,pRe="[object AsyncFunction]",mRe="[object Function]",gRe="[object GeneratorFunction]",yRe="[object Proxy]";function vRe(e){if(!dRe(e))return!1;var t=hRe(e);return t==mRe||t==gRe||t==pRe||t==yRe}var XW=vRe,bRe=Of,_Re=bRe["__core-js_shared__"],xRe=_Re,fP=xRe,C7=(function(){var e=/[^.]+$/.exec(fP&&fP.keys&&fP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function wRe(e){return!!C7&&C7 in e}var SRe=wRe,ERe=Function.prototype,CRe=ERe.toString;function ARe(e){if(e!=null){try{return CRe.call(e)}catch{}try{return e+""}catch{}}return""}var YW=ARe,PRe=XW,TRe=SRe,IRe=Yg,MRe=YW,RRe=/[\\^$.*+?()[\]{}|]/g,ORe=/^\[object .+?Constructor\]$/,kRe=Function.prototype,LRe=Object.prototype,DRe=kRe.toString,NRe=LRe.hasOwnProperty,FRe=RegExp("^"+DRe.call(NRe).replace(RRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BRe(e){if(!IRe(e)||TRe(e))return!1;var t=PRe(e)?FRe:ORe;return t.test(MRe(e))}var jRe=BRe;function zRe(e,t){return e?.[t]}var $Re=zRe,URe=jRe,qRe=$Re;function VRe(e,t){var r=qRe(e,t);return URe(r)?r:void 0}var Dp=VRe,GRe=Dp,HRe=GRe(Object,"create"),C2=HRe,A7=C2;function WRe(){this.__data__=A7?A7(null):{},this.size=0}var ZRe=WRe;function KRe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var XRe=KRe,YRe=C2,JRe="__lodash_hash_undefined__",QRe=Object.prototype,eOe=QRe.hasOwnProperty;function tOe(e){var t=this.__data__;if(YRe){var r=t[e];return r===JRe?void 0:r}return eOe.call(t,e)?t[e]:void 0}var rOe=tOe,nOe=C2,iOe=Object.prototype,aOe=iOe.hasOwnProperty;function oOe(e){var t=this.__data__;return nOe?t[e]!==void 0:aOe.call(t,e)}var sOe=oOe,lOe=C2,uOe="__lodash_hash_undefined__";function cOe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=lOe&&t===void 0?uOe:t,this}var fOe=cOe,hOe=ZRe,dOe=XRe,pOe=rOe,mOe=sOe,gOe=fOe;function Jg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jg.prototype.clear=hOe;Jg.prototype.delete=dOe;Jg.prototype.get=pOe;Jg.prototype.has=mOe;Jg.prototype.set=gOe;var yOe=Jg;function vOe(){this.__data__=[],this.size=0}var bOe=vOe;function _Oe(e,t){return e===t||e!==e&&t!==t}var MR=_Oe,xOe=MR;function wOe(e,t){for(var r=e.length;r--;)if(xOe(e[r][0],t))return r;return-1}var A2=wOe,SOe=A2,EOe=Array.prototype,COe=EOe.splice;function AOe(e){var t=this.__data__,r=SOe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():COe.call(t,r,1),--this.size,!0}var POe=AOe,TOe=A2;function IOe(e){var t=this.__data__,r=TOe(t,e);return r<0?void 0:t[r][1]}var MOe=IOe,ROe=A2;function OOe(e){return ROe(this.__data__,e)>-1}var kOe=OOe,LOe=A2;function DOe(e,t){var r=this.__data__,n=LOe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var NOe=DOe,FOe=bOe,BOe=POe,jOe=MOe,zOe=kOe,$Oe=NOe;function Qg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qg.prototype.clear=FOe;Qg.prototype.delete=BOe;Qg.prototype.get=jOe;Qg.prototype.has=zOe;Qg.prototype.set=$Oe;var P2=Qg,UOe=Dp,qOe=Of,VOe=UOe(qOe,"Map"),RR=VOe,P7=yOe,GOe=P2,HOe=RR;function WOe(){this.size=0,this.__data__={hash:new P7,map:new(HOe||GOe),string:new P7}}var ZOe=WOe;function KOe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var XOe=KOe,YOe=XOe;function JOe(e,t){var r=e.__data__;return YOe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var T2=JOe,QOe=T2;function eke(e){var t=QOe(this,e).delete(e);return this.size-=t?1:0,t}var tke=eke,rke=T2;function nke(e){return rke(this,e).get(e)}var ike=nke,ake=T2;function oke(e){return ake(this,e).has(e)}var ske=oke,lke=T2;function uke(e,t){var r=lke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var cke=uke,fke=ZOe,hke=tke,dke=ike,pke=ske,mke=cke;function ey(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ey.prototype.clear=fke;ey.prototype.delete=hke;ey.prototype.get=dke;ey.prototype.has=pke;ey.prototype.set=mke;var OR=ey,JW=OR,gke="Expected a function";function kR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(gke);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(kR.Cache||JW),r}kR.Cache=JW;var yke=kR,vke=yke,bke=500;function _ke(e){var t=vke(e,function(n){return r.size===bke&&r.clear(),n}),r=t.cache;return t}var xke=_ke,wke=xke,Ske=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eke=/\\(\\)?/g,Cke=wke(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ske,function(r,n,i,o){t.push(i?o.replace(Eke,"$1"):n||r)}),t}),Ake=Cke;function Pke(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Tke=Pke,T7=rb,Ike=Tke,Mke=kp,Rke=IR,I7=T7?T7.prototype:void 0,M7=I7?I7.toString:void 0;function QW(e){if(typeof e=="string")return e;if(Mke(e))return Ike(e,QW)+"";if(Rke(e))return M7?M7.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Oke=QW,kke=Oke;function Lke(e){return e==null?"":kke(e)}var Dke=Lke,Nke=kp,Fke=cRe,Bke=Ake,jke=Dke;function zke(e,t){return Nke(e)?e:Fke(e,t)?[e]:Bke(jke(e))}var $ke=zke,Uke=IR;function qke(e){if(typeof e=="string"||Uke(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Vke=qke,Gke=$ke,Hke=Vke;function Wke(e,t){t=Gke(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Hke(t[r++])];return r&&r==n?e:void 0}var Zke=Wke,Kke=Zke;function Xke(e,t,r){var n=e==null?void 0:Kke(e,t);return n===void 0?r:n}var Yke=Xke;const Ya=TR(Yke);var Jke=P2;function Qke(){this.__data__=new Jke,this.size=0}var eLe=Qke;function tLe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var rLe=tLe;function nLe(e){return this.__data__.get(e)}var iLe=nLe;function aLe(e){return this.__data__.has(e)}var oLe=aLe,sLe=P2,lLe=RR,uLe=OR,cLe=200;function fLe(e,t){var r=this.__data__;if(r instanceof sLe){var n=r.__data__;if(!lLe||n.length<cLe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new uLe(n)}return r.set(e,t),this.size=r.size,this}var hLe=fLe,dLe=P2,pLe=eLe,mLe=rLe,gLe=iLe,yLe=oLe,vLe=hLe;function ty(e){var t=this.__data__=new dLe(e);this.size=t.size}ty.prototype.clear=pLe;ty.prototype.delete=mLe;ty.prototype.get=gLe;ty.prototype.has=yLe;ty.prototype.set=vLe;var LR=ty;function bLe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var _Le=bLe,xLe=Dp,wLe=(function(){try{var e=xLe(Object,"defineProperty");return e({},"",{}),e}catch{}})(),SLe=wLe,R7=SLe;function ELe(e,t,r){t=="__proto__"&&R7?R7(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var eZ=ELe,CLe=eZ,ALe=MR,PLe=Object.prototype,TLe=PLe.hasOwnProperty;function ILe(e,t,r){var n=e[t];(!(TLe.call(e,t)&&ALe(n,r))||r===void 0&&!(t in e))&&CLe(e,t,r)}var tZ=ILe,MLe=tZ,RLe=eZ;function OLe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],p=n?n(r[a],e[a],a,r,e):void 0;p===void 0&&(p=e[a]),i?RLe(r,a,p):MLe(r,a,p)}return r}var I2=OLe;function kLe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var LLe=kLe,DLe=nb,NLe=Lp,FLe="[object Arguments]";function BLe(e){return NLe(e)&&DLe(e)==FLe}var jLe=BLe,O7=jLe,zLe=Lp,rZ=Object.prototype,$Le=rZ.hasOwnProperty,ULe=rZ.propertyIsEnumerable,qLe=O7((function(){return arguments})())?O7:function(e){return zLe(e)&&$Le.call(e,"callee")&&!ULe.call(e,"callee")},VLe=qLe,ax={exports:{}};function GLe(){return!1}var HLe=GLe;ax.exports;(function(e,t){var r=Of,n=HLe,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,d=p||n;e.exports=d})(ax,ax.exports);var DR=ax.exports,WLe=9007199254740991,ZLe=/^(?:0|[1-9]\d*)$/;function KLe(e,t){var r=typeof e;return t=t??WLe,!!t&&(r=="number"||r!="symbol"&&ZLe.test(e))&&e>-1&&e%1==0&&e<t}var XLe=KLe,YLe=9007199254740991;function JLe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=YLe}var nZ=JLe,QLe=nb,e4e=nZ,t4e=Lp,r4e="[object Arguments]",n4e="[object Array]",i4e="[object Boolean]",a4e="[object Date]",o4e="[object Error]",s4e="[object Function]",l4e="[object Map]",u4e="[object Number]",c4e="[object Object]",f4e="[object RegExp]",h4e="[object Set]",d4e="[object String]",p4e="[object WeakMap]",m4e="[object ArrayBuffer]",g4e="[object DataView]",y4e="[object Float32Array]",v4e="[object Float64Array]",b4e="[object Int8Array]",_4e="[object Int16Array]",x4e="[object Int32Array]",w4e="[object Uint8Array]",S4e="[object Uint8ClampedArray]",E4e="[object Uint16Array]",C4e="[object Uint32Array]",Fa={};Fa[y4e]=Fa[v4e]=Fa[b4e]=Fa[_4e]=Fa[x4e]=Fa[w4e]=Fa[S4e]=Fa[E4e]=Fa[C4e]=!0;Fa[r4e]=Fa[n4e]=Fa[m4e]=Fa[i4e]=Fa[g4e]=Fa[a4e]=Fa[o4e]=Fa[s4e]=Fa[l4e]=Fa[u4e]=Fa[c4e]=Fa[f4e]=Fa[h4e]=Fa[d4e]=Fa[p4e]=!1;function A4e(e){return t4e(e)&&e4e(e.length)&&!!Fa[QLe(e)]}var P4e=A4e;function T4e(e){return function(t){return e(t)}}var NR=T4e,ox={exports:{}};ox.exports;(function(e,t){var r=ZW,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(ox,ox.exports);var FR=ox.exports,I4e=P4e,M4e=NR,k7=FR,L7=k7&&k7.isTypedArray,R4e=L7?M4e(L7):I4e,iZ=R4e,O4e=LLe,k4e=VLe,L4e=kp,D4e=DR,N4e=XLe,F4e=iZ,B4e=Object.prototype,j4e=B4e.hasOwnProperty;function z4e(e,t){var r=L4e(e),n=!r&&k4e(e),i=!r&&!n&&D4e(e),o=!r&&!n&&!i&&F4e(e),u=r||n||i||o,a=u?O4e(e.length,String):[],p=a.length;for(var d in e)(t||j4e.call(e,d))&&!(u&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||N4e(d,p)))&&a.push(d);return a}var aZ=z4e,$4e=Object.prototype;function U4e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||$4e;return e===r}var BR=U4e;function q4e(e,t){return function(r){return e(t(r))}}var oZ=q4e,V4e=oZ,G4e=V4e(Object.keys,Object),H4e=G4e,W4e=BR,Z4e=H4e,K4e=Object.prototype,X4e=K4e.hasOwnProperty;function Y4e(e){if(!W4e(e))return Z4e(e);var t=[];for(var r in Object(e))X4e.call(e,r)&&r!="constructor"&&t.push(r);return t}var J4e=Y4e,Q4e=XW,eDe=nZ;function tDe(e){return e!=null&&eDe(e.length)&&!Q4e(e)}var sZ=tDe,rDe=aZ,nDe=J4e,iDe=sZ;function aDe(e){return iDe(e)?rDe(e):nDe(e)}var M2=aDe,oDe=I2,sDe=M2;function lDe(e,t){return e&&oDe(t,sDe(t),e)}var uDe=lDe;function cDe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var fDe=cDe,hDe=Yg,dDe=BR,pDe=fDe,mDe=Object.prototype,gDe=mDe.hasOwnProperty;function yDe(e){if(!hDe(e))return pDe(e);var t=dDe(e),r=[];for(var n in e)n=="constructor"&&(t||!gDe.call(e,n))||r.push(n);return r}var vDe=yDe,bDe=aZ,_De=vDe,xDe=sZ;function wDe(e){return xDe(e)?bDe(e,!0):_De(e)}var jR=wDe,SDe=I2,EDe=jR;function CDe(e,t){return e&&SDe(t,EDe(t),e)}var ADe=CDe,sx={exports:{}};sx.exports;(function(e,t){var r=Of,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(d,m){if(m)return d.slice();var v=d.length,w=a?a(v):new d.constructor(v);return d.copy(w),w}e.exports=p})(sx,sx.exports);var PDe=sx.exports;function TDe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var IDe=TDe;function MDe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o}var RDe=MDe;function ODe(){return[]}var lZ=ODe,kDe=RDe,LDe=lZ,DDe=Object.prototype,NDe=DDe.propertyIsEnumerable,D7=Object.getOwnPropertySymbols,FDe=D7?function(e){return e==null?[]:(e=Object(e),kDe(D7(e),function(t){return NDe.call(e,t)}))}:LDe,zR=FDe,BDe=I2,jDe=zR;function zDe(e,t){return BDe(e,jDe(e),t)}var $De=zDe;function UDe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var uZ=UDe,qDe=oZ,VDe=qDe(Object.getPrototypeOf,Object),cZ=VDe,GDe=uZ,HDe=cZ,WDe=zR,ZDe=lZ,KDe=Object.getOwnPropertySymbols,XDe=KDe?function(e){for(var t=[];e;)GDe(t,WDe(e)),e=HDe(e);return t}:ZDe,fZ=XDe,YDe=I2,JDe=fZ;function QDe(e,t){return YDe(e,JDe(e),t)}var e6e=QDe,t6e=uZ,r6e=kp;function n6e(e,t,r){var n=t(e);return r6e(e)?n:t6e(n,r(e))}var hZ=n6e,i6e=hZ,a6e=zR,o6e=M2;function s6e(e){return i6e(e,o6e,a6e)}var dZ=s6e,l6e=hZ,u6e=fZ,c6e=jR;function f6e(e){return l6e(e,c6e,u6e)}var h6e=f6e,d6e=Dp,p6e=Of,m6e=d6e(p6e,"DataView"),g6e=m6e,y6e=Dp,v6e=Of,b6e=y6e(v6e,"Promise"),_6e=b6e,x6e=Dp,w6e=Of,S6e=x6e(w6e,"Set"),E6e=S6e,C6e=Dp,A6e=Of,P6e=C6e(A6e,"WeakMap"),T6e=P6e,I3=g6e,M3=RR,R3=_6e,O3=E6e,k3=T6e,pZ=nb,ry=YW,N7="[object Map]",I6e="[object Object]",F7="[object Promise]",B7="[object Set]",j7="[object WeakMap]",z7="[object DataView]",M6e=ry(I3),R6e=ry(M3),O6e=ry(R3),k6e=ry(O3),L6e=ry(k3),qd=pZ;(I3&&qd(new I3(new ArrayBuffer(1)))!=z7||M3&&qd(new M3)!=N7||R3&&qd(R3.resolve())!=F7||O3&&qd(new O3)!=B7||k3&&qd(new k3)!=j7)&&(qd=function(e){var t=pZ(e),r=t==I6e?e.constructor:void 0,n=r?ry(r):"";if(n)switch(n){case M6e:return z7;case R6e:return N7;case O6e:return F7;case k6e:return B7;case L6e:return j7}return t});var R2=qd,D6e=Object.prototype,N6e=D6e.hasOwnProperty;function F6e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&N6e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var B6e=F6e,j6e=Of,z6e=j6e.Uint8Array,mZ=z6e,$7=mZ;function $6e(e){var t=new e.constructor(e.byteLength);return new $7(t).set(new $7(e)),t}var $R=$6e,U6e=$R;function q6e(e,t){var r=t?U6e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var V6e=q6e,G6e=/\w*$/;function H6e(e){var t=new e.constructor(e.source,G6e.exec(e));return t.lastIndex=e.lastIndex,t}var W6e=H6e,U7=rb,q7=U7?U7.prototype:void 0,V7=q7?q7.valueOf:void 0;function Z6e(e){return V7?Object(V7.call(e)):{}}var K6e=Z6e,X6e=$R;function Y6e(e,t){var r=t?X6e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var J6e=Y6e,Q6e=$R,eNe=V6e,tNe=W6e,rNe=K6e,nNe=J6e,iNe="[object Boolean]",aNe="[object Date]",oNe="[object Map]",sNe="[object Number]",lNe="[object RegExp]",uNe="[object Set]",cNe="[object String]",fNe="[object Symbol]",hNe="[object ArrayBuffer]",dNe="[object DataView]",pNe="[object Float32Array]",mNe="[object Float64Array]",gNe="[object Int8Array]",yNe="[object Int16Array]",vNe="[object Int32Array]",bNe="[object Uint8Array]",_Ne="[object Uint8ClampedArray]",xNe="[object Uint16Array]",wNe="[object Uint32Array]";function SNe(e,t,r){var n=e.constructor;switch(t){case hNe:return Q6e(e);case iNe:case aNe:return new n(+e);case dNe:return eNe(e,r);case pNe:case mNe:case gNe:case yNe:case vNe:case bNe:case _Ne:case xNe:case wNe:return nNe(e,r);case oNe:return new n;case sNe:case cNe:return new n(e);case lNe:return tNe(e);case uNe:return new n;case fNe:return rNe(e)}}var ENe=SNe,CNe=Yg,G7=Object.create,ANe=(function(){function e(){}return function(t){if(!CNe(t))return{};if(G7)return G7(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),PNe=ANe,TNe=PNe,INe=cZ,MNe=BR;function RNe(e){return typeof e.constructor=="function"&&!MNe(e)?TNe(INe(e)):{}}var ONe=RNe,kNe=R2,LNe=Lp,DNe="[object Map]";function NNe(e){return LNe(e)&&kNe(e)==DNe}var FNe=NNe,BNe=FNe,jNe=NR,H7=FR,W7=H7&&H7.isMap,zNe=W7?jNe(W7):BNe,$Ne=zNe,UNe=R2,qNe=Lp,VNe="[object Set]";function GNe(e){return qNe(e)&&UNe(e)==VNe}var HNe=GNe,WNe=HNe,ZNe=NR,Z7=FR,K7=Z7&&Z7.isSet,KNe=K7?ZNe(K7):WNe,XNe=KNe,YNe=LR,JNe=_Le,QNe=tZ,eFe=uDe,tFe=ADe,rFe=PDe,nFe=IDe,iFe=$De,aFe=e6e,oFe=dZ,sFe=h6e,lFe=R2,uFe=B6e,cFe=ENe,fFe=ONe,hFe=kp,dFe=DR,pFe=$Ne,mFe=Yg,gFe=XNe,yFe=M2,vFe=jR,bFe=1,_Fe=2,xFe=4,gZ="[object Arguments]",wFe="[object Array]",SFe="[object Boolean]",EFe="[object Date]",CFe="[object Error]",yZ="[object Function]",AFe="[object GeneratorFunction]",PFe="[object Map]",TFe="[object Number]",vZ="[object Object]",IFe="[object RegExp]",MFe="[object Set]",RFe="[object String]",OFe="[object Symbol]",kFe="[object WeakMap]",LFe="[object ArrayBuffer]",DFe="[object DataView]",NFe="[object Float32Array]",FFe="[object Float64Array]",BFe="[object Int8Array]",jFe="[object Int16Array]",zFe="[object Int32Array]",$Fe="[object Uint8Array]",UFe="[object Uint8ClampedArray]",qFe="[object Uint16Array]",VFe="[object Uint32Array]",Ta={};Ta[gZ]=Ta[wFe]=Ta[LFe]=Ta[DFe]=Ta[SFe]=Ta[EFe]=Ta[NFe]=Ta[FFe]=Ta[BFe]=Ta[jFe]=Ta[zFe]=Ta[PFe]=Ta[TFe]=Ta[vZ]=Ta[IFe]=Ta[MFe]=Ta[RFe]=Ta[OFe]=Ta[$Fe]=Ta[UFe]=Ta[qFe]=Ta[VFe]=!0;Ta[CFe]=Ta[yZ]=Ta[kFe]=!1;function $_(e,t,r,n,i,o){var u,a=t&bFe,p=t&_Fe,d=t&xFe;if(r&&(u=i?r(e,n,i,o):r(e)),u!==void 0)return u;if(!mFe(e))return e;var m=hFe(e);if(m){if(u=uFe(e),!a)return nFe(e,u)}else{var v=lFe(e),w=v==yZ||v==AFe;if(dFe(e))return rFe(e,a);if(v==vZ||v==gZ||w&&!i){if(u=p||w?{}:fFe(e),!a)return p?aFe(e,tFe(u,e)):iFe(e,eFe(u,e))}else{if(!Ta[v])return i?e:{};u=cFe(e,v,a)}}o||(o=new YNe);var x=o.get(e);if(x)return x;o.set(e,u),gFe(e)?e.forEach(function(O){u.add($_(O,t,r,O,e,o))}):pFe(e)&&e.forEach(function(O,L){u.set(L,$_(O,t,r,L,e,o))});var P=d?p?sFe:oFe:p?vFe:yFe,T=m?void 0:P(e);return JNe(T||e,function(O,L){T&&(L=O,O=e[L]),QNe(u,L,$_(O,t,r,L,e,o))}),u}var bZ=$_,GFe="__lodash_hash_undefined__";function HFe(e){return this.__data__.set(e,GFe),this}var WFe=HFe;function ZFe(e){return this.__data__.has(e)}var KFe=ZFe,XFe=OR,YFe=WFe,JFe=KFe;function lx(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new XFe;++t<r;)this.add(e[t])}lx.prototype.add=lx.prototype.push=YFe;lx.prototype.has=JFe;var QFe=lx;function e8e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var t8e=e8e;function r8e(e,t){return e.has(t)}var n8e=r8e,i8e=QFe,a8e=t8e,o8e=n8e,s8e=1,l8e=2;function u8e(e,t,r,n,i,o){var u=r&s8e,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var d=o.get(e),m=o.get(t);if(d&&m)return d==t&&m==e;var v=-1,w=!0,x=r&l8e?new i8e:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var P=e[v],T=t[v];if(n)var O=u?n(T,P,v,t,e,o):n(P,T,v,e,t,o);if(O!==void 0){if(O)continue;w=!1;break}if(x){if(!a8e(t,function(L,N){if(!o8e(x,N)&&(P===L||i(P,L,r,n,o)))return x.push(N)})){w=!1;break}}else if(!(P===T||i(P,T,r,n,o))){w=!1;break}}return o.delete(e),o.delete(t),w}var _Z=u8e;function c8e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var f8e=c8e;function h8e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var d8e=h8e,X7=rb,Y7=mZ,p8e=MR,m8e=_Z,g8e=f8e,y8e=d8e,v8e=1,b8e=2,_8e="[object Boolean]",x8e="[object Date]",w8e="[object Error]",S8e="[object Map]",E8e="[object Number]",C8e="[object RegExp]",A8e="[object Set]",P8e="[object String]",T8e="[object Symbol]",I8e="[object ArrayBuffer]",M8e="[object DataView]",J7=X7?X7.prototype:void 0,hP=J7?J7.valueOf:void 0;function R8e(e,t,r,n,i,o,u){switch(r){case M8e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I8e:return!(e.byteLength!=t.byteLength||!o(new Y7(e),new Y7(t)));case _8e:case x8e:case E8e:return p8e(+e,+t);case w8e:return e.name==t.name&&e.message==t.message;case C8e:case P8e:return e==t+"";case S8e:var a=g8e;case A8e:var p=n&v8e;if(a||(a=y8e),e.size!=t.size&&!p)return!1;var d=u.get(e);if(d)return d==t;n|=b8e,u.set(e,t);var m=m8e(a(e),a(t),n,i,o,u);return u.delete(e),m;case T8e:if(hP)return hP.call(e)==hP.call(t)}return!1}var O8e=R8e,Q7=dZ,k8e=1,L8e=Object.prototype,D8e=L8e.hasOwnProperty;function N8e(e,t,r,n,i,o){var u=r&k8e,a=Q7(e),p=a.length,d=Q7(t),m=d.length;if(p!=m&&!u)return!1;for(var v=p;v--;){var w=a[v];if(!(u?w in t:D8e.call(t,w)))return!1}var x=o.get(e),P=o.get(t);if(x&&P)return x==t&&P==e;var T=!0;o.set(e,t),o.set(t,e);for(var O=u;++v<p;){w=a[v];var L=e[w],N=t[w];if(n)var F=u?n(N,L,w,t,e,o):n(L,N,w,e,t,o);if(!(F===void 0?L===N||i(L,N,r,n,o):F)){T=!1;break}O||(O=w=="constructor")}if(T&&!O){var D=e.constructor,q=t.constructor;D!=q&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof q=="function"&&q instanceof q)&&(T=!1)}return o.delete(e),o.delete(t),T}var F8e=N8e,dP=LR,B8e=_Z,j8e=O8e,z8e=F8e,e$=R2,t$=kp,r$=DR,$8e=iZ,U8e=1,n$="[object Arguments]",i$="[object Array]",u_="[object Object]",q8e=Object.prototype,a$=q8e.hasOwnProperty;function V8e(e,t,r,n,i,o){var u=t$(e),a=t$(t),p=u?i$:e$(e),d=a?i$:e$(t);p=p==n$?u_:p,d=d==n$?u_:d;var m=p==u_,v=d==u_,w=p==d;if(w&&r$(e)){if(!r$(t))return!1;u=!0,m=!1}if(w&&!m)return o||(o=new dP),u||$8e(e)?B8e(e,t,r,n,i,o):j8e(e,t,p,r,n,i,o);if(!(r&U8e)){var x=m&&a$.call(e,"__wrapped__"),P=v&&a$.call(t,"__wrapped__");if(x||P){var T=x?e.value():e,O=P?t.value():t;return o||(o=new dP),i(T,O,r,n,o)}}return w?(o||(o=new dP),z8e(e,t,r,n,i,o)):!1}var G8e=V8e,H8e=G8e,o$=Lp;function xZ(e,t,r,n,i){return e===t?!0:e==null||t==null||!o$(e)&&!o$(t)?e!==e&&t!==t:H8e(e,t,r,n,xZ,i)}var W8e=xZ,Z8e=LR,K8e=W8e,X8e=1,Y8e=2;function J8e(e,t,r,n){var i=r.length,o=i,u=!n;if(e==null)return!o;for(e=Object(e);i--;){var a=r[i];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=r[i];var p=a[0],d=e[p],m=a[1];if(u&&a[2]){if(d===void 0&&!(p in e))return!1}else{var v=new Z8e;if(n)var w=n(d,m,p,e,t,v);if(!(w===void 0?K8e(m,d,X8e|Y8e,n,v):w))return!1}}return!0}var Q8e=J8e,eBe=Yg;function tBe(e){return e===e&&!eBe(e)}var rBe=tBe,nBe=rBe,iBe=M2;function aBe(e){for(var t=iBe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,nBe(i)]}return t}var oBe=aBe;function sBe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var lBe=sBe,uBe=Q8e,cBe=oBe,fBe=lBe;function hBe(e){var t=cBe(e);return t.length==1&&t[0][2]?fBe(t[0][0],t[0][1]):function(r){return r===e||uBe(r,e,t)}}var dBe=hBe,pBe=bZ,mBe=dBe,gBe=1;function yBe(e){return mBe(pBe(e,gBe))}var vBe=yBe;const bBe=TR(vBe);var _Be=bZ,xBe=1,wBe=4;function SBe(e){return _Be(e,xBe|wBe)}var EBe=SBe;const wZ=TR(EBe);class s${constructor({items:t=[],identifierName:r="id",getNewId:n}={}){if(Ou(this,"sequence",0),Ou(this,"items",[]),Ou(this,"database",null),Ou(this,"name",null),Ou(this,"identifierName","id"),Ou(this,"getNewId"),!Array.isArray(t))throw new Error("Can't initialize a Collection with anything else than an array of items");this.identifierName=r,this.getNewId=n||this.getNewIdFromSequence,t.map(this.addOne.bind(this))}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){if(this.name==null)throw new Error("Can't embed references without a collection name");const r=`${this.name.slice(0,-1)}_id`;return n=>{if(this.database==null)throw new Error("Can't embed references without a database");const i=this.database.collections[t];if(!i)throw new Error(`Can't embed a non-existing collection ${t}`);return Array.isArray(n[t])?n[t]=i.getAll({filter:o=>n[t].indexOf(o[i.identifierName])!==-1}):n[t]=i.getAll({filter:o=>o[r]===n[this.identifierName]}),n}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const o=this.database.collections[r];if(!o)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=o.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,o)=>o(i),n)}getCount(t){return this.getAll(t).length}getAll(t){let r=this.items.slice(0);return t&&(r=r.map(n=>Object.assign({},n)),t.embed&&this.database&&(r=r.map(this._itemEmbedder(t.embed))),t.filter&&(r=SZ(r,t.filter)),t.sort&&(r=TBe(r,t.sort)),t.range&&(r=IBe(r,t.range))),r}getIndex(t){return this.items.findIndex(r=>r[this.identifierName]==t)}getOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);let i=this.items[n];return i=Object.assign({},i),r!=null&&r.embed&&this.database&&(i=this._itemEmbedder(r.embed)(i)),i}getNewIdFromSequence(){return this.sequence++}addOne(t){const r=wZ(t),n=r[this.identifierName];if(n!=null){if(this.getIndex(n)!==-1)throw new Error(`An item with the identifier ${n} already exists`);typeof n=="number"&&(this.sequence=Math.max(this.sequence,n)+1)}else r[this.identifierName]=this.getNewId();return this.items.push(r),r}updateOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);for(const i in r)this.items[n][i]=r[i];return Object.assign({},this.items[n])}removeOne(t){const r=this.getIndex(t);if(r===-1)throw new Error(`No item with identifier ${t}`);const n=this.items[r];return this.items.splice(r,1),typeof t=="number"&&t==this.sequence-1&&this.sequence--,n}}const CBe=(e,t)=>e.reduce((r,n)=>r&&t(n),!0),ABe=(e,t)=>e.reduce((r,n)=>r||t(n),!1),PBe=(e,t)=>e.reduce((r,n,i)=>{if(r!=null)return r;const o=e.slice(0,i+1).join("."),u=e.slice(i+1).join("."),a=Ya(t,o);return Array.isArray(a)&&i<e.length-1?[o,u]:void 0},void 0),l$=(e,t)=>{if(e.indexOf("_q")!==-1){const r=e.replace(/(_q)$/,""),n=new RegExp(t.toString(),"i");return i=>{var o;return((o=Ya(i,r))==null?void 0:o.toString().match(n))!==null}}if(e.indexOf("_lte")!==-1){const r=e.replace(/(_lte)$/,"");return n=>Ya(n,r)<=t}if(e.indexOf("_gte")!==-1){const r=e.replace(/(_gte)$/,"");return n=>Ya(n,r)>=t}if(e.indexOf("_lt")!==-1){const r=e.replace(/(_lt)$/,"");return n=>Ya(n,r)<t}if(e.indexOf("_gt")!==-1){const r=e.replace(/(_gt)$/,"");return n=>Ya(n,r)>t}if(e.indexOf("_neq_any")!==-1){const r=e.replace(/(_neq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>Ya(i,r)!=o)}if(e.indexOf("_neq")!==-1){const r=e.replace(/(_neq)$/,"");return n=>Ya(n,r)!=t}if(e.indexOf("_eq_any")!==-1){const r=e.replace(/(_eq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(o=>Ya(i,r)==o)}if(e.indexOf("_eq")!==-1){const r=e.replace(/(_eq)$/,"");return n=>Ya(n,r)==t}if(e.indexOf("_inc_any")!==-1){const r=e.replace(/(_inc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(o=>{const u=Ya(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(o):!1})}if(e.indexOf("_inc")!==-1){const r=e.replace(/(_inc)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>{const u=Ya(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(o):!1})}if(e.indexOf("_ninc_any")!==-1){const r=e.replace(/(_ninc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>{const u=Ya(i,r);return Array.isArray(u)||typeof u=="string"?!u.includes(o):!1})}return Array.isArray(t)?r=>Array.isArray(Ya(r,e))?CBe(t,n=>{const i=Ya(r,e);return Array.isArray(i)?ABe(i,o=>o==n):!1}):t.filter(n=>n==Ya(r,e)).length>0:t==null?r=>Ya(r,e)==null:typeof t=="object"?r=>bBe(t)(Ya(r,e)):r=>{const n=Ya(r,e);return Array.isArray(n)&&typeof t=="string"?n.indexOf(t)!==-1:typeof n=="boolean"&&typeof t=="string"?n===(t==="true"):n==t}};function SZ(e,t){if(typeof t=="function")return e.filter(t);if(t instanceof Object){const r=Object.keys(t).map(n=>{if(n==="q"&&typeof t.q=="string"){const u=MBe(t.q),a=p=>{for(const d in p){const m=p[d];if(typeof m=="object"&&a(m)||m&&typeof m=="string"&&m.match&&m.match(u)!==null)return!0}return!1};return a}const i=n.split("."),o=t[n];return i.length>1?u=>{const a=PBe(i,u);if(a){const[p,d]=a,m=Ya(u,p);return Array.isArray(m)?SZ(m,{[d]:o}).length>0:!1}return l$(n,o)(u)}:l$(n,o)});return e.filter(n=>r.reduce((i,o)=>i&&o(n),!0))}throw new Error("Unsupported filter type")}function TBe(e,t){if(typeof t=="function")return e.sort(t);if(typeof t=="string")return e.sort((r,n)=>{const i=Ya(r,t),o=Ya(n,t);return i>o?1:i<o?-1:0});if(Array.isArray(t)){const r=t[0],n=t[1].toLowerCase()==="asc"?1:-1;return e.sort((i,o)=>{const u=Ya(i,r),a=Ya(o,r);return u>a?n:u<a?-1*n:0})}throw new Error("Unsupported sort type")}function IBe(e,t){if(Array.isArray(t))return e.slice(t[0],t[1]!==void 0?t[1]+1:void 0);throw new Error("Unsupported range type")}function MBe(e){const t=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(" ").map(r=>`(${r})`).join("|");return new RegExp(t,"i")}class RBe{constructor(t){if(Ou(this,"obj",null),Ou(this,"database",null),Ou(this,"name",null),!(t instanceof Object))throw new Error("Can't initialize a Single with anything except an object");this.obj=wZ(t)}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){return r=>{if(this.database==null)throw new Error("Can't embed references without a database");const n=this.database.collections[t];if(!n)throw new Error(`Can't embed a non-existing collection ${t}`);return r[t]=n.getAll({filter:i=>r[t].indexOf(i[n.identifierName])!==-1}),r}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const o=this.database.collections[r];if(!o)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=o.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,o)=>o(i),n)}getOnly(t){let r=this.obj;return t!=null&&t.embed&&this.database&&(r=Object.assign({},r),r=this._itemEmbedder(t.embed)(r)),r}updateOnly(t){if(this.obj==null)throw new Error("Can't update a non-existing object");for(const r in t)this.obj[r]=t[r];return this.obj}}class OBe{constructor({data:t,identifierName:r="id",getNewId:n}={}){Ou(this,"identifierName","id"),Ou(this,"collections",{}),Ou(this,"singles",{}),Ou(this,"getNewId"),this.getNewId=n,this.identifierName=r,t&&this.init(t)}init(t){for(const r in t){const n=t[r];Array.isArray(n)?this.addCollection(r,new s$({items:n,identifierName:this.identifierName,getNewId:this.getNewId})):this.addSingle(r,new RBe(n))}}addCollection(t,r){this.collections[t]=r,r.setDatabase(this),r.setName(t)}getCollection(t){return this.collections[t]}getCollectionNames(){return Object.keys(this.collections)}addSingle(t,r){this.singles[t]=r,r.setDatabase(this),r.setName(t)}getSingle(t){return this.singles[t]}getSingleNames(){return Object.keys(this.singles)}getCount(t,r){return this.collections[t].getCount(r)}getAll(t,r){return this.collections[t].getAll(r)}getOne(t,r,n){return this.collections[t].getOne(r,n)}addOne(t,r){return Object.prototype.hasOwnProperty.call(this.collections,t)||this.addCollection(t,new s$({items:[],identifierName:this.identifierName,getNewId:this.getNewId})),this.collections[t].addOne(r)}updateOne(t,r,n){return this.collections[t].updateOne(r,n)}removeOne(t,r){return this.collections[t].removeOne(r)}getOnly(t,r){return this.singles[t].getOnly()}updateOnly(t,r){return this.singles[t].updateOnly(r)}}var kBe=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Bh=function(){return Bh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bh.apply(this,arguments)},LBe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{d(n.next(m))}catch(v){u(v)}}function p(m){try{d(n.throw(m))}catch(v){u(v)}}function d(m){m.done?o(m.value):i(m.value).then(a,p)}d((n=n.apply(e,t||[])).next())})},DBe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(d){return function(m){return p([d,m])}}function p(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(m){d=[6,m],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},NBe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function FBe(e,t,r,n){console.group?(console.groupCollapsed(e,t,JSON.stringify(r)),console.log(n),console.groupEnd()):(console.log("FakeRest request ",e,t,r),console.log("FakeRest response",n))}function Xf(e,t){return t?new Promise(function(r){setTimeout(function(){return r(e)},t)}):e}const u$=(function(e,t,r){t===void 0&&(t=!1);var n=new OBe({data:e});typeof window<"u"&&(window._database=n);function i(u,a,p){var d,m,v,w,x,P,T,O,L,N,F,D,q,z,Z,Q,Y,se,W;switch(u){case"getList":{var G=p.pagination,ae=G.page,le=G.perPage,ue=p.sort,ye=ue.field,Se=ue.order,ge={sort:[ye,Se],range:[(ae-1)*le,ae*le-1],filter:p.filter,embed:c_((m=p.meta)===null||m===void 0?void 0:m.embed,(v=p.meta)===null||v===void 0?void 0:v.prefetch)},xe=n.getAll(a,ge),Fe=f_(xe,(w=p.meta)===null||w===void 0?void 0:w.prefetch);return Xf({data:h_(xe,(x=p.meta)===null||x===void 0?void 0:x.prefetch),total:n.getCount(a,{filter:p.filter}),meta:!((P=p.meta)===null||P===void 0)&&P.prefetch?{prefetched:Fe}:void 0},r)}case"getOne":{var He=n.getOne(a,p.id,Bh(Bh({},p),{embed:c_((T=p.meta)===null||T===void 0?void 0:T.embed,(O=p.meta)===null||O===void 0?void 0:O.prefetch)})),Fe=f_(He,(L=p.meta)===null||L===void 0?void 0:L.prefetch);return Xf({data:h_(He,(N=p.meta)===null||N===void 0?void 0:N.prefetch),meta:!((F=p.meta)===null||F===void 0)&&F.prefetch?{prefetched:Fe}:void 0},r)}case"getMany":{var pe=p.ids.map(function(ht){var At,mt;return n.getOne(a,ht,Bh(Bh({},p),{embed:c_((At=p.meta)===null||At===void 0?void 0:At.embed,(mt=p.meta)===null||mt===void 0?void 0:mt.prefetch)}))}),Fe=f_(pe,(D=p.meta)===null||D===void 0?void 0:D.prefetch);return Xf({data:h_(pe,(q=p.meta)===null||q===void 0?void 0:q.prefetch),meta:!((z=p.meta)===null||z===void 0)&&z.prefetch?{prefetched:Fe}:void 0},r)}case"getManyReference":{var _e=p.pagination,ae=_e.page,le=_e.perPage,Ce=p.sort,ye=Ce.field,Se=Ce.order,ge={sort:[ye,Se],range:[(ae-1)*le,ae*le-1],filter:Bh(Bh({},p.filter),(d={},d[p.target]=p.id,d)),embed:c_((Z=p.meta)===null||Z===void 0?void 0:Z.embed,(Q=p.meta)===null||Q===void 0?void 0:Q.prefetch)},ke=n.getAll(a,ge),Fe=f_(ke,(Y=p.meta)===null||Y===void 0?void 0:Y.prefetch);return Xf({data:h_(ke,(se=p.meta)===null||se===void 0?void 0:se.prefetch),total:n.getCount(a,{filter:ge.filter}),meta:!((W=p.meta)===null||W===void 0)&&W.prefetch?{prefetched:Fe}:void 0},r)}case"update":return Xf({data:n.updateOne(a,p.id,pP(p.data))},r);case"updateMany":return p.ids.forEach(function($e){return n.updateOne(a,$e,pP(p.data))}),Xf({data:p.ids},r);case"create":return Xf({data:n.addOne(a,pP(p.data))},r);case"delete":return Xf({data:n.removeOne(a,p.id)},r);case"deleteMany":return p.ids.forEach(function($e){return n.removeOne(a,$e)}),Xf({data:p.ids},r);default:return!1}}var o=function(u,a,p){return LBe(void 0,void 0,void 0,function(){var d,m,v,w,x;return DBe(this,function(P){switch(P.label){case 0:if(d=n.getCollection(a),!d&&u!=="create")throw m=new BBe('Undefined collection "'.concat(a,'"')),m.code=1,m;P.label=1;case 1:return P.trys.push([1,3,,4]),[4,i(u,a,p)];case 2:return v=P.sent(),[3,4];case 3:throw w=P.sent(),console.error(w),w;case 4:return t&&(p.signal,x=NBe(p,["signal"]),FBe(u,a,x,v)),[2,v]}})})};return{getList:function(u,a){return o("getList",u,a)},getOne:function(u,a){return o("getOne",u,a)},getMany:function(u,a){return o("getMany",u,a)},getManyReference:function(u,a){return o("getManyReference",u,a)},update:function(u,a){return o("update",u,a)},updateMany:function(u,a){return o("updateMany",u,a)},create:function(u,a){return o("create",u,a)},delete:function(u,a){return o("delete",u,a)},deleteMany:function(u,a){return o("deleteMany",u,a)}}});function c_(e,t){if(!(!e&&!t)){var r=new Set;return e&&e.forEach(function(n){return r.add(n)}),t&&t.forEach(function(n){return r.add(n)}),Array.from(r)}}var f_=function(e,t){if(t){var r={},n=Array.isArray(e)?e:[e];return t.forEach(function(i){var o=i.endsWith("s")?i:"".concat(i,"s");n.forEach(function(u){r[o]||(r[o]=[]),!r[o].some(function(a){return a.id===u[i].id})&&r[o].push(u[i])})}),r}},h_=function(e,t){if(!t)return e;var r=Array.isArray(e)?e:[e],n=r.map(function(i){var o={};for(var u in i)t.includes(u)||(o[u]=i[u]);return o});return Array.isArray(e)?n:n[0]},pP=function(e){return JSON.parse(JSON.stringify(e))},BBe=(function(e){kBe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Error),mP,c$;function jBe(){if(c$)return mP;c$=1;var e=WI();function t(r,n){for(var i=-1,o=n.length,u=Array(o),a=r==null;++i<o;)u[i]=a?void 0:e(r,n[i]);return u}return mP=t,mP}var gP,f$;function zBe(){if(f$)return gP;f$=1;var e=CG(),t=Ig(),r=Array.prototype,n=r.splice;function i(o,u){for(var a=o?u.length:0,p=a-1;a--;){var d=u[a];if(a==p||d!==m){var m=d;t(d)?n.call(o,d,1):e(o,d)}}return o}return gP=i,gP}var yP,h$;function $Be(){if(h$)return yP;h$=1;var e=Yx();function t(r,n){if(r!==n){var i=r!==void 0,o=r===null,u=r===r,a=e(r),p=n!==void 0,d=n===null,m=n===n,v=e(n);if(!d&&!v&&!a&&r>n||a&&p&&m&&!d&&!v||o&&p&&m||!i&&m||!u)return 1;if(!o&&!a&&!v&&r<n||v&&i&&u&&!o&&!a||d&&i&&u||!p&&u||!m)return-1}return 0}return yP=t,yP}var vP,d$;function UBe(){if(d$)return vP;d$=1;var e=zI(),t=jBe(),r=zBe(),n=$Be(),i=YG(),o=Ig(),u=i(function(a,p){var d=a==null?0:a.length,m=t(a,p);return r(a,e(p,function(v){return o(v,d)?+v:v}).sort(n)),m});return vP=u,vP}var qBe=UBe();const p$=Us(qBe);function VBe(e){const{defaultData:t={},localStorageKey:r="ra-data-local-storage",loggingEnabled:n=!1,localStorageUpdateDelay:i=10}=e||{},o=localStorage.getItem(r);let u=o?JSON.parse(o):t;const a=d=>{setTimeout(()=>{d(),localStorage.setItem(r,JSON.stringify(u));const m=new Event("storageItemUpdated",{bubbles:!0,cancelable:!1});document.dispatchEvent(m)},i)};let p=u$(u,n);return window?.addEventListener("storage",d=>{if(d.key===r){const m=JSON.parse(d.newValue);u=m,p=u$(m,n)}}),{getList:(d,m)=>p.getList(d,m).catch(v=>{if(v.code===1)return{data:[],total:0};throw v}),getOne:(d,m)=>p.getOne(d,m),getMany:(d,m)=>p.getMany(d,m),getManyReference:(d,m)=>p.getManyReference(d,m).catch(v=>{if(v.code===1)return{data:[],total:0};throw v}),update:(d,m)=>(a(()=>{const v=u[d].findIndex(w=>w.id===m.data.id);u[d][v]={...m.data}}),p.update(d,m)),updateMany:(d,m)=>(a(()=>{m.ids.forEach(v=>{const w=u[d]?.findIndex(x=>x.id===v);u[d][w]={...u[d][w],...m.data}})}),p.updateMany(d,m)),create:(d,m)=>p.create(d,m).then(v=>(a(()=>{Object.prototype.hasOwnProperty.call(u,d)||(u[d]=[]),u[d].push(v.data)}),v)),delete:(d,m)=>(a(()=>{const v=u[d]?.findIndex(w=>w.id===m.id);p$(u[d],[v])}),p.delete(d,m)),deleteMany:(d,m)=>(a(()=>{const v=m.ids.map(w=>u[d]?.findIndex(x=>x.id===w));p$(u[d],v)}),p.deleteMany(d,m))}}const EZ={pois:[{id:0,title:"poi",geom:"POINT (7.077808464010502 50.74294216203171)"}],properties:[{id:0,title:"property",geom:"POLYGON ((7.066952151714986 50.740002740511244, 7.0639480776189885 50.74065454154203, 7.064291400372213 50.74198527380986, 7.067381305157255 50.742121060690465, 7.067381305157255 50.740518750408825, 7.0669092363712025 50.73997558193838, 7.066952151714986 50.740002740511244))"}],routes:[{id:0,title:"route",geom:"LINESTRING (7.072968944094811 50.737892872017426, 7.0724677647124565 50.73921232584979, 7.0719866325044904 50.7409250229731, 7.071808100376245 50.742318711300925, 7.072108808006249 50.7425470593881, 7.076779799853682 50.742876893548384, 7.077140649009607 50.742775406362085, 7.0774413566381895 50.74257243132925, 7.077862347320121 50.74252168743365, 7.078343479528058 50.74269929082783, 7.078503856930212 50.742889579431534, 7.079466121344723 50.74290226531082, 7.080187819656601 50.742876893548384, 7.08082932926672 50.74281346408284)"}]},GBe=VBe({localStorageUpdateDelay:2,defaultData:EZ}),HBe=Be.createContext();function CZ(e){const[t,r]=M.useState({});M.useEffect(()=>{n();const o=()=>{console.log("refreshing data from localStorage"),n()};return window.addEventListener("storageItemUpdated",o),()=>{window.removeEventListener("storageItemUpdated",o)}},[]);const n=()=>{const o=localStorage.getItem("ra-data-local-storage");if(o){const u=JSON.parse(o),a=Object.keys(u).map(p=>{const d=u[p].map(m=>BU(Uh.parse(m.geom)));return{name:p,featureCollection:d?.[0]?Fue(d):void 0}});r(a)}else{const u=[];let a=0;Object.values(EZ).map(p=>{u.push({name:a===0?"pois":a===1?"properties":"routes",featureCollection:{type:"FeatureCollection",features:p.map(d=>({type:"Feature",properties:{},geometry:Uh.parse(d.geom)}))}}),a++}),r(u)}},i={data:t,refreshData:n};return ze.jsx(HBe.Provider,{value:i,children:e.children})}CZ.__docgenInfo={description:"",methods:[],displayName:"DataContextProvider"};const WBe=(e,t)=>ze.jsx(CZ,{children:ze.jsxs(Mx,{children:[ze.jsx(MMe,{dataProvider:GBe,layout:t.parameters?.layout,theme:XH,children:ze.jsx(TH,{children:ze.jsx(Iu,{path:"/",element:ze.jsx(e,{})})})},t.parameters?.name),!t.args.embeddedMap&&ze.jsx(A0,{mapId:"map_1",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[7.080590113226776,50.740545567043426]},style:{position:"absolute",top:0,right:0,left:0,bottom:0}})]})});WBe.__docgenInfo={description:"",methods:[],displayName:"ReactAdminDefaultDecorator"};function L3(e){const t=e.source,r=pl(),n=P0(),[i,o]=M.useState();return M.useEffect(()=>{if(!r?.[t])return;const u=Uh.parse(r[t]);u&&o({type:"Feature",properties:{},geometry:u})},[r]),M.useEffect(()=>{if(!n.map||!i)return;const u=zU(i);u?.geometry?.coordinates&&n.map.setCenter(u.geometry.coordinates)},[n.map,i]),ze.jsxs(ze.Fragment,{children:[e.embeddedMap&&ze.jsx(A0,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),i&&ze.jsx(Ev,{geojson:i})]})}L3.__docgenInfo={description:"",methods:[],displayName:"GeospatialShowMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:""},mapId:{required:!1,tsType:{name:"string"},description:""}},composes:["InputProps"]};function pd(e){return ze.jsx(ze.Fragment,{children:e.embeddedMap?ze.jsx(Mx,{children:ze.jsx(L3,{...e})}):ze.jsx(L3,{...e})})}pd.defaultProps={embeddedMap:!0};pd.__docgenInfo={description:"",methods:[],displayName:"GeospatialShow",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};const ny={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!0,source:"geom"},iy={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!1,source:"geom"},ZBe=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...ny,type:"point"})]})}),KBe=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...iy,type:"point"})]})}),XBe=()=>ze.jsx(Kg,{resource:"pois",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...ny})]})}),YBe=()=>ze.jsx(Kg,{resource:"pois",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...iy})]})});ZBe.__docgenInfo={description:"",methods:[],displayName:"PoiEdit"};KBe.__docgenInfo={description:"",methods:[],displayName:"PoiEditWebGis"};XBe.__docgenInfo={description:"",methods:[],displayName:"PoiShow"};YBe.__docgenInfo={description:"",methods:[],displayName:"PoiShowWebGis"};const JBe=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...ny,type:"polygon"})]})}),QBe=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...iy,type:"polygon"})]})}),eje=()=>ze.jsx(Kg,{resource:"properties",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...ny})]})}),tje=()=>ze.jsx(Kg,{resource:"properties",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...iy})]})});JBe.__docgenInfo={description:"",methods:[],displayName:"PropertyEdit"};QBe.__docgenInfo={description:"",methods:[],displayName:"PropertyEditWebGis"};eje.__docgenInfo={description:"",methods:[],displayName:"PropertyShow"};tje.__docgenInfo={description:"",methods:[],displayName:"PropertyShowWebGis"};const rje=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...ny,type:"line"})]})}),nje=()=>ze.jsx(Wg,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:ze.jsxs(Zg,{children:[ze.jsx(iu,{source:"title"}),ze.jsx(iu,{source:"geom"}),ze.jsx(dd,{...iy,type:"line"})]})}),ije=()=>ze.jsx(Kg,{resource:"routes",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...ny})]})}),aje=()=>ze.jsx(Kg,{resource:"routes",id:"0",children:ze.jsxs(Xg,{children:[ze.jsx(oc,{source:"id"}),ze.jsx(oc,{source:"title"}),ze.jsx(pd,{...iy})]})});rje.__docgenInfo={description:"",methods:[],displayName:"RouteEdit"};nje.__docgenInfo={description:"",methods:[],displayName:"RouteEditWebGis"};ije.__docgenInfo={description:"",methods:[],displayName:"RouteShow"};aje.__docgenInfo={description:"",methods:[],displayName:"RouteShowWebGis"};const oje=er("div")(()=>({display:"flex",flexDirection:"column",zIndex:1,minHeight:"100%",position:"relative",backgroundColor:"transparent",pointerEvents:"none"})),sje=er("div")(()=>({display:"flex",flexDirection:"column"})),lje=er("main")(()=>({display:"flex",flexGrow:1,marginTop:"3em"})),uje=er("div")(()=>({display:"flex",flexDirection:"row",justifyContent:"center",maxHeight:"50vh",position:"fixed",bottom:"0",width:"100%",backgroundColor:"#fafafa",overflow:"auto",pointerEvents:"all",boxShadow:"0px 0px 8px rgba(0,0,0,0.2)"})),cje=er(ad)(()=>({maxWidth:"600px",width:"100%",height:"100%"})),fje=({children:e,title:t})=>{const[r]=J0(),[n,i]=M.useState(!0);return M.useEffect(()=>{i(!0)},[e]),ze.jsx(oje,{children:ze.jsxs(sje,{children:[ze.jsx(JH,{title:t,open:r,sx:{pointerEvents:"all"}}),ze.jsxs(lje,{children:[ze.jsx(fW,{sx:{backgroundColor:"#f0f0f0",pointerEvents:"all",overflow:"hidden"},children:ze.jsx(Gg,{})}),ze.jsxs(uje,{sx:{...n?{}:{height:"40px",overflow:"hidden"}},children:[ze.jsx(Go,{onClick:()=>i(o=>!o),sx:{position:"absolute",top:0,zIndex:100},children:n?ze.jsx($1e,{}):ze.jsx(U1e,{})}),ze.jsx(cje,{children:e})]})]})]})})};fje.__docgenInfo={description:"",methods:[],displayName:"GisLayout"};export{dd as G,ZBe as P,WBe as R,ca as _,JBe as a,rje as b,KBe as c,QBe as d,nje as e,fje as f,pd as g,XBe as h,eje as i,ije as j,YBe as k,tje as l,aje as m};
